!function(e){var t={};function i(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=311)}([function(e,t,i){"use strict";i.r(t),i.d(t,"ACESFilmicToneMapping",(function(){return te})),i.d(t,"AddEquation",(function(){return k})),i.d(t,"AddOperation",(function(){return Z})),i.d(t,"AdditiveAnimationBlendMode",(function(){return Rt})),i.d(t,"AdditiveBlending",(function(){return w})),i.d(t,"AlphaFormat",(function(){return De})),i.d(t,"AlwaysDepth",(function(){return H})),i.d(t,"AlwaysStencilFunc",(function(){return ai})),i.d(t,"AmbientLight",(function(){return eu})),i.d(t,"AmbientLightProbe",(function(){return vu})),i.d(t,"AnimationClip",(function(){return kh})),i.d(t,"AnimationLoader",(function(){return Dh})),i.d(t,"AnimationMixer",(function(){return Ju})),i.d(t,"AnimationObjectGroup",(function(){return Ku})),i.d(t,"AnimationUtils",(function(){return hh})),i.d(t,"ArcCurve",(function(){return Ac})),i.d(t,"ArrayCamera",(function(){return al})),i.d(t,"ArrowHelper",(function(){return Up})),i.d(t,"Audio",(function(){return Au})),i.d(t,"AudioAnalyser",(function(){return Lu})),i.d(t,"AudioContext",(function(){return fu})),i.d(t,"AudioListener",(function(){return Iu})),i.d(t,"AudioLoader",(function(){return mu})),i.d(t,"AxesHelper",(function(){return Vp})),i.d(t,"BackSide",(function(){return m})),i.d(t,"BasicDepthPacking",(function(){return jt})),i.d(t,"BasicShadowMap",(function(){return d})),i.d(t,"Bone",(function(){return ql})),i.d(t,"BooleanKeyframeTrack",(function(){return vh})),i.d(t,"Box2",(function(){return cp})),i.d(t,"Box3",(function(){return un})),i.d(t,"Box3Helper",(function(){return zp})),i.d(t,"BoxBufferGeometry",(function(){return Yp})),i.d(t,"BoxGeometry",(function(){return fa})),i.d(t,"BoxHelper",(function(){return jp})),i.d(t,"BufferAttribute",(function(){return Ds})),i.d(t,"BufferGeometry",(function(){return Js})),i.d(t,"BufferGeometryLoader",(function(){return ou})),i.d(t,"ByteType",(function(){return Me})),i.d(t,"Cache",(function(){return Th})),i.d(t,"Camera",(function(){return wa})),i.d(t,"CameraHelper",(function(){return Dp})),i.d(t,"CanvasTexture",(function(){return Tc})),i.d(t,"CapsuleBufferGeometry",(function(){return Kp})),i.d(t,"CapsuleGeometry",(function(){return Zc})),i.d(t,"CatmullRomCurve3",(function(){return Lc})),i.d(t,"CineonToneMapping",(function(){return ee})),i.d(t,"CircleBufferGeometry",(function(){return Xp})),i.d(t,"CircleGeometry",(function(){return Jc})),i.d(t,"ClampToEdgeWrapping",(function(){return de})),i.d(t,"Clock",(function(){return Su})),i.d(t,"Color",(function(){return Is})),i.d(t,"ColorKeyframeTrack",(function(){return yh})),i.d(t,"ColorManagement",(function(){return Ji})),i.d(t,"CompressedArrayTexture",(function(){return _c})),i.d(t,"CompressedTexture",(function(){return kc})),i.d(t,"CompressedTextureLoader",(function(){return Oh})),i.d(t,"ConeBufferGeometry",(function(){return Zp})),i.d(t,"ConeGeometry",(function(){return $c})),i.d(t,"CubeCamera",(function(){return Ma})),i.d(t,"CubeReflectionMapping",(function(){return se})),i.d(t,"CubeRefractionMapping",(function(){return ae})),i.d(t,"CubeTexture",(function(){return ka})),i.d(t,"CubeTextureLoader",(function(){return jh})),i.d(t,"CubeUVReflectionMapping",(function(){return le})),i.d(t,"CubicBezierCurve",(function(){return Nc})),i.d(t,"CubicBezierCurve3",(function(){return Fc})),i.d(t,"CubicInterpolant",(function(){return ph})),i.d(t,"CullFaceBack",(function(){return o})),i.d(t,"CullFaceFront",(function(){return l})),i.d(t,"CullFaceFrontBack",(function(){return c})),i.d(t,"CullFaceNone",(function(){return r})),i.d(t,"Curve",(function(){return Cc})),i.d(t,"CurvePath",(function(){return Yc})),i.d(t,"CustomBlending",(function(){return M})),i.d(t,"CustomToneMapping",(function(){return ie})),i.d(t,"CylinderBufferGeometry",(function(){return Jp})),i.d(t,"CylinderGeometry",(function(){return Qc})),i.d(t,"Cylindrical",(function(){return op})),i.d(t,"Data3DTexture",(function(){return cn})),i.d(t,"DataArrayTexture",(function(){return on})),i.d(t,"DataTexture",(function(){return Yl})),i.d(t,"DataTextureLoader",(function(){return zh})),i.d(t,"DataUtils",(function(){return qp})),i.d(t,"DecrementStencilOp",(function(){return Kt})),i.d(t,"DecrementWrapStencilOp",(function(){return Zt})),i.d(t,"DefaultLoadingManager",(function(){return Ih})),i.d(t,"DepthFormat",(function(){return ze})),i.d(t,"DepthStencilFormat",(function(){return Be})),i.d(t,"DepthTexture",(function(){return cl})),i.d(t,"DirectionalLight",(function(){return $h})),i.d(t,"DirectionalLightHelper",(function(){return Rp})),i.d(t,"DiscreteInterpolant",(function(){return mh})),i.d(t,"DisplayP3ColorSpace",(function(){return Vt})),i.d(t,"DodecahedronBufferGeometry",(function(){return Qp})),i.d(t,"DodecahedronGeometry",(function(){return td})),i.d(t,"DoubleSide",(function(){return g})),i.d(t,"DstAlphaFactor",(function(){return L})),i.d(t,"DstColorFactor",(function(){return z})),i.d(t,"DynamicCopyUsage",(function(){return pi})),i.d(t,"DynamicDrawUsage",(function(){return oi})),i.d(t,"DynamicReadUsage",(function(){return di})),i.d(t,"EdgesGeometry",(function(){return rd})),i.d(t,"EllipseCurve",(function(){return Ic})),i.d(t,"EqualDepth",(function(){return G})),i.d(t,"EqualStencilFunc",(function(){return ei})),i.d(t,"EquirectangularReflectionMapping",(function(){return re})),i.d(t,"EquirectangularRefractionMapping",(function(){return oe})),i.d(t,"Euler",(function(){return Xn})),i.d(t,"EventDispatcher",(function(){return yi})),i.d(t,"ExtrudeBufferGeometry",(function(){return $p})),i.d(t,"ExtrudeGeometry",(function(){return Ld})),i.d(t,"FileLoader",(function(){return Eh})),i.d(t,"Float16BufferAttribute",(function(){return Hs})),i.d(t,"Float32BufferAttribute",(function(){return Us})),i.d(t,"Float64BufferAttribute",(function(){return Vs})),i.d(t,"FloatType",(function(){return Ie})),i.d(t,"Fog",(function(){return gl})),i.d(t,"FogExp2",(function(){return ml})),i.d(t,"FramebufferTexture",(function(){return Mc})),i.d(t,"FrontSide",(function(){return f})),i.d(t,"Frustum",(function(){return Ea})),i.d(t,"GLBufferAttribute",(function(){return ip})),i.d(t,"GLSL1",(function(){return mi})),i.d(t,"GLSL3",(function(){return gi})),i.d(t,"GreaterDepth",(function(){return q})),i.d(t,"GreaterEqualDepth",(function(){return W})),i.d(t,"GreaterEqualStencilFunc",(function(){return si})),i.d(t,"GreaterStencilFunc",(function(){return ii})),i.d(t,"GridHelper",(function(){return _p})),i.d(t,"Group",(function(){return rl})),i.d(t,"HalfFloatType",(function(){return Ae})),i.d(t,"HemisphereLight",(function(){return Fh})),i.d(t,"HemisphereLightHelper",(function(){return kp})),i.d(t,"HemisphereLightProbe",(function(){return gu})),i.d(t,"IcosahedronBufferGeometry",(function(){return ef})),i.d(t,"IcosahedronGeometry",(function(){return zd})),i.d(t,"ImageBitmapLoader",(function(){return uu})),i.d(t,"ImageLoader",(function(){return Lh})),i.d(t,"ImageUtils",(function(){return $i})),i.d(t,"IncrementStencilOp",(function(){return Yt})),i.d(t,"IncrementWrapStencilOp",(function(){return Xt})),i.d(t,"InstancedBufferAttribute",(function(){return Jl})),i.d(t,"InstancedBufferGeometry",(function(){return ru})),i.d(t,"InstancedInterleavedBuffer",(function(){return tp})),i.d(t,"InstancedMesh",(function(){return nc})),i.d(t,"Int16BufferAttribute",(function(){return zs})),i.d(t,"Int32BufferAttribute",(function(){return Ns})),i.d(t,"Int8BufferAttribute",(function(){return Os})),i.d(t,"IntType",(function(){return Te})),i.d(t,"InterleavedBuffer",(function(){return yl})),i.d(t,"InterleavedBufferAttribute",(function(){return wl})),i.d(t,"Interpolant",(function(){return uh})),i.d(t,"InterpolateDiscrete",(function(){return Mt})),i.d(t,"InterpolateLinear",(function(){return kt})),i.d(t,"InterpolateSmooth",(function(){return _t})),i.d(t,"InvertStencilOp",(function(){return Jt})),i.d(t,"KeepStencilOp",(function(){return Wt})),i.d(t,"KeyframeTrack",(function(){return gh})),i.d(t,"LOD",(function(){return Nl})),i.d(t,"LatheBufferGeometry",(function(){return tf})),i.d(t,"LatheGeometry",(function(){return Xc})),i.d(t,"Layers",(function(){return Zn})),i.d(t,"LessDepth",(function(){return U})),i.d(t,"LessEqualDepth",(function(){return V})),i.d(t,"LessEqualStencilFunc",(function(){return ti})),i.d(t,"LessStencilFunc",(function(){return $t})),i.d(t,"Light",(function(){return Nh})),i.d(t,"LightProbe",(function(){return nu})),i.d(t,"Line",(function(){return dc})),i.d(t,"Line3",(function(){return up})),i.d(t,"LineBasicMaterial",(function(){return sc})),i.d(t,"LineCurve",(function(){return Hc})),i.d(t,"LineCurve3",(function(){return Uc})),i.d(t,"LineDashedMaterial",(function(){return sh})),i.d(t,"LineLoop",(function(){return fc})),i.d(t,"LineSegments",(function(){return pc})),i.d(t,"LinearEncoding",(function(){return Ot})),i.d(t,"LinearFilter",(function(){return ve})),i.d(t,"LinearInterpolant",(function(){return fh})),i.d(t,"LinearMipMapLinearFilter",(function(){return xe})),i.d(t,"LinearMipMapNearestFilter",(function(){return be})),i.d(t,"LinearMipmapLinearFilter",(function(){return we})),i.d(t,"LinearMipmapNearestFilter",(function(){return ye})),i.d(t,"LinearSRGBColorSpace",(function(){return Ut})),i.d(t,"LinearToneMapping",(function(){return Q})),i.d(t,"Loader",(function(){return Ah})),i.d(t,"LoaderUtils",(function(){return au})),i.d(t,"LoadingManager",(function(){return Ch})),i.d(t,"LoopOnce",(function(){return wt})),i.d(t,"LoopPingPong",(function(){return St})),i.d(t,"LoopRepeat",(function(){return xt})),i.d(t,"LuminanceAlphaFormat",(function(){return je})),i.d(t,"LuminanceFormat",(function(){return Le})),i.d(t,"MOUSE",(function(){return s})),i.d(t,"Material",(function(){return Ms})),i.d(t,"MaterialLoader",(function(){return su})),i.d(t,"MathUtils",(function(){return Ei})),i.d(t,"Matrix3",(function(){return Oi})),i.d(t,"Matrix4",(function(){return Nn})),i.d(t,"MaxEquation",(function(){return I})),i.d(t,"Mesh",(function(){return ua})),i.d(t,"MeshBasicMaterial",(function(){return Rs})),i.d(t,"MeshDepthMaterial",(function(){return Jo})),i.d(t,"MeshDistanceMaterial",(function(){return Qo})),i.d(t,"MeshLambertMaterial",(function(){return ih})),i.d(t,"MeshMatcapMaterial",(function(){return nh})),i.d(t,"MeshNormalMaterial",(function(){return th})),i.d(t,"MeshPhongMaterial",(function(){return $d})),i.d(t,"MeshPhysicalMaterial",(function(){return Qd})),i.d(t,"MeshStandardMaterial",(function(){return Jd})),i.d(t,"MeshToonMaterial",(function(){return eh})),i.d(t,"MinEquation",(function(){return C})),i.d(t,"MirroredRepeatWrapping",(function(){return he})),i.d(t,"MixOperation",(function(){return X})),i.d(t,"MultiplyBlending",(function(){return S})),i.d(t,"MultiplyOperation",(function(){return K})),i.d(t,"NearestFilter",(function(){return ue})),i.d(t,"NearestMipMapLinearFilter",(function(){return ge})),i.d(t,"NearestMipMapNearestFilter",(function(){return fe})),i.d(t,"NearestMipmapLinearFilter",(function(){return me})),i.d(t,"NearestMipmapNearestFilter",(function(){return pe})),i.d(t,"NeverDepth",(function(){return F})),i.d(t,"NeverStencilFunc",(function(){return Qt})),i.d(t,"NoBlending",(function(){return y})),i.d(t,"NoColorSpace",(function(){return Ft})),i.d(t,"NoToneMapping",(function(){return J})),i.d(t,"NormalAnimationBlendMode",(function(){return At})),i.d(t,"NormalBlending",(function(){return b})),i.d(t,"NotEqualDepth",(function(){return Y})),i.d(t,"NotEqualStencilFunc",(function(){return ni})),i.d(t,"NumberKeyframeTrack",(function(){return bh})),i.d(t,"Object3D",(function(){return ds})),i.d(t,"ObjectLoader",(function(){return lu})),i.d(t,"ObjectSpaceNormalMap",(function(){return Nt})),i.d(t,"OctahedronBufferGeometry",(function(){return nf})),i.d(t,"OctahedronGeometry",(function(){return Bd})),i.d(t,"OneFactor",(function(){return R})),i.d(t,"OneMinusDstAlphaFactor",(function(){return j})),i.d(t,"OneMinusDstColorFactor",(function(){return B})),i.d(t,"OneMinusSrcAlphaFactor",(function(){return O})),i.d(t,"OneMinusSrcColorFactor",(function(){return E})),i.d(t,"OrthographicCamera",(function(){return qa})),i.d(t,"PCFShadowMap",(function(){return h})),i.d(t,"PCFSoftShadowMap",(function(){return u})),i.d(t,"PMREMGenerator",(function(){return tr})),i.d(t,"Path",(function(){return Kc})),i.d(t,"PerspectiveCamera",(function(){return xa})),i.d(t,"Plane",(function(){return Aa})),i.d(t,"PlaneBufferGeometry",(function(){return sf})),i.d(t,"PlaneGeometry",(function(){return La})),i.d(t,"PlaneHelper",(function(){return Bp})),i.d(t,"PointLight",(function(){return Jh})),i.d(t,"PointLightHelper",(function(){return wp})),i.d(t,"Points",(function(){return wc})),i.d(t,"PointsMaterial",(function(){return mc})),i.d(t,"PolarGridHelper",(function(){return Tp})),i.d(t,"PolyhedronBufferGeometry",(function(){return af})),i.d(t,"PolyhedronGeometry",(function(){return ed})),i.d(t,"PositionalAudio",(function(){return Ou})),i.d(t,"PropertyBinding",(function(){return Yu})),i.d(t,"PropertyMixer",(function(){return ju})),i.d(t,"QuadraticBezierCurve",(function(){return Vc})),i.d(t,"QuadraticBezierCurve3",(function(){return Gc})),i.d(t,"Quaternion",(function(){return Fi})),i.d(t,"QuaternionKeyframeTrack",(function(){return xh})),i.d(t,"QuaternionLinearInterpolant",(function(){return wh})),i.d(t,"RED_GREEN_RGTC2_Format",(function(){return yt})),i.d(t,"RED_RGTC1_Format",(function(){return gt})),i.d(t,"REVISION",(function(){return n})),i.d(t,"RGBADepthPacking",(function(){return zt})),i.d(t,"RGBAFormat",(function(){return Oe})),i.d(t,"RGBAIntegerFormat",(function(){return Ve})),i.d(t,"RGBA_ASTC_10x10_Format",(function(){return ut})),i.d(t,"RGBA_ASTC_10x5_Format",(function(){return ct})),i.d(t,"RGBA_ASTC_10x6_Format",(function(){return dt})),i.d(t,"RGBA_ASTC_10x8_Format",(function(){return ht})),i.d(t,"RGBA_ASTC_12x10_Format",(function(){return pt})),i.d(t,"RGBA_ASTC_12x12_Format",(function(){return ft})),i.d(t,"RGBA_ASTC_4x4_Format",(function(){return tt})),i.d(t,"RGBA_ASTC_5x4_Format",(function(){return it})),i.d(t,"RGBA_ASTC_5x5_Format",(function(){return nt})),i.d(t,"RGBA_ASTC_6x5_Format",(function(){return st})),i.d(t,"RGBA_ASTC_6x6_Format",(function(){return at})),i.d(t,"RGBA_ASTC_8x5_Format",(function(){return rt})),i.d(t,"RGBA_ASTC_8x6_Format",(function(){return ot})),i.d(t,"RGBA_ASTC_8x8_Format",(function(){return lt})),i.d(t,"RGBA_BPTC_Format",(function(){return mt})),i.d(t,"RGBA_ETC2_EAC_Format",(function(){return et})),i.d(t,"RGBA_PVRTC_2BPPV1_Format",(function(){return Je})),i.d(t,"RGBA_PVRTC_4BPPV1_Format",(function(){return Ze})),i.d(t,"RGBA_S3TC_DXT1_Format",(function(){return We})),i.d(t,"RGBA_S3TC_DXT3_Format",(function(){return qe})),i.d(t,"RGBA_S3TC_DXT5_Format",(function(){return Ye})),i.d(t,"RGB_ETC1_Format",(function(){return Qe})),i.d(t,"RGB_ETC2_Format",(function(){return $e})),i.d(t,"RGB_PVRTC_2BPPV1_Format",(function(){return Xe})),i.d(t,"RGB_PVRTC_4BPPV1_Format",(function(){return Ke})),i.d(t,"RGB_S3TC_DXT1_Format",(function(){return Ge})),i.d(t,"RGFormat",(function(){return He})),i.d(t,"RGIntegerFormat",(function(){return Ue})),i.d(t,"RawShaderMaterial",(function(){return Zd})),i.d(t,"Ray",(function(){return Bn})),i.d(t,"Raycaster",(function(){return np})),i.d(t,"RectAreaLight",(function(){return tu})),i.d(t,"RedFormat",(function(){return Ne})),i.d(t,"RedIntegerFormat",(function(){return Fe})),i.d(t,"ReinhardToneMapping",(function(){return $})),i.d(t,"RepeatWrapping",(function(){return ce})),i.d(t,"ReplaceStencilOp",(function(){return qt})),i.d(t,"ReverseSubtractEquation",(function(){return T})),i.d(t,"RingBufferGeometry",(function(){return rf})),i.d(t,"RingGeometry",(function(){return Nd})),i.d(t,"SIGNED_RED_GREEN_RGTC2_Format",(function(){return bt})),i.d(t,"SIGNED_RED_RGTC1_Format",(function(){return vt})),i.d(t,"SRGBColorSpace",(function(){return Ht})),i.d(t,"Scene",(function(){return vl})),i.d(t,"ShaderChunk",(function(){return ja})),i.d(t,"ShaderLib",(function(){return Ba})),i.d(t,"ShaderMaterial",(function(){return ba})),i.d(t,"ShadowMaterial",(function(){return Xd})),i.d(t,"Shape",(function(){return od})),i.d(t,"ShapeBufferGeometry",(function(){return of})),i.d(t,"ShapeGeometry",(function(){return Fd})),i.d(t,"ShapePath",(function(){return Gp})),i.d(t,"ShapeUtils",(function(){return Ed})),i.d(t,"ShortType",(function(){return ke})),i.d(t,"Skeleton",(function(){return Zl})),i.d(t,"SkeletonHelper",(function(){return yp})),i.d(t,"SkinnedMesh",(function(){return Wl})),i.d(t,"Source",(function(){return en})),i.d(t,"Sphere",(function(){return Rn})),i.d(t,"SphereBufferGeometry",(function(){return lf})),i.d(t,"SphereGeometry",(function(){return Hd})),i.d(t,"Spherical",(function(){return rp})),i.d(t,"SphericalHarmonics3",(function(){return iu})),i.d(t,"SplineCurve",(function(){return Wc})),i.d(t,"SpotLight",(function(){return qh})),i.d(t,"SpotLightHelper",(function(){return fp})),i.d(t,"Sprite",(function(){return Ll})),i.d(t,"SpriteMaterial",(function(){return xl})),i.d(t,"SrcAlphaFactor",(function(){return D})),i.d(t,"SrcAlphaSaturateFactor",(function(){return N})),i.d(t,"SrcColorFactor",(function(){return P})),i.d(t,"StaticCopyUsage",(function(){return ui})),i.d(t,"StaticDrawUsage",(function(){return ri})),i.d(t,"StaticReadUsage",(function(){return ci})),i.d(t,"StereoCamera",(function(){return xu})),i.d(t,"StreamCopyUsage",(function(){return fi})),i.d(t,"StreamDrawUsage",(function(){return li})),i.d(t,"StreamReadUsage",(function(){return hi})),i.d(t,"StringKeyframeTrack",(function(){return Sh})),i.d(t,"SubtractEquation",(function(){return _})),i.d(t,"SubtractiveBlending",(function(){return x})),i.d(t,"TOUCH",(function(){return a})),i.d(t,"TangentSpaceNormalMap",(function(){return Bt})),i.d(t,"TetrahedronBufferGeometry",(function(){return cf})),i.d(t,"TetrahedronGeometry",(function(){return Ud})),i.d(t,"Texture",(function(){return sn})),i.d(t,"TextureLoader",(function(){return Bh})),i.d(t,"TorusBufferGeometry",(function(){return df})),i.d(t,"TorusGeometry",(function(){return Vd})),i.d(t,"TorusKnotBufferGeometry",(function(){return hf})),i.d(t,"TorusKnotGeometry",(function(){return Gd})),i.d(t,"Triangle",(function(){return xs})),i.d(t,"TriangleFanDrawMode",(function(){return Dt})),i.d(t,"TriangleStripDrawMode",(function(){return Et})),i.d(t,"TrianglesDrawMode",(function(){return Pt})),i.d(t,"TubeBufferGeometry",(function(){return uf})),i.d(t,"TubeGeometry",(function(){return Wd})),i.d(t,"TwoPassDoubleSide",(function(){return v})),i.d(t,"UVMapping",(function(){return ne})),i.d(t,"Uint16BufferAttribute",(function(){return Bs})),i.d(t,"Uint32BufferAttribute",(function(){return Fs})),i.d(t,"Uint8BufferAttribute",(function(){return Ls})),i.d(t,"Uint8ClampedBufferAttribute",(function(){return js})),i.d(t,"Uniform",(function(){return Qu})),i.d(t,"UniformsGroup",(function(){return ep})),i.d(t,"UniformsLib",(function(){return za})),i.d(t,"UniformsUtils",(function(){return ya})),i.d(t,"UnsignedByteType",(function(){return Se})),i.d(t,"UnsignedInt248Type",(function(){return Ee})),i.d(t,"UnsignedIntType",(function(){return Ce})),i.d(t,"UnsignedShort4444Type",(function(){return Re})),i.d(t,"UnsignedShort5551Type",(function(){return Pe})),i.d(t,"UnsignedShortType",(function(){return _e})),i.d(t,"VSMShadowMap",(function(){return p})),i.d(t,"Vector2",(function(){return Di})),i.d(t,"Vector3",(function(){return Hi})),i.d(t,"Vector4",(function(){return an})),i.d(t,"VectorKeyframeTrack",(function(){return Mh})),i.d(t,"VideoTexture",(function(){return Sc})),i.d(t,"WebGL1Renderer",(function(){return fl})),i.d(t,"WebGL3DRenderTarget",(function(){return dn})),i.d(t,"WebGLArrayRenderTarget",(function(){return ln})),i.d(t,"WebGLCubeRenderTarget",(function(){return _a})),i.d(t,"WebGLMultipleRenderTargets",(function(){return hn})),i.d(t,"WebGLRenderTarget",(function(){return rn})),i.d(t,"WebGLRenderer",(function(){return pl})),i.d(t,"WebGLUtils",(function(){return sl})),i.d(t,"WireframeGeometry",(function(){return qd})),i.d(t,"WrapAroundEnding",(function(){return It})),i.d(t,"ZeroCurvatureEnding",(function(){return Tt})),i.d(t,"ZeroFactor",(function(){return A})),i.d(t,"ZeroSlopeEnding",(function(){return Ct})),i.d(t,"ZeroStencilOp",(function(){return Gt})),i.d(t,"_SRGBAFormat",(function(){return vi})),i.d(t,"sRGBEncoding",(function(){return Lt}));const n="150",s={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},a={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},r=0,o=1,l=2,c=3,d=0,h=1,u=2,p=3,f=0,m=1,g=2,v=2,y=0,b=1,w=2,x=3,S=4,M=5,k=100,_=101,T=102,C=103,I=104,A=200,R=201,P=202,E=203,D=204,O=205,L=206,j=207,z=208,B=209,N=210,F=0,H=1,U=2,V=3,G=4,W=5,q=6,Y=7,K=0,X=1,Z=2,J=0,Q=1,$=2,ee=3,te=4,ie=5,ne=300,se=301,ae=302,re=303,oe=304,le=306,ce=1e3,de=1001,he=1002,ue=1003,pe=1004,fe=1004,me=1005,ge=1005,ve=1006,ye=1007,be=1007,we=1008,xe=1008,Se=1009,Me=1010,ke=1011,_e=1012,Te=1013,Ce=1014,Ie=1015,Ae=1016,Re=1017,Pe=1018,Ee=1020,De=1021,Oe=1023,Le=1024,je=1025,ze=1026,Be=1027,Ne=1028,Fe=1029,He=1030,Ue=1031,Ve=1033,Ge=33776,We=33777,qe=33778,Ye=33779,Ke=35840,Xe=35841,Ze=35842,Je=35843,Qe=36196,$e=37492,et=37496,tt=37808,it=37809,nt=37810,st=37811,at=37812,rt=37813,ot=37814,lt=37815,ct=37816,dt=37817,ht=37818,ut=37819,pt=37820,ft=37821,mt=36492,gt=36283,vt=36284,yt=36285,bt=36286,wt=2200,xt=2201,St=2202,Mt=2300,kt=2301,_t=2302,Tt=2400,Ct=2401,It=2402,At=2500,Rt=2501,Pt=0,Et=1,Dt=2,Ot=3e3,Lt=3001,jt=3200,zt=3201,Bt=0,Nt=1,Ft="",Ht="srgb",Ut="srgb-linear",Vt="display-p3",Gt=0,Wt=7680,qt=7681,Yt=7682,Kt=7683,Xt=34055,Zt=34056,Jt=5386,Qt=512,$t=513,ei=514,ti=515,ii=516,ni=517,si=518,ai=519,ri=35044,oi=35048,li=35040,ci=35045,di=35049,hi=35041,ui=35046,pi=35050,fi=35042,mi="100",gi="300 es",vi=1035;class yi{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const i=this._listeners;void 0===i[e]&&(i[e]=[]),-1===i[e].indexOf(t)&&i[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const i=this._listeners;return void 0!==i[e]&&-1!==i[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const i=this._listeners[e];if(void 0!==i){const e=i.indexOf(t);-1!==e&&i.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const i=t.slice(0);for(let t=0,n=i.length;t<n;t++)i[t].call(this,e);e.target=null}}}const bi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let wi=1234567;const xi=Math.PI/180,Si=180/Math.PI;function Mi(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,i=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(bi[255&e]+bi[e>>8&255]+bi[e>>16&255]+bi[e>>24&255]+"-"+bi[255&t]+bi[t>>8&255]+"-"+bi[t>>16&15|64]+bi[t>>24&255]+"-"+bi[63&i|128]+bi[i>>8&255]+"-"+bi[i>>16&255]+bi[i>>24&255]+bi[255&n]+bi[n>>8&255]+bi[n>>16&255]+bi[n>>24&255]).toLowerCase()}function ki(e,t,i){return Math.max(t,Math.min(i,e))}function _i(e,t){return(e%t+t)%t}function Ti(e,t,i){return(1-i)*e+i*t}function Ci(e){return 0==(e&e-1)&&0!==e}function Ii(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function Ai(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function Ri(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function Pi(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}const Ei={DEG2RAD:xi,RAD2DEG:Si,generateUUID:Mi,clamp:ki,euclideanModulo:_i,mapLinear:function(e,t,i,n,s){return n+(e-t)*(s-n)/(i-t)},inverseLerp:function(e,t,i){return e!==t?(i-e)/(t-e):0},lerp:Ti,damp:function(e,t,i,n){return Ti(e,t,1-Math.exp(-i*n))},pingpong:function(e,t=1){return t-Math.abs(_i(e,2*t)-t)},smoothstep:function(e,t,i){return e<=t?0:e>=i?1:(e=(e-t)/(i-t))*e*(3-2*e)},smootherstep:function(e,t,i){return e<=t?0:e>=i?1:(e=(e-t)/(i-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){void 0!==e&&(wi=e);let t=wi+=1831565813;return t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296},degToRad:function(e){return e*xi},radToDeg:function(e){return e*Si},isPowerOfTwo:Ci,ceilPowerOfTwo:Ii,floorPowerOfTwo:Ai,setQuaternionFromProperEuler:function(e,t,i,n,s){const a=Math.cos,r=Math.sin,o=a(i/2),l=r(i/2),c=a((t+n)/2),d=r((t+n)/2),h=a((t-n)/2),u=r((t-n)/2),p=a((n-t)/2),f=r((n-t)/2);switch(s){case"XYX":e.set(o*d,l*h,l*u,o*c);break;case"YZY":e.set(l*u,o*d,l*h,o*c);break;case"ZXZ":e.set(l*h,l*u,o*d,o*c);break;case"XZX":e.set(o*d,l*f,l*p,o*c);break;case"YXY":e.set(l*p,o*d,l*f,o*c);break;case"ZYZ":e.set(l*f,l*p,o*d,o*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}},normalize:Pi,denormalize:Ri};class Di{constructor(e=0,t=0){Di.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,n=e.elements;return this.x=n[0]*t+n[3]*i+n[6],this.y=n[1]*t+n[4]*i+n[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),n=Math.sin(t),s=this.x-e.x,a=this.y-e.y;return this.x=s*i-a*n+e.x,this.y=s*n+a*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Oi{constructor(){Oi.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,i,n,s,a,r,o,l){const c=this.elements;return c[0]=e,c[1]=n,c[2]=r,c[3]=t,c[4]=s,c[5]=o,c[6]=i,c[7]=a,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,n=t.elements,s=this.elements,a=i[0],r=i[3],o=i[6],l=i[1],c=i[4],d=i[7],h=i[2],u=i[5],p=i[8],f=n[0],m=n[3],g=n[6],v=n[1],y=n[4],b=n[7],w=n[2],x=n[5],S=n[8];return s[0]=a*f+r*v+o*w,s[3]=a*m+r*y+o*x,s[6]=a*g+r*b+o*S,s[1]=l*f+c*v+d*w,s[4]=l*m+c*y+d*x,s[7]=l*g+c*b+d*S,s[2]=h*f+u*v+p*w,s[5]=h*m+u*y+p*x,s[8]=h*g+u*b+p*S,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],n=e[2],s=e[3],a=e[4],r=e[5],o=e[6],l=e[7],c=e[8];return t*a*c-t*r*l-i*s*c+i*r*o+n*s*l-n*a*o}invert(){const e=this.elements,t=e[0],i=e[1],n=e[2],s=e[3],a=e[4],r=e[5],o=e[6],l=e[7],c=e[8],d=c*a-r*l,h=r*o-c*s,u=l*s-a*o,p=t*d+i*h+n*u;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const f=1/p;return e[0]=d*f,e[1]=(n*l-c*i)*f,e[2]=(r*i-n*a)*f,e[3]=h*f,e[4]=(c*t-n*o)*f,e[5]=(n*s-r*t)*f,e[6]=u*f,e[7]=(i*o-l*t)*f,e[8]=(a*t-i*s)*f,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,n,s,a,r){const o=Math.cos(s),l=Math.sin(s);return this.set(i*o,i*l,-i*(o*a+l*r)+a+e,-n*l,n*o,-n*(-l*a+o*r)+r+t,0,0,1),this}scale(e,t){return this.premultiply(Li.makeScale(e,t)),this}rotate(e){return this.premultiply(Li.makeRotation(-e)),this}translate(e,t){return this.premultiply(Li.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let e=0;e<9;e++)if(t[e]!==i[e])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const Li=new Oi;function ji(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}const zi={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function Bi(e,t){return new zi[e](t)}function Ni(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}class Fi{constructor(e=0,t=0,i=0,n=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=n}static slerpFlat(e,t,i,n,s,a,r){let o=i[n+0],l=i[n+1],c=i[n+2],d=i[n+3];const h=s[a+0],u=s[a+1],p=s[a+2],f=s[a+3];if(0===r)return e[t+0]=o,e[t+1]=l,e[t+2]=c,void(e[t+3]=d);if(1===r)return e[t+0]=h,e[t+1]=u,e[t+2]=p,void(e[t+3]=f);if(d!==f||o!==h||l!==u||c!==p){let e=1-r;const t=o*h+l*u+c*p+d*f,i=t>=0?1:-1,n=1-t*t;if(n>Number.EPSILON){const s=Math.sqrt(n),a=Math.atan2(s,t*i);e=Math.sin(e*a)/s,r=Math.sin(r*a)/s}const s=r*i;if(o=o*e+h*s,l=l*e+u*s,c=c*e+p*s,d=d*e+f*s,e===1-r){const e=1/Math.sqrt(o*o+l*l+c*c+d*d);o*=e,l*=e,c*=e,d*=e}}e[t]=o,e[t+1]=l,e[t+2]=c,e[t+3]=d}static multiplyQuaternionsFlat(e,t,i,n,s,a){const r=i[n],o=i[n+1],l=i[n+2],c=i[n+3],d=s[a],h=s[a+1],u=s[a+2],p=s[a+3];return e[t]=r*p+c*d+o*u-l*h,e[t+1]=o*p+c*h+l*d-r*u,e[t+2]=l*p+c*u+r*h-o*d,e[t+3]=c*p-r*d-o*h-l*u,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,n){return this._x=e,this._y=t,this._z=i,this._w=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const i=e._x,n=e._y,s=e._z,a=e._order,r=Math.cos,o=Math.sin,l=r(i/2),c=r(n/2),d=r(s/2),h=o(i/2),u=o(n/2),p=o(s/2);switch(a){case"XYZ":this._x=h*c*d+l*u*p,this._y=l*u*d-h*c*p,this._z=l*c*p+h*u*d,this._w=l*c*d-h*u*p;break;case"YXZ":this._x=h*c*d+l*u*p,this._y=l*u*d-h*c*p,this._z=l*c*p-h*u*d,this._w=l*c*d+h*u*p;break;case"ZXY":this._x=h*c*d-l*u*p,this._y=l*u*d+h*c*p,this._z=l*c*p+h*u*d,this._w=l*c*d-h*u*p;break;case"ZYX":this._x=h*c*d-l*u*p,this._y=l*u*d+h*c*p,this._z=l*c*p-h*u*d,this._w=l*c*d+h*u*p;break;case"YZX":this._x=h*c*d+l*u*p,this._y=l*u*d+h*c*p,this._z=l*c*p-h*u*d,this._w=l*c*d-h*u*p;break;case"XZY":this._x=h*c*d-l*u*p,this._y=l*u*d-h*c*p,this._z=l*c*p+h*u*d,this._w=l*c*d+h*u*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,n=Math.sin(i);return this._x=e.x*n,this._y=e.y*n,this._z=e.z*n,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],n=t[4],s=t[8],a=t[1],r=t[5],o=t[9],l=t[2],c=t[6],d=t[10],h=i+r+d;if(h>0){const e=.5/Math.sqrt(h+1);this._w=.25/e,this._x=(c-o)*e,this._y=(s-l)*e,this._z=(a-n)*e}else if(i>r&&i>d){const e=2*Math.sqrt(1+i-r-d);this._w=(c-o)/e,this._x=.25*e,this._y=(n+a)/e,this._z=(s+l)/e}else if(r>d){const e=2*Math.sqrt(1+r-i-d);this._w=(s-l)/e,this._x=(n+a)/e,this._y=.25*e,this._z=(o+c)/e}else{const e=2*Math.sqrt(1+d-i-r);this._w=(a-n)/e,this._x=(s+l)/e,this._y=(o+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(ki(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(0===i)return this;const n=Math.min(1,t/i);return this.slerp(e,n),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,n=e._y,s=e._z,a=e._w,r=t._x,o=t._y,l=t._z,c=t._w;return this._x=i*c+a*r+n*l-s*o,this._y=n*c+a*o+s*r-i*l,this._z=s*c+a*l+i*o-n*r,this._w=a*c-i*r-n*o-s*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const i=this._x,n=this._y,s=this._z,a=this._w;let r=a*e._w+i*e._x+n*e._y+s*e._z;if(r<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,r=-r):this.copy(e),r>=1)return this._w=a,this._x=i,this._y=n,this._z=s,this;const o=1-r*r;if(o<=Number.EPSILON){const e=1-t;return this._w=e*a+t*this._w,this._x=e*i+t*this._x,this._y=e*n+t*this._y,this._z=e*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(o),c=Math.atan2(l,r),d=Math.sin((1-t)*c)/l,h=Math.sin(t*c)/l;return this._w=a*d+this._w*h,this._x=i*d+this._x*h,this._y=n*d+this._y*h,this._z=s*d+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),n=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(n),i*Math.sin(s),i*Math.cos(s),t*Math.sin(n))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Hi{constructor(e=0,t=0,i=0){Hi.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i=this.z){return this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(Vi.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Vi.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,n=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*n,this.y=s[1]*t+s[4]*i+s[7]*n,this.z=s[2]*t+s[5]*i+s[8]*n,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,n=this.z,s=e.elements,a=1/(s[3]*t+s[7]*i+s[11]*n+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*n+s[12])*a,this.y=(s[1]*t+s[5]*i+s[9]*n+s[13])*a,this.z=(s[2]*t+s[6]*i+s[10]*n+s[14])*a,this}applyQuaternion(e){const t=this.x,i=this.y,n=this.z,s=e.x,a=e.y,r=e.z,o=e.w,l=o*t+a*n-r*i,c=o*i+r*t-s*n,d=o*n+s*i-a*t,h=-s*t-a*i-r*n;return this.x=l*o+h*-s+c*-r-d*-a,this.y=c*o+h*-a+d*-s-l*-r,this.z=d*o+h*-r+l*-a-c*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,n=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*n,this.y=s[1]*t+s[5]*i+s[9]*n,this.z=s[2]*t+s[6]*i+s[10]*n,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,n=e.y,s=e.z,a=t.x,r=t.y,o=t.z;return this.x=n*o-s*r,this.y=s*a-i*o,this.z=i*r-n*a,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return Ui.copy(this).projectOnVector(e),this.sub(Ui)}reflect(e){return this.sub(Ui.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(ki(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,n=this.z-e.z;return t*t+i*i+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const n=Math.sin(t)*e;return this.x=n*Math.sin(i),this.y=Math.cos(t)*e,this.z=n*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),n=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=n,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Ui=new Hi,Vi=new Fi;function Gi(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function Wi(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}const qi=(new Oi).fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),Yi=(new Oi).fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]),Ki=new Hi;const Xi={[Ut]:e=>e,[Ht]:e=>e.convertSRGBToLinear(),[Vt]:function(e){return e.convertSRGBToLinear(),Ki.set(e.r,e.g,e.b).applyMatrix3(Yi),e.setRGB(Ki.x,Ki.y,Ki.z)}},Zi={[Ut]:e=>e,[Ht]:e=>e.convertLinearToSRGB(),[Vt]:function(e){return Ki.set(e.r,e.g,e.b).applyMatrix3(qi),e.setRGB(Ki.x,Ki.y,Ki.z).convertLinearToSRGB()}},Ji={enabled:!1,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(e){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!e},get workingColorSpace(){return Ut},set workingColorSpace(e){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(e,t,i){if(!1===this.enabled||t===i||!t||!i)return e;const n=Xi[t],s=Zi[i];if(void 0===n||void 0===s)throw new Error('Unsupported color space conversion, "'+t+'" to "'+i+'".');return s(n(e))},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)}};let Qi;class $i{static getDataURL(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Qi&&(Qi=Ni("canvas")),Qi.width=e.width,Qi.height=e.height;const i=Qi.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=Qi}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const t=Ni("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const n=i.getImageData(0,0,e.width,e.height),s=n.data;for(let e=0;e<s.length;e++)s[e]=255*Gi(s[e]/255);return i.putImageData(n,0,0),t}if(e.data){const t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*Gi(t[e]/255)):t[e]=Gi(t[e]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class en{constructor(e=null){this.isSource=!0,this.uuid=Mi(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const i={uuid:this.uuid,url:""},n=this.data;if(null!==n){let e;if(Array.isArray(n)){e=[];for(let t=0,i=n.length;t<i;t++)n[t].isDataTexture?e.push(tn(n[t].image)):e.push(tn(n[t]))}else e=tn(n);i.url=e}return t||(e.images[this.uuid]=i),i}}function tn(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?$i.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let nn=0;class sn extends yi{constructor(e=sn.DEFAULT_IMAGE,t=sn.DEFAULT_MAPPING,i=de,n=de,s=ve,a=we,r=Oe,o=Se,l=sn.DEFAULT_ANISOTROPY,c=Ot){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:nn++}),this.uuid=Mi(),this.name="",this.source=new en(e),this.mipmaps=[],this.mapping=t,this.wrapS=i,this.wrapT=n,this.magFilter=s,this.minFilter=a,this.anisotropy=l,this.format=r,this.internalFormat=null,this.type=o,this.offset=new Di(0,0),this.repeat=new Di(1,1),this.center=new Di(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Oi,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==ne)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case ce:e.x=e.x-Math.floor(e.x);break;case de:e.x=e.x<0?0:1;break;case he:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case ce:e.y=e.y-Math.floor(e.y);break;case de:e.y=e.y<0?0:1;break;case he:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}}sn.DEFAULT_IMAGE=null,sn.DEFAULT_MAPPING=ne,sn.DEFAULT_ANISOTROPY=1;class an{constructor(e=0,t=0,i=0,n=1){an.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=n}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,n){return this.x=e,this.y=t,this.z=i,this.w=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,n=this.z,s=this.w,a=e.elements;return this.x=a[0]*t+a[4]*i+a[8]*n+a[12]*s,this.y=a[1]*t+a[5]*i+a[9]*n+a[13]*s,this.z=a[2]*t+a[6]*i+a[10]*n+a[14]*s,this.w=a[3]*t+a[7]*i+a[11]*n+a[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,n,s;const a=.01,r=.1,o=e.elements,l=o[0],c=o[4],d=o[8],h=o[1],u=o[5],p=o[9],f=o[2],m=o[6],g=o[10];if(Math.abs(c-h)<a&&Math.abs(d-f)<a&&Math.abs(p-m)<a){if(Math.abs(c+h)<r&&Math.abs(d+f)<r&&Math.abs(p+m)<r&&Math.abs(l+u+g-3)<r)return this.set(1,0,0,0),this;t=Math.PI;const e=(l+1)/2,o=(u+1)/2,v=(g+1)/2,y=(c+h)/4,b=(d+f)/4,w=(p+m)/4;return e>o&&e>v?e<a?(i=0,n=.707106781,s=.707106781):(i=Math.sqrt(e),n=y/i,s=b/i):o>v?o<a?(i=.707106781,n=0,s=.707106781):(n=Math.sqrt(o),i=y/n,s=w/n):v<a?(i=.707106781,n=.707106781,s=0):(s=Math.sqrt(v),i=b/s,n=w/s),this.set(i,n,s,t),this}let v=Math.sqrt((m-p)*(m-p)+(d-f)*(d-f)+(h-c)*(h-c));return Math.abs(v)<.001&&(v=1),this.x=(m-p)/v,this.y=(d-f)/v,this.z=(h-c)/v,this.w=Math.acos((l+u+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class rn extends yi{constructor(e=1,t=1,i={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new an(0,0,e,t),this.scissorTest=!1,this.viewport=new an(0,0,e,t);const n={width:e,height:t,depth:1};this.texture=new sn(n,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,this.texture.internalFormat=void 0!==i.internalFormat?i.internalFormat:null,this.texture.minFilter=void 0!==i.minFilter?i.minFilter:ve,this.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,this.stencilBuffer=void 0!==i.stencilBuffer&&i.stencilBuffer,this.depthTexture=void 0!==i.depthTexture?i.depthTexture:null,this.samples=void 0!==i.samples?i.samples:0}setSize(e,t,i=1){this.width===e&&this.height===t&&this.depth===i||(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new en(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class on extends sn{constructor(e=null,t=1,i=1,n=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:n},this.magFilter=ue,this.minFilter=ue,this.wrapR=de,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class ln extends rn{constructor(e=1,t=1,i=1){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new on(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class cn extends sn{constructor(e=null,t=1,i=1,n=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:n},this.magFilter=ue,this.minFilter=ue,this.wrapR=de,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class dn extends rn{constructor(e=1,t=1,i=1){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new cn(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class hn extends rn{constructor(e=1,t=1,i=1,n={}){super(e,t,n),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let e=0;e<i;e++)this.texture[e]=s.clone(),this.texture[e].isRenderTargetTexture=!0}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let n=0,s=this.texture.length;n<s;n++)this.texture[n].image.width=e,this.texture[n].image.height=t,this.texture[n].image.depth=i;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,i=e.texture.length;t<i;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class un{constructor(e=new Hi(1/0,1/0,1/0),t=new Hi(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,i=1/0,n=1/0,s=-1/0,a=-1/0,r=-1/0;for(let o=0,l=e.length;o<l;o+=3){const l=e[o],c=e[o+1],d=e[o+2];l<t&&(t=l),c<i&&(i=c),d<n&&(n=d),l>s&&(s=l),c>a&&(a=c),d>r&&(r=d)}return this.min.set(t,i,n),this.max.set(s,a,r),this}setFromBufferAttribute(e){let t=1/0,i=1/0,n=1/0,s=-1/0,a=-1/0,r=-1/0;for(let o=0,l=e.count;o<l;o++){const l=e.getX(o),c=e.getY(o),d=e.getZ(o);l<t&&(t=l),c<i&&(i=c),d<n&&(n=d),l>s&&(s=l),c>a&&(a=c),d>r&&(r=d)}return this.min.set(t,i,n),this.max.set(s,a,r),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=fn.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(void 0!==i)if(t&&null!=i.attributes&&void 0!==i.attributes.position){const t=i.attributes.position;for(let i=0,n=t.count;i<n;i++)fn.fromBufferAttribute(t,i).applyMatrix4(e.matrixWorld),this.expandByPoint(fn)}else null===i.boundingBox&&i.computeBoundingBox(),mn.copy(i.boundingBox),mn.applyMatrix4(e.matrixWorld),this.union(mn);const n=e.children;for(let e=0,i=n.length;e<i;e++)this.expandByObject(n[e],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,fn),fn.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Sn),Mn.subVectors(this.max,Sn),gn.subVectors(e.a,Sn),vn.subVectors(e.b,Sn),yn.subVectors(e.c,Sn),bn.subVectors(vn,gn),wn.subVectors(yn,vn),xn.subVectors(gn,yn);let t=[0,-bn.z,bn.y,0,-wn.z,wn.y,0,-xn.z,xn.y,bn.z,0,-bn.x,wn.z,0,-wn.x,xn.z,0,-xn.x,-bn.y,bn.x,0,-wn.y,wn.x,0,-xn.y,xn.x,0];return!!Tn(t,gn,vn,yn,Mn)&&(t=[1,0,0,0,1,0,0,0,1],!!Tn(t,gn,vn,yn,Mn)&&(kn.crossVectors(bn,wn),t=[kn.x,kn.y,kn.z],Tn(t,gn,vn,yn,Mn)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,fn).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(fn).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(pn[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),pn[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),pn[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),pn[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),pn[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),pn[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),pn[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),pn[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(pn)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const pn=[new Hi,new Hi,new Hi,new Hi,new Hi,new Hi,new Hi,new Hi],fn=new Hi,mn=new un,gn=new Hi,vn=new Hi,yn=new Hi,bn=new Hi,wn=new Hi,xn=new Hi,Sn=new Hi,Mn=new Hi,kn=new Hi,_n=new Hi;function Tn(e,t,i,n,s){for(let a=0,r=e.length-3;a<=r;a+=3){_n.fromArray(e,a);const r=s.x*Math.abs(_n.x)+s.y*Math.abs(_n.y)+s.z*Math.abs(_n.z),o=t.dot(_n),l=i.dot(_n),c=n.dot(_n);if(Math.max(-Math.max(o,l,c),Math.min(o,l,c))>r)return!1}return!0}const Cn=new un,In=new Hi,An=new Hi;class Rn{constructor(e=new Hi,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;void 0!==t?i.copy(t):Cn.setFromPoints(e).getCenter(i);let n=0;for(let t=0,s=e.length;t<s;t++)n=Math.max(n,i.distanceToSquared(e[t]));return this.radius=Math.sqrt(n),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;In.subVectors(e,this.center);const t=In.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),i=.5*(e-this.radius);this.center.addScaledVector(In,i/e),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(An.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(In.copy(e.center).add(An)),this.expandByPoint(In.copy(e.center).sub(An))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Pn=new Hi,En=new Hi,Dn=new Hi,On=new Hi,Ln=new Hi,jn=new Hi,zn=new Hi;class Bn{constructor(e=new Hi,t=new Hi(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Pn)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Pn.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Pn.copy(this.origin).addScaledVector(this.direction,t),Pn.distanceToSquared(e))}distanceSqToSegment(e,t,i,n){En.copy(e).add(t).multiplyScalar(.5),Dn.copy(t).sub(e).normalize(),On.copy(this.origin).sub(En);const s=.5*e.distanceTo(t),a=-this.direction.dot(Dn),r=On.dot(this.direction),o=-On.dot(Dn),l=On.lengthSq(),c=Math.abs(1-a*a);let d,h,u,p;if(c>0)if(d=a*o-r,h=a*r-o,p=s*c,d>=0)if(h>=-p)if(h<=p){const e=1/c;d*=e,h*=e,u=d*(d+a*h+2*r)+h*(a*d+h+2*o)+l}else h=s,d=Math.max(0,-(a*h+r)),u=-d*d+h*(h+2*o)+l;else h=-s,d=Math.max(0,-(a*h+r)),u=-d*d+h*(h+2*o)+l;else h<=-p?(d=Math.max(0,-(-a*s+r)),h=d>0?-s:Math.min(Math.max(-s,-o),s),u=-d*d+h*(h+2*o)+l):h<=p?(d=0,h=Math.min(Math.max(-s,-o),s),u=h*(h+2*o)+l):(d=Math.max(0,-(a*s+r)),h=d>0?s:Math.min(Math.max(-s,-o),s),u=-d*d+h*(h+2*o)+l);else h=a>0?-s:s,d=Math.max(0,-(a*h+r)),u=-d*d+h*(h+2*o)+l;return i&&i.copy(this.origin).addScaledVector(this.direction,d),n&&n.copy(En).addScaledVector(Dn,h),u}intersectSphere(e,t){Pn.subVectors(e.center,this.origin);const i=Pn.dot(this.direction),n=Pn.dot(Pn)-i*i,s=e.radius*e.radius;if(n>s)return null;const a=Math.sqrt(s-n),r=i-a,o=i+a;return o<0?null:r<0?this.at(o,t):this.at(r,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return null===i?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);if(0===t)return!0;return e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,n,s,a,r,o;const l=1/this.direction.x,c=1/this.direction.y,d=1/this.direction.z,h=this.origin;return l>=0?(i=(e.min.x-h.x)*l,n=(e.max.x-h.x)*l):(i=(e.max.x-h.x)*l,n=(e.min.x-h.x)*l),c>=0?(s=(e.min.y-h.y)*c,a=(e.max.y-h.y)*c):(s=(e.max.y-h.y)*c,a=(e.min.y-h.y)*c),i>a||s>n?null:((s>i||isNaN(i))&&(i=s),(a<n||isNaN(n))&&(n=a),d>=0?(r=(e.min.z-h.z)*d,o=(e.max.z-h.z)*d):(r=(e.max.z-h.z)*d,o=(e.min.z-h.z)*d),i>o||r>n?null:((r>i||i!=i)&&(i=r),(o<n||n!=n)&&(n=o),n<0?null:this.at(i>=0?i:n,t)))}intersectsBox(e){return null!==this.intersectBox(e,Pn)}intersectTriangle(e,t,i,n,s){Ln.subVectors(t,e),jn.subVectors(i,e),zn.crossVectors(Ln,jn);let a,r=this.direction.dot(zn);if(r>0){if(n)return null;a=1}else{if(!(r<0))return null;a=-1,r=-r}On.subVectors(this.origin,e);const o=a*this.direction.dot(jn.crossVectors(On,jn));if(o<0)return null;const l=a*this.direction.dot(Ln.cross(On));if(l<0)return null;if(o+l>r)return null;const c=-a*On.dot(zn);return c<0?null:this.at(c/r,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Nn{constructor(){Nn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,i,n,s,a,r,o,l,c,d,h,u,p,f,m){const g=this.elements;return g[0]=e,g[4]=t,g[8]=i,g[12]=n,g[1]=s,g[5]=a,g[9]=r,g[13]=o,g[2]=l,g[6]=c,g[10]=d,g[14]=h,g[3]=u,g[7]=p,g[11]=f,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Nn).fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,n=1/Fn.setFromMatrixColumn(e,0).length(),s=1/Fn.setFromMatrixColumn(e,1).length(),a=1/Fn.setFromMatrixColumn(e,2).length();return t[0]=i[0]*n,t[1]=i[1]*n,t[2]=i[2]*n,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*a,t[9]=i[9]*a,t[10]=i[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,n=e.y,s=e.z,a=Math.cos(i),r=Math.sin(i),o=Math.cos(n),l=Math.sin(n),c=Math.cos(s),d=Math.sin(s);if("XYZ"===e.order){const e=a*c,i=a*d,n=r*c,s=r*d;t[0]=o*c,t[4]=-o*d,t[8]=l,t[1]=i+n*l,t[5]=e-s*l,t[9]=-r*o,t[2]=s-e*l,t[6]=n+i*l,t[10]=a*o}else if("YXZ"===e.order){const e=o*c,i=o*d,n=l*c,s=l*d;t[0]=e+s*r,t[4]=n*r-i,t[8]=a*l,t[1]=a*d,t[5]=a*c,t[9]=-r,t[2]=i*r-n,t[6]=s+e*r,t[10]=a*o}else if("ZXY"===e.order){const e=o*c,i=o*d,n=l*c,s=l*d;t[0]=e-s*r,t[4]=-a*d,t[8]=n+i*r,t[1]=i+n*r,t[5]=a*c,t[9]=s-e*r,t[2]=-a*l,t[6]=r,t[10]=a*o}else if("ZYX"===e.order){const e=a*c,i=a*d,n=r*c,s=r*d;t[0]=o*c,t[4]=n*l-i,t[8]=e*l+s,t[1]=o*d,t[5]=s*l+e,t[9]=i*l-n,t[2]=-l,t[6]=r*o,t[10]=a*o}else if("YZX"===e.order){const e=a*o,i=a*l,n=r*o,s=r*l;t[0]=o*c,t[4]=s-e*d,t[8]=n*d+i,t[1]=d,t[5]=a*c,t[9]=-r*c,t[2]=-l*c,t[6]=i*d+n,t[10]=e-s*d}else if("XZY"===e.order){const e=a*o,i=a*l,n=r*o,s=r*l;t[0]=o*c,t[4]=-d,t[8]=l*c,t[1]=e*d+s,t[5]=a*c,t[9]=i*d-n,t[2]=n*d-i,t[6]=r*c,t[10]=s*d+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Un,e,Vn)}lookAt(e,t,i){const n=this.elements;return qn.subVectors(e,t),0===qn.lengthSq()&&(qn.z=1),qn.normalize(),Gn.crossVectors(i,qn),0===Gn.lengthSq()&&(1===Math.abs(i.z)?qn.x+=1e-4:qn.z+=1e-4,qn.normalize(),Gn.crossVectors(i,qn)),Gn.normalize(),Wn.crossVectors(qn,Gn),n[0]=Gn.x,n[4]=Wn.x,n[8]=qn.x,n[1]=Gn.y,n[5]=Wn.y,n[9]=qn.y,n[2]=Gn.z,n[6]=Wn.z,n[10]=qn.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,n=t.elements,s=this.elements,a=i[0],r=i[4],o=i[8],l=i[12],c=i[1],d=i[5],h=i[9],u=i[13],p=i[2],f=i[6],m=i[10],g=i[14],v=i[3],y=i[7],b=i[11],w=i[15],x=n[0],S=n[4],M=n[8],k=n[12],_=n[1],T=n[5],C=n[9],I=n[13],A=n[2],R=n[6],P=n[10],E=n[14],D=n[3],O=n[7],L=n[11],j=n[15];return s[0]=a*x+r*_+o*A+l*D,s[4]=a*S+r*T+o*R+l*O,s[8]=a*M+r*C+o*P+l*L,s[12]=a*k+r*I+o*E+l*j,s[1]=c*x+d*_+h*A+u*D,s[5]=c*S+d*T+h*R+u*O,s[9]=c*M+d*C+h*P+u*L,s[13]=c*k+d*I+h*E+u*j,s[2]=p*x+f*_+m*A+g*D,s[6]=p*S+f*T+m*R+g*O,s[10]=p*M+f*C+m*P+g*L,s[14]=p*k+f*I+m*E+g*j,s[3]=v*x+y*_+b*A+w*D,s[7]=v*S+y*T+b*R+w*O,s[11]=v*M+y*C+b*P+w*L,s[15]=v*k+y*I+b*E+w*j,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],n=e[8],s=e[12],a=e[1],r=e[5],o=e[9],l=e[13],c=e[2],d=e[6],h=e[10],u=e[14];return e[3]*(+s*o*d-n*l*d-s*r*h+i*l*h+n*r*u-i*o*u)+e[7]*(+t*o*u-t*l*h+s*a*h-n*a*u+n*l*c-s*o*c)+e[11]*(+t*l*d-t*r*u-s*a*d+i*a*u+s*r*c-i*l*c)+e[15]*(-n*r*c-t*o*d+t*r*h+n*a*d-i*a*h+i*o*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const n=this.elements;return e.isVector3?(n[12]=e.x,n[13]=e.y,n[14]=e.z):(n[12]=e,n[13]=t,n[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],n=e[2],s=e[3],a=e[4],r=e[5],o=e[6],l=e[7],c=e[8],d=e[9],h=e[10],u=e[11],p=e[12],f=e[13],m=e[14],g=e[15],v=d*m*l-f*h*l+f*o*u-r*m*u-d*o*g+r*h*g,y=p*h*l-c*m*l-p*o*u+a*m*u+c*o*g-a*h*g,b=c*f*l-p*d*l+p*r*u-a*f*u-c*r*g+a*d*g,w=p*d*o-c*f*o-p*r*h+a*f*h+c*r*m-a*d*m,x=t*v+i*y+n*b+s*w;if(0===x)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const S=1/x;return e[0]=v*S,e[1]=(f*h*s-d*m*s-f*n*u+i*m*u+d*n*g-i*h*g)*S,e[2]=(r*m*s-f*o*s+f*n*l-i*m*l-r*n*g+i*o*g)*S,e[3]=(d*o*s-r*h*s-d*n*l+i*h*l+r*n*u-i*o*u)*S,e[4]=y*S,e[5]=(c*m*s-p*h*s+p*n*u-t*m*u-c*n*g+t*h*g)*S,e[6]=(p*o*s-a*m*s-p*n*l+t*m*l+a*n*g-t*o*g)*S,e[7]=(a*h*s-c*o*s+c*n*l-t*h*l-a*n*u+t*o*u)*S,e[8]=b*S,e[9]=(p*d*s-c*f*s-p*i*u+t*f*u+c*i*g-t*d*g)*S,e[10]=(a*f*s-p*r*s+p*i*l-t*f*l-a*i*g+t*r*g)*S,e[11]=(c*r*s-a*d*s-c*i*l+t*d*l+a*i*u-t*r*u)*S,e[12]=w*S,e[13]=(c*f*n-p*d*n+p*i*h-t*f*h-c*i*m+t*d*m)*S,e[14]=(p*r*n-a*f*n-p*i*o+t*f*o+a*i*m-t*r*m)*S,e[15]=(a*d*n-c*r*n+c*i*o-t*d*o-a*i*h+t*r*h)*S,this}scale(e){const t=this.elements,i=e.x,n=e.y,s=e.z;return t[0]*=i,t[4]*=n,t[8]*=s,t[1]*=i,t[5]*=n,t[9]*=s,t[2]*=i,t[6]*=n,t[10]*=s,t[3]*=i,t[7]*=n,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],n=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,n))}makeTranslation(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),n=Math.sin(t),s=1-i,a=e.x,r=e.y,o=e.z,l=s*a,c=s*r;return this.set(l*a+i,l*r-n*o,l*o+n*r,0,l*r+n*o,c*r+i,c*o-n*a,0,l*o-n*r,c*o+n*a,s*o*o+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,n,s,a){return this.set(1,i,s,0,e,1,a,0,t,n,1,0,0,0,0,1),this}compose(e,t,i){const n=this.elements,s=t._x,a=t._y,r=t._z,o=t._w,l=s+s,c=a+a,d=r+r,h=s*l,u=s*c,p=s*d,f=a*c,m=a*d,g=r*d,v=o*l,y=o*c,b=o*d,w=i.x,x=i.y,S=i.z;return n[0]=(1-(f+g))*w,n[1]=(u+b)*w,n[2]=(p-y)*w,n[3]=0,n[4]=(u-b)*x,n[5]=(1-(h+g))*x,n[6]=(m+v)*x,n[7]=0,n[8]=(p+y)*S,n[9]=(m-v)*S,n[10]=(1-(h+f))*S,n[11]=0,n[12]=e.x,n[13]=e.y,n[14]=e.z,n[15]=1,this}decompose(e,t,i){const n=this.elements;let s=Fn.set(n[0],n[1],n[2]).length();const a=Fn.set(n[4],n[5],n[6]).length(),r=Fn.set(n[8],n[9],n[10]).length();this.determinant()<0&&(s=-s),e.x=n[12],e.y=n[13],e.z=n[14],Hn.copy(this);const o=1/s,l=1/a,c=1/r;return Hn.elements[0]*=o,Hn.elements[1]*=o,Hn.elements[2]*=o,Hn.elements[4]*=l,Hn.elements[5]*=l,Hn.elements[6]*=l,Hn.elements[8]*=c,Hn.elements[9]*=c,Hn.elements[10]*=c,t.setFromRotationMatrix(Hn),i.x=s,i.y=a,i.z=r,this}makePerspective(e,t,i,n,s,a){const r=this.elements,o=2*s/(t-e),l=2*s/(i-n),c=(t+e)/(t-e),d=(i+n)/(i-n),h=-(a+s)/(a-s),u=-2*a*s/(a-s);return r[0]=o,r[4]=0,r[8]=c,r[12]=0,r[1]=0,r[5]=l,r[9]=d,r[13]=0,r[2]=0,r[6]=0,r[10]=h,r[14]=u,r[3]=0,r[7]=0,r[11]=-1,r[15]=0,this}makeOrthographic(e,t,i,n,s,a){const r=this.elements,o=1/(t-e),l=1/(i-n),c=1/(a-s),d=(t+e)*o,h=(i+n)*l,u=(a+s)*c;return r[0]=2*o,r[4]=0,r[8]=0,r[12]=-d,r[1]=0,r[5]=2*l,r[9]=0,r[13]=-h,r[2]=0,r[6]=0,r[10]=-2*c,r[14]=-u,r[3]=0,r[7]=0,r[11]=0,r[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let e=0;e<16;e++)if(t[e]!==i[e])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Fn=new Hi,Hn=new Nn,Un=new Hi(0,0,0),Vn=new Hi(1,1,1),Gn=new Hi,Wn=new Hi,qn=new Hi,Yn=new Nn,Kn=new Fi;class Xn{constructor(e=0,t=0,i=0,n=Xn.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=n}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,n=this._order){return this._x=e,this._y=t,this._z=i,this._order=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const n=e.elements,s=n[0],a=n[4],r=n[8],o=n[1],l=n[5],c=n[9],d=n[2],h=n[6],u=n[10];switch(t){case"XYZ":this._y=Math.asin(ki(r,-1,1)),Math.abs(r)<.9999999?(this._x=Math.atan2(-c,u),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(h,l),this._z=0);break;case"YXZ":this._x=Math.asin(-ki(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(r,u),this._z=Math.atan2(o,l)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin(ki(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-d,u),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(o,s));break;case"ZYX":this._y=Math.asin(-ki(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(h,u),this._z=Math.atan2(o,s)):(this._x=0,this._z=Math.atan2(-a,l));break;case"YZX":this._z=Math.asin(ki(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(r,u));break;case"XZY":this._z=Math.asin(-ki(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(h,l),this._y=Math.atan2(r,s)):(this._x=Math.atan2(-c,u),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===i&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return Yn.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Yn,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return Kn.setFromEuler(this),this.setFromQuaternion(Kn,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Xn.DEFAULT_ORDER="XYZ";class Zn{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let Jn=0;const Qn=new Hi,$n=new Fi,es=new Nn,ts=new Hi,is=new Hi,ns=new Hi,ss=new Fi,as=new Hi(1,0,0),rs=new Hi(0,1,0),os=new Hi(0,0,1),ls={type:"added"},cs={type:"removed"};class ds extends yi{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Jn++}),this.uuid=Mi(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ds.DEFAULT_UP.clone();const e=new Hi,t=new Xn,i=new Fi,n=new Hi(1,1,1);t._onChange((function(){i.setFromEuler(t,!1)})),i._onChange((function(){t.setFromQuaternion(i,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:n},modelViewMatrix:{value:new Nn},normalMatrix:{value:new Oi}}),this.matrix=new Nn,this.matrixWorld=new Nn,this.matrixAutoUpdate=ds.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=ds.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Zn,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return $n.setFromAxisAngle(e,t),this.quaternion.multiply($n),this}rotateOnWorldAxis(e,t){return $n.setFromAxisAngle(e,t),this.quaternion.premultiply($n),this}rotateX(e){return this.rotateOnAxis(as,e)}rotateY(e){return this.rotateOnAxis(rs,e)}rotateZ(e){return this.rotateOnAxis(os,e)}translateOnAxis(e,t){return Qn.copy(e).applyQuaternion(this.quaternion),this.position.add(Qn.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(as,e)}translateY(e){return this.translateOnAxis(rs,e)}translateZ(e){return this.translateOnAxis(os,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(es.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?ts.copy(e):ts.set(e,t,i);const n=this.parent;this.updateWorldMatrix(!0,!1),is.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?es.lookAt(is,ts,this.up):es.lookAt(ts,is,this.up),this.quaternion.setFromRotationMatrix(es),n&&(es.extractRotation(n.matrixWorld),$n.setFromRotationMatrix(es),this.quaternion.premultiply($n.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(ls)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(cs)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(cs)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),es.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),es.multiply(e.parent.matrixWorld)),e.applyMatrix4(es),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,n=this.children.length;i<n;i++){const n=this.children[i].getObjectByProperty(e,t);if(void 0!==n)return n}}getObjectsByProperty(e,t){let i=[];this[e]===t&&i.push(this);for(let n=0,s=this.children.length;n<s;n++){const s=this.children[n].getObjectsByProperty(e,t);s.length>0&&(i=i.concat(s))}return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(is,e,ns),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(is,ss,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,n=t.length;i<n;i++)t[i].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let i=0,n=t.length;i<n;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,n=t.length;i<n;i++){const n=t[i];!0!==n.matrixWorldAutoUpdate&&!0!==e||n.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const i=this.parent;if(!0===e&&null!==i&&!0===i.matrixWorldAutoUpdate&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const e=this.children;for(let t=0,i=e.length;t<i;t++){const i=e[t];!0===i.matrixWorldAutoUpdate&&i.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=void 0===e||"string"==typeof e,i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const n={uuid:this.uuid,type:this.type};function s(t,i){return void 0===t[i.uuid]&&(t[i.uuid]=i.toJSON(e)),i.uuid}if(""!==this.name&&(n.name=this.name),!0===this.castShadow&&(n.castShadow=!0),!0===this.receiveShadow&&(n.receiveShadow=!0),!1===this.visible&&(n.visible=!1),!1===this.frustumCulled&&(n.frustumCulled=!1),0!==this.renderOrder&&(n.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(n.userData=this.userData),n.layers=this.layers.mask,n.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(n.matrixAutoUpdate=!1),this.isInstancedMesh&&(n.type="InstancedMesh",n.count=this.count,n.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(n.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?n.background=this.background.toJSON():this.background.isTexture&&(n.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(n.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){n.geometry=s(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const i=t.shapes;if(Array.isArray(i))for(let t=0,n=i.length;t<n;t++){const n=i[t];s(e.shapes,n)}else s(e.shapes,i)}}if(this.isSkinnedMesh&&(n.bindMode=this.bindMode,n.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(s(e.skeletons,this.skeleton),n.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let i=0,n=this.material.length;i<n;i++)t.push(s(e.materials,this.material[i]));n.material=t}else n.material=s(e.materials,this.material);if(this.children.length>0){n.children=[];for(let t=0;t<this.children.length;t++)n.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){n.animations=[];for(let t=0;t<this.animations.length;t++){const i=this.animations[t];n.animations.push(s(e.animations,i))}}if(t){const t=a(e.geometries),n=a(e.materials),s=a(e.textures),r=a(e.images),o=a(e.shapes),l=a(e.skeletons),c=a(e.animations),d=a(e.nodes);t.length>0&&(i.geometries=t),n.length>0&&(i.materials=n),s.length>0&&(i.textures=s),r.length>0&&(i.images=r),o.length>0&&(i.shapes=o),l.length>0&&(i.skeletons=l),c.length>0&&(i.animations=c),d.length>0&&(i.nodes=d)}return i.object=n,i;function a(e){const t=[];for(const i in e){const n=e[i];delete n.metadata,t.push(n)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let t=0;t<e.children.length;t++){const i=e.children[t];this.add(i.clone())}return this}}ds.DEFAULT_UP=new Hi(0,1,0),ds.DEFAULT_MATRIX_AUTO_UPDATE=!0,ds.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const hs=new Hi,us=new Hi,ps=new Hi,fs=new Hi,ms=new Hi,gs=new Hi,vs=new Hi,ys=new Hi,bs=new Hi,ws=new Hi;class xs{constructor(e=new Hi,t=new Hi,i=new Hi){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,n){n.subVectors(i,t),hs.subVectors(e,t),n.cross(hs);const s=n.lengthSq();return s>0?n.multiplyScalar(1/Math.sqrt(s)):n.set(0,0,0)}static getBarycoord(e,t,i,n,s){hs.subVectors(n,t),us.subVectors(i,t),ps.subVectors(e,t);const a=hs.dot(hs),r=hs.dot(us),o=hs.dot(ps),l=us.dot(us),c=us.dot(ps),d=a*l-r*r;if(0===d)return s.set(-2,-1,-1);const h=1/d,u=(l*o-r*c)*h,p=(a*c-r*o)*h;return s.set(1-u-p,p,u)}static containsPoint(e,t,i,n){return this.getBarycoord(e,t,i,n,fs),fs.x>=0&&fs.y>=0&&fs.x+fs.y<=1}static getUV(e,t,i,n,s,a,r,o){return this.getBarycoord(e,t,i,n,fs),o.set(0,0),o.addScaledVector(s,fs.x),o.addScaledVector(a,fs.y),o.addScaledVector(r,fs.z),o}static isFrontFacing(e,t,i,n){return hs.subVectors(i,t),us.subVectors(e,t),hs.cross(us).dot(n)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,n){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[n]),this}setFromAttributeAndIndices(e,t,i,n){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,n),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return hs.subVectors(this.c,this.b),us.subVectors(this.a,this.b),.5*hs.cross(us).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return xs.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return xs.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,n,s){return xs.getUV(e,this.a,this.b,this.c,t,i,n,s)}containsPoint(e){return xs.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return xs.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,n=this.b,s=this.c;let a,r;ms.subVectors(n,i),gs.subVectors(s,i),ys.subVectors(e,i);const o=ms.dot(ys),l=gs.dot(ys);if(o<=0&&l<=0)return t.copy(i);bs.subVectors(e,n);const c=ms.dot(bs),d=gs.dot(bs);if(c>=0&&d<=c)return t.copy(n);const h=o*d-c*l;if(h<=0&&o>=0&&c<=0)return a=o/(o-c),t.copy(i).addScaledVector(ms,a);ws.subVectors(e,s);const u=ms.dot(ws),p=gs.dot(ws);if(p>=0&&u<=p)return t.copy(s);const f=u*l-o*p;if(f<=0&&l>=0&&p<=0)return r=l/(l-p),t.copy(i).addScaledVector(gs,r);const m=c*p-u*d;if(m<=0&&d-c>=0&&u-p>=0)return vs.subVectors(s,n),r=(d-c)/(d-c+(u-p)),t.copy(n).addScaledVector(vs,r);const g=1/(m+f+h);return a=f*g,r=h*g,t.copy(i).addScaledVector(ms,a).addScaledVector(gs,r)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let Ss=0;class Ms extends yi{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Ss++}),this.uuid=Mi(),this.name="",this.type="Material",this.blending=b,this.side=f,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=D,this.blendDst=O,this.blendEquation=k,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=V,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=ai,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Wt,this.stencilZFail=Wt,this.stencilZPass=Wt,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const i=e[t];if(void 0===i){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}const n=this[t];void 0!==n?n&&n.isColor?n.set(i):n&&n.isVector3&&i&&i.isVector3?n.copy(i):this[t]=i:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function n(e){const t=[];for(const i in e){const n=e[i];delete n.metadata,t.push(n)}return t}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),void 0!==this.sheen&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(i.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(i.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(i.combine=this.combine)),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(i.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(i.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(i.size=this.size),null!==this.shadowSide&&(i.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==b&&(i.blending=this.blending),this.side!==f&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(i.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=this.premultipliedAlpha),!0===this.forceSinglePass&&(i.forceSinglePass=this.forceSinglePass),!0===this.wireframe&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(i.flatShading=this.flatShading),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),!1===this.fog&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData),t){const t=n(e.textures),s=n(e.images);t.length>0&&(i.textures=t),s.length>0&&(i.images=s)}return i}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(null!==t){const e=t.length;i=new Array(e);for(let n=0;n!==e;++n)i[n]=t[n].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}const ks={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_s={h:0,s:0,l:0},Ts={h:0,s:0,l:0};function Cs(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+6*(t-e)*i:i<.5?t:i<2/3?e+6*(t-e)*(2/3-i):e}class Is{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===t&&void 0===i?this.set(e):this.setRGB(e,t,i)}set(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Ht){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,Ji.toWorkingColorSpace(this,t),this}setRGB(e,t,i,n=Ji.workingColorSpace){return this.r=e,this.g=t,this.b=i,Ji.toWorkingColorSpace(this,n),this}setHSL(e,t,i,n=Ji.workingColorSpace){if(e=_i(e,1),t=ki(t,0,1),i=ki(i,0,1),0===t)this.r=this.g=this.b=i;else{const n=i<=.5?i*(1+t):i+t-i*t,s=2*i-n;this.r=Cs(s,n,e+1/3),this.g=Cs(s,n,e),this.b=Cs(s,n,e-1/3)}return Ji.toWorkingColorSpace(this,n),this}setStyle(e,t=Ht){function i(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let n;if(n=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const a=n[1],r=n[2];switch(a){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,Ji.toWorkingColorSpace(this,t),i(s[4]),this;if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,Ji.toWorkingColorSpace(this,t),i(s[4]),this;break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r)){const e=parseFloat(s[1])/360,n=parseFloat(s[2])/100,a=parseFloat(s[3])/100;return i(s[4]),this.setHSL(e,n,a,t)}break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(e)){const i=n[1],s=i.length;if(3===s)return this.r=parseInt(i.charAt(0)+i.charAt(0),16)/255,this.g=parseInt(i.charAt(1)+i.charAt(1),16)/255,this.b=parseInt(i.charAt(2)+i.charAt(2),16)/255,Ji.toWorkingColorSpace(this,t),this;if(6===s)return this.r=parseInt(i.charAt(0)+i.charAt(1),16)/255,this.g=parseInt(i.charAt(2)+i.charAt(3),16)/255,this.b=parseInt(i.charAt(4)+i.charAt(5),16)/255,Ji.toWorkingColorSpace(this,t),this;console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Ht){const i=ks[e.toLowerCase()];return void 0!==i?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Gi(e.r),this.g=Gi(e.g),this.b=Gi(e.b),this}copyLinearToSRGB(e){return this.r=Wi(e.r),this.g=Wi(e.g),this.b=Wi(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Ht){return Ji.fromWorkingColorSpace(As.copy(this),e),ki(255*As.r,0,255)<<16^ki(255*As.g,0,255)<<8^ki(255*As.b,0,255)<<0}getHexString(e=Ht){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Ji.workingColorSpace){Ji.fromWorkingColorSpace(As.copy(this),t);const i=As.r,n=As.g,s=As.b,a=Math.max(i,n,s),r=Math.min(i,n,s);let o,l;const c=(r+a)/2;if(r===a)o=0,l=0;else{const e=a-r;switch(l=c<=.5?e/(a+r):e/(2-a-r),a){case i:o=(n-s)/e+(n<s?6:0);break;case n:o=(s-i)/e+2;break;case s:o=(i-n)/e+4}o/=6}return e.h=o,e.s=l,e.l=c,e}getRGB(e,t=Ji.workingColorSpace){return Ji.fromWorkingColorSpace(As.copy(this),t),e.r=As.r,e.g=As.g,e.b=As.b,e}getStyle(e=Ht){Ji.fromWorkingColorSpace(As.copy(this),e);const t=As.r,i=As.g,n=As.b;return e!==Ht?"color("+e+" "+t.toFixed(3)+" "+i.toFixed(3)+" "+n.toFixed(3)+")":"rgb("+(255*t|0)+","+(255*i|0)+","+(255*n|0)+")"}offsetHSL(e,t,i){return this.getHSL(_s),_s.h+=e,_s.s+=t,_s.l+=i,this.setHSL(_s.h,_s.s,_s.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(_s),e.getHSL(Ts);const i=Ti(_s.h,Ts.h,t),n=Ti(_s.s,Ts.s,t),s=Ti(_s.l,Ts.l,t);return this.setHSL(i,n,s),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const As=new Is;Is.NAMES=ks;class Rs extends Ms{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Is(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=K,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Ps=new Hi,Es=new Di;class Ds{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=i,this.usage=ri,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let n=0,s=this.itemSize;n<s;n++)this.array[e+n]=t.array[i+n];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,i=this.count;t<i;t++)Es.fromBufferAttribute(this,t),Es.applyMatrix3(e),this.setXY(t,Es.x,Es.y);else if(3===this.itemSize)for(let t=0,i=this.count;t<i;t++)Ps.fromBufferAttribute(this,t),Ps.applyMatrix3(e),this.setXYZ(t,Ps.x,Ps.y,Ps.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Ps.fromBufferAttribute(this,t),Ps.applyMatrix4(e),this.setXYZ(t,Ps.x,Ps.y,Ps.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Ps.fromBufferAttribute(this,t),Ps.applyNormalMatrix(e),this.setXYZ(t,Ps.x,Ps.y,Ps.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Ps.fromBufferAttribute(this,t),Ps.transformDirection(e),this.setXYZ(t,Ps.x,Ps.y,Ps.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Ri(t,this.array)),t}setX(e,t){return this.normalized&&(t=Pi(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Ri(t,this.array)),t}setY(e,t){return this.normalized&&(t=Pi(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Ri(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Pi(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Ri(t,this.array)),t}setW(e,t){return this.normalized&&(t=Pi(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Pi(t,this.array),i=Pi(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,n){return e*=this.itemSize,this.normalized&&(t=Pi(t,this.array),i=Pi(i,this.array),n=Pi(n,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=n,this}setXYZW(e,t,i,n,s){return e*=this.itemSize,this.normalized&&(t=Pi(t,this.array),i=Pi(i,this.array),n=Pi(n,this.array),s=Pi(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=n,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==ri&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class Os extends Ds{constructor(e,t,i){super(new Int8Array(e),t,i)}}class Ls extends Ds{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class js extends Ds{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class zs extends Ds{constructor(e,t,i){super(new Int16Array(e),t,i)}}class Bs extends Ds{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class Ns extends Ds{constructor(e,t,i){super(new Int32Array(e),t,i)}}class Fs extends Ds{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class Hs extends Ds{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}}class Us extends Ds{constructor(e,t,i){super(new Float32Array(e),t,i)}}class Vs extends Ds{constructor(e,t,i){super(new Float64Array(e),t,i)}}let Gs=0;const Ws=new Nn,qs=new ds,Ys=new Hi,Ks=new un,Xs=new un,Zs=new Hi;class Js extends yi{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Gs++}),this.uuid=Mi(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(ji(e)?Fs:Bs)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(void 0!==i){const t=(new Oi).getNormalMatrix(e);i.applyNormalMatrix(t),i.needsUpdate=!0}const n=this.attributes.tangent;return void 0!==n&&(n.transformDirection(e),n.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ws.makeRotationFromQuaternion(e),this.applyMatrix4(Ws),this}rotateX(e){return Ws.makeRotationX(e),this.applyMatrix4(Ws),this}rotateY(e){return Ws.makeRotationY(e),this.applyMatrix4(Ws),this}rotateZ(e){return Ws.makeRotationZ(e),this.applyMatrix4(Ws),this}translate(e,t,i){return Ws.makeTranslation(e,t,i),this.applyMatrix4(Ws),this}scale(e,t,i){return Ws.makeScale(e,t,i),this.applyMatrix4(Ws),this}lookAt(e){return qs.lookAt(e),qs.updateMatrix(),this.applyMatrix4(qs.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ys).negate(),this.translate(Ys.x,Ys.y,Ys.z),this}setFromPoints(e){const t=[];for(let i=0,n=e.length;i<n;i++){const n=e[i];t.push(n.x,n.y,n.z||0)}return this.setAttribute("position",new Us(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new un);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Hi(-1/0,-1/0,-1/0),new Hi(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let e=0,i=t.length;e<i;e++){const i=t[e];Ks.setFromBufferAttribute(i),this.morphTargetsRelative?(Zs.addVectors(this.boundingBox.min,Ks.min),this.boundingBox.expandByPoint(Zs),Zs.addVectors(this.boundingBox.max,Ks.max),this.boundingBox.expandByPoint(Zs)):(this.boundingBox.expandByPoint(Ks.min),this.boundingBox.expandByPoint(Ks.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Rn);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Hi,1/0);if(e){const i=this.boundingSphere.center;if(Ks.setFromBufferAttribute(e),t)for(let e=0,i=t.length;e<i;e++){const i=t[e];Xs.setFromBufferAttribute(i),this.morphTargetsRelative?(Zs.addVectors(Ks.min,Xs.min),Ks.expandByPoint(Zs),Zs.addVectors(Ks.max,Xs.max),Ks.expandByPoint(Zs)):(Ks.expandByPoint(Xs.min),Ks.expandByPoint(Xs.max))}Ks.getCenter(i);let n=0;for(let t=0,s=e.count;t<s;t++)Zs.fromBufferAttribute(e,t),n=Math.max(n,i.distanceToSquared(Zs));if(t)for(let s=0,a=t.length;s<a;s++){const a=t[s],r=this.morphTargetsRelative;for(let t=0,s=a.count;t<s;t++)Zs.fromBufferAttribute(a,t),r&&(Ys.fromBufferAttribute(e,t),Zs.add(Ys)),n=Math.max(n,i.distanceToSquared(Zs))}this.boundingSphere.radius=Math.sqrt(n),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const i=e.array,n=t.position.array,s=t.normal.array,a=t.uv.array,r=n.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Ds(new Float32Array(4*r),4));const o=this.getAttribute("tangent").array,l=[],c=[];for(let e=0;e<r;e++)l[e]=new Hi,c[e]=new Hi;const d=new Hi,h=new Hi,u=new Hi,p=new Di,f=new Di,m=new Di,g=new Hi,v=new Hi;function y(e,t,i){d.fromArray(n,3*e),h.fromArray(n,3*t),u.fromArray(n,3*i),p.fromArray(a,2*e),f.fromArray(a,2*t),m.fromArray(a,2*i),h.sub(d),u.sub(d),f.sub(p),m.sub(p);const s=1/(f.x*m.y-m.x*f.y);isFinite(s)&&(g.copy(h).multiplyScalar(m.y).addScaledVector(u,-f.y).multiplyScalar(s),v.copy(u).multiplyScalar(f.x).addScaledVector(h,-m.x).multiplyScalar(s),l[e].add(g),l[t].add(g),l[i].add(g),c[e].add(v),c[t].add(v),c[i].add(v))}let b=this.groups;0===b.length&&(b=[{start:0,count:i.length}]);for(let e=0,t=b.length;e<t;++e){const t=b[e],n=t.start;for(let e=n,s=n+t.count;e<s;e+=3)y(i[e+0],i[e+1],i[e+2])}const w=new Hi,x=new Hi,S=new Hi,M=new Hi;function k(e){S.fromArray(s,3*e),M.copy(S);const t=l[e];w.copy(t),w.sub(S.multiplyScalar(S.dot(t))).normalize(),x.crossVectors(M,t);const i=x.dot(c[e])<0?-1:1;o[4*e]=w.x,o[4*e+1]=w.y,o[4*e+2]=w.z,o[4*e+3]=i}for(let e=0,t=b.length;e<t;++e){const t=b[e],n=t.start;for(let e=n,s=n+t.count;e<s;e+=3)k(i[e+0]),k(i[e+1]),k(i[e+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let i=this.getAttribute("normal");if(void 0===i)i=new Ds(new Float32Array(3*t.count),3),this.setAttribute("normal",i);else for(let e=0,t=i.count;e<t;e++)i.setXYZ(e,0,0,0);const n=new Hi,s=new Hi,a=new Hi,r=new Hi,o=new Hi,l=new Hi,c=new Hi,d=new Hi;if(e)for(let h=0,u=e.count;h<u;h+=3){const u=e.getX(h+0),p=e.getX(h+1),f=e.getX(h+2);n.fromBufferAttribute(t,u),s.fromBufferAttribute(t,p),a.fromBufferAttribute(t,f),c.subVectors(a,s),d.subVectors(n,s),c.cross(d),r.fromBufferAttribute(i,u),o.fromBufferAttribute(i,p),l.fromBufferAttribute(i,f),r.add(c),o.add(c),l.add(c),i.setXYZ(u,r.x,r.y,r.z),i.setXYZ(p,o.x,o.y,o.z),i.setXYZ(f,l.x,l.y,l.z)}else for(let e=0,r=t.count;e<r;e+=3)n.fromBufferAttribute(t,e+0),s.fromBufferAttribute(t,e+1),a.fromBufferAttribute(t,e+2),c.subVectors(a,s),d.subVectors(n,s),c.cross(d),i.setXYZ(e+0,c.x,c.y,c.z),i.setXYZ(e+1,c.x,c.y,c.z),i.setXYZ(e+2,c.x,c.y,c.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Zs.fromBufferAttribute(e,t),Zs.normalize(),e.setXYZ(t,Zs.x,Zs.y,Zs.z)}toNonIndexed(){function e(e,t){const i=e.array,n=e.itemSize,s=e.normalized,a=new i.constructor(t.length*n);let r=0,o=0;for(let s=0,l=t.length;s<l;s++){r=e.isInterleavedBufferAttribute?t[s]*e.data.stride+e.offset:t[s]*n;for(let e=0;e<n;e++)a[o++]=i[r++]}return new Ds(a,n,s)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Js,i=this.index.array,n=this.attributes;for(const s in n){const a=e(n[s],i);t.setAttribute(s,a)}const s=this.morphAttributes;for(const n in s){const a=[],r=s[n];for(let t=0,n=r.length;t<n;t++){const n=e(r[t],i);a.push(n)}t.morphAttributes[n]=a}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let e=0,i=a.length;e<i;e++){const i=a[e];t.addGroup(i.start,i.count,i.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const i in t)void 0!==t[i]&&(e[i]=t[i]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const t in i){const n=i[t];e.data.attributes[t]=n.toJSON(e.data)}const n={};let s=!1;for(const t in this.morphAttributes){const i=this.morphAttributes[t],a=[];for(let t=0,n=i.length;t<n;t++){const n=i[t];a.push(n.toJSON(e.data))}a.length>0&&(n[t]=a,s=!0)}s&&(e.data.morphAttributes=n,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const r=this.boundingSphere;return null!==r&&(e.data.boundingSphere={center:r.center.toArray(),radius:r.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;null!==i&&this.setIndex(i.clone(t));const n=e.attributes;for(const e in n){const i=n[e];this.setAttribute(e,i.clone(t))}const s=e.morphAttributes;for(const e in s){const i=[],n=s[e];for(let e=0,s=n.length;e<s;e++)i.push(n[e].clone(t));this.morphAttributes[e]=i}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let e=0,t=a.length;e<t;e++){const t=a[e];this.addGroup(t.start,t.count,t.materialIndex)}const r=e.boundingBox;null!==r&&(this.boundingBox=r.clone());const o=e.boundingSphere;return null!==o&&(this.boundingSphere=o.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Qs=new Nn,$s=new Bn,ea=new Rn,ta=new Hi,ia=new Hi,na=new Hi,sa=new Hi,aa=new Hi,ra=new Hi,oa=new Di,la=new Di,ca=new Di,da=new Hi,ha=new Hi;class ua extends ds{constructor(e=new Js,t=new Rs){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const i=e[t[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=i.length;e<t;e++){const t=i[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}getVertexPosition(e,t){const i=this.geometry,n=i.attributes.position,s=i.morphAttributes.position,a=i.morphTargetsRelative;t.fromBufferAttribute(n,e);const r=this.morphTargetInfluences;if(s&&r){ra.set(0,0,0);for(let i=0,n=s.length;i<n;i++){const n=r[i],o=s[i];0!==n&&(aa.fromBufferAttribute(o,e),a?ra.addScaledVector(aa,n):ra.addScaledVector(aa.sub(t),n))}t.add(ra)}return this.isSkinnedMesh&&this.boneTransform(e,t),t}raycast(e,t){const i=this.geometry,n=this.material,s=this.matrixWorld;if(void 0===n)return;if(null===i.boundingSphere&&i.computeBoundingSphere(),ea.copy(i.boundingSphere),ea.applyMatrix4(s),$s.copy(e.ray).recast(e.near),!1===ea.containsPoint($s.origin)){if(null===$s.intersectSphere(ea,ta))return;if($s.origin.distanceToSquared(ta)>(e.far-e.near)**2)return}if(Qs.copy(s).invert(),$s.copy(e.ray).applyMatrix4(Qs),null!==i.boundingBox&&!1===$s.intersectsBox(i.boundingBox))return;let a;const r=i.index,o=i.attributes.position,l=i.attributes.uv,c=i.attributes.uv2,d=i.groups,h=i.drawRange;if(null!==r)if(Array.isArray(n))for(let i=0,s=d.length;i<s;i++){const s=d[i],o=n[s.materialIndex];for(let i=Math.max(s.start,h.start),n=Math.min(r.count,Math.min(s.start+s.count,h.start+h.count));i<n;i+=3){const n=r.getX(i),d=r.getX(i+1),h=r.getX(i+2);a=pa(this,o,e,$s,l,c,n,d,h),a&&(a.faceIndex=Math.floor(i/3),a.face.materialIndex=s.materialIndex,t.push(a))}}else{for(let i=Math.max(0,h.start),s=Math.min(r.count,h.start+h.count);i<s;i+=3){const s=r.getX(i),o=r.getX(i+1),d=r.getX(i+2);a=pa(this,n,e,$s,l,c,s,o,d),a&&(a.faceIndex=Math.floor(i/3),t.push(a))}}else if(void 0!==o)if(Array.isArray(n))for(let i=0,s=d.length;i<s;i++){const s=d[i],r=n[s.materialIndex];for(let i=Math.max(s.start,h.start),n=Math.min(o.count,Math.min(s.start+s.count,h.start+h.count));i<n;i+=3){a=pa(this,r,e,$s,l,c,i,i+1,i+2),a&&(a.faceIndex=Math.floor(i/3),a.face.materialIndex=s.materialIndex,t.push(a))}}else{for(let i=Math.max(0,h.start),s=Math.min(o.count,h.start+h.count);i<s;i+=3){a=pa(this,n,e,$s,l,c,i,i+1,i+2),a&&(a.faceIndex=Math.floor(i/3),t.push(a))}}}}function pa(e,t,i,n,s,a,r,o,l){e.getVertexPosition(r,ia),e.getVertexPosition(o,na),e.getVertexPosition(l,sa);const c=function(e,t,i,n,s,a,r,o){let l;if(l=t.side===m?n.intersectTriangle(r,a,s,!0,o):n.intersectTriangle(s,a,r,t.side===f,o),null===l)return null;ha.copy(o),ha.applyMatrix4(e.matrixWorld);const c=i.ray.origin.distanceTo(ha);return c<i.near||c>i.far?null:{distance:c,point:ha.clone(),object:e}}(e,t,i,n,ia,na,sa,da);if(c){s&&(oa.fromBufferAttribute(s,r),la.fromBufferAttribute(s,o),ca.fromBufferAttribute(s,l),c.uv=xs.getUV(da,ia,na,sa,oa,la,ca,new Di)),a&&(oa.fromBufferAttribute(a,r),la.fromBufferAttribute(a,o),ca.fromBufferAttribute(a,l),c.uv2=xs.getUV(da,ia,na,sa,oa,la,ca,new Di));const e={a:r,b:o,c:l,normal:new Hi,materialIndex:0};xs.getNormal(ia,na,sa,e.normal),c.face=e}return c}class fa extends Js{constructor(e=1,t=1,i=1,n=1,s=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:n,heightSegments:s,depthSegments:a};const r=this;n=Math.floor(n),s=Math.floor(s),a=Math.floor(a);const o=[],l=[],c=[],d=[];let h=0,u=0;function p(e,t,i,n,s,a,p,f,m,g,v){const y=a/m,b=p/g,w=a/2,x=p/2,S=f/2,M=m+1,k=g+1;let _=0,T=0;const C=new Hi;for(let a=0;a<k;a++){const r=a*b-x;for(let o=0;o<M;o++){const h=o*y-w;C[e]=h*n,C[t]=r*s,C[i]=S,l.push(C.x,C.y,C.z),C[e]=0,C[t]=0,C[i]=f>0?1:-1,c.push(C.x,C.y,C.z),d.push(o/m),d.push(1-a/g),_+=1}}for(let e=0;e<g;e++)for(let t=0;t<m;t++){const i=h+t+M*e,n=h+t+M*(e+1),s=h+(t+1)+M*(e+1),a=h+(t+1)+M*e;o.push(i,n,a),o.push(n,s,a),T+=6}r.addGroup(u,T,v),u+=T,h+=_}p("z","y","x",-1,-1,i,t,e,a,s,0),p("z","y","x",1,-1,i,t,-e,a,s,1),p("x","z","y",1,1,e,i,t,n,a,2),p("x","z","y",1,-1,e,i,-t,n,a,3),p("x","y","z",1,-1,e,t,i,n,s,4),p("x","y","z",-1,-1,e,t,-i,n,s,5),this.setIndex(o),this.setAttribute("position",new Us(l,3)),this.setAttribute("normal",new Us(c,3)),this.setAttribute("uv",new Us(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new fa(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function ma(e){const t={};for(const i in e){t[i]={};for(const n in e[i]){const s=e[i][n];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?t[i][n]=s.clone():Array.isArray(s)?t[i][n]=s.slice():t[i][n]=s}}return t}function ga(e){const t={};for(let i=0;i<e.length;i++){const n=ma(e[i]);for(const e in n)t[e]=n[e]}return t}function va(e){return null===e.getRenderTarget()&&e.outputEncoding===Lt?Ht:Ut}const ya={clone:ma,merge:ga};class ba extends Ms{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=ma(e.uniforms),this.uniformsGroups=function(e){const t=[];for(let i=0;i<e.length;i++)t.push(e[i].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const n=this.uniforms[i].value;n&&n.isTexture?t.uniforms[i]={type:"t",value:n.toJSON(e).uuid}:n&&n.isColor?t.uniforms[i]={type:"c",value:n.getHex()}:n&&n.isVector2?t.uniforms[i]={type:"v2",value:n.toArray()}:n&&n.isVector3?t.uniforms[i]={type:"v3",value:n.toArray()}:n&&n.isVector4?t.uniforms[i]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?t.uniforms[i]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?t.uniforms[i]={type:"m4",value:n.toArray()}:t.uniforms[i]={value:n}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const i={};for(const e in this.extensions)!0===this.extensions[e]&&(i[e]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class wa extends ds{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Nn,this.projectionMatrix=new Nn,this.projectionMatrixInverse=new Nn}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class xa extends wa{constructor(e=50,t=1,i=.1,n=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=n,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*Si*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*xi*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*Si*Math.atan(Math.tan(.5*xi*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,n,s,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=n,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*xi*this.fov)/this.zoom,i=2*t,n=this.aspect*i,s=-.5*n;const a=this.view;if(null!==this.view&&this.view.enabled){const e=a.fullWidth,r=a.fullHeight;s+=a.offsetX*n/e,t-=a.offsetY*i/r,n*=a.width/e,i*=a.height/r}const r=this.filmOffset;0!==r&&(s+=e*r/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+n,t,t-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Sa=-90;class Ma extends ds{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i;const n=new xa(Sa,1,e,t);n.layers=this.layers,n.up.set(0,1,0),n.lookAt(1,0,0),this.add(n);const s=new xa(Sa,1,e,t);s.layers=this.layers,s.up.set(0,1,0),s.lookAt(-1,0,0),this.add(s);const a=new xa(Sa,1,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(0,1,0),this.add(a);const r=new xa(Sa,1,e,t);r.layers=this.layers,r.up.set(0,0,1),r.lookAt(0,-1,0),this.add(r);const o=new xa(Sa,1,e,t);o.layers=this.layers,o.up.set(0,1,0),o.lookAt(0,0,1),this.add(o);const l=new xa(Sa,1,e,t);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,-1),this.add(l)}update(e,t){null===this.parent&&this.updateMatrixWorld();const i=this.renderTarget,[n,s,a,r,o,l]=this.children,c=e.getRenderTarget(),d=e.toneMapping,h=e.xr.enabled;e.toneMapping=J,e.xr.enabled=!1;const u=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,n),e.setRenderTarget(i,1),e.render(t,s),e.setRenderTarget(i,2),e.render(t,a),e.setRenderTarget(i,3),e.render(t,r),e.setRenderTarget(i,4),e.render(t,o),i.texture.generateMipmaps=u,e.setRenderTarget(i,5),e.render(t,l),e.setRenderTarget(c),e.toneMapping=d,e.xr.enabled=h,i.texture.needsPMREMUpdate=!0}}class ka extends sn{constructor(e,t,i,n,s,a,r,o,l,c){super(e=void 0!==e?e:[],t=void 0!==t?t:se,i,n,s,a,r,o,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class _a extends rn{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},n=[i,i,i,i,i,i];this.texture=new ka(n,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:ve}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={tEquirect:{value:null}},n="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",s="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",a=new fa(5,5,5),r=new ba({name:"CubemapFromEquirect",uniforms:ma(i),vertexShader:n,fragmentShader:s,side:m,blending:y});r.uniforms.tEquirect.value=t;const o=new ua(a,r),l=t.minFilter;t.minFilter===we&&(t.minFilter=ve);return new Ma(1,10,this).update(e,o),t.minFilter=l,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,n){const s=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,i,n);e.setRenderTarget(s)}}const Ta=new Hi,Ca=new Hi,Ia=new Oi;class Aa{constructor(e=new Hi(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,n){return this.normal.set(e,t,i),this.constant=n,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const n=Ta.subVectors(i,t).cross(Ca.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(n,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(Ta),n=this.normal.dot(i);if(0===n)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/n;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||Ia.getNormalMatrix(e),n=this.coplanarPoint(Ta).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-n.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const Ra=new Rn,Pa=new Hi;class Ea{constructor(e=new Aa,t=new Aa,i=new Aa,n=new Aa,s=new Aa,a=new Aa){this.planes=[e,t,i,n,s,a]}set(e,t,i,n,s,a){const r=this.planes;return r[0].copy(e),r[1].copy(t),r[2].copy(i),r[3].copy(n),r[4].copy(s),r[5].copy(a),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const t=this.planes,i=e.elements,n=i[0],s=i[1],a=i[2],r=i[3],o=i[4],l=i[5],c=i[6],d=i[7],h=i[8],u=i[9],p=i[10],f=i[11],m=i[12],g=i[13],v=i[14],y=i[15];return t[0].setComponents(r-n,d-o,f-h,y-m).normalize(),t[1].setComponents(r+n,d+o,f+h,y+m).normalize(),t[2].setComponents(r+s,d+l,f+u,y+g).normalize(),t[3].setComponents(r-s,d-l,f-u,y-g).normalize(),t[4].setComponents(r-a,d-c,f-p,y-v).normalize(),t[5].setComponents(r+a,d+c,f+p,y+v).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),Ra.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Ra)}intersectsSprite(e){return Ra.center.set(0,0,0),Ra.radius=.7071067811865476,Ra.applyMatrix4(e.matrixWorld),this.intersectsSphere(Ra)}intersectsSphere(e){const t=this.planes,i=e.center,n=-e.radius;for(let e=0;e<6;e++){if(t[e].distanceToPoint(i)<n)return!1}return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const n=t[i];if(Pa.x=n.normal.x>0?e.max.x:e.min.x,Pa.y=n.normal.y>0?e.max.y:e.min.y,Pa.z=n.normal.z>0?e.max.z:e.min.z,n.distanceToPoint(Pa)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function Da(){let e=null,t=!1,i=null,n=null;function s(t,a){i(t,a),n=e.requestAnimationFrame(s)}return{start:function(){!0!==t&&null!==i&&(n=e.requestAnimationFrame(s),t=!0)},stop:function(){e.cancelAnimationFrame(n),t=!1},setAnimationLoop:function(e){i=e},setContext:function(t){e=t}}}function Oa(e,t){const i=t.isWebGL2,n=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),n.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);const i=n.get(t);i&&(e.deleteBuffer(i.buffer),n.delete(t))},update:function(t,s){if(t.isGLBufferAttribute){const e=n.get(t);return void((!e||e.version<t.version)&&n.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);const a=n.get(t);void 0===a?n.set(t,function(t,n){const s=t.array,a=t.usage,r=e.createBuffer();let o;if(e.bindBuffer(n,r),e.bufferData(n,s,a),t.onUploadCallback(),s instanceof Float32Array)o=5126;else if(s instanceof Uint16Array)if(t.isFloat16BufferAttribute){if(!i)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");o=5131}else o=5123;else if(s instanceof Int16Array)o=5122;else if(s instanceof Uint32Array)o=5125;else if(s instanceof Int32Array)o=5124;else if(s instanceof Int8Array)o=5120;else if(s instanceof Uint8Array)o=5121;else{if(!(s instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+s);o=5121}return{buffer:r,type:o,bytesPerElement:s.BYTES_PER_ELEMENT,version:t.version}}(t,s)):a.version<t.version&&(!function(t,n,s){const a=n.array,r=n.updateRange;e.bindBuffer(s,t),-1===r.count?e.bufferSubData(s,0,a):(i?e.bufferSubData(s,r.offset*a.BYTES_PER_ELEMENT,a,r.offset,r.count):e.bufferSubData(s,r.offset*a.BYTES_PER_ELEMENT,a.subarray(r.offset,r.offset+r.count)),r.count=-1),n.onUploadCallback()}(a.buffer,t,s),a.version=t.version)}}}class La extends Js{constructor(e=1,t=1,i=1,n=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:n};const s=e/2,a=t/2,r=Math.floor(i),o=Math.floor(n),l=r+1,c=o+1,d=e/r,h=t/o,u=[],p=[],f=[],m=[];for(let e=0;e<c;e++){const t=e*h-a;for(let i=0;i<l;i++){const n=i*d-s;p.push(n,-t,0),f.push(0,0,1),m.push(i/r),m.push(1-e/o)}}for(let e=0;e<o;e++)for(let t=0;t<r;t++){const i=t+l*e,n=t+l*(e+1),s=t+1+l*(e+1),a=t+1+l*e;u.push(i,n,a),u.push(n,s,a)}this.setIndex(u),this.setAttribute("position",new Us(p,3)),this.setAttribute("normal",new Us(f,3)),this.setAttribute("uv",new Us(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new La(e.width,e.height,e.widthSegments,e.heightSegments)}}const ja={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, vec2 fullSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\t\n\t\tvec2 lodFudge = pow( 1.95, lod ) / fullSize;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec2 fullSize = vec2( textureSize( sampler, 0 ) );\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), fullSize, floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), fullSize, ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},za={common:{diffuse:{value:new Is(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Oi},uv2Transform:{value:new Oi},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Di(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Is(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Is(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Oi}},sprite:{diffuse:{value:new Is(16777215)},opacity:{value:1},center:{value:new Di(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Oi}}},Ba={basic:{uniforms:ga([za.common,za.specularmap,za.envmap,za.aomap,za.lightmap,za.fog]),vertexShader:ja.meshbasic_vert,fragmentShader:ja.meshbasic_frag},lambert:{uniforms:ga([za.common,za.specularmap,za.envmap,za.aomap,za.lightmap,za.emissivemap,za.bumpmap,za.normalmap,za.displacementmap,za.fog,za.lights,{emissive:{value:new Is(0)}}]),vertexShader:ja.meshlambert_vert,fragmentShader:ja.meshlambert_frag},phong:{uniforms:ga([za.common,za.specularmap,za.envmap,za.aomap,za.lightmap,za.emissivemap,za.bumpmap,za.normalmap,za.displacementmap,za.fog,za.lights,{emissive:{value:new Is(0)},specular:{value:new Is(1118481)},shininess:{value:30}}]),vertexShader:ja.meshphong_vert,fragmentShader:ja.meshphong_frag},standard:{uniforms:ga([za.common,za.envmap,za.aomap,za.lightmap,za.emissivemap,za.bumpmap,za.normalmap,za.displacementmap,za.roughnessmap,za.metalnessmap,za.fog,za.lights,{emissive:{value:new Is(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ja.meshphysical_vert,fragmentShader:ja.meshphysical_frag},toon:{uniforms:ga([za.common,za.aomap,za.lightmap,za.emissivemap,za.bumpmap,za.normalmap,za.displacementmap,za.gradientmap,za.fog,za.lights,{emissive:{value:new Is(0)}}]),vertexShader:ja.meshtoon_vert,fragmentShader:ja.meshtoon_frag},matcap:{uniforms:ga([za.common,za.bumpmap,za.normalmap,za.displacementmap,za.fog,{matcap:{value:null}}]),vertexShader:ja.meshmatcap_vert,fragmentShader:ja.meshmatcap_frag},points:{uniforms:ga([za.points,za.fog]),vertexShader:ja.points_vert,fragmentShader:ja.points_frag},dashed:{uniforms:ga([za.common,za.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ja.linedashed_vert,fragmentShader:ja.linedashed_frag},depth:{uniforms:ga([za.common,za.displacementmap]),vertexShader:ja.depth_vert,fragmentShader:ja.depth_frag},normal:{uniforms:ga([za.common,za.bumpmap,za.normalmap,za.displacementmap,{opacity:{value:1}}]),vertexShader:ja.meshnormal_vert,fragmentShader:ja.meshnormal_frag},sprite:{uniforms:ga([za.sprite,za.fog]),vertexShader:ja.sprite_vert,fragmentShader:ja.sprite_frag},background:{uniforms:{uvTransform:{value:new Oi},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ja.background_vert,fragmentShader:ja.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:ja.backgroundCube_vert,fragmentShader:ja.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ja.cube_vert,fragmentShader:ja.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ja.equirect_vert,fragmentShader:ja.equirect_frag},distanceRGBA:{uniforms:ga([za.common,za.displacementmap,{referencePosition:{value:new Hi},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ja.distanceRGBA_vert,fragmentShader:ja.distanceRGBA_frag},shadow:{uniforms:ga([za.lights,za.fog,{color:{value:new Is(0)},opacity:{value:1}}]),vertexShader:ja.shadow_vert,fragmentShader:ja.shadow_frag}};Ba.physical={uniforms:ga([Ba.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Di(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Is(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Di},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Is(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Is(1,1,1)},specularColorMap:{value:null}}]),vertexShader:ja.meshphysical_vert,fragmentShader:ja.meshphysical_frag};const Na={r:0,b:0,g:0};function Fa(e,t,i,n,s,a,r){const o=new Is(0);let l,c,d=!0===a?0:1,h=null,u=0,p=null;function g(t,i){t.getRGB(Na,va(e)),n.buffers.color.setClear(Na.r,Na.g,Na.b,i,r)}return{getClearColor:function(){return o},setClearColor:function(e,t=1){o.set(e),d=t,g(o,d)},getClearAlpha:function(){return d},setClearAlpha:function(e){d=e,g(o,d)},render:function(n,a){let r=!1,v=!0===a.isScene?a.background:null;if(v&&v.isTexture){v=(a.backgroundBlurriness>0?i:t).get(v)}const y=e.xr,b=y.getSession&&y.getSession();b&&"additive"===b.environmentBlendMode&&(v=null),null===v?g(o,d):v&&v.isColor&&(g(v,1),r=!0),(e.autoClear||r)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),v&&(v.isCubeTexture||v.mapping===le)?(void 0===c&&(c=new ua(new fa(1,1,1),new ba({name:"BackgroundCubeMaterial",uniforms:ma(Ba.backgroundCube.uniforms),vertexShader:Ba.backgroundCube.vertexShader,fragmentShader:Ba.backgroundCube.fragmentShader,side:m,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(e,t,i){this.matrixWorld.copyPosition(i.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),s.update(c)),c.material.uniforms.envMap.value=v,c.material.uniforms.flipEnvMap.value=v.isCubeTexture&&!1===v.isRenderTargetTexture?-1:1,c.material.uniforms.backgroundBlurriness.value=a.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=a.backgroundIntensity,c.material.toneMapped=v.encoding!==Lt,h===v&&u===v.version&&p===e.toneMapping||(c.material.needsUpdate=!0,h=v,u=v.version,p=e.toneMapping),c.layers.enableAll(),n.unshift(c,c.geometry,c.material,0,0,null)):v&&v.isTexture&&(void 0===l&&(l=new ua(new La(2,2),new ba({name:"BackgroundMaterial",uniforms:ma(Ba.background.uniforms),vertexShader:Ba.background.vertexShader,fragmentShader:Ba.background.fragmentShader,side:f,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),s.update(l)),l.material.uniforms.t2D.value=v,l.material.uniforms.backgroundIntensity.value=a.backgroundIntensity,l.material.toneMapped=v.encoding!==Lt,!0===v.matrixAutoUpdate&&v.updateMatrix(),l.material.uniforms.uvTransform.value.copy(v.matrix),h===v&&u===v.version&&p===e.toneMapping||(l.material.needsUpdate=!0,h=v,u=v.version,p=e.toneMapping),l.layers.enableAll(),n.unshift(l,l.geometry,l.material,0,0,null))}}}function Ha(e,t,i,n){const s=e.getParameter(34921),a=n.isWebGL2?null:t.get("OES_vertex_array_object"),r=n.isWebGL2||null!==a,o={},l=p(null);let c=l,d=!1;function h(t){return n.isWebGL2?e.bindVertexArray(t):a.bindVertexArrayOES(t)}function u(t){return n.isWebGL2?e.deleteVertexArray(t):a.deleteVertexArrayOES(t)}function p(e){const t=[],i=[],n=[];for(let e=0;e<s;e++)t[e]=0,i[e]=0,n[e]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:i,attributeDivisors:n,object:e,attributes:{},index:null}}function f(){const e=c.newAttributes;for(let t=0,i=e.length;t<i;t++)e[t]=0}function m(e){g(e,0)}function g(i,s){const a=c.newAttributes,r=c.enabledAttributes,o=c.attributeDivisors;if(a[i]=1,0===r[i]&&(e.enableVertexAttribArray(i),r[i]=1),o[i]!==s){(n.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](i,s),o[i]=s}}function v(){const t=c.newAttributes,i=c.enabledAttributes;for(let n=0,s=i.length;n<s;n++)i[n]!==t[n]&&(e.disableVertexAttribArray(n),i[n]=0)}function y(t,i,s,a,r,o){!0!==n.isWebGL2||5124!==s&&5125!==s?e.vertexAttribPointer(t,i,s,a,r,o):e.vertexAttribIPointer(t,i,s,r,o)}function b(){w(),d=!0,c!==l&&(c=l,h(c.object))}function w(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(s,l,u,b,w){let x=!1;if(r){const t=function(t,i,s){const r=!0===s.wireframe;let l=o[t.id];void 0===l&&(l={},o[t.id]=l);let c=l[i.id];void 0===c&&(c={},l[i.id]=c);let d=c[r];void 0===d&&(d=p(function(){if(n.isWebGL2)return e.createVertexArray();return a.createVertexArrayOES()}()),c[r]=d);return d}(b,u,l);c!==t&&(c=t,h(c.object)),x=function(e,t,i,n){const s=c.attributes,a=t.attributes;let r=0;const o=i.getAttributes();for(const t in o){if(o[t].location>=0){const i=s[t];let n=a[t];if(void 0===n&&("instanceMatrix"===t&&e.instanceMatrix&&(n=e.instanceMatrix),"instanceColor"===t&&e.instanceColor&&(n=e.instanceColor)),void 0===i)return!0;if(i.attribute!==n)return!0;if(n&&i.data!==n.data)return!0;r++}}if(c.attributesNum!==r)return!0;if(c.index!==n)return!0;return!1}(s,b,u,w),x&&function(e,t,i,n){const s={},a=t.attributes;let r=0;const o=i.getAttributes();for(const t in o){if(o[t].location>=0){let i=a[t];void 0===i&&("instanceMatrix"===t&&e.instanceMatrix&&(i=e.instanceMatrix),"instanceColor"===t&&e.instanceColor&&(i=e.instanceColor));const n={attribute:i};i&&i.data&&(n.data=i.data),s[t]=n,r++}}c.attributes=s,c.attributesNum=r,c.index=n}(s,b,u,w)}else{const e=!0===l.wireframe;c.geometry===b.id&&c.program===u.id&&c.wireframe===e||(c.geometry=b.id,c.program=u.id,c.wireframe=e,x=!0)}null!==w&&i.update(w,34963),(x||d)&&(d=!1,function(s,a,r,o){if(!1===n.isWebGL2&&(s.isInstancedMesh||o.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;f();const l=o.attributes,c=r.getAttributes(),d=a.defaultAttributeValues;for(const t in c){const n=c[t];if(n.location>=0){let a=l[t];if(void 0===a&&("instanceMatrix"===t&&s.instanceMatrix&&(a=s.instanceMatrix),"instanceColor"===t&&s.instanceColor&&(a=s.instanceColor)),void 0!==a){const t=a.normalized,r=a.itemSize,l=i.get(a);if(void 0===l)continue;const c=l.buffer,d=l.type,h=l.bytesPerElement;if(a.isInterleavedBufferAttribute){const i=a.data,l=i.stride,u=a.offset;if(i.isInstancedInterleavedBuffer){for(let e=0;e<n.locationSize;e++)g(n.location+e,i.meshPerAttribute);!0!==s.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=i.meshPerAttribute*i.count)}else for(let e=0;e<n.locationSize;e++)m(n.location+e);e.bindBuffer(34962,c);for(let e=0;e<n.locationSize;e++)y(n.location+e,r/n.locationSize,d,t,l*h,(u+r/n.locationSize*e)*h)}else{if(a.isInstancedBufferAttribute){for(let e=0;e<n.locationSize;e++)g(n.location+e,a.meshPerAttribute);!0!==s.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=a.meshPerAttribute*a.count)}else for(let e=0;e<n.locationSize;e++)m(n.location+e);e.bindBuffer(34962,c);for(let e=0;e<n.locationSize;e++)y(n.location+e,r/n.locationSize,d,t,r*h,r/n.locationSize*e*h)}}else if(void 0!==d){const i=d[t];if(void 0!==i)switch(i.length){case 2:e.vertexAttrib2fv(n.location,i);break;case 3:e.vertexAttrib3fv(n.location,i);break;case 4:e.vertexAttrib4fv(n.location,i);break;default:e.vertexAttrib1fv(n.location,i)}}}}v()}(s,l,u,b),null!==w&&e.bindBuffer(34963,i.get(w).buffer))},reset:b,resetDefaultState:w,dispose:function(){b();for(const e in o){const t=o[e];for(const e in t){const i=t[e];for(const e in i)u(i[e].object),delete i[e];delete t[e]}delete o[e]}},releaseStatesOfGeometry:function(e){if(void 0===o[e.id])return;const t=o[e.id];for(const e in t){const i=t[e];for(const e in i)u(i[e].object),delete i[e];delete t[e]}delete o[e.id]},releaseStatesOfProgram:function(e){for(const t in o){const i=o[t];if(void 0===i[e.id])continue;const n=i[e.id];for(const e in n)u(n[e].object),delete n[e];delete i[e.id]}},initAttributes:f,enableAttribute:m,disableUnusedAttributes:v}}function Ua(e,t,i,n){const s=n.isWebGL2;let a;this.setMode=function(e){a=e},this.render=function(t,n){e.drawArrays(a,t,n),i.update(n,a,1)},this.renderInstances=function(n,r,o){if(0===o)return;let l,c;if(s)l=e,c="drawArraysInstanced";else if(l=t.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[c](a,n,r,o),i.update(r,a,o)}}function Va(e,t,i){let n;function s(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const a="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext;let r=void 0!==i.precision?i.precision:"highp";const o=s(r);o!==r&&(console.warn("THREE.WebGLRenderer:",r,"not supported, using",o,"instead."),r=o);const l=a||t.has("WEBGL_draw_buffers"),c=!0===i.logarithmicDepthBuffer,d=e.getParameter(34930),h=e.getParameter(35660),u=e.getParameter(3379),p=e.getParameter(34076),f=e.getParameter(34921),m=e.getParameter(36347),g=e.getParameter(36348),v=e.getParameter(36349),y=h>0,b=a||t.has("OES_texture_float");return{isWebGL2:a,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==n)return n;if(!0===t.has("EXT_texture_filter_anisotropic")){const i=t.get("EXT_texture_filter_anisotropic");n=e.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else n=0;return n},getMaxPrecision:s,precision:r,logarithmicDepthBuffer:c,maxTextures:d,maxVertexTextures:h,maxTextureSize:u,maxCubemapSize:p,maxAttributes:f,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:v,vertexTextures:y,floatFragmentTextures:b,floatVertexTextures:y&&b,maxSamples:a?e.getParameter(36183):0}}function Ga(e){const t=this;let i=null,n=0,s=!1,a=!1;const r=new Aa,o=new Oi,l={value:null,needsUpdate:!1};function c(e,i,n,s){const a=null!==e?e.length:0;let c=null;if(0!==a){if(c=l.value,!0!==s||null===c){const t=n+4*a,s=i.matrixWorldInverse;o.getNormalMatrix(s),(null===c||c.length<t)&&(c=new Float32Array(t));for(let t=0,i=n;t!==a;++t,i+=4)r.copy(e[t]).applyMatrix4(s,o),r.normal.toArray(c,i),c[i+3]=r.constant}l.value=c,l.needsUpdate=!0}return t.numPlanes=a,t.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t){const i=0!==e.length||t||0!==n||s;return s=t,n=e.length,i},this.beginShadows=function(){a=!0,c(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(e,t){i=c(e,t,0)},this.setState=function(r,o,d){const h=r.clippingPlanes,u=r.clipIntersection,p=r.clipShadows,f=e.get(r);if(!s||null===h||0===h.length||a&&!p)a?c(null):function(){l.value!==i&&(l.value=i,l.needsUpdate=n>0);t.numPlanes=n,t.numIntersection=0}();else{const e=a?0:n,t=4*e;let s=f.clippingState||null;l.value=s,s=c(h,o,t,d);for(let e=0;e!==t;++e)s[e]=i[e];f.clippingState=s,this.numIntersection=u?this.numPlanes:0,this.numPlanes+=e}}}function Wa(e){let t=new WeakMap;function i(e,t){return t===re?e.mapping=se:t===oe&&(e.mapping=ae),e}function n(e){const i=e.target;i.removeEventListener("dispose",n);const s=t.get(i);void 0!==s&&(t.delete(i),s.dispose())}return{get:function(s){if(s&&s.isTexture&&!1===s.isRenderTargetTexture){const a=s.mapping;if(a===re||a===oe){if(t.has(s)){return i(t.get(s).texture,s.mapping)}{const a=s.image;if(a&&a.height>0){const r=new _a(a.height/2);return r.fromEquirectangularTexture(e,s),t.set(s,r),s.addEventListener("dispose",n),i(r.texture,s.mapping)}return null}}}return s},dispose:function(){t=new WeakMap}}}class qa extends wa{constructor(e=-1,t=1,i=1,n=-1,s=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=n,this.near=s,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,i,n,s,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=n,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,n=(this.top+this.bottom)/2;let s=i-e,a=i+e,r=n+t,o=n-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=e*this.view.offsetX,a=s+e*this.view.width,r-=t*this.view.offsetY,o=r-t*this.view.height}this.projectionMatrix.makeOrthographic(s,a,r,o,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const Ya=[.125,.215,.35,.446,.526,.582],Ka=20,Xa=new qa,Za=new Is;let Ja=null;const Qa=(1+Math.sqrt(5))/2,$a=1/Qa,er=[new Hi(1,1,1),new Hi(-1,1,1),new Hi(1,1,-1),new Hi(-1,1,-1),new Hi(0,Qa,$a),new Hi(0,Qa,-$a),new Hi($a,0,Qa),new Hi(-$a,0,Qa),new Hi(Qa,$a,0),new Hi(-Qa,$a,0)];class tr{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,n=100){Ja=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,n,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=ar(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=sr(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Ja),e.scissorTest=!1,nr(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===se||e.mapping===ae?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Ja=this._renderer.getRenderTarget();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:ve,minFilter:ve,generateMipmaps:!1,type:Ae,format:Oe,encoding:Ot,depthBuffer:!1},n=ir(e,t,i);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=ir(e,t,i);const{_lodMax:n}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(e){const t=[],i=[],n=[];let s=e;const a=e-4+1+Ya.length;for(let r=0;r<a;r++){const a=Math.pow(2,s);i.push(a);let o=1/a;r>e-4?o=Ya[r-e+4-1]:0===r&&(o=0),n.push(o);const l=1/(a-2),c=-l,d=1+l,h=[c,c,d,c,d,d,c,c,d,d,c,d],u=6,p=6,f=3,m=2,g=1,v=new Float32Array(f*p*u),y=new Float32Array(m*p*u),b=new Float32Array(g*p*u);for(let e=0;e<u;e++){const t=e%3*2/3-1,i=e>2?0:-1,n=[t,i,0,t+2/3,i,0,t+2/3,i+1,0,t,i,0,t+2/3,i+1,0,t,i+1,0];v.set(n,f*p*e),y.set(h,m*p*e);const s=[e,e,e,e,e,e];b.set(s,g*p*e)}const w=new Js;w.setAttribute("position",new Ds(v,f)),w.setAttribute("uv",new Ds(y,m)),w.setAttribute("faceIndex",new Ds(b,g)),t.push(w),s>4&&s--}return{lodPlanes:t,sizeLods:i,sigmas:n}}(n)),this._blurMaterial=function(e,t,i){const n=new Float32Array(Ka),s=new Hi(0,1,0);return new ba({name:"SphericalGaussianBlur",defines:{n:Ka,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/i,CUBEUV_MAX_MIP:e+".0"},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:y,depthTest:!1,depthWrite:!1})}(n,e,t)}return n}_compileMaterial(e){const t=new ua(this._lodPlanes[0],e);this._renderer.compile(t,Xa)}_sceneToCubeUV(e,t,i,n){const s=new xa(90,1,t,i),a=[1,-1,1,1,1,1],r=[1,1,1,-1,-1,-1],o=this._renderer,l=o.autoClear,c=o.toneMapping;o.getClearColor(Za),o.toneMapping=J,o.autoClear=!1;const d=new Rs({name:"PMREM.Background",side:m,depthWrite:!1,depthTest:!1}),h=new ua(new fa,d);let u=!1;const p=e.background;p?p.isColor&&(d.color.copy(p),e.background=null,u=!0):(d.color.copy(Za),u=!0);for(let t=0;t<6;t++){const i=t%3;0===i?(s.up.set(0,a[t],0),s.lookAt(r[t],0,0)):1===i?(s.up.set(0,0,a[t]),s.lookAt(0,r[t],0)):(s.up.set(0,a[t],0),s.lookAt(0,0,r[t]));const l=this._cubeSize;nr(n,i*l,t>2?l:0,l,l),o.setRenderTarget(n),u&&o.render(h,s),o.render(e,s)}h.geometry.dispose(),h.material.dispose(),o.toneMapping=c,o.autoClear=l,e.background=p}_textureToCubeUV(e,t){const i=this._renderer,n=e.mapping===se||e.mapping===ae;n?(null===this._cubemapMaterial&&(this._cubemapMaterial=ar()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=sr());const s=n?this._cubemapMaterial:this._equirectMaterial,a=new ua(this._lodPlanes[0],s);s.uniforms.envMap.value=e;const r=this._cubeSize;nr(t,0,0,3*r,2*r),i.setRenderTarget(t),i.render(a,Xa)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let t=1;t<this._lodPlanes.length;t++){const i=Math.sqrt(this._sigmas[t]*this._sigmas[t]-this._sigmas[t-1]*this._sigmas[t-1]),n=er[(t-1)%er.length];this._blur(e,t-1,t,i,n)}t.autoClear=i}_blur(e,t,i,n,s){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,i,n,"latitudinal",s),this._halfBlur(a,e,i,i,n,"longitudinal",s)}_halfBlur(e,t,i,n,s,a,r){const o=this._renderer,l=this._blurMaterial;"latitudinal"!==a&&"longitudinal"!==a&&console.error("blur direction must be either latitudinal or longitudinal!");const c=new ua(this._lodPlanes[n],l),d=l.uniforms,h=this._sizeLods[i]-1,u=isFinite(s)?Math.PI/(2*h):2*Math.PI/39,p=s/u,f=isFinite(s)?1+Math.floor(3*p):Ka;f>Ka&&console.warn("sigmaRadians, "+s+", is too large and will clip, as it requested "+f+" samples when the maximum is set to "+Ka);const m=[];let g=0;for(let e=0;e<Ka;++e){const t=e/p,i=Math.exp(-t*t/2);m.push(i),0===e?g+=i:e<f&&(g+=2*i)}for(let e=0;e<m.length;e++)m[e]=m[e]/g;d.envMap.value=e.texture,d.samples.value=f,d.weights.value=m,d.latitudinal.value="latitudinal"===a,r&&(d.poleAxis.value=r);const{_lodMax:v}=this;d.dTheta.value=u,d.mipInt.value=v-i;const y=this._sizeLods[n];nr(t,3*y*(n>v-4?n-v+4:0),4*(this._cubeSize-y),3*y,2*y),o.setRenderTarget(t),o.render(c,Xa)}}function ir(e,t,i){const n=new rn(e,t,i);return n.texture.mapping=le,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function nr(e,t,i,n,s){e.viewport.set(t,i,n,s),e.scissor.set(t,i,n,s)}function sr(){return new ba({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:y,depthTest:!1,depthWrite:!1})}function ar(){return new ba({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:y,depthTest:!1,depthWrite:!1})}function rr(e){let t=new WeakMap,i=null;function n(e){const i=e.target;i.removeEventListener("dispose",n);const s=t.get(i);void 0!==s&&(t.delete(i),s.dispose())}return{get:function(s){if(s&&s.isTexture){const a=s.mapping,r=a===re||a===oe,o=a===se||a===ae;if(r||o){if(s.isRenderTargetTexture&&!0===s.needsPMREMUpdate){s.needsPMREMUpdate=!1;let n=t.get(s);return null===i&&(i=new tr(e)),n=r?i.fromEquirectangular(s,n):i.fromCubemap(s,n),t.set(s,n),n.texture}if(t.has(s))return t.get(s).texture;{const a=s.image;if(r&&a&&a.height>0||o&&a&&function(e){let t=0;const i=6;for(let n=0;n<i;n++)void 0!==e[n]&&t++;return t===i}(a)){null===i&&(i=new tr(e));const a=r?i.fromEquirectangular(s):i.fromCubemap(s);return t.set(s,a),s.addEventListener("dispose",n),a.texture}return null}}}return s},dispose:function(){t=new WeakMap,null!==i&&(i.dispose(),i=null)}}}function or(e){const t={};function i(i){if(void 0!==t[i])return t[i];let n;switch(i){case"WEBGL_depth_texture":n=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:n=e.getExtension(i)}return t[i]=n,n}return{has:function(e){return null!==i(e)},init:function(e){e.isWebGL2?i("EXT_color_buffer_float"):(i("WEBGL_depth_texture"),i("OES_texture_float"),i("OES_texture_half_float"),i("OES_texture_half_float_linear"),i("OES_standard_derivatives"),i("OES_element_index_uint"),i("OES_vertex_array_object"),i("ANGLE_instanced_arrays")),i("OES_texture_float_linear"),i("EXT_color_buffer_half_float"),i("WEBGL_multisampled_render_to_texture")},get:function(e){const t=i(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function lr(e,t,i,n){const s={},a=new WeakMap;function r(e){const o=e.target;null!==o.index&&t.remove(o.index);for(const e in o.attributes)t.remove(o.attributes[e]);o.removeEventListener("dispose",r),delete s[o.id];const l=a.get(o);l&&(t.remove(l),a.delete(o)),n.releaseStatesOfGeometry(o),!0===o.isInstancedBufferGeometry&&delete o._maxInstanceCount,i.memory.geometries--}function o(e){const i=[],n=e.index,s=e.attributes.position;let r=0;if(null!==n){const e=n.array;r=n.version;for(let t=0,n=e.length;t<n;t+=3){const n=e[t+0],s=e[t+1],a=e[t+2];i.push(n,s,s,a,a,n)}}else{const e=s.array;r=s.version;for(let t=0,n=e.length/3-1;t<n;t+=3){const e=t+0,n=t+1,s=t+2;i.push(e,n,n,s,s,e)}}const o=new(ji(i)?Fs:Bs)(i,1);o.version=r;const l=a.get(e);l&&t.remove(l),a.set(e,o)}return{get:function(e,t){return!0===s[t.id]||(t.addEventListener("dispose",r),s[t.id]=!0,i.memory.geometries++),t},update:function(e){const i=e.attributes;for(const e in i)t.update(i[e],34962);const n=e.morphAttributes;for(const e in n){const i=n[e];for(let e=0,n=i.length;e<n;e++)t.update(i[e],34962)}},getWireframeAttribute:function(e){const t=a.get(e);if(t){const i=e.index;null!==i&&t.version<i.version&&o(e)}else o(e);return a.get(e)}}}function cr(e,t,i,n){const s=n.isWebGL2;let a,r,o;this.setMode=function(e){a=e},this.setIndex=function(e){r=e.type,o=e.bytesPerElement},this.render=function(t,n){e.drawElements(a,n,r,t*o),i.update(n,a,1)},this.renderInstances=function(n,l,c){if(0===c)return;let d,h;if(s)d=e,h="drawElementsInstanced";else if(d=t.get("ANGLE_instanced_arrays"),h="drawElementsInstancedANGLE",null===d)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");d[h](a,l,r,n*o,c),i.update(l,a,c)}}function dr(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,i,n){switch(t.calls++,i){case 4:t.triangles+=n*(e/3);break;case 1:t.lines+=n*(e/2);break;case 3:t.lines+=n*(e-1);break;case 2:t.lines+=n*e;break;case 0:t.points+=n*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",i)}}}}function hr(e,t){return e[0]-t[0]}function ur(e,t){return Math.abs(t[1])-Math.abs(e[1])}function pr(e,t,i){const n={},s=new Float32Array(8),a=new WeakMap,r=new an,o=[];for(let e=0;e<8;e++)o[e]=[e,0];return{update:function(l,c,d){const h=l.morphTargetInfluences;if(!0===t.isWebGL2){const u=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,p=void 0!==u?u.length:0;let f=a.get(c);if(void 0===f||f.count!==p){void 0!==f&&f.texture.dispose();const v=void 0!==c.morphAttributes.position,y=void 0!==c.morphAttributes.normal,b=void 0!==c.morphAttributes.color,w=c.morphAttributes.position||[],x=c.morphAttributes.normal||[],S=c.morphAttributes.color||[];let M=0;!0===v&&(M=1),!0===y&&(M=2),!0===b&&(M=3);let k=c.attributes.position.count*M,_=1;k>t.maxTextureSize&&(_=Math.ceil(k/t.maxTextureSize),k=t.maxTextureSize);const T=new Float32Array(k*_*4*p),C=new on(T,k,_,p);C.type=Ie,C.needsUpdate=!0;const I=4*M;for(let R=0;R<p;R++){const P=w[R],E=x[R],D=S[R],O=k*_*4*R;for(let L=0;L<P.count;L++){const j=L*I;!0===v&&(r.fromBufferAttribute(P,L),T[O+j+0]=r.x,T[O+j+1]=r.y,T[O+j+2]=r.z,T[O+j+3]=0),!0===y&&(r.fromBufferAttribute(E,L),T[O+j+4]=r.x,T[O+j+5]=r.y,T[O+j+6]=r.z,T[O+j+7]=0),!0===b&&(r.fromBufferAttribute(D,L),T[O+j+8]=r.x,T[O+j+9]=r.y,T[O+j+10]=r.z,T[O+j+11]=4===D.itemSize?r.w:1)}}function A(){C.dispose(),a.delete(c),c.removeEventListener("dispose",A)}f={count:p,texture:C,size:new Di(k,_)},a.set(c,f),c.addEventListener("dispose",A)}let m=0;for(let z=0;z<h.length;z++)m+=h[z];const g=c.morphTargetsRelative?1:1-m;d.getUniforms().setValue(e,"morphTargetBaseInfluence",g),d.getUniforms().setValue(e,"morphTargetInfluences",h),d.getUniforms().setValue(e,"morphTargetsTexture",f.texture,i),d.getUniforms().setValue(e,"morphTargetsTextureSize",f.size)}else{const B=void 0===h?0:h.length;let N=n[c.id];if(void 0===N||N.length!==B){N=[];for(let G=0;G<B;G++)N[G]=[G,0];n[c.id]=N}for(let W=0;W<B;W++){const q=N[W];q[0]=W,q[1]=h[W]}N.sort(ur);for(let Y=0;Y<8;Y++)Y<B&&N[Y][1]?(o[Y][0]=N[Y][0],o[Y][1]=N[Y][1]):(o[Y][0]=Number.MAX_SAFE_INTEGER,o[Y][1]=0);o.sort(hr);const F=c.morphAttributes.position,H=c.morphAttributes.normal;let U=0;for(let K=0;K<8;K++){const X=o[K],Z=X[0],J=X[1];Z!==Number.MAX_SAFE_INTEGER&&J?(F&&c.getAttribute("morphTarget"+K)!==F[Z]&&c.setAttribute("morphTarget"+K,F[Z]),H&&c.getAttribute("morphNormal"+K)!==H[Z]&&c.setAttribute("morphNormal"+K,H[Z]),s[K]=J,U+=J):(F&&!0===c.hasAttribute("morphTarget"+K)&&c.deleteAttribute("morphTarget"+K),H&&!0===c.hasAttribute("morphNormal"+K)&&c.deleteAttribute("morphNormal"+K),s[K]=0)}const V=c.morphTargetsRelative?1:1-U;d.getUniforms().setValue(e,"morphTargetBaseInfluence",V),d.getUniforms().setValue(e,"morphTargetInfluences",s)}}}}function fr(e,t,i,n){let s=new WeakMap;function a(e){const t=e.target;t.removeEventListener("dispose",a),i.remove(t.instanceMatrix),null!==t.instanceColor&&i.remove(t.instanceColor)}return{update:function(e){const r=n.render.frame,o=e.geometry,l=t.get(e,o);return s.get(l)!==r&&(t.update(l),s.set(l,r)),e.isInstancedMesh&&(!1===e.hasEventListener("dispose",a)&&e.addEventListener("dispose",a),i.update(e.instanceMatrix,34962),null!==e.instanceColor&&i.update(e.instanceColor,34962)),l},dispose:function(){s=new WeakMap}}}const mr=new sn,gr=new on,vr=new cn,yr=new ka,br=[],wr=[],xr=new Float32Array(16),Sr=new Float32Array(9),Mr=new Float32Array(4);function kr(e,t,i){const n=e[0];if(n<=0||n>0)return e;const s=t*i;let a=br[s];if(void 0===a&&(a=new Float32Array(s),br[s]=a),0!==t){n.toArray(a,0);for(let n=1,s=0;n!==t;++n)s+=i,e[n].toArray(a,s)}return a}function _r(e,t){if(e.length!==t.length)return!1;for(let i=0,n=e.length;i<n;i++)if(e[i]!==t[i])return!1;return!0}function Tr(e,t){for(let i=0,n=t.length;i<n;i++)e[i]=t[i]}function Cr(e,t){let i=wr[t];void 0===i&&(i=new Int32Array(t),wr[t]=i);for(let n=0;n!==t;++n)i[n]=e.allocateTextureUnit();return i}function Ir(e,t){const i=this.cache;i[0]!==t&&(e.uniform1f(this.addr,t),i[0]=t)}function Ar(e,t){const i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y);else{if(_r(i,t))return;e.uniform2fv(this.addr,t),Tr(i,t)}}function Rr(e,t){const i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y&&i[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z);else if(void 0!==t.r)i[0]===t.r&&i[1]===t.g&&i[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),i[0]=t.r,i[1]=t.g,i[2]=t.b);else{if(_r(i,t))return;e.uniform3fv(this.addr,t),Tr(i,t)}}function Pr(e,t){const i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y&&i[2]===t.z&&i[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w);else{if(_r(i,t))return;e.uniform4fv(this.addr,t),Tr(i,t)}}function Er(e,t){const i=this.cache,n=t.elements;if(void 0===n){if(_r(i,t))return;e.uniformMatrix2fv(this.addr,!1,t),Tr(i,t)}else{if(_r(i,n))return;Mr.set(n),e.uniformMatrix2fv(this.addr,!1,Mr),Tr(i,n)}}function Dr(e,t){const i=this.cache,n=t.elements;if(void 0===n){if(_r(i,t))return;e.uniformMatrix3fv(this.addr,!1,t),Tr(i,t)}else{if(_r(i,n))return;Sr.set(n),e.uniformMatrix3fv(this.addr,!1,Sr),Tr(i,n)}}function Or(e,t){const i=this.cache,n=t.elements;if(void 0===n){if(_r(i,t))return;e.uniformMatrix4fv(this.addr,!1,t),Tr(i,t)}else{if(_r(i,n))return;xr.set(n),e.uniformMatrix4fv(this.addr,!1,xr),Tr(i,n)}}function Lr(e,t){const i=this.cache;i[0]!==t&&(e.uniform1i(this.addr,t),i[0]=t)}function jr(e,t){const i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y||(e.uniform2i(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y);else{if(_r(i,t))return;e.uniform2iv(this.addr,t),Tr(i,t)}}function zr(e,t){const i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y&&i[2]===t.z||(e.uniform3i(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z);else{if(_r(i,t))return;e.uniform3iv(this.addr,t),Tr(i,t)}}function Br(e,t){const i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y&&i[2]===t.z&&i[3]===t.w||(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w);else{if(_r(i,t))return;e.uniform4iv(this.addr,t),Tr(i,t)}}function Nr(e,t){const i=this.cache;i[0]!==t&&(e.uniform1ui(this.addr,t),i[0]=t)}function Fr(e,t){const i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y||(e.uniform2ui(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y);else{if(_r(i,t))return;e.uniform2uiv(this.addr,t),Tr(i,t)}}function Hr(e,t){const i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y&&i[2]===t.z||(e.uniform3ui(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z);else{if(_r(i,t))return;e.uniform3uiv(this.addr,t),Tr(i,t)}}function Ur(e,t){const i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y&&i[2]===t.z&&i[3]===t.w||(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w);else{if(_r(i,t))return;e.uniform4uiv(this.addr,t),Tr(i,t)}}function Vr(e,t,i){const n=this.cache,s=i.allocateTextureUnit();n[0]!==s&&(e.uniform1i(this.addr,s),n[0]=s),i.setTexture2D(t||mr,s)}function Gr(e,t,i){const n=this.cache,s=i.allocateTextureUnit();n[0]!==s&&(e.uniform1i(this.addr,s),n[0]=s),i.setTexture3D(t||vr,s)}function Wr(e,t,i){const n=this.cache,s=i.allocateTextureUnit();n[0]!==s&&(e.uniform1i(this.addr,s),n[0]=s),i.setTextureCube(t||yr,s)}function qr(e,t,i){const n=this.cache,s=i.allocateTextureUnit();n[0]!==s&&(e.uniform1i(this.addr,s),n[0]=s),i.setTexture2DArray(t||gr,s)}function Yr(e,t){e.uniform1fv(this.addr,t)}function Kr(e,t){const i=kr(t,this.size,2);e.uniform2fv(this.addr,i)}function Xr(e,t){const i=kr(t,this.size,3);e.uniform3fv(this.addr,i)}function Zr(e,t){const i=kr(t,this.size,4);e.uniform4fv(this.addr,i)}function Jr(e,t){const i=kr(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,i)}function Qr(e,t){const i=kr(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,i)}function $r(e,t){const i=kr(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,i)}function eo(e,t){e.uniform1iv(this.addr,t)}function to(e,t){e.uniform2iv(this.addr,t)}function io(e,t){e.uniform3iv(this.addr,t)}function no(e,t){e.uniform4iv(this.addr,t)}function so(e,t){e.uniform1uiv(this.addr,t)}function ao(e,t){e.uniform2uiv(this.addr,t)}function ro(e,t){e.uniform3uiv(this.addr,t)}function oo(e,t){e.uniform4uiv(this.addr,t)}function lo(e,t,i){const n=this.cache,s=t.length,a=Cr(i,s);_r(n,a)||(e.uniform1iv(this.addr,a),Tr(n,a));for(let e=0;e!==s;++e)i.setTexture2D(t[e]||mr,a[e])}function co(e,t,i){const n=this.cache,s=t.length,a=Cr(i,s);_r(n,a)||(e.uniform1iv(this.addr,a),Tr(n,a));for(let e=0;e!==s;++e)i.setTexture3D(t[e]||vr,a[e])}function ho(e,t,i){const n=this.cache,s=t.length,a=Cr(i,s);_r(n,a)||(e.uniform1iv(this.addr,a),Tr(n,a));for(let e=0;e!==s;++e)i.setTextureCube(t[e]||yr,a[e])}function uo(e,t,i){const n=this.cache,s=t.length,a=Cr(i,s);_r(n,a)||(e.uniform1iv(this.addr,a),Tr(n,a));for(let e=0;e!==s;++e)i.setTexture2DArray(t[e]||gr,a[e])}class po{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=function(e){switch(e){case 5126:return Ir;case 35664:return Ar;case 35665:return Rr;case 35666:return Pr;case 35674:return Er;case 35675:return Dr;case 35676:return Or;case 5124:case 35670:return Lr;case 35667:case 35671:return jr;case 35668:case 35672:return zr;case 35669:case 35673:return Br;case 5125:return Nr;case 36294:return Fr;case 36295:return Hr;case 36296:return Ur;case 35678:case 36198:case 36298:case 36306:case 35682:return Vr;case 35679:case 36299:case 36307:return Gr;case 35680:case 36300:case 36308:case 36293:return Wr;case 36289:case 36303:case 36311:case 36292:return qr}}(t.type)}}class fo{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return Yr;case 35664:return Kr;case 35665:return Xr;case 35666:return Zr;case 35674:return Jr;case 35675:return Qr;case 35676:return $r;case 5124:case 35670:return eo;case 35667:case 35671:return to;case 35668:case 35672:return io;case 35669:case 35673:return no;case 5125:return so;case 36294:return ao;case 36295:return ro;case 36296:return oo;case 35678:case 36198:case 36298:case 36306:case 35682:return lo;case 35679:case 36299:case 36307:return co;case 35680:case 36300:case 36308:case 36293:return ho;case 36289:case 36303:case 36311:case 36292:return uo}}(t.type)}}class mo{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const n=this.seq;for(let s=0,a=n.length;s!==a;++s){const a=n[s];a.setValue(e,t[a.id],i)}}}const go=/(\w+)(\])?(\[|\.)?/g;function vo(e,t){e.seq.push(t),e.map[t.id]=t}function yo(e,t,i){const n=e.name,s=n.length;for(go.lastIndex=0;;){const a=go.exec(n),r=go.lastIndex;let o=a[1];const l="]"===a[2],c=a[3];if(l&&(o|=0),void 0===c||"["===c&&r+2===s){vo(i,void 0===c?new po(o,e,t):new fo(o,e,t));break}{let e=i.map[o];void 0===e&&(e=new mo(o),vo(i,e)),i=e}}}class bo{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,35718);for(let n=0;n<i;++n){const i=e.getActiveUniform(t,n);yo(i,e.getUniformLocation(t,i.name),this)}}setValue(e,t,i,n){const s=this.map[t];void 0!==s&&s.setValue(e,i,n)}setOptional(e,t,i){const n=t[i];void 0!==n&&this.setValue(e,i,n)}static upload(e,t,i,n){for(let s=0,a=t.length;s!==a;++s){const a=t[s],r=i[a.id];!1!==r.needsUpdate&&a.setValue(e,r.value,n)}}static seqWithValue(e,t){const i=[];for(let n=0,s=e.length;n!==s;++n){const s=e[n];s.id in t&&i.push(s)}return i}}function wo(e,t,i){const n=e.createShader(t);return e.shaderSource(n,i),e.compileShader(n),n}let xo=0;function So(e,t,i){const n=e.getShaderParameter(t,35713),s=e.getShaderInfoLog(t).trim();if(n&&""===s)return"";const a=/ERROR: 0:(\d+)/.exec(s);if(a){const n=parseInt(a[1]);return i.toUpperCase()+"\n\n"+s+"\n\n"+function(e,t){const i=e.split("\n"),n=[],s=Math.max(t-6,0),a=Math.min(t+6,i.length);for(let e=s;e<a;e++){const s=e+1;n.push((s===t?">":" ")+" "+s+": "+i[e])}return n.join("\n")}(e.getShaderSource(t),n)}return s}function Mo(e,t){const i=function(e){switch(e){case Ot:return["Linear","( value )"];case Lt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+i[0]+i[1]+"; }"}function ko(e,t){let i;switch(t){case Q:i="Linear";break;case $:i="Reinhard";break;case ee:i="OptimizedCineon";break;case te:i="ACESFilmic";break;case ie:i="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),i="Linear"}return"vec3 "+e+"( vec3 color ) { return "+i+"ToneMapping( color ); }"}function _o(e){return""!==e}function To(e,t){const i=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,i).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Co(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const Io=/^[ \t]*#include +<([\w\d./]+)>/gm;function Ao(e){return e.replace(Io,Ro)}function Ro(e,t){const i=ja[t];if(void 0===i)throw new Error("Can not resolve #include <"+t+">");return Ao(i)}const Po=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Eo(e){return e.replace(Po,Do)}function Do(e,t,i,n){let s="";for(let e=parseInt(t);e<parseInt(i);e++)s+=n.replace(/\[\s*i\s*\]/g,"[ "+e+" ]").replace(/UNROLLED_LOOP_INDEX/g,e);return s}function Oo(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function Lo(e,t,i,n){const s=e.getContext(),a=i.defines;let r=i.vertexShader,o=i.fragmentShader;const l=function(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===h?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===u?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===p&&(t="SHADOWMAP_TYPE_VSM"),t}(i),c=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case se:case ae:t="ENVMAP_TYPE_CUBE";break;case le:t="ENVMAP_TYPE_CUBE_UV"}return t}(i),d=function(e){let t="ENVMAP_MODE_REFLECTION";e.envMap&&e.envMapMode===ae&&(t="ENVMAP_MODE_REFRACTION");return t}(i),f=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case K:t="ENVMAP_BLENDING_MULTIPLY";break;case X:t="ENVMAP_BLENDING_MIX";break;case Z:t="ENVMAP_BLENDING_ADD"}return t}(i),m=function(e){const t=e.envMapCubeUVHeight;if(null===t)return null;const i=Math.log2(t)-2,n=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,i),112)),texelHeight:n,maxMip:i}}(i),g=i.isWebGL2?"":[(v=i).extensionDerivatives||v.envMapCubeUVHeight||v.bumpMap||v.tangentSpaceNormalMap||v.clearcoatNormalMap||v.flatShading||"physical"===v.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(v.extensionFragDepth||v.logarithmicDepthBuffer)&&v.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",v.extensionDrawBuffers&&v.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(v.extensionShaderTextureLOD||v.envMap||v.transmission)&&v.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(_o).join("\n");var v;const y=function(e){const t=[];for(const i in e){const n=e[i];!1!==n&&t.push("#define "+i+" "+n)}return t.join("\n")}(a),b=s.createProgram();let w,x,S=i.glslVersion?"#version "+i.glslVersion+"\n":"";i.isRawShaderMaterial?(w=[y].filter(_o).join("\n"),w.length>0&&(w+="\n"),x=[g,y].filter(_o).join("\n"),x.length>0&&(x+="\n")):(w=[Oo(i),"#define SHADER_NAME "+i.shaderName,y,i.instancing?"#define USE_INSTANCING":"",i.instancingColor?"#define USE_INSTANCING_COLOR":"",i.supportsVertexTextures?"#define VERTEX_TEXTURES":"",i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+d:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMap&&i.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",i.normalMap&&i.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.displacementMap&&i.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",i.specularColorMap?"#define USE_SPECULARCOLORMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.sheenColorMap?"#define USE_SHEENCOLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",i.vertexTangents?"#define USE_TANGENT":"",i.vertexColors?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUvs?"#define USE_UV":"",i.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",i.flatShading?"#define FLAT_SHADED":"",i.skinning?"#define USE_SKINNING":"",i.morphTargets?"#define USE_MORPHTARGETS":"",i.morphNormals&&!1===i.flatShading?"#define USE_MORPHNORMALS":"",i.morphColors&&i.isWebGL2?"#define USE_MORPHCOLORS":"",i.morphTargetsCount>0&&i.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",i.morphTargetsCount>0&&i.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+i.morphTextureStride:"",i.morphTargetsCount>0&&i.isWebGL2?"#define MORPHTARGETS_COUNT "+i.morphTargetsCount:"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+l:"",i.sizeAttenuation?"#define USE_SIZEATTENUATION":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&i.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(_o).join("\n"),x=[g,Oo(i),"#define SHADER_NAME "+i.shaderName,y,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.matcap?"#define USE_MATCAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+c:"",i.envMap?"#define "+d:"",i.envMap?"#define "+f:"",m?"#define CUBEUV_TEXEL_WIDTH "+m.texelWidth:"",m?"#define CUBEUV_TEXEL_HEIGHT "+m.texelHeight:"",m?"#define CUBEUV_MAX_MIP "+m.maxMip+".0":"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMap&&i.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",i.normalMap&&i.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",i.clearcoat?"#define USE_CLEARCOAT":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.iridescence?"#define USE_IRIDESCENCE":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",i.specularColorMap?"#define USE_SPECULARCOLORMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.alphaTest?"#define USE_ALPHATEST":"",i.sheen?"#define USE_SHEEN":"",i.sheenColorMap?"#define USE_SHEENCOLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",i.vertexTangents?"#define USE_TANGENT":"",i.vertexColors||i.instancingColor?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUvs?"#define USE_UV":"",i.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",i.gradientMap?"#define USE_GRADIENTMAP":"",i.flatShading?"#define FLAT_SHADED":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+l:"",i.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",i.useLegacyLights?"#define LEGACY_LIGHTS":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&i.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",i.toneMapping!==J?"#define TONE_MAPPING":"",i.toneMapping!==J?ja.tonemapping_pars_fragment:"",i.toneMapping!==J?ko("toneMapping",i.toneMapping):"",i.dithering?"#define DITHERING":"",i.opaque?"#define OPAQUE":"",ja.encodings_pars_fragment,Mo("linearToOutputTexel",i.outputEncoding),i.useDepthPacking?"#define DEPTH_PACKING "+i.depthPacking:"","\n"].filter(_o).join("\n")),r=Ao(r),r=To(r,i),r=Co(r,i),o=Ao(o),o=To(o,i),o=Co(o,i),r=Eo(r),o=Eo(o),i.isWebGL2&&!0!==i.isRawShaderMaterial&&(S="#version 300 es\n",w=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+w,x=["#define varying in",i.glslVersion===gi?"":"layout(location = 0) out highp vec4 pc_fragColor;",i.glslVersion===gi?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+x);const M=S+x+o,k=wo(s,35633,S+w+r),_=wo(s,35632,M);if(s.attachShader(b,k),s.attachShader(b,_),void 0!==i.index0AttributeName?s.bindAttribLocation(b,0,i.index0AttributeName):!0===i.morphTargets&&s.bindAttribLocation(b,0,"position"),s.linkProgram(b),e.debug.checkShaderErrors){const e=s.getProgramInfoLog(b).trim(),t=s.getShaderInfoLog(k).trim(),i=s.getShaderInfoLog(_).trim();let n=!0,a=!0;if(!1===s.getProgramParameter(b,35714)){n=!1;const t=So(s,k,"vertex"),i=So(s,_,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(b,35715)+"\n\nProgram Info Log: "+e+"\n"+t+"\n"+i)}else""!==e?console.warn("THREE.WebGLProgram: Program Info Log:",e):""!==t&&""!==i||(a=!1);a&&(this.diagnostics={runnable:n,programLog:e,vertexShader:{log:t,prefix:w},fragmentShader:{log:i,prefix:x}})}let T,C;return s.deleteShader(k),s.deleteShader(_),this.getUniforms=function(){return void 0===T&&(T=new bo(s,b)),T},this.getAttributes=function(){return void 0===C&&(C=function(e,t){const i={},n=e.getProgramParameter(t,35721);for(let s=0;s<n;s++){const n=e.getActiveAttrib(t,s),a=n.name;let r=1;35674===n.type&&(r=2),35675===n.type&&(r=3),35676===n.type&&(r=4),i[a]={type:n.type,location:e.getAttribLocation(t,a),locationSize:r}}return i}(s,b)),C},this.destroy=function(){n.releaseStatesOfProgram(this),s.deleteProgram(b),this.program=void 0},this.name=i.shaderName,this.id=xo++,this.cacheKey=t,this.usedTimes=1,this.program=b,this.vertexShader=k,this.fragmentShader=_,this}let jo=0;class zo{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,n=this._getShaderStage(t),s=this._getShaderStage(i),a=this._getShaderCacheForMaterial(e);return!1===a.has(n)&&(a.add(n),n.usedTimes++),!1===a.has(s)&&(a.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const e of t)e.usedTimes--,0===e.usedTimes&&this.shaderCache.delete(e.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return void 0===i&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return void 0===i&&(i=new Bo(e),t.set(e,i)),i}}class Bo{constructor(e){this.id=jo++,this.code=e,this.usedTimes=0}}function No(e,t,i,n,s,a,r){const o=new Zn,l=new zo,c=[],d=s.isWebGL2,h=s.logarithmicDepthBuffer,u=s.vertexTextures;let p=s.precision;const f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function(a,o,c,v,y){const w=v.fog,x=y.geometry,S=a.isMeshStandardMaterial?v.environment:null,M=(a.isMeshStandardMaterial?i:t).get(a.envMap||S),k=M&&M.mapping===le?M.image.height:null,_=f[a.type];null!==a.precision&&(p=s.getMaxPrecision(a.precision),p!==a.precision&&console.warn("THREE.WebGLProgram.getParameters:",a.precision,"not supported, using",p,"instead."));const T=x.morphAttributes.position||x.morphAttributes.normal||x.morphAttributes.color,C=void 0!==T?T.length:0;let I,A,R,P,E=0;if(void 0!==x.morphAttributes.position&&(E=1),void 0!==x.morphAttributes.normal&&(E=2),void 0!==x.morphAttributes.color&&(E=3),_){const e=Ba[_];I=e.vertexShader,A=e.fragmentShader}else I=a.vertexShader,A=a.fragmentShader,l.update(a),R=l.getVertexShaderID(a),P=l.getFragmentShaderID(a);const D=e.getRenderTarget(),O=a.alphaTest>0,L=a.clearcoat>0,j=a.iridescence>0;return{isWebGL2:d,shaderID:_,shaderName:a.type,vertexShader:I,fragmentShader:A,defines:a.defines,customVertexShaderID:R,customFragmentShaderID:P,isRawShaderMaterial:!0===a.isRawShaderMaterial,glslVersion:a.glslVersion,precision:p,instancing:!0===y.isInstancedMesh,instancingColor:!0===y.isInstancedMesh&&null!==y.instanceColor,supportsVertexTextures:u,outputEncoding:null===D?e.outputEncoding:!0===D.isXRRenderTarget?D.texture.encoding:Ot,map:!!a.map,matcap:!!a.matcap,envMap:!!M,envMapMode:M&&M.mapping,envMapCubeUVHeight:k,lightMap:!!a.lightMap,aoMap:!!a.aoMap,emissiveMap:!!a.emissiveMap,bumpMap:!!a.bumpMap,normalMap:!!a.normalMap,objectSpaceNormalMap:a.normalMapType===Nt,tangentSpaceNormalMap:a.normalMapType===Bt,decodeVideoTexture:!!a.map&&!0===a.map.isVideoTexture&&a.map.encoding===Lt,clearcoat:L,clearcoatMap:L&&!!a.clearcoatMap,clearcoatRoughnessMap:L&&!!a.clearcoatRoughnessMap,clearcoatNormalMap:L&&!!a.clearcoatNormalMap,iridescence:j,iridescenceMap:j&&!!a.iridescenceMap,iridescenceThicknessMap:j&&!!a.iridescenceThicknessMap,displacementMap:!!a.displacementMap,roughnessMap:!!a.roughnessMap,metalnessMap:!!a.metalnessMap,specularMap:!!a.specularMap,specularIntensityMap:!!a.specularIntensityMap,specularColorMap:!!a.specularColorMap,opaque:!1===a.transparent&&a.blending===b,alphaMap:!!a.alphaMap,alphaTest:O,gradientMap:!!a.gradientMap,sheen:a.sheen>0,sheenColorMap:!!a.sheenColorMap,sheenRoughnessMap:!!a.sheenRoughnessMap,transmission:a.transmission>0,transmissionMap:!!a.transmissionMap,thicknessMap:!!a.thicknessMap,combine:a.combine,vertexTangents:!!a.normalMap&&!!x.attributes.tangent,vertexColors:a.vertexColors,vertexAlphas:!0===a.vertexColors&&!!x.attributes.color&&4===x.attributes.color.itemSize,vertexUvs:!!(a.map||a.bumpMap||a.normalMap||a.specularMap||a.alphaMap||a.emissiveMap||a.roughnessMap||a.metalnessMap||a.clearcoatMap||a.clearcoatRoughnessMap||a.clearcoatNormalMap||a.iridescenceMap||a.iridescenceThicknessMap||a.displacementMap||a.transmissionMap||a.thicknessMap||a.specularIntensityMap||a.specularColorMap||a.sheenColorMap||a.sheenRoughnessMap),uvsVertexOnly:!(a.map||a.bumpMap||a.normalMap||a.specularMap||a.alphaMap||a.emissiveMap||a.roughnessMap||a.metalnessMap||a.clearcoatNormalMap||a.iridescenceMap||a.iridescenceThicknessMap||!(a.transmission<=0)||a.transmissionMap||a.thicknessMap||a.specularIntensityMap||a.specularColorMap||!(a.sheen<=0)||a.sheenColorMap||a.sheenRoughnessMap||!a.displacementMap),fog:!!w,useFog:!0===a.fog,fogExp2:w&&w.isFogExp2,flatShading:!!a.flatShading,sizeAttenuation:a.sizeAttenuation,logarithmicDepthBuffer:h,skinning:!0===y.isSkinnedMesh,morphTargets:void 0!==x.morphAttributes.position,morphNormals:void 0!==x.morphAttributes.normal,morphColors:void 0!==x.morphAttributes.color,morphTargetsCount:C,morphTextureStride:E,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numSpotLightMaps:o.spotLightMap.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numDirLightShadows:o.directionalShadowMap.length,numPointLightShadows:o.pointShadowMap.length,numSpotLightShadows:o.spotShadowMap.length,numSpotLightShadowsWithMaps:o.numSpotLightShadowsWithMaps,numClippingPlanes:r.numPlanes,numClipIntersection:r.numIntersection,dithering:a.dithering,shadowMapEnabled:e.shadowMap.enabled&&c.length>0,shadowMapType:e.shadowMap.type,toneMapping:a.toneMapped?e.toneMapping:J,useLegacyLights:e.useLegacyLights,premultipliedAlpha:a.premultipliedAlpha,doubleSided:a.side===g,flipSided:a.side===m,useDepthPacking:!!a.depthPacking,depthPacking:a.depthPacking||0,index0AttributeName:a.index0AttributeName,extensionDerivatives:a.extensions&&a.extensions.derivatives,extensionFragDepth:a.extensions&&a.extensions.fragDepth,extensionDrawBuffers:a.extensions&&a.extensions.drawBuffers,extensionShaderTextureLOD:a.extensions&&a.extensions.shaderTextureLOD,rendererExtensionFragDepth:d||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:d||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:d||n.has("EXT_shader_texture_lod"),customProgramCacheKey:a.customProgramCacheKey()}},getProgramCacheKey:function(t){const i=[];if(t.shaderID?i.push(t.shaderID):(i.push(t.customVertexShaderID),i.push(t.customFragmentShaderID)),void 0!==t.defines)for(const e in t.defines)i.push(e),i.push(t.defines[e]);var n,s;return!1===t.isRawShaderMaterial&&(s=t,(n=i).push(s.precision),n.push(s.outputEncoding),n.push(s.envMapMode),n.push(s.envMapCubeUVHeight),n.push(s.combine),n.push(s.vertexUvs),n.push(s.fogExp2),n.push(s.sizeAttenuation),n.push(s.morphTargetsCount),n.push(s.morphAttributeCount),n.push(s.numDirLights),n.push(s.numPointLights),n.push(s.numSpotLights),n.push(s.numSpotLightMaps),n.push(s.numHemiLights),n.push(s.numRectAreaLights),n.push(s.numDirLightShadows),n.push(s.numPointLightShadows),n.push(s.numSpotLightShadows),n.push(s.numSpotLightShadowsWithMaps),n.push(s.shadowMapType),n.push(s.toneMapping),n.push(s.numClippingPlanes),n.push(s.numClipIntersection),n.push(s.depthPacking),function(e,t){o.disableAll(),t.isWebGL2&&o.enable(0);t.supportsVertexTextures&&o.enable(1);t.instancing&&o.enable(2);t.instancingColor&&o.enable(3);t.map&&o.enable(4);t.matcap&&o.enable(5);t.envMap&&o.enable(6);t.lightMap&&o.enable(7);t.aoMap&&o.enable(8);t.emissiveMap&&o.enable(9);t.bumpMap&&o.enable(10);t.normalMap&&o.enable(11);t.objectSpaceNormalMap&&o.enable(12);t.tangentSpaceNormalMap&&o.enable(13);t.clearcoat&&o.enable(14);t.clearcoatMap&&o.enable(15);t.clearcoatRoughnessMap&&o.enable(16);t.clearcoatNormalMap&&o.enable(17);t.iridescence&&o.enable(18);t.iridescenceMap&&o.enable(19);t.iridescenceThicknessMap&&o.enable(20);t.displacementMap&&o.enable(21);t.specularMap&&o.enable(22);t.roughnessMap&&o.enable(23);t.metalnessMap&&o.enable(24);t.gradientMap&&o.enable(25);t.alphaMap&&o.enable(26);t.alphaTest&&o.enable(27);t.vertexColors&&o.enable(28);t.vertexAlphas&&o.enable(29);t.vertexUvs&&o.enable(30);t.vertexTangents&&o.enable(31);t.uvsVertexOnly&&o.enable(32);e.push(o.mask),o.disableAll(),t.fog&&o.enable(0);t.useFog&&o.enable(1);t.flatShading&&o.enable(2);t.logarithmicDepthBuffer&&o.enable(3);t.skinning&&o.enable(4);t.morphTargets&&o.enable(5);t.morphNormals&&o.enable(6);t.morphColors&&o.enable(7);t.premultipliedAlpha&&o.enable(8);t.shadowMapEnabled&&o.enable(9);t.useLegacyLights&&o.enable(10);t.doubleSided&&o.enable(11);t.flipSided&&o.enable(12);t.useDepthPacking&&o.enable(13);t.dithering&&o.enable(14);t.specularIntensityMap&&o.enable(15);t.specularColorMap&&o.enable(16);t.transmission&&o.enable(17);t.transmissionMap&&o.enable(18);t.thicknessMap&&o.enable(19);t.sheen&&o.enable(20);t.sheenColorMap&&o.enable(21);t.sheenRoughnessMap&&o.enable(22);t.decodeVideoTexture&&o.enable(23);t.opaque&&o.enable(24);e.push(o.mask)}(i,t),i.push(e.outputEncoding)),i.push(t.customProgramCacheKey),i.join()},getUniforms:function(e){const t=f[e.type];let i;if(t){const e=Ba[t];i=ya.clone(e.uniforms)}else i=e.uniforms;return i},acquireProgram:function(t,i){let n;for(let e=0,t=c.length;e<t;e++){const t=c[e];if(t.cacheKey===i){n=t,++n.usedTimes;break}}return void 0===n&&(n=new Lo(e,i,t,a),c.push(n)),n},releaseProgram:function(e){if(0==--e.usedTimes){const t=c.indexOf(e);c[t]=c[c.length-1],c.pop(),e.destroy()}},releaseShaderCache:function(e){l.remove(e)},programs:c,dispose:function(){l.dispose()}}}function Fo(){let e=new WeakMap;return{get:function(t){let i=e.get(t);return void 0===i&&(i={},e.set(t,i)),i},remove:function(t){e.delete(t)},update:function(t,i,n){e.get(t)[i]=n},dispose:function(){e=new WeakMap}}}function Ho(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Uo(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Vo(){const e=[];let t=0;const i=[],n=[],s=[];function a(i,n,s,a,r,o){let l=e[t];return void 0===l?(l={id:i.id,object:i,geometry:n,material:s,groupOrder:a,renderOrder:i.renderOrder,z:r,group:o},e[t]=l):(l.id=i.id,l.object=i,l.geometry=n,l.material=s,l.groupOrder=a,l.renderOrder=i.renderOrder,l.z=r,l.group=o),t++,l}return{opaque:i,transmissive:n,transparent:s,init:function(){t=0,i.length=0,n.length=0,s.length=0},push:function(e,t,r,o,l,c){const d=a(e,t,r,o,l,c);r.transmission>0?n.push(d):!0===r.transparent?s.push(d):i.push(d)},unshift:function(e,t,r,o,l,c){const d=a(e,t,r,o,l,c);r.transmission>0?n.unshift(d):!0===r.transparent?s.unshift(d):i.unshift(d)},finish:function(){for(let i=t,n=e.length;i<n;i++){const t=e[i];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}},sort:function(e,t){i.length>1&&i.sort(e||Ho),n.length>1&&n.sort(t||Uo),s.length>1&&s.sort(t||Uo)}}}function Go(){let e=new WeakMap;return{get:function(t,i){const n=e.get(t);let s;return void 0===n?(s=new Vo,e.set(t,[s])):i>=n.length?(s=new Vo,n.push(s)):s=n[i],s},dispose:function(){e=new WeakMap}}}function Wo(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let i;switch(t.type){case"DirectionalLight":i={direction:new Hi,color:new Is};break;case"SpotLight":i={position:new Hi,direction:new Hi,color:new Is,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":i={position:new Hi,color:new Is,distance:0,decay:0};break;case"HemisphereLight":i={direction:new Hi,skyColor:new Is,groundColor:new Is};break;case"RectAreaLight":i={color:new Is,position:new Hi,halfWidth:new Hi,halfHeight:new Hi}}return e[t.id]=i,i}}}let qo=0;function Yo(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function Ko(e,t){const i=new Wo,n=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let i;switch(t.type){case"DirectionalLight":case"SpotLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Di};break;case"PointLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Di,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=i,i}}}(),s={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let e=0;e<9;e++)s.probe.push(new Hi);const a=new Hi,r=new Nn,o=new Nn;return{setup:function(a,r){let o=0,l=0,c=0;for(let e=0;e<9;e++)s.probe[e].set(0,0,0);let d=0,h=0,u=0,p=0,f=0,m=0,g=0,v=0,y=0,b=0;a.sort(Yo);const w=!0===r?Math.PI:1;for(let e=0,t=a.length;e<t;e++){const t=a[e],r=t.color,x=t.intensity,S=t.distance,M=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)o+=r.r*x*w,l+=r.g*x*w,c+=r.b*x*w;else if(t.isLightProbe)for(let e=0;e<9;e++)s.probe[e].addScaledVector(t.sh.coefficients[e],x);else if(t.isDirectionalLight){const e=i.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*w),t.castShadow){const e=t.shadow,i=n.get(t);i.shadowBias=e.bias,i.shadowNormalBias=e.normalBias,i.shadowRadius=e.radius,i.shadowMapSize=e.mapSize,s.directionalShadow[d]=i,s.directionalShadowMap[d]=M,s.directionalShadowMatrix[d]=t.shadow.matrix,m++}s.directional[d]=e,d++}else if(t.isSpotLight){const e=i.get(t);e.position.setFromMatrixPosition(t.matrixWorld),e.color.copy(r).multiplyScalar(x*w),e.distance=S,e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,s.spot[u]=e;const a=t.shadow;if(t.map&&(s.spotLightMap[y]=t.map,y++,a.updateMatrices(t),t.castShadow&&b++),s.spotLightMatrix[u]=a.matrix,t.castShadow){const e=n.get(t);e.shadowBias=a.bias,e.shadowNormalBias=a.normalBias,e.shadowRadius=a.radius,e.shadowMapSize=a.mapSize,s.spotShadow[u]=e,s.spotShadowMap[u]=M,v++}u++}else if(t.isRectAreaLight){const e=i.get(t);e.color.copy(r).multiplyScalar(x),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),s.rectArea[p]=e,p++}else if(t.isPointLight){const e=i.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*w),e.distance=t.distance,e.decay=t.decay,t.castShadow){const e=t.shadow,i=n.get(t);i.shadowBias=e.bias,i.shadowNormalBias=e.normalBias,i.shadowRadius=e.radius,i.shadowMapSize=e.mapSize,i.shadowCameraNear=e.camera.near,i.shadowCameraFar=e.camera.far,s.pointShadow[h]=i,s.pointShadowMap[h]=M,s.pointShadowMatrix[h]=t.shadow.matrix,g++}s.point[h]=e,h++}else if(t.isHemisphereLight){const e=i.get(t);e.skyColor.copy(t.color).multiplyScalar(x*w),e.groundColor.copy(t.groundColor).multiplyScalar(x*w),s.hemi[f]=e,f++}}p>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(s.rectAreaLTC1=za.LTC_FLOAT_1,s.rectAreaLTC2=za.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(s.rectAreaLTC1=za.LTC_HALF_1,s.rectAreaLTC2=za.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),s.ambient[0]=o,s.ambient[1]=l,s.ambient[2]=c;const x=s.hash;x.directionalLength===d&&x.pointLength===h&&x.spotLength===u&&x.rectAreaLength===p&&x.hemiLength===f&&x.numDirectionalShadows===m&&x.numPointShadows===g&&x.numSpotShadows===v&&x.numSpotMaps===y||(s.directional.length=d,s.spot.length=u,s.rectArea.length=p,s.point.length=h,s.hemi.length=f,s.directionalShadow.length=m,s.directionalShadowMap.length=m,s.pointShadow.length=g,s.pointShadowMap.length=g,s.spotShadow.length=v,s.spotShadowMap.length=v,s.directionalShadowMatrix.length=m,s.pointShadowMatrix.length=g,s.spotLightMatrix.length=v+y-b,s.spotLightMap.length=y,s.numSpotLightShadowsWithMaps=b,x.directionalLength=d,x.pointLength=h,x.spotLength=u,x.rectAreaLength=p,x.hemiLength=f,x.numDirectionalShadows=m,x.numPointShadows=g,x.numSpotShadows=v,x.numSpotMaps=y,s.version=qo++)},setupView:function(e,t){let i=0,n=0,l=0,c=0,d=0;const h=t.matrixWorldInverse;for(let t=0,u=e.length;t<u;t++){const u=e[t];if(u.isDirectionalLight){const e=s.directional[i];e.direction.setFromMatrixPosition(u.matrixWorld),a.setFromMatrixPosition(u.target.matrixWorld),e.direction.sub(a),e.direction.transformDirection(h),i++}else if(u.isSpotLight){const e=s.spot[l];e.position.setFromMatrixPosition(u.matrixWorld),e.position.applyMatrix4(h),e.direction.setFromMatrixPosition(u.matrixWorld),a.setFromMatrixPosition(u.target.matrixWorld),e.direction.sub(a),e.direction.transformDirection(h),l++}else if(u.isRectAreaLight){const e=s.rectArea[c];e.position.setFromMatrixPosition(u.matrixWorld),e.position.applyMatrix4(h),o.identity(),r.copy(u.matrixWorld),r.premultiply(h),o.extractRotation(r),e.halfWidth.set(.5*u.width,0,0),e.halfHeight.set(0,.5*u.height,0),e.halfWidth.applyMatrix4(o),e.halfHeight.applyMatrix4(o),c++}else if(u.isPointLight){const e=s.point[n];e.position.setFromMatrixPosition(u.matrixWorld),e.position.applyMatrix4(h),n++}else if(u.isHemisphereLight){const e=s.hemi[d];e.direction.setFromMatrixPosition(u.matrixWorld),e.direction.transformDirection(h),d++}}},state:s}}function Xo(e,t){const i=new Ko(e,t),n=[],s=[];return{init:function(){n.length=0,s.length=0},state:{lightsArray:n,shadowsArray:s,lights:i},setupLights:function(e){i.setup(n,e)},setupLightsView:function(e){i.setupView(n,e)},pushLight:function(e){n.push(e)},pushShadow:function(e){s.push(e)}}}function Zo(e,t){let i=new WeakMap;return{get:function(n,s=0){const a=i.get(n);let r;return void 0===a?(r=new Xo(e,t),i.set(n,[r])):s>=a.length?(r=new Xo(e,t),a.push(r)):r=a[s],r},dispose:function(){i=new WeakMap}}}class Jo extends Ms{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=jt,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Qo extends Ms{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new Hi,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const $o="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",el="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}";function tl(e,t,i){let n=new Ea;const s=new Di,a=new Di,r=new an,o=new Jo({depthPacking:zt}),l=new Qo,c={},d=i.maxTextureSize,u={[f]:m,[m]:f,[g]:g},v=new ba({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Di},radius:{value:4}},vertexShader:$o,fragmentShader:el}),b=v.clone();b.defines.HORIZONTAL_PASS=1;const w=new Js;w.setAttribute("position",new Ds(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const x=new ua(w,v),S=this;function M(i,n){const a=t.update(x);v.defines.VSM_SAMPLES!==i.blurSamples&&(v.defines.VSM_SAMPLES=i.blurSamples,b.defines.VSM_SAMPLES=i.blurSamples,v.needsUpdate=!0,b.needsUpdate=!0),null===i.mapPass&&(i.mapPass=new rn(s.x,s.y)),v.uniforms.shadow_pass.value=i.map.texture,v.uniforms.resolution.value=i.mapSize,v.uniforms.radius.value=i.radius,e.setRenderTarget(i.mapPass),e.clear(),e.renderBufferDirect(n,null,a,v,x,null),b.uniforms.shadow_pass.value=i.mapPass.texture,b.uniforms.resolution.value=i.mapSize,b.uniforms.radius.value=i.radius,e.setRenderTarget(i.map),e.clear(),e.renderBufferDirect(n,null,a,b,x,null)}function k(t,i,n,s,a,r){let d=null;const h=!0===n.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(void 0!==h)d=h;else if(d=!0===n.isPointLight?l:o,e.localClippingEnabled&&!0===i.clipShadows&&Array.isArray(i.clippingPlanes)&&0!==i.clippingPlanes.length||i.displacementMap&&0!==i.displacementScale||i.alphaMap&&i.alphaTest>0||i.map&&i.alphaTest>0){const e=d.uuid,t=i.uuid;let n=c[e];void 0===n&&(n={},c[e]=n);let s=n[t];void 0===s&&(s=d.clone(),n[t]=s),d=s}return d.visible=i.visible,d.wireframe=i.wireframe,d.side=r===p?null!==i.shadowSide?i.shadowSide:i.side:null!==i.shadowSide?i.shadowSide:u[i.side],d.alphaMap=i.alphaMap,d.alphaTest=i.alphaTest,d.map=i.map,d.clipShadows=i.clipShadows,d.clippingPlanes=i.clippingPlanes,d.clipIntersection=i.clipIntersection,d.displacementMap=i.displacementMap,d.displacementScale=i.displacementScale,d.displacementBias=i.displacementBias,d.wireframeLinewidth=i.wireframeLinewidth,d.linewidth=i.linewidth,!0===n.isPointLight&&!0===d.isMeshDistanceMaterial&&(d.referencePosition.setFromMatrixPosition(n.matrixWorld),d.nearDistance=s,d.farDistance=a),d}function _(i,s,a,r,o){if(!1===i.visible)return;if(i.layers.test(s.layers)&&(i.isMesh||i.isLine||i.isPoints)&&(i.castShadow||i.receiveShadow&&o===p)&&(!i.frustumCulled||n.intersectsObject(i))){i.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,i.matrixWorld);const n=t.update(i),s=i.material;if(Array.isArray(s)){const t=n.groups;for(let l=0,c=t.length;l<c;l++){const c=t[l],d=s[c.materialIndex];if(d&&d.visible){const t=k(i,d,r,a.near,a.far,o);e.renderBufferDirect(a,null,n,t,i,c)}}}else if(s.visible){const t=k(i,s,r,a.near,a.far,o);e.renderBufferDirect(a,null,n,t,i,null)}}const l=i.children;for(let e=0,t=l.length;e<t;e++)_(l[e],s,a,r,o)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=h,this.render=function(t,i,o){if(!1===S.enabled)return;if(!1===S.autoUpdate&&!1===S.needsUpdate)return;if(0===t.length)return;const l=e.getRenderTarget(),c=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),u=e.state;u.setBlending(y),u.buffers.color.setClear(1,1,1,1),u.buffers.depth.setTest(!0),u.setScissorTest(!1);for(let l=0,c=t.length;l<c;l++){const c=t[l],h=c.shadow;if(void 0===h){console.warn("THREE.WebGLShadowMap:",c,"has no shadow.");continue}if(!1===h.autoUpdate&&!1===h.needsUpdate)continue;s.copy(h.mapSize);const f=h.getFrameExtents();if(s.multiply(f),a.copy(h.mapSize),(s.x>d||s.y>d)&&(s.x>d&&(a.x=Math.floor(d/f.x),s.x=a.x*f.x,h.mapSize.x=a.x),s.y>d&&(a.y=Math.floor(d/f.y),s.y=a.y*f.y,h.mapSize.y=a.y)),null===h.map){const e=this.type!==p?{minFilter:ue,magFilter:ue}:{};h.map=new rn(s.x,s.y,e),h.map.texture.name=c.name+".shadowMap",h.camera.updateProjectionMatrix()}e.setRenderTarget(h.map),e.clear();const m=h.getViewportCount();for(let e=0;e<m;e++){const t=h.getViewport(e);r.set(a.x*t.x,a.y*t.y,a.x*t.z,a.y*t.w),u.viewport(r),h.updateMatrices(c,e),n=h.getFrustum(),_(i,o,h.camera,c,this.type)}!0!==h.isPointLightShadow&&this.type===p&&M(h,o),h.needsUpdate=!1}S.needsUpdate=!1,e.setRenderTarget(l,c,h)}}function il(e,t,i){const n=i.isWebGL2;const s=new function(){let t=!1;const i=new an;let n=null;const s=new an(0,0,0,0);return{setMask:function(i){n===i||t||(e.colorMask(i,i,i,i),n=i)},setLocked:function(e){t=e},setClear:function(t,n,a,r,o){!0===o&&(t*=r,n*=r,a*=r),i.set(t,n,a,r),!1===s.equals(i)&&(e.clearColor(t,n,a,r),s.copy(i))},reset:function(){t=!1,n=null,s.set(-1,0,0,0)}}},a=new function(){let t=!1,i=null,n=null,s=null;return{setTest:function(e){e?xe(2929):Se(2929)},setMask:function(n){i===n||t||(e.depthMask(n),i=n)},setFunc:function(t){if(n!==t){switch(t){case F:e.depthFunc(512);break;case H:e.depthFunc(519);break;case U:e.depthFunc(513);break;case V:e.depthFunc(515);break;case G:e.depthFunc(514);break;case W:e.depthFunc(518);break;case q:e.depthFunc(516);break;case Y:e.depthFunc(517);break;default:e.depthFunc(515)}n=t}},setLocked:function(e){t=e},setClear:function(t){s!==t&&(e.clearDepth(t),s=t)},reset:function(){t=!1,i=null,n=null,s=null}}},c=new function(){let t=!1,i=null,n=null,s=null,a=null,r=null,o=null,l=null,c=null;return{setTest:function(e){t||(e?xe(2960):Se(2960))},setMask:function(n){i===n||t||(e.stencilMask(n),i=n)},setFunc:function(t,i,r){n===t&&s===i&&a===r||(e.stencilFunc(t,i,r),n=t,s=i,a=r)},setOp:function(t,i,n){r===t&&o===i&&l===n||(e.stencilOp(t,i,n),r=t,o=i,l=n)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,i=null,n=null,s=null,a=null,r=null,o=null,l=null,c=null}}},d=new WeakMap,h=new WeakMap;let u={},p={},f=new WeakMap,v=[],K=null,X=!1,Z=null,J=null,Q=null,$=null,ee=null,te=null,ie=null,ne=!1,se=null,ae=null,re=null,oe=null,le=null;const ce=e.getParameter(35661);let de=!1,he=0;const ue=e.getParameter(7938);-1!==ue.indexOf("WebGL")?(he=parseFloat(/^WebGL (\d)/.exec(ue)[1]),de=he>=1):-1!==ue.indexOf("OpenGL ES")&&(he=parseFloat(/^OpenGL ES (\d)/.exec(ue)[1]),de=he>=2);let pe=null,fe={};const me=e.getParameter(3088),ge=e.getParameter(2978),ve=(new an).fromArray(me),ye=(new an).fromArray(ge);function be(t,i,n){const s=new Uint8Array(4),a=e.createTexture();e.bindTexture(t,a),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(let t=0;t<n;t++)e.texImage2D(i+t,0,6408,1,1,0,6408,5121,s);return a}const we={};function xe(t){!0!==u[t]&&(e.enable(t),u[t]=!0)}function Se(t){!1!==u[t]&&(e.disable(t),u[t]=!1)}we[3553]=be(3553,3553,1),we[34067]=be(34067,34069,6),s.setClear(0,0,0,1),a.setClear(1),c.setClear(0),xe(2929),a.setFunc(V),Te(!1),Ce(o),xe(2884),_e(y);const Me={[k]:32774,[_]:32778,[T]:32779};if(n)Me[C]=32775,Me[I]=32776;else{const e=t.get("EXT_blend_minmax");null!==e&&(Me[C]=e.MIN_EXT,Me[I]=e.MAX_EXT)}const ke={[A]:0,[R]:1,[P]:768,[D]:770,[N]:776,[z]:774,[L]:772,[E]:769,[O]:771,[B]:775,[j]:773};function _e(t,i,n,s,a,r,o,l){if(t!==y){if(!1===X&&(xe(3042),X=!0),t===M)a=a||i,r=r||n,o=o||s,i===J&&a===ee||(e.blendEquationSeparate(Me[i],Me[a]),J=i,ee=a),n===Q&&s===$&&r===te&&o===ie||(e.blendFuncSeparate(ke[n],ke[s],ke[r],ke[o]),Q=n,$=s,te=r,ie=o),Z=t,ne=!1;else if(t!==Z||l!==ne){if(J===k&&ee===k||(e.blendEquation(32774),J=k,ee=k),l)switch(t){case b:e.blendFuncSeparate(1,771,1,771);break;case w:e.blendFunc(1,1);break;case x:e.blendFuncSeparate(0,769,0,1);break;case S:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case b:e.blendFuncSeparate(770,771,1,771);break;case w:e.blendFunc(770,1);break;case x:e.blendFuncSeparate(0,769,0,1);break;case S:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}Q=null,$=null,te=null,ie=null,Z=t,ne=l}}else!0===X&&(Se(3042),X=!1)}function Te(t){se!==t&&(t?e.frontFace(2304):e.frontFace(2305),se=t)}function Ce(t){t!==r?(xe(2884),t!==ae&&(t===o?e.cullFace(1029):t===l?e.cullFace(1028):e.cullFace(1032))):Se(2884),ae=t}function Ie(t,i,n){t?(xe(32823),oe===i&&le===n||(e.polygonOffset(i,n),oe=i,le=n)):Se(32823)}return{buffers:{color:s,depth:a,stencil:c},enable:xe,disable:Se,bindFramebuffer:function(t,i){return p[t]!==i&&(e.bindFramebuffer(t,i),p[t]=i,n&&(36009===t&&(p[36160]=i),36160===t&&(p[36009]=i)),!0)},drawBuffers:function(n,s){let a=v,r=!1;if(n)if(a=f.get(s),void 0===a&&(a=[],f.set(s,a)),n.isWebGLMultipleRenderTargets){const e=n.texture;if(a.length!==e.length||36064!==a[0]){for(let t=0,i=e.length;t<i;t++)a[t]=36064+t;a.length=e.length,r=!0}}else 36064!==a[0]&&(a[0]=36064,r=!0);else 1029!==a[0]&&(a[0]=1029,r=!0);r&&(i.isWebGL2?e.drawBuffers(a):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(a))},useProgram:function(t){return K!==t&&(e.useProgram(t),K=t,!0)},setBlending:_e,setMaterial:function(e,t){e.side===g?Se(2884):xe(2884);let i=e.side===m;t&&(i=!i),Te(i),e.blending===b&&!1===e.transparent?_e(y):_e(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),a.setFunc(e.depthFunc),a.setTest(e.depthTest),a.setMask(e.depthWrite),s.setMask(e.colorWrite);const n=e.stencilWrite;c.setTest(n),n&&(c.setMask(e.stencilWriteMask),c.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),c.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),Ie(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?xe(32926):Se(32926)},setFlipSided:Te,setCullFace:Ce,setLineWidth:function(t){t!==re&&(de&&e.lineWidth(t),re=t)},setPolygonOffset:Ie,setScissorTest:function(e){e?xe(3089):Se(3089)},activeTexture:function(t=33984+ce-1){pe!==t&&(e.activeTexture(t),pe=t)},bindTexture:function(t,i,n){void 0===n&&(n=null===pe?33984+ce-1:pe);let s=fe[n];void 0===s&&(s={type:void 0,texture:void 0},fe[n]=s),s.type===t&&s.texture===i||(pe!==n&&(e.activeTexture(n),pe=n),e.bindTexture(t,i||we[t]),s.type=t,s.texture=i)},unbindTexture:function(){const t=fe[pe];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexImage3D:function(){try{e.compressedTexImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},updateUBOMapping:function(t,i){let n=h.get(i);void 0===n&&(n=new WeakMap,h.set(i,n));let s=n.get(t);void 0===s&&(s=e.getUniformBlockIndex(i,t.name),n.set(t,s))},uniformBlockBinding:function(t,i){const n=h.get(i).get(t);d.get(i)!==n&&(e.uniformBlockBinding(i,n,t.__bindingPointIndex),d.set(i,n))},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===ve.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),ve.copy(t))},viewport:function(t){!1===ye.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),ye.copy(t))},reset:function(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),!0===n&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),u={},pe=null,fe={},p={},f=new WeakMap,v=[],K=null,X=!1,Z=null,J=null,Q=null,$=null,ee=null,te=null,ie=null,ne=!1,se=null,ae=null,re=null,oe=null,le=null,ve.set(0,0,e.canvas.width,e.canvas.height),ye.set(0,0,e.canvas.width,e.canvas.height),s.reset(),a.reset(),c.reset()}}}function nl(e,t,i,n,s,a,r){const o=s.isWebGL2,l=s.maxTextures,c=s.maxCubemapSize,d=s.maxTextureSize,h=s.maxSamples,u=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,p="undefined"!=typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),f=new WeakMap;let m;const g=new WeakMap;let v=!1;try{v="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(e){}function y(e,t){return v?new OffscreenCanvas(e,t):Ni("canvas")}function b(e,t,i,n){let s=1;if((e.width>n||e.height>n)&&(s=n/Math.max(e.width,e.height)),s<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const n=t?Ai:Math.floor,a=n(s*e.width),r=n(s*e.height);void 0===m&&(m=y(a,r));const o=i?y(a,r):m;o.width=a,o.height=r;return o.getContext("2d").drawImage(e,0,0,a,r),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+a+"x"+r+")."),o}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function w(e){return Ci(e.width)&&Ci(e.height)}function x(e,t){return e.generateMipmaps&&t&&e.minFilter!==ue&&e.minFilter!==ve}function S(t){e.generateMipmap(t)}function M(i,n,s,a,r=!1){if(!1===o)return n;if(null!==i){if(void 0!==e[i])return e[i];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+i+"'")}let l=n;return 6403===n&&(5126===s&&(l=33326),5131===s&&(l=33325),5121===s&&(l=33321)),33319===n&&(5126===s&&(l=33328),5131===s&&(l=33327),5121===s&&(l=33323)),6408===n&&(5126===s&&(l=34836),5131===s&&(l=34842),5121===s&&(l=a===Lt&&!1===r?35907:32856),32819===s&&(l=32854),32820===s&&(l=32855)),33325!==l&&33326!==l&&33327!==l&&33328!==l&&34842!==l&&34836!==l||t.get("EXT_color_buffer_float"),l}function k(e,t,i){return!0===x(e,i)||e.isFramebufferTexture&&e.minFilter!==ue&&e.minFilter!==ve?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function _(e){return e===ue||e===pe||e===me?9728:9729}function T(e){const t=e.target;t.removeEventListener("dispose",T),function(e){const t=n.get(e);if(void 0===t.__webglInit)return;const i=e.source,s=g.get(i);if(s){const n=s[t.__cacheKey];n.usedTimes--,0===n.usedTimes&&I(e),0===Object.keys(s).length&&g.delete(i)}n.remove(e)}(t),t.isVideoTexture&&f.delete(t)}function C(t){const i=t.target;i.removeEventListener("dispose",C),function(t){const i=t.texture,s=n.get(t),a=n.get(i);void 0!==a.__webglTexture&&(e.deleteTexture(a.__webglTexture),r.memory.textures--);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(let t=0;t<6;t++)e.deleteFramebuffer(s.__webglFramebuffer[t]),s.__webglDepthbuffer&&e.deleteRenderbuffer(s.__webglDepthbuffer[t]);else{if(e.deleteFramebuffer(s.__webglFramebuffer),s.__webglDepthbuffer&&e.deleteRenderbuffer(s.__webglDepthbuffer),s.__webglMultisampledFramebuffer&&e.deleteFramebuffer(s.__webglMultisampledFramebuffer),s.__webglColorRenderbuffer)for(let t=0;t<s.__webglColorRenderbuffer.length;t++)s.__webglColorRenderbuffer[t]&&e.deleteRenderbuffer(s.__webglColorRenderbuffer[t]);s.__webglDepthRenderbuffer&&e.deleteRenderbuffer(s.__webglDepthRenderbuffer)}if(t.isWebGLMultipleRenderTargets)for(let t=0,s=i.length;t<s;t++){const s=n.get(i[t]);s.__webglTexture&&(e.deleteTexture(s.__webglTexture),r.memory.textures--),n.remove(i[t])}n.remove(i),n.remove(t)}(i)}function I(t){const i=n.get(t);e.deleteTexture(i.__webglTexture);const s=t.source;delete g.get(s)[i.__cacheKey],r.memory.textures--}let A=0;function R(e,t){const s=n.get(e);if(e.isVideoTexture&&function(e){const t=r.render.frame;f.get(e)!==t&&(f.set(e,t),e.update())}(e),!1===e.isRenderTargetTexture&&e.version>0&&s.__version!==e.version){const i=e.image;if(null===i)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==i.complete)return void L(s,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}i.bindTexture(3553,s.__webglTexture,33984+t)}const P={[ce]:10497,[de]:33071,[he]:33648},E={[ue]:9728,[pe]:9984,[me]:9986,[ve]:9729,[ye]:9985,[we]:9987};function D(i,a,r){if(r?(e.texParameteri(i,10242,P[a.wrapS]),e.texParameteri(i,10243,P[a.wrapT]),32879!==i&&35866!==i||e.texParameteri(i,32882,P[a.wrapR]),e.texParameteri(i,10240,E[a.magFilter]),e.texParameteri(i,10241,E[a.minFilter])):(e.texParameteri(i,10242,33071),e.texParameteri(i,10243,33071),32879!==i&&35866!==i||e.texParameteri(i,32882,33071),a.wrapS===de&&a.wrapT===de||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(i,10240,_(a.magFilter)),e.texParameteri(i,10241,_(a.minFilter)),a.minFilter!==ue&&a.minFilter!==ve&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){const r=t.get("EXT_texture_filter_anisotropic");if(a.magFilter===ue)return;if(a.minFilter!==me&&a.minFilter!==we)return;if(a.type===Ie&&!1===t.has("OES_texture_float_linear"))return;if(!1===o&&a.type===Ae&&!1===t.has("OES_texture_half_float_linear"))return;(a.anisotropy>1||n.get(a).__currentAnisotropy)&&(e.texParameterf(i,r.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,s.getMaxAnisotropy())),n.get(a).__currentAnisotropy=a.anisotropy)}}function O(t,i){let n=!1;void 0===t.__webglInit&&(t.__webglInit=!0,i.addEventListener("dispose",T));const s=i.source;let a=g.get(s);void 0===a&&(a={},g.set(s,a));const o=function(e){const t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.encoding),t.join()}(i);if(o!==t.__cacheKey){void 0===a[o]&&(a[o]={texture:e.createTexture(),usedTimes:0},r.memory.textures++,n=!0),a[o].usedTimes++;const s=a[t.__cacheKey];void 0!==s&&(a[t.__cacheKey].usedTimes--,0===s.usedTimes&&I(i)),t.__cacheKey=o,t.__webglTexture=a[o].texture}return n}function L(t,s,r){let l=3553;(s.isDataArrayTexture||s.isCompressedArrayTexture)&&(l=35866),s.isData3DTexture&&(l=32879);const c=O(t,s),h=s.source;i.bindTexture(l,t.__webglTexture,33984+r);const u=n.get(h);if(h.version!==u.__version||!0===c){i.activeTexture(33984+r),e.pixelStorei(37440,s.flipY),e.pixelStorei(37441,s.premultiplyAlpha),e.pixelStorei(3317,s.unpackAlignment),e.pixelStorei(37443,0);const t=(p=s,!o&&(p.wrapS!==de||p.wrapT!==de||p.minFilter!==ue&&p.minFilter!==ve)&&!1===w(s.image));let n=b(s.image,t,!1,d);n=H(s,n);const f=w(n)||o,m=a.convert(s.format,s.encoding);let g,v=a.convert(s.type),y=M(s.internalFormat,m,v,s.encoding,s.isVideoTexture);D(l,s,f);const _=s.mipmaps,T=o&&!0!==s.isVideoTexture,C=void 0===u.__version||!0===c,I=k(s,n,f);if(s.isDepthTexture)y=6402,o?y=s.type===Ie?36012:s.type===Ce?33190:s.type===Ee?35056:33189:s.type===Ie&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),s.format===ze&&6402===y&&s.type!==_e&&s.type!==Ce&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),s.type=Ce,v=a.convert(s.type)),s.format===Be&&6402===y&&(y=34041,s.type!==Ee&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),s.type=Ee,v=a.convert(s.type))),C&&(T?i.texStorage2D(3553,1,y,n.width,n.height):i.texImage2D(3553,0,y,n.width,n.height,0,m,v,null));else if(s.isDataTexture)if(_.length>0&&f){T&&C&&i.texStorage2D(3553,I,y,_[0].width,_[0].height);for(let e=0,t=_.length;e<t;e++)g=_[e],T?i.texSubImage2D(3553,e,0,0,g.width,g.height,m,v,g.data):i.texImage2D(3553,e,y,g.width,g.height,0,m,v,g.data);s.generateMipmaps=!1}else T?(C&&i.texStorage2D(3553,I,y,n.width,n.height),i.texSubImage2D(3553,0,0,0,n.width,n.height,m,v,n.data)):i.texImage2D(3553,0,y,n.width,n.height,0,m,v,n.data);else if(s.isCompressedTexture)if(s.isCompressedArrayTexture){T&&C&&i.texStorage3D(35866,I,y,_[0].width,_[0].height,n.depth);for(let e=0,t=_.length;e<t;e++)g=_[e],s.format!==Oe?null!==m?T?i.compressedTexSubImage3D(35866,e,0,0,0,g.width,g.height,n.depth,m,g.data,0,0):i.compressedTexImage3D(35866,e,y,g.width,g.height,n.depth,0,g.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):T?i.texSubImage3D(35866,e,0,0,0,g.width,g.height,n.depth,m,v,g.data):i.texImage3D(35866,e,y,g.width,g.height,n.depth,0,m,v,g.data)}else{T&&C&&i.texStorage2D(3553,I,y,_[0].width,_[0].height);for(let e=0,t=_.length;e<t;e++)g=_[e],s.format!==Oe?null!==m?T?i.compressedTexSubImage2D(3553,e,0,0,g.width,g.height,m,g.data):i.compressedTexImage2D(3553,e,y,g.width,g.height,0,g.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):T?i.texSubImage2D(3553,e,0,0,g.width,g.height,m,v,g.data):i.texImage2D(3553,e,y,g.width,g.height,0,m,v,g.data)}else if(s.isDataArrayTexture)T?(C&&i.texStorage3D(35866,I,y,n.width,n.height,n.depth),i.texSubImage3D(35866,0,0,0,0,n.width,n.height,n.depth,m,v,n.data)):i.texImage3D(35866,0,y,n.width,n.height,n.depth,0,m,v,n.data);else if(s.isData3DTexture)T?(C&&i.texStorage3D(32879,I,y,n.width,n.height,n.depth),i.texSubImage3D(32879,0,0,0,0,n.width,n.height,n.depth,m,v,n.data)):i.texImage3D(32879,0,y,n.width,n.height,n.depth,0,m,v,n.data);else if(s.isFramebufferTexture){if(C)if(T)i.texStorage2D(3553,I,y,n.width,n.height);else{let e=n.width,t=n.height;for(let n=0;n<I;n++)i.texImage2D(3553,n,y,e,t,0,m,v,null),e>>=1,t>>=1}}else if(_.length>0&&f){T&&C&&i.texStorage2D(3553,I,y,_[0].width,_[0].height);for(let e=0,t=_.length;e<t;e++)g=_[e],T?i.texSubImage2D(3553,e,0,0,m,v,g):i.texImage2D(3553,e,y,m,v,g);s.generateMipmaps=!1}else T?(C&&i.texStorage2D(3553,I,y,n.width,n.height),i.texSubImage2D(3553,0,0,0,m,v,n)):i.texImage2D(3553,0,y,m,v,n);x(s,f)&&S(l),u.__version=h.version,s.onUpdate&&s.onUpdate(s)}var p;t.__version=s.version}function j(t,s,r,o,l){const c=a.convert(r.format,r.encoding),d=a.convert(r.type),h=M(r.internalFormat,c,d,r.encoding);n.get(s).__hasExternalTextures||(32879===l||35866===l?i.texImage3D(l,0,h,s.width,s.height,s.depth,0,c,d,null):i.texImage2D(l,0,h,s.width,s.height,0,c,d,null)),i.bindFramebuffer(36160,t),F(s)?u.framebufferTexture2DMultisampleEXT(36160,o,l,n.get(r).__webglTexture,0,N(s)):(3553===l||l>=34069&&l<=34074)&&e.framebufferTexture2D(36160,o,l,n.get(r).__webglTexture,0),i.bindFramebuffer(36160,null)}function z(t,i,n){if(e.bindRenderbuffer(36161,t),i.depthBuffer&&!i.stencilBuffer){let s=33189;if(n||F(i)){const t=i.depthTexture;t&&t.isDepthTexture&&(t.type===Ie?s=36012:t.type===Ce&&(s=33190));const n=N(i);F(i)?u.renderbufferStorageMultisampleEXT(36161,n,s,i.width,i.height):e.renderbufferStorageMultisample(36161,n,s,i.width,i.height)}else e.renderbufferStorage(36161,s,i.width,i.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(i.depthBuffer&&i.stencilBuffer){const s=N(i);n&&!1===F(i)?e.renderbufferStorageMultisample(36161,s,35056,i.width,i.height):F(i)?u.renderbufferStorageMultisampleEXT(36161,s,35056,i.width,i.height):e.renderbufferStorage(36161,34041,i.width,i.height),e.framebufferRenderbuffer(36160,33306,36161,t)}else{const t=!0===i.isWebGLMultipleRenderTargets?i.texture:[i.texture];for(let s=0;s<t.length;s++){const r=t[s],o=a.convert(r.format,r.encoding),l=a.convert(r.type),c=M(r.internalFormat,o,l,r.encoding),d=N(i);n&&!1===F(i)?e.renderbufferStorageMultisample(36161,d,c,i.width,i.height):F(i)?u.renderbufferStorageMultisampleEXT(36161,d,c,i.width,i.height):e.renderbufferStorage(36161,c,i.width,i.height)}}e.bindRenderbuffer(36161,null)}function B(t){const s=n.get(t),a=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!s.__autoAllocateDepthBuffer){if(a)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,s){if(s&&s.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(i.bindFramebuffer(36160,t),!s.depthTexture||!s.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");n.get(s.depthTexture).__webglTexture&&s.depthTexture.image.width===s.width&&s.depthTexture.image.height===s.height||(s.depthTexture.image.width=s.width,s.depthTexture.image.height=s.height,s.depthTexture.needsUpdate=!0),R(s.depthTexture,0);const a=n.get(s.depthTexture).__webglTexture,r=N(s);if(s.depthTexture.format===ze)F(s)?u.framebufferTexture2DMultisampleEXT(36160,36096,3553,a,0,r):e.framebufferTexture2D(36160,36096,3553,a,0);else{if(s.depthTexture.format!==Be)throw new Error("Unknown depthTexture format");F(s)?u.framebufferTexture2DMultisampleEXT(36160,33306,3553,a,0,r):e.framebufferTexture2D(36160,33306,3553,a,0)}}(s.__webglFramebuffer,t)}else if(a){s.__webglDepthbuffer=[];for(let n=0;n<6;n++)i.bindFramebuffer(36160,s.__webglFramebuffer[n]),s.__webglDepthbuffer[n]=e.createRenderbuffer(),z(s.__webglDepthbuffer[n],t,!1)}else i.bindFramebuffer(36160,s.__webglFramebuffer),s.__webglDepthbuffer=e.createRenderbuffer(),z(s.__webglDepthbuffer,t,!1);i.bindFramebuffer(36160,null)}function N(e){return Math.min(h,e.samples)}function F(e){const i=n.get(e);return o&&e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==i.__useRenderToTexture}function H(e,i){const n=e.encoding,s=e.format,a=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||e.format===vi||n!==Ot&&(n===Lt?!1===o?!0===t.has("EXT_sRGB")&&s===Oe?(e.format=vi,e.minFilter=ve,e.generateMipmaps=!1):i=$i.sRGBToLinear(i):s===Oe&&a===Se||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",n)),i}this.allocateTextureUnit=function(){const e=A;return e>=l&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+l),A+=1,e},this.resetTextureUnits=function(){A=0},this.setTexture2D=R,this.setTexture2DArray=function(e,t){const s=n.get(e);e.version>0&&s.__version!==e.version?L(s,e,t):i.bindTexture(35866,s.__webglTexture,33984+t)},this.setTexture3D=function(e,t){const s=n.get(e);e.version>0&&s.__version!==e.version?L(s,e,t):i.bindTexture(32879,s.__webglTexture,33984+t)},this.setTextureCube=function(t,s){const r=n.get(t);t.version>0&&r.__version!==t.version?function(t,s,r){if(6!==s.image.length)return;const l=O(t,s),d=s.source;i.bindTexture(34067,t.__webglTexture,33984+r);const h=n.get(d);if(d.version!==h.__version||!0===l){i.activeTexture(33984+r),e.pixelStorei(37440,s.flipY),e.pixelStorei(37441,s.premultiplyAlpha),e.pixelStorei(3317,s.unpackAlignment),e.pixelStorei(37443,0);const t=s.isCompressedTexture||s.image[0].isCompressedTexture,n=s.image[0]&&s.image[0].isDataTexture,u=[];for(let e=0;e<6;e++)u[e]=t||n?n?s.image[e].image:s.image[e]:b(s.image[e],!1,!0,c),u[e]=H(s,u[e]);const p=u[0],f=w(p)||o,m=a.convert(s.format,s.encoding),g=a.convert(s.type),v=M(s.internalFormat,m,g,s.encoding),y=o&&!0!==s.isVideoTexture,_=void 0===h.__version||!0===l;let T,C=k(s,p,f);if(D(34067,s,f),t){y&&_&&i.texStorage2D(34067,C,v,p.width,p.height);for(let e=0;e<6;e++){T=u[e].mipmaps;for(let t=0;t<T.length;t++){const n=T[t];s.format!==Oe?null!==m?y?i.compressedTexSubImage2D(34069+e,t,0,0,n.width,n.height,m,n.data):i.compressedTexImage2D(34069+e,t,v,n.width,n.height,0,n.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):y?i.texSubImage2D(34069+e,t,0,0,n.width,n.height,m,g,n.data):i.texImage2D(34069+e,t,v,n.width,n.height,0,m,g,n.data)}}}else{T=s.mipmaps,y&&_&&(T.length>0&&C++,i.texStorage2D(34067,C,v,u[0].width,u[0].height));for(let e=0;e<6;e++)if(n){y?i.texSubImage2D(34069+e,0,0,0,u[e].width,u[e].height,m,g,u[e].data):i.texImage2D(34069+e,0,v,u[e].width,u[e].height,0,m,g,u[e].data);for(let t=0;t<T.length;t++){const n=T[t].image[e].image;y?i.texSubImage2D(34069+e,t+1,0,0,n.width,n.height,m,g,n.data):i.texImage2D(34069+e,t+1,v,n.width,n.height,0,m,g,n.data)}}else{y?i.texSubImage2D(34069+e,0,0,0,m,g,u[e]):i.texImage2D(34069+e,0,v,m,g,u[e]);for(let t=0;t<T.length;t++){const n=T[t];y?i.texSubImage2D(34069+e,t+1,0,0,m,g,n.image[e]):i.texImage2D(34069+e,t+1,v,m,g,n.image[e])}}}x(s,f)&&S(34067),h.__version=d.version,s.onUpdate&&s.onUpdate(s)}t.__version=s.version}(r,t,s):i.bindTexture(34067,r.__webglTexture,33984+s)},this.rebindTextures=function(e,t,i){const s=n.get(e);void 0!==t&&j(s.__webglFramebuffer,e,e.texture,36064,3553),void 0!==i&&B(e)},this.setupRenderTarget=function(t){const l=t.texture,c=n.get(t),d=n.get(l);t.addEventListener("dispose",C),!0!==t.isWebGLMultipleRenderTargets&&(void 0===d.__webglTexture&&(d.__webglTexture=e.createTexture()),d.__version=l.version,r.memory.textures++);const h=!0===t.isWebGLCubeRenderTarget,u=!0===t.isWebGLMultipleRenderTargets,p=w(t)||o;if(h){c.__webglFramebuffer=[];for(let t=0;t<6;t++)c.__webglFramebuffer[t]=e.createFramebuffer()}else{if(c.__webglFramebuffer=e.createFramebuffer(),u)if(s.drawBuffers){const i=t.texture;for(let t=0,s=i.length;t<s;t++){const s=n.get(i[t]);void 0===s.__webglTexture&&(s.__webglTexture=e.createTexture(),r.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(o&&t.samples>0&&!1===F(t)){const n=u?l:[l];c.__webglMultisampledFramebuffer=e.createFramebuffer(),c.__webglColorRenderbuffer=[],i.bindFramebuffer(36160,c.__webglMultisampledFramebuffer);for(let i=0;i<n.length;i++){const s=n[i];c.__webglColorRenderbuffer[i]=e.createRenderbuffer(),e.bindRenderbuffer(36161,c.__webglColorRenderbuffer[i]);const r=a.convert(s.format,s.encoding),o=a.convert(s.type),l=M(s.internalFormat,r,o,s.encoding,!0===t.isXRRenderTarget),d=N(t);e.renderbufferStorageMultisample(36161,d,l,t.width,t.height),e.framebufferRenderbuffer(36160,36064+i,36161,c.__webglColorRenderbuffer[i])}e.bindRenderbuffer(36161,null),t.depthBuffer&&(c.__webglDepthRenderbuffer=e.createRenderbuffer(),z(c.__webglDepthRenderbuffer,t,!0)),i.bindFramebuffer(36160,null)}}if(h){i.bindTexture(34067,d.__webglTexture),D(34067,l,p);for(let e=0;e<6;e++)j(c.__webglFramebuffer[e],t,l,36064,34069+e);x(l,p)&&S(34067),i.unbindTexture()}else if(u){const e=t.texture;for(let s=0,a=e.length;s<a;s++){const a=e[s],r=n.get(a);i.bindTexture(3553,r.__webglTexture),D(3553,a,p),j(c.__webglFramebuffer,t,a,36064+s,3553),x(a,p)&&S(3553)}i.unbindTexture()}else{let e=3553;(t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(o?e=t.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),i.bindTexture(e,d.__webglTexture),D(e,l,p),j(c.__webglFramebuffer,t,l,36064,e),x(l,p)&&S(e),i.unbindTexture()}t.depthBuffer&&B(t)},this.updateRenderTargetMipmap=function(e){const t=w(e)||o,s=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture];for(let a=0,r=s.length;a<r;a++){const r=s[a];if(x(r,t)){const t=e.isWebGLCubeRenderTarget?34067:3553,s=n.get(r).__webglTexture;i.bindTexture(t,s),S(t),i.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(o&&t.samples>0&&!1===F(t)){const s=t.isWebGLMultipleRenderTargets?t.texture:[t.texture],a=t.width,r=t.height;let o=16384;const l=[],c=t.stencilBuffer?33306:36096,d=n.get(t),h=!0===t.isWebGLMultipleRenderTargets;if(h)for(let t=0;t<s.length;t++)i.bindFramebuffer(36160,d.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+t,36161,null),i.bindFramebuffer(36160,d.__webglFramebuffer),e.framebufferTexture2D(36009,36064+t,3553,null,0);i.bindFramebuffer(36008,d.__webglMultisampledFramebuffer),i.bindFramebuffer(36009,d.__webglFramebuffer);for(let i=0;i<s.length;i++){l.push(36064+i),t.depthBuffer&&l.push(c);const u=void 0!==d.__ignoreDepthValues&&d.__ignoreDepthValues;if(!1===u&&(t.depthBuffer&&(o|=256),t.stencilBuffer&&(o|=1024)),h&&e.framebufferRenderbuffer(36008,36064,36161,d.__webglColorRenderbuffer[i]),!0===u&&(e.invalidateFramebuffer(36008,[c]),e.invalidateFramebuffer(36009,[c])),h){const t=n.get(s[i]).__webglTexture;e.framebufferTexture2D(36009,36064,3553,t,0)}e.blitFramebuffer(0,0,a,r,0,0,a,r,o,9728),p&&e.invalidateFramebuffer(36008,l)}if(i.bindFramebuffer(36008,null),i.bindFramebuffer(36009,null),h)for(let t=0;t<s.length;t++){i.bindFramebuffer(36160,d.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+t,36161,d.__webglColorRenderbuffer[t]);const a=n.get(s[t]).__webglTexture;i.bindFramebuffer(36160,d.__webglFramebuffer),e.framebufferTexture2D(36009,36064+t,3553,a,0)}i.bindFramebuffer(36009,d.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=B,this.setupFrameBufferTexture=j,this.useMultisampledRTT=F}function sl(e,t,i){const n=i.isWebGL2;return{convert:function(i,s=null){let a;if(i===Se)return 5121;if(i===Re)return 32819;if(i===Pe)return 32820;if(i===Me)return 5120;if(i===ke)return 5122;if(i===_e)return 5123;if(i===Te)return 5124;if(i===Ce)return 5125;if(i===Ie)return 5126;if(i===Ae)return n?5131:(a=t.get("OES_texture_half_float"),null!==a?a.HALF_FLOAT_OES:null);if(i===De)return 6406;if(i===Oe)return 6408;if(i===Le)return 6409;if(i===je)return 6410;if(i===ze)return 6402;if(i===Be)return 34041;if(i===vi)return a=t.get("EXT_sRGB"),null!==a?a.SRGB_ALPHA_EXT:null;if(i===Ne)return 6403;if(i===Fe)return 36244;if(i===He)return 33319;if(i===Ue)return 33320;if(i===Ve)return 36249;if(i===Ge||i===We||i===qe||i===Ye)if(s===Lt){if(a=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===a)return null;if(i===Ge)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===We)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===qe)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===Ye)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(a=t.get("WEBGL_compressed_texture_s3tc"),null===a)return null;if(i===Ge)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===We)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===qe)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===Ye)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(i===Ke||i===Xe||i===Ze||i===Je){if(a=t.get("WEBGL_compressed_texture_pvrtc"),null===a)return null;if(i===Ke)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===Xe)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===Ze)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===Je)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(i===Qe)return a=t.get("WEBGL_compressed_texture_etc1"),null!==a?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(i===$e||i===et){if(a=t.get("WEBGL_compressed_texture_etc"),null===a)return null;if(i===$e)return s===Lt?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(i===et)return s===Lt?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}if(i===tt||i===it||i===nt||i===st||i===at||i===rt||i===ot||i===lt||i===ct||i===dt||i===ht||i===ut||i===pt||i===ft){if(a=t.get("WEBGL_compressed_texture_astc"),null===a)return null;if(i===tt)return s===Lt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===it)return s===Lt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===nt)return s===Lt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===st)return s===Lt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===at)return s===Lt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===rt)return s===Lt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===ot)return s===Lt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===lt)return s===Lt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===ct)return s===Lt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===dt)return s===Lt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===ht)return s===Lt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===ut)return s===Lt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===pt)return s===Lt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===ft)return s===Lt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}if(i===mt){if(a=t.get("EXT_texture_compression_bptc"),null===a)return null;if(i===mt)return s===Lt?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}if(i===gt||i===vt||i===yt||i===bt){if(a=t.get("EXT_texture_compression_rgtc"),null===a)return null;if(i===mt)return a.COMPRESSED_RED_RGTC1_EXT;if(i===vt)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===yt)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===bt)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return i===Ee?n?34042:(a=t.get("WEBGL_depth_texture"),null!==a?a.UNSIGNED_INT_24_8_WEBGL:null):void 0!==e[i]?e[i]:null}}}class al extends xa{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class rl extends ds{constructor(){super(),this.isGroup=!0,this.type="Group"}}const ol={type:"move"};class ll{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new rl,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new rl,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Hi,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Hi),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new rl,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Hi,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Hi),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,i){let n=null,s=null,a=null;const r=this._targetRay,o=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){a=!0;for(const n of e.hand.values()){const e=t.getJointPose(n,i),s=this._getHandJoint(l,n);null!==e&&(s.matrix.fromArray(e.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.jointRadius=e.radius),s.visible=null!==e}const n=l.joints["index-finger-tip"],s=l.joints["thumb-tip"],r=n.position.distanceTo(s.position),o=.02,c=.005;l.inputState.pinching&&r>o+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&r<=o-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==o&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),null!==s&&(o.matrix.fromArray(s.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),s.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(s.linearVelocity)):o.hasLinearVelocity=!1,s.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(s.angularVelocity)):o.hasAngularVelocity=!1));null!==r&&(n=t.getPose(e.targetRaySpace,i),null===n&&null!==s&&(n=s),null!==n&&(r.matrix.fromArray(n.transform.matrix),r.matrix.decompose(r.position,r.rotation,r.scale),n.linearVelocity?(r.hasLinearVelocity=!0,r.linearVelocity.copy(n.linearVelocity)):r.hasLinearVelocity=!1,n.angularVelocity?(r.hasAngularVelocity=!0,r.angularVelocity.copy(n.angularVelocity)):r.hasAngularVelocity=!1,this.dispatchEvent(ol)))}return null!==r&&(r.visible=null!==n),null!==o&&(o.visible=null!==s),null!==l&&(l.visible=null!==a),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const i=new rl;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class cl extends sn{constructor(e,t,i,n,s,a,r,o,l,c){if((c=void 0!==c?c:ze)!==ze&&c!==Be)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&c===ze&&(i=Ce),void 0===i&&c===Be&&(i=Ee),super(null,n,s,a,r,o,c,i,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==r?r:ue,this.minFilter=void 0!==o?o:ue,this.flipY=!1,this.generateMipmaps=!1}}class dl extends yi{constructor(e,t){super();const i=this;let n=null,s=1,a=null,r="local-floor",o=1,l=null,c=null,d=null,h=null,u=null,p=null;const f=t.getContextAttributes();let m=null,g=null;const v=[],y=[],b=new Set,w=new Map,x=new xa;x.layers.enable(1),x.viewport=new an;const S=new xa;S.layers.enable(2),S.viewport=new an;const M=[x,S],k=new al;k.layers.enable(1),k.layers.enable(2);let _=null,T=null;function C(e){const t=y.indexOf(e.inputSource);if(-1===t)return;const i=v[t];void 0!==i&&i.dispatchEvent({type:e.type,data:e.inputSource})}function I(){n.removeEventListener("select",C),n.removeEventListener("selectstart",C),n.removeEventListener("selectend",C),n.removeEventListener("squeeze",C),n.removeEventListener("squeezestart",C),n.removeEventListener("squeezeend",C),n.removeEventListener("end",I),n.removeEventListener("inputsourceschange",A);for(let e=0;e<v.length;e++){const t=y[e];null!==t&&(y[e]=null,v[e].disconnect(t))}_=null,T=null,e.setRenderTarget(m),u=null,h=null,d=null,n=null,g=null,O.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}function A(e){for(let t=0;t<e.removed.length;t++){const i=e.removed[t],n=y.indexOf(i);n>=0&&(y[n]=null,v[n].disconnect(i))}for(let t=0;t<e.added.length;t++){const i=e.added[t];let n=y.indexOf(i);if(-1===n){for(let e=0;e<v.length;e++){if(e>=y.length){y.push(i),n=e;break}if(null===y[e]){y[e]=i,n=e;break}}if(-1===n)break}const s=v[n];s&&s.connect(i)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=v[e];return void 0===t&&(t=new ll,v[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=v[e];return void 0===t&&(t=new ll,v[e]=t),t.getGripSpace()},this.getHand=function(e){let t=v[e];return void 0===t&&(t=new ll,v[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){s=e,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){r=e,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||a},this.setReferenceSpace=function(e){l=e},this.getBaseLayer=function(){return null!==h?h:u},this.getBinding=function(){return d},this.getFrame=function(){return p},this.getSession=function(){return n},this.setSession=async function(c){if(n=c,null!==n){if(m=e.getRenderTarget(),n.addEventListener("select",C),n.addEventListener("selectstart",C),n.addEventListener("selectend",C),n.addEventListener("squeeze",C),n.addEventListener("squeezestart",C),n.addEventListener("squeezeend",C),n.addEventListener("end",I),n.addEventListener("inputsourceschange",A),!0!==f.xrCompatible&&await t.makeXRCompatible(),void 0===n.renderState.layers||!1===e.capabilities.isWebGL2){const i={antialias:void 0!==n.renderState.layers||f.antialias,alpha:f.alpha,depth:f.depth,stencil:f.stencil,framebufferScaleFactor:s};u=new XRWebGLLayer(n,t,i),n.updateRenderState({baseLayer:u}),g=new rn(u.framebufferWidth,u.framebufferHeight,{format:Oe,type:Se,encoding:e.outputEncoding,stencilBuffer:f.stencil})}else{let i=null,a=null,r=null;f.depth&&(r=f.stencil?35056:33190,i=f.stencil?Be:ze,a=f.stencil?Ee:Ce);const o={colorFormat:32856,depthFormat:r,scaleFactor:s};d=new XRWebGLBinding(n,t),h=d.createProjectionLayer(o),n.updateRenderState({layers:[h]}),g=new rn(h.textureWidth,h.textureHeight,{format:Oe,type:Se,depthTexture:new cl(h.textureWidth,h.textureHeight,a,void 0,void 0,void 0,void 0,void 0,void 0,i),stencilBuffer:f.stencil,encoding:e.outputEncoding,samples:f.antialias?4:0});e.properties.get(g).__ignoreDepthValues=h.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(o),l=null,a=await n.requestReferenceSpace(r),O.setContext(n),O.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}};const R=new Hi,P=new Hi;function E(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===n)return;k.near=S.near=x.near=e.near,k.far=S.far=x.far=e.far,_===k.near&&T===k.far||(n.updateRenderState({depthNear:k.near,depthFar:k.far}),_=k.near,T=k.far);const t=e.parent,i=k.cameras;E(k,t);for(let e=0;e<i.length;e++)E(i[e],t);k.matrixWorld.decompose(k.position,k.quaternion,k.scale),e.matrix.copy(k.matrix),e.matrix.decompose(e.position,e.quaternion,e.scale);const s=e.children;for(let e=0,t=s.length;e<t;e++)s[e].updateMatrixWorld(!0);2===i.length?function(e,t,i){R.setFromMatrixPosition(t.matrixWorld),P.setFromMatrixPosition(i.matrixWorld);const n=R.distanceTo(P),s=t.projectionMatrix.elements,a=i.projectionMatrix.elements,r=s[14]/(s[10]-1),o=s[14]/(s[10]+1),l=(s[9]+1)/s[5],c=(s[9]-1)/s[5],d=(s[8]-1)/s[0],h=(a[8]+1)/a[0],u=r*d,p=r*h,f=n/(-d+h),m=f*-d;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(f),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();const g=r+f,v=o+f,y=u-m,b=p+(n-m),w=l*o/v*g,x=c*o/v*g;e.projectionMatrix.makePerspective(y,b,w,x,g,v)}(k,x,S):k.projectionMatrix.copy(x.projectionMatrix)},this.getCamera=function(){return k},this.getFoveation=function(){if(null!==h||null!==u)return o},this.setFoveation=function(e){o=e,null!==h&&(h.fixedFoveation=e),null!==u&&void 0!==u.fixedFoveation&&(u.fixedFoveation=e)},this.getPlanes=function(){return b};let D=null;const O=new Da;O.setAnimationLoop((function(t,n){if(c=n.getViewerPose(l||a),p=n,null!==c){const t=c.views;null!==u&&(e.setRenderTargetFramebuffer(g,u.framebuffer),e.setRenderTarget(g));let i=!1;t.length!==k.cameras.length&&(k.cameras.length=0,i=!0);for(let n=0;n<t.length;n++){const s=t[n];let a=null;if(null!==u)a=u.getViewport(s);else{const t=d.getViewSubImage(h,s);a=t.viewport,0===n&&(e.setRenderTargetTextures(g,t.colorTexture,h.ignoreDepthValues?void 0:t.depthStencilTexture),e.setRenderTarget(g))}let r=M[n];void 0===r&&(r=new xa,r.layers.enable(n),r.viewport=new an,M[n]=r),r.matrix.fromArray(s.transform.matrix),r.projectionMatrix.fromArray(s.projectionMatrix),r.viewport.set(a.x,a.y,a.width,a.height),0===n&&k.matrix.copy(r.matrix),!0===i&&k.cameras.push(r)}}for(let e=0;e<v.length;e++){const t=y[e],i=v[e];null!==t&&void 0!==i&&i.update(t,n,l||a)}if(D&&D(t,n),n.detectedPlanes){i.dispatchEvent({type:"planesdetected",data:n.detectedPlanes});let e=null;for(const t of b)n.detectedPlanes.has(t)||(null===e&&(e=[]),e.push(t));if(null!==e)for(const t of e)b.delete(t),w.delete(t),i.dispatchEvent({type:"planeremoved",data:t});for(const e of n.detectedPlanes)if(b.has(e)){const t=w.get(e);e.lastChangedTime>t&&(w.set(e,e.lastChangedTime),i.dispatchEvent({type:"planechanged",data:e}))}else b.add(e),w.set(e,n.lastChangedTime),i.dispatchEvent({type:"planeadded",data:e})}p=null})),this.setAnimationLoop=function(e){D=e},this.dispose=function(){}}}function hl(e,t){function i(i,n){i.opacity.value=n.opacity,n.color&&i.diffuse.value.copy(n.color),n.emissive&&i.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(i.map.value=n.map),n.alphaMap&&(i.alphaMap.value=n.alphaMap),n.bumpMap&&(i.bumpMap.value=n.bumpMap,i.bumpScale.value=n.bumpScale,n.side===m&&(i.bumpScale.value*=-1)),n.displacementMap&&(i.displacementMap.value=n.displacementMap,i.displacementScale.value=n.displacementScale,i.displacementBias.value=n.displacementBias),n.emissiveMap&&(i.emissiveMap.value=n.emissiveMap),n.normalMap&&(i.normalMap.value=n.normalMap,i.normalScale.value.copy(n.normalScale),n.side===m&&i.normalScale.value.negate()),n.specularMap&&(i.specularMap.value=n.specularMap),n.alphaTest>0&&(i.alphaTest.value=n.alphaTest);const s=t.get(n).envMap;if(s&&(i.envMap.value=s,i.flipEnvMap.value=s.isCubeTexture&&!1===s.isRenderTargetTexture?-1:1,i.reflectivity.value=n.reflectivity,i.ior.value=n.ior,i.refractionRatio.value=n.refractionRatio),n.lightMap){i.lightMap.value=n.lightMap;const t=!0===e.useLegacyLights?Math.PI:1;i.lightMapIntensity.value=n.lightMapIntensity*t}let a,r;n.aoMap&&(i.aoMap.value=n.aoMap,i.aoMapIntensity.value=n.aoMapIntensity),n.map?a=n.map:n.specularMap?a=n.specularMap:n.displacementMap?a=n.displacementMap:n.normalMap?a=n.normalMap:n.bumpMap?a=n.bumpMap:n.roughnessMap?a=n.roughnessMap:n.metalnessMap?a=n.metalnessMap:n.alphaMap?a=n.alphaMap:n.emissiveMap?a=n.emissiveMap:n.clearcoatMap?a=n.clearcoatMap:n.clearcoatNormalMap?a=n.clearcoatNormalMap:n.clearcoatRoughnessMap?a=n.clearcoatRoughnessMap:n.iridescenceMap?a=n.iridescenceMap:n.iridescenceThicknessMap?a=n.iridescenceThicknessMap:n.specularIntensityMap?a=n.specularIntensityMap:n.specularColorMap?a=n.specularColorMap:n.transmissionMap?a=n.transmissionMap:n.thicknessMap?a=n.thicknessMap:n.sheenColorMap?a=n.sheenColorMap:n.sheenRoughnessMap&&(a=n.sheenRoughnessMap),void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),i.uvTransform.value.copy(a.matrix)),n.aoMap?r=n.aoMap:n.lightMap&&(r=n.lightMap),void 0!==r&&(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate&&r.updateMatrix(),i.uv2Transform.value.copy(r.matrix))}return{refreshFogUniforms:function(t,i){i.color.getRGB(t.fogColor.value,va(e)),i.isFog?(t.fogNear.value=i.near,t.fogFar.value=i.far):i.isFogExp2&&(t.fogDensity.value=i.density)},refreshMaterialUniforms:function(e,n,s,a,r){var o,l,c,d,h,u,p,f,g,v,y,b;n.isMeshBasicMaterial||n.isMeshLambertMaterial?i(e,n):n.isMeshToonMaterial?(i(e,n),y=e,(b=n).gradientMap&&(y.gradientMap.value=b.gradientMap)):n.isMeshPhongMaterial?(i(e,n),v=n,(g=e).specular.value.copy(v.specular),g.shininess.value=Math.max(v.shininess,1e-4)):n.isMeshStandardMaterial?(i(e,n),function(e,i){e.roughness.value=i.roughness,e.metalness.value=i.metalness,i.roughnessMap&&(e.roughnessMap.value=i.roughnessMap);i.metalnessMap&&(e.metalnessMap.value=i.metalnessMap);t.get(i).envMap&&(e.envMapIntensity.value=i.envMapIntensity)}(e,n),n.isMeshPhysicalMaterial&&function(e,t,i){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap));t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap),t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,t.side===m&&e.clearcoatNormalScale.value.negate()));t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap));t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=i.texture,e.transmissionSamplerSize.value.set(i.width,i.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor));e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap);t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap)}(e,n,r)):n.isMeshMatcapMaterial?(i(e,n),p=e,(f=n).matcap&&(p.matcap.value=f.matcap)):n.isMeshDepthMaterial?i(e,n):n.isMeshDistanceMaterial?(i(e,n),u=n,(h=e).referencePosition.value.copy(u.referencePosition),h.nearDistance.value=u.nearDistance,h.farDistance.value=u.farDistance):n.isMeshNormalMaterial?i(e,n):n.isLineBasicMaterial?(d=n,(c=e).diffuse.value.copy(d.color),c.opacity.value=d.opacity,n.isLineDashedMaterial&&(l=n,(o=e).dashSize.value=l.dashSize,o.totalSize.value=l.dashSize+l.gapSize,o.scale.value=l.scale)):n.isPointsMaterial?function(e,t,i,n){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*i,e.scale.value=.5*n,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);t.alphaTest>0&&(e.alphaTest.value=t.alphaTest);let s;t.map?s=t.map:t.alphaMap&&(s=t.alphaMap);void 0!==s&&(!0===s.matrixAutoUpdate&&s.updateMatrix(),e.uvTransform.value.copy(s.matrix))}(e,n,s,a):n.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);t.alphaTest>0&&(e.alphaTest.value=t.alphaTest);let i;t.map?i=t.map:t.alphaMap&&(i=t.alphaMap);void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix))}(e,n):n.isShadowMaterial?(e.color.value.copy(n.color),e.opacity.value=n.opacity):n.isShaderMaterial&&(n.uniformsNeedUpdate=!1)}}}function ul(e,t,i,n){let s={},a={},r=[];const o=i.isWebGL2?e.getParameter(35375):0;function l(e,t,i){const n=e.value;if(void 0===i[t]){if("number"==typeof n)i[t]=n;else{const e=Array.isArray(n)?n:[n],s=[];for(let t=0;t<e.length;t++)s.push(e[t].clone());i[t]=s}return!0}if("number"==typeof n){if(i[t]!==n)return i[t]=n,!0}else{const e=Array.isArray(i[t])?i[t]:[i[t]],s=Array.isArray(n)?n:[n];for(let t=0;t<e.length;t++){const i=e[t];if(!1===i.equals(s[t]))return i.copy(s[t]),!0}}return!1}function c(e){const t={boundary:0,storage:0};return"number"==typeof e?(t.boundary=4,t.storage=4):e.isVector2?(t.boundary=8,t.storage=8):e.isVector3||e.isColor?(t.boundary=16,t.storage=12):e.isVector4?(t.boundary=16,t.storage=16):e.isMatrix3?(t.boundary=48,t.storage=48):e.isMatrix4?(t.boundary=64,t.storage=64):e.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",e),t}function d(t){const i=t.target;i.removeEventListener("dispose",d);const n=r.indexOf(i.__bindingPointIndex);r.splice(n,1),e.deleteBuffer(s[i.id]),delete s[i.id],delete a[i.id]}return{bind:function(e,t){const i=t.program;n.uniformBlockBinding(e,i)},update:function(i,h){let u=s[i.id];void 0===u&&(!function(e){const t=e.uniforms;let i=0;const n=16;let s=0;for(let e=0,a=t.length;e<a;e++){const a=t[e],r={boundary:0,storage:0},o=Array.isArray(a.value)?a.value:[a.value];for(let e=0,t=o.length;e<t;e++){const t=c(o[e]);r.boundary+=t.boundary,r.storage+=t.storage}if(a.__data=new Float32Array(r.storage/Float32Array.BYTES_PER_ELEMENT),a.__offset=i,e>0){s=i%n;0!==s&&n-s-r.boundary<0&&(i+=n-s,a.__offset=i)}i+=r.storage}s=i%n,s>0&&(i+=n-s);e.__size=i,e.__cache={}}(i),u=function(t){const i=function(){for(let e=0;e<o;e++)if(-1===r.indexOf(e))return r.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();t.__bindingPointIndex=i;const n=e.createBuffer(),s=t.__size,a=t.usage;return e.bindBuffer(35345,n),e.bufferData(35345,s,a),e.bindBuffer(35345,null),e.bindBufferBase(35345,i,n),n}(i),s[i.id]=u,i.addEventListener("dispose",d));const p=h.program;n.updateUBOMapping(i,p);const f=t.render.frame;a[i.id]!==f&&(!function(t){const i=s[t.id],n=t.uniforms,a=t.__cache;e.bindBuffer(35345,i);for(let t=0,i=n.length;t<i;t++){const i=n[t];if(!0===l(i,t,a)){const t=i.__offset,n=Array.isArray(i.value)?i.value:[i.value];let s=0;for(let a=0;a<n.length;a++){const r=n[a],o=c(r);"number"==typeof r?(i.__data[0]=r,e.bufferSubData(35345,t+s,i.__data)):r.isMatrix3?(i.__data[0]=r.elements[0],i.__data[1]=r.elements[1],i.__data[2]=r.elements[2],i.__data[3]=r.elements[0],i.__data[4]=r.elements[3],i.__data[5]=r.elements[4],i.__data[6]=r.elements[5],i.__data[7]=r.elements[0],i.__data[8]=r.elements[6],i.__data[9]=r.elements[7],i.__data[10]=r.elements[8],i.__data[11]=r.elements[0]):(r.toArray(i.__data,s),s+=o.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(35345,t,i.__data)}}e.bindBuffer(35345,null)}(i),a[i.id]=f)},dispose:function(){for(const t in s)e.deleteBuffer(s[t]);r=[],s={},a={}}}}function pl(e={}){this.isWebGLRenderer=!0;const t=void 0!==e.canvas?e.canvas:function(){const e=Ni("canvas");return e.style.display="block",e}(),i=void 0!==e.context?e.context:null,s=void 0===e.depth||e.depth,a=void 0===e.stencil||e.stencil,r=void 0!==e.antialias&&e.antialias,o=void 0===e.premultipliedAlpha||e.premultipliedAlpha,l=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,c=void 0!==e.powerPreference?e.powerPreference:"default",d=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat;let h;h=null!==i?i.getContextAttributes().alpha:void 0!==e.alpha&&e.alpha;let u=null,p=null;const v=[],y=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Ot,this.useLegacyLights=!0,this.toneMapping=J,this.toneMappingExposure=1;const b=this;let w=!1,x=0,S=0,M=null,k=-1,_=null;const T=new an,C=new an;let I=null,A=t.width,R=t.height,P=1,E=null,D=null;const O=new an(0,0,A,R),L=new an(0,0,A,R);let j=!1;const z=new Ea;let B=!1,N=!1,F=null;const H=new Nn,U=new Hi,V={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function G(){return null===M?P:1}let W,q,Y,K,X,Z,Q,$,ee,te,ie,ne,se,ae,re,oe,le,ce,de,he,ue,pe,fe,me,ge=i;function ve(e,i){for(let n=0;n<e.length;n++){const s=e[n],a=t.getContext(s,i);if(null!==a)return a}return null}try{const e={alpha:!0,depth:s,stencil:a,antialias:r,premultipliedAlpha:o,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r"+n),t.addEventListener("webglcontextlost",xe,!1),t.addEventListener("webglcontextrestored",Me,!1),t.addEventListener("webglcontextcreationerror",ke,!1),null===ge){const t=["webgl2","webgl","experimental-webgl"];if(!0===b.isWebGL1Renderer&&t.shift(),ge=ve(t,e),null===ge)throw ve(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===ge.getShaderPrecisionFormat&&(ge.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){throw console.error("THREE.WebGLRenderer: "+e.message),e}function ye(){W=new or(ge),q=new Va(ge,W,e),W.init(q),pe=new sl(ge,W,q),Y=new il(ge,W,q),K=new dr,X=new Fo,Z=new nl(ge,W,Y,X,q,pe,K),Q=new Wa(b),$=new rr(b),ee=new Oa(ge,q),fe=new Ha(ge,W,ee,q),te=new lr(ge,ee,K,fe),ie=new fr(ge,te,ee,K),de=new pr(ge,q,Z),oe=new Ga(X),ne=new No(b,Q,$,W,q,fe,oe),se=new hl(b,X),ae=new Go,re=new Zo(W,q),ce=new Fa(b,Q,$,Y,ie,h,o),le=new tl(b,ie,q),me=new ul(ge,K,q,Y),he=new Ua(ge,W,K,q),ue=new cr(ge,W,K,q),K.programs=ne.programs,b.capabilities=q,b.extensions=W,b.properties=X,b.renderLists=ae,b.shadowMap=le,b.state=Y,b.info=K}ye();const be=new dl(b,ge);function xe(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),w=!0}function Me(){console.log("THREE.WebGLRenderer: Context Restored."),w=!1;const e=K.autoReset,t=le.enabled,i=le.autoUpdate,n=le.needsUpdate,s=le.type;ye(),K.autoReset=e,le.enabled=t,le.autoUpdate=i,le.needsUpdate=n,le.type=s}function ke(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function _e(e){const t=e.target;var i;t.removeEventListener("dispose",_e),function(e){const t=X.get(e).programs;void 0!==t&&(t.forEach((function(e){ne.releaseProgram(e)})),e.isShaderMaterial&&ne.releaseShaderCache(e))}(i=t),X.remove(i)}this.xr=be,this.getContext=function(){return ge},this.getContextAttributes=function(){return ge.getContextAttributes()},this.forceContextLoss=function(){const e=W.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=W.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return P},this.setPixelRatio=function(e){void 0!==e&&(P=e,this.setSize(A,R,!1))},this.getSize=function(e){return e.set(A,R)},this.setSize=function(e,i,n=!0){be.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(A=e,R=i,t.width=Math.floor(e*P),t.height=Math.floor(i*P),!0===n&&(t.style.width=e+"px",t.style.height=i+"px"),this.setViewport(0,0,e,i))},this.getDrawingBufferSize=function(e){return e.set(A*P,R*P).floor()},this.setDrawingBufferSize=function(e,i,n){A=e,R=i,P=n,t.width=Math.floor(e*n),t.height=Math.floor(i*n),this.setViewport(0,0,e,i)},this.getCurrentViewport=function(e){return e.copy(T)},this.getViewport=function(e){return e.copy(O)},this.setViewport=function(e,t,i,n){e.isVector4?O.set(e.x,e.y,e.z,e.w):O.set(e,t,i,n),Y.viewport(T.copy(O).multiplyScalar(P).floor())},this.getScissor=function(e){return e.copy(L)},this.setScissor=function(e,t,i,n){e.isVector4?L.set(e.x,e.y,e.z,e.w):L.set(e,t,i,n),Y.scissor(C.copy(L).multiplyScalar(P).floor())},this.getScissorTest=function(){return j},this.setScissorTest=function(e){Y.setScissorTest(j=e)},this.setOpaqueSort=function(e){E=e},this.setTransparentSort=function(e){D=e},this.getClearColor=function(e){return e.copy(ce.getClearColor())},this.setClearColor=function(){ce.setClearColor.apply(ce,arguments)},this.getClearAlpha=function(){return ce.getClearAlpha()},this.setClearAlpha=function(){ce.setClearAlpha.apply(ce,arguments)},this.clear=function(e=!0,t=!0,i=!0){let n=0;e&&(n|=16384),t&&(n|=256),i&&(n|=1024),ge.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",xe,!1),t.removeEventListener("webglcontextrestored",Me,!1),t.removeEventListener("webglcontextcreationerror",ke,!1),ae.dispose(),re.dispose(),X.dispose(),Q.dispose(),$.dispose(),ie.dispose(),fe.dispose(),me.dispose(),ne.dispose(),be.dispose(),be.removeEventListener("sessionstart",Ce),be.removeEventListener("sessionend",Re),F&&(F.dispose(),F=null),Pe.stop()},this.renderBufferDirect=function(e,t,i,n,s,a){null===t&&(t=V);const r=s.isMesh&&s.matrixWorld.determinant()<0,o=function(e,t,i,n,s){!0!==t.isScene&&(t=V);Z.resetTextureUnits();const a=t.fog,r=n.isMeshStandardMaterial?t.environment:null,o=null===M?b.outputEncoding:!0===M.isXRRenderTarget?M.texture.encoding:Ot,l=(n.isMeshStandardMaterial?$:Q).get(n.envMap||r),c=!0===n.vertexColors&&!!i.attributes.color&&4===i.attributes.color.itemSize,d=!!n.normalMap&&!!i.attributes.tangent,h=!!i.morphAttributes.position,u=!!i.morphAttributes.normal,f=!!i.morphAttributes.color,m=n.toneMapped?b.toneMapping:J,g=i.morphAttributes.position||i.morphAttributes.normal||i.morphAttributes.color,v=void 0!==g?g.length:0,y=X.get(n),w=p.state.lights;if(!0===B&&(!0===N||e!==_)){const t=e===_&&n.id===k;oe.setState(n,e,t)}let x=!1;n.version===y.__version?y.needsLights&&y.lightsStateVersion!==w.state.version||y.outputEncoding!==o||s.isInstancedMesh&&!1===y.instancing?x=!0:s.isInstancedMesh||!0!==y.instancing?s.isSkinnedMesh&&!1===y.skinning?x=!0:s.isSkinnedMesh||!0!==y.skinning?y.envMap!==l||!0===n.fog&&y.fog!==a?x=!0:void 0===y.numClippingPlanes||y.numClippingPlanes===oe.numPlanes&&y.numIntersection===oe.numIntersection?(y.vertexAlphas!==c||y.vertexTangents!==d||y.morphTargets!==h||y.morphNormals!==u||y.morphColors!==f||y.toneMapping!==m||!0===q.isWebGL2&&y.morphTargetsCount!==v)&&(x=!0):x=!0:x=!0:x=!0:(x=!0,y.__version=n.version);let S=y.currentProgram;!0===x&&(S=ze(n,t,s));let T=!1,C=!1,I=!1;const A=S.getUniforms(),E=y.uniforms;Y.useProgram(S.program)&&(T=!0,C=!0,I=!0);n.id!==k&&(k=n.id,C=!0);if(T||_!==e){if(A.setValue(ge,"projectionMatrix",e.projectionMatrix),q.logarithmicDepthBuffer&&A.setValue(ge,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),_!==e&&(_=e,C=!0,I=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshStandardMaterial||n.envMap){const t=A.map.cameraPosition;void 0!==t&&t.setValue(ge,U.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&A.setValue(ge,"isOrthographic",!0===e.isOrthographicCamera),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.isShadowMaterial||s.isSkinnedMesh)&&A.setValue(ge,"viewMatrix",e.matrixWorldInverse)}if(s.isSkinnedMesh){A.setOptional(ge,s,"bindMatrix"),A.setOptional(ge,s,"bindMatrixInverse");const e=s.skeleton;e&&(q.floatVertexTextures?(null===e.boneTexture&&e.computeBoneTexture(),A.setValue(ge,"boneTexture",e.boneTexture,Z),A.setValue(ge,"boneTextureSize",e.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const D=i.morphAttributes;(void 0!==D.position||void 0!==D.normal||void 0!==D.color&&!0===q.isWebGL2)&&de.update(s,i,S);(C||y.receiveShadow!==s.receiveShadow)&&(y.receiveShadow=s.receiveShadow,A.setValue(ge,"receiveShadow",s.receiveShadow));n.isMeshGouraudMaterial&&null!==n.envMap&&(E.envMap.value=l,E.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1);C&&(A.setValue(ge,"toneMappingExposure",b.toneMappingExposure),y.needsLights&&(L=I,(O=E).ambientLightColor.needsUpdate=L,O.lightProbe.needsUpdate=L,O.directionalLights.needsUpdate=L,O.directionalLightShadows.needsUpdate=L,O.pointLights.needsUpdate=L,O.pointLightShadows.needsUpdate=L,O.spotLights.needsUpdate=L,O.spotLightShadows.needsUpdate=L,O.rectAreaLights.needsUpdate=L,O.hemisphereLights.needsUpdate=L),a&&!0===n.fog&&se.refreshFogUniforms(E,a),se.refreshMaterialUniforms(E,n,P,R,F),bo.upload(ge,y.uniformsList,E,Z));var O,L;n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(bo.upload(ge,y.uniformsList,E,Z),n.uniformsNeedUpdate=!1);n.isSpriteMaterial&&A.setValue(ge,"center",s.center);if(A.setValue(ge,"modelViewMatrix",s.modelViewMatrix),A.setValue(ge,"normalMatrix",s.normalMatrix),A.setValue(ge,"modelMatrix",s.matrixWorld),n.isShaderMaterial||n.isRawShaderMaterial){const e=n.uniformsGroups;for(let t=0,i=e.length;t<i;t++)if(q.isWebGL2){const i=e[t];me.update(i,S),me.bind(i,S)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return S}(e,t,i,n,s);Y.setMaterial(n,r);let l=i.index,c=1;!0===n.wireframe&&(l=te.getWireframeAttribute(i),c=2);const d=i.drawRange,h=i.attributes.position;let u=d.start*c,f=(d.start+d.count)*c;null!==a&&(u=Math.max(u,a.start*c),f=Math.min(f,(a.start+a.count)*c)),null!==l?(u=Math.max(u,0),f=Math.min(f,l.count)):null!=h&&(u=Math.max(u,0),f=Math.min(f,h.count));const m=f-u;if(m<0||m===1/0)return;let g;fe.setup(s,n,o,i,l);let v=he;if(null!==l&&(g=ee.get(l),v=ue,v.setIndex(g)),s.isMesh)!0===n.wireframe?(Y.setLineWidth(n.wireframeLinewidth*G()),v.setMode(1)):v.setMode(4);else if(s.isLine){let e=n.linewidth;void 0===e&&(e=1),Y.setLineWidth(e*G()),s.isLineSegments?v.setMode(1):s.isLineLoop?v.setMode(2):v.setMode(3)}else s.isPoints?v.setMode(0):s.isSprite&&v.setMode(4);if(s.isInstancedMesh)v.renderInstances(u,m,s.count);else if(i.isInstancedBufferGeometry){const e=void 0!==i._maxInstanceCount?i._maxInstanceCount:1/0,t=Math.min(i.instanceCount,e);v.renderInstances(u,m,t)}else v.render(u,m)},this.compile=function(e,t){function i(e,t,i){!0===e.transparent&&e.side===g&&!1===e.forceSinglePass?(e.side=m,e.needsUpdate=!0,ze(e,t,i),e.side=f,e.needsUpdate=!0,ze(e,t,i),e.side=g):ze(e,t,i)}p=re.get(e),p.init(),y.push(p),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(p.pushLight(e),e.castShadow&&p.pushShadow(e))})),p.setupLights(b.useLegacyLights),e.traverse((function(t){const n=t.material;if(n)if(Array.isArray(n))for(let s=0;s<n.length;s++){i(n[s],e,t)}else i(n,e,t)})),y.pop(),p=null};let Te=null;function Ce(){Pe.stop()}function Re(){Pe.start()}const Pe=new Da;function Ee(e,t,i,n){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)i=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)p.pushLight(e),e.castShadow&&p.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||z.intersectsSprite(e)){n&&U.setFromMatrixPosition(e.matrixWorld).applyMatrix4(H);const t=ie.update(e),s=e.material;s.visible&&u.push(e,t,s,i,U.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==K.render.frame&&(e.skeleton.update(),e.skeleton.frame=K.render.frame),!e.frustumCulled||z.intersectsObject(e))){n&&U.setFromMatrixPosition(e.matrixWorld).applyMatrix4(H);const t=ie.update(e),s=e.material;if(Array.isArray(s)){const n=t.groups;for(let a=0,r=n.length;a<r;a++){const r=n[a],o=s[r.materialIndex];o&&o.visible&&u.push(e,t,o,i,U.z,r)}}else s.visible&&u.push(e,t,s,i,U.z,null)}const s=e.children;for(let e=0,a=s.length;e<a;e++)Ee(s[e],t,i,n)}function De(e,t,i,n){const s=e.opaque,a=e.transmissive,o=e.transparent;p.setupLightsView(i),!0===B&&oe.setGlobalState(b.clippingPlanes,i),a.length>0&&function(e,t,i){const n=q.isWebGL2;null===F&&(F=new rn(1024,1024,{generateMipmaps:!0,type:W.has("EXT_color_buffer_half_float")?Ae:Se,minFilter:we,samples:n&&!0===r?4:0}));const s=b.getRenderTarget();b.setRenderTarget(F),b.clear();const a=b.toneMapping;b.toneMapping=J,Le(e,t,i),b.toneMapping=a,Z.updateMultisampleRenderTarget(F),Z.updateRenderTargetMipmap(F),b.setRenderTarget(s)}(s,t,i),n&&Y.viewport(T.copy(n)),s.length>0&&Le(s,t,i),a.length>0&&Le(a,t,i),o.length>0&&Le(o,t,i),Y.buffers.depth.setTest(!0),Y.buffers.depth.setMask(!0),Y.buffers.color.setMask(!0),Y.setPolygonOffset(!1)}function Le(e,t,i){const n=!0===t.isScene?t.overrideMaterial:null;for(let s=0,a=e.length;s<a;s++){const a=e[s],r=a.object,o=a.geometry,l=null===n?a.material:n,c=a.group;r.layers.test(i.layers)&&je(r,t,i,o,l,c)}}function je(e,t,i,n,s,a){e.onBeforeRender(b,t,i,n,s,a),e.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),s.onBeforeRender(b,t,i,n,e,a),!0===s.transparent&&s.side===g&&!1===s.forceSinglePass?(s.side=m,s.needsUpdate=!0,b.renderBufferDirect(i,t,n,s,e,a),s.side=f,s.needsUpdate=!0,b.renderBufferDirect(i,t,n,s,e,a),s.side=g):b.renderBufferDirect(i,t,n,s,e,a),e.onAfterRender(b,t,i,n,s,a)}function ze(e,t,i){!0!==t.isScene&&(t=V);const n=X.get(e),s=p.state.lights,a=p.state.shadowsArray,r=s.state.version,o=ne.getParameters(e,s.state,a,t,i),l=ne.getProgramCacheKey(o);let c=n.programs;n.environment=e.isMeshStandardMaterial?t.environment:null,n.fog=t.fog,n.envMap=(e.isMeshStandardMaterial?$:Q).get(e.envMap||n.environment),void 0===c&&(e.addEventListener("dispose",_e),c=new Map,n.programs=c);let d=c.get(l);if(void 0!==d){if(n.currentProgram===d&&n.lightsStateVersion===r)return Be(e,o),d}else o.uniforms=ne.getUniforms(e),e.onBuild(i,o,b),e.onBeforeCompile(o,b),d=ne.acquireProgram(o,l),c.set(l,d),n.uniforms=o.uniforms;const h=n.uniforms;var u;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(h.clippingPlanes=oe.uniform),Be(e,o),n.needsLights=(u=e).isMeshLambertMaterial||u.isMeshToonMaterial||u.isMeshPhongMaterial||u.isMeshStandardMaterial||u.isShadowMaterial||u.isShaderMaterial&&!0===u.lights,n.lightsStateVersion=r,n.needsLights&&(h.ambientLightColor.value=s.state.ambient,h.lightProbe.value=s.state.probe,h.directionalLights.value=s.state.directional,h.directionalLightShadows.value=s.state.directionalShadow,h.spotLights.value=s.state.spot,h.spotLightShadows.value=s.state.spotShadow,h.rectAreaLights.value=s.state.rectArea,h.ltc_1.value=s.state.rectAreaLTC1,h.ltc_2.value=s.state.rectAreaLTC2,h.pointLights.value=s.state.point,h.pointLightShadows.value=s.state.pointShadow,h.hemisphereLights.value=s.state.hemi,h.directionalShadowMap.value=s.state.directionalShadowMap,h.directionalShadowMatrix.value=s.state.directionalShadowMatrix,h.spotShadowMap.value=s.state.spotShadowMap,h.spotLightMatrix.value=s.state.spotLightMatrix,h.spotLightMap.value=s.state.spotLightMap,h.pointShadowMap.value=s.state.pointShadowMap,h.pointShadowMatrix.value=s.state.pointShadowMatrix);const f=d.getUniforms(),m=bo.seqWithValue(f.seq,h);return n.currentProgram=d,n.uniformsList=m,d}function Be(e,t){const i=X.get(e);i.outputEncoding=t.outputEncoding,i.instancing=t.instancing,i.skinning=t.skinning,i.morphTargets=t.morphTargets,i.morphNormals=t.morphNormals,i.morphColors=t.morphColors,i.morphTargetsCount=t.morphTargetsCount,i.numClippingPlanes=t.numClippingPlanes,i.numIntersection=t.numClipIntersection,i.vertexAlphas=t.vertexAlphas,i.vertexTangents=t.vertexTangents,i.toneMapping=t.toneMapping}Pe.setAnimationLoop((function(e){Te&&Te(e)})),"undefined"!=typeof self&&Pe.setContext(self),this.setAnimationLoop=function(e){Te=e,be.setAnimationLoop(e),null===e?Pe.stop():Pe.start()},be.addEventListener("sessionstart",Ce),be.addEventListener("sessionend",Re),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===w)return;!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===be.enabled&&!0===be.isPresenting&&(!0===be.cameraAutoUpdate&&be.updateCamera(t),t=be.getCamera()),!0===e.isScene&&e.onBeforeRender(b,e,t,M),p=re.get(e,y.length),p.init(),y.push(p),H.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),z.setFromProjectionMatrix(H),N=this.localClippingEnabled,B=oe.init(this.clippingPlanes,N),u=ae.get(e,v.length),u.init(),v.push(u),Ee(e,t,0,b.sortObjects),u.finish(),!0===b.sortObjects&&u.sort(E,D),!0===B&&oe.beginShadows();const i=p.state.shadowsArray;if(le.render(i,e,t),!0===B&&oe.endShadows(),!0===this.info.autoReset&&this.info.reset(),ce.render(u,e),p.setupLights(b.useLegacyLights),t.isArrayCamera){const i=t.cameras;for(let t=0,n=i.length;t<n;t++){const n=i[t];De(u,e,n,n.viewport)}}else De(u,e,t);null!==M&&(Z.updateMultisampleRenderTarget(M),Z.updateRenderTargetMipmap(M)),!0===e.isScene&&e.onAfterRender(b,e,t),fe.resetDefaultState(),k=-1,_=null,y.pop(),p=y.length>0?y[y.length-1]:null,v.pop(),u=v.length>0?v[v.length-1]:null},this.getActiveCubeFace=function(){return x},this.getActiveMipmapLevel=function(){return S},this.getRenderTarget=function(){return M},this.setRenderTargetTextures=function(e,t,i){X.get(e.texture).__webglTexture=t,X.get(e.depthTexture).__webglTexture=i;const n=X.get(e);n.__hasExternalTextures=!0,n.__hasExternalTextures&&(n.__autoAllocateDepthBuffer=void 0===i,n.__autoAllocateDepthBuffer||!0===W.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),n.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(e,t){const i=X.get(e);i.__webglFramebuffer=t,i.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e,t=0,i=0){M=e,x=t,S=i;let n=!0,s=null,a=!1,r=!1;if(e){const i=X.get(e);void 0!==i.__useDefaultFramebuffer?(Y.bindFramebuffer(36160,null),n=!1):void 0===i.__webglFramebuffer?Z.setupRenderTarget(e):i.__hasExternalTextures&&Z.rebindTextures(e,X.get(e.texture).__webglTexture,X.get(e.depthTexture).__webglTexture);const o=e.texture;(o.isData3DTexture||o.isDataArrayTexture||o.isCompressedArrayTexture)&&(r=!0);const l=X.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(s=l[t],a=!0):s=q.isWebGL2&&e.samples>0&&!1===Z.useMultisampledRTT(e)?X.get(e).__webglMultisampledFramebuffer:l,T.copy(e.viewport),C.copy(e.scissor),I=e.scissorTest}else T.copy(O).multiplyScalar(P).floor(),C.copy(L).multiplyScalar(P).floor(),I=j;if(Y.bindFramebuffer(36160,s)&&q.drawBuffers&&n&&Y.drawBuffers(e,s),Y.viewport(T),Y.scissor(C),Y.setScissorTest(I),a){const n=X.get(e.texture);ge.framebufferTexture2D(36160,36064,34069+t,n.__webglTexture,i)}else if(r){const n=X.get(e.texture),s=t||0;ge.framebufferTextureLayer(36160,36064,n.__webglTexture,i||0,s)}k=-1},this.readRenderTargetPixels=function(e,t,i,n,s,a,r){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let o=X.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==r&&(o=o[r]),o){Y.bindFramebuffer(36160,o);try{const r=e.texture,o=r.format,l=r.type;if(o!==Oe&&pe.convert(o)!==ge.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const c=l===Ae&&(W.has("EXT_color_buffer_half_float")||q.isWebGL2&&W.has("EXT_color_buffer_float"));if(!(l===Se||pe.convert(l)===ge.getParameter(35738)||l===Ie&&(q.isWebGL2||W.has("OES_texture_float")||W.has("WEBGL_color_buffer_float"))||c))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-n&&i>=0&&i<=e.height-s&&ge.readPixels(t,i,n,s,pe.convert(o),pe.convert(l),a)}finally{const e=null!==M?X.get(M).__webglFramebuffer:null;Y.bindFramebuffer(36160,e)}}},this.copyFramebufferToTexture=function(e,t,i=0){const n=Math.pow(2,-i),s=Math.floor(t.image.width*n),a=Math.floor(t.image.height*n);Z.setTexture2D(t,0),ge.copyTexSubImage2D(3553,i,0,0,e.x,e.y,s,a),Y.unbindTexture()},this.copyTextureToTexture=function(e,t,i,n=0){const s=t.image.width,a=t.image.height,r=pe.convert(i.format),o=pe.convert(i.type);Z.setTexture2D(i,0),ge.pixelStorei(37440,i.flipY),ge.pixelStorei(37441,i.premultiplyAlpha),ge.pixelStorei(3317,i.unpackAlignment),t.isDataTexture?ge.texSubImage2D(3553,n,e.x,e.y,s,a,r,o,t.image.data):t.isCompressedTexture?ge.compressedTexSubImage2D(3553,n,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,r,t.mipmaps[0].data):ge.texSubImage2D(3553,n,e.x,e.y,r,o,t.image),0===n&&i.generateMipmaps&&ge.generateMipmap(3553),Y.unbindTexture()},this.copyTextureToTexture3D=function(e,t,i,n,s=0){if(b.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const a=e.max.x-e.min.x+1,r=e.max.y-e.min.y+1,o=e.max.z-e.min.z+1,l=pe.convert(n.format),c=pe.convert(n.type);let d;if(n.isData3DTexture)Z.setTexture3D(n,0),d=32879;else{if(!n.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Z.setTexture2DArray(n,0),d=35866}ge.pixelStorei(37440,n.flipY),ge.pixelStorei(37441,n.premultiplyAlpha),ge.pixelStorei(3317,n.unpackAlignment);const h=ge.getParameter(3314),u=ge.getParameter(32878),p=ge.getParameter(3316),f=ge.getParameter(3315),m=ge.getParameter(32877),g=i.isCompressedTexture?i.mipmaps[0]:i.image;ge.pixelStorei(3314,g.width),ge.pixelStorei(32878,g.height),ge.pixelStorei(3316,e.min.x),ge.pixelStorei(3315,e.min.y),ge.pixelStorei(32877,e.min.z),i.isDataTexture||i.isData3DTexture?ge.texSubImage3D(d,s,t.x,t.y,t.z,a,r,o,l,c,g.data):i.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ge.compressedTexSubImage3D(d,s,t.x,t.y,t.z,a,r,o,l,g.data)):ge.texSubImage3D(d,s,t.x,t.y,t.z,a,r,o,l,c,g),ge.pixelStorei(3314,h),ge.pixelStorei(32878,u),ge.pixelStorei(3316,p),ge.pixelStorei(3315,f),ge.pixelStorei(32877,m),0===s&&n.generateMipmaps&&ge.generateMipmap(d),Y.unbindTexture()},this.initTexture=function(e){e.isCubeTexture?Z.setTextureCube(e,0):e.isData3DTexture?Z.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?Z.setTexture2DArray(e,0):Z.setTexture2D(e,0),Y.unbindTexture()},this.resetState=function(){x=0,S=0,M=null,Y.reset(),fe.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Object.defineProperties(pl.prototype,{physicallyCorrectLights:{get:function(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights},set:function(e){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}}});class fl extends pl{}fl.prototype.isWebGL1Renderer=!0;class ml{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Is(e),this.density=t}clone(){return new ml(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class gl{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new Is(e),this.near=t,this.far=i}clone(){return new gl(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class vl extends ds{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class yl{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=ri,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Mi()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let n=0,s=this.stride;n<s;n++)this.array[e+n]=t.array[i+n];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Mi()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Mi()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const bl=new Hi;class wl{constructor(e,t,i,n=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=n}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)bl.fromBufferAttribute(this,t),bl.applyMatrix4(e),this.setXYZ(t,bl.x,bl.y,bl.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)bl.fromBufferAttribute(this,t),bl.applyNormalMatrix(e),this.setXYZ(t,bl.x,bl.y,bl.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)bl.fromBufferAttribute(this,t),bl.transformDirection(e),this.setXYZ(t,bl.x,bl.y,bl.z);return this}setX(e,t){return this.normalized&&(t=Pi(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Pi(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Pi(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Pi(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Ri(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Ri(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Ri(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Ri(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Pi(t,this.array),i=Pi(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=Pi(t,this.array),i=Pi(i,this.array),n=Pi(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=n,this}setXYZW(e,t,i,n,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Pi(t,this.array),i=Pi(i,this.array),n=Pi(n,this.array),s=Pi(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=n,this.data.array[e+3]=s,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const i=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[i+t])}return new Ds(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new wl(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const i=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[i+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class xl extends Ms{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Is(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Sl;const Ml=new Hi,kl=new Hi,_l=new Hi,Tl=new Di,Cl=new Di,Il=new Nn,Al=new Hi,Rl=new Hi,Pl=new Hi,El=new Di,Dl=new Di,Ol=new Di;class Ll extends ds{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",void 0===Sl){Sl=new Js;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),t=new yl(e,5);Sl.setIndex([0,1,2,0,2,3]),Sl.setAttribute("position",new wl(t,3,0,!1)),Sl.setAttribute("uv",new wl(t,2,3,!1))}this.geometry=Sl,this.material=void 0!==e?e:new xl,this.center=new Di(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),kl.setFromMatrixScale(this.matrixWorld),Il.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),_l.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&kl.multiplyScalar(-_l.z);const i=this.material.rotation;let n,s;0!==i&&(s=Math.cos(i),n=Math.sin(i));const a=this.center;jl(Al.set(-.5,-.5,0),_l,a,kl,n,s),jl(Rl.set(.5,-.5,0),_l,a,kl,n,s),jl(Pl.set(.5,.5,0),_l,a,kl,n,s),El.set(0,0),Dl.set(1,0),Ol.set(1,1);let r=e.ray.intersectTriangle(Al,Rl,Pl,!1,Ml);if(null===r&&(jl(Rl.set(-.5,.5,0),_l,a,kl,n,s),Dl.set(0,1),r=e.ray.intersectTriangle(Al,Pl,Rl,!1,Ml),null===r))return;const o=e.ray.origin.distanceTo(Ml);o<e.near||o>e.far||t.push({distance:o,point:Ml.clone(),uv:xs.getUV(Ml,Al,Rl,Pl,El,Dl,Ol,new Di),face:null,object:this})}copy(e,t){return super.copy(e,t),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}function jl(e,t,i,n,s,a){Tl.subVectors(e,i).addScalar(.5).multiply(n),void 0!==s?(Cl.x=a*Tl.x-s*Tl.y,Cl.y=s*Tl.x+a*Tl.y):Cl.copy(Tl),e.copy(t),e.x+=Cl.x,e.y+=Cl.y,e.applyMatrix4(Il)}const zl=new Hi,Bl=new Hi;class Nl extends ds{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let e=0,i=t.length;e<i;e++){const i=t[e];this.addLevel(i.object.clone(),i.distance,i.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const n=this.levels;let s;for(s=0;s<n.length&&!(t<n[s].distance);s++);return n.splice(s,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,n;for(i=1,n=t.length;i<n;i++){let n=t[i].distance;if(t[i].object.visible&&(n-=n*t[i].hysteresis),e<n)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){zl.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(zl);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){zl.setFromMatrixPosition(e.matrixWorld),Bl.setFromMatrixPosition(this.matrixWorld);const i=zl.distanceTo(Bl)/e.zoom;let n,s;for(t[0].object.visible=!0,n=1,s=t.length;n<s;n++){let e=t[n].distance;if(t[n].object.visible&&(e-=e*t[n].hysteresis),!(i>=e))break;t[n-1].object.visible=!1,t[n].object.visible=!0}for(this._currentLevel=n-1;n<s;n++)t[n].object.visible=!1}}toJSON(e){const t=super.toJSON(e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let e=0,n=i.length;e<n;e++){const n=i[e];t.object.levels.push({object:n.object.uuid,distance:n.distance,hysteresis:n.hysteresis})}return t}}const Fl=new Hi,Hl=new an,Ul=new an,Vl=new Hi,Gl=new Nn;class Wl extends ua{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Nn,this.bindMatrixInverse=new Nn}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new an,t=this.geometry.attributes.skinWeight;for(let i=0,n=t.count;i<n;i++){e.fromBufferAttribute(t,i);const n=1/e.manhattanLength();n!==1/0?e.multiplyScalar(n):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const i=this.skeleton,n=this.geometry;Hl.fromBufferAttribute(n.attributes.skinIndex,e),Ul.fromBufferAttribute(n.attributes.skinWeight,e),Fl.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let e=0;e<4;e++){const n=Ul.getComponent(e);if(0!==n){const s=Hl.getComponent(e);Gl.multiplyMatrices(i.bones[s].matrixWorld,i.boneInverses[s]),t.addScaledVector(Vl.copy(Fl).applyMatrix4(Gl),n)}}return t.applyMatrix4(this.bindMatrixInverse)}}class ql extends ds{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Yl extends sn{constructor(e=null,t=1,i=1,n,s,a,r,o,l=ue,c=ue,d,h){super(null,a,r,o,l,c,n,s,d,h),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Kl=new Nn,Xl=new Nn;class Zl{constructor(e=[],t=[]){this.uuid=Mi(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new Nn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const t=new Nn;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,n=this.boneTexture;for(let n=0,s=e.length;n<s;n++){const s=e[n]?e[n].matrixWorld:Xl;Kl.multiplyMatrices(s,t[n]),Kl.toArray(i,16*n)}null!==n&&(n.needsUpdate=!0)}clone(){return new Zl(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=Ii(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new Yl(t,e,e,Oe,Ie);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,n=e.bones.length;i<n;i++){const n=e.bones[i];let s=t[n];void 0===s&&(console.warn("THREE.Skeleton: No bone found with UUID:",n),s=new ql),this.bones.push(s),this.boneInverses.push((new Nn).fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let n=0,s=t.length;n<s;n++){const s=t[n];e.bones.push(s.uuid);const a=i[n];e.boneInverses.push(a.toArray())}return e}}class Jl extends Ds{constructor(e,t,i,n=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Ql=new Nn,$l=new Nn,ec=[],tc=new Nn,ic=new ua;class nc extends ua{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Jl(new Float32Array(16*i),16),this.instanceColor=null,this.count=i,this.frustumCulled=!1;for(let e=0;e<i;e++)this.setMatrixAt(e,tc)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const i=this.matrixWorld,n=this.count;if(ic.geometry=this.geometry,ic.material=this.material,void 0!==ic.material)for(let s=0;s<n;s++){this.getMatrixAt(s,Ql),$l.multiplyMatrices(i,Ql),ic.matrixWorld=$l,ic.raycast(e,ec);for(let e=0,i=ec.length;e<i;e++){const i=ec[e];i.instanceId=s,i.object=this,t.push(i)}ec.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new Jl(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class sc extends Ms{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Is(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const ac=new Hi,rc=new Hi,oc=new Nn,lc=new Bn,cc=new Rn;class dc extends ds{constructor(e=new Js,t=new sc){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,i=[0];for(let e=1,n=t.count;e<n;e++)ac.fromBufferAttribute(t,e-1),rc.fromBufferAttribute(t,e),i[e]=i[e-1],i[e]+=ac.distanceTo(rc);e.setAttribute("lineDistance",new Us(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,n=this.matrixWorld,s=e.params.Line.threshold,a=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),cc.copy(i.boundingSphere),cc.applyMatrix4(n),cc.radius+=s,!1===e.ray.intersectsSphere(cc))return;oc.copy(n).invert(),lc.copy(e.ray).applyMatrix4(oc);const r=s/((this.scale.x+this.scale.y+this.scale.z)/3),o=r*r,l=new Hi,c=new Hi,d=new Hi,h=new Hi,u=this.isLineSegments?2:1,p=i.index,f=i.attributes.position;if(null!==p){for(let i=Math.max(0,a.start),n=Math.min(p.count,a.start+a.count)-1;i<n;i+=u){const n=p.getX(i),s=p.getX(i+1);l.fromBufferAttribute(f,n),c.fromBufferAttribute(f,s);if(lc.distanceSqToSegment(l,c,h,d)>o)continue;h.applyMatrix4(this.matrixWorld);const a=e.ray.origin.distanceTo(h);a<e.near||a>e.far||t.push({distance:a,point:d.clone().applyMatrix4(this.matrixWorld),index:i,face:null,faceIndex:null,object:this})}}else{for(let i=Math.max(0,a.start),n=Math.min(f.count,a.start+a.count)-1;i<n;i+=u){l.fromBufferAttribute(f,i),c.fromBufferAttribute(f,i+1);if(lc.distanceSqToSegment(l,c,h,d)>o)continue;h.applyMatrix4(this.matrixWorld);const n=e.ray.origin.distanceTo(h);n<e.near||n>e.far||t.push({distance:n,point:d.clone().applyMatrix4(this.matrixWorld),index:i,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const i=e[t[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=i.length;e<t;e++){const t=i[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}const hc=new Hi,uc=new Hi;class pc extends dc{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,i=[];for(let e=0,n=t.count;e<n;e+=2)hc.fromBufferAttribute(t,e),uc.fromBufferAttribute(t,e+1),i[e]=0===e?0:i[e-1],i[e+1]=i[e]+hc.distanceTo(uc);e.setAttribute("lineDistance",new Us(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class fc extends dc{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class mc extends Ms{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Is(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const gc=new Nn,vc=new Bn,yc=new Rn,bc=new Hi;class wc extends ds{constructor(e=new Js,t=new mc){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,n=this.matrixWorld,s=e.params.Points.threshold,a=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),yc.copy(i.boundingSphere),yc.applyMatrix4(n),yc.radius+=s,!1===e.ray.intersectsSphere(yc))return;gc.copy(n).invert(),vc.copy(e.ray).applyMatrix4(gc);const r=s/((this.scale.x+this.scale.y+this.scale.z)/3),o=r*r,l=i.index,c=i.attributes.position;if(null!==l){for(let i=Math.max(0,a.start),s=Math.min(l.count,a.start+a.count);i<s;i++){const s=l.getX(i);bc.fromBufferAttribute(c,s),xc(bc,s,o,n,e,t,this)}}else{for(let i=Math.max(0,a.start),s=Math.min(c.count,a.start+a.count);i<s;i++)bc.fromBufferAttribute(c,i),xc(bc,i,o,n,e,t,this)}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const i=e[t[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=i.length;e<t;e++){const t=i[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function xc(e,t,i,n,s,a,r){const o=vc.distanceSqToPoint(e);if(o<i){const i=new Hi;vc.closestPointToPoint(e,i),i.applyMatrix4(n);const l=s.ray.origin.distanceTo(i);if(l<s.near||l>s.far)return;a.push({distance:l,distanceToRay:Math.sqrt(o),point:i,index:t,face:null,object:r})}}class Sc extends sn{constructor(e,t,i,n,s,a,r,o,l){super(e,t,i,n,s,a,r,o,l),this.isVideoTexture=!0,this.minFilter=void 0!==a?a:ve,this.magFilter=void 0!==s?s:ve,this.generateMipmaps=!1;const c=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){c.needsUpdate=!0,e.requestVideoFrameCallback(t)}))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;!1==="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class Mc extends sn{constructor(e,t,i){super({width:e,height:t}),this.isFramebufferTexture=!0,this.format=i,this.magFilter=ue,this.minFilter=ue,this.generateMipmaps=!1,this.needsUpdate=!0}}class kc extends sn{constructor(e,t,i,n,s,a,r,o,l,c,d,h){super(null,a,r,o,l,c,n,s,d,h),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class _c extends kc{constructor(e,t,i,n,s,a){super(e,t,i,s,a),this.isCompressedArrayTexture=!0,this.image.depth=n,this.wrapR=de}}class Tc extends sn{constructor(e,t,i,n,s,a,r,o,l){super(e,t,i,n,s,a,r,o,l),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Cc{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,n=this.getPoint(0),s=0;t.push(0);for(let a=1;a<=e;a++)i=this.getPoint(a/e),s+=i.distanceTo(n),t.push(s),n=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let n=0;const s=i.length;let a;a=t||e*i[s-1];let r,o=0,l=s-1;for(;o<=l;)if(n=Math.floor(o+(l-o)/2),r=i[n]-a,r<0)o=n+1;else{if(!(r>0)){l=n;break}l=n-1}if(n=l,i[n]===a)return n/(s-1);const c=i[n];return(n+(a-c)/(i[n+1]-c))/(s-1)}getTangent(e,t){const i=1e-4;let n=e-i,s=e+i;n<0&&(n=0),s>1&&(s=1);const a=this.getPoint(n),r=this.getPoint(s),o=t||(a.isVector2?new Di:new Hi);return o.copy(r).sub(a).normalize(),o}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new Hi,n=[],s=[],a=[],r=new Hi,o=new Nn;for(let t=0;t<=e;t++){const i=t/e;n[t]=this.getTangentAt(i,new Hi)}s[0]=new Hi,a[0]=new Hi;let l=Number.MAX_VALUE;const c=Math.abs(n[0].x),d=Math.abs(n[0].y),h=Math.abs(n[0].z);c<=l&&(l=c,i.set(1,0,0)),d<=l&&(l=d,i.set(0,1,0)),h<=l&&i.set(0,0,1),r.crossVectors(n[0],i).normalize(),s[0].crossVectors(n[0],r),a[0].crossVectors(n[0],s[0]);for(let t=1;t<=e;t++){if(s[t]=s[t-1].clone(),a[t]=a[t-1].clone(),r.crossVectors(n[t-1],n[t]),r.length()>Number.EPSILON){r.normalize();const e=Math.acos(ki(n[t-1].dot(n[t]),-1,1));s[t].applyMatrix4(o.makeRotationAxis(r,e))}a[t].crossVectors(n[t],s[t])}if(!0===t){let t=Math.acos(ki(s[0].dot(s[e]),-1,1));t/=e,n[0].dot(r.crossVectors(s[0],s[e]))>0&&(t=-t);for(let i=1;i<=e;i++)s[i].applyMatrix4(o.makeRotationAxis(n[i],t*i)),a[i].crossVectors(n[i],s[i])}return{tangents:n,normals:s,binormals:a}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Ic extends Cc{constructor(e=0,t=0,i=1,n=1,s=0,a=2*Math.PI,r=!1,o=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=n,this.aStartAngle=s,this.aEndAngle=a,this.aClockwise=r,this.aRotation=o}getPoint(e,t){const i=t||new Di,n=2*Math.PI;let s=this.aEndAngle-this.aStartAngle;const a=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=n;for(;s>n;)s-=n;s<Number.EPSILON&&(s=a?0:n),!0!==this.aClockwise||a||(s===n?s=-n:s-=n);const r=this.aStartAngle+e*s;let o=this.aX+this.xRadius*Math.cos(r),l=this.aY+this.yRadius*Math.sin(r);if(0!==this.aRotation){const e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),i=o-this.aX,n=l-this.aY;o=i*e-n*t+this.aX,l=i*t+n*e+this.aY}return i.set(o,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class Ac extends Ic{constructor(e,t,i,n,s,a){super(e,t,i,i,n,s,a),this.isArcCurve=!0,this.type="ArcCurve"}}function Rc(){let e=0,t=0,i=0,n=0;function s(s,a,r,o){e=s,t=r,i=-3*s+3*a-2*r-o,n=2*s-2*a+r+o}return{initCatmullRom:function(e,t,i,n,a){s(t,i,a*(i-e),a*(n-t))},initNonuniformCatmullRom:function(e,t,i,n,a,r,o){let l=(t-e)/a-(i-e)/(a+r)+(i-t)/r,c=(i-t)/r-(n-t)/(r+o)+(n-i)/o;l*=r,c*=r,s(t,i,l,c)},calc:function(s){const a=s*s;return e+t*s+i*a+n*(a*s)}}}const Pc=new Hi,Ec=new Rc,Dc=new Rc,Oc=new Rc;class Lc extends Cc{constructor(e=[],t=!1,i="centripetal",n=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=n}getPoint(e,t=new Hi){const i=t,n=this.points,s=n.length,a=(s-(this.closed?0:1))*e;let r,o,l=Math.floor(a),c=a-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/s)+1)*s:0===c&&l===s-1&&(l=s-2,c=1),this.closed||l>0?r=n[(l-1)%s]:(Pc.subVectors(n[0],n[1]).add(n[0]),r=Pc);const d=n[l%s],h=n[(l+1)%s];if(this.closed||l+2<s?o=n[(l+2)%s]:(Pc.subVectors(n[s-1],n[s-2]).add(n[s-1]),o=Pc),"centripetal"===this.curveType||"chordal"===this.curveType){const e="chordal"===this.curveType?.5:.25;let t=Math.pow(r.distanceToSquared(d),e),i=Math.pow(d.distanceToSquared(h),e),n=Math.pow(h.distanceToSquared(o),e);i<1e-4&&(i=1),t<1e-4&&(t=i),n<1e-4&&(n=i),Ec.initNonuniformCatmullRom(r.x,d.x,h.x,o.x,t,i,n),Dc.initNonuniformCatmullRom(r.y,d.y,h.y,o.y,t,i,n),Oc.initNonuniformCatmullRom(r.z,d.z,h.z,o.z,t,i,n)}else"catmullrom"===this.curveType&&(Ec.initCatmullRom(r.x,d.x,h.x,o.x,this.tension),Dc.initCatmullRom(r.y,d.y,h.y,o.y,this.tension),Oc.initCatmullRom(r.z,d.z,h.z,o.z,this.tension));return i.set(Ec.calc(c),Dc.calc(c),Oc.calc(c)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const i=e.points[t];this.points.push((new Hi).fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function jc(e,t,i,n,s){const a=.5*(n-t),r=.5*(s-i),o=e*e;return(2*i-2*n+a+r)*(e*o)+(-3*i+3*n-2*a-r)*o+a*e+i}function zc(e,t,i,n){return function(e,t){const i=1-e;return i*i*t}(e,t)+2*(1-(a=e))*a*i+(s=e)*s*n;var s,a}function Bc(e,t,i,n,s){return function(e,t){const i=1-e;return i*i*i*t}(e,t)+function(e,t){const i=1-e;return 3*i*i*e*t}(e,i)+3*(1-(r=e))*r*r*n+(a=e)*a*a*s;var a,r}class Nc extends Cc{constructor(e=new Di,t=new Di,i=new Di,n=new Di){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=n}getPoint(e,t=new Di){const i=t,n=this.v0,s=this.v1,a=this.v2,r=this.v3;return i.set(Bc(e,n.x,s.x,a.x,r.x),Bc(e,n.y,s.y,a.y,r.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Fc extends Cc{constructor(e=new Hi,t=new Hi,i=new Hi,n=new Hi){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=n}getPoint(e,t=new Hi){const i=t,n=this.v0,s=this.v1,a=this.v2,r=this.v3;return i.set(Bc(e,n.x,s.x,a.x,r.x),Bc(e,n.y,s.y,a.y,r.y),Bc(e,n.z,s.z,a.z,r.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Hc extends Cc{constructor(e=new Di,t=new Di){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Di){const i=t;return 1===e?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Di){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Uc extends Cc{constructor(e=new Hi,t=new Hi){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new Hi){const i=t;return 1===e?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Hi){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Vc extends Cc{constructor(e=new Di,t=new Di,i=new Di){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Di){const i=t,n=this.v0,s=this.v1,a=this.v2;return i.set(zc(e,n.x,s.x,a.x),zc(e,n.y,s.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Gc extends Cc{constructor(e=new Hi,t=new Hi,i=new Hi){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Hi){const i=t,n=this.v0,s=this.v1,a=this.v2;return i.set(zc(e,n.x,s.x,a.x),zc(e,n.y,s.y,a.y),zc(e,n.z,s.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Wc extends Cc{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Di){const i=t,n=this.points,s=(n.length-1)*e,a=Math.floor(s),r=s-a,o=n[0===a?a:a-1],l=n[a],c=n[a>n.length-2?n.length-1:a+1],d=n[a>n.length-3?n.length-1:a+2];return i.set(jc(r,o.x,l.x,c.x,d.x),jc(r,o.y,l.y,c.y,d.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const i=e.points[t];this.points.push((new Di).fromArray(i))}return this}}var qc=Object.freeze({__proto__:null,ArcCurve:Ac,CatmullRomCurve3:Lc,CubicBezierCurve:Nc,CubicBezierCurve3:Fc,EllipseCurve:Ic,LineCurve:Hc,LineCurve3:Uc,QuadraticBezierCurve:Vc,QuadraticBezierCurve3:Gc,SplineCurve:Wc});class Yc extends Cc{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Hc(t,e))}getPoint(e,t){const i=e*this.getLength(),n=this.getCurveLengths();let s=0;for(;s<n.length;){if(n[s]>=i){const e=n[s]-i,a=this.curves[s],r=a.getLength(),o=0===r?0:1-e/r;return a.getPointAt(o,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,n=this.curves.length;i<n;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let n=0,s=this.curves;n<s.length;n++){const a=s[n],r=a.isEllipseCurve?2*e:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,o=a.getPoints(r);for(let e=0;e<o.length;e++){const n=o[e];i&&i.equals(n)||(t.push(n),i=n)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const i=e.curves[t];this.curves.push((new qc[i.type]).fromJSON(i))}return this}}class Kc extends Yc{constructor(e){super(),this.type="Path",this.currentPoint=new Di,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new Hc(this.currentPoint.clone(),new Di(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,n){const s=new Vc(this.currentPoint.clone(),new Di(e,t),new Di(i,n));return this.curves.push(s),this.currentPoint.set(i,n),this}bezierCurveTo(e,t,i,n,s,a){const r=new Nc(this.currentPoint.clone(),new Di(e,t),new Di(i,n),new Di(s,a));return this.curves.push(r),this.currentPoint.set(s,a),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new Wc(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,n,s,a){const r=this.currentPoint.x,o=this.currentPoint.y;return this.absarc(e+r,t+o,i,n,s,a),this}absarc(e,t,i,n,s,a){return this.absellipse(e,t,i,i,n,s,a),this}ellipse(e,t,i,n,s,a,r,o){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+l,t+c,i,n,s,a,r,o),this}absellipse(e,t,i,n,s,a,r,o){const l=new Ic(e,t,i,n,s,a,r,o);if(this.curves.length>0){const e=l.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(l);const c=l.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Xc extends Js{constructor(e=[new Di(0,-.5),new Di(.5,0),new Di(0,.5)],t=12,i=0,n=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:n},t=Math.floor(t),n=ki(n,0,2*Math.PI);const s=[],a=[],r=[],o=[],l=[],c=1/t,d=new Hi,h=new Di,u=new Hi,p=new Hi,f=new Hi;let m=0,g=0;for(let t=0;t<=e.length-1;t++)switch(t){case 0:m=e[t+1].x-e[t].x,g=e[t+1].y-e[t].y,u.x=1*g,u.y=-m,u.z=0*g,f.copy(u),u.normalize(),o.push(u.x,u.y,u.z);break;case e.length-1:o.push(f.x,f.y,f.z);break;default:m=e[t+1].x-e[t].x,g=e[t+1].y-e[t].y,u.x=1*g,u.y=-m,u.z=0*g,p.copy(u),u.x+=f.x,u.y+=f.y,u.z+=f.z,u.normalize(),o.push(u.x,u.y,u.z),f.copy(p)}for(let s=0;s<=t;s++){const u=i+s*c*n,p=Math.sin(u),f=Math.cos(u);for(let i=0;i<=e.length-1;i++){d.x=e[i].x*p,d.y=e[i].y,d.z=e[i].x*f,a.push(d.x,d.y,d.z),h.x=s/t,h.y=i/(e.length-1),r.push(h.x,h.y);const n=o[3*i+0]*p,c=o[3*i+1],u=o[3*i+0]*f;l.push(n,c,u)}}for(let i=0;i<t;i++)for(let t=0;t<e.length-1;t++){const n=t+i*e.length,a=n,r=n+e.length,o=n+e.length+1,l=n+1;s.push(a,r,l),s.push(o,l,r)}this.setIndex(s),this.setAttribute("position",new Us(a,3)),this.setAttribute("uv",new Us(r,2)),this.setAttribute("normal",new Us(l,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Xc(e.points,e.segments,e.phiStart,e.phiLength)}}class Zc extends Xc{constructor(e=1,t=1,i=4,n=8){const s=new Kc;s.absarc(0,-t/2,e,1.5*Math.PI,0),s.absarc(0,t/2,e,0,.5*Math.PI),super(s.getPoints(i),n),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:i,radialSegments:n}}static fromJSON(e){return new Zc(e.radius,e.length,e.capSegments,e.radialSegments)}}class Jc extends Js{constructor(e=1,t=32,i=0,n=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:n},t=Math.max(3,t);const s=[],a=[],r=[],o=[],l=new Hi,c=new Di;a.push(0,0,0),r.push(0,0,1),o.push(.5,.5);for(let s=0,d=3;s<=t;s++,d+=3){const h=i+s/t*n;l.x=e*Math.cos(h),l.y=e*Math.sin(h),a.push(l.x,l.y,l.z),r.push(0,0,1),c.x=(a[d]/e+1)/2,c.y=(a[d+1]/e+1)/2,o.push(c.x,c.y)}for(let e=1;e<=t;e++)s.push(e,e+1,0);this.setIndex(s),this.setAttribute("position",new Us(a,3)),this.setAttribute("normal",new Us(r,3)),this.setAttribute("uv",new Us(o,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Jc(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Qc extends Js{constructor(e=1,t=1,i=1,n=32,s=1,a=!1,r=0,o=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:n,heightSegments:s,openEnded:a,thetaStart:r,thetaLength:o};const l=this;n=Math.floor(n),s=Math.floor(s);const c=[],d=[],h=[],u=[];let p=0;const f=[],m=i/2;let g=0;function v(i){const s=p,a=new Di,f=new Hi;let v=0;const y=!0===i?e:t,b=!0===i?1:-1;for(let e=1;e<=n;e++)d.push(0,m*b,0),h.push(0,b,0),u.push(.5,.5),p++;const w=p;for(let e=0;e<=n;e++){const t=e/n*o+r,i=Math.cos(t),s=Math.sin(t);f.x=y*s,f.y=m*b,f.z=y*i,d.push(f.x,f.y,f.z),h.push(0,b,0),a.x=.5*i+.5,a.y=.5*s*b+.5,u.push(a.x,a.y),p++}for(let e=0;e<n;e++){const t=s+e,n=w+e;!0===i?c.push(n,n+1,t):c.push(n+1,n,t),v+=3}l.addGroup(g,v,!0===i?1:2),g+=v}!function(){const a=new Hi,v=new Hi;let y=0;const b=(t-e)/i;for(let l=0;l<=s;l++){const c=[],g=l/s,y=g*(t-e)+e;for(let e=0;e<=n;e++){const t=e/n,s=t*o+r,l=Math.sin(s),f=Math.cos(s);v.x=y*l,v.y=-g*i+m,v.z=y*f,d.push(v.x,v.y,v.z),a.set(l,b,f).normalize(),h.push(a.x,a.y,a.z),u.push(t,1-g),c.push(p++)}f.push(c)}for(let e=0;e<n;e++)for(let t=0;t<s;t++){const i=f[t][e],n=f[t+1][e],s=f[t+1][e+1],a=f[t][e+1];c.push(i,n,a),c.push(n,s,a),y+=6}l.addGroup(g,y,0),g+=y}(),!1===a&&(e>0&&v(!0),t>0&&v(!1)),this.setIndex(c),this.setAttribute("position",new Us(d,3)),this.setAttribute("normal",new Us(h,3)),this.setAttribute("uv",new Us(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Qc(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class $c extends Qc{constructor(e=1,t=1,i=32,n=1,s=!1,a=0,r=2*Math.PI){super(0,e,t,i,n,s,a,r),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:n,openEnded:s,thetaStart:a,thetaLength:r}}static fromJSON(e){return new $c(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class ed extends Js{constructor(e=[],t=[],i=1,n=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:n};const s=[],a=[];function r(e,t,i,n){const s=n+1,a=[];for(let n=0;n<=s;n++){a[n]=[];const r=e.clone().lerp(i,n/s),o=t.clone().lerp(i,n/s),l=s-n;for(let e=0;e<=l;e++)a[n][e]=0===e&&n===s?r:r.clone().lerp(o,e/l)}for(let e=0;e<s;e++)for(let t=0;t<2*(s-e)-1;t++){const i=Math.floor(t/2);t%2==0?(o(a[e][i+1]),o(a[e+1][i]),o(a[e][i])):(o(a[e][i+1]),o(a[e+1][i+1]),o(a[e+1][i]))}}function o(e){s.push(e.x,e.y,e.z)}function l(t,i){const n=3*t;i.x=e[n+0],i.y=e[n+1],i.z=e[n+2]}function c(e,t,i,n){n<0&&1===e.x&&(a[t]=e.x-1),0===i.x&&0===i.z&&(a[t]=n/2/Math.PI+.5)}function d(e){return Math.atan2(e.z,-e.x)}!function(e){const i=new Hi,n=new Hi,s=new Hi;for(let a=0;a<t.length;a+=3)l(t[a+0],i),l(t[a+1],n),l(t[a+2],s),r(i,n,s,e)}(n),function(e){const t=new Hi;for(let i=0;i<s.length;i+=3)t.x=s[i+0],t.y=s[i+1],t.z=s[i+2],t.normalize().multiplyScalar(e),s[i+0]=t.x,s[i+1]=t.y,s[i+2]=t.z}(i),function(){const e=new Hi;for(let i=0;i<s.length;i+=3){e.x=s[i+0],e.y=s[i+1],e.z=s[i+2];const n=d(e)/2/Math.PI+.5,r=(t=e,Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))/Math.PI+.5);a.push(n,1-r)}var t;(function(){const e=new Hi,t=new Hi,i=new Hi,n=new Hi,r=new Di,o=new Di,l=new Di;for(let h=0,u=0;h<s.length;h+=9,u+=6){e.set(s[h+0],s[h+1],s[h+2]),t.set(s[h+3],s[h+4],s[h+5]),i.set(s[h+6],s[h+7],s[h+8]),r.set(a[u+0],a[u+1]),o.set(a[u+2],a[u+3]),l.set(a[u+4],a[u+5]),n.copy(e).add(t).add(i).divideScalar(3);const p=d(n);c(r,u+0,e,p),c(o,u+2,t,p),c(l,u+4,i,p)}})(),function(){for(let e=0;e<a.length;e+=6){const t=a[e+0],i=a[e+2],n=a[e+4],s=Math.max(t,i,n),r=Math.min(t,i,n);s>.9&&r<.1&&(t<.2&&(a[e+0]+=1),i<.2&&(a[e+2]+=1),n<.2&&(a[e+4]+=1))}}()}(),this.setAttribute("position",new Us(s,3)),this.setAttribute("normal",new Us(s.slice(),3)),this.setAttribute("uv",new Us(a,2)),0===n?this.computeVertexNormals():this.normalizeNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ed(e.vertices,e.indices,e.radius,e.details)}}class td extends ed{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,n=1/i;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-i,0,-n,i,0,n,-i,0,n,i,-n,-i,0,-n,i,0,n,-i,0,n,i,0,-i,0,-n,i,0,-n,-i,0,n,i,0,n],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new td(e.radius,e.detail)}}const id=new Hi,nd=new Hi,sd=new Hi,ad=new xs;class rd extends Js{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},null!==e){const i=4,n=Math.pow(10,i),s=Math.cos(xi*t),a=e.getIndex(),r=e.getAttribute("position"),o=a?a.count:r.count,l=[0,0,0],c=["a","b","c"],d=new Array(3),h={},u=[];for(let e=0;e<o;e+=3){a?(l[0]=a.getX(e),l[1]=a.getX(e+1),l[2]=a.getX(e+2)):(l[0]=e,l[1]=e+1,l[2]=e+2);const{a:t,b:i,c:o}=ad;if(t.fromBufferAttribute(r,l[0]),i.fromBufferAttribute(r,l[1]),o.fromBufferAttribute(r,l[2]),ad.getNormal(sd),d[0]=Math.round(t.x*n)+","+Math.round(t.y*n)+","+Math.round(t.z*n),d[1]=Math.round(i.x*n)+","+Math.round(i.y*n)+","+Math.round(i.z*n),d[2]=Math.round(o.x*n)+","+Math.round(o.y*n)+","+Math.round(o.z*n),d[0]!==d[1]&&d[1]!==d[2]&&d[2]!==d[0])for(let e=0;e<3;e++){const t=(e+1)%3,i=d[e],n=d[t],a=ad[c[e]],r=ad[c[t]],o=i+"_"+n,p=n+"_"+i;p in h&&h[p]?(sd.dot(h[p].normal)<=s&&(u.push(a.x,a.y,a.z),u.push(r.x,r.y,r.z)),h[p]=null):o in h||(h[o]={index0:l[e],index1:l[t],normal:sd.clone()})}}for(const e in h)if(h[e]){const{index0:t,index1:i}=h[e];id.fromBufferAttribute(r,t),nd.fromBufferAttribute(r,i),u.push(id.x,id.y,id.z),u.push(nd.x,nd.y,nd.z)}this.setAttribute("position",new Us(u,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class od extends Kc{constructor(e){super(e),this.uuid=Mi(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,n=this.holes.length;i<n;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const i=e.holes[t];this.holes.push((new Kc).fromJSON(i))}return this}}const ld=function(e,t,i=2){const n=t&&t.length,s=n?t[0]*i:e.length;let a=cd(e,0,s,i,!0);const r=[];if(!a||a.next===a.prev)return r;let o,l,c,d,h,u,p;if(n&&(a=function(e,t,i,n){const s=[];let a,r,o,l,c;for(a=0,r=t.length;a<r;a++)o=t[a]*n,l=a<r-1?t[a+1]*n:e.length,c=cd(e,o,l,n,!1),c===c.next&&(c.steiner=!0),s.push(wd(c));for(s.sort(gd),a=0;a<s.length;a++)i=vd(s[a],i);return i}(e,t,a,i)),e.length>80*i){o=c=e[0],l=d=e[1];for(let t=i;t<s;t+=i)h=e[t],u=e[t+1],h<o&&(o=h),u<l&&(l=u),h>c&&(c=h),u>d&&(d=u);p=Math.max(c-o,d-l),p=0!==p?32767/p:0}return hd(a,r,i,o,l,p,0),r};function cd(e,t,i,n,s){let a,r;if(s===function(e,t,i,n){let s=0;for(let a=t,r=i-n;a<i;a+=n)s+=(e[r]-e[a])*(e[a+1]+e[r+1]),r=a;return s}(e,t,i,n)>0)for(a=t;a<i;a+=n)r=Ad(a,e[a],e[a+1],r);else for(a=i-n;a>=t;a-=n)r=Ad(a,e[a],e[a+1],r);return r&&Md(r,r.next)&&(Rd(r),r=r.next),r}function dd(e,t){if(!e)return e;t||(t=e);let i,n=e;do{if(i=!1,n.steiner||!Md(n,n.next)&&0!==Sd(n.prev,n,n.next))n=n.next;else{if(Rd(n),n=t=n.prev,n===n.next)break;i=!0}}while(i||n!==t);return t}function hd(e,t,i,n,s,a,r){if(!e)return;!r&&a&&function(e,t,i,n){let s=e;do{0===s.z&&(s.z=bd(s.x,s.y,t,i,n)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next}while(s!==e);s.prevZ.nextZ=null,s.prevZ=null,function(e){let t,i,n,s,a,r,o,l,c=1;do{for(i=e,e=null,a=null,r=0;i;){for(r++,n=i,o=0,t=0;t<c&&(o++,n=n.nextZ,n);t++);for(l=c;o>0||l>0&&n;)0!==o&&(0===l||!n||i.z<=n.z)?(s=i,i=i.nextZ,o--):(s=n,n=n.nextZ,l--),a?a.nextZ=s:e=s,s.prevZ=a,a=s;i=n}a.nextZ=null,c*=2}while(r>1)}(s)}(e,n,s,a);let o,l,c=e;for(;e.prev!==e.next;)if(o=e.prev,l=e.next,a?pd(e,n,s,a):ud(e))t.push(o.i/i|0),t.push(e.i/i|0),t.push(l.i/i|0),Rd(e),e=l.next,c=l.next;else if((e=l)===c){r?1===r?hd(e=fd(dd(e),t,i),t,i,n,s,a,2):2===r&&md(e,t,i,n,s,a):hd(dd(e),t,i,n,s,a,1);break}}function ud(e){const t=e.prev,i=e,n=e.next;if(Sd(t,i,n)>=0)return!1;const s=t.x,a=i.x,r=n.x,o=t.y,l=i.y,c=n.y,d=s<a?s<r?s:r:a<r?a:r,h=o<l?o<c?o:c:l<c?l:c,u=s>a?s>r?s:r:a>r?a:r,p=o>l?o>c?o:c:l>c?l:c;let f=n.next;for(;f!==t;){if(f.x>=d&&f.x<=u&&f.y>=h&&f.y<=p&&xd(s,o,a,l,r,c,f.x,f.y)&&Sd(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function pd(e,t,i,n){const s=e.prev,a=e,r=e.next;if(Sd(s,a,r)>=0)return!1;const o=s.x,l=a.x,c=r.x,d=s.y,h=a.y,u=r.y,p=o<l?o<c?o:c:l<c?l:c,f=d<h?d<u?d:u:h<u?h:u,m=o>l?o>c?o:c:l>c?l:c,g=d>h?d>u?d:u:h>u?h:u,v=bd(p,f,t,i,n),y=bd(m,g,t,i,n);let b=e.prevZ,w=e.nextZ;for(;b&&b.z>=v&&w&&w.z<=y;){if(b.x>=p&&b.x<=m&&b.y>=f&&b.y<=g&&b!==s&&b!==r&&xd(o,d,l,h,c,u,b.x,b.y)&&Sd(b.prev,b,b.next)>=0)return!1;if(b=b.prevZ,w.x>=p&&w.x<=m&&w.y>=f&&w.y<=g&&w!==s&&w!==r&&xd(o,d,l,h,c,u,w.x,w.y)&&Sd(w.prev,w,w.next)>=0)return!1;w=w.nextZ}for(;b&&b.z>=v;){if(b.x>=p&&b.x<=m&&b.y>=f&&b.y<=g&&b!==s&&b!==r&&xd(o,d,l,h,c,u,b.x,b.y)&&Sd(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;w&&w.z<=y;){if(w.x>=p&&w.x<=m&&w.y>=f&&w.y<=g&&w!==s&&w!==r&&xd(o,d,l,h,c,u,w.x,w.y)&&Sd(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function fd(e,t,i){let n=e;do{const s=n.prev,a=n.next.next;!Md(s,a)&&kd(s,n,n.next,a)&&Cd(s,a)&&Cd(a,s)&&(t.push(s.i/i|0),t.push(n.i/i|0),t.push(a.i/i|0),Rd(n),Rd(n.next),n=e=a),n=n.next}while(n!==e);return dd(n)}function md(e,t,i,n,s,a){let r=e;do{let e=r.next.next;for(;e!==r.prev;){if(r.i!==e.i&&(l=e,(o=r).next.i!==l.i&&o.prev.i!==l.i&&!function(e,t){let i=e;do{if(i.i!==e.i&&i.next.i!==e.i&&i.i!==t.i&&i.next.i!==t.i&&kd(i,i.next,e,t))return!0;i=i.next}while(i!==e);return!1}(o,l)&&(Cd(o,l)&&Cd(l,o)&&function(e,t){let i=e,n=!1;const s=(e.x+t.x)/2,a=(e.y+t.y)/2;do{i.y>a!=i.next.y>a&&i.next.y!==i.y&&s<(i.next.x-i.x)*(a-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next}while(i!==e);return n}(o,l)&&(Sd(o.prev,o,l.prev)||Sd(o,l.prev,l))||Md(o,l)&&Sd(o.prev,o,o.next)>0&&Sd(l.prev,l,l.next)>0))){let o=Id(r,e);return r=dd(r,r.next),o=dd(o,o.next),hd(r,t,i,n,s,a,0),void hd(o,t,i,n,s,a,0)}e=e.next}r=r.next}while(r!==e);var o,l}function gd(e,t){return e.x-t.x}function vd(e,t){const i=function(e,t){let i,n=t,s=-1/0;const a=e.x,r=e.y;do{if(r<=n.y&&r>=n.next.y&&n.next.y!==n.y){const e=n.x+(r-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(e<=a&&e>s&&(s=e,i=n.x<n.next.x?n:n.next,e===a))return i}n=n.next}while(n!==t);if(!i)return null;const o=i,l=i.x,c=i.y;let d,h=1/0;n=i;do{a>=n.x&&n.x>=l&&a!==n.x&&xd(r<c?a:s,r,l,c,r<c?s:a,r,n.x,n.y)&&(d=Math.abs(r-n.y)/(a-n.x),Cd(n,e)&&(d<h||d===h&&(n.x>i.x||n.x===i.x&&yd(i,n)))&&(i=n,h=d)),n=n.next}while(n!==o);return i}(e,t);if(!i)return t;const n=Id(i,e);return dd(n,n.next),dd(i,i.next)}function yd(e,t){return Sd(e.prev,e,t.prev)<0&&Sd(t.next,e,e.next)<0}function bd(e,t,i,n,s){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-i)*s|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*s|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function wd(e){let t=e,i=e;do{(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),t=t.next}while(t!==e);return i}function xd(e,t,i,n,s,a,r,o){return(s-r)*(t-o)>=(e-r)*(a-o)&&(e-r)*(n-o)>=(i-r)*(t-o)&&(i-r)*(a-o)>=(s-r)*(n-o)}function Sd(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function Md(e,t){return e.x===t.x&&e.y===t.y}function kd(e,t,i,n){const s=Td(Sd(e,t,i)),a=Td(Sd(e,t,n)),r=Td(Sd(i,n,e)),o=Td(Sd(i,n,t));return s!==a&&r!==o||(!(0!==s||!_d(e,i,t))||(!(0!==a||!_d(e,n,t))||(!(0!==r||!_d(i,e,n))||!(0!==o||!_d(i,t,n)))))}function _d(e,t,i){return t.x<=Math.max(e.x,i.x)&&t.x>=Math.min(e.x,i.x)&&t.y<=Math.max(e.y,i.y)&&t.y>=Math.min(e.y,i.y)}function Td(e){return e>0?1:e<0?-1:0}function Cd(e,t){return Sd(e.prev,e,e.next)<0?Sd(e,t,e.next)>=0&&Sd(e,e.prev,t)>=0:Sd(e,t,e.prev)<0||Sd(e,e.next,t)<0}function Id(e,t){const i=new Pd(e.i,e.x,e.y),n=new Pd(t.i,t.x,t.y),s=e.next,a=t.prev;return e.next=t,t.prev=e,i.next=s,s.prev=i,n.next=i,i.prev=n,a.next=n,n.prev=a,n}function Ad(e,t,i,n){const s=new Pd(e,t,i);return n?(s.next=n.next,s.prev=n,n.next.prev=s,n.next=s):(s.prev=s,s.next=s),s}function Rd(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Pd(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}class Ed{static area(e){const t=e.length;let i=0;for(let n=t-1,s=0;s<t;n=s++)i+=e[n].x*e[s].y-e[s].x*e[n].y;return.5*i}static isClockWise(e){return Ed.area(e)<0}static triangulateShape(e,t){const i=[],n=[],s=[];Dd(e),Od(i,e);let a=e.length;t.forEach(Dd);for(let e=0;e<t.length;e++)n.push(a),a+=t[e].length,Od(i,t[e]);const r=ld(i,n);for(let e=0;e<r.length;e+=3)s.push(r.slice(e,e+3));return s}}function Dd(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function Od(e,t){for(let i=0;i<t.length;i++)e.push(t[i].x),e.push(t[i].y)}class Ld extends Js{constructor(e=new od([new Di(.5,.5),new Di(-.5,.5),new Di(-.5,-.5),new Di(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,n=[],s=[];for(let t=0,i=e.length;t<i;t++){a(e[t])}function a(e){const a=[],r=void 0!==t.curveSegments?t.curveSegments:12,o=void 0!==t.steps?t.steps:1,l=void 0!==t.depth?t.depth:1;let c=void 0===t.bevelEnabled||t.bevelEnabled,d=void 0!==t.bevelThickness?t.bevelThickness:.2,h=void 0!==t.bevelSize?t.bevelSize:d-.1,u=void 0!==t.bevelOffset?t.bevelOffset:0,p=void 0!==t.bevelSegments?t.bevelSegments:3;const f=t.extrudePath,m=void 0!==t.UVGenerator?t.UVGenerator:jd;let g,v,y,b,w,x=!1;f&&(g=f.getSpacedPoints(o),x=!0,c=!1,v=f.computeFrenetFrames(o,!1),y=new Hi,b=new Hi,w=new Hi),c||(p=0,d=0,h=0,u=0);const S=e.extractPoints(r);let M=S.shape;const k=S.holes;if(!Ed.isClockWise(M)){M=M.reverse();for(let e=0,t=k.length;e<t;e++){const t=k[e];Ed.isClockWise(t)&&(k[e]=t.reverse())}}const _=Ed.triangulateShape(M,k),T=M;for(let e=0,t=k.length;e<t;e++){const t=k[e];M=M.concat(t)}function C(e,t,i){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().addScaledVector(t,i)}const I=M.length,A=_.length;function R(e,t,i){let n,s,a;const r=e.x-t.x,o=e.y-t.y,l=i.x-e.x,c=i.y-e.y,d=r*r+o*o,h=r*c-o*l;if(Math.abs(h)>Number.EPSILON){const h=Math.sqrt(d),u=Math.sqrt(l*l+c*c),p=t.x-o/h,f=t.y+r/h,m=((i.x-c/u-p)*c-(i.y+l/u-f)*l)/(r*c-o*l);n=p+r*m-e.x,s=f+o*m-e.y;const g=n*n+s*s;if(g<=2)return new Di(n,s);a=Math.sqrt(g/2)}else{let e=!1;r>Number.EPSILON?l>Number.EPSILON&&(e=!0):r<-Number.EPSILON?l<-Number.EPSILON&&(e=!0):Math.sign(o)===Math.sign(c)&&(e=!0),e?(n=-o,s=r,a=Math.sqrt(d)):(n=r,s=o,a=Math.sqrt(d/2))}return new Di(n/a,s/a)}const P=[];for(let e=0,t=T.length,i=t-1,n=e+1;e<t;e++,i++,n++)i===t&&(i=0),n===t&&(n=0),P[e]=R(T[e],T[i],T[n]);const E=[];let D,O=P.concat();for(let e=0,t=k.length;e<t;e++){const t=k[e];D=[];for(let e=0,i=t.length,n=i-1,s=e+1;e<i;e++,n++,s++)n===i&&(n=0),s===i&&(s=0),D[e]=R(t[e],t[n],t[s]);E.push(D),O=O.concat(D)}for(let e=0;e<p;e++){const t=e/p,i=d*Math.cos(t*Math.PI/2),n=h*Math.sin(t*Math.PI/2)+u;for(let e=0,t=T.length;e<t;e++){const t=C(T[e],P[e],n);z(t.x,t.y,-i)}for(let e=0,t=k.length;e<t;e++){const t=k[e];D=E[e];for(let e=0,s=t.length;e<s;e++){const s=C(t[e],D[e],n);z(s.x,s.y,-i)}}}const L=h+u;for(let e=0;e<I;e++){const t=c?C(M[e],O[e],L):M[e];x?(b.copy(v.normals[0]).multiplyScalar(t.x),y.copy(v.binormals[0]).multiplyScalar(t.y),w.copy(g[0]).add(b).add(y),z(w.x,w.y,w.z)):z(t.x,t.y,0)}for(let e=1;e<=o;e++)for(let t=0;t<I;t++){const i=c?C(M[t],O[t],L):M[t];x?(b.copy(v.normals[e]).multiplyScalar(i.x),y.copy(v.binormals[e]).multiplyScalar(i.y),w.copy(g[e]).add(b).add(y),z(w.x,w.y,w.z)):z(i.x,i.y,l/o*e)}for(let e=p-1;e>=0;e--){const t=e/p,i=d*Math.cos(t*Math.PI/2),n=h*Math.sin(t*Math.PI/2)+u;for(let e=0,t=T.length;e<t;e++){const t=C(T[e],P[e],n);z(t.x,t.y,l+i)}for(let e=0,t=k.length;e<t;e++){const t=k[e];D=E[e];for(let e=0,s=t.length;e<s;e++){const s=C(t[e],D[e],n);x?z(s.x,s.y+g[o-1].y,g[o-1].x+i):z(s.x,s.y,l+i)}}}function j(e,t){let i=e.length;for(;--i>=0;){const n=i;let s=i-1;s<0&&(s=e.length-1);for(let e=0,i=o+2*p;e<i;e++){const i=I*e,a=I*(e+1);N(t+n+i,t+s+i,t+s+a,t+n+a)}}}function z(e,t,i){a.push(e),a.push(t),a.push(i)}function B(e,t,s){F(e),F(t),F(s);const a=n.length/3,r=m.generateTopUV(i,n,a-3,a-2,a-1);H(r[0]),H(r[1]),H(r[2])}function N(e,t,s,a){F(e),F(t),F(a),F(t),F(s),F(a);const r=n.length/3,o=m.generateSideWallUV(i,n,r-6,r-3,r-2,r-1);H(o[0]),H(o[1]),H(o[3]),H(o[1]),H(o[2]),H(o[3])}function F(e){n.push(a[3*e+0]),n.push(a[3*e+1]),n.push(a[3*e+2])}function H(e){s.push(e.x),s.push(e.y)}!function(){const e=n.length/3;if(c){let e=0,t=I*e;for(let e=0;e<A;e++){const i=_[e];B(i[2]+t,i[1]+t,i[0]+t)}e=o+2*p,t=I*e;for(let e=0;e<A;e++){const i=_[e];B(i[0]+t,i[1]+t,i[2]+t)}}else{for(let e=0;e<A;e++){const t=_[e];B(t[2],t[1],t[0])}for(let e=0;e<A;e++){const t=_[e];B(t[0]+I*o,t[1]+I*o,t[2]+I*o)}}i.addGroup(e,n.length/3-e,0)}(),function(){const e=n.length/3;let t=0;j(T,t),t+=T.length;for(let e=0,i=k.length;e<i;e++){const i=k[e];j(i,t),t+=i.length}i.addGroup(e,n.length/3-e,1)}()}this.setAttribute("position",new Us(n,3)),this.setAttribute("uv",new Us(s,2)),this.computeVertexNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return function(e,t,i){if(i.shapes=[],Array.isArray(e))for(let t=0,n=e.length;t<n;t++){const n=e[t];i.shapes.push(n.uuid)}else i.shapes.push(e.uuid);i.options=Object.assign({},t),void 0!==t.extrudePath&&(i.options.extrudePath=t.extrudePath.toJSON());return i}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const i=[];for(let n=0,s=e.shapes.length;n<s;n++){const s=t[e.shapes[n]];i.push(s)}const n=e.options.extrudePath;return void 0!==n&&(e.options.extrudePath=(new qc[n.type]).fromJSON(n)),new Ld(i,e.options)}}const jd={generateTopUV:function(e,t,i,n,s){const a=t[3*i],r=t[3*i+1],o=t[3*n],l=t[3*n+1],c=t[3*s],d=t[3*s+1];return[new Di(a,r),new Di(o,l),new Di(c,d)]},generateSideWallUV:function(e,t,i,n,s,a){const r=t[3*i],o=t[3*i+1],l=t[3*i+2],c=t[3*n],d=t[3*n+1],h=t[3*n+2],u=t[3*s],p=t[3*s+1],f=t[3*s+2],m=t[3*a],g=t[3*a+1],v=t[3*a+2];return Math.abs(o-d)<Math.abs(r-c)?[new Di(r,1-l),new Di(c,1-h),new Di(u,1-f),new Di(m,1-v)]:[new Di(o,1-l),new Di(d,1-h),new Di(p,1-f),new Di(g,1-v)]}};class zd extends ed{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2;super([-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new zd(e.radius,e.detail)}}class Bd extends ed{constructor(e=1,t=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Bd(e.radius,e.detail)}}class Nd extends Js{constructor(e=.5,t=1,i=32,n=1,s=0,a=2*Math.PI){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:n,thetaStart:s,thetaLength:a},i=Math.max(3,i);const r=[],o=[],l=[],c=[];let d=e;const h=(t-e)/(n=Math.max(1,n)),u=new Hi,p=new Di;for(let e=0;e<=n;e++){for(let e=0;e<=i;e++){const n=s+e/i*a;u.x=d*Math.cos(n),u.y=d*Math.sin(n),o.push(u.x,u.y,u.z),l.push(0,0,1),p.x=(u.x/t+1)/2,p.y=(u.y/t+1)/2,c.push(p.x,p.y)}d+=h}for(let e=0;e<n;e++){const t=e*(i+1);for(let e=0;e<i;e++){const n=e+t,s=n,a=n+i+1,o=n+i+2,l=n+1;r.push(s,a,l),r.push(a,o,l)}}this.setIndex(r),this.setAttribute("position",new Us(o,3)),this.setAttribute("normal",new Us(l,3)),this.setAttribute("uv",new Us(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Nd(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Fd extends Js{constructor(e=new od([new Di(0,.5),new Di(-.5,-.5),new Di(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],n=[],s=[],a=[];let r=0,o=0;if(!1===Array.isArray(e))l(e);else for(let t=0;t<e.length;t++)l(e[t]),this.addGroup(r,o,t),r+=o,o=0;function l(e){const r=n.length/3,l=e.extractPoints(t);let c=l.shape;const d=l.holes;!1===Ed.isClockWise(c)&&(c=c.reverse());for(let e=0,t=d.length;e<t;e++){const t=d[e];!0===Ed.isClockWise(t)&&(d[e]=t.reverse())}const h=Ed.triangulateShape(c,d);for(let e=0,t=d.length;e<t;e++){const t=d[e];c=c.concat(t)}for(let e=0,t=c.length;e<t;e++){const t=c[e];n.push(t.x,t.y,0),s.push(0,0,1),a.push(t.x,t.y)}for(let e=0,t=h.length;e<t;e++){const t=h[e],n=t[0]+r,s=t[1]+r,a=t[2]+r;i.push(n,s,a),o+=3}}this.setIndex(i),this.setAttribute("position",new Us(n,3)),this.setAttribute("normal",new Us(s,3)),this.setAttribute("uv",new Us(a,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return function(e,t){if(t.shapes=[],Array.isArray(e))for(let i=0,n=e.length;i<n;i++){const n=e[i];t.shapes.push(n.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}static fromJSON(e,t){const i=[];for(let n=0,s=e.shapes.length;n<s;n++){const s=t[e.shapes[n]];i.push(s)}return new Fd(i,e.curveSegments)}}class Hd extends Js{constructor(e=1,t=32,i=16,n=0,s=2*Math.PI,a=0,r=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:n,phiLength:s,thetaStart:a,thetaLength:r},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const o=Math.min(a+r,Math.PI);let l=0;const c=[],d=new Hi,h=new Hi,u=[],p=[],f=[],m=[];for(let u=0;u<=i;u++){const g=[],v=u/i;let y=0;0==u&&0==a?y=.5/t:u==i&&o==Math.PI&&(y=-.5/t);for(let i=0;i<=t;i++){const o=i/t;d.x=-e*Math.cos(n+o*s)*Math.sin(a+v*r),d.y=e*Math.cos(a+v*r),d.z=e*Math.sin(n+o*s)*Math.sin(a+v*r),p.push(d.x,d.y,d.z),h.copy(d).normalize(),f.push(h.x,h.y,h.z),m.push(o+y,1-v),g.push(l++)}c.push(g)}for(let e=0;e<i;e++)for(let n=0;n<t;n++){const t=c[e][n+1],s=c[e][n],r=c[e+1][n],l=c[e+1][n+1];(0!==e||a>0)&&u.push(t,s,l),(e!==i-1||o<Math.PI)&&u.push(s,r,l)}this.setIndex(u),this.setAttribute("position",new Us(p,3)),this.setAttribute("normal",new Us(f,3)),this.setAttribute("uv",new Us(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Hd(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Ud extends ed{constructor(e=1,t=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Ud(e.radius,e.detail)}}class Vd extends Js{constructor(e=1,t=.4,i=12,n=48,s=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:n,arc:s},i=Math.floor(i),n=Math.floor(n);const a=[],r=[],o=[],l=[],c=new Hi,d=new Hi,h=new Hi;for(let a=0;a<=i;a++)for(let u=0;u<=n;u++){const p=u/n*s,f=a/i*Math.PI*2;d.x=(e+t*Math.cos(f))*Math.cos(p),d.y=(e+t*Math.cos(f))*Math.sin(p),d.z=t*Math.sin(f),r.push(d.x,d.y,d.z),c.x=e*Math.cos(p),c.y=e*Math.sin(p),h.subVectors(d,c).normalize(),o.push(h.x,h.y,h.z),l.push(u/n),l.push(a/i)}for(let e=1;e<=i;e++)for(let t=1;t<=n;t++){const i=(n+1)*e+t-1,s=(n+1)*(e-1)+t-1,r=(n+1)*(e-1)+t,o=(n+1)*e+t;a.push(i,s,o),a.push(s,r,o)}this.setIndex(a),this.setAttribute("position",new Us(r,3)),this.setAttribute("normal",new Us(o,3)),this.setAttribute("uv",new Us(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Vd(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Gd extends Js{constructor(e=1,t=.4,i=64,n=8,s=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:n,p:s,q:a},i=Math.floor(i),n=Math.floor(n);const r=[],o=[],l=[],c=[],d=new Hi,h=new Hi,u=new Hi,p=new Hi,f=new Hi,m=new Hi,g=new Hi;for(let r=0;r<=i;++r){const y=r/i*s*Math.PI*2;v(y,s,a,e,u),v(y+.01,s,a,e,p),m.subVectors(p,u),g.addVectors(p,u),f.crossVectors(m,g),g.crossVectors(f,m),f.normalize(),g.normalize();for(let e=0;e<=n;++e){const s=e/n*Math.PI*2,a=-t*Math.cos(s),p=t*Math.sin(s);d.x=u.x+(a*g.x+p*f.x),d.y=u.y+(a*g.y+p*f.y),d.z=u.z+(a*g.z+p*f.z),o.push(d.x,d.y,d.z),h.subVectors(d,u).normalize(),l.push(h.x,h.y,h.z),c.push(r/i),c.push(e/n)}}for(let e=1;e<=i;e++)for(let t=1;t<=n;t++){const i=(n+1)*(e-1)+(t-1),s=(n+1)*e+(t-1),a=(n+1)*e+t,o=(n+1)*(e-1)+t;r.push(i,s,o),r.push(s,a,o)}function v(e,t,i,n,s){const a=Math.cos(e),r=Math.sin(e),o=i/t*e,l=Math.cos(o);s.x=n*(2+l)*.5*a,s.y=n*(2+l)*r*.5,s.z=n*Math.sin(o)*.5}this.setIndex(r),this.setAttribute("position",new Us(o,3)),this.setAttribute("normal",new Us(l,3)),this.setAttribute("uv",new Us(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Gd(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Wd extends Js{constructor(e=new Gc(new Hi(-1,-1,0),new Hi(-1,1,0),new Hi(1,1,0)),t=64,i=1,n=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:n,closed:s};const a=e.computeFrenetFrames(t,s);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const r=new Hi,o=new Hi,l=new Di;let c=new Hi;const d=[],h=[],u=[],p=[];function f(s){c=e.getPointAt(s/t,c);const l=a.normals[s],u=a.binormals[s];for(let e=0;e<=n;e++){const t=e/n*Math.PI*2,s=Math.sin(t),a=-Math.cos(t);o.x=a*l.x+s*u.x,o.y=a*l.y+s*u.y,o.z=a*l.z+s*u.z,o.normalize(),h.push(o.x,o.y,o.z),r.x=c.x+i*o.x,r.y=c.y+i*o.y,r.z=c.z+i*o.z,d.push(r.x,r.y,r.z)}}!function(){for(let e=0;e<t;e++)f(e);f(!1===s?t:0),function(){for(let e=0;e<=t;e++)for(let i=0;i<=n;i++)l.x=e/t,l.y=i/n,u.push(l.x,l.y)}(),function(){for(let e=1;e<=t;e++)for(let t=1;t<=n;t++){const i=(n+1)*(e-1)+(t-1),s=(n+1)*e+(t-1),a=(n+1)*e+t,r=(n+1)*(e-1)+t;p.push(i,s,r),p.push(s,a,r)}}()}(),this.setIndex(p),this.setAttribute("position",new Us(d,3)),this.setAttribute("normal",new Us(h,3)),this.setAttribute("uv",new Us(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Wd((new qc[e.path.type]).fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class qd extends Js{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},null!==e){const t=[],i=new Set,n=new Hi,s=new Hi;if(null!==e.index){const a=e.attributes.position,r=e.index;let o=e.groups;0===o.length&&(o=[{start:0,count:r.count,materialIndex:0}]);for(let e=0,l=o.length;e<l;++e){const l=o[e],c=l.start;for(let e=c,o=c+l.count;e<o;e+=3)for(let o=0;o<3;o++){const l=r.getX(e+o),c=r.getX(e+(o+1)%3);n.fromBufferAttribute(a,l),s.fromBufferAttribute(a,c),!0===Yd(n,s,i)&&(t.push(n.x,n.y,n.z),t.push(s.x,s.y,s.z))}}}else{const a=e.attributes.position;for(let e=0,r=a.count/3;e<r;e++)for(let r=0;r<3;r++){const o=3*e+r,l=3*e+(r+1)%3;n.fromBufferAttribute(a,o),s.fromBufferAttribute(a,l),!0===Yd(n,s,i)&&(t.push(n.x,n.y,n.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new Us(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function Yd(e,t,i){const n=e.x+","+e.y+","+e.z+"-"+t.x+","+t.y+","+t.z,s=t.x+","+t.y+","+t.z+"-"+e.x+","+e.y+","+e.z;return!0!==i.has(n)&&!0!==i.has(s)&&(i.add(n),i.add(s),!0)}var Kd=Object.freeze({__proto__:null,BoxGeometry:fa,CapsuleGeometry:Zc,CircleGeometry:Jc,ConeGeometry:$c,CylinderGeometry:Qc,DodecahedronGeometry:td,EdgesGeometry:rd,ExtrudeGeometry:Ld,IcosahedronGeometry:zd,LatheGeometry:Xc,OctahedronGeometry:Bd,PlaneGeometry:La,PolyhedronGeometry:ed,RingGeometry:Nd,ShapeGeometry:Fd,SphereGeometry:Hd,TetrahedronGeometry:Ud,TorusGeometry:Vd,TorusKnotGeometry:Gd,TubeGeometry:Wd,WireframeGeometry:qd});class Xd extends Ms{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Is(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class Zd extends ba{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Jd extends Ms{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Is(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Is(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Bt,this.normalScale=new Di(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Qd extends Jd{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Di(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return ki(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Is(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Is(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Is(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class $d extends Ms{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Is(16777215),this.specular=new Is(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Is(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Bt,this.normalScale=new Di(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=K,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class eh extends Ms{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Is(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Is(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Bt,this.normalScale=new Di(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class th extends Ms{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Bt,this.normalScale=new Di(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class ih extends Ms{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Is(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Is(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Bt,this.normalScale=new Di(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=K,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class nh extends Ms{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Is(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Bt,this.normalScale=new Di(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class sh extends sc{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function ah(e,t,i){return oh(e)?new e.constructor(e.subarray(t,void 0!==i?i:e.length)):e.slice(t,i)}function rh(e,t,i){return!e||!i&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)}function oh(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function lh(e){const t=e.length,i=new Array(t);for(let e=0;e!==t;++e)i[e]=e;return i.sort((function(t,i){return e[t]-e[i]})),i}function ch(e,t,i){const n=e.length,s=new e.constructor(n);for(let a=0,r=0;r!==n;++a){const n=i[a]*t;for(let i=0;i!==t;++i)s[r++]=e[n+i]}return s}function dh(e,t,i,n){let s=1,a=e[0];for(;void 0!==a&&void 0===a[n];)a=e[s++];if(void 0===a)return;let r=a[n];if(void 0!==r)if(Array.isArray(r))do{r=a[n],void 0!==r&&(t.push(a.time),i.push.apply(i,r)),a=e[s++]}while(void 0!==a);else if(void 0!==r.toArray)do{r=a[n],void 0!==r&&(t.push(a.time),r.toArray(i,i.length)),a=e[s++]}while(void 0!==a);else do{r=a[n],void 0!==r&&(t.push(a.time),i.push(r)),a=e[s++]}while(void 0!==a)}const hh={arraySlice:ah,convertArray:rh,isTypedArray:oh,getKeyframeOrder:lh,sortedArray:ch,flattenJSON:dh,subclip:function(e,t,i,n,s=30){const a=e.clone();a.name=t;const r=[];for(let e=0;e<a.tracks.length;++e){const t=a.tracks[e],o=t.getValueSize(),l=[],c=[];for(let e=0;e<t.times.length;++e){const a=t.times[e]*s;if(!(a<i||a>=n)){l.push(t.times[e]);for(let i=0;i<o;++i)c.push(t.values[e*o+i])}}0!==l.length&&(t.times=rh(l,t.times.constructor),t.values=rh(c,t.values.constructor),r.push(t))}a.tracks=r;let o=1/0;for(let e=0;e<a.tracks.length;++e)o>a.tracks[e].times[0]&&(o=a.tracks[e].times[0]);for(let e=0;e<a.tracks.length;++e)a.tracks[e].shift(-1*o);return a.resetDuration(),a},makeClipAdditive:function(e,t=0,i=e,n=30){n<=0&&(n=30);const s=i.tracks.length,a=t/n;for(let t=0;t<s;++t){const n=i.tracks[t],s=n.ValueTypeName;if("bool"===s||"string"===s)continue;const r=e.tracks.find((function(e){return e.name===n.name&&e.ValueTypeName===s}));if(void 0===r)continue;let o=0;const l=n.getValueSize();n.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(o=l/3);let c=0;const d=r.getValueSize();r.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=d/3);const h=n.times.length-1;let u;if(a<=n.times[0]){const e=o,t=l-o;u=ah(n.values,e,t)}else if(a>=n.times[h]){const e=h*l+o,t=e+l-o;u=ah(n.values,e,t)}else{const e=n.createInterpolant(),t=o,i=l-o;e.evaluate(a),u=ah(e.resultBuffer,t,i)}if("quaternion"===s){(new Fi).fromArray(u).normalize().conjugate().toArray(u)}const p=r.times.length;for(let e=0;e<p;++e){const t=e*d+c;if("quaternion"===s)Fi.multiplyQuaternionsFlat(r.values,t,u,0,r.values,t);else{const e=d-2*c;for(let i=0;i<e;++i)r.values[t+i]-=u[i]}}}return e.blendMode=Rt,e}};class uh{constructor(e,t,i,n){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==n?n:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,n=t[i],s=t[i-1];e:{t:{let a;i:{n:if(e>=n){for(let a=i+2;;){if(void 0===n){if(e<s)break n;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=n,n=t[++i],e<n)break t}a=t.length;break i}if(!(e<s))break e;{const r=t[1];e<r&&(i=2,s=r);for(let a=i-2;;){if(void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(i===a)break;if(n=s,s=t[--i-1],e>=s)break t}a=i,i=0}}for(;i<a;){const n=i+a>>>1;e<t[n]?a=n:i=n+1}if(n=t[i],s=t[i-1],void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===n)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,n)}return this.interpolate_(i,s,e,n)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,n=this.valueSize,s=e*n;for(let e=0;e!==n;++e)t[e]=i[s+e];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class ph extends uh{constructor(e,t,i,n){super(e,t,i,n),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Tt,endingEnd:Tt}}intervalChanged_(e,t,i){const n=this.parameterPositions;let s=e-2,a=e+1,r=n[s],o=n[a];if(void 0===r)switch(this.getSettings_().endingStart){case Ct:s=e,r=2*t-i;break;case It:s=n.length-2,r=t+n[s]-n[s+1];break;default:s=e,r=i}if(void 0===o)switch(this.getSettings_().endingEnd){case Ct:a=e,o=2*i-t;break;case It:a=1,o=i+n[1]-n[0];break;default:a=e-1,o=t}const l=.5*(i-t),c=this.valueSize;this._weightPrev=l/(t-r),this._weightNext=l/(o-i),this._offsetPrev=s*c,this._offsetNext=a*c}interpolate_(e,t,i,n){const s=this.resultBuffer,a=this.sampleValues,r=this.valueSize,o=e*r,l=o-r,c=this._offsetPrev,d=this._offsetNext,h=this._weightPrev,u=this._weightNext,p=(i-t)/(n-t),f=p*p,m=f*p,g=-h*m+2*h*f-h*p,v=(1+h)*m+(-1.5-2*h)*f+(-.5+h)*p+1,y=(-1-u)*m+(1.5+u)*f+.5*p,b=u*m-u*f;for(let e=0;e!==r;++e)s[e]=g*a[c+e]+v*a[l+e]+y*a[o+e]+b*a[d+e];return s}}class fh extends uh{constructor(e,t,i,n){super(e,t,i,n)}interpolate_(e,t,i,n){const s=this.resultBuffer,a=this.sampleValues,r=this.valueSize,o=e*r,l=o-r,c=(i-t)/(n-t),d=1-c;for(let e=0;e!==r;++e)s[e]=a[l+e]*d+a[o+e]*c;return s}}class mh extends uh{constructor(e,t,i,n){super(e,t,i,n)}interpolate_(e){return this.copySampleValue_(e-1)}}class gh{constructor(e,t,i,n){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=rh(t,this.TimeBufferType),this.values=rh(i,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:rh(e.times,Array),values:rh(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(i.interpolation=t)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new mh(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new fh(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new ph(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Mt:t=this.InterpolantFactoryMethodDiscrete;break;case kt:t=this.InterpolantFactoryMethodLinear;break;case _t:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Mt;case this.InterpolantFactoryMethodLinear:return kt;case this.InterpolantFactoryMethodSmooth:return _t}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let i=0,n=t.length;i!==n;++i)t[i]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let i=0,n=t.length;i!==n;++i)t[i]*=e}return this}trim(e,t){const i=this.times,n=i.length;let s=0,a=n-1;for(;s!==n&&i[s]<e;)++s;for(;-1!==a&&i[a]>t;)--a;if(++a,0!==s||a!==n){s>=a&&(a=Math.max(a,1),s=a-1);const e=this.getValueSize();this.times=ah(i,s,a),this.values=ah(this.values,s*e,a*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,n=this.values,s=i.length;0===s&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let t=0;t!==s;t++){const n=i[t];if("number"==typeof n&&isNaN(n)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,t,n),e=!1;break}if(null!==a&&a>n){console.error("THREE.KeyframeTrack: Out of order keys.",this,t,n,a),e=!1;break}a=n}if(void 0!==n&&oh(n))for(let t=0,i=n.length;t!==i;++t){const i=n[t];if(isNaN(i)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,t,i),e=!1;break}}return e}optimize(){const e=ah(this.times),t=ah(this.values),i=this.getValueSize(),n=this.getInterpolation()===_t,s=e.length-1;let a=1;for(let r=1;r<s;++r){let s=!1;const o=e[r];if(o!==e[r+1]&&(1!==r||o!==e[0]))if(n)s=!0;else{const e=r*i,n=e-i,a=e+i;for(let r=0;r!==i;++r){const i=t[e+r];if(i!==t[n+r]||i!==t[a+r]){s=!0;break}}}if(s){if(r!==a){e[a]=e[r];const n=r*i,s=a*i;for(let e=0;e!==i;++e)t[s+e]=t[n+e]}++a}}if(s>0){e[a]=e[s];for(let e=s*i,n=a*i,r=0;r!==i;++r)t[n+r]=t[e+r];++a}return a!==e.length?(this.times=ah(e,0,a),this.values=ah(t,0,a*i)):(this.times=e,this.values=t),this}clone(){const e=ah(this.times,0),t=ah(this.values,0),i=new(0,this.constructor)(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}gh.prototype.TimeBufferType=Float32Array,gh.prototype.ValueBufferType=Float32Array,gh.prototype.DefaultInterpolation=kt;class vh extends gh{}vh.prototype.ValueTypeName="bool",vh.prototype.ValueBufferType=Array,vh.prototype.DefaultInterpolation=Mt,vh.prototype.InterpolantFactoryMethodLinear=void 0,vh.prototype.InterpolantFactoryMethodSmooth=void 0;class yh extends gh{}yh.prototype.ValueTypeName="color";class bh extends gh{}bh.prototype.ValueTypeName="number";class wh extends uh{constructor(e,t,i,n){super(e,t,i,n)}interpolate_(e,t,i,n){const s=this.resultBuffer,a=this.sampleValues,r=this.valueSize,o=(i-t)/(n-t);let l=e*r;for(let e=l+r;l!==e;l+=4)Fi.slerpFlat(s,0,a,l-r,a,l,o);return s}}class xh extends gh{InterpolantFactoryMethodLinear(e){return new wh(this.times,this.values,this.getValueSize(),e)}}xh.prototype.ValueTypeName="quaternion",xh.prototype.DefaultInterpolation=kt,xh.prototype.InterpolantFactoryMethodSmooth=void 0;class Sh extends gh{}Sh.prototype.ValueTypeName="string",Sh.prototype.ValueBufferType=Array,Sh.prototype.DefaultInterpolation=Mt,Sh.prototype.InterpolantFactoryMethodLinear=void 0,Sh.prototype.InterpolantFactoryMethodSmooth=void 0;class Mh extends gh{}Mh.prototype.ValueTypeName="vector";class kh{constructor(e,t=-1,i,n=At){this.name=e,this.tracks=i,this.duration=t,this.blendMode=n,this.uuid=Mi(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,n=1/(e.fps||1);for(let e=0,s=i.length;e!==s;++e)t.push(_h(i[e]).scale(n));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,n={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let e=0,n=i.length;e!==n;++e)t.push(gh.toJSON(i[e]));return n}static CreateFromMorphTargetSequence(e,t,i,n){const s=t.length,a=[];for(let e=0;e<s;e++){let r=[],o=[];r.push((e+s-1)%s,e,(e+1)%s),o.push(0,1,0);const l=lh(r);r=ch(r,1,l),o=ch(o,1,l),n||0!==r[0]||(r.push(s),o.push(o[0])),a.push(new bh(".morphTargetInfluences["+t[e].name+"]",r,o).scale(1/i))}return new this(e,-1,a)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const t=e;i=t.geometry&&t.geometry.animations||t.animations}for(let e=0;e<i.length;e++)if(i[e].name===t)return i[e];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const n={},s=/^([\w-]*?)([\d]+)$/;for(let t=0,i=e.length;t<i;t++){const i=e[t],a=i.name.match(s);if(a&&a.length>1){const e=a[1];let t=n[e];t||(n[e]=t=[]),t.push(i)}}const a=[];for(const e in n)a.push(this.CreateFromMorphTargetSequence(e,n[e],t,i));return a}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(e,t,i,n,s){if(0!==i.length){const a=[],r=[];dh(i,a,r,n),0!==a.length&&s.push(new e(t,a,r))}},n=[],s=e.name||"default",a=e.fps||30,r=e.blendMode;let o=e.length||-1;const l=e.hierarchy||[];for(let e=0;e<l.length;e++){const s=l[e].keys;if(s&&0!==s.length)if(s[0].morphTargets){const e={};let t;for(t=0;t<s.length;t++)if(s[t].morphTargets)for(let i=0;i<s[t].morphTargets.length;i++)e[s[t].morphTargets[i]]=-1;for(const i in e){const e=[],a=[];for(let n=0;n!==s[t].morphTargets.length;++n){const n=s[t];e.push(n.time),a.push(n.morphTarget===i?1:0)}n.push(new bh(".morphTargetInfluence["+i+"]",e,a))}o=e.length*a}else{const a=".bones["+t[e].name+"]";i(Mh,a+".position",s,"pos",n),i(xh,a+".quaternion",s,"rot",n),i(Mh,a+".scale",s,"scl",n)}}if(0===n.length)return null;return new this(s,o,n,r)}resetDuration(){let e=0;for(let t=0,i=this.tracks.length;t!==i;++t){const i=this.tracks[t];e=Math.max(e,i.times[i.times.length-1])}return this.duration=e,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function _h(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return bh;case"vector":case"vector2":case"vector3":case"vector4":return Mh;case"color":return yh;case"quaternion":return xh;case"bool":case"boolean":return vh;case"string":return Sh}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){const t=[],i=[];dh(e.keys,t,i,"value"),e.times=t,e.values=i}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}const Th={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};class Ch{constructor(e,t,i){const n=this;let s,a=!1,r=0,o=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(e){o++,!1===a&&void 0!==n.onStart&&n.onStart(e,r,o),a=!0},this.itemEnd=function(e){r++,void 0!==n.onProgress&&n.onProgress(e,r,o),r===o&&(a=!1,void 0!==n.onLoad&&n.onLoad())},this.itemError=function(e){void 0!==n.onError&&n.onError(e)},this.resolveURL=function(e){return s?s(e):e},this.setURLModifier=function(e){return s=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){const t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,i=l.length;t<i;t+=2){const i=l[t],n=l[t+1];if(i.global&&(i.lastIndex=0),i.test(e))return n}return null}}}const Ih=new Ch;class Ah{constructor(e){this.manager=void 0!==e?e:Ih,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise((function(n,s){i.load(e,n,t,s)}))}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Rh={};class Ph extends Error{constructor(e,t){super(e),this.response=t}}class Eh extends Ah{constructor(e){super(e)}load(e="",t,i,n){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Th.get(e);if(void 0!==s)return this.manager.itemStart(e),setTimeout((()=>{t&&t(s),this.manager.itemEnd(e)}),0),s;if(void 0!==Rh[e])return void Rh[e].push({onLoad:t,onProgress:i,onError:n});Rh[e]=[],Rh[e].push({onLoad:t,onProgress:i,onError:n});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),r=this.mimeType,o=this.responseType;fetch(a).then((t=>{if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;const i=Rh[e],n=t.body.getReader(),s=t.headers.get("Content-Length")||t.headers.get("X-File-Size"),a=s?parseInt(s):0,r=0!==a;let o=0;const l=new ReadableStream({start(e){!function t(){n.read().then((({done:n,value:s})=>{if(n)e.close();else{o+=s.byteLength;const n=new ProgressEvent("progress",{lengthComputable:r,loaded:o,total:a});for(let e=0,t=i.length;e<t;e++){const t=i[e];t.onProgress&&t.onProgress(n)}e.enqueue(s),t()}}))}()}});return new Response(l)}throw new Ph('fetch for "'+t.url+'" responded with '+t.status+": "+t.statusText,t)})).then((e=>{switch(o){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then((e=>(new DOMParser).parseFromString(e,r)));case"json":return e.json();default:if(void 0===r)return e.text();{const t=/charset="?([^;"\s]*)"?/i.exec(r),i=t&&t[1]?t[1].toLowerCase():void 0,n=new TextDecoder(i);return e.arrayBuffer().then((e=>n.decode(e)))}}})).then((t=>{Th.add(e,t);const i=Rh[e];delete Rh[e];for(let e=0,n=i.length;e<n;e++){const n=i[e];n.onLoad&&n.onLoad(t)}})).catch((t=>{const i=Rh[e];if(void 0===i)throw this.manager.itemError(e),t;delete Rh[e];for(let e=0,n=i.length;e<n;e++){const n=i[e];n.onError&&n.onError(t)}this.manager.itemError(e)})).finally((()=>{this.manager.itemEnd(e)})),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Dh extends Ah{constructor(e){super(e)}load(e,t,i,n){const s=this,a=new Eh(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(i){try{t(s.parse(JSON.parse(i)))}catch(t){n?n(t):console.error(t),s.manager.itemError(e)}}),i,n)}parse(e){const t=[];for(let i=0;i<e.length;i++){const n=kh.parse(e[i]);t.push(n)}return t}}class Oh extends Ah{constructor(e){super(e)}load(e,t,i,n){const s=this,a=[],r=new kc,o=new Eh(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(s.withCredentials);let l=0;function c(c){o.load(e[c],(function(e){const i=s.parse(e,!0);a[c]={width:i.width,height:i.height,format:i.format,mipmaps:i.mipmaps},l+=1,6===l&&(1===i.mipmapCount&&(r.minFilter=ve),r.image=a,r.format=i.format,r.needsUpdate=!0,t&&t(r))}),i,n)}if(Array.isArray(e))for(let t=0,i=e.length;t<i;++t)c(t);else o.load(e,(function(e){const i=s.parse(e,!0);if(i.isCubemap){const e=i.mipmaps.length/i.mipmapCount;for(let t=0;t<e;t++){a[t]={mipmaps:[]};for(let e=0;e<i.mipmapCount;e++)a[t].mipmaps.push(i.mipmaps[t*i.mipmapCount+e]),a[t].format=i.format,a[t].width=i.width,a[t].height=i.height}r.image=a}else r.image.width=i.width,r.image.height=i.height,r.mipmaps=i.mipmaps;1===i.mipmapCount&&(r.minFilter=ve),r.format=i.format,r.needsUpdate=!0,t&&t(r)}),i,n);return r}}class Lh extends Ah{constructor(e){super(e)}load(e,t,i,n){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=Th.get(e);if(void 0!==a)return s.manager.itemStart(e),setTimeout((function(){t&&t(a),s.manager.itemEnd(e)}),0),a;const r=Ni("img");function o(){c(),Th.add(e,this),t&&t(this),s.manager.itemEnd(e)}function l(t){c(),n&&n(t),s.manager.itemError(e),s.manager.itemEnd(e)}function c(){r.removeEventListener("load",o,!1),r.removeEventListener("error",l,!1)}return r.addEventListener("load",o,!1),r.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(r.crossOrigin=this.crossOrigin),s.manager.itemStart(e),r.src=e,r}}class jh extends Ah{constructor(e){super(e)}load(e,t,i,n){const s=new ka,a=new Lh(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let r=0;function o(i){a.load(e[i],(function(e){s.images[i]=e,r++,6===r&&(s.needsUpdate=!0,t&&t(s))}),void 0,n)}for(let t=0;t<e.length;++t)o(t);return s}}class zh extends Ah{constructor(e){super(e)}load(e,t,i,n){const s=this,a=new Yl,r=new Eh(this.manager);return r.setResponseType("arraybuffer"),r.setRequestHeader(this.requestHeader),r.setPath(this.path),r.setWithCredentials(s.withCredentials),r.load(e,(function(e){const i=s.parse(e);i&&(void 0!==i.image?a.image=i.image:void 0!==i.data&&(a.image.width=i.width,a.image.height=i.height,a.image.data=i.data),a.wrapS=void 0!==i.wrapS?i.wrapS:de,a.wrapT=void 0!==i.wrapT?i.wrapT:de,a.magFilter=void 0!==i.magFilter?i.magFilter:ve,a.minFilter=void 0!==i.minFilter?i.minFilter:ve,a.anisotropy=void 0!==i.anisotropy?i.anisotropy:1,void 0!==i.encoding&&(a.encoding=i.encoding),void 0!==i.flipY&&(a.flipY=i.flipY),void 0!==i.format&&(a.format=i.format),void 0!==i.type&&(a.type=i.type),void 0!==i.mipmaps&&(a.mipmaps=i.mipmaps,a.minFilter=we),1===i.mipmapCount&&(a.minFilter=ve),void 0!==i.generateMipmaps&&(a.generateMipmaps=i.generateMipmaps),a.needsUpdate=!0,t&&t(a,i))}),i,n),a}}class Bh extends Ah{constructor(e){super(e)}load(e,t,i,n){const s=new sn,a=new Lh(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,(function(e){s.image=e,s.needsUpdate=!0,void 0!==t&&t(s)}),i,n),s}}class Nh extends ds{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Is(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}class Fh extends Nh{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(ds.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Is(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const Hh=new Nn,Uh=new Hi,Vh=new Hi;class Gh{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Di(512,512),this.map=null,this.mapPass=null,this.matrix=new Nn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Ea,this._frameExtents=new Di(1,1),this._viewportCount=1,this._viewports=[new an(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;Uh.setFromMatrixPosition(e.matrixWorld),t.position.copy(Uh),Vh.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Vh),t.updateMatrixWorld(),Hh.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Hh),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(Hh)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Wh extends Gh{constructor(){super(new xa(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=2*Si*e.angle*this.focus,n=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;i===t.fov&&n===t.aspect&&s===t.far||(t.fov=i,t.aspect=n,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class qh extends Nh{constructor(e,t,i=0,n=Math.PI/3,s=0,a=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(ds.DEFAULT_UP),this.updateMatrix(),this.target=new ds,this.distance=i,this.angle=n,this.penumbra=s,this.decay=a,this.map=null,this.shadow=new Wh}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const Yh=new Nn,Kh=new Hi,Xh=new Hi;class Zh extends Gh{constructor(){super(new xa(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Di(4,2),this._viewportCount=6,this._viewports=[new an(2,1,1,1),new an(0,1,1,1),new an(3,1,1,1),new an(1,1,1,1),new an(3,0,1,1),new an(1,0,1,1)],this._cubeDirections=[new Hi(1,0,0),new Hi(-1,0,0),new Hi(0,0,1),new Hi(0,0,-1),new Hi(0,1,0),new Hi(0,-1,0)],this._cubeUps=[new Hi(0,1,0),new Hi(0,1,0),new Hi(0,1,0),new Hi(0,1,0),new Hi(0,0,1),new Hi(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,n=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),Kh.setFromMatrixPosition(e.matrixWorld),i.position.copy(Kh),Xh.copy(i.position),Xh.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(Xh),i.updateMatrixWorld(),n.makeTranslation(-Kh.x,-Kh.y,-Kh.z),Yh.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Yh)}}class Jh extends Nh{constructor(e,t,i=0,n=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=n,this.shadow=new Zh}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Qh extends Gh{constructor(){super(new qa(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class $h extends Nh{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(ds.DEFAULT_UP),this.updateMatrix(),this.target=new ds,this.shadow=new Qh}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class eu extends Nh{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class tu extends Nh{constructor(e,t,i=10,n=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=n}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class iu{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Hi)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,n=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*n),t.addScaledVector(a[2],.488603*s),t.addScaledVector(a[3],.488603*i),t.addScaledVector(a[4],i*n*1.092548),t.addScaledVector(a[5],n*s*1.092548),t.addScaledVector(a[6],.315392*(3*s*s-1)),t.addScaledVector(a[7],i*s*1.092548),t.addScaledVector(a[8],.546274*(i*i-n*n)),t}getIrradianceAt(e,t){const i=e.x,n=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],1.023328*n),t.addScaledVector(a[2],1.023328*s),t.addScaledVector(a[3],1.023328*i),t.addScaledVector(a[4],.858086*i*n),t.addScaledVector(a[5],.858086*n*s),t.addScaledVector(a[6],.743125*s*s-.247708),t.addScaledVector(a[7],.858086*i*s),t.addScaledVector(a[8],.429043*(i*i-n*n)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let n=0;n<9;n++)i[n].fromArray(e,t+3*n);return this}toArray(e=[],t=0){const i=this.coefficients;for(let n=0;n<9;n++)i[n].toArray(e,t+3*n);return e}static getBasisAt(e,t){const i=e.x,n=e.y,s=e.z;t[0]=.282095,t[1]=.488603*n,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*n,t[5]=1.092548*n*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-n*n)}}class nu extends Nh{constructor(e=new iu,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class su extends Ah{constructor(e){super(e),this.textures={}}load(e,t,i,n){const s=this,a=new Eh(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,(function(i){try{t(s.parse(JSON.parse(i)))}catch(t){n?n(t):console.error(t),s.manager.itemError(e)}}),i,n)}parse(e){const t=this.textures;function i(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}const n=su.createMaterialFromType(e.type);if(void 0!==e.uuid&&(n.uuid=e.uuid),void 0!==e.name&&(n.name=e.name),void 0!==e.color&&void 0!==n.color&&n.color.setHex(e.color),void 0!==e.roughness&&(n.roughness=e.roughness),void 0!==e.metalness&&(n.metalness=e.metalness),void 0!==e.sheen&&(n.sheen=e.sheen),void 0!==e.sheenColor&&(n.sheenColor=(new Is).setHex(e.sheenColor)),void 0!==e.sheenRoughness&&(n.sheenRoughness=e.sheenRoughness),void 0!==e.emissive&&void 0!==n.emissive&&n.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==n.specular&&n.specular.setHex(e.specular),void 0!==e.specularIntensity&&(n.specularIntensity=e.specularIntensity),void 0!==e.specularColor&&void 0!==n.specularColor&&n.specularColor.setHex(e.specularColor),void 0!==e.shininess&&(n.shininess=e.shininess),void 0!==e.clearcoat&&(n.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(n.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.iridescence&&(n.iridescence=e.iridescence),void 0!==e.iridescenceIOR&&(n.iridescenceIOR=e.iridescenceIOR),void 0!==e.iridescenceThicknessRange&&(n.iridescenceThicknessRange=e.iridescenceThicknessRange),void 0!==e.transmission&&(n.transmission=e.transmission),void 0!==e.thickness&&(n.thickness=e.thickness),void 0!==e.attenuationDistance&&(n.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&void 0!==n.attenuationColor&&n.attenuationColor.setHex(e.attenuationColor),void 0!==e.fog&&(n.fog=e.fog),void 0!==e.flatShading&&(n.flatShading=e.flatShading),void 0!==e.blending&&(n.blending=e.blending),void 0!==e.combine&&(n.combine=e.combine),void 0!==e.side&&(n.side=e.side),void 0!==e.shadowSide&&(n.shadowSide=e.shadowSide),void 0!==e.opacity&&(n.opacity=e.opacity),void 0!==e.transparent&&(n.transparent=e.transparent),void 0!==e.alphaTest&&(n.alphaTest=e.alphaTest),void 0!==e.depthTest&&(n.depthTest=e.depthTest),void 0!==e.depthWrite&&(n.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(n.colorWrite=e.colorWrite),void 0!==e.stencilWrite&&(n.stencilWrite=e.stencilWrite),void 0!==e.stencilWriteMask&&(n.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(n.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(n.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(n.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(n.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(n.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(n.stencilZPass=e.stencilZPass),void 0!==e.wireframe&&(n.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(n.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(n.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(n.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(n.rotation=e.rotation),1!==e.linewidth&&(n.linewidth=e.linewidth),void 0!==e.dashSize&&(n.dashSize=e.dashSize),void 0!==e.gapSize&&(n.gapSize=e.gapSize),void 0!==e.scale&&(n.scale=e.scale),void 0!==e.polygonOffset&&(n.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(n.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(n.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.dithering&&(n.dithering=e.dithering),void 0!==e.alphaToCoverage&&(n.alphaToCoverage=e.alphaToCoverage),void 0!==e.premultipliedAlpha&&(n.premultipliedAlpha=e.premultipliedAlpha),void 0!==e.forceSinglePass&&(n.forceSinglePass=e.forceSinglePass),void 0!==e.visible&&(n.visible=e.visible),void 0!==e.toneMapped&&(n.toneMapped=e.toneMapped),void 0!==e.userData&&(n.userData=e.userData),void 0!==e.vertexColors&&("number"==typeof e.vertexColors?n.vertexColors=e.vertexColors>0:n.vertexColors=e.vertexColors),void 0!==e.uniforms)for(const t in e.uniforms){const s=e.uniforms[t];switch(n.uniforms[t]={},s.type){case"t":n.uniforms[t].value=i(s.value);break;case"c":n.uniforms[t].value=(new Is).setHex(s.value);break;case"v2":n.uniforms[t].value=(new Di).fromArray(s.value);break;case"v3":n.uniforms[t].value=(new Hi).fromArray(s.value);break;case"v4":n.uniforms[t].value=(new an).fromArray(s.value);break;case"m3":n.uniforms[t].value=(new Oi).fromArray(s.value);break;case"m4":n.uniforms[t].value=(new Nn).fromArray(s.value);break;default:n.uniforms[t].value=s.value}}if(void 0!==e.defines&&(n.defines=e.defines),void 0!==e.vertexShader&&(n.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(n.fragmentShader=e.fragmentShader),void 0!==e.glslVersion&&(n.glslVersion=e.glslVersion),void 0!==e.extensions)for(const t in e.extensions)n.extensions[t]=e.extensions[t];if(void 0!==e.size&&(n.size=e.size),void 0!==e.sizeAttenuation&&(n.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(n.map=i(e.map)),void 0!==e.matcap&&(n.matcap=i(e.matcap)),void 0!==e.alphaMap&&(n.alphaMap=i(e.alphaMap)),void 0!==e.bumpMap&&(n.bumpMap=i(e.bumpMap)),void 0!==e.bumpScale&&(n.bumpScale=e.bumpScale),void 0!==e.normalMap&&(n.normalMap=i(e.normalMap)),void 0!==e.normalMapType&&(n.normalMapType=e.normalMapType),void 0!==e.normalScale){let t=e.normalScale;!1===Array.isArray(t)&&(t=[t,t]),n.normalScale=(new Di).fromArray(t)}return void 0!==e.displacementMap&&(n.displacementMap=i(e.displacementMap)),void 0!==e.displacementScale&&(n.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(n.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(n.roughnessMap=i(e.roughnessMap)),void 0!==e.metalnessMap&&(n.metalnessMap=i(e.metalnessMap)),void 0!==e.emissiveMap&&(n.emissiveMap=i(e.emissiveMap)),void 0!==e.emissiveIntensity&&(n.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(n.specularMap=i(e.specularMap)),void 0!==e.specularIntensityMap&&(n.specularIntensityMap=i(e.specularIntensityMap)),void 0!==e.specularColorMap&&(n.specularColorMap=i(e.specularColorMap)),void 0!==e.envMap&&(n.envMap=i(e.envMap)),void 0!==e.envMapIntensity&&(n.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(n.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(n.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(n.lightMap=i(e.lightMap)),void 0!==e.lightMapIntensity&&(n.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(n.aoMap=i(e.aoMap)),void 0!==e.aoMapIntensity&&(n.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(n.gradientMap=i(e.gradientMap)),void 0!==e.clearcoatMap&&(n.clearcoatMap=i(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(n.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(n.clearcoatNormalMap=i(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(n.clearcoatNormalScale=(new Di).fromArray(e.clearcoatNormalScale)),void 0!==e.iridescenceMap&&(n.iridescenceMap=i(e.iridescenceMap)),void 0!==e.iridescenceThicknessMap&&(n.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),void 0!==e.transmissionMap&&(n.transmissionMap=i(e.transmissionMap)),void 0!==e.thicknessMap&&(n.thicknessMap=i(e.thicknessMap)),void 0!==e.sheenColorMap&&(n.sheenColorMap=i(e.sheenColorMap)),void 0!==e.sheenRoughnessMap&&(n.sheenRoughnessMap=i(e.sheenRoughnessMap)),n}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){return new{ShadowMaterial:Xd,SpriteMaterial:xl,RawShaderMaterial:Zd,ShaderMaterial:ba,PointsMaterial:mc,MeshPhysicalMaterial:Qd,MeshStandardMaterial:Jd,MeshPhongMaterial:$d,MeshToonMaterial:eh,MeshNormalMaterial:th,MeshLambertMaterial:ih,MeshDepthMaterial:Jo,MeshDistanceMaterial:Qo,MeshBasicMaterial:Rs,MeshMatcapMaterial:nh,LineDashedMaterial:sh,LineBasicMaterial:sc,Material:Ms}[e]}}class au{static decodeText(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let i=0,n=e.length;i<n;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch(e){return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class ru extends Js{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class ou extends Ah{constructor(e){super(e)}load(e,t,i,n){const s=this,a=new Eh(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,(function(i){try{t(s.parse(JSON.parse(i)))}catch(t){n?n(t):console.error(t),s.manager.itemError(e)}}),i,n)}parse(e){const t={},i={};function n(e,n){if(void 0!==t[n])return t[n];const s=e.interleavedBuffers[n],a=function(e,t){if(void 0!==i[t])return i[t];const n=e.arrayBuffers[t],s=new Uint32Array(n).buffer;return i[t]=s,s}(e,s.buffer),r=Bi(s.type,a),o=new yl(r,s.stride);return o.uuid=s.uuid,t[n]=o,o}const s=e.isInstancedBufferGeometry?new ru:new Js,a=e.data.index;if(void 0!==a){const e=Bi(a.type,a.array);s.setIndex(new Ds(e,1))}const r=e.data.attributes;for(const t in r){const i=r[t];let a;if(i.isInterleavedBufferAttribute){const t=n(e.data,i.data);a=new wl(t,i.itemSize,i.offset,i.normalized)}else{const e=Bi(i.type,i.array);a=new(i.isInstancedBufferAttribute?Jl:Ds)(e,i.itemSize,i.normalized)}void 0!==i.name&&(a.name=i.name),void 0!==i.usage&&a.setUsage(i.usage),void 0!==i.updateRange&&(a.updateRange.offset=i.updateRange.offset,a.updateRange.count=i.updateRange.count),s.setAttribute(t,a)}const o=e.data.morphAttributes;if(o)for(const t in o){const i=o[t],a=[];for(let t=0,s=i.length;t<s;t++){const s=i[t];let r;if(s.isInterleavedBufferAttribute){const t=n(e.data,s.data);r=new wl(t,s.itemSize,s.offset,s.normalized)}else{const e=Bi(s.type,s.array);r=new Ds(e,s.itemSize,s.normalized)}void 0!==s.name&&(r.name=s.name),a.push(r)}s.morphAttributes[t]=a}e.data.morphTargetsRelative&&(s.morphTargetsRelative=!0);const l=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==l)for(let e=0,t=l.length;e!==t;++e){const t=l[e];s.addGroup(t.start,t.count,t.materialIndex)}const c=e.data.boundingSphere;if(void 0!==c){const e=new Hi;void 0!==c.center&&e.fromArray(c.center),s.boundingSphere=new Rn(e,c.radius)}return e.name&&(s.name=e.name),e.userData&&(s.userData=e.userData),s}}class lu extends Ah{constructor(e){super(e)}load(e,t,i,n){const s=this,a=""===this.path?au.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const r=new Eh(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(e,(function(i){let a=null;try{a=JSON.parse(i)}catch(t){return void 0!==n&&n(t),void console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message)}const r=a.metadata;if(void 0===r||void 0===r.type||"geometry"===r.type.toLowerCase())return void 0!==n&&n(new Error("THREE.ObjectLoader: Can't load "+e)),void console.error("THREE.ObjectLoader: Can't load "+e);s.parse(a,t)}),i,n)}async loadAsync(e,t){const i=""===this.path?au.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const n=new Eh(this.manager);n.setPath(this.path),n.setRequestHeader(this.requestHeader),n.setWithCredentials(this.withCredentials);const s=await n.loadAsync(e,t),a=JSON.parse(s),r=a.metadata;if(void 0===r||void 0===r.type||"geometry"===r.type.toLowerCase())throw new Error("THREE.ObjectLoader: Can't load "+e);return await this.parseAsync(a)}parse(e,t){const i=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,n),a=this.parseImages(e.images,(function(){void 0!==t&&t(l)})),r=this.parseTextures(e.textures,a),o=this.parseMaterials(e.materials,r),l=this.parseObject(e.object,s,o,r,i),c=this.parseSkeletons(e.skeletons,l);if(this.bindSkeletons(l,c),void 0!==t){let e=!1;for(const t in a)if(a[t].data instanceof HTMLImageElement){e=!0;break}!1===e&&t(l)}return l}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),n=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),a=this.parseTextures(e.textures,s),r=this.parseMaterials(e.materials,a),o=this.parseObject(e.object,n,r,a,t),l=this.parseSkeletons(e.skeletons,o);return this.bindSkeletons(o,l),o}parseShapes(e){const t={};if(void 0!==e)for(let i=0,n=e.length;i<n;i++){const n=(new od).fromJSON(e[i]);t[n.uuid]=n}return t}parseSkeletons(e,t){const i={},n={};if(t.traverse((function(e){e.isBone&&(n[e.uuid]=e)})),void 0!==e)for(let t=0,s=e.length;t<s;t++){const s=(new Zl).fromJSON(e[t],n);i[s.uuid]=s}return i}parseGeometries(e,t){const i={};if(void 0!==e){const n=new ou;for(let s=0,a=e.length;s<a;s++){let a;const r=e[s];switch(r.type){case"BufferGeometry":case"InstancedBufferGeometry":a=n.parse(r);break;default:r.type in Kd?a=Kd[r.type].fromJSON(r,t):console.warn('THREE.ObjectLoader: Unsupported geometry type "'+r.type+'"')}a.uuid=r.uuid,void 0!==r.name&&(a.name=r.name),void 0!==r.userData&&(a.userData=r.userData),i[r.uuid]=a}}return i}parseMaterials(e,t){const i={},n={};if(void 0!==e){const s=new su;s.setTextures(t);for(let t=0,a=e.length;t<a;t++){const a=e[t];void 0===i[a.uuid]&&(i[a.uuid]=s.parse(a)),n[a.uuid]=i[a.uuid]}}return n}parseAnimations(e){const t={};if(void 0!==e)for(let i=0;i<e.length;i++){const n=e[i],s=kh.parse(n);t[s.uuid]=s}return t}parseImages(e,t){const i=this,n={};let s;function a(e){if("string"==typeof e){const n=e,a=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(n)?n:i.resourcePath+n;return t=a,i.manager.itemStart(t),s.load(t,(function(){i.manager.itemEnd(t)}),void 0,(function(){i.manager.itemError(t),i.manager.itemEnd(t)}))}return e.data?{data:Bi(e.type,e.data),width:e.width,height:e.height}:null;var t}if(void 0!==e&&e.length>0){const i=new Ch(t);s=new Lh(i),s.setCrossOrigin(this.crossOrigin);for(let t=0,i=e.length;t<i;t++){const i=e[t],s=i.url;if(Array.isArray(s)){const e=[];for(let t=0,i=s.length;t<i;t++){const i=a(s[t]);null!==i&&(i instanceof HTMLImageElement?e.push(i):e.push(new Yl(i.data,i.width,i.height)))}n[i.uuid]=new en(e)}else{const e=a(i.url);n[i.uuid]=new en(e)}}}return n}async parseImagesAsync(e){const t=this,i={};let n;async function s(e){if("string"==typeof e){const i=e,s=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(i)?i:t.resourcePath+i;return await n.loadAsync(s)}return e.data?{data:Bi(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){n=new Lh(this.manager),n.setCrossOrigin(this.crossOrigin);for(let t=0,n=e.length;t<n;t++){const n=e[t],a=n.url;if(Array.isArray(a)){const e=[];for(let t=0,i=a.length;t<i;t++){const i=a[t],n=await s(i);null!==n&&(n instanceof HTMLImageElement?e.push(n):e.push(new Yl(n.data,n.width,n.height)))}i[n.uuid]=new en(e)}else{const e=await s(n.url);i[n.uuid]=new en(e)}}}return i}parseTextures(e,t){function i(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}const n={};if(void 0!==e)for(let s=0,a=e.length;s<a;s++){const a=e[s];void 0===a.image&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),void 0===t[a.image]&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const r=t[a.image],o=r.data;let l;Array.isArray(o)?(l=new ka,6===o.length&&(l.needsUpdate=!0)):(l=o&&o.data?new Yl:new sn,o&&(l.needsUpdate=!0)),l.source=r,l.uuid=a.uuid,void 0!==a.name&&(l.name=a.name),void 0!==a.mapping&&(l.mapping=i(a.mapping,cu)),void 0!==a.offset&&l.offset.fromArray(a.offset),void 0!==a.repeat&&l.repeat.fromArray(a.repeat),void 0!==a.center&&l.center.fromArray(a.center),void 0!==a.rotation&&(l.rotation=a.rotation),void 0!==a.wrap&&(l.wrapS=i(a.wrap[0],du),l.wrapT=i(a.wrap[1],du)),void 0!==a.format&&(l.format=a.format),void 0!==a.internalFormat&&(l.internalFormat=a.internalFormat),void 0!==a.type&&(l.type=a.type),void 0!==a.encoding&&(l.encoding=a.encoding),void 0!==a.minFilter&&(l.minFilter=i(a.minFilter,hu)),void 0!==a.magFilter&&(l.magFilter=i(a.magFilter,hu)),void 0!==a.anisotropy&&(l.anisotropy=a.anisotropy),void 0!==a.flipY&&(l.flipY=a.flipY),void 0!==a.generateMipmaps&&(l.generateMipmaps=a.generateMipmaps),void 0!==a.premultiplyAlpha&&(l.premultiplyAlpha=a.premultiplyAlpha),void 0!==a.unpackAlignment&&(l.unpackAlignment=a.unpackAlignment),void 0!==a.userData&&(l.userData=a.userData),n[a.uuid]=l}return n}parseObject(e,t,i,n,s){let a,r,o;function l(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function c(e){if(void 0!==e){if(Array.isArray(e)){const t=[];for(let n=0,s=e.length;n<s;n++){const s=e[n];void 0===i[s]&&console.warn("THREE.ObjectLoader: Undefined material",s),t.push(i[s])}return t}return void 0===i[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),i[e]}}function d(e){return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined texture",e),n[e]}switch(e.type){case"Scene":a=new vl,void 0!==e.background&&(Number.isInteger(e.background)?a.background=new Is(e.background):a.background=d(e.background)),void 0!==e.environment&&(a.environment=d(e.environment)),void 0!==e.fog&&("Fog"===e.fog.type?a.fog=new gl(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(a.fog=new ml(e.fog.color,e.fog.density))),void 0!==e.backgroundBlurriness&&(a.backgroundBlurriness=e.backgroundBlurriness),void 0!==e.backgroundIntensity&&(a.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":a=new xa(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(a.focus=e.focus),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.filmGauge&&(a.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(a.filmOffset=e.filmOffset),void 0!==e.view&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new qa(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.view&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new eu(e.color,e.intensity);break;case"DirectionalLight":a=new $h(e.color,e.intensity);break;case"PointLight":a=new Jh(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new tu(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new qh(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":a=new Fh(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=(new nu).fromJSON(e);break;case"SkinnedMesh":r=l(e.geometry),o=c(e.material),a=new Wl(r,o),void 0!==e.bindMode&&(a.bindMode=e.bindMode),void 0!==e.bindMatrix&&a.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(a.skeleton=e.skeleton);break;case"Mesh":r=l(e.geometry),o=c(e.material),a=new ua(r,o);break;case"InstancedMesh":r=l(e.geometry),o=c(e.material);const t=e.count,i=e.instanceMatrix,n=e.instanceColor;a=new nc(r,o,t),a.instanceMatrix=new Jl(new Float32Array(i.array),16),void 0!==n&&(a.instanceColor=new Jl(new Float32Array(n.array),n.itemSize));break;case"LOD":a=new Nl;break;case"Line":a=new dc(l(e.geometry),c(e.material));break;case"LineLoop":a=new fc(l(e.geometry),c(e.material));break;case"LineSegments":a=new pc(l(e.geometry),c(e.material));break;case"PointCloud":case"Points":a=new wc(l(e.geometry),c(e.material));break;case"Sprite":a=new Ll(c(e.material));break;case"Group":a=new rl;break;case"Bone":a=new ql;break;default:a=new ds}if(a.uuid=e.uuid,void 0!==e.name&&(a.name=e.name),void 0!==e.matrix?(a.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(void 0!==e.position&&a.position.fromArray(e.position),void 0!==e.rotation&&a.rotation.fromArray(e.rotation),void 0!==e.quaternion&&a.quaternion.fromArray(e.quaternion),void 0!==e.scale&&a.scale.fromArray(e.scale)),void 0!==e.castShadow&&(a.castShadow=e.castShadow),void 0!==e.receiveShadow&&(a.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(a.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(a.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(a.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&a.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(a.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(a.visible=e.visible),void 0!==e.frustumCulled&&(a.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(a.renderOrder=e.renderOrder),void 0!==e.userData&&(a.userData=e.userData),void 0!==e.layers&&(a.layers.mask=e.layers),void 0!==e.children){const r=e.children;for(let e=0;e<r.length;e++)a.add(this.parseObject(r[e],t,i,n,s))}if(void 0!==e.animations){const t=e.animations;for(let e=0;e<t.length;e++){const i=t[e];a.animations.push(s[i])}}if("LOD"===e.type){void 0!==e.autoUpdate&&(a.autoUpdate=e.autoUpdate);const t=e.levels;for(let e=0;e<t.length;e++){const i=t[e],n=a.getObjectByProperty("uuid",i.object);void 0!==n&&a.addLevel(n,i.distance,i.hysteresis)}}return a}bindSkeletons(e,t){0!==Object.keys(t).length&&e.traverse((function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){const i=t[e.skeleton];void 0===i?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",e.skeleton):e.bind(i,e.bindMatrix)}}))}}const cu={UVMapping:ne,CubeReflectionMapping:se,CubeRefractionMapping:ae,EquirectangularReflectionMapping:re,EquirectangularRefractionMapping:oe,CubeUVReflectionMapping:le},du={RepeatWrapping:ce,ClampToEdgeWrapping:de,MirroredRepeatWrapping:he},hu={NearestFilter:ue,NearestMipmapNearestFilter:pe,NearestMipmapLinearFilter:me,LinearFilter:ve,LinearMipmapNearestFilter:ye,LinearMipmapLinearFilter:we};class uu extends Ah{constructor(e){super(e),this.isImageBitmapLoader=!0,"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e="",t,i,n){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=Th.get(e);if(void 0!==a)return s.manager.itemStart(e),setTimeout((function(){t&&t(a),s.manager.itemEnd(e)}),0),a;const r={credentials:"anonymous"===this.crossOrigin?"same-origin":"include",headers:this.requestHeader};fetch(e,r).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(s.options,{colorSpaceConversion:"none"}))})).then((function(i){Th.add(e,i),t&&t(i),s.manager.itemEnd(e)})).catch((function(t){n&&n(t),s.manager.itemError(e),s.manager.itemEnd(e)})),s.manager.itemStart(e)}}let pu;class fu{static getContext(){return void 0===pu&&(pu=new(window.AudioContext||window.webkitAudioContext)),pu}static setContext(e){pu=e}}class mu extends Ah{constructor(e){super(e)}load(e,t,i,n){const s=this,a=new Eh(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(i){try{const e=i.slice(0);fu.getContext().decodeAudioData(e,(function(e){t(e)}))}catch(t){n?n(t):console.error(t),s.manager.itemError(e)}}),i,n)}}class gu extends nu{constructor(e,t,i=1){super(void 0,i),this.isHemisphereLightProbe=!0;const n=(new Is).set(e),s=(new Is).set(t),a=new Hi(n.r,n.g,n.b),r=new Hi(s.r,s.g,s.b),o=Math.sqrt(Math.PI),l=o*Math.sqrt(.75);this.sh.coefficients[0].copy(a).add(r).multiplyScalar(o),this.sh.coefficients[1].copy(a).sub(r).multiplyScalar(l)}}class vu extends nu{constructor(e,t=1){super(void 0,t),this.isAmbientLightProbe=!0;const i=(new Is).set(e);this.sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const yu=new Nn,bu=new Nn,wu=new Nn;class xu{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new xa,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new xa,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,wu.copy(e.projectionMatrix);const i=t.eyeSep/2,n=i*t.near/t.focus,s=t.near*Math.tan(xi*t.fov*.5)/t.zoom;let a,r;bu.elements[12]=-i,yu.elements[12]=i,a=-s*t.aspect+n,r=s*t.aspect+n,wu.elements[0]=2*t.near/(r-a),wu.elements[8]=(r+a)/(r-a),this.cameraL.projectionMatrix.copy(wu),a=-s*t.aspect-n,r=s*t.aspect-n,wu.elements[0]=2*t.near/(r-a),wu.elements[8]=(r+a)/(r-a),this.cameraR.projectionMatrix.copy(wu)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(bu),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(yu)}}class Su{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Mu(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=Mu();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function Mu(){return("undefined"==typeof performance?Date:performance).now()}const ku=new Hi,_u=new Fi,Tu=new Hi,Cu=new Hi;class Iu extends ds{constructor(){super(),this.type="AudioListener",this.context=fu.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Su}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(ku,_u,Tu),Cu.set(0,0,-1).applyQuaternion(_u),t.positionX){const e=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(ku.x,e),t.positionY.linearRampToValueAtTime(ku.y,e),t.positionZ.linearRampToValueAtTime(ku.z,e),t.forwardX.linearRampToValueAtTime(Cu.x,e),t.forwardY.linearRampToValueAtTime(Cu.y,e),t.forwardZ.linearRampToValueAtTime(Cu.z,e),t.upX.linearRampToValueAtTime(i.x,e),t.upY.linearRampToValueAtTime(i.y,e),t.upZ.linearRampToValueAtTime(i.z,e)}else t.setPosition(ku.x,ku.y,ku.z),t.setOrientation(Cu.x,Cu.y,Cu.z,i.x,i.y,i.z)}}class Au extends ds{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,null!==this.source&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Ru=new Hi,Pu=new Fi,Eu=new Hi,Du=new Hi;class Ou extends Au{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(Ru,Pu,Eu),Du.set(0,0,1).applyQuaternion(Pu);const t=this.panner;if(t.positionX){const e=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Ru.x,e),t.positionY.linearRampToValueAtTime(Ru.y,e),t.positionZ.linearRampToValueAtTime(Ru.z,e),t.orientationX.linearRampToValueAtTime(Du.x,e),t.orientationY.linearRampToValueAtTime(Du.y,e),t.orientationZ.linearRampToValueAtTime(Du.z,e)}else t.setPosition(Ru.x,Ru.y,Ru.z),t.setOrientation(Du.x,Du.y,Du.z)}}class Lu{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class ju{constructor(e,t,i){let n,s,a;switch(this.binding=e,this.valueSize=i,t){case"quaternion":n=this._slerp,s=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*i),this._workIndex=5;break;case"string":case"bool":n=this._select,s=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(5*i);break;default:n=this._lerp,s=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*i)}this._mixBufferRegion=n,this._mixBufferRegionAdditive=s,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,n=this.valueSize,s=e*n+n;let a=this.cumulativeWeight;if(0===a){for(let e=0;e!==n;++e)i[s+e]=i[e];a=t}else{a+=t;const e=t/a;this._mixBufferRegion(i,s,0,e,n)}this.cumulativeWeight=a}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,n=i*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,n,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,n=e*t+t,s=this.cumulativeWeight,a=this.cumulativeWeightAdditive,r=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const e=t*this._origIndex;this._mixBufferRegion(i,n,e,1-s,t)}a>0&&this._mixBufferRegionAdditive(i,n,this._addIndex*t,1,t);for(let e=t,s=t+t;e!==s;++e)if(i[e]!==i[e+t]){r.setValue(i,n);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,n=i*this._origIndex;e.getValue(t,n);for(let e=i,s=n;e!==s;++e)t[e]=t[n+e%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=3*this.valueSize;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,n,s){if(n>=.5)for(let n=0;n!==s;++n)e[t+n]=e[i+n]}_slerp(e,t,i,n){Fi.slerpFlat(e,t,e,t,e,i,n)}_slerpAdditive(e,t,i,n,s){const a=this._workIndex*s;Fi.multiplyQuaternionsFlat(e,a,e,t,e,i),Fi.slerpFlat(e,t,e,t,e,a,n)}_lerp(e,t,i,n,s){const a=1-n;for(let r=0;r!==s;++r){const s=t+r;e[s]=e[s]*a+e[i+r]*n}}_lerpAdditive(e,t,i,n,s){for(let a=0;a!==s;++a){const s=t+a;e[s]=e[s]+e[i+a]*n}}}const zu="\\[\\]\\.:\\/",Bu=new RegExp("["+zu+"]","g"),Nu="[^"+zu+"]",Fu="[^"+zu.replace("\\.","")+"]",Hu=/((?:WC+[\/:])*)/.source.replace("WC",Nu),Uu=/(WCOD+)?/.source.replace("WCOD",Fu),Vu=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Nu),Gu=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Nu),Wu=new RegExp("^"+Hu+Uu+Vu+Gu+"$"),qu=["material","materials","bones","map"];class Yu{constructor(e,t,i){this.path=t,this.parsedPath=i||Yu.parseTrackName(t),this.node=Yu.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new Yu.Composite(e,t,i):new Yu(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Bu,"")}static parseTrackName(e){const t=Wu.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},n=i.nodeName&&i.nodeName.lastIndexOf(".");if(void 0!==n&&-1!==n){const e=i.nodeName.substring(n+1);-1!==qu.indexOf(e)&&(i.nodeName=i.nodeName.substring(0,n),i.objectName=e)}if(null===i.propertyName||0===i.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(void 0!==i)return i}if(e.children){const i=function(e){for(let n=0;n<e.length;n++){const s=e[n];if(s.name===t||s.uuid===t)return s;const a=i(s.children);if(a)return a}return null},n=i(e.children);if(n)return n}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let n=0,s=i.length;n!==s;++n)e[t++]=i[n]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let n=0,s=i.length;n!==s;++n)i[n]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let n=0,s=i.length;n!==s;++n)i[n]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let n=0,s=i.length;n!==s;++n)i[n]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,n=t.propertyName;let s=t.propertyIndex;if(e||(e=Yu.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(i){let n=t.objectIndex;switch(i){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===n){n=t;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(void 0===e[i])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[i]}if(void 0!==n){if(void 0===e[n])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[n]}}const a=e[n];if(void 0===a){const i=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+i+"."+n+" but it wasn't found.",e)}let r=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?r=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(r=this.Versioning.MatrixWorldNeedsUpdate);let o=this.BindingType.Direct;if(void 0!==s){if("morphTargetInfluences"===n){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[s]&&(s=e.morphTargetDictionary[s])}o=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else void 0!==a.fromArray&&void 0!==a.toArray?(o=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(o=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=n;this.getValue=this.GetterByBindingType[o],this.setValue=this.SetterByBindingTypeAndVersioning[o][r]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Yu.Composite=class{constructor(e,t,i){const n=i||Yu.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,n)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,n=this._bindings[i];void 0!==n&&n.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let n=this._targetGroup.nCachedObjects_,s=i.length;n!==s;++n)i[n].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}},Yu.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Yu.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Yu.prototype.GetterByBindingType=[Yu.prototype._getValue_direct,Yu.prototype._getValue_array,Yu.prototype._getValue_arrayElement,Yu.prototype._getValue_toArray],Yu.prototype.SetterByBindingTypeAndVersioning=[[Yu.prototype._setValue_direct,Yu.prototype._setValue_direct_setNeedsUpdate,Yu.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Yu.prototype._setValue_array,Yu.prototype._setValue_array_setNeedsUpdate,Yu.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Yu.prototype._setValue_arrayElement,Yu.prototype._setValue_arrayElement_setNeedsUpdate,Yu.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Yu.prototype._setValue_fromArray,Yu.prototype._setValue_fromArray_setNeedsUpdate,Yu.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Ku{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Mi(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let t=0,i=arguments.length;t!==i;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,n=this._parsedPaths,s=this._bindings,a=s.length;let r,o=e.length,l=this.nCachedObjects_;for(let c=0,d=arguments.length;c!==d;++c){const d=arguments[c],h=d.uuid;let u=t[h];if(void 0===u){u=o++,t[h]=u,e.push(d);for(let e=0,t=a;e!==t;++e)s[e].push(new Yu(d,i[e],n[e]))}else if(u<l){r=e[u];const o=--l,c=e[o];t[c.uuid]=u,e[u]=c,t[h]=o,e[o]=d;for(let e=0,t=a;e!==t;++e){const t=s[e],a=t[o];let r=t[u];t[u]=a,void 0===r&&(r=new Yu(d,i[e],n[e])),t[o]=r}}else e[u]!==r&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,n=i.length;let s=this.nCachedObjects_;for(let a=0,r=arguments.length;a!==r;++a){const r=arguments[a],o=r.uuid,l=t[o];if(void 0!==l&&l>=s){const a=s++,c=e[a];t[c.uuid]=l,e[l]=c,t[o]=a,e[a]=r;for(let e=0,t=n;e!==t;++e){const t=i[e],n=t[a],s=t[l];t[l]=n,t[a]=s}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,n=i.length;let s=this.nCachedObjects_,a=e.length;for(let r=0,o=arguments.length;r!==o;++r){const o=arguments[r].uuid,l=t[o];if(void 0!==l)if(delete t[o],l<s){const r=--s,o=e[r],c=--a,d=e[c];t[o.uuid]=l,e[l]=o,t[d.uuid]=r,e[r]=d,e.pop();for(let e=0,t=n;e!==t;++e){const t=i[e],n=t[r],s=t[c];t[l]=n,t[r]=s,t.pop()}}else{const s=--a,r=e[s];s>0&&(t[r.uuid]=l),e[l]=r,e.pop();for(let e=0,t=n;e!==t;++e){const t=i[e];t[l]=t[s],t.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let n=i[e];const s=this._bindings;if(void 0!==n)return s[n];const a=this._paths,r=this._parsedPaths,o=this._objects,l=o.length,c=this.nCachedObjects_,d=new Array(l);n=s.length,i[e]=n,a.push(e),r.push(t),s.push(d);for(let i=c,n=o.length;i!==n;++i){const n=o[i];d[i]=new Yu(n,e,t)}return d}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(void 0!==i){const n=this._paths,s=this._parsedPaths,a=this._bindings,r=a.length-1,o=a[r];t[e[r]]=i,a[i]=o,a.pop(),s[i]=s[r],s.pop(),n[i]=n[r],n.pop()}}}class Xu{constructor(e,t,i=null,n=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=n;const s=t.tracks,a=s.length,r=new Array(a),o={endingStart:Tt,endingEnd:Tt};for(let e=0;e!==a;++e){const t=s[e].createInterpolant(null);r[e]=t,t.settings=o}this._interpolantSettings=o,this._interpolants=r,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=xt,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const i=this._clip.duration,n=e._clip.duration,s=n/i,a=i/n;e.warp(1,s,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const n=this._mixer,s=n.time,a=this.timeScale;let r=this._timeScaleInterpolant;null===r&&(r=n._lendControlInterpolant(),this._timeScaleInterpolant=r);const o=r.parameterPositions,l=r.sampleValues;return o[0]=s,o[1]=s+i,l[0]=e/a,l[1]=t/a,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,n){if(!this.enabled)return void this._updateWeight(e);const s=this._startTime;if(null!==s){const n=(e-s)*i;n<0||0===i?t=0:(this._startTime=null,t=i*n)}t*=this._updateTimeScale(e);const a=this._updateTime(t),r=this._updateWeight(e);if(r>0){const e=this._interpolants,t=this._propertyBindings;if(this.blendMode===Rt)for(let i=0,n=e.length;i!==n;++i)e[i].evaluate(a),t[i].accumulateAdditive(r);else for(let i=0,s=e.length;i!==s;++i)e[i].evaluate(a),t[i].accumulate(n,r)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(null!==i){const n=i.evaluate(e)[0];t*=n,e>i.parameterPositions[1]&&(this.stopFading(),0===n&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(null!==i){t*=i.evaluate(e)[0],e>i.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let n=this.time+e,s=this._loopCount;const a=i===St;if(0===e)return-1===s?n:a&&1==(1&s)?t-n:n;if(i===wt){-1===s&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(n>=t)n=t;else{if(!(n<0)){this.time=n;break e}n=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=n,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===s&&(e>=0?(s=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),n>=t||n<0){const i=Math.floor(n/t);n-=t*i,s+=Math.abs(i);const r=this.repetitions-s;if(r<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,n=e>0?t:0,this.time=n,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===r){const t=e<0;this._setEndings(t,!t,a)}else this._setEndings(!1,!1,a);this._loopCount=s,this.time=n,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:i})}}else this.time=n;if(a&&1==(1&s))return t-n}return n}_setEndings(e,t,i){const n=this._interpolantSettings;i?(n.endingStart=Ct,n.endingEnd=Ct):(n.endingStart=e?this.zeroSlopeAtStart?Ct:Tt:It,n.endingEnd=t?this.zeroSlopeAtEnd?Ct:Tt:It)}_scheduleFading(e,t,i){const n=this._mixer,s=n.time;let a=this._weightInterpolant;null===a&&(a=n._lendControlInterpolant(),this._weightInterpolant=a);const r=a.parameterPositions,o=a.sampleValues;return r[0]=s,o[0]=t,r[1]=s+e,o[1]=i,this}}const Zu=new Float32Array(1);class Ju extends yi{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,n=e._clip.tracks,s=n.length,a=e._propertyBindings,r=e._interpolants,o=i.uuid,l=this._bindingsByRootAndName;let c=l[o];void 0===c&&(c={},l[o]=c);for(let e=0;e!==s;++e){const s=n[e],l=s.name;let d=c[l];if(void 0!==d)++d.referenceCount,a[e]=d;else{if(d=a[e],void 0!==d){null===d._cacheIndex&&(++d.referenceCount,this._addInactiveBinding(d,o,l));continue}const n=t&&t._propertyBindings[e].binding.parsedPath;d=new ju(Yu.create(i,l,n),s.ValueTypeName,s.getValueSize()),++d.referenceCount,this._addInactiveBinding(d,o,l),a[e]=d}r[e].resultBuffer=d.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const t=(e._localRoot||this._root).uuid,i=e._clip.uuid,n=this._actionsByClip[i];this._bindAction(e,n&&n.knownActions[0]),this._addInactiveAction(e,i,t)}const t=e._propertyBindings;for(let e=0,i=t.length;e!==i;++e){const i=t[e];0==i.useCount++&&(this._lendBinding(i),i.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let e=0,i=t.length;e!==i;++e){const i=t[e];0==--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,i){const n=this._actions,s=this._actionsByClip;let a=s[t];if(void 0===a)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=a;else{const t=a.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=n.length,n.push(e),a.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],n=e._cacheIndex;i._cacheIndex=n,t[n]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,a=this._actionsByClip,r=a[s],o=r.knownActions,l=o[o.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,o[c]=l,o.pop(),e._byClipCacheIndex=null;delete r.actionByRoot[(e._localRoot||this._root).uuid],0===o.length&&delete a[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let e=0,i=t.length;e!==i;++e){const i=t[e];0==--i.referenceCount&&this._removeInactiveBinding(i)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,n=this._nActiveActions++,s=t[n];e._cacheIndex=n,t[n]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,n=--this._nActiveActions,s=t[n];e._cacheIndex=n,t[n]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const n=this._bindingsByRootAndName,s=this._bindings;let a=n[t];void 0===a&&(a={},n[t]=a),a[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,n=i.rootNode.uuid,s=i.path,a=this._bindingsByRootAndName,r=a[n],o=t[t.length-1],l=e._cacheIndex;o._cacheIndex=l,t[l]=o,t.pop(),delete r[s],0===Object.keys(r).length&&delete a[n]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,n=this._nActiveBindings++,s=t[n];e._cacheIndex=n,t[n]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,n=--this._nActiveBindings,s=t[n];e._cacheIndex=n,t[n]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return void 0===i&&(i=new fh(new Float32Array(2),new Float32Array(2),1,Zu),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,n=--this._nActiveControlInterpolants,s=t[n];e.__cacheIndex=n,t[n]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const n=t||this._root,s=n.uuid;let a="string"==typeof e?kh.findByName(n,e):e;const r=null!==a?a.uuid:e,o=this._actionsByClip[r];let l=null;if(void 0===i&&(i=null!==a?a.blendMode:At),void 0!==o){const e=o.actionByRoot[s];if(void 0!==e&&e.blendMode===i)return e;l=o.knownActions[0],null===a&&(a=l._clip)}if(null===a)return null;const c=new Xu(this,a,t,i);return this._bindAction(c,l),this._addInactiveAction(c,r,s),c}existingAction(e,t){const i=t||this._root,n=i.uuid,s="string"==typeof e?kh.findByName(i,e):e,a=s?s.uuid:e,r=this._actionsByClip[a];return void 0!==r&&r.actionByRoot[n]||null}stopAllAction(){const e=this._actions;for(let t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,n=this.time+=e,s=Math.sign(e),a=this._accuIndex^=1;for(let r=0;r!==i;++r){t[r]._update(n,e,s,a)}const r=this._bindings,o=this._nActiveBindings;for(let e=0;e!==o;++e)r[e].apply(a);return this}setTime(e){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,n=this._actionsByClip,s=n[i];if(void 0!==s){const e=s.knownActions;for(let i=0,n=e.length;i!==n;++i){const n=e[i];this._deactivateAction(n);const s=n._cacheIndex,a=t[t.length-1];n._cacheIndex=null,n._byClipCacheIndex=null,a._cacheIndex=s,t[s]=a,t.pop(),this._removeInactiveBindingsForAction(n)}delete n[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const e in i){const n=i[e].actionByRoot[t];void 0!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}const n=this._bindingsByRootAndName[t];if(void 0!==n)for(const e in n){const t=n[e];t.restoreOriginalState(),this._removeInactiveBinding(t)}}uncacheAction(e,t){const i=this.existingAction(e,t);null!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class Qu{constructor(e){this.value=e}clone(){return new Qu(void 0===this.value.clone?this.value:this.value.clone())}}let $u=0;class ep extends yi{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:$u++}),this.name="",this.usage=ri,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return-1!==t&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let e=0,i=t.length;e<i;e++)this.uniforms.push(t[e].clone());return this}clone(){return(new this.constructor).copy(this)}}class tp extends yl{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class ip{constructor(e,t,i,n,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=n,this.count=s,this.version=0}set needsUpdate(e){!0===e&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class np{constructor(e,t,i=0,n=1/0){this.ray=new Bn(e,t),this.near=i,this.far=n,this.camera=null,this.layers=new Zn,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,i=[]){return ap(e,this,i,t),i.sort(sp),i}intersectObjects(e,t=!0,i=[]){for(let n=0,s=e.length;n<s;n++)ap(e[n],this,i,t);return i.sort(sp),i}}function sp(e,t){return e.distance-t.distance}function ap(e,t,i,n){if(e.layers.test(t.layers)&&e.raycast(t,i),!0===n){const n=e.children;for(let e=0,s=n.length;e<s;e++)ap(n[e],t,i,!0)}}class rp{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){const e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(ki(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class op{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return(new this.constructor).copy(this)}}const lp=new Di;class cp{constructor(e=new Di(1/0,1/0),t=new Di(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=lp.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,lp).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const dp=new Hi,hp=new Hi;class up{constructor(e=new Hi,t=new Hi){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){dp.subVectors(e,this.start),hp.subVectors(this.end,this.start);const i=hp.dot(hp);let n=hp.dot(dp)/i;return t&&(n=ki(n,0,1)),n}closestPointToPoint(e,t,i){const n=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(n).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}const pp=new Hi;class fp extends ds{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new Js,n=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let e=0,t=1,i=32;e<i;e++,t++){const s=e/i*Math.PI*2,a=t/i*Math.PI*2;n.push(Math.cos(s),Math.sin(s),1,Math.cos(a),Math.sin(a),1)}i.setAttribute("position",new Us(n,3));const s=new sc({fog:!1,toneMapped:!1});this.cone=new pc(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),pp.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(pp),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const mp=new Hi,gp=new Nn,vp=new Nn;class yp extends pc{constructor(e){const t=bp(e),i=new Js,n=[],s=[],a=new Is(0,0,1),r=new Is(0,1,0);for(let e=0;e<t.length;e++){const i=t[e];i.parent&&i.parent.isBone&&(n.push(0,0,0),n.push(0,0,0),s.push(a.r,a.g,a.b),s.push(r.r,r.g,r.b))}i.setAttribute("position",new Us(n,3)),i.setAttribute("color",new Us(s,3));super(i,new sc({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,n=i.getAttribute("position");vp.copy(this.root.matrixWorld).invert();for(let e=0,i=0;e<t.length;e++){const s=t[e];s.parent&&s.parent.isBone&&(gp.multiplyMatrices(vp,s.matrixWorld),mp.setFromMatrixPosition(gp),n.setXYZ(i,mp.x,mp.y,mp.z),gp.multiplyMatrices(vp,s.parent.matrixWorld),mp.setFromMatrixPosition(gp),n.setXYZ(i+1,mp.x,mp.y,mp.z),i+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function bp(e){const t=[];!0===e.isBone&&t.push(e);for(let i=0;i<e.children.length;i++)t.push.apply(t,bp(e.children[i]));return t}class wp extends ua{constructor(e,t,i){super(new Hd(t,4,2),new Rs({wireframe:!0,fog:!1,toneMapped:!1})),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const xp=new Hi,Sp=new Is,Mp=new Is;class kp extends ds{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const n=new Bd(t);n.rotateY(.5*Math.PI),this.material=new Rs({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const s=n.getAttribute("position"),a=new Float32Array(3*s.count);n.setAttribute("color",new Ds(a,3)),this.add(new ua(n,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");Sp.copy(this.light.color),Mp.copy(this.light.groundColor);for(let e=0,i=t.count;e<i;e++){const n=e<i/2?Sp:Mp;t.setXYZ(e,n.r,n.g,n.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(xp.setFromMatrixPosition(this.light.matrixWorld).negate())}}class _p extends pc{constructor(e=10,t=10,i=4473924,n=8947848){i=new Is(i),n=new Is(n);const s=t/2,a=e/t,r=e/2,o=[],l=[];for(let e=0,c=0,d=-r;e<=t;e++,d+=a){o.push(-r,0,d,r,0,d),o.push(d,0,-r,d,0,r);const t=e===s?i:n;t.toArray(l,c),c+=3,t.toArray(l,c),c+=3,t.toArray(l,c),c+=3,t.toArray(l,c),c+=3}const c=new Js;c.setAttribute("position",new Us(o,3)),c.setAttribute("color",new Us(l,3));super(c,new sc({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class Tp extends pc{constructor(e=10,t=16,i=8,n=64,s=4473924,a=8947848){s=new Is(s),a=new Is(a);const r=[],o=[];if(t>1)for(let i=0;i<t;i++){const n=i/t*(2*Math.PI),l=Math.sin(n)*e,c=Math.cos(n)*e;r.push(0,0,0),r.push(l,0,c);const d=1&i?s:a;o.push(d.r,d.g,d.b),o.push(d.r,d.g,d.b)}for(let t=0;t<i;t++){const l=1&t?s:a,c=e-e/i*t;for(let e=0;e<n;e++){let t=e/n*(2*Math.PI),i=Math.sin(t)*c,s=Math.cos(t)*c;r.push(i,0,s),o.push(l.r,l.g,l.b),t=(e+1)/n*(2*Math.PI),i=Math.sin(t)*c,s=Math.cos(t)*c,r.push(i,0,s),o.push(l.r,l.g,l.b)}}const l=new Js;l.setAttribute("position",new Us(r,3)),l.setAttribute("color",new Us(o,3));super(l,new sc({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const Cp=new Hi,Ip=new Hi,Ap=new Hi;class Rp extends ds{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",void 0===t&&(t=1);let n=new Js;n.setAttribute("position",new Us([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new sc({fog:!1,toneMapped:!1});this.lightPlane=new dc(n,s),this.add(this.lightPlane),n=new Js,n.setAttribute("position",new Us([0,0,0,0,0,1],3)),this.targetLine=new dc(n,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),Cp.setFromMatrixPosition(this.light.matrixWorld),Ip.setFromMatrixPosition(this.light.target.matrixWorld),Ap.subVectors(Ip,Cp),this.lightPlane.lookAt(Ip),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Ip),this.targetLine.scale.z=Ap.length()}}const Pp=new Hi,Ep=new wa;class Dp extends pc{constructor(e){const t=new Js,i=new sc({color:16777215,vertexColors:!0,toneMapped:!1}),n=[],s=[],a={};function r(e,t){o(e),o(t)}function o(e){n.push(0,0,0),s.push(0,0,0),void 0===a[e]&&(a[e]=[]),a[e].push(n.length/3-1)}r("n1","n2"),r("n2","n4"),r("n4","n3"),r("n3","n1"),r("f1","f2"),r("f2","f4"),r("f4","f3"),r("f3","f1"),r("n1","f1"),r("n2","f2"),r("n3","f3"),r("n4","f4"),r("p","n1"),r("p","n2"),r("p","n3"),r("p","n4"),r("u1","u2"),r("u2","u3"),r("u3","u1"),r("c","t"),r("p","c"),r("cn1","cn2"),r("cn3","cn4"),r("cf1","cf2"),r("cf3","cf4"),t.setAttribute("position",new Us(n,3)),t.setAttribute("color",new Us(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const l=new Is(16755200),c=new Is(16711680),d=new Is(43775),h=new Is(16777215),u=new Is(3355443);this.setColors(l,c,d,h,u)}setColors(e,t,i,n,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,n.r,n.g,n.b),a.setXYZ(39,n.r,n.g,n.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap;Ep.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Op("c",t,e,Ep,0,0,-1),Op("t",t,e,Ep,0,0,1),Op("n1",t,e,Ep,-1,-1,-1),Op("n2",t,e,Ep,1,-1,-1),Op("n3",t,e,Ep,-1,1,-1),Op("n4",t,e,Ep,1,1,-1),Op("f1",t,e,Ep,-1,-1,1),Op("f2",t,e,Ep,1,-1,1),Op("f3",t,e,Ep,-1,1,1),Op("f4",t,e,Ep,1,1,1),Op("u1",t,e,Ep,.7,1.1,-1),Op("u2",t,e,Ep,-.7,1.1,-1),Op("u3",t,e,Ep,0,2,-1),Op("cf1",t,e,Ep,-1,0,1),Op("cf2",t,e,Ep,1,0,1),Op("cf3",t,e,Ep,0,-1,1),Op("cf4",t,e,Ep,0,1,1),Op("cn1",t,e,Ep,-1,0,-1),Op("cn2",t,e,Ep,1,0,-1),Op("cn3",t,e,Ep,0,-1,-1),Op("cn4",t,e,Ep,0,1,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Op(e,t,i,n,s,a,r){Pp.set(s,a,r).unproject(n);const o=t[e];if(void 0!==o){const e=i.getAttribute("position");for(let t=0,i=o.length;t<i;t++)e.setXYZ(o[t],Pp.x,Pp.y,Pp.z)}}const Lp=new un;class jp extends pc{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=new Float32Array(24),s=new Js;s.setIndex(new Ds(i,1)),s.setAttribute("position",new Ds(n,3)),super(s,new sc({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&Lp.setFromObject(this.object),Lp.isEmpty())return;const t=Lp.min,i=Lp.max,n=this.geometry.attributes.position,s=n.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=t.x,s[4]=i.y,s[5]=i.z,s[6]=t.x,s[7]=t.y,s[8]=i.z,s[9]=i.x,s[10]=t.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=t.z,s[15]=t.x,s[16]=i.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=i.x,s[22]=t.y,s[23]=t.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class zp extends pc{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=new Js;n.setIndex(new Ds(i,1)),n.setAttribute("position",new Us([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(n,new sc({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class Bp extends dc{constructor(e,t=1,i=16776960){const n=i,s=new Js;s.setAttribute("position",new Us([1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),s.computeBoundingSphere(),super(s,new sc({color:n,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=new Js;a.setAttribute("position",new Us([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),a.computeBoundingSphere(),this.add(new ua(a,new Rs({color:n,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const Np=new Hi;let Fp,Hp;class Up extends ds{constructor(e=new Hi(0,0,1),t=new Hi(0,0,0),i=1,n=16776960,s=.2*i,a=.2*s){super(),this.type="ArrowHelper",void 0===Fp&&(Fp=new Js,Fp.setAttribute("position",new Us([0,0,0,0,1,0],3)),Hp=new Qc(0,.5,1,5,1),Hp.translate(0,-.5,0)),this.position.copy(t),this.line=new dc(Fp,new sc({color:n,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new ua(Hp,new Rs({color:n,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,a)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{Np.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(Np,t)}}setLength(e,t=.2*e,i=.2*t){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class Vp extends pc{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=new Js;i.setAttribute("position",new Us(t,3)),i.setAttribute("color",new Us([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));super(i,new sc({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(e,t,i){const n=new Is,s=this.geometry.attributes.color.array;return n.set(e),n.toArray(s,0),n.toArray(s,3),n.set(t),n.toArray(s,6),n.toArray(s,9),n.set(i),n.toArray(s,12),n.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Gp{constructor(){this.type="ShapePath",this.color=new Is,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Kc,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,n){return this.currentPath.quadraticCurveTo(e,t,i,n),this}bezierCurveTo(e,t,i,n,s,a){return this.currentPath.bezierCurveTo(e,t,i,n,s,a),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(e,t){const i=t.length;let n=!1;for(let s=i-1,a=0;a<i;s=a++){let i=t[s],r=t[a],o=r.x-i.x,l=r.y-i.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(i=t[a],o=-o,r=t[s],l=-l),e.y<i.y||e.y>r.y)continue;if(e.y===i.y){if(e.x===i.x)return!0}else{const t=l*(e.x-i.x)-o*(e.y-i.y);if(0===t)return!0;if(t<0)continue;n=!n}}else{if(e.y!==i.y)continue;if(r.x<=e.x&&e.x<=i.x||i.x<=e.x&&e.x<=r.x)return!0}}return n}const i=Ed.isClockWise,n=this.subPaths;if(0===n.length)return[];let s,a,r;const o=[];if(1===n.length)return a=n[0],r=new od,r.curves=a.curves,o.push(r),o;let l=!i(n[0].getPoints());l=e?!l:l;const c=[],d=[];let h,u,p=[],f=0;d[f]=void 0,p[f]=[];for(let t=0,r=n.length;t<r;t++)a=n[t],h=a.getPoints(),s=i(h),s=e?!s:s,s?(!l&&d[f]&&f++,d[f]={s:new od,p:h},d[f].s.curves=a.curves,l&&f++,p[f]=[]):p[f].push({h:a,p:h[0]});if(!d[0])return function(e){const t=[];for(let i=0,n=e.length;i<n;i++){const n=e[i],s=new od;s.curves=n.curves,t.push(s)}return t}(n);if(d.length>1){let e=!1,i=0;for(let e=0,t=d.length;e<t;e++)c[e]=[];for(let n=0,s=d.length;n<s;n++){const s=p[n];for(let a=0;a<s.length;a++){const r=s[a];let o=!0;for(let s=0;s<d.length;s++)t(r.p,d[s].p)&&(n!==s&&i++,o?(o=!1,c[s].push(r)):e=!0);o&&c[n].push(r)}}i>0&&!1===e&&(p=c)}for(let e=0,t=d.length;e<t;e++){r=d[e].s,o.push(r),u=p[e];for(let e=0,t=u.length;e<t;e++)r.holes.push(u[e].h)}return o}}const Wp=function(){const e=new ArrayBuffer(4),t=new Float32Array(e),i=new Uint32Array(e),n=new Uint32Array(512),s=new Uint32Array(512);for(let e=0;e<256;++e){const t=e-127;t<-27?(n[e]=0,n[256|e]=32768,s[e]=24,s[256|e]=24):t<-14?(n[e]=1024>>-t-14,n[256|e]=1024>>-t-14|32768,s[e]=-t-1,s[256|e]=-t-1):t<=15?(n[e]=t+15<<10,n[256|e]=t+15<<10|32768,s[e]=13,s[256|e]=13):t<128?(n[e]=31744,n[256|e]=64512,s[e]=24,s[256|e]=24):(n[e]=31744,n[256|e]=64512,s[e]=13,s[256|e]=13)}const a=new Uint32Array(2048),r=new Uint32Array(64),o=new Uint32Array(64);for(let e=1;e<1024;++e){let t=e<<13,i=0;for(;0==(8388608&t);)t<<=1,i-=8388608;t&=-8388609,i+=947912704,a[e]=t|i}for(let e=1024;e<2048;++e)a[e]=939524096+(e-1024<<13);for(let e=1;e<31;++e)r[e]=e<<23;r[31]=1199570944,r[32]=2147483648;for(let e=33;e<63;++e)r[e]=2147483648+(e-32<<23);r[63]=3347054592;for(let e=1;e<64;++e)32!==e&&(o[e]=1024);return{floatView:t,uint32View:i,baseTable:n,shiftTable:s,mantissaTable:a,exponentTable:r,offsetTable:o}}();const qp={toHalfFloat:function(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=ki(e,-65504,65504),Wp.floatView[0]=e;const t=Wp.uint32View[0],i=t>>23&511;return Wp.baseTable[i]+((8388607&t)>>Wp.shiftTable[i])},fromHalfFloat:function(e){const t=e>>10;return Wp.uint32View[0]=Wp.mantissaTable[Wp.offsetTable[t]+(1023&e)]+Wp.exponentTable[t],Wp.floatView[0]}};class Yp extends fa{constructor(e,t,i,n,s,a){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),super(e,t,i,n,s,a)}}class Kp extends Zc{constructor(e,t,i,n){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),super(e,t,i,n)}}class Xp extends Jc{constructor(e,t,i,n){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),super(e,t,i,n)}}class Zp extends $c{constructor(e,t,i,n,s,a,r){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),super(e,t,i,n,s,a,r)}}class Jp extends Qc{constructor(e,t,i,n,s,a,r,o){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),super(e,t,i,n,s,a,r,o)}}class Qp extends td{constructor(e,t){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),super(e,t)}}class $p extends Ld{constructor(e,t){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),super(e,t)}}class ef extends zd{constructor(e,t){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),super(e,t)}}class tf extends Xc{constructor(e,t,i,n){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),super(e,t,i,n)}}class nf extends Bd{constructor(e,t){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),super(e,t)}}class sf extends La{constructor(e,t,i,n){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(e,t,i,n)}}class af extends ed{constructor(e,t,i,n){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),super(e,t,i,n)}}class rf extends Nd{constructor(e,t,i,n,s,a){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),super(e,t,i,n,s,a)}}class of extends Fd{constructor(e,t){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),super(e,t)}}class lf extends Hd{constructor(e,t,i,n,s,a,r){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),super(e,t,i,n,s,a,r)}}class cf extends Ud{constructor(e,t){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),super(e,t)}}class df extends Vd{constructor(e,t,i,n,s){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),super(e,t,i,n,s)}}class hf extends Gd{constructor(e,t,i,n,s,a){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),super(e,t,i,n,s,a)}}class uf extends Wd{constructor(e,t,i,n,s){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),super(e,t,i,n,s)}}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:n}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=n)},function(e,t,i){(function(t){const n=i(4),s=i(39),a=i(12);e.exports.keyboardMap=["","","","CANCEL","","","HELP","","BACK_SPACE","TAB","","","CLEAR","ENTER","ENTER_SPECIAL","","SHIFT","CONTROL","ALT","PAUSE","CAPS_LOCK","KANA","EISU","JUNJA","FINAL","HANJA","","ESCAPE","CONVERT","NONCONVERT","ACCEPT","MODECHANGE","SPACE","PAGE_UP","PAGE_DOWN","END","HOME","LEFT","UP","RIGHT","DOWN","SELECT","PRINT","EXECUTE","PRINTSCREEN","INSERT","DELETE","","0","1","2","3","4","5","6","7","8","9","COLON","SEMICOLON","LESS_THAN","EQUALS","GREATER_THAN","QUESTION_MARK","AT","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","OS_KEY","","CONTEXT_MENU","","SLEEP","NUMPAD0","NUMPAD1","NUMPAD2","NUMPAD3","NUMPAD4","NUMPAD5","NUMPAD6","NUMPAD7","NUMPAD8","NUMPAD9","MULTIPLY","ADD","SEPARATOR","SUBTRACT","DECIMAL","DIVIDE","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","F13","F14","F15","F16","F17","F18","F19","F20","F21","F22","F23","F24\t\t","NUM_LOCK","SCROLL_LOCK","WIN_OEM_FJ_JISHO","WIN_OEM_FJ_MASSHOU","WIN_OEM_FJ_TOUROKU","WIN_OEM_FJ_LOYA","WIN_OEM_FJ_ROYA\t\t","","CIRCUMFLEX","EXCLAMATION","DOUBLE_QUOTE","HASH","DOLLAR","PERCENT","AMPERSAND","UNDERSCORE","OPEN_PAREN","CLOSE_PAREN","ASTERISK","PLUS","PIPE","HYPHEN_MINUS","OPEN_CURLY_BRACKET","CLOSE_CURLY_BRACKET","TILDE\t","VOLUME_MUTE","VOLUME_DOWN","VOLUME_UP","","",";","=",",","MINUS","PERIOD","SLASH","BACK_QUOTE\t\t\t\t\t\t","","","[","\\","]","QUOTE","","META","ALTGR","","WIN_ICO_HELP","WIN_ICO_00","",";","=",",","-",".","/","~","WIN_OEM_PA3","WIN_OEM_WSCTRL","WIN_OEM_CUSEL","WIN_OEM_ATTN","WIN_OEM_FINISH","WIN_OEM_COPY","WIN_OEM_AUTO","WIN_OEM_ENLW","WIN_OEM_BACKTAB","ATTN","CRSEL","EXSEL","EREOF","PLAY","ZOOM","","PA1","WIN_OEM_CLEAR","","","","","","","","","[","\\","]","'"],e.exports.compressNumArray=e=>{for(var t=null,i=!0,n=e.length-1;n>=0;--n)"number"==typeof e[n]?null===t?t=0:(t++,e[n]=t,e.splice(n+1)):(t=null,i=!1);return i?e[0]:e},e.exports.estKBytes=e=>.001*(encodeURI(e).split(/%..|./).length-1),e.exports.precisionRound=(t,i,n)=>{t=e.exports.roundNumP(t,i);var s=Math.pow(10,i||1)/10;return t.countDecimals()!=i||e.exports.isMultiple(t,n)||(t+=100*t%s>5?n/2:-n/2),e.exports.roundNumP(t,i)},e.exports.roundNumP=(e,t)=>+(Math.round(e+"e+"+t)+"e-"+t),e.exports.isMultiple=(e,t)=>Math.round(e/t)/(1/t)===e,Number.prototype.round=function(e){return Math.round(this*Math.pow(10,e||0))/Math.pow(10,e||0)},String.prototype.escape=function(){return(this+"").replace(/[\\"']/g,"\\$&").replace(/\u0000/g,"\\0")},e.exports.escapeStr=e=>(e+"").replace(/[\\"']/g,"\\$&").replace(/\u0000/g,"\\0"),Number.prototype.ceilToNearest=function(e){return Math.ceil(this/e)*e},Number.prototype.floorToNearest=function(e){return Math.floor(this/e)*e},e.exports.findNearest=(t,i,n)=>{for(var s,a=t,r=i,o=null,l=0,c=0;c<n.length;c+=2)s=e.exports.getDistance(t,i,n[c],n[c+1]),(null==o||s<o)&&(o=s,a=n[c],r=n[c+1],l=c);return[a,r,l]},e.exports.roundToClos=(e,t)=>t*Math.round(e/t),e.exports.roundToNearest=(e,t)=>e>0?Math.ceil(e/t)*t:e<0?Math.floor(e/t)*t:parseFloat(e),Number.prototype.roundToNearest=function(e){return this>0?Math.ceil(this/e)*e:this<0?Math.floor(this/e)*e:this},Number.prototype.countDecimals=function(){return Math.floor(this.valueOf())===this.valueOf()?0:this.toString().split(".")[1].length||0},e.exports.capFirst=e=>e.charAt(0).toUpperCase()+e.slice(1),e.exports.isURL=e=>{try{return/^(https?:\/\/)?((([a-z\d]([a-z\d-]*[a-z\d])*)\.)+[a-z]{2,}|((\d{1,3}\.){3}\d{1,3}))(\:\d+)?(\/[-a-z\d%@_.~+&:]*)*(\?[;&a-z\d%@_.,~+&:=-]*)?(\#[-a-z\d_]*)?$/i.test(e)}catch(e){}return!1},e.exports.arrayAverage=e=>{for(var t=0,i=0;i<e.length;i++)t+=e[i];return t/e.length},e.exports.countInArray=(e,t)=>{for(var i=0,n=0;n<e.length;n++)e[n]===t&&i++;return i},e.exports.formatNum=(e,t=1)=>{e||=0;var i=Math.floor(Math.log(Math.abs(e))/Math.log(1e3)),n="kmb"[i-1];return n?(e/Math.pow(1e3,i)).toFixed(t)+n:""+e};var r=["","k","m","b","t"];e.exports.formatNumYT=e=>{var t=e||0;if(e>=1e3){for(var i=Math.floor((""+e).length/3),n="",s=2;s>=1;s--){if(((n=parseFloat((0==i?e:e/Math.pow(1e3,i)).toPrecision(s)))+"").replace(/[^a-zA-Z 0-9]+/g,"").length<=2)break}n%1!=0&&(n=n.toFixed(1)),t=n+r[i]}return t},e.exports.convCoNum=e=>parseFloat(e.replace(/,/g,"")),e.exports.randFloat=(e,t)=>Math.random()*(t-e)+e,e.exports.randInt=(e,t)=>Math.floor(Math.random()*(t-e+1))+e,e.exports.randInt2=(e,t)=>Math.sign(Math.random()-.5)*(Math.floor(Math.random()*(t-e+1))+e),e.exports.clampNumber=(e,t,i)=>Math.max(t,Math.min(e,i)),e.exports.mapNumber=(e,t,i,n,s)=>(e-t)*(s-n)/(i-t)+n,e.exports.getPercentDiff=(e,t)=>Math.round((t-e)/e*100,1),e.exports.calcPercent=(e,t)=>e/100*t,e.exports.getRandom=t=>t[e.exports.randInt(0,t.length-1)],e.exports.getDistance=(e,t,i,n)=>Math.sqrt((i-=e)*i+(n-=t)*n),e.exports.getD3D=(e,t,i,n,s,a)=>{var r=e-n,o=t-s,l=i-a;return Math.sqrt(r*r+o*o+l*l)},e.exports.getObDis=(e,t)=>{var i=e.x-t.x,n=e.y-t.y,s=e.z-t.z;return Math.sqrt(i*i+n*n+s*s)},e.exports.getAnglesSSS=(e,t,i)=>{var n=Math.acos((t*t+i*i-e*e)/(2*t*i)),s=Math.acos((i*i+e*e-t*t)/(2*i*e)),a=Math.PI-n-s;return[-n-Math.PI/2,s,a]},e.exports.getAngleDst=(e,t)=>Math.atan2(Math.sin(t-e),Math.cos(e-t)),e.exports.getAngleDist2=(e,t)=>{var i=Math.abs(t-e)%(2*Math.PI);return i>Math.PI?2*Math.PI-i:i},e.exports.getXDire=(t,i,n,s,a,r)=>{var o=Math.abs(i-a),l=e.exports.getD3D(t,i,n,s,a,r);return Math.asin(o/l)*(i>a?-1:1)},e.exports.toRad=e=>e*(Math.PI/180),e.exports.toDeg=e=>e*(180/Math.PI),e.exports.getDir=(e,t,i,n)=>Math.atan2(t-n,e-i),e.exports.getDrs=(e,t,i)=>{var n=t.x-e.x,s=t.y+(i||0)-e.y,a=t.z-e.z,r=Math.sqrt(n*n+a*a),o=-Math.atan2(s,r);return[-Math.atan2(-n,a),o]},e.exports.lerp=(e,t,i)=>e+(t-e)*i,e.exports.lerpAngle=(e,t,i)=>{Math.abs(t-e)>Math.PI&&(e>t?t+=2*Math.PI:e+=2*Math.PI);var n=t+(e-t)*i;return n>=0&&n<=2*Math.PI?n:n%(2*Math.PI)},e.exports.orderByDst=(e,t)=>e.dst-t.dst,e.exports.orderByDistance=(e,t)=>t.distance-e.distance,e.exports.orderByNum=(e,t)=>e-t,e.exports.orderByScore=(e,t)=>t.score-e.score,e.exports.orderByKills=(e,t)=>t.kills-e.kills,e.exports.orderByKD=(e,t)=>e.kdr===t.kdr&&e.kills&&t.kills?t.kills-e.kills:t.kdr-e.kdr,e.exports.capFirst=e=>e.charAt(0).toUpperCase()+e.slice(1),e.exports.truncateText=(t,i,n,s)=>e.exports.isNumber(i)&&t.length>i?n?t.substring(s||0,i):t.substring(s||0,i)+"...":t+"",e.exports.replaceText=(e,t,i)=>(e+"").replace(t+"",i+""),e.exports.textContains=(e,t)=>!!(e+"").includes(t+""),e.exports.cleanseString=e=>e?e.replace(/['"]+/g,""):e,e.exports.randomString=(e,t)=>{var i="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";n+=t?"":"0123456789";for(var s=0;s<e;s++)i+=n.charAt(Math.floor(Math.random()*n.length));return i},e.exports.formatNumCash=e=>parseFloat(Math.round(100*e)/100).toFixed(2),e.exports.formatConstName=e=>e.toLowerCase().split("_").map((e=>e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase())).join(" "),e.exports.getKeyName=t=>t<0?"UNBOUND":2e4==t?"SCROLL":t>1e4?"M"+(t-1e4):e.exports.keyboardMap[t],e.exports.formatNumCash=e=>parseFloat(Math.round(100*e)/100).toFixed(2);var o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];e.exports.getDate=(e,t)=>{if(!e)return"None";e=e.split(/[-A-Z :\.]/i);var i=new Date(e[0],--e[1],e[2],e[3],e[4],e[5]),n=new Date(i.getTime());return(t?n.getHours()+":"+(n.getMinutes()+"").padStart(2,"0")+" ":"")+n.getDate()+" "+o[n.getMonth()].slice(0,3)+" "+n.getFullYear()},e.exports.getGraphDate=(e,t,i)=>("0"+e).slice(-2)+" "+o[t].slice(0,3)+(i?" "+(i+"").slice(-2):""),e.exports.getDateTime=()=>(new Date).toLocaleString(),e.exports.getTime=(e,t,i,n=100,s,a=1)=>{if("inf"==e)return"Infinite";var r=e%1e3/n;(r=(1e3==n?parseFloat(r):parseInt(r))||0)&&a&&(r=r.round(a)),r&&=(r+"").replace("0.","");var o=parseInt(e/1e3%60),l=parseInt(e/6e4%60),c=Math.floor(e/36e5%24),d=Math.floor(e/864e5);return d=d<10?"0"+d:d,c=s&&d&&c<10?"0"+c:c,(s&&d?d+":":"")+(i&&(c||d)?c+":":"")+(l=l<10?"0"+l:l)+":"+(o=o<10?"0"+o:o)+(t?"."+r:"")},e.exports.commaFormatNum=(e,t)=>!e&&t?t:e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),e.exports.commaNumber=e=>(e=e||0).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),e.exports.commaFloat=t=>{const i=(t=t||0).toString().split(".");return i[0]=e.exports.commaNumber(i[0]),i.join(".")},e.exports.getReadableTime=(e,t,i,n)=>{if(!e&&i)return i;var s=Math.floor(e/1e3),a=Math.floor(s/60);s%=60;var r=Math.floor(a/60);a%=60;var o=Math.floor(r/24);r%=24;var l=Math.floor(o/365);return(l?l+"y ":"")+((o%=365)?o+"d ":"")+(r?r+"h ":"")+(n?a?a+"m ":"":(a||0)+"m ")+(t?n?s?s+"s ":"":s+"s":"")},e.exports.getRoundTim=e=>{var t=e/1e3|0,i=t/60|0;t-=60*i;var n=i/60|0;i-=60*n;var s=n/24|0;return n-=24*s,s?s+" Day"+(s>1?"s ":" ")+n+" Hour"+(n>1?"s":""):n?n+" Hour"+(n>1?"s ":" ")+i+" Minute"+(i>1?"s":""):i+" Minute"+(i>1?"s":"")},e.exports.getReadableTime2=e=>{if(e<0)return"just now";var t=Math.floor(e/1e3),i=Math.floor(t/60),n=Math.floor(i/60);i%=60;var s=Math.floor(n/24);return n%=24,s?s+"d ago":n?n+"h ago":i?i+"m ago":"just now"},e.exports.getTimeH=e=>(seconds=Math.floor(e/1e3%60),minutes=Math.floor(e/6e4%60),hours=Math.floor(e/36e5%24),hours=hours<10?"0"+hours:hours,minutes=minutes<10?"0"+minutes:minutes,seconds=seconds<10?"0"+seconds:seconds,hours+":"+minutes+":"+seconds),e.exports.getChargedTime=e=>{var t,i=parseInt(e%1e3/100);return(t=(t=Math.floor(e/1e3%60))<10?"0"+t:t)+":"+i},e.exports.scrambleS=e=>e&&e.replace?e.replace(/.(.)?/g,"$1")+("d"+e).replace(/.(.)?/g,"$1"):e,e.exports.fixTo=(e,t)=>parseFloat(e.toFixed(t)),e.exports.fixFloat=(e,t)=>+parseFloat(e).toFixed(t),e.exports.sanitizeStr=e=>e&&e.replace?e.replace(/<|>|&/g,"").replace(/[^\x00-\x7F]/g,""):e,e.exports.limit=(e,t)=>e<-t?-t:e>t?t:e,e.exports.limitMM=(e,t,i)=>e<t?t:e>i?i:e,e.exports.limitMMD=(e,t,i,n)=>e<t||e>i?n:e,e.exports.inRange=(e,t,i)=>e>=t&&e<=i,e.exports.cropVal=(e,t)=>e<=t&&e>=-t?0:e,e.exports.isNumber=e=>null!=e&&"number"==typeof e&&!isNaN(e)&&isFinite(e),e.exports.arrayInts=t=>{for(var i=0;i<t.length;++i)if(!e.exports.isNumber(t[i]))return!1;return!0},e.exports.isArray=e=>Array.isArray(e),e.exports.isString=e=>e&&"string"==typeof e,e.exports.isObject=e=>{try{return null!==e&&"object"==typeof e&&!1===Array.isArray(e)}catch(e){return!1}},e.exports.isHexColor=e=>/^#([0-9A-F]{3}){1,2}$/i.test(e),e.exports.emptyString=e=>!e||0===e.length||/^\s*$/.test(e)||!e.trim(),e.exports.compareString=(e,t)=>"string"==typeof e&&"string"==typeof t&&(e.toLowerCase().indexOf(t.toLowerCase())>=0||t.toLowerCase().indexOf(e.toLowerCase())>=0),e.exports.shuffleArray=e=>{for(let t=e.length;t--;){const i=Math.floor(Math.random()*(t+1));[e[t],e[i]]=[e[i],e[t]]}return e},e.exports.yateShuffle=e=>{for(let t,i=e.length-1;i>0;i--)t=Math.floor(Math.random()*(i+1)),[e[i],e[t]]=[e[t],e[i]]},e.exports.lineInRect=(e,t,i,n,s,a,r,o,l,c,d,h)=>{var u=(r-e)*n,p=(c-e)*n,f=(l-i)*a,m=(h-i)*a,g=(o-t)*s,v=(d-t)*s,y=Math.max(Math.max(Math.min(u,p),Math.min(f,m)),Math.min(g,v)),b=Math.min(Math.min(Math.max(u,p),Math.max(f,m)),Math.max(g,v));return b>=0&&y<=b&&y},e.exports.similar=(e,t,i)=>Math.abs(e-t)<=(i||0),e.exports.pointInBox3D=(e,t,i,n,s)=>(s=s||0,e>=n.x-(n.width||n.w||0)-s&&e<=n.x+(n.width||n.w||0)+s&&t>=n.y-(n.height||n.h||0)-s&&t<=n.y+(n.height||n.h||0)+s&&i>=n.z-(n.length||n.l||0)-s&&i<=n.z+(n.length||n.l||0)+s),e.exports.pointInBox=(e,t,i,n,s,a,r)=>r?e>=i&&e<=s&&t>=n&&t<=a:e>i&&e<s&&t>n&&t<a,e.exports.sharePos=(e,t,i)=>(i=i||0,Math.abs(e.x-t.x)<=i&&Math.abs(e.y-t.y)<=i&&Math.abs(e.z-t.z)<=i&&Math.abs(e.d-t.d)<=i),e.exports.cdv={x:"width",y:"height",z:"length"},e.exports.boxIntersection=(t,i,n,s,a)=>{var r=e.exports.cdv[n],o=e.exports.cdv[s],l=t[n]-t[r]-.1,c=i[n]-i[r]-.1,d=t[n]+t[r]+.1,h=i[n]+i[r]+.1,u=t[s]-t[o]-.1,p=i[s]-i[o]-.1,f=t[s]+t[o]+.1,m=i[s]+i[o]+.1,g=Math.max(l,c),v=Math.min(d,h);if(v>=g){var y=Math.max(u,p),b=Math.min(f,m);if(b>=y){for(var w=[{[n]:g,[s]:y,d:a[0]},{[n]:v,[s]:b,d:a[1]},{[n]:g,[s]:b,d:a[2]},{[n]:v,[s]:y,d:a[3]}],x=w.length-1;x>=0;--x)(w[x][n]==d&&w[x][n]==h||w[x][n]==l&&w[x][n]==c||w[x][s]==f&&w[x][s]==m||w[x][s]==u&&w[x][s]==p||e.exports.pointInBox(w[x][n],w[x][s],l,u,d,f)||e.exports.pointInBox(w[x][n],w[x][s],c,p,h,m))&&(w[x].dontUse=!0);return w}}return null},e.exports.boxCornerIntersection=(t,i,n,s)=>{for(var a=e.exports.cdv[n],r=e.exports.cdv[s],o=t[n]+t[a],l=i[n]+i[a],c=t[n]-t[a],d=i[n]-i[a],h=t[s]+t[r],u=i[s]+i[r],p=t[s]-t[r],f=i[s]-i[r],m=[{[n]:c,[s]:p,d:Math.PI/2},{[n]:c,[s]:h,d:Math.PI},{[n]:o,[s]:p,d:0},{[n]:o,[s]:h,d:-Math.PI/2}],g=m.length-1;g>=0;--g)m[g].i=g,e.exports.pointInBox(m[g][n],m[g][s],d,f,l,u,!0)||m.splice(g,1);return m.length?m:null},e.exports.getIntersection=(t,i,n)=>{var s=e.exports.cdv[n],a=i[n]-i[s],r=t[n]-t[s],o=t[n]+t[s],l=i[n]+i[s],c=Math.max(r,a),d=Math.min(o,l);if(d>=c){var h=(d-c)/2;return{[n]:c+h,[s]:h}}return null},e.exports.limitRectVal=(t,i,n)=>{var s=e.exports.cdv[n];if(t[n]-t[s]<i[n]-i[s]){var a=(i[n]-i[s]-(t[n]-t[s]))/2;t[s]-=a,t[n]+=a}if(t[n]+t[s]>i[n]+i[s]){a=(t[n]+t[s]-(i[n]+i[s]))/2;t[n]-=a,t[s]-=a}},e.exports.getMaxRect=(t,i,n)=>{for(var s,a,r,o,l=e.exports.cdv[i],c=e.exports.cdv[n],d=0;d<t.length;++d)s=null==s?t[d][i]-t[d][l]:Math.min(t[d][i]-t[d][l],s),r=null==r?t[d][i]+t[d][l]:Math.max(t[d][i]+t[d][l],r),a=null==a?t[d][n]-t[d][c]:Math.min(t[d][n]-t[d][c],a),o=null==o?t[d][n]+t[d][c]:Math.max(t[d][n]+t[d][c],o);return{[i]:(s+r)/2,[n]:(a+o)/2,[l]:Math.abs(r-s)/2,[c]:Math.abs(o-a)/2}},e.exports.limitRect=(t,i,n,s,a,r,o,l)=>{var c=e.exports.getMaxRect(r,o,l),d=e.exports.cdv[o],h=e.exports.cdv[l],u={[o]:t,[l]:i,[h]:s,[d]:n};if(e.exports.limitRectVal(u,c,o),e.exports.limitRectVal(u,c,l),0==a||a==Math.PI){var p=u[d];u[d]=u[h],u[h]=p}return u},e.exports.progressOnLine=(e,t,i,n,s,a)=>{var r=i-e,o=n-t,l=Math.sqrt(r*r+o*o);return((r/=l)*(s-e)+(o/=l)*(a-t))/Math.sqrt(Math.pow(i-e,2)+Math.pow(n-t,2))},e.exports.generateSID=e=>{for(var t=0,i=!0;i;){i=!1,t++;for(var n=0;n<e.length;++n)if(e[n].sid==t){i=!0;break}}return t},e.exports.levelIconId=e=>Math.max(Math.min(n.maxLevel-1,e.roundToNearest(2)-1),0);const l=e=>e.level>1?Math.pow(e.level/n.rankVar,2):0,c=e=>parseInt(e.score-l(e));e.exports.currentXp=c;const d=e=>parseInt(Math.pow((e.level+1)/n.rankVar,2)-l(e));e.exports.xpToNextLevel=d,e.exports.xpBarText=e=>c(e)+" / "+d(e),e.exports.copyToClipboard=e=>{const t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t);const i=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);t.select(),document.execCommand("copy"),document.body.removeChild(t),i&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(i))};var h=(e,t)=>e.concat(t);Array.prototype.flatMap=function(e){return t=e,this.map(t).reduce(h,[]);var t};const{Encoder:u,Decoder:p}=i(66),f=new u,m=new p;e.exports.serializePacket=(e,...t)=>f.encode([e,...t]),e.exports.encodePacket=(t,i)=>{let n=new Uint8Array(t.length+2);return n.set(e.exports.encodeShort(i),n.length-2),n.set(t,0),n},e.exports.shouldUpdate=(e,t,i)=>e%(t/i)==0,e.exports.decodePacket=t=>{t=new Uint8Array(t);let i=e.exports.decodeShort(t[t.length-2],t[t.length-1]),n=t.slice(0,t.length-2),s=m.decode(n);if(!Array.isArray(s)||s.length<1)throw"Invalid message";return[i,s[0],s.slice(1)]},e.exports.rotateNumber=(e,t)=>e+t&255,e.exports.encodeShort=e=>[e>>4&15,15&e],e.exports.decodeShort=(e,t)=>(e<<4)+t,e.exports.thumbnailSize=e=>parseInt(.75*e.replace(/=/g,"").length)/1e3,e.exports.rgbToHex=(e,t,i)=>{for(var n=(e<<16|t<<8|i).toString(16);n.length<6;)n="0"+n;return"#"+n},e.exports.hexToRGB=e=>e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,((e,t,i,n)=>"#"+t+t+i+i+n+n)).substring(1).match(/.{2}/g).map((e=>parseInt(e,16))),e.exports.hexFromHue=t=>{var i=t/60,n=255*(1-Math.abs(i%2-1)),s=Math.floor(i);return e.exports.rgbToHex(s<1||s>4?255:1==s||4==s?n:0,0==s||3==s?n:1==s||2==s?255:0,0==s||1==s?0:3==s||4==s?255:n)},e.exports.invertHex=e=>"#"+(16777215^+("0x1"+(e=(e+"").replace("#","")))).toString(16).substr(1).toUpperCase(),e.exports.versionifyUrl=e=>e+"?build="+s,e.exports.assetsUrl=(e,t,i)=>(!t&&e.startsWith("/")&&(e=e.slice(1)),this.versionifyUrl(i?"./"+e:"https://assets.krunker.io/"+e)),e.exports.userAssetsUrl=(e,t,i,n)=>{!t&&e.startsWith("/")&&(e=e.slice(1));e="https://user-assets.krunker.io/"+e;return n?this.versionifyUrl(e):e},e.exports.getSkinsFromCreator=(e,t)=>t.skins.filter((t=>!!t.creators&&t.creators.indexOf(e.toLowerCase())>-1)),e.exports.canUseSkin=(e,t,i,n,s,a)=>{var r=t[e];return!!r&&(!!i&&!!i.isDev||(!s||null==r.weapon||s.id==r.weapon-1)&&(null==a||a==r.type)&&(12!=a||!!s&&!!s.charm)&&(!!r.kpd&&!!i&&(!!i.isMod||!!i.isDeputy)||(null==r.classIndex||r.classIndex==n)&&(!!r.creators&&!!i&&r.creators.indexOf((i.name||"").toLowerCase())>-1||!!r.streamers&&!!i&&!!i.twitch&&r.streamers.indexOf((i.twitch||"").toLowerCase())>-1||!!r.free||!r.creator&&(r.seas||0)>=6&&!!i&&!!i.isSkinMaker&&!r.blocked||i&&i.hasSkin(e))))},e.exports.isFreeSkin=(e,t)=>{var i=t[e];return!!i&&!!i.free},e.exports.getPreview=(t,i)=>e.exports.assetsUrl("/textures/"+(!t.type||t.type!=a.PLAYER_CARD&&t.type!=a.SPRAY?"previews/"+(t.type&&t.type!=a.MELEE?"cosmetics/"+(t.assetType||t.type)+"_"+t.id+(t.tex?"_"+t.tex:""):i.types[t.assetType||t.type||0]+(t.type&&t.type==a.MELEE?t.id+(null==t.pat?null==t.tex?"":"_"+t.tex:"_c"+t.pat):(t.weapon||0)+"_"+(null==t.mid?null==t.pat?t.tex?t.tex:t.id:"c"+t.pat:"m"+t.mid+(null==t.midT?"":"_"+t.midT)))):i.types[t.type]+t.id)+"."+(t.texExt||"png"),!1,t.local),e.exports.getPreviewExport=e=>e.thumbnail.split("/").slice(-1).pop().split("?")[0],e.exports.getReModel=(e,t)=>e.types[t.assetType||t.type||0]+(t.weapon||0)+"_"+(t.midT||t.mid),e.exports.getFrameAnim=(e,t)=>e.frames?"animation: "+t+e.frames+" "+(1+e.frameT/1e3)+"s steps("+e.frames+") infinite;":"",e.exports.isDropbox=e=>/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)?(dropbox|dropboxusercontent|dl\.dropboxusercontent)\.com\//g.test(e),e.exports.isUserAsset=e=>/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)?(user-assets\.krunker)\.io\//g.test(e)||/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)?(krunker-user-assets\.nyc3\.cdn\.digitaloceanspaces)\.com\//g.test(e)||/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)?(krunker-user-assets\.nyc3\.digitaloceanspaces)\.com\//g.test(e)||/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)?(storage\.googleapis\.com\/user-assets.krunker)\.io\//g.test(e),e.exports.replaceUserAsset=e=>e=e.replace("krunker-user-assets.nyc3.cdn.digitaloceanspaces.com","user-assets.krunker.io").replace("krunker-user-assets.nyc3.digitaloceanspaces.com","user-assets.krunker.io"),e.exports.toSocial=t=>"./social.html?p=profile&q="+e.exports.cleanseString(t),e.exports.getFontSizeToFit=(e,t,i)=>{var n=document.createElement("canvas").getContext("2d");return n.font="1px "+t,i/n.measureText(e).width},e.exports.ctxText=(e,t,i,n,s,a,r,o,l)=>{e.save(1),e.translate(~~n,~~s),r&&(e.font=r+"px GameFont"),e.fillStyle=i,a&&(e.textAlign=a),e.strokeStyle=o||"#626262",e.lineWidth=l||1,e.miterLimit=2,e.lineJoin="round",e.strokeText(t,0,0),e.fillText(t,0,0),e.restore(-1)},e.exports.getLines=(e,t,i)=>{for(var n=t.split(" "),s=[],a=n[0],r=1;r<n.length;r++){var o=n[r];e.measureText(a+" "+o).width<i?a+=" "+o:(s.push(a),a=o)}return s.push(a),s},e.exports.createCanvasText=(t,i,s,a,r,o,l,c,d,h,u)=>{var p=0,f=0;i>t?(p=1,f=t/i):i<t?(p=i/t,f=1):(p=1,f=1);var m=document.createElement("canvas"),g=m.getContext("2d"),v=1024;m.width=v*f,m.height=v*p,l||(g.fillStyle=o,g.fillRect(0,0,m.width,m.height));var y=a;u&&(y*=Math.min(v/t,v/i)),g.font=y+"px GameFont",s=s.substring(0,n.signTextLimit-1),g.textAlign=2==c?"right":1==c?"center":"left";var b=2*y,w=g.measureText("M").width/2;w=2==c?m.width-w:1==c?m.width/2:w;for(var x=1.2*g.measureText("M").width,S=s.split("\\n"),M=null,k=0;k<S.length;++k){M=e.exports.getLines(g,S[k],m.width-y);for(var _=0;_<M.length&&(e.exports.ctxText(g,M[_],r,w,b,null,null,d,h),(b+=x)<=m.height);++_);}return m},e.exports.createLeaderText=(t,i,n,s)=>{var a=0,r=0;i>t?(a=1,r=t/i):i<t?(a=i/t,r=1):(a=1,r=1);var o=document.createElement("canvas"),l=o.getContext("2d"),c=1024;o.width=c*r,o.height=c*a;var d=s.fcolr||"#000",h=s.bcolr||"#fff";s.noBVis||(l.fillStyle=h,l.fillRect(0,0,o.width,o.height));var u=s.fontSize||10;s.noSCF&&(u*=Math.min(c/t,c/i)),l.font=u+"px GameFont",l.textAlign="left";var p=2*u,f=l.measureText("M").width/2,m=1.2*l.measureText("M").width;e.exports.ctxText(l,"Player",d,f,p,"left",1.25*u),e.exports.ctxText(l,e.exports.capFirst(s.leaderType),d,o.width-f,p,"right",1.25*u),p=1.25*u*2,l.fillStyle=d,l.fillRect(0,p,o.width,u/3),p+=2*u;for(var g=0;g<n.length;g+=2){e.exports.ctxText(l,1+g/2+". "+n[g],d,f,p,"left");var v=n[g+1];if("time"==(s.leaderType+"").toLowerCase()&&(v=e.exports.getTime(v,!0,parseInt(v)>=36e5,1,parseInt(v)>=864e5)),e.exports.ctxText(l,v,d,o.width-f,p,"right"),(p+=m)>o.height)break}return o},e.exports.createCanvasAD=(t,i,n,s)=>{var a=document.createElement("canvas"),r=1024*(s||1);a.width=2*r,a.height=1*r;var o=a.getContext("2d");return o.fillStyle=n||"#000000",o.fillRect(0,0,a.width,a.height),e.exports.drawMultilineText(o,t,i,a.width,a.height,s||1),a},e.exports.drawMultilineText=(t,i,n,s,a,r)=>{for(var o=(e.exports.isString(i)?i:"Your Ad Here").split(" "),l=[],c=0,d=80*(r||1),h=15*(r||1);h<=2e3*(r||1);h++){y=1.4*h,t.font=h+"px GameFont";var u=(s-d)/2,p=y,f=[],m=o[0];if(t.measureText(m).width>s-d){c=h-1;break}for(var g=1;g<o.length;g++){var v=o[g];t.measureText(m+" "+v).width<s-d?m+=" "+v:(f.push(m),m=v,p+=y)}if(f.push(m),p>a-d){c=h-1;break}l=f,c=h}var y=1.4*h;u=s/2,p=a/2;l.length>1&&(p-=y*(l.length-1)/2),u+=d/2/l.length,p+=d/l.length,t.font=c+"px GameFont",t.fillStyle=n||"#e3e3e3",t.strokeStyle="rgba(0, 0, 0, 0.5)",t.lineWidth=1;for(g=0;g<l.length;g++)t.strokeText(l[g].trim(),u-t.measureText(l[g].trim()).width/2,p+h/2),t.fillText(l[g].trim(),u-t.measureText(l[g].trim()).width/2,p+h/2),p+=y;return h},e.exports.extractProperties=(e,t)=>t.reduce(((t,i)=>(t[i]=e[i],t)),{}),e.exports.calcVoteNum=e=>e.level>=50?1.5:1,e.exports.getMsgType=e=>e.kicked?2:e.banned?3:e.kickedByVote?4:e.arrested?5:1,e.exports.getAccountType=e=>e&&e.featured?3:e&&e.premiumT?2:e?1:0,e.exports.sortItems=(e,t)=>e.sort((function(e,i){var n=t[i.i||i.ind]?t[i.i||i.ind].rarity:0,s=t[e.i||e.ind]?t[e.i||e.ind].rarity:0,a=t[i.i||i.ind]?t[i.i||i.ind].seas||1:0,r=t[e.i||e.ind]?t[e.i||e.ind].seas||1:0;return n>s?1:n<s?-1:a>r?1:a<r?-1:(i.i||i.ind||0)-(e.i||e.ind||0)})),e.exports.splitIds=e=>e?e.split(",").filter((e=>e.length)).map(Number):[],e.exports.fixStr=e=>e?n.invisChar+e+n.invisChar:"",e.exports.cleanName=e=>e?e.replace("'","\\'").replace('"','\\"'):"",e.exports.filterTwitch=e=>e?e.replace(/[^\w]/gim,"").substring(0,25):"",e.exports.filterYoutube=e=>e?e.replace(/[^\w_-]/gim,"").substring(0,11):"",e.exports.replaceYoutubeLinks=e=>{try{return(e||"").replace(/yt-/gim,"").replace(/(?:https?:)?(?:\/\/)?(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|youtube(?:-nocookie)?\.com\S*?[^\w\s-])([\w-]{11})(?=[^\w-]|$)(?![?=&+%\w.-]*(?:['"][^<>]*>|<\/a>))[?=&+%\w.-]*/im,"yt-$1").replace(/(?:https?:)?(?:\/\/)?(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|youtube(?:-nocookie)?\.com\S*?[^\w\s-])([\w-]{11})(?=[^\w-]|$)(?![?=&+%\w.-]*(?:['"][^<>]*>|<\/a>))[?=&+%\w.-]*/gim,"")}catch(t){return e||""}},e.exports.createEmbedFromStr=e=>{try{var t=/yt-([\w_-]{11})/gim.exec(e=e||"");return t&&(e=e.replace(t[0],"")),e}catch(t){return e||""}},e.exports.convertFaces=(e,t)=>t?parseInt(e.join(""),2).toString(16):parseInt(e,16).toString(2).padStart(6,"0").split("").map(Number),e.exports.parseColor=e=>parseInt(e.slice(1),16),e.exports.stringifyColor=e=>"#"+("000000"+e.toString(16)).substr(-6),e.exports.getObjKeys=(t,i=[])=>{let n=Object.keys(t);if(!n.length)return[null];let s=n.filter((e=>!i.includes(e))).map((n=>e.exports.getObjKeys(t[n],i).map((e=>e?n+"|"+e:n))));return s.length?s.reduce(((e,t)=>[...e,...t])):[null]},e.exports.removePrivateKeys=e=>{let t={};return Object.keys(e).filter((e=>!e.startsWith("_"))).forEach((i=>t[i]=e[i])),t},e.exports.loadImage=e=>new Promise((t=>{let i=new Image;i.onload=()=>{t(i)},i.src=e})),e.exports.easeinout=e=>-(Math.cos(Math.PI*e)-1)/2,e.exports.padArray=(e,t,i)=>[...e,...Array(i).fill(1).map((()=>t))].slice(0,i);const g=[void 0,"social.market.hat","social.market.body","social.market.melee","social.market.spray","social.market.dye","social.market.waist","social.market.face","social.market.shoe","social.market.pet","social.market.collectible","social.market.wrist","social.market.charm","social.market.ticket","social.market.back","social.market.head","social.market.playerCard"];if(e.exports.getItemDescMobile=(e,t)=>g[e.type]?{locale:g[e.type]}:{desc:t[e.weapon-1].name},e.exports.getItemDesc=(e,t,i)=>g[e.type]?i.get(g[e.type]):t[e.weapon-1].name,e.exports.getMeleeConfig=(e,t,i)=>{var n=t.skins[e];return n||={},{fileExt:n.fileExt,animS:n.animS,hasAnim:n.hasAnim,local:n.local,localM:n.localM,src:"melee/melee_"+(n.id||0),texSrc:n.pat?n.tex:n.tex?"melee/melee_"+(n.id||0)+"_"+n.tex:"",sameEnv:n.sameEnv,env:n.env||n.sameEnv?n.env||3:void 0,sameGlow:n.sameGlow,glowText:n.glow||n.sameGlow,emissive:n.glow||n.sameGlow?"#ffffff":null,movT:n.movT,movE:n.movE,movD:n.movD,pulsT:n.pulsT,minGlo:n.minGlo,frameT:n.frameT,tFilter:i.LinearFilter,frames:n.frames,transparent:null!=n.opac,mat:i.MeshLambertMaterial,uv2:!0,specular:2697513,shininess:100,rgb:n.rgb,rgbS:n.rgbS,rgbT:n.rgbT,useWireframe:n.wire,side:n.side||0,opacity:n.opac||1,alphaTest:n.alpha||0,shaderNum:n.shaderNum,video:n.video,projection:n.projection}},e.exports.getMeshGroupIndex=(e,t)=>((t&&!e.forceTex?"default":e.src)+"-"+(e.shadowsR||"a")+(e.emissive||"e")+(e.opacity||"o")+(null==e.movT?"mt":e.movT)+(null==e.movD?"md":e.movD)+(e.texOffX||"tx")+(e.texOffY||"ty")+(e.texRot||"tr")+(e.normal||"n")+(e.specular||"spc")+(e.asset||"as")+(e.itemID||"id")+(null==e.noFog?"":"nf")+(null==e.frames?"":"fr"+e.frames)+(null==e.frameT?"":"frt"+e.frameT)+(null==e.rside?"":"side_"+e.rside)+(e.fTrans?"fT":"")).replace(/\./gm,"").toLowerCase(),e.exports.moveElement=(e,t)=>{var i=document.createDocumentFragment();i.appendChild(e),document.getElementById(t).appendChild(i)},!String.prototype.replaceAll){const e=(e,t,i)=>{if(null==i||null==e||null==t)throw TypeError("Input values must not be `null` or `undefined`")},t=(e,t)=>{if("string"!=typeof e&&!(e instanceof String))throw TypeError("`"+t+"` must be a string")},i=e=>{if(!("string"==typeof e||e instanceof String||e instanceof RegExp))throw TypeError("`searchValue` must be a string or an regexp")},n=(e,t,i)=>{if(""===e)return i.replace(/(?:)/g,t);if(e instanceof RegExp){if(-1===e.flags.indexOf("g"))throw TypeError("`.replaceAll` does not allow non-global regexes");return i.replace(e,t)}return i.split(e).join(t)};String.prototype.replaceAll=function(s,a){var r=this;return e(s,a,r),t(r,"str"),t(a,"replaceValue"),i(s),n(s,a,r)}}e.exports.VectorDot=(e,t)=>e.x*t.x+e.y*t.y+e.z*t.z,e.exports.VectorLength=e=>Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z),e.exports.VectorNormalize=t=>{var i=e.exports.VectorLength(t)||1;return t.x*=1/i,t.y*=1/i,t.z*=1/i,t},e.exports.VectorInvert=e=>(e.x*=-1,e.y*=-1,e.z*=-1,e),e.exports.VectorMultiplyScalar=(e,t,i=!1)=>{var n={x:e.x,y:e.y,z:e.z};return i?(n.x*=t,n.y*=t,n.z*=t):(e.x*=t,e.y*=t,e.z*=t),i?n:e},e.exports.VectorAdd=(e,t,i=!1)=>{var n={x:e.x,y:e.y,z:e.z};return i?(n.x+=t.x,n.y+=t.y,n.z+=t.z):(e.x+=t.x,e.y+=t.y,e.z+=t.z),i?n:e},e.exports.VectorSub=(e,t,i=!1)=>{var n={x:e.x,y:e.y,z:e.z};return i?(n.x-=t.x,n.y-=t.y,n.z-=t.z):(e.x-=t.x,e.y-=t.y,e.z-=t.z),i?n:e},e.exports.VectorReflect=(t,i)=>e.exports.VectorSub(t,e.exports.VectorMultiplyScalar(i,2*e.exports.VectorDot(t,i,!0),!0)),e.exports.Sign=e=>e<0?-1:e>0?1:0,e.exports.VectorAngleSign=(t,i)=>e.exports.Sign(t.x*i.z-t.z*i.x),e.exports.VectorNorm=t=>Math.sqrt(e.exports.VectorDot(t,t)),e.exports.TransformDirection=(e,t)=>{var i=e.x,n=e.y,s=e.z;return e.x=t[0]*i+t[4]*n+t[8]*s,e.y=t[1]*i+t[5]*n+t[9]*s,e.z=t[2]*i+t[6]*n+t[10]*s,e},e.exports.AngleDiffToPixelDiff=(e,t,i)=>e*(i/2)*t/Math.PI,e.exports.AngleToPixel=(t,i,n)=>n/2-.5+e.exports.AngleDiffToPixelDiff(t,i,n),e.exports.GetMatrixElements=e=>{var t=e,i=Math.cos(0),n=Math.cos(t/2),s=Math.cos(0),a=Math.sin(0),r=Math.sin(t/2),o=Math.sin(t/3),l=i*r*s-a*n*o,c=i*n*s-a*r*o,d=l+l,h=0*d,u=l*d,p=0*l,f=0*c,m=c*d,g=0*c;let v=[];return v[0]=1*(1-(u+0)),v[1]=1*(h+g),v[2]=1*(0-m),v[4]=1*(h-g),v[5]=1,v[6]=1*(p+f),v[8]=1*(0+m),v[9]=1*(p-f),v[10]=1*(1-(0+u)),v},e.exports.GetRampAngle=e=>{switch(e.dir){case 0:case Math.PI:return 57.29577951308232*Math.atan(e.height/e.width);case Math.PI/2:case 1.5*Math.PI:return 57.29577951308232*Math.atan(e.height/e.length)}},e.exports.validateKey=(t,i)=>e.exports.isString(t)&&e.exports.isString(i)&&t.replace(/\n|\r/g,"")==i.replace(/\n|\r/g,""),e.exports.parseGUIs=(t,i)=>{for(var s,a=[],r=0;r<t.length;r++)(s={...t[r]}).t=e.exports.limitMM(parseInt(s.t)||0,0,n.custGUITypes.length-1),s.vt=e.exports.limitMM(parseInt(s.vt)||0,0,n.inputTypesGUI.length-1),s.w=e.exports.limitMM(parseInt(s.w)||0,0,2e3),s.h=e.exports.limitMM(parseInt(s.h)||0,0,2e3),s.x=e.exports.limitMM(parseInt(s.x)||0,0,100),s.y=e.exports.limitMM(parseInt(s.y)||0,0,100),s.z=e.exports.limitMM(parseInt(s.z)||0,0,2e3),s.id=e.exports.limitMM(parseInt(s.id)||0,0,2e3),s.f=e.exports.limitMM(parseInt(s.f)||10,1,100),s.o=e.exports.limitMM(parseFloat(s.o)||1,0,1),s.nv=~~!!parseInt(s.nv),s.v=(s.v||"").toString().replace(/[^\w\:\;\(\)\?\,\.\|\[\] \-\+*\$\@\=\^!{}\\]+/gim,""),s.s=(s.s||"").toString().replace(/[^\w\:\;\(\)\?\,\.\|\[\] \-\+*\$\@\=\^!{}\\]+/gim,""),s.lbl=(s.lbl||"").toString().replace(/[^\w\s]+/gim,""),s.c=e.exports.isHexColor(s.c)?s.c:"#ff0000",s.v=0==s.vt?(s.v||"").toString().replace(/[^\w\:\;\(\)\?\,\.\|\[\] \-\+*\$\@\=\^!{}\\]+/gim,""):(s.v||"").toString().replace(/[^a-z0-9_]+/gim,""),delete s.pv,i||(0==s.t?(delete s.f,delete s.v):1==s.t||3==s.t?delete s.s:2==s.t&&(delete s.f,delete s.v,delete s.c),0==s.t&&delete s.t,0==s.z&&delete s.z,10==s.f&&delete s.f,0==s.id&&delete s.id,0==s.vt&&delete s.vt,"#ff0000"!=s.c&&"#FF0000"!=s.c||delete s.c,s.s&&s.s.length||delete s.s,s.v&&s.v.length||delete s.v,s.lbl&&s.lbl.length||delete s.lbl),a.push(s);return a},e.exports.getRegionInfo=(e,t)=>{var i=["UNKNOWN","OC","AS","EU","NA","SA"];for(let s in t)if(-1!=t[s].regionIds.indexOf(e))return[s,i[n.regionIND[s]]];return[0,0]},e.exports.getRegionName=(e,t)=>{for(let i in t)if(-1!=t[i].regionIds.indexOf(e))return t[i].abbreviation.toUpperCase();return null},e.exports.b64e=e=>t.from(e,"utf8").toString("base64"),e.exports.b64d=e=>t.from(e,"base64").toString("ascii"),e.exports.b64Test=e=>/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/.test(e),Date.prototype.getWeek=function(){var e=new Date(this.getTime());e.setUTCHours(0,0,0,0),e.setUTCDate(e.getUTCDate()+3-(e.getUTCDay()+6)%7);var t=new Date(Date.UTC(e.getUTCFullYear(),0,4));return 1+Math.round(((e.getTime()-t.getTime())/864e5-3+(t.getUTCDay()+6)%7)/7)},e.exports.dayInWeek=(e,t,i)=>{var n=new Date;n.setUTCDate(n.getUTCDate());var s=e.indexOf(n.getUTCDay()),a=n.getWeek();return!(!(s>-1)||(t?!(1&a):1&a)&&!i)},e.exports.isKRSale=()=>e.exports.dayInWeek([6,0],!0),e.exports.isDoubleClassXP=()=>e.exports.dayInWeek([6,0],!1),e.exports.isDoubleRaidDrops=()=>e.exports.dayInWeek([6,0],void 0,!0),e.exports.compareVal=(e,t,i)=>0==e?t==i:1==e?t!=i:2==e?t>i:3==e?t>=i:4==e?t<i:5!=e||t<=i,e.exports.decodeStats=e=>{for(var t={},i=e.split("|"),n=0;n<i.length;n++){var s=i[n].split(","),a=s[0];t[a]={};for(var r=1;r<s.length;r++){var[o,l]=s[r].split(":");t[a][o]=parseFloat(l)}}return t},e.exports.encodeStats=e=>{var t=[];for(var i in e){var n=[i];for(var s in e[i])n.push(s+":"+e[i][s]);t.push(n.join(","))}return t.join("|")},e.exports.arrayChunk=(e,t)=>Array.from({length:Math.ceil(e.length/t)},((i,n)=>e.slice(n*t,n*t+t))),e.exports.weightedRandom=e=>{let t,i=0,n=Math.random();for(t in e)if(i+=e[t],n<=i)return t};var v=Object.prototype.hasOwnProperty;e.exports.hasProp=(e,t)=>{try{return v.call(e,t)}catch(e){return!1}};var y=String.prototype.match;e.exports.match=(e,t)=>y.call(e,t);var b=String.prototype.split;e.exports.split=(e,t)=>b.call(e,t),e.exports.toLower=e=>(e||"").toString().toLowerCase(),e.exports.toUpper=e=>(e||"").toString().toUpperCase();var w="undefined"!=typeof Storage;function x(e){if(!e||"object"!=typeof e)return e;var t={};for(var i in e){var n=e[i];switch(!0){case n instanceof Date:var s=new Date;s.setDate(n.getDate()),t[i]=s;break;case n instanceof Function:t[i]=e[i];break;case n instanceof Array:var a=[];for(var r of n)a.push(x(r));t[i]=a;break;case n instanceof Object:var o={};for(var r in n)o[r]=x(n[r]);t[i]=o;break;default:t[i]=e[i]}}return t}function S(e){let t={};return Object.keys(e).map((i=>{t[i]=Array.isArray(e[i])?[].concat(e[i]):"object"==typeof e[i]?S(e[i]):e[i]})),t}e.exports.saveVal=(e,t)=>{w&&localStorage.setItem(e,t)},e.exports.deleteVal=e=>{w&&localStorage.removeItem(e)},e.exports.getSavedVal=e=>w?localStorage.getItem(e):null,e.exports.hasSavedVal=e=>!!w&&localStorage.hasOwnProperty(e),e.exports.cssCheck=t=>{if(!t||!e.exports.isString(t))return!0;for(var i=t,n=/\\|'|"|`/gim;n.test(i);)i=i.replace(n,"");return i=i.replace(/important/gim,"REPLACE_IMP"),!/import|canvas|url|expression|behavior|-moz-binding|javascript|exec/gim.test(i)&&(i=i.replace(/REPLACE_IMP/gim,"important"))},e.exports.captchaPromise=(e,t)=>new Promise(((i,s)=>{window.hcaptcha.ranOnce&&window.hcaptcha.remove(),(t=t||{}).sitekey=n.hcaptchaKey,t.size="invisible",t.callback=e=>{console.log("SUCCESS",e),i(e)},t["error-callback"]=e=>{console.log("error",e),s(e)},t["close-callback"]=e=>{console.log("close",e),s(e)},window.hcaptcha.render(e||"hCap",t),window.hcaptcha.execute(),window.hcaptcha.ranOnce=!0})),e.exports.toKeyCode=e=>"string"==typeof e?e.toUpperCase().charCodeAt(0):e,e.exports.deepCopy=e=>"object"==typeof e?Array.isArray(e)?[...e].map(x):x(e):e,e.exports.superClone=e=>"object"==typeof e?Array.isArray(e)?[...e].map(S):S(e):e,e.exports.logStringify=e=>"object"==typeof e?JSON.stringify(e,null,2):e+"",e.exports.toRoundArray=(e,t=[],i=0)=>(t[i]=Math.round(parseFloat(e.x)||0),t[i+1]=Math.round(parseFloat(e.y)||0),t[i+2]=Math.round(parseFloat(e.z)||0),t),e.exports.triToJSON=e=>({isTri:e.isTri,tris:[...e.a.toArray(),...e.b.toArray(),...e.c.toArray()],minMax:[e.minX,e.minY,e.minZ,e.maxX,e.maxY,e.maxZ]}),e.exports.convertInv=e=>{for(var t=[],i=0;i<e.length;i++)t.push({ind:e[i].i,cnt:e[i].c});return t},e.exports.fixIP=e=>(e+"").replace(/:/g,""),e.exports.parseJson=e=>{try{return JSON.parse(e)}catch(e){return{}}};const M=[];for(let e=0;e<256;e++)M[e]=(e<16?"0":"")+e.toString(16);e.exports.generateUUID=()=>{const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,i=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(M[255&e]+M[e>>8&255]+M[e>>16&255]+M[e>>24&255]+"-"+M[255&t]+M[t>>8&255]+"-"+M[t>>16&15|64]+M[t>>24&255]+"-"+M[63&i|128]+M[i>>8&255]+"-"+M[i>>16&255]+M[i>>24&255]+M[255&n]+M[n>>8&255]+M[n>>16&255]+M[n>>24&255]).toLowerCase()},e.exports.isMatchingGameVersion=e=>e===s,e.exports.removeNFT=function(e){e.rarities[7].name="External",e.skins.forEach((e=>{"NFT"==e.limT&&(e.limT="External")})),e.tags.External=e.tags.NFT,delete e.tags.NFT},e.exports.getAssetData=e=>{var t={};try{t=JSON.parse(e)}catch(e){}return t},e.exports.hasActiveEvents=()=>{let e=!1,t=Date.now();for(let i=0;i<n.events.length;i++)if(t>=new Date(n.events[i].start).getTime()&&t<=new Date(n.events[i].end).getTime()){e=!0;break}return e},e.exports.getActiveEvent=e=>{var t=n.events.find((t=>t.id==e));if(t)return t;let i=Date.now();for(var s=0;s<n.events.length;s++)if((t=n.events[s]).reveal){var a=new Date(t.start).getTime()-i;if(new Date(t.end).getTime()-i>0&&a<=t.reveal)return t}return null},e.exports.getImagesPromises=e=>Promise.all(e.map((e=>new Promise((function(t){var i=new Image;i.onload=()=>{t(e)},i.onerror=()=>{t(e)},i.srcset=i.src=e}))))),e.exports.sleep=e=>new Promise((t=>setTimeout(t,e))),e.exports.isTransTex=e=>(e+"").toLowerCase().startsWith("link_"),e.exports.sanitizeHTML=e=>{const t=document.createElement("span");return t.textContent=e,t.innerHTML},e.exports.maskEmail=e=>(e+"").replace(/(\w{1})[\w.-]+@([\w.]+\w)/,"$1***@$2"),e.exports.formatBytes=(e,t=2)=>{if(!+e)return"0B";const i=t<0?0:t,n=Math.floor(Math.log(e)/Math.log(1e3));return""+parseFloat((e/Math.pow(1e3,n)).toFixed(i))+["B","KB","MB","GB","TB","PB","EB","ZB","YB"][n]},e.exports.getSubGameVersion=()=>n.gameVersion+"_"+s}).call(this,i(6).Buffer)},function(e,t){e.exports="function"==typeof Object.create?function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:function(e,t){if(t){function i(){}e.super_=t,i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}}},function(e,t,i){var n=i(6),s=n.Buffer;function a(e,t){for(var i in e)t[i]=e[i]}function r(e,t,i){return s(e,t,i)}s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?e.exports=n:(a(n,t),t.Buffer=r),a(s,r),r.from=function(e,t,i){if("number"==typeof e)throw new TypeError("Argument must not be a number");return s(e,t,i)},r.alloc=function(e,t,i){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=s(e);return void 0===t?n.fill(0):"string"==typeof i?n.fill(t,i):n.fill(t),n},r.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return s(e)},r.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},function(e,t,i){(function(t){if("undefined"!=typeof window)try{window.currentStorage=localStorage}catch{window.currentStorage={setItem:(e,t)=>{currentStorage[e]=t},getItem:e=>currentStorage[e]}}const n=i(28);e.exports.gameVersion="7.2.3",e.exports.clientRevision="",e.exports.clientVersion=e.exports.gameVersion+(e.exports.clientRevision?"r"+e.exports.clientRevision:""),e.exports.editorVersion="2.0.0",e.exports.buildVersion="4rzCAuqigUmWqYxSFiVxp29d4pmUHwFM",e.exports.customBuildVersion=t.env.CUSTOM_VERSION,e.exports.isNode=void 0!==t&&void 0!==t.release&&-1!==t.release.name.search(/node|io.js/),e.exports.isProd=e.exports.isNode?!!t.env.IS_PROD:"127.0.0.1:8080"!==location.host&&"localhost:8080"!==location.host&&!location.host.startsWith("192.168.")&&"localhost:18080"!==location.host,e.exports.prodSchemes=["krunker_prod","krunker_social","krunker_editor","krunker_api","krunker_matchmaker","krunker_file_server"],e.exports.socialBetaSchemes=["krunker_social_beta"],e.exports.prodURLs=["krunker.io","browserfps.com"],e.exports.socialBetaURLs=["social_beta.krunker.io"],e.exports.betaSchemes=["krunker_beta_internal","krunker_social_beta","krunker_api_beta","krunker_editor_beta"],e.exports.betaURLs=["internal.krunker.io"],e.exports.isNode?(e.exports.isProdScheme=e.exports.prodSchemes.includes(t.env.VULTR_SCHEME),e.exports.isSocialBeta=e.exports.socialBetaSchemes.includes(t.env.VULTR_SCHEME),e.exports.isBeta=e.exports.betaSchemes.includes(t.env.VULTR_SCHEME)):(e.exports.isProdScheme=e.exports.prodURLs.includes(location.hostname),e.exports.isSocialBeta=e.exports.socialBetaURLs.includes(location.hostname),e.exports.isBeta=e.exports.betaURLs.includes(location.hostname)),e.exports.alphabet=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],e.exports.serverSendFrequency=10,e.exports.serverTickFrequency=30,e.exports.serverSyncFrequency=1,e.exports.interpPDelay=3,e.exports.serverTickRate=1e3/e.exports.serverTickFrequency,e.exports.interpolation=1.1,e.exports.stateHistory=500,e.exports.dltMx=Math.round(1e3/30),e.exports.staticDlt=Math.round(50),e.exports.imgSessionTime=36e5,e.exports.enableHttps=e.exports.isProd||!e.exports.isNode&&"true"==currentStorage.__FORCE_HTTPS__,e.exports.streamUpdate=1e4,e.exports.maxPlayers=8,e.exports.serverSpread=3,e.exports.gamesPerServer=2,e.exports.gamesToCreate=3,e.exports.gameStartDelay=6e4,e.exports.serverBrowserRate=1e4,e.exports.maxPlayersTotal=e.exports.maxPlayers*e.exports.gamesPerServer+40,e.exports.kickTimer=12e4,e.exports.maxPayloadLength=75e4;const s=!e.exports.isNode&&("127.0.0.1"===location.hostname||"localhost"===location.hostname);e.exports.useLooseClient=t.env.USE_LOOSE_CLIENT||s,e.exports.movDirs=[];for(var a=0;a<8;++a)e.exports.movDirs.push(-Math.PI+(a+1)*Math.PI/4);e.exports.recaptchaKey="6LdvBrQUAAAAAL6gtEpVNzii_3nQkbOyx912nvlm",e.exports.hcaptchaKey="c8058d7b-fc5a-4808-9fe7-fb6bfd45325f",e.exports.pingCount=10,e.exports.minKDFLvl=50,e.exports.minKDFCall=15,e.exports.kpdCallTime=10,e.exports.kpdDeputyMax=10,e.exports.kpdAutoTime=6e4,e.exports.kpdWatchTime=1e4,e.exports.getMaxKPDCalls=function(e){var t=e.jobRating,i=e.jobRatingPos,n=t>0?i/t:0,s=e&&e.premiumT>0?2:1;return t>100&&n>.9?100*s:t>50&&n>.9?50*s:t>30&&n>.9?40*s:t>10&&n>.9?25*s:20*s},e.exports.kpdTabs=[{n:"Active Calls"},{n:"Ban Logs"},{n:"Stats"}],e.exports.isProd&&e.exports.isProdScheme?(e.exports.matchmakerURL="https://matchmaker.krunker.io",e.exports.apiURL="https://api.krunker.io",e.exports.socialURL="https://social.krunker.io",e.exports.editorURL="https://editor.krunker.io"):e.exports.isProd?(e.exports.matchmakerURL="https://matchmaker_beta.krunker.io",e.exports.apiURL="https://api_beta.krunker.io",e.exports.socialURL="https://social_beta.krunker.io",e.exports.editorURL="https://editor_beta.krunker.io"):(e.exports.matchmakerURL=t.env.MATCHMAKER_URI||"http://127.0.0.1:5050",e.exports.apiURL=t.env.API_URI||"http://127.0.0.1:5080",e.exports.socialURL=t.env.SOCIAL_URI||"http://127.0.0.1:5070",e.exports.editorURL=t.env.EDITOR_URI||"http://127.0.0.1:5090"),e.exports.availableRegions=e.exports.isProd?["de-fra","us-ca-sv","au-syd","jb-hnd","us-fl","sgp","us-nj","as-mb","us-tx","brz","me-bhn","af-ct"]:["local"],e.exports.dedicatedOnlyRegions=["us-wa","us-il","gb-lon","mx-cmx","as-seoul"],e.exports.discordInvite="https://discord.gg/W85PPvUQEr",e.exports.regionIND={sgp:2,"jb-hnd":2,"us-nj":4,"us-fl":4,"us-ca-sv":4,brz:5,"us-tx":4,"au-syd":1,"de-fra":3,"gb-lon":3,blr:2,"as-mb":2,"me-bhn":2,"as-seoul":2,"af-ct":3,"mx-cmx":5,tor:4,"eu-stm":3,pol:3,"us-hi":4},e.exports.shopTabs=["<span class='material-icons' style='color:#fbc02d;font-size:42px;vertical-align:bottom'>home</span>","Prize Wheels","Premium","Purchase <span style='color:#fbc02d'>KR</span>","Redeem Keys","Marketplace","<span class='material-icons' style='color:#cc51f8;font-size:42px;vertical-align:bottom'>plumbing</span>"],e.exports.steamEnabled=!0,e.exports.steamSandbox=!1,e.exports.xsollaEnabled=!0,e.exports.xsollaSandbox=!1,e.exports.bundleLvlSort=10,e.exports.premiumBenifits=["Reduced Ads","Golden Badge on Profile","Custom Profile Pictures","Custom Display Name","Increased Customization Options","Custom Skin, Hair & Chat Colors","Access to Spray Wheel & +1 Spray limit","Increased Max KR per Round to 40","Custom Commands: /god /noclip /kill /smite","Can host 16 player lobbies","Bigger Thumbnails for Maps","Reduced Trade Fees & Cooldowns","Increased Trade Limit to 20 items","Increased Market Sale Limit to 40","Can enter Limited Premium Areas on Custom Maps","Increased Object Limit in Customs","Increased Asset File Size","Increased Asset Upload Limit"],e.exports.featuredBundleOrder=[6,8,10,9,18,16].reverse(),e.exports.currentSeason=7,e.exports.currentBattlepass=2,e.exports.easterEggs=187,e.exports.bpTabs=["<span class='material-icons' style='color:#fbc02d;font-size:42px;vertical-align:bottom'>home</span>","Challenges"],e.exports.levelSkipPrice="0.99",e.exports.bppCapDay=300,e.exports.tradeMinLvl=20,e.exports.tradeCost=10,e.exports.tradeMaxOut=5,e.exports.tradeMaxOutP=20,e.exports.interactTradeTimer=3e3,e.exports.rewardTime=36e5,e.exports.rewardMinLvl=1,e.exports.rewardUpdate=12e5,e.exports.guestMaxAdGrace=36e4,e.exports.ftueKRGift=150,e.exports.ftueHideProfilePopup=!0,e.exports.minChalLevel=1,e.exports.maxSpdRChck=6,e.exports.rankVar=.03,e.exports.rankedClasses=[0,1,2,3,4,5,6,8,12,13,15],e.exports.endTimer=25e3,e.exports.endAnim=5e3,e.exports.challModeLvl=30,e.exports.matchPicks=4,e.exports.voteKickReq=4,e.exports.voteKickMaxLvl=20,e.exports.voteKickTimer=35e3,e.exports.voteKickBan=18e5,e.exports.thrdPZ=14,e.exports.thrdPX=5,e.exports.thrdPY=2,e.exports.publicMatchConfig={},e.exports.hostTypes=[{title:"Custom Game Setup",topHedr:function(){var e=[4,8,9,11,13];return"<div id='hostCMapPickr' onclick='showGames(true);' style='background-image:linear-gradient(to right, #000000a8, #00000000),url(https://assets.krunker.io/img/backgrounds/gamecats/c_"+e[window.randInt(0,e.length-1)]+".png);'><div id='hostCMapPickT'>Browse Community Games</div><span id='hostCMapInd'>></span></div>"}},{title:"Comp Server Setup",allMaps:["burg","sandstorm","undergrowth","shipment","industry","lumber","site","bureau","atomic"],topHedr:function(){return"<div id='hostCMapPickr' style='background-image:linear-gradient(to right, #000000a8, #00000000),url(https://assets.krunker.io/img/backgrounds/gamecats/c_1.png);'><div id='hostCMapPickT'>Dedicated comp & tournament server</div></div>"},disTabs:[1,3],overDat:{private:!0,allowSpect:!0,maps:[0,2,4,5,11,12,14,17,23],modes:[2],maxPlayers:10,minPlayers:8,fixMov:!0,jumpMlt:1.005,slidSpd:.97,warmupTime:.2,selTeam:!0,throwMel:!1},hideHead:!1,showAll:!0,comp:!0,noCustM:!0},{title:"Rent Dedicated Server",buyServ:!0,noCustM:!0},{title:"Zombies Server Setup",mapH:"Zombies Maps",allMaps:["facility"],topHedr:function(){return"<div id='hostCMapPickr' style='background-image:linear-gradient(to right, #000000a8, #00000000),url(https://assets.krunker.io/img/backgrounds/server_zombies.png?build=4Q9IjxljZogSd4f5mvT6QLSHsyBGeq8I);'><div id='hostCMapPickT'>Dedicated Zombies server</div></div>"},disTabs:[1,2,3],forceDat:{private:!0,maxPlayers:4,maps:[27],modes:[35],mimicPubs:!0},allowedDat:{maps:[27]},noCustM:!0,restrict:!0,hideHead:!0,showAll:!0},{title:"Raid Server Setup",mapH:"Raid Maps",allMaps:["tortuga","laboratory","soul sanctum"],topHedr:function(){return"<div id='hostCMapPickr' style='background-image:linear-gradient(to right, #000000a8, #00000000),url(https://assets.krunker.io/img/backgrounds/server_raids.png?build=4Q9IjxljZogSd4f5mvT6QLSHsyBGeq8I);'><div id='hostCMapPickT'>Dedicated Raid server</div></div>"},disTabs:[1,2,3],forceDat:{private:!0,maxPlayers:8,maps:[18],modes:[23],mimicPubs:!0},allowedDat:{maps:[18,29,31]},noCustM:!0,restrict:!0,hideHead:!0,showAll:!0}],e.exports.serverTabs=["Official Servers","&nbsp;Custom Servers&nbsp;"],e.exports.serverUpg=[{name:"40 Player Server",varN:"maxPS",cost:1e3},{name:"Promote Server",varN:"promServ",cost:2500}],e.exports.hideLoginWindowAfterLogin=!1,e.exports.differentStorePopups=!1,e.exports.playerBlipTimer=2e3,e.exports.hitBoxPad=5;const r=(t,i)=>({name:t,varN:"classLim"+i,sub:"Class Limits",sub:"Other",basic:!0,hostTypes:[1],hideE:!0,def:0,defC:e.exports.rankedClasses.includes(i)?1:0,max:20,min:0,step:1,classIcon:i});e.exports.teamLimit=5,e.exports.teamNames=["Alpha","Bravo","Charlie","Delta","Echo","Foxtrot"],e.exports.serverConfig=[{name:"Players",varN:"maxPlayers",sub:"Server Size",basic:!0,def:2,max:10,maxP:16,maxF:20,maxD:50,maxG:6,min:1,step:1},{name:"Min Players",varN:"minPlayers",sub:"Server Size",basic:!0,def:0,max:10,maxP:16,maxF:20,maxD:50,maxG:6,min:0,step:1},{name:"Minutes",varN:"gameTime",sub:"Timers",hostTypes:[0,1],basic:!0,def:4,defC:4,max:60,min:0,step:1},{name:"Warmup",varN:"warmupTime",sub:"Timers",basic:!0,def:0,max:4,min:0,step:.1},{name:"Rounds",varN:"gamRounds",sub:"Timers",hostTypes:[0,1],basic:!0,def:1,defC:3,max:10,min:1,step:1},{name:"Intermission (s)",varN:"intermTmr",sub:"Timers",hostTypes:[0,1],basic:!0,def:30,defC:30,max:120,min:5,step:1},{name:"Auto Respawn",varN:"forceSpawn",sub:"Timers",dontChange:!0,def:0,max:15,min:0,step:1},{name:"Lives",varN:"lives",sub:"Health & Lives",dontChange:!0,basic:!0,def:0,max:10,min:0,step:1},{name:"Score Limit",varN:"scoreLimit",sub:"Score & Rewards",def:0,max:1e4,min:0,step:100},{name:"Keep Team Score",varN:"keepTScore",sub:"Score & Rewards",dontChange:!0,def:!1,bool:!0},{name:"Objective Time",varN:"objtvTime",head:"Mode Settings",sub:"Mode Settings",hostTypes:[0,1],def:1,defC:1,max:10,min:.1,step:.1},{name:"Force Mode Classes",sub:"Mode Settings",varN:"forceC",dontChange:!0,def:!0,bool:!0},{name:"Log Time (Race/Bhop)",varN:"logTim",sub:"Mode Settings",dontChange:!0,def:!0,bool:!0},{name:"Last Checkpoint Time Rewind (Race/Bhop)",varN:"lstChkT",sub:"Mode Settings",dontChange:!0,def:!1,bool:!0},{name:"Gravity",head:"Physics",sub:"World Physics",varN:"gravMlt",dontChange:!0,def:1,max:2,min:0,step:.001},{name:"Time Scale",varN:"deltaMlt",sub:"World Physics",dontChange:!0,def:1,max:1.5,min:.1,step:.1},{name:"Fall Damage",sub:"World Physics",varN:"fallDmg",def:0,max:10,min:0,step:.01},{name:"Fall Damage Thresh",sub:"World Physics",varN:"fallDmgThr",def:0,max:10,min:0,step:.01},{name:"Jump Force",varN:"jumpMlt",sub:"Jumping",dontChange:!0,def:1,max:3,min:.1,step:.001},{name:"Fixed Movement",varN:"fixMov",sub:"Movement",dontChange:!0,def:!1,bool:!0},{name:"Slide Time",varN:"slidTime",sub:"Movement",dontChange:!0,def:1,max:5,min:1,step:.1},{name:"Slide Speed",varN:"slidSpd",sub:"Movement",dontChange:!0,def:1,max:2,min:0,step:.01},{name:"Weapon Impulse",varN:"impulseMlt",sub:"Gameplay Logic",dontChange:!0,def:1,max:3,min:0,step:.1},{name:"Wall Jump Power",varN:"wallJP",sub:"Jumping",dontChange:!0,def:1,max:2,min:0,step:1},{name:"Strafe Speed",varN:"strafeSpd",sub:"Movement",dontChange:!0,def:1.2,max:2,min:1,step:.1},{name:"Sliding",varN:"canSlide",sub:"Movement",dontChange:!0,def:!0,bool:!0},{name:"Air Strafe",varN:"airStrf",sub:"Movement",dontChange:!0,def:!1,bool:!0},{name:"Auto Jump",varN:"autoJump",sub:"Jumping",dontChange:!0,def:!1,bool:!0},{name:"Bullet Drop",varN:"bDrop",sub:"World Physics",dontChange:!0,def:!1,bool:!0},{name:"Health Multiplier",head:"Game Logic",varN:"healthMlt",sub:"Health & Lives",dontChange:!0,def:1,max:3,min:.1,step:.1},{name:"Hitbox Padding",varN:"hitBoxPad",sub:"Collisions",dontChange:!0,hostTypes:[0,1],def:.6,defC:.1,max:2,min:-2,step:.1},{name:"Fire Rate",varN:"fiRat",sub:"Gameplay Logic",dontChange:!0,def:1,max:2,min:.5,step:.1},{name:"Reload Speed",varN:"reSpd",sub:"Gameplay Logic",dontChange:!0,def:1,max:2,min:.5,step:.1},{name:"Health Regen",varN:"hpRegen",sub:"Health & Lives",dontChange:!0,def:!0,bool:!0},{name:"Kill Rewards",varN:"killRewards",sub:"Score & Rewards",dontChange:!0,def:!0,bool:!0},{name:"No Assists",varN:"noAssists",sub:"Score & Rewards",dontChange:!0,def:!1,bool:!0},{name:"Headshots Only",varN:"headshotOnly",sub:"Gameplay Logic",dontChange:!0,def:!1,bool:!0},{name:"No Secondaries",varN:"noSecondary",sub:"Gameplay Logic",dontChange:!0,def:!1,bool:!0},{name:"Disable Streaks",varN:"noStreaks",sub:"Other",dontChange:!0,def:!1,bool:!0},{name:"Disable Borders",varN:"disableB",sub:"Other",dontChange:!0,def:!1,bool:!0},{name:"Throwable Melees",varN:"throwMel",sub:"Gameplay Logic",dontChange:!0,def:!0,bool:!0},{name:"Chargable Weapons",varN:"chrgWeps",sub:"Gameplay Logic",dontChange:!0,def:!0,bool:!0},{name:"Select Team",head:"Teams",varN:"selTeam",sub:"Teams",dontChange:!0,def:!1,bool:!0},{name:"Friendly Fire",sub:"Teams",varN:"frFire",dontChange:!0,def:!1,bool:!0},{name:e.exports.teamNames[0]+" Team Name",varN:"nameTeam1",hostTypes:[0,1],sub:"Teams",def:e.exports.teamNames[0],input:!0},{name:e.exports.teamNames[1]+" Team Name",varN:"nameTeam2",hostTypes:[0,1],sub:"Teams",def:e.exports.teamNames[1],input:!0},{name:e.exports.teamNames[0]+" Team Damage",varN:"t1Dmg",sub:"Teams",dontChange:!0,def:1,max:2,min:0,step:.1},{name:e.exports.teamNames[1]+" Team Damage",varN:"t2Dmg",sub:"Teams",dontChange:!0,def:1,max:2,min:0,step:.1},{name:"Spectating",head:"Other",varN:"allowSpect",hostTypes:[0,1],sub:"Other",def:!0,bool:!0},{name:"3rd Person",varN:"thirdPerson",sub:"Other",dontChange:!0,def:!1,bool:!0},{name:"Hide Nametags (Enemies)",varN:"nameTags",sub:"Other",def:!1,bool:!0},{name:"Hide Nametags (Allies)",varN:"nameTagsFR",sub:"Other",def:!1,bool:!0},{name:"Kill Cams",varN:"kCams",sub:"Other",def:!0,bool:!0},{name:"Allow Anonymous",varN:"aAnon",sub:"Other",def:!0,bool:!0},{name:"Designated Spectators",varN:"specSlots",sub:"Other",basic:!0,hostTypes:[1],hideE:!0,def:2,max:4,min:0,step:1},{name:"Team Size",varN:"tmSize",sub:"Other",basic:!0,hostTypes:[1],hideE:!0,def:3,options:["1v1","2v2","3v3","4v4"],select:!0},{name:"Hide Cosmetics",varN:"noCosm",sub:"Other",basic:!0,hostTypes:[1],hideE:!0,def:!1,defC:!0,bool:!0},{name:"Test Mode",varN:"tstCmp",sub:"Other",basic:!0,hostTypes:[1],hideE:!0,def:!1,defC:!0,bool:!0},{name:"No Draws",varN:"noDraws",sub:"Other",basic:!0,hostTypes:[1],hideE:!0,def:!1,defC:!0,bool:!0},{name:"Best of",varN:"bstOfR",sub:"Other",basic:!0,hostTypes:[1],hideE:!0,def:!1,defC:!0,bool:!0},{name:"Stop Head Clipping",varN:"headClipFix",hostTypes:[0,1],sub:"Other",def:!1,defC:!0,bool:!0},{name:"Minimaps",varN:"minimaps",sub:"Other",def:!0,bool:!0},{name:"Limit Classes",head:"Class Limits",varN:"limitClasses",sub:"Class Limits",basic:!0,hostTypes:[1],hideE:!0,def:!1,defC:!0,bool:!0},r("Triggerman",0),r("Hunter",1),r("Run N Gun",2),r("Spray N Pray",3),r("Vince",4),r("Detective",5),r("Marksman",6),r("Rocketeer",7),r("Agent",8),r("Runner",9),r("Deagler",10),r("Bowman",11),r("Commando",12),r("Trooper",13),r("Survivor",14),r("Infiltrator",15)];var o=e.exports.serverConfig.findIndex((e=>"nameTeam2"==e.varN));for(a=3;a<e.exports.teamLimit+1;a++)e.exports.serverConfig.splice(o+(a-2),0,{name:e.exports.teamNames[a-1]+" Team Name",varN:"nameTeam"+a,sub:"Teams",def:e.exports.teamNames[a-1],input:!0,hide:!0});var l,c=e.exports.serverConfig.findIndex((e=>"t2Dmg"==e.varN));for(a=3;a<e.exports.teamLimit+1;a++)e.exports.serverConfig.splice(c+(a-2),0,{name:e.exports.teamNames[a-1]+" Team Damage",varN:"t"+a+"Dmg",sub:"Teams",dontChange:!0,def:1,max:2,min:0,step:.1,hide:!0});e.exports.custGUITypes=["Box","Text","Image","Div (HTML)"],e.exports.inputTypesGUI=["Input Value","Player Value","Global Value"],e.exports.sysLibName="GAME",e.exports.scriptingEnabled=!0,e.exports.serverScripting=!0,e.exports.eventObjectLimit=10,e.exports.objectLimit=5e3,e.exports.objectLimitF=7500,e.exports.objectColLimit=4500,e.exports.objectColLimitF=6e3,e.exports.guiLimit=80,e.exports.guiLimitF=80,e.exports.spawnLimit=20,e.exports.signFontMax=240,e.exports.billboards=["Random","Krunkie Loans","Krunker Japan","SoonTM","Be Like Joe","Moomoo.io","Report Hackers"],e.exports.signLimit=100,e.exports.lbLimit=2,e.exports.signTextLimit=1500,e.exports.signFontMin=1,e.exports.triggerLimit=30,e.exports.triggerActionLimit=5,e.exports.interfaceLimit=30,e.exports.interfaceIDMax=2e3,e.exports.wheelLimit=10,e.exports.triangleLimit=5e3,e.exports.mysteryBoxAnim=5e3,e.exports.mysteryBoxDespawn=15e3,e.exports.mysteryBoxDespawnTeddy=8e3,e.exports.mysteryBoxOffset=10,e.exports.krumMachineAnim=5e3,e.exports.krumMachineDespawn=15e3,e.exports.krumMachineOffset=10,e.exports.zombiePerks=["Krum","Double-Up","Western Hands","Swift","Power Slide","Drift Fuze","Holster"],e.exports.maxZombiePerks=4,e.exports.krTriggerReq=52596e5,e.exports.inputTypes=["Input Value","Trigger Value","Player Value","Global Value"],e.exports.encodingTypes=[{name:"Default",value:"LinearEncoding"},{name:"sRGBEncoding",value:"sRGBEncoding"},{name:"LinearEncoding",value:"LinearEncoding"}],e.exports.mappingTypes=["UVMapping","CubeReflectionMapping","CubeRefractionMapping","EquirectangularReflectionMapping","EquirectangularRefractionMapping","CubeUVReflectionMapping"],e.exports.toneTypes=["NoToneMapping","LinearToneMapping","ReinhardToneMapping","CineonToneMapping","ACESFilmicToneMapping"],e.exports.cameraTypes=["Spectate Camera","Player Camera"],e.exports.classConfig=[{name:"Name",varN:"name",input:!0,len:24},{name:"Type",varN:"camType",sub:"Camera",cat:0,def:0,options:["FPS","3rd Person","Platformer (X)","Platformer (Z)","Orthographic"],select:!0},{name:"X Offset",varN:"camOffX",sub:"Camera",cat:0,def:0,max:500,min:0,step:1,decs:0},{name:"Y Offset",varN:"camOffY",sub:"Camera",cat:0,def:0,max:500,min:0,step:1,decs:0},{name:"Z Offset",varN:"camOffZ",sub:"Camera",cat:0,def:0,max:500,min:0,step:1,decs:0},{name:"Ortho Frustum Size",varN:"orthoF",sub:"Camera",cat:0,def:50,max:1e3,min:1,step:1,decs:0},{name:"Face Player",varN:"lockCamP",sub:"Camera",cat:0,def:0,max:1,min:0,step:.01,decs:2},{name:"Lock Y Rot",varN:"lckCmYR",sub:"Camera",cat:0,def:0,max:1,min:-1,step:.01,decs:2},{name:"Y Limit",varN:"yCmLim",sub:"Camera",cat:0,def:0,max:1,min:0,step:.01,decs:2},{name:"Mouse Rotation",varN:"camRot",sub:"Camera",cat:0,def:!0,bool:!0},{name:"Force Pointer Lock",varN:"fPLock",sub:"Camera",cat:0,def:!1,bool:!0},{name:"Player Type",varN:"mdl",sub:"Player Asset",cat:1,def:0,options:["Default","Sprite","Model"],select:!0},{name:"Custom Asset",varN:"aID",def:"",cat:1,sub:"Player Asset",len:12,input:!0},{name:"Show First Person",varN:"mdlFP",sub:"Player Asset",cat:1,def:!0,bool:!0},{name:"Asset Anim Speed",varN:"animS",sub:"Player Asset",max:10,min:.1,step:.1,decs:1,cat:1,def:1},{name:"Asset Scale",varN:"mdlS",sub:"Player Asset",cat:1,def:1,max:100,min:.1,step:.1,decs:1},{name:"Asset Preview Scale",varN:"mdPS",sub:"Player Asset",cat:1,def:1,max:10,min:.01,step:.01,decs:2},{name:"Asset Preview Y Off",varN:"mdPY",sub:"Player Asset",cat:1,def:0,max:50,min:-50,step:.01,decs:2},{name:"Asset Dir",varN:"mdlDr",sub:"Player Asset",cat:1,def:0,max:360,min:0,step:5,decs:0},{name:"Asset Y Offset",varN:"mdlYO",sub:"Player Asset",cat:1,def:0,max:50,min:-50,step:.01,decs:2},{name:"Move Scheme",varN:"movSch",sub:"Movement",cat:1,def:0,options:["Default","Follow Mouse","Move Right","Fly","Dir Only","SRM","Vehicle","MMORPG"],select:!0},{name:"Speed",varN:"speed",sub:"Movement",cat:1,max:5,min:.01,step:.01,decs:2},{name:"Speed X",varN:"speedX",sub:"Movement",cat:1,def:1,max:50,min:-50,step:.1,decs:1},{name:"Speed Y",varN:"speedY",sub:"Movement",cat:1,def:1,max:50,min:-50,step:.1,decs:1},{name:"Speed Z",varN:"speedZ",sub:"Movement",cat:1,def:1,max:50,min:-50,step:.1,decs:1},{name:"SpeedLines Threshold",varN:"spdLnTh",sub:"Movement",cat:1,def:500,max:500,min:1,step:1,decs:0},{name:"Move Dir",varN:"movDrP",sub:"Movement",cat:1,def:0,max:1,min:-1,step:.1,decs:1},{name:"Turn Speed",varN:"trnSp",sub:"Movement",cat:1,def:1,max:2,min:0,step:.01,decs:2},{name:"Ground Accel",varN:"grA",sub:"Movement",cat:1,def:.042,max:.1,min:1e-4,step:1e-4,decs:4},{name:"Ground Decel",varN:"grDec",sub:"Movement",cat:1,def:.99,max:.9999,min:.9,step:1e-4,decs:4},{name:"Air Accel",varN:"arA",sub:"Movement",cat:1,def:.0047,max:.1,min:1e-4,step:1e-4,decs:4},{name:"Air Decel",varN:"airDec",sub:"Movement",cat:1,def:.9996,max:.9999,min:.9,step:1e-4,decs:4},{name:"Can Crouch",varN:"canCrch",sub:"Movement",def:!0,cat:1,bool:!0},{name:"Crouch Speed",varN:"crchSpd",sub:"Movement",cat:1,def:.3,max:4,min:0,step:.1,decs:1},{name:"Ladder Accel",varN:"ldA",sub:"Movement",cat:1,def:1,max:5,min:.1,step:.1,decs:1},{name:"Slide Time",varN:"slT",sub:"Movement",cat:1,max:3,min:.01,step:.01,decs:1},{name:"Slide Accel",varN:"slA",sub:"Movement",cat:1,max:1.5,min:.01,step:.01,decs:1},{name:"Free Range Sliding",varN:"frSlid",sub:"Movement",def:!1,cat:1,bool:!0},{name:"Backwards Sliding",varN:"bkSlid",sub:"Movement",cat:1,bool:!0},{name:"Step Frequency",varN:"stpFr",sub:"Movement",cat:1,def:1,max:20,min:.1,step:.1,decs:1},{name:"Step Sound Dynamic",varN:"stpSD",sub:"Movement",cat:1,def:0,max:1,min:0,step:.01,decs:2},{name:"Health",varN:"health",sub:"Health",max:5e3,min:1,step:1,decs:0},{name:"HP Segments",varN:"segs",sub:"Health",max:10,min:1,step:1,decs:0},{name:"Regen",varN:"regen",sub:"Health",max:3,min:.01,step:.01,decs:2},{name:"Regen Delay",varN:"regenDelay",sub:"Health",max:1e4,min:0,step:1,decs:0},{name:"Hitbox Scale",varN:"hbS",sub:"Hitbox",cat:1,def:0,max:20,min:0,step:.1,decs:1},{name:"Hitbox Height",varN:"hbH",sub:"Hitbox",cat:1,def:0,max:20,min:0,step:.1,decs:1},{name:"Jump Cooldown",varN:"jpC",sub:"Jumping",cat:1,def:1,max:3,min:.1,step:.1,decs:1},{name:"Disable Jump",varN:"disJump",sub:"Jumping",cat:1,def:!1,bool:!0},{name:"Infinite Jump",varN:"infJ",sub:"Jumping",cat:1,def:!1,bool:!0},{name:"Override Jump",varN:"ovrJump",sub:"Jumping",cat:1,def:!1,bool:!0},{name:"Can Shoot",varN:"canShoot",sub:"Shooting",cat:1,def:!0,bool:!0},{name:"Shoot to Camera",varN:"shtToCam",sub:"Shooting",cat:1,def:!1,bool:!0},{name:"Shot Dir Drag",varN:"shtDrg",sub:"Shooting",cat:1,def:1,max:1,min:.01,step:.01,decs:2},{name:"Shot Dir XOff",varN:"shotX",sub:"Shooting",cat:1,def:0,max:360,min:0,step:5,decs:0},{name:"Shot Dir YOff",varN:"shotY",sub:"Shooting",cat:1,def:0,max:360,min:0,step:5,decs:0},{name:"Can Hipfire",varN:"hipF",sub:"Shooting",def:!0,bool:!0},{name:"Crouch Shooting",varN:"croSh",sub:"Shooting",def:!0,bool:!0},{name:"Mid Air Shooting",varN:"airSh",sub:"Shooting",def:!0,bool:!0},{name:"Player Collision",varN:"pColl",sub:"Collision",cat:1,def:!1,bool:!0},{name:"Can Melee",varN:"canMelee",sub:"Weapons",cat:1,def:!0,bool:!0},{name:"Melee Charge Time",varN:"throwChrg",sub:"Weapons",cat:1,max:5e3,min:0,step:10,decs:0},{name:"Melee Rate Multiplier",varN:"melRate",sub:"Weapons",cat:1,max:5,min:.1,step:.1,decs:1},{name:"Can Wall Jump",varN:"wallJ",sub:"Movement",bool:!0},{name:"Walljumps Max",varN:"wallJM",sub:"Movement",cat:1,max:100,min:0,step:1,decs:0},{name:"Wall Jump Decel",varN:"wallJD",sub:"Movement",def:.3,max:1,min:0,step:.1,decs:1},{name:"Wall Jump Velocity",varN:"wallJV",sub:"Movement",def:.03,max:.1,min:.01,step:.01,decs:2},{name:"Has Secondary",varN:"secondary",sub:"Weapons",bool:!0},{name:"Custom Crosshair",varN:"cID",def:"",cat:1,sub:"Crosshair",len:12,input:!0},{name:"Chase Crosshair",varN:"ccID",def:"",cat:1,sub:"Crosshair",len:12,input:!0}];var d=e.exports.classConfig.findIndex((e=>"movSch"==e.varN))+1,h=0;for(a=0;a<n.length;a++)if((l=n[a].vals)&&l.length)for(var u,p=n[a].prefix,f=0;f<l.length;f++)(u={...l[f]}).varN=p+u.varN,u.sub=n[a].name+" Config",e.exports.classConfig.splice(d+h,0,u),h++;e.exports.effectConfig=[{name:"Name",varN:"name",input:!0,len:24},{name:"Max Limit",varN:"max",cat:0,max:10,min:1,step:1,decs:0},{name:"Timer",varN:"timer",cat:0,max:120,min:0,step:1,decs:0},{name:"Effect Mlt",varN:"mlt",cat:0,max:10,min:0,step:.01,decs:2},{name:"Health",varN:"hp",cat:0,max:100,min:0,step:1,decs:0}],e.exports.playerVals=["health","maxHealth","score","classIndex"],e.exports.custValLimit=30,e.exports.weaponConfig=[{name:"Name",varN:"name",input:!0,len:24},{name:"Damage",varN:"dmg",max:200,min:-200,step:1,decs:0},{name:"Headshot Mlt",varN:"hsMlt",max:3,min:.5,step:1e-4,decs:4},{name:"Legshot Mlt",varN:"lsMlt",max:3,min:.01,step:1e-4,decs:4},{name:"Ammo",varN:"ammo",max:500,min:1,step:1,decs:0},{name:"Rate",varN:"rate",max:1e3,min:70,step:5,decs:0},{name:"Is Burst",varN:"burst",bool:!0},{name:"Burst Count",varN:"burstC",max:10,min:0,step:1,decs:0},{name:"Burst Rate",varN:"burstR",max:1e3,min:50,step:10,decs:0},{name:"Reload Time",varN:"reload",max:5e3,min:500,step:25,decs:0},{name:"Reload Y",varN:"reloY",max:1,min:0,step:.01,decs:2},{name:"Swap Time",varN:"swapTime",max:1e3,min:100,step:10,decs:0},{name:"Aim Speed",varN:"aimSpd",max:500,min:100,step:10,decs:0},{name:"Overcharge",varN:"ovrChrg",bool:!0},{name:"Charge Time",varN:"chrgTime",max:1e4,min:0,step:10,decs:0},{name:"Move Speed",varN:"spdMlt",max:3,min:.5,step:.01,decs:2},{name:"Pierce",varN:"pierce",max:1,min:0,step:.05,decs:2},{name:"Range",varN:"range",max:2e3,min:5,step:1,decs:0},{name:"Damage Drop",varN:"dmgDrop",max:100,min:0,step:1,decs:0},{name:"Move Spread",varN:"movSpread",max:3,min:0,step:.01,decs:2},{name:"Ads Spread",varN:"adSpread",max:1,min:0,step:.01,decs:2},{name:"Spread",varN:"spread",max:500,min:0,step:.1,decs:1},{name:"Min Spread",varN:"minSpread",max:100,min:0,step:.1,decs:1},{name:"Zoom",varN:"zoom",max:15,min:1,step:.01,decs:2},{name:"Recoil",varN:"recoil",max:.05,min:0,step:1e-4,decs:4},{name:"Recoil Y",varN:"recoilYM",max:2,min:0,step:.01,decs:2},{name:"Recoil Z",varN:"recoilZ",max:10,min:0,step:.1,decs:2},{name:"Recoil Z Aim",varN:"recoilZM",max:1,min:-1,step:.01,decs:2},{name:"Jump Power",varN:"jumpYM",max:1,min:.1,step:.01,decs:2},{name:"Impulse Range",varN:"physRang",max:2e3,min:0,step:1,decs:0},{name:"Impulse Power",varN:"physPow",max:2,min:-2,step:.001,decs:3},{name:"Is Secondary",varN:"secondary",bool:!0},{name:"Is Equipment",varN:"equipment",bool:!0},{name:"Akimbo",varN:"akimbo",bool:!0},{name:"Single Fire",varN:"nAuto",bool:!0},{name:"No Spread",varN:"noSpread",bool:!0},{name:"Disable ADS",varN:"noAim",bool:!0},{name:"Custom Icon",varN:"assetIcon",input:!0,len:12},{name:"Reference Distance (Sound)",varN:"refDist",max:5e3,min:0,step:.1,decs:1},{name:"RollOff Factor (Sound)",varN:"rollOff",max:1,min:0,step:.01,decs:2},{name:"Disable Projectile",varN:"pj_disable",bool:!0},{name:"Projectile Asset",varN:"pj_asset",len:12,input:!0},{name:"Projectile Damage",varN:"pj_dmg",max:200,min:-200,step:1,decs:0},{name:"Projectile Speed",varN:"pj_spd",max:5,min:.01,step:.01,decs:2},{name:"Projectile Scale",varN:"pj_scale",max:10,min:.01,step:.01,decs:2},{name:"Projectile Length",varN:"pj_length",max:50,min:1,step:1,decs:0},{name:"Projectile Range",varN:"pj_range",max:1e4,min:10,step:10,decs:0},{name:"Projectile Gravity",varN:"pj_grav",max:.01,min:-.01,step:1e-5,decs:5}],e.exports.spinCountryBlock=["NL","BE"],e.exports.whoToFol=[{name:"Sidney",tag:"Developer",id:201211},{name:"Vince",tag:"Developer",id:105683},{name:"MoonJuiceAlt",alias:"MoonJuice",tag:"Streamer",id:2968503},{name:"ImWaspy",tag:"Streamer",id:2593871},{name:"cimota",tag:"Skin Maker",id:7516049},{name:"Kilfy",tag:"Skin Maker",id:8871318},{name:"iSpy",tag:"Skin Maker",id:177694},{name:"Nxbulah",tag:"Skin Maker",id:5739887},{name:"Skriller33",tag:"Skin Maker",id:5068654},{name:"Andrii",tag:"Map Maker",id:163429},{name:"JavieBhop",tag:"Map Maker",id:1517556},{name:"Keybi",tag:"Map Maker",id:310968},{name:"siktis",tag:"Mod Maker",id:5746131},{name:"DukeV",tag:"Map Maker",id:943615},{name:"Chwoubaka",tag:"Mod Maker",id:4927907},{name:"Swixie",tag:"Streamer",id:5720620},{name:"QuackyTTV",alias:"Quacky",tag:"Streamer",id:3742667},{name:"eskrr",tag:"Map Maker",id:383703}],e.exports.gravity=15e-5,e.exports.deathY=-100,e.exports.skyScale=18e3,e.exports.shadowDst=1200,e.exports.shadowRes=1024,e.exports.shadowOff=.004,e.exports.lightDistance=500,e.exports.lightIntensity=1.3,e.exports.ambIntensity=1,e.exports.cornerScl=2.5,e.exports.cornerH=7,e.exports.wallH=5,e.exports.wallW=.8,e.exports.sunAngleX=90,e.exports.sunAngleY=54,e.exports.cornerPad=1,e.exports.diskSpin=2e-4,e.exports.ladderWidth=3.2,e.exports.ladderScale=.5,e.exports.terrainGrid=8,e.exports.maxTerrainS=4e3,e.exports.buildMax=1200,e.exports.otherSoundMlt=.55,e.exports.networkSounds=["spray","taunt_0","taunt_1","taunt_2","taunt_3","weapon_1","weapon_1_0","weapon_2","weapon_3","weapon_4","weapon_5","weapon_6","weapon_7","weapon_8","weapon_9","weapon_10","weapon_11","weapon_12","weapon_13","weapon_14","weapon_15","weapon_16","weapon_17","weapon_18","weapon_6_0","weapon_1_2","weapon_3_0","weapon_3_2","taunt_4","weapon_2_0","weapon_1_4","weapon_1_3","weapon_17_0","weapon_8_0","weapon_10_0","collect_1","melee_12","headshot_0","weapon_4_0","melee_14","beep_0","bo_plant","bo_diff","weapon_1_5","weapon_19","melee_19","jump_0","jump_1","step_0","step_1","step_2","weapon_11_0","weapon_4_1","weapon_4_2","weapon_4_3","weapon_7_0","melee_25","melee_25_1","weapon_1_6","shoe_2","shoe_1","weapon_7_1","weapon_2_1","weapon_1_7","weapon_2_2","build_0","weapon_2_3","swing_0","weapon_9_0","weapon_1_8","weapon_3_16","weapon_14_0","weapon_10_1","weapon_11_1","melee_38","weapon_12_0","weapon_14_1","adrop_1","weapon_6_1","weapon_2_4","weapon_10_2","weapon_8_1","weapon_5_0","weapon_4_4","cntd_1","cntd_2","cntd_3","cntd_4","cntd_5","weapon_20","gong_0","dragon_0","weapon_17_1","weapon_3_3","melee_42","weapon_2_5","dom_zone_securing_0","dom_zone_securing_1","dom_zone_losing_0","dom_zone_secured_0","dom_zone_secured_1","dom_zone_secured_2","dom_zone_all_0","dom_zone_all_1","taunt_5","weapon_1_12","weapon_1_9","weapon_2_6","weapon_2_7","weapon_2_8","weapon_2_9","weapon_5_1","weapon_5_2","weapon_7_2","weapon_7_3","weapon_7_4","weapon_7_5","weapon_9_1","weapon_10_3","weapon_15_1","weapon_15_2","weapon_15_3","weapon_16_1","weapon_6_2","weapon_3_4","weapon_4_6","weapon_4_5","weapon_1_11","weapon_17_3","weapon_2_10","weapon_7_6","weapon_8_2","weapon_11_3","weapon_1_10","weapon_22","weapon_17_4","weapon_19_0","weapon_12_1","weapon_14_2","spray_1","weapon_1_13","weapon_2_11","weapon_3_6","weapon_4_8","weapon_5_3","weapon_6_3","weapon_7_7","weapon_8_3","weapon_9_2","weapon_10_4","weapon_11_4","weapon_12_2","weapon_14_3","weapon_15_4","weapon_16_2","weapon_17_4","weapon_19_1","weapon_3_5","weapon_9_3","bundle_1","cheer_0","bundle_2","bundle_3","bundle_4","weapon_6_4","stepwo_0","stepwo_1","stepwat_0","stepwat_1","stepsa_0","stepsa_1","stepsno_0","stepsno_1","stepsno_2","weapon_2_13","weapon_7_9","melee_65","gift_0","weapon_28_0","weapon_11_6","weapon_10_6","weapon_1_15","weapon_1_16","weapon_2_14","weapon_6_6","bundle_5","bundle_6","weapon_4_10","weapon_2_15","weapon_1_17","weapon_23","shoe_19","weapon_6_7","weapon_2_16","weapon_21","weapon_6_8","weapon_6_9","weapon_11_7","weapon_7_10","egg_0","egg_1","weapon_24","weapon_4_11","weapon_1_18","weapon_25","weapon_26","zap_0","weapon_5_5","jug_0","weapon_1_19","weapon_27","weapon_28","weapon_2_17","weapon_11_8","weapon_6_10","weapon_1_20","weapon_17_6","reload_3","weapon_3_8","weapon_2_18","weapon_29","weapon_29_blast","weapon_4_12","weapon_1_21","weapon_4_13","weapon_9_6","weapon_16_4","weapon_4_14","weapon_1_22","weapon_8_5","bhop_reset","weapon_4_15","weapon_6_11","shoe_28","mystery_1","mystery_0","instantkill_0","firesale_0","firesale_1","bundle_12","bundle_13","weapon_9_7","weapon_upgraded","bundle_14","weapon_14_5","weapon_12_4","bundle_15","weapon_3_9","weapon_4_17","weapon_5_6","weapon_19_3","weapon_1_23","weapon_1_24","weapon_4_18","weapon_11_9","weapon_29_2","weapon_4_16","weapon_2_19","weapon_2_20","shoe_46","weapon_10_7","weapon_3_10","pick_0","pick_1","aim_1","weapon_31"],e.exports.stepSounds=[{name:"Default",ids:["step_0","step_1","step_0"]},{name:"Wood",ids:["stepwo_0","stepwo_1"]},{name:"Water",ids:["stepwat_0","stepwat_1"]},{name:"Sand",ids:["stepsa_0","stepsa_1"]},{name:"Snow",ids:["stepsno_0","stepsno_1","stepsno_2"]}],e.exports.particleIDS=["default","grass","fog","ember"],e.exports.maxParticles=100,e.exports.explosionRange=200,e.exports.particleDist=40,e.exports.particleBlending=["None","Normal","Additive","Subtractive","Multiply"],e.exports.overCharge=1.2,e.exports.throwCharge=900,e.exports.projSpreads=[.1,-.8,.3,1,.1,-.4,-.1,.3,.5,-.45,.2,-.2],e.exports.minDrop=300,e.exports.dropR=.1,e.exports.chatMaxLength=70,e.exports.chatInterval=800,e.exports.chatListLength=35,e.exports.voiceChatMaxLength=.65,e.exports.voiceRate=500,e.exports.invisChar="&lrm;",e.exports.mouseSens=.0024,e.exports.camChaseTrn=.0022,e.exports.camChaseSpd=.0012,e.exports.camChaseSen=.2,e.exports.camChaseDst=24,e.exports.specMinD=10,e.exports.specMaxD=160,e.exports.menuCamAngle=-.5,e.exports.priorityPopTimer=1e4,e.exports.clipNames=["Idle","Move","MoveFast","Jump","Melee","Shoot","Crouch"],e.exports.idleAnimS=.0015,e.exports.animMult=1.2,e.exports.leanPull=.99,e.exports.leanSens=.05,e.exports.leanMax=.16,e.exports.leanPullZ=.99,e.exports.leanMltZ=.03,e.exports.bobMltY=.024,e.exports.bobPullY=.985,e.exports.bobPullZ=.99,e.exports.bobMltZ=.02,e.exports.aimAnimMlt=.18,e.exports.aimSlow=.55,e.exports.aimJumpSlow=.85,e.exports.stepAnim=.075,e.exports.stepMlt=.25,e.exports.stepPull=.995,e.exports.collPad=1.1,e.exports.maxHealth=100,e.exports.cameraHeight=1.5,e.exports.ladderSpeed=.035,e.exports.ladderDecel=.97,e.exports.slideDecel=.999,e.exports.slideTime=350,e.exports.terrainSlideDecel=.9996,e.exports.groundDecel=.99,e.exports.terrainDecel=.99,e.exports.airDecel=.9996,e.exports.jumpVel=.072,e.exports.jumpPush=.1,e.exports.decelMin=1e-4,e.exports.climbHeight=3,e.exports.playerSlideVelMlt=1.2,e.exports.playerTerrainSlideVelMlt=.4,e.exports.materialDens={flesh:.2,default:.5},e.exports.nameOffset=.6,e.exports.nameOffsetHat=.8,e.exports.maxNameLength=14,e.exports.maxPassLength=20,e.exports.minPassLength=6,e.exports.playerHeight=11,e.exports.chestWidth=2.6,e.exports.chestScale=1.3,e.exports.armScale=1.2,e.exports.legScale=1.3,e.exports.uArmLength=2.7,e.exports.armInset=-.1,e.exports.lArmLength=2.7,e.exports.headScale=2,e.exports.armOff=-.8,e.exports.legHeight=4.2,e.exports.playerScale=(2*e.exports.armScale+e.exports.chestWidth+e.exports.armInset)/2,e.exports.tracerMinDst=20,e.exports.tracerMaxDst=500,e.exports.crouchLean=-.1*Math.PI,e.exports.crouchDst=3,e.exports.crouchSpd=.007,e.exports.crouchJump=.25,e.exports.crouchSpread=.55,e.exports.crouchAnim=8e-4,e.exports.crouchAnimMlt=.5,e.exports.spreadMove=25,e.exports.spreadFall=30,e.exports.spreadRecover=.985,e.exports.spreadAdj=63e-5,e.exports.spreadMlt=240,e.exports.recoilMlt=.3,e.exports.flagMsg="You have the Flag",e.exports.flagMsgE="Enemy has your Flag",e.exports.flagMsgRC="Enemy has your Flag",e.exports.flagZoneS=24,e.exports.flagZoneH=36,e.exports.flagScale=12,e.exports.flagOff=6,e.exports.flagHOff=15,e.exports.flagUpdate=2500,e.exports.flagIdle=45e3,e.exports.interactTimer=100,e.exports.pickupTimer=1e3,e.exports.pickupZoneX=12,e.exports.pickupZoneZ=4,e.exports.pickupZoneH=2,e.exports.pickupScale=6,e.exports.pickupOff=1,e.exports.pickupImgRange=50,e.exports.maxLevel=102,e.exports.assistTime=5e3,e.exports.assistScore=25,e.exports.assistMin=20,e.exports.medalAnim=1800,e.exports.medalDelay=900,e.exports.feedTimer=2e3,e.exports.endStats=["sid","name","score","kills","deaths","reward"],e.exports.endForm={reward:function(e){return e?"<span style='color:#F8C55C'>+"+e+"</span> KR":"NONE"},time:function(e,t,i){return i.timer||"DNF"},infected:function(e,t,i){return i.convs},found:function(e,t,i){return i.convs},weapon:function(e,t,i){return i.weaponTier},objective:function(e,t,i){return i.objectiveScore||0},obj:function(e,t,i){return i.objectiveScore||0},confirms:function(e,t,i){return i.confirms||0},denies:function(e,t,i){return i.denies||0},dmg:function(e,t,i){return Math.round(i.dmgDealt||0)},zombies:function(e,t,i){return i.aiKills||0},downs:function(e,t,i){return i.deaths||0},points:function(e,t,i){return i.score||0}},e.exports.hitLife=2e3,e.exports.regenDelay=5e3,e.exports.regenVal=.1,e.exports.sprayRange=25,e.exports.sprayTimer=1e3,e.exports.sprayScale=15,e.exports.deathDelay=2800,e.exports.suicides=["uninstall life","toaster bath","alt f4","not alive","neck rope","scooter ankle","death.exe","ctrl w"],e.exports.taunts=[{nm:"taunt_0",id:1,tm:500},{nm:"taunt_1",id:2,tm:1e3},{nm:"taunt_2",id:3,tm:2300},{nm:"taunt_3",id:4,tm:3200},{nm:"taunt_4",id:28,tm:3200},{nm:"taunt_5",id:104,tm:1e3}],e.exports.fov=80,e.exports.viewDist=2e3,e.exports.nameVisRate=200,e.exports.worldUV=60,e.exports.ambientVal=.5,e.exports.ambOff=.09,e.exports.ambScale=8,e.exports.boosterSpd=.002,e.exports.boostRange=100,e.exports.minMountainMlt=0,e.exports.maxTerrainSize=8e3,e.exports.minTerrainSize=0,e.exports.maxMountainMlt=5,e.exports.minZoneSize=0,e.exports.maxZoneSize=1e4,e.exports.minZoneHeight=100,e.exports.maxZoneHeight=1e4,e.exports.maxShrinkSpeed=50,e.exports.minShrinkSpeed=1,e.exports.maxZoneWait=500,e.exports.minZoneWait=5,e.exports.maxZoneStages=10,e.exports.minZoneStages=0,e.exports.positionRange=5e5,e.exports.quadSize=150,e.exports.emitterVolMin=.05,e.exports.emitterVolMax=2,e.exports.emitterRateMin=.1,e.exports.emitterRollMin=0,e.exports.emitterRollMax=1,e.exports.emitterRateMax=4,e.exports.emitterDistMin=0,e.exports.emitterDistMax=5e3,e.exports.emitterSounds=["nuke_0","siren_0","explosion","fart_0","taunt_0","taunt_1","taunt_2","taunt_3","buy_0","buy_1","case_0","case_1","cheer_0","reward","store","tick_0","scare_0","cough_1","cough_2","taunt_4","ambient_1","ambient_2","ambient_3","ambient_4","ambient_5","ambient_6","ambient_7","ambient_8","beep_0","bo_plant","bo_diff","collect_1","bounce_0","headshot_0","hit_0","impact_0","jump_0","jump_1","land_0","punch_0","punch_1","slide_0","spray","step_0","step_1","step_2","whizz_0","whizz_1","gclick_0","pick_0","pick_1","build_0","break_wood","bhop_check","bhop_reset","gong_0","dragon_0","taunt_5","spray_1","stepwo_0","stepwo_1","stepwat_0","stepwat_1","stepsa_0","stepsa_1","stepsno_0","stepsno_1","stepsno_2","bounce_1","zap_0","jug_0","crit_0","melee_equip"],e.exports.maxPfp=250,e.exports.aiSyncT=5,e.exports.airDSyncT=5,e.exports.leaderOSync=5,e.exports.aiBehavs=["Idle","Chase"],e.exports.pathTypes=["Loop","Do Once","Ping Pong","Random"],e.exports.aiLimit=40,e.exports.botLimit=16,e.exports.assetLvl=5,e.exports.assetCost=.05,e.exports.assetCostP=0,e.exports.assetUploads=400,e.exports.assetUploadsF=600,e.exports.assetUploadsP=800,e.exports.assetUploadsPR=1200,e.exports.assetSize=100,e.exports.assetSizeP=250,e.exports.assetThumb=250,e.exports.assetThumbP=500,e.exports.assetIcon=100,e.exports.assetData=55,e.exports.assetTexture=10,e.exports.assetTextureDiffuse=10,e.exports.assetTextureEmissive=10,e.exports.assetTextureSpecular=10,e.exports.assetTextureNormal=10,e.exports.assetTextureAlpha=10,e.exports.assetTextureDisplacement=10,e.exports.assetTextureMetalness=10,e.exports.assetTextureRoughness=10,e.exports.assetTextureLight=10,e.exports.assetTextureBump=10,e.exports.assetSound=5,e.exports.assetVideo=20,e.exports.assetCat=["Clutter","Decoration","Trees & Vegetation","Vehicles","Buildings","Furniture","Stones & Rubble","Technology","Weapons","Random & Strange","Tools","Food & Drink","Characters & Creatures","Fashion & Clothes","Game Map","Walls & Blocks","Textures","Sounds","Triggers"],e.exports.mapCats=["Other","Parkour","Puzzle","Trading","Training","Social","Horror","Adventure","Battle Royale","Realism","Roleplay","Rotation","Racing","Raid","Remake","NCR","Zombies","Simulation","Relaxation","Action","Tycoon","Mini-Games","Single-player","Education"],e.exports.mapCatsP=[{n:"Action",i:1},{n:"Parkour",i:8},{n:"Remake",i:4},{n:"Zombies",i:7},{n:"Horror",i:0},{n:"Realism",i:12},{n:"Mini-Games",i:5},{n:"Adventure",i:2},{n:"Single-player",i:10},{n:"Battle Royale",i:9},{n:"Relaxation",i:3},{n:"Simulation",i:11},{n:"Tycoon",i:6},{n:"Raid",i:13}],e.exports.borderH=500,e.exports.soundScapes={Default:1,City:2,Desert:3,Market:4,Scary:5,Storm:6,Purgatory:7,"Black Market":8,Tomb:11,Adventure:15,Sea:16,Facility:17,Spooky:18,Festive:19},e.exports.amvVols={6:.3,7:.4,15:.04,16:.1,17:.2},e.exports.mapTabs=[{n:"Home",home:!0,cache:!0,noPages:!0,c:44,txt:"<span class='material-icons material-icons-outlined' style='color:#fbc02d;font-size:42px;vertical-align:bottom'>home</span>",t:"home"},{n:"Popular",cache:!0,c:44,t:"recent"},{n:"Featured",noPages:!0,cache:!0,c:44,t:"featured"},{n:"New",cache:!0,c:44,t:"initialdate"},{n:"Favorites",c:44,sendID:!0,fav:!0},{n:"My Games",c:44,sendID:!0,t:"votes",owned:!0},{n:"Search",search:!0,t:"votes",txt:"<span class='material-icons' style='color:#ffffff;font-size:42px;vertical-align:bottom'>search</span>"},{n:"Editor",click:"openURL(`./editor.html`)",txt:"<span class='material-icons' style='color:#ffffff;font-size:44px;vertical-align:bottom'>construction</span>Editor"},{n:"Sandbox",click:"openURL(`./?sandbox`)",txt:"<span class='material-icons' style='color:#ffffff;font-size:44px;vertical-align:bottom'>castle</span>Sandbox"},{n:"New & Popular",cache:!0,hide:!0,c:80,t:"recent_new"},{n:"All time",cache:!0,hide:!0,c:80,t:"gameplays"},{n:"Trending Now",cache:!0,hide:!0,c:60,t:"plays_recent"},{n:"New & Trending",cache:!0,hide:!0,c:80,t:"plays_new"}],e.exports.fetMapVids={Atrox:"ieuJNE2lPgM",BattleRoyaleXXL:"1",Black_Tower:"AjBeYdd8tm8",BowsersCastle:"eWheNpYzEZ8","CS1.6_dust2":"2aBrAAtlKyI","CS1.6_train":"1",DQ_Battleboats_1:"nfcnpwCJRIs",FacingWorlds:"xt_5DjpwOiY",FallBots:"zWZ4Rn_cy0o",Firefly_Defense:"1",Firefly_Royale:"1",Flood_Escape:"oOnuyqoXezY",Gangville:"JX-Z1xdWUfc",JailBird:"xtA0ceyl3jo",LaserWar:"y-BW5MftcuY",Lava_Run:"P4WZhhXYI88",Minecraft_Ville:"195ha7DvRT8",Parkour_Growth:"qclcH-sIlg0",Pizza_place:"lZyVcTyHaoY",Portal_Puzzles:"199vP_Lcx0o",Pristis:"XdMQr0Kax88",STAR_WARS_versus:"1",Saucer_Labs:"","Sky_Wars!":"raB3WyRNZXU",SpongeGun:"-DtGLkEwFa8","TNT_Run!":"1","Ten-Pin_Bowling":"1",TheCliff:"WGtV-4xPQ5k","Walljump_6.4":"8P5ORjnUlcw",War_of_Krunk:"1",Warlord:"1",Zombie_Bulwark:"2XXCQo4YpSQ",race_AirshpPnbal:"R86AuYFTmls",race_Mariokart2:"vVRG5pa39GE",slide_daydream:"JKz4SRQaA7k",slide_moonlight:"UEZCekc7jjs"},e.exports.fetModVids={RGBRave:"K4FjJRjoAUM"},e.exports.modSize=25,e.exports.modSizeP=50,e.exports.modTabs=[{n:"Home",home:!0,cache:!0,noPages:!0,c:44,txt:"<span class='material-icons-outlined' style='color:#fbc02d;font-size:42px;vertical-align:bottom'>home</span>",t:"featured"},{n:"Popular",cache:!0,c:44,t:"recent"},{n:"New",cache:!0,c:44,t:"initialdate"},{n:"Favorites",c:44,sendID:!0,fav:!0},{n:"My Mods",c:44,sendID:!0,t:"votes",owned:!0},{n:"Loaded",noLoad:!0},{n:"Search",search:!0,t:"votes",txt:"<span class='material-icons' style='color:#ffffff;font-size:42px;vertical-align:bottom'>search</span>"}],e.exports.mailTabs=[{n:"Followers"},{n:"Clan"},{n:"Hub"},{n:"Inbox"},{n:"Archive"}],e.exports.assetTabs=[{n:"New"},{n:"My Assets",sendUser:!0},{n:"Search",search:!0}],e.exports.giftMax=1e7,e.exports.giftMin=10,e.exports.giftMinLVl=30,e.exports.marketEnabled=!0,e.exports.saleMax=1e7,e.exports.saleGrace=3e5,e.exports.marketMinLVl=15,e.exports.marketFeeBypass=0,e.exports.marketFee=.1,e.exports.giftFee=.1,e.exports.priceUpdate=432e5,e.exports.minQSJunk=.01,e.exports.minQSKR=5,e.exports.streamRotation=8e3,e.exports.creatorReset=6048e5,e.exports.clanTabs=["<span class='material-icons' style='color:#fbc02d;font-size:42px;vertical-align:bottom'>home</span>","Members","Stats","Requests"],e.exports.clanRoles=[{name:"Recruit"},{name:"Soldier",earn:!0,max:25},{name:"Captain",earn:!0,max:5,perms:1},{name:"Commander",earn:!0,max:1,perms:2}],e.exports.bypassCaptcha=!0,e.exports.twoFAKeyLen=6,e.exports.maxSpraysF=3,e.exports.maxSpraysP=2,e.exports.maxSprays=1,e.exports.accValidationTime=6e4,e.exports.accAnnounceId=0,e.exports.accAnnounce=["Make sure to use a secure password.","Update your password frequently and keep it in a secure place.","Instead of using a password like pass123,","please use something more secure like x&fyUyp92fH2sXf"],e.exports.ktvTimer=12e4,e.exports.profileTabs=["<span class='material-icons' style='color:#fbc02d;font-size:42px;vertical-align:bottom'>home</span>","Friends","Settings"],e.exports.statTabs=["General Stats","Killstreak Stats","Other Stats","Class Stats"],e.exports.socials=["leaders","profile","maps","market","itemsales","clan","map","search","mods","mod","feed","post","listing","items"],e.exports.dataDateRanges=[7,14,21,30,60,90,120],e.exports.marketQueries={market:{btn:"Info",checkItem:function(e){return!!e.funds}},inventory:{btn:"List to Sell",checkItem:function(e){return!e.funds&&e.c>0}},sales:{btn:"Unlist",checkItem:function(e){return!!e.funds}},stats:{},trades:{},blackm:{}},e.exports.leaderQueries=["player_score","player_kills","player_wins","player_timeplayed","player_funds","player_clan","player_followed","player_eventtime","player_nukes","player_skinvalue","player_elo4","player_eventcount"],e.exports.leaderCal={player_score:function(t){var i=Math.max(1,Math.floor(e.exports.rankVar*Math.sqrt(t)));return"<span class='floatR' style='color:rgba(255,255,255,0.5);'><img src='https://assets.krunker.io/img/levels/"+Math.max(Math.min(e.exports.maxLevel-1,i.roundToNearest(2)-1),0)+".png' class='rnkIcon'>"+i+"</span>"},player_kills:function(e){return e+"<span class='lName'> kills</span>"},player_wins:function(e){return e+"<span class='lName'> wins</span>"},player_funds:function(e){return"<span style='color:rgba(255,255,255,0.4)'>"+e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+"</span> KR"},player_skinvalue:function(e){return"<span style='color:rgba(255,255,255,0.4)'>~ "+e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+"</span> KR"},player_timeplayed:function(e){e=1.2*(e||0);var t=Math.floor(e/1e3),i=Math.floor(t/60);t%=60;var n=Math.floor(i/60);i%=60;var s=Math.floor(n/24);return"<span style='color:rgba(255,255,255,0.5)'>"+(s?s+"d ":"")+((n%=24)?n+"h ":"")+(i||0)+"m "+t+"s</span>"},player_followed:function(e){return(e||0).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+" <span class='lName'>followers</span>"},player_eventcount:function(t){return"<span class='lName'>found</span> "+t+"/"+e.exports.easterEggs},player_eventtime:function(e){return"Round "+(e||0)}},e.exports.socialRegions=["All Regions","Oceania","Asia","Europe","North America","South America"],e.exports.regionNames={local:"Local","us-nj":"New York","us-il":"Chicago","us-tx":"Dallas","us-wa":"Seattle","us-ca-la":"Los Angeles","us-ga":"Atlanta","nl-ams":"Amsterdam","gb-lon":"London","de-fra":"Frankfurt","us-ca-sv":"Silicon Valley","au-syd":"Sydney","fr-par":"Paris","jb-hnd":"Tokyo","us-fl":"Miami",sgp:"Singapore",blr:"India","as-mb":"Mumbai",brz:"Brazil","me-bhn":"Middle East","af-ct":"South Africa","as-seoul":"South Korea","mx-cmx":"Mexico","eu-stm":"Sweden",tor:"Toronto",pol:"Poland","us-hi":"Hawaii"},e.exports.hostTransferLimit=5,e.exports.dediTimer=6e5,e.exports.dediSlots=3,e.exports.dediDurat=[30,60,90],e.exports.dediPrices=[7500,14e3,2e4],e.exports.regionIndexs=["NY","SV","DAL","MIA","STL","CHI","MX","BRZ","BHN","TOK","SGP","SEO","MBI","FRA","LON","AFR","SYD"],e.exports.purchServRegions=[{r:"North America",n:"New York",f:"US"},{r:"North America",n:"Sillicon Valley",f:"US"},{r:"North America",n:"Dallas",f:"US"},{r:"North America",n:"Miami",f:"US"},{r:"North America",n:"Seattle",f:"US"},{r:"North America",n:"Chicago",f:"US"},{r:"North America",n:"Mexico",f:"MX"},{r:"South America",n:"Sao Paolo",f:"BR"},{r:"Middle East",n:"Manama",f:"BH"},{r:"East Asia",n:"Tokyo",f:"JP"},{r:"Asia",n:"Singapore",f:"SG"},{r:"East Asia",n:"Seoul",f:"KR"},{r:"South Asia",n:"Mumbai",f:"IN"},{r:"Europe",n:"Frankfurt",f:"DE"},{r:"Europe",n:"London",f:"GB"},{r:"Africa",n:"Cape Town",f:"ZA"},{r:"Australia",n:"Sydney",f:"AU"}],e.exports.langNames={en:"English",es:"Espaol",de:"Deutsch",nl:"Nederlands",kr:"",pr:"Portugus",jp:"",fr:"Franais",fi:"Suomi",zh:"",zhtr:"",pl:"Polski",hi:"",ru:"P",it:"Italiano",tg:"Tagalog",tr:"Trke"},e.exports.skinColors=[{id:0,col:8412234,name:"Bronze"},{id:1,col:10975328,name:"Sienna"},{id:2,col:13864303,name:"Rose"},{id:3,col:13408638,name:"Tan"},{id:4,col:15581094,name:"Pale"},{id:5,col:8492161,name:"Infected"}],e.exports.reportOptions=["Hacking","Exploiting","Scamming","Harassment","Other","Boosting","Market Manipulation"],e.exports.serverMessages=["server.message.join","server.message.left","server.message.kicked","server.message.banned","server.message.votekicked","server.message.arrested"],e.exports.customRatios=["Native","800x600","1024x768","1280x960","1280x1024","1440x1080","1656x1080"],e.exports.playerCardStats=[{name:"SPK",language:"windows.loadout.other.killCardStat.spk",stat:function(e){return((e.account.score||0)/Math.max(e.account.kills||0,1)).toFixed(2)}},{name:"Kills",language:"windows.loadout.other.killCardStat.kills",stat:function(e){return e.account.kills||0}},{name:"Deaths",language:"windows.loadout.other.killCardStat.deaths",stat:function(e){return e.account.deaths||0}},{name:"KDR",language:"windows.loadout.other.killCardStat.kdr",stat:function(e){return((e.account.kills||0)/Math.max(e.account.deaths||0,1)).toFixed(2)}},{name:"KPG",language:"windows.loadout.other.killCardStat.kpg",stat:function(e){return((e.account.kills||0)/Math.max(e.account.games||0,1)).toFixed(2)}},{name:"Games Played",language:"windows.loadout.other.killCardStat.gamesPlayed",stat:function(e){return e.account.games||0}},{name:"Wins",language:"windows.loadout.other.killCardStat.wins",stat:function(e){return e.account.wins||0}},{name:"W/L",language:"windows.loadout.other.killCardStat.wl",stat:function(e){return((e.account.wins||0)/Math.max((e.account.games||0)-(e.account.wins||0),1)).toFixed(2)}},{name:"Nukes",language:"windows.loadout.other.killCardStat.nukes",stat:function(e){return e.account.stats.n||0}},{name:"Melees",language:"windows.loadout.other.killCardStat.melees",stat:function(e){return e.account.stats.mk||0}},{name:"Accuracy",language:"windows.loadout.other.killCardStat.accuracy",stat:function(e){return(e.account.stats.s?Math.min(e.account.stats.s||0,e.account.stats.h||0)/e.account.stats.s*100:0).round(1)+"%"}},{name:"KR",language:"windows.loadout.other.killCardStat.kr",stat:function(e){return e.account.funds||0}},{name:"Headshots",language:"windows.loadout.other.killCardStat.headshots",stat:function(e){return e.account.stats.hs||0}},{name:"Losses",language:"windows.loadout.other.killCardStat.losses",stat:function(e){return Math.max((e.account.games||0)-(e.account.wins||0),0)}},{name:"Wallbangs",language:"windows.loadout.other.killCardStat.wallbangs",stat:function(e){return e.account.stats.wb||0}},{name:"Beatdowns",language:"windows.loadout.other.killCardStat.beatdowns",stat:function(e){return e.account.stats.fk||0}},{name:"Bullseyes",language:"windows.loadout.other.killCardStat.bullseyes",stat:function(e){return e.account.stats.tmk||0}},{name:"Sprays Placed",language:"windows.loadout.other.killCardStat.spraysPlaced",stat:function(e){return e.account.stats.spry||0}},{name:"Assists",language:"windows.loadout.other.killCardStat.assists",stat:function(e){return e.account.stats.ast||0}},{name:"Inventory Value",language:"windows.loadout.other.killCardStat.inventoryValue",stat:function(e){return e.account.invVal||0}},{name:"Crouches",language:"windows.loadout.other.killCardStat.crouches",stat:function(e){return e.account.stats.crc||0}},{name:"Shots",language:"windows.loadout.other.killCardStat.shots",stat:function(e){return e.account.stats.s||0}},{name:"Hits",language:"windows.loadout.other.killCardStat.hits",stat:function(e){return e.account.stats.h||0}},{name:"Misses",language:"windows.loadout.other.killCardStat.misses",stat:function(e){return(e.account.stats.s||0)-Math.min(e.account.stats.s||0,e.account.stats.h||0)}},{name:"Legshots",language:"windows.loadout.other.killCardStat.legshots",stat:function(e){return e.account.stats.ls||0}},{name:"Slimers",language:"windows.loadout.other.killCardStat.slimers",stat:function(e){return e.account.stats.sl||0}},{name:"Juggernauts",language:"windows.loadout.other.killCardStat.juggernauts",stat:function(e){return e.account.stats.jg||0}},{name:"War Machines",language:"windows.loadout.other.killCardStat.warMachines",stat:function(e){return e.account.stats.wm||0}}],e.exports.mapGenProps={manager:{props:{objects:{isMapObject:!0},objectives:{},domzones:{},scorezones:{},flags:{isMapObject:!0},sites:{},pickups:{isMapObject:!0},mysteryBoxes:{},perkMachines:{},krumMachines:{},gates:{isMapObject:!0},banks:{isMapObject:!0},pathNodes:{},interfaces:{},spinners:{isMapObject:!0},destObjs:{},movedObjs:{},timerObjs:{},playerObjs:{},teleporters:{isMapObject:!0},spectateCams:{isMapObject:!0},grids:{isMapObject:!0},envZones:{},pendingAIs:{},pendingBots:{},pendingLeaders:{},pendingTriangles:{},serverNodes:{isMapObject:!0},mapAnchors:{}}},spawns:{},lastGen:{},terrainConfig:{isTerrainConfig:!0},zoneConfig:{isZoneConfig:!0},config:{},deathY:{},botPaths:{}},e.exports.mapObjectReferenceProps=["flagObj"],e.exports.blankMap='{"name":"Test","ambient":"#97a0a8","light":"#f2f8fc","sky":"#dce8ed","fog":"#8d9aa0","fogD":2000,"objects":[{"p":[0,-10,0],"s":[100,10,100]}],"spawns":[[0,0,0,0,0,0]]}',e.exports.mobileControlPositions={mobileJoystick:{left:.2,top:.69},mobileJump:{top:.5,right:.02},mobileCrouch:{top:.82,right:.15},mobileEsc:{left:.18,top:.01},mobileShoot:{left:.03,top:.28},mobileAimShoot:{top:.56,right:.13},mobileScope:{top:.35,right:.11},mobileReload:{top:.73,right:.27},mobileSwap:{left:0,top:.85,right:0},mobileKSwap:{left:0,top:.65,right:0}},e.exports.cssBypass=["DukeV","Sidney","Tehchy","Vince","0.o"],e.exports.tutorials=[{name:"Editor Basics",code:"Ewtb2rBvg9g"},{name:"Basic Controls",code:"1_HixIbbCM0"},{name:"Promotion",code:"SxGLXklICb8"},{name:"Common Issues",code:"0nT8kdpAi7g"},{name:"Importing Models",code:"E8JWupugj4s"},{name:"Testing & Hosting",code:"SxM2684Us5I"},{name:"Groups & Prefabs",code:"qPR7EuWXM3A"}],e.exports.tipsAndTricks=[{name:"Decals",code:"36-oUcgoyd4"},{name:"Slippery Ice Effect",code:"hc4qZD0fJYk"},{name:"How to make No-Teleport (better) Ramps",code:"eP3Kt5HdVeo"},{name:"Fake Mirror",code:"yVjZGsy74Ao"},{name:"Better Glass",code:"EOaVlaOmgLw"},{name:"How to make Objects Fade to Black",code:"22945ymW_Vs"},{name:"Texture Merging",code:"4DuWCrdt_6Y"},{name:"Angled Rooves",code:"VZTtKefBk70"},{name:"No Kill (safe) Spawns",code:"99BNfVl8ybI"},{name:"No Glitch Ledges",code:"hLoeU9tcwg4"},{name:"Moving Fabric",code:"bk6MJiYqp28"},{name:"Fire",code:"xcy8rF9P2jU"},{name:"Face Rendering",code:"KcI12XLM73E"},{name:"Moving Water",code:"nMoz5AtCXkM"},{name:"Bevelled Edges",code:"Qr_H-f-WgJk"}],e.exports.twitchEvents=[{name:"#FORTHEKIDS Charity Event",charity:!0,streamers:["HeyImZed","SwixieThinks","Kaarson","ImWaspy","SwaggerSouls","TobyontheTele"],time:{start:"March 6, 2021 9:00 AM UTC",end:"March 7, 2021 11:00 AM UTC",watch:"1 Hour"}},{name:"April Drops",time:{start:"April 9, 2021 4:00 AM UTC",end:"April 16, 2021 4:00 AM UTC",watch:"4 hours"}},{name:"June Drops",time:{start:"June 4, 2021 4:00 AM UTC",end:"June 11, 2021 4:00 AM UTC",watch:"4 hours"}},{name:"#FORTHEKIDS Charity Event",charity:!0,streamers:["HeyImZed","SwixieThinks","Kaarson","ImWaspy","UnderCoverDudes","MoonJuice"],time:{start:"June 19, 2021 10:00 AM UTC",end:"June 20, 2021 10:00 AM UTC",watch:"3 hours"},embed:[{n:"HeyImZed",s:"June 19, 2021 10:00 AM UTC",e:"June 19, 2021 2:00 PM UTC"},{n:"Kaarson",s:"June 19, 2021 2:00 PM UTC",e:"June 19, 2021 6:00 PM UTC"},{n:"SwixieThinks",s:"June 19, 2021 6:00 PM UTC",e:"June 19, 2021 10:00 PM UTC"},{n:"ImWaspy",s:"June 19, 2021 10:00 PM UTC",e:"June 20, 2021 2:00 AM UTC"},{n:"MoonJuice",s:"June 20, 2021 2:00 AM UTC",e:"June 20, 2021 5:00 AM UTC"},{n:"UnderCoverDudes",s:"June 20, 2021 5:00 AM UTC",e:"June 20, 2021 9:00 AM UTC"},{n:"HeyImZed",s:"June 20, 2021 9:00 AM UTC",e:"June 20, 2021 10:00 AM UTC"}]},{name:"#FORTHEKIDS Charity Event",charity:!0,streamers:["HeyImZed","SwixieThinks","Kaarson","ImWaspy","RiotAlexis","TheMeatMan","gangsters_paradise"],time:{start:"October 9, 2021 6:00 AM UTC",end:"October 10, 2021 6:00 AM UTC",watch:"1.5 hours"},embed:[{n:"HeyImZed",s:"October 9, 2021 6:00 AM UTC",e:"October 9, 2021 9:00 AM UTC"},{n:"TheMeatMan",s:"October 9, 2021 9:00 AM UTC",e:"October 9, 2021 1:00 PM UTC"},{n:"RiotAlexis",s:"October 9, 2021 1:00 PM UTC",e:"October 9, 2021 4:00 PM UTC"},{n:"Kaarson",s:"October 9, 2021 4:00 PM UTC",e:"October 9, 2021 7:00 PM UTC"},{n:"SwixieThinks",s:"October 9, 2021 7:00 PM UTC",e:"October 9, 2021 10:00 PM UTC"},{n:"gangsters_paradise",s:"October 9, 2021 10:00 PM UTC",e:"October 10, 2021 1:00 AM UTC"},{n:"ImWaspy",s:"October 10, 2021 1:00 AM UTC",e:"October 10, 2021 5:00 AM UTC"},{n:"HeyImZed",s:"October 10, 2021 5:00 AM UTC",e:"October 10, 2021 6:00 AM UTC"}]},{name:"Final #FORTHEKIDS Charity Event",charity:!0,time:{start:"December 10, 2021 1:00 PM UTC",end:"December 17, 2021 1:00 PM UTC",watch:"4 hours"}},{name:"End of Holiday Season Drops",randDrop:!0,type:"Holiday",rarities:[2,3,4],time:{start:"January 6, 2022 2:00 AM UTC",end:"January 13, 2022 2:00 AM UTC"}},{name:"Junkyard Tuesdays #1",titleName:!0,desc:"Each drop has a chance to reward Crafting Materials",randDrop:!0,rarities:[2,3,4],revealGrace:144e5,type:"Junkyard",time:{start:"January 25, 2022 3:00 PM UTC",end:"January 26, 2022 3:00 PM UTC"}},{name:"Junkyard Tuesdays #2",titleName:!0,desc:"Each drop has a chance to reward Crafting Materials",randDrop:!0,rarities:[2,3,4],revealGrace:144e5,type:"Junkyard",time:{start:"February 1, 2022 3:00 PM UTC",end:"February 2, 2022 3:00 PM UTC"}},{name:"Junkyard Tuesdays #3",titleName:!0,desc:"Each drop has a chance to reward Crafting Materials",randDrop:!0,rarities:[2,3,4],revealGrace:144e5,type:"Junkyard",time:{start:"February 8, 2022 3:00 PM UTC",end:"February 9, 2022 3:00 PM UTC"}},{name:"Junkyard Tuesdays #4",titleName:!0,desc:"Each drop has a chance to reward Crafting Materials",randDrop:!0,rarities:[2,3,4],revealGrace:144e5,type:"Junkyard",time:{start:"February 15, 2022 5:00 AM UTC",end:"February 16, 2022 5:00 AM UTC"}},{name:"Junkyard Tuesdays #5",titleName:!0,desc:"Each drop has a chance to reward Crafting Materials",randDrop:!0,rarities:[2,3,4],revealGrace:144e5,type:"Junkyard",time:{start:"February 22, 2022 5:00 AM UTC",end:"February 23, 2022 5:00 AM UTC"}},{name:"Junkyard Tuesdays #6",titleName:!0,desc:"Each drop has a chance to reward Crafting Materials",randDrop:!0,rarities:[2,3,4],revealGrace:144e5,type:"Junkyard",time:{start:"March 1, 2022 5:00 AM UTC",end:"March 2, 2022 5:00 AM UTC"}},{name:"Junkyard Tuesdays #7",titleName:!0,desc:"Each drop has a chance to reward Crafting Materials",randDrop:!0,rarities:[2,3,4],revealGrace:144e5,type:"Junkyard",time:{start:"March 8, 2022 5:00 AM UTC",end:"March 9, 2022 5:00 AM UTC"}},{name:"Junkyard Tuesdays #8",titleName:!0,desc:"Each drop has a chance to reward Crafting Materials",randDrop:!0,rarities:[2,3,4],revealGrace:144e5,type:"Junkyard",time:{start:"March 15, 2022 5:00 AM UTC",end:"March 16, 2022 5:00 AM UTC"}},{name:"Junkyard Tuesdays #9",titleName:!0,desc:"Each drop has a chance to reward Crafting Materials",randDrop:!0,rarities:[2,3,4],revealGrace:144e5,type:"Junkyard",time:{start:"March 22, 2022 5:00 AM UTC",end:"March 23, 2022 5:00 AM UTC"}},{name:"Junkyard Tuesdays #10",titleName:!0,desc:"Each drop has a chance to reward Crafting Materials",randDrop:!0,rarities:[2,3,4],revealGrace:144e5,type:"Junkyard",time:{start:"March 29, 2022 5:00 AM UTC",end:"March 30, 2022 5:00 AM UTC"}},{name:"Junkyard Tuesdays #11",titleName:!0,desc:"Each drop has a chance to reward Crafting Materials",randDrop:!0,rarities:[2,3,4],revealGrace:144e5,type:"Junkyard",time:{start:"April 5, 2022 5:00 AM UTC",end:"April 6, 2022 5:00 AM UTC"}},{name:"Junkyard Tuesdays #12",titleName:!0,desc:"Each drop has a chance to reward Crafting Materials",randDrop:!0,rarities:[2,3,4],revealGrace:144e5,type:"Junkyard",time:{start:"April 12, 2022 5:00 AM UTC",end:"April 13, 2022 5:00 AM UTC"}},{name:"Junkyard Tuesdays #13",titleName:!0,desc:"Each drop has a chance to reward Crafting Materials",randDrop:!0,rarities:[2,3,4],revealGrace:144e5,type:"Junkyard",time:{start:"April 19, 2022 5:00 AM UTC",end:"April 20, 2022 5:00 AM UTC"}},{name:"Junkyard Tuesdays #14",titleName:!0,desc:"Each drop has a chance to reward Crafting Materials",randDrop:!0,rarities:[2,3,4],revealGrace:144e5,type:"Junkyard",time:{start:"April 26, 2022 5:00 AM UTC",end:"April 27, 2022 5:00 AM UTC"}},{name:"Krunker x FRVR",titleName:!0,desc:"Celebrating the Krunker x FRVR announcement",revealGrace:1728e5,time:{start:"May 11, 2022 10:00 AM UTC",end:"May 16, 2022 10:00 AM UTC",watch:"2.5 hours"}},{name:"Season 7 Launch",titleName:!0,desc:"Celebrating the launch of Season 7",revealGrace:1728e5,time:{start:"April 4, 2023 12:00 PM UTC",end:"April 11, 2023 12:00 PM UTC",watch:"4 hours"}}],e.exports.updateBgs=[{id:0,creator:"@EmpoTheDon",link:"https://twitter.com/EmpoTheDon"},{id:1,creator:"@EmpoTheDon",link:"https://twitter.com/EmpoTheDon"},{id:2,name:"Kids",creator:"@14julink",link:"https://twitter.com/14julink"},{id:3,name:"Sun gazzing",creator:"@14julink",link:"https://twitter.com/14julink"},{id:4,name:"Shrine",creator:"@14julink",link:"https://twitter.com/14julink"},{id:8,name:"Officer",creator:"@Flair741",link:"https://twitter.com/Flair741"},{id:9,name:"Samurai",creator:"@polluxvisuals",link:"https://twitter.com/polluxvisuals"}],e.exports.events=[]}).call(this,i(7))},function(e,t,i){(function(e){!function(e,t){"use strict";function n(e,t){if(!e)throw new Error(t||"Assertion failed")}function s(e,t){function i(){}e.super_=t,i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}function a(e,t,i){return a.isBN(e)?e:(this.negative=0,this.words=null,this.length=0,this.red=null,void(null!==e&&("le"!==t&&"be"!==t||(i=t,t=10),this._init(e||0,t||10,i||"be"))))}function r(e,t){var i=e.charCodeAt(t);return i>=65&&i<=70?i-55:i>=97&&i<=102?i-87:i-48&15}function o(e,t,i){var n=r(e,i);return i-1>=t&&(n|=r(e,i-1)<<4),n}function l(e,t,i,n){for(var s,a=0,r=Math.min(e.length,i),o=t;o<r;o++)a*=n,a+=(s=e.charCodeAt(o)-48)>=49?s-49+10:s>=17?s-17+10:s;return a}function c(e,t,i){i.negative=t.negative^e.negative;var n=e.length+t.length|0;i.length=n,n=n-1|0;var s=0|e.words[0],a=0|t.words[0],r=s*a,o=67108863&r,l=r/67108864|0;i.words[0]=o;for(var c=1;c<n;c++){for(var d,h=l>>>26,u=67108863&l,p=Math.min(c,t.length-1),f=Math.max(0,c-e.length+1);f<=p;f++)d=c-f|0,h+=(r=(s=0|e.words[d])*(a=0|t.words[f])+u)/67108864|0,u=67108863&r;i.words[c]=0|u,l=0|h}return 0===l?i.length--:i.words[c]=0|l,i.strip()}function d(e,t,i){return(new h).mulp(e,t,i)}function h(e,t){this.x=e,this.y=t}function u(e,t){this.name=e,this.p=new a(t,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function p(){u.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function f(){u.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function m(){u.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function g(){u.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function v(e){if("string"==typeof e){var t=a._prime(e);this.m=t.p,this.prime=t}else n(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function y(e){v.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}var b;"object"==typeof e?e.exports=a:t.BN=a,a.BN=a,a.wordSize=26;try{b="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:i(189).Buffer}catch(e){}a.isBN=function(e){return!!(e instanceof a)||null!==e&&"object"==typeof e&&e.constructor.wordSize===a.wordSize&&Array.isArray(e.words)},a.max=function(e,t){return e.cmp(t)>0?e:t},a.min=function(e,t){return e.cmp(t)<0?e:t},a.prototype._init=function(e,t,i){if("number"==typeof e)return this._initNumber(e,t,i);if("object"==typeof e)return this._initArray(e,t,i);"hex"===t&&(t=16),n(t===(0|t)&&t>=2&&t<=36);var s=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(s++,this.negative=1),s<e.length&&(16===t?this._parseHex(e,s,i):(this._parseBase(e,t,s),"le"===i&&this._initArray(this.toArray(),t,i)))},a.prototype._initNumber=function(e,t,i){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(n(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),t,i)},a.prototype._initArray=function(e,t,i){if(n("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=Array(this.length);for(var s=0;s<this.length;s++)this.words[s]=0;var a,r,o=0;if("be"===i)for(s=e.length-1,a=0;s>=0;s-=3)r=e[s]|e[s-1]<<8|e[s-2]<<16,this.words[a]|=r<<o&67108863,this.words[a+1]=r>>>26-o&67108863,(o+=24)>=26&&(o-=26,a++);else if("le"===i)for(s=0,a=0;s<e.length;s+=3)r=e[s]|e[s+1]<<8|e[s+2]<<16,this.words[a]|=r<<o&67108863,this.words[a+1]=r>>>26-o&67108863,(o+=24)>=26&&(o-=26,a++);return this.strip()},a.prototype._parseHex=function(e,t,i){this.length=Math.ceil((e.length-t)/6),this.words=Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var s,a=0,r=0;if("be"===i)for(n=e.length-1;n>=t;n-=2)s=o(e,t,n)<<a,this.words[r]|=67108863&s,a>=18?(a-=18,r+=1,this.words[r]|=s>>>26):a+=8;else for(n=(e.length-t)%2==0?t+1:t;n<e.length;n+=2)s=o(e,t,n)<<a,this.words[r]|=67108863&s,a>=18?(a-=18,r+=1,this.words[r]|=s>>>26):a+=8;this.strip()},a.prototype._parseBase=function(e,t,i){this.words=[0],this.length=1;for(var n=0,s=1;s<=67108863;s*=t)n++;n--,s=s/t|0;for(var a=e.length-i,r=a%n,o=Math.min(a,a-r)+i,c=0,d=i;d<o;d+=n)c=l(e,d,d+n,t),this.imuln(s),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==r){var h=1;for(c=l(e,d,e.length,t),d=0;d<r;d++)h*=t;this.imuln(h),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this.strip()},a.prototype.copy=function(e){e.words=Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},a.prototype.clone=function(){var e=new a(null);return this.copy(e),e},a.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},a.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},a.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},a.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var w=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],x=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],S=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function M(e,t,i){var n,s,a,r=e.words,o=t.words,l=i.words,c=0,d=0|r[0],h=8191&d,u=d>>>13,p=0|r[1],f=8191&p,m=p>>>13,g=0|r[2],v=8191&g,y=g>>>13,b=0|r[3],w=8191&b,x=b>>>13,S=0|r[4],M=8191&S,k=S>>>13,_=0|r[5],T=8191&_,C=_>>>13,I=0|r[6],A=8191&I,R=I>>>13,P=0|r[7],E=8191&P,D=P>>>13,O=0|r[8],L=8191&O,j=O>>>13,z=0|r[9],B=8191&z,N=z>>>13,F=0|o[0],H=8191&F,U=F>>>13,V=0|o[1],G=8191&V,W=V>>>13,q=0|o[2],Y=8191&q,K=q>>>13,X=0|o[3],Z=8191&X,J=X>>>13,Q=0|o[4],$=8191&Q,ee=Q>>>13,te=0|o[5],ie=8191&te,ne=te>>>13,se=0|o[6],ae=8191&se,re=se>>>13,oe=0|o[7],le=8191&oe,ce=oe>>>13,de=0|o[8],he=8191&de,ue=de>>>13,pe=0|o[9],fe=8191&pe,me=pe>>>13;i.negative=e.negative^t.negative,i.length=19;var ge=(c+(n=Math.imul(h,H))|0)+((8191&(s=(s=Math.imul(h,U))+Math.imul(u,H)|0))<<13)|0;c=((a=Math.imul(u,U))+(s>>>13)|0)+(ge>>>26)|0,ge&=67108863,n=Math.imul(f,H),s=(s=Math.imul(f,U))+Math.imul(m,H)|0,a=Math.imul(m,U);var ve=(c+(n=n+Math.imul(h,G)|0)|0)+((8191&(s=(s=s+Math.imul(h,W)|0)+Math.imul(u,G)|0))<<13)|0;c=((a=a+Math.imul(u,W)|0)+(s>>>13)|0)+(ve>>>26)|0,ve&=67108863,n=Math.imul(v,H),s=(s=Math.imul(v,U))+Math.imul(y,H)|0,a=Math.imul(y,U),n=n+Math.imul(f,G)|0,s=(s=s+Math.imul(f,W)|0)+Math.imul(m,G)|0,a=a+Math.imul(m,W)|0;var ye=(c+(n=n+Math.imul(h,Y)|0)|0)+((8191&(s=(s=s+Math.imul(h,K)|0)+Math.imul(u,Y)|0))<<13)|0;c=((a=a+Math.imul(u,K)|0)+(s>>>13)|0)+(ye>>>26)|0,ye&=67108863,n=Math.imul(w,H),s=(s=Math.imul(w,U))+Math.imul(x,H)|0,a=Math.imul(x,U),n=n+Math.imul(v,G)|0,s=(s=s+Math.imul(v,W)|0)+Math.imul(y,G)|0,a=a+Math.imul(y,W)|0,n=n+Math.imul(f,Y)|0,s=(s=s+Math.imul(f,K)|0)+Math.imul(m,Y)|0,a=a+Math.imul(m,K)|0;var be=(c+(n=n+Math.imul(h,Z)|0)|0)+((8191&(s=(s=s+Math.imul(h,J)|0)+Math.imul(u,Z)|0))<<13)|0;c=((a=a+Math.imul(u,J)|0)+(s>>>13)|0)+(be>>>26)|0,be&=67108863,n=Math.imul(M,H),s=(s=Math.imul(M,U))+Math.imul(k,H)|0,a=Math.imul(k,U),n=n+Math.imul(w,G)|0,s=(s=s+Math.imul(w,W)|0)+Math.imul(x,G)|0,a=a+Math.imul(x,W)|0,n=n+Math.imul(v,Y)|0,s=(s=s+Math.imul(v,K)|0)+Math.imul(y,Y)|0,a=a+Math.imul(y,K)|0,n=n+Math.imul(f,Z)|0,s=(s=s+Math.imul(f,J)|0)+Math.imul(m,Z)|0,a=a+Math.imul(m,J)|0;var we=(c+(n=n+Math.imul(h,$)|0)|0)+((8191&(s=(s=s+Math.imul(h,ee)|0)+Math.imul(u,$)|0))<<13)|0;c=((a=a+Math.imul(u,ee)|0)+(s>>>13)|0)+(we>>>26)|0,we&=67108863,n=Math.imul(T,H),s=(s=Math.imul(T,U))+Math.imul(C,H)|0,a=Math.imul(C,U),n=n+Math.imul(M,G)|0,s=(s=s+Math.imul(M,W)|0)+Math.imul(k,G)|0,a=a+Math.imul(k,W)|0,n=n+Math.imul(w,Y)|0,s=(s=s+Math.imul(w,K)|0)+Math.imul(x,Y)|0,a=a+Math.imul(x,K)|0,n=n+Math.imul(v,Z)|0,s=(s=s+Math.imul(v,J)|0)+Math.imul(y,Z)|0,a=a+Math.imul(y,J)|0,n=n+Math.imul(f,$)|0,s=(s=s+Math.imul(f,ee)|0)+Math.imul(m,$)|0,a=a+Math.imul(m,ee)|0;var xe=(c+(n=n+Math.imul(h,ie)|0)|0)+((8191&(s=(s=s+Math.imul(h,ne)|0)+Math.imul(u,ie)|0))<<13)|0;c=((a=a+Math.imul(u,ne)|0)+(s>>>13)|0)+(xe>>>26)|0,xe&=67108863,n=Math.imul(A,H),s=(s=Math.imul(A,U))+Math.imul(R,H)|0,a=Math.imul(R,U),n=n+Math.imul(T,G)|0,s=(s=s+Math.imul(T,W)|0)+Math.imul(C,G)|0,a=a+Math.imul(C,W)|0,n=n+Math.imul(M,Y)|0,s=(s=s+Math.imul(M,K)|0)+Math.imul(k,Y)|0,a=a+Math.imul(k,K)|0,n=n+Math.imul(w,Z)|0,s=(s=s+Math.imul(w,J)|0)+Math.imul(x,Z)|0,a=a+Math.imul(x,J)|0,n=n+Math.imul(v,$)|0,s=(s=s+Math.imul(v,ee)|0)+Math.imul(y,$)|0,a=a+Math.imul(y,ee)|0,n=n+Math.imul(f,ie)|0,s=(s=s+Math.imul(f,ne)|0)+Math.imul(m,ie)|0,a=a+Math.imul(m,ne)|0;var Se=(c+(n=n+Math.imul(h,ae)|0)|0)+((8191&(s=(s=s+Math.imul(h,re)|0)+Math.imul(u,ae)|0))<<13)|0;c=((a=a+Math.imul(u,re)|0)+(s>>>13)|0)+(Se>>>26)|0,Se&=67108863,n=Math.imul(E,H),s=(s=Math.imul(E,U))+Math.imul(D,H)|0,a=Math.imul(D,U),n=n+Math.imul(A,G)|0,s=(s=s+Math.imul(A,W)|0)+Math.imul(R,G)|0,a=a+Math.imul(R,W)|0,n=n+Math.imul(T,Y)|0,s=(s=s+Math.imul(T,K)|0)+Math.imul(C,Y)|0,a=a+Math.imul(C,K)|0,n=n+Math.imul(M,Z)|0,s=(s=s+Math.imul(M,J)|0)+Math.imul(k,Z)|0,a=a+Math.imul(k,J)|0,n=n+Math.imul(w,$)|0,s=(s=s+Math.imul(w,ee)|0)+Math.imul(x,$)|0,a=a+Math.imul(x,ee)|0,n=n+Math.imul(v,ie)|0,s=(s=s+Math.imul(v,ne)|0)+Math.imul(y,ie)|0,a=a+Math.imul(y,ne)|0,n=n+Math.imul(f,ae)|0,s=(s=s+Math.imul(f,re)|0)+Math.imul(m,ae)|0,a=a+Math.imul(m,re)|0;var Me=(c+(n=n+Math.imul(h,le)|0)|0)+((8191&(s=(s=s+Math.imul(h,ce)|0)+Math.imul(u,le)|0))<<13)|0;c=((a=a+Math.imul(u,ce)|0)+(s>>>13)|0)+(Me>>>26)|0,Me&=67108863,n=Math.imul(L,H),s=(s=Math.imul(L,U))+Math.imul(j,H)|0,a=Math.imul(j,U),n=n+Math.imul(E,G)|0,s=(s=s+Math.imul(E,W)|0)+Math.imul(D,G)|0,a=a+Math.imul(D,W)|0,n=n+Math.imul(A,Y)|0,s=(s=s+Math.imul(A,K)|0)+Math.imul(R,Y)|0,a=a+Math.imul(R,K)|0,n=n+Math.imul(T,Z)|0,s=(s=s+Math.imul(T,J)|0)+Math.imul(C,Z)|0,a=a+Math.imul(C,J)|0,n=n+Math.imul(M,$)|0,s=(s=s+Math.imul(M,ee)|0)+Math.imul(k,$)|0,a=a+Math.imul(k,ee)|0,n=n+Math.imul(w,ie)|0,s=(s=s+Math.imul(w,ne)|0)+Math.imul(x,ie)|0,a=a+Math.imul(x,ne)|0,n=n+Math.imul(v,ae)|0,s=(s=s+Math.imul(v,re)|0)+Math.imul(y,ae)|0,a=a+Math.imul(y,re)|0,n=n+Math.imul(f,le)|0,s=(s=s+Math.imul(f,ce)|0)+Math.imul(m,le)|0,a=a+Math.imul(m,ce)|0;var ke=(c+(n=n+Math.imul(h,he)|0)|0)+((8191&(s=(s=s+Math.imul(h,ue)|0)+Math.imul(u,he)|0))<<13)|0;c=((a=a+Math.imul(u,ue)|0)+(s>>>13)|0)+(ke>>>26)|0,ke&=67108863,n=Math.imul(B,H),s=(s=Math.imul(B,U))+Math.imul(N,H)|0,a=Math.imul(N,U),n=n+Math.imul(L,G)|0,s=(s=s+Math.imul(L,W)|0)+Math.imul(j,G)|0,a=a+Math.imul(j,W)|0,n=n+Math.imul(E,Y)|0,s=(s=s+Math.imul(E,K)|0)+Math.imul(D,Y)|0,a=a+Math.imul(D,K)|0,n=n+Math.imul(A,Z)|0,s=(s=s+Math.imul(A,J)|0)+Math.imul(R,Z)|0,a=a+Math.imul(R,J)|0,n=n+Math.imul(T,$)|0,s=(s=s+Math.imul(T,ee)|0)+Math.imul(C,$)|0,a=a+Math.imul(C,ee)|0,n=n+Math.imul(M,ie)|0,s=(s=s+Math.imul(M,ne)|0)+Math.imul(k,ie)|0,a=a+Math.imul(k,ne)|0,n=n+Math.imul(w,ae)|0,s=(s=s+Math.imul(w,re)|0)+Math.imul(x,ae)|0,a=a+Math.imul(x,re)|0,n=n+Math.imul(v,le)|0,s=(s=s+Math.imul(v,ce)|0)+Math.imul(y,le)|0,a=a+Math.imul(y,ce)|0,n=n+Math.imul(f,he)|0,s=(s=s+Math.imul(f,ue)|0)+Math.imul(m,he)|0,a=a+Math.imul(m,ue)|0;var _e=(c+(n=n+Math.imul(h,fe)|0)|0)+((8191&(s=(s=s+Math.imul(h,me)|0)+Math.imul(u,fe)|0))<<13)|0;c=((a=a+Math.imul(u,me)|0)+(s>>>13)|0)+(_e>>>26)|0,_e&=67108863,n=Math.imul(B,G),s=(s=Math.imul(B,W))+Math.imul(N,G)|0,a=Math.imul(N,W),n=n+Math.imul(L,Y)|0,s=(s=s+Math.imul(L,K)|0)+Math.imul(j,Y)|0,a=a+Math.imul(j,K)|0,n=n+Math.imul(E,Z)|0,s=(s=s+Math.imul(E,J)|0)+Math.imul(D,Z)|0,a=a+Math.imul(D,J)|0,n=n+Math.imul(A,$)|0,s=(s=s+Math.imul(A,ee)|0)+Math.imul(R,$)|0,a=a+Math.imul(R,ee)|0,n=n+Math.imul(T,ie)|0,s=(s=s+Math.imul(T,ne)|0)+Math.imul(C,ie)|0,a=a+Math.imul(C,ne)|0,n=n+Math.imul(M,ae)|0,s=(s=s+Math.imul(M,re)|0)+Math.imul(k,ae)|0,a=a+Math.imul(k,re)|0,n=n+Math.imul(w,le)|0,s=(s=s+Math.imul(w,ce)|0)+Math.imul(x,le)|0,a=a+Math.imul(x,ce)|0,n=n+Math.imul(v,he)|0,s=(s=s+Math.imul(v,ue)|0)+Math.imul(y,he)|0,a=a+Math.imul(y,ue)|0;var Te=(c+(n=n+Math.imul(f,fe)|0)|0)+((8191&(s=(s=s+Math.imul(f,me)|0)+Math.imul(m,fe)|0))<<13)|0;c=((a=a+Math.imul(m,me)|0)+(s>>>13)|0)+(Te>>>26)|0,Te&=67108863,n=Math.imul(B,Y),s=(s=Math.imul(B,K))+Math.imul(N,Y)|0,a=Math.imul(N,K),n=n+Math.imul(L,Z)|0,s=(s=s+Math.imul(L,J)|0)+Math.imul(j,Z)|0,a=a+Math.imul(j,J)|0,n=n+Math.imul(E,$)|0,s=(s=s+Math.imul(E,ee)|0)+Math.imul(D,$)|0,a=a+Math.imul(D,ee)|0,n=n+Math.imul(A,ie)|0,s=(s=s+Math.imul(A,ne)|0)+Math.imul(R,ie)|0,a=a+Math.imul(R,ne)|0,n=n+Math.imul(T,ae)|0,s=(s=s+Math.imul(T,re)|0)+Math.imul(C,ae)|0,a=a+Math.imul(C,re)|0,n=n+Math.imul(M,le)|0,s=(s=s+Math.imul(M,ce)|0)+Math.imul(k,le)|0,a=a+Math.imul(k,ce)|0,n=n+Math.imul(w,he)|0,s=(s=s+Math.imul(w,ue)|0)+Math.imul(x,he)|0,a=a+Math.imul(x,ue)|0;var Ce=(c+(n=n+Math.imul(v,fe)|0)|0)+((8191&(s=(s=s+Math.imul(v,me)|0)+Math.imul(y,fe)|0))<<13)|0;c=((a=a+Math.imul(y,me)|0)+(s>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,n=Math.imul(B,Z),s=(s=Math.imul(B,J))+Math.imul(N,Z)|0,a=Math.imul(N,J),n=n+Math.imul(L,$)|0,s=(s=s+Math.imul(L,ee)|0)+Math.imul(j,$)|0,a=a+Math.imul(j,ee)|0,n=n+Math.imul(E,ie)|0,s=(s=s+Math.imul(E,ne)|0)+Math.imul(D,ie)|0,a=a+Math.imul(D,ne)|0,n=n+Math.imul(A,ae)|0,s=(s=s+Math.imul(A,re)|0)+Math.imul(R,ae)|0,a=a+Math.imul(R,re)|0,n=n+Math.imul(T,le)|0,s=(s=s+Math.imul(T,ce)|0)+Math.imul(C,le)|0,a=a+Math.imul(C,ce)|0,n=n+Math.imul(M,he)|0,s=(s=s+Math.imul(M,ue)|0)+Math.imul(k,he)|0,a=a+Math.imul(k,ue)|0;var Ie=(c+(n=n+Math.imul(w,fe)|0)|0)+((8191&(s=(s=s+Math.imul(w,me)|0)+Math.imul(x,fe)|0))<<13)|0;c=((a=a+Math.imul(x,me)|0)+(s>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,n=Math.imul(B,$),s=(s=Math.imul(B,ee))+Math.imul(N,$)|0,a=Math.imul(N,ee),n=n+Math.imul(L,ie)|0,s=(s=s+Math.imul(L,ne)|0)+Math.imul(j,ie)|0,a=a+Math.imul(j,ne)|0,n=n+Math.imul(E,ae)|0,s=(s=s+Math.imul(E,re)|0)+Math.imul(D,ae)|0,a=a+Math.imul(D,re)|0,n=n+Math.imul(A,le)|0,s=(s=s+Math.imul(A,ce)|0)+Math.imul(R,le)|0,a=a+Math.imul(R,ce)|0,n=n+Math.imul(T,he)|0,s=(s=s+Math.imul(T,ue)|0)+Math.imul(C,he)|0,a=a+Math.imul(C,ue)|0;var Ae=(c+(n=n+Math.imul(M,fe)|0)|0)+((8191&(s=(s=s+Math.imul(M,me)|0)+Math.imul(k,fe)|0))<<13)|0;c=((a=a+Math.imul(k,me)|0)+(s>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,n=Math.imul(B,ie),s=(s=Math.imul(B,ne))+Math.imul(N,ie)|0,a=Math.imul(N,ne),n=n+Math.imul(L,ae)|0,s=(s=s+Math.imul(L,re)|0)+Math.imul(j,ae)|0,a=a+Math.imul(j,re)|0,n=n+Math.imul(E,le)|0,s=(s=s+Math.imul(E,ce)|0)+Math.imul(D,le)|0,a=a+Math.imul(D,ce)|0,n=n+Math.imul(A,he)|0,s=(s=s+Math.imul(A,ue)|0)+Math.imul(R,he)|0,a=a+Math.imul(R,ue)|0;var Re=(c+(n=n+Math.imul(T,fe)|0)|0)+((8191&(s=(s=s+Math.imul(T,me)|0)+Math.imul(C,fe)|0))<<13)|0;c=((a=a+Math.imul(C,me)|0)+(s>>>13)|0)+(Re>>>26)|0,Re&=67108863,n=Math.imul(B,ae),s=(s=Math.imul(B,re))+Math.imul(N,ae)|0,a=Math.imul(N,re),n=n+Math.imul(L,le)|0,s=(s=s+Math.imul(L,ce)|0)+Math.imul(j,le)|0,a=a+Math.imul(j,ce)|0,n=n+Math.imul(E,he)|0,s=(s=s+Math.imul(E,ue)|0)+Math.imul(D,he)|0,a=a+Math.imul(D,ue)|0;var Pe=(c+(n=n+Math.imul(A,fe)|0)|0)+((8191&(s=(s=s+Math.imul(A,me)|0)+Math.imul(R,fe)|0))<<13)|0;c=((a=a+Math.imul(R,me)|0)+(s>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,n=Math.imul(B,le),s=(s=Math.imul(B,ce))+Math.imul(N,le)|0,a=Math.imul(N,ce),n=n+Math.imul(L,he)|0,s=(s=s+Math.imul(L,ue)|0)+Math.imul(j,he)|0,a=a+Math.imul(j,ue)|0;var Ee=(c+(n=n+Math.imul(E,fe)|0)|0)+((8191&(s=(s=s+Math.imul(E,me)|0)+Math.imul(D,fe)|0))<<13)|0;c=((a=a+Math.imul(D,me)|0)+(s>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,n=Math.imul(B,he),s=(s=Math.imul(B,ue))+Math.imul(N,he)|0,a=Math.imul(N,ue);var De=(c+(n=n+Math.imul(L,fe)|0)|0)+((8191&(s=(s=s+Math.imul(L,me)|0)+Math.imul(j,fe)|0))<<13)|0;c=((a=a+Math.imul(j,me)|0)+(s>>>13)|0)+(De>>>26)|0,De&=67108863;var Oe=(c+(n=Math.imul(B,fe))|0)+((8191&(s=(s=Math.imul(B,me))+Math.imul(N,fe)|0))<<13)|0;return c=((a=Math.imul(N,me))+(s>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,l[0]=ge,l[1]=ve,l[2]=ye,l[3]=be,l[4]=we,l[5]=xe,l[6]=Se,l[7]=Me,l[8]=ke,l[9]=_e,l[10]=Te,l[11]=Ce,l[12]=Ie,l[13]=Ae,l[14]=Re,l[15]=Pe,l[16]=Ee,l[17]=De,l[18]=Oe,0!==c&&(l[19]=c,i.length++),i}a.prototype.toString=function(e,t){var i;if(t=0|t||1,16===(e=e||10)||"hex"===e){i="";for(var s=0,a=0,r=0;r<this.length;r++){var o=this.words[r],l=(16777215&(o<<s|a)).toString(16);i=0!==(a=o>>>24-s&16777215)||r!==this.length-1?w[6-l.length]+l+i:l+i,(s+=2)>=26&&(s-=26,r--)}for(0!==a&&(i=a.toString(16)+i);i.length%t!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(e===(0|e)&&e>=2&&e<=36){var c=x[e],d=S[e];i="";var h=this.clone();for(h.negative=0;!h.isZero();){var u=h.modn(d).toString(e);i=(h=h.idivn(d)).isZero()?u+i:w[c-u.length]+u+i}for(this.isZero()&&(i="0"+i);i.length%t!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}n(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0===this.negative?e:-e},a.prototype.toJSON=function(){return this.toString(16)},a.prototype.toBuffer=function(e,t){return n(void 0!==b),this.toArrayLike(b,e,t)},a.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},a.prototype.toArrayLike=function(e,t,i){var s,a,r=this.byteLength(),o=i||Math.max(1,r);n(r<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0"),this.strip();var l=new e(o),c=this.clone();if("le"!==t){for(a=0;a<o-r;a++)l[a]=0;for(a=0;!c.isZero();a++)s=c.andln(255),c.iushrn(8),l[o-a-1]=s}else{for(a=0;!c.isZero();a++)s=c.andln(255),c.iushrn(8),l[a]=s;for(;a<o;a++)l[a]=0}return l},a.prototype._countBits=Math.clz32?function(e){return 32-Math.clz32(e)}:function(e){var t=e,i=0;return t>=4096&&(i+=13,t>>>=13),t>=64&&(i+=7,t>>>=7),t>=8&&(i+=4,t>>>=4),t>=2&&(i+=2,t>>>=2),i+t},a.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,i=0;return 0==(8191&t)&&(i+=13,t>>>=13),0==(127&t)&&(i+=7,t>>>=7),0==(15&t)&&(i+=4,t>>>=4),0==(3&t)&&(i+=2,t>>>=2),0==(1&t)&&i++,i},a.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e,t=0,i=0;i<this.length&&(t+=e=this._zeroBits(this.words[i]),26===e);i++);return t},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(e){return 0===this.negative?this.clone():this.abs().inotn(e).iaddn(1)},a.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return 0!==this.negative},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]|=e.words[t];return this.strip()},a.prototype.ior=function(e){return n(0==(this.negative|e.negative)),this.iuor(e)},a.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},a.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},a.prototype.iuand=function(e){for(var t=this.length>e.length?e:this,i=0;i<t.length;i++)this.words[i]&=e.words[i];return this.length=t.length,this.strip()},a.prototype.iand=function(e){return n(0==(this.negative|e.negative)),this.iuand(e)},a.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},a.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},a.prototype.iuxor=function(e){var t,i;this.length>e.length?(t=this,i=e):(t=e,i=this);for(var n=0;n<i.length;n++)this.words[n]=t.words[n]^i.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this.strip()},a.prototype.ixor=function(e){return n(0==(this.negative|e.negative)),this.iuxor(e)},a.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},a.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},a.prototype.inotn=function(e){n("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),i=e%26;this._expand(t),i>0&&t--;for(var s=0;s<t;s++)this.words[s]=67108863&~this.words[s];return i>0&&(this.words[s]=~this.words[s]&67108863>>26-i),this.strip()},a.prototype.notn=function(e){return this.clone().inotn(e)},a.prototype.setn=function(e,t){n("number"==typeof e&&e>=0);var i=e/26|0,s=e%26;return this._expand(i+1),t?this.words[i]|=1<<s:this.words[i]&=~(1<<s),this.strip()},a.prototype.iadd=function(e){var t,i,n;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(i=this,n=e):(i=e,n=this);for(var s=0,a=0;a<n.length;a++)t=(0|i.words[a])+(0|n.words[a])+s,this.words[a]=67108863&t,s=t>>>26;for(;0!==s&&a<i.length;a++)t=(0|i.words[a])+s,this.words[a]=67108863&t,s=t>>>26;if(this.length=i.length,0!==s)this.words[this.length]=s,this.length++;else if(i!==this)for(;a<i.length;a++)this.words[a]=i.words[a];return this},a.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},a.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var i,n,s=this.cmp(e);if(0===s)return this.negative=0,this.length=1,this.words[0]=0,this;s>0?(i=this,n=e):(i=e,n=this);for(var a=0,r=0;r<n.length;r++)a=(t=(0|i.words[r])-(0|n.words[r])+a)>>26,this.words[r]=67108863&t;for(;0!==a&&r<i.length;r++)a=(t=(0|i.words[r])+a)>>26,this.words[r]=67108863&t;if(0===a&&r<i.length&&i!==this)for(;r<i.length;r++)this.words[r]=i.words[r];return this.length=Math.max(this.length,r),i!==this&&(this.negative=1),this.strip()},a.prototype.sub=function(e){return this.clone().isub(e)},Math.imul||(M=c),a.prototype.mulTo=function(e,t){var i=this.length+e.length;return 10===this.length&&10===e.length?M(this,e,t):i<63?c(this,e,t):i<1024?function(e,t,i){var n;i.negative=t.negative^e.negative,i.length=e.length+t.length;for(var s=0,a=0,r=0;r<i.length-1;r++){n=a,a=0;for(var o=67108863&s,l=Math.min(r,t.length-1),c=Math.max(0,r-e.length+1);c<=l;c++){var d=r-c,h=(0|e.words[d])*(0|t.words[c]),u=67108863&h;o=67108863&(u=u+o|0),a+=(n=(n=n+(h/67108864|0)|0)+(u>>>26)|0)>>>26,n&=67108863}i.words[r]=o,s=n,n=a}return 0===s?i.length--:i.words[r]=s,i.strip()}(this,e,t):d(this,e,t)},h.prototype.makeRBT=function(e){for(var t=Array(e),i=a.prototype._countBits(e)-1,n=0;n<e;n++)t[n]=this.revBin(n,i,e);return t},h.prototype.revBin=function(e,t,i){if(0===e||e===i-1)return e;for(var n=0,s=0;s<t;s++)n|=(1&e)<<t-s-1,e>>=1;return n},h.prototype.permute=function(e,t,i,n,s,a){for(var r=0;r<a;r++)n[r]=t[e[r]],s[r]=i[e[r]]},h.prototype.transform=function(e,t,i,n,s,a){this.permute(a,e,t,i,n,s);for(var r=1;r<s;r<<=1)for(var o=r<<1,l=Math.cos(2*Math.PI/o),c=Math.sin(2*Math.PI/o),d=0;d<s;d+=o)for(var h=l,u=c,p=0;p<r;p++){var f=i[d+p],m=n[d+p],g=i[d+p+r],v=n[d+p+r],y=h*g-u*v;v=h*v+u*g,g=y,i[d+p]=f+g,n[d+p]=m+v,i[d+p+r]=f-g,n[d+p+r]=m-v,p!==o&&(y=l*h-c*u,u=l*u+c*h,h=y)}},h.prototype.guessLen13b=function(e,t){var i=1|Math.max(t,e),n=1&i,s=0;for(i=i/2|0;i;i>>>=1)s++;return 1<<s+1+n},h.prototype.conjugate=function(e,t,i){if(i>1)for(var n,s=0;s<i/2;s++)n=e[s],e[s]=e[i-s-1],e[i-s-1]=n,n=t[s],t[s]=-t[i-s-1],t[i-s-1]=-n},h.prototype.normalize13b=function(e,t){for(var i,n=0,s=0;s<t/2;s++)i=8192*Math.round(e[2*s+1]/t)+Math.round(e[2*s]/t)+n,e[s]=67108863&i,n=i<67108864?0:i/67108864|0;return e},h.prototype.convert13b=function(e,t,i,s){for(var a=0,r=0;r<t;r++)a+=0|e[r],i[2*r]=8191&a,a>>>=13,i[2*r+1]=8191&a,a>>>=13;for(r=2*t;r<s;++r)i[r]=0;n(0===a),n(0==(-8192&a))},h.prototype.stub=function(e){for(var t=Array(e),i=0;i<e;i++)t[i]=0;return t},h.prototype.mulp=function(e,t,i){var n,s=2*this.guessLen13b(e.length,t.length),a=this.makeRBT(s),r=this.stub(s),o=Array(s),l=Array(s),c=Array(s),d=Array(s),h=Array(s),u=Array(s),p=i.words;p.length=s,this.convert13b(e.words,e.length,o,s),this.convert13b(t.words,t.length,d,s),this.transform(o,r,l,c,s,a),this.transform(d,r,h,u,s,a);for(var f=0;f<s;f++)n=l[f]*h[f]-c[f]*u[f],c[f]=l[f]*u[f]+c[f]*h[f],l[f]=n;return this.conjugate(l,c,s),this.transform(l,c,p,r,s,a),this.conjugate(p,r,s),this.normalize13b(p,s),i.negative=e.negative^t.negative,i.length=e.length+t.length,i.strip()},a.prototype.mul=function(e){var t=new a(null);return t.words=Array(this.length+e.length),this.mulTo(e,t)},a.prototype.mulf=function(e){var t=new a(null);return t.words=Array(this.length+e.length),d(this,e,t)},a.prototype.imul=function(e){return this.clone().mulTo(e,this)},a.prototype.imuln=function(e){n("number"==typeof e),n(e<67108864);for(var t=0,i=0;i<this.length;i++){var s=(0|this.words[i])*e,a=(67108863&s)+(67108863&t);t>>=26,t+=s/67108864|0,t+=a>>>26,this.words[i]=67108863&a}return 0!==t&&(this.words[i]=t,this.length++),this},a.prototype.muln=function(e){return this.clone().imuln(e)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(e){var t=function(e){for(var t=Array(e.bitLength()),i=0;i<t.length;i++){var n=i/26|0,s=i%26;t[i]=(e.words[n]&1<<s)>>>s}return t}(e);if(0===t.length)return new a(1);for(var i=this,n=0;n<t.length&&0===t[n];i=i.sqr())n++;if(++n<t.length)for(var s=i.sqr();n<t.length;n++,s=s.sqr())0!==t[n]&&(i=i.mul(s));return i},a.prototype.iushln=function(e){var t;n("number"==typeof e&&e>=0);var i=e%26,s=(e-i)/26;if(0!=i){var a=0;for(t=0;t<this.length;t++){var r=this.words[t]&67108863>>>26-i<<26-i,o=(0|this.words[t])-r<<i;this.words[t]=o|a,a=r>>>26-i}a&&(this.words[t]=a,this.length++)}if(0!==s){for(t=this.length-1;t>=0;t--)this.words[t+s]=this.words[t];for(t=0;t<s;t++)this.words[t]=0;this.length+=s}return this.strip()},a.prototype.ishln=function(e){return n(0===this.negative),this.iushln(e)},a.prototype.iushrn=function(e,t,i){n("number"==typeof e&&e>=0);var s=t?(t-t%26)/26:0,a=e%26,r=Math.min((e-a)/26,this.length),o=i;if(s-=r,s=Math.max(0,s),o){for(var l=0;l<r;l++)o.words[l]=this.words[l];o.length=r}if(0===r);else if(this.length>r)for(this.length-=r,l=0;l<this.length;l++)this.words[l]=this.words[l+r];else this.words[0]=0,this.length=1;var c=0;for(l=this.length-1;l>=0&&(0!==c||l>=s);l--){var d=0|this.words[l];this.words[l]=c<<26-a|d>>>a,c=d&(67108863>>>a<<a^67108863)}return o&&0!==c&&(o.words[o.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},a.prototype.ishrn=function(e,t,i){return n(0===this.negative),this.iushrn(e,t,i)},a.prototype.shln=function(e){return this.clone().ishln(e)},a.prototype.ushln=function(e){return this.clone().iushln(e)},a.prototype.shrn=function(e){return this.clone().ishrn(e)},a.prototype.ushrn=function(e){return this.clone().iushrn(e)},a.prototype.testn=function(e){n("number"==typeof e&&e>=0);var t=e%26,i=(e-t)/26;return!(this.length<=i)&&!!(this.words[i]&1<<t)},a.prototype.imaskn=function(e){n("number"==typeof e&&e>=0);var t=e%26,i=(e-t)/26;return n(0===this.negative,"imaskn works only with positive numbers"),this.length<=i?this:(0!=t&&i++,this.length=Math.min(i,this.length),0!=t&&(this.words[this.length-1]&=67108863>>>t<<t^67108863),this.strip())},a.prototype.maskn=function(e){return this.clone().imaskn(e)},a.prototype.iaddn=function(e){return n("number"==typeof e),n(e<67108864),e<0?this.isubn(-e):0===this.negative?this._iaddn(e):1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this)},a.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t==this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},a.prototype.isubn=function(e){if(n("number"==typeof e),n(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},a.prototype.addn=function(e){return this.clone().iaddn(e)},a.prototype.subn=function(e){return this.clone().isubn(e)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(e,t,i){var s,a,r=e.length+i;this._expand(r);var o=0;for(s=0;s<e.length;s++){a=(0|this.words[s+i])+o;var l=(0|e.words[s])*t;o=((a-=67108863&l)>>26)-(l/67108864|0),this.words[s+i]=67108863&a}for(;s<this.length-i;s++)o=(a=(0|this.words[s+i])+o)>>26,this.words[s+i]=67108863&a;if(0===o)return this.strip();for(n(-1===o),o=0,s=0;s<this.length;s++)o=(a=-(0|this.words[s])+o)>>26,this.words[s]=67108863&a;return this.negative=1,this.strip()},a.prototype._wordDiv=function(e,t){var i,n=(this.length,e.length),s=this.clone(),r=e,o=0|r.words[r.length-1];0!=(n=26-this._countBits(o))&&(r=r.ushln(n),s.iushln(n),o=0|r.words[r.length-1]);var l=s.length-r.length;if("mod"!==t){(i=new a(null)).length=l+1,i.words=Array(i.length);for(var c=0;c<i.length;c++)i.words[c]=0}var d,h=s.clone()._ishlnsubmul(r,1,l);0===h.negative&&(s=h,i&&(i.words[l]=1));for(var u=l-1;u>=0;u--){for(d=67108864*(0|s.words[r.length+u])+(0|s.words[r.length+u-1]),d=Math.min(d/o|0,67108863),s._ishlnsubmul(r,d,u);0!==s.negative;)d--,s.negative=0,s._ishlnsubmul(r,1,u),s.isZero()||(s.negative^=1);i&&(i.words[u]=d)}return i&&i.strip(),s.strip(),"div"!==t&&0!==n&&s.iushrn(n),{div:i||null,mod:s}},a.prototype.divmod=function(e,t,i){return n(!e.isZero()),this.isZero()?{div:new a(0),mod:new a(0)}:0!==this.negative&&0===e.negative?(o=this.neg().divmod(e,t),"mod"!==t&&(s=o.div.neg()),"div"!==t&&(r=o.mod.neg(),i&&0!==r.negative&&r.iadd(e)),{div:s,mod:r}):0===this.negative&&0!==e.negative?(o=this.divmod(e.neg(),t),"mod"!==t&&(s=o.div.neg()),{div:s,mod:o.mod}):0==(this.negative&e.negative)?e.length>this.length||this.cmp(e)<0?{div:new a(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new a(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new a(this.modn(e.words[0]))}:this._wordDiv(e,t):(o=this.neg().divmod(e.neg(),t),"div"!==t&&(r=o.mod.neg(),i&&0!==r.negative&&r.isub(e)),{div:o.div,mod:r});var s,r,o},a.prototype.div=function(e){return this.divmod(e,"div",!1).div},a.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},a.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},a.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var i=0===t.div.negative?t.mod:t.mod.isub(e),n=e.ushrn(1),s=e.andln(1),a=i.cmp(n);return a<0||1===s&&0===a?t.div:0===t.div.negative?t.div.iaddn(1):t.div.isubn(1)},a.prototype.modn=function(e){n(e<=67108863);for(var t=0,i=this.length-1;i>=0;i--)t=((1<<26)%e*t+(0|this.words[i]))%e;return t},a.prototype.idivn=function(e){var t;n(e<=67108863);for(var i=0,s=this.length-1;s>=0;s--)t=(0|this.words[s])+67108864*i,this.words[s]=t/e|0,i=t%e;return this.strip()},a.prototype.divn=function(e){return this.clone().idivn(e)},a.prototype.egcd=function(e){n(0===e.negative),n(!e.isZero());var t=this,i=e.clone();t=0===t.negative?t.clone():t.umod(e);for(var s=new a(1),r=new a(0),o=new a(0),l=new a(1),c=0;t.isEven()&&i.isEven();)t.iushrn(1),i.iushrn(1),++c;for(var d=i.clone(),h=t.clone();!t.isZero();){for(var u=0,p=1;0==(t.words[0]&p)&&u<26;p<<=1)++u;if(u>0)for(t.iushrn(u);u-- >0;)(s.isOdd()||r.isOdd())&&(s.iadd(d),r.isub(h)),s.iushrn(1),r.iushrn(1);for(var f=0,m=1;0==(i.words[0]&m)&&f<26;m<<=1)++f;if(f>0)for(i.iushrn(f);f-- >0;)(o.isOdd()||l.isOdd())&&(o.iadd(d),l.isub(h)),o.iushrn(1),l.iushrn(1);t.cmp(i)>=0?(t.isub(i),s.isub(o),r.isub(l)):(i.isub(t),o.isub(s),l.isub(r))}return{a:o,b:l,gcd:i.iushln(c)}},a.prototype._invmp=function(e){n(0===e.negative),n(!e.isZero());var t,i=this,s=e.clone();i=0===i.negative?i.clone():i.umod(e);for(var r=new a(1),o=new a(0),l=s.clone();i.cmpn(1)>0&&s.cmpn(1)>0;){for(var c=0,d=1;0==(i.words[0]&d)&&c<26;d<<=1)++c;if(c>0)for(i.iushrn(c);c-- >0;)r.isOdd()&&r.iadd(l),r.iushrn(1);for(var h=0,u=1;0==(s.words[0]&u)&&h<26;u<<=1)++h;if(h>0)for(s.iushrn(h);h-- >0;)o.isOdd()&&o.iadd(l),o.iushrn(1);i.cmp(s)>=0?(i.isub(s),r.isub(o)):(s.isub(i),o.isub(r))}return(t=0===i.cmpn(1)?r:o).cmpn(0)<0&&t.iadd(e),t},a.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),i=e.clone();t.negative=0,i.negative=0;for(var n=0;t.isEven()&&i.isEven();n++)t.iushrn(1),i.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;i.isEven();)i.iushrn(1);var s=t.cmp(i);if(s<0){var a=t;t=i,i=a}else if(0===s||0===i.cmpn(1))break;t.isub(i)}return i.iushln(n)},a.prototype.invm=function(e){return this.egcd(e).a.umod(e)},a.prototype.isEven=function(){return 0==(1&this.words[0])},a.prototype.isOdd=function(){return 1==(1&this.words[0])},a.prototype.andln=function(e){return this.words[0]&e},a.prototype.bincn=function(e){n("number"==typeof e);var t,i=e%26,s=(e-i)/26,a=1<<i;if(this.length<=s)return this._expand(s+1),this.words[s]|=a,this;for(var r=a,o=s;0!==r&&o<this.length;o++)t=0|this.words[o],r=(t+=r)>>>26,t&=67108863,this.words[o]=t;return 0!==r&&(this.words[o]=r,this.length++),this},a.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},a.prototype.cmpn=function(e){var t,i=e<0;if(0!==this.negative&&!i)return-1;if(0===this.negative&&i)return 1;if(this.strip(),this.length>1)t=1;else{i&&(e=-e),n(e<=67108863,"Number is too big");var s=0|this.words[0];t=s===e?0:s<e?-1:1}return 0===this.negative?t:0|-t},a.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0===this.negative?t:0|-t},a.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,i=this.length-1;i>=0;i--){var n=0|this.words[i],s=0|e.words[i];if(n!=s){n<s?t=-1:n>s&&(t=1);break}}return t},a.prototype.gtn=function(e){return 1===this.cmpn(e)},a.prototype.gt=function(e){return 1===this.cmp(e)},a.prototype.gten=function(e){return this.cmpn(e)>=0},a.prototype.gte=function(e){return this.cmp(e)>=0},a.prototype.ltn=function(e){return-1===this.cmpn(e)},a.prototype.lt=function(e){return-1===this.cmp(e)},a.prototype.lten=function(e){return this.cmpn(e)<=0},a.prototype.lte=function(e){return this.cmp(e)<=0},a.prototype.eqn=function(e){return 0===this.cmpn(e)},a.prototype.eq=function(e){return 0===this.cmp(e)},a.red=function(e){return new v(e)},a.prototype.toRed=function(e){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},a.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(e){return this.red=e,this},a.prototype.forceRed=function(e){return n(!this.red,"Already a number in reduction context"),this._forceRed(e)},a.prototype.redAdd=function(e){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},a.prototype.redIAdd=function(e){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},a.prototype.redSub=function(e){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},a.prototype.redISub=function(e){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},a.prototype.redShl=function(e){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},a.prototype.redMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},a.prototype.redIMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},a.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(e){return n(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var k={k256:null,p224:null,p192:null,p25519:null};u.prototype._tmp=function(){var e=new a(null);return e.words=Array(Math.ceil(this.n/13)),e},u.prototype.ireduce=function(e){var t,i=e;do{this.split(i,this.tmp),t=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength()}while(t>this.n);var n=t<this.n?-1:i.ucmp(this.p);return 0===n?(i.words[0]=0,i.length=1):n>0?i.isub(this.p):void 0===i.strip?i._strip():i.strip(),i},u.prototype.split=function(e,t){e.iushrn(this.n,0,t)},u.prototype.imulK=function(e){return e.imul(this.k)},s(p,u),p.prototype.split=function(e,t){for(var i=4194303,n=Math.min(e.length,9),s=0;s<n;s++)t.words[s]=e.words[s];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var a=e.words[9];for(t.words[t.length++]=a&i,s=10;s<e.length;s++){var r=0|e.words[s];e.words[s-10]=(r&i)<<4|a>>>22,a=r}a>>>=22,e.words[s-10]=a,e.length-=0===a&&e.length>10?10:9},p.prototype.imulK=function(e){var t;e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var i=0,n=0;n<e.length;n++)i+=977*(t=0|e.words[n]),e.words[n]=67108863&i,i=64*t+(i/67108864|0);return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},s(f,u),s(m,u),s(g,u),g.prototype.imulK=function(e){for(var t=0,i=0;i<e.length;i++){var n=19*(0|e.words[i])+t,s=67108863&n;n>>>=26,e.words[i]=s,t=n}return 0!==t&&(e.words[e.length++]=t),e},a._prime=function(e){if(k[e])return k[e];var t;if("k256"===e)t=new p;else if("p224"===e)t=new f;else if("p192"===e)t=new m;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new g}return k[e]=t,t},v.prototype._verify1=function(e){n(0===e.negative,"red works only with positives"),n(e.red,"red works only with red numbers")},v.prototype._verify2=function(e,t){n(0==(e.negative|t.negative),"red works only with positives"),n(e.red&&e.red===t.red,"red works only with red numbers")},v.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},v.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},v.prototype.add=function(e,t){this._verify2(e,t);var i=e.add(t);return i.cmp(this.m)>=0&&i.isub(this.m),i._forceRed(this)},v.prototype.iadd=function(e,t){this._verify2(e,t);var i=e.iadd(t);return i.cmp(this.m)>=0&&i.isub(this.m),i},v.prototype.sub=function(e,t){this._verify2(e,t);var i=e.sub(t);return i.cmpn(0)<0&&i.iadd(this.m),i._forceRed(this)},v.prototype.isub=function(e,t){this._verify2(e,t);var i=e.isub(t);return i.cmpn(0)<0&&i.iadd(this.m),i},v.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},v.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},v.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},v.prototype.isqr=function(e){return this.imul(e,e.clone())},v.prototype.sqr=function(e){return this.mul(e,e)},v.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(n(t%2==1),3===t){var i=this.m.add(new a(1)).iushrn(2);return this.pow(e,i)}for(var s=this.m.subn(1),r=0;!s.isZero()&&0===s.andln(1);)r++,s.iushrn(1);n(!s.isZero());var o=new a(1).toRed(this),l=o.redNeg(),c=this.m.subn(1).iushrn(1),d=this.m.bitLength();for(d=new a(2*d*d).toRed(this);0!==this.pow(d,c).cmp(l);)d.redIAdd(l);for(var h=this.pow(d,s),u=this.pow(e,s.addn(1).iushrn(1)),p=this.pow(e,s),f=r;0!==p.cmp(o);){for(var m=p,g=0;0!==m.cmp(o);g++)m=m.redSqr();n(g<f);var v=this.pow(h,new a(1).iushln(f-g-1));u=u.redMul(v),h=v.redSqr(),p=p.redMul(h),f=g}return u},v.prototype.invm=function(e){var t=e._invmp(this.m);return 0===t.negative?this.imod(t):(t.negative=0,this.imod(t).redNeg())},v.prototype.pow=function(e,t){if(t.isZero())return new a(1).toRed(this);if(0===t.cmpn(1))return e.clone();var i=Array(16);i[0]=new a(1).toRed(this),i[1]=e;for(var n=2;n<i.length;n++)i[n]=this.mul(i[n-1],e);var s=i[0],r=0,o=0,l=t.bitLength()%26;for(0===l&&(l=26),n=t.length-1;n>=0;n--){for(var c,d=t.words[n],h=l-1;h>=0;h--)c=d>>h&1,s!==i[0]&&(s=this.sqr(s)),0!==c||0!==r?(r<<=1,r|=c,(4===++o||0===n&&0===h)&&(s=this.mul(s,i[r]),o=0,r=0)):o=0;l=26}return s},v.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},v.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},a.mont=function(e){return new y(e)},s(y,v),y.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},y.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},y.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var i=e.imul(t),n=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),s=i.isub(n).iushrn(this.shift),a=s;return s.cmp(this.m)>=0?a=s.isub(this.m):s.cmpn(0)<0&&(a=s.iadd(this.m)),a._forceRed(this)},y.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new a(0)._forceRed(this);var i=e.mul(t),n=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),s=i.isub(n).iushrn(this.shift),r=s;return s.cmp(this.m)>=0?r=s.isub(this.m):s.cmpn(0)<0&&(r=s.iadd(this.m)),r._forceRed(this)},y.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e,this)}).call(this,i(50)(e))},function(e,t,i){"use strict";(function(e){var n=i(64),s=i(65),a=i(36);function r(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e,t){if(r()<t)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=l.prototype:(null===e&&(e=new l(t)),e.length=t),e}function l(e,t,i){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(e,t,i);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return h(this,e)}return c(this,e,t,i)}function c(e,t,i,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,i,n){if(t.byteLength,i<0||t.byteLength<i)throw new RangeError("'offset' is out of bounds");if(t.byteLength<i+(n||0))throw new RangeError("'length' is out of bounds");t=void 0===i&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,i):new Uint8Array(t,i,n),l.TYPED_ARRAY_SUPPORT?(e=t).__proto__=l.prototype:e=u(e,t);return e}(e,t,i,n):"string"==typeof t?function(e,t,i){"string"==typeof i&&""!==i||(i="utf8");if(!l.isEncoding(i))throw new TypeError('"encoding" must be a valid string encoding');var n=0|f(t,i),s=(e=o(e,n)).write(t,i);s!==n&&(e=e.slice(0,s));return e}(e,t,i):function(e,t){if(l.isBuffer(t)){var i=0|p(t.length);return 0===(e=o(e,i)).length||t.copy(e,0,0,i),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(n=t.length)!=n?o(e,0):u(e,t);if("Buffer"===t.type&&a(t.data))return u(e,t.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function d(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function h(e,t){if(d(t),e=o(e,t<0?0:0|p(t)),!l.TYPED_ARRAY_SUPPORT)for(var i=0;i<t;++i)e[i]=0;return e}function u(e,t){var i=t.length<0?0:0|p(t.length);e=o(e,i);for(var n=0;n<i;n+=1)e[n]=255&t[n];return e}function p(e){if(e>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|e}function f(e,t){if(l.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var i=e.length;if(0===i)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return z(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return B(e).length;default:if(n)return z(e).length;t=(""+t).toLowerCase(),n=!0}}function m(e,t,i){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(t>>>=0))return"";for(e||="utf8";;)switch(e){case"hex":return T(this,t,i);case"utf8":case"utf-8":return S(this,t,i);case"ascii":return k(this,t,i);case"latin1":case"binary":return _(this,t,i);case"base64":return x(this,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,t,i);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function g(e,t,i){var n=e[t];e[t]=e[i],e[i]=n}function v(e,t,i,n,s){if(0===e.length)return-1;if("string"==typeof i?(n=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,isNaN(i)&&(i=s?0:e.length-1),i<0&&(i=e.length+i),i>=e.length){if(s)return-1;i=e.length-1}else if(i<0){if(!s)return-1;i=0}if("string"==typeof t&&(t=l.from(t,n)),l.isBuffer(t))return 0===t.length?-1:y(e,t,i,n,s);if("number"==typeof t)return t&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?s?Uint8Array.prototype.indexOf.call(e,t,i):Uint8Array.prototype.lastIndexOf.call(e,t,i):y(e,[t],i,n,s);throw new TypeError("val must be string, number or Buffer")}function y(e,t,i,n,s){function a(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}var r,o=1,l=e.length,c=t.length;if(void 0!==n&&("ucs2"===(n=(n+"").toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;o=2,l/=2,c/=2,i/=2}if(s){var d=-1;for(r=i;r<l;r++)if(a(e,r)!==a(t,-1===d?0:r-d))-1!==d&&(r-=r-d),d=-1;else if(-1===d&&(d=r),r-d+1===c)return d*o}else for(i+c>l&&(i=l-c),r=i;r>=0;r--){for(var h=!0,u=0;u<c;u++)if(a(e,r+u)!==a(t,u)){h=!1;break}if(h)return r}return-1}function b(e,t,i,n){i=+i||0;var s=e.length-i;n?(n=+n)>s&&(n=s):n=s;var a,r=t.length;if(r%2!=0)throw new TypeError("Invalid hex string");n>r/2&&(n=r/2);for(var o=0;o<n;++o){if(a=parseInt(t.substr(2*o,2),16),isNaN(a))return o;e[i+o]=a}return o}function w(e,t,i,n){return N(function(e){for(var t=[],i=0;i<e.length;++i)t.push(255&e.charCodeAt(i));return t}(t),e,i,n)}function x(e,t,i){return 0===t&&i===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,i))}function S(e,t,i){i=Math.min(e.length,i);for(var n=[],s=t;s<i;){var a,r,o,l,c=e[s],d=null,h=c>239?4:c>223?3:c>191?2:1;if(s+h<=i)1===h?c<128&&(d=c):2===h?128==(192&(a=e[s+1]))&&(l=(31&c)<<6|63&a)>127&&(d=l):3===h?(a=e[s+1],r=e[s+2],128==(192&a)&&128==(192&r)&&(l=(15&c)<<12|(63&a)<<6|63&r)>2047&&(l<55296||l>57343)&&(d=l)):4===h&&(a=e[s+1],r=e[s+2],o=e[s+3],128==(192&a)&&128==(192&r)&&128==(192&o)&&(l=(15&c)<<18|(63&a)<<12|(63&r)<<6|63&o)>65535&&l<1114112&&(d=l));null===d?(d=65533,h=1):d>65535&&(d-=65536,n.push(d>>>10&1023|55296),d=1023&d|56320),n.push(d),s+=h}return function(e){var t=e.length;if(t<=M)return String.fromCharCode.apply(String,e);for(var i="",n=0;n<t;)i+=String.fromCharCode.apply(String,e.slice(n,n+=M));return i}(n)}t.Buffer=l,t.SlowBuffer=function(e){+e!=e&&(e=0);return l.alloc(+e)},t.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0===e.TYPED_ARRAY_SUPPORT?function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}():e.TYPED_ARRAY_SUPPORT,t.kMaxLength=r(),l.poolSize=8192,l._augment=function(e){return e.__proto__=l.prototype,e},l.from=function(e,t,i){return c(null,e,t,i)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(e,t,i){return n=null,a=t,r=i,d(s=e),s<=0||void 0===a?o(n,s):"string"==typeof r?o(n,s).fill(a,r):o(n,s).fill(a);var n,s,a,r},l.allocUnsafe=function(e){return h(null,e)},l.allocUnsafeSlow=function(e){return h(null,e)},l.isBuffer=function(e){return null!=e&&!!e._isBuffer},l.compare=function(e,t){if(!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var i=e.length,n=t.length,s=0,a=Math.min(i,n);s<a;++s)if(e[s]!==t[s]){i=e[s],n=t[s];break}return i<n?-1:n<i?1:0},l.isEncoding=function(e){switch((e+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!a(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var i;if(void 0===t)for(t=0,i=0;i<e.length;++i)t+=e[i].length;var n=l.allocUnsafe(t),s=0;for(i=0;i<e.length;++i){var r=e[i];if(!l.isBuffer(r))throw new TypeError('"list" argument must be an Array of Buffers');r.copy(n,s),s+=r.length}return n},l.byteLength=f,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},l.prototype.toString=function(){var e=0|this.length;return 0==e?"":0===arguments.length?S(this,0,e):m.apply(this,arguments)},l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",i=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,i).match(/.{2}/g).join(" "),this.length>i&&(e+=" ... ")),"<Buffer "+e+">"},l.prototype.compare=function(e,t,i,n,s){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===i&&(i=e?e.length:0),void 0===n&&(n=0),void 0===s&&(s=this.length),t<0||i>e.length||n<0||s>this.length)throw new RangeError("out of range index");if(n>=s&&t>=i)return 0;if(n>=s)return-1;if(t>=i)return 1;if(this===e)return 0;for(var a=(s>>>=0)-(n>>>=0),r=(i>>>=0)-(t>>>=0),o=Math.min(a,r),c=this.slice(n,s),d=e.slice(t,i),h=0;h<o;++h)if(c[h]!==d[h]){a=c[h],r=d[h];break}return a<r?-1:r<a?1:0},l.prototype.includes=function(e,t,i){return-1!==this.indexOf(e,t,i)},l.prototype.indexOf=function(e,t,i){return v(this,e,t,i,!0)},l.prototype.lastIndexOf=function(e,t,i){return v(this,e,t,i,!1)},l.prototype.write=function(e,t,i,n){if(void 0===t)n="utf8",i=this.length,t=0;else if(void 0===i&&"string"==typeof t)n=t,i=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(i)?(i|=0,void 0===n&&(n="utf8")):(n=i,i=void 0)}var s=this.length-t;if((void 0===i||i>s)&&(i=s),e.length>0&&(i<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||="utf8";for(var a,r,o,l,c,d,h,u,p,f=!1;;)switch(n){case"hex":return b(this,e,t,i);case"utf8":case"utf-8":return u=t,p=i,N(z(e,(h=this).length-u),h,u,p);case"ascii":return w(this,e,t,i);case"latin1":case"binary":return w(this,e,t,i);case"base64":return l=this,c=t,d=i,N(B(e),l,c,d);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r=t,o=i,N(function(e,t){for(var i,n,s,a=[],r=0;r<e.length&&(t-=2)>=0;++r)n=(i=e.charCodeAt(r))>>8,s=i%256,a.push(s),a.push(n);return a}(e,(a=this).length-r),a,r,o);default:if(f)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),f=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var M=4096;function k(e,t,i){var n="";i=Math.min(e.length,i);for(var s=t;s<i;++s)n+=String.fromCharCode(127&e[s]);return n}function _(e,t,i){var n="";i=Math.min(e.length,i);for(var s=t;s<i;++s)n+=String.fromCharCode(e[s]);return n}function T(e,t,i){var n=e.length;(!t||t<0)&&(t=0),(!i||i<0||i>n)&&(i=n);for(var s="",a=t;a<i;++a)s+=j(e[a]);return s}function C(e,t,i){for(var n=e.slice(t,i),s="",a=0;a<n.length;a+=2)s+=String.fromCharCode(n[a]+256*n[a+1]);return s}function I(e,t,i){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>i)throw new RangeError("Trying to access beyond buffer length")}function A(e,t,i,n,s,a){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>s||t<a)throw new RangeError('"value" argument is out of bounds');if(i+n>e.length)throw new RangeError("Index out of range")}function R(e,t,i,n){t<0&&(t=65535+t+1);for(var s=0,a=Math.min(e.length-i,2);s<a;++s)e[i+s]=(t&255<<8*(n?s:1-s))>>>8*(n?s:1-s)}function P(e,t,i,n){t<0&&(t=4294967295+t+1);for(var s=0,a=Math.min(e.length-i,4);s<a;++s)e[i+s]=t>>>8*(n?s:3-s)&255}function E(e,t,i,n){if(i+n>e.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function D(e,t,i,n,a){return a||E(e,0,i,4),s.write(e,t,i,n,23,4),i+4}function O(e,t,i,n,a){return a||E(e,0,i,8),s.write(e,t,i,n,52,8),i+8}l.prototype.slice=function(e,t){var i,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),l.TYPED_ARRAY_SUPPORT)(i=this.subarray(e,t)).__proto__=l.prototype;else{var s=t-e;i=new l(s,void 0);for(var a=0;a<s;++a)i[a]=this[a+e]}return i},l.prototype.readUIntLE=function(e,t,i){e|=0,t|=0,i||I(e,t,this.length);for(var n=this[e],s=1,a=0;++a<t&&(s*=256);)n+=this[e+a]*s;return n},l.prototype.readUIntBE=function(e,t,i){e|=0,t|=0,i||I(e,t,this.length);for(var n=this[e+--t],s=1;t>0&&(s*=256);)n+=this[e+--t]*s;return n},l.prototype.readUInt8=function(e,t){return t||I(e,1,this.length),this[e]},l.prototype.readUInt16LE=function(e,t){return t||I(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUInt16BE=function(e,t){return t||I(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUInt32LE=function(e,t){return t||I(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUInt32BE=function(e,t){return t||I(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,i){e|=0,t|=0,i||I(e,t,this.length);for(var n=this[e],s=1,a=0;++a<t&&(s*=256);)n+=this[e+a]*s;return n>=(s*=128)&&(n-=Math.pow(2,8*t)),n},l.prototype.readIntBE=function(e,t,i){e|=0,t|=0,i||I(e,t,this.length);for(var n=t,s=1,a=this[e+--n];n>0&&(s*=256);)a+=this[e+--n]*s;return a>=(s*=128)&&(a-=Math.pow(2,8*t)),a},l.prototype.readInt8=function(e,t){return t||I(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){t||I(e,2,this.length);var i=this[e]|this[e+1]<<8;return 32768&i?4294901760|i:i},l.prototype.readInt16BE=function(e,t){t||I(e,2,this.length);var i=this[e+1]|this[e]<<8;return 32768&i?4294901760|i:i},l.prototype.readInt32LE=function(e,t){return t||I(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return t||I(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return t||I(e,4,this.length),s.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return t||I(e,4,this.length),s.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return t||I(e,8,this.length),s.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return t||I(e,8,this.length),s.read(this,e,!1,52,8)},l.prototype.writeUIntLE=function(e,t,i,n){(e=+e,t|=0,i|=0,n)||A(this,e,t,i,Math.pow(2,8*i)-1,0);var s=1,a=0;for(this[t]=255&e;++a<i&&(s*=256);)this[t+a]=e/s&255;return t+i},l.prototype.writeUIntBE=function(e,t,i,n){(e=+e,t|=0,i|=0,n)||A(this,e,t,i,Math.pow(2,8*i)-1,0);var s=i-1,a=1;for(this[t+s]=255&e;--s>=0&&(a*=256);)this[t+s]=e/a&255;return t+i},l.prototype.writeUInt8=function(e,t,i){return e=+e,t|=0,i||A(this,e,t,1,255,0),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},l.prototype.writeUInt16LE=function(e,t,i){return e=+e,t|=0,i||A(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):R(this,e,t,!0),t+2},l.prototype.writeUInt16BE=function(e,t,i){return e=+e,t|=0,i||A(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):R(this,e,t,!1),t+2},l.prototype.writeUInt32LE=function(e,t,i){return e=+e,t|=0,i||A(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):P(this,e,t,!0),t+4},l.prototype.writeUInt32BE=function(e,t,i){return e=+e,t|=0,i||A(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):P(this,e,t,!1),t+4},l.prototype.writeIntLE=function(e,t,i,n){if(e=+e,t|=0,!n){var s=Math.pow(2,8*i-1);A(this,e,t,i,s-1,-s)}var a=0,r=1,o=0;for(this[t]=255&e;++a<i&&(r*=256);)e<0&&0===o&&0!==this[t+a-1]&&(o=1),this[t+a]=(e/r>>0)-o&255;return t+i},l.prototype.writeIntBE=function(e,t,i,n){if(e=+e,t|=0,!n){var s=Math.pow(2,8*i-1);A(this,e,t,i,s-1,-s)}var a=i-1,r=1,o=0;for(this[t+a]=255&e;--a>=0&&(r*=256);)e<0&&0===o&&0!==this[t+a+1]&&(o=1),this[t+a]=(e/r>>0)-o&255;return t+i},l.prototype.writeInt8=function(e,t,i){return e=+e,t|=0,i||A(this,e,t,1,127,-128),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,i){return e=+e,t|=0,i||A(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):R(this,e,t,!0),t+2},l.prototype.writeInt16BE=function(e,t,i){return e=+e,t|=0,i||A(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):R(this,e,t,!1),t+2},l.prototype.writeInt32LE=function(e,t,i){return e=+e,t|=0,i||A(this,e,t,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):P(this,e,t,!0),t+4},l.prototype.writeInt32BE=function(e,t,i){return e=+e,t|=0,i||A(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):P(this,e,t,!1),t+4},l.prototype.writeFloatLE=function(e,t,i){return D(this,e,t,!0,i)},l.prototype.writeFloatBE=function(e,t,i){return D(this,e,t,!1,i)},l.prototype.writeDoubleLE=function(e,t,i){return O(this,e,t,!0,i)},l.prototype.writeDoubleBE=function(e,t,i){return O(this,e,t,!1,i)},l.prototype.copy=function(e,t,i,n){if(i||=0,n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||=0,n>0&&n<i&&(n=i),n===i)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");var s;n>this.length&&(n=this.length),e.length-t<n-i&&(n=e.length-t+i);var a=n-i;if(this===e&&i<t&&t<n)for(s=a-1;s>=0;--s)e[s+t]=this[s+i];else if(a<1e3||!l.TYPED_ARRAY_SUPPORT)for(s=0;s<a;++s)e[s+t]=this[s+i];else Uint8Array.prototype.set.call(e,this.subarray(i,i+a),t);return a},l.prototype.fill=function(e,t,i,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,i=this.length):"string"==typeof i&&(n=i,i=this.length),1===e.length){var s=e.charCodeAt(0);s<256&&(e=s)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!l.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<i)throw new RangeError("Out of range index");if(i<=t)return this;var a;if(t>>>=0,i=void 0===i?this.length:i>>>0,e||=0,"number"==typeof e)for(a=t;a<i;++a)this[a]=e;else{var r=l.isBuffer(e)?e:z(new l(e,n).toString()),o=r.length;for(a=0;a<i-t;++a)this[a+t]=r[a%o]}return this};var L=/[^+\/0-9A-Za-z-_]/g;function j(e){return e<16?"0"+e.toString(16):e.toString(16)}function z(e,t){var i;t=t||1/0;for(var n=e.length,s=null,a=[],r=0;r<n;++r){if((i=e.charCodeAt(r))>55295&&i<57344){if(!s){if(i>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(r+1===n){(t-=3)>-1&&a.push(239,191,189);continue}s=i;continue}if(i<56320){(t-=3)>-1&&a.push(239,191,189),s=i;continue}i=65536+(s-55296<<10|i-56320)}else s&&(t-=3)>-1&&a.push(239,191,189);if(s=null,i<128){if((t-=1)<0)break;a.push(i)}else if(i<2048){if((t-=2)<0)break;a.push(i>>6|192,63&i|128)}else if(i<65536){if((t-=3)<0)break;a.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return a}function B(e){return n.toByteArray(function(e){var t;if((e=(t=e,t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")).replace(L,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function N(e,t,i,n){for(var s=0;s<n&&s+i<t.length&&s<e.length;++s)t[s+i]=e[s];return s}}).call(this,i(8))},function(e,t){var i,n,s,a=e.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function l(e){if(i===setTimeout)return setTimeout(e,0);if((i===r||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:r}catch(e){i=r}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var c=[],d=!1,h=-1;function u(){d&&s&&(d=!1,s.length?c=s.concat(c):h=-1,c.length&&p())}function p(){if(!d){var e=l(u);d=!0;for(var t=c.length;t;){for(s=c,c=[];++h<t;)s&&s[h].run();h=-1,t=c.length}s=null,d=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function m(){}a.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];c.push(new f(e,t)),1!==c.length||d||l(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=m,a.addListener=m,a.once=m,a.off=m,a.removeListener=m,a.removeAllListeners=m,a.emit=m,a.prependListener=m,a.prependOnceListener=m,a.listeners=function(){return[]},a.binding=function(){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(e,t){var i=function(){return this}();try{i=i||new Function("return this")()}catch(e){"object"==typeof window&&(i=window)}e.exports=i},function(e,t){function i(e,t){if(!e)throw new Error(t||"Assertion failed")}e.exports=i,i.equal=function(e,t,i){if(e!=t)throw new Error(i||"Assertion failed: "+e+" != "+t)}},function(e,t,i){"use strict";var n=t,s=i(5),a=i(9),r=i(100);n.assert=a,n.toArray=r.toArray,n.zero2=r.zero2,n.toHex=r.toHex,n.encode=r.encode,n.getNAF=function(e,t,i){var n=Array(Math.max(e.bitLength(),i)+1);n.fill(0);for(var s=1<<t+1,a=e.clone(),r=0;r<n.length;r++){var o,l=a.andln(s-1);a.isOdd()?(o=l>(s>>1)-1?(s>>1)-l:l,a.isubn(o)):o=0,n[r]=o,a.iushrn(1)}return n},n.getJSF=function(e,t){var i=[[],[]];e=e.clone(),t=t.clone();for(var n,s=0,a=0;e.cmpn(-s)>0||t.cmpn(-a)>0;){var r,o,l=e.andln(3)+s&3,c=t.andln(3)+a&3;3==l&&(l=-1),3===c&&(c=-1),r=0==(1&l)?0:3!==(n=e.andln(7)+s&7)&&5!==n||2!==c?l:-l,i[0].push(r),o=0==(1&c)?0:3!==(n=t.andln(7)+a&7)&&5!==n||2!==l?c:-c,i[1].push(o),2*s===r+1&&(s=1-s),2*a===o+1&&(a=1-a),e.iushrn(1),t.iushrn(1)}return i},n.cachedProperty=function(e,t,i){var n="_"+t;e.prototype[t]=function(){return void 0===this[n]?this[n]=i.call(this):this[n]}},n.parseBytes=function(e){return"string"==typeof e?n.toArray(e,"hex"):e},n.intFromLE=function(e){return new s(e,"hex","le")}},function(e,t,i){"use strict";var n=i(9),s=i(2);function a(e){return(e>>>24|e>>>8&65280|e<<8&16711680|(255&e)<<24)>>>0}function r(e){return 1===e.length?"0"+e:e}function o(e){return 7===e.length?"0"+e:6===e.length?"00"+e:5===e.length?"000"+e:4===e.length?"0000"+e:3===e.length?"00000"+e:2===e.length?"000000"+e:1===e.length?"0000000"+e:e}t.inherits=s,t.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var i,n,s=[];if("string"!=typeof e)for(o=0;o<e.length;o++)s[o]=0|e[o];else if(t){if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),o=0;o<e.length;o+=2)s.push(parseInt(e[o]+e[o+1],16))}else for(var a,r=0,o=0;o<e.length;o++)(a=e.charCodeAt(o))<128?s[r++]=a:a<2048?(s[r++]=a>>6|192,s[r++]=63&a|128):(n=o,55296==(64512&(i=e).charCodeAt(n))&&n>=0&&n+1<i.length&&56320==(64512&i.charCodeAt(n+1))?(a=65536+((1023&a)<<10)+(1023&e.charCodeAt(++o)),s[r++]=a>>18|240,s[r++]=a>>12&63|128,s[r++]=a>>6&63|128,s[r++]=63&a|128):(s[r++]=a>>12|224,s[r++]=a>>6&63|128,s[r++]=63&a|128));return s},t.toHex=function(e){for(var t="",i=0;i<e.length;i++)t+=r(e[i].toString(16));return t},t.htonl=a,t.toHex32=function(e,t){for(var i,n="",s=0;s<e.length;s++)i=e[s],"little"===t&&(i=a(i)),n+=o(i.toString(16));return n},t.zero2=r,t.zero8=o,t.join32=function(e,t,i,s){var a=i-t;n(a%4==0);for(var r=Array(a/4),o=0,l=t;o<r.length;o++,l+=4){var c;c="big"===s?e[l]<<24|e[l+1]<<16|e[l+2]<<8|e[l+3]:e[l+3]<<24|e[l+2]<<16|e[l+1]<<8|e[l],r[o]=c>>>0}return r},t.split32=function(e,t){for(var i,n=Array(4*e.length),s=0,a=0;s<e.length;s++,a+=4)i=e[s],"big"===t?(n[a]=i>>>24,n[a+1]=i>>>16&255,n[a+2]=i>>>8&255,n[a+3]=255&i):(n[a+3]=i>>>24,n[a+2]=i>>>16&255,n[a+1]=i>>>8&255,n[a]=255&i);return n},t.rotr32=function(e,t){return e>>>t|e<<32-t},t.rotl32=function(e,t){return e<<t|e>>>32-t},t.sum32=function(e,t){return e+t>>>0},t.sum32_3=function(e,t,i){return e+t+i>>>0},t.sum32_4=function(e,t,i,n){return e+t+i+n>>>0},t.sum32_5=function(e,t,i,n,s){return e+t+i+n+s>>>0},t.sum64=function(e,t,i,n){var s=e[t],a=n+e[t+1]>>>0,r=(a<n?1:0)+i+s;e[t]=r>>>0,e[t+1]=a},t.sum64_hi=function(e,t,i,n){return(t+n>>>0<t?1:0)+e+i>>>0},t.sum64_lo=function(e,t,i,n){return t+n>>>0},t.sum64_4_hi=function(e,t,i,n,s,a,r,o){var l=0,c=t;return l+=(c=c+n>>>0)<t?1:0,l+=(c=c+a>>>0)<a?1:0,e+i+s+r+(l+=(c=c+o>>>0)<o?1:0)>>>0},t.sum64_4_lo=function(e,t,i,n,s,a,r,o){return t+n+a+o>>>0},t.sum64_5_hi=function(e,t,i,n,s,a,r,o,l,c){var d=0,h=t;return d+=(h=h+n>>>0)<t?1:0,d+=(h=h+a>>>0)<a?1:0,d+=(h=h+o>>>0)<o?1:0,e+i+s+r+l+(d+=(h=h+c>>>0)<c?1:0)>>>0},t.sum64_5_lo=function(e,t,i,n,s,a,r,o,l,c){return t+n+a+o+c>>>0},t.rotr64_hi=function(e,t,i){return(t<<32-i|e>>>i)>>>0},t.rotr64_lo=function(e,t,i){return(e<<32-i|t>>>i)>>>0},t.shr64_hi=function(e,t,i){return e>>>i},t.shr64_lo=function(e,t,i){return(e<<32-i|t>>>i)>>>0}},function(e,t){e.exports={WEAPON:0,HAT:1,BODY:2,MELEE:3,SPRAY:4,DYE:5,WAIST:6,FACE:7,SHOE:8,PET:9,COLLECTIBLE:10,WRIST:11,CHARM:12,TICKET:13,BACK:14,HEAD:15,PLAYER_CARD:16}},function(e,t,i){var n=i(3).Buffer,s=i(159).Transform,a=i(22).StringDecoder;function r(e){s.call(this),this.hashMode="string"==typeof e,this.hashMode?this[e]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}i(2)(r,s),r.prototype.update=function(e,t,i){"string"==typeof e&&(e=n.from(e,t));var s=this._update(e);return this.hashMode?this:(i&&(s=this._toString(s,i)),s)},r.prototype.setAutoPadding=function(){},r.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},r.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},r.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},r.prototype._transform=function(e,t,i){var n;try{this.hashMode?this._update(e):this.push(this._update(e))}catch(e){n=e}finally{i(n)}},r.prototype._flush=function(e){var t;try{this.push(this.__final())}catch(e){t=e}e(t)},r.prototype._finalOrDigest=function(e){var t=this.__final()||n.alloc(0);return e&&(t=this._toString(t,e,!0)),t},r.prototype._toString=function(e,t,i){if(this._decoder||(this._decoder=new a(t),this._encoding=t),this._encoding!==t)throw new Error("can't switch encodings");var n=this._decoder.write(e);return i&&(n+=this._decoder.end()),n},e.exports=r},function(e,t,i){"use strict";var n=i(30),s=Object.keys||function(e){var t=[];for(var i in e)t.push(i);return t};e.exports=h;var a=Object.create(i(23));a.inherits=i(2);var r,o=i(79),l=i(46);a.inherits(h,o);for(var c=s(l.prototype),d=0;d<c.length;d++)r=c[d],h.prototype[r]||=l.prototype[r];function h(e){return this instanceof h?(o.call(this,e),l.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),void this.once("end",u)):new h(e)}function u(){this.allowHalfOpen||this._writableState.ended||n.nextTick(p,this)}function p(e){e.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),h.prototype._destroy=function(e,t){this.push(null),this.end(),n.nextTick(t,e)}},function(e,t){e.exports.premium="#FBC02D",e.exports.verified={clan:"#FBC02D",player:"#40C4FF"},e.exports.getClanCol=function(e,t){return"DEV"==e?"#40C4FF":"VIP"==e?"#11D445":"CMD"==e?"#993299":t},e.exports.easterPalette=["#ffd45e","#61fff7","#ff63d8"],e.exports.damage="#DE292F",e.exports.critical="#FFD542",e.exports.ready="#32CD32",e.exports.crosshair={background:"#ffffff",shadow:"#000000"},e.exports.hudHealth={low:"#eb5656",high:"#9eeb56"},e.exports.popupScore="#ffea78",e.exports.ping={unknown:"grey",low:"rgb(158, 235, 86)",medium:"rgb(255, 213, 66)",high:"rgb(255, 75, 66)"},e.exports.teams=["#9eeb56","#eb5656"],e.exports.creationDate={new:"#0a61f7",recent:"#E040FB",old:"#ed4242"},e.exports.matchVote={selected:"rgba(251, 192, 45, 1)",notSelected:"rgba(255, 255, 255, 0.7)"},e.exports.killFeed={enemy:"#eb5656",ally:"#9eeb56",you:"#fff"},e.exports.interactPopup={key:"#FBC02D",enough:"#9eeb56",notEnough:"#eb5656"},e.exports.zones={BR:["#c542d9","#c542d9","#c542d9"],sky:["#74a4b9","#dce8ed","#dce8ed"]}},function(e,t,i){"use strict";(function(t,n){var s=65536;var a=i(3).Buffer,r=t.crypto||t.msCrypto;e.exports=r&&r.getRandomValues?function(e,t){if(e>4294967295)throw new RangeError("requested too many random bytes");var i=a.allocUnsafe(e);if(e>0)if(e>s)for(var o=0;o<e;o+=s)r.getRandomValues(i.slice(o,o+s));else r.getRandomValues(i);return"function"==typeof t?n.nextTick((function(){t(null,i)})):i}:function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}}).call(this,i(8),i(7))},function(e,t,i){"use strict";var n={};function s(e,t,i){i||=Error;var s=function(e){function i(i,n,s){return e.call(this,(a=i,r=n,o=s,"string"==typeof t?t:t(a,r,o)))||this;var a,r,o}var n,s;return s=e,(n=i).prototype=Object.create(s.prototype),n.prototype.constructor=n,n.__proto__=s,i}(i);s.prototype.name=i.name,s.prototype.code=e,n[e]=s}function a(e,t){if(Array.isArray(e)){var i=e.length;return e=e.map((function(e){return e+""})),i>2?`one of ${t} ${e.slice(0,i-1).join(", ")}, or ${e[i-1]}`:2===i?`one of ${t} ${e[0]} or ${e[1]}`:`of ${t} ${e[0]}`}return`of ${t} ${e+""}`}s("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),s("ERR_INVALID_ARG_TYPE",(function(e,t,i){var n,s,r,o,l,c,d,h,u,p;("string"==typeof t&&(s="not ",t.substr(!r||r<0?0:+r,s.length)===s)?(n="must not be",t=t.replace(/^not /,"")):n="must be",h=e,u=" argument",(void 0===p||p>h.length)&&(p=h.length),h.substring(p-u.length,p)===u)?o=`The ${e} ${n} ${a(t,"type")}`:o=`The "${e}" ${"number"!=typeof d&&(d=0),d+(c=".").length<=(l=e).length&&-1!==l.indexOf(c,d)?"property":"argument"} ${n} ${a(t,"type")}`;return o+=". Received type "+typeof i}),TypeError),s("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),s("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),s("ERR_STREAM_PREMATURE_CLOSE","Premature close"),s("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),s("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),s("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),s("ERR_STREAM_WRITE_AFTER_END","write after end"),s("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),s("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),s("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.codes=n},function(e,t,i){"use strict";(function(t){var n=Object.keys||function(e){var t=[];for(var i in e)t.push(i);return t};e.exports=c;var s,a=i(70),r=i(74);i(2)(c,a);for(var o=n(r.prototype),l=0;l<o.length;l++)s=o[l],c.prototype[s]||=r.prototype[s];function c(e){return this instanceof c?(a.call(this,e),r.call(this,e),this.allowHalfOpen=!0,void(e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",d))))):new c(e)}function d(){this._writableState.ended||t.nextTick(h,this)}function h(e){e.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this,i(7))},function(e,t,i){var n=i(3).Buffer;function s(e,t){this._block=n.alloc(e),this._finalSize=t,this._blockSize=e,this._len=0}s.prototype.update=function(e,t){"string"==typeof e&&(t=t||"utf8",e=n.from(e,t));for(var i=this._block,s=this._blockSize,a=e.length,r=this._len,o=0;o<a;){for(var l=r%s,c=Math.min(a-o,s-l),d=0;d<c;d++)i[l+d]=e[o+d];o+=c,(r+=c)%s==0&&this._update(i)}return this._len+=a,this},s.prototype.digest=function(e){var t=this._len%this._blockSize;this._block[t]=128,this._block.fill(0,t+1),t>=this._finalSize&&(this._update(this._block),this._block.fill(0));var i=8*this._len;if(i<=4294967295)this._block.writeUInt32BE(i,this._blockSize-4);else{var n=(4294967295&i)>>>0;this._block.writeUInt32BE((i-n)/4294967296,this._blockSize-8),this._block.writeUInt32BE(n,this._blockSize-4)}this._update(this._block);var s=this._hash();return e?s.toString(e):s},s.prototype._update=function(){throw new Error("_update must be implemented by subclass")},e.exports=s},function(e,t,i){"use strict";var n=i(2),s=i(41),a=i(43),r=i(44),o=i(13);function l(e){o.call(this,"digest"),this._hash=e}n(l,o),l.prototype._update=function(e){this._hash.update(e)},l.prototype._final=function(){return this._hash.digest()},e.exports=function(e){return"md5"===(e=e.toLowerCase())?new s:"rmd160"===e||"ripemd160"===e?new a:new l(r(e))}},function(e,t,i){"use strict";var n,s="object"==typeof Reflect?Reflect:null,a=s&&"function"==typeof s.apply?s.apply:function(e,t,i){return Function.prototype.apply.call(e,t,i)};n=s&&"function"==typeof s.ownKeys?s.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var r=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(i,n){function s(i){e.removeListener(t,a),n(i)}function a(){"function"==typeof e.removeListener&&e.removeListener("error",s),i([].slice.call(arguments))}var r,o,l;v(e,t,a,{once:!0}),"error"!==t&&(o=s,l={once:!0},"function"==typeof(r=e).on&&v(r,"error",o,l))}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var l=10;function c(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function d(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function h(e,t,i,n){var s,a,r,o;if(c(i),void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,i.listener?i.listener:i),a=e._events),r=a[t]),void 0===r)r=a[t]=i,++e._eventsCount;else if("function"==typeof r?r=a[t]=n?[i,r]:[r,i]:n?r.unshift(i):r.push(i),(s=d(e))>0&&r.length>s&&!r.warned){r.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+r.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=r.length,o=l,console&&console.warn&&console.warn(o)}return e}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(e,t,i){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:i},s=u.bind(n);return s.listener=i,n.wrapFn=s,s}function f(e,t,i){var n=e._events;if(void 0===n)return[];var s=n[t];return void 0===s?[]:"function"==typeof s?i?[s.listener||s]:[s]:i?function(e){for(var t=Array(e.length),i=0;i<t.length;++i)t[i]=e[i].listener||e[i];return t}(s):g(s,s.length)}function m(e){var t=this._events;if(void 0!==t){var i=t[e];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function g(e,t){for(var i=Array(t),n=0;n<t;++n)i[n]=e[n];return i}function v(e,t,i,n){if("function"==typeof e.on)n.once?e.once(t,i):e.on(t,i);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function s(a){n.once&&e.removeEventListener(t,s),i(a)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e||e<0||r(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");l=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||r(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return d(this)},o.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);var n="error"===e,s=this._events;if(void 0!==s)n=n&&void 0===s.error;else if(!n)return!1;if(n){var r;if(t.length>0&&(r=t[0]),r instanceof Error)throw r;var o=new Error("Unhandled error."+(r?" ("+r.message+")":""));throw o.context=r,o}var l=s[e];if(void 0===l)return!1;if("function"==typeof l)a(l,this,t);else{var c=l.length,d=g(l,c);for(i=0;i<c;++i)a(d[i],this,t)}return!0},o.prototype.addListener=function(e,t){return h(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return h(this,e,t,!0)},o.prototype.once=function(e,t){return c(t),this.on(e,p(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,p(this,e,t)),this},o.prototype.removeListener=function(e,t){var i,n,s,a,r;if(c(t),void 0===(n=this._events))return this;if(void 0===(i=n[e]))return this;if(i===t||i.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,i.listener||t));else if("function"!=typeof i){for(s=-1,a=i.length-1;a>=0;a--)if(i[a]===t||i[a].listener===t){r=i[a].listener,s=a;break}if(s<0)return this;0===s?i.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(i,s),1===i.length&&(n[e]=i[0]),void 0!==n.removeListener&&this.emit("removeListener",e,r||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,i,n;if(void 0===(i=this._events))return this;if(void 0===i.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[e]),this;if(0===arguments.length){var s,a=Object.keys(i);for(n=0;n<a.length;++n)"removeListener"!==(s=a[n])&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=i[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},o.prototype.listeners=function(e){return f(this,e,!0)},o.prototype.rawListeners=function(e){return f(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},o.prototype.listenerCount=m,o.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},function(e,t,i){"use strict";var n=i(3).Buffer,s=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(n.isEncoding===s||!s(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=l,this.end=c,t=4;break;case"utf8":this.fillLast=o,t=4;break;case"base64":this.text=d,this.end=h,t=3;break;default:return this.write=u,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function r(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function o(e){var t=this.lastTotal-this.lastNeed,i=function(e,t){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return void 0===i?this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length)):i}function l(e,t){if((e.length-t)%2==0){var i=e.toString("utf16le",t);if(i){var n=i.charCodeAt(i.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],i.slice(0,-1)}return i}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function c(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var i=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,i)}return t}function d(e,t){var i=(e.length-t)%3;return 0==i?e.toString("base64",t):(this.lastNeed=3-i,this.lastTotal=3,1==i?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-i))}function h(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function u(e){return e.toString(this.encoding)}function p(e){return e&&e.length?this.write(e):""}t.StringDecoder=a,a.prototype.write=function(e){if(0===e.length)return"";var t,i;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";i=this.lastNeed,this.lastNeed=0}else i=0;return i<e.length?t?t+this.text(e,i):this.text(e,i):t||""},a.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},a.prototype.text=function(e,t){var i=function(e,t,i){var n=t.length-1;if(n<i)return 0;var s=r(t[n]);return s>=0?(s>0&&(e.lastNeed=s-1),s):--n<i||-2===s?0:(s=r(t[n]))>=0?(s>0&&(e.lastNeed=s-2),s):--n<i||-2===s?0:(s=r(t[n]))>=0?(s>0&&(2===s?s=0:e.lastNeed=s-3),s):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=i;var n=e.length-(i-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},a.prototype.fillLast=function(e){return this.lastNeed<=e.length?(e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),void(this.lastNeed-=e.length))}},function(e,t,i){(function(e){function i(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===i(e)},t.isBoolean=function(e){return"boolean"==typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return"number"==typeof e},t.isString=function(e){return"string"==typeof e},t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return"[object RegExp]"===i(e)},t.isObject=function(e){return"object"==typeof e&&null!==e},t.isDate=function(e){return"[object Date]"===i(e)},t.isError=function(e){return"[object Error]"===i(e)||e instanceof Error},t.isFunction=function(e){return"function"==typeof e},t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=e.isBuffer}).call(this,i(6).Buffer)},function(e,t,i){(function(t){e.exports=function(e,i){for(var n=Math.min(e.length,i.length),s=new t(n),a=0;a<n;++a)s[a]=e[a]^i[a];return s}}).call(this,i(6).Buffer)},function(e,t,i){"use strict";var n=i(11),s=i(9);function a(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}t.BlockHash=a,a.prototype.update=function(e,t){if(e=n.toArray(e,t),this.pending=this.pending?this.pending.concat(e):e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){var i=(e=this.pending).length%this._delta8;this.pending=e.slice(e.length-i,e.length),0===this.pending.length&&(this.pending=null),e=n.join32(e,0,e.length-i,this.endian);for(var s=0;s<e.length;s+=this._delta32)this._update(e,s,s+this._delta32)}return this},a.prototype.digest=function(e){return this.update(this._pad()),s(null===this.pending),this._digest(e)},a.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,i=t-(e+this.padLength)%t,n=Array(i+this.padLength);n[0]=128;for(var s=1;s<i;s++)n[s]=0;if(e<<=3,"big"===this.endian){for(var a=8;a<this.padLength;a++)n[s++]=0;n[s++]=0,n[s++]=0,n[s++]=0,n[s++]=0,n[s++]=e>>>24&255,n[s++]=e>>>16&255,n[s++]=e>>>8&255,n[s++]=255&e}else for(n[s++]=255&e,n[s++]=e>>>8&255,n[s++]=e>>>16&255,n[s++]=e>>>24&255,n[s++]=0,n[s++]=0,n[s++]=0,n[s++]=0,a=8;a<this.padLength;a++)n[s++]=0;return n}},function(e,t,i){"use strict";const n=i(2),s=i(59).Reporter,a=i(57).Buffer;function r(e,t){return s.call(this,t),a.isBuffer(e)?(this.base=e,this.offset=0,void(this.length=e.length)):void this.error("Input not Buffer")}function o(e,t){if(Array.isArray(e))this.length=0,this.value=e.map((function(e){return o.isEncoderBuffer(e)||(e=new o(e,t)),this.length+=e.length,e}),this);else if("number"==typeof e){if(e<0||e>255)return t.error("non-byte EncoderBuffer value");this.value=e,this.length=1}else if("string"==typeof e)this.value=e,this.length=a.byteLength(e);else{if(!a.isBuffer(e))return t.error("Unsupported type: "+typeof e);this.value=e,this.length=e.length}}n(r,s),t.DecoderBuffer=r,r.isDecoderBuffer=function(e){if(e instanceof r)return!0;return"object"==typeof e&&a.isBuffer(e.base)&&"DecoderBuffer"===e.constructor.name&&"number"==typeof e.offset&&"number"==typeof e.length&&"function"==typeof e.save&&"function"==typeof e.restore&&"function"==typeof e.isEmpty&&"function"==typeof e.readUInt8&&"function"==typeof e.skip&&"function"==typeof e.raw},r.prototype.save=function(){return{offset:this.offset,reporter:s.prototype.save.call(this)}},r.prototype.restore=function(e){const t=new r(this.base);return t.offset=e.offset,t.length=this.offset,this.offset=e.offset,s.prototype.restore.call(this,e.reporter),t},r.prototype.isEmpty=function(){return this.offset===this.length},r.prototype.readUInt8=function(e){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(e||"DecoderBuffer overrun")},r.prototype.skip=function(e,t){if(this.offset+e>this.length)return this.error(t||"DecoderBuffer overrun");const i=new r(this.base);return i._reporterState=this._reporterState,i.offset=this.offset,i.length=this.offset+e,this.offset+=e,i},r.prototype.raw=function(e){return this.base.slice(e?e.offset:this.offset,this.length)},t.EncoderBuffer=o,o.isEncoderBuffer=function(e){if(e instanceof o)return!0;return"object"==typeof e&&"EncoderBuffer"===e.constructor.name&&"number"==typeof e.length&&"function"==typeof e.join},o.prototype.join=function(e,t){return e||=a.alloc(this.length),t||=0,0===this.length||(Array.isArray(this.value)?this.value.forEach((function(i){i.join(e,t),t+=i.length})):("number"==typeof this.value?e[t]=this.value:"string"==typeof this.value?e.write(this.value,t):a.isBuffer(this.value)&&this.value.copy(e,t),t+=this.length)),e}},function(e,t,i){"use strict";i.d(t,"a",(function(){return d})),i.d(t,"b",(function(){return s})),i.d(t,"c",(function(){return c})),i.d(t,"d",(function(){return f})),i.d(t,"e",(function(){return p})),i.d(t,"f",(function(){return l})),i.d(t,"g",(function(){return o})),i.d(t,"h",(function(){return h})),i.d(t,"i",(function(){return r})),i.d(t,"j",(function(){return u}));const n=Object.prototype.toString;function s(e){switch(n.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return f(e,Error)}}function a(e,t){return"[object "+t+"]"===n.call(e)}function r(e){return a(e,"String")}function o(e){return null===e||"object"!=typeof e&&"function"!=typeof e}function l(e){return a(e,"Object")}function c(e){return"undefined"!=typeof Event&&f(e,Event)}function d(e){return"undefined"!=typeof Element&&f(e,Element)}function h(e){return a(e,"RegExp")}function u(e){return l(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function p(e){return"number"==typeof e&&e!=e}function f(e,t){try{return e instanceof t}catch(e){return!1}}},function(e,t,i){const n=i(1),s=i(4);e.exports=[{name:"Default",dir:function(e,t,i,n,s){var a=e.config.trnSp||1;a*=e.config.trnSpd||1;var r=t.round(3),o=i.round(3);if(a>=1)e.xDire=r,e.yDire=o,e.yDire>Math.PI/2?e.yDire=Math.PI/2:e.yDire<-Math.PI/2&&(e.yDire=-Math.PI/2);else{var l=2*Math.PI,c=.01*a*s,d=(e.xDire-r+l)%l,h=Math.min(Math.abs(d-l),d,c),u=d-Math.PI>=0?1:-1;e.xDire+=u*h+l,e.xDire%=l,e.yDire<o?(e.yDire+=c,e.yDire>o&&(e.yDire=o)):e.yDire>o&&(e.yDire-=c,e.yDire<o&&(e.yDire=o))}},mov:function(e,t,i,s,a,r,o){var l=e.xDire;1!=e.config.camType||e.config.camRot||(l=-n.getDir(e.config.camOffX,e.config.camOffZ,0,0),l%=Math.PI),s!=Math.PI&&0!=s&&s!=Math.PI/2&&s!=-Math.PI/2&&(t*=o.config&&!o.mode.realMov?o.config.strafeSpd:1),void 0!==s&&(e.velocity.x+=t*Math.cos(s-l),e.velocity.z+=t*Math.sin(s-l),e.noclip&&(e.velocity.y+=t*(e.yDire*(s>0?-1:1))))},vel:function(e,t,i,a){if(a.config.fixMov&&!e.noclip){if(e.velocity.x){var r=e.velocity.x*Math.pow(t,i);e.x+=(r-e.velocity.x)/Math.log(t)*e.config.speedX,e.velocity.x=r,e.velocity.x=n.cropVal(e.velocity.x,s.decelMin)}if(e.velocity.y){var o=.9993;r=e.velocity.y*Math.pow(o,i);e.y+=(r-e.velocity.y)/Math.log(o)*e.config.speedY,e.velocity.y=r}if(e.velocity.z){r=e.velocity.z*Math.pow(t,i);e.z+=(r-e.velocity.z)/Math.log(t)*e.config.speedZ,e.velocity.z=r,e.velocity.z=n.cropVal(e.velocity.z,s.decelMin)}}else e.velocity.x&&(e.x+=e.velocity.x*e.config.speedX*i,e.velocity.x*=Math.pow(t,i),e.velocity.x=n.cropVal(e.velocity.x,s.decelMin)),e.velocity.y&&(e.y+=e.velocity.y*e.config.speedY*i,e.noclip?e.velocity.y*=Math.pow(t,i):e.velocity.y>0?e.velocity.y-=32e-6*i:e.velocity.y<=-.3&&(e.velocity.y=-.3)),e.velocity.z&&(e.z+=e.velocity.z*e.config.speedZ*i,e.velocity.z*=Math.pow(t,i),e.velocity.z=n.cropVal(e.velocity.z,s.decelMin))}},{name:"Follow Mouse",mov:function(e,t){var i=-e.xDire-Math.PI/2;e.velocity.x+=t*Math.cos(i),e.velocity.z+=t*Math.sin(i)}},{name:"Move Right",mov:function(e){e.velocity.x=.01,e.velocity.z=0}},{name:"Fly",mov:function(e,t){var i=e.xDire+Math.PI,n=e.yDire;e.velocity.x+=t*Math.sin(i)*Math.cos(n),e.velocity.z+=t*Math.cos(i)*Math.cos(n),e.velocity.y+=t*Math.sin(n)}},{name:"Dir Only",mov:function(e,t,i,n){void 0!==n&&(e.velocity.x+=t*Math.cos(n),e.velocity.z+=t*Math.sin(n))}},{name:"SRM",airDecel:1,noThrow:!0,noWallJ:!0,sendVals:["onGroundFrames","onWallFrames","wishDash","dashTimer","walldashTimer","tmpVel"],config:{friction:.006,baseSpeed:.07,groundAcceleration:.014,groundDeacceleration:.01,airAcceleration:85e-5,airDeacceleration:85e-5,sideStrafeAcceleration:.05,sideStrafeSpeed:.01,minRampSlideVelocity:.125,onWallMaxFrames:116,dash:{acceleration:1e3,cooldown:1e3,speed:.09999500000000001,height:.035},walldash:{acceleration:1e3,cooldown:1150,speed:.052500000000000005,height:.07},wallNormal:[{x:1,y:0,z:0},{x:-1,y:0,z:0},{x:0,y:0,z:1},{x:0,y:0,z:-1}],nDir:{0:"x",[Math.PI/2]:"z",[Math.PI]:"x",[1.5*Math.PI]:"z"}},mov:function(e,t,i,s,a,r,o,l){if(e.onGround?e.onGroundFrames+=l:e.onGroundFrames=0,e.onWall?e.onWallFrames+=l:e.onWallFrames=0,e.wishJump=!1,e.collidingRamp=null,e.onGround){var c=o.map.manager.getGridArrays(e.x,e.y,e.z);c&&(e.collidingRamp=c.find((function(t){if(t.ramp)return e.collides(t)}))||null)}e.onWallFrames<=this.config.onWallMaxFrames&&(e.velocity.x=e.tmpVel.x||e.velocity.x,e.velocity.z=e.tmpVel.z||e.velocity.z);var d=e.collidingRamp?n.GetRampAngle(e.collidingRamp):0,h=(200-d*this.config.minRampSlideVelocity*1.25*25|0)/1e3;if(e.collidingRamp&&e.tmpVel.y<0&&e.onGround&&(-.5*h/e.tmpVel.y<=.1||n.VectorLength({x:e.tmpVel.x,y:0,z:e.tmpVel.z})<h)?this.RampBounce(o,e,r,d):r[7]&&(!e.collidingRamp||e.collidingRamp&&n.VectorLength({x:e.tmpVel.x,y:0,z:e.tmpVel.z})<h)?0!==e.airTime||0!==e.velocity.y||e.wishJump||e.wishDash||this.AutoBhop(o,e):e.onGround&&e.collidingRamp&&n.VectorLength({x:e.tmpVel.x,y:0,z:e.tmpVel.z})>=h&&(e.wishDash&&e.walldashTimer<=0&&e.onWall&&this.Dash("walldash",o,e,l,s,!0),this.UpdateVelocity(e)),r[6]&&(e.wishDash=300),e.wishDash>0&&(e.wishDash-=l,e.wishDash<=0&&(e.wishDash=0)),e.dashTimer||=0,e.dashTimer>0&&(e.dashTimer-=l,e.dashTimer<=0&&(e.dashTimer=0)),e.walldashTimer||=0,e.walldashTimer>0&&(e.walldashTimer-=l,e.walldashTimer<=0&&(e.walldashTimer=0)),e.dashTimer<=0&&e.wishDash&&e.onGround?this.Dash("dash",o,e,l,s):e.walldashTimer<=0&&e.wishDash&&!e.onGround&&e.onWall&&this.Dash("walldash",o,e,l,s),e.justJumped)return e.justJumped=!1;this.cmd={forwardmove:0,rightmove:0},this.SetMovementDir(r),this.UpdateVelocity(e);var u=void 0===s||0===this.cmd.rightmove&&0===this.cmd.forwardmove?{x:0,y:0,z:0}:n.TransformDirection({y:0,x:this.cmd.rightmove,z:this.cmd.forwardmove},n.GetMatrixElements(e.xDire)),p=e.onGroundFrames<=33?0:1;if(e.onGround){if(this.ApplyFriction(p,e,l),0===p)return;this.GroundMove(u,e,l)}else this.AirMove(u,e,l);this.wishJump=!1,this.UpdateVelocity(e)},Dash:function(e,t,i,s,a,r=!1){var o=!1,l=!1;"walldash"==e&&(o=n.VectorReflect({x:i.tmpVel.x,y:0,z:i.tmpVel.z},this.config.wallNormal[i.onWall-1],!0),l=Math.abs(i.tmpVel.x)<=.0075&&Math.abs(i.tmpVel.z)<=.0075&&void 0===a,i.tmpVel.x=o.x*(r?.7:1),i.tmpVel.z=o.z*(r?.7:1)),i.wishDash=0,i[e+"Timer"]=this.config[e].cooldown;var c="dash"==e?void 0===a||0===this.cmd.rightmove&&0===this.cmd.forwardmove?{x:-Math.sin(i.xDire),y:0,z:-Math.cos(i.xDire)}:{x:Math.cos(a-i.xDire),y:0,z:Math.sin(a-i.xDire)}:l?this.config.wallNormal[i.onWall-1]:{x:i.tmpVel.x,y:0,z:i.tmpVel.z};n.VectorNormalize(c);var d=Math.max(this.config[e].speed+s/("dash"==e?1500:25e3),n.VectorLength({x:i.tmpVel.x,y:0,z:i.tmpVel.z}));(i.collidingRamp||r)&&this.AutoBhop(t,i),i.velocity.x=0,i.velocity.y=r?this.config[e].height+Math.abs(i.tmpVel[this.config.nDir[i.collidingRamp.dir]])*(n.GetRampAngle(i)/45)*.8:this.config[e].height,i.velocity.z=0,this.UpdateVelocity(i),this.Accelerate(c,d,this.config[e].acceleration,i,s)},UpdateVelocity:function(e){e.tmpVel.x=e.velocity.x,e.tmpVel.y=e.velocity.y,e.tmpVel.z=e.velocity.z},SetMovementDir:function(e){this.cmd.forwardmove=e[4]>=0&&e[4]<=2?-1:e[4]>=4&&e[4]<=6?1:0,this.cmd.rightmove=e[4]>=2&&e[4]<=4?1:e[4]>=6||0===e[4]?-1:0},ApplyFriction:function(e,t,i){var s=n.VectorLength({x:t.tmpVel.x,y:0,z:t.tmpVel.z}),a=0;t.onGround&&(a=(s<this.config.groundDeacceleration?this.config.groundDeacceleration:s)*this.config.friction*i*e);var r=s-a;r<0&&(r=0),s>0&&(r/=s),t.velocity.x*=r,t.velocity.z*=r},Accelerate:function(e,t,i,s,a){var r=(t*=1-s.crouchVal/2)-n.VectorDot(s.tmpVel,e),o=i*a*t;s.isYou&&this.SetAccelerationValues(s,{x:this.cmd.rightmove,y:0,z:this.cmd.forwardmove},s.tmpVel,e,t,i,a),r>0&&(o>r&&(o=r),s.velocity.x+=o*e.x,s.velocity.z+=o*e.z)},GroundMove:function(e,t,i){n.VectorNormalize(e);var s=n.VectorLength(e);s*=this.config.baseSpeed+i/1e3,this.Accelerate(e,s,this.config.groundAcceleration,t,i)},AirMove:function(e,t,i){var s=n.VectorLength(e);s*=this.config.baseSpeed;var a=n.VectorDot(t.tmpVel,e)<0?this.config.airDeacceleration:this.config.airAcceleration;0===this.cmd.forwardmove&&0!==this.cmd.rightmove&&(s>this.config.sideStrafeSpeed&&(s=this.config.sideStrafeSpeed),a=this.config.sideStrafeAcceleration),this.Accelerate(e,s,a,t,i)},RampBounce:function(e,t,i,n){var s=t.tmpVel.y*Math.min(1,n/45)*.75;switch(i[7]&&this.AutoBhop(e,t),t.collidingRamp.dir){case 0:t.velocity.x+=s;break;case Math.PI/2:t.velocity.z+=s;break;case Math.PI:t.velocity.x-=s;break;case 1.5*Math.PI:t.velocity.z-=s}this.UpdateVelocity(t)},AutoBhop:function(e,t){e.players.jump(t),t.wishJump=!0,t.justJumped=!0},SetAccelerationValues:function(e,t,i,s,a,r,o){if(e.airTime>0&&(0!==this.cmd.forwardmove||0!==this.cmd.rightmove)){s.y=0,t.y=0,i.y=0;var l=i.y,c=s.y,d=n.VectorNorm(t),h=n.VectorNorm(i),u=n.VectorNorm(s),p=Math.acos(n.VectorDot(t,s)/(d*u))*n.VectorAngleSign(s,t),f=n.VectorAngleSign(s,i),m=2*Math.PI;this.angle_optimal=(a*(1-r*o)-l*c)/(h*u),this.angle_optimal=Math.acos(this.angle_optimal),this.angle_optimal=f*this.angle_optimal-p,this.angle_minimum=(a-l*c)/(2-u*u)*u/h,this.angle_minimum=Math.acos(this.angle_minimum<1?this.angle_minimum:1),this.angle_minimum=f*this.angle_minimum-p,this.angle_maximum=-.5*r*o*a*u/h,this.angle_maximum=Math.acos(this.angle_maximum),this.angle_maximum=f*this.angle_maximum-p,this.angle_current=n.VectorDot(i,t)/(h*d),this.angle_current=Math.acos(this.angle_current),this.angle_current=n.VectorAngleSign(t,i)*this.angle_current,this.angle_current+=Math.trunc((this.angle_minimum-this.angle_current)/m)*m,this.angle_current+=Math.trunc((this.angle_maximum-this.angle_current)/m)*m,e.overlayInfo={c:this.angle_current,o:this.angle_optimal,mi:this.angle_minimum,ma:this.angle_maximum}}else e.overlayInfo=null}},{name:"Vehicle",prefix:"vh",sendVals:["forwardV","reverseV","angVel"],vals:[{name:"Drag",varN:"dr",max:.999,min:.001,step:.001,decs:3,cat:1,def:.97},{name:"Angular Drag",varN:"aDr",max:.999,min:.001,step:.001,decs:3,cat:1,def:.94},{name:"Turn Lean",varN:"tL",max:100,min:-100,step:.1,decs:1,cat:1,def:-2.7},{name:"Turn Threshold",varN:"trsh",max:.01,min:0,step:1e-4,decs:4,cat:1,def:.0025},{name:"Turn Conv",varN:"trsv",max:1,min:0,step:.01,decs:2,cat:1,def:0},{name:"Max Power",varN:"mP",max:1,min:0,step:.001,decs:3,cat:1,def:.12},{name:"Power Force",varN:"pF",max:.1,min:0,step:1e-4,decs:4,cat:1,def:.0012},{name:"Max Reverse",varN:"mR",max:1,min:0,step:1e-4,decs:4,cat:1,def:.0375},{name:"Reverse Force",varN:"rF",max:.1,min:0,step:1e-4,decs:4,cat:1,def:5e-4}],dir:function(e,t,i,n,s,a,r){if(!e.onGround)return;var o=e.config,l=s/(1e3/60),c=0==r[4]||1==r[4]||2==r[4],d=4==r[4]||5==r[4]||6==r[4];c?e.forwardV+=o.vhpF*l:e.forwardV-=o.vhpF*l,d?e.reverseV+=o.vhrF*l:e.reverseV-=o.vhrF*l,e.forwardV=Math.max(0,Math.min(o.vhmP,e.forwardV)),e.reverseV=Math.max(0,Math.min(o.vhmR,e.reverseV));var h=e.config.trnSp||1;e.config.vhtrsv&&(h*=10*e.config.vhtrsv*(e.forwardV+e.reverseV)),h*=e.config.trnSpd||1,h*=.004;const u=d?-1:1;(e.forwardV>=e.config.vhtrsh||d)&&(2!=r[4]&&3!=r[4]&&4!=r[4]||(e.angVel-=u*l*h),0!=r[4]&&6!=r[4]&&7!=r[4]||(e.angVel+=u*l*h))},mov:function(e,t,i,n,s,a,r,o){var l=e.config,c=o/(1e3/60);e.meshRef&&(e.config.mdlDr%180!=0?(e.meshRef.eulerOrder="YXZ",e.meshRef.rotation.x=e.angVel*l.vhtL):(e.meshRef.eulerOrder="ZYX",e.meshRef.rotation.z=e.angVel*l.vhtL));var d=120*t;e.velocity.x-=Math.sin(e.xDire)*(d*(e.forwardV-e.reverseV)),e.velocity.z-=Math.cos(e.xDire)*(d*(e.forwardV-e.reverseV));var h=e.velocity.x*Math.pow(l.vhdr,c);e.x+=(h-e.velocity.x)/Math.log(l.vhdr)*e.config.speedX,e.velocity.x=h;var u=e.velocity.z*Math.pow(l.vhdr,c);e.z+=(u-e.velocity.z)/Math.log(l.vhdr)*e.config.speedZ,e.velocity.z=u;var p=e.angVel*Math.pow(l.vhaDr,c);e.xDire+=(p-e.angVel)/Math.log(l.vhaDr),e.xDire%=2*Math.PI,e.angVel=p},vel:function(e,t,i){if(e.velocity.y){var n=.9993,s=e.velocity.y*Math.pow(n,i);e.y+=(s-e.velocity.y)/Math.log(n)*e.config.speedY,e.velocity.y=s}}},{name:"MMORPG",dir:function(e,t,i,n,s){if(null!=n){var a=2*Math.PI,r=t-n-Math.PI/2,o=(e.xDire-r+a)%a,l=Math.min(Math.abs(o-a),o,.012*s),c=o-Math.PI>=0?1:-1;e.xDire+=c*l+a,e.xDire%=a}},mov:function(e,t,i,n,s){var a=(s-n-Math.PI/2)%(2*Math.PI);a=-a-Math.PI/2,void 0!==n&&(e.velocity.x+=t*Math.cos(a),e.velocity.z+=t*Math.sin(a))}}]},function(e,t){function i(e,t){return!!e&&!!e.isDev||(!this.customOnly||!!t&&!!t.isCustom&&!t.isComp&&(!t.isOfficial||!t.isOfficial.restrictSecs))&&(!this.noComp||!t||!t.isComp)&&(!!t&&!!t.isCustom&&(!t.isOfficial||!t.isOfficial.restrictSecs)||(!this.premiumOnly||!e||e.premiumT>0)&&(!this.minRec||e&&e.level>=(this.minRec||0)))}e.exports=[{name:"Sniper Rifle",src:"weapon_1",icon:"icon_1",assetIcon:"",sound:"weapon_1",refDist:25,rollOff:1,equipment:!1,secondary:!1,noSpread:!1,projectile:{},pj_asset:"",pj_disable:!0,pj_mat:"BASIC",pj_color:16777179,pj_dmg:100,pj_spd:2.5,pj_lookDir:!0,pj_grav:1e-4,pj_scale:1.4,pj_length:10,pj_range:7e3,pj_snd:0,akimbo:!1,noAim:!1,animWhileAim:!0,trail:!0,flap:{src:"flap_0",rot:2.1,scl:1,zOff:.43,xOff:.17,yOff:.53},physRang:0,physPow:0,noAo:!0,nAuto:!0,type:0,scope:!0,swapTime:300,aimSpd:120,chrgTime:0,ovrChrg:!1,spdMlt:.95,ammo:3,dmg:100,hsMlt:1.5,pierce:.2,reload:1900,range:1e3,dropStart:230,dmgDrop:30,scale:.00115608717587935,leftHoldY:-.65,rightHoldY:-.68,leftHoldZ:2.1,rightHoldZ:.75,holdW:1,xOff:.8,yOff:-.65,zOff:-1.8,xOrg:0,yOrg:-.55,zOrg:-.8,cLean:.2,cRot:.2,cDrop:.1,inspectR:.2,inspectM:.1,muzOff:8,muzMlt:1.6,rate:1e3,spread:260,zoom:2.7,leanMlt:1.5,recoil:.009,recoilR:.05,recover:.993,recoverY:.997,recoverF:.975,recoilYM:.55,recoilZ:1.5,recoilAnim:{time:280,aimTime:500,recoilTweenY:.24},jumpYM:.15,rumble:.9,rumbleDur:500,icnPad:9,charm:!0,charmMXOff:-.37,charmMYOff:-.4,charmMZOff:-.91,charmMScl:1,charmXOff:0,charmYOff:0,charmZOff:0,charmScl:1,magReserve:5,mysteryBoxR:1,canUpgrade:!0},{name:"Assault Rifle",src:"weapon_2",icon:"icon_2",assetIcon:"",sound:"weapon_2",refDist:25,rollOff:1,projectile:{},pj_asset:"",pj_disable:!0,pj_mat:"BASIC",pj_color:16777179,pj_dmg:23,pj_spd:2.6,pj_lookDir:!0,pj_grav:11e-5,pj_scale:1.4,pj_length:10,pj_range:3e3,pj_snd:0,equipment:!1,secondary:!1,noSpread:!1,akimbo:!1,noAim:!1,noAo:!0,nAuto:!1,physRang:0,physPow:0,swapWiggle:.3,attach:0,attachYOff:-.07,attachZOff:-.8,zRot:1,type:0,swapTime:300,aimSpd:130,chrgTime:0,ovrChrg:!1,spdMlt:.95,ammo:28,rate:120,reload:1500,dmg:23,hsMlt:1.5,pierce:1,range:700,dmgDrop:5,scale:.00095745145728643,leftHoldY:-.41,rightHoldY:-.6,leftHoldZ:.5,rightHoldZ:-1.2,holdW:.8,xOff:.7,yOff:-.87,zOff:-3.33,rotOff:-.08,rotOffA:-.035,aimOffY:.042,yRot:.0018,xOrg:0,yOrg:-.59,zOrg:-2.14,cLean:.2,cRot:.1,cDrop:.1,inspectR:.1,inspectM:1.5,caseZOff:-1.7,caseYOff:-.2,muzOff:5.1,muzOffY:-.05,muzMlt:1.4,spread:100,minSpread:5,zoom:1.6,leanMlt:1.5,recoil:.003,recoilR:.05,recover:.978,recoverY:.995,recoverF:.975,jYMlt:.9,recoilData:{pow:.1,tim:150,dirs:[.05,-.1,.1,.05,.3,.1,-.05]},recoilYM:1.1,recoilZ:4.3,recoilZM:-.04,aimRecMlt:.65,recoilAnim:{time:160,recoilTweenY:.065,recoilTweenZ:.1},jumpYM:.3,rumble:.5,icnPad:5,charm:!0,charmMXOff:-.37,charmMYOff:-.3,charmMZOff:1.19,charmMScl:1,charmXOff:0,charmYOff:0,charmZOff:0,charmScl:1,magReserve:4,mysteryBoxR:2,canUpgrade:!0},{name:"Pistol",src:"weapon_3",icon:"icon_3",assetIcon:"",sound:"weapon_3",refDist:25,rollOff:1,secondary:!0,equipment:!1,noSpread:!1,akimbo:!1,noAim:!1,noAo:!0,transp:!0,nAuto:!0,projectile:{},pj_asset:"",pj_disable:!0,pj_mat:"BASIC",pj_color:16777179,pj_dmg:12,pj_spd:2.3,pj_lookDir:!0,pj_grav:1e-4,pj_scale:1.4,pj_length:10,pj_range:1600,pj_snd:0,physRang:0,physPow:0,kill:["",75],swapWiggle:.3,type:1,shine:10,swapTime:260,aimSpd:110,chrgTime:0,ovrChrg:!1,spdMlt:1.05,ammo:10,reload:700,dmg:20,hsMlt:1.5,range:700,dmgDrop:10,scale:.0003158947055276376,leftHoldY:-1.1,rightHoldY:-.62,leftHoldZ:-.3,rightHoldZ:-.32,rightHoldX:.13,holdW:1.3,xOff:1.2,yOff:-.6,zOff:-3.7,xOrg:0,yRot:-.005,yOrg:-.23,zOrg:-3.9,jYMlt:.1,cLean:.3,cRot:.3,caseZOff:.2,caseYOff:0,inspectR:.3,inspectM:.8,muzOff:1.5,muzOffY:0,muzMlt:.95,rate:150,spread:60,zoom:1.4,leanMlt:1,recoil:.006,recoilR:.02,recover:.98,recoverY:.99,recoverF:.98,recoilYM:.2,aimRecMlt:.4,recoilZ:3.8,recoilZM:-.4,recoilAnim:{time:200,recoilTweenY:.28,recoilTweenZ:.1},rumble:.4,icnPad:-15,expScale:.8,charm:!0,charmMXOff:-.37,charmMYOff:-.2,charmMZOff:.91,charmMScl:1,charmXOff:0,charmYOff:0,charmZOff:0,charmScl:1,magReserve:5,mysteryBoxR:0,canUpgrade:!0},{name:"Submachine Gun",src:"weapon_4",icon:"icon_4",assetIcon:"",sound:"weapon_4",refDist:25,rollOff:1,secondary:!1,equipment:!1,noSpread:!1,nAuto:!1,noAim:!1,akimbo:!1,projectile:{},pj_asset:"",pj_disable:!0,pj_mat:"BASIC",pj_color:16777179,pj_dmg:18,pj_spd:2.4,pj_lookDir:!0,pj_grav:11e-5,pj_scale:1.4,pj_length:10,pj_range:2700,pj_snd:0,physRang:0,physPow:0,swapWiggle:.5,attach:0,attachYOff:-.09,attachZOff:-1.1,zRot:.75,noAo:!0,type:0,shine:50,swapTime:300,aimSpd:110,chrgTime:0,ovrChrg:!1,spdMlt:1.04,ammo:30,reload:1e3,dmg:18,hsMlt:1.5,pierce:1,range:700,dmgDrop:12,scale:.000574897587939697,leftHoldY:-.4,leftHoldX:-.1,leftHoldZ:1.1,rightHoldZ:-.95,rightHoldY:-.5,holdW:.85,xOff:.85,yOff:-.86,zOff:-3,xOrg:0,yOrg:-.59,zOrg:-2.5,cRot:.18,cLean:.16,inspectR:.2,inspectM:1.2,caseYOff:-.15,caseZOff:-.4,muzOff:2.15,muzOffY:.1,rate:95,spread:70,minSpread:5,zoom:1.65,jYMlt:.8,leanMlt:1,recoil:.0034,recoilY:.77,recoilYM:.3,recoilR:.065,recover:.975,recoverY:.996,recoverF:.975,recoilZ:4.2,recoilZM:-.1,aimRecMlt:.6,recoilAnim:{time:190,recoilTweenYM:.05,recoilTweenY:.06,recoilTweenZ:.14},expScale:.8,rumble:.4,icnPad:0,charm:!0,charmMXOff:-.35,charmMYOff:.17,charmMZOff:1.53,charmMScl:1,charmXOff:0,charmYOff:0,charmZOff:0,charmScl:1,magReserve:4,mysteryBoxR:2,canUpgrade:!0},{name:"Revolver",src:"weapon_5",icon:"icon_5",assetIcon:"",sound:"weapon_5",refDist:25,rollOff:1,secondary:!1,equipment:!1,noSpread:!1,akimbo:!1,noAim:!1,nAuto:!0,noAo:!0,projectile:{},pj_asset:"",pj_disable:!0,pj_mat:"BASIC",pj_color:16777179,pj_dmg:66,pj_spd:2.3,pj_lookDir:!0,pj_grav:1e-4,pj_scale:1.4,pj_length:10,pj_range:2600,pj_snd:0,physRang:0,physPow:0,nCase:!0,transp:!0,kill:["",50],type:0,swapTime:200,swapWiggle:.4,aimSpd:110,chrgTime:0,ovrChrg:!1,spdMlt:1.04,ammo:6,reload:900,dmg:66,hsMlt:1.5,pierce:.85,dmgDrop:10,scale:.000515531266331653,hDstOff:1.6,leftHoldY:-1.3,rightHoldY:-.8,leftHoldZ:-.6,rightHoldZ:-.72,rightHoldX:.1,holdW:1.1,rotOff:-.05,xOff:.7,yOff:-.5,zOff:-3.5,xOrg:0,yOrg:-.31,zOrg:-3.5,jYMlt:.4,cLean:.2,cRot:.1,cDrop:.1,inspectR:.1,inspectM:.3,muzOff:2.75,muzOffY:.2,muzMlt:.95,range:700,rate:450,spread:100,zoom:1.45,leanMlt:1.6,recoil:.013,recoilR:.082,recover:.982,recoverY:.992,recoverF:.98,recoilYM:.5,aimRecMlt:.1,recoilZM:.01,recoilZ:4,recoilAnim:{time:350,recoilTweenY:.39,recoilTweenYM:.25},expScale:.9,rumble:.7,icnPad:-10,charm:!0,charmMXOff:-.27,charmMYOff:-.58,charmMZOff:.56,charmMScl:1,charmXOff:0,charmYOff:0,charmZOff:0,charmScl:1,magReserve:4,mysteryBoxR:1,canUpgrade:!0},{name:"Shotgun",src:"weapon_6",icon:"icon_6",assetIcon:"",sound:"weapon_6",refDist:25,rollOff:1,secondary:!1,equipment:!1,noSpread:!1,noAim:!1,akimbo:!1,altSkin:{name:"Nova Pump",mid:0,blocked:!0,noSale:!0,midT:38,scl:.9,mScl:1,zOff:.28,yOff:-.5,seas:2,weapon:6,rarity:0,charmMXOff:-.37,charmMYOff:-.2,charmMZOff:1.18,charmMScl:1,charmXOff:0,charmYOff:0,charmZOff:0,charmScl:1},noAo:!0,nAuto:!0,nCase:!0,nRing:!0,swapWiggle:.4,shine:35,type:0,physRang:35,physPow:.09,swapTime:300,aimSpd:120,chrgTime:0,ovrChrg:!1,spdMlt:1,ammo:2,reload:1100,dmg:50,hsMlt:1.25,dmgDrop:50,scale:.00082934281407035,rightHoldX:.1,leftHoldY:-.6,rightHoldY:-.6,leftHoldZ:.4,rightHoldZ:-1.3,holdW:1,xOff:.95,yOff:-.6,zOff:-3.8,xOrg:0,yOrg:-.3,zOrg:-2.8,cLean:.2,cRot:.2,cDrop:.1,jYMlt:.2,inspectR:.1,muzOff:6,muzMlt:1.8,inspectM:1.9,range:160,rate:450,innac:110,spread:180,shots:5,cSpread:[[.03,.02,-.27,.02,.03,-.31,.3,-.01,.01,.28],[.01,.02,-.17,-.22,-.3,.31,.32,.28,.3,-.2]],minSpread:20,zoom:1.25,leanMlt:1.6,recoil:.02,recoilR:.015,recover:.99,recoverF:.97,recoilZ:2.1,recoilZM:.2,aimRecMlt:.67,recoilYM:.65,recoilAnim:{time:340,recoilTweenY:.22},jumpYM:.5,rumble:.8,icnPad:10,expScale:.85,charm:!0,charmMXOff:-.37,charmMYOff:-.39,charmMZOff:1.2,charmMScl:1,charmXOff:0,charmYOff:0,charmZOff:0,charmScl:1,magReserve:12,mysteryBoxR:3,canUpgrade:!0},{name:"Machine Gun",src:"weapon_7",icon:"icon_7",assetIcon:"",sound:"weapon_7",refDist:25,rollOff:1,secondary:!1,equipment:!1,akimbo:!1,noAim:!1,nAuto:!1,noSpread:!1,projectile:{},pj_asset:"",pj_disable:!0,pj_mat:"BASIC",pj_color:16777179,pj_dmg:18,pj_spd:2.3,pj_lookDir:!0,pj_grav:1e-4,pj_scale:1.4,pj_length:10,pj_range:3e3,pj_snd:0,physRang:0,physPow:0,type:0,attach:0,swapWiggle:.3,attachYOff:-.085,attachZOff:-.74,zRot:.75,noAo:!0,swapTime:600,aimSpd:200,chrgTime:0,ovrChrg:!1,spdMlt:.79,jumMlt:.85,ammo:60,reload:3300,dmg:18,hsMlt:1.5,pierce:1,range:700,dmgDrop:10,jYMlt:.8,scale:.0008856008924623108,leftHoldY:-.85,leftHoldX:.4,rightHoldX:-.1,rightHoldY:-.79,leftHoldZ:1.1,rightHoldZ:-.2,holdW:1.1,yRot:-.01,xOff:.95,yOff:-.75,zOff:-2.8,xOrg:0,yOrg:-.6,zOrg:-1.8,cLean:.1,cRot:.1,cDrop:.1,inspectR:.2,inspectM:.6,caseInd:2,caseZOff:-.5,caseYOff:-.1,muzOff:5.5,muzOffY:-.14,muzMlt:1.7,rate:130,spread:300,minSpread:10,zoom:1.3,leanMlt:1.6,recoil:.0032,recoilR:.04,recover:.98,recoverY:.9975,recoverF:.975,recoilZ:3.8,recoilYM:.25,recoilZ:3,recoilZM:-.1,aimRecMlt:.5,recoilAnim:{time:200,recoilTweenY:.045,recoilTweenZ:.12},jumpYM:.5,expScale:.85,rumble:.65,icnPad:10,charm:!0,charmMXOff:-.37,charmMYOff:-.16,charmMZOff:.91,charmMScl:1,charmXOff:0,charmYOff:0,charmZOff:0,charmScl:1,magReserve:2,mysteryBoxR:3,canUpgrade:!0},{name:"Semi Auto",src:"weapon_8",icon:"icon_8",assetIcon:"",sound:"weapon_8",refDist:25,rollOff:1,noSpread:!1,secondary:!1,equipment:!1,noAim:!1,akimbo:!1,projectile:{},pj_asset:"",pj_disable:!0,pj_mat:"BASIC",pj_color:16777179,pj_dmg:33,pj_spd:2.5,pj_lookDir:!0,pj_grav:1e-4,pj_scale:1.4,pj_length:10,pj_range:4e3,pj_snd:0,physRang:0,physPow:0,altSkin:{name:"Nova Semi",blocked:!0,noSale:!0,mid:0,midT:0,seas:3,weapon:8,rarity:0,charmMXOff:-.29999999999999993,charmMYOff:-.35000000000000014,charmMZOff:1.13,charmMScl:1,charmXOff:0,charmYOff:0,charmZOff:0,charmScl:1},attach:0,attachYOff:-.08,attachZOff:-1.55,nAuto:!0,zRot:.7,type:0,noAo:!0,swapWiggle:.4,swapTime:300,aimSpd:120,chrgTime:0,ovrChrg:!1,spdMlt:1,ammo:8,reload:1500,dmg:35,hsMlt:1.4571,lsMlt:.5429,pierce:.2,range:1e3,dmgDrop:0,scale:.00093686221105528,leftHoldY:-.5,rightHoldY:-.45,leftHoldZ:.4,rightHoldZ:-1.85,jYMlt:.6,xOff:.8,yOff:-.6,zOff:-3.5,xOrg:0,yOrg:-.395,yRot:-.005,zOrg:-3.4,rotOff:-.02,cLean:.2,cRot:.2,cDrop:.1,inspectR:.2,inspectM:1.4,muzOff:4,muzOffY:-.05,muzMlt:1.1,rate:150,spread:250,caseZOff:-1.3,zoom:2.1,recoil:.01,recoilR:.08,recover:.98,recoilY:.36,recoverY:.994,recoverF:.975,recoilYM:.6,recoilZ:2,recoilZM:.2,aimRecMlt:.8,recoilAnim:{time:250,recoilTweenY:.11,recoilTweenZ:.15},jumpYM:.5,rumble:.75,icnPad:10,charm:!0,charmMXOff:-.2699999999999999,charmMYOff:-.35000000000000014,charmMZOff:1.15,charmMScl:1,charmXOff:0,charmYOff:0,charmZOff:0,charmScl:1,magReserve:4,mysteryBoxR:2,canUpgrade:!0},{name:"Rocket Launcher",src:"weapon_9",icon:"icon_9",assetIcon:"",sound:"weapon_9",refDist:25,rollOff:1,noSpread:!1,noAim:!1,secondary:!1,equipment:!1,akimbo:!1,nInsp:!0,kill:["",75],nSkill:!0,nAuto:!0,nCase:!0,nRing:!0,noAo:!0,projectile:{},pj_asset:"",pj_mat:"BASIC",pj_color:16777179,pj_explode:35,pj_dmg:50,pj_eDmg:35,pj_spd:.75,pj_grav:8e-5,pj_nImp:!0,pj_lookDir:!0,pj_scale:1.4,pj_length:10,pj_range:1500,type:0,swapTime:350,swapWiggle:.4,aimSpd:200,chrgTime:0,ovrChrg:!1,spdMlt:.9,physRang:46,physPow:.095,dmg:25,ammo:3,shots:0,reload:1500,hsMlt:1,lsMlt:1,scale:.00076263407035176,leftHoldX:-.1,leftHoldY:-.36,rightHoldY:-.3,leftHoldZ:1.2,rightHoldX:-.15,rightHoldZ:-.45,holdW:.9,jYMlt:.4,xOff:.95,yOff:-.56,zOff:-2.6,xOrg:0,yOrg:-.945,zOrg:-3,zRot:.9,cLean:.2,cRot:.2,cDrop:.1,muzOff:5,muzOffY:0,muzMlt:1.5,rate:320,spread:120,minSpread:15,zoom:1.5,leanMlt:1.4,landBob:.8,recoil:.008,recoilR:.012,recover:.99,recoverY:.998,recoverF:.975,recoilZ:4,recoilZM:-.5,aimRecMlt:.9,recoilAnim:{time:400,recoilTweenY:.25},jumpYM:.3,expScale:.7,rumble:1,rumbleDur:750,icnPad:10,charm:!0,charmMXOff:-.38999999999999996,charmMYOff:-.16000000000000003,charmMZOff:-.019999999999999532,charmMScl:1,charmXOff:0,charmYOff:0,charmZOff:0,charmScl:1,magReserve:4,mysteryBoxR:0,canUpgrade:!0},{name:"Akimbo Uzi",src:"weapon_10",icon:"icon_10",assetIcon:"",sound:"weapon_10",refDist:25,rollOff:1,secondary:!1,equipment:!1,nAuto:!1,noAo:!0,physRang:0,physPow:0,altSkin:{name:"Nova Uzi",mid:0,midT:0,blocked:!0,noSale:!0,weapon:10,rarity:0,seas:3},nInsp:!0,noAim:!0,akimbo:!0,type:0,swapTime:300,aimSpd:120,chrgTime:0,ovrChrg:!1,spdMlt:1.04,ammo:28,reload:1300,dmg:15,hsMlt:1,pierce:1,range:500,dmgDrop:13,scale:.9,rightHoldY:-.55,leftHoldZ:.2,leftHoldX:-.1,leftHoldY:-.55,rightHoldZ:.2,rightHoldX:-.1,holdW:1.3,xOff:1.5,yOff:-.95,zOff:-3.3,xOrg:0,yOrg:-.62,zOrg:-2.5,zLnM:.4,cLean:.1,cRot:.1,cDrop:.2,caseYOff:-.15,caseZOff:-.4,muzOff:3.6,rate:70,spread:0,noSpread:!1,movSpread:.01,minSpread:10,zoom:1.5,recoil:.0034,recoilR:.015,leanMlt:.6,recover:.978,recoverY:.996,recoverF:.975,recoilZ:5,recoilYM:.7,recoilAnim:{recoilTweenY:.01},expScale:.7,rumble:.4,icnPad:-4,charm:!0,charmMXOff:-.37,charmMYOff:-.2,charmMZOff:.91,charmMScl:1,charmXOff:0,charmYOff:0,charmZOff:0,charmScl:1,magReserve:4,mysteryBoxR:1,canUpgrade:!0},{name:"Desert Eagle",src:"weapon_11",icon:"icon_11",assetIcon:"",sound:"weapon_11",refDist:25,rollOff:1,noSpread:!1,akimbo:!1,secondary:!0,equipment:!1,noAim:!1,projectile:{},pj_asset:"",pj_disable:!0,pj_mat:"BASIC",pj_color:16777179,pj_dmg:50,pj_spd:2.3,pj_lookDir:!0,pj_grav:1e-4,pj_scale:1.4,pj_length:10,pj_range:1500,pj_snd:0,physRang:0,physPow:0,minRec:15,req:i,nAuto:!0,noAo:!0,transp:!0,kill:["",50],type:1,swapTime:200,aimSpd:110,chrgTime:0,ovrChrg:!1,spdMlt:1,ammo:7,reload:1e3,dmg:45,hsMlt:1.2,pierce:.85,dmgDrop:10,scale:.94,leftHoldY:-.9,rightHoldY:-.7,leftHoldZ:-.5,rightHoldZ:-.5,holdW:1.1,xOff:1,yOff:-.5,zOff:-4.1,xOrg:0,yOrg:-.195,zOrg:-3.8,cLean:.3,cRot:.3,inspectR:.35,inspectM:.9,muzOff:2,muzMlt:1.1,range:700,rate:450,spread:150,jYMlt:.5,zoom:1.4,leanMlt:1.6,recoil:.01,recoilR:.01,recover:.982,recoverY:.995,recoverF:.98,recoilYM:.62,aimRecMlt:.23,recoilZ:4.8,recoilZM:.2,recoilAnim:{time:240,recoilTweenY:.42},rumble:.8,icnPad:-10,expScale:1.55,charm:!0,charmMXOff:-.34,charmMYOff:-.2,charmMZOff:.88,charmMScl:1,charmXOff:0,charmYOff:0,charmZOff:0,charmScl:1,magReserve:5,mysteryBoxR:0,canUpgrade:!0},{name:"Alien Blaster",src:"weapon_12",icon:"icon_12",assetIcon:"",sound:"weapon_12",refDist:25,rollOff:1,akimbo:!1,altSkin:{name:"Nova Alien",mid:5,blocked:!0,noSale:!0,midT:0,seas:7,mScl:1.5,weapon:12,rarity:0,yOff:-.2,noSnd:!0,charmMXOff:-.51,charmMYOff:-.14,charmMZOff:-1.2500000000000013,charmMScl:1,charmXOff:0,charmYOff:0,charmZOff:0,charmScl:1},noSpread:!1,noAim:!1,noAo:!0,physRang:0,physPow:0,secondary:!0,equipment:!1,nRing:!0,nAuto:!0,transp:!0,nCase:!0,minRec:50,noComp:!0,req:i,kill:["",50],type:1,swapTime:200,aimSpd:120,chrgTime:0,ovrChrg:!1,spdMlt:1,ammo:4,reload:1500,dmg:45,hsMlt:1.25,pierce:.85,dmgDrop:10,scale:1.1,leftHoldY:-1,rightHoldY:-.65,leftHoldZ:-.2,rightHoldZ:-.2,holdW:1,xOff:1.3,yOff:-.83,zOff:-4.1,xOrg:0,yRot:-.01,yOrg:-.53,zOrg:-3.8,cLean:.2,cRot:.2,cDrop:0,inspectR:.1,inspectM:.8,muzOff:2.2,muzOffY:.1,muzID:3,muzMlt:1.1,jYMlt:.8,range:700,rate:170,spread:150,zoom:1.4,leanMlt:1.6,recoil:.006,recoilR:.01,recover:.98,recoverY:.99,recoverF:.98,recoilYM:.2,recoilZ:2.2,aimRecMlt:.3,recoilAnim:{time:200,recoilTweenY:.32},rumble:.4,icnPad:-8,expScale:1.85,charm:!0,charmMXOff:-.53,charmMYOff:-.12,charmMZOff:.67,charmMScl:1,charmXOff:0,charmYOff:0,charmZOff:0,charmScl:1,magReserve:6,mysteryBoxR:1,canUpgrade:!0},{name:"Combat Knife",icon:"icon_0",challSrc:"weapon_k",assetIcon:"",melee:!0,noSkins:!0,canThrow:!0,aimLean:.01,holdW:.9,swapWiggle:.3,sound:"melee",refDist:25,rollOff:1,hsMlt:1,lsMlt:1,insX:.1,inspAnim:{arZ:.3,arX:.6,arY:-2.2,apZ:-1.3,apX:-.1,apY:1,wpZ:-.19,wpY:-.4,wrY:-.2},anim:function(e,t,i,n){if(1==i){e.handAnimInd=-1*(e.handAnimInd||1);var s=!1;e.meleeAnim.anim&&(e.meleeAnim.anim.stop(),s=e.meleeAnim.armM>=2),e.resetMeleeAnim();var a=-1.2,r=.7,o=-.4;s?(a+=.1,e.meleeAnim.weaR=a,o+=.8,e.meleeAnim.armR=o,r+=.2,e.meleeAnim.weaM=r,e.meleeAnim.flipW=Math.PI):a-=.4,e.meleeAnim.anim=new t.Tween(e.meleeAnim).to({armR:o,lArm:1,armT:s?-.2:-.8,armY:-3,armM:s?-10:13,armE:-2,weaR:a,weaM:r},220*(s?1.3:1)).easing(t.Easing.Cubic.Out).onComplete((function(){e.meleeAnim.anim=new t.Tween(e.meleeAnim).to({armR:0,armT:0,armY:0,lArm:0,armM:0,armE:0,weaR:0,weaM:0,flipW:0},350).easing(t.Easing.Cubic.Out).start()})).start()}else if(2==i){e.handAnimInd=-1*(e.handAnimInd||1),e.meleeAnim.anim&&e.meleeAnim.anim.stop(),e.resetMeleeAnim();var l=e.handAnimInd?"lArm":"";l={};1==e.handAnimInd?l.lArm=-2.7:l.rArm=-2.7,e.meleeAnim.anim=new t.Tween(e.meleeAnim).to(l,10).easing(t.Easing.Linear.None).onComplete((function(){e.meleeAnim.anim=new t.Tween(e.meleeAnim).to({lArm:0,rArm:0},150).easing(t.Easing.Linear.None).delay(100).start()})).start()}else 3==i&&(e.meleeAnim.anim&&e.meleeAnim.anim.stop(),e.resetMeleeAnim(),e.meleeAnim.armR=-1.3,e.meleeAnim.armM=1.7,e.meleeAnim.armE=1.1,e.meleeAnim.armY=2.9,e.meleeAnim.armT=1,e.meleeAnim.armS=1.7,e.meleeAnim.weaR=-.6,e.meleeAnim.anim=new t.Tween(e.meleeAnim).to({armY:-9,armS:-.1,armE:-7.5,armM:-1.5,lArm:.5,weaR:-3},200-200*(n||1)+300).easing(t.Easing.Cubic.Out).onComplete((function(){e.meleeAnim.anim=new t.Tween(e.meleeAnim).to({armR:0,armT:0,armY:0,lArm:0,armM:0,armS:0,armE:0,weaR:0},350).easing(t.Easing.Cubic.Out).start()})).start())},type:2,swapTime:250,aimSpd:100,chrgTime:0,ovrChrg:!0,rate:250,dmg:50,dmgDrop:0,range:15,spdMlt:1.1,spread:100,leftHoldY:-.82,leftHoldX:1.5,rightHoldX:-1.5,rightHoldY:-.82,leftHoldZ:-.5,rightHoldZ:-.5,xOff:0,yOff:-.6,zOff:-3.6,xOrg:1e-4,yOrg:-.6,zOrg:-3.6,zRM:.35,zoom:1.2,leanMlt:.8,recoil:.006,recoilR:.01,recover:.98,recoverF:.98,rumble:.4,rumbleDur:150,icnPad:-10},{name:"Crossbow",src:"weapon_14",icon:"icon_14",assetIcon:"",sound:"weapon_14",refDist:25,rollOff:1,noSpread:!1,akimbo:!1,secondary:!1,equipment:!1,noAim:!1,nInsp:!0,nRing:!0,nAuto:!0,noAo:!0,physRang:0,physPow:0,nCase:!0,nMuz:!0,attach:0,attachYOff:-.1,attachZOff:.75,kill:["",75],type:0,projectile:{},pj_asset:"",pj_mat:"BASIC",pj_color:16777179,pj_spd:.68,pj_dontPred:!0,pj_lookDir:!0,pj_scale:.7,pj_dmg:200,pj_length:10,pj_range:1500,swapTime:200,aimSpd:120,chrgTime:1300,chrgMlt:.9,ovrChrg:!0,spdMlt:1,ammo:1,reload:900,dmg:100,hsMlt:1,lsMlt:1,pierce:0,dmgDrop:0,scale:.0007303348040201011,leftHoldY:-.33,rightHoldY:-.28,leftHoldZ:2.2,leftHoldX:0,rightHoldZ:.9,xOff:1,yOff:-1,zOff:-1.4,xOrg:0,yOrg:-.72,zOrg:-.7,cLean:.1,cRot:.1,zRot:.9,cDrop:.2,holdW:.5,muzOff:2.2,muzOffY:.1,muzID:3,muzMlt:1.1,jYMlt:.95,range:700,rate:150,spread:120,zoom:1.4,leanMlt:.3,recoil:.007,recoilR:.01,recover:.985,recoverY:.996,recoverF:.98,recoilZ:4,recoilAnim:{time:300,recoilTweenY:.1},rumble:.5,icnPad:9,charm:!0,charmMXOff:-.23999999999999994,charmMYOff:.04,charmMZOff:-.01,charmMScl:1,charmXOff:0,charmYOff:0,charmZOff:0,charmScl:1,magReserve:20,mysteryBoxR:1,canUpgrade:!0},{name:"Famas",src:"weapon_15",icon:"icon_15",assetIcon:"",sound:"weapon_15",refDist:25,rollOff:1,akimbo:!1,noSpread:!1,secondary:!1,equipment:!1,noAim:!1,noAo:!0,nAuto:!0,projectile:{},pj_asset:"",pj_disable:!0,pj_mat:"BASIC",pj_color:16777179,pj_dmg:28,pj_spd:2.4,pj_lookDir:!0,pj_grav:1e-4,pj_scale:1.4,pj_length:10,pj_range:3e3,pj_snd:0,physRang:0,physPow:0,burst:!0,burstC:3,burstR:90,swapWiggle:.6,attach:0,attachYOff:-.1,attachZOff:-.5,zRot:1,type:0,swapTime:300,aimSpd:130,chrgTime:0,ovrChrg:!1,spdMlt:.95,ammo:30,rate:280,reload:1200,dmg:28,hsMlt:1.5,pierce:1,range:900,dmgDrop:5,scale:.0008858419597989991,leftHoldY:-.45,rightHoldY:-.5,leftHoldZ:.72,rightHoldZ:-.75,holdW:1,xOff:1,yOff:-.86,yRot:.0018,zOff:-3,xOrg:0,yOrg:-1.14,zOrg:-2,cLean:.2,cRot:.2,cDrop:.1,inspectR:.1,inspectM:1.5,caseZOff:-1.7,caseYOff:-.2,muzOff:4.9,muzOffY:-.05,muzMlt:1.4,spread:90,minSpread:5,zoom:1.5,leanMlt:1.5,recoil:.003,recoilR:.02,recover:.978,recoverY:.995,recoverF:.975,jYMlt:.9,recoilYM:.32,recoilZ:5.5,recoilZM:.05,aimRecMlt:.65,recoilAnim:{time:300,recoilTweenY:.06,recoilTweenZ:.1},jumpYM:.6,rumble:.5,expScale:.9,icnPad:9,charm:!0,charmMXOff:-.33,charmMYOff:.195,charmMZOff:.99,charmMScl:1,charmXOff:0,charmYOff:0,charmZOff:0,charmScl:1,magReserve:4,mysteryBoxR:2,canUpgrade:!0},{name:"Sawed Off",src:"weapon_16",icon:"icon_16",assetIcon:"",sound:"weapon_16",noComp:!0,refDist:25,rollOff:1,noSpread:!1,akimbo:!1,noAim:!1,noAo:!0,nAuto:!0,nCase:!0,nRing:!0,secondary:!0,equipment:!1,minRec:20,req:i,swapWiggle:.4,shine:35,type:1,physRang:36,physPow:.1,swapTime:200,aimSpd:100,chrgTime:0,ovrChrg:!1,spdMlt:1,ammo:1,reload:1100,dmg:12,hsMlt:1.5,dmgDrop:12,scale:1,rightHoldX:.1,leftHoldY:-.5,rightHoldY:-.6,leftHoldZ:.4,rightHoldZ:-1.5,holdW:1,xOff:.95,yOff:-.65,zOff:-3.8,xOrg:0,yOrg:-.3,zOrg:-2.8,cLean:.2,cRot:.2,cDrop:.1,jYMlt:.2,inspectR:.1,inspectM:1.9,muzOff:6,muzMlt:1.8,range:210,rate:400,innac:110,spread:120,shots:5,cSpread:[[.03,.05,-.27,-.02,-.03,.31,.3,-.01,.01,-.28],[.01,.05,-.17,-.22,-.3,.31,.32,.28,.3,-.2]],minSpread:20,zoom:1.25,leanMlt:1.6,recoil:.02,recoilR:.015,recover:.99,recoverF:.97,recoilZ:2.1,recoilZM:.32,aimRecMlt:.3,recoilYM:1,recoilAnim:{time:340,recoilTweenY:.35},jumpYM:.5,rumble:.8,icnPad:10,expScale:1,charm:!0,charmMXOff:-.37,charmMYOff:-.43,charmMZOff:1.23,charmMScl:1,charmXOff:0,charmYOff:0,charmZOff:0,charmScl:1,magReserve:20,mysteryBoxR:0,canUpgrade:!0},{name:"Auto Pistol",src:"weapon_17",icon:"icon_17",assetIcon:"",sound:"weapon_17",refDist:25,rollOff:1,noSpread:!1,akimbo:!1,secondary:!0,equipment:!1,noAim:!1,nAuto:!1,minRec:30,req:i,noAo:!0,physRang:0,physPow:0,kill:["",50],type:1,swapTime:200,aimSpd:100,chrgTime:0,ovrChrg:!1,spdMlt:1,ammo:15,reload:1e3,dmg:16,hsMlt:1.1,pierce:.95,dmgDrop:2,scale:.0003158947055276376,leftHoldY:-1.1,rightHoldY:-.62,leftHoldZ:-.3,rightHoldZ:-.32,rightHoldX:.13,holdW:1.35,xOff:1.2,yOff:-.6,zOff:-3.7,xOrg:0,yRot:-.005,yOrg:-.23,zOrg:-3.9,cLean:.3,cRot:.3,inspectR:.35,inspectM:.9,muzOff:2,muzMlt:1.1,range:700,rate:100,spread:150,jYMlt:.5,zoom:1.3,leanMlt:1.6,recoil:.004,recoilR:.01,recover:.98,recoverY:.99,recoverF:.98,recoilYM:.2,aimRecMlt:.4,recoilZ:3.8,recoilZM:-.4,recoilAnim:{time:200,recoilTweenY:.28},rumble:.8,icnPad:-10,expScale:1.55,charm:!0,charmMXOff:-.31999999999999995,charmMYOff:-.17,charmMZOff:.9900000000000007,charmMScl:1,charmXOff:0,charmYOff:0,charmZOff:0,charmScl:1,magReserve:4,mysteryBoxR:1,canUpgrade:!0},{name:"Bomb",src:"weapon_18",icon:"icon_18",assetIcon:"",sound:"weapon_18",refDist:25,rollOff:1,transp:!0,bomb:!0,equipment:!0,nInsp:!0,noAim:!0,noAo:!0,nCase:!0,noCross:!0,nMuz:!0,type:3,aimSpd:140,chrgTime:0,ovrChrg:!1,swapTime:250,spdMlt:.65,scale:.63,holdW:1.2,zoom:1,rot:[0,Math.PI/2,-.4],leftHoldY:-.3,rightHoldY:-.3,leftHoldZ:.33,rightHoldX:-.82,leftHoldX:.82,rightHoldZ:.33,xOff:0,yOff:-.8,zOff:-3.5,xOrg:1e-4,yOrg:1e-4,zOrg:1e-4,cLean:0,cRot:0,cDrop:.12,jYMlt:.95,spread:120,recover:.98,recoverF:.98,leanMlt:.3,icnPad:9},{name:"Blaster",src:"weapon_19",icon:"icon_19",assetIcon:"",sound:"weapon_19",refDist:25,rollOff:1,secondary:!1,equipment:!1,noSpread:!1,akimbo:!1,noAim:!1,noAo:!0,nCase:!0,nAuto:!1,physRang:0,physPow:0,swapWiggle:.3,attach:0,attachYOff:-.07,attachZOff:-.73,zRot:1,type:0,kill:["",75],swapTime:300,aimSpd:130,chrgTime:0,ovrChrg:!1,spdMlt:.95,ammo:16,rate:160,reload:1450,dmg:1,projectile:{},pj_asset:"",pj_mat:"BASIC",pj_color:9109499,pj_spd:1,pj_grav:0,pj_nImp:!0,pj_lookDir:!0,pj_scale:.7,pj_dmg:35,pj_length:10,pj_range:500,hsMlt:1,lsMlt:1,pierce:1,range:700,dmgDrop:0,scale:.0007946847095477368,leftHoldY:-.8,rightHoldY:-.6,leftHoldZ:1.2,rightHoldZ:-1.25,holdW:.75,xOff:.7,yOff:-.76,zOff:-3,rotOff:-.05,rotOffA:-.02,aimOffY:.042,yRot:.0018,xOrg:0,yOrg:-.52,zOrg:-2.3,cLean:.2,cRot:.2,cDrop:.1,inspectR:.1,inspectM:1.5,caseZOff:-1.7,caseYOff:-.2,muzID:3,muzOff:5.1,muzOffY:-.08,muzMlt:1.4,spread:100,minSpread:5,zoom:1.6,leanMlt:1.5,recoil:.003,recoilR:.05,recover:.978,recoverY:.995,recoverF:.975,jYMlt:.9,recoilYM:.4,recoilZ:5.7,recoilZM:-.05,aimRecMlt:.7,recoilAnim:{time:300,recoilTweenY:.07,recoilTweenZ:.1},jumpYM:.6,rumble:.5,icnPad:5,charm:!0,charmMXOff:-.37,charmMYOff:-.17,charmMZOff:.98,charmMScl:1,charmXOff:0,charmYOff:0,charmZOff:0,charmScl:1,magReserve:4,mysteryBoxR:1,canUpgrade:!0},{name:"Build Tool",src:"weapon_20",icon:"icon_20",assetIcon:"",sound:"weapon_20",refDist:25,rollOff:1,aimSound:"paper_1",swapSnd:"paper_1",build:!0,equipment:!0,nInsp:!0,noAim:!1,noAo:!0,nCase:!0,noCross:!0,nMuz:!0,side:2,type:3,aimSpd:100,chrgTime:0,ovrChrg:!1,aimLean:1e-6,swapTime:200,spdMlt:.9,scale:1.2,holdW:1.3,zoom:1.1,rate:300,range:50,rot:[0,Math.PI/2,-.4],leftHoldY:.6,rightHoldY:.6,leftHoldZ:.1,rightHoldX:-2.2,leftHoldX:2.2,rightHoldZ:.1,xOff:0,yOff:-2.6,zOff:-3.5,xOrg:1e-5,yOrg:-3.8,zOrg:-3.2,cLean:0,cRot:0,cDrop:.12,jYMlt:.95,spread:120,recover:.98,recoverF:.98,leanMlt:.3,icnPad:9},{name:"Grappler",src:"weapon_21",icon:"icon_21",assetIcon:"",sound:"weapon_21",refDist:25,rollOff:1,noSpread:!0,akimbo:!1,secondary:!0,equipment:!1,noAim:!1,grapRang:500,physRang:0,physPow:0,customOnly:!0,req:i,nAuto:!0,noAo:!0,transp:!0,kill:["",50],type:1,swapTime:200,aimSpd:110,chrgTime:0,ovrChrg:!1,spdMlt:1,ammo:10,reload:1e3,dmg:1,hsMlt:1.5,pierce:.85,dmgDrop:0,scale:1,leftHoldY:-.9,rightHoldY:-.7,leftHoldZ:-.5,rightHoldZ:-.5,holdW:1.1,xOff:1,yOff:-.5,zOff:-4.1,xOrg:0,yOrg:-.195,zOrg:-3.8,cLean:.3,cRot:.3,inspectR:.35,inspectM:.9,muzOff:1.8,muzOffY:-.2,muzMlt:1.1,range:700,rate:300,spread:0,jYMlt:.5,zoom:1.2,leanMlt:1.6,recoil:.01,recoilR:.01,recover:.982,recoverY:.995,recoverF:.98,recoilYM:.62,aimRecMlt:.23,recoilZ:4.8,recoilZM:.2,recoilAnim:{time:180,recoilTweenY:.34},rumble:.8,icnPad:-10,expScale:1.2,charm:!0,charmMXOff:-.34,charmMYOff:-.2,charmMZOff:.36,charmMScl:1,charmXOff:0,charmYOff:0,charmZOff:0,charmScl:1},{name:"Tehchy-9",src:"weapon_22",icon:"icon_22",assetIcon:"",sound:"weapon_22",refDist:25,rollOff:1,noSpread:!1,akimbo:!1,secondary:!0,equipment:!1,noAim:!1,nAuto:!0,minRec:40,req:i,noAo:!0,physRang:0,physPow:0,burst:!0,burstC:3,burstR:90,kill:["",50],type:1,swapTime:200,aimSpd:100,chrgTime:0,ovrChrg:!1,spdMlt:1,ammo:15,reload:1e3,dmg:23,hsMlt:1.25,pierce:.95,dmgDrop:2,scale:.0003158947055276376,leftHoldY:-1.1,rightHoldY:-.62,leftHoldZ:-.3,rightHoldZ:-.32,rightHoldX:.13,holdW:1.35,xOff:1.2,yOff:-.6,zOff:-3.7,xOrg:0,yRot:-.005,yOrg:-.23,zOrg:-3.9,cLean:.3,cRot:.3,inspectR:.35,inspectM:.9,muzOff:2,muzMlt:1.1,range:700,rate:380,spread:150,jYMlt:.5,zoom:1.3,leanMlt:1.6,recoil:.004,recoilR:.01,recover:.98,recoverY:.99,recoverF:.98,recoilYM:.2,aimRecMlt:.4,recoilZ:3.8,recoilZM:-.4,recoilAnim:{time:200,recoilTweenY:.28},rumble:.8,icnPad:-10,expScale:1.55,charm:!0,charmMXOff:-.329,charmMYOff:-.23,charmMZOff:1.03,charmMScl:1,charmXOff:0,charmYOff:0,charmZOff:0,charmScl:1,magReserve:4,mysteryBoxR:0,canUpgrade:!0},{name:"Noob Tube",src:"weapon_23",icon:"icon_23",assetIcon:"",sound:"weapon_23",noComp:!0,refDist:25,rollOff:1,noSpread:!1,akimbo:!1,noAim:!1,noAo:!0,nCase:!0,nRing:!0,secondary:!0,equipment:!1,minRec:25,req:i,swapWiggle:.4,shine:35,type:1,physRang:36,physPow:.1,swapTime:200,aimSpd:100,chrgTime:0,ovrChrg:!1,spdMlt:1,ammo:1,reload:1200,dmg:12,hsMlt:1,lsMlt:1,dmgDrop:12,scale:1,rightHoldX:.1,leftHoldY:-.6,rightHoldY:-.6,leftHoldZ:.4,rightHoldZ:-1.3,holdW:1,xOff:.95,yOff:-.6,zOff:-3.8,wzOff:.28,wyOff:-.5,xOrg:0,yOrg:-.3,zOrg:-2.8,cLean:.2,cRot:.2,cDrop:.1,jYMlt:.2,inspectR:.1,muzOff:6,muzMlt:1.8,inspectM:1.9,range:150,rate:400,innac:110,spread:20,noSpread:!0,noProjSpread:!0,shots:0,minSpread:20,zoom:1.25,leanMlt:1.6,recoil:.02,recoilR:.015,recover:.99,recoverF:.97,recoilZ:2.1,recoilZM:.32,aimRecMlt:.3,recoilYM:1,recoilAnim:{time:340,recoilTweenY:.35},jumpYM:.5,rumble:.8,icnPad:10,expScale:1,projectile:{},pj_asset:"",pj_mat:"BASIC",pj_color:16498733,pj_explode:40,pj_dmg:45,pj_eDmg:35,pj_spd:.75,pj_grav:.001,pj_nImp:!0,pj_lookDir:!0,pj_scale:1.4,pj_length:15,pj_range:1e3,charm:!0,charmMXOff:-.37,charmMYOff:-.51,charmMZOff:-1.69,charmMScl:1,charmXOff:0,charmYOff:0,charmZOff:0,charmScl:1,magReserve:20,mysteryBoxR:0,canUpgrade:!0},{name:"Slimer",src:"weapon_24",icon:"icon_24",assetIcon:"",sound:"weapon_24",refDist:25,rollOff:1,noSpread:!0,akimbo:!1,noAim:!0,physRang:0,physPow:0,customOnly:!0,nAuto:!0,noAo:!0,transp:!0,kill:["",50],secondary:!1,equipment:!0,type:3,swapWiggle:.3,zRot:1,swapTime:200,aimSpd:110,chrgTime:0,ovrChrg:!1,spdMlt:1,ammo:2,reload:5e3,noReload:!0,removeOnEmpty:!0,dmg:1,hsMlt:1.5,pierce:.85,dmgDrop:0,scale:.000765961165829144,leftHoldY:-.41,rightHoldY:-.6,leftHoldZ:.5,rightHoldZ:-1.2,holdW:.8,xOff:.7,yOff:-.87,zOff:-3.33,rotOff:-.08,rotOffA:-.035,aimOffY:.042,yRot:.0018,xOrg:0,yOrg:-.59,zOrg:-2.14,cLean:.2,cRot:.1,cDrop:.1,inspectR:.1,inspectM:1.5,caseZOff:-1.7,caseYOff:-.2,muzOff:5.1,muzOffY:-.05,muzMlt:1.4,range:700,rate:300,minSpread:0,spread:0,zoom:1.6,leanMlt:1.5,recoil:.003,recoilR:.05,recover:.978,recoverY:.995,recoverF:.975,jYMlt:.9,recoilYM:1.1,recoilZ:4.3,recoilZM:-.04,aimRecMlt:.65,recoilAnim:{time:160,recoilTweenY:.065,recoilTweenZ:.1},jumpYM:.3,rumble:.4,icnPad:-15,shine:20,hDstOff:1.2,deployRang:250,deployable:5},{name:"Zapper",src:"weapon_25",icon:"icon_25",assetIcon:"",sound:"weapon_25",refDist:25,rollOff:1,secondary:!0,equipment:!1,noSpread:!1,akimbo:!1,noAim:!1,noAo:!0,transp:!0,nAuto:!0,noComp:!0,projectile:{},pj_asset:"",pj_mat:"BASIC",pj_color:16498733,pj_spd:.5,pj_grav:0,pj_nImp:!0,pj_lookDir:!0,pj_scale:.8,pj_dmg:5,pj_length:10,pj_range:150,physRang:0,physPow:0,minRec:35,req:i,kill:["",75],swapWiggle:.3,type:1,shine:10,swapTime:260,aimSpd:110,chrgTime:1500,ovrChrg:!0,spdMlt:1.05,ammo:5,reload:1400,dmg:10,hsMlt:1,lsMlt:1,range:150,dmgDrop:10,scale:.84,wzOff:0,wyOff:0,leftHoldY:-1.1,rightHoldY:-.62,leftHoldZ:-.3,rightHoldZ:-.32,rightHoldX:.13,holdW:1.3,xOff:1.2,yOff:-.6,zOff:-3.7,xOrg:0,yRot:-.005,yOrg:-.23,zOrg:-3.9,jYMlt:.1,cLean:.3,cRot:.3,caseZOff:.2,caseYOff:0,inspectR:.3,inspectM:.8,muzOff:1.5,muzOffY:0,muzMlt:.95,rate:150,spread:60,zoom:1.4,leanMlt:1,recoil:.006,recoilR:.02,recover:.98,recoverY:.99,recoverF:.98,recoilYM:.2,aimRecMlt:.4,recoilZ:3.8,recoilZM:-.4,recoilAnim:{time:200,recoilTweenY:.28,recoilTweenZ:.1},rumble:.4,icnPad:-15,expScale:1.2,effectOnHit:8,charm:!0,charmMXOff:-.289,charmMYOff:-.16,charmMZOff:1.09,charmMScl:1,charmXOff:0,charmYOff:0,charmZOff:0,charmScl:1,magReserve:12,mysteryBoxR:0,canUpgrade:!0},{name:"Minigun",src:"weapon_26",icon:"icon_26",assetIcon:"",sound:"weapon_26",refDist:25,rollOff:1,akimbo:!1,noAim:!1,nAuto:!1,noSpread:!1,projectile:{},pj_asset:"",pj_disable:!0,pj_mat:"BASIC",pj_color:16777179,pj_dmg:18,pj_spd:2.3,pj_lookDir:!0,pj_grav:1e-4,pj_scale:1.4,pj_length:10,pj_range:3e3,pj_snd:0,physRang:0,physPow:0,type:3,equipment:!0,swapWiggle:.3,zRot:.75,noAo:!0,swapTime:600,aimSpd:200,chrgTime:0,ovrChrg:!1,spdMlt:.5,jumMlt:.2,noJump:!0,ammo:250,reload:3300,noReload:!0,removeOnEmpty:!0,dmg:18,hsMlt:1.5,pierce:1,range:700,dmgDrop:10,jYMlt:.8,scale:.0008856008924623108,leftHoldY:-.5,leftHoldX:.4,rightHoldX:-.1,rightHoldY:-1.6,leftHoldZ:1,rightHoldZ:-.6,holdW:1,yRot:-.01,xOff:.95,yOff:-1,zOff:-2.8,xOrg:0,yOrg:-.6,zOrg:-1.8,cLean:.1,cRot:.1,cDrop:.1,inspectR:.2,inspectM:.6,caseInd:2,caseZOff:-.5,caseYOff:-.1,muzOff:5,muzOffY:-1.2,muzMlt:1.7,rate:70,spread:300,minSpread:10,zoom:1.3,leanMlt:1.6,recoil:.0032,recoilR:.04,recover:.98,recoverY:.9975,recoverF:.975,recoilZ:3.8,recoilYM:.25,recoilZ:3,recoilZM:-.1,aimRecMlt:.5,recoilAnim:{time:200,recoilTweenY:.045,recoilTweenZ:.12},jumpYM:.1,expScale:.85,rumble:.65,icnPad:10,noSwap:!0,magReserve:0},{name:"War Machine",src:"weapon_27",icon:"icon_27",assetIcon:"",sound:"weapon_27",noComp:!0,refDist:25,rollOff:1,akimbo:!1,noAim:!1,noAo:!0,nAuto:!0,nCase:!0,nRing:!0,secondary:!1,equipment:!0,swapWiggle:.4,shine:35,type:3,physRang:0,physPow:0,swapTime:400,aimSpd:100,chrgTime:0,ovrChrg:!1,spdMlt:1,ammo:6,reload:2e3,noReload:!0,removeOnEmpty:!0,dmg:12,hsMlt:1,lsMlt:1,dmgDrop:12,scale:1,rightHoldX:.1,leftHoldY:-.6,rightHoldY:-.6,leftHoldZ:.4,rightHoldZ:-1.3,holdW:1,xOff:.95,yOff:-.6,zOff:-3.8,wzOff:.28,wyOff:-.5,aimY:.25,xOrg:0,yOrg:-.3,zOrg:-2.8,cLean:.2,cRot:.2,cDrop:.1,jYMlt:.2,inspectR:.1,muzOff:6,muzMlt:1.8,inspectM:1.9,range:150,rate:300,innac:110,spread:20,noSpread:!0,noProjSpread:!0,shots:0,minSpread:20,zoom:1.25,leanMlt:1.6,recoil:.02,recoilR:.015,recover:.99,recoverF:.97,recoilZ:2.1,recoilZM:.32,aimRecMlt:.3,recoilYM:1,recoilAnim:{time:340,recoilTweenY:.35},jumpYM:.5,rumble:.8,icnPad:10,expScale:1,projectile:{},pj_asset:"",pj_mat:"BASIC",pj_color:16498733,pj_explode:70,pj_dmg:60,pj_eDmg:65,pj_spd:.75,pj_grav:.001,pj_nImp:!0,pj_lookDir:!0,pj_scale:1.4,pj_length:15,pj_range:1e3,noSwap:!0,magReserve:0},{name:"Akimbo Pistol",src:"weapon_28",icon:"icon_28",assetIcon:"",sound:"weapon_28",refDist:25,rollOff:1,secondary:!0,equipment:!1,nAuto:!0,noAo:!0,physRang:0,physPow:0,nInsp:!0,noAim:!0,akimbo:!0,type:1,swapTime:300,aimSpd:120,chrgTime:0,ovrChrg:!1,spdMlt:1.04,minRec:10,req:i,ammo:12,reload:750,dmg:15,hsMlt:1.4,pierce:1,range:700,dmgDrop:13,scale:.0003158947055276376,leftHoldZ:-.3,leftHoldX:.13,leftHoldY:-.62,rightHoldZ:-.3,rightHoldX:.13,rightHoldY:-.62,holdW:1.3,xOff:1.5,yOff:-.95,zOff:-3.3,xOrg:0,yOrg:-.62,zOrg:-2.5,zLnM:.4,cLean:.1,cRot:.1,cDrop:.2,caseYOff:-.15,caseZOff:-.4,muzOff:3.6,rate:100,spread:40,noSpread:!1,movSpread:.1,minSpread:10,zoom:1.5,recoil:.0034,recoilR:.015,leanMlt:.6,recover:.978,recoverY:.996,recoverF:.975,recoilZ:5,recoilYM:.7,recoilAnim:{recoilTweenY:.01},expScale:.7,rumble:.4,icnPad:-4,charm:!0,charmMXOff:-.2699999999999999,charmMYOff:-.42000000000000015,charmMZOff:-.040000000000000646,charmMScl:1,charmXOff:0,charmYOff:0,charmZOff:0,charmScl:1,magReserve:4,mysteryBoxR:0,canUpgrade:!0},{name:"Charge Rifle",src:"weapon_29",icon:"icon_29",assetIcon:"",sound:"weapon_29",refDist:25,rollOff:1,equipment:!1,secondary:!1,noSpread:!1,projectile:{},pj_asset:"",pj_disable:!0,pj_mat:"BASIC",pj_color:9109499,pj_dmg:100,pj_spd:2.5,pj_lookDir:!0,pj_grav:1e-4,pj_scale:1.4,pj_length:10,pj_range:7e3,pj_snd:0,akimbo:!1,noAim:!1,animWhileAim:!0,trailChrg:!0,physRang:0,physPow:0,noAo:!0,nAuto:!1,type:0,scope:!0,swapTime:300,aimSpd:120,chrgTime:700,ovrChrg:!1,shootChrg:!0,bypassChrg:!0,chrgDec:.8,fullChrgSht:!0,fullChrgMlt:50,rateChrg:!0,spdMlt:.95,ammo:1,dmg:15,hsMlt:1,pierce:1,reload:1400,range:1e3,dmgDrop:5,scale:.00115608717587935,leftHoldY:-.65,rightHoldY:-.68,leftHoldZ:2.5,rightHoldZ:.75,holdW:1,xOff:.8,yOff:-.65,zOff:-1.8,wzOff:-1,xOrg:0,yOrg:-.55,zOrg:-.8,cLean:.2,cRot:.2,cDrop:.1,inspectR:.2,inspectM:.1,muzID:3,muzOff:8,muzMlt:1.6,rate:150,spread:150,minSpread:5,zoom:2,leanMlt:1.5,recoil:.003,recoilR:.05,recover:.978,recoverY:.995,recoverF:.975,jYMlt:.9,recoilYM:1.1,recoilZ:4.3,recoilZM:-.04,aimRecMlt:.65,recoilAnim:{time:160,recoilTweenY:.065,recoilTweenZ:.1},jumpYM:.15,rumble:.9,rumbleDur:500,icnPad:9,charm:!0,charmMXOff:-.43,charmMYOff:-.4,charmMZOff:-3.71,charmMScl:1,charmXOff:0,charmYOff:0,charmZOff:0,charmScl:1,magReserve:30,mysteryBoxR:4,canUpgrade:!0},{name:"Boulder",src:"weapon_30",icon:"icon_30",assetIcon:"",sound:"",refDist:25,rollOff:1,transp:!0,secondary:!0,equipment:!1,nInsp:!0,noAim:!0,canThrow:!1,noAo:!0,nCase:!0,noCross:!0,nMuz:!0,type:3,aimSpd:140,chrgTime:0,ovrChrg:!1,swapTime:200,spdMlt:.85,gravMlt:1.7,jumMlt:.88,scale:.63,holdW:1.2,zoom:1,rot:[0,Math.PI/2,-.4],leftHoldY:-.3,rightHoldY:-.3,leftHoldZ:.33,rightHoldX:-.82,leftHoldX:.82,rightHoldZ:.33,xOff:0,yOff:-.8,zOff:-3.5,xOrg:0,yOrg:-.8,zOrg:-3.5,cLean:0,cRot:0,cDrop:.12,jYMlt:.95,spread:120,recover:.98,recoverF:.98,leanMlt:.3,icnPad:9},{name:"Compressor",src:"weapon_31",icon:"icon_31",sound:"weapon_31",assetIcon:"",refDist:25,rollOff:1,secondary:!0,equipment:!1,noSpread:!1,noAim:!0,akimbo:!1,noAo:!0,nAuto:!0,nCase:!0,nRing:!0,swapWiggle:.4,shine:35,type:1,minRec:45,req:i,physRang:50,physPow:.1,physPull:!0,swapTime:350,aimSpd:100,rShoot:!0,nonObjImpulse:!0,chrgTime:0,chrgMlt:0,ovrChrg:!1,spdMlt:1.05,ammo:1,reload:2e3,dmg:1,hsMlt:1.25,dmgDrop:10,scale:.9,rightHoldX:.1,leftHoldY:-1.3,rightHoldY:-.75,leftHoldZ:-.45,rightHoldZ:-.26,holdW:1,xOff:.7,wyOff:-.05,yOff:-.6,zOff:-3.7,xOrg:0,yRot:-.005,yOrg:-.29,zOrg:-3.9,cLean:.2,cRot:.2,cDrop:.1,jYMlt:.2,inspectR:.1,muzOff:6,muzMlt:1.8,inspectM:1.9,range:40,rate:450,innac:110,spread:180,minSpread:20,zoom:0,leanMlt:1.6,recoil:.02,recoilR:.015,recover:.99,recoverF:.97,recoilZ:2.1,recoilZM:.2,aimRecMlt:.67,recoilYM:.65,recoilAnim:{time:340,recoilTweenY:.22},jumpYM:.5,rumble:.8,icnPad:10,expScale:1.25,noDmg:!0}],e.exports.findWeaponBySrc=function(t){for(var i=0;i<e.exports.length;++i)if(e.exports[i].src=="weapon_"+t)return e.exports[i];return null},e.exports.findIndexBySrc=function(t){for(var i=0;i<e.exports.length;++i)if(e.exports[i].src==t)return i;return null},e.exports.onlyWeapons=[],e.exports.onlyGoodWeapons=[],e.exports.mysteryBoxRarities=[35,30,20,10,5];for(var n=0;n<e.exports.length;++n)e.exports[n].id=n,null==e.exports[n].adSpread&&(e.exports[n].adSpread=0),null==e.exports[n].reloY&&(e.exports[n].reloY=1),null==e.exports[n].movSpread&&(e.exports[n].movSpread=1),null==e.exports[n].lsMlt&&(e.exports[n].lsMlt=.5),null==e.exports[n].burst&&(e.exports[n].burst=!1,e.exports[n].burstC=0,e.exports[n].burstR=50),e.exports[n].melee||e.exports[n].equipment||e.exports[n].customOnly||e.exports[n].noDmg||(e.exports.onlyWeapons.push(n),15!=n&&e.exports.onlyGoodWeapons.push(n))},function(e,t,i){"use strict";(function(t){e.exports=void 0===t||!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?{nextTick:function(e,i,n,s){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var a,r,o=arguments.length;switch(o){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick((function(){e.call(null,i)}));case 3:return t.nextTick((function(){e.call(null,i,n)}));case 4:return t.nextTick((function(){e.call(null,i,n,s)}));default:for(a=Array(o-1),r=0;r<a.length;)a[r++]=arguments[r];return t.nextTick((function(){e.apply(null,a)}))}}}:t}).call(this,i(7))},function(e,t,i){var n=i(3).Buffer;function s(e){n.isBuffer(e)||(e=n.from(e));for(var t=e.length/4|0,i=Array(t),s=0;s<t;s++)i[s]=e.readUInt32BE(4*s);return i}function a(e){for(;0<e.length;e++)e[0]=0}function r(e,t,i,n,s){for(var a,r,o,l,c=i[0],d=i[1],h=i[2],u=i[3],p=e[0]^t[0],f=e[1]^t[1],m=e[2]^t[2],g=e[3]^t[3],v=4,y=1;y<s;y++)a=c[p>>>24]^d[f>>>16&255]^h[m>>>8&255]^u[255&g]^t[v++],r=c[f>>>24]^d[m>>>16&255]^h[g>>>8&255]^u[255&p]^t[v++],o=c[m>>>24]^d[g>>>16&255]^h[p>>>8&255]^u[255&f]^t[v++],l=c[g>>>24]^d[p>>>16&255]^h[f>>>8&255]^u[255&m]^t[v++],p=a,f=r,m=o,g=l;return a=(n[p>>>24]<<24|n[f>>>16&255]<<16|n[m>>>8&255]<<8|n[255&g])^t[v++],r=(n[f>>>24]<<24|n[m>>>16&255]<<16|n[g>>>8&255]<<8|n[255&p])^t[v++],o=(n[m>>>24]<<24|n[g>>>16&255]<<16|n[p>>>8&255]<<8|n[255&f])^t[v++],l=(n[g>>>24]<<24|n[p>>>16&255]<<16|n[f>>>8&255]<<8|n[255&m])^t[v++],[a>>>=0,r>>>=0,o>>>=0,l>>>=0]}var o=[0,1,2,4,8,16,32,64,128,27,54],l=function(){for(var e,t=Array(256),i=0;i<256;i++)t[i]=i<128?i<<1:i<<1^283;for(var n=[],s=[],a=[[],[],[],[]],r=[[],[],[],[]],o=0,l=0,c=0;c<256;++c){e=(e=l^l<<1^l<<2^l<<3^l<<4)>>>8^255&e^99,n[o]=e,s[e]=o;var d=t[o],h=t[d],u=t[h],p=257*t[e]^16843008*e;a[0][o]=p<<24|p>>>8,a[1][o]=p<<16|p>>>16,a[2][o]=p<<8|p>>>24,a[3][o]=p,p=16843009*u^65537*h^257*d^16843008*o,r[0][e]=p<<24|p>>>8,r[1][e]=p<<16|p>>>16,r[2][e]=p<<8|p>>>24,r[3][e]=p,0===o?o=l=1:(o=d^t[t[t[u^d]]],l^=t[t[l]])}return{SBOX:n,INV_SBOX:s,SUB_MIX:a,INV_SUB_MIX:r}}();function c(e){this._key=s(e),this._reset()}c.blockSize=16,c.keySize=32,c.prototype.blockSize=c.blockSize,c.prototype.keySize=c.keySize,c.prototype._reset=function(){for(var e=this._key,t=e.length,i=t+6,n=4*(i+1),s=[],a=0;a<t;a++)s[a]=e[a];for(a=t;a<n;a++){var r=s[a-1];a%t==0?(r=r<<8|r>>>24,r=l.SBOX[r>>>24]<<24|l.SBOX[r>>>16&255]<<16|l.SBOX[r>>>8&255]<<8|l.SBOX[255&r],r^=o[a/t|0]<<24):t>6&&a%t==4&&(r=l.SBOX[r>>>24]<<24|l.SBOX[r>>>16&255]<<16|l.SBOX[r>>>8&255]<<8|l.SBOX[255&r]),s[a]=s[a-t]^r}for(var c=[],d=0;d<n;d++){var h=n-d,u=s[h-(d%4?0:4)];c[d]=d<4||h<=4?u:l.INV_SUB_MIX[0][l.SBOX[u>>>24]]^l.INV_SUB_MIX[1][l.SBOX[u>>>16&255]]^l.INV_SUB_MIX[2][l.SBOX[u>>>8&255]]^l.INV_SUB_MIX[3][l.SBOX[255&u]]}this._nRounds=i,this._keySchedule=s,this._invKeySchedule=c},c.prototype.encryptBlockRaw=function(e){return r(e=s(e),this._keySchedule,l.SUB_MIX,l.SBOX,this._nRounds)},c.prototype.encryptBlock=function(e){var t=this.encryptBlockRaw(e),i=n.allocUnsafe(16);return i.writeUInt32BE(t[0],0),i.writeUInt32BE(t[1],4),i.writeUInt32BE(t[2],8),i.writeUInt32BE(t[3],12),i},c.prototype.decryptBlock=function(e){var t=(e=s(e))[1];e[1]=e[3],e[3]=t;var i=r(e,this._invKeySchedule,l.INV_SUB_MIX,l.INV_SBOX,this._nRounds),a=n.allocUnsafe(16);return a.writeUInt32BE(i[0],0),a.writeUInt32BE(i[3],4),a.writeUInt32BE(i[2],8),a.writeUInt32BE(i[1],12),a},c.prototype.scrub=function(){a(this._keySchedule),a(this._invKeySchedule),a(this._key)},e.exports.AES=c},function(e,t,i){var n=i(3).Buffer,s=i(41);e.exports=function(e,t,i,a){if(n.isBuffer(e)||(e=n.from(e,"binary")),t&&(n.isBuffer(t)||(t=n.from(t,"binary")),8!==t.length))throw new RangeError("salt should be Buffer with 8 byte length");for(var r,o=i/8,l=n.alloc(o),c=n.alloc(a||0),d=n.alloc(0);o>0||a>0;){(r=new s).update(d),r.update(e),t&&r.update(t),d=r.digest();var h=0;if(o>0){var u=l.length-o;h=Math.min(o,d.length),d.copy(l,u,0,h),o-=h}if(h<d.length&&a>0){var p=c.length-a,f=Math.min(a,d.length-h);d.copy(c,p,h,h+f),a-=f}}return d.fill(0),{key:l,iv:c}}},function(e,t,i){"use strict";var n=i(5),s=i(10),a=s.getNAF,r=s.getJSF,o=s.assert;function l(e,t){this.type=e,this.p=new n(t.p,16),this.red=t.prime?n.red(t.prime):n.mont(this.p),this.zero=new n(0).toRed(this.red),this.one=new n(1).toRed(this.red),this.two=new n(2).toRed(this.red),this.n=t.n&&new n(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=[,,,,],this._wnafT2=[,,,,],this._wnafT3=[,,,,],this._wnafT4=[,,,,],this._bitLength=this.n?this.n.bitLength():0;var i=this.n&&this.p.div(this.n);!i||i.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function c(e,t){this.curve=e,this.type=t,this.precomputed=null}e.exports=l,l.prototype.point=function(){throw new Error("Not implemented")},l.prototype.validate=function(){throw new Error("Not implemented")},l.prototype._fixedNafMul=function(e,t){o(e.precomputed);var i,n,s=e._getDoubles(),r=a(t,1,this._bitLength),l=(1<<s.step+1)-(s.step%2==0?2:1);l/=3;var c=[];for(i=0;i<r.length;i+=s.step){n=0;for(var d=i+s.step-1;d>=i;d--)n=(n<<1)+r[d];c.push(n)}for(var h=this.jpoint(null,null,null),u=this.jpoint(null,null,null),p=l;p>0;p--){for(i=0;i<c.length;i++)(n=c[i])===p?u=u.mixedAdd(s.points[i]):n===-p&&(u=u.mixedAdd(s.points[i].neg()));h=h.add(u)}return h.toP()},l.prototype._wnafMul=function(e,t){var i=4,n=e._getNAFPoints(i);i=n.wnd;for(var s=n.points,r=a(t,i,this._bitLength),l=this.jpoint(null,null,null),c=r.length-1;c>=0;c--){for(var d=0;c>=0&&0===r[c];c--)d++;if(c>=0&&d++,l=l.dblp(d),c<0)break;var h=r[c];o(0!==h),l="affine"===e.type?h>0?l.mixedAdd(s[h-1>>1]):l.mixedAdd(s[-h-1>>1].neg()):h>0?l.add(s[h-1>>1]):l.add(s[-h-1>>1].neg())}return"affine"===e.type?l.toP():l},l.prototype._wnafMulAdd=function(e,t,i,n,s){var o,l,c,d=this._wnafT1,h=this._wnafT2,u=this._wnafT3,p=0;for(o=0;o<n;o++){var f=(c=t[o])._getNAFPoints(e);d[o]=f.wnd,h[o]=f.points}for(o=n-1;o>=1;o-=2){var m=o-1,g=o;if(1===d[m]&&1===d[g]){var v=[t[m],null,null,t[g]];0===t[m].y.cmp(t[g].y)?(v[1]=t[m].add(t[g]),v[2]=t[m].toJ().mixedAdd(t[g].neg())):0===t[m].y.cmp(t[g].y.redNeg())?(v[1]=t[m].toJ().mixedAdd(t[g]),v[2]=t[m].add(t[g].neg())):(v[1]=t[m].toJ().mixedAdd(t[g]),v[2]=t[m].toJ().mixedAdd(t[g].neg()));var y=[-3,-1,-5,-7,0,7,5,1,3],b=r(i[m],i[g]);for(p=Math.max(b[0].length,p),u[m]=Array(p),u[g]=Array(p),l=0;l<p;l++){var w=0|b[0][l],x=0|b[1][l];u[m][l]=y[3*(w+1)+(x+1)],u[g][l]=0,h[m]=v}}else u[m]=a(i[m],d[m],this._bitLength),u[g]=a(i[g],d[g],this._bitLength),p=Math.max(u[m].length,p),p=Math.max(u[g].length,p)}var S=this.jpoint(null,null,null),M=this._wnafT4;for(o=p;o>=0;o--){for(var k,_=0;o>=0;){for(k=!0,l=0;l<n;l++)M[l]=0|u[l][o],0!==M[l]&&(k=!1);if(!k)break;_++,o--}if(o>=0&&_++,S=S.dblp(_),o<0)break;for(l=0;l<n;l++){var T=M[l];0!==T&&(T>0?c=h[l][T-1>>1]:T<0&&(c=h[l][-T-1>>1].neg()),S="affine"===c.type?S.mixedAdd(c):S.add(c))}}for(o=0;o<n;o++)h[o]=null;return s?S:S.toP()},l.BasePoint=c,c.prototype.eq=function(){throw new Error("Not implemented")},c.prototype.validate=function(){return this.curve.validate(this)},l.prototype.decodePoint=function(e,t){e=s.toArray(e,t);var i=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1==2*i)return 6===e[0]?o(e[e.length-1]%2==0):7===e[0]&&o(e[e.length-1]%2==1),this.point(e.slice(1,1+i),e.slice(1+i,1+2*i));if((2===e[0]||3===e[0])&&e.length-1===i)return this.pointFromX(e.slice(1,1+i),3===e[0]);throw new Error("Unknown point format")},c.prototype.encodeCompressed=function(e){return this.encode(e,!0)},c.prototype._encode=function(e){var t=this.curve.p.byteLength(),i=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(i):[4].concat(i,this.getY().toArray("be",t))},c.prototype.encode=function(e,t){return s.encode(this._encode(t),e)},c.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},c.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},c.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var i=[this],n=this,s=0;s<t;s+=e){for(var a=0;a<e;a++)n=n.dbl();i.push(n)}return{step:e,points:i}},c.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],i=(1<<e)-1,n=1===i?null:this.dbl(),s=1;s<i;s++)t[s]=t[s-1].add(n);return{wnd:e,points:t}},c.prototype._getBeta=function(){return null},c.prototype.dblp=function(e){for(var t=this,i=0;i<e;i++)t=t.dbl();return t}},function(e,t,i){var n=i(216),s=i(223),a=i(224),r=i(48),o=i(86),l=i(3).Buffer;function c(e){var t,i,c;"object"!=typeof e||l.isBuffer(e)||(t=e.passphrase,e=e.key),"string"==typeof e&&(e=l.from(e));var d,h,u,p,f,m,g,v,y,b,w,x=a(e,t),S=x.tag,M=x.data;switch(S){case"CERTIFICATE":c=n.certificate.decode(M,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(c||=n.PublicKey.decode(M,"der"),i=c.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return n.RSAPublicKey.decode(c.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return c.subjectPrivateKey=c.subjectPublicKey,{type:"ec",data:c};case"1.2.840.10040.4.1":return c.algorithm.params.pub_key=n.DSAparam.decode(c.subjectPublicKey.data,"der"),{type:"dsa",data:c.algorithm.params};default:throw new Error("unknown key id "+i)}case"ENCRYPTED PRIVATE KEY":M=n.EncryptedPrivateKey.decode(M,"der"),h=t,u=(d=M).algorithm.decrypt.kde.kdeparams.salt,p=parseInt(d.algorithm.decrypt.kde.kdeparams.iters.toString(),10),f=s[d.algorithm.decrypt.cipher.algo.join(".")],m=d.algorithm.decrypt.cipher.iv,g=d.subjectPrivateKey,v=parseInt(f.split("-")[1],10)/8,y=o.pbkdf2Sync(h,u,p,v,"sha1"),b=r.createDecipheriv(f,y,m),(w=[]).push(b.update(g)),w.push(b.final()),M=l.concat(w);case"PRIVATE KEY":switch(i=(c=n.PrivateKey.decode(M,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return n.RSAPrivateKey.decode(c.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:c.algorithm.curve,privateKey:n.ECPrivateKey.decode(c.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return c.algorithm.params.priv_key=n.DSAparam.decode(c.subjectPrivateKey,"der"),{type:"dsa",params:c.algorithm.params};default:throw new Error("unknown key id "+i)}case"RSA PUBLIC KEY":return n.RSAPublicKey.decode(M,"der");case"RSA PRIVATE KEY":return n.RSAPrivateKey.decode(M,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:n.DSAPrivateKey.decode(M,"der")};case"EC PRIVATE KEY":return{curve:(M=n.ECPrivateKey.decode(M,"der")).parameters.value,privateKey:M.privateKey};default:throw new Error("unknown key type "+S)}}e.exports=c,c.signature=n.signature},function(e,t,i){var n=i(1);const s=i(12),a=i(117);e.exports.wheels=[{name:"Starter",language:"windows.store.spin.type.starter",primary:!0,headCol:"#b2f252",price:50,icons:2,rarities:[75,22,3,0,0,0],buttonColor:"#BFF06C",multi:10,ticketIndex:6423},{name:"Elite",language:"windows.store.spin.type.elite",primary:!0,headCol:"#2196F3",price:100,icons:3,rarities:[50,30,15,5,0,0],buttonColor:"#4994EC",multi:10,ticketIndex:6424},{name:"Heroic",language:"windows.store.spin.type.heroic",primary:!0,headCol:"#fc9803",price:500,icons:4,bigRar:5,rarities:[0,48,35,14,2.49,.5,.01],buttonColor:"#EE9D38",multi:10,ticketIndex:6425},{name:"Ultra",language:"windows.store.spin.type.ultra",headCol:"#ed4242",icons:4,bigRar:5,rarities:[0,28,53,13.5,4.45,1,.05],buttonColor:"#EE9D38",ticketIndex:6426,ticketOnly:!0},{name:"Free KR",language:"windows.store.spin.type.freeKR",headCol:"#00bcd4",free:!0,kr:!0,hideMobile:!0,minLvl:1,price:0,priceT:"Claim",priceCol:"#00eaff",adjRars:!0,icons:0,rarities:[50,39,10,1,0,0],buttonColor:"#54b9d1"}],e.exports.promos={YENDIS:{name:"GamerSupps",headCol:"#5f269f",icon:0},GAMERSUPPS:{name:"GamerSupps",headCol:"#5f269f",icon:0}},e.exports.tags={Debug:"#000000",Easter:null,Twitch:"#6441a5","Clan Wars":null,Charity:"#6441a5",Raid:"#eb347a",Canteen:"#fe4002",Gift:null,Free:null,Christmas:null,Burg:"#ADE4F9",Sandstorm:"#ADE4F9",Littletown:"#ADE4F9",Site:"#ADE4F9",Industry:"#ADE4F9",Subzero:"#ADE4F9",Freight:"#ADE4F9",Undergrowth:"#ADE4F9",Lostworld:"#ADE4F9",Kanji:"#ADE4F9",Citadel:"#ADE4F9",Oasis:"#ADE4F9",Evacuation:"#ADE4F9",Craftable:"#cc51f8",NFT:"#f3b8ff",Ranked:"#ff5500",FRVR:"linear-gradient(132deg, rgba(0,189,255,1) 0%, rgba(155,0,255,1) 25%, rgba(255,0,41,1) 50%, rgba(255,150,3,1) 75%, rgba(255,199,0,1) 100%)",Halloween:"#ff5500"},e.exports.types=["weapons/weapon_","hats/hat_","body/body_","melee/melee_","sprays/","dyes/","waist/waist_","faces/face_","shoes/shoe_","pets/pet_","collectibles/collect_","wrist/wrist_","charms/charm_","tickets/ticket_","back/back_","head/head_","playercards/card_"],e.exports.purchases=[{val:300,priceSale:.89,price:.99,priceSteam:1.15,priceSteamSale:.99,col:"#888888",productId:"ch.yendis.krunkerhub.kr300"},{val:600,priceSale:1.61,price:1.79,priceSteam:2.05,priceSteamSale:1.85,col:"#b2f251",productId:"ch.yendis.krunkerhub.kr600"},{val:2600,priceSale:6.74,price:7.49,priceSteam:8.99,priceSteamSale:7.99,col:"#3696f3",productId:"ch.yendis.krunkerhub.kr2600"},{val:7e3,priceSale:14.39,price:15.99,priceSteam:18.49,priceSteamSale:16.49,col:"#e040fb",productId:"ch.yendis.krunkerhub.kr7000"},{val:2e4,priceSale:31.49,price:34.99,priceSteam:40.49,priceSteamSale:36.49,tag:"Popular!",tagCol:"#ed4242",col:"#fa9704",productId:"ch.yendis.krunkerhub.kr20000"},{val:6e4,priceSale:89.99,price:99.99,priceSteam:114.99,priceSteamSale:103.49,tag:"Best Value!",tagCol:"#E040FB",col:"#ee5356",productId:"ch.yendis.krunkerhub.kr60000"}],e.exports.mobilePurchases=[{val:300,price:.99,productId:"ch.yendis.krunkerhub.kr300"},{val:600,price:1.79,blackFriday:{val:630,pct:5},productId:"ch.yendis.krunkerhub.kr600"},{val:2600,price:7.49,blackFriday:{val:2860,pct:10},productId:"ch.yendis.krunkerhub.kr2600"},{val:7e3,price:15.99,blackFriday:{val:8050,pct:15},productId:"ch.yendis.krunkerhub.kr7000"},{val:2e4,price:34.99,blackFriday:{val:26e3,pct:30},productId:"ch.yendis.krunkerhub.kr20000",tag:"Popular!",tagCol:"#ed4242"},{val:6e4,price:99.99,blackFriday:{val:9e4,pct:50},productId:"ch.yendis.krunkerhub.kr60000",tag:"Best Value!",tagCol:"#E040FB"}],e.exports.premium=[{val:7,price:1.49,tag:"Starter",tagCol:"#42ed56",headCol:"#a1f326"},{val:30,price:4.99,tag:"Popular!",tagCol:"#ed4242",headCol:"#2196F3"},{val:60,price:8.99,headCol:"#E040FB"},{val:90,price:12.99,tag:"Best Value!",tagCol:"#E040FB",headCol:"#fc9803"}],e.exports.lootRars=[0,0,70.395,25.49,4,.105,.01],e.exports.rarities=[{name:"Uncommon",language:"windows.spin.rarity.uncommon",rar:60,color:"#b2f252",confC:30,confCols:["#b2f252","#fff"],sell:1,fee:5},{name:"Rare",language:"windows.spin.rarity.rare",rar:40,color:"#2196F3",confC:30,confCols:["#2196F3","#fff"],sell:3,fee:5},{name:"Epic",language:"windows.spin.rarity.epic",rar:25,color:"#E040FB",confC:30,confCols:["#E040FB","#fff"],sell:10,fee:5},{name:"Legendary",language:"windows.spin.rarity.legendary",rar:10,color:"#FBC02D",confC:40,confCols:["#FBC02D","#fff"],sell:100,fee:10},{name:"Relic",language:"windows.spin.rarity.relic",rar:2.5,color:"#ed4242",confC:50,confCols:["#ed4242","#fff"],sell:500,fee:10},{name:"Contraband",language:"windows.spin.rarity.contraband",rar:.5,color:"#292929",confC:70,confCols:["#292929","#fff"],sell:2500,fee:25,scrap:5},{name:"Unobtainable",language:"windows.spin.rarity.unobtainable",rar:0,color:"#fff53d",confC:100,confCols:["#ff0000","#ffa500","#ffff00","#008000","#0000ff","#4b0082","#ee82ee"],animate:!0,sell:1e4,fee:200,scrap:50},{name:"NFT",language:"windows.spin.rarity.nft",rar:0,color:"#f3b8ff",confC:0,confCols:["#f3b8ff","#fff"],sell:10,fee:500,noSpin:!0}],e.exports.checkReq=function(e,t){if(!e)return!1;if("accAge"==e.req){var i=e.reqAmount;return t&&(new Date).getTime()-new Date(t.createDate).getTime()>=i}return"stats"==e.req?t&&t.stats&&(t.stats[e.reqVar]||0)>=e.reqAmount:"accVar"==e.req&&t&&(t[e.reqVar]||0)>=e.reqAmount},e.exports.getSpnItems=function(t,i,n,s,a){i=i||0;for(var r=[],o=t.itemTypes,l=t.limGroup,c=t.limType,d=t.itemIndexs,h=t.weaponType,u=0;u<e.exports.skins.length;++u)!e.exports.skins[u]||e.exports.skins[u].limited||e.exports.skins[u].blocked||e.exports.skins[u].noSpin||e.exports.skins[u].blackM||e.exports.skins[u].opensea||!(e.exports.skins[u].rarity==i||a&&e.exports.skins[u].rarity>=a)||c&&c!=e.exports.skins[u].limT||!c&&e.exports.skins[u].limT||l&&l!=e.exports.skins[u].limG||!l&&e.exports.skins[u].limG||o&&!(o.indexOf(e.exports.skins[u].type||0)>=0)||d&&!(d.indexOf(u)>=0)||e.exports.skins[u].req&&!e.exports.checkReq(e.exports.skins[u],n)||!e.exports.skins[u].mSeas&&(e.exports.skins[u].seas||1)!=s||null!=h&&h!=e.exports.skins[u].weapon||r.push(u);return r},e.exports.calcTradeFee=function(t,i){if(i&&i.premiumT>0)return 0;for(var n,s=0,a=0;a<t.length;++a)(n=e.exports.skins[t[a]])&&(s+=e.exports.rarities[n.rarity].fee||0);return s},e.exports.getFreeKR=function(t){return{kr:e.exports.freeKR[t].kr[0],rarity:e.exports.freeKR[t].rarity}},e.exports.freeKR=[{kr:[5],rarity:0},{kr:[10],rarity:1},{kr:[20],rarity:2},{kr:[500],rarity:3}],e.exports.previews={1:{xOff:-2,yOff:-2.6,zRota:.2,scl:.001376794727638135},2:{xOff:-1.4,yOff:-.8,scl:.001148941748743716},3:{xOff:0,yOff:-.2,scl:.000676917226130652},4:{xOff:-1.5,yOff:.5,scl:.000940741507537686},5:{xOff:-.8,yOff:.5,scl:.00079312502512562},6:{xOff:-1,yOff:-1.1,scl:1.2},7:{xOff:-1,yOff:-.9,scl:.001221518472361808},8:{xOff:-1,yOff:-.6,scl:.0012179208743718641},9:{xOff:-1.2,yOff:-1,scl:.0010676876984924638},10:{scl:1.6},14:{yOff:-2.5,scl:.0007874150753768881},15:{scl:.00098426884422111},16:{scl:1.4,yOff:1,xOff:-1},17:{xOff:0,yOff:-.2,scl:3e-4},19:{xOff:-1.4,yOff:-.8,scl:.0009095788844221084},22:{xOff:0,yOff:-.2,scl:.0003158947055276376},24:{xOff:.7,yOff:-.87,zOff:-3.33,scl:.0010531966030150732},25:{xOff:0,yOff:0,scl:1},28:{xOff:0,yOff:-.2,scl:.000676917226130652},29:{xOff:-2,yOff:-2.6,zRota:.2,scl:.001376794727638135}},e.exports.templates=[{mid:0,scl:.9,mScl:1,zOff:.28,yOff:-.5},{mid:0,noMuz:!0,spnScl:1.3,scl:.9,mScl:.84,zOff:0,yOff:0},{flipAnim:!0,id:3,type:3,scl:2.6,sclMlt:1,yOff:-1,xOff:-1.5,sxRot:.3,sxOff:.35,szOff:-.25},{id:0,type:7,sitOff:1,sitOffZ:.005,trans:!0,yOff:-.7,xOff:1.6,xRot:-.5}],e.exports.skins=a;for(var r=0;r<e.exports.skins.length;r++){if(e.exports.skins[r].index=r,e.exports.skins[r].seas=e.exports.skins[r].seas||1,e.exports.skins[r].type==s.BACK&&(e.exports.skins[r].assetType=2,e.exports.skins[r].keyW="Back"),e.exports.skins[r].type==s.HEAD&&(e.exports.skins[r].assetType=1,e.exports.skins[r].keyW="Head"),e.exports.skins[r].creator){var o=e.exports.skins[r].creator.toLowerCase().split(", ");e.exports.skins[r].creators=o}if(e.exports.skins[r].streamer){var l=e.exports.skins[r].streamer.toLowerCase().split(", ");e.exports.skins[r].streamers=l}if(null!=e.exports.skins[r].template){var c=e.exports.templates[e.exports.skins[r].template];for(var d in c)e.exports.skins[r][d]=c[d]}e.exports.skins[r].free&&(e.exports.skins[r].limT="Free",e.exports.skins[r].noSale=!0,e.exports.skins[r].noSpin=!0),e.exports.skins[r].itemShop&&(e.exports.skins[r].noSale=1==e.exports.skins[r].itemShop,e.exports.skins[r].noSpin=!0,e.exports.skins[r].limited=!0),e.exports.skins[r].ranked&&(e.exports.skins[r].noSale=!0,e.exports.skins[r].noSpin=!0,e.exports.skins[r].limited=!0,e.exports.skins[r].noQuickSell=!0,e.exports.skins[r].limT="Ranked"),e.exports.skins[r].drop&&(e.exports.skins[r].noSale=!0,e.exports.skins[r].noQuickSell=!0,e.exports.skins[r].limT||(e.exports.skins[r].limT="Twitch")),null!=e.exports.skins[r].mapReward&&(e.exports.skins[r].noSpin=!0,e.exports.skins[r].noSale=!0,e.exports.skins[r].noQuickSell=!0,e.exports.skins[r].limT||(e.exports.skins[r].limT="Map Reward")),e.exports.skins[r].package&&(e.exports.skins[r].noSpin=!0,e.exports.skins[r].noQuickSell=!0),e.exports.skins[r].challenge&&(e.exports.skins[r].noSale=!0,e.exports.skins[r].noSpin=!0,e.exports.skins[r].noQuickSell=!0),e.exports.skins[r].craftable&&(e.exports.skins[r].noSale=!0,e.exports.skins[r].noSpin=!0,e.exports.skins[r].noQuickSell=!0,e.exports.skins[r].limT="Craftable"),null!=e.exports.skins[r].bundle&&(e.exports.skins[r].noSale=!0,e.exports.skins[r].noSpin=!0,e.exports.skins[r].noQuickSell=!0,e.exports.skins[r].limT="Bundle #"+(e.exports.skins[r].bundle||0)),e.exports.skins[r].opensea&&(e.exports.skins[r].noSpin=!0,e.exports.skins[r].limT="NFT"),e.exports.skins[r].type==s.COLLECTIBLE&&(e.exports.skins[r].noSpin=!0),e.exports.skins[r].type==s.TICKET&&(e.exports.skins[r].noSpin=!0,e.exports.skins[r].side=2),e.exports.skins[r].battlepass&&(e.exports.skins[r].limT="Battle Pass",e.exports.skins[r].noSale=!0,e.exports.skins[r].noSpin=!0,e.exports.skins[r].noQuickSell=!0),e.exports.skins[r].type==s.PLAYER_CARD&&(e.exports.skins[r].texExt="webp"),e.exports.skins[r].limT&&!e.exports.tags[e.exports.skins[r].limT]&&(e.exports.tags[e.exports.skins[r].limT]=null),e.exports.skins[r].thumbnail=n.getPreview(e.exports.skins[r],e.exports)}},function(e,t){var i={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==i.call(e)}},function(e,t,i){const n=i(4),s=i(1),a=i(40),r=i(12);var o,l;e.exports=function(e){var t=this;e&&(o=i(29),l=i(35)),this.textures=[{alias:"Stone",name:"WALL",src:"wall_0",variants:[{name:"Default",id:0},{name:"Classic",id:1},{name:"Light",id:2},{name:"Voxel",id:3},{name:"Pebbles",id:4},{name:"Cobble",id:5},{name:"Light Pebbles",id:6},{name:"Light Cobble",id:7}]},{name:"DIRT",src:"dirt_0",variants:[{name:"Default",id:0},{name:"Classic",id:1},{name:"Voxel",id:2},{name:"Modern",id:3}]},{alias:"Wood",name:"FLOOR",src:"floor_0",variants:[{name:"Default",id:0},{name:"Classic",id:1},{name:"Classic Alt",id:2},{name:"Modern",id:3}]},{name:"GRID",src:"grid_0"},{name:"GREY",src:"grey_0",variants:[{name:"Default",id:0},{name:"Template",id:1},{name:"Modern",id:2}]},{alias:"None",name:"DEFAULT",src:"default"},{name:"ROOF",src:"roof_0",variants:[{name:"Default",id:0},{name:"Classic",id:1},{name:"Tiled",id:2}]},{name:"FLAG",src:"flag_0",variants:[{name:"Default",id:0},{name:"Classic",id:1},{name:"Classic Alt",id:2}]},{name:"GRASS",src:"grass_1",variants:[{name:"Default",id:0},{name:"Voxel",id:1},{name:"Simple",id:2},{name:"Dense",id:3}]},{name:"CHECK",src:"check_0"},{name:"LINES",src:"lines_0",variants:[{name:"Default",id:0},{name:"Thick",id:1},{name:"Pipes",id:2}]},{name:"BRICK",src:"brick_0",variants:[{name:"Default",id:0},{name:"Classic",id:1},{name:"Classic Alt",id:2},{name:"Dark",id:3},{name:"Light",id:4},{name:"Simple Red",id:5},{name:"Patterned Red",id:6},{name:"Simple Dark",id:7},{name:"Patterned Dark",id:8},{name:"Simple Light",id:9},{name:"Patterned Light",id:10}]},{name:"LINK",src:"link_0",variants:[{name:"Default",id:0},{name:"Type 2",id:1},{name:"Type 3",id:2}],trans:!0},{name:"LIQUID",src:"liquid_0",variants:[{name:"Water",id:0},{name:"Voxel Water",id:1},{name:"Lava",id:2},{name:"Greek Water",id:3}],trans:!0},{name:"GRAIN",src:"grain_0",variants:[{name:"Default",id:0},{name:"Type 2",id:1},{name:"Type 3",id:2}]},{name:"FABRIC",src:"fabric_0",variants:[{name:"Default",id:0},{name:"Type 2",id:1},{name:"Type 3",id:2},{name:"Type 4",id:3}]},{name:"TILE",src:"tile_0",variants:[{name:"Default",id:0},{name:"Light",id:1},{name:"Modern",id:2},{name:"Beveled",id:3}]},{name:"METAL",src:"metal_0",variants:[{name:"Default",id:0},{name:"Brick",id:1}]},{name:"SAND",src:"sand_0",variants:[{name:"Default",id:0},{name:"Voxel",id:1},{name:"Greek",id:2}]},{name:"SNOW",src:"snow_0"}],this.getTextureIdByName=function(e){e=e.toUpperCase();for(var t=0;t<this.textures.length;t++)if(this.textures[t].name==e)return t;return 0},this.getTextureIdBySrc=function(e){e=e.toLowerCase();for(var t=0;t<this.textures.length;t++)if(this.textures[t].src==e)return t;return 0},this.getTextureByName=function(e){e=(e||"").toUpperCase();for(var t=0;t<this.textures.length;t++)if(this.textures[t].name==e)return this.textures[t];return null},this.textureExist=function(e){e=(e||"").toUpperCase();for(var t=0;t<this.textures.length;t++)if(this.textures[t].name==e)return!0;return!1},this.prefabs=[{name:"CUBE",src:"cube_0",genGeo:async(e,i)=>t.generateCube(e,i),editFaces:!0,editFog:!0,movingTexture:!0,frameTexture:!0,defaultSize:[10,10,10],hasHealth:!0,scalable:!0,editAmb:!0,scaleWithSize:!1,editColor:!0,editEmissive:!0,editOpac:!0,hideBoundingBox:!1,editPen:!0,editBulletCol:!0,editAICol:!0,texturable:!0,assetTextures:!0,castShadow:!0,receiveShadow:!0,hasBorder:!0,canInterface:!0,canStretch:!0,canWallJump:!0,canGrapple:!0,canImpulse:!0,canTrans:!0,stepSrc:!0,canComplexColl:!0,editRenderSide:!0,showMinimap:!0,canDirectionalScale:!0},{name:"CRATE",src:"crate_0",scale:6,isProp:!0,gen:e=>t.loadObj(e,"models/crate_0.obj","textures/crate_0.png",e.mSize||this.scale,e.color,"mesh"),hasHealth:!0,editColor:!0,editOpac:!0,dontRound:!0,castShadow:!0,receiveShadow:!0,castShadow:!0,receiveShadow:!0,canInterface:!0,canWallJump:!0,canGrapple:!0,canImpulse:!0,editBulletCol:!0,editAICol:!0,stepSrc:!0,showMinimap:!0,variants:[{name:"Default",id:0},{name:"Minimalistic",id:1},{name:"Classic 2018",id:2,diffM:!0},{name:"Supply",id:3,diffM:!0},{name:"Dusty",id:4,diffM:!0}]},{name:"BARREL",src:"barrel_0",scale:4,mlt:1,isProp:!0,CP:-1,gen:e=>t.loadObj(e,"models/barrel_0.obj","textures/barrel_0.png",e.mSize||this.scale,e.color,"mesh"),hasHealth:!0,editColor:!0,editOpac:!0,dontRound:!0,castShadow:!0,receiveShadow:!0,canInterface:!0,canWallJump:!0,canGrapple:!0,canImpulse:!0,editBulletCol:!0,editAICol:!0,stepSrc:!0,showMinimap:!0,variants:[{name:"Default",id:0},{name:"Classic 2018",id:1,diffM:!0,complex:!0},{name:"Classic 2018 Alt",id:2,diffM:!0,complex:!0},{name:"Classic 2019",id:3,diffM:!0,complex:!0},{name:"Krum",id:4,diffM:!0,complex:!0},{name:"Supply",id:5,diffM:!0,complex:!0}]},{name:"LADDER",src:"cube_0",scale:.5,width:3.2,genGeo:async e=>t.generateLadder(e,e.direction),notTechnical:!0,defaultSize:[2,10,4],scalable:!0,scaleWithSize:!1,editColor:!0,editEmissive:!0,hideBoundingBox:!1,editOpac:!0,texturable:!0,assetTextures:!0,customDirection:!0,castShadow:!0,receiveShadow:!0,canStretch:!0,canTrans:!0,stepSrc:!0,canDirectionalScale:!0},{name:"PLANE",src:"cube_0",genGeo:async e=>t.generatePlane(e,e.size[0],e.size[2]),hasHealth:!0,defaultSize:[4,.01,4],movingTexture:!0,frameTexture:!0,dontRound:!0,scalable:!0,canTerrain:!0,edgeNoise:!0,scaleWithSize:!0,editColor:!0,editPen:!0,editEmissive:!0,editOpac:!0,hideBoundingBox:!1,texturable:!0,assetTextures:!0,castShadow:!0,receiveShadow:!0,doubleSide:!0,canInterface:!0,canStretch:!0,canWallJump:!0,canGrapple:!0,canImpulse:!0,editBulletCol:!0,editAICol:!0,canTrans:!0,canSprite:!0,stepSrc:!0,editFog:!0,editAlphaTest:!0,canComplexColl:!0,showMinimap:!0,canDirectionalScale:!0},{name:"SPAWN_POINT",src:"cube_0",genGeo:async(e,i)=>t.generateSpawn(e,i),notTechnical:!0,notStyleable:!0,scalable:!1,alwaysSee:!0,tool:!0,scaleWithSize:!1,teamable:!0,noTexture:!0,opacity:1e-5,customDirection:!0,dontRound:!0,zone:!0},{name:"CAMERA_POSITION",src:"cube_0",editorGen:e=>t.generateSprite(e,"img/crosshair.png",5),notTechnical:!0,notStyleable:!0,defaultSize:[2,2,2],scalable:!1,isCam:!0,alwaysSee:!0,tool:!0,scaleWithSize:!1},{name:"VEHICLE",src:"vehicle_0",scale:20,gen:e=>t.loadObj(e,"models/vehicle_0.obj","textures/vehicle_0.png",e.mSize||this.scale,e.color,"mesh"),hasHealth:!0,editColor:!0,editOpac:!0,dontRound:!0,complex:!0,emiss:!0,castShadow:!0,receiveShadow:!0,canInterface:!0,canWallJump:!0,canGrapple:!0,canImpulse:!0,editBulletCol:!0,editAICol:!0,stepSrc:!0,showMinimap:!0,variants:[{name:"Default",id:0},{name:"Classic 2018",id:1},{name:"Blue Ute",id:2,diffM:!0},{name:"Red Sedan",id:3,diffM:!0}]},{name:"STACK",src:"stack_0",scale:6,isProp:!0,gen:e=>t.loadObj(e,"models/stack_0.obj","textures/stack_0.png",e.mSize||this.scale,e.color,"mesh"),hasHealth:!0,editColor:!0,editOpac:!0,dontRound:!0,castShadow:!0,receiveShadow:!0,canInterface:!0,canWallJump:!0,canGrapple:!0,canImpulse:!0,editBulletCol:!0,editAICol:!0,stepSrc:!0,showMinimap:!0},{name:"RAMP",src:"cube_0",genGeo:async e=>t.generateRamp(e,e.direction),notTechnical:!0,defaultSize:[10,5,10],movingTexture:!0,frameTexture:!0,scalable:!0,scaleWithSize:!1,hideBoundingBox:!1,boostable:!0,editColor:!0,editEmissive:!0,texturable:!0,assetTextures:!0,shootable:!0,customDirection:!0,castShadow:!0,receiveShadow:!0,doubleSide:!0,editOpac:!0,canStretch:!0,editAICol:!0,canTrans:!0,stepSrc:!0,noRotation:!0,showMinimap:!0,canDirectionalScale:!0},{name:"SCORE_ZONE",src:"cube_0",genGeo:async(e,i)=>t.generateCube(e,i),notStyleable:!0,customScore:!0,defaultSize:[10,10,10],scalable:!0,noTexture:!0,opacity:.3,lineCol:16776960,tool:!0,zone:!0,canDirectionalScale:!0},{name:"BILLBOARD",src:"cube_0",genGeo:async e=>t.generateBillboard(0,0,0,...e.size),hasHealth:!0,defaultSize:[40,.01,20],lineCol:16776960,dontRound:!0,scalable:!0,canTerrain:!0,scaleWithSize:!0,hideBoundingBox:!1,castShadow:!0,receiveShadow:!0,doubleSide:!0,canInterface:!0,canWallJump:!0,canGrapple:!0,canImpulse:!0,canSprite:!0,editFog:!0,canDirectionalScale:!0},{name:"DEATH_ZONE",src:"cube_0",genGeo:async(e,i)=>t.generateCube(e,i),notStyleable:!0,defaultSize:[10,10,10],scalable:!0,noTexture:!0,opacity:.3,lineCol:16711680,tool:!0,zone:!0,forceCollision:!0,hasHealth:!0,canInterface:!0,canDirectionalScale:!0},{name:"PARTICLES",src:"cube_0",genGeo:async(e,i)=>t.generateCube(e,i),customDirection:!0,notTechnical:!0,defaultSize:[20,20,20],editColor:!0,scalable:!0,noTexture:!0,opacity:.3,lineCol:3080191,tool:!0,canDirectionalScale:!0},{name:"OBJECTIVE",src:"cube_0",genGeo:async(e,i)=>t.generateObjective(e,i),canSetObjective:!0,notTechnical:!0,notStyleable:!0,defaultSize:[50,50,50],scalable:!0,doubleSide:!0,lineCol:13107455,tool:!0,zone:!0,doubleSide:!0,canDirectionalScale:!0},{name:"TREE",src:"tree_0",scale:10,gen:e=>t.loadObj(e,"models/tree_0.obj","textures/tree_0.png",e.mSize||this.scale,e.color,"mesh"),hasHealth:!0,editColor:!0,editOpac:!0,dontRound:!0,complex:!0,castShadow:!0,receiveShadow:!0,canInterface:!0,canWallJump:!0,canGrapple:!0,canImpulse:!0,editBulletCol:!0,editAICol:!0,stepSrc:!0,showMinimap:!0,variants:[{name:"Default",id:0},{name:"Classic",id:1,diffM:!0},{name:"Palm",id:2,diffM:!0},{name:"Dead",id:3,diffM:!0},{name:"Snowy Pine",id:4,diffM:!0},{name:"Poly",id:5,diffM:!0},{name:"Jungle",id:6,diffM:!0},{name:"Pine",id:7,diffM:!0},{name:"HD Poly",id:8,diffM:!0}]},{name:"CONE",src:"cone_0",scale:4,isProp:!0,CPY:-.5,CP:-2,gen:e=>t.loadObj(e,"models/cone_0.obj","textures/cone_0.png",e.mSize||this.scale,e.color,"mesh"),hasHealth:!0,editColor:!0,editOpac:!0,dontRound:!0,complex:!0,castShadow:!0,receiveShadow:!0,canInterface:!0,canWallJump:!0,canGrapple:!0,canImpulse:!0,editBulletCol:!0,editAICol:!0,stepSrc:!0,showMinimap:!0,noMinimap:!0,variants:[{name:"Default",id:0},{name:"Modern",id:1,diffM:!0}]},{name:"CONTAINER",src:"container_0",scale:7,gen:e=>t.loadObj(e,"models/container_0.obj","textures/container_0.png",e.mSize||this.scale,e.color,"mesh"),hasHealth:!0,editColor:!0,editOpac:!0,dontRound:!0,castShadow:!0,receiveShadow:!0,canInterface:!0,canWallJump:!0,canGrapple:!0,canImpulse:!0,editBulletCol:!0,editAICol:!0,stepSrc:!0,showMinimap:!0},{name:"GRASS",src:"grass_0",scale:32,gen:e=>t.loadObj(e,"models/grass_0.obj","textures/grass_0.png",e.mSize||this.scale,e.color,"mesh"),hasHealth:!0,noDetail:!0,editColor:!0,editOpac:!0,complex:!0,doubleSide:!0,transparent:!0,receiveShadow:!0,canInterface:!0,frameT:180,frames:4,alphaTest:.02,noMinimap:!0},{name:"CONTAINERR",src:"containerr_0",scale:7,gen:e=>t.loadObj(e,"models/containerr_0.obj","textures/containerr_0.png",e.mSize||this.scale,e.color,"mesh"),hasHealth:!0,editColor:!0,editOpac:!0,dontRound:!0,castShadow:!0,receiveShadow:!0,canInterface:!0,canWallJump:!0,canGrapple:!0,canImpulse:!0,editBulletCol:!0,editAICol:!0,stepSrc:!0,showMinimap:!0},{name:"ACIDBARREL",src:"acidbarrel_0",scale:4,isProp:!0,gen:e=>t.loadObj(e,"models/acidbarrel_0.obj","textures/acidbarrel_0.png",e.mSize||this.scale,e.color,"mesh"),hasHealth:!0,editColor:!0,editOpac:!0,dontRound:!0,emiss:!0,castShadow:!0,receiveShadow:!0,canInterface:!0,canWallJump:!0,canGrapple:!0,canImpulse:!0,editBulletCol:!0,editAICol:!0,stepSrc:!0,showMinimap:!0,variants:[{name:"Default",id:0},{name:"HD",id:1,diffM:!0,noEmis:!0,complex:!0}]},{name:"DOOR",src:"door_0",scale:5,gen:e=>t.loadObj(e,"models/door_0.obj","textures/door_0.png",e.mSize||this.scale,e.color,"mesh"),hasHealth:!0,editColor:!0,editOpac:!0,dontRound:!0,castShadow:!0,receiveShadow:!0,canInterface:!0,canWallJump:!0,canGrapple:!0,canImpulse:!0,editBulletCol:!0,editAICol:!0,stepSrc:!0,showMinimap:!0,noMinimap:!0,variants:[{name:"Default",id:0},{name:"Modern",id:1,diffM:!0},{name:"Modern Grated",id:2,diffM:!0},{name:"Modern Metal",id:3,diffM:!0}]},{name:"WINDOW",src:"window_0",scale:6,gen:e=>t.loadObj(e,"models/window_0.obj","textures/window_0.png",e.mSize||this.scale,e.color,"mesh"),noDetail:!0,hasHealth:!0,editColor:!0,editOpac:!0,dontRound:!0,castShadow:!0,transparent:!0,receiveShadow:!0,canInterface:!0,canWallJump:!0,canGrapple:!0,canImpulse:!0,editBulletCol:!0,editAICol:!0,stepSrc:!0,showMinimap:!0,noMinimap:!0,variants:[{name:"Default",id:0},{name:"Modern",id:1,diffM:!0},{name:"Wood Red",id:2,diffM:!0},{name:"Wood Blue",id:3,diffM:!0},{name:"Wood with Awning",id:4,diffM:!0},{name:"Metal",id:5,diffM:!0},{name:"Mosque",id:6,diffM:!0}]},{name:"FLAG",src:"cube_0",genGeo:async(e,i)=>t.generateFlag(e,i),notTechnical:!0,notStyleable:!0,noDetail:!0,defaultSize:[n.flagZoneS,n.flagZoneH,n.flagZoneS],scalable:!1,tool:!0,scaleWithSize:!1,lineCol:13107455,teamable:!0,noDefault:!0,canNeutral:!0,canDirectionalScale:!0},{name:"GATE",src:"cube_0",genGeo:async(e,i)=>t.generateCube(e,i),editFaces:!0,editFog:!0,canUndo:!0,interact:!0,customScore:!0,movingTexture:!0,frameTexture:!0,defaultSize:[10,10,10],scalable:!0,forceCollision:!0,editAmb:!0,scaleWithSize:!1,editColor:!0,editEmissive:!0,editOpac:!0,teamable:!0,lineCol:16711935,texturable:!0,assetTextures:!0,tool2:!0,castShadow:!0,receiveShadow:!0,hasBorder:!0,canInterface:!0,canWallJump:!0,canGrapple:!0,canImpulse:!0,editBulletCol:!0,editAICol:!0,canTrans:!0,canStretch:!0,interactMsg:!0,stepSrc:!0,showMinimap:!0,canDirectionalScale:!0},{name:"CHECK_POINT",src:"cube_0",genGeo:async(e,i)=>t.generateCube(e,i),notStyleable:!0,defaultSize:[10,10,10],scalable:!0,teamable:!0,noTexture:!0,opacity:.3,lineCol:252613,tool:!0,customDirection:!0,zone:!0,canDirectionalScale:!0},{name:"WEAPON_PICKUP",src:"cube_0",genGeo:async(e,i)=>t.generateWeapon(e,i),notStyleable:!0,interact:!0,customScore:!0,teamable:!0,defaultSize:[n.pickupZoneX,n.pickupZoneH,n.pickupZoneZ],scalable:!1,tool:!0,scaleWithSize:!1,lineCol:3595263,noTexture:!0,texturable:!1,opacity:.1,interactMsg:!0},{name:"TELEPORTER",src:"cube_0",genGeo:async(e,i)=>t.generateCube(e,i),notStyleable:!0,defaultSize:[10,10,10],teamable:!0,scalable:!0,noTexture:!0,opacity:.3,lineCol:11665392,tool:!0,customDirection:!0,optionalDirection:!0,zone:!0,canDirectionalScale:!0},{name:"TEDDY",src:"teddy_0",scale:6,isProp:!0,CPY:-3,CP:-3.6,gen:e=>t.loadObj(e,"models/teddy_0.obj","textures/teddy_0.png",e.mSize||this.scale,e.color,"mesh"),hasHealth:!0,noDetail:!0,editColor:!0,editOpac:!0,dontRound:!0,complex:!0,castShadow:!0,receiveShadow:!0,canInterface:!0,canWallJump:!0,canGrapple:!0,canImpulse:!0,editBulletCol:!0,editAICol:!0,stepSrc:!0,showMinimap:!0,noMinimap:!0},{name:"TRIGGER",src:"cube_0",editFaces:!0,editFog:!0,canTargetInterface:!0,hasHealth:!0,movingTexture:!0,frameTexture:!0,defaultSize:[10,10,10],scalable:!0,forceCollision:!0,editAmb:!0,scaleWithSize:!1,editColor:!0,editEmissive:!0,editOpac:!0,teamable:!0,lineCol:16711935,texturable:!0,assetTextures:!0,tool2:!0,castShadow:!0,receiveShadow:!0,canInterface:!0,canWallJump:!0,canGrapple:!0,canImpulse:!0,editBulletCol:!0,editAICol:!0,canTrans:!0,canStretch:!0,dontRound:!0,complex:!0,hasSpin:!0,hasSpinDir:!0,canScript:!0,alterHitbox:!0,genGeo:async(e,i)=>t.generateCube(e,i),scale:1,gen:e=>t[(e.assetID||"").includes("g")||(e.assetID||"").includes("q")||(e.assetID||"").includes("f")?"loadAnimObj":"loadObj"](e,"model.obj","model.png",e.mSize||this.scale,e.color,"mesh"),stepSrc:!0,editRenderSide:!0,editAlphaTest:!0,showMinimap:!0,canDirectionalScale:!0},{name:"SIGN",src:"cube_0",noCol:!0,genGeo:async e=>t.generateSign(e,0,0,0,...e.size),notTechnical:!0,movingTexture:!0,hasText:!0,defaultSize:[40,.01,10],forceCollision:!0,lineCol:16776960,scalable:!0,scaleWithSize:!0,hideBoundingBox:!1,tool:!0,castShadow:!0,receiveShadow:!0,doubleSide:!0,canSprite:!0,canDirectionalScale:!0},{name:"DEPOSIT_BOX",src:"cube_0",genGeo:async(e,i)=>t.generateCube(e,i),editFaces:!0,editFog:!0,movingTexture:!0,frameTexture:!0,defaultSize:[10,10,10],scalable:!0,forceCollision:!0,editAmb:!0,scaleWithSize:!1,editColor:!0,editEmissive:!0,editOpac:!0,teamable:!0,lineCol:16711935,texturable:!0,assetTextures:!0,tool2:!0,castShadow:!0,receiveShadow:!0,hasBorder:!0,canInterface:!0,canWallJump:!0,canGrapple:!0,canImpulse:!0,editBulletCol:!0,editAICol:!0,canTrans:!0,canStretch:!0,interactMsg:!0,stepSrc:!0,showMinimap:!0,canDirectionalScale:!0},{name:"LIGHT_CONE",src:"cube_0",noCol:!0,edCat:"lights",genGeo:async(e,i)=>t.generateCone(e,i),notTechnical:!0,defaultSize:[10,10,10],movingTexture:!0,noDetail:!0,scalable:!0,noCollision:!0,scaleWithSize:!1,editOpac:!0,editColor:!0,lineCol:16711935,castShadow:!0,receiveShadow:!0,complex:!0,doubleSide:!0,blending:2,transparent:!0,canDirectionalScale:!0},{name:"CAMERA",src:"cube_0",genGeo:async(e,i)=>t.generateCube(e,i),objectiveLink:!0,isCam:!0,notTechnical:!0,notStyleable:!0,defaultSize:[10,10,10],scalable:!1,tool:!0,scaleWithSize:!1},{name:"SPHERE",src:"cube_0",noCol:!0,genGeo:async(e,i)=>t.generateSphere(...e.size,i),editFog:!0,notTechnical:!0,movingTexture:!0,frameTexture:!0,defaultSize:[5,5,5],scalable:!0,scaleWithSize:!1,editColor:!0,editEmissive:!0,editOpac:!0,hideBoundingBox:!1,noCollision:!0,texturable:!0,assetTextures:!0,canTrans:!0,canComplexColl:!0,canDirectionalScale:!0},{name:"PLACEHOLDER",src:"cube_0",genGeo:async(e,i)=>t.generateCube(e,i),defaultSize:[10,10,10],scalable:!0,noTexture:!0,noExport:!0,tool:!0,opacity:.1,lineCol:0},{name:"CARDB",src:"cardb_0",scale:5,isProp:!0,CPY:-2.5,CP:-2,gen:e=>t.loadObj(e,"models/cardb_0.obj","textures/cardb_0.png",e.mSize||this.scale,e.color,"mesh"),hasHealth:!0,editColor:!0,editOpac:!0,dontRound:!0,castShadow:!0,receiveShadow:!0,canInterface:!0,canWallJump:!0,canGrapple:!0,canImpulse:!0,editBulletCol:!0,editAICol:!0,stepSrc:!0,showMinimap:!0},{name:"PALLET",src:"pallet_0",scale:6,isProp:!0,CPY:-5,gen:e=>t.loadObj(e,"models/pallet_0.obj","textures/pallet_0.png",e.mSize||this.scale,e.color,"mesh"),hasHealth:!0,editColor:!0,editOpac:!0,dontRound:!0,complex:!0,castShadow:!0,receiveShadow:!0,canInterface:!0,canWallJump:!0,canGrapple:!0,canImpulse:!0,editBulletCol:!0,editAICol:!0,stepSrc:!0,showMinimap:!0},{name:"LIQUID",src:"cube_0",noCol:!0,genGeo:async e=>t.generateLiquid(e,e.size[0],e.size[2]),noCollision:!0,notTechnical:!0,defaultSize:[25,.01,25],movingTexture:!0,dontRound:!0,scalable:!0,canTerrain:!0,scaleWithSize:!0,editColor:!0,editEmissive:!0,editOpac:!0,hideBoundingBox:!1,texturable:!0,assetTextures:!0,castShadow:!0,receiveShadow:!0,doubleSide:!0,canDirectionalScale:!0},{name:"SOUND_EMITTER",src:"cube_0",noCol:!0,genGeo:async(e,i)=>t.generateSphere(...e.size,i),hasSound:!0,notTechnical:!0,notStyleable:!0,defaultSize:[5,5,5],hideBoundingBox:!1,noCollision:!0,tool:!0,wireframe:!0,assetSounds:!0},{name:"EVENT",src:"event_0",scale:2,gen:e=>t.loadObj(e,"models/event_0.obj","textures/event_0.png",e.mSize||this.scale,e.color,"mesh"),texRange:3,noExport:!0,localOnly:!0,editColor:!0,editOpac:!0,dontRound:!0,complex:!0,castShadow:!0,receiveShadow:!0,variants:[{name:"Random",id:0},{name:"Yellow",id:1},{name:"Pink",id:2},{name:"Blue",id:3},{name:"Golden",id:4},{name:"Diamond",id:5}]},{name:"BOT_PATH_NODE",src:"cube_0",noCol:!0,genGeo:async(e,i)=>t.generateOcta(...e.size,i,"#00ffff"),notTechnical:!0,notStyleable:!0,defaultSize:[3,5,3],lineCol:65535,noTexture:!0,hideBoundingBox:!1,noCollision:!0,tool:!0},{name:"PREMIUM_ZONE",src:"cube_0",genGeo:async(e,i)=>t.generateCube(e,i),notStyleable:!0,defaultSize:[10,10,10],scalable:!0,noTexture:!0,opacity:.3,lineCol:16498733,tool:!0,hasBorder:!0,zone:!0,forceCollision:!0,hasHealth:!0,canInterface:!0,canDirectionalScale:!0},{name:"VERIFIED_ZONE",src:"cube_0",genGeo:async(e,i)=>t.generateCube(e,i),notStyleable:!0,defaultSize:[10,10,10],scalable:!0,noTexture:!0,opacity:.3,lineCol:4244735,tool:!0,hasBorder:!0,zone:!0,forceCollision:!0,hasHealth:!0,canInterface:!0,canDirectionalScale:!0},{name:"CUSTOM_ASSET",src:"model",scale:1,custom:!0,gen:e=>t[(e.assetID||"").includes("g")||(e.assetID||"").includes("q")||(e.assetID||"").includes("f")?"loadAnimObj":"loadObj"](e,"model.obj","model.png",e.mSize||this.scale,e.color,"mesh"),hasHealth:!0,editColor:!0,editOpac:!0,dontRound:!0,complex:!0,castShadow:!0,receiveShadow:!0,canInterface:!0,hasSpin:!0,hasSpinDir:!0,canWallJump:!0,canGrapple:!0,canImpulse:!0,editBulletCol:!0,editAICol:!0,canInterface:!0,canScript:!0,editRenderSide:!0,editAlphaTest:!0,alterHitbox:!0,editFog:!0,canTrans:!0,canComplexColl:!0,showMinimap:!0},{name:"BOMB_SITE",src:"cube_0",genGeo:async(e,i)=>t.generateObjective(e,i,!0),notTechnical:!0,notStyleable:!0,defaultSize:[25,25,25],scalable:!0,doubleSide:!0,lineCol:9600493,tool:!0,zone:!0,doubleSide:!0,canDirectionalScale:!0},{name:"BOOST_PAD",src:"cube_0",scale:4,genGeo:async(e,i)=>t.generatePad(e,i),notTechnical:!0,notStyleable:!0,defaultSize:[10,.5,10],scalable:!0,tool:!0,scaleWithSize:!1,lineCol:13107455,noDefault:!0,bounce:!0,canDirectionalScale:!0,customDirection:!0,altDirection:!0},{name:"TEAM_ZONE",src:"cube_0",genGeo:async(e,i)=>t.generateCube(e,i),notStyleable:!0,defaultSize:[10,10,10],scalable:!0,teamable:!0,noTexture:!0,opacity:.3,lineCol:4244735,tool:!0,hasBorder:!0,zone:!0,forceCollision:!0,hasHealth:!0,canInterface:!0,canDirectionalScale:!0},{name:"CYLINDER",src:"cube_0",genGeo:async(e,i)=>t.generateCylinder(e,i),canInterface:!0,hasHealth:!0,movingTexture:!0,frameTexture:!0,defaultSize:[10,10,10],scalable:!0,scaleWithSize:!1,editColor:!0,editEmissive:!0,editOpac:!0,hideBoundingBox:!1,texturable:!0,assetTextures:!0,castShadow:!0,receiveShadow:!0,hasSpin:!0,fakeScale:!0,doubleSide:!0,canTrans:!0,canStretch:!0,editBulletCol:!0,editAICol:!0,editPen:!0,canComplexColl:!0},{name:"POLICE",src:"police_0",scale:4,mlt:1,gen:e=>t.loadObj(e,"models/police_0.obj","textures/police_0.png",e.mSize||this.scale,e.color,"mesh"),hasHealth:!0,editColor:!0,editOpac:!0,dontRound:!0,castShadow:!0,receiveShadow:!0,canInterface:!0,canWallJump:!0,canGrapple:!0,canImpulse:!0,editBulletCol:!0,editAICol:!0,stepSrc:!0,showMinimap:!0,noMinimap:!0},{name:"CAGE",src:"cage_0",scale:6,isProp:!0,gen:e=>t.loadObj(e,"models/cage_0.obj","textures/cage_0.png",e.mSize||this.scale,e.color,"mesh"),hasHealth:!0,editColor:!0,editOpac:!0,dontRound:!0,castShadow:!0,receiveShadow:!0,canInterface:!0,canWallJump:!0,canGrapple:!0,canImpulse:!0,editBulletCol:!0,editAICol:!0,stepSrc:!0,showMinimap:!0},{name:"EBARREL",src:"ebarrel_0",scale:4,mlt:1,isProp:!0,CP:-1,gen:e=>t.loadObj(e,"models/ebarrel_0.obj","textures/ebarrel_0.png",e.mSize||this.scale,e.color,"mesh"),hasHealth:!0,editColor:!0,complex:!0,editOpac:!0,dontRound:!0,castShadow:!0,receiveShadow:!0,canInterface:!0,canWallJump:!0,canGrapple:!0,canImpulse:!0,editBulletCol:!0,editAICol:!0,stepSrc:!0,showMinimap:!0,variants:[{name:"Default",id:0},{name:"Poly",id:1,diffM:!0},{name:"Fuel",id:2,diffM:!0}]},{name:"SHOWCASE",src:null,scale:1,mlt:1,noCol:!0,noCollision:!0,gen:e=>t.loadItem(e),editColor:!0,complex:!0,editOpac:!0,dontRound:!0,hasSpin:!0,hasSpinDir:!0,castShadow:!0,receiveShadow:!0},{name:"POINT_LIGHT",src:"cube_0",edCat:"lights",noCol:!0,genGeo:async(e,i)=>t.generatePointLight(...e.size,i),notTechnical:!0,noTexture:!0,wireframe:!0,tool:!0,defaultSize:[5,5,5],editColor:!0,hideBoundingBox:!1,noCollision:!0,light:!0,noDetail:!0},{name:"GHOST",src:"ghost_0",scale:4,gen:e=>t.loadObj(e,"models/ghost_0.obj","textures/ghost_0.png",e.mSize||this.scale,e.color,"mesh"),hasHealth:!0,editColor:!0,editOpac:!0,dontRound:!0,emiss:!0,castShadow:!0,receiveShadow:!0,canInterface:!0,canWallJump:!0,canGrapple:!0,canImpulse:!0,editBulletCol:!0,editAICol:!0,stepSrc:!0,showMinimap:!0,noMinimap:!0},{name:"AI_SPAWNER",src:"ghost_0",ai:!0,scale:4,gen:e=>t[(e.assetID||"").includes("g")||(e.assetID||"").includes("q")||(e.assetID||"").includes("f")?"loadAnimObj":"loadObj"](e,"models/ghost_0.obj","textures/ghost_0.png",e.mSize||this.scale,e.color,"mesh",e.mYOff||0,0,s.toRad(e.mROff||0)),hasHealth:!0,editColor:!0,editOpac:!0,dontRound:!0,complex:!0,teamable:!0,castShadow:!0,receiveShadow:!0,transparent:!0,customScore:!0,canInterface:!0,canTargetInterface:!0,alterHitbox:!0,tool2:!0,editRenderSide:!0,editAlphaTest:!0,editFog:!0,canTrans:!0,frameTexture:!0},{name:"PUMPKIN",src:"pumpkin_0",scale:4,mlt:1,isProp:!0,gen:e=>t.loadObj(e,"models/pumpkin_0.obj","textures/pumpkin_0.png",e.mSize||this.scale,e.color,"mesh"),emiss:!0,hasHealth:!0,editColor:!0,editOpac:!0,dontRound:!0,castShadow:!0,receiveShadow:!0,canInterface:!0,canWallJump:!0,canGrapple:!0,canImpulse:!0,editBulletCol:!0,editAICol:!0,stepSrc:!0,showMinimap:!0,noMinimap:!0},{name:"RUNE",src:"rune_0",noCol:!0,genGeo:async e=>t.generateRune(e,e.size[0],e.size[2]),defaultSize:[20,.01,20],notTechnical:!0,movingTexture:!0,scalable:!0,noCollision:!0,scaleWithSize:!0,editOpac:!0,editColor:!0,editEmissive:!0,lineCol:16711935,castShadow:!1,receiveShadow:!0,complex:!0,doubleSide:!0,fakeScale:!0,alphaTest:.9,canWallJump:!0,canGrapple:!0,canImpulse:!0,editBulletCol:!0,editAICol:!0,canSprite:!0,stepSrc:!0,showMinimap:!0,noMinimap:!0},{name:"SKELETON",src:"skeleton_0",scale:4,mlt:1,isProp:!0,gen:e=>t.loadObj(e,"models/skeleton_0.obj","textures/skeleton_0.png",e.mSize||this.scale,e.color,"mesh"),hasHealth:!0,editColor:!0,editOpac:!0,dontRound:!0,castShadow:!0,receiveShadow:!0,canInterface:!0,canWallJump:!0,canGrapple:!0,canImpulse:!0,editBulletCol:!0,editAICol:!0,stepSrc:!0,showMinimap:!0,noMinimap:!0},{name:"KNIGHT",src:"knight_0",scale:4,CPY:4,mlt:1,isProp:!0,gen:e=>t.loadObj(e,"models/knight_0.obj","textures/knight_0.png",e.mSize||this.scale,e.color,"mesh"),hasHealth:!0,editColor:!0,editOpac:!0,dontRound:!0,castShadow:!0,receiveShadow:!0,canInterface:!0,canWallJump:!0,canGrapple:!0,canImpulse:!0,editBulletCol:!0,editAICol:!0,stepSrc:!0,showMinimap:!0,noMinimap:!0},{name:"GIFT",src:"gift_0",scale:2,isProp:!0,CPY:0,CP:0,mlt:1,gen:e=>t.loadObj(e,"models/gift_0.obj","textures/gift_0.png",e.mSize||this.scale,e.color,"mesh"),hasHealth:!0,editColor:!0,editOpac:!0,dontRound:!0,castShadow:!0,receiveShadow:!0,canInterface:!0,canWallJump:!0,canGrapple:!0,canImpulse:!0,editBulletCol:!0,editAICol:!0,texRange:3,stepSrc:!0,showMinimap:!0,noMinimap:!0,variants:[{name:"Random",id:0},{name:"Pink",id:1},{name:"Yellow",id:2},{name:"Green",id:3},{name:"White",id:4}]},{name:"CHRISTMASTREE",src:"christmastree_0",scale:2,mlt:1,gen:e=>t.loadObj(e,"models/christmastree_0.obj","textures/christmastree_0.png",e.mSize||this.scale,e.color,"mesh"),hasHealth:!0,editColor:!0,editOpac:!0,dontRound:!0,castShadow:!0,receiveShadow:!0,canInterface:!0,canWallJump:!0,canGrapple:!0,canImpulse:!0,editBulletCol:!0,editAICol:!0,stepSrc:!0,showMinimap:!0,noMinimap:!0},{name:"CANE",src:"cane_0",scale:2,mlt:1,gen:e=>t.loadObj(e,"models/cane_0.obj","textures/cane_0.png",e.mSize||this.scale,e.color,"mesh"),hasHealth:!0,editColor:!0,editOpac:!0,dontRound:!0,castShadow:!0,receiveShadow:!0,canInterface:!0,canWallJump:!0,canGrapple:!0,canImpulse:!0,editBulletCol:!0,editAICol:!0,stepSrc:!0,showMinimap:!0,noMinimap:!0},{name:"LIGHT_BAR",src:"cube_0",noCol:!0,edCat:"lights",genGeo:async e=>t.generateBar(e,e.size[0],e.size[2]),notTechnical:!0,defaultSize:[10,.01,5],movingTexture:!0,dontRound:!0,scalable:!0,canTerrain:!0,noDetail:!0,noCollision:!0,scaleWithSize:!0,editOpac:!0,editColor:!0,lineCol:16711935,castShadow:!0,receiveShadow:!0,complex:!0,doubleSide:!0,blending:2,canSprite:!0,transparent:!0,canDirectionalScale:!0},{name:"PATH_NODE",src:"cube_0",noCol:!0,genGeo:async(e,i)=>t.generateOcta(...e.size,i),notTechnical:!0,notStyleable:!0,defaultSize:[5,5,5],lineCol:16711935,noTexture:!0,hideBoundingBox:!1,noCollision:!0,tool:!0},{name:"DIRECTIONAL_LIGHT",src:"cube_0",noCol:!0,edCat:"lights",genGeo:async(e,i)=>t.generateDirectionalLight(...e.size,i),notTechnical:!0,defaultSize:[4,4,4],editColor:!0,wireframe:!0,tool:!0,noTexture:!0,noDetail:!0,noCollision:!0,lineCol:16711935,castShadow:!0,receiveShadow:!0,complex:!0,doubleSide:!0,hideBoundingBox:!1},{name:"RECTAREA_LIGHT",src:"cube_0",noCol:!0,edCat:"lights",genGeo:async e=>t.generateRectAreaLight(e,e.size[0],e.size[1]),notTechnical:!0,defaultSize:[10,10,.01],dontRound:!0,scalable:!0,scaleWithSize:!0,editColor:!0,tool:!0,noTexture:!0,noDetail:!0,noCollision:!0,lineCol:16711935,castShadow:!0,receiveShadow:!0,complex:!0,doubleSide:!0,hideBoundingBox:!1,canDirectionalScale:!0},{name:"SPOT_LIGHT",src:"cube_0",noCol:!0,edCat:"lights",genGeo:async(e,i)=>t.generateSpotLight(...e.size,i),notTechnical:!0,defaultSize:[4,4,4],editColor:!0,wireframe:!0,tool:!0,noTexture:!0,noDetail:!0,noCollision:!0,lineCol:16711935,castShadow:!0,receiveShadow:!0,complex:!0,doubleSide:!0,hideBoundingBox:!1},{name:"PRIZE_WHEEL",src:"cube_0",genGeo:async e=>t.generateSpinner(e,e.direction),defaultSize:[.01,10,10],customDirection:!0,extraDirection:!0,scalable:!0,forceCollision:!0,editAmb:!0,scaleWithSize:!1,lineCol:16711935,tool2:!0,castShadow:!0,receiveShadow:!0,canTrans:!0,canStretch:!0,noScaleX:!0,alphaTest:.02,fakeScale:2,noRotation:!0},{name:"KR_ZONE",src:"cube_0",genGeo:async(e,i)=>t.generateCube(e,i),notStyleable:!0,defaultSize:[10,10,10],scalable:!0,noTexture:!0,opacity:.3,lineCol:4244735,tool:!0,hasBorder:!0,zone:!0,forceCollision:!0,hasHealth:!0,canInterface:!0,noMinimap:!0,canDirectionalScale:!0},{name:"NOPVP_ZONE",src:"cube_0",genGeo:async(e,i)=>t.generateCube(e,i),notStyleable:!0,defaultSize:[10,10,10],scalable:!0,noTexture:!0,opacity:.3,lineCol:4244735,tool:!0,hasBorder:!0,zone:!0,forceCollision:!0,hasHealth:!0,canInterface:!0,noMinimap:!0,canDirectionalScale:!0},{name:"PVP_ZONE",src:"cube_0",genGeo:async(e,i)=>t.generateCube(e,i),notStyleable:!0,defaultSize:[10,10,10],scalable:!0,noTexture:!0,opacity:.3,lineCol:4244735,tool:!0,hasBorder:!0,zone:!0,forceCollision:!0,hasHealth:!0,canInterface:!0,noMinimap:!0,canDirectionalScale:!0},{name:"LEADERBOARD",src:"cube_0",noCol:!0,genGeo:async e=>t.generateSign(e,0,0,0,...e.size),notTechnical:!0,movingTexture:!0,hasText:!0,defaultSize:[40,.01,10],forceCollision:!0,lineCol:9849600,scalable:!0,scaleWithSize:!0,hideBoundingBox:!1,tool:!0,castShadow:!0,receiveShadow:!0,doubleSide:!0,canSprite:!0,noMinimap:!0,canDirectionalScale:!0},{name:"TILES",src:"tiles_0",scale:10,gen:e=>t.loadObj(e,"models/tiles_0.obj","textures/tiles_0.png",e.mSize||this.scale,e.color,"mesh"),hasHealth:!0,editColor:!0,editOpac:!0,dontRound:!0,castShadow:!0,receiveShadow:!0,canInterface:!0,canWallJump:!0,canGrapple:!0,canImpulse:!0,editBulletCol:!0,editAICol:!0,stepSrc:!0,noMinimap:!0},{name:"CLOUDS",src:"clouds_0",scale:3,gen:e=>t.loadObj(e,"models/clouds_0.obj","textures/clouds_0.png",e.mSize||this.scale,e.color,"mesh"),hasHealth:!0,editColor:!0,editOpac:!0,dontRound:!0,castShadow:!0,receiveShadow:!0,canInterface:!0,canWallJump:!0,canGrapple:!0,canImpulse:!0,editBulletCol:!0,editAICol:!0,stepSrc:!0,noMinimap:!0},{name:"PARTNER_ZONE",src:"cube_0",genGeo:async(e,i)=>t.generateCube(e,i),notStyleable:!0,defaultSize:[10,10,10],scalable:!0,noTexture:!0,opacity:.3,lineCol:10039961,tool:!0,hasBorder:!0,zone:!0,forceCollision:!0,hasHealth:!0,canInterface:!0,noMinimap:!0,canDirectionalScale:!0},{name:"SPRITE",src:"cube_0",genGeo:async e=>t.generatePlane(e,e.size[0],e.size[2]),defaultSize:[4,.01,4],noCol:!0,movingTexture:!0,frameTexture:!0,dontRound:!0,scalable:!0,canTerrain:!0,scaleWithSize:!0,editColor:!0,editEmissive:!0,editOpac:!0,hideBoundingBox:!1,texturable:!0,assetTextures:!0,castShadow:!0,receiveShadow:!0,doubleSide:!0,canTrans:!0,canDirectionalScale:!0},{name:"DOMINATION_ZONE",src:"cube_0",genGeo:async(e,i)=>t.generateObjective(e,i),notTechnical:!0,notStyleable:!0,defaultSize:[35,35,35],scalable:!0,doubleSide:!0,lineCol:14606046,tool:!0,zone:!0,canDirectionalScale:!0},{name:"ROPE_LADDER",src:"cube_0",genGeo:async(e,i)=>t.generateRope(e,i),editFog:!0,movingTexture:!0,frameTexture:!0,notTechnical:!0,defaultSize:[2,10,2],editAmb:!0,scalable:!0,scaleWithSize:!1,editColor:!0,editEmissive:!0,editOpac:!0,hideBoundingBox:!1,fakeScale:!0,texturable:!0,assetTextures:!0,castShadow:!0,receiveShadow:!0,canStretch:!0,canTrans:!0,stepSrc:!0},{name:"ENVIRONMENT_ZONE",src:"cube_0",genGeo:async(e,i)=>t.generateCube(e,i),notStyleable:!0,defaultSize:[100,100,100],scalable:!0,noTexture:!0,opacity:.3,lineCol:4244735,tool:!0,zone:!0,noMinimap:!0,canDirectionalScale:!0},{name:"KPD_ZONE",src:"cube_0",genGeo:async(e,i)=>t.generateCube(e,i),notStyleable:!0,defaultSize:[10,10,10],scalable:!0,noTexture:!0,opacity:.3,lineCol:4244735,tool:!0,hasBorder:!0,zone:!0,forceCollision:!0,hasHealth:!0,canInterface:!0,noMinimap:!0,canDirectionalScale:!0},{name:"DUMPSTER",src:"dumpster_0",scale:4,gen:e=>t.loadObj(e,"models/dumpster_0.obj","textures/dumpster_0.png",e.mSize||this.scale,e.color,"mesh"),hasHealth:!0,editColor:!0,editOpac:!0,dontRound:!0,castShadow:!0,receiveShadow:!0,canInterface:!0,canWallJump:!0,canGrapple:!0,canImpulse:!0,editBulletCol:!0,editAICol:!0,stepSrc:!0,showMinimap:!0},{name:"SERVER_NODE",src:"cube_0",genGeo:async(e,i)=>t.generateServerNode(e,i),notStyleable:!0,defaultSize:[5,5,5],scalable:!1,scaleWithSize:!1,doubleSide:!0,tool:!0,transparent:!0,lineCol:0,forceCollision:!0,hasHealth:!0,canInterface:!0,noMinimap:!0},{name:"LAMP",src:"lamp_0",scale:1,gen:e=>t.loadObj(e,"models/lamp_0.obj","textures/lamp_0.png",e.mSize||this.scale,e.color,"mesh"),hasHealth:!0,editColor:!0,editOpac:!0,dontRound:!0,castShadow:!0,receiveShadow:!0,canInterface:!0,canWallJump:!0,canGrapple:!0,canImpulse:!0,editBulletCol:!0,editAICol:!0,stepSrc:!0,noMinimap:!0,variants:[{name:"Wall Lantern",id:0},{name:"Street Light",id:1,diffM:!0},{name:"Barn Light",id:2,diffM:!0}]},{name:"WATER_TOWER",src:"water_tower_0",scale:10,gen:e=>t.loadObj(e,"models/water_tower_0.obj","textures/water_tower_0.png",e.mSize||this.scale,e.color,"mesh"),hasHealth:!0,editColor:!0,editOpac:!0,dontRound:!0,castShadow:!0,receiveShadow:!0,canInterface:!0,canWallJump:!0,canGrapple:!0,canImpulse:!0,editBulletCol:!0,editAICol:!0,stepSrc:!0,showMinimap:!0,variants:[{name:"Default",id:0},{name:"Tank only",id:1,diffM:!0}]},{name:"AC_UNIT",src:"ac_unit_0",scale:5,gen:e=>t.loadObj(e,"models/ac_unit_0.obj","textures/ac_unit_0.png",e.mSize||this.scale,e.color,"mesh"),hasHealth:!0,editColor:!0,editOpac:!0,dontRound:!0,castShadow:!0,receiveShadow:!0,canInterface:!0,canWallJump:!0,canGrapple:!0,canImpulse:!0,editBulletCol:!0,editAICol:!0,stepSrc:!0,noMinimap:!0},{name:"SHEET_METAL",src:"sheet_metal_0",scale:.5,gen:e=>t.loadObj(e,"models/sheet_metal_0.obj","textures/sheet_metal_0.png",e.mSize||this.scale,e.color,"mesh"),hasHealth:!0,editColor:!0,editOpac:!0,dontRound:!0,castShadow:!0,receiveShadow:!0,canInterface:!0,canWallJump:!0,canGrapple:!0,canImpulse:!0,editBulletCol:!0,editAICol:!0,stepSrc:!0,noMinimap:!0},{name:"ANTENNA",src:"antenna_0",scale:10,gen:e=>t.loadObj(e,"models/antenna_0.obj","textures/antenna_0.png",e.mSize||this.scale,e.color,"mesh"),hasHealth:!0,editColor:!0,editOpac:!0,dontRound:!0,castShadow:!0,receiveShadow:!0,canInterface:!0,canWallJump:!0,canGrapple:!0,canImpulse:!0,editBulletCol:!0,editAICol:!0,stepSrc:!0,noMinimap:!0,variants:[{name:"Stage 1",id:0},{name:"Stage 2",id:1,diffM:!0},{name:"Stage 3",id:2,diffM:!0},{name:"Stage 4",id:3,diffM:!0}]},{name:"SATELLITE_DISH",src:"satellite_dish_0",scale:5,gen:e=>t.loadObj(e,"models/satellite_dish_0.obj","textures/satellite_dish_0.png",e.mSize||this.scale,e.color,"mesh"),hasHealth:!0,editColor:!0,editOpac:!0,dontRound:!0,castShadow:!0,receiveShadow:!0,canInterface:!0,canWallJump:!0,canGrapple:!0,canImpulse:!0,editBulletCol:!0,editAICol:!0,stepSrc:!0,noMinimap:!0},{name:"SPRAY",src:"cube_0",genGeo:async e=>t.generatePlane(e,e.size[0],e.size[2]),defaultSize:[20,.01,20],dontRound:!0,scalable:!0,editAmb:!0,scaleWithSize:!0,texturable:!0,castShadow:!0,receiveShadow:!0,canTrans:!0,canStretch:!0,alphaTest:.02,noCol:!0,noCollision:!0,editColor:!0,editOpac:!0,noCol:!0,forceCollision:!0,sprayTexture:!0,fakeScale:!0,tool:!0},{name:"WEAPONBOX",src:"weaponbox_0",scale:5,gen:e=>t.loadObj(e,"models/weaponbox_0.obj","textures/weaponbox_0.png",e.mSize||this.scale,e.color,"mesh"),hasHealth:!0,editColor:!0,editOpac:!0,dontRound:!0,castShadow:!0,receiveShadow:!0,canInterface:!0,canWallJump:!0,canGrapple:!0,canImpulse:!0,editBulletCol:!0,editAICol:!0,stepSrc:!0},{name:"MYSTERY_BOX",src:"weaponbox_0",scale:5,genGeo:async(e,i)=>t.generateMysteryBox(e,i),defaultSize:[10,7.27,17.91],customScore:!0,scalable:!1,notStyleable:!0,noTexture:!0,tool:!0,scaleWithSize:!1,dontRound:!0,mysteryBox:!0,noMinimap:!0},{name:"PERK_MACHINE",src:"perkmachine_0",scale:5,genGeo:async(e,i)=>t.generatePerkMachine(e,i),defaultSize:[6.7,21.9,8.41],customScore:!0,scalable:!1,notStyleable:!0,noTexture:!0,tool:!0,scaleWithSize:!1,dontRound:!0,perkMachine:!0,hasHealth:!0,canInterface:!0,canStretch:!0,hasBorder:!0},{name:"AI_REDIRECTION",src:"cube_0",genGeo:async(e,i)=>t.generateCube(e,i),notTechnical:!0,notStyleable:!0,defaultSize:[10,10,10],scalable:!0,scaleWithSize:!1,hideBoundingBox:!1,customDirection:!0,castShadow:!0,receiveShadow:!0,noRotation:!0,noTexture:!0,tool:!0,opacity:.3,lineCol:3080191,noCol:!0,forceCollision:!0,noMinimap:!0,canDirectionalScale:!0},{name:"KRUM_MACHINE",src:"krummachine_0",scale:7,genGeo:async(e,i)=>t.generateKrumMachine(e,i),defaultSize:[17.14,22.3,15.73],customScore:!0,scalable:!1,notStyleable:!0,noTexture:!0,tool:!0,scaleWithSize:!1,dontRound:!0,packapunch:!0,hasBorder:!0},{name:"BOT_SPAWNER",src:"cube_0",genGeo:async(e,i)=>t.generateServerNode(e,i),localOnly:!0,notStyleable:!0,defaultSize:[5,5,5],scalable:!1,scaleWithSize:!1,doubleSide:!0,tool:!0,transparent:!0,customDirection:!0,lineCol:0,noCol:!0,noMinimap:!0,bot:!0},{name:"MAP_ANCHOR",src:"check_0",genGeo:async(e,i)=>t.generateCubeTool(e,i,[1,500,1]),notStyleable:!0,defaultSize:[1,500,1],scalable:!1,scaleWithSize:!1,doubleSide:!0,tool:!0,transparent:!0,lineCol:16711680,forceCollision:!0,noMinimap:!0}],this.props=[];for(var c=0;c<this.prefabs.length;c++)this.prefabs[c].id=c,this.prefabs[c].isProp&&s&&this.props.push({id:c,name:s.formatConstName(this.prefabs[c].name),thumbnail:s.assetsUrl("/img/props/prop_"+c+".png")});if(this.getPrefabIdByName=function(e){e=e.toUpperCase();for(var t=0;t<this.prefabs.length;t++)if(this.prefabs[t].name==e)return t;return 0},this.getPrefabByName=function(e){e=e.toUpperCase();for(var t=0;t<this.prefabs.length;t++)if(this.prefabs[t].name==e)return this.prefabs[t];return null},this.prefabExist=function(e){e=e.toUpperCase();for(var t=0;t<this.prefabs.length;t++)if(this.prefabs[t].name==e)return!0;return!1},e){let i=new e.Vector3,c=new e.TextureLoader,f=new e.LoadingManager,m=new e.OBJLoader(f),g=new e.GLTFLoader(f);g.setMeshoptDecoder(e.MeshoptDecoder);let v=new e.FBXLoader(f);window.loadedGeos=[],this.createMesh=function(t,n,a,r,o,l,d,h,u,p){var f,m=t.prefab.frames||0,g=Math.min(10,m),v=m>10?Math.ceil(m/10):0;a&&(f=c.load(s[p?"userAssetsUrl":"assetsUrl"](a),(i=>{i.wrapS=e.RepeatWrapping,i.wrapT=e.RepeatWrapping,i.repeat.set(1,1),i.repeat.set(m?1/g:t.prefab.repeatX||1,v?1/v:t.prefab.repeatY||1),i.minFilter=e.NearestFilter,i.magFilter=e.NearestFilter,i.needsUpdate=!0})));var y=new e.StrippedLambertMaterial({map:f,vertexColors:!0,color:o||"#ffffff",shininess:60,specular:2697513,alphaTest:t.alphaTest?t.alphaTest:p&&t.assetID.includes("a")?.02:t.prefab.alphaTest||0});(p||t.prefab.gen)&&(n.computeBoundingBox(),l+=-n.boundingBox.getCenter(i).y*r);n.computeVertexNormals();var b=new e.Mesh(n,y);return b.scale.setScalar(r||1),b.position.y+=l,b.rotateX(d||0),b.rotateY(h||0),u?(t[u]&&(t.remove(t[u]),t[u]=null),t[u]=b,t.add(t[u])):t.add(b),b},this.loadObj=function(i,n,r,o,l,c=null,d=0,h=0,u=0){return new Promise((p=>{var f=i.assetID&&i.assetID.length,y=null,b="obj";if(f){var w=i.assetID.replace(/[^\d]/g,"");i.assetID.includes("g")&&(b="gltf"),i.assetID.includes("q")&&(b="glb"),i.assetID.includes("f")&&(b="fbx"),n=w+"/model."+b,r=w+"/model.png",y=function(e){KE.updateProgress((e.loaded/e.total*100).round(0))}}if(i.prefab.variants&&i.texVar&&i.prefab.variants[i.texVar])i.prefab.variants[i.texVar].diffM&&(n=n.replace("_0","_0_"+i.prefab.variants[i.texVar].id)),r=r.replace("_0","_0_"+i.prefab.variants[i.texVar].id);else if(i.prefab.texRange){var x=s.randInt(0,i.prefab.texRange);x>0&&(r=r.replace("_0","_0_"+x))}var S=window.loadedGeos[n+b];S?p(t.createMesh(i,S,r,o,l,d,h,u,c,f)):(S=new e.BufferGeometry,("gltf"==b||"glb"==b?g:"fbx"==b?v:m).load(s[f?"userAssetsUrl":"assetsUrl"](n),(e=>{e.scene&&(e=e.scene);var s=e.children[0].geometry;if(e.children.length>1){for(var m=[],g=0;g<e.children.length;++g)if(e.children[g])if("Object3D"!=e.children[g].type)m.push(t.updateGeoFromMesh(e.children[g]));else{for(var v=[],y=0;y<e.children[g].children.length;++y)e.children[g].children[y]&&e.children[g].children[y].geometry&&"Object3D"!=e.children[g].children[y].type&&v.push(t.updateGeoFromMesh(e.children[g].children[y]));m.push(a.mergeGeometries(v))}s=a.mergeGeometries(m)}else if("Object3D"==e.children[0].type&&!e.children[0].geometry&&e.children[0].children){for(m=[],g=0;g<e.children[0].children.length;++g)e.children[0].children[g]&&e.children[0].children[g].geometry&&m.push(t.updateGeoFromMesh(e.children[0].children[g]));s=a.mergeGeometries(m)}S.copy(s),window.loadedGeos[n+b]=S,p(t.createMesh(i,S,r,o,l,d,h,u,c,f))}),y))}))},this.createAnimMesh=function(t,i,n,s,a,r,o,l,c,d){var h="fbx"==d?i:i.scene||i.scenes[0];t.clips=i.animations||[],h.scale.setScalar(n||1);const u=(new e.Box3).setFromObject(h).getSize(new e.Vector3);return h.position.y+=h.position.y-u.y/2+a,h.rotateX(r||0),h.rotateY(o||0),t.clips.length&&(t.mixer=new e.AnimationMixer(h),t.playClip=function(t,i=0){const n=this.clips.find((e=>e.name===t));if(n){const t=this.mixer.clipAction(n);t.reset(),i&&t.setLoop(e.LoopRepeat,i),t.play()}},t.playAllClips=function(t=0){this.clips.forEach((i=>{var n=this.mixer.clipAction(i);n.reset(),t&&n.setLoop(e.LoopRepeat,t),n.play()}))},t.stopAllClips=function(){this.clips.forEach((e=>{this.mixer.clipAction(e).stop()}))},t.playClip("Idle")),l?(t[l]&&(t.remove(t[l]),t[l]=null),t[l]=h,t.add(t[l])):t.add(h),h},this.loadAnimObj=function(e,i,n,a,r,o=null,l=0,c=0,d=0){return new Promise((n=>{var h=e.assetID&&e.assetID.length,u=null,p="gltf";if(h){var f=e.assetID.replace(/[^\d]/g,"");e.assetID.includes("g")&&(p="gltf"),e.assetID.includes("q")&&(p="glb"),e.assetID.includes("f")&&(p="fbx"),i=f+"/model."+p,f+"/model.png",u=function(e){KE.updateProgress((e.loaded/e.total*100).round(0))}}("fbx"==p?v:g).load(s[h?"userAssetsUrl":"assetsUrl"](i),(i=>{n(t.createAnimMesh(e,i,a,r,l,c,d,o,h,p))}),u)}))},this.updateGeoFromMesh=function(t){t.updateMatrix();var i=(new e.BufferGeometry).copy(t.geometry),n=t.matrixWorld;return n.makeRotationFromQuaternion(t.quaternion),i.scale(...t.scale.toArray()),i.applyMatrix4(n),i.translate(...t.position.toArray()),i},this.loadItem=function(e){var t=l.skins[e.itemID||0],i=o[t.weapon-1]||{},n=l.types[t.assetType||t.type||0]+(t.assetType||t.type?t.id:t.weapon)+(null==t.mid?"":"_"+t.mid),a=null==t.mid?t.type&&t.type==r.MELEE?t.pat?t.tex:"melee/melee_"+(t.id||0)+(t.tex?"_"+t.tex:""):t.type?t.tex?l.types[t.assetType||t.type||0]+t.id+"_"+t.tex:null:t.tex?t.tex:"weapons/skins/weapon_"+t.weapon+"_"+t.id:s.getReModel(l,t);return this[t.hasAnim?"loadAnimObj":"loadObj"](e,"models/"+n+".obj","textures/"+(a||n)+".png",(e.mSize||1)*(t.mScl||i.scale||1),e.color,"mesh")},this.generateSprite=function(t,i,n){let s=(new e.TextureLoader).load(i);s.magFilter=e.NearestFilter;let a=new e.SpriteMaterial({map:s,color:"#ffffff"}),r=new e.Sprite(a);n&&r.scale.set(n,n,1),t.add(r)},this.generatePlane=function(e,t,i){var n=a.generatePlane(i,t,{scale:e.texStretch||"SPRAY"==e.prefab.name?0:1,scaleM:e.texScale||0},0,0,0,!0);return(n=n.clone()).scale(t,i,1),n.rotateX(-Math.PI/2),n},this.generateSpinner=function(e,t){var[i,n,s]=e.size;t=t*Math.PI/4;var r=a.generatePlane(n,s,{scale:0},0,0,0,!0);return(r=r.clone()).scale(s,n,1),r.rotateY(Math.PI/2-t),r},this.generateRectAreaLight=function(e,t,i){var n=a.generatePlane(i,t,{scale:e.texStretch?0:1,scaleM:e.texScale||0},0,0,0,!0);return(n=n.clone()).scale(t,i,1),n},this.generateBar=function(e,t,i){var n=a.generatePlane(i,t,{scale:0},0,0,0,!0);return(n=n.clone()).scale(t,i,1),n.rotateX(-Math.PI/2),n},this.generateRune=function(e,t,i){var n=a.generatePlane(i,t,{scale:0},0,0,0,!0);return(n=n.clone()).scale(t,i,1),n.rotateX(-Math.PI/2),n},this.generateLiquid=function(e,t,i){var n=a.generatePlane(i,t,{scale:1,tilesX:e.tilesX||10,tilesZ:e.tilesZ||10},0,0,0,!0);return(n=n.clone()).scale(t,i,1),n.rotateX(-Math.PI/2),n},this.generateCube=function(e,t,i){var[n,s,r]=e.size;i=i||{};var o=a.generateCube(e.faces||[1,1,1,1,1,1],n,s,r,{scale:e.texStretch?0:1,scaleM:e.texScale||0,...i});return(o=o.clone()).scale(n,s,r),o.translate(0,-s/2,0),o},this.generateRope=function(e){var[t,i,n]=e.size,s=Math.min(t,n),r=a.generateCube(e.faces||[1,1,1,1,1,1],s,i,s,{scale:e.texStretch?0:1,scaleM:e.texScale||0},!0);return(r=r.clone()).scale(s,i,s),r.translate(0,-i/2,0),r},this.generateSphere=function(e,t,i,n){var s=a.generateSphere(e,t,i,{scale:1,amb:n,useScale:!0},!0);return s=s.clone()},this.generateOcta=function(t,i,n,s,r){var o=new e.OctahedronGeometry(t/2.5,0);return a.colorize(o,null,a.getColor(r||"#ff00ff")),o},this.generatePointLight=function(e,t,i,n){var s=a.generateSphere(e,t,i,{scale:1,amb:n,useScale:!0},!0);return s=s.clone()},this.generateDirectionalLight=function(e,t,i,n){var s=a.generateSphere(e,t,i,{scale:1,amb:n,useScale:!0},!0);return s=s.clone()},this.generateSpotLight=function(e,t,i,n){var s=a.generateSphere(e,t,i,{scale:1,amb:n,useScale:!0},!0);return s=s.clone()},this.generateCone=function(i){var[n,s,r]=i.size,o=a.generateCone(s,{scale:1,useScale:!0,sides:i.sides,thetaL:i.thetaLength},!0);o=o.clone();var l=new e.Mesh(o);return l.scale.set(n/2,s,r/2),t.updateGeoFromMesh(l)},this.generateCylinder=function(i){var[n,s,r]=i.size,o=Math.min(n,r)/2,l=a.generateCylinder(2*o,s,2*o,{scale:i.texStretch?0:void 0,scaleM:i.texScale||0,useScale:!0,open:!!i.openEnded,sides:i.sides,rTop:i.radiusTop,rBot:i.radiusBottom,thetaS:i.thetaStart,thetaL:i.thetaLength},!0);l=l.clone();var c=new e.Mesh(l);return c.scale.set(o,s,o),t.updateGeoFromMesh(c)},this.generateRamp=function(i,n){var s,[r,o,l]=i.size,c=[];s=0-o/2;var d=0!=(n=n*Math.PI/2)&&n!=Math.PI;if(i.enclose){var h=a.generateRamps(r,o,l,{scale:i.texStretch?0:1,scaleM:i.texScale||0},!0);h=h.clone();var u=new e.Mesh(h);u.scale.set(d?l:r,o,d?r:l),u.rotateY(Math.PI-n),c.push(t.updateGeoFromMesh(u))}else((i,n,s,r,o,l,d,h,u)=>{h=h||{};var p=a.generatePlane(2*l,r,h,0,0,0,!0);p=p.clone();var f=new e.Mesh(p);f.position.set(0,n+o/2,0),l*=2;var m=Math.sqrt(o*o+l*l);f.scale.set(r,m,2),f.rotateY(-Math.PI/2-d),f.rotateX(Math.asin(o/m)-Math.PI/2),f.rotateZ(0),c.push(t.updateGeoFromMesh(f))})(0,s,0,d?r:l,o,(d?l:r)/2,n,{scale:i.texStretch?0:1,scaleM:i.texScale||0});return c=a.mergeGeometries(c)};let y=(i,n,s,r,o,l,c,d,h,u)=>{(c=c||{}).premultipliedAlpha=!0;var p=a.generatePlane(l,o,c,n,s,r,!0);p=p.clone();var f=new e.Mesh(p);f.position.set(n,s,r),f.rotateY(d||0),f.rotateX((h||0)-Math.PI/2),f.rotateZ(u||0),f.scale.set(2*o,2*l,1),i.push(t.updateGeoFromMesh(f))},b=(i,n,s,r,o,l,c,d,h)=>{h=h||{};var u=a.generateCube(d,o,l,c,h,!0);u=u.clone();var p=new e.Mesh(u);return p.position.set(n,s,r),p.rotation.set(h.yR||0,h.xR||0,h.zR||0),p.scale.set(o,l,c),Array.isArray(i)?i.push(t.updateGeoFromMesh(p)):i.add(p),p},w=(i,n,s,r,o,l,c,d)=>{d=d||{};var h=a.generateSphere(o,l,c,d,!0);h=h.clone();var u=new e.Mesh(h);return u.position.set(n,s+l/2,r),u.rotation.set(d.yR||0,d.xR||0,d.zR||0),u.scale.set(o/2,l/2,c/2),Array.isArray(i)?i.push(t.updateGeoFromMesh(u)):i.add(u),u},x=(i,n,s,r,o,l,c,d)=>{d=d||{};var h=a.generateCylinder(u,l,u,d,!0);h=h.clone();var u=Math.min(o,c)/2,p=new e.Mesh(h);return p.scale.set(u,l,u),p.position.set(n,s,r),p.rotation.set(d.yR||0,d.xR||0,d.zR||0),Array.isArray(i)?i.push(t.updateGeoFromMesh(p)):i.add(p),p};this.generateLadder=function(e,t){var[i,r,o]=e.size,l=[];t=t*Math.PI/2;let c={x:0+n.ladderScale*Math.cos(t),z:0+n.ladderScale*Math.sin(t),y:0-r/2};b(l,c.x+n.ladderWidth*Math.sin(t),c.y,c.z+n.ladderWidth*Math.cos(t),2*n.ladderScale,r+2,2*n.ladderScale,[1,1,1,1,1,1],{scale:e.texStretch?1:.02,scaleM:e.texScale||0}),b(l,c.x-n.ladderWidth*Math.sin(t),c.y,c.z-n.ladderWidth*Math.cos(t),2*n.ladderScale,r+2,2*n.ladderScale,[1,1,1,1,1,1],{scale:e.texStretch?1:.02,scaleM:e.texScale||0});for(var d=Math.floor(r/6),h=0;h<d;++h)y(l,c.x,c.y+6*(h+1)+s.randFloat(-1,1),c.z,n.ladderWidth,n.ladderScale,{scale:e.texStretch?1:.02,scaleM:e.texScale||0},-t+Math.PI/2,Math.PI/2,s.randFloat(-.1,.1));return l=a.mergeGeometries(l)},this.generateBillboard=function(e,t,i,n,s,r){var o=a.generatePlane(r,n,{},e,t,i,!0);return(o=o.clone()).scale(n,r,1),o.rotateX(-Math.PI/2),o},this.generateSign=function(e,t,i,n,s,r,o){var l=a.generatePlane(o,s,{},t,i,n,!0);return(l=l.clone()).scale(s,o,1),l.rotateX(-Math.PI/2),l},this.generateFlag=function(e,i){var s=parseInt(e.team||0);return s=-1==s?"n":s%2==0?0:1,t.loadObj(e,"models/crystal_0.obj","textures/crystal_"+s+".png",n.flagScale,"#ffffff","flagMesh",n.flagOff/2),t.generateObjective(e,i)},this.generateObjective=function(t,i,n){var[s,r,o]=t.size,l=a.generateCube([1,1,0,0,1,1],n?s:1,n?r:1,n?o:1,{scale:n?1:0,amb:i,useScale:!0,mat:e.MeshBasicMaterial,transparent:!0,depthWrite:!1,side:2},!0);return l=l.clone(),n||l.scale(s,n?r:5,o),n||l.translate(0,-r/2+2.5,0),l},this.generatePad=function(i,n){var[s,a,r]=i.size,o=i.direction<2?Math.min(s,r):Math.min(a,1&i.direction?s:r),l=Math.max(o/10,.1);return t.loadObj(i,"models/pad_0.obj","textures/pad_0.png",3.6,"#ffffff","padMesh",i.direction<2?-a/2+.4:void 0,1==i.direction?Math.PI:void 0).then((e=>{e.scale.x=3.6*l,e.scale.z=3.6*l,i.direction>=2&&(e.rotateZ(-Math.PI/2),e.rotateX(Math.PI/2*(i.direction-2)))})),new e.BufferGeometry},this.generateWeapon=function(e,i){var[n,s,r]=e.size;let l=a.generateCube([1,1,1,1,1,1],n,s,r,{scale:1,amb:i,useScale:!0},!0);return l=l.clone(),t.loadObj(e,"models/weapons/"+o[e.weaponId].src+".obj","textures/weapons/"+o[e.weaponId].src+".png",1*o[e.weaponId].scale,"#ffffff","wepMesh",-.5,-1.6,0),l},this.generateSpawn=function(i,n){var s=i.cmpSpwn?16776960:1==i.team?65535:2==i.team?16711680:"#ffffff";t.loadObj(i,"models/spawn_0.obj","textures/spawn_0.png",1,s,"spwnMesh",-5.5,0,-((i.direction||0)+1)*Math.PI/2);let r=a.generateCube([1,1,1,1,1,1],7+(i.spread||0),11,7+(i.spread||0),{scale:1,amb:n,transparent:!0,useScale:!0,depthWrite:!1,side:2},!0);if(r=r.clone(),i.previousScale){var o=new e.Vector3(7+(i.spread||0),11,7+(i.spread||0));i.defaultSize=o.toArray(),i.previousScale=new e.Vector3}return r},this.generateServerNode=function(t,i){let n=a.generateCube([1,1,1,1,1,1],5+(t.spread||0),5,5+(t.spread||0),{scale:0,mat:e.MeshBasicMaterial,amb:i,useScale:!0,transparent:!0,side:2},!0);if(n=n.clone(),t.previousScale){var s=new e.Vector3(5+(t.spread||0),5,5+(t.spread||0));t.defaultSize=s.toArray(),t.previousScale=new e.Vector3}return n},this.generateCubeTool=function(t,i,n){let s=a.generateCube([1,1,1,1,1,1],n[0],n[1],n[2],{scale:1,scaleM:0,mat:e.MeshBasicMaterial,amb:i,useScale:!0,transparent:!0,side:2},!0);return s=s.clone(),s},this.generateMysteryBox=function(i,n){return t.loadObj(i,"models/weaponbox_0.obj","textures/weaponbox_0.png",1*i.prefab.scale,"#ffffff","boxMesh",-1,0),new e.BufferGeometry},this.generatePerkMachine=function(i,n){var s="perkmachine_0"+(i.perk?"_"+i.perk:"");return t.loadObj(i,"models/perkmachine_0.obj","textures/"+s+".png",1*i.prefab.scale,"#ffffff","perkMesh",0,0),new e.BufferGeometry},this.generateKrumMachine=function(i,n){return t.loadObj(i,"models/krummachine_0.obj","textures/krummachine_0.png",1*i.prefab.scale,"#ffffff","krumMesh",0,0),new e.BufferGeometry};var d=["#969953","#646639","#999153"],h=[{name:"Square Oak",height:58,scales:[4,5],rar:[6,7,8,9,10],gen:function(e,t,i,n,s){w(s.clutterMesh,e[0],e[1]+t-1,e[2],90,100,90,{src:"default",shadows:!0,vNoise:.36,xR:i,coat:n.cot,colr:n.col||d[i%d.length]})}},{name:"Big Oak",height:70,scales:[6,6.2],rar:[5],gen:function(e,t,i,n,s){w(s.clutterMesh,e[0],e[1]+t-1,e[2],130,100,130,{src:"default",shadows:!0,vNoise:.3,xR:i,coat:n.cot,colr:n.col||d[i%d.length]})}},{name:"Tall Italian",height:37,scales:[3,3.2],rar:[1,2,3,4],gen:function(e,t,i,n,s){w(s.clutterMesh,e[0],e[1]+t-6,e[2],33,80,33,{src:"default",shadows:!0,vNoise:.3,xR:i,coat:n.cot,colr:n.col||d[i%d.length]})}},{name:"Honey Oak",height:100,scales:[4,5],rar:[0],gen:function(e,t,i,n,s){w(s.clutterMesh,e[0],e[1]+t-1,e[2],55,56,55,{src:"default",shadows:!0,vNoise:.35,xR:i,coat:n.cot,colr:n.col||"#616037"}),b(s.clutterMesh,e[0]+10,e[1]+t/1.5+5,e[2],22,3,2,[1,1,1,1,1,1],{src:"default",colr:"#665547",zR:.4,shadows:!0,amb:.5}),w(s.clutterMesh,e[0]+20,e[1]+t/1.5,e[2],22,20,22,{src:"default",shadows:!0,vNoise:.25,coat:n.cot,colr:n.col||"#616037"})}}];this.addTREE=function(e,t,i){for(var n=Math.round(Math.abs((e[0]+e[2])%10)),s=null,a=0;a<h.length;++a)if(h[a].rar.indexOf(n)>=0){s=h[a];break}if(s){var r=s.height-2*n,o=s.scales[n%s.scales.length];b(i.clutterMesh,e[0],e[1],e[2],o,r+20,o,[1,1,0,0,1,1],{src:"default",colr:"#665547",shadows:!0,amb:.5}),s.gen(e,r,n,t,i)}},this.addSTUMP=function(e,t,i){b(i.clutterMesh,e[0],e[1],e[2],4,80,4,[1,1,1,0,1,1],{src:"default",colr:"#665547",shadows:!0,amb:.5}),b(i.clutterMesh,e[0],e[1]+30,e[2]+10,2,3,22,[1,1,1,1,1,1],{src:"default",colr:"#665547",yR:-.5,shadows:!0,amb:.5}),b(i.clutterMesh,e[0]+10,e[1]+50,e[2],22,3,2,[1,1,1,1,1,1],{src:"default",colr:"#665547",zR:.4,shadows:!0,amb:.5})},this.addBUSH=function(e,t,i){var n=e[3],s=Math.round(Math.abs((e[0]+e[2])%10)),a=2==n?.5:1;w(i.clutterMesh,e[0],e[1]-6*a,e[2],29*a,21*a,28*a,{src:"default",colr:t.col||"#646639",vNoise:.3,coat:t.cot,xR:s,shadows:!0})},this.addGRASS=function(e,t,i,n){},this.addLOOT=function(e,t,i,n){var s=Math.round(Math.abs((e[0]+e[2])%3));b(i.clutterMesh,e[0]+6,e[1],e[2]+15,18,1,3,[1,1,1,0,1,1],{src:"default",colr:"#665547",xR:.86,shadows:!0,amb:.5}),0!=s&&1!=s||x(i.clutterMesh,e[0],e[1],e[2],7,7,9,{src:"default",colr:"#9e2b2b",shadows:!0}),2!=s&&1!=s||x(i.clutterMesh,e[0]-7,e[1],e[2]+12,7,7,9,{src:"default",colr:"#2b769e",shadows:!0})};var u=[{scl:25,hei:20,nois:.2,col:"#707070"},{scl:50,hei:30,nois:.3,col:"#545454"},{scl:13,hei:10,nois:.15,col:"#707070",noCol:!0},{scl:10,hei:10,nois:.1,col:"#545454",noCol:!0}];this.addROCK=function(e,t,i){var n=e[1]-7,s=Math.round(Math.abs((e[0]+e[2])%10)),a=u[s%u.length];w(i.clutterMesh,e[0],n,e[2],a.scl,a.hei,a.scl,{src:"default",colr:a.col,vNoise:a.nois,noAmb:!0,coat:t.cot,shadows:!0})},this.addTerrObj=function(e,i,n,a){var r={col:null,cot:null},o=n.BIOME_INDEXES[e[3]],l=n.MAP_OBJS[i];l&&o&&(l.biomeCoats&&l.biomeCoats[o]&&(r.cot=l.biomeCoats[o]),l.biomeCols&&l.biomeCols[o]&&(r.col=l.biomeCols[o][s.randInt(0,l.biomeCols[o].length-1)])),t["add"+i](e,r,n,a)};let S=e=>({src:e});this.getImageTexture=t=>{var i=new e.Texture(t);return i.wrapS=e.RepeatWrapping,i.wrapT=e.RepeatWrapping,i.repeat.set(1,1),i.minFilter=e.NearestFilter,i.magFilter=e.NearestFilter,i.needsUpdate=!0,i};var p=[];this.loadTexturePrefab=function(i,a=null){if("LEADERBOARD"==a.prefab.name){var r=Array(2*(a.leaderResults||25)).fill().map(((e,t)=>t%2==0?"Player "+Math.round((t+1)/2):s.randInt(0,1e4)));a.defaultMaterial.map=t.getImageTexture(s.createLeaderText(a.size[0],a.size[2],r,{fontSize:a.fsize||10,fcolr:a.fcolor||"#000",bcolr:a.bcolor||"#fff",noBVis:!a.backVisible,leaderType:"score",leaderTypeCust:"",leaderOrder:0,leaderResults:a.leaderResults,noSCF:!!a.noSCF}))}else if(a.prefab.hasText)a.defaultMaterial.map=t.getImageTexture(s.createCanvasText(a.size[0],a.size[2],a.text||"Hello World",a.fsize||10,a.fcolor||"#000",a.bcolor||"#fff",!a.backVisible,a.tAlign||0,a.ocolor||"#111111",a.othick,!!a.noSCF));else if(a.texturePrefab&&a.texturePrefab.src||a.assetTexture&&a.prefab.assetTextures||a.sprayTexture&&a.prefab.sprayTexture){let r=a.sprayTexture&&a.prefab.sprayTexture,v=a.assetTexture&&a.prefab.assetTextures,y=!!v&&!!(a.assetTexture+"").includes("v")&&(a.assetTexture+"").replace("v",""),b=v?S(y?y+"/video":a.assetTexture+"/texture"):r?S("sprays/"+l.skins[a.sprayTexture].id):t.getTextureByName(i);if(b="BILLBOARD"==a.objType?S("pubs/b_"+(parseInt(a.poster)?s.limitMM(parseInt(a.poster),1,n.billboards.length-1):s.randInt(1,n.billboards.length-1))):b,b="FLAG"==a.objType?S("zone_r_1"):b,b="OBJECTIVE"==a.objType?S("objective_4"):b,b="DOMINATION_ZONE"==a.objType?S("objective_4"):b,b="BOMB_SITE"==a.objType?S("objective_b"):b,b="LIGHT_CONE"==a.objType?S("lightcone_"+(a.fullcone?1:0)):b,b="LIGHT_BAR"==a.objType?S("lightcone_1"):b,b="CAMERA"==a.objType?S("spectatecam_0"):b,b="RUNE"==a.objType?S("rune_0"):b,b="PRIZE_WHEEL"==a.objType?S("wheel_0"):b,b="SERVER_NODE"==a.objType?S("servernode_1"):b,b="MAP_ANCHOR"==a.objType?S("check_0"):b,"default"==b.src)return a.defaultMaterial.map=void 0;var o=b.variants&&a.texVar&&b.variants[a.texVar]?"_"+b.variants[a.texVar].id:"",d=b.src+o,h=a.frameCount||0,u=Math.min(10,h),f=h>10?Math.ceil(h/10):0;if(p[d])a.defaultMaterial.map=p[d].clone(),a.defaultMaterial.map.needsUpdate=!0,a.defaultMaterial.map.offset.x=parseFloat(a.texOffX)||0,a.defaultMaterial.map.offset.y=parseFloat(a.texOffY)||0,a.defaultMaterial.map.repeat.set(h?1/u:1,f?1/f:1),a.defaultMaterial.map.rotation=s.toRad(a.texRot||0),a.defaultMaterial.needsUpdate=!0;else if(d.startsWith("custom_")){(m=new e.Texture(t.missingTexture)).wrapS=e.RepeatWrapping,m.wrapT=e.RepeatWrapping,m.repeat.set(1,1),m.minFilter=b.filter||e.NearestFilter,m.magFilter=b.filter||e.NearestFilter,m.offset.x=parseFloat(a.texOffX)||0,m.offset.y=parseFloat(a.texOffY)||0,m.rotation=s.toRad(a.texRot||0),m.needsUpdate=!0,p[d]=m,a.defaultMaterial.map=m,a.defaultMaterial.needsUpdate=!0}else if(y){var m,g=document.getElementById("video_"+y);g||((g=document.createElement("video")).crossOrigin="anonymous",g.id="video_"+y,g.src=s.userAssetsUrl(d+".mp4"),g.style.display="none",document.body.appendChild(g),g.loop=!0,g.volume=0,g.play()),(m=new e.VideoTexture(g)).wrapS=e.RepeatWrapping,m.wrapT=e.RepeatWrapping,m.repeat.set(1,1),m.minFilter=b.filter||e.NearestFilter,m.magFilter=b.filter||e.NearestFilter,m.offset.x=parseFloat(a.texOffX)||0,m.offset.y=parseFloat(a.texOffY)||0,m.rotation=s.toRad(a.texRot||0),m.needsUpdate=!0,p[d]=m,a.defaultMaterial.map=m,a.defaultMaterial.needsUpdate=!0}else c.load(v?s.userAssetsUrl(d+".png",null,null,!0):s.assetsUrl("/textures/"+d+".png"),(t=>{t.wrapS=e.RepeatWrapping,t.wrapT=e.RepeatWrapping,t.repeat.set(h?1/u:1,f?1/f:1),t.minFilter=b.filter||e.NearestFilter,t.magFilter=b.filter||e.NearestFilter,t.offset.x=parseFloat(a.texOffX)||0,t.offset.y=parseFloat(a.texOffY)||0,t.rotation=s.toRad(a.texRot||0),t.needsUpdate=!0,p[d]=t,a.defaultMaterial.map=t,a.defaultMaterial.needsUpdate=!0}),void 0,(function(i){var n=new e.Texture(t.missingTexture);n.wrapS=e.RepeatWrapping,n.wrapT=e.RepeatWrapping,n.repeat.set(1,1),n.minFilter=b.filter||e.NearestFilter,n.magFilter=b.filter||e.NearestFilter,n.offset.x=parseFloat(a.texOffX)||0,n.offset.y=parseFloat(a.texOffY)||0,n.rotation=s.toRad(a.texRot||0),n.needsUpdate=!0,p[d]=n,a.defaultMaterial.map=n,a.defaultMaterial.needsUpdate=!0}))}else a.defaultMaterial.map=void 0},this.missingTexture=new Image,this.missingTexture.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAACAgMAAAAP2OW3AAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAxQTFRF/wDbAAAAAAAA/wDbC5gN/AAAAAR0Uk5T/P/9/02rixUAAAAMSURBVHicYxBg2AAAAOQAwSeo6FcAAAAASUVORK5CYII="}}},function(e,t,i){"use strict";i.r(t),i.d(t,"buildViews",(function(){return p})),i.d(t,"getCurrentView",(function(){return f})),i.d(t,"navigateTo",(function(){return g})),i.d(t,"navigateReplaceAll",(function(){return y})),i.d(t,"navigateBackAll",(function(){return b})),i.d(t,"navigateReplaceTop",(function(){return w})),i.d(t,"checkForMethod",(function(){return S})),i.d(t,"hardwareBackButtonPressed",(function(){return M})),i.d(t,"addViewToHistoryStack",(function(){return k})),i.d(t,"popViewFromHistoryStack",(function(){return _})),i.d(t,"navigateBack",(function(){return T})),i.d(t,"navigateBackFrom",(function(){return C}));var n=i(122);const s=["spinnerIndex","bundle"],a=(e,t)=>{try{const i={screen:e.id.toLowerCase()};t&&s.forEach((e=>{e in t&&(i.screen_data=i.screen_data||{},i.screen_data[e]=t[e])})),logEventFRVR("view_screen",i)}catch(e){console.error(e)}},r=[],o=[],l=[],c=[];let d=!1,h=!1,u=FRVR.channelCharacteristics.allowNavigation;function p(){const e=r.length>0?r[r.length-1]:null,t=o.length>0?o[r.length-1]:{},i=l.length>0&&l[r.length-1]||{},n={};if(!e)return[];n[r.length-1]=!0;let s=[];if(i.translucent)for(let e=r.length-2;e>=0&&(s.push(m(r[e],o[e])),n[e]=!0,l[e]&&!0===l[e].translucent);--e);for(let e=r.length-2;e>=0;--e)l[e]&&!0===l[e].keepAlive&&!n[e]&&(s.push(m(r[e],o[e])),n[e]=!0);return s.reverse(),s.push(m(e,t)),s}function f(){return r.length>0?r[r.length-1]:null}function g(e,t,i){-1===r.indexOf(e)&&(a(e,t),r.push(e),o.push(t||{}),l.push({...e.defOpts,...i}),c.push(x),u&&history.pushState({url:e.id,id:c.length},null,""),m.redraw())}function v(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}function y(e,t,i){const n=r.indexOf(e);if(-1===n||!((s=l[n])===(a=i)||s&&a&&v(Object.keys(s),Object.keys(a))&&v(Object.values(s),Object.values(a)))){r.splice(0,0,e),o.splice(0,0,t||{}),l.splice(0,0,i),c.splice(0,0,x),u&&history.pushState({url:e.id,id:c.length},null,"");for(let e=1;e<r.length;)if(l[e]&&!0===l[e].preventReplace)++e;else{r.splice(e,1),o.splice(e,1),S(c[e].toString())&&c[e](),c.splice(e,1);const t=l.splice(e,1)[0];t&&t.onPop&&t.onPop()}m.redraw()}var s,a}function b(){for(let e=0;e<r.length;)if(l[e]&&!0===l[e].preventReplace)++e;else{r.splice(e,1),o.splice(e,1),S(c[e].toString())&&c[e](),c.splice(e,1);const t=l.splice(e,1)[0];t&&t.onPop&&t.onPop()}m.redraw()}function w(e,t,i){if(c.length>r.length){const e=c.length>0?c[c.length-1]:null;S(e.toString())&&e()}if(r.length>0){r.pop(),o.pop(),c.pop();const e=l.pop();e&&e.onPop&&e.onPop(),m.redraw()}-1===r.indexOf(e)&&(r.push(e),o.push(t||{}),l.push(i),c.push(x),u&&history.pushState({url:e.id,id:c.length},null,""),m.redraw())}function x(){if(c.length>r.length){const e=c.length>0?c[c.length-1]:null;S(e.toString())&&e()}if(r.length>0){r.pop(),o.pop(),c.pop(),h||(d=!0,u&&history.back()),h=!1;const e=l.pop();e&&e.onPop&&e.onPop(),m.redraw()}}function S(e){return c.length>1&&null!=e&&e.includes("setOverlay")}function M(){const e=c.length>0?c[c.length-1]:null;c.length>1&&null!=e&&e()}function k(e){c.push(e)}function _(){c.pop()}function T(){x()}function C(e){n.d.getCurrentView()==e&&x()}window.addEventListener("keydown",(e=>{4!=e.keyCode&&"GoBack"!=e.key&&"KEYCODE_BACK"!=e.code||(e.preventDefault(),M())})),window.addEventListener("popstate",(e=>{if(e.preventDefault(),!e.state||d)d=!1;else if(c.length>e.state.id&&c.length>1)return h=!0,void M();return e.state?void(c.length<e.state.id&&(d=!0,u&&history.go(-1))):(d=!0,void(u&&history.go(1)))}))},function(e){e.exports="4rzCAuqigUmWqYxSFiVxp29d4pmUHwFM"},function(e,t,i){const n=i(0),s=i(4);i(1);var a,r={};e.exports.getColor=(e,t)=>{var i=e+"-"+(t||""),s=r[i];if(!s){s=new n.Color(e),t&&s.multiplyScalar(t);var a={};s.getHSL(a),a.s=Math.min(1,1.5*a.s),s.setHSL(a.h,a.s,a.l),r[i]=s}return s},e.exports.checkColor=e=>{if(!e||!e.attributes)return!1;if(!e.attributes||!e.attributes.color){for(var t=3*(e.attributes&&e.attributes.position?e.attributes.position.count:0),i=new Float32Array(t),s=0;s<t;s++)i[s]=1;e.setAttribute("color",new n.BufferAttribute(i,3))}return!0},e.exports.bufferCheck=e=>{e.attributes&&e.attributes.color||e.setAttribute("color",new n.BufferAttribute(new Float32Array(0),3)),e.attributes&&e.attributes.uv||e.setAttribute("uv",new n.BufferAttribute(new Float32Array(0),2)),e.attributes&&e.attributes.normal||e.setAttribute("normal",new n.BufferAttribute(new Float32Array(0),3)),e.attributes&&e.attributes.position||e.setAttribute("position",new n.BufferAttribute(new Float32Array(0),3))},e.exports.colorize=(t,i,n)=>{if(t&&(i=n||e.exports.getColor(i),e.exports.checkColor(t)))for(var s=t.getAttribute("color"),a=0;a<s.count;a++)s.setXYZ(a,i.r,i.g,i.b)};var o=(e,t,i,n)=>{for(var s=e.getAttribute("uv"),a=0;a<s.count;a++){var r=s.getX(a)*t*(n||1),o=s.getY(a)*i*(n||1);r=.5+r-t*(n||1)/2,s.setXY(a,r,o)}e.attributes.uv.needsUpdate=!0},l=(t,i)=>{if(e.exports.checkColor(t)){var n=t.getIndex(),s=t.getAttribute("color");if(n&&s){for(var a=n.array,r=Math.min(a.length,6),o=0;o<r;o+=3)s.setXYZ(a[o],i[o/3][0].r,i[o/3][0].g,i[o/3][0].b),s.setXYZ(a[o+1],i[o/3][1].r,i[o/3][1].g,i[o/3][1].b),s.setXYZ(a[o+2],i[o/3][2].r,i[o/3][2].g,i[o/3][2].b);t.attributes.color.needsUpdate=!0}}},c=[];e.exports.generatePlane=(t,i,r,l,d,h)=>{t*=r.ratio||1;var u,p,f,m,g,v,y=(r.scale?t+"_"+i+"_":"")+(r.scale||"s")+(r.tilesX||"x")+(r.tilesZ||"z")+(r.noise?l+"_"+d+"_"+h:"n")+(null==r.colr?"c":r.colr)+(r.darken||"d")+(r.wSpeed||"wS")+(r.wHeight||"wH")+(r.scaleM||"sm");if(!(a=c[y])){var b=r.tilesX||1,w=r.tilesZ||1,x=r.scaleM||r.scale;if(a=new n.PlaneGeometry(1,1,b,w),r.noise){var S={},M=r.margin||0;if(a.attributes&&a.attributes.position){for(var k=a.getAttribute("position"),_=0;_<k.count;_++){var T=k.getX(_),C=k.getY(_);if(!r.pinEdges||-.5!=T&&.5!=T&&-.5!=C&&.5!=C)if(r.objects){for(var I=0;I<r.objects.length;++I)if(r.objects[I].y-r.objects[I].height<=d+.1&&r.objects[I].y+r.objects[I].height>d+r.noise&&(u=h+-C*t,p=l+T*i,f=r.objects[I].z,m=r.objects[I].x,g=r.objects[I].length+M,v=r.objects[I].width+M,u>=f-g&&u<=f+g&&p>=m-v&&p<=m+v)){k.setZ(_,Math.random()*r.noise+1),S[_]=e.exports.getColor(r.colr,.6);break}}else k.setZ(_,Math.random()*r.noise);S[_]||=e.exports.getColor(r.colr)}a.attributes.position.needsUpdate=!0}if(e.exports.checkColor(a),a.attributes&&a.attributes.color){var A,R=a.getAttribute("color");for(_=0;_<R.count;_++)A=S[_],R.setXYZ(_,A.r,A.g,A.b);a.attributes.color.needsUpdate=!0}}else e.exports.colorize(a,null,e.exports.getColor(r.colr||"#ffffff",r.darken||1));x&&o(a,i/s.worldUV,t/s.worldUV,x),a.computeVertexNormals(),c[y]=a}return a};var d=[];e.exports.generateCube=(t,i,a,r,c)=>{t=t||[1,1,1,1,1,1],c.flipp=(i>a||r>a)&&"floor_0"==c.src,c.flippW=i>r&&"floor_0"==c.src;for(var h=(c.scale?i+"_"+a+"_"+r+"_":"")+(null==c.colr?"":c.colr)+(c.scale||"")+(c.flippW?"flw":"fnw")+(c.flipp?"fl":"fn")+(c.useScale||"")+(c.noAmb||"na")+(c.scaleM||"sm")+(c.darken?"d_"+c.darken:""),u=0;u<t.length;++u)h+="_"+t[u];if(!(b=d[h])){c.colr=null==c.colr?"#ffffff":c.colr;var p,f,m,g=!1;c.noAmb||(g=!0),g&&(p=e.exports.getColor(c.colr,c.darken||1),f=c.amb?e.exports.getColor(c.colr,.7*(c.darken||1)):p);var v=[],y=c.scaleM||c.scale;if(t[0]&&((m=new n.PlaneGeometry(1,1,1,1)).rotateY(Math.PI/2),c.flipp&&m.rotateX(Math.PI/2),m.translate(.5,.5,0),g&&l(m,[[p,f,p],[f,f,p]]),y&&o(m,(c.flipp?a:r)/s.worldUV,(c.flipp?r:a)/s.worldUV,y),v.push(m)),t[1]&&((m=new n.PlaneGeometry(1,1,1,1)).rotateY(-Math.PI/2),c.flipp&&m.rotateX(Math.PI/2),m.translate(-.5,.5,0),g&&l(m,[[p,f,p],[f,f,p]]),y&&o(m,(c.flipp?a:r)/s.worldUV,(c.flipp?r:a)/s.worldUV,y),v.push(m)),t[2]&&((m=new n.PlaneGeometry(1,1,1,1)).rotateX(-Math.PI/2),c.flippW&&m.rotateY(Math.PI/2),m.translate(0,1,0),g&&l(m,[[p,p,p],[p,p,p]]),y&&o(m,(c.flippW?r:i)/s.worldUV,(c.flippW?i:r)/s.worldUV,y),v.push(m)),t[3]&&((m=new n.PlaneGeometry(1,1,1,1)).rotateX(Math.PI/2),c.flippW&&m.rotateY(Math.PI/2),m.translate(0,0,0),g&&l(m,[[f,f,f],[f,f,f]]),y&&o(m,(c.flippW?r:i)/s.worldUV,(c.flippW?i:r)/s.worldUV,y),v.push(m)),t[4]&&(m=new n.PlaneGeometry(1,1,1,1),c.flipp&&m.rotateZ(Math.PI/2),m.translate(0,.5,.5),g&&l(m,[[p,f,p],[f,f,p]]),y&&o(m,(c.flipp?a:i)/s.worldUV,(c.flipp?i:a)/s.worldUV,y),v.push(m)),t[5]&&((m=new n.PlaneGeometry(1,1,1,1)).rotateY(Math.PI),c.flipp&&m.rotateZ(Math.PI/2),m.translate(0,.5,-.5),g&&l(m,[[p,f,p],[f,f,p]]),y&&o(m,(c.flipp?a:i)/s.worldUV,(c.flipp?i:a)/s.worldUV,y),v.push(m)),v.length)var b=e.exports.mergeGeometries(v);if(!b)return new n.BufferGeometry;c&&c.useScale&&(b.scale(i,a,r),b.translate(0,-a/2,0)),g||e.exports.colorize(b,null,e.exports.getColor(c.colr)),d[h]=b}return b};var h=[];e.exports.generateCone=(t,i)=>{var s=(i.useScale||"u")+(i.closC||"c")+(i.sides||"s")+(null==i.colr?"co":i.colr)+(i.darken||"d")+(i.vNoise||"v")+(i.thetaL||"thl");if(!(a=h[s])){if(i.thetaL=null==i.thetaL?360:i.thetaL,i.thetaL=n.MathUtils.degToRad(i.thetaL),a=new n.ConeGeometry(1,1,i.sides||12,1,!i.closC,Math.PI/4,i.thetaL),i&&!i.useScale&&a.translate(0,.5,0),i&&i.vNoise&&a.attributes&&a.attributes.position){for(var r,o=a.getAttribute("position"),l=0;l<o.count;l++)r=Math.random()*i.vNoise,o.setXYZ(l,r,r,r);a.attributes.position.needsUpdate=!0}e.exports.colorize(a,null,e.exports.getColor(i.colr||"#ffffff",i.darken||1)),h[s]=a}return a};var u=[];e.exports.generateSphere=(t,i,s,r)=>{var o=(r.scale?t+"_"+i+"_"+s+"_":"")+(null==r.colr?"c":r.colr)+(r.scale||"s")+(r.useScale||"u")+(r.vNoise||"v")+(r.coat||"o");if(!(a=u[o])){if(r.colr=null==r.colr?"#ffffff":r.colr,a=new n.SphereGeometry(1,12,8),r&&r.vNoise&&a.attributes&&a.attributes.position){for(var l,c=a.getAttribute("position"),d=0;d<c.count;d++)l=Math.random()*r.vNoise,c.setXYZ(d,l,l,l);a.attributes.position.needsUpdate=!0}r&&r.useScale&&a.scale(t/2,i/2,s/2),e.exports.colorize(a,null,e.exports.getColor(r.colr||"#ffffff",r.darken||1)),u[o]=a}return a};var p=[];e.exports.generateCylinder=(t,i,r,l)=>{var c=(null==l.colr?"c":l.colr)+(l.useScale||"u")+(l.sides||"s")+(l.open||"o")+(l.vNoise||"v")+(l.rTop||"rt")+(l.rBot||"rb")+(l.thetaS||"ts")+(l.thetaL||"tl")+(l.scaleM||"sm")+(l.scale||"s");if(!(a=p[c])){l.colr=null==l.colr?"#ffffff":l.colr,l.rTop=null==l.rTop?1:l.rTop,l.thetaS=null==l.thetaS?0:l.thetaS,l.thetaS=n.MathUtils.degToRad(l.thetaS),l.thetaL=null==l.thetaL?360:l.thetaL,l.thetaL=n.MathUtils.degToRad(l.thetaL),a=new n.CylinderGeometry(l.rTop,l.rBot,1,l.sides||12,1,l.open||!1,l.thetaS,l.thetaL);var d=l.scaleM||l.scale;if(d&&o(a,r/s.worldUV,i/s.worldUV,d),l&&l.vNoise&&a.attributes&&a.attributes.position){for(var h,u=a.getAttribute("position"),f=0;f<u.count;f++)h=Math.random()*l.vNoise,u.setXYZ(f,h,h,h);a.attributes.position.needsUpdate=!0}l&&!l.useScale&&a.translate(0,.5,0),e.exports.colorize(a,null,e.exports.getColor(l.colr||"#ffffff",1)),p[c]=a}return a};new n.Vector2(0,0),new n.Vector2(1/6,1),new n.Vector2(.8333333333333333,1),new n.Vector2(1,0);n.ExtrudeGeometry;var f=new n.Vector2(0,0),m=new n.Vector2(0,1),g=new n.Vector2(1,0);class v extends n.ExtrudeGeometry{constructor(){super(new n.Shape([f,m,g]),{depth:1,bevelEnabled:!1})}}var y=[];e.exports.generateRamps=(t,i,n,r)=>{var l=(r.scale?t+"_"+n+"_":"")+(r.scale||"s")+(null==r.colr?"c":r.colr)+(r.scaleM||"sm");if(!(a=y[l])){var c=r.scaleM||r.scale;r.colr=null==r.colr?"#ffffff":r.colr,(a=new v).translate(-.5,-.5,-.5),e.exports.colorize(a,null,e.exports.getColor(r.colr||"#ffffff",1)),c&&o(a,n/s.worldUV,t/s.worldUV,c),y[l]=a}return a},e.exports.reset=()=>{r=[],c=[],d=[],h=[],u=[],p=[],y=[]},e.exports.fixBufferGeometry=t=>{e.exports.checkColor(t),e.exports.bufferCheck(t)},e.exports.mergeGeometries=t=>{for(var i=0;i<t.length;i++)null!=t[i]&&null!=t[i].index&&(t[i]=t[i].toNonIndexed()),e.exports.fixBufferGeometry(t[i]);return n.BufferGeometryUtils.mergeGeometries(t)}},function(e,t,i){"use strict";var n=i(2),s=i(68),a=i(3).Buffer,r=Array(16);function o(){s.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function l(e,t){return e<<t|e>>>32-t}function c(e,t,i,n,s,a,r){return l(e+(t&i|~t&n)+s+a|0,r)+t|0}function d(e,t,i,n,s,a,r){return l(e+(t&n|i&~n)+s+a|0,r)+t|0}function h(e,t,i,n,s,a,r){return l(e+(t^i^n)+s+a|0,r)+t|0}function u(e,t,i,n,s,a,r){return l(e+(i^(t|~n))+s+a|0,r)+t|0}n(o,s),o.prototype._update=function(){for(var e=r,t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);var i=this._a,n=this._b,s=this._c,a=this._d;i=c(i,n,s,a,e[0],3614090360,7),a=c(a,i,n,s,e[1],3905402710,12),s=c(s,a,i,n,e[2],606105819,17),n=c(n,s,a,i,e[3],3250441966,22),i=c(i,n,s,a,e[4],4118548399,7),a=c(a,i,n,s,e[5],1200080426,12),s=c(s,a,i,n,e[6],2821735955,17),n=c(n,s,a,i,e[7],4249261313,22),i=c(i,n,s,a,e[8],1770035416,7),a=c(a,i,n,s,e[9],2336552879,12),s=c(s,a,i,n,e[10],4294925233,17),n=c(n,s,a,i,e[11],2304563134,22),i=c(i,n,s,a,e[12],1804603682,7),a=c(a,i,n,s,e[13],4254626195,12),s=c(s,a,i,n,e[14],2792965006,17),i=d(i,n=c(n,s,a,i,e[15],1236535329,22),s,a,e[1],4129170786,5),a=d(a,i,n,s,e[6],3225465664,9),s=d(s,a,i,n,e[11],643717713,14),n=d(n,s,a,i,e[0],3921069994,20),i=d(i,n,s,a,e[5],3593408605,5),a=d(a,i,n,s,e[10],38016083,9),s=d(s,a,i,n,e[15],3634488961,14),n=d(n,s,a,i,e[4],3889429448,20),i=d(i,n,s,a,e[9],568446438,5),a=d(a,i,n,s,e[14],3275163606,9),s=d(s,a,i,n,e[3],4107603335,14),n=d(n,s,a,i,e[8],1163531501,20),i=d(i,n,s,a,e[13],2850285829,5),a=d(a,i,n,s,e[2],4243563512,9),s=d(s,a,i,n,e[7],1735328473,14),i=h(i,n=d(n,s,a,i,e[12],2368359562,20),s,a,e[5],4294588738,4),a=h(a,i,n,s,e[8],2272392833,11),s=h(s,a,i,n,e[11],1839030562,16),n=h(n,s,a,i,e[14],4259657740,23),i=h(i,n,s,a,e[1],2763975236,4),a=h(a,i,n,s,e[4],1272893353,11),s=h(s,a,i,n,e[7],4139469664,16),n=h(n,s,a,i,e[10],3200236656,23),i=h(i,n,s,a,e[13],681279174,4),a=h(a,i,n,s,e[0],3936430074,11),s=h(s,a,i,n,e[3],3572445317,16),n=h(n,s,a,i,e[6],76029189,23),i=h(i,n,s,a,e[9],3654602809,4),a=h(a,i,n,s,e[12],3873151461,11),s=h(s,a,i,n,e[15],530742520,16),i=u(i,n=h(n,s,a,i,e[2],3299628645,23),s,a,e[0],4096336452,6),a=u(a,i,n,s,e[7],1126891415,10),s=u(s,a,i,n,e[14],2878612391,15),n=u(n,s,a,i,e[5],4237533241,21),i=u(i,n,s,a,e[12],1700485571,6),a=u(a,i,n,s,e[3],2399980690,10),s=u(s,a,i,n,e[10],4293915773,15),n=u(n,s,a,i,e[1],2240044497,21),i=u(i,n,s,a,e[8],1873313359,6),a=u(a,i,n,s,e[15],4264355552,10),s=u(s,a,i,n,e[6],2734768916,15),n=u(n,s,a,i,e[13],1309151649,21),i=u(i,n,s,a,e[4],4149444226,6),a=u(a,i,n,s,e[11],3174756917,10),s=u(s,a,i,n,e[2],718787259,15),n=u(n,s,a,i,e[9],3951481745,21),this._a=this._a+i|0,this._b=this._b+n|0,this._c=this._c+s|0,this._d=this._d+a|0},o.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=a.allocUnsafe(16);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e},e.exports=o},function(e,t,i){"use strict";var n=i(17).codes.ERR_STREAM_PREMATURE_CLOSE;function s(){}e.exports=function e(t,i,a){if("function"==typeof i)return e(t,null,i);var r,o;i||={},r=a||s,o=!1,a=function(){if(!o){o=!0;for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];r.apply(this,t)}};var l=i.readable||!1!==i.readable&&t.readable,c=i.writable||!1!==i.writable&&t.writable;function d(){t.writable||u()}var h=t._writableState&&t._writableState.finished;function u(){c=!1,h=!0,l||a.call(t)}var p,f=t._readableState&&t._readableState.endEmitted;function m(){l=!1,f=!0,c||a.call(t)}function g(e){a.call(t,e)}function v(){var e;return l&&!f?(t._readableState&&t._readableState.ended||(e=new n),a.call(t,e)):c&&!h?(t._writableState&&t._writableState.ended||(e=new n),a.call(t,e)):void 0}function y(){t.req.on("finish",u)}return(p=t).setHeader&&"function"==typeof p.abort?(t.on("complete",u),t.on("abort",v),t.req?y():t.on("request",y)):c&&!t._writableState&&(t.on("end",d),t.on("close",d)),t.on("end",m),t.on("finish",u),!1!==i.error&&t.on("error",g),t.on("close",v),function(){t.removeListener("complete",u),t.removeListener("abort",v),t.removeListener("request",y),t.req&&t.req.removeListener("finish",u),t.removeListener("end",d),t.removeListener("close",d),t.removeListener("finish",u),t.removeListener("end",m),t.removeListener("error",g),t.removeListener("close",v)}}},function(e,t,i){"use strict";var n=i(6).Buffer,s=i(2),a=i(68),r=Array(16),o=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],l=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],c=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],d=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],h=[0,1518500249,1859775393,2400959708,2840853838],u=[1352829926,1548603684,1836072691,2053994217,0];function p(){a.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function f(e,t){return e<<t|e>>>32-t}function m(e,t,i,n,s,a,r,o){return f(e+(t^i^n)+a+r|0,o)+s|0}function g(e,t,i,n,s,a,r,o){return f(e+(t&i|~t&n)+a+r|0,o)+s|0}function v(e,t,i,n,s,a,r,o){return f(e+((t|~i)^n)+a+r|0,o)+s|0}function y(e,t,i,n,s,a,r,o){return f(e+(t&n|i&~n)+a+r|0,o)+s|0}function b(e,t,i,n,s,a,r,o){return f(e+(t^(i|~n))+a+r|0,o)+s|0}s(p,a),p.prototype._update=function(){for(var e=r,t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);for(var i=0|this._a,n=0|this._b,s=0|this._c,a=0|this._d,p=0|this._e,w=0|this._a,x=0|this._b,S=0|this._c,M=0|this._d,k=0|this._e,_=0;_<80;_+=1){var T,C;_<16?(T=m(i,n,s,a,p,e[o[_]],h[0],c[_]),C=b(w,x,S,M,k,e[l[_]],u[0],d[_])):_<32?(T=g(i,n,s,a,p,e[o[_]],h[1],c[_]),C=y(w,x,S,M,k,e[l[_]],u[1],d[_])):_<48?(T=v(i,n,s,a,p,e[o[_]],h[2],c[_]),C=v(w,x,S,M,k,e[l[_]],u[2],d[_])):_<64?(T=y(i,n,s,a,p,e[o[_]],h[3],c[_]),C=g(w,x,S,M,k,e[l[_]],u[3],d[_])):(T=b(i,n,s,a,p,e[o[_]],h[4],c[_]),C=m(w,x,S,M,k,e[l[_]],u[4],d[_])),i=p,p=a,a=f(s,10),s=n,n=T,w=k,k=M,M=f(S,10),S=x,x=C}var I=this._b+s+M|0;this._b=this._c+a+k|0,this._c=this._d+p+w|0,this._d=this._e+i+x|0,this._e=this._a+n+S|0,this._a=I},p.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=n.alloc?n.alloc(20):new n(20);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e.writeInt32LE(this._e,16),e},e.exports=p},function(e,t,i){(t=e.exports=function(e){e=e.toLowerCase();var i=t[e];if(!i)throw new Error(e+" is not supported (we accept pull requests)");return new i}).sha=i(155),t.sha1=i(156),t.sha224=i(157),t.sha256=i(77),t.sha384=i(158),t.sha512=i(78)},function(e,t,i){(t=e.exports=i(79)).Stream=t,t.Readable=t,t.Writable=i(46),t.Duplex=i(14),t.Transform=i(82),t.PassThrough=i(165)},function(e,t,i){"use strict";(function(t,n,s){var a,r=i(30);function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,i){var n=e.entry;for(e.entry=null;n;){var s=n.callback;t.pendingcb--,s(i),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}e.exports=y;var l=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?n:r.nextTick;y.WritableState=v;var c=Object.create(i(23));c.inherits=i(2);var d={deprecate:i(75)},h=i(80),u=i(3).Buffer,p=s.Uint8Array||function(){};var f,m=i(81);function g(){}function v(e,t){a=a||i(14),e=e||{};var n=t instanceof a;this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var s=e.highWaterMark,c=e.writableHighWaterMark,d=this.objectMode?16:16384;this.highWaterMark=s||0===s?s:n&&(c||0===c)?c:d,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var h=!1===e.decodeStrings;this.decodeStrings=!h,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var i=e._writableState,n=i.sync,s=i.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(i),t)o=e,d=n,h=t,u=s,--(c=i).pendingcb,d?(r.nextTick(u,h),r.nextTick(k,o,c),o._writableState.errorEmitted=!0,o.emit("error",h)):(u(h),o._writableState.errorEmitted=!0,o.emit("error",h),k(o,c));else{var a=S(i);a||i.corked||i.bufferProcessing||!i.bufferedRequest||x(e,i),n?l(w,e,i,a,s):w(e,i,a,s)}var o,c,d,h,u}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function y(e){return a=a||i(14),f.call(y,this)||this instanceof a?(this._writableState=new v(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),void h.call(this)):new y(e)}function b(e,t,i,n,s,a,r){t.writelen=n,t.writecb=r,t.writing=!0,t.sync=!0,i?e._writev(s,t.onwrite):e._write(s,a,t.onwrite),t.sync=!1}function w(e,t,i,n){var s,a;i||(s=e,0===(a=t).length&&a.needDrain&&(a.needDrain=!1,s.emit("drain"))),t.pendingcb--,n(),k(e,t)}function x(e,t){t.bufferProcessing=!0;var i=t.bufferedRequest;if(e._writev&&i&&i.next){var n=t.bufferedRequestCount,s=Array(n),a=t.corkedRequestsFree;a.entry=i;for(var r=0,l=!0;i;)s[r]=i,i.isBuf||(l=!1),i=i.next,r+=1;s.allBuffers=l,b(e,t,!0,t.length,s,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new o(t),t.bufferedRequestCount=0}else{for(;i;){var c=i.chunk,d=i.encoding,h=i.callback;if(b(e,t,!1,t.objectMode?1:c.length,c,d,h),i=i.next,t.bufferedRequestCount--,t.writing)break}null===i&&(t.lastBufferedRequest=null)}t.bufferedRequest=i,t.bufferProcessing=!1}function S(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function M(e,t){e._final((function(i){t.pendingcb--,i&&e.emit("error",i),t.prefinished=!0,e.emit("prefinish"),k(e,t)}))}function k(e,t){var i,n,s=S(t);return s&&(i=e,(n=t).prefinished||n.finalCalled||("function"==typeof i._final?(n.pendingcb++,n.finalCalled=!0,r.nextTick(M,i,n)):(n.prefinished=!0,i.emit("prefinish"))),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),s}c.inherits(y,h),v.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(v.prototype,"buffer",{get:d.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(f=Function.prototype[Symbol.hasInstance],Object.defineProperty(y,Symbol.hasInstance,{value:function(e){return!!f.call(this,e)||this===y&&e&&e._writableState instanceof v}})):f=function(e){return e instanceof this},y.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},y.prototype.write=function(e,t,i){var n,s,a,o,l,c,d,h,f,m,v,y=this._writableState,w=!1,x=!y.objectMode&&(n=e,u.isBuffer(n)||n instanceof p);return x&&!u.isBuffer(e)&&(s=e,e=u.from(s)),"function"==typeof t&&(i=t,t=null),x?t="buffer":t||(t=y.defaultEncoding),"function"!=typeof i&&(i=g),y.ended?(f=this,m=i,v=new Error("write after end"),f.emit("error",v),r.nextTick(m,v)):(x||(a=this,o=y,c=i,d=!0,h=!1,null===(l=e)?h=new TypeError("May not write null values to stream"):"string"==typeof l||void 0===l||o.objectMode||(h=new TypeError("Invalid non-string/buffer chunk")),h&&(a.emit("error",h),r.nextTick(c,h),d=!1),d))&&(y.pendingcb++,w=function(e,t,i,n,s,a){if(!i){var r=function(e,t,i){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=u.from(t,i));return t}(t,n,s);n!==r&&(i=!0,s="buffer",n=r)}var o=t.objectMode?1:n.length;t.length+=o;var l=t.length<t.highWaterMark;l||(t.needDrain=!0);if(t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:s,isBuf:i,callback:a,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else b(e,t,!1,o,n,s,a);return l}(this,y,x,e,t,i)),w},y.prototype.cork=function(){this._writableState.corked++},y.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||x(this,e))},y.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())<=-1)throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(y.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),y.prototype._write=function(e,t,i){i(new Error("_write() is not implemented"))},y.prototype._writev=null,y.prototype.end=function(e,t,i){var n=this._writableState;"function"==typeof e?(i=e,e=null,t=null):"function"==typeof t&&(i=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||function(e,t,i){t.ending=!0,k(e,t),i&&(t.finished?r.nextTick(i):e.once("finish",i));t.ended=!0,e.writable=!1}(this,n,i)},Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),y.prototype.destroy=m.destroy,y.prototype._undestroy=m.undestroy,y.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,i(7),i(163).setImmediate,i(8))},function(e,t,i){"use strict";var n=i(9);function s(e){this.options=e,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=Array(this.blockSize),this.bufferOff=0}e.exports=s,s.prototype._init=function(){},s.prototype.update=function(e){return 0===e.length?[]:"decrypt"===this.type?this._updateDecrypt(e):this._updateEncrypt(e)},s.prototype._buffer=function(e,t){for(var i=Math.min(this.buffer.length-this.bufferOff,e.length-t),n=0;n<i;n++)this.buffer[this.bufferOff+n]=e[t+n];return this.bufferOff+=i,i},s.prototype._flushBuffer=function(e,t){return this._update(this.buffer,0,e,t),this.bufferOff=0,this.blockSize},s.prototype._updateEncrypt=function(e){var t=0,i=0,n=(this.bufferOff+e.length)/this.blockSize|0,s=Array(n*this.blockSize);0!==this.bufferOff&&(t+=this._buffer(e,t),this.bufferOff===this.buffer.length&&(i+=this._flushBuffer(s,i)));for(var a=e.length-(e.length-t)%this.blockSize;t<a;t+=this.blockSize)this._update(e,t,s,i),i+=this.blockSize;for(;t<e.length;t++,this.bufferOff++)this.buffer[this.bufferOff]=e[t];return s},s.prototype._updateDecrypt=function(e){for(var t=0,i=0,n=Math.ceil((this.bufferOff+e.length)/this.blockSize)-1,s=Array(n*this.blockSize);n>0;n--)t+=this._buffer(e,t),i+=this._flushBuffer(s,i);return t+=this._buffer(e,t),s},s.prototype.final=function(e){var t,i;return e&&(t=this.update(e)),i="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),t?t.concat(i):i},s.prototype._pad=function(e,t){if(0===t)return!1;for(;t<e.length;)e[t++]=0;return!0},s.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var e=Array(this.blockSize);return this._update(this.buffer,0,e,0),e},s.prototype._unpad=function(e){return e},s.prototype._finalDecrypt=function(){n.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var e=Array(this.blockSize);return this._flushBuffer(e,0),this._unpad(e)}},function(e,t,i){var n=i(178),s=i(186),a=i(95);t.createCipher=t.Cipher=n.createCipher,t.createCipheriv=t.Cipheriv=n.createCipheriv,t.createDecipher=t.Decipher=s.createDecipher,t.createDecipheriv=t.Decipheriv=s.createDecipheriv,t.listCiphers=t.getCiphers=function(){return Object.keys(a)}},function(e,t,i){var n={ECB:i(179),CBC:i(180),CFB:i(181),CFB8:i(182),CFB1:i(183),OFB:i(184),CTR:i(93),GCM:i(93)},s=i(95);for(var a in s)s[a].module=n[s[a].mode];e.exports=s},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,i){var n;function s(e){this.rand=e}if(e.exports=function(e){return n||=new s(null),n.generate(e)},e.exports.Rand=s,s.prototype.generate=function(e){return this._rand(e)},s.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var t=new Uint8Array(e),i=0;i<t.length;i++)t[i]=this.rand.getByte();return t},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?s.prototype._rand=function(e){var t=new Uint8Array(e);return self.crypto.getRandomValues(t),t}:self.msCrypto&&self.msCrypto.getRandomValues?s.prototype._rand=function(e){var t=new Uint8Array(e);return self.msCrypto.getRandomValues(t),t}:"object"==typeof window&&(s.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var a=i(190);if("function"!=typeof a.randomBytes)throw new Error("Not supported");s.prototype._rand=function(e){return a.randomBytes(e)}}catch(e){}},function(e,t,i){var n=i(6),s=n.Buffer;function a(e,t){for(var i in e)t[i]=e[i]}function r(e,t,i){return s(e,t,i)}s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?e.exports=n:(a(n,t),t.Buffer=r),r.prototype=Object.create(s.prototype),a(s,r),r.from=function(e,t,i){if("number"==typeof e)throw new TypeError("Argument must not be a number");return s(e,t,i)},r.alloc=function(e,t,i){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=s(e);return void 0===t?n.fill(0):"string"==typeof i?n.fill(t,i):n.fill(t),n},r.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return s(e)},r.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},function(e,t,i){(function(t){var n=i(195),s=i(16);function a(e){var t,i=e.modulus.byteLength();do{t=new n(s(i))}while(t.cmp(e.modulus)>=0||!t.umod(e.prime1)||!t.umod(e.prime2));return t}function r(e,i){var s,r,o={blinder:(r=a(s=i)).toRed(n.mont(s.modulus)).redPow(new n(s.publicExponent)).fromRed(),unblinder:r.invm(s.modulus)},l=i.modulus.byteLength(),c=new n(e).mul(o.blinder).umod(i.modulus),d=c.toRed(n.mont(i.prime1)),h=c.toRed(n.mont(i.prime2)),u=i.coefficient,p=i.prime1,f=i.prime2,m=d.redPow(i.exponent1).fromRed(),g=h.redPow(i.exponent2).fromRed(),v=m.isub(g).imul(u).umod(p).imul(f);return g.iadd(v).imul(o.unblinder).umod(i.modulus).toArrayLike(t,"be",l)}r.getr=a,e.exports=r}).call(this,i(6).Buffer)},function(e,t,i){"use strict";var n=t;n.version=i(197).version,n.utils=i(10),n.rand=i(51),n.curve=i(101),n.curves=i(55),n.ec=i(208),n.eddsa=i(212)},function(e,t,i){"use strict";var n,s=t,a=i(56),r=i(101),o=i(10).assert;function l(e){this.curve="short"===e.type?new r.short(e):"edwards"===e.type?new r.edwards(e):new r.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,o(this.g.validate(),"Invalid curve"),o(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function c(e,t){Object.defineProperty(s,e,{configurable:!0,enumerable:!0,get:function(){var i=new l(t);return Object.defineProperty(s,e,{configurable:!0,enumerable:!0,value:i}),i}})}s.PresetCurve=l,c("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:a.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),c("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:a.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),c("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:a.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),c("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:a.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),c("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:a.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),c("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:a.sha256,gRed:!1,g:["9"]}),c("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:a.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{n=i(207)}catch(e){n=void 0}c("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:a.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",n]})},function(e,t,i){var n=t;n.utils=i(11),n.common=i(25),n.sha=i(201),n.ripemd=i(205),n.hmac=i(206),n.sha1=n.sha.sha1,n.sha256=n.sha.sha256,n.sha224=n.sha.sha224,n.sha384=n.sha.sha384,n.sha512=n.sha.sha512,n.ripemd160=n.ripemd.ripemd160},function(e,t,i){"use strict";(function(t){var n,s=i(6),a=s.Buffer,r={};for(n in s)s.hasOwnProperty(n)&&"SlowBuffer"!==n&&"Buffer"!==n&&(r[n]=s[n]);var o=r.Buffer={};for(n in a)a.hasOwnProperty(n)&&"allocUnsafe"!==n&&"allocUnsafeSlow"!==n&&(o[n]=a[n]);if(r.Buffer.prototype=a.prototype,o.from&&o.from!==Uint8Array.from||(o.from=function(e,t,i){if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type '+typeof e);if(e&&void 0===e.length)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);return a(e,t,i)}),o.alloc||=function(e,t,i){if("number"!=typeof e)throw new TypeError('The "size" argument must be of type number. Received type '+typeof e);if(e<0||e>=2*(1<<30))throw new RangeError('The value "'+e+'" is invalid for option "size"');var n=a(e);return t&&0!==t.length?"string"==typeof i?n.fill(t,i):n.fill(t):n.fill(0),n},!r.kStringMaxLength)try{r.kStringMaxLength=t.binding("buffer").kStringMaxLength}catch(e){}r.constants||(r.constants={MAX_LENGTH:r.kMaxLength},r.kStringMaxLength&&(r.constants.MAX_STRING_LENGTH=r.kStringMaxLength)),e.exports=r}).call(this,i(7))},function(e,t,i){"use strict";const n=i(59).Reporter,s=i(26).EncoderBuffer,a=i(26).DecoderBuffer,r=i(9),o=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],l=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(o);function c(e,t,i){const n={};this._baseState=n,n.name=i,n.enc=e,n.parent=t||null,n.children=null,n.tag=null,n.args=null,n.reverseArgs=null,n.choice=null,n.optional=!1,n.any=!1,n.obj=!1,n.use=null,n.useDecoder=null,n.key=null,n.default=null,n.explicit=null,n.implicit=null,n.contains=null,n.parent||(n.children=[],this._wrap())}e.exports=c;const d=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];c.prototype.clone=function(){const e=this._baseState,t={};d.forEach((function(i){t[i]=e[i]}));const i=new this.constructor(t.parent);return i._baseState=t,i},c.prototype._wrap=function(){const e=this._baseState;l.forEach((function(t){this[t]=function(){const i=new this.constructor(this);return e.children.push(i),i[t].apply(i,arguments)}}),this)},c.prototype._init=function(e){const t=this._baseState;r(null===t.parent),e.call(this),t.children=t.children.filter((function(e){return e._baseState.parent===this}),this),r.equal(t.children.length,1,"Root node can have only one child")},c.prototype._useArgs=function(e){const t=this._baseState,i=e.filter((function(e){return e instanceof this.constructor}),this);e=e.filter((function(e){return!(e instanceof this.constructor)}),this),0!==i.length&&(r(null===t.children),t.children=i,i.forEach((function(e){e._baseState.parent=this}),this)),0!==e.length&&(r(null===t.args),t.args=e,t.reverseArgs=e.map((function(e){if("object"!=typeof e||e.constructor!==Object)return e;const t={};return Object.keys(e).forEach((function(i){i==(0|i)&&(i|=0);const n=e[i];t[n]=i})),t})))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach((function(e){c.prototype[e]=function(){const t=this._baseState;throw new Error(e+" not implemented for encoding: "+t.enc)}})),o.forEach((function(e){c.prototype[e]=function(){const t=this._baseState,i=Array.prototype.slice.call(arguments);return r(null===t.tag),t.tag=e,this._useArgs(i),this}})),c.prototype.use=function(e){r(e);const t=this._baseState;return r(null===t.use),t.use=e,this},c.prototype.optional=function(){return this._baseState.optional=!0,this},c.prototype.def=function(e){const t=this._baseState;return r(null===t.default),t.default=e,t.optional=!0,this},c.prototype.explicit=function(e){const t=this._baseState;return r(null===t.explicit&&null===t.implicit),t.explicit=e,this},c.prototype.implicit=function(e){const t=this._baseState;return r(null===t.explicit&&null===t.implicit),t.implicit=e,this},c.prototype.obj=function(){const e=this._baseState,t=Array.prototype.slice.call(arguments);return e.obj=!0,0!==t.length&&this._useArgs(t),this},c.prototype.key=function(e){const t=this._baseState;return r(null===t.key),t.key=e,this},c.prototype.any=function(){return this._baseState.any=!0,this},c.prototype.choice=function(e){const t=this._baseState;return r(null===t.choice),t.choice=e,this._useArgs(Object.keys(e).map((function(t){return e[t]}))),this},c.prototype.contains=function(e){const t=this._baseState;return r(null===t.use),t.contains=e,this},c.prototype._decode=function(e,t){const i=this._baseState;if(null===i.parent)return e.wrapResult(i.children[0]._decode(e,t));let n,s=i.default,r=!0,o=null;if(null!==i.key&&(o=e.enterKey(i.key)),i.optional){let n=null;if(null===i.explicit?null===i.implicit?null!==i.tag&&(n=i.tag):n=i.implicit:n=i.explicit,null!==n||i.any){if(r=this._peekTag(e,n,i.any),e.isError(r))return r}else{const n=e.save();try{null===i.choice?this._decodeGeneric(i.tag,e,t):this._decodeChoice(e,t),r=!0}catch(e){r=!1}e.restore(n)}}if(i.obj&&r&&(n=e.enterObject()),r){if(null!==i.explicit){const t=this._decodeTag(e,i.explicit);if(e.isError(t))return t;e=t}const n=e.offset;if(null===i.use&&null===i.choice){let t;i.any&&(t=e.save());const n=this._decodeTag(e,null===i.implicit?i.tag:i.implicit,i.any);if(e.isError(n))return n;i.any?s=e.raw(t):e=n}if(t&&t.track&&null!==i.tag&&t.track(e.path(),n,e.length,"tagged"),t&&t.track&&null!==i.tag&&t.track(e.path(),e.offset,e.length,"content"),i.any||(s=null===i.choice?this._decodeGeneric(i.tag,e,t):this._decodeChoice(e,t)),e.isError(s))return s;if(i.any||null!==i.choice||null===i.children||i.children.forEach((function(i){i._decode(e,t)})),i.contains&&("octstr"===i.tag||"bitstr"===i.tag)){const n=new a(s);s=this._getUse(i.contains,e._reporterState.obj)._decode(n,t)}}return i.obj&&r&&(s=e.leaveObject(n)),null===i.key||null===s&&!0!==r?null!==o&&e.exitKey(o):e.leaveKey(o,i.key,s),s},c.prototype._decodeGeneric=function(e,t,i){const n=this._baseState;return"seq"===e||"set"===e?null:"seqof"===e||"setof"===e?this._decodeList(t,e,n.args[0],i):/str$/.test(e)?this._decodeStr(t,e,i):"objid"===e&&n.args?this._decodeObjid(t,n.args[0],n.args[1],i):"objid"===e?this._decodeObjid(t,null,null,i):"gentime"===e||"utctime"===e?this._decodeTime(t,e,i):"null_"===e?this._decodeNull(t,i):"bool"===e?this._decodeBool(t,i):"objDesc"===e?this._decodeStr(t,e,i):"int"===e||"enum"===e?this._decodeInt(t,n.args&&n.args[0],i):null===n.use?t.error("unknown tag: "+e):this._getUse(n.use,t._reporterState.obj)._decode(t,i)},c.prototype._getUse=function(e,t){const i=this._baseState;return i.useDecoder=this._use(e,t),r(null===i.useDecoder._baseState.parent),i.useDecoder=i.useDecoder._baseState.children[0],i.implicit!==i.useDecoder._baseState.implicit&&(i.useDecoder=i.useDecoder.clone(),i.useDecoder._baseState.implicit=i.implicit),i.useDecoder},c.prototype._decodeChoice=function(e,t){const i=this._baseState;let n=null,s=!1;return Object.keys(i.choice).some((function(a){const r=e.save(),o=i.choice[a];try{const i=o._decode(e,t);if(e.isError(i))return!1;n={type:a,value:i},s=!0}catch(t){return e.restore(r),!1}return!0}),this),s?n:e.error("Choice not matched")},c.prototype._createEncoderBuffer=function(e){return new s(e,this.reporter)},c.prototype._encode=function(e,t,i){const n=this._baseState;if(null===n.default||n.default!==e){const n=this._encodeValue(e,t,i);return void 0===n||this._skipDefault(n,t,i)?void 0:n}},c.prototype._encodeValue=function(e,t,i){const s=this._baseState;if(null===s.parent)return s.children[0]._encode(e,t||new n);let a=null;if(this.reporter=t,s.optional&&void 0===e){if(null===s.default)return;e=s.default}let r=null,o=!1;if(s.any)a=this._createEncoderBuffer(e);else if(s.choice)a=this._encodeChoice(e,t);else if(s.contains)r=this._getUse(s.contains,i)._encode(e,t),o=!0;else if(s.children)r=s.children.map((function(i){if("null_"===i._baseState.tag)return i._encode(null,t,e);if(null===i._baseState.key)return t.error("Child should have a key");const n=t.enterKey(i._baseState.key);if("object"!=typeof e)return t.error("Child expected, but input is not object");const s=i._encode(e[i._baseState.key],t,e);return t.leaveKey(n),s}),this).filter((function(e){return e})),r=this._createEncoderBuffer(r);else if("seqof"===s.tag||"setof"===s.tag){if(!s.args||1!==s.args.length)return t.error("Too many args for : "+s.tag);if(!Array.isArray(e))return t.error("seqof/setof, but data is not Array");const i=this.clone();i._baseState.implicit=null,r=this._createEncoderBuffer(e.map((function(i){const n=this._baseState;return this._getUse(n.args[0],e)._encode(i,t)}),i))}else null===s.use?(r=this._encodePrimitive(s.tag,e),o=!0):a=this._getUse(s.use,i)._encode(e,t);if(!s.any&&null===s.choice){const e=null===s.implicit?s.tag:s.implicit,i=null===s.implicit?"universal":"context";null===e?null===s.use&&t.error("Tag could be omitted only for .use()"):null===s.use&&(a=this._encodeComposite(e,o,i,r))}return null!==s.explicit&&(a=this._encodeComposite(s.explicit,!1,"context",a)),a},c.prototype._encodeChoice=function(e,t){const i=this._baseState,n=i.choice[e.type];return n||r(!1,e.type+" not found in "+JSON.stringify(Object.keys(i.choice))),n._encode(e.value,t)},c.prototype._encodePrimitive=function(e,t){const i=this._baseState;if(/str$/.test(e))return this._encodeStr(t,e);if("objid"===e&&i.args)return this._encodeObjid(t,i.reverseArgs[0],i.args[1]);if("objid"===e)return this._encodeObjid(t,null,null);if("gentime"===e||"utctime"===e)return this._encodeTime(t,e);if("null_"===e)return this._encodeNull();if("int"===e||"enum"===e)return this._encodeInt(t,i.args&&i.reverseArgs[0]);if("bool"===e)return this._encodeBool(t);if("objDesc"===e)return this._encodeStr(t,e);throw new Error("Unsupported tag: "+e)},c.prototype._isNumstr=function(e){return/^[0-9 ]*$/.test(e)},c.prototype._isPrintstr=function(e){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(e)}},function(e,t,i){"use strict";const n=i(2);function s(e){this._reporterState={obj:null,path:[],options:e||{},errors:[]}}function a(e,t){this.path=e,this.rethrow(t)}t.Reporter=s,s.prototype.isError=function(e){return e instanceof a},s.prototype.save=function(){const e=this._reporterState;return{obj:e.obj,pathLen:e.path.length}},s.prototype.restore=function(e){const t=this._reporterState;t.obj=e.obj,t.path=t.path.slice(0,e.pathLen)},s.prototype.enterKey=function(e){return this._reporterState.path.push(e)},s.prototype.exitKey=function(e){const t=this._reporterState;t.path=t.path.slice(0,e-1)},s.prototype.leaveKey=function(e,t,i){const n=this._reporterState;this.exitKey(e),null!==n.obj&&(n.obj[t]=i)},s.prototype.path=function(){return this._reporterState.path.join("/")},s.prototype.enterObject=function(){const e=this._reporterState,t=e.obj;return e.obj={},t},s.prototype.leaveObject=function(e){const t=this._reporterState,i=t.obj;return t.obj=e,i},s.prototype.error=function(e){let t;const i=this._reporterState,n=e instanceof a;if(t=n?e:new a(i.path.map((function(e){return"["+JSON.stringify(e)+"]"})).join(""),e.message||e,e.stack),!i.options.partial)throw t;return n||i.errors.push(t),t},s.prototype.wrapResult=function(e){const t=this._reporterState;return t.options.partial?{result:this.isError(e)?null:e,errors:t.errors}:e},n(a,Error),a.prototype.rethrow=function(e){if(this.message=e+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,a),!this.stack)try{throw new Error(this.message)}catch(e){this.stack=e.stack}return this}},function(e,t,i){"use strict";function n(e){const t={};return Object.keys(e).forEach((function(i){(0|i)==i&&(i|=0);const n=e[i];t[n]=i})),t}t.tagClass={0:"universal",1:"application",2:"context",3:"private"},t.tagClassByName=n(t.tagClass),t.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},t.tagByName=n(t.tag)},function(e,t,i){"use strict";(function(e){function n(e){return e&&e.Math==Math?e:void 0}i.d(t,"a",(function(){return s})),i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return r}));const s="object"==typeof globalThis&&n(globalThis)||"object"==typeof window&&n(window)||"object"==typeof self&&n(self)||"object"==typeof e&&n(e)||function(){return this}()||{};function a(){return s}function r(e,t,i){const n=i||s,a=n.__SENTRY__=n.__SENTRY__||{};return a[e]||=t()}}).call(this,i(8))},function(e,t){e.exports={UNCOMMON:0,RARE:1,EPIC:2,LEGENDARY:3,RELIC:4,CONTRABAND:5,UNOBTAINABLE:6,NFT:7}},function(e,t,i){const n=i(4),s=i(28);function a(e,t){return!!e&&!!e.isDev||(!this.customOnly||!!t&&!!t.isCustom&&!t.isComp&&(!t.isOfficial||!t.isOfficial.restrictSecs))&&(!!t&&!!t.isCustom&&(!t.isOfficial||!t.isOfficial.restrictSecs)||(!this.premiumOnly||!e||e.premiumT>0)&&(!this.minRec||e&&e.level>=(this.minRec||0)))}e.exports=[{name:"Triggerman",loadout:[1],secondary:!0,colors:[10975328,4013373,2302755,2631720,7098434,12566463],health:100,segs:6,throwChrg:800,speed:1.05,trnSpd:1,regen:.1,wallJ:!1,wallJM:0,leap:!1,bkSlid:!1,slT:1,slA:1,face:4544,melRate:1},{name:"Hunter",loadout:[0],secondary:!0,colors:[10975328,8083261,6506290,2631720,6506290,4008733],health:60,segs:5,throwChrg:800,speed:1,trnSpd:1,regen:.1,wallJ:!1,wallJM:0,leap:!1,bkSlid:!1,slT:1,slA:1,minRec:1,req:a,face:4545,melRate:1},{name:"Run N Gun",loadout:[3],secondary:!1,wallJ:!0,wallJM:2,colors:[10975328,4088706,3099491,2631720,6506290,1715002],health:90,segs:6,throwChrg:800,speed:1.18,trnSpd:1,regen:.1,leap:!1,bkSlid:!1,slT:1,slA:1,face:4546,melRate:1},{name:"Spray N Pray",loadout:[6],secondary:!1,txts:["Calling in the Big Guns?","Remember - No Russian.","Pesky Snipers..."],colors:[10975328,5793865,4806204,2631720,2631720,3160103],health:180,segs:7,throwChrg:800,regen:.05,speed:.9,trnSpd:1,wallJ:!1,wallJM:0,leap:!1,bkSlid:!1,slT:1,slA:.98,face:4547,melRate:1},{name:"Vince",loadout:[5],txts:["...","Don't ever call me Shotgunner","Skill issue"],secondary:!0,colors:[8412234,5526119,4144461,2631720,2631720,2697267],health:90,segs:6,throwChrg:800,speed:1,trnSpd:1,regen:.1,wallJ:!1,wallJM:0,leap:!1,bkSlid:!1,slT:1,slA:1,minRec:1,req:a,face:4548,melRate:1},{name:"Detective",loadout:[4],secondary:!1,txts:["I'm onto something"],colors:[10975328,7360054,4410462,2631720,6506290,4140062],health:100,segs:6,throwChrg:800,speed:1,trnSpd:1,regen:.1,wallJ:!1,wallJM:0,leap:!1,bkSlid:!1,slT:1,slA:1,minRec:1,req:a,face:4549,melRate:1},{name:"Marksman",loadout:[7],secondary:!0,colors:[10975328,4605741,2763291,1842204,2631720,2763291],health:90,segs:6,throwChrg:800,speed:1,trnSpd:1,regen:.1,wallJ:!1,wallJM:0,leap:!1,bkSlid:!1,slT:1,slA:1,face:4550,melRate:1},{name:"Rocketeer",loadout:[8],txts:["..."],secondary:!0,colors:[10975328,5793865,4806204,2631720,7098434,2831140],health:130,segs:7,throwChrg:800,speed:.86,trnSpd:1,regen:.1,wallJ:!1,wallJM:0,leap:!1,bkSlid:!1,slT:1,slA:1,face:4551,melRate:1},{name:"Agent",loadout:[9],secondary:!1,wallJ:!0,wallJM:3,colors:[10975328,4013373,2302755,2631720,2631720,12566463],health:110,segs:6,throwChrg:800,speed:1.2,trnSpd:1,regen:.1,leap:!1,bkSlid:!1,slT:1,slA:1,face:4552,melRate:1},{name:"Runner",txts:["You sure about this?","...","Oh boy","I don't know about this...","Not me again..."],loadout:[12],secondary:!1,wallJ:!0,wallJM:100,colors:[10975328,4013373,2302755,2631720,2631720,2302755],health:120,segs:6,throwChrg:600,regen:.2,speed:1,trnSpd:1,leap:!1,bkSlid:!1,slT:1,slA:1,face:4553,melRate:1},{name:"Deagler",hide:!0,loadout:[10],secondary:!1,noMobile:!0,colors:[10975328,4013373,2302755,2631720,2631720,2302755],health:60,segs:5,throwChrg:800,speed:1,trnSpd:1,regen:.1,wallJ:!1,wallJM:0,leap:!1,bkSlid:!1,slT:1,slA:1,melRate:1},{name:"Bowman",loadout:[13],secondary:!0,noMobile:!0,colors:[10975328,9530450,6308654,2631720,2631720,4666663],health:100,segs:6,throwChrg:800,speed:1,trnSpd:1,regen:.1,wallJ:!1,wallJM:0,leap:!1,bkSlid:!1,slT:1,slA:1,minRec:1,req:a,face:4554,melRate:1},{name:"Commando",loadout:[14],secondary:!0,colors:[10975328,4013373,2302755,2631720,10050604,1513239],health:100,segs:6,throwChrg:800,speed:1,trnSpd:1,regen:.1,wallJ:!1,wallJM:0,leap:!1,bkSlid:!1,slT:1,slA:1,face:4555,melRate:1},{name:"Trooper",wallJ:!0,wallJM:3,loadout:[18],secondary:!1,colors:[10975328,12436169,12436169,3026478,2631720,3026478],health:100,segs:6,throwChrg:800,speed:.9,trnSpd:1,regen:.1,leap:!1,bkSlid:!1,slT:1.1,slA:1,face:4556,melRate:1},{name:"Survivor",wallJ:!0,wallJM:100,hide:!0,noSleeve:!0,noMobile:!0,loadout:[19],colors:[10975328,10975328,10975328,10975328,7098434,10975328],health:150,segs:6,throwChrg:800,speed:.8,trnSpd:1,regen:.1,leap:!1,bkSlid:!1,slT:1,slA:1,melRate:1},{name:"Infiltrator",loadout:[28],secondary:!0,colors:[11635832,14983351,14983351,10066329,15452519,10066329,10066329],health:90,segs:5,throwChrg:800,speed:1,trnSpd:1,regen:.1,wallJ:!1,wallJM:0,leap:!1,bkSlid:!1,slT:1,slA:1,face:5234,melRate:1}];for(var r=0;r<n.classConfig.length;r++)for(var o=0;o<e.exports.length;o++)null==e.exports[o][n.classConfig[r].varN]&&(e.exports[o][n.classConfig[r].varN]=n.classConfig[r].def);var l;for(r=0;r<s.length;r++)if((l=s[r].vals)&&l.length){var c=s[r].prefix;for(o=0;o<l.length;o++)for(var d=0;d<e.exports.length;d++)e.exports[d][c+l[o].varN]=l[o].def}},function(e,t,i){"use strict";t.byteLength=function(e){var t=l(e),i=t[0],n=t[1];return 3*(i+n)/4-n},t.toByteArray=function(e){var t,i,n=l(e),r=n[0],o=n[1],c=new a((u=r,p=o,3*(u+p)/4-p)),d=0,h=o>0?r-4:r;var u,p;for(i=0;i<h;i+=4)t=s[e.charCodeAt(i)]<<18|s[e.charCodeAt(i+1)]<<12|s[e.charCodeAt(i+2)]<<6|s[e.charCodeAt(i+3)],c[d++]=t>>16&255,c[d++]=t>>8&255,c[d++]=255&t;2===o&&(t=s[e.charCodeAt(i)]<<2|s[e.charCodeAt(i+1)]>>4,c[d++]=255&t);1===o&&(t=s[e.charCodeAt(i)]<<10|s[e.charCodeAt(i+1)]<<4|s[e.charCodeAt(i+2)]>>2,c[d++]=t>>8&255,c[d++]=255&t);return c},t.fromByteArray=function(e){for(var t,i=e.length,s=i%3,a=[],r=16383,o=0,l=i-s;o<l;o+=r)a.push(c(e,o,o+r>l?l:o+r));1===s?(t=e[i-1],a.push(n[t>>2]+n[t<<4&63]+"==")):2===s&&(t=(e[i-2]<<8)+e[i-1],a.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return a.join("")};for(var n=[],s=[],a="undefined"==typeof Uint8Array?Array:Uint8Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0;o<64;++o)n[o]=r[o],s[r.charCodeAt(o)]=o;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=e.indexOf("=");return-1===i&&(i=t),[i,i===t?0:4-i%4]}function c(e,t,i){for(var s,a,r=[],o=t;o<i;o+=3)s=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),r.push(n[(a=s)>>18&63]+n[a>>12&63]+n[a>>6&63]+n[63&a]);return r.join("")}s["-".charCodeAt(0)]=62,s["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,i,n,s){var a,r,o=8*s-n-1,l=(1<<o)-1,c=l>>1,d=-7,h=i?s-1:0,u=i?-1:1,p=e[t+h];for(h+=u,a=p&(1<<-d)-1,p>>=-d,d+=o;d>0;d-=8)a=256*a+e[t+h],h+=u;for(r=a&(1<<-d)-1,a>>=-d,d+=n;d>0;d-=8)r=256*r+e[t+h],h+=u;if(0===a)a=1-c;else{if(a===l)return r?NaN:1/0*(p?-1:1);r+=Math.pow(2,n),a-=c}return(p?-1:1)*r*Math.pow(2,a-n)},t.write=function(e,t,i,n,s,a){var r,o,l,c=8*a-s-1,d=(1<<c)-1,h=d>>1,u=23===s?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:a-1,f=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,r=d):(r=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-r))<1&&(r--,l*=2),(t+=r+h>=1?u/l:u*Math.pow(2,1-h))*l>=2&&(r++,l/=2),r+h>=d?(o=0,r=d):r+h>=1?(o=(t*l-1)*Math.pow(2,s),r+=h):(o=t*Math.pow(2,h-1)*Math.pow(2,s),r=0));s>=8;s-=8)e[i+p]=255&o,p+=f,o/=256;for(r=r<<s|o,c+=s;c>0;c-=8)e[i+p]=255&r,p+=f,r/=256;e[i+p-f]|=128*m}},function(e,t,i){"use strict";i.r(t),i.d(t,"encode",(function(){return R})),i.d(t,"decode",(function(){return W})),i.d(t,"decodeMulti",(function(){return q})),i.d(t,"decodeAsync",(function(){return ee})),i.d(t,"decodeArrayStream",(function(){return te})),i.d(t,"decodeMultiStream",(function(){return ie})),i.d(t,"decodeStream",(function(){return ne})),i.d(t,"Decoder",(function(){return V})),i.d(t,"DecodeError",(function(){return g})),i.d(t,"DataViewIndexOutOfBoundsError",(function(){return F})),i.d(t,"Encoder",(function(){return I})),i.d(t,"ExtensionCodec",(function(){return T})),i.d(t,"ExtData",(function(){return f})),i.d(t,"EXT_TIMESTAMP",(function(){return v})),i.d(t,"encodeDateToTimeSpec",(function(){return x})),i.d(t,"encodeTimeSpecToTimestamp",(function(){return w})),i.d(t,"decodeTimestampToTimeSpec",(function(){return M})),i.d(t,"encodeTimestampExtension",(function(){return S})),i.d(t,"decodeTimestampExtension",(function(){return k}));var n=4294967295;function s(e,t,i){var n=Math.floor(i/4294967296),s=i;e.setUint32(t,n),e.setUint32(t+4,s)}function a(e,t){return 4294967296*e.getInt32(t)+e.getUint32(t+4)}var r=("undefined"==typeof process||"never"!==process?.env?.TEXT_ENCODING)&&"undefined"!=typeof TextEncoder&&"undefined"!=typeof TextDecoder;function o(e){for(var t=e.length,i=0,n=0;n<t;){var s=e.charCodeAt(n++);if(0!=(4294967168&s))if(0==(4294965248&s))i+=2;else{if(s>=55296&&s<=56319&&n<t){var a=e.charCodeAt(n);56320==(64512&a)&&(++n,s=((1023&s)<<10)+(1023&a)+65536)}i+=0==(4294901760&s)?3:4}else i++}return i}var l=r?new TextEncoder:void 0,c=r?"undefined"!=typeof process&&"force"!==process?.env?.TEXT_ENCODING?200:0:n;var d=l?.encodeInto?function(e,t,i){l.encodeInto(e,t.subarray(i))}:function(e,t,i){t.set(l.encode(e),i)};function h(e,t,i){for(var n=t,s=n+i,a=[],r="";n<s;){var o=e[n++];if(0==(128&o))a.push(o);else if(192==(224&o)){var l=63&e[n++];a.push((31&o)<<6|l)}else if(224==(240&o)){l=63&e[n++];var c=63&e[n++];a.push((31&o)<<12|l<<6|c)}else if(240==(248&o)){var d=(7&o)<<18|(l=63&e[n++])<<12|(c=63&e[n++])<<6|63&e[n++];d>65535&&(d-=65536,a.push(d>>>10&1023|55296),d=1023&d|56320),a.push(d)}else a.push(o);a.length>=4096&&(r+=String.fromCharCode.apply(String,a),a.length=0)}return a.length>0&&(r+=String.fromCharCode.apply(String,a)),r}var u=r?new TextDecoder:null,p=r?"undefined"!=typeof process&&"force"!==process?.env?.TEXT_DECODER?200:0:n;var f=function(e,t){this.type=e,this.data=t},m=function(){function e(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(t,i)}return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),g=function(e){function t(i){var n=e.call(this,i)||this,s=Object.create(t.prototype);return Object.setPrototypeOf(n,s),Object.defineProperty(n,"name",{configurable:!0,enumerable:!1,value:t.name}),n}return m(t,e),t}(Error),v=-1,y=4294967295,b=17179869183;function w(e){var t=e.sec,i=e.nsec;if(t>=0&&i>=0&&t<=b){if(0===i&&t<=y){var n=new Uint8Array(4);return(o=new DataView(n.buffer)).setUint32(0,t),n}var a=t/4294967296,r=4294967295&t;n=new Uint8Array(8);return(o=new DataView(n.buffer)).setUint32(0,i<<2|3&a),o.setUint32(4,r),n}var o;n=new Uint8Array(12);return(o=new DataView(n.buffer)).setUint32(0,i),s(o,4,t),n}function x(e){var t=e.getTime(),i=Math.floor(t/1e3),n=1e6*(t-1e3*i),s=Math.floor(n/1e9);return{sec:i+s,nsec:n-1e9*s}}function S(e){return e instanceof Date?w(x(e)):null}function M(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);switch(e.byteLength){case 4:return{sec:t.getUint32(0),nsec:0};case 8:var i=t.getUint32(0);return{sec:4294967296*(3&i)+t.getUint32(4),nsec:i>>>2};case 12:return{sec:a(t,4),nsec:t.getUint32(0)};default:throw new g(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${e.length}`)}}function k(e){var t=M(e);return new Date(1e3*t.sec+t.nsec/1e6)}var _={type:v,encode:S,decode:k},T=function(){function e(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(_)}return e.prototype.register=function(e){var t=e.type,i=e.encode,n=e.decode;if(t>=0)this.encoders[t]=i,this.decoders[t]=n;else{var s=1+t;this.builtInEncoders[s]=i,this.builtInDecoders[s]=n}},e.prototype.tryToEncode=function(e,t){for(var i=0;i<this.builtInEncoders.length;i++){if(null!=(n=this.builtInEncoders[i]))if(null!=(s=n(e,t)))return new f(-1-i,s)}for(i=0;i<this.encoders.length;i++){var n,s;if(null!=(n=this.encoders[i]))if(null!=(s=n(e,t)))return new f(i,s)}return e instanceof f?e:null},e.prototype.decode=function(e,t,i){var n=t<0?this.builtInDecoders[-1-t]:this.decoders[t];return n?n(e,t,i):new f(t,e)},e.defaultCodec=new e,e}();function C(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer?new Uint8Array(e):Uint8Array.from(e)}var I=function(){function e(e=T.defaultCodec,t=void 0,i=100,n=2048,s=!1,a=!1,r=!1,o=!1){this.extensionCodec=e,this.context=t,this.maxDepth=i,this.initialBufferSize=n,this.sortKeys=s,this.forceFloat32=a,this.ignoreUndefined=r,this.forceIntegerToFloat=o,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}return e.prototype.reinitializeState=function(){this.pos=0},e.prototype.encodeSharedRef=function(e){return this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)},e.prototype.encode=function(e){return this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)},e.prototype.doEncode=function(e,t){if(t>this.maxDepth)throw new Error(`Too deep objects in depth ${t}`);null==e?this.encodeNil():"boolean"==typeof e?this.encodeBoolean(e):"number"==typeof e?this.encodeNumber(e):"string"==typeof e?this.encodeString(e):this.encodeObject(e,t)},e.prototype.ensureBufferSizeToWrite=function(e){var t=this.pos+e;this.view.byteLength<t&&this.resizeBuffer(2*t)},e.prototype.resizeBuffer=function(e){var t=new ArrayBuffer(e),i=new Uint8Array(t),n=new DataView(t);i.set(this.bytes),this.view=n,this.bytes=i},e.prototype.encodeNil=function(){this.writeU8(192)},e.prototype.encodeBoolean=function(e){!1===e?this.writeU8(194):this.writeU8(195)},e.prototype.encodeNumber=function(e){Number.isSafeInteger(e)&&!this.forceIntegerToFloat?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(e+32|224):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):(this.writeU8(211),this.writeI64(e)):this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))},e.prototype.writeStringHeader=function(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else{if(!(e<4294967296))throw new Error(`Too long string: ${e} bytes in UTF-8`);this.writeU8(219),this.writeU32(e)}},e.prototype.encodeString=function(e){if(e.length>c){var t=o(e);this.ensureBufferSizeToWrite(5+t),this.writeStringHeader(t),d(e,this.bytes,this.pos),this.pos+=t}else{t=o(e);this.ensureBufferSizeToWrite(5+t),this.writeStringHeader(t),function(e,t,i){for(var n=e.length,s=i,a=0;a<n;){var r=e.charCodeAt(a++);if(0!=(4294967168&r)){if(0==(4294965248&r))t[s++]=r>>6&31|192;else{if(r>=55296&&r<=56319&&a<n){var o=e.charCodeAt(a);56320==(64512&o)&&(++a,r=((1023&r)<<10)+(1023&o)+65536)}0==(4294901760&r)?(t[s++]=r>>12&15|224,t[s++]=r>>6&63|128):(t[s++]=r>>18&7|240,t[s++]=r>>12&63|128,t[s++]=r>>6&63|128)}t[s++]=63&r|128}else t[s++]=r}}(e,this.bytes,this.pos),this.pos+=t}},e.prototype.encodeObject=function(e,t){var i=this.extensionCodec.tryToEncode(e,this.context);if(null!=i)this.encodeExtension(i);else if(Array.isArray(e))this.encodeArray(e,t);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else{if("object"!=typeof e)throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(e)}`);this.encodeMap(e,t)}},e.prototype.encodeBinary=function(e){var t=e.byteLength;if(t<256)this.writeU8(196),this.writeU8(t);else if(t<65536)this.writeU8(197),this.writeU16(t);else{if(!(t<4294967296))throw new Error(`Too large binary: ${t}`);this.writeU8(198),this.writeU32(t)}var i=C(e);this.writeU8a(i)},e.prototype.encodeArray=function(e,t){var i=e.length;if(i<16)this.writeU8(144+i);else if(i<65536)this.writeU8(220),this.writeU16(i);else{if(!(i<4294967296))throw new Error(`Too large array: ${i}`);this.writeU8(221),this.writeU32(i)}for(var n=0,s=e;n<s.length;n++){var a=s[n];this.doEncode(a,t+1)}},e.prototype.countWithoutUndefined=function(e,t){for(var i=0,n=0,s=t;n<s.length;n++){void 0!==e[s[n]]&&i++}return i},e.prototype.encodeMap=function(e,t){var i=Object.keys(e);this.sortKeys&&i.sort();var n=this.ignoreUndefined?this.countWithoutUndefined(e,i):i.length;if(n<16)this.writeU8(128+n);else if(n<65536)this.writeU8(222),this.writeU16(n);else{if(!(n<4294967296))throw new Error(`Too large map object: ${n}`);this.writeU8(223),this.writeU32(n)}for(var s=0,a=i;s<a.length;s++){var r=a[s],o=e[r];this.ignoreUndefined&&void 0===o||(this.encodeString(r),this.doEncode(o,t+1))}},e.prototype.encodeExtension=function(e){var t=e.data.length;if(1===t)this.writeU8(212);else if(2===t)this.writeU8(213);else if(4===t)this.writeU8(214);else if(8===t)this.writeU8(215);else if(16===t)this.writeU8(216);else if(t<256)this.writeU8(199),this.writeU8(t);else if(t<65536)this.writeU8(200),this.writeU16(t);else{if(!(t<4294967296))throw new Error(`Too large extension object: ${t}`);this.writeU8(201),this.writeU32(t)}this.writeI8(e.type),this.writeU8a(e.data)},e.prototype.writeU8=function(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++},e.prototype.writeU8a=function(e){var t=e.length;this.ensureBufferSizeToWrite(t),this.bytes.set(e,this.pos),this.pos+=t},e.prototype.writeI8=function(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++},e.prototype.writeU16=function(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2},e.prototype.writeI16=function(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2},e.prototype.writeU32=function(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4},e.prototype.writeI32=function(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4},e.prototype.writeF32=function(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4},e.prototype.writeF64=function(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8},e.prototype.writeU64=function(e){var t,i,n,s,a;this.ensureBufferSizeToWrite(8),t=this.view,i=this.pos,s=(n=e)/4294967296,a=n,t.setUint32(i,s),t.setUint32(i+4,a),this.pos+=8},e.prototype.writeI64=function(e){this.ensureBufferSizeToWrite(8),s(this.view,this.pos,e),this.pos+=8},e}(),A={};function R(e,t=A){return new I(t.extensionCodec,t.context,t.maxDepth,t.initialBufferSize,t.sortKeys,t.forceFloat32,t.ignoreUndefined,t.forceIntegerToFloat).encodeSharedRef(e)}function P(e){return`${e<0?"-":""}0x${Math.abs(e).toString(16).padStart(2,"0")}`}var E=function(){function e(e=16,t=16){this.maxKeyLength=e,this.maxLengthPerKey=t,this.hit=0,this.miss=0,this.caches=[];for(var i=0;i<this.maxKeyLength;i++)this.caches.push([])}return e.prototype.canBeCached=function(e){return e>0&&e<=this.maxKeyLength},e.prototype.find=function(e,t,i){e:for(var n=0,s=this.caches[i-1];n<s.length;n++){for(var a=s[n],r=a.bytes,o=0;o<i;o++)if(r[o]!==e[t+o])continue e;return a.str}return null},e.prototype.store=function(e,t){var i=this.caches[e.length-1],n={bytes:e,str:t};i.length>=this.maxLengthPerKey?i[Math.random()*i.length|0]=n:i.push(n)},e.prototype.decode=function(e,t,i){var n=this.find(e,t,i);if(null!=n)return this.hit++,n;this.miss++;var s=h(e,t,i),a=Uint8Array.prototype.slice.call(e,t,t+i);return this.store(a,s),s},e}(),D=function(e,t,i,n){return new(i||=Promise)((function(s,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,o)}l((n=n.apply(e,t||[])).next())}))},O=function(e,t){var i,n,s,a,r={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(a){return function(o){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(s=2&a[0]?n.return:a[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,a[1])).done)return s;switch(n=0,s&&(a=[2&a[0],s.value]),a[0]){case 0:case 1:s=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(s=r.trys,(s=s.length>0&&s[s.length-1])||6!==a[0]&&2!==a[0])){r=0;continue}if(3===a[0]&&(!s||a[1]>s[0]&&a[1]<s[3])){r.label=a[1];break}if(6===a[0]&&r.label<s[1]){r.label=s[1],s=a;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(a);break}s[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],n=0}finally{i=s=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,o])}}},L=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,i=e[Symbol.asyncIterator];return i?i.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(i){t[i]=e[i]&&function(t){return new Promise((function(n,s){var a,r,o,l;t=e[i](t),a=n,r=s,o=t.done,l=t.value,Promise.resolve(l).then((function(e){a({value:e,done:o})}),r)}))}}},j=function(e){return this instanceof j?(this.v=e,this):new j(e)},z=function(e,t,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,s=i.apply(e,t||[]),a=[];return n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n;function r(e){s[e]&&(n[e]=function(t){return new Promise((function(i,n){a.push([e,t,i,n])<=1&&o(e,t)}))})}function o(e,t){try{(i=s[e](t)).value instanceof j?Promise.resolve(i.value.v).then(l,c):d(a[0][2],i)}catch(e){d(a[0][3],e)}var i}function l(e){o("next",e)}function c(e){o("throw",e)}function d(e,t){e(t),a.shift(),a.length&&o(a[0][0],a[0][1])}};var B=new DataView(new ArrayBuffer(0)),N=new Uint8Array(B.buffer),F=function(){try{B.getInt8(0)}catch(e){return e.constructor}throw new Error("never reached")}(),H=new F("Insufficient data"),U=new E,V=function(){function e(e=T.defaultCodec,t=void 0,i=n,s=n,a=n,r=n,o=n,l=U){this.extensionCodec=e,this.context=t,this.maxStrLength=i,this.maxBinLength=s,this.maxArrayLength=a,this.maxMapLength=r,this.maxExtLength=o,this.keyDecoder=l,this.totalPos=0,this.pos=0,this.view=B,this.bytes=N,this.headByte=-1,this.stack=[]}return e.prototype.reinitializeState=function(){this.totalPos=0,this.headByte=-1,this.stack.length=0},e.prototype.setBuffer=function(e){this.bytes=C(e),this.view=function(e){if(e instanceof ArrayBuffer)return new DataView(e);var t=C(e);return new DataView(t.buffer,t.byteOffset,t.byteLength)}(this.bytes),this.pos=0},e.prototype.appendBuffer=function(e){if(-1!==this.headByte||this.hasRemaining(1)){var t=this.bytes.subarray(this.pos),i=C(e),n=new Uint8Array(t.length+i.length);n.set(t),n.set(i,t.length),this.setBuffer(n)}else this.setBuffer(e)},e.prototype.hasRemaining=function(e){return this.view.byteLength-this.pos>=e},e.prototype.createExtraByteError=function(e){var t=this.view,i=this.pos;return new RangeError(`Extra ${t.byteLength-i} of ${t.byteLength} byte(s) found at buffer[${e}]`)},e.prototype.decode=function(e){this.reinitializeState(),this.setBuffer(e);var t=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return t},e.prototype.decodeMulti=function(e){return O(this,(function(t){switch(t.label){case 0:this.reinitializeState(),this.setBuffer(e),t.label=1;case 1:return this.hasRemaining(1)?[4,this.doDecodeSync()]:[3,3];case 2:return t.sent(),[3,1];case 3:return[2]}}))},e.prototype.decodeAsync=function(e){var t,i,n,s;return D(this,void 0,void 0,(function(){var a,r,o,l,c,d,h,u;return O(this,(function(p){switch(p.label){case 0:a=!1,p.label=1;case 1:p.trys.push([1,6,7,12]),t=L(e),p.label=2;case 2:return[4,t.next()];case 3:if((i=p.sent()).done)return[3,5];if(o=i.value,a)throw this.createExtraByteError(this.totalPos);this.appendBuffer(o);try{r=this.doDecodeSync(),a=!0}catch(e){if(!(e instanceof F))throw e}this.totalPos+=this.pos,p.label=4;case 4:return[3,2];case 5:return[3,12];case 6:return l=p.sent(),n={error:l},[3,12];case 7:return p.trys.push([7,,10,11]),i&&!i.done&&(s=t.return)?[4,s.call(t)]:[3,9];case 8:p.sent(),p.label=9;case 9:return[3,11];case 10:if(n)throw n.error;return[7];case 11:return[7];case 12:if(a){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return[2,r]}throw d=(c=this).headByte,h=c.pos,u=c.totalPos,new RangeError(`Insufficient data in parsing ${P(d)} at ${u} (${h} in the current buffer)`)}}))}))},e.prototype.decodeArrayStream=function(e){return this.decodeMultiAsync(e,!0)},e.prototype.decodeStream=function(e){return this.decodeMultiAsync(e,!1)},e.prototype.decodeMultiAsync=function(e,t){return z(this,arguments,(function(){var i,n,s,a,r,o,l,c,d;return O(this,(function(h){switch(h.label){case 0:i=t,n=-1,h.label=1;case 1:h.trys.push([1,13,14,19]),s=L(e),h.label=2;case 2:return[4,j(s.next())];case 3:if((a=h.sent()).done)return[3,12];if(r=a.value,t&&0===n)throw this.createExtraByteError(this.totalPos);this.appendBuffer(r),i&&(n=this.readArraySize(),i=!1,this.complete()),h.label=4;case 4:h.trys.push([4,9,,10]),h.label=5;case 5:return[4,j(this.doDecodeSync())];case 6:return[4,h.sent()];case 7:return h.sent(),0==--n?[3,8]:[3,5];case 8:return[3,10];case 9:if(!((o=h.sent())instanceof F))throw o;return[3,10];case 10:this.totalPos+=this.pos,h.label=11;case 11:return[3,2];case 12:return[3,19];case 13:return l=h.sent(),c={error:l},[3,19];case 14:return h.trys.push([14,,17,18]),a&&!a.done&&(d=s.return)?[4,j(d.call(s))]:[3,16];case 15:h.sent(),h.label=16;case 16:return[3,18];case 17:if(c)throw c.error;return[7];case 18:return[7];case 19:return[2]}}))}))},e.prototype.doDecodeSync=function(){e:for(;;){var e=this.readHeadByte(),t=void 0;if(e>=224)t=e-256;else if(e<192)if(e<128)t=e;else if(e<144){if(0!==(n=e-128)){this.pushMapState(n),this.complete();continue e}t={}}else if(e<160){if(0!==(n=e-144)){this.pushArrayState(n),this.complete();continue e}t=[]}else{var i=e-160;t=this.decodeUtf8String(i,0)}else if(192===e)t=null;else if(194===e)t=!1;else if(195===e)t=!0;else if(202===e)t=this.readF32();else if(203===e)t=this.readF64();else if(204===e)t=this.readU8();else if(205===e)t=this.readU16();else if(206===e)t=this.readU32();else if(207===e)t=this.readU64();else if(208===e)t=this.readI8();else if(209===e)t=this.readI16();else if(210===e)t=this.readI32();else if(211===e)t=this.readI64();else if(217===e){i=this.lookU8();t=this.decodeUtf8String(i,1)}else if(218===e){i=this.lookU16();t=this.decodeUtf8String(i,2)}else if(219===e){i=this.lookU32();t=this.decodeUtf8String(i,4)}else if(220===e){if(0!==(n=this.readU16())){this.pushArrayState(n),this.complete();continue e}t=[]}else if(221===e){if(0!==(n=this.readU32())){this.pushArrayState(n),this.complete();continue e}t=[]}else if(222===e){if(0!==(n=this.readU16())){this.pushMapState(n),this.complete();continue e}t={}}else if(223===e){if(0!==(n=this.readU32())){this.pushMapState(n),this.complete();continue e}t={}}else if(196===e){var n=this.lookU8();t=this.decodeBinary(n,1)}else if(197===e){n=this.lookU16();t=this.decodeBinary(n,2)}else if(198===e){n=this.lookU32();t=this.decodeBinary(n,4)}else if(212===e)t=this.decodeExtension(1,0);else if(213===e)t=this.decodeExtension(2,0);else if(214===e)t=this.decodeExtension(4,0);else if(215===e)t=this.decodeExtension(8,0);else if(216===e)t=this.decodeExtension(16,0);else if(199===e){n=this.lookU8();t=this.decodeExtension(n,1)}else if(200===e){n=this.lookU16();t=this.decodeExtension(n,2)}else{if(201!==e)throw new g(`Unrecognized type byte: ${P(e)}`);n=this.lookU32();t=this.decodeExtension(n,4)}this.complete();for(var s=this.stack;s.length>0;){var a=s[s.length-1];if(0===a.type){if(a.array[a.position]=t,a.position++,a.position!==a.size)continue e;s.pop(),t=a.array}else{if(1===a.type){if(r=void 0,"string"!==(r=typeof t)&&"number"!==r)throw new g("The type of key must be string or number but "+typeof t);if("__proto__"===t)throw new g("The key __proto__ is not allowed");a.key=t,a.type=2;continue e}if(a.map[a.key]=t,a.readCount++,a.readCount!==a.size){a.key=null,a.type=1;continue e}s.pop(),t=a.map}}return t}var r},e.prototype.readHeadByte=function(){return-1===this.headByte&&(this.headByte=this.readU8()),this.headByte},e.prototype.complete=function(){this.headByte=-1},e.prototype.readArraySize=function(){var e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:if(e<160)return e-144;throw new g(`Unrecognized array type byte: ${P(e)}`)}},e.prototype.pushMapState=function(e){if(e>this.maxMapLength)throw new g(`Max length exceeded: map length (${e}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.push({type:1,size:e,key:null,readCount:0,map:{}})},e.prototype.pushArrayState=function(e){if(e>this.maxArrayLength)throw new g(`Max length exceeded: array length (${e}) > maxArrayLength (${this.maxArrayLength})`);this.stack.push({type:0,size:e,array:new Array(e),position:0})},e.prototype.decodeUtf8String=function(e,t){var i;if(e>this.maxStrLength)throw new g(`Max length exceeded: UTF-8 byte length (${e}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+t+e)throw H;var n,s,a,r,o,l=this.pos+t;return this.stateIsMapKey()&&(null===(i=this.keyDecoder)||void 0===i?void 0:i.canBeCached(e))?n=this.keyDecoder.decode(this.bytes,l,e):e>p?(s=this.bytes,a=l,r=e,o=s.subarray(a,a+r),n=u.decode(o)):n=h(this.bytes,l,e),this.pos+=t+e,n},e.prototype.stateIsMapKey=function(){return this.stack.length>0&&1===this.stack[this.stack.length-1].type},e.prototype.decodeBinary=function(e,t){if(e>this.maxBinLength)throw new g(`Max length exceeded: bin length (${e}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(e+t))throw H;var i=this.pos+t,n=this.bytes.subarray(i,i+e);return this.pos+=t+e,n},e.prototype.decodeExtension=function(e,t){if(e>this.maxExtLength)throw new g(`Max length exceeded: ext length (${e}) > maxExtLength (${this.maxExtLength})`);var i=this.view.getInt8(this.pos+t),n=this.decodeBinary(e,t+1);return this.extensionCodec.decode(n,i,this.context)},e.prototype.lookU8=function(){return this.view.getUint8(this.pos)},e.prototype.lookU16=function(){return this.view.getUint16(this.pos)},e.prototype.lookU32=function(){return this.view.getUint32(this.pos)},e.prototype.readU8=function(){var e=this.view.getUint8(this.pos);return this.pos++,e},e.prototype.readI8=function(){var e=this.view.getInt8(this.pos);return this.pos++,e},e.prototype.readU16=function(){var e=this.view.getUint16(this.pos);return this.pos+=2,e},e.prototype.readI16=function(){var e=this.view.getInt16(this.pos);return this.pos+=2,e},e.prototype.readU32=function(){var e=this.view.getUint32(this.pos);return this.pos+=4,e},e.prototype.readI32=function(){var e=this.view.getInt32(this.pos);return this.pos+=4,e},e.prototype.readU64=function(){var e,t,i=(e=this.view,t=this.pos,4294967296*e.getUint32(t)+e.getUint32(t+4));return this.pos+=8,i},e.prototype.readI64=function(){var e=a(this.view,this.pos);return this.pos+=8,e},e.prototype.readF32=function(){var e=this.view.getFloat32(this.pos);return this.pos+=4,e},e.prototype.readF64=function(){var e=this.view.getFloat64(this.pos);return this.pos+=8,e},e}(),G={};function W(e,t=G){return new V(t.extensionCodec,t.context,t.maxStrLength,t.maxBinLength,t.maxArrayLength,t.maxMapLength,t.maxExtLength).decode(e)}function q(e,t=G){return new V(t.extensionCodec,t.context,t.maxStrLength,t.maxBinLength,t.maxArrayLength,t.maxMapLength,t.maxExtLength).decodeMulti(e)}var Y=function(e,t){var i,n,s,a,r={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(a){return function(o){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(s=2&a[0]?n.return:a[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,a[1])).done)return s;switch(n=0,s&&(a=[2&a[0],s.value]),a[0]){case 0:case 1:s=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(s=r.trys,(s=s.length>0&&s[s.length-1])||6!==a[0]&&2!==a[0])){r=0;continue}if(3===a[0]&&(!s||a[1]>s[0]&&a[1]<s[3])){r.label=a[1];break}if(6===a[0]&&r.label<s[1]){r.label=s[1],s=a;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(a);break}s[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],n=0}finally{i=s=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,o])}}},K=function(e){return this instanceof K?(this.v=e,this):new K(e)},X=function(e,t,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,s=i.apply(e,t||[]),a=[];return n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n;function r(e){s[e]&&(n[e]=function(t){return new Promise((function(i,n){a.push([e,t,i,n])<=1&&o(e,t)}))})}function o(e,t){try{(i=s[e](t)).value instanceof K?Promise.resolve(i.value.v).then(l,c):d(a[0][2],i)}catch(e){d(a[0][3],e)}var i}function l(e){o("next",e)}function c(e){o("throw",e)}function d(e,t){e(t),a.shift(),a.length&&o(a[0][0],a[0][1])}};function Z(e){return X(this,arguments,(function(){var t,i,n,s;return Y(this,(function(a){switch(a.label){case 0:t=e.getReader(),a.label=1;case 1:a.trys.push([1,,9,10]),a.label=2;case 2:return[4,K(t.read())];case 3:return i=a.sent(),n=i.done,s=i.value,n?[4,K(void 0)]:[3,5];case 4:return[2,a.sent()];case 5:return function(e){if(null==e)throw new Error("Assertion Failure: value must not be null nor undefined")}(s),[4,K(s)];case 6:return[4,a.sent()];case 7:return a.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}function J(e){return null!=e[Symbol.asyncIterator]?e:Z(e)}var Q=function(e,t,i,n){return new(i||=Promise)((function(s,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,o)}l((n=n.apply(e,t||[])).next())}))},$=function(e,t){var i,n,s,a,r={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(a){return function(o){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(s=2&a[0]?n.return:a[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,a[1])).done)return s;switch(n=0,s&&(a=[2&a[0],s.value]),a[0]){case 0:case 1:s=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(s=r.trys,(s=s.length>0&&s[s.length-1])||6!==a[0]&&2!==a[0])){r=0;continue}if(3===a[0]&&(!s||a[1]>s[0]&&a[1]<s[3])){r.label=a[1];break}if(6===a[0]&&r.label<s[1]){r.label=s[1],s=a;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(a);break}s[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],n=0}finally{i=s=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,o])}}};function ee(e,t=G){return Q(this,void 0,void 0,(function(){var i;return $(this,(function(n){return i=J(e),[2,new V(t.extensionCodec,t.context,t.maxStrLength,t.maxBinLength,t.maxArrayLength,t.maxMapLength,t.maxExtLength).decodeAsync(i)]}))}))}function te(e,t=G){var i=J(e);return new V(t.extensionCodec,t.context,t.maxStrLength,t.maxBinLength,t.maxArrayLength,t.maxMapLength,t.maxExtLength).decodeArrayStream(i)}function ie(e,t=G){var i=J(e);return new V(t.extensionCodec,t.context,t.maxStrLength,t.maxBinLength,t.maxArrayLength,t.maxMapLength,t.maxExtLength).decodeStream(i)}function ne(e,t=G){return ie(e,t)}},function(e,t,i){var n=[i(143),i(144),i(145),i(231),i(232),i(233),i(234),i(235),i(236),i(237),i(238),i(239),i(240),i(241),i(242),i(243),i(244),i(245),i(246),i(247),i(248),i(249),i(250),i(251),i(252),i(253),i(254),i(255),i(256),i(257),i(258),i(259),i(260),i(261),i(262),i(263),i(264)];e.exports=n},function(e,t,i){"use strict";var n=i(147).Buffer,s=i(69).Transform;function a(e){s.call(this),this._block=n.allocUnsafe(e),this._blockSize=e,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}i(2)(a,s),a.prototype._transform=function(e,t,i){var n=null;try{this.update(e,t)}catch(e){n=e}i(n)},a.prototype._flush=function(e){var t=null;try{this.push(this.digest())}catch(e){t=e}e(t)},a.prototype.update=function(e,t){if(function(e,t){if(!n.isBuffer(e)&&"string"!=typeof e)throw new TypeError(t+" must be a string or a buffer")}(e,"Data"),this._finalized)throw new Error("Digest already called");n.isBuffer(e)||(e=n.from(e,t));for(var i=this._block,s=0;this._blockOffset+e.length-s>=this._blockSize;){for(var a=this._blockOffset;a<this._blockSize;)i[a++]=e[s++];this._update(),this._blockOffset=0}for(;s<e.length;)i[this._blockOffset++]=e[s++];for(var r=0,o=8*e.length;o>0;++r)this._length[r]+=o,(o=this._length[r]/4294967296|0)>0&&(this._length[r]-=4294967296*o);return this},a.prototype._update=function(){throw new Error("_update is not implemented")},a.prototype.digest=function(e){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var t=this._digest();void 0!==e&&(t=t.toString(e)),this._block.fill(0),this._blockOffset=0;for(var i=0;i<4;++i)this._length[i]=0;return t},a.prototype._digest=function(){throw new Error("_digest is not implemented")},e.exports=a},function(e,t,i){(t=e.exports=i(70)).Stream=t,t.Readable=t,t.Writable=i(74),t.Duplex=i(18),t.Transform=i(76),t.PassThrough=i(153),t.finished=i(42),t.pipeline=i(154)},function(e,t,i){"use strict";(function(t,n){var s;e.exports=_,_.ReadableState=k;i(21).EventEmitter;function a(e,t){return e.listeners(t).length}var r,o=i(71),l=i(6).Buffer,c=t.Uint8Array||function(){};var d,h,u,p=i(148);r=p&&p.debuglog?p.debuglog("stream"):function(){};var f=i(149),m=i(72),g=i(73).getHighWaterMark,v=i(17).codes,y=v.ERR_INVALID_ARG_TYPE,b=v.ERR_STREAM_PUSH_AFTER_EOF,w=v.ERR_METHOD_NOT_IMPLEMENTED,x=v.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;i(2)(_,o);var S=m.errorOrDestroy,M=["error","close","destroy","pause","resume"];function k(e,t,n){s=s||i(18),e=e||{},"boolean"!=typeof n&&(n=t instanceof s),this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=g(this,e,"readableHighWaterMark",n),this.buffer=new f,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(d||(d=i(22).StringDecoder),this.decoder=new d(e.encoding),this.encoding=e.encoding)}function _(e){if(s=s||i(18),!(this instanceof _))return new _(e);var t=this instanceof s;this._readableState=new k(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),o.call(this)}function T(e,t,i,n,s){r("readableAddChunk",t);var a,o,d=e._readableState;if(null===t)d.reading=!1,function(e,t){if(r("onEofChunk"),!t.ended){if(t.decoder){var i=t.decoder.end();i&&i.length&&(t.buffer.push(i),t.length+=t.objectMode?1:i.length)}t.ended=!0,t.sync?R(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,P(e)))}}(e,d);else if(s||(a=function(e,t){var i;n=t,l.isBuffer(n)||n instanceof c||"string"==typeof t||void 0===t||e.objectMode||(i=new y("chunk",["string","Buffer","Uint8Array"],t));var n;return i}(d,t)),a)S(e,a);else if(d.objectMode||t&&!(t.length<=0))if("string"==typeof t||d.objectMode||Object.getPrototypeOf(t)===l.prototype||(o=t,t=l.from(o)),n)d.endEmitted?S(e,new x):C(e,d,t,!0);else if(d.ended)S(e,new b);else{if(d.destroyed)return!1;d.reading=!1,d.decoder&&!i?(t=d.decoder.write(t),d.objectMode||0!==t.length?C(e,d,t,!1):E(e,d)):C(e,d,t,!1)}else n||(d.reading=!1,E(e,d));return!d.ended&&(d.length<d.highWaterMark||0===d.length)}function C(e,t,i,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",i)):(t.length+=t.objectMode?1:i.length,n?t.buffer.unshift(i):t.buffer.push(i),t.needReadable&&R(e)),E(e,t)}Object.defineProperty(_.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),_.prototype.destroy=m.destroy,_.prototype._undestroy=m.undestroy,_.prototype._destroy=function(e,t){t(e)},_.prototype.push=function(e,t){var i,n=this._readableState;return n.objectMode?i=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=l.from(e,t),t=""),i=!0),T(this,e,t,!1,i)},_.prototype.unshift=function(e){return T(this,e,null,!0,!1)},_.prototype.isPaused=function(){return!1===this._readableState.flowing},_.prototype.setEncoding=function(e){d||=i(22).StringDecoder;var t=new d(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,s="";null!==n;)s+=t.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==s&&this._readableState.buffer.push(s),this._readableState.length=s.length,this};var I=1073741824;function A(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e==e?(e>t.highWaterMark&&(t.highWaterMark=((i=e)>=I?i=I:(i--,i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,i|=i>>>16,i++),i)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0)):t.flowing&&t.length?t.buffer.head.data.length:t.length;var i}function R(e){var t=e._readableState;r("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(r("emitReadable",t.flowing),t.emittedReadable=!0,n.nextTick(P,e))}function P(e){var t=e._readableState;r("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,z(e)}function E(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(D,e,t))}function D(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var i=t.length;if(r("maybeReadMore read 0"),e.read(0),i===t.length)break}t.readingMore=!1}function O(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function L(e){r("readable nexttick read 0"),e.read(0)}function j(e,t){r("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),z(e),t.flowing&&!t.reading&&e.read(0)}function z(e){var t=e._readableState;for(r("flow",t.flowing);t.flowing&&null!==e.read(););}function B(e,t){return 0===t.length?null:(t.objectMode?i=t.buffer.shift():!e||e>=t.length?(i=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):i=t.buffer.consume(e,t.decoder),i);var i}function N(e){var t=e._readableState;r("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,n.nextTick(F,t,e))}function F(e,t){if(r("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var i=t._writableState;(!i||i.autoDestroy&&i.finished)&&t.destroy()}}function H(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i]===t)return i;return-1}_.prototype.read=function(e){r("read",e),e=parseInt(e,10);var t=this._readableState,i=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0===t.highWaterMark?t.length>0:t.length>=t.highWaterMark)||t.ended))return r("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?N(this):R(this),null;if(0===(e=A(e,t))&&t.ended)return 0===t.length&&N(this),null;var n,s=t.needReadable;return r("need readable",s),(0===t.length||t.length-e<t.highWaterMark)&&r("length less than watermark",s=!0),t.ended||t.reading?r("reading or ended",s=!1):s&&(r("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=A(i,t))),null===(n=e>0?B(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),i!==e&&t.ended&&N(this)),null!==n&&this.emit("data",n),n},_.prototype._read=function(){S(this,new w("_read()"))},_.prototype.pipe=function(e,t){function i(t,n){r("onunpipe"),t===u&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,r("cleanup"),e.removeListener("close",c),e.removeListener("finish",d),e.removeListener("drain",g),e.removeListener("error",l),e.removeListener("unpipe",i),u.removeListener("end",s),u.removeListener("end",h),u.removeListener("data",o),w=!0,!p.awaitDrain||e._writableState&&!e._writableState.needDrain||g())}function s(){r("onend"),e.end()}function o(t){r("ondata");var i=e.write(t);r("dest.write",i),!1===i&&((1===p.pipesCount&&p.pipes===e||p.pipesCount>1&&-1!==H(p.pipes,e))&&!w&&(r("false write response, pause",p.awaitDrain),p.awaitDrain++),u.pause())}function l(t){r("onerror",t),h(),e.removeListener("error",l),0===a(e,"error")&&S(e,t)}function c(){e.removeListener("finish",d),h()}function d(){r("onfinish"),e.removeListener("close",c),h()}function h(){r("unpipe"),u.unpipe(e)}var u=this,p=this._readableState;switch(p.pipesCount){case 0:p.pipes=e;break;case 1:p.pipes=[p.pipes,e];break;default:p.pipes.push(e)}p.pipesCount+=1,r("pipe count=%d opts=%j",p.pipesCount,t);var f=(!t||!1!==t.end)&&e!==n.stdout&&e!==n.stderr?s:h;p.endEmitted?n.nextTick(f):u.once("end",f),e.on("unpipe",i);var m,g=(m=u,function(){var e=m._readableState;r("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&a(m,"data")&&(e.flowing=!0,z(m))});e.on("drain",g);var v,y,b,w=!1;return u.on("data",o),y="error",b=l,"function"==typeof(v=e).prependListener?v.prependListener(y,b):v._events&&v._events[y]?Array.isArray(v._events[y])?v._events[y].unshift(b):v._events[y]=[b,v._events[y]]:v.on(y,b),e.once("close",c),e.once("finish",d),e.emit("pipe",u),p.flowing||(r("pipe resume"),u.resume()),e},_.prototype.unpipe=function(e){var t=this._readableState,i={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||=t.pipes,t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,i)),this;if(!e){var n=t.pipes,s=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<s;a++)n[a].emit("unpipe",this,{hasUnpiped:!1});return this}var r=H(t.pipes,e);return-1===r||(t.pipes.splice(r,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,i)),this},_.prototype.on=function(e,t){var i=o.prototype.on.call(this,e,t),s=this._readableState;return"data"===e?(s.readableListening=this.listenerCount("readable")>0,!1!==s.flowing&&this.resume()):"readable"!=e||s.endEmitted||s.readableListening||(s.readableListening=s.needReadable=!0,s.flowing=!1,s.emittedReadable=!1,r("on readable",s.length,s.reading),s.length?R(this):s.reading||n.nextTick(L,this)),i},_.prototype.addListener=_.prototype.on,_.prototype.removeListener=function(e,t){var i=o.prototype.removeListener.call(this,e,t);return"readable"===e&&n.nextTick(O,this),i},_.prototype.removeAllListeners=function(e){var t=o.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||n.nextTick(O,this),t},_.prototype.resume=function(){var e,t,i=this._readableState;return i.flowing||(r("resume"),i.flowing=!i.readableListening,e=this,(t=i).resumeScheduled||(t.resumeScheduled=!0,n.nextTick(j,e,t))),i.paused=!1,this},_.prototype.pause=function(){return r("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(r("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},_.prototype.wrap=function(e){var t=this,i=this._readableState,n=!1;for(var s in e.on("end",(function(){if(r("wrapped end"),i.decoder&&!i.ended){var e=i.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(s){(r("wrapped data"),i.decoder&&(s=i.decoder.write(s)),i.objectMode&&null==s||!(i.objectMode||s&&s.length))||(t.push(s)||(n=!0,e.pause()))})),e)void 0===this[s]&&"function"==typeof e[s]&&(this[s]=function(t){return function(){return e[t].apply(e,arguments)}}(s));for(var a=0;a<M.length;a++)e.on(M[a],this.emit.bind(this,M[a]));return this._read=function(t){r("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"==typeof Symbol&&(_.prototype[Symbol.asyncIterator]=function(){return void 0===h&&(h=i(151)),h(this)}),Object.defineProperty(_.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(_.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(_.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),_._fromList=B,Object.defineProperty(_.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(_.from=function(e,t){return void 0===u&&(u=i(152)),u(_,e,t)})}).call(this,i(8),i(7))},function(e,t,i){e.exports=i(21).EventEmitter},function(e,t,i){"use strict";(function(t){function i(e,t){s(e,t),n(e)}function n(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function s(e,t){e.emit("error",t)}e.exports={destroy:function(e,a){var r=this,o=this._readableState&&this._readableState.destroyed,l=this._writableState&&this._writableState.destroyed;return o||l?(a?a(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,t.nextTick(s,this,e)):t.nextTick(s,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!a&&e?r._writableState?r._writableState.errorEmitted?t.nextTick(n,r):(r._writableState.errorEmitted=!0,t.nextTick(i,r,e)):t.nextTick(i,r,e):a?(t.nextTick(n,r),a(e)):t.nextTick(n,r)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var i=e._readableState,n=e._writableState;i&&i.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}}}).call(this,i(7))},function(e,t,i){"use strict";var n=i(17).codes.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,i,s){var a,r,o,l=(r=s,o=i,null==(a=t).highWaterMark?r?a[o]:null:a.highWaterMark);if(null!=l){if(!isFinite(l)||Math.floor(l)!==l||l<0)throw new n(s?i:"highWaterMark",l);return Math.floor(l)}return e.objectMode?16:16384}}},function(e,t,i){"use strict";(function(t,n){function s(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,i){var n=e.entry;for(e.entry=null;n;){var s=n.callback;t.pendingcb--,s(i),n=n.next}t.corkedRequestsFree.next=e}(t,e)}}var a;e.exports=_,_.WritableState=k;var r={deprecate:i(75)},o=i(71),l=i(6).Buffer,c=t.Uint8Array||function(){};var d,h=i(72),u=i(73).getHighWaterMark,p=i(17).codes,f=p.ERR_INVALID_ARG_TYPE,m=p.ERR_METHOD_NOT_IMPLEMENTED,g=p.ERR_MULTIPLE_CALLBACK,v=p.ERR_STREAM_CANNOT_PIPE,y=p.ERR_STREAM_DESTROYED,b=p.ERR_STREAM_NULL_VALUES,w=p.ERR_STREAM_WRITE_AFTER_END,x=p.ERR_UNKNOWN_ENCODING,S=h.errorOrDestroy;function M(){}function k(e,t,r){a=a||i(18),e=e||{},"boolean"!=typeof r&&(r=t instanceof a),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=u(this,e,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var o=!1===e.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var i=e._writableState,s=i.sync,a=i.writecb;if("function"!=typeof a)throw new g;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(i),t)o=e,c=s,d=t,h=a,--(l=i).pendingcb,c?(n.nextTick(h,d),n.nextTick(P,o,l),o._writableState.errorEmitted=!0,S(o,d)):(h(d),o._writableState.errorEmitted=!0,S(o,d),P(o,l));else{var r=A(i)||e.destroyed;r||i.corked||i.bufferProcessing||!i.bufferedRequest||I(e,i),s?n.nextTick(C,e,i,r,a):C(e,i,r,a)}var o,l,c,d,h}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function _(e){var t=this instanceof(a=a||i(18));return t||d.call(_,this)?(this._writableState=new k(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),void o.call(this)):new _(e)}function T(e,t,i,n,s,a,r){t.writelen=n,t.writecb=r,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new y("write")):i?e._writev(s,t.onwrite):e._write(s,a,t.onwrite),t.sync=!1}function C(e,t,i,n){var s,a;i||(s=e,0===(a=t).length&&a.needDrain&&(a.needDrain=!1,s.emit("drain"))),t.pendingcb--,n(),P(e,t)}function I(e,t){t.bufferProcessing=!0;var i=t.bufferedRequest;if(e._writev&&i&&i.next){var n=t.bufferedRequestCount,a=Array(n),r=t.corkedRequestsFree;r.entry=i;for(var o=0,l=!0;i;)a[o]=i,i.isBuf||(l=!1),i=i.next,o+=1;a.allBuffers=l,T(e,t,!0,t.length,a,"",r.finish),t.pendingcb++,t.lastBufferedRequest=null,r.next?(t.corkedRequestsFree=r.next,r.next=null):t.corkedRequestsFree=new s(t),t.bufferedRequestCount=0}else{for(;i;){var c=i.chunk,d=i.encoding,h=i.callback;if(T(e,t,!1,t.objectMode?1:c.length,c,d,h),i=i.next,t.bufferedRequestCount--,t.writing)break}null===i&&(t.lastBufferedRequest=null)}t.bufferedRequest=i,t.bufferProcessing=!1}function A(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function R(e,t){e._final((function(i){t.pendingcb--,i&&S(e,i),t.prefinished=!0,e.emit("prefinish"),P(e,t)}))}function P(e,t){var i,s,a=A(t);if(a&&(i=e,(s=t).prefinished||s.finalCalled||("function"!=typeof i._final||s.destroyed?(s.prefinished=!0,i.emit("prefinish")):(s.pendingcb++,s.finalCalled=!0,n.nextTick(R,i,s))),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var r=e._readableState;(!r||r.autoDestroy&&r.endEmitted)&&e.destroy()}return a}i(2)(_,o),k.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(k.prototype,"buffer",{get:r.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(d=Function.prototype[Symbol.hasInstance],Object.defineProperty(_,Symbol.hasInstance,{value:function(e){return!!d.call(this,e)||this===_&&e&&e._writableState instanceof k}})):d=function(e){return e instanceof this},_.prototype.pipe=function(){S(this,new v)},_.prototype.write=function(e,t,i){var s,a,r,o,d,h,u,p,m,g,v=this._writableState,y=!1,x=!v.objectMode&&(s=e,l.isBuffer(s)||s instanceof c);return x&&!l.isBuffer(e)&&(a=e,e=l.from(a)),"function"==typeof t&&(i=t,t=null),x?t="buffer":t||(t=v.defaultEncoding),"function"!=typeof i&&(i=M),v.ending?(p=this,m=i,g=new w,S(p,g),n.nextTick(m,g)):(x||(r=this,o=v,h=i,null===(d=e)?u=new b:"string"==typeof d||o.objectMode||(u=new f("chunk",["string","Buffer"],d)),!u||(S(r,u),n.nextTick(h,u),0)))&&(v.pendingcb++,y=function(e,t,i,n,s,a){if(!i){var r=function(e,t,i){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=l.from(t,i));return t}(t,n,s);n!==r&&(i=!0,s="buffer",n=r)}var o=t.objectMode?1:n.length;t.length+=o;var c=t.length<t.highWaterMark;c||(t.needDrain=!0);if(t.writing||t.corked){var d=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:s,isBuf:i,callback:a,next:null},d?d.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else T(e,t,!1,o,n,s,a);return c}(this,v,x,e,t,i)),y},_.prototype.cork=function(){this._writableState.corked++},_.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||I(this,e))},_.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())<=-1)throw new x(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(_.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(_.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),_.prototype._write=function(e,t,i){i(new m("_write()"))},_.prototype._writev=null,_.prototype.end=function(e,t,i){var s=this._writableState;return"function"==typeof e?(i=e,e=null,t=null):"function"==typeof t&&(i=t,t=null),null!=e&&this.write(e,t),s.corked&&(s.corked=1,this.uncork()),s.ending||function(e,t,i){t.ending=!0,P(e,t),i&&(t.finished?n.nextTick(i):e.once("finish",i));t.ended=!0,e.writable=!1}(this,s,i),this},Object.defineProperty(_.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(_.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),_.prototype.destroy=h.destroy,_.prototype._undestroy=h.undestroy,_.prototype._destroy=function(e,t){t(e)}}).call(this,i(8),i(7))},function(e,t,i){(function(t){function i(e){try{if(!t.localStorage)return!1}catch(e){return!1}var i=t.localStorage[e];return null!=i&&"true"===(i+"").toLowerCase()}e.exports=function(e,t){if(i("noDeprecation"))return e;var n=!1;return function(){if(!n){if(i("throwDeprecation"))throw new Error(t);i("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}}}).call(this,i(8))},function(e,t,i){"use strict";e.exports=d;var n=i(17).codes,s=n.ERR_METHOD_NOT_IMPLEMENTED,a=n.ERR_MULTIPLE_CALLBACK,r=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,o=n.ERR_TRANSFORM_WITH_LENGTH_0,l=i(18);function c(e,t){var i=this._transformState;i.transforming=!1;var n=i.writecb;if(null===n)return this.emit("error",new a);i.writechunk=null,i.writecb=null,null!=t&&this.push(t),n(e);var s=this._readableState;s.reading=!1,(s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark)}function d(e){return this instanceof d?(l.call(this,e),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),void this.on("prefinish",h)):new d(e)}function h(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?u(this,null,null):this._flush((function(t,i){u(e,t,i)}))}function u(e,t,i){if(t)return e.emit("error",t);if(null!=i&&e.push(i),e._writableState.length)throw new o;if(e._transformState.transforming)throw new r;return e.push(null)}i(2)(d,l),d.prototype.push=function(e,t){return this._transformState.needTransform=!1,l.prototype.push.call(this,e,t)},d.prototype._transform=function(e,t,i){i(new s("_transform()"))},d.prototype._write=function(e,t,i){var n=this._transformState;if(n.writecb=i,n.writechunk=e,n.writeencoding=t,!n.transforming){var s=this._readableState;(n.needTransform||s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark)}},d.prototype._read=function(){var e=this._transformState;null===e.writechunk||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},d.prototype._destroy=function(e,t){l.prototype._destroy.call(this,e,(function(e){t(e)}))}},function(e,t,i){var n=i(2),s=i(19),a=i(3).Buffer,r=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],o=Array(64);function l(){this.init(),this._w=o,s.call(this,64,56)}n(l,s),l.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},l.prototype._update=function(e){for(var t,i,n,s,a,o,l,c=this._w,d=0|this._a,h=0|this._b,u=0|this._c,p=0|this._d,f=0|this._e,m=0|this._f,g=0|this._g,v=0|this._h,y=0;y<16;++y)c[y]=e.readInt32BE(4*y);for(;y<64;++y)c[y]=0|(((i=c[y-2])>>>17|i<<15)^(i>>>19|i<<13)^i>>>10)+c[y-7]+(((t=c[y-15])>>>7|t<<25)^(t>>>18|t<<14)^t>>>3)+c[y-16];for(var b=0;b<64;++b){var w=v+(((l=f)>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7))+((o=g)^f&(m^o))+r[b]+c[b]|0,x=0|(((a=d)>>>2|a<<30)^(a>>>13|a<<19)^(a>>>22|a<<10))+((n=d)&(s=h)|u&(n|s));v=g,g=m,m=f,f=p+w|0,p=u,u=h,h=d,d=w+x|0}this._a=d+this._a|0,this._b=h+this._b|0,this._c=u+this._c|0,this._d=p+this._d|0,this._e=f+this._e|0,this._f=m+this._f|0,this._g=g+this._g|0,this._h=v+this._h|0},l.prototype._hash=function(){var e=a.allocUnsafe(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e},e.exports=l},function(e,t,i){var n=i(2),s=i(19),a=i(3).Buffer,r=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],o=Array(160);function l(){this.init(),this._w=o,s.call(this,128,112)}function c(e,t,i){return i^e&(t^i)}function d(e,t,i){return e&t|i&(e|t)}function h(e,t){return(e>>>28|t<<4)^(t>>>2|e<<30)^(t>>>7|e<<25)}function u(e,t){return(e>>>14|t<<18)^(e>>>18|t<<14)^(t>>>9|e<<23)}function p(e,t){return e>>>0<t>>>0?1:0}n(l,s),l.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},l.prototype._update=function(e){for(var t,i,n,s,a,o,l,f,m=this._w,g=0|this._ah,v=0|this._bh,y=0|this._ch,b=0|this._dh,w=0|this._eh,x=0|this._fh,S=0|this._gh,M=0|this._hh,k=0|this._al,_=0|this._bl,T=0|this._cl,C=0|this._dl,I=0|this._el,A=0|this._fl,R=0|this._gl,P=0|this._hl,E=0;E<32;E+=2)m[E]=e.readInt32BE(4*E),m[E+1]=e.readInt32BE(4*E+4);for(;E<160;E+=2){var D=m[E-30],O=m[E-30+1],L=((l=D)>>>1|(f=O)<<31)^(l>>>8|f<<24)^l>>>7,j=((a=O)>>>1|(o=D)<<31)^(a>>>8|o<<24)^(a>>>7|o<<25);D=m[E-4],O=m[E-4+1];var z=((n=D)>>>19|(s=O)<<13)^(s>>>29|n<<3)^n>>>6,B=((t=O)>>>19|(i=D)<<13)^(i>>>29|t<<3)^(t>>>6|i<<26),N=m[E-14],F=m[E-14+1],H=m[E-32],U=m[E-32+1],V=j+F|0,G=L+N+p(V,j)|0;G=(G=G+z+p(V=V+B|0,B)|0)+H+p(V=V+U|0,U)|0,m[E]=G,m[E+1]=V}for(var W=0;W<160;W+=2){G=m[W],V=m[W+1];var q=d(g,v,y),Y=d(k,_,T),K=h(g,k),X=h(k,g),Z=u(w,I),J=u(I,w),Q=r[W],$=r[W+1],ee=c(w,x,S),te=c(I,A,R),ie=P+J|0,ne=M+Z+p(ie,P)|0;ne=(ne=(ne=ne+ee+p(ie=ie+te|0,te)|0)+Q+p(ie=ie+$|0,$)|0)+G+p(ie=ie+V|0,V)|0;var se=X+Y|0,ae=K+q+p(se,X)|0;M=S,P=R,S=x,R=A,x=w,A=I,w=b+ne+p(I=C+ie|0,C)|0,b=y,C=T,y=v,T=_,v=g,_=k,g=ne+ae+p(k=ie+se|0,ie)|0}this._al=this._al+k|0,this._bl=this._bl+_|0,this._cl=this._cl+T|0,this._dl=this._dl+C|0,this._el=this._el+I|0,this._fl=this._fl+A|0,this._gl=this._gl+R|0,this._hl=this._hl+P|0,this._ah=this._ah+g+p(this._al,k)|0,this._bh=this._bh+v+p(this._bl,_)|0,this._ch=this._ch+y+p(this._cl,T)|0,this._dh=this._dh+b+p(this._dl,C)|0,this._eh=this._eh+w+p(this._el,I)|0,this._fh=this._fh+x+p(this._fl,A)|0,this._gh=this._gh+S+p(this._gl,R)|0,this._hh=this._hh+M+p(this._hl,P)|0},l.prototype._hash=function(){function e(e,i,n){t.writeInt32BE(e,n),t.writeInt32BE(i,n+4)}var t=a.allocUnsafe(64);return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),e(this._gh,this._gl,48),e(this._hh,this._hl,56),t},e.exports=l},function(e,t,i){"use strict";(function(t,n){var s,a=i(30);e.exports=b;var r=i(36);b.ReadableState=y;i(21).EventEmitter;function o(e,t){return e.listeners(t).length}var l=i(80),c=i(3).Buffer,d=t.Uint8Array||function(){};var h=Object.create(i(23));h.inherits=i(2);var u,p=i(160),f=void 0;f=p&&p.debuglog?p.debuglog("stream"):function(){};var m=i(161),g=i(81);h.inherits(b,l);var v=["error","close","destroy","pause","resume"];function y(e,t){e=e||{};var n=t instanceof(s=s||i(14));this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var a=e.highWaterMark,r=e.readableHighWaterMark,o=this.objectMode?16:16384;this.highWaterMark=a||0===a?a:n&&(r||0===r)?r:o,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(u||(u=i(22).StringDecoder),this.decoder=new u(e.encoding),this.encoding=e.encoding)}function b(e){return s=s||i(14),this instanceof b?(this._readableState=new y(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),void l.call(this)):new b(e)}function w(e,t,i,n,s){var a,r,o,l=e._readableState;null===t?(l.reading=!1,function(e,t){if(!t.ended){if(t.decoder){var i=t.decoder.end();i&&i.length&&(t.buffer.push(i),t.length+=t.objectMode?1:i.length)}t.ended=!0,k(e)}}(e,l)):(s||(a=function(e,t){var i;n=t,c.isBuffer(n)||n instanceof d||"string"==typeof t||void 0===t||e.objectMode||(i=new TypeError("Invalid non-string/buffer chunk"));var n;return i}(l,t)),a?e.emit("error",a):l.objectMode||t&&t.length>0?("string"==typeof t||l.objectMode||Object.getPrototypeOf(t)===c.prototype||(r=t,t=c.from(r)),n?l.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):x(e,l,t,!0):l.ended?e.emit("error",new Error("stream.push() after EOF")):(l.reading=!1,l.decoder&&!i?(t=l.decoder.write(t),l.objectMode||0!==t.length?x(e,l,t,!1):T(e,l)):x(e,l,t,!1))):n||(l.reading=!1));return!(o=l).ended&&(o.needReadable||o.length<o.highWaterMark||0===o.length)}function x(e,t,i,n){t.flowing&&0===t.length&&!t.sync?(e.emit("data",i),e.read(0)):(t.length+=t.objectMode?1:i.length,n?t.buffer.unshift(i):t.buffer.push(i),t.needReadable&&k(e)),T(e,t)}Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),b.prototype.destroy=g.destroy,b.prototype._undestroy=g.undestroy,b.prototype._destroy=function(e,t){this.push(null),t(e)},b.prototype.push=function(e,t){var i,n=this._readableState;return n.objectMode?i=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=c.from(e,t),t=""),i=!0),w(this,e,t,!1,i)},b.prototype.unshift=function(e){return w(this,e,null,!0,!1)},b.prototype.isPaused=function(){return!1===this._readableState.flowing},b.prototype.setEncoding=function(e){return u||=i(22).StringDecoder,this._readableState.decoder=new u(e),this._readableState.encoding=e,this};var S=8388608;function M(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e==e?(e>t.highWaterMark&&(t.highWaterMark=((i=e)>=S?i=S:(i--,i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,i|=i>>>16,i++),i)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0)):t.flowing&&t.length?t.buffer.head.data.length:t.length;var i}function k(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(f("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?a.nextTick(_,e):_(e))}function _(e){f("emit readable"),e.emit("readable"),R(e)}function T(e,t){t.readingMore||(t.readingMore=!0,a.nextTick(C,e,t))}function C(e,t){for(var i=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(f("maybeReadMore read 0"),e.read(0),i!==t.length);)i=t.length;t.readingMore=!1}function I(e){f("readable nexttick read 0"),e.read(0)}function A(e,t){t.reading||(f("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),R(e),t.flowing&&!t.reading&&e.read(0)}function R(e){var t=e._readableState;for(f("flow",t.flowing);t.flowing&&null!==e.read(););}function P(e,t){return 0===t.length?null:(t.objectMode?i=t.buffer.shift():!e||e>=t.length?(i=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):i=function(e,t,i){var n;e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):n=e===t.head.data.length?t.shift():i?function(e,t){var i=t.head,n=1,s=i.data;for(e-=s.length;i=i.next;){var a=i.data,r=e>a.length?a.length:e;if(s+=r===a.length?a:a.slice(0,e),0===(e-=r)){r===a.length?(++n,t.head=i.next?i.next:t.tail=null):(t.head=i,i.data=a.slice(r));break}++n}return t.length-=n,s}(e,t):function(e,t){var i=c.allocUnsafe(e),n=t.head,s=1;n.data.copy(i),e-=n.data.length;for(;n=n.next;){var a=n.data,r=e>a.length?a.length:e;if(a.copy(i,i.length-e,0,r),0===(e-=r)){r===a.length?(++s,t.head=n.next?n.next:t.tail=null):(t.head=n,n.data=a.slice(r));break}++s}return t.length-=s,i}(e,t);return n}(e,t.buffer,t.decoder),i);var i}function E(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,a.nextTick(D,t,e))}function D(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function O(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i]===t)return i;return-1}b.prototype.read=function(e){f("read",e),e=parseInt(e,10);var t=this._readableState,i=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return f("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?E(this):k(this),null;if(0===(e=M(e,t))&&t.ended)return 0===t.length&&E(this),null;var n,s=t.needReadable;return f("need readable",s),(0===t.length||t.length-e<t.highWaterMark)&&f("length less than watermark",s=!0),t.ended||t.reading?f("reading or ended",s=!1):s&&(f("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=M(i,t))),null===(n=e>0?P(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),i!==e&&t.ended&&E(this)),null!==n&&this.emit("data",n),n},b.prototype._read=function(){this.emit("error",new Error("_read() is not implemented"))},b.prototype.pipe=function(e,t){function i(t,n){f("onunpipe"),t===p&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,f("cleanup"),e.removeListener("close",d),e.removeListener("finish",h),e.removeListener("drain",y),e.removeListener("error",c),e.removeListener("unpipe",i),p.removeListener("end",s),p.removeListener("end",u),p.removeListener("data",l),S=!0,!m.awaitDrain||e._writableState&&!e._writableState.needDrain||y())}function s(){f("onend"),e.end()}function l(t){f("ondata"),M=!1,!1!==e.write(t)||M||((1===m.pipesCount&&m.pipes===e||m.pipesCount>1&&-1!==O(m.pipes,e))&&!S&&(f("false write response, pause",p._readableState.awaitDrain),p._readableState.awaitDrain++,M=!0),p.pause())}function c(t){f("onerror",t),u(),e.removeListener("error",c),0===o(e,"error")&&e.emit("error",t)}function d(){e.removeListener("finish",h),u()}function h(){f("onfinish"),e.removeListener("close",d),u()}function u(){f("unpipe"),p.unpipe(e)}var p=this,m=this._readableState;switch(m.pipesCount){case 0:m.pipes=e;break;case 1:m.pipes=[m.pipes,e];break;default:m.pipes.push(e)}m.pipesCount+=1,f("pipe count=%d opts=%j",m.pipesCount,t);var g=(!t||!1!==t.end)&&e!==n.stdout&&e!==n.stderr?s:u;m.endEmitted?a.nextTick(g):p.once("end",g),e.on("unpipe",i);var v,y=(v=p,function(){var e=v._readableState;f("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&o(v,"data")&&(e.flowing=!0,R(v))});e.on("drain",y);var b,w,x,S=!1,M=!1;return p.on("data",l),w="error",x=c,"function"==typeof(b=e).prependListener?b.prependListener(w,x):b._events&&b._events[w]?r(b._events[w])?b._events[w].unshift(x):b._events[w]=[x,b._events[w]]:b.on(w,x),e.once("close",d),e.once("finish",h),e.emit("pipe",p),m.flowing||(f("pipe resume"),p.resume()),e},b.prototype.unpipe=function(e){var t=this._readableState,i={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||=t.pipes,t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,i)),this;if(!e){var n=t.pipes,s=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<s;a++)n[a].emit("unpipe",this,i);return this}var r=O(t.pipes,e);return-1===r||(t.pipes.splice(r,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,i)),this},b.prototype.on=function(e,t){var i=l.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&k(this):a.nextTick(I,this))}return i},b.prototype.addListener=b.prototype.on,b.prototype.resume=function(){var e,t,i=this._readableState;return i.flowing||(f("resume"),i.flowing=!0,e=this,(t=i).resumeScheduled||(t.resumeScheduled=!0,a.nextTick(A,e,t))),this},b.prototype.pause=function(){return f("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(f("pause"),this._readableState.flowing=!1,this.emit("pause")),this},b.prototype.wrap=function(e){var t=this,i=this._readableState,n=!1;for(var s in e.on("end",(function(){if(f("wrapped end"),i.decoder&&!i.ended){var e=i.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(s){(f("wrapped data"),i.decoder&&(s=i.decoder.write(s)),i.objectMode&&null==s||!(i.objectMode||s&&s.length))||(t.push(s)||(n=!0,e.pause()))})),e)void 0===this[s]&&"function"==typeof e[s]&&(this[s]=function(t){return function(){return e[t].apply(e,arguments)}}(s));for(var a=0;a<v.length;a++)e.on(v[a],this.emit.bind(this,v[a]));return this._read=function(t){f("wrapped _read",t),n&&(n=!1,e.resume())},this},Object.defineProperty(b.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),b._fromList=P}).call(this,i(8),i(7))},function(e,t,i){e.exports=i(21).EventEmitter},function(e,t,i){"use strict";var n=i(30);function s(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var i=this,a=this._readableState&&this._readableState.destroyed,r=this._writableState&&this._writableState.destroyed;return a||r?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||n.nextTick(s,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?(n.nextTick(s,i,e),i._writableState&&(i._writableState.errorEmitted=!0)):t&&t(e)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(e,t,i){"use strict";e.exports=r;var n=i(14),s=Object.create(i(23));function a(e,t){var i=this._transformState;i.transforming=!1;var n=i.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));i.writechunk=null,i.writecb=null,null!=t&&this.push(t),n(e);var s=this._readableState;s.reading=!1,(s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark)}function r(e){return this instanceof r?(n.call(this,e),this._transformState={afterTransform:a.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),void this.on("prefinish",o)):new r(e)}function o(){var e=this;"function"==typeof this._flush?this._flush((function(t,i){l(e,t,i)})):l(this,null,null)}function l(e,t,i){if(t)return e.emit("error",t);if(null!=i&&e.push(i),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}s.inherits=i(2),s.inherits(r,n),r.prototype.push=function(e,t){return this._transformState.needTransform=!1,n.prototype.push.call(this,e,t)},r.prototype._transform=function(){throw new Error("_transform() is not implemented")},r.prototype._write=function(e,t,i){var n=this._transformState;if(n.writecb=i,n.writechunk=e,n.writeencoding=t,!n.transforming){var s=this._readableState;(n.needTransform||s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark)}},r.prototype._read=function(){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},r.prototype._destroy=function(e,t){var i=this;n.prototype._destroy.call(this,e,(function(e){t(e),i.emit("close")}))}},function(e,t,i){"use strict";var n=i(2),s=i(170),a=i(13),r=i(3).Buffer,o=i(84),l=i(43),c=i(44),d=r.alloc(128);function h(e,t){a.call(this,"digest"),"string"==typeof t&&(t=r.from(t));var i="sha512"===e||"sha384"===e?128:64;(this._alg=e,this._key=t,t.length>i)?t=("rmd160"===e?new l:c(e)).update(t).digest():t.length<i&&(t=r.concat([t,d],i));for(var n=this._ipad=r.allocUnsafe(i),s=this._opad=r.allocUnsafe(i),o=0;o<i;o++)n[o]=54^t[o],s[o]=92^t[o];this._hash="rmd160"===e?new l:c(e),this._hash.update(n)}n(h,a),h.prototype._update=function(e){this._hash.update(e)},h.prototype._final=function(){var e=this._hash.digest();return("rmd160"===this._alg?new l:c(this._alg)).update(this._opad).update(e).digest()},e.exports=function(e,t){return"rmd160"===(e=e.toLowerCase())||"ripemd160"===e?new h("rmd160",t):"md5"===e?new s(o,t):new h(e,t)}},function(e,t,i){var n=i(41);e.exports=function(e){return(new n).update(e).digest()}},function(e){e.exports={sha224WithRSAEncryption:{sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:{sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:{sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:{sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:{sign:"ecdsa",hash:"sha256",id:""},sha224:{sign:"ecdsa",hash:"sha224",id:""},sha384:{sign:"ecdsa",hash:"sha384",id:""},sha512:{sign:"ecdsa",hash:"sha512",id:""},"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:{sign:"dsa",hash:"sha1",id:""},"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}}},function(e,t,i){t.pbkdf2=i(172),t.pbkdf2Sync=i(89)},function(e,t){var i=Math.pow(2,30)-1;e.exports=function(e,t){if("number"!=typeof e)throw new TypeError("Iterations not a number");if(e<0)throw new TypeError("Bad iterations");if("number"!=typeof t)throw new TypeError("Key length not a number");if(t<0||t>i||t!=t)throw new TypeError("Bad key length")}},function(e,t,i){(function(t,i){var n;if(t.process&&t.process.browser)n="utf-8";else if(t.process&&t.process.version){n=parseInt(i.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary"}else n="utf-8";e.exports=n}).call(this,i(8),i(7))},function(e,t,i){var n=i(84),s=i(43),a=i(44),r=i(3).Buffer,o=i(87),l=i(88),c=i(90),d=r.alloc(128),h={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function u(e,t,i){var o,l="rmd160"===(o=e)||"ripemd160"===o?function(e){return(new s).update(e).digest()}:"md5"===o?n:function(e){return a(o).update(e).digest()},c="sha512"===e||"sha384"===e?128:64;t.length>c?t=l(t):t.length<c&&(t=r.concat([t,d],c));for(var u=r.allocUnsafe(c+h[e]),p=r.allocUnsafe(c+h[e]),f=0;f<c;f++)u[f]=54^t[f],p[f]=92^t[f];var m=r.allocUnsafe(c+i+4);u.copy(m,0,0,c),this.ipad1=m,this.ipad2=u,this.opad=p,this.alg=e,this.blocksize=c,this.hash=l,this.size=h[e]}u.prototype.run=function(e,t){return e.copy(t,this.blocksize),this.hash(t).copy(this.opad,this.blocksize),this.hash(this.opad)},e.exports=function(e,t,i,n,s){o(i,n);var a=new u(s=s||"sha1",e=c(e,l,"Password"),(t=c(t,l,"Salt")).length),d=r.allocUnsafe(n),p=r.allocUnsafe(t.length+4);t.copy(p,0,0,t.length);for(var f=0,m=h[s],g=Math.ceil(n/m),v=1;v<=g;v++){p.writeUInt32BE(v,t.length);for(var y=a.run(p,a.ipad1),b=y,w=1;w<i;w++){b=a.run(b,a.ipad2);for(var x=0;x<m;x++)y[x]^=b[x]}y.copy(d,f),f+=m}return d}},function(e,t,i){var n=i(3).Buffer;e.exports=function(e,t,i){if(n.isBuffer(e))return e;if("string"==typeof e)return n.from(e,t);if(ArrayBuffer.isView(e))return n.from(e.buffer);throw new TypeError(i+" must be a string, a Buffer, a typed array or a DataView")}},function(e,t,i){"use strict";t.readUInt32BE=function(e,t){return(e[0+t]<<24|e[1+t]<<16|e[2+t]<<8|e[3+t])>>>0},t.writeUInt32BE=function(e,t,i){e[0+i]=t>>>24,e[1+i]=t>>>16&255,e[2+i]=t>>>8&255,e[3+i]=255&t},t.ip=function(e,t,i,n){for(var s=0,a=0,r=6;r>=0;r-=2){for(var o=0;o<=24;o+=8)s<<=1,s|=t>>>o+r&1;for(o=0;o<=24;o+=8)s<<=1,s|=e>>>o+r&1}for(r=6;r>=0;r-=2){for(o=1;o<=25;o+=8)a<<=1,a|=t>>>o+r&1;for(o=1;o<=25;o+=8)a<<=1,a|=e>>>o+r&1}i[n+0]=s>>>0,i[n+1]=a>>>0},t.rip=function(e,t,i,n){for(var s=0,a=0,r=0;r<4;r++)for(var o=24;o>=0;o-=8)s<<=1,s|=t>>>o+r&1,s<<=1,s|=e>>>o+r&1;for(r=4;r<8;r++)for(o=24;o>=0;o-=8)a<<=1,a|=t>>>o+r&1,a<<=1,a|=e>>>o+r&1;i[n+0]=s>>>0,i[n+1]=a>>>0},t.pc1=function(e,t,i,n){for(var s=0,a=0,r=7;r>=5;r--){for(var o=0;o<=24;o+=8)s<<=1,s|=t>>o+r&1;for(o=0;o<=24;o+=8)s<<=1,s|=e>>o+r&1}for(o=0;o<=24;o+=8)s<<=1,s|=t>>o+r&1;for(r=1;r<=3;r++){for(o=0;o<=24;o+=8)a<<=1,a|=t>>o+r&1;for(o=0;o<=24;o+=8)a<<=1,a|=e>>o+r&1}for(o=0;o<=24;o+=8)a<<=1,a|=e>>o+r&1;i[n+0]=s>>>0,i[n+1]=a>>>0},t.r28shl=function(e,t){return e<<t&268435455|e>>>28-t};var n=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];t.pc2=function(e,t,i,s){for(var a=0,r=0,o=n.length>>>1,l=0;l<o;l++)a<<=1,a|=e>>>n[l]&1;for(l=o;l<n.length;l++)r<<=1,r|=t>>>n[l]&1;i[s+0]=a>>>0,i[s+1]=r>>>0},t.expand=function(e,t,i){var n=0,s=0;n=(1&e)<<5|e>>>27;for(var a=23;a>=15;a-=4)n<<=6,n|=e>>>a&63;for(a=11;a>=3;a-=4)s|=e>>>a&63,s<<=6;s|=(31&e)<<1|e>>>31,t[i+0]=n>>>0,t[i+1]=s>>>0};var s=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];t.substitute=function(e,t){for(var i=0,n=0;n<4;n++){i<<=4,i|=s[64*n+(e>>>18-6*n&63)]}for(n=0;n<4;n++){i<<=4,i|=s[256+64*n+(t>>>18-6*n&63)]}return i>>>0};var a=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];t.permute=function(e){for(var t=0,i=0;i<a.length;i++)t<<=1,t|=e>>>a[i]&1;return t>>>0},t.padSplit=function(e,t,i){for(var n=e.toString(2);n.length<t;)n="0"+n;for(var s=[],a=0;a<t;a+=i)s.push(n.slice(a,a+i));return s.join(" ")}},function(e,t,i){"use strict";var n=i(9),s=i(2),a=i(91),r=i(47);function o(){this.tmp=[,,],this.keys=null}function l(e){r.call(this,e);var t=new o;this._desState=t,this.deriveKeys(t,e.key)}s(l,r),e.exports=l,l.create=function(e){return new l(e)};var c=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];l.prototype.deriveKeys=function(e,t){e.keys=Array(32),n.equal(t.length,this.blockSize,"Invalid key length");var i,s=a.readUInt32BE(t,0),r=a.readUInt32BE(t,4);a.pc1(s,r,e.tmp,0),s=e.tmp[0],r=e.tmp[1];for(var o=0;o<e.keys.length;o+=2)i=c[o>>>1],s=a.r28shl(s,i),r=a.r28shl(r,i),a.pc2(s,r,e.keys,o)},l.prototype._update=function(e,t,i,n){var s=this._desState,r=a.readUInt32BE(e,t),o=a.readUInt32BE(e,t+4);a.ip(r,o,s.tmp,0),r=s.tmp[0],o=s.tmp[1],"encrypt"===this.type?this._encrypt(s,r,o,s.tmp,0):this._decrypt(s,r,o,s.tmp,0),r=s.tmp[0],o=s.tmp[1],a.writeUInt32BE(i,r,n),a.writeUInt32BE(i,o,n+4)},l.prototype._pad=function(e,t){for(var i=e.length-t,n=t;n<e.length;n++)e[n]=i;return!0},l.prototype._unpad=function(e){for(var t=e[e.length-1],i=e.length-t;i<e.length;i++)n.equal(e[i],t);return e.slice(0,e.length-t)},l.prototype._encrypt=function(e,t,i,n,s){for(var r=t,o=i,l=0;l<e.keys.length;l+=2){var c=e.keys[l],d=e.keys[l+1];a.expand(o,e.tmp,0),c^=e.tmp[0],d^=e.tmp[1];var h=a.substitute(c,d),u=o;o=(r^a.permute(h))>>>0,r=u}a.rip(o,r,n,s)},l.prototype._decrypt=function(e,t,i,n,s){for(var r=i,o=t,l=e.keys.length-2;l>=0;l-=2){var c=e.keys[l],d=e.keys[l+1];a.expand(r,e.tmp,0),c^=e.tmp[0],d^=e.tmp[1];var h=a.substitute(c,d),u=r;r=(o^a.permute(h))>>>0,o=u}a.rip(r,o,n,s)}},function(e,t,i){var n=i(24),s=i(3).Buffer,a=i(94);t.encrypt=function(e,t){var i,r,o=Math.ceil(t.length/16),l=e._cache.length;e._cache=s.concat([e._cache,s.allocUnsafe(16*o)]);for(var c=0;c<o;c++){var d=(r=void 0,r=(i=e)._cipher.encryptBlockRaw(i._prev),a(i._prev),r),h=l+16*c;e._cache.writeUInt32BE(d[0],h+0),e._cache.writeUInt32BE(d[1],h+4),e._cache.writeUInt32BE(d[2],h+8),e._cache.writeUInt32BE(d[3],h+12)}var u=e._cache.slice(0,t.length);return e._cache=e._cache.slice(t.length),n(t,u)}},function(e,t){e.exports=function(e){for(var t,i=e.length;i--;){if(255!==(t=e.readUInt8(i))){t++,e.writeUInt8(t,i);break}e.writeUInt8(0,i)}}},function(e){e.exports={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192:{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256:{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}}},function(e,t,i){var n=i(31),s=i(3).Buffer,a=i(13),r=i(2),o=i(185),l=i(24),c=i(94);function d(e,t,i,r){a.call(this);var l=s.alloc(4,0);this._cipher=new n.AES(t);var d=this._cipher.encryptBlock(l);this._ghash=new o(d),i=function(e,t,i){if(12===t.length)return e._finID=s.concat([t,s.from([0,0,0,1])]),s.concat([t,s.from([0,0,0,2])]);var n=new o(i),a=t.length,r=a%16;n.update(t),r&&(r=16-r,n.update(s.alloc(r,0))),n.update(s.alloc(8,0));var l=s.alloc(8);l.writeUIntBE(8*a,0,8),n.update(l),e._finID=n.state;var d=s.from(e._finID);return c(d),d}(this,i,d),this._prev=s.from(i),this._cache=s.allocUnsafe(0),this._secCache=s.allocUnsafe(0),this._decrypt=r,this._alen=0,this._len=0,this._mode=e,this._authTag=null,this._called=!1}r(d,a),d.prototype._update=function(e){if(!this._called&&this._alen){var t=16-this._alen%16;t<16&&(t=s.alloc(t,0),this._ghash.update(t))}this._called=!0;var i=this._mode.encrypt(this,e);return this._decrypt?this._ghash.update(e):this._ghash.update(i),this._len+=e.length,i},d.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var e=l(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&function(e,t){var i=0;e.length!==t.length&&i++;for(var n=Math.min(e.length,t.length),s=0;s<n;++s)i+=e[s]^t[s];return i}(e,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=e,this._cipher.scrub()},d.prototype.getAuthTag=function(){if(this._decrypt||!s.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},d.prototype.setAuthTag=function(e){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=e},d.prototype.setAAD=function(e){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(e),this._alen+=e.length},e.exports=d},function(e,t,i){var n=i(31),s=i(3).Buffer,a=i(13);function r(e,t,i,r){a.call(this),this._cipher=new n.AES(t),this._prev=s.from(i),this._cache=s.allocUnsafe(0),this._secCache=s.allocUnsafe(0),this._decrypt=r,this._mode=e}i(2)(r,a),r.prototype._update=function(e){return this._mode.encrypt(this,e,this._decrypt)},r.prototype._final=function(){this._cipher.scrub()},e.exports=r},function(e,t,i){var n=i(16);e.exports=v,v.simpleSieve=m,v.fermatTest=g;var s=i(5),a=new s(24),r=new(i(99)),o=new s(1),l=new s(2),c=new s(5),d=(new s(16),new s(8),new s(10)),h=new s(3),u=(new s(7),new s(11)),p=new s(4),f=(new s(12),null);function m(e){for(var t=function(){if(null!==f)return f;var e,t=[];t[0]=2;for(var i=1,n=3;n<1048576;n+=2){e=Math.ceil(Math.sqrt(n));for(var s=0;s<i&&t[s]<=e&&n%t[s]!=0;s++);(i==s||t[s]>e)&&(t[i++]=n)}return f=t,t}(),i=0;i<t.length;i++)if(0===e.modn(t[i]))return 0===e.cmpn(t[i]);return!0}function g(e){var t=s.mont(e);return 0===l.toRed(t).redPow(e.subn(1)).fromRed().cmpn(1)}function v(e,t){if(e<16)return new s(2===t||5===t?[140,123]:[140,39]);var i,f;for(t=new s(t);;){for(i=new s(n(Math.ceil(e/8)));i.bitLength()>e;)i.ishrn(1);if(i.isEven()&&i.iadd(o),i.testn(1)||i.iadd(l),t.cmp(l)){if(!t.cmp(c))for(;i.mod(d).cmp(h);)i.iadd(p)}else for(;i.mod(a).cmp(u);)i.iadd(p);if(m(f=i.shrn(1))&&m(i)&&g(f)&&g(i)&&r.test(f)&&r.test(i))return i}}},function(e,t,i){var n=i(5),s=i(51);function a(e){this.rand=e||new s.Rand}e.exports=a,a.create=function(e){return new a(e)},a.prototype._randbelow=function(e){var t=e.bitLength(),i=Math.ceil(t/8);do{var s=new n(this.rand.generate(i))}while(s.cmp(e)>=0);return s},a.prototype._randrange=function(e,t){var i=t.sub(e);return e.add(this._randbelow(i))},a.prototype.test=function(e,t,i){var s=e.bitLength(),a=n.mont(e),r=new n(1).toRed(a);t||=Math.max(1,s/48|0);for(var o=e.subn(1),l=0;!o.testn(l);l++);for(var c=e.shrn(l),d=o.toRed(a);t>0;t--){var h=this._randrange(new n(2),o);i&&i(h);var u=h.toRed(a).redPow(c);if(0!==u.cmp(r)&&0!==u.cmp(d)){for(var p=1;p<l;p++){if(0===(u=u.redSqr()).cmp(r))return!1;if(0===u.cmp(d))break}if(p===l)return!1}}return!0},a.prototype.getDivisor=function(e,t){var i=e.bitLength(),s=n.mont(e),a=new n(1).toRed(s);t||=Math.max(1,i/48|0);for(var r=e.subn(1),o=0;!r.testn(o);o++);for(var l=e.shrn(o),c=r.toRed(s);t>0;t--){var d=this._randrange(new n(2),r),h=e.gcd(d);if(0!==h.cmpn(1))return h;var u=d.toRed(s).redPow(l);if(0!==u.cmp(a)&&0!==u.cmp(c)){for(var p=1;p<o;p++){if(0===(u=u.redSqr()).cmp(a))return u.fromRed().subn(1).gcd(e);if(0===u.cmp(c))break}if(p===o)return(u=u.redSqr()).fromRed().subn(1).gcd(e)}}return!1}},function(e,t,i){"use strict";var n=t;function s(e){return 1===e.length?"0"+e:e}function a(e){for(var t="",i=0;i<e.length;i++)t+=s(e[i].toString(16));return t}n.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var i=[];if("string"!=typeof e){for(var n=0;n<e.length;n++)i[n]=0|e[n];return i}if("hex"===t){(e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e);for(n=0;n<e.length;n+=2)i.push(parseInt(e[n]+e[n+1],16))}else for(n=0;n<e.length;n++){var s=e.charCodeAt(n),a=s>>8,r=255&s;a?i.push(a,r):i.push(r)}return i},n.zero2=s,n.toHex=a,n.encode=function(e,t){return"hex"===t?a(e):e}},function(e,t,i){"use strict";var n=t;n.base=i(33),n.short=i(198),n.mont=i(199),n.edwards=i(200)},function(e,t,i){"use strict";var n=i(11).rotr32;function s(e,t,i){return e&t^~e&i}function a(e,t,i){return e&t^e&i^t&i}function r(e,t,i){return e^t^i}t.ft_1=function(e,t,i,n){return 0===e?s(t,i,n):1===e||3===e?r(t,i,n):2===e?a(t,i,n):void 0},t.ch32=s,t.maj32=a,t.p32=r,t.s0_256=function(e){return n(e,2)^n(e,13)^n(e,22)},t.s1_256=function(e){return n(e,6)^n(e,11)^n(e,25)},t.g0_256=function(e){return n(e,7)^n(e,18)^e>>>3},t.g1_256=function(e){return n(e,17)^n(e,19)^e>>>10}},function(e,t,i){"use strict";var n=i(11),s=i(25),a=i(102),r=i(9),o=n.sum32,l=n.sum32_4,c=n.sum32_5,d=a.ch32,h=a.maj32,u=a.s0_256,p=a.s1_256,f=a.g0_256,m=a.g1_256,g=s.BlockHash,v=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function y(){return this instanceof y?(g.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=v,void(this.W=Array(64))):new y}n.inherits(y,g),e.exports=y,y.blockSize=512,y.outSize=256,y.hmacStrength=192,y.padLength=64,y.prototype._update=function(e,t){for(var i=this.W,n=0;n<16;n++)i[n]=e[t+n];for(;n<i.length;n++)i[n]=l(m(i[n-2]),i[n-7],f(i[n-15]),i[n-16]);var s=this.h[0],a=this.h[1],g=this.h[2],v=this.h[3],y=this.h[4],b=this.h[5],w=this.h[6],x=this.h[7];for(r(this.k.length===i.length),n=0;n<i.length;n++){var S=c(x,p(y),d(y,b,w),this.k[n],i[n]),M=o(u(s),h(s,a,g));x=w,w=b,b=y,y=o(v,S),v=g,g=a,a=s,s=o(S,M)}this.h[0]=o(this.h[0],s),this.h[1]=o(this.h[1],a),this.h[2]=o(this.h[2],g),this.h[3]=o(this.h[3],v),this.h[4]=o(this.h[4],y),this.h[5]=o(this.h[5],b),this.h[6]=o(this.h[6],w),this.h[7]=o(this.h[7],x)},y.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},function(e,t,i){"use strict";var n=i(11),s=i(25),a=i(9),r=n.rotr64_hi,o=n.rotr64_lo,l=n.shr64_hi,c=n.shr64_lo,d=n.sum64,h=n.sum64_hi,u=n.sum64_lo,p=n.sum64_4_hi,f=n.sum64_4_lo,m=n.sum64_5_hi,g=n.sum64_5_lo,v=s.BlockHash,y=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function b(){return this instanceof b?(v.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=y,void(this.W=Array(160))):new b}function w(e,t,i,n,s){var a=e&i^~e&s;return a<0&&(a+=4294967296),a}function x(e,t,i,n,s,a){var r=t&n^~t&a;return r<0&&(r+=4294967296),r}function S(e,t,i,n,s){var a=e&i^e&s^i&s;return a<0&&(a+=4294967296),a}function M(e,t,i,n,s,a){var r=t&n^t&a^n&a;return r<0&&(r+=4294967296),r}function k(e,t){var i=r(e,t,28)^r(t,e,2)^r(t,e,7);return i<0&&(i+=4294967296),i}function _(e,t){var i=o(e,t,28)^o(t,e,2)^o(t,e,7);return i<0&&(i+=4294967296),i}function T(e,t){var i=r(e,t,14)^r(e,t,18)^r(t,e,9);return i<0&&(i+=4294967296),i}function C(e,t){var i=o(e,t,14)^o(e,t,18)^o(t,e,9);return i<0&&(i+=4294967296),i}function I(e,t){var i=r(e,t,1)^r(e,t,8)^l(e,t,7);return i<0&&(i+=4294967296),i}function A(e,t){var i=o(e,t,1)^o(e,t,8)^c(e,t,7);return i<0&&(i+=4294967296),i}function R(e,t){var i=r(e,t,19)^r(t,e,29)^l(e,t,6);return i<0&&(i+=4294967296),i}function P(e,t){var i=o(e,t,19)^o(t,e,29)^c(e,t,6);return i<0&&(i+=4294967296),i}n.inherits(b,v),e.exports=b,b.blockSize=1024,b.outSize=512,b.hmacStrength=192,b.padLength=128,b.prototype._prepareBlock=function(e,t){for(var i=this.W,n=0;n<32;n++)i[n]=e[t+n];for(;n<i.length;n+=2){var s=R(i[n-4],i[n-3]),a=P(i[n-4],i[n-3]),r=i[n-14],o=i[n-13],l=I(i[n-30],i[n-29]),c=A(i[n-30],i[n-29]),d=i[n-32],h=i[n-31];i[n]=p(s,a,r,o,l,c,d,h),i[n+1]=f(s,a,r,o,l,c,d,h)}},b.prototype._update=function(e,t){this._prepareBlock(e,t);var i=this.W,n=this.h[0],s=this.h[1],r=this.h[2],o=this.h[3],l=this.h[4],c=this.h[5],p=this.h[6],f=this.h[7],v=this.h[8],y=this.h[9],b=this.h[10],I=this.h[11],A=this.h[12],R=this.h[13],P=this.h[14],E=this.h[15];a(this.k.length===i.length);for(var D=0;D<i.length;D+=2){var O=P,L=E,j=T(v,y),z=C(v,y),B=w(v,y,b,I,A),N=x(v,y,b,I,A,R),F=this.k[D],H=this.k[D+1],U=i[D],V=i[D+1],G=m(O,L,j,z,B,N,F,H,U,V),W=g(O,L,j,z,B,N,F,H,U,V);O=k(n,s),L=_(n,s),j=S(n,s,r,o,l),z=M(n,s,r,o,l,c);var q=h(O,L,j,z),Y=u(O,L,j,z);P=A,E=R,A=b,R=I,b=v,I=y,v=h(p,f,G,W),y=u(f,f,G,W),p=l,f=c,l=r,c=o,r=n,o=s,n=h(G,W,q,Y),s=u(G,W,q,Y)}d(this.h,0,n,s),d(this.h,2,r,o),d(this.h,4,l,c),d(this.h,6,p,f),d(this.h,8,v,y),d(this.h,10,b,I),d(this.h,12,A,R),d(this.h,14,P,E)},b.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},function(e,t,i){(function(e){!function(e,t){"use strict";function n(e,t){if(!e)throw new Error(t||"Assertion failed")}function s(e,t){function i(){}e.super_=t,i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}function a(e,t,i){return a.isBN(e)?e:(this.negative=0,this.words=null,this.length=0,this.red=null,void(null!==e&&("le"!==t&&"be"!==t||(i=t,t=10),this._init(e||0,t||10,i||"be"))))}function r(e,t){var i=e.charCodeAt(t);return i>=48&&i<=57?i-48:i>=65&&i<=70?i-55:i>=97&&i<=102?i-87:void n(!1,"Invalid character in "+e)}function o(e,t,i){var n=r(e,i);return i-1>=t&&(n|=r(e,i-1)<<4),n}function l(e,t,i,s){for(var a,r=0,o=0,l=Math.min(e.length,i),c=t;c<l;c++)r*=s,o=(a=e.charCodeAt(c)-48)>=49?a-49+10:a>=17?a-17+10:a,n(a>=0&&o<s,"Invalid character"),r+=o;return r}function c(e,t){e.words=t.words,e.length=t.length,e.negative=t.negative,e.red=t.red}function d(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}function h(e,t,i){i.negative=t.negative^e.negative;var n=e.length+t.length|0;i.length=n,n=n-1|0;var s=0|e.words[0],a=0|t.words[0],r=s*a,o=67108863&r,l=r/67108864|0;i.words[0]=o;for(var c=1;c<n;c++){for(var d,h=l>>>26,u=67108863&l,p=Math.min(c,t.length-1),f=Math.max(0,c-e.length+1);f<=p;f++)d=c-f|0,h+=(r=(s=0|e.words[d])*(a=0|t.words[f])+u)/67108864|0,u=67108863&r;i.words[c]=0|u,l=0|h}return 0===l?i.length--:i.words[c]=0|l,i._strip()}function u(e,t,i){var n;i.negative=t.negative^e.negative,i.length=e.length+t.length;for(var s=0,a=0,r=0;r<i.length-1;r++){n=a,a=0;for(var o=67108863&s,l=Math.min(r,t.length-1),c=Math.max(0,r-e.length+1);c<=l;c++){var d=r-c,h=(0|e.words[d])*(0|t.words[c]),u=67108863&h;o=67108863&(u=u+o|0),a+=(n=(n=n+(h/67108864|0)|0)+(u>>>26)|0)>>>26,n&=67108863}i.words[r]=o,s=n,n=a}return 0===s?i.length--:i.words[r]=s,i._strip()}function p(e,t,i){return u(e,t,i)}function f(e,t){this.x=e,this.y=t}function m(e,t){this.name=e,this.p=new a(t,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function g(){m.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function v(){m.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function y(){m.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function b(){m.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function w(e){if("string"==typeof e){var t=a._prime(e);this.m=t.p,this.prime=t}else n(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function x(e){w.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}var S;"object"==typeof e?e.exports=a:t.BN=a,a.BN=a,a.wordSize=26;try{S="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:i(215).Buffer}catch(e){}if(a.isBN=function(e){return!!(e instanceof a)||null!==e&&"object"==typeof e&&e.constructor.wordSize===a.wordSize&&Array.isArray(e.words)},a.max=function(e,t){return e.cmp(t)>0?e:t},a.min=function(e,t){return e.cmp(t)<0?e:t},a.prototype._init=function(e,t,i){if("number"==typeof e)return this._initNumber(e,t,i);if("object"==typeof e)return this._initArray(e,t,i);"hex"===t&&(t=16),n(t===(0|t)&&t>=2&&t<=36);var s=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(s++,this.negative=1),s<e.length&&(16===t?this._parseHex(e,s,i):(this._parseBase(e,t,s),"le"===i&&this._initArray(this.toArray(),t,i)))},a.prototype._initNumber=function(e,t,i){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(n(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),t,i)},a.prototype._initArray=function(e,t,i){if(n("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=Array(this.length);for(var s=0;s<this.length;s++)this.words[s]=0;var a,r,o=0;if("be"===i)for(s=e.length-1,a=0;s>=0;s-=3)r=e[s]|e[s-1]<<8|e[s-2]<<16,this.words[a]|=r<<o&67108863,this.words[a+1]=r>>>26-o&67108863,(o+=24)>=26&&(o-=26,a++);else if("le"===i)for(s=0,a=0;s<e.length;s+=3)r=e[s]|e[s+1]<<8|e[s+2]<<16,this.words[a]|=r<<o&67108863,this.words[a+1]=r>>>26-o&67108863,(o+=24)>=26&&(o-=26,a++);return this._strip()},a.prototype._parseHex=function(e,t,i){this.length=Math.ceil((e.length-t)/6),this.words=Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var s,a=0,r=0;if("be"===i)for(n=e.length-1;n>=t;n-=2)s=o(e,t,n)<<a,this.words[r]|=67108863&s,a>=18?(a-=18,r+=1,this.words[r]|=s>>>26):a+=8;else for(n=(e.length-t)%2==0?t+1:t;n<e.length;n+=2)s=o(e,t,n)<<a,this.words[r]|=67108863&s,a>=18?(a-=18,r+=1,this.words[r]|=s>>>26):a+=8;this._strip()},a.prototype._parseBase=function(e,t,i){this.words=[0],this.length=1;for(var n=0,s=1;s<=67108863;s*=t)n++;n--,s=s/t|0;for(var a=e.length-i,r=a%n,o=Math.min(a,a-r)+i,c=0,d=i;d<o;d+=n)c=l(e,d,d+n,t),this.imuln(s),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==r){var h=1;for(c=l(e,d,e.length,t),d=0;d<r;d++)h*=t;this.imuln(h),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this._strip()},a.prototype.copy=function(e){e.words=Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},a.prototype._move=function(e){c(e,this)},a.prototype.clone=function(){var e=new a(null);return this.copy(e),e},a.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},a.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},a.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{a.prototype[Symbol.for("nodejs.util.inspect.custom")]=d}catch(e){a.prototype.inspect=d}else a.prototype.inspect=d;var M=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],k=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],_=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function T(e,t,i){var n,s,a,r=e.words,o=t.words,l=i.words,c=0,d=0|r[0],h=8191&d,u=d>>>13,p=0|r[1],f=8191&p,m=p>>>13,g=0|r[2],v=8191&g,y=g>>>13,b=0|r[3],w=8191&b,x=b>>>13,S=0|r[4],M=8191&S,k=S>>>13,_=0|r[5],T=8191&_,C=_>>>13,I=0|r[6],A=8191&I,R=I>>>13,P=0|r[7],E=8191&P,D=P>>>13,O=0|r[8],L=8191&O,j=O>>>13,z=0|r[9],B=8191&z,N=z>>>13,F=0|o[0],H=8191&F,U=F>>>13,V=0|o[1],G=8191&V,W=V>>>13,q=0|o[2],Y=8191&q,K=q>>>13,X=0|o[3],Z=8191&X,J=X>>>13,Q=0|o[4],$=8191&Q,ee=Q>>>13,te=0|o[5],ie=8191&te,ne=te>>>13,se=0|o[6],ae=8191&se,re=se>>>13,oe=0|o[7],le=8191&oe,ce=oe>>>13,de=0|o[8],he=8191&de,ue=de>>>13,pe=0|o[9],fe=8191&pe,me=pe>>>13;i.negative=e.negative^t.negative,i.length=19;var ge=(c+(n=Math.imul(h,H))|0)+((8191&(s=(s=Math.imul(h,U))+Math.imul(u,H)|0))<<13)|0;c=((a=Math.imul(u,U))+(s>>>13)|0)+(ge>>>26)|0,ge&=67108863,n=Math.imul(f,H),s=(s=Math.imul(f,U))+Math.imul(m,H)|0,a=Math.imul(m,U);var ve=(c+(n=n+Math.imul(h,G)|0)|0)+((8191&(s=(s=s+Math.imul(h,W)|0)+Math.imul(u,G)|0))<<13)|0;c=((a=a+Math.imul(u,W)|0)+(s>>>13)|0)+(ve>>>26)|0,ve&=67108863,n=Math.imul(v,H),s=(s=Math.imul(v,U))+Math.imul(y,H)|0,a=Math.imul(y,U),n=n+Math.imul(f,G)|0,s=(s=s+Math.imul(f,W)|0)+Math.imul(m,G)|0,a=a+Math.imul(m,W)|0;var ye=(c+(n=n+Math.imul(h,Y)|0)|0)+((8191&(s=(s=s+Math.imul(h,K)|0)+Math.imul(u,Y)|0))<<13)|0;c=((a=a+Math.imul(u,K)|0)+(s>>>13)|0)+(ye>>>26)|0,ye&=67108863,n=Math.imul(w,H),s=(s=Math.imul(w,U))+Math.imul(x,H)|0,a=Math.imul(x,U),n=n+Math.imul(v,G)|0,s=(s=s+Math.imul(v,W)|0)+Math.imul(y,G)|0,a=a+Math.imul(y,W)|0,n=n+Math.imul(f,Y)|0,s=(s=s+Math.imul(f,K)|0)+Math.imul(m,Y)|0,a=a+Math.imul(m,K)|0;var be=(c+(n=n+Math.imul(h,Z)|0)|0)+((8191&(s=(s=s+Math.imul(h,J)|0)+Math.imul(u,Z)|0))<<13)|0;c=((a=a+Math.imul(u,J)|0)+(s>>>13)|0)+(be>>>26)|0,be&=67108863,n=Math.imul(M,H),s=(s=Math.imul(M,U))+Math.imul(k,H)|0,a=Math.imul(k,U),n=n+Math.imul(w,G)|0,s=(s=s+Math.imul(w,W)|0)+Math.imul(x,G)|0,a=a+Math.imul(x,W)|0,n=n+Math.imul(v,Y)|0,s=(s=s+Math.imul(v,K)|0)+Math.imul(y,Y)|0,a=a+Math.imul(y,K)|0,n=n+Math.imul(f,Z)|0,s=(s=s+Math.imul(f,J)|0)+Math.imul(m,Z)|0,a=a+Math.imul(m,J)|0;var we=(c+(n=n+Math.imul(h,$)|0)|0)+((8191&(s=(s=s+Math.imul(h,ee)|0)+Math.imul(u,$)|0))<<13)|0;c=((a=a+Math.imul(u,ee)|0)+(s>>>13)|0)+(we>>>26)|0,we&=67108863,n=Math.imul(T,H),s=(s=Math.imul(T,U))+Math.imul(C,H)|0,a=Math.imul(C,U),n=n+Math.imul(M,G)|0,s=(s=s+Math.imul(M,W)|0)+Math.imul(k,G)|0,a=a+Math.imul(k,W)|0,n=n+Math.imul(w,Y)|0,s=(s=s+Math.imul(w,K)|0)+Math.imul(x,Y)|0,a=a+Math.imul(x,K)|0,n=n+Math.imul(v,Z)|0,s=(s=s+Math.imul(v,J)|0)+Math.imul(y,Z)|0,a=a+Math.imul(y,J)|0,n=n+Math.imul(f,$)|0,s=(s=s+Math.imul(f,ee)|0)+Math.imul(m,$)|0,a=a+Math.imul(m,ee)|0;var xe=(c+(n=n+Math.imul(h,ie)|0)|0)+((8191&(s=(s=s+Math.imul(h,ne)|0)+Math.imul(u,ie)|0))<<13)|0;c=((a=a+Math.imul(u,ne)|0)+(s>>>13)|0)+(xe>>>26)|0,xe&=67108863,n=Math.imul(A,H),s=(s=Math.imul(A,U))+Math.imul(R,H)|0,a=Math.imul(R,U),n=n+Math.imul(T,G)|0,s=(s=s+Math.imul(T,W)|0)+Math.imul(C,G)|0,a=a+Math.imul(C,W)|0,n=n+Math.imul(M,Y)|0,s=(s=s+Math.imul(M,K)|0)+Math.imul(k,Y)|0,a=a+Math.imul(k,K)|0,n=n+Math.imul(w,Z)|0,s=(s=s+Math.imul(w,J)|0)+Math.imul(x,Z)|0,a=a+Math.imul(x,J)|0,n=n+Math.imul(v,$)|0,s=(s=s+Math.imul(v,ee)|0)+Math.imul(y,$)|0,a=a+Math.imul(y,ee)|0,n=n+Math.imul(f,ie)|0,s=(s=s+Math.imul(f,ne)|0)+Math.imul(m,ie)|0,a=a+Math.imul(m,ne)|0;var Se=(c+(n=n+Math.imul(h,ae)|0)|0)+((8191&(s=(s=s+Math.imul(h,re)|0)+Math.imul(u,ae)|0))<<13)|0;c=((a=a+Math.imul(u,re)|0)+(s>>>13)|0)+(Se>>>26)|0,Se&=67108863,n=Math.imul(E,H),s=(s=Math.imul(E,U))+Math.imul(D,H)|0,a=Math.imul(D,U),n=n+Math.imul(A,G)|0,s=(s=s+Math.imul(A,W)|0)+Math.imul(R,G)|0,a=a+Math.imul(R,W)|0,n=n+Math.imul(T,Y)|0,s=(s=s+Math.imul(T,K)|0)+Math.imul(C,Y)|0,a=a+Math.imul(C,K)|0,n=n+Math.imul(M,Z)|0,s=(s=s+Math.imul(M,J)|0)+Math.imul(k,Z)|0,a=a+Math.imul(k,J)|0,n=n+Math.imul(w,$)|0,s=(s=s+Math.imul(w,ee)|0)+Math.imul(x,$)|0,a=a+Math.imul(x,ee)|0,n=n+Math.imul(v,ie)|0,s=(s=s+Math.imul(v,ne)|0)+Math.imul(y,ie)|0,a=a+Math.imul(y,ne)|0,n=n+Math.imul(f,ae)|0,s=(s=s+Math.imul(f,re)|0)+Math.imul(m,ae)|0,a=a+Math.imul(m,re)|0;var Me=(c+(n=n+Math.imul(h,le)|0)|0)+((8191&(s=(s=s+Math.imul(h,ce)|0)+Math.imul(u,le)|0))<<13)|0;c=((a=a+Math.imul(u,ce)|0)+(s>>>13)|0)+(Me>>>26)|0,Me&=67108863,n=Math.imul(L,H),s=(s=Math.imul(L,U))+Math.imul(j,H)|0,a=Math.imul(j,U),n=n+Math.imul(E,G)|0,s=(s=s+Math.imul(E,W)|0)+Math.imul(D,G)|0,a=a+Math.imul(D,W)|0,n=n+Math.imul(A,Y)|0,s=(s=s+Math.imul(A,K)|0)+Math.imul(R,Y)|0,a=a+Math.imul(R,K)|0,n=n+Math.imul(T,Z)|0,s=(s=s+Math.imul(T,J)|0)+Math.imul(C,Z)|0,a=a+Math.imul(C,J)|0,n=n+Math.imul(M,$)|0,s=(s=s+Math.imul(M,ee)|0)+Math.imul(k,$)|0,a=a+Math.imul(k,ee)|0,n=n+Math.imul(w,ie)|0,s=(s=s+Math.imul(w,ne)|0)+Math.imul(x,ie)|0,a=a+Math.imul(x,ne)|0,n=n+Math.imul(v,ae)|0,s=(s=s+Math.imul(v,re)|0)+Math.imul(y,ae)|0,a=a+Math.imul(y,re)|0,n=n+Math.imul(f,le)|0,s=(s=s+Math.imul(f,ce)|0)+Math.imul(m,le)|0,a=a+Math.imul(m,ce)|0;var ke=(c+(n=n+Math.imul(h,he)|0)|0)+((8191&(s=(s=s+Math.imul(h,ue)|0)+Math.imul(u,he)|0))<<13)|0;c=((a=a+Math.imul(u,ue)|0)+(s>>>13)|0)+(ke>>>26)|0,ke&=67108863,n=Math.imul(B,H),s=(s=Math.imul(B,U))+Math.imul(N,H)|0,a=Math.imul(N,U),n=n+Math.imul(L,G)|0,s=(s=s+Math.imul(L,W)|0)+Math.imul(j,G)|0,a=a+Math.imul(j,W)|0,n=n+Math.imul(E,Y)|0,s=(s=s+Math.imul(E,K)|0)+Math.imul(D,Y)|0,a=a+Math.imul(D,K)|0,n=n+Math.imul(A,Z)|0,s=(s=s+Math.imul(A,J)|0)+Math.imul(R,Z)|0,a=a+Math.imul(R,J)|0,n=n+Math.imul(T,$)|0,s=(s=s+Math.imul(T,ee)|0)+Math.imul(C,$)|0,a=a+Math.imul(C,ee)|0,n=n+Math.imul(M,ie)|0,s=(s=s+Math.imul(M,ne)|0)+Math.imul(k,ie)|0,a=a+Math.imul(k,ne)|0,n=n+Math.imul(w,ae)|0,s=(s=s+Math.imul(w,re)|0)+Math.imul(x,ae)|0,a=a+Math.imul(x,re)|0,n=n+Math.imul(v,le)|0,s=(s=s+Math.imul(v,ce)|0)+Math.imul(y,le)|0,a=a+Math.imul(y,ce)|0,n=n+Math.imul(f,he)|0,s=(s=s+Math.imul(f,ue)|0)+Math.imul(m,he)|0,a=a+Math.imul(m,ue)|0;var _e=(c+(n=n+Math.imul(h,fe)|0)|0)+((8191&(s=(s=s+Math.imul(h,me)|0)+Math.imul(u,fe)|0))<<13)|0;c=((a=a+Math.imul(u,me)|0)+(s>>>13)|0)+(_e>>>26)|0,_e&=67108863,n=Math.imul(B,G),s=(s=Math.imul(B,W))+Math.imul(N,G)|0,a=Math.imul(N,W),n=n+Math.imul(L,Y)|0,s=(s=s+Math.imul(L,K)|0)+Math.imul(j,Y)|0,a=a+Math.imul(j,K)|0,n=n+Math.imul(E,Z)|0,s=(s=s+Math.imul(E,J)|0)+Math.imul(D,Z)|0,a=a+Math.imul(D,J)|0,n=n+Math.imul(A,$)|0,s=(s=s+Math.imul(A,ee)|0)+Math.imul(R,$)|0,a=a+Math.imul(R,ee)|0,n=n+Math.imul(T,ie)|0,s=(s=s+Math.imul(T,ne)|0)+Math.imul(C,ie)|0,a=a+Math.imul(C,ne)|0,n=n+Math.imul(M,ae)|0,s=(s=s+Math.imul(M,re)|0)+Math.imul(k,ae)|0,a=a+Math.imul(k,re)|0,n=n+Math.imul(w,le)|0,s=(s=s+Math.imul(w,ce)|0)+Math.imul(x,le)|0,a=a+Math.imul(x,ce)|0,n=n+Math.imul(v,he)|0,s=(s=s+Math.imul(v,ue)|0)+Math.imul(y,he)|0,a=a+Math.imul(y,ue)|0;var Te=(c+(n=n+Math.imul(f,fe)|0)|0)+((8191&(s=(s=s+Math.imul(f,me)|0)+Math.imul(m,fe)|0))<<13)|0;c=((a=a+Math.imul(m,me)|0)+(s>>>13)|0)+(Te>>>26)|0,Te&=67108863,n=Math.imul(B,Y),s=(s=Math.imul(B,K))+Math.imul(N,Y)|0,a=Math.imul(N,K),n=n+Math.imul(L,Z)|0,s=(s=s+Math.imul(L,J)|0)+Math.imul(j,Z)|0,a=a+Math.imul(j,J)|0,n=n+Math.imul(E,$)|0,s=(s=s+Math.imul(E,ee)|0)+Math.imul(D,$)|0,a=a+Math.imul(D,ee)|0,n=n+Math.imul(A,ie)|0,s=(s=s+Math.imul(A,ne)|0)+Math.imul(R,ie)|0,a=a+Math.imul(R,ne)|0,n=n+Math.imul(T,ae)|0,s=(s=s+Math.imul(T,re)|0)+Math.imul(C,ae)|0,a=a+Math.imul(C,re)|0,n=n+Math.imul(M,le)|0,s=(s=s+Math.imul(M,ce)|0)+Math.imul(k,le)|0,a=a+Math.imul(k,ce)|0,n=n+Math.imul(w,he)|0,s=(s=s+Math.imul(w,ue)|0)+Math.imul(x,he)|0,a=a+Math.imul(x,ue)|0;var Ce=(c+(n=n+Math.imul(v,fe)|0)|0)+((8191&(s=(s=s+Math.imul(v,me)|0)+Math.imul(y,fe)|0))<<13)|0;c=((a=a+Math.imul(y,me)|0)+(s>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,n=Math.imul(B,Z),s=(s=Math.imul(B,J))+Math.imul(N,Z)|0,a=Math.imul(N,J),n=n+Math.imul(L,$)|0,s=(s=s+Math.imul(L,ee)|0)+Math.imul(j,$)|0,a=a+Math.imul(j,ee)|0,n=n+Math.imul(E,ie)|0,s=(s=s+Math.imul(E,ne)|0)+Math.imul(D,ie)|0,a=a+Math.imul(D,ne)|0,n=n+Math.imul(A,ae)|0,s=(s=s+Math.imul(A,re)|0)+Math.imul(R,ae)|0,a=a+Math.imul(R,re)|0,n=n+Math.imul(T,le)|0,s=(s=s+Math.imul(T,ce)|0)+Math.imul(C,le)|0,a=a+Math.imul(C,ce)|0,n=n+Math.imul(M,he)|0,s=(s=s+Math.imul(M,ue)|0)+Math.imul(k,he)|0,a=a+Math.imul(k,ue)|0;var Ie=(c+(n=n+Math.imul(w,fe)|0)|0)+((8191&(s=(s=s+Math.imul(w,me)|0)+Math.imul(x,fe)|0))<<13)|0;c=((a=a+Math.imul(x,me)|0)+(s>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,n=Math.imul(B,$),s=(s=Math.imul(B,ee))+Math.imul(N,$)|0,a=Math.imul(N,ee),n=n+Math.imul(L,ie)|0,s=(s=s+Math.imul(L,ne)|0)+Math.imul(j,ie)|0,a=a+Math.imul(j,ne)|0,n=n+Math.imul(E,ae)|0,s=(s=s+Math.imul(E,re)|0)+Math.imul(D,ae)|0,a=a+Math.imul(D,re)|0,n=n+Math.imul(A,le)|0,s=(s=s+Math.imul(A,ce)|0)+Math.imul(R,le)|0,a=a+Math.imul(R,ce)|0,n=n+Math.imul(T,he)|0,s=(s=s+Math.imul(T,ue)|0)+Math.imul(C,he)|0,a=a+Math.imul(C,ue)|0;var Ae=(c+(n=n+Math.imul(M,fe)|0)|0)+((8191&(s=(s=s+Math.imul(M,me)|0)+Math.imul(k,fe)|0))<<13)|0;c=((a=a+Math.imul(k,me)|0)+(s>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,n=Math.imul(B,ie),s=(s=Math.imul(B,ne))+Math.imul(N,ie)|0,a=Math.imul(N,ne),n=n+Math.imul(L,ae)|0,s=(s=s+Math.imul(L,re)|0)+Math.imul(j,ae)|0,a=a+Math.imul(j,re)|0,n=n+Math.imul(E,le)|0,s=(s=s+Math.imul(E,ce)|0)+Math.imul(D,le)|0,a=a+Math.imul(D,ce)|0,n=n+Math.imul(A,he)|0,s=(s=s+Math.imul(A,ue)|0)+Math.imul(R,he)|0,a=a+Math.imul(R,ue)|0;var Re=(c+(n=n+Math.imul(T,fe)|0)|0)+((8191&(s=(s=s+Math.imul(T,me)|0)+Math.imul(C,fe)|0))<<13)|0;c=((a=a+Math.imul(C,me)|0)+(s>>>13)|0)+(Re>>>26)|0,Re&=67108863,n=Math.imul(B,ae),s=(s=Math.imul(B,re))+Math.imul(N,ae)|0,a=Math.imul(N,re),n=n+Math.imul(L,le)|0,s=(s=s+Math.imul(L,ce)|0)+Math.imul(j,le)|0,a=a+Math.imul(j,ce)|0,n=n+Math.imul(E,he)|0,s=(s=s+Math.imul(E,ue)|0)+Math.imul(D,he)|0,a=a+Math.imul(D,ue)|0;var Pe=(c+(n=n+Math.imul(A,fe)|0)|0)+((8191&(s=(s=s+Math.imul(A,me)|0)+Math.imul(R,fe)|0))<<13)|0;c=((a=a+Math.imul(R,me)|0)+(s>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,n=Math.imul(B,le),s=(s=Math.imul(B,ce))+Math.imul(N,le)|0,a=Math.imul(N,ce),n=n+Math.imul(L,he)|0,s=(s=s+Math.imul(L,ue)|0)+Math.imul(j,he)|0,a=a+Math.imul(j,ue)|0;var Ee=(c+(n=n+Math.imul(E,fe)|0)|0)+((8191&(s=(s=s+Math.imul(E,me)|0)+Math.imul(D,fe)|0))<<13)|0;c=((a=a+Math.imul(D,me)|0)+(s>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,n=Math.imul(B,he),s=(s=Math.imul(B,ue))+Math.imul(N,he)|0,a=Math.imul(N,ue);var De=(c+(n=n+Math.imul(L,fe)|0)|0)+((8191&(s=(s=s+Math.imul(L,me)|0)+Math.imul(j,fe)|0))<<13)|0;c=((a=a+Math.imul(j,me)|0)+(s>>>13)|0)+(De>>>26)|0,De&=67108863;var Oe=(c+(n=Math.imul(B,fe))|0)+((8191&(s=(s=Math.imul(B,me))+Math.imul(N,fe)|0))<<13)|0;return c=((a=Math.imul(N,me))+(s>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,l[0]=ge,l[1]=ve,l[2]=ye,l[3]=be,l[4]=we,l[5]=xe,l[6]=Se,l[7]=Me,l[8]=ke,l[9]=_e,l[10]=Te,l[11]=Ce,l[12]=Ie,l[13]=Ae,l[14]=Re,l[15]=Pe,l[16]=Ee,l[17]=De,l[18]=Oe,0!==c&&(l[19]=c,i.length++),i}a.prototype.toString=function(e,t){var i;if(t=0|t||1,16===(e=e||10)||"hex"===e){i="";for(var s=0,a=0,r=0;r<this.length;r++){var o=this.words[r],l=(16777215&(o<<s|a)).toString(16);a=o>>>24-s&16777215,(s+=2)>=26&&(s-=26,r--),i=0!==a||r!==this.length-1?M[6-l.length]+l+i:l+i}for(0!==a&&(i=a.toString(16)+i);i.length%t!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(e===(0|e)&&e>=2&&e<=36){var c=k[e],d=_[e];i="";var h=this.clone();for(h.negative=0;!h.isZero();){var u=h.modrn(d).toString(e);i=(h=h.idivn(d)).isZero()?u+i:M[c-u.length]+u+i}for(this.isZero()&&(i="0"+i);i.length%t!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}n(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0===this.negative?e:-e},a.prototype.toJSON=function(){return this.toString(16,2)},S&&(a.prototype.toBuffer=function(e,t){return this.toArrayLike(S,e,t)}),a.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},a.prototype.toArrayLike=function(e,t,i){this._strip();var s=this.byteLength(),a=i||Math.max(1,s);n(s<=a,"byte array longer than desired length"),n(a>0,"Requested array length <= 0");var r,o,l=(o=a,(r=e).allocUnsafe?r.allocUnsafe(o):new r(o));return this["_toArrayLike"+("le"===t?"LE":"BE")](l,s),l},a.prototype._toArrayLikeLE=function(e){for(var t,i=0,n=0,s=0,a=0;s<this.length;s++)t=this.words[s]<<a|n,e[i++]=255&t,i<e.length&&(e[i++]=t>>8&255),i<e.length&&(e[i++]=t>>16&255),6==a?(i<e.length&&(e[i++]=t>>24&255),n=0,a=0):(n=t>>>24,a+=2);if(i<e.length)for(e[i++]=n;i<e.length;)e[i++]=0},a.prototype._toArrayLikeBE=function(e){for(var t,i=e.length-1,n=0,s=0,a=0;s<this.length;s++)t=this.words[s]<<a|n,e[i--]=255&t,i>=0&&(e[i--]=t>>8&255),i>=0&&(e[i--]=t>>16&255),6==a?(i>=0&&(e[i--]=t>>24&255),n=0,a=0):(n=t>>>24,a+=2);if(i>=0)for(e[i--]=n;i>=0;)e[i--]=0},a.prototype._countBits=Math.clz32?function(e){return 32-Math.clz32(e)}:function(e){var t=e,i=0;return t>=4096&&(i+=13,t>>>=13),t>=64&&(i+=7,t>>>=7),t>=8&&(i+=4,t>>>=4),t>=2&&(i+=2,t>>>=2),i+t},a.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,i=0;return 0==(8191&t)&&(i+=13,t>>>=13),0==(127&t)&&(i+=7,t>>>=7),0==(15&t)&&(i+=4,t>>>=4),0==(3&t)&&(i+=2,t>>>=2),0==(1&t)&&i++,i},a.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e,t=0,i=0;i<this.length&&(t+=e=this._zeroBits(this.words[i]),26===e);i++);return t},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(e){return 0===this.negative?this.clone():this.abs().inotn(e).iaddn(1)},a.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return 0!==this.negative},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]|=e.words[t];return this._strip()},a.prototype.ior=function(e){return n(0==(this.negative|e.negative)),this.iuor(e)},a.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},a.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},a.prototype.iuand=function(e){for(var t=this.length>e.length?e:this,i=0;i<t.length;i++)this.words[i]&=e.words[i];return this.length=t.length,this._strip()},a.prototype.iand=function(e){return n(0==(this.negative|e.negative)),this.iuand(e)},a.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},a.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},a.prototype.iuxor=function(e){var t,i;this.length>e.length?(t=this,i=e):(t=e,i=this);for(var n=0;n<i.length;n++)this.words[n]=t.words[n]^i.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this._strip()},a.prototype.ixor=function(e){return n(0==(this.negative|e.negative)),this.iuxor(e)},a.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},a.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},a.prototype.inotn=function(e){n("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),i=e%26;this._expand(t),i>0&&t--;for(var s=0;s<t;s++)this.words[s]=67108863&~this.words[s];return i>0&&(this.words[s]=~this.words[s]&67108863>>26-i),this._strip()},a.prototype.notn=function(e){return this.clone().inotn(e)},a.prototype.setn=function(e,t){n("number"==typeof e&&e>=0);var i=e/26|0,s=e%26;return this._expand(i+1),t?this.words[i]|=1<<s:this.words[i]&=~(1<<s),this._strip()},a.prototype.iadd=function(e){var t,i,n;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(i=this,n=e):(i=e,n=this);for(var s=0,a=0;a<n.length;a++)t=(0|i.words[a])+(0|n.words[a])+s,this.words[a]=67108863&t,s=t>>>26;for(;0!==s&&a<i.length;a++)t=(0|i.words[a])+s,this.words[a]=67108863&t,s=t>>>26;if(this.length=i.length,0!==s)this.words[this.length]=s,this.length++;else if(i!==this)for(;a<i.length;a++)this.words[a]=i.words[a];return this},a.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},a.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var i,n,s=this.cmp(e);if(0===s)return this.negative=0,this.length=1,this.words[0]=0,this;s>0?(i=this,n=e):(i=e,n=this);for(var a=0,r=0;r<n.length;r++)a=(t=(0|i.words[r])-(0|n.words[r])+a)>>26,this.words[r]=67108863&t;for(;0!==a&&r<i.length;r++)a=(t=(0|i.words[r])+a)>>26,this.words[r]=67108863&t;if(0===a&&r<i.length&&i!==this)for(;r<i.length;r++)this.words[r]=i.words[r];return this.length=Math.max(this.length,r),i!==this&&(this.negative=1),this._strip()},a.prototype.sub=function(e){return this.clone().isub(e)},Math.imul||(T=h),a.prototype.mulTo=function(e,t){var i=this.length+e.length;return 10===this.length&&10===e.length?T(this,e,t):i<63?h(this,e,t):i<1024?u(this,e,t):p(this,e,t)},f.prototype.makeRBT=function(e){for(var t=Array(e),i=a.prototype._countBits(e)-1,n=0;n<e;n++)t[n]=this.revBin(n,i,e);return t},f.prototype.revBin=function(e,t,i){if(0===e||e===i-1)return e;for(var n=0,s=0;s<t;s++)n|=(1&e)<<t-s-1,e>>=1;return n},f.prototype.permute=function(e,t,i,n,s,a){for(var r=0;r<a;r++)n[r]=t[e[r]],s[r]=i[e[r]]},f.prototype.transform=function(e,t,i,n,s,a){this.permute(a,e,t,i,n,s);for(var r=1;r<s;r<<=1)for(var o=r<<1,l=Math.cos(2*Math.PI/o),c=Math.sin(2*Math.PI/o),d=0;d<s;d+=o)for(var h=l,u=c,p=0;p<r;p++){var f=i[d+p],m=n[d+p],g=i[d+p+r],v=n[d+p+r],y=h*g-u*v;v=h*v+u*g,g=y,i[d+p]=f+g,n[d+p]=m+v,i[d+p+r]=f-g,n[d+p+r]=m-v,p!==o&&(y=l*h-c*u,u=l*u+c*h,h=y)}},f.prototype.guessLen13b=function(e,t){var i=1|Math.max(t,e),n=1&i,s=0;for(i=i/2|0;i;i>>>=1)s++;return 1<<s+1+n},f.prototype.conjugate=function(e,t,i){if(i>1)for(var n,s=0;s<i/2;s++)n=e[s],e[s]=e[i-s-1],e[i-s-1]=n,n=t[s],t[s]=-t[i-s-1],t[i-s-1]=-n},f.prototype.normalize13b=function(e,t){for(var i,n=0,s=0;s<t/2;s++)i=8192*Math.round(e[2*s+1]/t)+Math.round(e[2*s]/t)+n,e[s]=67108863&i,n=i<67108864?0:i/67108864|0;return e},f.prototype.convert13b=function(e,t,i,s){for(var a=0,r=0;r<t;r++)a+=0|e[r],i[2*r]=8191&a,a>>>=13,i[2*r+1]=8191&a,a>>>=13;for(r=2*t;r<s;++r)i[r]=0;n(0===a),n(0==(-8192&a))},f.prototype.stub=function(e){for(var t=Array(e),i=0;i<e;i++)t[i]=0;return t},f.prototype.mulp=function(e,t,i){var n,s=2*this.guessLen13b(e.length,t.length),a=this.makeRBT(s),r=this.stub(s),o=Array(s),l=Array(s),c=Array(s),d=Array(s),h=Array(s),u=Array(s),p=i.words;p.length=s,this.convert13b(e.words,e.length,o,s),this.convert13b(t.words,t.length,d,s),this.transform(o,r,l,c,s,a),this.transform(d,r,h,u,s,a);for(var f=0;f<s;f++)n=l[f]*h[f]-c[f]*u[f],c[f]=l[f]*u[f]+c[f]*h[f],l[f]=n;return this.conjugate(l,c,s),this.transform(l,c,p,r,s,a),this.conjugate(p,r,s),this.normalize13b(p,s),i.negative=e.negative^t.negative,i.length=e.length+t.length,i._strip()},a.prototype.mul=function(e){var t=new a(null);return t.words=Array(this.length+e.length),this.mulTo(e,t)},a.prototype.mulf=function(e){var t=new a(null);return t.words=Array(this.length+e.length),p(this,e,t)},a.prototype.imul=function(e){return this.clone().mulTo(e,this)},a.prototype.imuln=function(e){var t=e<0;t&&(e=-e),n("number"==typeof e),n(e<67108864);for(var i=0,s=0;s<this.length;s++){var a=(0|this.words[s])*e,r=(67108863&a)+(67108863&i);i>>=26,i+=a/67108864|0,i+=r>>>26,this.words[s]=67108863&r}return 0!==i&&(this.words[s]=i,this.length++),t?this.ineg():this},a.prototype.muln=function(e){return this.clone().imuln(e)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(e){var t=function(e){for(var t=Array(e.bitLength()),i=0;i<t.length;i++){var n=i/26|0,s=i%26;t[i]=e.words[n]>>>s&1}return t}(e);if(0===t.length)return new a(1);for(var i=this,n=0;n<t.length&&0===t[n];i=i.sqr())n++;if(++n<t.length)for(var s=i.sqr();n<t.length;n++,s=s.sqr())0!==t[n]&&(i=i.mul(s));return i},a.prototype.iushln=function(e){var t;n("number"==typeof e&&e>=0);var i=e%26,s=(e-i)/26;if(0!=i){var a=0;for(t=0;t<this.length;t++){var r=this.words[t]&67108863>>>26-i<<26-i,o=(0|this.words[t])-r<<i;this.words[t]=o|a,a=r>>>26-i}a&&(this.words[t]=a,this.length++)}if(0!==s){for(t=this.length-1;t>=0;t--)this.words[t+s]=this.words[t];for(t=0;t<s;t++)this.words[t]=0;this.length+=s}return this._strip()},a.prototype.ishln=function(e){return n(0===this.negative),this.iushln(e)},a.prototype.iushrn=function(e,t,i){n("number"==typeof e&&e>=0);var s=t?(t-t%26)/26:0,a=e%26,r=Math.min((e-a)/26,this.length),o=i;if(s-=r,s=Math.max(0,s),o){for(var l=0;l<r;l++)o.words[l]=this.words[l];o.length=r}if(0===r);else if(this.length>r)for(this.length-=r,l=0;l<this.length;l++)this.words[l]=this.words[l+r];else this.words[0]=0,this.length=1;var c=0;for(l=this.length-1;l>=0&&(0!==c||l>=s);l--){var d=0|this.words[l];this.words[l]=c<<26-a|d>>>a,c=d&(67108863>>>a<<a^67108863)}return o&&0!==c&&(o.words[o.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},a.prototype.ishrn=function(e,t,i){return n(0===this.negative),this.iushrn(e,t,i)},a.prototype.shln=function(e){return this.clone().ishln(e)},a.prototype.ushln=function(e){return this.clone().iushln(e)},a.prototype.shrn=function(e){return this.clone().ishrn(e)},a.prototype.ushrn=function(e){return this.clone().iushrn(e)},a.prototype.testn=function(e){n("number"==typeof e&&e>=0);var t=e%26,i=(e-t)/26;return!(this.length<=i)&&!!(this.words[i]&1<<t)},a.prototype.imaskn=function(e){n("number"==typeof e&&e>=0);var t=e%26,i=(e-t)/26;return n(0===this.negative,"imaskn works only with positive numbers"),this.length<=i?this:(0!=t&&i++,this.length=Math.min(i,this.length),0!=t&&(this.words[this.length-1]&=67108863>>>t<<t^67108863),this._strip())},a.prototype.maskn=function(e){return this.clone().imaskn(e)},a.prototype.iaddn=function(e){return n("number"==typeof e),n(e<67108864),e<0?this.isubn(-e):0===this.negative?this._iaddn(e):1===this.length&&(0|this.words[0])<=e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this)},a.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t==this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},a.prototype.isubn=function(e){if(n("number"==typeof e),n(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this._strip()},a.prototype.addn=function(e){return this.clone().iaddn(e)},a.prototype.subn=function(e){return this.clone().isubn(e)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(e,t,i){var s,a,r=e.length+i;this._expand(r);var o=0;for(s=0;s<e.length;s++){a=(0|this.words[s+i])+o;var l=(0|e.words[s])*t;o=((a-=67108863&l)>>26)-(l/67108864|0),this.words[s+i]=67108863&a}for(;s<this.length-i;s++)o=(a=(0|this.words[s+i])+o)>>26,this.words[s+i]=67108863&a;if(0===o)return this._strip();for(n(-1===o),o=0,s=0;s<this.length;s++)o=(a=-(0|this.words[s])+o)>>26,this.words[s]=67108863&a;return this.negative=1,this._strip()},a.prototype._wordDiv=function(e,t){var i,n=(this.length,e.length),s=this.clone(),r=e,o=0|r.words[r.length-1];0!=(n=26-this._countBits(o))&&(r=r.ushln(n),s.iushln(n),o=0|r.words[r.length-1]);var l=s.length-r.length;if("mod"!==t){(i=new a(null)).length=l+1,i.words=Array(i.length);for(var c=0;c<i.length;c++)i.words[c]=0}var d,h=s.clone()._ishlnsubmul(r,1,l);0===h.negative&&(s=h,i&&(i.words[l]=1));for(var u=l-1;u>=0;u--){for(d=67108864*(0|s.words[r.length+u])+(0|s.words[r.length+u-1]),d=Math.min(d/o|0,67108863),s._ishlnsubmul(r,d,u);0!==s.negative;)d--,s.negative=0,s._ishlnsubmul(r,1,u),s.isZero()||(s.negative^=1);i&&(i.words[u]=d)}return i&&i._strip(),s._strip(),"div"!==t&&0!==n&&s.iushrn(n),{div:i||null,mod:s}},a.prototype.divmod=function(e,t,i){return n(!e.isZero()),this.isZero()?{div:new a(0),mod:new a(0)}:0!==this.negative&&0===e.negative?(o=this.neg().divmod(e,t),"mod"!==t&&(s=o.div.neg()),"div"!==t&&(r=o.mod.neg(),i&&0!==r.negative&&r.iadd(e)),{div:s,mod:r}):0===this.negative&&0!==e.negative?(o=this.divmod(e.neg(),t),"mod"!==t&&(s=o.div.neg()),{div:s,mod:o.mod}):0==(this.negative&e.negative)?e.length>this.length||this.cmp(e)<0?{div:new a(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new a(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new a(this.modrn(e.words[0]))}:this._wordDiv(e,t):(o=this.neg().divmod(e.neg(),t),"div"!==t&&(r=o.mod.neg(),i&&0!==r.negative&&r.isub(e)),{div:o.div,mod:r});var s,r,o},a.prototype.div=function(e){return this.divmod(e,"div",!1).div},a.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},a.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},a.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var i=0===t.div.negative?t.mod:t.mod.isub(e),n=e.ushrn(1),s=e.andln(1),a=i.cmp(n);return a<0||1===s&&0===a?t.div:0===t.div.negative?t.div.iaddn(1):t.div.isubn(1)},a.prototype.modrn=function(e){var t=e<0;t&&(e=-e),n(e<=67108863);for(var i=(1<<26)%e,s=0,a=this.length-1;a>=0;a--)s=(i*s+(0|this.words[a]))%e;return t?-s:s},a.prototype.modn=function(e){return this.modrn(e)},a.prototype.idivn=function(e){var t,i=e<0;i&&(e=-e),n(e<=67108863);for(var s=0,a=this.length-1;a>=0;a--)t=(0|this.words[a])+67108864*s,this.words[a]=t/e|0,s=t%e;return this._strip(),i?this.ineg():this},a.prototype.divn=function(e){return this.clone().idivn(e)},a.prototype.egcd=function(e){n(0===e.negative),n(!e.isZero());var t=this,i=e.clone();t=0===t.negative?t.clone():t.umod(e);for(var s=new a(1),r=new a(0),o=new a(0),l=new a(1),c=0;t.isEven()&&i.isEven();)t.iushrn(1),i.iushrn(1),++c;for(var d=i.clone(),h=t.clone();!t.isZero();){for(var u=0,p=1;0==(t.words[0]&p)&&u<26;p<<=1)++u;if(u>0)for(t.iushrn(u);u-- >0;)(s.isOdd()||r.isOdd())&&(s.iadd(d),r.isub(h)),s.iushrn(1),r.iushrn(1);for(var f=0,m=1;0==(i.words[0]&m)&&f<26;m<<=1)++f;if(f>0)for(i.iushrn(f);f-- >0;)(o.isOdd()||l.isOdd())&&(o.iadd(d),l.isub(h)),o.iushrn(1),l.iushrn(1);t.cmp(i)>=0?(t.isub(i),s.isub(o),r.isub(l)):(i.isub(t),o.isub(s),l.isub(r))}return{a:o,b:l,gcd:i.iushln(c)}},a.prototype._invmp=function(e){n(0===e.negative),n(!e.isZero());var t,i=this,s=e.clone();i=0===i.negative?i.clone():i.umod(e);for(var r=new a(1),o=new a(0),l=s.clone();i.cmpn(1)>0&&s.cmpn(1)>0;){for(var c=0,d=1;0==(i.words[0]&d)&&c<26;d<<=1)++c;if(c>0)for(i.iushrn(c);c-- >0;)r.isOdd()&&r.iadd(l),r.iushrn(1);for(var h=0,u=1;0==(s.words[0]&u)&&h<26;u<<=1)++h;if(h>0)for(s.iushrn(h);h-- >0;)o.isOdd()&&o.iadd(l),o.iushrn(1);i.cmp(s)>=0?(i.isub(s),r.isub(o)):(s.isub(i),o.isub(r))}return(t=0===i.cmpn(1)?r:o).cmpn(0)<0&&t.iadd(e),t},a.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),i=e.clone();t.negative=0,i.negative=0;for(var n=0;t.isEven()&&i.isEven();n++)t.iushrn(1),i.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;i.isEven();)i.iushrn(1);var s=t.cmp(i);if(s<0){var a=t;t=i,i=a}else if(0===s||0===i.cmpn(1))break;t.isub(i)}return i.iushln(n)},a.prototype.invm=function(e){return this.egcd(e).a.umod(e)},a.prototype.isEven=function(){return 0==(1&this.words[0])},a.prototype.isOdd=function(){return 1==(1&this.words[0])},a.prototype.andln=function(e){return this.words[0]&e},a.prototype.bincn=function(e){n("number"==typeof e);var t,i=e%26,s=(e-i)/26,a=1<<i;if(this.length<=s)return this._expand(s+1),this.words[s]|=a,this;for(var r=a,o=s;0!==r&&o<this.length;o++)t=0|this.words[o],r=(t+=r)>>>26,t&=67108863,this.words[o]=t;return 0!==r&&(this.words[o]=r,this.length++),this},a.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},a.prototype.cmpn=function(e){var t,i=e<0;if(0!==this.negative&&!i)return-1;if(0===this.negative&&i)return 1;if(this._strip(),this.length>1)t=1;else{i&&(e=-e),n(e<=67108863,"Number is too big");var s=0|this.words[0];t=s===e?0:s<e?-1:1}return 0===this.negative?t:0|-t},a.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0===this.negative?t:0|-t},a.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,i=this.length-1;i>=0;i--){var n=0|this.words[i],s=0|e.words[i];if(n!=s){n<s?t=-1:n>s&&(t=1);break}}return t},a.prototype.gtn=function(e){return 1===this.cmpn(e)},a.prototype.gt=function(e){return 1===this.cmp(e)},a.prototype.gten=function(e){return this.cmpn(e)>=0},a.prototype.gte=function(e){return this.cmp(e)>=0},a.prototype.ltn=function(e){return-1===this.cmpn(e)},a.prototype.lt=function(e){return-1===this.cmp(e)},a.prototype.lten=function(e){return this.cmpn(e)<=0},a.prototype.lte=function(e){return this.cmp(e)<=0},a.prototype.eqn=function(e){return 0===this.cmpn(e)},a.prototype.eq=function(e){return 0===this.cmp(e)},a.red=function(e){return new w(e)},a.prototype.toRed=function(e){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},a.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(e){return this.red=e,this},a.prototype.forceRed=function(e){return n(!this.red,"Already a number in reduction context"),this._forceRed(e)},a.prototype.redAdd=function(e){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},a.prototype.redIAdd=function(e){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},a.prototype.redSub=function(e){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},a.prototype.redISub=function(e){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},a.prototype.redShl=function(e){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},a.prototype.redMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},a.prototype.redIMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},a.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(e){return n(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var C={k256:null,p224:null,p192:null,p25519:null};m.prototype._tmp=function(){var e=new a(null);return e.words=Array(Math.ceil(this.n/13)),e},m.prototype.ireduce=function(e){var t,i=e;do{this.split(i,this.tmp),t=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength()}while(t>this.n);var n=t<this.n?-1:i.ucmp(this.p);return 0===n?(i.words[0]=0,i.length=1):n>0?i.isub(this.p):void 0===i.strip?i._strip():i.strip(),i},m.prototype.split=function(e,t){e.iushrn(this.n,0,t)},m.prototype.imulK=function(e){return e.imul(this.k)},s(g,m),g.prototype.split=function(e,t){for(var i=4194303,n=Math.min(e.length,9),s=0;s<n;s++)t.words[s]=e.words[s];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var a=e.words[9];for(t.words[t.length++]=a&i,s=10;s<e.length;s++){var r=0|e.words[s];e.words[s-10]=(r&i)<<4|a>>>22,a=r}a>>>=22,e.words[s-10]=a,e.length-=0===a&&e.length>10?10:9},g.prototype.imulK=function(e){var t;e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var i=0,n=0;n<e.length;n++)i+=977*(t=0|e.words[n]),e.words[n]=67108863&i,i=64*t+(i/67108864|0);return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},s(v,m),s(y,m),s(b,m),b.prototype.imulK=function(e){for(var t=0,i=0;i<e.length;i++){var n=19*(0|e.words[i])+t,s=67108863&n;n>>>=26,e.words[i]=s,t=n}return 0!==t&&(e.words[e.length++]=t),e},a._prime=function(e){if(C[e])return C[e];var t;if("k256"===e)t=new g;else if("p224"===e)t=new v;else if("p192"===e)t=new y;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new b}return C[e]=t,t},w.prototype._verify1=function(e){n(0===e.negative,"red works only with positives"),n(e.red,"red works only with red numbers")},w.prototype._verify2=function(e,t){n(0==(e.negative|t.negative),"red works only with positives"),n(e.red&&e.red===t.red,"red works only with red numbers")},w.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):(c(e,e.umod(this.m)._forceRed(this)),e)},w.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},w.prototype.add=function(e,t){this._verify2(e,t);var i=e.add(t);return i.cmp(this.m)>=0&&i.isub(this.m),i._forceRed(this)},w.prototype.iadd=function(e,t){this._verify2(e,t);var i=e.iadd(t);return i.cmp(this.m)>=0&&i.isub(this.m),i},w.prototype.sub=function(e,t){this._verify2(e,t);var i=e.sub(t);return i.cmpn(0)<0&&i.iadd(this.m),i._forceRed(this)},w.prototype.isub=function(e,t){this._verify2(e,t);var i=e.isub(t);return i.cmpn(0)<0&&i.iadd(this.m),i},w.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},w.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},w.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},w.prototype.isqr=function(e){return this.imul(e,e.clone())},w.prototype.sqr=function(e){return this.mul(e,e)},w.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(n(t%2==1),3===t){var i=this.m.add(new a(1)).iushrn(2);return this.pow(e,i)}for(var s=this.m.subn(1),r=0;!s.isZero()&&0===s.andln(1);)r++,s.iushrn(1);n(!s.isZero());var o=new a(1).toRed(this),l=o.redNeg(),c=this.m.subn(1).iushrn(1),d=this.m.bitLength();for(d=new a(2*d*d).toRed(this);0!==this.pow(d,c).cmp(l);)d.redIAdd(l);for(var h=this.pow(d,s),u=this.pow(e,s.addn(1).iushrn(1)),p=this.pow(e,s),f=r;0!==p.cmp(o);){for(var m=p,g=0;0!==m.cmp(o);g++)m=m.redSqr();n(g<f);var v=this.pow(h,new a(1).iushln(f-g-1));u=u.redMul(v),h=v.redSqr(),p=p.redMul(h),f=g}return u},w.prototype.invm=function(e){var t=e._invmp(this.m);return 0===t.negative?this.imod(t):(t.negative=0,this.imod(t).redNeg())},w.prototype.pow=function(e,t){if(t.isZero())return new a(1).toRed(this);if(0===t.cmpn(1))return e.clone();var i=Array(16);i[0]=new a(1).toRed(this),i[1]=e;for(var n=2;n<i.length;n++)i[n]=this.mul(i[n-1],e);var s=i[0],r=0,o=0,l=t.bitLength()%26;for(0===l&&(l=26),n=t.length-1;n>=0;n--){for(var c,d=t.words[n],h=l-1;h>=0;h--)c=d>>h&1,s!==i[0]&&(s=this.sqr(s)),0!==c||0!==r?(r<<=1,r|=c,(4===++o||0===n&&0===h)&&(s=this.mul(s,i[r]),o=0,r=0)):o=0;l=26}return s},w.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},w.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},a.mont=function(e){return new x(e)},s(x,w),x.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},x.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},x.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var i=e.imul(t),n=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),s=i.isub(n).iushrn(this.shift),a=s;return s.cmp(this.m)>=0?a=s.isub(this.m):s.cmpn(0)<0&&(a=s.iadd(this.m)),a._forceRed(this)},x.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new a(0)._forceRed(this);var i=e.mul(t),n=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),s=i.isub(n).iushrn(this.shift),r=s;return s.cmp(this.m)>=0?r=s.isub(this.m):s.cmpn(0)<0&&(r=s.iadd(this.m)),r._forceRed(this)},x.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e,this)}).call(this,i(50)(e))},function(e,t,i){"use strict";const n=t;n.bignum=i(5),n.define=i(217).define,n.base=i(220),n.constants=i(221),n.decoders=i(109),n.encoders=i(107)},function(e,t,i){"use strict";const n=t;n.der=i(108),n.pem=i(218)},function(e,t,i){"use strict";const n=i(2),s=i(57).Buffer,a=i(58),r=i(60);function o(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new l,this.tree._init(e.body)}function l(e){a.call(this,"der",e)}function c(e){return e<10?"0"+e:e}e.exports=o,o.prototype.encode=function(e,t){return this.tree._encode(e,t).join()},n(l,a),l.prototype._encodeComposite=function(e,t,i,n){const a=function(e,t,i,n){let s;"seqof"===e?e="seq":"setof"==e&&(e="set");if(r.tagByName.hasOwnProperty(e))s=r.tagByName[e];else{if("number"!=typeof e||(0|e)!==e)return n.error("Unknown tag: "+e);s=e}return s>=31?n.error("Multi-octet tag encoding unsupported"):(t||(s|=32),s|=r.tagClassByName[i||"universal"]<<6,s)}(e,t,i,this.reporter);if(n.length<128){const e=s.alloc(2);return e[0]=a,e[1]=n.length,this._createEncoderBuffer([e,n])}let o=1;for(let e=n.length;e>=256;e>>=8)o++;const l=s.alloc(2+o);l[0]=a,l[1]=128|o;for(let e=1+o,t=n.length;t>0;e--,t>>=8)l[e]=255&t;return this._createEncoderBuffer([l,n])},l.prototype._encodeStr=function(e,t){if("bitstr"===t)return this._createEncoderBuffer([0|e.unused,e.data]);if("bmpstr"===t){const t=s.alloc(2*e.length);for(let i=0;i<e.length;i++)t.writeUInt16BE(e.charCodeAt(i),2*i);return this._createEncoderBuffer(t)}return"numstr"===t?this._isNumstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===t?this._isPrintstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(t)||"objDesc"===t?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: "+t+" unsupported")},l.prototype._encodeObjid=function(e,t,i){if("string"==typeof e){if(!t)return this.reporter.error("string objid given, but no values map found");if(!t.hasOwnProperty(e))return this.reporter.error("objid not found in values map");e=t[e].split(/[\s.]+/g);for(let t=0;t<e.length;t++)e[t]|=0}else if(Array.isArray(e)){e=e.slice();for(let t=0;t<e.length;t++)e[t]|=0}if(!Array.isArray(e))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(e));if(!i){if(e[1]>=40)return this.reporter.error("Second objid identifier OOB");e.splice(0,2,40*e[0]+e[1])}let n=0;for(let t,i=0;i<e.length;i++)for(t=e[i],n++;t>=128;t>>=7)n++;const a=s.alloc(n);let r=a.length-1;for(let t,i=e.length-1;i>=0;i--)for(t=e[i],a[r--]=127&t;(t>>=7)>0;)a[r--]=127&t|128;return this._createEncoderBuffer(a)},l.prototype._encodeTime=function(e,t){let i;const n=new Date(e);return"gentime"===t?i=[c(n.getUTCFullYear()),c(n.getUTCMonth()+1),c(n.getUTCDate()),c(n.getUTCHours()),c(n.getUTCMinutes()),c(n.getUTCSeconds()),"Z"].join(""):"utctime"===t?i=[c(n.getUTCFullYear()%100),c(n.getUTCMonth()+1),c(n.getUTCDate()),c(n.getUTCHours()),c(n.getUTCMinutes()),c(n.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+t+" time is not supported yet"),this._encodeStr(i,"octstr")},l.prototype._encodeNull=function(){return this._createEncoderBuffer("")},l.prototype._encodeInt=function(e,t){if("string"==typeof e){if(!t)return this.reporter.error("String int or enum given, but no values map");if(!t.hasOwnProperty(e))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(e));e=t[e]}if("number"!=typeof e&&!s.isBuffer(e)){const t=e.toArray();!e.sign&&128&t[0]&&t.unshift(0),e=s.from(t)}if(s.isBuffer(e)){let t=e.length;0===e.length&&t++;const i=s.alloc(t);return e.copy(i),0===e.length&&(i[0]=0),this._createEncoderBuffer(i)}if(e<128)return this._createEncoderBuffer(e);if(e<256)return this._createEncoderBuffer([0,e]);let i=1;for(let t=e;t>=256;t>>=8)i++;const n=Array(i);for(let t=n.length-1;t>=0;t--)n[t]=255&e,e>>=8;return 128&n[0]&&n.unshift(0),this._createEncoderBuffer(s.from(n))},l.prototype._encodeBool=function(e){return this._createEncoderBuffer(e?255:0)},l.prototype._use=function(e,t){return"function"==typeof e&&(e=e(t)),e._getEncoder("der").tree},l.prototype._skipDefault=function(e,t,i){const n=this._baseState;let s;if(null===n.default)return!1;const a=e.join();if(void 0===n.defaultBuffer&&(n.defaultBuffer=this._encodeValue(n.default,t,i).join()),a.length!==n.defaultBuffer.length)return!1;for(s=0;s<a.length;s++)if(a[s]!==n.defaultBuffer[s])return!1;return!0}},function(e,t,i){"use strict";const n=t;n.der=i(110),n.pem=i(219)},function(e,t,i){"use strict";const n=i(2),s=i(5),a=i(26).DecoderBuffer,r=i(58),o=i(60);function l(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new c,this.tree._init(e.body)}function c(e){r.call(this,"der",e)}function d(e,t){let i=e.readUInt8(t);if(e.isError(i))return i;const n=o.tagClass[i>>6],s=0==(32&i);if(31==(31&i)){let n=i;for(i=0;128==(128&n);){if(n=e.readUInt8(t),e.isError(n))return n;i<<=7,i|=127&n}}else i&=31;return{cls:n,primitive:s,tag:i,tagStr:o.tag[i]}}function h(e,t,i){let n=e.readUInt8(i);if(e.isError(n))return n;if(!t&&128===n)return null;if(0==(128&n))return n;const s=127&n;if(s>4)return e.error("length octect is too long");n=0;for(let t=0;t<s;t++){n<<=8;const t=e.readUInt8(i);if(e.isError(t))return t;n|=t}return n}e.exports=l,l.prototype.decode=function(e,t){return a.isDecoderBuffer(e)||(e=new a(e,t)),this.tree._decode(e,t)},n(c,r),c.prototype._peekTag=function(e,t,i){if(e.isEmpty())return!1;const n=e.save(),s=d(e,'Failed to peek tag: "'+t+'"');return e.isError(s)?s:(e.restore(n),s.tag===t||s.tagStr===t||s.tagStr+"of"===t||i)},c.prototype._decodeTag=function(e,t,i){const n=d(e,'Failed to decode tag of "'+t+'"');if(e.isError(n))return n;let s=h(e,n.primitive,'Failed to get length of "'+t+'"');if(e.isError(s))return s;if(!i&&n.tag!==t&&n.tagStr!==t&&n.tagStr+"of"!==t)return e.error('Failed to match tag: "'+t+'"');if(n.primitive||null!==s)return e.skip(s,'Failed to match body of: "'+t+'"');const a=e.save(),r=this._skipUntilEnd(e,'Failed to skip indefinite length body: "'+this.tag+'"');return e.isError(r)?r:(s=e.offset-a.offset,e.restore(a),e.skip(s,'Failed to match body of: "'+t+'"'))},c.prototype._skipUntilEnd=function(e,t){for(;;){const i=d(e,t);if(e.isError(i))return i;const n=h(e,i.primitive,t);if(e.isError(n))return n;let s;if(s=i.primitive||null!==n?e.skip(n):this._skipUntilEnd(e,t),e.isError(s))return s;if("end"===i.tagStr)break}},c.prototype._decodeList=function(e,t,i,n){const s=[];for(;!e.isEmpty();){const t=this._peekTag(e,"end");if(e.isError(t))return t;const a=i.decode(e,"der",n);if(e.isError(a)&&t)break;s.push(a)}return s},c.prototype._decodeStr=function(e,t){if("bitstr"===t){const t=e.readUInt8();return e.isError(t)?t:{unused:t,data:e.raw()}}if("bmpstr"===t){const t=e.raw();if(t.length%2==1)return e.error("Decoding of string type: bmpstr length mismatch");let i="";for(let e=0;e<t.length/2;e++)i+=String.fromCharCode(t.readUInt16BE(2*e));return i}if("numstr"===t){const t=e.raw().toString("ascii");return this._isNumstr(t)?t:e.error("Decoding of string type: numstr unsupported characters")}if("octstr"===t)return e.raw();if("objDesc"===t)return e.raw();if("printstr"===t){const t=e.raw().toString("ascii");return this._isPrintstr(t)?t:e.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(t)?e.raw().toString():e.error("Decoding of string type: "+t+" unsupported")},c.prototype._decodeObjid=function(e,t,i){let n;const s=[];let a=0,r=0;for(;!e.isEmpty();)r=e.readUInt8(),a<<=7,a|=127&r,0==(128&r)&&(s.push(a),a=0);128&r&&s.push(a);const o=s[0]/40|0,l=s[0]%40;if(n=i?s:[o,l].concat(s.slice(1)),t){let e=t[n.join(" ")];void 0===e&&(e=t[n.join(".")]),void 0!==e&&(n=e)}return n},c.prototype._decodeTime=function(e,t){const i=e.raw().toString();let n,s,a,r,o,l;if("gentime"===t)n=0|i.slice(0,4),s=0|i.slice(4,6),a=0|i.slice(6,8),r=0|i.slice(8,10),o=0|i.slice(10,12),l=0|i.slice(12,14);else{if("utctime"!==t)return e.error("Decoding "+t+" time is not supported yet");n=0|i.slice(0,2),s=0|i.slice(2,4),a=0|i.slice(4,6),r=0|i.slice(6,8),o=0|i.slice(8,10),l=0|i.slice(10,12),n=n<70?2e3+n:1900+n}return Date.UTC(n,s-1,a,r,o,l,0)},c.prototype._decodeNull=function(){return null},c.prototype._decodeBool=function(e){const t=e.readUInt8();return e.isError(t)?t:0!==t},c.prototype._decodeInt=function(e,t){const i=e.raw();let n=new s(i);return t&&(n=t[n.toString(10)]||n),n},c.prototype._use=function(e,t){return"function"==typeof e&&(e=e(t)),e._getDecoder("der").tree}},function(e){e.exports={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}},function(e,t,i){var n=i(20),s=i(3).Buffer;function a(e){var t=s.allocUnsafe(4);return t.writeUInt32BE(e,0),t}e.exports=function(e,t){for(var i,r=s.alloc(0),o=0;r.length<t;)i=a(o++),r=s.concat([r,n("sha1").update(e).update(i).digest()]);return r.slice(0,t)}},function(e,t){e.exports=function(e,t){for(var i=e.length,n=-1;++n<i;)e[n]^=t[n];return e}},function(e,t,i){var n=i(5),s=i(3).Buffer;e.exports=function(e,t){return s.from(e.toRed(n.mont(t.modulus)).redPow(new n(t.publicExponent)).fromRed().toArray())}},,function(e,t){e.exports=function(e){return{computeTangents:function(t){function i(e,t,i){y.fromArray(o,3*e),b.fromArray(o,3*t),w.fromArray(o,3*i),x.fromArray(c,2*e),S.fromArray(c,2*t),M.fromArray(c,2*i),b.sub(y),w.sub(y),S.sub(x),M.sub(x);var n=1/(S.x*M.y-M.x*S.y);isFinite(n)&&(k.copy(b).multiplyScalar(M.y).addScaledVector(w,-S.y).multiplyScalar(n),_.copy(w).multiplyScalar(S.x).addScaledVector(b,-M.x).multiplyScalar(n),u[e].add(k),u[t].add(k),u[i].add(k),p[e].add(_),p[t].add(_),p[i].add(_))}function n(e){E.fromArray(l,3*e),D.copy(E),g=u[e],R.copy(g),R.sub(E.multiplyScalar(E.dot(g))).normalize(),P.crossVectors(D,g),v=P.dot(p[e]),m=v<0?-1:1,h[4*e]=R.x,h[4*e+1]=R.y,h[4*e+2]=R.z,h[4*e+3]=m}var s=t.index,a=t.attributes;if(null!==s&&void 0!==a.position&&void 0!==a.normal&&void 0!==a.uv){var r=s.array,o=a.position.array,l=a.normal.array,c=a.uv.array,d=o.length/3;void 0===a.tangent&&t.setAttribute("tangent",new e.BufferAttribute(new Float32Array(4*d),4));for(var h=a.tangent.array,u=[],p=[],f=0;f<d;f++)u[f]=new e.Vector3,p[f]=new e.Vector3;var m,g,v,y=new e.Vector3,b=new e.Vector3,w=new e.Vector3,x=new e.Vector2,S=new e.Vector2,M=new e.Vector2,k=new e.Vector3,_=new e.Vector3,T=t.groups;0===T.length&&(T=[{start:0,count:r.length}]);f=0;for(var C=T.length;f<C;++f)for(var I=L=(O=T[f]).start,A=L+O.count;I<A;I+=3)i(r[I+0],r[I+1],r[I+2]);var R=new e.Vector3,P=new e.Vector3,E=new e.Vector3,D=new e.Vector3;for(f=0,C=T.length;f<C;++f){var O,L;for(I=L=(O=T[f]).start,A=L+O.count;I<A;I+=3)n(r[I+0]),n(r[I+1]),n(r[I+2])}}else console.error("THREE.BufferGeometryUtils: .computeTangents() failed. Missing required attributes (index, position, normal or uv)")},mergeGeometries:function(t,i){const n=null!==t[0].index,s=new Set(Object.keys(t[0].attributes)),a=new Set(Object.keys(t[0].morphAttributes)),r={},o={},l=t[0].morphTargetsRelative,c=new e.BufferGeometry;let d=0;for(let e=0;e<t.length;++e){const h=t[e];let u=0;if(n!==(null!==h.index))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+e+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(const t in h.attributes){if(!s.has(t))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+e+'. All geometries must have compatible attributes; make sure "'+t+'" attribute exists among all geometries, or in none of them.'),null;void 0===r[t]&&(r[t]=[]),r[t].push(h.attributes[t]),u++}if(u!==s.size)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+e+". Make sure all geometries have the same number of attributes."),null;if(l!==h.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+e+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(const t in h.morphAttributes){if(!a.has(t))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+e+".  .morphAttributes must be consistent throughout all geometries."),null;void 0===o[t]&&(o[t]=[]),o[t].push(h.morphAttributes[t])}if(i){let t;if(n)t=h.index.count;else{if(void 0===h.attributes.position)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+e+". The geometry must have either an index or a position attribute"),null;t=h.attributes.position.count}c.addGroup(d,t,e),d+=t}}if(n){let e=0;const i=[];for(let n=0;n<t.length;++n){const s=t[n].index;for(let t=0;t<s.count;++t)i.push(s.getX(t)+e);e+=t[n].attributes.position.count}c.setIndex(i)}for(const e in r){const t=this.mergeAttributes(r[e]);if(!t)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+e+" attribute."),null;c.setAttribute(e,t)}for(const e in o){const t=o[e][0].length;if(0===t)break;c.morphAttributes=c.morphAttributes||{},c.morphAttributes[e]=[];for(let i=0;i<t;++i){const t=[];for(let n=0;n<o[e].length;++n)t.push(o[e][n][i]);const n=mergeAttributes(t);if(!n)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+e+" morphAttribute."),null;c.morphAttributes[e].push(n)}}return c},mergeAttributes:function(t){for(var i,n,s,a,r=0,o=0;o<t.length;++o){if((a=t[o]).isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(void 0===i&&(i=a.array.constructor),i!==a.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(void 0===n&&(n=a.itemSize),n!==a.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(void 0===s&&(s=a.normalized),s!==a.normalized)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;r+=a.array.length}var l=new i(r),c=0;for(o=0;o<t.length;++o)l.set(t[o].array,c),c+=t[o].array.length;return new e.BufferAttribute(l,n,s)},interleaveAttributes:function(t){for(var i,n=0,s=0,a=0,r=t.length;a<r;++a){if(p=t[a],void 0===i&&(i=p.array.constructor),i!==p.array.constructor)return console.error("AttributeBuffers of different types cannot be interleaved"),null;n+=p.array.length,s+=p.itemSize}var o=new e.InterleavedBuffer(new i(n),s),l=0,c=[],d=["getX","getY","getZ","getW"],h=["setX","setY","setZ","setW"],u=0;for(r=t.length;u<r;u++){var p,f=(p=t[u]).itemSize,m=p.count,g=new e.InterleavedBufferAttribute(o,f,l,p.normalized);c.push(g),l+=f;for(var v=0;v<m;v++)for(var y=0;y<f;y++)g[h[y]](v,p[d[y]](v))}return c},estimateBytesUsed:function(e){var t=0;for(var i in e.attributes){var n=e.getAttribute(i);t+=n.count*n.itemSize*n.array.BYTES_PER_ELEMENT}var s=e.getIndex();return t+=s?s.count*s.itemSize*s.array.BYTES_PER_ELEMENT:0},mergeVertices:function(t,i=1e-4){i=Math.max(i,Number.EPSILON);for(var n={},s=t.getIndex(),a=t.getAttribute("position"),r=s?s.count:a.count,o=0,l=Object.keys(t.attributes),c={},d={},h=[],u=["getX","getY","getZ","getW"],p=["setX","setY","setZ","setW"],f=0,m=l.length;f<m;f++){var g=l[f],v=t.attributes[g];c[g]=new e.BufferAttribute(new v.array.constructor(v.count*v.itemSize),v.itemSize,v.normalized),(T=t.morphAttributes[g])&&(d[g]=new e.BufferAttribute(new T.array.constructor(T.count*T.itemSize),T.itemSize,T.normalized))}var y=Math.log10(1/i),b=Math.pow(10,y);for(f=0;f<r;f++){var w=s?s.getX(f):f,x="",S=0;for(m=l.length;S<m;S++){g=l[S];for(var M=(_=t.getAttribute(g)).itemSize,k=0;k<M;k++)x+=~~(_[u[k]](w)*b)+","}if(x in n)h.push(n[x]);else{for(S=0,m=l.length;S<m;S++){g=l[S];var _=t.getAttribute(g),T=t.morphAttributes[g],C=(M=_.itemSize,c[g]),I=d[g];for(k=0;k<M;k++){var A=u[k];if(C[p[k]](o,_[A](w)),T)for(var R=0,P=T.length;R<P;R++)I[R].push(T[R][A](w))}}n[x]=o,h.push(o),o++}}const E=t.clone();for(var g in t.attributes){var D=c[g];if(E.setAttribute(g,new e.BufferAttribute(D.array.slice(0,o*D.itemSize),D.itemSize,D.normalized)),g in d)for(let t=0;t<d[g].length;t++){var O=d[g][t];E.morphAttributes[g][t]=new e.BufferAttribute(O.array.slice(0,o*O.itemSize),O.itemSize,O.normalized)}}return E.setIndex(h),E},toTrianglesDrawMode:function(t,i){if(i===e.TrianglesDrawMode)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),t;if(i===e.TriangleFanDrawMode||i===e.TriangleStripDrawMode){var n=t.getIndex();if(null===n){var s=[],a=t.getAttribute("position");if(void 0===a)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),t;for(var r=0;r<a.count;r++)s.push(r);t.setIndex(s),n=t.getIndex()}var o=n.count-2,l=[];if(i===e.TriangleFanDrawMode)for(r=1;r<=o;r++)l.push(n.getX(0)),l.push(n.getX(r)),l.push(n.getX(r+1));else for(r=0;r<o;r++)r%2==0?(l.push(n.getX(r)),l.push(n.getX(r+1)),l.push(n.getX(r+2))):(l.push(n.getX(r+2)),l.push(n.getX(r+1)),l.push(n.getX(r)));l.length/3!=o&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var c=t.clone();return c.setIndex(l),c.clearGroups(),c}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",i),t}}}},function(e,t,i){const n=i(118);if(window.skinfx)e.exports=n.unpack(window.skinfx);else{const t=new XMLHttpRequest;if(t.open("GET","skins.jspck?v=Mpyh8",!1),t.send(null),200===t.status){let i=n.unpack(t.responseText);e.exports=i}}},function(e,t,i){var n;i(119),void 0!==(n=function(){function e(e){return Number.prototype.toString.call(e,36).toUpperCase()}function t(e){return parseInt(e,36)}var i=Array.prototype.indexOf||function(e,t){for(var i=t||0,n=this.length;i<n;i++)if(this[i]===e)return i;return-1};return{JSON:JSON,pack:function(t,n){var s=(n=n||{}).verbose||!1;s&&console.log("Normalize the JSON Object"),t="string"==typeof t?this.JSON.parse(t):t,s&&console.log("Creating a empty dictionary");var a={strings:[],integers:[],floats:[]};s&&console.log("Creating the AST");var r=function t(n){s&&console.log("Calling recursiveAstBuilder with "+this.JSON.stringify(n));var r,o,l=typeof n;if(null===n)return{type:"null",index:-3};if(void 0===n)return{type:"undefined",index:-5};if(n instanceof Array){var c=["@"];for(var d in n)n.hasOwnProperty(d)&&c.push(t(n[d]));return c}if("object"==l){for(var h in c=["$"],n)n.hasOwnProperty(h)&&(c.push(t(h)),c.push(t(n[h])));return c}if(""===n)return{type:"empty",index:-4};if("string"==l)return-1==(o=i.call(a.strings,n))&&(a.strings.push("string"==typeof(r=n)?r.replace(/[\+ \|\^\%]/g,(function(e){return{" ":"+","+":"%2B","|":"%7C","^":"%5E","%":"%25"}[e]})):r),o=a.strings.length-1),{type:"strings",index:o};if("number"==l&&n%1==0)return-1==(o=i.call(a.integers,n))&&(a.integers.push(e(n)),o=a.integers.length-1),{type:"integers",index:o};if("number"==l)return-1==(o=i.call(a.floats,n))&&(a.floats.push(n),o=a.floats.length-1),{type:"floats",index:o};if("boolean"==l)return{type:"boolean",index:n?-1:-2};throw new Error("Unexpected argument of type "+typeof n)}(t),o=a.strings.length,l=a.integers.length;a.floats.length,s&&console.log("Parsing the dictionary");var c=a.strings.join("|");return c+="^"+a.integers.join("|"),c+="^"+a.floats.join("|"),s&&console.log("Parsing the structure"),c+="^"+function t(i){if(s&&console.log("Calling a recursiveParser with "+this.JSON.stringify(i)),i instanceof Array){var n=i.shift();for(var a in i)i.hasOwnProperty(a)&&(n+=t(i[a])+"|");return("|"===n[n.length-1]?n.slice(0,-1):n)+"]"}var r=i.type,c=i.index;if("strings"===r)return e(c);if("integers"===r)return e(o+c);if("floats"===r)return e(o+l+c);if("boolean"===r)return i.index;if("null"===r)return-3;if("undefined"===r)return-5;if("empty"===r)return-4;throw new TypeError("The item is alien!")}(r),s&&console.log("Ending parser"),n.debug?{dictionary:a,ast:r,packed:c}:c},unpack:function(e,i){i=i||{};var n=e.split("^");i.verbose&&console.log("Building dictionary");var s,a,r=[],o=n[0];if(""!==o){o=o.split("|"),i.verbose&&console.log("Parse the strings dictionary");for(var l=0,c=o.length;l<c;l++)r.push("string"==typeof(s=o[l])?s.replace(/\+|%2B|%7C|%5E|%25/g,(function(e){return{"+":" ","%2B":"+","%7C":"|","%5E":"^","%25":"%"}[e]})):s)}if(""!==(o=n[1]))for(o=o.split("|"),i.verbose&&console.log("Parse the integers dictionary"),l=0,c=o.length;l<c;l++)r.push(t(o[l]));if(""!==(o=n[2]))for(o=o.split("|"),i.verbose&&console.log("Parse the floats dictionary"),l=0,c=o.length;l<c;l++)r.push(parseFloat(o[l]));o=null,i.verbose&&console.log("Tokenizing the structure");var d="",h=[],u=n[3].length;for(l=0;l<u;l++)"|"===(a=n[3].charAt(l))||"$"===a||"@"===a||"]"===a?(d&&(h.push(t(d)),d=""),"|"!==a&&h.push(a)):d+=a;var p=h.length,f=0;return i.verbose&&console.log("Starting recursive parser"),function e(){var t=h[f++];if(i.verbose&&console.log("Reading collection type "+("$"===t?"object":"Array")),"@"===t){for(var n=[];f<p;f++){if(a=h[f],i.verbose&&console.log("Read "+a+" symbol"),"]"===a)return n;"@"===a||"$"===a?n.push(e()):-1===a?n.push(!0):-2===a?n.push(!1):-3===a?n.push(null):-5===a?n.push(void 0):-4===a?n.push(""):n.push(r[a])}return i.verbose&&console.log("Parsed "+this.JSON.stringify(n)),n}if("$"===t){var s;for(n={};f<p;f++){if("]"===(s=h[f]))return n;s=-4===s?"":r[s];var a=h[++f];n[s]="@"===a||"$"===a?e():-1===a||-2!==a&&(-3===a?null:-5===a?void 0:-4===a?"":r[a])}return i.verbose&&console.log("Parsed "+this.JSON.stringify(n)),n}throw new TypeError("Bad token "+t+" isn't a type")}()}}}.apply(t,[]))&&(e.exports=n)},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t){let i;const n=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];t.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return 4*e+17},t.getSymbolTotalCodewords=function(e){return n[e]},t.getBCHDigit=function(e){let t=0;for(;0!==e;)t++,e>>>=1;return t},t.setToSJISFunction=function(e){if("function"!=typeof e)throw new Error('"toSJISFunc" is not a valid function.');i=e},t.isKanjiModeEnabled=function(){return void 0!==i},t.toSJIS=function(e){return i(e)}},function(e,t,i){const n=i(304),s=i(305);t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(e,t){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!n.isValid(t))throw new Error("Invalid version: "+t);return t>=1&&t<10?e.ccBits[0]:t<27?e.ccBits[1]:e.ccBits[2]},t.getBestModeForData=function(e){return s.testNumeric(e)?t.NUMERIC:s.testAlphanumeric(e)?t.ALPHANUMERIC:s.testKanji(e)?t.KANJI:t.BYTE},t.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")},t.isValid=function(e){return e&&e.bit&&e.ccBits},t.from=function(e,i){if(t.isValid(e))return e;try{return function(e){if("string"!=typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+e)}}(e)}catch(e){return i}}},function(e,t,i){"use strict";i.d(t,"c",(function(){return c})),i.d(t,"d",(function(){return u})),i.d(t,"a",(function(){return d})),i.d(t,"b",(function(){return h}));var n=i(38);i(0);i(4);var s=i(12),a=(i.n(s),i(4),i(1),new(i(125))(null,null,!0));a.THREE,new(i(279))(a);let r=null,o=null,l=null;const c=(e,t,i)=>{r=e,o=t,l=i;const n=document.getElementById("frvrMenuMobileHolder");m.mount(n,p)},d=()=>l,h=()=>o,u={canShowBookmark:!1,isLoggedIn:!1,isSpectatingOn:!1,bpData:null,account:{premiumT:!1,alias:"",name:"",level:-1,score:0,funds:0,wins:0,games:0,lastDoubleAttempt:0},endScreenData:null,getCurrentView:function(){return Object(n.getCurrentView)()},tournament:{id:""},leaderboardData:null,endTimer:null,beforeGameLvl:0,beforeGameBPLvl:0},p={view:function(){return Object(n.buildViews)()}}},function(e,t){e.exports={IS_CUSTOM:"c",MAP_ID:"cm",MODE_INDEX:"g",MAP_INDEX:"m",INFO:"i",VERSION:"v",HEADER:"h",PROMO:"pr",OFFICIAL:"oc",PASSWORD:"pw",KR_REWARDS:"kr",PROMOTED_SERVER:"pr",IS_DEDICATED:"ds",DONT_SEEK_MAPS:"dsma",DONT_SEEK_MODES:"dsmo"}},function(e,t,i){"use strict";i.d(t,"a",(function(){return a})),i.d(t,"b",(function(){return s})),i.d(t,"c",(function(){return n}));i(27);function n(e,t=0){return"string"!=typeof e||0===t||e.length<=t?e:e.slice(0,t)+"..."}function s(e,t){let i=e;const n=i.length;if(n<=150)return i;t>n&&(t=n);let s=Math.max(t-60,0);s<5&&(s=0);let a=Math.min(s+140,n);return a>n-5&&(a=n),a===n&&(s=Math.max(a-140,0)),i=i.slice(s,a),s>0&&(i="'{snip} "+i),a<n&&(i+=" {snip}"),i}function a(e,t){if(!Array.isArray(e))return"";const i=[];for(let t=0;t<e.length;t++){const n=e[t];try{i.push(n+"")}catch(e){i.push("[value cannot be serialized]")}}return i.join(t)}},function(e,t,i){const n=i(4),s=i(1),a=i(0);a.BufferGeometryUtils=i(116)(a),a.RectAreaLightUniformsLib=i(130).RectAreaLightUniformsLib,a.SkeletonUtils=i(131),i(132)(a),i(133)(a),a.OBJLoader=i(136).OBJLoader,a.FBXLoader=i(276).FBXLoader,a.GLTFLoader=i(277).GLTFLoader,a.MeshoptDecoder=i(137).MeshoptDecoder,a.ImageUtils.crossOrigin="";var r,o,l=i(126),c=i(127),d=i(139),h=new(i(37)),u=!1;WebGLRenderingContext.prototype.getProgramInfoLog=()=>"",WebGLRenderingContext.prototype.getShaderInfoLog=()=>"","undefined"!=typeof WebGL2RenderingContext&&(WebGL2RenderingContext.prototype.getProgramInfoLog=()=>"",WebGL2RenderingContext.prototype.getShaderInfoLog=()=>"");var p=new a.Vector3;e.exports=function(e,t,f,m,g){function v(e,t){if(t.rAnim){var i={mesh:e,tim:t.rAnim,type:t.rAnimT,mlt:t.rAnimM,axis:(t.rAnimA||"y")[t.rAnimT?"toLowerCase":"toUpperCase"]()};i.type&&(i.orgP=e.position[i.axis]),P.movMeshes.push(i)}}function y(e,t,i,r){if(e.morphMeshes=[],e.updateMorphKey=function(e,t){if(this.morphMeshes.length){t=parseFloat(t),s.isNumber(t)||(t=0),t=s.limitMM(t,0,1);for(let n=0;n<this.morphMeshes.length;n++){var i=this.morphMeshes[n].morphTargetDictionary[e];null!=i&&null!=this.morphMeshes[n].morphTargetInfluences[i]&&(this.morphMeshes[n].morphTargetInfluences[i]=t)}}},r.traverse((i=>{if(i.isMesh){if(i.morphTargetInfluences)i.updateMorphTargets(),Object.keys(i.morphTargetDictionary).length&&e.morphMeshes.push(i);P.traverseMats(i,(function(e){t&&t.texEncode&&function(e,t){let i=!1;for(let n=0;n<oe.length;n++)e[oe[n]]&&e[oe[n]].encoding!=t&&(e[oe[n]].encoding=t,i=!0);i&&(e.needsUpdate=!0)}(e,a[n.encodingTypes[t.texEncode||0].value]),t&&t.noFog&&(e.fog=!1),t.color&&"#ffffff"!=t.color&&(e.color=new a.Color(P.GEOS.getColor(t.color))),s.isNumber(t.opacity)&&1!=t.opacity&&(e.opacity=t.opacity,e.transparent=1!=t.opacity),"gltf"!=t.fileExt&&"glb"!=t.fileExt||(e.depthWrite=!e.transparent),t.pulsT&&P.pulsMats.push({mat:e,pul:t.pulsT,minGlo:t.minGlo}),t.rgb&&P.rgbMats.push({mat:e,mlt:t.rgbS||.3,type:t.rgbT||0,dlt:0}),t.env&&(t.mapping=3,t.sameEnv?(e.envMap=e.map.clone(),e.envMap.mapping=a[n.mappingTypes[t.mapping||0]],e.envMap.needsUpdate=!0):P.loadTexture(e,(t.texSrc||t.src)+(t.sameEnv?"":"_env"),t,"envMap"),e.envMapIntensity=t.env||3),e.needsUpdate=!0})),i.receiveShadow=!t.noShadow,i.castShadow=t.shadows,t.forceRender&&(i.frustumCulled=!1,i.renderOrder=1/0,i.needsUpdate=!0)}})),e.nodes=i.nodes||[],i.animations&&i.animations.length){e.clips=i.animations||[],e.mixer=new a.AnimationMixer(r),e.mixer.timeScale=t.animS||1,se.push({uuid:e.uuid,mixer:e.mixer}),e.anims={};for(var o=0;o<e.clips.length;++o)e.anims[e.clips[o].name]=e.mixer.clipAction(e.clips[o]);e.playClip=function(e,t=0,i){i=i||.2;const n=this.anims[e];n&&(t?(this.currAnim&&this.currAnim!=n&&this.currAnim.fadeOut(i),n.reset(),n.clampWhenFinished=!0,t&&n.setLoop(a.LoopOnce,t),n.setEffectiveTimeScale(1).setEffectiveWeight(1).play(),this.currAnim=n):this.mainAnim==n&&!isFinite(this.currAnim.repetitions)||this.currAnim&&isFinite(this.currAnim.repetitions)&&this.currAnim.isRunning()||(this.currAnim&&this.currAnim.fadeOut(i),n.reset().setEffectiveTimeScale(1).setEffectiveWeight(1).play(),this.mainAnim=n,this.currAnim=n))},e.playAllClips=function(e=0){for(var t in this.anims)this.anims.hasOwnProperty(t)&&(this.anims[t].reset(),e&&this.anims[t].setLoop(a.LoopRepeat,e),this.anims[t].play())},e.stopAllClips=function(){for(var e in this.mainAnim=null,this.currAnim=null,this.anims)this.anims.hasOwnProperty(e)&&this.anims[e].stop()},t.inspectAnim||(t.startAnim?e.playClip(t.startAnim):e.playAllClips())}t.forceRender&&(r.frustumCulled=!1,r.renderOrder=1/0),e.add(r),v(e,t),null!=t.setLayer&&e.traverse((function(e){e.layers.set(t.setLayer)}))}this.THREE=a,this.isMobile=g,this.ShaderMesh=i(140)(a,this),this.shaderRendering=m,this.ShaderMesh.enabled=!!m,this.GEOS=i(40);var b=new a.OBJLoader,w=new a.GLTFLoader;w.setMeshoptDecoder(a.MeshoptDecoder);var x=new a.FBXLoader;this.cubeGeo=new a.BoxGeometry(1,1,1),this.getCubeMesh=()=>new a.Mesh(this.cubeGeo);var S=new a.PlaneGeometry(1,1),M=new a.TextureLoader;M.crossOrigin="";var k,_,T=[new a.MeshBasicMaterial({color:65535,side:a.BackSide}),new a.MeshBasicMaterial({color:13938487,side:a.BackSide}),new a.MeshBasicMaterial({color:11299257,side:a.BackSide})];this.invisMat=new a.MeshBasicMaterial,this.invisMat.visible=!1;var C={},I={},A={},R={};this.movTextures=[],this.rotTextures=[],this.movMeshes=[],this.rendDisObjs=[],this.rendDisCnt=0,this.pulsMats=[],this.rgbMats=[],this.liquids=[],this.frameMats=[],this.pulsVal=0,this.liquidVal=0,this.frustumSize=50,this.newliquid=!0,this.targetVector=new a.Vector3,this.mirroredMatrix=(new a.Matrix4).makeScale(-1,1,1);var P=this,E={};this.tmpMouse=new a.Vector2,this.tmpMouse2=new a.Vector2,this.frustum=new a.Frustum;const D=this.frustum.containsPoint;this.frustum.containPoint=D,this.frustum.containsPoint=new Proxy(this.frustum.containsPoint,{apply:function(){return!1}});var O=new a.Matrix4,L=new a.PerspectiveCamera(0,window.innerWidth/window.innerHeight,.1,6e3),j=new a.OrthographicCamera(1.7*-P.frustumSize/2,1.7*P.frustumSize/2,P.frustumSize/2,-P.frustumSize/2,.1,2e3);this.camera=L,Object.freeze(this.camera.scale),this.fpsCamera=new a.PerspectiveCamera(n.fov,window.innerWidth/window.innerHeight,.1,200),Object.freeze(this.fpsCamera.scale),Object.freeze(this.fpsCamera.quaternion),Object.freeze(this.fpsCamera.position),Object.freeze(this.fpsCamera.rotation),this.fpsCamera.layers.set(1),this.camera.add(this.fpsCamera);var z=new a.Vector3;this.getTmpVector=function(e,t,i){return z.set(e,t,i),z},this.vmSetts=0,this.gpSetts=0,this.weaponOffX=[1],this.weaponOffY=[1],this.weaponOffZ=[1],this.weapReloadY=[1],this.weapSwapY=[1],this.weaponADSOffY=[1],this.weaponLean=[1],this.weaponBob=[1],this.weaponRot=[0],this.liquidUpd=0,this.liquidFreq=50,this.hideADS=[0],this.showHands=!0,this.softShad=!1,this.highResShad=!1,this.ambientShading=!0,this.mapDet=!1,this.aimAnim=[!0],this.renderDst=0,this.reticleIndex=0,this.lowSpec=!1,this.noTex=!1,this.customRatio=null,this.aspectRatio="",this.aimFov=[!0],this.adsFov=[1],this.objectAnim=!0,this.rarityAnim=!0,this.screenShake=!0,this.textureAnim=!0,this.weaponShine=!0,this.lighting=1,this.roundArms=!1,this.reflectionQuality=0,this.ropeColor="#b3b3b3",this.trailColor="#ededed",this.staticRendering=!1,this.holidayEffects=!1,this.getPlayerWeaponId=function(e){return e?(1==P.vmSetts&&e.currentWeaponId>=0?e.currentWeaponId:-1)+1:0},this.aimRecticle={image:new Image,opacity:0,opacMlt:1,height:680,width:680,display:!1,custom:!1,savedCustom:""},this.aimRecticle.image.onload=()=>this.aimRecticle.image.isReady=!0,this.aimRecticle.image.src=s.assetsUrl("/textures/scopes/scope_0.png"),this.aimDot={image:new Image,opacity:0,width:20,height:20,display:!1,custom:!1,savedCustom:""},this.aimDot.image.onload=()=>this.aimDot.image.isReady=!0,this.aimDot.image.src=s.assetsUrl("/textures/reticles/reticle_0.png"),this.missingTexture=new Image,this.missingTexture.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAACAgMAAAAP2OW3AAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAxQTFRF/wDbAAAAAAAA/wDbC5gN/AAAAAR0Uk5T/P/9/02rixUAAAAMSURBVHicYxBg2AAAAOQAwSeo6FcAAAAASUVORK5CYII=";var B=!0;this.lastEnvId=-1,this.init=function(e,t,i){if(i||B||(this.lastEnvId=-1,this.resetNormal(),this.clearPendingMeshes(),this.clearGeos()),this.pendingGIs={},i||(this.scene=new a.Scene,this.scene.name="Main",this.backgroundScene=new a.Scene,this.backgroundScene.name="Background"),this.clearSkyDome(),e.skyDome&&t&&null==t.skyCol&&this.skyDomeInit(e),i||(this.ocean=null,e.ocean&&(this.ocean=c.fromConfig(e,this),this.scene.add(this.ocean))),this.sceneInit.apply(this,[e,t,i]),this.renderer){var r=e&&null!=e.toneMapping?s.limitMM(e.toneMapping,0,n.toneTypes.length-1):0;this.renderer.toneMapping=a[n.toneTypes[r||0]],this.renderer.toneMappingExposure=e&&null!=e.toneMappingExposure?s.limitMM(e.toneMappingExposure,0,10).round(1):1;var o=e&&null!=e.outputEncoding?s.limitMM(e.outputEncoding,0,n.encodingTypes.length-1):0;this.renderer.outputEncoding=a[n.encodingTypes[o||0].value],this.renderer.useLegacyLights=!e||!e.correctLights}this.initShaders()},this.clearSkyDome=function(){P.skyDome&&(P.backgroundScene.remove(P.skyDome),P.skyDome=null)},this.skyDomeInit=function(e){P.skyDome=l.fromConfig(e,P),P.backgroundScene.add(P.skyDome)},this.getRes=function(){var e=s.isString(this.aspectRatio)?this.aspectRatio.split("x"):[];return Math.abs(parseInt(e[0])||window.innerWidth)/Math.abs(parseInt(e[1])||window.innerHeight)};var N=0;if(this.flash=function(t,i){e&&(e.showFlash=!0,e.flashX=t,e.flashY=1-i),N=1},this.updateLightMap=function(e){this.skyLight&&(this.skyLight.shadow.camera.right=e.shadWidth,this.skyLight.shadow.camera.left=-e.shadWidth,this.skyLight.shadow.camera.top=e.shadLength,this.skyLight.shadow.camera.bottom=-e.shadLength)},!f){if(this.renderer=new a.WebGLRenderer({powerPreference:"high-performance",antialias:"true"==getSavedVal("kro_setngss_antiAlias")}),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.autoUpdate=!1,this.renderer.shadowMap.type=a.BasicShadowMap,this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.autoClear=!1,document.body.appendChild(this.renderer.domElement),delete this.renderer.domElement.dataset.engine,!1===this.renderer.capabilities.isWebGL2)this.shaderRendering=!1,this.ShaderMesh.enabled=!1,this.ShaderMesh.supported=!1;else{for(var F={},H=["build_0","build_1","build_2","build_3"],U=h.textures.length-1+H.length,V=0,G=function(){++V>=U&&P.ShaderMesh.updateTextureMap(F)},W=0;W<h.textures.length;W++)"default"!=(k=h.textures[W]).src&&(F[k.src]=M.load(s.assetsUrl("/textures/"+k.src+".png"),G));for(W=0;W<H.length;W++)F[H[W]]=M.load(s.assetsUrl("/textures/"+H[W]+".png"),G)}u}this.postprocessing={composer:null,enabled:!0,active:!1,shaders:[],shaderPasses:[]},this.initShaders=function(){this.postprocessing.backgroundPass=void 0,this.postprocessing.scenePass=void 0,this.postprocessing.sceneAlwaysPass=void 0,this.postprocessing.sceneFPSPass=void 0,this.postprocessing.fixPass=void 0,this.postprocessing.composer=null,this.postprocessing.shaderPasses.length=0,this.skyDome&&(this.postprocessing.backgroundPass=new a.RenderPass(this.backgroundScene,this.camera),this.postprocessing.backgroundPass.layer=0,this.postprocessing.backgroundPass.clear=!1),this.postprocessing.scenePass=new a.RenderPass(this.scene,this.camera),this.skyDome&&(this.postprocessing.scenePass.layer=0),this.skyDome&&(this.postprocessing.scenePass.clear=!1),this.postprocessing.sceneAlwaysPass=new a.RenderPass(this.scene,this.camera),this.postprocessing.sceneAlwaysPass.layer=2,this.postprocessing.sceneAlwaysPass.clear=!1,this.postprocessing.sceneFPSPass=new a.RenderPass(this.scene,this.fpsCamera),this.postprocessing.sceneFPSPass.clear=!1,this.postprocessing.sceneFPSPass.clearDepth=!0,this.postprocessing.fixPass=new a.ShaderPass(a.CopyShader),this.postprocessing.fixPass.enabled=!0,this.postprocessing.composer=new a.EffectComposer(this.renderer,void 0,this),this.skyDome&&this.postprocessing.composer.addPass(this.postprocessing.backgroundPass),this.postprocessing.composer.addPass(this.postprocessing.scenePass),this.postprocessing.composer.addPass(this.postprocessing.sceneAlwaysPass),this.postprocessing.composer.addPass(this.postprocessing.sceneFPSPass),this.postprocessing.composer.addPass(this.postprocessing.fixPass);for(var e=0;e<this.postprocessing.shaders.length;e++)(k=this.postprocessing.shaders[e])&&(k.ogUniforms&&k.ogUniforms.resolution&&(k.uniforms.resolution={value:new a.Vector2(window.innerWidth,window.innerHeight)}),k.ogUniforms&&null==k.ogUniforms.tDiffuse&&(k.uniforms.tDiffuse=this.postprocessing.composer.renderTarget.texture),this.postprocessing.shaderPasses[e]=new a.ShaderPass(k),this.postprocessing.composer.addPass(this.postprocessing.shaderPasses[e]));if(B)B=!1;else for(e=0;e<this.shaderInputs.length;e++){var t;k=this.shaderInputs[e];for(var i=0;i<k.length;i++)if(t=k[i]){"false"==t.val&&(t.val=!1),"true"==t.val&&(t.val=!0),(t.min||t.max)&&(t.val=Math.min(t.max,Math.max(t.min,+t.val))),t.toggle&&(t.val=~~!!t.val);var n=this.postprocessing.composer.passes.length-this.shaderInputs.length+e;0==i?this.postprocessing.composer.passes[n].enabled=!!t.val:this.postprocessing.composer.passes[n].uniforms[t.name].value=t.val}}this.resizeShaders()},this.shaderInputs=[],this.insertShaderPass=function(e){try{var t={...e.uniforms};e.uniforms.resolution&&={value:new a.Vector2(window.innerWidth,window.innerHeight)},null==e.uniforms.tDiffuse&&(e.uniforms.tDiffuse=this.postprocessing.composer.renderTarget.texture);var i=this.shaderInputs.length,n=[{name:"Shader Mod # "+i+1,toggle:!0,val:!0}];for(var s in e.uniforms)(k=e.uniforms[s]).user&&(k.toggle?n.push({name:s,toggle:!0,val:k.value}):n.push({name:s,min:parseFloat(k.min)||0,max:parseFloat(k.max)||0,step:parseFloat(k.step)||0,val:k.value}));if(this.shaderInputs.push(n),this.postprocessing.shaders.push({defines:Object.assign({},e.defines),fragmentShader:e.fragmentShader,uniforms:e.uniforms,ogUniforms:t,vertexShader:e.vertexShader}),!this.postprocessing.composer)return void(this.postprocessing.active=!0);this.postprocessing.shaderPasses[i]=new a.ShaderPass(this.postprocessing.shaders[i]),this.postprocessing.shaderPasses[i].enabled=!0,this.postprocessing.composer.addPass(this.postprocessing.shaderPasses[i]),this.postprocessing.active=!0}catch(e){}},this.resetShaderPasses=function(){for(var e=this.postprocessing.shaderPasses.length-1;e>=0;e--)this.postprocessing.composer.removePass(this.postprocessing.shaderPasses[e]);this.shaderInputs.length=0,this.postprocessing.shaders.length=0,this.postprocessing.shaderPasses.length=0,this.postprocessing.active=!1},this.resizeShaders=function(){if(this.postprocessing.composer){var e=this.renderer.getPixelRatio(),t=Math.floor(window.innerWidth/e)||1,i=Math.floor(window.innerHeight/e)||1;this.postprocessing.composer.setSize(t,i)}},this.shadows=!0,this.updateShadowMap=function(){this.shadows&&(this.renderer.shadowMap.needsUpdate=!0)},this.toggleShadQual=function(e){this.renderer.shadowMap.type=e?a.PCFSoftShadowMap:a.BasicShadowMap,this.skyLight&&(this.renderer.setRenderTarget(this.skyLight.shadow.map),this.renderer.clear(),this.renderer.setRenderTarget(null)),this.updateShadowMap()},this.toggleShadowMap=function(e){e?(this.shadows=!0,this.updateShadowMap()):(this.shadows=!1,this.skyLight&&(this.renderer.setRenderTarget(this.skyLight.shadow.map),this.renderer.clear(),this.renderer.setRenderTarget(null)))},this.dynamicShadows=!1,this.toggleShadowAuto=function(e){this.dynamicShadows=e,this.renderer.shadowMap.autoUpdate=e,this.updateShadowMap()},this.setOrto=function(e,t){P.camera=e?j:L,e&&(P.frustumSize=t,P.resize())},this.zoomVal=1,this.zoom=function(e){this.aimFov||(e=1),this.zoomVal=e,this.updateCamFOV(),this.fpsCamera.fov=this.fpsFov/e,this.fpsCamera.updateProjectionMatrix()},this.fovMult=function(e){this.fovMlt!=e&&(this.fovMlt=e,this.updateCamFOV())},this.setFPSFov=function(e){e!=this.fpsFov&&(this.fpsFov=e,this.fpsCamera.fov=e,this.fpsCamera.updateProjectionMatrix())},this.setFPSFov(n.fov),this.fovMlt=1,this.updateCamFOV=function(){this.camera.fov=this.fov/this.zoomVal*this.fovMlt,this.camera.updateProjectionMatrix()},this.setFov=function(e){e!=this.fov&&(this.fov=e,this.updateCamFOV())},this.setFov(n.fov),this.postprocessingEnabled=function(){return!this.shaderRendering&&this.postprocessing.composer&&this.postprocessing.enabled&&this.postprocessing.active},this.resize=function(){"PerspectiveCamera"==P.camera.type?P.camera.aspect=P.getRes():(P.camera.left=-P.frustumSize*P.getRes()/2,P.camera.right=P.frustumSize*P.getRes()/2,P.camera.top=P.frustumSize/2,P.camera.bottom=-P.frustumSize/2),P.camera.updateProjectionMatrix(),P.fpsCamera.aspect=P.getRes(),P.fpsCamera.updateProjectionMatrix(),P.renderer.setSize(window.innerWidth,window.innerHeight),P.resizeShaders()},this.resMltV=1,this.setResMlt=function(e){this.resMltV=e,this.renderer.setPixelRatio(window.devicePixelRatio*this.resMltV),this.renderer.setSize(window.innerWidth,window.innerHeight)},this.updateFrustum=function(){this.frustum.setFromProjectionMatrix(O.multiplyMatrices(this.camera.projectionMatrix,this.camera.matrixWorldInverse))};var q=0,Y=0;this.shakeX=0,this.swayX=0,this.shakeY=0,this.swayY=0,this.updateShake=function(e){Y&&this.screenShake&&(Y*=Math.pow(.99,e),q+=s.randFloat(-Math.PI,Math.PI),this.shakeY=Math.sin(q)*Y,this.shakeX=Math.cos(q)*Y,Y<=.01&&(Y=0,this.shakeX=this.shakeY=0))},this.shake=function(e){Y<e&&(Y=e)},this.render=function(t,i){if(!this.dontRender&&(this.scene||i)){if(this.textureAnim){for(var n=0;n<this.movTextures.length;++n)(k=this.movTextures[n]).tex.offset&&(k.tex.offset[0==k.movD?"x":"y"]+=k.mov*t);for(n=0;n<this.rotTextures.length;++n)null!=(k=this.rotTextures[n]).tex.rotation&&(k.tex.rotation+=k.rot*t);for(n=0;n<this.movMeshes.length;++n)(k=this.movMeshes[n])&&k.mesh&&(k.type?(k.bobAnim=(k.bobAnim||0)+k.tim*t,k.mesh.position[k.axis]=k.orgP+Math.sin(k.bobAnim)*(k.mlt||.55)):k.mesh["rotate"+k.axis](k.tim*t));var r;this.pulsVal+=.003*t;for(n=0;n<this.pulsMats.length;++n)r=1.5*(Math.sin(this.pulsVal)/2+.5),r+=this.pulsMats[n].minGlo||0,this.pulsMats[n].mat.emissiveIntensity=r;for(n=0;n<this.frameMats.length;++n)(k=this.frameMats[n]).dur-=t,k.dur<=0&&(k.dur=k.orgDur,k.cur++,k.cur>=k.total&&(k.cur=0),k.mat.map&&(k.mat.map.offset.x=k.cur%k.numX/k.numX,k.numY&&(k.mat.map.offset.y=(k.numY-Math.floor(k.cur/k.numX)-1)/k.numY)));for(n=0;n<this.rgbMats.length;++n)(k=this.rgbMats[n]).dlt+=t*k.mlt,k.dlt>=360&&(k.dlt=0),k.mat&&("MeshBasicMaterial"==k.mat.type&&1!=k.type&&(k.type=1),k.mat[k.type?"color":"emissive"]||(k.mat[k.type?"color":"emissive"]=new a.Color),k.mat[k.type?"color":"emissive"].set(s.hexFromHue(Math.round(k.dlt))))}if(this.objectAnim){if(this.liquidVal+=.003*t,this.liquidUpd-=t,this.liquidUpd<=0&&(this.liquidUpd=this.liquidFreq,_&&(_.uniforms.time.value=this.liquidVal),!this.newliquid))for(n=0;n<this.liquids.length;++n){for(var o=(k=this.liquids[n]).mesh.geometry.getAttribute("position"),l=0;l<o.count;l++)o.setZ(l,k.hght*Math.sin(l/5+this.liquidVal*k.spd/4));k.mesh.geometry.attributes.position.needsUpdate=!0,k.mesh.geometry.computeVertexNormals()}for(n=0;n<se.length;++n)k=se[n],se[n].mixer.update(t/1e3)}if(this.rendDisCnt-=t,this.rendDisCnt<=0){this.camera.getWorldPosition(p),this.rendDisCnt=500;for(n=0;n<this.rendDisObjs.length;++n)(k=this.rendDisObjs[n]).ms&&(k.ms.visible=s.getD3D(k.ms.position.x,k.ms.position.y,k.ms.position.z,p.x,p.y,p.z)<=k.dis)}this.ocean&&this.ocean.update(t),i||(this.renderer.clear(),this.camera.layers.set(0),this.skyDome&&this.camera.getWorldPosition(this.skyDome.position),this.postprocessingEnabled()?this.postprocessing.composer.render(t):(this.skyDome&&(this.renderer.render(this.backgroundScene,this.camera),this.renderer.clearDepth()),this.renderer.render(this.scene,this.camera),this.renderer.clearDepth(),this.renderer.render(this.scene,this.fpsCamera)),e&&e.showFlash&&(N<=0&&(N=0,e.showFlash=!1),N-=t),this.updateShake(t))}},this.updateTexture=function(e,t,i){i=i||{};var n=new a.Texture(t);for(var s in I)if(!s.includes("sad")&&s.substring(0,e.length+2)==e+"mt"){try{I[s].dispose()}catch(e){}I[s].image=n.image,I[s].needsUpdate=!0}A[e]=n},this.loadTexture=function(e,t,i,r){var o=t+(null==(i=i||{}).movT?"mt":"mt"+i.movT)+(null==i.movD?"md":i.movD)+(null==i.rotT?"rt":"rt"+i.rotT)+(i.fontSize||"fs")+(i.fcolr||"fc")+(i.bcolr||"bc")+(i.noBVis||"bv")+(i.text||"txt")+(i.tAlign||"ta")+(i.tId||"ctx")+(i.texOffX||"tox")+(i.texOffY||"toy")+(i.normal||"n")+(i.spec||"spec")+(i.asset||"as")+(i.umid||"umid")+(i.texRot||"tr")+(i.texEncode||"en")+(i.metalness||"mtl")+(i.roughness||"rg")+(i.displacement||"dp")+(i.bump||"bp")+(null==i.video?"":"v_"+i.video)+(i.lightM||"lm")+(null==i.env?"":"env_"+i.env)+(null==i.frames?"":"fr"+i.frames)+(null==i.frameT?"":"frt"+i.frameT)+(i.fTrans?"fT":"")+i.texExt,l=i.frames||0,c=Math.min(10,l),d=l>10?Math.ceil(l/10):0;if(I[o])I[o].mats?I[o].mats.push({t:r,m:e}):(e[r||"map"]=I[o],i.frames&&1==e.map.repeat.x&&(e.map.repeat.x=1/i.frames),e.needsUpdate=!0);else if(I[o]={mats:[{t:r,m:e}]},A[t]){(u=A[t]).wrapS=a.RepeatWrapping,u.wrapT=a.RepeatWrapping,u.repeat.set(l?1/c:i.repeatX||1,d?1/d:i.repeatY||1),u.minFilter=i.tFilter||a.NearestFilter,u.magFilter=i.tFilter||a.NearestFilter,u.offset.x=(i.texOffX||0).round(2),u.offset.y=(i.texOffY||0).round(2),u.rotation=s.toRad(i.texRot||0),u.encoding=a[n.encodingTypes[i.texEncode||0].value],u.needsUpdate=!0;for(var h=0;h<I[o].mats.length;++h)I[o].mats[h].m[I[o].mats[h].t||"map"]=u,I[o].mats[h].m.needsUpdate=!0;I[o]=u,i.movT&&P.movTextures.push({tex:u,mov:i.movT,movD:i.movD||0}),i.rotT&&P.rotTextures.push({tex:u,rot:i.rotT})}else if(r&&"emissiveMap"==r&&i.noEmisTex);else if(i.canvas){(u=new a.Texture(i.canvas)).wrapS=a.RepeatWrapping,u.wrapT=a.RepeatWrapping,u.repeat.set(i.repeatX||1,i.repeatY||1),u.minFilter=i.tFilter||a.NearestFilter,u.magFilter=i.tFilter||a.NearestFilter,u.encoding=a[n.encodingTypes[i.texEncode||0].value],u.needsUpdate=!0;for(h=0;h<I[o].mats.length;++h)I[o].mats[h].m[I[o].mats[h].t||"map"]=u,I[o].mats[h].m.needsUpdate=!0;I[o]=u,i.movT&&P.movTextures.push({tex:u,mov:i.movT,movD:i.movD||0}),i.rotT&&P.rotTextures.push({tex:u,rot:i.rotT})}else if(null!=i.video){(u=new a.VideoTexture(P.getVideo(i))).wrapS=a.RepeatWrapping,u.wrapT=a.RepeatWrapping,u.repeat.set(i.repeatX||1,i.repeatY||1),i.projection||(u.minFilter=i.tFilter||a.NearestFilter,u.magFilter=i.tFilter||a.NearestFilter,u.encoding=a[n.encodingTypes[i.texEncode||0].value],u.needsUpdate=!0);for(h=0;h<I[o].mats.length;++h)I[o].mats[h].m[I[o].mats[h].t||"map"]=u,I[o].mats[h].m.needsUpdate=!0;I[o]=u,i.movT&&P.movTextures.push({tex:u,mov:i.movT,movD:i.movD||0}),i.rotT&&P.rotTextures.push({tex:u,rot:i.rotT})}else if("string"==typeof t&&t.includes("custom_")){if(!r){var u;(u=new a.Texture(P.missingTexture)).wrapS=a.RepeatWrapping,u.wrapT=a.RepeatWrapping,u.repeat.set(l?1/c:i.repeatX||1,d?1/d:i.repeatY||1),u.minFilter=i.tFilter||a.NearestFilter,u.magFilter=i.tFilter||a.NearestFilter,u.offset.x=(i.texOffX||0).round(2),u.offset.y=(i.texOffY||0).round(2),u.rotation=s.toRad(i.texRot||0),u.encoding=a[n.encodingTypes[i.texEncode||0].value],u.needsUpdate=!0;for(h=0;h<I[o].mats.length;++h)I[o].mats[h].m[I[o].mats[h].t||"map"]=u,I[o].mats[h].m.needsUpdate=!0;I[o]=u,i.movT&&P.movTextures.push({tex:u,mov:i.movT,movD:i.movD||0}),i.rotT&&P.rotTextures.push({tex:u,rot:i.rotT})}}else"string"!=typeof t||t.includes("default")||M.load(i.asset?s.userAssetsUrl(t+"."+(i.texExt||"png"),!1,!1,!0):s.assetsUrl("/textures/"+t+"."+(i.texExt||"png"),!1,i.local),(e=>{e.wrapS=a.RepeatWrapping,e.wrapT=a.RepeatWrapping,e.repeat.set(l?1/c:i.repeatX||1,d?1/d:i.repeatY||1),e.minFilter=i.tFilter||a.NearestFilter,e.magFilter=i.tFilter||a.NearestFilter,e.offset.x=(i.texOffX||0).round(2),e.offset.y=(i.texOffY||0).round(2),e.rotation=s.toRad(i.texRot||0),e.encoding=a[n.encodingTypes[i.texEncode||0].value],e.mapping=a[n.mappingTypes[i.mapping||0]],e.needsUpdate=!0;for(var t=0;t<I[o].mats.length;++t)I[o].mats[t].m[I[o].mats[t].t||"map"]=e,I[o].mats[t].m.needsUpdate=!0;I[o]=e,i.movT&&P.movTextures.push({tex:e,mov:i.movT,movD:i.movD||0}),i.rotT&&P.rotTextures.push({tex:e,rot:i.rotT})}),void 0,(function(){if(!r){var e=new a.Texture(P.missingTexture);e.wrapS=a.RepeatWrapping,e.wrapT=a.RepeatWrapping,e.repeat.set(l?1/c:i.repeatX||1,d?1/d:i.repeatY||1),e.minFilter=i.tFilter||a.NearestFilter,e.magFilter=i.tFilter||a.NearestFilter,e.offset.x=(i.texOffX||0).round(2),e.offset.y=(i.texOffY||0).round(2),e.rotation=s.toRad(i.texRot||0),e.encoding=a[n.encodingTypes[i.texEncode||0].value],e.needsUpdate=!0;for(var t=0;t<I[o].mats.length;++t)I[o].mats[t].m[I[o].mats[t].t||"map"]=e,I[o].mats[t].m.needsUpdate=!0;I[o]=e,i.movT&&P.movTextures.push({tex:e,mov:i.movT,movD:i.movD||0}),i.rotT&&P.rotTextures.push({tex:e,rot:i.rotT})}}));return e},this.getVideo=function(e){var t=document.getElementById("video_"+(e.video||0));return t||((t=document.createElement("video")).crossOrigin="anonymous",t.id="video_"+(e.video||0),t.src=e.asset?s.userAssetsUrl(e.src+".mp4"):s.assetsUrl("/videos/video_"+(e.video||0)+".mp4"),t.style.display="none",document.body.appendChild(t),t.loop=!0,t.volume=0,t.play()),t},this.getMat=function(e,t){t=t||{},0==P.lighting&&t.mat!=a.SpriteMaterial&&(t.mat=a.MeshBasicMaterial),2==P.lighting&&t.mat!=a.SpriteMaterial&&(t.mat=a.MeshPhongMaterial),3==P.lighting&&t.mat!=a.SpriteMaterial&&(t.mat=a.MeshStandardMaterial),t.forceMat&&(t.mat=t.forceMat),null==t.video||t.asset||(e="/videos/video_"+(t.video||0));var i=!!t.isMdl&&P.lighting>=2&&t.mat!=a.SpriteMaterial;t.texExt=t.texExt||"png";var n=(t.texSrc||e)+(t?(t.rotation||"x")+(t.noFog||"y")+(t.umid||"umid")+(t.opacity||"z")+(t.color||"b")+(t.mat?"ma":"nm")+(t.ao||"a")+(t.emissive||"e")+(t.glowText||"g")+(null==t.movT?"mt":t.movT)+(null==t.movD?"md":t.movD)+(null==t.canvas?"":"canvas")+(null==t.rotT?"rt":t.rotT)+(null==t.blending?"nb":t.blending)+(t.pulsT?"pt"+t.pulsT:"npt")+(t.normal||"n")+(t.spec||"spec")+(t.alph||"alph")+(t.asset||"as")+ +(null==t.frames?"nfr":"fr"+t.frames)+(null==t.frameT?"nfrt":"frt"+t.frameT)+(null==t.rAnim?"nra":"ra"+t.rAnim)+(null==t.rAnimA?"nraa":"raa"+t.rAnimA)+(null==t.rAnimT?"nrt":"rt"+t.rAnimT)+(t.texRot||"tr")+(null==t.texEncode?"":"en_"+t.texEncode)+(null==t.rAnimM?"":"rm"+t.rAnimM)+(null==t.depthWrite?"d":t.depthWrite)+(t.fontSize||"fs")+(t.fcolr||"fc")+(t.bcolr||"bc")+(t.noBVis||"bv")+(t.text||"txt")+(t.tAlign||"ta")+(t.rgb?"rgb":"nrgb")+(t.rgbS?"rgbS":"nrgbS")+(t.rgbT||"rgbT")+(t.texOffX||"tox")+(t.texOffY||"toy")+(t.itemID||"itemID")+(t.useWireframe?"wf":"nwf")+(t.metalness||"mtl")+(t.roughness||"rg")+(t.displacement||"dp")+(t.bump||"bp")+(t.emissInt||"")+(t.projection?"pj":"")+(null==t.video?"":"v_"+t.video)+(t.lightM||"lm")+(null==t.side?"":"side_"+t.side)+(null==t.rside?"":"side_"+t.rside)+(t.fTrans?"fT":"")+(t.noTex?"nt":"")+t.texExt:""),s=C[n];if(!s){t.noTex&&(e="default",t.color="#ffffff"),i&&delete t.vertexColors;const c=null!=t.shaderNum&&d[t.shaderNum];c?(s=new a.ShaderToyMaterial(d[t.shaderNum].code,t),null!=t.side&&(s.side=t.side)):s=new(t.mat?t.mat:a.StrippedLambertMaterial)(t),null!=t.rside&&(s.side=t.rside),t&&t.rgb&&(s.dithering=!0),t.canvas&&this.loadTexture(s,n,t),!e||"default"==e||t.useWireframe||c||this.loadTexture(s,t.texSrc||e,t);const h=s.hasOwnProperty("emissiveMap"),u=s.hasOwnProperty("normalMap"),p=s.hasOwnProperty("roughnessMap"),f=s.hasOwnProperty("metalnessMap"),m=s.hasOwnProperty("displacementMap"),g=s.hasOwnProperty("specularMap"),v=s.hasOwnProperty("bumpMap"),y=s.hasOwnProperty("envMap"),b=s.hasOwnProperty("alphaMap");t&&t.emissive&&h&&this.loadTexture(s,(t.glowText&&t.texSrc||e)+(t.sameGlow?"":"_e"),t,"emissiveMap"),t&&t.emissInt&&h&&(s.emissiveIntensity=t.emissInt),t&&t.ao&&(this.loadTexture(s,e+"_ao",t,"aoMap"),s.aoMapIntensity=1.3),t&&t.lightM&&(this.loadTexture(s,e+"_l",t,"lightMap"),s.lightMapIntensity=1.5),t&&t.normal&&u&&this.loadTexture(s,(t.texSrc||e)+"_n",t,"normalMap"),t&&t.roughness&&p&&this.loadTexture(s,(t.texSrc||e)+"_r",t,"roughnessMap"),t&&t.metalness&&f&&this.loadTexture(s,(t.texSrc||e)+"_m",t,"metalnessMap"),t&&t.displacement&&m&&(this.loadTexture(s,(t.texSrc||e)+"_d",t,"displacementMap"),s.displacementScale=t.displacement),t&&t.bump&&v&&(this.loadTexture(s,(t.texSrc||e)+"_b",t,"bumpMap"),s.bumpScale=t.bump),t&&t.spec&&"MeshStandardMaterial"!=s.type&&g&&this.loadTexture(s,(t.texSrc||e)+"_s",t,"specularMap"),t&&t.alph&&b&&this.loadTexture(s,(t.texSrc||e)+"_a",t,"alphaMap"),t.env&&y&&(t.mapping=3,this.loadTexture(s,(t.texSrc||e)+(t.sameEnv?"":"_env"),t,"envMap"),s.envMapIntensity=t.env||3),("default"==e&&!1!==t.vertexColors||t&&t.rgb&&!t.rgbT)&&(s.vertexColors=!0),!1===t.vertexColors&&(s.vertexColors=!1),t&&t.noFog&&(s.fog=!1),s.hasOwnProperty("shading")&&(s.shading=a.SmoothShading),t.pulsT&&h&&P.pulsMats.push({mat:s,pul:t.pulsT,minGlo:t.minGlo}),t.projection&&(s.side=a.DoubleSide,s.onBeforeCompile=e=>{e.fragmentShader="\n\t\t\t\t\t\tvarying vec4 vTexCoords;\n\t\t\t\t\t"+e.fragmentShader.replace("void main() {","void main() {\n\t\t\t\t\t\t\tvec2 uvT = vTexCoords.xy / vTexCoords.w / 2.0 + 0.5;").replace("#include <map_fragment>",a.ShaderChunk.map_fragment.replace(/texture2D\( (\w+), (\w+) \);/gim,"texture2D($1,uvT);")).replace("#include <map_particle_fragment>",a.ShaderChunk.map_particle_fragment.replace(/texture2D\( (\w+), (\w+) \);/gim,"texture2D($1,uvT);")).replace("#include <emissivemap_fragment>",a.ShaderChunk.emissivemap_fragment.replace(/texture2D\( (\w+), (\w+) \);/gim,"texture2D($1,uvT);")),e.vertexShader="\n\t\t\t\t\t\tvarying vec4 vTexCoords;\n\t\t\t\t\t"+e.vertexShader.replace("#include <fog_vertex>","\n\t\t\t\t\t\t#include <fog_vertex>\n\t\t\t\t\t\tvTexCoords = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\t\tgl_Position = vTexCoords;\n\n\t\t\t\t\t\t// TRANSFORM AFTER TO PREVENT ISSUES:\n\t\t\t\t\t\t#ifdef USE_UV\n\t\t\t\t\t\t\tvTexCoords = vec4( uvTransform * vTexCoords.xyz, vTexCoords.w);\n\t\t\t\t\t\t#endif\n\t\t\t\t\t")}),t.wSpeed&&this.newliquid&&(s.onBeforeCompile=e=>{e.uniforms.time={value:0},e.uniforms.hght={value:t.wHeight},e.uniforms.spd={value:t.wSpeed},e.vertexShader="\n\t\t\t\t\tuniform float time;\n\t\t\t\t\tuniform float hght ;\n\t\t\t\t\tuniform float spd;\n\t\t\t\t\tattribute float count;\n\t\t\t\t\t"+e.vertexShader,e.vertexShader=e.vertexShader.replace("#include <begin_vertex>","\n\t\t\t\t\t   \n\t\t\t\t\t\tvec3 transformed = vec3(position);\n\t\t\t\t\t\n\t\t\t\t\t\tfloat freq = spd / 4.0;\n\t\t\t\t\t\tfloat currentCount = count / 5.0;\n\t\t\t\t\t\tfloat angle =  currentCount + (time * (freq));\t\t\n\t\t\t\t\t\ttransformed.z =  hght  * sin(angle);\n\t\t\t\t\t\tobjectNormal = normalize(vec3(0.0,hght * cos(angle),1.0));\n\t\t\t\t\t\tvNormal = normalMatrix * objectNormal;\n\t\t\t\t\t\t"),e.fragmentShader=e.fragmentShader.replace("#include <normal_fragment_begin>","vec3 normal =vNormal;"),_=e});var r=t.frames||0,o=Math.min(10,r),l=r>10?Math.ceil(r/10):0;r&&t.frameT&&!t.noAutoAnim&&!this.frameMats.find((e=>e.indx==n))&&this.frameMats.push({mat:s,indx:n,numX:o,numY:l,cur:0,total:r,dur:t.frameT,orgDur:t.frameT}),t.rgb&&this.rgbMats.push({mat:s,mlt:t.rgbS||.3,type:t.rgbT||0,dlt:0}),C[n]=s}return s},this.genColorCube=function(e,t,i,n,s,r){for(var o=(r=r||{}).us?"us":"ns",l=0;l<n.length;++l){for(var c=0;c<n[l].length;++c)o+=n[l][c]+"_";o+="|"}var d=R[o];if(!d){d=new a.BufferGeometry;var h=.5+(s||0);for(l=0;l<n.length;++l){var u=n[l][1],p=n[l][2]||1;if(n[l][5])h-=u;else{if(r.uvScale||r.us){r.cyl?(f=P.GEOS.generateCylinder(p,u,p,{colr:n[l][0],fAmb:n[l][4],amb:n[l][3]}),p/=2):f=P.GEOS.generateCube([1,1,1,1,1,1],p/2*e,u/2*t,p/2*i,{colr:n[l][0],fAmb:n[l][4],scale:r.uvScale||15,noAmb:r.noAmb,amb:n[l][3]}),(m=new a.Mesh(f)).scale.set(p,u,p),P.moveMesh(m,0,h-u,0)}else{var f=new a.BoxGeometry(p,u,p);P.GEOS.colorize(f,n[l][0]),m=new a.Mesh(f),P.moveMesh(m,0,h-u/2,0)}d=P.merge(d,m),h-=u}}R[o]=d}var m=new a.Mesh(d,P.getMat(r.src||"default",r));return P.scaleMesh(m,e,t,i),m};var K={};this.genLeg=function(e,t,i,s){(s=s||{}).us=s.det;var r=n.legScale,o=n.legHeight,l=null;if(s.crouch){var c=(s.texSrc||"default")+(t+"-")+i+"-"+(s.crouch||"")+"-"+(s.rgb?"rgb":"")+(s.legLen?"legLen"+s.legLen:"")+(null==s.movT?"mt":s.movT)+(null==s.movD?"md":s.movD)+(null==s.rotT?"rt":s.rotT)+(null==s.projection?"":"pj_"+s.projection)+(null==s.video?"":"v_"+s.video);if(!(l=K[c])){var d=n.legHeight/2,h=r/2,u=[.5,2],p=this.genColorCube(r,d,r,[[t,1]],0,{us:s.det,uvScale:s.uvScale});this.moveMesh(p,0,-d/2*Math.cos(u[1]),-d/2*Math.sin(u[1])),this.rotateMesh(p,0,u[1],0);var f=Math.sqrt(h*h+h*h-2*h*h*Math.cos(u[0]-u[1])),m=2*Math.sqrt(h*h-f/2*(f/2)),g=this.genColorCube(r,f,m,[[t,1]],0,{us:s.det,uvScale:s.uvScale});this.moveMesh(g,0,-d*Math.cos(u[1]),-d*Math.sin(u[1])),this.rotateMesh(g,0,(u[1]+u[0])/2,0);var v=this.genColorCube(r,d,r,[[t,.5,1,.8],[i,.5]],0,{us:s.det,uvScale:s.uvScale});this.moveMesh(v,0,-d*Math.cos(u[1])-d/2*Math.cos(u[0]),-d*Math.sin(u[1])-d/2*Math.sin(u[0])),this.rotateMesh(v,0,u[0],0);l=new a.BufferGeometry;l=this.merge(l,p),l=this.merge(l,g),l=this.merge(l,v),K[c]=l}l=a.BufferGeometryUtils.mergeVertices(l),l=new a.Mesh(l,this.getMat(s.texSrc||"default",s)),this.moveMesh(l,n.legScale/2*(e?-1:1),o-n.crouchDst+.5,0)}else l=this.genColorCube(r,o,r,[[t,s.legLen?s.legLen:.75,1],[i,s.legLen?1-s.legLen:.25,void 0,void 0,void 0,s.legLen]],-.5,s),this.moveMesh(l,n.legScale/2*(e?-1:1),o,0);return l.receiveShadow=!0,l.castShadow=this.dynamicShadows,l.name="leg",l};var X={};this.genHead=function(e,t){var i=((t=t||{}).texSrc||"default")+(t.hairCol+"-")+t.skinCol+"-"+(t.rgb?"rgb":"")+"-"+(t.noHead?"nh":"")+"-"+(t.noHair?"nhr":"")+"-"+(null==t.movT?"mt":t.movT)+(null==t.movD?"md":t.movD)+(null==t.rotT?"rt":t.rotT)+(t.projection?"pj":"")+(null==t.video?"":"v_"+t.video),s=X[i];if(!s){s=new a.BufferGeometry;var r=n.headScale;if(!t.noHead){var o=this.genColorCube(r,r,r,[[t.hairCol,.2,1,.6,void 0,!!t.noHair],[t.skinCol,.8]],0,{us:e,uvScale:t.uvScale});this.moveMesh(o,0,n.playerHeight-r/2-n.legHeight,0),s=this.merge(s,o),s=a.BufferGeometryUtils.mergeVertices(s)}X[i]=s}var l=new a.Mesh(s,this.getMat(t.texSrc||"default",t));return l.receiveShadow=!0,l.name="head",l.castShadow=this.dynamicShadows,l};var Z={};this.genBody=function(e,t){var i=((t=t||{}).texSrc||"default")+(t.shirtCol+"-")+t.pantsCol+"-"+t.hairCol+"-"+t.waistCol+"-"+t.skinCol+"-"+(t.rgb?"rgb":"")+"-"+(t.noHead?"nh":"")+"-"+(t.noHair?"nhr":"")+"-"+(t.noBody?"nb":"")+(null==t.movT?"mt":t.movT)+(null==t.movD?"md":t.movD)+(null==t.rotT?"rt":t.rotT)+(null==t.projection?"":"pj_"+t.projection)+(null==t.video?"":"v_"+t.video),s=Z[i];if(!s){s=new a.BufferGeometry;var r=n.playerHeight-n.headScale-n.legHeight,o=this.genColorCube(n.chestWidth,r,n.chestScale,[[t.shirtCol,.8,1,.8,void 0,!!t.noBody],[t.waistCol,.2,1.05]],0,{us:e,uvScale:t.uvScale});this.moveMesh(o,0,r/2,0),s=this.merge(s,o),s=a.BufferGeometryUtils.mergeVertices(s),Z[i]=s}var l=new a.Mesh(s,this.getMat(t.texSrc||"default",t));return l.receiveShadow=!0,l.name="body",l.castShadow=this.dynamicShadows,l};var J={};this.genArms=function(e,t,i,s,r){var o=((s=s||{}).texSrc||"default")+e.name+"-"+s.shirtCol+"-"+s.sleeveCol+"-"+s.skinCol+"-"+i+"-"+(t||0)+"-"+(s.rgb?"rgb":"")+(null==s.movT?"mt":s.movT)+(null==s.movD?"md":s.movD)+(null==s.rotT?"rt":s.rotT)+(s.leftHoldZ||0)+(s.armS?s.armS:"")+"-"+(s.noSleeve?1:0)+(s.leftHoldX||0)+(s.leftHoldY||0)+(s.rightHoldY||0)+(s.noRightHand?"nrh":"rh")+(null==s.projection?"":"pj_"+s.projection)+(null==s.video?"":"v_"+s.video)+(s.noLeftSleeve?"nls":"ls")+(null==s.hasWrist?"":"hw"),l=J[o];if(!l){l=new a.BufferGeometry;var c=(-n.chestWidth+n.armScale/2-n.armInset)*(i?e.holdW||.4:1),d={};if(!t||1==t){var h=this.genArm(c,n.armOff,e,!0,s.shirtCol,s.sleeveCol,s.skinCol,i,s,r);d.l={startP:h.startP,endP:h.endP,quat:h.quat},l=this.merge(l,h)}if(!t||2==t){h=this.genArm(-c,n.armOff,e,!1,s.shirtCol,s.sleeveCol,s.skinCol,i,s,r);d.r={startP:h.startP,endP:h.endP,quat:h.quat},l=this.merge(l,h)}r||(l=a.BufferGeometryUtils.mergeVertices(l)),l.tVecs=d,J[o]=l}var u=l.tVecs;return(l=new a.Mesh(l,this.getMat(s.texSrc||"default",s))).position.z+=i&&e.hDstOff||0,l.receiveShadow=!0,l.castShadow=!i&&this.highResShad,{mesh:l,vecs:u}},this.genArm=function(e,t,i,r,o,l,c,d,h,u){var p=r?h.leftHoldY||i.leftHoldY:h.rightHoldY||i.rightHoldY,f=r?h.leftHoldZ||i.leftHoldZ:h.rightHoldZ||i.rightHoldZ;f+=d&&i.hDstOff||0;var m=r?h.leftHoldX||i.leftHoldX||0:h.rightHoldX||i.rightHoldX||0,g=n.armScale*(d?.68:1)*(h.armS||1),v=Math.min(n.uArmLength+n.lArmLength-.01,s.getD3D(e,t,0,(i.xOff-m)*(r&&i.akimbo?-1:1),i.yOff+p,i.zOff-f)),y=s.getAnglesSSS(v,n.uArmLength,n.lArmLength),b=Math.PI/2;if(!d){var w=this.genColorCube(g,n.uArmLength,g,[[o,1]],0,{us:d,cyl:P.roundArms,uvScale:h.uvScale});this.moveMesh(w,0,-n.uArmLength/2*Math.cos(b),-n.uArmLength/2*Math.sin(b)),this.rotateMesh(w,0,b,0);var x=g/2,S=Math.sqrt(x*x+x*x-2*x*x*Math.cos(Math.PI+y[0]+Math.PI/2)),M=2*Math.sqrt(x*x-S/2*(S/2)),k=this.genColorCube(g,S,M,[[o,1]],0,{us:d,cyl:P.roundArms,uvScale:h.uvScale});this.moveMesh(k,0,-n.uArmLength*Math.cos(b),-n.uArmLength*Math.sin(b)),this.rotateMesh(k,0,(b+y[0])/2,0)}var _,T=this.genColorCube(g,n.lArmLength,g,[[o,.65,1,.6],[!h.noSleeve&&r&&h.noLeftSleeve?o:l,.15,h.noSleeve||r&&h.noLeftSleeve?1:1.1],[c,.2,1,.5,!0,!r&&h.noRightHand]],0,{us:d,noAmb:h.noSleeve||r&&h.noLeftSleeve,cyl:P.roundArms,uvScale:h.uvScale}),C=n.lArmLength/2;this.moveMesh(T,0,-n.uArmLength*Math.cos(b)-C*Math.cos(y[0]),-n.uArmLength*Math.sin(b)-C*Math.sin(y[0])),this.rotateMesh(T,0,y[0],0),u&&((_=this.genColorCube(.1,1,.1,[[o,.15,1.1]],-1,{us:d})).position.copy(T.position),_.rotation.copy(T.rotation));var I=new a.BufferGeometry;if(d){var A=this.genColorCube(g,20,g,[[o,1]],0,{us:d,noAmb:!0,cyl:P.roundArms,uvScale:h.uvScale});this.moveMesh(A,0,-n.uArmLength*Math.cos(b)- -10*Math.cos(y[0]),-n.uArmLength*Math.sin(b)- -10*Math.sin(y[0])),this.rotateMesh(A,0,y[0],0),I=this.merge(I,A)}else I=this.merge(I,w),I=this.merge(I,k);I=this.merge(I,T);const R=_&&_.geometry.attributes&&_.geometry.attributes.position?_.geometry.attributes.position.array.length:0,E=I.attributes&&I.attributes.position?I.attributes.position.array.length:0;if(u&&(I=this.merge(I,_)),I=new a.Mesh(I),this.moveMesh(I,e-i.xOff,t-i.yOff,-i.zOff),I.rotation.order="YXZ",I.rotation.x=-y[1]-s.getDir(0,t,i.zOff-f,i.yOff+p),I.rotation.y=s.getDir(-e,0,(r&&i.akimbo?1:-1)*(i.xOff-m),i.zOff-f)-Math.PI/2,u){I.startP=E,I.endP=E+R;const n=new a.Object3D;n.add(_),n.rotation.order="YXZ",n.rotation.x=-y[1]-s.getDir(0,t,i.zOff-f,i.yOff+p),n.rotation.y=s.getDir(-e,0,(r&&i.akimbo?1:-1)*(i.xOff-m),i.zOff-f)-Math.PI/2,I.quat=_.getWorldQuaternion(new a.Quaternion),n.clear()}return I},this.addHelperC=function(e,t,i,n,s,r,o,l){const c=new a.BoxGeometry,d=new a.MeshBasicMaterial({color:l||16711680}),h=new a.Mesh(c,d);P.moveMesh(h,e,t+s/2,i),h.rotation.y=o||0,h.scale.set(2*n,s,2*r),P.scene.add(h)},this.fakeBufferMesh=function(e,t){e.geometry=P.updateGeoFromMesh(e,!0);var i=P.meshGroup(e,t,!0);if(i){var n={data:i,_visible:!0};return Object.defineProperty(n,"visible",{get(){return this._visible||!1},set(e){return this._visible==!!e||(this._visible=!!e,P.bufferVisibility(P.scene.getObjectByName(this.data.name),this.data,this._visible)),this._visible}}),n}},this.addCube=function(e,t,i,n,s,r,o,l){var c;if((l=l||{}).noShader||!this.ShaderMesh.enabled||l.src&&!l.src.includes("default")&&!F[l.src])if(c=new a.Mesh(P.GEOS.generateCube(o,n,s,r,l)),this.moveMesh(c,e,t,i),c.rotation.set(l.yR||0,l.xR||0,l.zR||0),c.scale.set(n,s,r),this.noTex&&!l.forceTex&&(l.src="default"),l.src&&!l.noGroup){var d=P.fakeBufferMesh(c,l);if(d)return d}else P.staticRendering&&(c=c.toStatic()),this.add(c,l);else c=this.ShaderMesh.addCube(e,t,i,n,s,r,l);return c},this.createSpray=function(e){var t=new a.Mesh(new a.PlaneGeometry(1,1));return t.scale.set(9,7.2,1),t.material=P.getMat("sprays/"+(e.id||0),{local:e.local,transparent:!0,alphaTest:.2,frames:e.frames,frameT:e.frameT,centerZ:!0,side:2,video:e.video,projection:e.projection}),t},this.addSpinner=function(e,t,i,n,s,r){r=r||{},n=2*(n||0);var o=new a.Mesh(P.GEOS.generatePlane(n,n,r,e,t,i));o.material=new a.MeshBasicMaterial(r),this.moveMesh(o,e,t,i),o.rotateY(Math.PI/2-s),o.scale.set(n,n,1);var l=0,c=0;n>n?(l=1,c=n/n):n<n?(l=n/n,c=1):(l=1,c=1);var d=document.createElement("canvas");d.getContext("2d");var h=Math.max(n/7.5*265,768);return h=Math.min(h,4096),d.width=h*c,d.height=h*l,o.canvas=d,o.material.map=new a.CanvasTexture(o.canvas),o.material.vertexColors=!0,o.material.alphaTest=.1,this.scene.add(o),o},this.addPointLight=function(e,t,i,n){if(P.lighting>=2){n=n||{};var s=new a.PointLight(n.colr||"#f2f8fc",n.intensity||1,n.distance||0,n.decay||1);s.position.set(e,t,i),s.traverse((function(e){e.layers.enable(1)})),this.add(s,void 0,!0)}},this.addDirectionalLight=function(e,t,i,n,s,r,o){if(3==P.lighting){o=o||{};var l=new a.DirectionalLight(o.colr||"#f2f8fc",o.intensity||1);l.position.set(e,t,i),l.target.position.set(n,s,r),l.traverse((function(e){e.layers.enable(1)})),this.add(l,void 0,!0),this.add(l.target,void 0,!0)}},this.addSpotLight=function(e,t,i,n,r,o,l){if(P.lighting>=2){l=l||{};var c=new a.SpotLight(l.colr||"#f2f8fc",l.intensity||1,l.distance||0,s.toRad(l.angle||45),l.penumbra||0,l.decay||1);c.position.set(e,t,i),c.target.position.set(n,r,o),c.traverse((function(e){e.layers.enable(1)})),this.add(c,void 0,!0),this.add(c.target,void 0,!0)}},this.hasInitRectArea=!1,this.addRectAreaLight=function(e,t,i,n,s,r,o,l,c){if(3==P.lighting){r=r||{},this.hasInitRectArea||(this.hasInitRectArea=!0,a.RectAreaLightUniformsLib.init()),n=2*(n||0),s=2*(s||0);var d=new a.RectAreaLight(r.colr||"#f2f8fc",r.intensity||1,n,s);this.moveMesh(d,e,t,i),d.rotateY(o||0),d.rotateX(l||0),d.rotateZ(c||0),d.traverse((function(e){e.layers.enable(1)})),this.add(d,void 0,!0)}},this.addCone=function(e,t,i,n,s,r,o){if(!this.noTex){o=o||{};var l=new a.Mesh(P.GEOS.generateCone(s,o));if(l.scale.set(n/2,s,r/2),this.moveMesh(l,e,t,i),l.rotation.set(o.yR||0,o.xR||0,o.zR||0),o.src&&!o.noGroup){var c=P.fakeBufferMesh(l,o);if(c)return c}else P.staticRendering&&(l=l.toStatic()),this.add(l,o);return l}},this.addCylinder=function(e,t,i,n,s,r,o){if(!this.noTex){o=o||{};var l=Math.min(n,r)/2,c=new a.Mesh(P.GEOS.generateCylinder(l,s,l,o));if(c.scale.set(l,s,l),this.moveMesh(c,e,t,i),c.rotation.set(o.yR||0,o.xR||0,o.zR||0),o.rAnim&&this.movMeshes.push({mesh:c,tim:o.rAnim,mlt:o.rAnimM,axis:(o.rAnimA||"y").toUpperCase()}),o.src&&!o.noGroup){var d=P.fakeBufferMesh(c,o);if(d)return d}else P.staticRendering&&!o.spin&&(c=c.toStatic()),this.add(c,o);return c}},this.addSphere=function(e,t,i,n,s,r,o){o=o||{};var l=new a.Mesh(P.GEOS.generateSphere(n,s,r,o));if(this.moveMesh(l,e,t+s/2,i),l.rotation.set(o.yR||0,o.xR||0,o.zR||0),l.scale.set(n/2,s/2,r/2),o.src&&!o.noGroup){var c=P.fakeBufferMesh(l,o);if(c)return c}else P.staticRendering&&(l=l.toStatic()),this.add(l,o);return l};var Q=[];this.addSpray=function(e,t,i,r,o,l,c,d,h,u){h=h||{},k=null;for(var p=0;p<Q.length;++p)if(Q[p].sid==e){k=Q[p];break}k||(!0,(k={}).sid=e,k.mesh=new a.Mesh(S),k.mesh.scale.set(n.sprayScale,n.sprayScale,1),k.mesh.receiveShadow=!0,this.add(k.mesh,void 0,!0),Q.push(k)),k.mesh.material=this.getMat("sprays/"+(h.id||0),{local:h.local,depthWrite:!1,opacity:h.opacity,transparent:!0,frames:h.frames,frameT:h.frameT,movT:h.movT,movD:h.movD,rgb:h.rgb,rgbS:h.rgbS,rgbT:h.rgbT,sameGlow:h.sameGlow,glowText:h.glow||h.sameGlow,emissive:h.glow||h.sameGlow?"#ffffff":null,pulsT:h.pulsT,rAnim:h.rAnim,rAnimA:h.rAnimA,video:null==u?h.video:u.video,projection:null==u?h.projection:u.projection}),this.moveMesh(k.mesh,i,r,o),k.mesh.rotation.y=s.toRad(l),k.mesh.rotation.x=s.toRad(c),k.mesh.rotation.z=s.toRad(d)},this.clearSprays=function(){for(var e=0;e<Q.length;++e)Q[e]&&Q[e].mesh.material.map&&Q[e].mesh.material.map.dispose(),this.scene.remove(Q[e].mesh);Q.length=0},this.addPlane=function(e,t,i,n,s,r,o,l,c){var d;if((r=r||{}).premultipliedAlpha=!0,r.noShader||!this.ShaderMesh.enabled||r.src&&!r.src.includes("default")&&!F[r.src])if(n=2*(n||0),s=2*(s||0),d=new a.Mesh(P.GEOS.generatePlane(s,n,r,e,t,i)),r.euler&&(d.rotation.order=r.euler),this.moveMesh(d,e,t,i),d.rotateY(o||0),d.rotateX((l||0)-Math.PI/2),d.rotateZ(c||0),d.scale.set(n,s,1),this.noTex&&(r.src="default"),r.dontAdd)r.src&&(d.material=this.getMat(r.src,r));else if(r.src&&!r.noGroup){var h=P.fakeBufferMesh(d,r);if(h)return h}else P.staticRendering&&(d=d.toStatic()),this.add(d,r);else d=this.ShaderMesh.addPlane(e,t,i,n,s,r,o,l,c);return d},this.addFixedPlane=function(e,t,i,n,s,r,o,l,c){var d;if((r=r||{}).premultipliedAlpha=!0,r.noShader||!this.ShaderMesh.enabled||r.src&&!r.src.includes("default")&&!F[r.src])if(n=2*(n||0),s=2*(s||0),d=new a.Mesh(P.GEOS.generatePlane(s,n,r,e,t,i)),r.euler&&(d.rotation.order=r.euler),this.moveMesh(d,e,t,i),this.similateRot(d.quaternion,o,l,c),d.scale.set(n,s,1),this.noTex&&(r.src="default"),r.dontAdd)r.src&&(d.material=this.getMat(r.src,r));else if(r.src&&!r.noGroup){var h=P.fakeBufferMesh(d,r);if(h)return h}else P.staticRendering&&(d=d.toStatic()),this.add(d,r);else d=this.ShaderMesh.addPlane(e,t,i,n,s,r,o,l,c);return d},this.addSprite=function(e,t,i,n,s,r){(r=r||{}).premultipliedAlpha=!0,n=2*(n||0),s=2*(s||0);var o=new a.Sprite;return this.moveMesh(o,e,t,i),o.scale.set(n,s,1),this.noTex&&(r.src="default"),this.add(o,r),o};var $=new a.Object3D,ee=new a.Object3D,te=new a.Euler;ee.add($),this.similateRot=function(e,t,i,n){return $.rotation.set(0,0,0),$.position.set(0,0,0),$.rotateX(-Math.PI/2),ee.rotation.set(0,0,0),ee.position.set(0,0,0),ee.rotateX(t||0),ee.rotateY(i||0),ee.rotateZ(n||0),$.getWorldQuaternion(e),te.setFromQuaternion(e)},this.similatePosRot=function(e,t,i,n,s){$.rotation.set(0,0,0),$.position.set(0,s,0),ee.position.set(t,i,n),ee.rotation.set(0,0,0),ee.rotateX(e.rotation.x||0),ee.rotateY(e.rotation.y||0),ee.rotateZ(e.rotation.z||0),$.getWorldQuaternion(e.quaternion),$.getWorldPosition(e.position)},this.addRamp=function(e,t,i,n,s,r,o,l,c){var d;if((l=l||{}).enclose)(d=new a.Mesh(P.GEOS.generateRamps(n,s,r,l))).scale.set(l.rot?l.l:l.w,l.h,l.rot?l.w:l.l),d.rotateY(Math.PI-o),d.position.set(e,t+s/2,i);else{d=new a.Mesh(P.GEOS.generatePlane(2*r,n,l)),r*=2;var h=Math.sqrt(s*s+r*r);this.moveMesh(d,e,t+s/2,i),d.scale.set(n,h,2),d.rotateY(-Math.PI/2-o),d.rotateX(Math.asin(s/h)-Math.PI/2),d.rotateZ(c||0)}if(this.noTex&&(l.src="default"),l.src&&!l.noGroup){var u=P.fakeBufferMesh(d,l);if(u)return u}else P.staticRendering&&(d=d.toStatic()),this.add(d,l);return d};var ie=[],ne=[],se=[],ae=[];this.loadMesh=function(e,t,i,n,r,o,l,c,d){2==(e=e||{}).video&&(e.mat=a.MeshBasicMaterial),P.tmpVector3||=new a.Vector3,e.useWireframe&&(e.mat=a.MeshBasicMaterial),e.isMdl&&c&&delete e.isMdl,e.fileExt=e.fileExt||"obj";var h=this.getMat(e.src,e),u=(null==e.texVar?e.src:e.texSrc||e.src)+e.fileExt+(null==e.rAnim?"":"ra"+e.rAnim)+(null==e.rAnimA?"":"raa"+e.rAnimA)+(null==e.rAnimT?"":"rt"+e.rAnimT)+(null==e.rAnimM?"":"rm"+e.rAnimM)+(e.canDest?"cd":"")+(null==e.noFog?"":"nf")+(null==e.noTex?"":"nt"),p=ne[u]||ie[u];if(p){if(e.centerZ){p.computeBoundingBox();var f=p.boundingBox.getCenter(P.tmpVector3);l.translateZ(f.x*o)}e.useWireframe&&h&&!p.loading&&(h.wireframe=!0,h.needsUpdate=!0),d&&"function"==typeof d&&d()}else{h&&h.wireframe&&e.useWireframe&&(h.wireframe=!1),(p=new a.BufferGeometry).loading=!0,ie[u]=p;var m=null;e.asset&&(m=function(e){P.updateProgress((e.loaded/e.total*100).round(0))}),("gltf"==e.fileExt?w:"fbx"==e.fileExt?x:b).load(e.asset?s.userAssetsUrl(e.src+"."+e.fileExt):s.assetsUrl("/models/"+e.src+"."+e.fileExt,!1,e.localM),(function(t){delete p.loading,t.scene&&(t=t.scene);var i=t.children[0].geometry;if(t.children.length>1){for(var n=[],s=0;s<t.children.length;++s)if(t.children[s])if("Object3D"!=t.children[s].type)n.push(P.updateGeoFromMesh(t.children[s]));else for(var r=0;r<t.children[s].children.length;++r)t.children[s].children[r]&&t.children[s].children[r].geometry&&"Object3D"!=t.children[s].children[r].type&&n.push(P.updateGeoFromMesh(t.children[s].children[r]));i=P.GEOS.mergeGeometries(n)}else if("Object3D"==t.children[0].type&&!t.children[0].geometry&&t.children[0].children){for(n=[],s=0;s<t.children[0].children.length;++s)t.children[0].children[s]&&t.children[0].children[s].geometry&&n.push(P.updateGeoFromMesh(t.children[0].children[s]));i=P.GEOS.mergeGeometries(n)}else P.GEOS.fixBufferGeometry(i);if(e.asset&&!c&&(i=a.BufferGeometryUtils.mergeVertices(i)),e.asset||null!=e.offsetH){i.computeBoundingBox();var f=i.boundingBox.getCenter(P.tmpVector3);i.translate(0,-f.y,0)}if(p.copy(i),e.useWireframe&&h&&(h.wireframe=!0,h.needsUpdate=!0),e.uv2&&!c&&p.setAttribute("uv2",new a.BufferAttribute(p.attributes.uv.array,2)),c){if(ae[u]&&ae[u].length){var m=[];for(s=0;s<ae[u].length;++s)m.push(P.updateGeoFromMesh(ae[u][s]));m=P.GEOS.mergeGeometries(m),e.uv2&&m.setAttribute("uv2",new a.BufferAttribute(m.attributes.uv.array,2));var g=new a.Mesh(m,h);g.isModel=!0,P.add(g,e)}ae[u]&&(ae[u].length=0,ae[u].loaded=!0)}if(e.centerZ){p.computeBoundingBox();f=p.boundingBox.getCenter(P.tmpVector3);l.translateZ(f.x*o)}d&&"function"==typeof d&&d()}),m)}var g=new a.Mesh(p,h);return g.receiveShadow=!e.noShadow,g.castShadow=e.shadows,"object"==typeof r?(g.rotation.x=g.xR=r[0]||0,g.rotation.y=g.yR=r[1]||0,g.rotation.z=g.zR=r[2]||0):g.rotation.y=r||0,g.isModel=!0,g.xP=t,g.yP=i,g.zP=n,P.moveMesh(g,t,i,n),P.scaleMesh(g,o||1,o||1,o||1),null!=e.outlineMesh&&(g.outlineMesh=new a.Mesh(g.geometry,T[e.outlineMesh||0]),g.outlineMesh.position=g.position,g.outlineMesh.scale.multiplyScalar(e.outlineScale||1.025),g.add(g.outlineMesh)),(e.asset||null!=e.offsetH)&&P.similatePosRot(g,t,i,n,e.offsetH||0),v(g,e),c?ae[u]?ae[u].loaded?this.meshGroup(g,e):ae[u].push(g):ae[u]=[g]:l.add(g),e.forceRender&&(g.frustumCulled=!1,g.renderOrder=1/0),g},this.updateGeoFromMesh=function(e,t){e.updateMatrix();var i=(new a.BufferGeometry).copy(e.geometry);return i.applyMatrix4(e.matrix),t&&i.index&&(i=i.toNonIndexed()),i};var re=[];this.loadAnimMesh=function(e,t,i,n,r,o,l,c,d){(e=e||{}).fileExt=e.fileExt||"gltf";var h=null;e.asset&&(h=function(e){P.updateProgress((e.loaded/e.total*100).round(0))});var u=new a.Mesh;if(u.isModel=!0,u.receiveShadow=!e.noShadow,u.castShadow=e.shadows,"object"==typeof r?(u.rotation.x=u.xR=r[0]||0,u.rotation.y=u.yR=r[1]||0,u.rotation.z=u.zR=r[2]||0):u.rotation.y=r||0,u.xP=t,u.yP=i,u.zP=n,P.moveMesh(u,t,i,n),P.scaleMesh(u,o||1,o||1,o||1),e.forceRender&&(u.frustumCulled=!1,u.renderOrder=1/0),re[e.src+e.fileExt]){var p,f=re[e.src+e.fileExt];p="gltf"==e.fileExt||"glb"==e.fileExt?le(f):"fbx"==e.fileExt?ce(f):f;var m="fbx"==e.fileExt?p:p.scene||p.scenes[0];y(u,e,p,m),l.add(u),d&&"function"==typeof d&&d()}else("gltf"==e.fileExt||"glb"==e.fileExt?w:"fbx"==e.fileExt?x:b).load(e.asset?s.userAssetsUrl(e.src+"."+e.fileExt):s.assetsUrl("/models/"+e.src+"."+e.fileExt,!1,e.localM),(function(t){re[e.src+e.fileExt]=t;var i;i="gltf"==e.fileExt||"glb"==e.fileExt?le(t):"fbx"==e.fileExt?ce(t):t;var n="fbx"==e.fileExt?i:i.scene||i.scenes[0];y(u,e,i,n),l.add(u),d&&"function"==typeof d&&d()}),h);return u};const oe=["map","emissiveMap","metalnessMap","roughnessMap","normalMap","aoMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","clearcoatNormalMap","iridescenceMap","iridescenceThicknessMap","sheenColorMap","sheenRoughnessMap","transmissionMap","thicknessMap","specularIntensityMap","specularColorMap"],le=e=>{const t={nodes:e.nodes,animations:e.animations,scene:e.scene.clone(!0)},i={};e.scene.traverse((e=>{e.isSkinnedMesh&&(i[e.name]=e)}));const n={},s={};t.scene.traverse((e=>{e.isBone&&(n[e.name]=e),e.isSkinnedMesh&&(s[e.name]=e)}));for(let e in i){const t=i[e].skeleton,r=s[e],o=[];for(let e=0;e<t.bones.length;++e){const i=n[t.bones[e].name];o.push(i)}r.bind(new a.Skeleton(o,t.boneInverses),r.matrixWorld)}return t},ce=e=>{const t=e.clone(!0);t.animations=e.animations;const i={};e.traverse((e=>{e.isSkinnedMesh&&(i[e.name]=e)}));const n={},s={};t.traverse((e=>{e.isBone&&(n[e.name]=e),e.isSkinnedMesh&&(s[e.name]=e)}));for(let e in i){const t=i[e].skeleton,r=s[e],o=[];for(let e=0;e<t.bones.length;++e){const i=n[t.bones[e].name];o.push(i)}r.bind(new a.Skeleton(o,t.boneInverses),r.matrixWorld)}return t};this.traverseMats=function(e,t){Array.isArray(e.material)?e.material.forEach(t):t(e.material)},this.loadGeo=function(e,t){(e=e||{}).fileExt=e.fileExt||"obj";var i=ie[e.src+e.fileExt];return i?t(e,i):(i=new a.BufferGeometry,ie[e.src+e.fileExt]=i,void("gltf"==e.fileExt?w:b).load(e.asset?s.userAssetsUrl(e.src+"."+e.fileExt):s.assetsUrl("/models/"+e.src+"."+e.fileExt,!1,e.localM),(function(n){n.scene&&(n=n.scene);var s=n.children[0].geometry;if(n.children.length>1){for(var r=[],o=0;o<n.children.length;++o)if(n.children[o])if("Object3D"!=n.children[o].type)r.push(P.updateGeoFromMesh(n.children[o]));else{for(var l=[],c=0;c<n.children[o].children.length;++c)n.children[o].children[c]&&n.children[o].children[c].geometry&&"Object3D"!=n.children[o].children[c].type&&l.push(P.updateGeoFromMesh(n.children[o].children[c]));r.push(P.GEOS.mergeGeometries(l))}s=P.GEOS.mergeGeometries(r)}else if("Object3D"==n.children[0].type&&!n.children[0].geometry&&n.children[0].children){for(r=[],o=0;o<n.children[0].children.length;++o)n.children[0].children[o]&&n.children[0].children[o].geometry&&r.push(P.updateGeoFromMesh(n.children[0].children[o]));s=P.GEOS.mergeGeometries(r)}s=a.BufferGeometryUtils.mergeVertices(s),i.copy(s),t(e,i)})))},this.assetProgress=null,this.updateProgress=function(e){f||(P.assetProgress="Loading "+e+"%",e>=100&&(P.assetProgress=null))},this.loadSprite=function(e,t){var i=this.getMat(e.src,e),s=new a.Sprite(i);return s.yP=0,s.xP=0,s.zP=0,s.position.set(0,n.playerHeight/2,0),s.scale.set(n.playerHeight,n.playerHeight,1),t.add(s),s},this.clearPendingMeshes=function(){for(var e in ae)ae.hasOwnProperty(e)&&ae[e]&&(ae[e].length=0)},this.updateMesh=function(e,t,i){if(i=i||"obj",!e.toLowerCase().startsWith("event_0"))if("obj"==i){var n=b.parse(t);if(n&&n.children&&n.children[0]&&n.children[0].geometry){var s=new a.BufferGeometry;ie[e+i]=s,ne[e+i]=s,s.copy(n.children[0].geometry),s.needsUpdate=!0}}else"gltf"==i||"glb"==i?w.parse(t,"",(function(t){re[e+i]=t,t.needsUpdate=!0})):"fbx"==i&&x.parse(t,"",(function(t){re[e+i]=t,t.needsUpdate=!0}))},this.merge=function(e,t){return t.geometry=P.updateGeoFromMesh(t),P.GEOS.mergeGeometries([e,t.geometry])},this.genObj3D=function(e,t,i){var n=new a.Object3D;return this.moveMesh(n,e||0,t||0,i||0),n},this.bufferVisibility=function(e,t,i){if(e.geometry.attributes&&e.geometry.attributes.position&&e.geometry.attributes&&e.geometry.attributes.uv){var n=e.geometry.attributes.position.array,s=e.geometry.attributes.uv.array,a=e.prevPositions[t.startP]||[],r=e.prevUvs[t.startU]||[];if(i){for(o=t.startU;o<t.endU;o++)s[o]=r[o-t.startU];r.length=0;for(o=t.startP;o<t.endP;o++)n[o]=a[o-t.startP];a.length=0}else{r.length=0;for(var o=t.startU;o<t.endU;o++)r.push(s[o]),s[o]=0;a.length=0;for(var o=t.startP;o<t.endP;o++)a.push(n[o]),n[o]=0}e.prevPositions[t.startP]=a,e.prevUvs[t.startU]=r,e.geometry.attributes.position.needsUpdate=!0,e.geometry.attributes.uv.needsUpdate=!0,e.geometry.computeBoundingBox(),e.geometry.computeBoundingSphere()}},this.meshGroup=function(e,t,i){i&&t.colr&&delete t.colr;var n=s.getMeshGroupIndex(t,this.noTex);E[n]||(E[n]={},E[n].data=t,E[n].isModel=e.isModel,E[n].indx=n,E[n].list=[],E[n].currPOffset=0,E[n].currUOffset=0,E[n].name=s.randomString(32)),e.updateMatrix();var a=E[n].currPOffset,r=E[n].currUOffset,o=e.geometry.attributes&&e.geometry.attributes.position?e.geometry.attributes.position.array.length:0,l=e.geometry.attributes&&e.geometry.attributes.uv?e.geometry.attributes.uv.array.length:0;return E[n].currPOffset+=o,E[n].currUOffset+=l,E[n].list.push(e.geometry),{startP:a,startU:r,endP:a+o,endU:r+l,name:E[n].name}},this.addMeshGroups=function(){for(var e in E)if(E.hasOwnProperty(e)){var t=P.GEOS.mergeGeometries(E[e].list),i=new a.Mesh(t);P.staticRendering&&(i=i.toStatic()),i.groupSrc=E[e].data.src,i.visible=!de[i.groupSrc],i.isModel=E[e].isModel,i.indx=E[e].indx,i.prevPositions=[],i.prevUvs=[],i.name=E[e].name,this.add(i,E[e].data)}E={}},this.finalizeInstanceGroups=function(){this.ShaderMesh.enabled&&this.ShaderMesh.finalize()},this.clearInstances=function(){this.ShaderMesh.reset()};var de={};this.toggleMeshGroup=function(e,t){de[e]=!t,this.scene&&this.scene.traverse((function(i){!i||i.groupSrc!=e&&i.dSrc!=e||(i.visible=t)}))},this.add=function(e,t){t&&(e.castShadow=t.shadows,e.receiveShadow=t.shadows||t.shadowsR,e.material=t.skipMat?new a.StrippedLambertMaterial(t):this.getMat(this.noTex&&!t.forceTex?"default":t.src,t),e.dSrc=t.src,e.indx=s.getMeshGroupIndex(t,this.noTex),t.noGroup&&t.renderVisD&&this.rendDisObjs.push({dis:t.renderVisD,ms:e})),this.scene.add(e),this.updateShadowMap()};var he=[];this.remove=function(e){if(e&&(he.length=0,e.traverse((e=>{e&&e.isMesh&&he.push(e.uuid)})),he.length))for(var t=se.length-1;t>=0;--t)se[t]&&he.includes(se[t].uuid)&&se.splice(t,1);this.scene.remove(e)},this.moveMesh=function(e,t,i,n){e&&(null!=t&&(e.position.x=t),null!=i&&(e.position.y=i),null!=n&&(e.position.z=n))},this.scaleMesh=function(e,t,i,n){e.scale.set(t,i,n)},this.rotateMesh=function(e,t,i,n){e&&((t||0==t)&&(e.rotation.y=t),(i||0==i)&&(e.rotation.x=i),(n||0==n)&&(e.rotation.z=n))},this.clearGeos=function(){for(var e in P.GEOS.reset(),ie)ie[e].dispose&&ie[e].dispose();ie=[],ae=[]},this.resetNormal=function(){this.liquids.length=0,this.rendDisObjs.length=0,this.rendDisCnt=0},this.reset=function(e){try{for(var t in C)C[t].dispose&&C[t].dispose()}catch(e){}for(var t in I)I[t].dispose&&I[t].dispose();if(!e)for(var t in ne)ne[t].dispose&&ne[t].dispose();this.clearGeos(),pendingGIs={},E={},C={},I={},e||(ne=[]),e||(A={}),re=[],se.length=0,this.frameMats.length=0,this.rgbMats.length=0,this.pulsMats.length=0,this.pulsVal=0,this.liquidVal=0,this.movTextures.length=0,this.rotTextures.length=0,this.movMeshes.length=0,this.swayX=this.swayY=0,this.resetNormal()},this.disable=function(){this.reset(),this.dontRender=!0},this.updateEnvironment=function(e,t,i){if(this.lastEnvId!=t){var n=-1==t?{data:r}:-2==t?{data:i}:e.map.manager.envZones[t];if(n){n.data.shadLength=r.shadLength,n.data.shadWidth=r.shadWidth;var s,a=-1==t?o:e.mode;this.init(n.data,a,!0),this.updateShadowMap();var l=e.mode.ambInd||n.data.ambInd||1;n.data.ambIndC&&(l=n.data.ambIndC,s=!0),window.changeAmbient(l,s),this.lastEnvId=t,this.updateLightMap(n.data)}}},this.traverseBones=function(e,t){if(!e)return null;var i=null;return e.traverse((e=>{if(e&&e.isSkinnedMesh&&e.skeleton&&!i){var n=a.SkeletonUtils.getBoneByName(t,e.skeleton);n&&(i=n)}})),i},this.sceneInit=function(e,t,i){if(i||(r=e,o=t),(t&&null!=t.ambCol||e.ambient)&&(this.ambientLight=new a.AmbientLight(t&&null!=t.ambCol?t.ambCol:e.ambient,null==e.ambientI?n.ambIntensity:e.ambientI),this.ambientLight.layers.enable(1),this.ambientLight.layers.enable(2),this.ambientLight.name="ambLight",this.scene.getObjectByName("ambLight")&&this.scene.remove(this.scene.getObjectByName("ambLight")),this.scene.add(this.ambientLight)),t&&null!=t.lightCol||e.light){this.skyLight=new a.DirectionalLight(t&&null!=t.lightCol?t.lightCol:e.light,null==e.lightI?n.lightIntensity:e.lightI),this.skyLight.name="skyLight",this.skyLight.layers.enable(1),this.skyLight.layers.enable(2),this.scene.getObjectByName("skyLight")&&this.scene.remove(this.scene.getObjectByName("skyLight")),this.scene.add(this.skyLight);var s=Math.PI*((null==e.sunAngY?n.sunAngleY:e.sunAngY)/-180),l=Math.PI*((null==e.sunAngX?n.sunAngleX:e.sunAngX)/-180),c=null==e.lightD?n.lightDistance:e.lightD;this.skyLight.position.x=c*Math.cos(l),this.skyLight.position.y=c*Math.sin(l)*Math.sin(s),this.skyLight.position.z=c*Math.sin(l)*Math.cos(s),this.skyLight.castShadow=!0;var d=this.highResShad?4096:e.shadowR||n.shadowRes;this.skyLight.shadow.mapSize.width=d,this.skyLight.shadow.mapSize.height=d,this.skyLight.shadow.camera.far=e.shadowD||n.shadowDst,this.skyLight.shadow.bias=-4e-4}if(this.scene.fog=new a.Fog(t&&null!=t.fogC?t.fogC:e.fog,1,t&&null!=t.fogD?t.fogD:e.fogD),this.scene.fog.ogFar=this.scene.fog.far,this.renderer){var h=t&&null!=t.skyCol?t.skyCol:e.sky;(Reflect.getOwnPropertyDescriptor(Object.prototype,"skyCol")||Reflect.getOwnPropertyDescriptor(Object.prototype,"sky"))&&(h="#ffffff"),this.renderer.setClearColor(h)}},this.regenSky=function(e,t){var i=t&&null!=t.skyCol?t.skyCol:e.sky;(Reflect.getOwnPropertyDescriptor(Object.prototype,"skyCol")||Reflect.getOwnPropertyDescriptor(Object.prototype,"sky"))&&(i="#ffffff"),this.renderer.setClearColor(i)}}},function(e,t,i){const n=i(15),s=i(0);class a extends s.Mesh{static fromConfig(e,t){return new a(t,e.skyDomeCol0,e.skyDomeCol1,e.skyDomeCol2,e.skyDomeEmis,e.skyDomeEmisTex,e.skyDomeTex,e.skyDomeMovD,e.skyDomeMovT,e.skyDomeTexA)}constructor(e,t,i,a,r,o,l,c,d,h){let u=l?o?"#ffffff":r||void 0:void 0;o=parseInt(o||0),"#000000"!=u||o||(u=void 0);var p={src:l?h?parseInt(h||0)+"/texture":"sky_6":void 0,emissive:u,movT:null!=d&&d/1e6,movD:c,asset:!!h||void 0,vertexColors:!1};let f=new s[u?"StrippedLambertMaterial":"MeshBasicMaterial"]({color:"#ffffff",depthWrite:!1,flatShading:!1,vertexColors:!1,side:s.BackSide,transparent:!0,emissive:u});f.onBeforeCompile=e=>{e.defines?e.defines.USE_UV="":e.defines={USE_UV:""},e.uniforms.firstColor={value:new s.Color(t||n.skyDome[0])},e.uniforms.middleColor={value:new s.Color(i||n.skyDome[1])},e.uniforms.endColor={value:new s.Color(a||n.skyDome[2])},e.fragmentShader="\n\t\t\t\tvarying vec2 vUv_kr;\n\t\t\t\tuniform vec3 firstColor;\n\t\t\t\tuniform vec3 middleColor;\n\t\t\t\tuniform vec3 endColor;\n\t\t\t\tvec2 RES = vec2(512,512);\n\t\t\t\tvec3 getGradient(vec2 coord) {\n\t\t\t\t\tvec2 xy = coord.yx / RES;\n\t\t\t\t\tfloat h = 0.5; // adjust position of middleColor\n\t\t\t\t\tvec3 col = mix(mix(endColor, middleColor, xy.x/h), mix(middleColor, firstColor, (xy.x - h)/(1.0 - h)), step(h, xy.x));\n\n\t\t\t\t\treturn col;\n\t\t\t\t}\n\t\t\t"+e.fragmentShader.replace("#include <dithering_fragment>","\n\t\t\t\t#include <dithering_fragment>\n\t\t\t\tgl_FragColor.rgb *= getGradient(RES*vUv_kr);\n\t\t\t"),e.vertexShader="\n\t\t\t\tvarying vec2 vUv_kr;\n\t\t\t"+e.vertexShader.replace("#include <fog_vertex>","\n\t\t\t\t#include <fog_vertex>\n\t\t\t\tvUv_kr=uv;\n\t\t\t")},p.src&&(e.loadTexture(f,p.src,p),u&&o?e.loadTexture(f,o+"/texture",p,"emissiveMap"):u&&e.loadTexture(f,p.src+"_e",p,"emissiveMap"));let m=new s.SphereGeometry(50,32,16);m.computeBoundingBox(),m.computeBoundingSphere(),m.computeVertexNormals(!0),super(m,f),this.doubleSided=!1}}e.exports=a},function(e,t,i){const n=i(0);let{Water:s}=i(138);var a=new n.TextureLoader;const r=i(1);var o=[32,64,128,256,1024,2048];class l extends n.Object3D{static fromConfig(e,t){return new l(t,e.ocCol,e.ocOpac,e.ocDist,e.ocSpd,e.ocYOff,e.ocRefRes,e.ocW,e.ocL)}constructor(e,t,i,l,c,d,h,u,p){super(),this.col=r.isHexColor(t)?t:"#001e0f",this.opac=r.limitMM(i,0,1),this.dist=r.limitMM(l,0,10),this.speed=r.limitMM(c,.1,5),this.yOff=r.limitMM(d,-1e3,1e3),this.refRes=o[r.limitMM(e.reflectionQuality||h,1,6)-1],this._width=r.limitMM(u,100,2e4),this._length=r.limitMM(p,100,2e4);let f=new n.PlaneGeometry(this._width,this._length);this.baseMesh=new s(f,{textureWidth:this.refRes,textureHeight:this.refRes,waterNormals:a.load(r.assetsUrl("/textures/water_0.png"),(function(e){e.wrapS=e.wrapT=n.RepeatWrapping})),alpha:i,sunDirection:e.skyLight?e.skyLight.position.clone().normalize():new n.Vector3,sunColor:e.skyLight?e.skyLight.color.getHex():16777215,waterColor:this.col,distortionScale:this.dist,fog:!0}),this.baseMesh.rotation.x=-Math.PI/2,this.baseMesh.position.y=d,this.baseMesh.material.opacity=i,this.baseMesh.material.transparent=1!=i,this.add(this.baseMesh)}update(e){this.baseMesh.material.uniforms.time.value+=e/1e3*this.speed}}l.CONFIG_PROPS=["ocCol","ocOpac","ocDist","ocSpd","ocYOff","ocRefRes","ocW","ocL"],e.exports=l},function(e,t,i){const n=i(4);e.exports=function(){this.locale="en",this.defaultLocale="en",this.supported=Object.keys(n.langNames),this.translations={},this.parseText=function(e){var t=[];return e.split("\n").filter((e=>e)).forEach((e=>{var i=e.split(" ");t[i[0]]=i.slice(1).join(" ")})),t},this.translations.en=this.parseText(i(129)),this.getTranslations=function(e){if(!this.translations[e]){const t=new XMLHttpRequest;t.open("GET","i18n/"+e+".js?v=Mpyh8",!1),t.send(null),200===t.status&&(this.translations[e]=this.parseText(t.responseText))}},this.saveLocale=function(){currentStorage.setItem("krk_lang",this.locale||this.defaultLocale)},this.setLocale=function(e){this.supported.indexOf(e)>-1&&(this.locale=e),this.saveLocale()},this.setLocaleFromStorage=function(){"undefined"!=typeof Storage&&this.setLocale(currentStorage.getItem("krk_lang"))},this.setLocaleFromStorage(),this.encode=function(e){for(var t=[],i=e.length-1;i>=0;i--)t.unshift(["&#",e[i].charCodeAt(),";"].join(""));return t.join("")},this.get=function(e){this.getTranslations(this.locale||this.defaultLocale);let t=this.translations[this.locale][e]||this.translations[this.defaultLocale][e]||"UNLOCALIZED STRING";return t=this.replacePlaceholders(t,[...arguments].slice(1)),t},this.t=this.get,this.has=function(e){this.getTranslations(this.locale||this.defaultLocale);let t=this.translations[this.locale][e]||this.translations[this.defaultLocale][e]||!1;return t&&=this.replacePlaceholders(t,[...arguments].slice(1)),t},this.replacePlaceholders=function(e,t){return e.replace(/\{(\d)\}/gm,((e,i)=>null==t[i||0]?"":t[i||0]))},this.h=this.has}},function(e,t){e.exports="\nmenu.btn.ranked Ranked\nmenu.btn.shop Shop\nmenu.btn.social Hub\nmenu.btn.maps Games\nmenu.btn.mods Mods\nmenu.btn.settings Settings\nmenu.btn.networkQuality Network Quality\nmenu.btn.customize Customize\nmenu.btn.bookmark Bookmark\nmenu.btn.bookmark.bubble Tap to pin the game\nmenu.btn.invite Invite\nmenu.btn.invite.clicked Copied\nmenu.btn.join Join\nmenu.btn.host Host Game\nmenu.btn.browser Servers\nmenu.btn.play.mobile Play Krunker\nmenu.btn.spectate.mobile Spectate\nmenu.btn.backMenu.mobile Back to menu\nmenu.btn.esports Esports\ngeneric.wait Please wait...\ngeneric.loading LOADING...\ngeneric.loading.simple Loading\ngeneric.hosting Hosting\ngeneric.hosting.noGames No Games found\ngeneric.none None\ngeneric.connecting CONNECTING...\ngeneric.select Select\ngeneric.delete Delete\ngeneric.save Save\ngeneric.load Load\ngeneric.search Search\ngeneric.leave Leave\ngeneric.default Default\ngeneric.submit Submit\ngeneric.ok OK\ngeneric.okay Okay\ngeneric.useNow Use now!\ngeneric.awesome Awesome!\ngeneric.nice Nice!\ngeneric.usenow Use Now!\ngeneric.cancel Cancel\ngeneric.close Close\ngeneric.create Create\ngeneric.custom Custom\ngeneric.random Random\ngeneric.failed Failed\ngeneric.error Error\ngeneric.unknown Unknown\ngeneric.success Success!\ngeneric.name Name\ngeneric.level Level\ngeneric.score Score\ngeneric.weapon Weapon\ngeneric.off Off\ngeneric.defeat DEFEAT\ngeneric.victory VICTORY\ngeneric.matchover MATCH OVER\ngeneric.matchaband MATCH ABANDONED\ngeneric.draw DRAW\ngeneric.follow Follow\ngeneric.unfollow Unfollow\ngeneric.followers Followers\ngeneric.following following\ngeneric.games Games\ngeneric.wins Wins\ngeneric.lose Losses\ngeneric.clan Clan\ngeneric.games.played Games Played\ngeneric.games.won Games Won\ngeneric.games.lost Games Lost\ngeneric.timep Time Played\ngeneric.kills Kills\ngeneric.deaths Deaths\ngeneric.kdr KDR\ngeneric.spk SPK\ngeneric.rank Rank\ngeneric.winLose.abreviation W/L\ngeneric.time Time\ngeneric.next Next\ngeneric.logout Logout\ngeneric.logout.sessions Logout of all Sessions\ngeneric.logout.question Logout from this account?\ngeneric.username Enter Username\ngeneric.password Enter Password\ngeneric.register Register\ngeneric.registering Registering\ngeneric.login Login\ngeneric.login.proccessing Logging In\ngeneric.login.alreadyLoggedIn Account already being used somewhere else. Please close other ongoing sessions and try again.\ngeneric.login.autologinFail Unable to login to your account.\ngeneric.login.autologinFail.actionText Try again\ngeneric.new.username New username\ngeneric.new.password New password\ngeneric.new.password.confirm Confirm new password\ngeneric.old.password Old Password\ngeneric.accuracy Accuracy\ngeneric.input.helper Type here\ngeneric.tips.blocked Krunker.io Blocked? Use our official proxy to bypass! browserfps.com\ngeneric.tips.customGames Play 1000s of Custom Games with your friends no matter where you are or what device you're on\ngeneric.tips.enjoy There are several ways to enjoy Krunker: Steam Client, Mobile Version, Web Browser\ngeneric.tips.educational Krunker.io is the #1 educational website to use during your lunch break!\ngeneric.tips.customize Krunker allows you to customize almost every aspect of the game to your liking. Be sure to try some Mods!\ngeneric.tips.calls The Krunker Police Department has responded to over 500,000 calls! <span style='font-size:35px;'>&#128110;</span>\ngeneric.tips.birthday Krunker's birthday is May 20th, 2018!\ngeneric.tips.level You must be level 20 or above to access the market and trading features\ngeneric.tips.shoulder Press [5] to hide the game when someone is looking over your shoulder <span style='font-size:35px;'>&#128521;</span>\ngeneric.tips.krunkScript Krunker features its own unique programming language called KrunkScript\ngeneric.tips.friends Share your link with your friends or viewers to instantly invite them to your game!\ngeneric.tips.users Krunker has reached over 25,000,000 registered users!\ngeneric.tips.settings Krunker has over 150 settings to help you customize your experience\ngeneric.tips.developers Over 750,000 USD has been paid out to map/game developers so far!\ngeneric.tips.rewards Check-in every day to claim daily rewards and complete unique challenges!\ngeneric.tips.privateMessages Follow someone back to join their games through the friends tab & send private messages.\ngeneric.tips.deputy To become a KPD officer, you must complete the deputy program <span style='font-size:35px;'>&#128110;</span>\ngeneric.tips.performance Poor performance? Adjust your settings in the top right\ngeneric.tips.secretClass There are two secret classes only available in custom games\ngeneric.tips.challengeMode You can use challenge mode at level 30 to gain more KR per game\ngeneric.tips.again U again?\ngeneric.tips.toSpin To spin or not to spin? That is the question\ngeneric.tips.checkShop Dont forget to check out the shop for spins\ngeneric.tips.ufoBurg Why is there a UFO above Burg? No idea...\ngeneric.tips.birdPlaneNuke Look up in the sky. Is it a bird? Is it a plane? No, its a nuke!\ngeneric.tips.topCitadel I wonder what at the top of the Citadel tower?\ngeneric.tips.pause Just pause the game\ngeneric.tips.tombCurse The tomb on Oasis holds a terrible curse, try not to disturb it\ngeneric.tips.changeStreak You can change your streak reward in the class settings\ngeneric.tips.oasisWater Despite its name, Oasis has very little water\ngeneric.tips.masterySkin After reaching level 100 on a class, you can buy a mastery skin for 10,000kr\ngeneric.tips.upDown What goes up must come down. Try throwing a knife\ngeneric.tips.addFriend Did you know you can add friends on Krunker? Give them a follow and join them anytime\ngeneric.tips.redCarLights To the owner of the red car in Krunk_Plaza: you left your lights on\ngeneric.tips.nose Every class had a nose. Someone took them\ngeneric.tips.uwu UwU\ngeneric.tips.gameFroze Game froze? Try F5 to reload\ngeneric.tips.customScope You can make your own custom sniper scope or crosshair!\ngeneric.tips.officialClient There is an official Krunker client you can use for smoother gameplay!\ngeneric.tips.krunkerClips Submit your best clips in the Krunker Bunker Discord server or use #KrunkerClips to be featured!\ngeneric.tips.shotgunOP Fun fact: The shotgun is the most powerful weapon on close range\ngeneric.tips.throwKnife You can throw your knife by holding right click when having your knife in hand\ngeneric.tips.enemyClose When an enemy is very close to you, pull out your melee weapon!\ngeneric.tips.krunkPlaza The Krunk Plaza is the best place to trade with people!\ngeneric.tips.premium Purchase Krunker Premium to take your customization to the next level!\ngeneric.tips.kb Join Krunkers official Discord Server to get info about new updates and socialize with the community!\ngeneric.tips.afk Being inactive in a server for too long will cause you to get kicked\ngeneric.tips.supportEmail Need Help? Contact our support email: support_krunker_io@frvr.com\ngeneric.tips.clearCache Game not loading? Try refreshing and clearing cache\ngeneric.tips.twitter Checkout @krunkerio on Twitter for updates, giveaways, and more!\ngeneric.tips.hopping Hopping lobbies, again?\ngeneric.tips.roundedArms Dont enable rounded arms in the settings...\ngeneric.tips.wb Welcome back. We missed you\ngeneric.tips.goodOlDays Remember the Good Ol Days?\ngeneric.tips.creatorCode Make sure to use a creator code when buying KR!\ngeneric.tips.joeParked Legend says that Joe parked the Littletown truck\ngeneric.tips.subzeroNuke How do you stay warm on Subzero? You nuke it\ngeneric.tips.graphicsTablet Try playing Krunker on your graphics tablet for the ultimate challenge\ngeneric.tips.splashing No splashing\ngeneric.tips.keunler Keunler\ngeneric.tips.gitGud Git gud\ngeneric.tips.dispatched KPD units have been dispatched!\ngeneric.tips.vertigo Vertigo is the rarest unobtainable in the game\ngeneric.tips.yell To begin game, verify by yelling your username 3 times\ngeneric.tips.soundsOn Playing Krunker with sounds on will give you some advantages\ngeneric.tips.australia Oi mate, this game was made in Australia\ngeneric.tips.throwFists Fists do as much damage as knives do, but youre gonna have a hard time trying to throw your fists\ngeneric.tips.blackMarketReq Check the requirements before purchasing something from the black market\ngeneric.tips.throwKnifeDmg Throwing a fully charged knife can eliminate any class\ngeneric.tips.quickscope Krunker was originally called Quickscope.io\ngeneric.tips.changeSkin You can easily switch weapons and skins during a match. Click on the customize button in the main menu!\ngeneric.tips.extraKR Do you need some extra KR? Complete challenges to get awesome rewards including KR, junk and skins!\ngeneric.tips.beg Verified players will give out free KR upon request!\ngeneric.tips.kpdWatching The KPD is watching you\ngeneric.tips.soon Soon\ngeneric.tips.noSniping Sniper, no Sniping!\ngeneric.tips.junkCollectibles Junk and Collectibles can be found all over the maps\ngeneric.tips.clickHeads Click on some heads\ngeneric.tips.vertix From the makers of vertix.io!\ngeneric.tips.spawnPoints Memorize the spawn points!\ngeneric.tips.littletownNV What happens in Littletown, stays in Littletown\ngeneric.tips.sniff Scratch-n-sniff version currently in development\ngeneric.tips.vegan Now with Vegan and Gluten-free alternatives\ngeneric.tips.vitaminK Not a sufficient source of Vitamin K\ngeneric.tips.trueStory Based on a true story\ngeneric.tips.doctor Ask your doctor if Krunker is right for you\ngeneric.tips.krunami Up, up, down, down, left, right, left, right, B, A, Start\ngeneric.tips.tongueFrostbite Do not stick your tongue on Frostbite, it will not come off\ngeneric.tips.dentists 9/10 dentists recommend\ngeneric.tips.krunkd ITS TIME TO GET KRUNKD!\ngeneric.tips.updateChair If your game is stuck updating, be sure to check if your gaming chair is still plugged in\ngeneric.tips.problemsNuke I got 99 problems but a nuke aint one\ngeneric.tips.wisely Spend your Krunkies wisely\ngeneric.tips.changeUser Premium allows you to change your in-game name + much more!\ngeneric.tips.abandonMatch Leaving a match before its over will result in a loss of all progress made that match!\ngeneric.tips.currentSeason Krunker is currently on Season 7\ngeneric.tips.youtube Krunker has a YouTube channel\ngeneric.tips.warmFingers Intense game loading warm up your fingers while you wait\ngeneric.tips.verified Get verified by contributing to the community\ngeneric.tips.jumpNcrouch jumpNcrouch, jumpNcrouch, and dont forget to jumpNcrouch\ngeneric.tips.taxes Ever wonder what Krunker does with our KR taxes?\ngeneric.tips.krunkitis Krunkitis is thought to be fully eradicated...\ngeneric.tips.rolled Never gonna give you up\ngeneric.tips.vc Press V in-game to use voice chat\ngeneric.tips.supportPassword Contact support if you lost your password\ngeneric.tips.joy :joy:\ngeneric.tips.guestZero Has anyone seen guest_0?\ngeneric.tips.crickets *Crickets*\ngeneric.tips.newClass Check out the new Infiltrator class\ngeneric.tips.keepKrunking Must keep Krunking...\ngeneric.tips.forbiddenError ERROR 403: Secret loading text forbidden\ngeneric.tips.noAim No aim, no brain, must be a shotgun main - Sun Tzu\ngeneric.tips.slidehopIrl Slidehopping in real life is not recommended\ngeneric.tips.useShotty Having trouble with an opponent? Switch to shotgun\ngeneric.tips.teleporting Teleporting to a new lobby\ngeneric.tips.rubberband Rubberbanding? Make sure youre playing on a region nearest you.\ngeneric.tips.killstreak Get a 25 killstreak to call in a nuke\ngeneric.tips.noKr No Krunkies?\ngeneric.tips.practice Practice makes perfect\ngeneric.tips.useMods Ever wondered how to make krunker look different? Use mods!\ngeneric.tips.likeAndSub Like and subscribe!\ngeneric.tips.guestKr If you ever feel useless, remember guests can claim kr packages\ngeneric.tips.kanjiWalls There are invisible walls preventing you from falling in Kanji, try it out!\ngeneric.tips.krKrunkies KR is short for Krunkies, the in-game currency\ngeneric.tips.warranty We have been trying to reach you about your KRs extended warranty\ngeneric.tips.infoTipBottom There is informational tips at the bottom of the loading screen, like this one\ngeneric.tips.yourAd Your Ad Here\ngeneric.tips.vending The vending machines on Kanji dont work will NOT dispense Krum juice...\ngeneric.tips.firstVideo The first Krunker video ever uploaded to YouTube was on June 14th, 2018\ngeneric.tips.anonymous Show yourself, Anonymous_1!\ngeneric.tips.errorMissing ERROR 404: Loading text not found\ngeneric.tips.ifykyk 525 59961 1659 - If you know, you know.\ngeneric.tips.checkTrades Check trades :nerd:\ngeneric.tips.uniqueMoement Krunkers unique movement mechanics are important to dominate the battlefield, learn the movement and nukes will follow\ngeneric.tips.bullseyes Get 10,000 bullseyes to unlock a secret melee skin\ngeneric.tips.binary Watching 1s and 0s roll by...\ngeneric.tips.inset [Insert 5 KR to play]\ngeneric.tips.shotgunRange Dont underestimate the shotguns range\ngeneric.tips.register Register an account and level up to access all of krunkers features\ngeneric.tips.frvr FRVR forever!\ngeneric.tips.noScope No scope!\ngeneric.tips.grassPng grass.png loading...\ngeneric.tips.eatRepeat Eat, Sleep, Krunk, Repeat\ngeneric.tips.krumJuice Dont drink too much Krum juice, or you will end up like Captain Krunk\ngeneric.tips.oldestSkin The oldest weapon skin is the Arctic Hunt Sniper\ngeneric.tips.inputFailed Loading text failed 3\ngeneric.tips.modsTab You should check out the Mods tab, there are plenty of community made mods that could improve your experience!\ngeneric.tips.subzeroSkip You can skip the Subzero parkour with ~570 speed\ngeneric.battlepass.header Battle Pass\ngeneric.rewards.header Rewards\ngeneric.challenges.header Challenges\ngeneric.insertCodeBelow Insert code below\ngeneric.pasteHere Paste here\nplayer.waiting waiting for players\nplayer.died You died\nplayer.killed Killed By\nplayer.killstreak {0} on a {1} Kill Streak\nplayer.inactive Kicked for inactivity\nplayer.disconnect DISCONNECTED\nplayer.mobileOnly Mobile-only server.\ntimer.end Next Round in {0}\nleaderboard.empty Empty Lobby\npopup.checkpoint Checkpoint!\napp.play CLICK TO PLAY\napp.spectate CLICK TO SPECTATE\napp.play.mobile TAP TO PLAY\napp.spectate.mobile TAP TO SPECTATE\napp.play.controller PRESS START\napp.spectate.controller START to SPECTATE\napp.play.customMap Play\napp.play.challengeFriend Challenge a friend\npurchase.error Error occurred\npurchase.error.click click here</a> and try again!\npurchase.error.limit You may have exceeded your daily transaction limit\nsettings.reset Reset\nsettings.reset.confirm Are you sure you want to reset all your settings?\nsettings.import Import\nsettings.export Export\nsettings.none No settings found\nsettings.backup Backup Settings\nsettings.controls.change Keybinds\nsettings.controls.press Press any Key\nsettings.controls.leaderboard InGame Leaderboard Trigger Type\nsettings.controls.voicechat Voicechat Trigger Type\nsettings.local.header Localization <span id=\"requiresRestart\"><span style=\"color: #eb5656\">*</span> requires restart</span>\nsettings.local.region Default Region\nsettings.local.lang Language\nsettings.network.header Network\nsettings.network.netRerouting Auto Routing (Affects Ping)\nsettings.network.netRate Network Rate (Hz)\nsettings.network.lagComp Lag Compensation\nsettings.network.optNet Optimized Networking\nsettings.popup.header Popups\nsettings.experimental.header Experimental\nsettings.experimental.holiday Holiday Effects\nsettings.experimental.rawMouse Raw Mouse Input\nsettings.experimental.aimFreezeFix Aim Freeze Fix\nsettings.experimental.mouseFlickFix Mouse Flick Fix\nsettings.experimental.shaderRendering Instance Rendering\nsettings.experimental.mouseAccel Mouse Acceleration\nsettings.experimental.tbInterp TB Interpolation\nsettings.client.header Client\nsettings.client.unlimitedFrames Unlimited FPS\nsettings.client.gameCap Game Capture\nsettings.client.experimental Experimental Features\nsettings.client.discordRPC Discord RPC\nsettings.client.resourceSwapper Resource Swapper\nsettings.client.clearCache Clear Cache\nsettings.client.resetSettings Reset Client Settings\nsettings.client.acceleratedCanvas Accelerated Canvas\nsettings.client.angleBackend ANGLE Graphics Backend\nsettings.client.colorProfile Color Profile\nsettings.client.resourcePacks Resource Packs\nsettings.kpd.header KPD\nsettings.kpd.vision KPD Vision\nsettings.kpd.visionCol KPD Vision\nsettings.dev.header Developer\nsettings.dev.forceUpdate Force Update Skins\nsettings.dev.forceRegen Always Regenerate Player\nsettings.dev.extraBan Extra Ban Info\nsettings.chat.header Chat\nsettings.chat.chat Show Chat Box\nsettings.chat.chat.all Always\nsettings.chat.chat.focus While Focused\nsettings.chat.messages Show Player Messages\nsettings.chat.unboxings Show Unboxings\nsettings.chat.chatOp Chat Opacity\nsettings.chat.chatBGOp Chat BG Opacity\nsettings.chat.chatHeight Chat Height\nsettings.chat.chatTimer Chat Timer (s)\nsettings.chat.chatTextOutline Chat Text Outline\nsettings.chat.chatFilter Profanity Filter\nsettings.display.quality.header Quality\nsettings.other.locale.header Locale\nsettings.game.controls.header Controls\nsettings.game.view.header View\nsettings.quality.header Performance\nsettings.quality.updRate Frame Cap\nsettings.quality.rendDst Render Distance\nsettings.quality.res Resolution\nsettings.quality.part Particles\nsettings.quality.mapDet Map Details\nsettings.quality.noTex No Textures\nsettings.quality.partdist Particle Distance\nsettings.quality.renderdist Render Distance\nsettings.quality.reflection Reflection Quality\nsettings.quality.antiAlias Antialiasing\nsettings.quality.shadows Shadows\nsettings.quality.softShad Soft Shadows\nsettings.quality.highResShad High-Res Shadows\nsettings.quality.shadowsDynamic Dynamic Shadows\nsettings.quality.trails Bullet Trails\nsettings.quality.yourTrails Your Trails\nsettings.quality.mflash Show Muzzle Flash\nsettings.quality.bulletC Show Bullet Casings\nsettings.quality.impacts Show Bullet Impact Holes\nsettings.quality.flap Show Sniper Flap\nsettings.quality.lowSpec Low Spec\nsettings.quality.ambient Ambient Shading\nsettings.quality.ambientOld Old Shading (When Possible)\nsettings.quality.textureAnim Texture Animations\nsettings.quality.objectAnim Object Animations\nsettings.quality.screenShake Screen Shake\nsettings.quality.weaponShine Weapons Shine\nsettings.quality.rendGamma Gamma\nsettings.quality.lighting Lighting\nsettings.quality.showExplo Show Explosions\nsettings.quality.aspectRatio Aspect Ratio\nsettings.post.header Post Processing\nsettings.post.post Post Processing\nsettings.post.bloom Bloom\nsettings.post.bloomThreshold Bloom Threshold\nsettings.post.bloomStrength Bloom Strength\nsettings.post.bloomRadius Bloom Radius\nsettings.post.ssao SSAO\nsettings.post.ssaoRadius SSAO Radius\nsettings.interface.hitInd Show Hit Indicators\nsettings.interface.hitColor Hit Indicator Color\nsettings.interface.deathMarkers Show Death Markers\nsettings.interface.deathMarkersAds Death Marker ADS Opacity\nsettings.interface.deathMarkersDur Death Marker Duration (s)\nsettings.interface.dmg Show Damage\nsettings.interface.dmgType Show Damage\nsettings.interface.dmgType.default Rounded\nsettings.interface.dmgType.float Float\nsettings.interface.dmgCol Damage Color\nsettings.interface.critCol Crit Color\nsettings.interface.header Interface\nsettings.interface.scale UI Scale\nsettings.interface.theme Game Theme\nsettings.interface.ui Show UI\nsettings.interface.scoreboard Use Old Scoreboard\nsettings.interface.oldBrowser Use Old Browser\nsettings.interface.rarityanim Disable Rarity Animations\nsettings.interface.showPfp Show Profile Pictures\nsettings.interface.showTradeMsg Show Trade Messages\nsettings.interface.hideNonTrade Hide Non-Tradable Skins\nsettings.spectating.header Spectating\nsettings.spectating.specMiniMap Minimap\nsettings.spectating.specMiniMapObjs Minimap Objects\nsettings.spectating.specMiniMapPlayer Minimap Moves with Player\nsettings.spectating.specMiniMapRotate Minimap Rotates with Player\nsettings.minimap.header Minimap (Radar)\nsettings.minimap.show Show Minimap\nsettings.minimap.scale Minimap Scale\nsettings.minimap.zoom Minimap Zoom\nsettings.minimap.scale.hud Minimap Hud Scale\nsettings.minimap.centered Centered on Player\nsettings.minimap.rotate Rotate on Centered Player\nsettings.interface.hp Dynamic HP Bars\nsettings.interface.dmgScale Damage Scale\nsettings.interface.killf Show Kill Feed\nsettings.interface.ping Show Ping\nsettings.network.net-stats Show Network Stats\nsettings.interface.fps Show FPS\nsettings.interface.fps.rate FPS Update Rate (ms)\nsettings.interface.deaths Show Death Counter\nsettings.interface.kd Show K/D Counter\nsettings.interface.kills Show Kill Counter\nsettings.interface.streak Show Streak Counter\nsettings.interface.score Show Score Counter\nsettings.interface.spectators Show Spectator Counter\nsettings.interface.speed Show Movement Speed\nsettings.interface.speedOffX Speed X Offset\nsettings.interface.speedOffY Speed Y Offset\nsettings.interface.speedOpacity Speed Opacity\nsettings.interface.speedScale Speed Scale\nsettings.interface.speedColor Speed Color (Current)\nsettings.interface.speedColorMax Speed Color (Max)\nsettings.interface.hideNames Nametag Display\nsettings.interface.hideNames.team Team Only\nsettings.interface.hideNames.enemy Enemy Only\nsettings.interface.hideNames.all Everyone\nsettings.interface.nametagStyle Nametag Style\nsettings.interface.nametagOpac Nametag Opacity\nsettings.interface.nametagScale Nametag Scale\nsettings.interface.nametagStyle.health Health Only\nsettings.interface.nametagStyle.name Name Only\nsettings.interface.nametagStyle.nameLvl Name & Level Only\nsettings.interface.nametagStyle.all Default\nsettings.interface.nametagStyle.simple Simple\nsettings.interface.healthNum Nametag Health Number\nsettings.interface.healthColT Nametag Health Color Team\nsettings.interface.healthColE Nametag Health Color Enemy\nsettings.interface.xpBarType XP Bar Type\nsettings.interface.xpBarCol XP Bar Color\nsettings.interface.xpBarCol2 XP Bar Color 2\nsettings.interface.xpBarOpac XP Bar Opacity\nsettings.interface.adsObjOpac ADS Objective Opacity\nsettings.interface.objOpac Objective Opacity\nsettings.medals.header Medals\nsettings.medals.show Show Medals\nsettings.medals.classic Classic Medals\nsettings.medals.sound Play Medal Sounds\nsettings.medals.scale Medal Scale\nsettings.medals.xOff Medal X Offset\nsettings.medals.yOff Medal Y Offset\nsettings.medals.saturation Medal Saturation\nsettings.medals.hue Medal Color Hue\nsettings.crosshair.header Crosshair\nsettings.crosshair.type Type\nsettings.crosshair.type.1 Dynamic\nsettings.crosshair.type.2 Shapes\nsettings.crosshair.type.3 Layered\nsettings.crosshair.type.4 Image\nsettings.crosshair.type.5 Precision\nsettings.crosshair.style Style\nsettings.crosshair.style.0 Cross\nsettings.crosshair.style.1 Hollow Circle\nsettings.crosshair.style.2 Solid Circle\nsettings.crosshair.style.3 Hollow Square\nsettings.crosshair.style.4 Solid Square\nsettings.crosshair.image Image\nsettings.crosshair.image.paste Crosshair Image\nsettings.crosshair.image.width Image Width\nsettings.crosshair.image.height Image Height\nsettings.crosshair.always Always Show\nsettings.crosshair.color Color\nsettings.crosshair.shadow.color Shadow Color\nsettings.crosshair.shadow.thickness Shadow Thickness\nsettings.crosshair.size Size\nsettings.crosshair.thickness Thickness\nsettings.crosshair.gap Gap\nsettings.crosshair.dot Dot\nsettings.crosshair.opacity.use Use Custom Opacity\nsettings.crosshair.opacity.custom Custom Opacity\nsettings.crosshairm.header Crosshair (Throwing)\nsettings.crosshairm.type Type\nsettings.crosshairm.type.1 Shapes\nsettings.crosshairm.type.2 Image\nsettings.crosshairm.type.3 Precision\nsettings.crosshairm.style Style\nsettings.crosshairm.style.0 Cross\nsettings.crosshairm.style.1 Hollow Circle\nsettings.crosshairm.style.2 Solid Circle\nsettings.crosshairm.style.3 Hollow Square\nsettings.crosshairm.style.4 Solid Square\nsettings.crosshairm.image Image\nsettings.crosshairm.image.paste Crosshair Image\nsettings.crosshairm.image.width Image Width\nsettings.crosshairm.image.height Image Height\nsettings.crosshairm.always Always Show\nsettings.crosshairm.color Color\nsettings.crosshairm.shadow.color Shadow Color\nsettings.crosshairm.shadow.thickness Shadow Thickness\nsettings.crosshairm.size Size\nsettings.crosshairm.thickness Thickness\nsettings.crosshairm.gap Gap\nsettings.crosshairm.dot Dot\nsettings.crosshairm.opacity.use Use Custom Opacity\nsettings.crosshairm.opacity.custom Custom Opacity\nsettings.hitmarker.header Hitmarker\nsettings.hitmarker.color Color\nsettings.hitmarker.kcolor Kill Color\nsettings.hitmarker.thickness Thickness\nsettings.hitmarker.opacity Opacity\nsettings.hitmarker.leng Length\nsettings.hitmarker.spacing Spacing\nsettings.hitmarker.animD Anim Size\nsettings.hitmarker.animS Anim Speed\nsettings.hitmarker.hitm Show\nsettings.hitmarker.hitmFad Fade Speed\nsettings.hitmarker.custom Hitmarker Image\nsettings.hitmarker.custom.paste Hitmarker Image URL\nsettings.onKillS.style.0 Default\nsettings.onKillS.style.1 Reduce Resolution\nsettings.onKillS.style.2 Reduce FOV\nsettings.onKillS.style.3 Increase FOV\nsettings.serverb.header Server Browser & Matchmaking\nsettings.serverb.oldBrowser Legacy Browser\nsettings.serverb.defaultRegionOnly Default Region Only\nsettings.serverb.groupregion Use Grouped Region\nsettings.gameprivacy.header Gameplay Privacy\nsettings.gameprivacy.streamer Streamer Mode\nsettings.gameprivacy.anon Anonymous Mode\nsettings.gameprivacy.hideGameTitle Hide Game Title\nsettings.gameprivacy.showRegion Show Region Info\nsettings.gameprivacy.showServerTimer Show Server Timers\nsettings.gameprivacy.verified Show Verified Badge\nsettings.gameprivacy.premium Show Premium Badge\nsettings.gameprivacy.partner Show Partner Badge\nsettings.gameprivacy.rank Show Ranked Badge\nsettings.gameprivacy.custom Show Custom Badge\nsettings.gameplay.header Gameplay\nsettings.gameplay.gpSetts Gameplay Settings\nsettings.gameplay.sensitivityX X Sensitivity\nsettings.gameplay.sensitivityY Y Sensitivity\nsettings.gameplay.aimsensX Aim X Sensitivity\nsettings.gameplay.aimsensY Aim Y Sensitivity\nsettings.gameplay.challenge Challenge Mode\nsettings.gameplay.invert Invert Y-Axis\nsettings.gameplay.onkillS On Kill\nsettings.gameplay.scrollDir Scroll Direction\nsettings.controller.header Controller\nsettings.controller.sensitivityX X Sensitivity\nsettings.controller.disableCons Disable Controllers\nsettings.controller.sensitivityY Y Sensitivity\nsettings.controller.aimsensX Aim X Sensitivity\nsettings.controller.aimsensY Aim Y Sensitivity\nsettings.controller.deadZoneL Dead Zone (Left)\nsettings.controller.deadZoneR Dead Zone (Right)\nsettings.controller.triggerThres Trigger Threshold\nsettings.controller.vibration Vibration\nsettings.controller.gradSpeed Gradual Speed\nsettings.controller.invert Invert Y-Axis\nsettings.mobile.header Mobile\nsettings.mobile.sensitivityX X Sensitivity\nsettings.mobile.sensitivityY Y Sensitivity\nsettings.mobile.aimsensX Aim X Sensitivity\nsettings.mobile.aimsensY Aim Y Sensitivity\nsettings.mobile.vibration Vibration\nsettings.mobile.gradSpeed Gradual Speed\nsettings.mobile.invert Invert Y-Axis\nsettings.audio.header Audio\nsettings.audio.sound Master Volume\nsettings.audio.ambient Ambient Volume\nsettings.audio.voice Voice Volume\nsettings.audio.voice.type Voice Chat Type\nsettings.audio.voice.dist Voice Chat Distance\nsettings.audio.input Audio/Mic Input\nsettings.audio.mic Mic Volume\nsettings.audio.micquality Mic Quality\nsettings.audio.weps Weapon Volume\nsettings.audio.player Player Volume\nsettings.audio.skin Cosmetics Volume\nsettings.audio.ui UI Volume\nsettings.audio.asset Asset Volume\nsettings.audio.dialogue Action Volume\nsettings.audio.mute.spec Voice Mute Spectators\nsettings.viewmodel.header View Model\nsettings.viewmodel.vmSetts View Model Settings\nsettings.viewmodel.fov Field of View (FOV)\nsettings.viewmodel.fps Weapon FOV\nsettings.viewmodel.bobbing Weapon Bobbing\nsettings.viewmodel.leaning Weapon Leaning\nsettings.viewmodel.show.primary Show Primary\nsettings.viewmodel.show.secondary Show Secondary\nsettings.viewmodel.roundArms Rounded Arms\nsettings.viewmodel.show.melee Show Melee\nsettings.viewmodel.show.ads Hide Weapon on ADS\nsettings.viewmodel.toggleAim Toggle Aim\nsettings.viewmodel.show.hands Show Hands\nsettings.viewmodel.leftHand Left Handed\nsettings.viewmodel.aimAnim Weapon Aim Animation\nsettings.viewmodel.rot Weapon Rotation\nsettings.viewmodel.xOff Weapon X Offset\nsettings.viewmodel.yOff Weapon Y Offset\nsettings.viewmodel.zOff Weapon Z Offset\nsettings.viewmodel.weapSwapY Weapon Swap Y\nsettings.viewmodel.weapReloadY Weapon Reload Y\nsettings.viewmodel.yOffADS Weapon ADS Y Offset\nsettings.viewmodel.adsFovMlt Weapon ADS FOV Power\nsettings.viewmodel.toggleADS Toggle Weapon ADS\nsettings.viewmodel.wallLean Wall Slide/Jump Lean\nsettings.viewmodel.wallLeanMlt Wall Slide/Jump Lean\nsettings.editing.header Editing\nsettings.editing.health.high HUD Health High\nsettings.editing.health.low HUD Health Low\nsettings.editing.speedLines Speed Lines\nsettings.editing.spdLinesCol Speed Lines Color\nsettings.editing.score.color Popup Score Color\nsettings.editing.score.show Show Popup Score\nsettings.editing.score.scale Popup Score Scale\nsettings.editing.score.shadow Popup Score Shadow\nsettings.editing.scoreOffX Popup Score X Offset\nsettings.editing.scoreOffY Popup Score Y Offset\nsettings.editing.prog.color Progress Bar Color\nsettings.editing.prog.opacity Progress Bar Opacity\nsettings.editing.prog.scale Progress Bar Scale\nsettings.editing.prog.shadow Progress Bar Shadow\nsettings.editing.progOffX Progress Bar X Offset\nsettings.editing.progOffY Progress Bar Y Offset\nsettings.editing.progRot Progress Bar Rotation\nsettings.editing.progm.color Charge Bar Color\nsettings.editing.progmo.color Overcharge Color\nsettings.editing.progm.opacity Charge Bar Opacity\nsettings.editing.progm.scale Charge Bar Scale\nsettings.editing.progm.shadow Charge Bar Shadow\nsettings.editing.progmOffX Charge Bar X Offset\nsettings.editing.progmOffY Charge Bar Y Offset\nsettings.editing.progmRot Charge Bar Rotation\nsettings.editing.saturation Saturation (In-game)\nsettings.editing.menuSaturation Saturation (UI)\nsettings.editing.hue Color Hue (In-game)\nsettings.editing.menuHue Color Hue (UI)\nsettings.editing.vignette Vignette\nsettings.editing.feedLimit Killfeed Limit\nsettings.editing.depth Depth Map\nsettings.editing.green Green Screen\nsettings.editing.trailcol Bullet Trail Color\nsettings.editing.ropecol Grapple Rope Color\nsettings.editing.tracercol Bullet Tracers\nsettings.editing.tracer Bullet Tracers\nsettings.editing.tracer.offset Tracer Offset\nsettings.shaders.header Shader Inputs\nsettings.mods.header Customization\nsettings.mods.load Load Mods\nsettings.mods.logo Allow Logo Changes\nsettings.mods.auto Auto-Load Mod\nsettings.mods.borders Scope Borders\nsettings.mods.borderCol Scope Borders\nsettings.mods.borderOpac Scope Borders Opacity\nsettings.mods.scope Scope Image\nsettings.mods.scope.paste Scope Image URL\nsettings.mods.scope.opacity Scope Opacity\nsettings.mods.scope.width Scope Image Width\nsettings.mods.scope.height Scope Image Height\nsettings.mods.dot Reticle Image\nsettings.mods.dot.width Reticle Image Width\nsettings.mods.dot.height Reticle Image Height\nsettings.mods.dot.paste Reticle URL\nsettings.mods.endmessage Match End Message\nsettings.mods.profile Profile Image\nsettings.mods.profile.paste Profile Image URL\nsettings.mods.ammo Ammo Icon Image\nsettings.mods.ammo.paste Ammo Icon Image URL\nsettings.mods.kills Kills Icon Image\nsettings.mods.kills.paste Kills Icon Image URL\nsettings.mods.deaths Deaths Icon Image\nsettings.mods.deaths.paste Deaths Icon Image URL\nsettings.mods.streak Streak Counter Icon Image\nsettings.mods.streak.paste Streak Counter Icon Image URL\nsettings.mods.timer Timer Icon Image\nsettings.mods.timer.paste Timer Icon Image URL\nsettings.mods.usedamage Use Damage Overlay\nsettings.mods.damage Damage Overlay Image\nsettings.mods.damage.paste Damage Overlay Image URL\nsettings.mods.overlay Game Overlay Image\nsettings.mods.overlay.paste Game Overlay Image URL\nsettings.social.region Region Stats\nsettings.social.bg Background Image\nsettings.social.bg.paste Background Image URL\nsettings.matchmaker.header Matchmaker\nsettings.matchmaker.crossplayDesktop Crossplay with Desktop\nwindows.settings.header Game Settings\nwindows.mail.header Krunker Mail\nwindows.servers.header Servers\nwindows.servers.none No Joinable Games Found...\nwindows.servers.host + Host Game\nwindows.servers.hide Hide Full\nwindows.servers.priority Region Priority\nwindows.servers.online {0} In Game\nwindows.servers.social {0} on Social\nwindows.servers.editor {0} in Editor\nwindows.servers.timeLeft Ends in {0}\nwindows.servers.starting Starting\nwindows.loadout.header Change Loadout\nwindows.loadout.class Class\nwindows.loadout.primary Primary\nwindows.loadout.primary.attach Attachment\nwindows.loadout.primary.sight Sight\nwindows.loadout.primary.reticle Reticle\nwindows.loadout.primary.scope Scope\nwindows.loadout.secondary Secondary\nwindows.loadout.secondary.skin Secondary Skin\nwindows.loadout.charm Charm\nwindows.loadout.melee Melee Skin\nwindows.loadout.hat Hat\nwindows.loadout.head Head\nwindows.loadout.body Body\nwindows.loadout.back Back\nwindows.loadout.waist Waist\nwindows.loadout.playerCard Player Card\nwindows.loadout.shoe Shoes\nwindows.loadout.face Face\nwindows.loadout.spray Spray\nwindows.loadout.color.skin Skin Color\nwindows.loadout.color.chat Chat Name Color\nwindows.loadout.color.hair Hair Color\nwindows.loadout.dye Dye\nwindows.loadout.pet Pet\nwindows.loadout.wrist Wrist\nwindows.loadout.stat Playercard Stat\nwindows.loadout.flag Country Flag\nwindows.loadout.badge Custom Badge\nwindows.loadout.streaks Streaks\nwindows.loadout.loadout.mobile Loadout\nwindows.loadout.skins.mobile Skins & Items\nwindows.loadout.other.mobile Other\nwindows.loadout.share Share\nwindows.loadout.other.killCardStat.spk SPK\nwindows.loadout.other.killCardStat.kills Kills\nwindows.loadout.other.killCardStat.deaths Deaths\nwindows.loadout.other.killCardStat.kdr KDR\nwindows.loadout.other.killCardStat.kpg KPG\nwindows.loadout.other.killCardStat.gamesPlayed Games Played\nwindows.loadout.other.killCardStat.wins Wins\nwindows.loadout.other.killCardStat.wl W/L\nwindows.loadout.other.killCardStat.nukes Nukes\nwindows.loadout.other.killCardStat.melees Melees\nwindows.loadout.other.killCardStat.accuracy Accuracy\nwindows.loadout.other.killCardStat.kr KR\nwindows.loadout.other.killCardStat.headshots Headshots\nwindows.loadout.other.killCardStat.losses Losses\nwindows.loadout.other.killCardStat.wallbangs Wallbangs\nwindows.loadout.other.killCardStat.beatdowns Beatdowns\nwindows.loadout.other.killCardStat.bullseyes Bullseyes\nwindows.loadout.other.killCardStat.spraysPlaced Sprays Placed\nwindows.loadout.other.killCardStat.assists Assists\nwindows.loadout.other.killCardStat.inventoryValue Inventory Value\nwindows.loadout.other.killCardStat.crouches Crouches\nwindows.loadout.other.killCardStat.shots Shots\nwindows.loadout.other.killCardStat.hits Hits\nwindows.loadout.other.killCardStat.misses Misses\nwindows.loadout.other.killCardStat.legshots Legshots\nwindows.loadout.other.killCardStat.slimers Slimers\nwindows.loadout.other.killCardStat.juggernauts Juggernauts\nwindows.loadout.other.killCardStat.warMachines War Machines\nwindows.mods.drop drop mod file here or click\nwindows.mods.paste Paste Mod Url\nwindows.mods.load Load Mod\nwindows.mods.none No Mods found\nwindows.mods.header Mod Manager\nwindows.mods.guide Mod Guide\nwindows.mods.list Mods List\nwindows.mods.load.header Load Mods\nwindows.mods.publish Publish Mod\nwindows.mods.viewer Viewer\nwindows.account.header Account\nwindows.account.recover To recover an account contact <a>recovery@yendis.ch</a>\nwindows.account.recover.button.mobile Forgot password\nwindows.account.recover.description.mobile For lost Passwords/Accounts contact\nwindows.class.header Select Class\nwindows.controls.header Change Controls\nwindows.controls.forward Forward\nwindows.controls.backward Backward\nwindows.controls.left Left\nwindows.controls.right Right\nwindows.controls.reload Reload\nwindows.controls.aim1 Aim\nwindows.controls.shoot1 Shoot\nwindows.controls.inspect Inspect\nwindows.controls.spray Spray\nwindows.controls.sprayWheel Spray Wheel (Hold)\nwindows.controls.jump Jump\nwindows.controls.crouch Crouch\nwindows.controls.prim Primary Weapon\nwindows.controls.swap Secondary Weapon\nwindows.controls.melee Melee Weapon\nwindows.controls.equip Equipment\nwindows.controls.chat Chat\nwindows.controls.voice Voice\nwindows.controls.list Player List\nwindows.controls.board InGame Leaderboard\nwindows.controls.interact Interact\nwindows.controls.interactSec Secondary Interact\nwindows.controls.confirm Confirm Interact\nwindows.controls.drop Drop\nwindows.controls.wepVis Toggle Weapon Visibility\nwindows.controls.kickVoteY Vote Kick [Yes]\nwindows.controls.kickVoteN Vote Kick [No]\nwindows.controls.kpdVoteY KPD Vote [Yes]\nwindows.controls.kpdVoteN KPD Vote [No]\nwindows.controls.kpdVision Toggle KPD Vision\nwindows.controls.specFree Toggle Free Cam\nwindows.controls.specObj Toggle Objective Cam\nwindows.controls.specFirst Toggle First Person\nwindows.controls.specNames Toggle Forced Names\nwindows.controls.specFocus Toggle Focus Player\nwindows.controls.specMiniMap Toggle Spectator Minimap\nwindows.controls.hidePlayers Hide Players\nwindows.controls.streak0 Streak Slot 1\nwindows.controls.streak1 Streak Slot 2\nwindows.controls.streak2 Streak Slot 3\nwindows.controls.streak3 Streak 4\nwindows.controls.streak4 Streak 5\nwindows.controls.taunt0 Taunt (Psst)\nwindows.controls.taunt1 Taunt (Whistle)\nwindows.controls.taunt2 Taunt (Fart)\nwindows.controls.taunt3 Taunt (Meme)\nwindows.controls.taunt4 Taunt (WTF is This?)\nwindows.controls.taunt5 Taunt (Right Now!)\nwindows.controls.prop Open Prop Selection (Hold)\nwindows.controls.propRand Select Random Prop\nwindows.controls.propRot Toggle Rotation\nwindows.controls.propRotR Reset Rotation\nwindows.controls.premium0 Noclip\nwindows.controls.premium1 Godmode\nwindows.controls.premium2 Kill\nwindows.controls.premium3 Smite\nwindows.controls.reset Reset Position (Parkour etc)\nwindows.controls.resetLast Reset To Last Checkpoint (Parkour etc)\nwindows.controls.noclipSB Noclip\nwindows.controls.godModeSB Godmode\nwindows.controls.smiteSB Smite\nwindows.controls.unlimitedSB Unlimited Ammo\nwindows.controls.killSB Kill\nwindows.controls.spawnBot Spawn Bot\nwindows.controls.clearBots Clear Bots\nwindows.host.header Host Custom Game\nwindows.host.maps Server Setup\nwindows.host.cmaps Community Game\nwindows.host.raw Raw Game Data\nwindows.host.modes Select Modes\nwindows.host.classes Select Classes\nwindows.host.settings Server Settings\nwindows.host.preset Host Presets\nwindows.host.preset.load Loading Preset...\nwindows.host.preset.name Preset name\nwindows.host.start Start Game\nwindows.host.rehost Start Game (Bring Players)\nwindows.spray.header Select Spray\nwindows.spray.default Free Spray\nwindows.spray.spin Spray\nwindows.maps.header Custom Games\nwindows.maps.none No Games found!\nwindows.maps.name Game Name\nwindows.maps.editor Game Maker\nwindows.maps.publish Publish Game\nwindows.maps.community Dev Community\nwindows.publish.map.header Publish or Update Game\nwindows.publish.map.thumbnail No Thumbnail\nwindows.publish.map.paste Paste Game Data\nwindows.publish.map.update Publish/Update\nwindows.publish.map.login to create and upload Games!\nwindows.theatre.header Theatre Mode\nwindows.theatre.record Enable Recording\nwindows.theatre.key Record Key\nwindows.clans.header Clans\nwindows.clans.members Members ({0})\nwindows.clans.requests Requests\nwindows.clans.requests.none No Requests\nwindows.clans.page [{0}] Clan Page\nwindows.clans.create Create Clan\nwindows.clans.name Clan Name\nwindows.clans.view View Clans\nwindows.clans.join Join Clan\nwindows.clans.login to create and join a clan!\nwindows.store.header Store\nwindows.store.spin! Get Item!\nwindows.store.spin {0} Spin\nwindows.store.spin.regforspin Watch an ad and register to get a prize!\nwindows.store.spin.regforprize Register to get this prize!\nwindows.store.spin.type.starter Starter\nwindows.store.spin.type.elite Elite\nwindows.store.spin.type.heroic Heroic\nwindows.store.spin.type.free Free\nwindows.store.spin.type.freeKR Free KR\nwindows.store.spin.type.freeguestspin Free Spin\nwindows.store.spin.type.ultra Ultra\nwindows.store.agree By purchasing you agree to the {0}Terms & Conditions\nwindows.store.purchase Purchase KR\nwindows.store.voucher Redeem Voucher\nwindows.store.voucherinfo Redeem Vouchers from certain Streams & Game Events\nwindows.store.market Marketplace\nwindows.store.market2 Krunker Market\nwindows.store.premium Purchase Premium\nwindows.store.premium2 Krunker Premium\nwindows.store.buyP Choose a Display name & more with\nwindows.store.buy Buy and Sell Items on the\nwindows.store.bundles Bundles\nwindows.store.wheels Prize Wheels\nwindows.store.battlepass VIP Battle pass\nwindows.store.unlock Unlock new weapon skins and items\nwindows.store.amount {0} KR in account\nwindows.store.login to buy and unlock items from the store!\nwindows.store.purchasing Purchasing...\nwindows.store.unboxed {0}{1} unboxed\nwindows.store.found {0}{1} found\nwindows.trade.header Trading\nwindows.scope.header Select Scope\nwindows.premium.header Premium\nwindows.skin.header Select Skin\nwindows.hat.header Select Hat\nwindows.head.header Select Head\nwindows.body.header Select Body\nwindows.back.header Select Back\nwindows.waist.header Select Waist\nwindows.playercard.header Select Player Card\nwindows.face.header Select Face\nwindows.melee.header Select Melee\nwindows.attach.header Select Attachment\nwindows.reticle.header Select Reticle\nwindows.shoes.header Select Shoes\nwindows.shoe.header Select Shoes\nwindows.pet.header Select Pet\nwindows.wrist.header Select Wrist\nwindows.charm.header Select Charm\nwindows.streaks.header Select Streaks\nwindows.reticle.unlocked Unlocked at lvl {0}\nwindows.reticle.req Req lvl {0}\nwindows.dye.header Select Dye\nwindows.dye.default Default Dye\nwindows.dye.spin Dye\nwindows.changelog.header Changelog\nwindows.mods.community.header Community Mods\nwindows.mods.community.fav Your Favorites\nwindows.mods.community.new New Mods\nwindows.mods.community.hot Hot\nwindows.mods.community.name Mod Name\nwindows.mods.community.none No Mods found\nwindows.publish.mod.header Publish Mod\nwindows.publish.mod.thumbnail No Thumbnail\nwindows.publish.mod.name Mod Name\nwindows.publish.mod.paste Mod Url\nwindows.publish.mod.update Publish/Update\nwindows.publish.mod.login to create and upload mods!\nwindows.secondary.header Select Secondary\nwindows.secondary.unlocked Unlocked\nwindows.secondary.customOnly Customs Only\nwindows.secondary.premiumOnly Premium Only\nwindows.secondary.req Req lvl {0}\nwindows.skins.unlocked Unlocked\nwindows.skins.customOnly Customs Only\nwindows.skins.premiumOnly Premium Only\nwindows.skins.classOnly Req {0}\nwindows.skins.req Req lvl {0}\nwindows.skins.default Default Skin\nwindows.advertise.header Advertise\nwindows.support.header Support\nwindows.players.header Player List\nwindows.players.none No players currently...\nwindows.join.header Join\nwindows.join.code Enter Game URL/Code\nwindows.client.header Client\nwindows.client.windows Windows Installer\nwindows.client.mac macOS Installer\nwindows.client.linux Linux Installer\nwindows.ranked.header Ranked\nwindows.ranked.login to play in ranked games!\nwindows.ranked.level You must be at least <span color=\"black\">level {0}</span> to play in ranked games! Right now you are at <span color=\"black\">level {1}</span>.\nwindows.chall.header Challenges\nwindows.chall.login to complete challenges!\nwindows.spin.header Prize Wheel\nwindows.spin.login.required Must be logged in to spin\nwindows.spin.noKR Not enough KR\nwindows.spin.noKR.noIAP Not enough KR, play to earn more!\nwindows.spin.featuredItems Featured items\nwindows.spin.rarity.uncommon Uncommon\nwindows.spin.rarity.rare Rare\nwindows.spin.rarity.epic Epic\nwindows.spin.rarity.legendary Legendary\nwindows.spin.rarity.relic Relic\nwindows.spin.rarity.contraband Contraband\nwindows.spin.rarity.unobtainable Unobtainable\nwindows.spin.rarity.nft NFT\nwindows.spin.toSpin TO SPIN\nwindows.spin.freeSpin FREE SPIN\nwindows.spin.infoText This is a sample of all the 1000+ possible items you can get on this spin.\nwindows.spin.useTicket Use ticket\nwindows.spin.useKR Use KR\nwindows.challenges.emptyMessage You currently have no challenges.<br>Invite your friends and show whos best!\nwindows.challenges.emptyCta Let the games begin!\nwindows.challenges.versus Versus {0}\nwindows.challenges.versusX x\nwindows.challenges.map - map: {0} -\nwindows.challenges.mapCurrent - Current map: {0} -\nwindows.challenges.mapLast - Last map: {0} -\nwindows.challenges.playThisChallenge Play this challenge\nwindows.challenges.playAnotherFriend Play another friend\nwindows.challenges.nudgeFriend Nudge your friend\nwindows.challenges.rematch Rematch\nwindows.challenges.scoreYour Your score:\nwindows.challenges.scoreOther Friends score:\nwindows.challenges.points {0} points\nwindows.challenges.waitingYou Waiting for you\nwindows.challenges.waitingOther Waiting for {0}\nwindows.challenges.history History\nwindows.challenges.create Challenge a friend\nthumbnail.upload.limit Failed. {0}kb Thumbnail Limit\nimage.upload.limit Failed. {0}kb Image Limit\nthumbnail.upload.error Thumbnail Error\nmod.extracting extracting {0}/{1}\nmod.disabled mods disabled\nmod.error mod error!\nmod.loading loading mod...\nmod.invalid invalid mod file!\nmatchmaker.full FULL\nmatchmaker.GameFull Game is full.\nmatchmaker.NoServersMatchQuery GAME UPDATING\nmatchmaker.InvalidGameId Game not found.\nmatchmaker.NoAvailableServers Servers are at Max Capacity\nmatchmaker.NoMatchingServers No Games Found<br><small>Try changing Quickplay options</small>\nmatchmaker.GameIssue Unknown Join Issue\nadblocker Disable your ad blocker to receive free Krunkies.\nad-failed Ad Failed to Load. Try again.\nstreamers.views {0} viewers\nstreamers.none No active streams!\nerror.extentions If you have any extensions, disable them\nerror.seek Try seeking a new game by clicking\ncustom.map.upload.limit Failed. 500k Character Game Data Limit\ncustom.map.missing Select at least one Game or Map\ncustom.mode.missing Select at least one Mode\ncustom.class.missing Select at least one Class\nserver.config.maxPlayers Players\nserver.config.minPlayers Min Players\nserver.config.lives Lives\nserver.config.gameTime Minutes\nserver.config.gravMlt Gravity\nserver.config.tickRI High Tickrate\nserver.config.maxPS 40 Player Server\nserver.config.promServ Promote Server\nserver.config.jumpMlt Jump Force\nserver.config.airStrf Air Strafing\nserver.config.deltaMlt Time Scale\nserver.config.strafeSpd Strafe Speed\nserver.config.fiRat Fire Rate\nserver.config.reSpd Reload Speed\nserver.config.slidTime Slide Time\nserver.config.fixMov Fixed Movement\nserver.config.slidSpd Slide Speed\nserver.config.healthMlt Health Multiplier\nserver.config.impulseMlt Weapon Impulse\nserver.config.nameTeam1 Team 1 Name\nserver.config.nameTeam2 Team 2 Name\nserver.config.nameTeam3 Team 3 Name\nserver.config.nameTeam4 Team 4 Name\nserver.config.nameTeam5 Team 5 Name\nserver.config.t1Dmg Team 1 Damage\nserver.config.t2Dmg Team 2 Damage\nserver.config.t3Dmg Team 3 Damage\nserver.config.t4Dmg Team 4 Damage\nserver.config.t5Dmg Team 5 Damage\nserver.config.selTeam Select Team\nserver.config.frFire Friendly Fire\nserver.config.allowSpect Spectating\nserver.config.killRewards Kill Rewards\nserver.config.noAssists No Assists\nserver.config.headshotOnly Headshots Only\nserver.config.noSecondary Disable Secondaries\nserver.config.noStreaks Disable Streaks\nserver.config.canSlide Sliding\nserver.config.wallJP Wall Jumping Power\nserver.config.wallJD Wall Jumping Decel\nserver.config.autoJump Auto Jump\nserver.config.bDrop Bullet Drop\nserver.config.thirdPerson 3rd Person\nserver.config.requireCaptcha Require Captcha\nserver.config.nameTags Hide Nametags (Enemies)\nserver.config.nameTagsFR Hide Nametags (Allies)\nserver.config.kCams Kill Cams\nserver.config.minimaps Minimaps\nserver.config.aAnon Allow Anonymous\nserver.config.noReload No Reload\nserver.config.private Private\nserver.config.krRewards KR Rewards\nserver.config.forceDefault Force Default Settings\nserver.config.warmupTime Warmup Time\nserver.config.gamRounds Rounds\nserver.config.objtvTime Objective Time\nserver.config.forceSpawn Auto Respawn Time\nserver.config.intermTmr Intermission (s)\nserver.config.scoreLimit Score Limit\nserver.config.keepTScore Keep Team Score\nserver.config.forceC Force Mode Classes\nserver.config.logTim Log Time (Race, Parkour)\nserver.config.lstChkT Last Checkpoint Time Rewind (Race/Bhop)\nserver.config.hitBoxPad Hitbox Padding\nserver.config.hpRegen Health Regen\nserver.config.disableB Disable Borders\nserver.config.throwMel Throwable Melees\nserver.config.noCosm Disable Cosmetics\nserver.config.tstCmp Test Mode\nserver.config.limitClasses Limit Classes\nserver.config.tmSize Team Size\nserver.config.specSlots Designated Spectators\nserver.config.fallDmg Fall Damage\nserver.config.fallDmgThr Fall Damage Thresh\nserver.config.noDraws No Draws\nserver.config.bstOfR Best of\nserver.config.chrgWeps Chargable Weapons\nserver.config.headClipFix Stop Head Clipping\nserver.config.classLim0 Triggerman Limit\nserver.config.classLim1 Hunter Limit\nserver.config.classLim2 Run N Gun Limit\nserver.config.classLim3 Spray N Pray Limit\nserver.config.classLim4 Vince Limit\nserver.config.classLim5 Detective Limit\nserver.config.classLim6 Marksman Limit\nserver.config.classLim7 Rocketeer Limit\nserver.config.classLim8 Agent Limit\nserver.config.classLim9 Runner Limit\nserver.config.classLim10 Deagler Limit\nserver.config.classLim11 Bowman Limit\nserver.config.classLim12 Commando Limit\nserver.config.classLim13 Trooper Limit\nserver.config.classLim14 Survivor Limit\nserver.config.classLim15 Infiltrator Limit\nsocial.login Login / Register\nsocial.login.failed Login Failed\nsocial.login.buy Login to Buy\nsocial.login.sell Login to Sell\nsocial.login.gift Login to Gift\nsocial.login.proccessing Logging in...\nsocial.since Since\nsocial.user.maps User Games\nsocial.user.mods User Mods\nsocial.maps.none No Games found...\nsocial.mods.none No Mods found...\nsocial.market.price.low Lowest Price\nsocial.market.price.list List Price in\nsocial.market.searching Searching\nsocial.market.listed listed {0} ago\nsocial.market.list List Item\nsocial.market.unlist Unlist\nsocial.market.unlisting Unlisting Item...\nsocial.market.posting Posting Item...\nsocial.market.req lvl {0} required\nsocial.market.cant Can't Afford\nsocial.market.purchase Purchase\nsocial.market.fee No List Fee\nsocial.market.failed Failed. Try Again\nsocial.market.head Head Item\nsocial.market.hat Hat Item\nsocial.market.body Body Item\nsocial.market.back Back Item\nsocial.market.waist Waist Item\nsocial.market.playerCard Player Card\nsocial.market.face Face Item\nsocial.market.shoe Shoe Item\nsocial.market.pet Pet Item\nsocial.market.wrist Wrist Item\nsocial.market.charm Charm Item\nsocial.market.melee Melee Item\nsocial.market.spray Spray Item\nsocial.market.dye Dye Item\nsocial.market.collectible Collectible Item\nsocial.market.ticket Spin Ticket Item\nsocial.market.none No Items Found\nsocial.market.login You must be logged in.\nsocial.market.grace ready in {0}\nsocial.market.sort Filter/Sort\nsocial.market.filter Search\nsocial.market.sort2 Sort\nsocial.market.price.high Highest Price\nsocial.trading.submitting Submitting Offer...\nsocial.market.gift.amount Gift Amount in\nsocial.market.fee.gift No Fee\nsocial.market.gift Gift KR\nsocial.market.gift.msg Leave a message\nrespawn.auto Auto Respawning in {0}\ncustom.host.ranked Can't host match while in ranked.\nfunds.insufficient Insufficient Funds\nfunds.out It appears you have run out of Krunkies.\ncustom.passcode.long Password too long\ncustom.passcode.input Enter Server Password to join\ncustom.tryagain Please try again.\ncustom.passcode.missing.mobile Missing field\ncustom.passcode.username.long.mobile Username must be 1-14 chars.\ncustom.passcode.password.long.mobile Password must be 6-20 chars.\ncustom.passcode.password.match.mobile Password does not match.\npurchase.kr.success Added {0} KR to your account\nlimited.purchase.ask Are you sure you want to purchase [{0}] for {1} KR?\nlimited.purchase.success Added {0} to your inventory\nsettings.loaded Settings Loaded\nsettings.loaded.none No settings found\naccount.login.required Must be logged in\naccount.banned.hack This account has been banned for Hacking.\naccount.banned.appeal If you want to appeal your ban, contact:\naccount.delete You may request to delete your account, if the request is not cancelled within 14 days the account and all associated data will be permanently removed.\naccount.delete.request Are you sure you want to request an account deletion?\naccount.delete.cancel Are you sure you want to cancel account deletion?\nspin.free.available FREE KR AVAILABLE!\nspin.free.claim This spin is available to claim once per Hour after completing a match.\nspin.free.disable These Popups can be disabled in General Settings\nmod.reset.0 Will take effect after respawning.\nmod.reset.1 Map Objects dont get reset\nwindows.profile.picture Change Picture\nstats.assists Assists\nstats.nukes Nukes\nstats.slimers Slimers\nstats.juggernauts Juggernauts\nstats.juggernauts.kills Juggernaut Kills\nstats.juggernauts.killed Juggernauts Killed\nstats.warmachines War Machines\nstats.melee Melee\nstats.fistkills Beatdowns\nstats.thrownkills Bullseyes\nstats.headshots Headshots\nstats.wallbangs Wallbangs\nstats.crouches Crouches\nstats.sprays Sprays Placed\nstats.kpd Helpful Reports\nstats.shots Shots\nstats.hits Hits\nstats.misses Misses\nstats.legshots Legshots\ngame.mode.ffa.description In this mode, you have no friends. Eliminate as many opponents as you can.\ngame.mode.gun.description Kill other players to progress through every gun in the game. Do it with all guns to win\ngame.mode.point.description Follow the target and control the area. The longer you stay, the more points you and your team make. Location changes every minute.\ngame.mode.tdm.description Its you and your team. Eliminate the other team players. Team with highest score, wins.\ngame.mode.ctg.description Help your team steal the other teams flag and bring it to your base. You cant steal if yours has been stolen. Get it back first by eliminating the carrier.\ngame.mode.dom.description Capture as many areas as possible by standing your position and defending it. The more time your team stay in the secured zone, the more points it wins.\nwindows.host.default.settings Enabling Default Settings allows for storing Player Progress and Highscores\nwindows.host.default.commands Host Commands are Disabled in this mode: /noclip /god /smite etc\nwindows.host.rewards Enabling KR Rewards forces the Server to use Default Settings & allows players to earn KR from the map funds:\nwindows.store.wheels.sub Try your luck and spin for a chance to win some new skins!\nwindows.store.currency * Prices in USD can be converted to your local currency at an exchange rate defined by the payment provider or bank\nwindows.store.creator Support your favorite Content Creator by using a Creator Code\nwindows.chall.customs Challenges can't be completed in Custom Matches\ntwitch.link Are you sure you want to link a twitch account?\ntwitch.unlink.warning Unlinking does not allow you to link a seperate twitch account.\ntwitch.unlink Are you sure you want to unlink your twitch account?\nwindows.clan.leave Are you sure you want to leave the clan?\nwindows.clan.delete Are you sure you want to delete the clan?\nwindows.clan.kick Are you sure you want kick {0} from the clan?\nwindows.store.premium.purchase Are you sure you want to purchase {0} days of Premium?\nwindows.store.premium.gift Are you sure you want to Gift '{0}' {1} days of Premium?\nwindows.playerlist.ban Are you sure you want ban {0} from this game?\nwindows.playerlist.flag Are you sure you want to Flag {0}?\nwindows.playerlist.unflag Are you sure you want to Unflag {0}?\nwindows.playerlist.punish Are you sure you want to take action on {0}?\nitem.view.open Open Model Viewer\nitem.view.more More Information\nitem.sell.cant Item cant be sold.\nitem.sell.cant.krunker Item cant be sold on krunker.\nitem.sell.quick Are you sure you want to Quick Sell {0}?\nitem.sell.destroy Are you sure you want to Destroy {0}?\nsocial.profile.stats Overall Stats\nsocial.profile.class Class Stats\nsocial.profile.sales Sales\nsocial.profile.sales.market Market Sales\nsocial.profile.skins Skins [{0}]\nsocial.profile.skins.none No published Skins from this user\nsocial.profile.games Games [{0}]\nsocial.profile.games.none No published Games from this user\nsocial.profile.assets Assets [{0}]\nsocial.profile.assets.none No published Assets from this user\nsocial.profile.mods Mods [{0}]\nsocial.profile.mods.none No published Mods from this user\nsocial.profile.badges.none No Badges found for this user\nsocial.search Search Results\nsocial.market.stats.rare Rarest Items\nsocial.market.stats.circulation In Circulation\nsocial.market.stats.units units Worldwide\nsocial.trades.in Incoming\nsocial.trades.in.head Incoming Offers ({0})\nsocial.trades.out Outgoing\nsocial.trades.out.head Outgoing Offers ({0})\nsocial.trades.history History\nsocial.trades.history.head Trade History ({0})\nsocial.trades.decline Decline All\nsocial.trades.message ENABLE TRADE MESSAGES IN SETTINGS\nsocial.trades.warning You get no items from this trade!\nsocial.trades.accept Are you sure you want to accept this offer?\nstats.airdrops Airdrops\nstats.airdrops.stolen Airdrops Stolen\nsettings.quality.flapAnim Sniper Flap Animation\nchall.name.hs Get {0} headshots {1}\nchall.name.ns Get {0} no-scopes {1}\nchall.name.ls Get {0} legshots {1}\nchall.name.tmk Get {0} throwing knife kills {1}\nchall.name.fb Get {0} first bloods {1}\nchall.name.mk Get {0} melee kills {1}\nchall.name.fk Get {0} fist kills {1}\nchall.name.qs Get {0} quickscopes {1}\nchall.name.wb Get {0} wallbangs {1}\nchall.name.airk Get {0} mid-air kills {1}\nchall.name.lns Get {0} longshots {1}\nchall.name.tk Get {0} turbo kills {1}\nchall.name.drk Get {0} drift kills {1}\nchall.name.kstk Get a {0} killstreak {1}\nchall.name.w Win {0} matches\nchall.name.d Die {0} times\nchall.name.score Get {0} score\nchall.name.dmg Deal {0} damage {1}\nchall.name.bzk Get {0} buzz kills {1}\nchall.name.cc Get {0} close-calls {1}\nchall.name.rk Deal {0} revenge kills {1}\nchall.completed Completed\nevent.doubleXP 2x Class XP enabled for this match\nmode.doubleXP 2x XP enabled for this match\nranked.join Joined Ranked Match. Abandoning a match will result in a temporary ban\nranked.progress Game in Progress\nranked.team Please join a Team\nranked.switch Can't switch while in-game\nranked.spectate Spectating Disabled in Ranked\nranked.login Login to Spawn\nranked.sync Missing Sync Data\nranked.team.spawn Please join a Team to Spawn\nranked.class.spawn Please select a Class to Spawn\nmodes.round.win Your Team has secured this round\nmodes.round.loss This round is no longer winnable\nmodes.round.switch Switching Sides. Prepare for the next Round\nmodes.trade.success Trade Successful\nmodes.prophunt.limit [Prop Hunt] You are out of prop switches\nmodes.prophunt.left [Prop Hunt] You have {0} switches remaining\nmodes.prophunt.rotation.on [Prop Hunt] Rotation Enabled\nmodes.prophunt.rotation.off [Prop Hunt] Rotation Disabled\nmodes.prophunt.rotation.reset [Prop Hunt] Rotation reset.\ncommands.login Login to use this command\ncommands.connected {0} connected, {1} in menu\ncommands.host {0} is the current Host.\ncommands.noclip.on Noclip - Enabled\ncommands.noclip.off Noclip - Disabled\ncommands.god.on God mode - Enabled\ncommands.god.off God mode - Disabled\ncommands.god.on.other God mode - Enabled for {0}\ncommands.god.off.other God mode - Disabled for {0}\ncommands.smite.on Smite - Enabled\ncommands.smite.off Smite - Disabled\ncommands.smite.on.other Smite - Enabled for {0}\ncommands.smite.off.other Smite - Disabled for {0}\ncommands.perk Gave {0} {1}\ncommands.maxperk Gave {0} MAX {1}\ncommands.unlimited.on Unlimited Ammo - Enabled\ncommands.unlimited.off Unlimited Ammo - Disabled\ncommands.unlimited.on.other Unlimited Ammo - Enabled for {0}\ncommands.unlimited.off.other Unlimited Ammo - Disabled for {0}\ncommands.spraybypass.on Unlimited Sprays - Enabled\ncommands.spraybypass.off Unlimited Sprays - Disabled\ncommands.spraybypass.on.other Unlimited Sprays - Enabled for {0}\ncommands.spraybypass.off.other Unlimited Sprays - Disabled for {0}\ncommands.suspect.invalid Invalid suspect info\ncommands.suspect.menu Suspect in menu\ncommands.suspect.left Suspect has left\ncommands.suspect.found Suspect Found. Spectating: {0}, Spawned: {1}, Name: {2}\ncommands.forfeit.next Must play atleast 1 round\ncommands.forfeit.wait Wait till match starts to forfeit\ncommands.forfeit.later Please try again in a few seconds\ncommands.forfeit.voted You already voted.\ncommands.forfeit.limit You can only start one vote per game\ncommands.forfeit.ended Forfeiting Game\ncommands.forfeit.ended.other Other Team Forfeited\nserver.message.join {0} joined the game\nserver.message.left {0} left the game\nserver.message.kicked {0} was kicked\nserver.message.banned {0} was banned\nserver.message.votekicked {0} was vote kicked\nserver.message.arrested {0} was arrested by the K.P.D\nevent.easter.golden.spawn A Golden egg is near\nevent.easter.golden.despawn A Golden egg has gone\nevent.easter.found.new {0} found {1}/{2} Eggs\nevent.easter.found.old You already discovered this egg!\nevent.easter.completed {0} completed the Egg hunt!\nsettings.quality.presets.pro Pro\nsettings.quality.presets.custom Custom\nsettings.quality.presets.default.description Krunker default settings\nsettings.quality.presets.performance.description Recommended for low end phones\nsettings.quality.presets.pro.description Basic competitive preset\nsettings.quality.presets.custom.description Custom preset\ncustom.maps.noMaps No maps found\nwindow.endgame.player.doubleGainedXP Double XP\nwindow.endgame.player.xpDoubled XP Doubled!\nwindow.endgame.player.xpDoubleSubTitle The more XP the better, right? Lets go!\nwindow.report.popup.reason.error Please choose a valid reason.\nwindow.report.popup.info.error More information required.\nwindow.report.popup.question What is the main reason for this report?\nwindow.report.popup.header.comments Additional comments\nwindow.report.popup.button Report player\nwindow.report.popup.header Reporting {0}\nwindow.report.popup.success Player reported successfully!\nwindow.reward.equipped Equipped!\nwindow.reward.equip Equip now!\nwindow.reward.new NEW\nwindow.reward.won You won the\nwindow.reward.wonKR You won\nwindow.reward.redeemed You redeemed the\nwindow.reward.krSubtitle Make it rain!\nwindow.reward.scoreSubtitle A boost to help you level up!\nwindow.reward.junkSubtitle A crafty reward!\nwindow.reward.spinTicketSubtitle You can use tickets instead of KRs to spin the wheel.\nshop.popup.error.wrongPlatform Cannot process items on this platform.\nshop.popup.error.payment Error while processing payment. Please try again.\nshop.popup.success {0} purchased successfully!\nwindow.watchAds.popup.no No ads available.\nwindow.watchAds.popup.noAdsRewardGranted Reward granted. No ads available.\nwindow.watchAds.popup.interrupted Ad watch interrupted.\nwindows.dailyStreaks.hellyeah Hell yeah!\nwindows.dailyStreaks.doubleIt Double it!\nhost.transfer Host Transfered to {0}\nhost.transfer.you You are now Host!\nhost.transfer.limit This server exceeded Host Transfer limit\nwindow.games.screen.plays  PLAYS\nwindow.games.screen.online  ONLINE\nwindow.games.screen.by By\nwindows.killcardstat.header Select Killcard Stat\nspins.banned Spins are disabled in your country\ngame.reload.keyboard [R] Reload\nbattlepass.header Battle Pass\nstats.kpd.total Total Calls\nstats.kpd.total.tip Amount of times you called KPD\nstats.kpd.bans Bans from calls\nstats.kpd.bans.tip Amount of users banned from calls you made to KPD\n"},function(e,t,i){"use strict";i.r(t),i.d(t,"RectAreaLightUniformsLib",(function(){return s}));var n=i(0);class s{static init(){const e=[1,0,0,2e-5,1,0,0,503905e-9,1,0,0,.00201562,1,0,0,.00453516,1,0,0,.00806253,1,0,0,.0125978,1,0,0,.018141,1,0,0,.0246924,1,0,0,.0322525,1,0,0,.0408213,1,0,0,.0503999,1,0,0,.0609894,1,0,0,.0725906,1,0,0,.0852058,1,0,0,.0988363,1,0,0,.113484,1,0,0,.129153,1,0,0,.145839,1,0,0,.163548,1,0,0,.182266,1,0,0,.201942,1,0,0,.222314,1,0,0,.241906,1,0,0,.262314,1,0,0,.285754,1,0,0,.310159,1,0,0,.335426,1,0,0,.361341,1,0,0,.387445,1,0,0,.412784,1,0,0,.438197,1,0,0,.466966,1,0,0,.49559,1,0,0,.523448,1,0,0,.549938,1,0,0,.57979,1,0,0,.608746,1,0,0,.636185,1,0,0,.664748,1,0,0,.69313,1,0,0,.71966,1,0,0,.747662,1,0,0,.774023,1,0,0,.799775,1,0,0,.825274,1,0,0,.849156,1,0,0,.873248,1,0,0,.89532,1,0,0,.917565,1,0,0,.937863,1,0,0,.958139,1,0,0,.976563,1,0,0,.994658,1,0,0,1.0112,1,0,0,1.02712,1,0,0,1.04189,1,0,0,1.05568,1,0,0,1.06877,1,0,0,1.08058,1,0,0,1.09194,1,0,0,1.10191,1,0,0,1.11161,1,0,0,1.1199,1,0,0,1.12813,.999547,-4.48815e-7,.0224417,199902e-10,.999495,-113079e-10,.0224406,503651e-9,.999496,-452317e-10,.0224406,.00201461,.999496,-101772e-9,.0224406,.00453287,.999495,-180928e-9,.0224406,.00805845,.999497,-282702e-9,.0224406,.0125914,.999496,-407096e-9,.0224406,.0181319,.999498,-554114e-9,.0224406,.02468,.999499,-723768e-9,.0224406,.0322363,.999495,-916058e-9,.0224405,.0408009,.999499,-.00113101,.0224408,.050375,.999494,-.00136863,.0224405,.0609586,.999489,-.00162896,.0224401,.0725537,.999489,-.00191201,.0224414,.0851619,.999498,-.00221787,.0224413,.0987867,.999492,-.00254642,.0224409,.113426,.999507,-.00289779,.0224417,.129088,.999494,-.0032716,.0224386,.145767,.999546,-.0036673,.0224424,.163472,.999543,-.00408166,.0224387,.182182,.999499,-.00450056,.0224338,.201843,.999503,-.00483661,.0224203,.222198,.999546,-.00452928,.022315,.241714,.999508,-.00587403,.0224329,.262184,.999509,-.00638806,.0224271,.285609,.999501,-.00691028,.0224166,.309998,.999539,-.00741979,.0223989,.335262,.999454,-.00786282,.0223675,.361154,.999529,-.00811928,.0222828,.387224,.999503,-.00799941,.0221063,.41252,.999561,-.00952753,.0223057,.438006,.999557,-.0099134,.0222065,.466735,.999541,-.0100935,.0220402,.495332,.999562,-.00996821,.0218067,.523197,.999556,-.0105031,.0217096,.550223,.999561,-.0114191,.0217215,.579498,.999588,-.0111818,.0213357,.608416,.999633,-.0107725,.0208689,.635965,.999527,-.0121671,.0210149,.664476,.999508,-.0116005,.020431,.692786,.999568,-.0115604,.0199791,.719709,.999671,-.0121117,.0197415,.74737,.999688,-.0110769,.0188846,.773692,.99962,-.0122368,.0188452,.799534,.999823,-.0110325,.0178001,.825046,.999599,-.0114923,.0174221,.849075,.999619,-.0105923,.0164345,.872999,.999613,-.0105988,.0158227,.895371,.99964,-.00979861,.0148131,.917364,.99977,-.00967238,.0140721,.938002,.999726,-.00869175,.0129543,.957917,.99973,-.00866872,.0122329,.976557,.999773,-.00731956,.0108958,.994459,.999811,-.00756027,.0102715,1.01118,.999862,-.00583732,.00878781,1.02701,.999835,-.00631438,.00827529,1.04186,.999871,-.00450785,.00674583,1.05569,.999867,-.00486079,.00621041,1.06861,.999939,-.00322072,.00478301,1.08064,.999918,-.00318199,.00406395,1.09181,1.00003,-.00193348,.00280682,1.10207,.999928,-.00153729,.00198741,1.11152,.999933,-623666e-9,917714e-9,1.12009,1,-102387e-11,9.07581e-7,1.12813,.997866,-8.96716e-7,.0448334,199584e-10,.997987,-225945e-10,.0448389,502891e-9,.997987,-903781e-10,.0448388,.00201156,.997985,-203351e-9,.0448388,.00452602,.997986,-361514e-9,.0448388,.00804629,.997987,-56487e-8,.0448389,.0125724,.997988,-813423e-9,.0448389,.0181045,.997984,-.00110718,.0448387,.0246427,.997985,-.00144616,.0448388,.0321875,.997987,-.00183038,.044839,.0407392,.997983,-.00225987,.0448387,.0502986,.997991,-.00273467,.0448389,.0608667,.997984,-.00325481,.0448384,.0724444,.998002,-.00382043,.044839,.0850348,.997997,-.00443145,.0448396,.0986372,.998007,-.00508796,.0448397,.113255,.998008,-.00578985,.04484,.128891,.998003,-.00653683,.0448384,.145548,.997983,-.00732713,.0448358,.163221,.997985,-.00815454,.0448358,.181899,.998005,-.00898985,.0448286,.201533,.998026,-.00964404,.0447934,.221821,.998055,-.00922677,.044611,.241282,.99804,-.0117361,.0448245,.261791,.998048,-.0127628,.0448159,.285181,.998088,-.0138055,.0447996,.30954,.998058,-.0148206,.0447669,.334751,.998099,-.0156998,.044697,.36061,.998116,-.0161976,.0445122,.386603,.998195,-.015945,.0441711,.411844,.998168,-.0183947,.0444255,.43773,.998184,-.0197913,.0443809,.466009,.998251,-.0201426,.0440689,.494574,.998305,-.0198847,.0435632,.522405,.998273,-.0210577,.043414,.549967,.998254,-.0227901,.0433943,.578655,.998349,-.0223108,.0426529,.60758,.99843,-.0223088,.042,.635524,.998373,-.0241141,.0418987,.663621,.998425,-.0231446,.0408118,.691906,.998504,-.0233684,.0400565,.719339,.998443,-.0241652,.0394634,.74643,.99848,-.0228715,.0380002,.773086,.998569,-.023519,.0372322,.798988,.998619,-.0223108,.0356468,.824249,.998594,-.0223105,.034523,.848808,.998622,-.0213426,.0328887,.87227,.998669,-.0207912,.0314374,.895157,.998705,-.0198416,.0296925,.916769,.998786,-.0189168,.0279634,.937773,.998888,-.0178811,.0261597,.957431,.99906,-.0166845,.0242159,.976495,.999038,-.0155464,.0222638,.994169,.999237,-.0141349,.0201967,1.01112,.999378,-.0129324,.0181744,1.02692,.999433,-.0113192,.0159898,1.04174,.999439,-.0101244,.0140385,1.05559,.999614,-.00837456,.0117826,1.06852,.999722,-.00721769,.00983745,1.08069,.999817,-.00554067,.00769002,1.09176,.99983,-.00426961,.005782,1.10211,.999964,-.00273904,.00374503,1.11152,1.00001,-.00136739,.00187176,1.12031,.999946,393227e-10,-28919e-9,1.12804,.995847,-13435e-10,.0671785,19916e-9,.995464,-338387e-10,.0671527,501622e-9,.99547,-135355e-9,.0671531,.00200649,.995471,-30455e-8,.0671532,.00451461,.99547,-541423e-9,.0671531,.008026,.995471,-84598e-8,.0671531,.0125407,.99547,-.00121823,.0671531,.0180589,.99547,-.00165817,.0671531,.0245806,.995463,-.00216583,.0671526,.0321062,.995468,-.00274127,.0671527,.0406366,.995474,-.00338447,.0671534,.0501717,.995473,-.00409554,.0671533,.0607131,.995478,-.00487451,.0671531,.0722618,.995476,-.00572148,.0671532,.0848191,.995477,-.00663658,.0671539,.0983882,.995498,-.00761986,.0671541,.112972,.995509,-.00867094,.0671542,.128568,.995509,-.00978951,.0671531,.145183,.995503,-.0109725,.0671491,.162808,.995501,-.012211,.0671465,.181441,.99553,-.0134565,.0671371,.201015,.99555,-.014391,.0670831,.221206,.99558,-.014351,.0668883,.240813,.995577,-.0173997,.0671055,.261257,.995602,-.0191111,.0671178,.284467,.995623,-.0206705,.0670946,.308765,.995658,-.022184,.0670472,.333905,.995705,-.0234832,.0669417,.359677,.995719,-.0241933,.0666714,.385554,.995786,-.0243539,.066266,.410951,.995887,-.0271866,.0664367,.437163,.995944,-.0296012,.0664931,.464842,.996004,-.0301045,.0660105,.49332,.996128,-.0298311,.0652694,.521131,.996253,-.0316426,.0650739,.549167,.996244,-.0339043,.0649433,.57737,.996309,-.033329,.0638926,.606073,.996417,-.0338935,.0630849,.634527,.996372,-.0353104,.0625083,.66256,.996542,-.0348942,.0611986,.690516,.996568,-.0351614,.060069,.718317,.996711,-.0354317,.0588522,.74528,.996671,-.0349513,.0571902,.772061,.996865,-.0345622,.0555321,.798089,.996802,-.0342566,.0537816,.823178,.996992,-.0330862,.0516095,.847949,.996944,-.0324666,.0495537,.871431,.997146,-.0309544,.0470302,.894357,.997189,-.0299372,.0446043,.916142,.997471,-.0281389,.0418812,.937193,.997515,-.0268702,.0391823,.957,.997812,-.0247166,.0361338,.975936,.998027,-.0233525,.0333945,.99391,.998233,-.0209839,.0301917,1.01075,.998481,-.0194309,.027271,1.02669,.998859,-.0169728,.0240162,1.04173,.99894,-.0152322,.0210517,1.05551,.999132,-.0127497,.0178632,1.06856,.999369,-.0108282,.014787,1.08054,.999549,-.00845886,.0116185,1.09185,.999805,-.0063937,.00867209,1.10207,.99985,-.00414582,.00566823,1.1117,.999912,-.00207443,.00277562,1.12022,1.00001,870226e-10,-53766e-9,1.12832,.991943,-178672e-11,.0893382,198384e-10,.991952,-450183e-10,.089339,499849e-9,.991956,-180074e-9,.0893394,.0019994,.991955,-405167e-9,.0893393,.00449867,.991953,-720298e-9,.0893391,.00799764,.991955,-.00112548,.0893393,.0124964,.991957,-.0016207,.0893395,.0179951,.991958,-.00220601,.0893396,.0244939,.991947,-.00288137,.0893385,.0319929,.991962,-.00364693,.0893399,.0404933,.991965,-.00450264,.0893399,.049995,.99198,-.00544862,.0893411,.0604995,.99197,-.00648491,.0893397,.0720074,.991976,-.00761164,.089341,.0845207,.99198,-.00882891,.0893405,.0980413,.991982,-.0101367,.0893396,.112571,.992008,-.011535,.0893415,.128115,.992026,-.0130228,.0893414,.144672,.992064,-.0145966,.0893418,.162241,.992041,-.0162421,.0893359,.180801,.992086,-.0178888,.0893214,.200302,.992157,-.0190368,.0892401,.220332,.992181,-.0195584,.0890525,.240144,.992175,-.0227257,.0892153,.260728,.99221,-.0254195,.089304,.283473,.99222,-.0274883,.0892703,.307673,.992317,-.0294905,.0892027,.332729,.992374,-.0311861,.0890577,.358387,.992505,-.0320656,.0886994,.384102,.992568,-.0329715,.0883198,.409767,.992675,-.036006,.0883602,.436145,.992746,-.0392897,.0884591,.463217,.992873,-.0399337,.0878287,.491557,.992934,-.040231,.0870108,.519516,.993091,-.0422013,.0865857,.547741,.993259,-.0443503,.0861937,.575792,.993455,-.0446368,.0851187,.604233,.993497,-.0454299,.0840576,.632925,.993694,-.0463296,.0829671,.660985,.993718,-.0470619,.0817185,.688714,.993973,-.0468838,.0800294,.716743,.994207,-.046705,.0781286,.74377,.994168,-.0469698,.0763337,.77042,.9945,-.0456816,.0738184,.796659,.994356,-.0455518,.0715545,.821868,.994747,-.0439488,.0686085,.846572,.994937,-.0430056,.065869,.870435,.995142,-.0413414,.0626446,.893272,.995451,-.0396521,.05929,.915376,.995445,-.0378453,.0558503,.936196,.995967,-.0355219,.0520949,.956376,.996094,-.0335146,.048377,.975327,.996622,-.030682,.0442575,.993471,.996938,-.0285504,.0404693,1.01052,.997383,-.0253399,.0360903,1.02637,.997714,-.0231651,.0322176,1.04139,.998249,-.0198138,.0278433,1.05542,.998596,-.0174337,.0238759,1.06846,.998946,-.0141349,.0195944,1.08056,.99928,-.0115603,.0156279,1.09181,.999507,-.00839065,.0114607,1.10213,.999697,-.005666,.00763325,1.11169,.999869,-.00269902,.00364946,1.12042,1.00001,623836e-10,-319288e-10,1.12832,.987221,-222675e-11,.111332,197456e-10,.98739,-561116e-10,.111351,497563e-9,.987448,-224453e-9,.111357,.00199031,.987441,-505019e-9,.111357,.0044782,.987442,-897816e-9,.111357,.00796129,.987442,-.00140284,.111357,.0124396,.987444,-.00202012,.111357,.0179132,.987442,-.00274964,.111357,.0243824,.987446,-.00359147,.111357,.0318474,.987435,-.00454562,.111356,.0403086,.987461,-.00561225,.111358,.0497678,.987458,-.00679125,.111358,.0602239,.987443,-.0080828,.111356,.0716792,.987476,-.0094872,.111358,.0841364,.98749,-.0110044,.111361,.097597,.987508,-.0126344,.111362,.112062,.987494,-.0143767,.111357,.127533,.987526,-.0162307,.111359,.144015,.987558,-.0181912,.111361,.161502,.987602,-.0202393,.111355,.179979,.987692,-.022273,.111346,.199386,.987702,-.0235306,.111215,.219183,.987789,-.0247628,.111061,.239202,.987776,-.0280668,.111171,.259957,.987856,-.0316751,.111327,.282198,.987912,-.0342468,.111282,.306294,.988,-.0367205,.111198,.331219,.988055,-.0387766,.110994,.356708,.988241,-.0397722,.110547,.382234,.988399,-.0416076,.110198,.408227,.988539,-.0448192,.110137,.434662,.988661,-.0483793,.110143,.461442,.988967,-.0495895,.109453,.489318,.989073,-.0506797,.108628,.517516,.989274,-.0526953,.108003,.545844,.989528,-.054578,.107255,.573823,.989709,-.0561503,.106294,.601944,.989991,-.056866,.104896,.630855,.990392,-.0572914,.103336,.658925,.990374,-.0586224,.10189,.686661,.990747,-.0584764,.099783,.714548,.991041,-.0582662,.0974309,.74186,.991236,-.0584118,.0951678,.768422,.991585,-.0573055,.0921581,.794817,.991984,-.0564241,.0891167,.820336,.9921,-.0553608,.085805,.84493,.992749,-.0533816,.0820354,.868961,.99288,-.0518661,.0782181,.891931,.993511,-.0492492,.0738935,.914186,.993617,-.0471956,.0696402,.93532,.99411,-.044216,.0649659,.95543,.994595,-.0416654,.0603177,.974685,.994976,-.0384314,.0553493,.992807,.995579,-.0353491,.0503942,1.00996,.996069,-.0319787,.0452123,1.02606,.996718,-.028472,.0400112,1.04114,.997173,-.0250789,.0349456,1.05517,.997818,-.0213326,.029653,1.0683,.998318,-.0178509,.024549,1.0805,.998853,-.0141118,.0194197,1.09177,.999218,-.0105914,.0143869,1.1022,.999594,-.00693474,.00943517,1.11175,.99975,-.00340478,.00464051,1.12056,1.00001,109172e-9,-112821e-9,1.12853,.983383,-266524e-11,.133358,196534e-10,.981942,-671009e-10,.133162,494804e-9,.981946,-268405e-9,.133163,.00197923,.981944,-603912e-9,.133163,.00445326,.981941,-.00107362,.133162,.00791693,.981946,-.00167755,.133163,.0123703,.981944,-.00241569,.133162,.0178135,.981945,-.00328807,.133163,.0242466,.981945,-.00429472,.133162,.03167,.981955,-.00543573,.133164,.0400846,.981951,-.00671105,.133163,.0494901,.981968,-.00812092,.133165,.0598886,.981979,-.00966541,.133166,.0712811,.981996,-.0113446,.133168,.083669,.982014,-.0131585,.133169,.0970533,.982011,-.0151073,.133167,.111438,.982062,-.0171906,.133172,.126826,.9821,-.0194067,.133175,.143215,.982149,-.0217502,.133176,.160609,.982163,-.0241945,.133173,.178981,.982247,-.0265907,.133148,.198249,.982291,-.027916,.132974,.217795,.982396,-.0299663,.132868,.238042,.982456,-.0334544,.132934,.258901,.982499,-.0378636,.133137,.280639,.982617,-.0409274,.133085,.304604,.98274,-.0438523,.132985,.329376,.982944,-.0462288,.132728,.354697,.98308,-.0475995,.132228,.380102,.983391,-.0501901,.131924,.406256,.983514,-.0535899,.131737,.432735,.98373,-.0571858,.131567,.459359,.984056,-.0592353,.130932,.486637,.984234,-.0610488,.130092,.51509,.984748,-.0630758,.12923,.543461,.985073,-.0647398,.128174,.571376,.985195,-.0671941,.127133,.599414,.985734,-.0681345,.125576,.628134,.986241,-.0686089,.123639,.656399,.986356,-.0698511,.121834,.684258,.986894,-.0700931,.119454,.711818,.987382,-.0698321,.116718,.739511,.988109,-.0693975,.113699,.766267,.988363,-.0689584,.110454,.792456,.989112,-.0672353,.106602,.81813,.989241,-.0662034,.10267,.842889,.990333,-.0638938,.0981381,.867204,.990591,-.0618534,.0935388,.89038,.991106,-.0593117,.088553,.912576,.991919,-.0562676,.0832187,.934118,.992111,-.0534085,.0778302,.954254,.992997,-.0495459,.0720453,.973722,.993317,-.0463707,.0663458,.991949,.994133,-.0421245,.0601883,1.00936,.994705,-.0384977,.0542501,1.02559,.995495,-.0340956,.0479862,1.04083,.996206,-.030105,.041887,1.05497,.996971,-.0256095,.0355355,1.06824,.997796,-.0213932,.0293655,1.08056,.998272,-.0169612,.0232926,1.09182,.998857,-.0126756,.0172786,1.10219,.99939,-.00832486,.0113156,1.11192,.999752,-.00410826,.00557892,1.12075,1,150957e-9,-119101e-9,1.12885,.975169,-309397e-11,.154669,195073e-10,.975439,-779608e-10,.154712,491534e-9,.975464,-311847e-9,.154716,.00196617,.975464,-701656e-9,.154716,.00442387,.975462,-.0012474,.154715,.0078647,.975461,-.00194906,.154715,.0122886,.975464,-.00280667,.154715,.0176959,.975468,-.00382025,.154716,.0240867,.975471,-.00498985,.154716,.0314612,.975472,-.00631541,.154717,.0398199,.975486,-.00779719,.154718,.0491639,.975489,-.00943505,.154718,.0594932,.975509,-.0112295,.154721,.0708113,.97554,-.0131802,.154724,.0831176,.975557,-.0152876,.154726,.096415,.975585,-.0175512,.154728,.110705,.975605,-.0199713,.154729,.125992,.975645,-.0225447,.154729,.142272,.975711,-.0252649,.154735,.159549,.975788,-.0280986,.154736,.177805,.975872,-.0308232,.154704,.196911,.975968,-.0324841,.154525,.216324,.976063,-.0351281,.154432,.236628,.976157,-.0388618,.15446,.257539,.976204,-.0437704,.154665,.278975,.976358,-.047514,.154652,.302606,.976571,-.0508638,.154535,.327204,.976725,-.0534995,.154221,.352276,.977013,-.0555547,.153737,.377696,.977294,-.0586728,.153403,.403855,.977602,-.0622715,.15312,.430333,.977932,-.0658166,.152755,.456855,.978241,-.0689877,.152233,.483668,.978602,-.0712805,.15132,.512097,.979234,-.0732775,.150235,.540455,.97977,-.075163,.148978,.568486,.979995,-.0778026,.147755,.596524,.98078,-.0791854,.146019,.624825,.981628,-.0799666,.143906,.653403,.982067,-.0808532,.141561,.681445,.98271,-.0816024,.139025,.708918,.983734,-.0812511,.135764,.736594,.98431,-.0806201,.132152,.763576,.985071,-.0801605,.12846,.789797,.98618,-.0784208,.124084,.815804,.986886,-.0766643,.1193,.840869,.987485,-.0747744,.114236,.864952,.988431,-.0716701,.108654,.888431,.988886,-.0691609,.102994,.910963,.990024,-.0654048,.0967278,.932629,.990401,-.0619765,.090384,.95313,.991093,-.0579296,.0837885,.972587,.992018,-.0536576,.0770171,.991184,.992536,-.0493719,.0701486,1.00863,.993421,-.0444813,.062953,1.02494,.993928,-.040008,.0560455,1.04017,.994994,-.0347982,.04856,1.05463,.995866,-.0301017,.0416152,1.06807,.996916,-.0248225,.0342597,1.08039,.997766,-.0199229,.0271668,1.09177,.998479,-.0147422,.0201387,1.10235,.99921,-.00980173,.0131944,1.11206,.999652,-.0047426,.00640712,1.12104,.999998,891673e-10,-10379e-8,1.12906,.967868,-351885e-11,.175947,193569e-10,.968001,-886733e-10,.175972,487782e-9,.96801,-354697e-9,.175973,.00195115,.968012,-798063e-9,.175974,.00439006,.968011,-.00141879,.175973,.00780461,.968011,-.00221686,.175973,.0121948,.968016,-.00319231,.175974,.0175607,.968019,-.00434515,.175974,.0239027,.968018,-.00567538,.175974,.0312208,.968033,-.00718308,.175977,.0395158,.968049,-.00886836,.175979,.0487885,.968047,-.0107312,.175978,.0590394,.968072,-.0127719,.175981,.0702705,.968108,-.0149905,.175986,.0824836,.968112,-.0173866,.175985,.0956783,.968173,-.0199611,.175993,.109862,.96827,-.0227128,.176008,.125033,.968292,-.025639,.17601,.141193,.968339,-.0287299,.176007,.158336,.968389,-.0319399,.176001,.176441,.968501,-.034941,.175962,.195359,.968646,-.0370812,.175793,.214686,.968789,-.0402329,.175708,.234973,.96886,-.0442601,.1757,.255871,.969013,-.049398,.175876,.277238,.969242,-.0539932,.17594,.300326,.969419,-.0577299,.175781,.324702,.969763,-.0605643,.175432,.349527,.970093,-.0634488,.174992,.374976,.970361,-.0670589,.174611,.401097,.970825,-.0708246,.174226,.427496,.971214,-.0742871,.173684,.453858,.971622,-.0782608,.173186,.480637,.972175,-.0813151,.172288,.508655,.972944,-.0832678,.170979,.536973,.973595,-.0855964,.169573,.565138,.974345,-.0882163,.168152,.593222,.975233,-.0901671,.166314,.621201,.976239,-.0912111,.163931,.649919,.977289,-.0916959,.161106,.678011,.978076,-.0927061,.158272,.705717,.979533,-.0925562,.15475,.733228,.980335,-.0918159,.150638,.760454,.981808,-.0908508,.146201,.786918,.983061,-.0896172,.141386,.812953,.984148,-.0871588,.135837,.838281,.985047,-.0850624,.130135,.862594,.986219,-.0818541,.123882,.88633,.987043,-.0784523,.117126,.908952,.988107,-.0749601,.110341,.930744,.988955,-.0703548,.102885,.951728,.989426,-.0662798,.0954167,.971166,.990421,-.0610834,.0876331,.989984,.991032,-.0562936,.0797785,1.00765,.992041,-.0508154,.0718166,1.02434,.992794,-.0454045,.0637125,1.03976,.993691,-.0398194,.0555338,1.05418,.994778,-.0341482,.0473388,1.06772,.995915,-.028428,.0391016,1.08028,.997109,-.022642,.0309953,1.09185,.998095,-.0168738,.0230288,1.10247,.998985,-.0111274,.0150722,1.11229,.999581,-.00543881,.00740605,1.12131,1.00003,162239e-9,-105549e-9,1.12946,.959505,-393734e-11,.196876,191893e-10,.959599,-992157e-10,.196895,483544e-9,.959641,-396868e-9,.196903,.0019342,.959599,-892948e-9,.196895,.00435193,.959603,-.00158747,.196896,.0077368,.959604,-.00248042,.196896,.0120888,.959605,-.00357184,.196896,.0174082,.959605,-.00486169,.196896,.0236949,.959613,-.00635008,.196897,.0309497,.959619,-.00803696,.196898,.0391725,.959636,-.00992255,.196901,.0483649,.959634,-.0120067,.1969,.0585266,.959675,-.0142898,.196906,.0696609,.959712,-.0167717,.196911,.0817678,.959752,-.0194524,.196918,.0948494,.959807,-.0223321,.196925,.10891,.959828,-.0254091,.196924,.123947,.959906,-.0286815,.196934,.139968,.960005,-.0321371,.196944,.156968,.960071,-.0357114,.196936,.17491,.960237,-.0389064,.196882,.193597,.960367,-.041623,.196731,.21285,.960562,-.0452655,.196654,.233075,.960735,-.0496207,.196643,.253941,.960913,-.0549379,.196774,.275278,.961121,-.0603414,.196893,.297733,.96139,-.0644244,.196717,.321877,.961818,-.067556,.196314,.346476,.962175,-.0712709,.195917,.371907,.96255,-.0752848,.1955,.397916,.963164,-.0792073,.195026,.424229,.963782,-.0828225,.194424,.450637,.964306,-.0873119,.193831,.477288,.964923,-.0911051,.192973,.504716,.966048,-.093251,.19151,.533053,.967024,-.0958983,.190013,.561366,.968038,-.09835,.188253,.589464,.969152,-.100754,.186257,.617433,.970557,-.102239,.183775,.645801,.972104,-.102767,.180645,.674278,.973203,-.103492,.177242,.702004,.975123,-.103793,.17345,.729529,.97641,-.102839,.168886,.756712,.978313,-.101687,.163892,.783801,.980036,-.100314,.158439,.809671,.981339,-.097836,.152211,.835402,.982794,-.0950006,.145679,.860081,.984123,-.0920994,.138949,.883757,.984918,-.0878641,.131283,.90685,.985999,-.083939,.123464,.928786,.987151,-.0791234,.115324,.94983,.987827,-.0739332,.106854,.96962,.988806,-.0688088,.0982691,.98861,.989588,-.0628962,.0893456,1.00667,.990438,-.0573146,.0805392,1.02344,.991506,-.0509433,.0713725,1.03933,.992492,-.0448724,.0623732,1.05378,.993663,-.0383497,.0530838,1.06747,.994956,-.0319593,.0439512,1.08007,.99634,-.025401,.0347803,1.09182,.99761,-.0189687,.0257954,1.1025,.99863,-.0124441,.0169893,1.11247,.99947,-.00614003,.00829498,1.12151,1.00008,216624e-9,-146107e-9,1.12993,.950129,-434955e-11,.217413,190081e-10,.950264,-10957e-8,.217444,47884e-8,.9503,-438299e-9,.217451,.00191543,.950246,-986124e-9,.21744,.00430951,.950246,-.00175311,.21744,.00766137,.950245,-.00273923,.21744,.011971,.950253,-.00394453,.217441,.0172385,.950258,-.00536897,.217442,.0234641,.950267,-.00701262,.217444,.030648,.950277,-.00887551,.217446,.038791,.950284,-.0109576,.217446,.0478931,.950312,-.0132591,.217451,.0579568,.950334,-.01578,.217454,.0689821,.950378,-.0185204,.217462,.0809714,.950417,-.0214803,.217467,.0939265,.950488,-.0246594,.217479,.10785,.950534,-.0280565,.217483,.122743,.950633,-.0316685,.217498,.138611,.950698,-.0354787,.217499,.155442,.950844,-.0394003,.217507,.173208,.950999,-.0426812,.217419,.191605,.951221,-.0461302,.217317,.21084,.951412,-.0502131,.217238,.230945,.951623,-.0549183,.21722,.251745,.951867,-.0604493,.217306,.273001,.952069,-.0665189,.217466,.294874,.952459,-.0709179,.217266,.318732,.952996,-.0746112,.216891,.34318,.953425,-.0789252,.216503,.36849,.953885,-.0833293,.216042,.394373,.954617,-.087371,.215469,.420505,.955429,-.0914054,.214802,.446907,.956068,-.0961671,.214146,.473522,.957094,-.10048,.213286,.50052,.958372,-.103248,.211796,.528715,.959654,-.106033,.21016,.557065,.961305,-.108384,.208149,.585286,.962785,-.111122,.206024,.613334,.964848,-.112981,.203442,.641334,.966498,-.113717,.19996,.669955,.968678,-.114121,.196105,.698094,.970489,-.114524,.191906,.725643,.972903,-.113792,.186963,.752856,.974701,-.112406,.181343,.780013,.976718,-.110685,.175185,.806268,.978905,-.108468,.168535,.832073,.980267,-.105061,.161106,.857149,.981967,-.101675,.153387,.881145,.983063,-.0974492,.145199,.904255,.984432,-.0925815,.136527,.926686,.985734,-.0877983,.127584,.947901,.986228,-.081884,.118125,.968111,.98719,-.0761208,.108594,.98719,.988228,-.0698196,.0989996,1.00559,.989046,-.0632739,.0890074,1.02246,.990242,-.056522,.0790832,1.03841,.991252,-.0495272,.0689182,1.05347,.992542,-.0425373,.0588592,1.06724,.994096,-.0353198,.0486833,1.08009,.995593,-.028235,.0385977,1.09177,.99711,-.0209511,.0286457,1.10274,.998263,-.0139289,.0188497,1.11262,.999254,-.0067359,.009208,1.12191,.999967,141846e-9,-657764e-10,1.13024,.935608,-474692e-11,.236466,187817e-10,.93996,-11971e-8,.237568,473646e-9,.939959,-478845e-9,.237567,.0018946,.939954,-.0010774,.237566,.00426284,.939956,-.00191538,.237566,.00757842,.939954,-.00299277,.237566,.0118413,.93996,-.00430961,.237567,.0170518,.939969,-.00586589,.237569,.02321,.939982,-.00766166,.237572,.0303164,.939987,-.00969686,.237572,.0383711,.939997,-.0119715,.237574,.0473751,.940031,-.0144858,.237581,.0573298,.940073,-.0172399,.237589,.0682366,.94012,-.0202335,.237598,.080097,.940162,-.0234663,.237604,.0929116,.940237,-.0269387,.237615,.106686,.940328,-.0306489,.237632,.121421,.940419,-.0345917,.237645,.137115,.940522,-.0387481,.237654,.153766,.940702,-.0429906,.237661,.17133,.940871,-.0465089,.237561,.189502,.941103,-.050531,.23748,.208616,.941369,-.0550657,.237423,.228595,.941641,-.0601337,.237399,.249287,.941903,-.0658804,.237443,.270467,.942224,-.0722674,.237597,.292024,.942633,-.0771788,.237419,.315272,.943172,-.0815623,.237068,.339579,.943691,-.0863973,.236682,.364717,.944382,-.0911536,.236213,.390435,.945392,-.0952967,.235562,.416425,.946185,-.0998948,.234832,.442772,.947212,-.104796,.234114,.469347,.948778,-.10928,.233222,.496162,.950149,-.113081,.231845,.523978,.951989,-.115893,.230005,.552295,.953921,-.11846,.227862,.580569,.955624,-.12115,.225439,.608698,.958234,-.123373,.222635,.636696,.960593,-.124519,.219093,.665208,.963201,-.124736,.214749,.693557,.965642,-.125012,.210059,.721334,.968765,-.124661,.204935,.748613,.971753,-.122996,.198661,.776224,.973751,-.120998,.191823,.802461,.976709,-.118583,.184359,.828399,.977956,-.115102,.176437,.853693,.979672,-.111077,.167681,.877962,.981816,-.10688,.158872,.901564,.98238,-.101469,.149398,.924057,.983964,-.0960013,.139436,.945751,.984933,-.0899626,.12943,.966272,.985694,-.0832973,.11894,.985741,.986822,-.0767082,.108349,1.00407,.987725,-.0693614,.0976026,1.02154,.98877,-.06211,.086652,1.03757,.990129,-.0544143,.0756182,1.05296,.991337,-.046744,.0645753,1.06683,.992978,-.0387931,.0534683,1.0798,.994676,-.030973,.0424137,1.09181,.99645,-.0230311,.0314035,1.10286,.997967,-.0152065,.0206869,1.11291,.99922,-.00744837,.010155,1.12237,1.00002,240209e-9,-752767e-10,1.13089,.922948,-515351e-11,.255626,186069e-10,.928785,-129623e-9,.257244,468009e-9,.928761,-51849e-8,.257237,.00187202,.928751,-.0011666,.257235,.00421204,.928751,-.00207395,.257234,.0074881,.928754,-.00324055,.257235,.0117002,.92876,-.00466639,.257236,.0168486,.928763,-.00635149,.257237,.0229334,.928774,-.00829584,.257239,.029955,.928791,-.0104995,.257243,.0379139,.928804,-.0129623,.257245,.0468108,.928847,-.0156846,.257255,.0566473,.92889,-.0186661,.257263,.0674246,.928924,-.0219067,.257268,.0791433,.928989,-.0254066,.257282,.0918076,.92909,-.0291651,.257301,.105419,.92918,-.0331801,.257316,.119978,.92929,-.0374469,.257332,.135491,.929453,-.041939,.257357,.151948,.929586,-.0464612,.257347,.169275,.929858,-.0503426,.257269,.187257,.930125,-.0548409,.257199,.206204,.930403,-.0598063,.257149,.22601,.930726,-.0652437,.257122,.246561,.931098,-.0712376,.257153,.267618,.931396,-.0777506,.257237,.288993,.931947,-.0832374,.257124,.311527,.932579,-.0883955,.25683,.335697,.933194,-.0937037,.256444,.360634,.934013,-.0987292,.255939,.386126,.935307,-.103215,.255282,.412018,.936374,-.108234,.254538,.438292,.93776,-.113234,.253728,.464805,.939599,-.118013,.25275,.491464,.941036,-.122661,.251404,.518751,.94337,-.125477,.249435,.547133,.945318,-.128374,.247113,.575456,.947995,-.130996,.244441,.60372,.950818,-.133438,.241352,.63174,.954378,-.135004,.237849,.659971,.957151,-.135313,.233188,.688478,.960743,-.13521,.228001,.716767,.964352,-.135007,.222249,.744349,.967273,-.133523,.21542,.771786,.969767,-.131155,.208039,.798639,.973195,-.128492,.200076,.824774,.975557,-.125094,.191451,.850222,.977692,-.120578,.18184,.874761,.98026,-.115882,.172102,.898497,.981394,-.110372,.161859,.921636,.982386,-.10415,.15108,.943467,.983783,-.0978128,.140407,.964045,.98422,-.0906171,.129058,.98398,.985447,-.0832921,.117614,1.00276,.986682,-.0754412,.10585,1.02047,.987326,-.0673885,.0940943,1.03678,.988707,-.0592565,.0822093,1.05218,.990185,-.050717,.070192,1.06652,.991866,-.0423486,.0582081,1.07965,.993897,-.0336118,.0460985,1.09188,.995841,-.0252178,.0342737,1.10307,.997605,-.0164893,.0224829,1.11324,.999037,-.00817112,.0110647,1.12262,1.00003,291686e-9,-168673e-9,1.13139,.915304,-552675e-11,.275999,183285e-10,.91668,-139285e-9,.276414,461914e-9,.916664,-55713e-8,.276409,.00184763,.916653,-.00125354,.276406,.00415715,.916651,-.00222851,.276405,.00739053,.916655,-.00348205,.276406,.0115478,.916653,-.00501414,.276405,.0166291,.916667,-.00682478,.276409,.0226346,.91668,-.00891398,.276412,.0295648,.91669,-.0112817,.276413,.0374199,.916727,-.013928,.276422,.0462016,.916759,-.0168528,.276429,.0559101,.916793,-.0200558,.276436,.0665466,.916849,-.0235373,.276448,.0781139,.916964,-.0272973,.276474,.0906156,.917047,-.0313344,.276491,.104051,.917152,-.0356465,.276511,.118424,.917286,-.0402271,.276533,.133736,.917469,-.0450408,.276564,.149978,.917686,-.0497872,.276563,.167057,.917953,-.0540937,.276493,.184846,.918228,-.0590709,.276437,.203614,.918572,-.0644277,.276398,.223212,.918918,-.0702326,.276362,.243584,.919356,-.076484,.276383,.264465,.919842,-.0830808,.276434,.285701,.920451,-.0892972,.276407,.307559,.921113,-.095016,.276128,.331501,.921881,-.100771,.275754,.356207,.923027,-.106029,.275254,.381477,.924364,-.111029,.274595,.40722,.925818,-.116345,.273841,.433385,.92746,-.121424,.272913,.459848,.929167,-.12657,.271837,.486493,.931426,-.131581,.270575,.513432,.934001,-.135038,.268512,.541502,.936296,-.138039,.266135,.569658,.939985,-.140687,.263271,.598375,.943516,-.143247,.260058,.626563,.94782,-.145135,.256138,.654711,.951023,-.145733,.251154,.683285,.955338,-.145554,.245562,.711831,.959629,-.145008,.239265,.739573,.963123,-.144003,.232064,.767027,.966742,-.141289,.224036,.794359,.969991,-.138247,.215305,.820361,.973403,-.134786,.206051,.846548,.975317,-.129966,.195914,.871541,.977647,-.12471,.185184,.895313,.980137,-.119086,.174161,.918398,.981031,-.112297,.162792,.940679,.982037,-.105372,.150952,.961991,.983164,-.097821,.138921,.981913,.983757,-.0897245,.126611,1.00109,.985036,-.0815974,.114228,1.01902,.986289,-.0727725,.101389,1.03604,.987329,-.0639323,.0886476,1.05149,.989193,-.0548109,.0756837,1.06619,.990716,-.045687,.0627581,1.07948,.992769,-.0364315,.0498337,1.09172,.99524,-.0271761,.0370305,1.1033,.997154,-.0179609,.0243959,1.11353,.998845,-.00878063,.0119567,1.12319,1.00002,259038e-9,-108146e-9,1.13177,.903945,-591681e-11,.295126,181226e-10,.903668,-148672e-9,.295037,455367e-9,.903677,-594683e-9,.29504,.00182145,.903673,-.00133805,.295039,.00409831,.903666,-.00237872,.295036,.00728584,.903668,-.00371676,.295037,.0113842,.903679,-.00535212,.29504,.0163936,.903684,-.00728479,.295041,.0223141,.903698,-.00951473,.295044,.0291462,.903718,-.0120419,.295049,.0368904,.903754,-.0148664,.295058,.0455477,.903801,-.017988,.29507,.0551194,.903851,-.0214064,.295082,.0656058,.903921,-.0251219,.295097,.0770109,.904002,-.0291337,.295116,.0893354,.904111,-.033441,.29514,.102583,.904246,-.0380415,.295169,.116755,.904408,-.0429258,.295202,.131853,.904637,-.0480468,.295245,.147869,.904821,-.0529208,.295214,.164658,.905163,-.0577748,.295185,.182274,.905469,-.0631763,.295143,.200828,.905851,-.068917,.295112,.2202,.906322,-.0750861,.295104,.240372,.906761,-.0815855,.295086,.261082,.90735,-.0882138,.295095,.282123,.908087,-.095082,.295139,.303563,.908826,-.101488,.29492,.327028,.909832,-.107577,.294577,.351464,.911393,-.113033,.294115,.376497,.912804,-.118629,.293446,.402115,.914081,-.124232,.292581,.428111,.91637,-.129399,.29166,.454442,.91814,-.134892,.290422,.481024,.921179,-.140069,.289194,.507924,.924544,-.144431,.287421,.535557,.927995,-.147498,.284867,.563984,.931556,-.150197,.281722,.5923,.935777,-.152711,.278207,.620832,.940869,-.154836,.274148,.649069,.945994,-.155912,.269057,.677746,.949634,-.155641,.262799,.706293,.955032,-.154809,.256097,.734278,.95917,-.153678,.248618,.761751,.962931,-.151253,.239794,.789032,.966045,-.147625,.230281,.815422,.96971,-.143964,.220382,.841787,.972747,-.139464,.209846,.867446,.975545,-.133459,.198189,.892004,.978381,-.127424,.186362,.915458,.979935,-.120506,.173964,.937948,.980948,-.11282,.161429,.959732,.982234,-.104941,.148557,.980118,.982767,-.0962905,.135508,.999463,.983544,-.0873625,.122338,1.01756,.984965,-.0783447,.108669,1.03492,.986233,-.0684798,.0949911,1.05087,.987796,-.0590867,.0811386,1.0656,.989885,-.0489145,.0673099,1.0794,.991821,-.0391,.0535665,1.09174,.99448,-.029087,.0397529,1.10341,.996769,-.019114,.0261463,1.11383,.998641,-.00947007,.0128731,1.1237,.999978,446316e-9,-169093e-9,1.13253,.888362,-627064e-11,.312578,178215e-10,.889988,-157791e-9,.313148,448451e-9,.889825,-631076e-9,.313092,.00179356,.88984,-.00141994,.313097,.00403554,.889828,-.0025243,.313092,.00717429,.889831,-.00394421,.313093,.0112099,.889831,-.00567962,.313093,.0161425,.889844,-.00773051,.313096,.0219724,.889858,-.0100968,.3131,.0286999,.889882,-.0127786,.313106,.0363256,.889918,-.0157757,.313116,.0448509,.889967,-.0190878,.313129,.0542758,.89003,-.022715,.313145,.0646032,.890108,-.0266566,.313165,.0758339,.890218,-.0309131,.313193,.0879729,.890351,-.0354819,.313226,.101019,.89051,-.0403613,.313263,.114979,.890672,-.0455385,.313294,.129848,.890882,-.0509444,.313333,.145616,.891189,-.0559657,.313324,.162122,.891457,-.0613123,.313281,.179524,.891856,-.0671488,.313281,.197855,.892312,-.0732732,.313268,.216991,.892819,-.0797865,.313263,.236924,.893369,-.0865269,.313247,.257433,.894045,-.0931592,.313205,.278215,.894884,-.100532,.313276,.299467,.895832,-.107716,.313205,.322276,.897043,-.114099,.312873,.34642,.898515,-.119941,.312331,.371187,.900191,-.126044,.311731,.396656,.90188,-.131808,.310859,.422488,.904359,-.137289,.309857,.448744,.906923,-.142991,.308714,.475239,.910634,-.148253,.307465,.501983,.914502,-.153332,.305774,.529254,.919046,-.156646,.303156,.557709,.923194,-.159612,.299928,.586267,.928858,-.162027,.296245,.614925,.934464,-.164203,.291832,.643187,.939824,-.165602,.286565,.671601,.944582,-.165383,.280073,.700213,.949257,-.164439,.272891,.728432,.954389,-.162953,.264771,.756082,.958595,-.161007,.255927,.78369,.962138,-.157243,.245769,.810769,.966979,-.152872,.235127,.836999,.969566,-.148209,.22347,.862684,.972372,-.142211,.211147,.887847,.975916,-.135458,.198606,.911843,.978026,-.128398,.185498,.934795,.979686,-.120313,.17171,.956787,.980748,-.11166,.158159,.978046,.981622,-.103035,.144399,.997693,.982356,-.0930328,.13001,1.01642,.983308,-.0834627,.115778,1.03366,.985037,-.0732249,.101327,1.05014,.986493,-.0628145,.086554,1.06507,.988484,-.0526556,.0720413,1.07907,.991051,-.0415744,.0571151,1.09189,.993523,-.0314275,.0426643,1.10369,.99628,-.0203603,.0279325,1.11423,.998344,-.0102446,.0138182,1.12421,.999997,42612e-8,-193628e-9,1.1333,.871555,-660007e-11,.329176,174749e-10,.875255,-166579e-9,.330571,441051e-9,.875644,-666394e-9,.330718,.00176441,.875159,-.00149903,.330536,.00396899,.87516,-.00266493,.330536,.007056,.875158,-.00416393,.330535,.0110251,.87516,-.00599598,.330535,.0158764,.875163,-.00816108,.330536,.0216101,.875174,-.0106591,.330538,.0282266,.875199,-.0134899,.330545,.0357266,.875257,-.0166538,.330563,.0441117,.875304,-.0201501,.330575,.0533821,.875373,-.0239785,.330595,.0635395,.875464,-.0281389,.330619,.0745872,.875565,-.0326301,.330645,.0865255,.875691,-.0374516,.330676,.0993599,.875897,-.0425993,.330733,.113093,.876091,-.0480576,.330776,.127722,.876353,-.0537216,.330826,.143227,.876649,-.0589807,.330809,.159462,.877034,-.0647865,.330819,.176642,.877443,-.0709789,.330817,.194702,.877956,-.0774782,.330832,.213577,.878499,-.0843175,.330822,.233246,.879144,-.0912714,.330804,.253512,.879982,-.0980824,.330766,.274137,.88097,-.105823,.330864,.295209,.882051,-.113671,.330896,.317226,.883397,-.120303,.330545,.341068,.884987,-.12667,.330068,.365613,.886789,-.133118,.329418,.390807,.889311,-.139024,.328683,.416494,.891995,-.144971,.327729,.442618,.895106,-.150747,.326521,.469131,.899527,-.156283,.325229,.495921,.90504,-.161707,.32378,.523162,.909875,-.165661,.32122,.55092,.91561,-.168755,.317942,.579928,.921225,-.171193,.313983,.608539,.927308,-.17319,.309636,.636854,.933077,-.174819,.304262,.66523,.938766,-.175002,.297563,.693609,.943667,-.173946,.289613,.722157,.949033,-.172221,.281227,.750021,.953765,-.169869,.271545,.777466,.95804,-.166578,.261034,.804853,.962302,-.161761,.249434,.831569,.966544,-.156636,.237484,.857779,.969372,-.150784,.224395,.883051,.972486,-.143672,.210786,.907864,.975853,-.135772,.196556,.931223,.977975,-.127942,.182307,.954061,.979122,-.118347,.167607,.97531,.980719,-.109112,.152739,.995666,.981223,-.0991789,.137932,1.01475,.98216,-.0883553,.122692,1.03253,.983379,-.0780825,.107493,1.04917,.985434,-.0665646,.0917791,1.06464,.987332,-.0557714,.0764949,1.07896,.990004,-.0442805,.060721,1.09199,.992975,-.0331676,.0452284,1.10393,.995811,-.0219547,.0297934,1.11476,.9982,-.0107613,.0146415,1.12484,1.00002,248678e-9,-14555e-8,1.13413,.859519,-693595e-11,.347264,171673e-10,.859843,-17503e-8,.347394,433219e-9,.859656,-700076e-9,.347319,.00173277,.859671,-.00157517,.347325,.00389875,.859669,-.00280028,.347324,.00693112,.85967,-.0043754,.347324,.01083,.859665,-.00630049,.347321,.0155954,.859685,-.0085755,.347328,.0212278,.859694,-.0112003,.347329,.0277273,.859718,-.0141747,.347336,.0350946,.85976,-.0174988,.347348,.0433314,.85982,-.0211722,.347366,.0524384,.859892,-.0251941,.347387,.0624168,.860006,-.0295649,.347422,.0732708,.860122,-.0342825,.347453,.0849999,.860282,-.0393462,.347499,.0976102,.860482,-.0447513,.347554,.111104,.860719,-.0504775,.347614,.125479,.860998,-.0563577,.347666,.140703,.861322,-.0619473,.347662,.156681,.861724,-.0681277,.347684,.173597,.862198,-.0746567,.347709,.191371,.862733,-.0815234,.347727,.209976,.863371,-.0886643,.347744,.229351,.86414,-.0957908,.347734,.24934,.865138,-.102912,.34772,.269797,.866182,-.110924,.3478,.290654,.867436,-.119223,.347911,.312074,.869087,-.126197,.347649,.335438,.870859,-.133145,.347222,.359732,.872997,-.139869,.346645,.38467,.875939,-.146089,.345935,.41019,.879012,-.152334,.345012,.436218,.883353,-.15821,.343924,.462641,.888362,-.164097,.342636,.489449,.895026,-.169528,.341351,.516629,.900753,-.174408,.339115,.544109,.906814,-.17751,.335809,.572857,.912855,-.180101,.331597,.601554,.919438,-.182116,.32698,.630198,.925962,-.183494,.321449,.658404,.931734,-.184159,.314595,.686625,.93762,-.18304,.306462,.71531,.943858,-.181323,.297514,.744272,.948662,-.178683,.287447,.771462,.953299,-.175379,.276166,.798593,.957346,-.170395,.263758,.8256,.962565,-.165042,.251019,.852575,.966075,-.158655,.237011,.878316,.969048,-.151707,.222518,.90329,.972423,-.143271,.207848,.927745,.975833,-.134824,.192463,.950859,.977629,-.125444,.1768,.972947,.978995,-.114949,.161033,.993263,.980533,-.104936,.145523,1.01337,.980745,-.0935577,.129799,1.03128,.981814,-.0822956,.113486,1.04825,.983943,-.0710082,.0972925,1.06405,.986141,-.0587931,.0808138,1.0785,.988878,-.0472755,.0644915,1.09204,.992132,-.0349128,.0478128,1.10413,.9953,-.0232407,.031621,1.11527,.998117,-.0112713,.0154935,1.12551,1.00003,339743e-9,-195763e-9,1.13504,.845441,-729126e-11,.364305,169208e-10,.843588,-183164e-9,.363506,425067e-9,.843412,-73253e-8,.36343,.00169999,.843401,-.00164818,.363426,.00382495,.843399,-.00293008,.363425,.00679993,.843401,-.00457822,.363425,.010625,.843394,-.00659249,.363421,.0153002,.843398,-.00897282,.363421,.0208258,.843415,-.0117191,.363426,.0272024,.843438,-.0148312,.363432,.0344305,.843483,-.018309,.363447,.0425116,.84356,-.0221521,.363472,.0514471,.843646,-.0263597,.363499,.061238,.843743,-.0309315,.363527,.0718873,.84388,-.0358658,.363569,.0833969,.844079,-.0411624,.363631,.0957742,.844279,-.0468128,.363688,.109015,.844549,-.0527923,.363761,.123124,.844858,-.0588204,.363817,.138044,.84522,-.0647573,.36383,.153755,.845669,-.0713181,.363879,.170394,.846155,-.0781697,.363908,.187861,.846789,-.0853913,.363969,.206176,.847502,-.0928086,.363999,.225244,.8484,-.10005,.363997,.244926,.849461,-.107615,.364008,.265188,.850562,-.115814,.364055,.28587,.851962,-.124334,.364179,.306926,.854326,-.131995,.364233,.329605,.856295,-.139338,.363856,.35359,.858857,-.146346,.363347,.37831,.862428,-.152994,.362807,.403722,.866203,-.159463,.361963,.429537,.871629,-.165623,.36112,.456,.877365,-.171649,.359917,.482773,.883744,-.177151,.35848,.509705,.890693,-.182381,.356523,.537215,.897278,-.186076,.3533,.565493,.903958,-.188602,.349095,.594293,.910908,-.190755,.344215,.623165,.918117,-.192063,.338606,.651573,.924644,-.192758,.331544,.679869,.931054,-.192238,.323163,.708668,.937303,-.190035,.313529,.737201,.943387,-.187162,.303152,.764977,.948494,-.183876,.29146,.792683,.952546,-.178901,.277917,.819228,.958077,-.173173,.264753,.846559,.962462,-.16645,.25002,.872962,.966569,-.159452,.234873,.898729,.969108,-.15074,.218752,.923126,.973072,-.141523,.202673,.947278,.975452,-.132075,.186326,.969938,.977784,-.121257,.169396,.991325,.97899,-.110182,.153044,1.01123,.979777,-.0989634,.136485,1.0299,.980865,-.0865894,.119343,1.04727,.982432,-.0746115,.102452,1.06341,.984935,-.0621822,.0852423,1.07834,.987776,-.0495694,.0678546,1.092,.99103,-.0372386,.0506917,1.1043,.99474,-.0244353,.0333316,1.11576,.997768,-.0121448,.0164348,1.12617,1.00003,31774e-8,-169504e-9,1.13598,.825551,-756799e-11,.378425,165099e-10,.82664,-190922e-9,.378923,416504e-9,.826323,-763495e-9,.378779,.0016656,.826359,-.00171789,.378795,.00374768,.82636,-.00305402,.378795,.00666259,.826368,-.00477185,.378798,.0104104,.826364,-.00687131,.378795,.0149912,.826368,-.00935232,.378795,.0204054,.826376,-.0122146,.378797,.0266532,.826399,-.0154581,.378803,.0337355,.82646,-.0190825,.378824,.0416537,.826525,-.0230873,.378846,.0504091,.826614,-.0274719,.378876,.0600032,.82674,-.0322355,.378917,.0704393,.826888,-.0373766,.378964,.0817195,.827078,-.0428936,.379024,.0938492,.827318,-.0487778,.379099,.106828,.82764,-.0549935,.379199,.120659,.827926,-.0611058,.379227,.13526,.828325,-.0675054,.379275,.150713,.828801,-.0743455,.379332,.167034,.8294,-.0815523,.379415,.184209,.830094,-.0890779,.379495,.202203,.8309,-.096736,.379555,.220945,.831943,-.104135,.379577,.240306,.833037,-.112106,.379604,.260317,.834278,-.120554,.379668,.2808,.836192,-.129128,.3799,.301654,.838671,-.137541,.380109,.323502,.840939,-.14523,.379809,.347176,.844575,-.15248,.379593,.371706,.848379,-.159607,.37909,.39688,.853616,-.166267,.378617,.422702,.858921,-.172698,.377746,.448919,.865324,-.178823,.376749,.475661,.872207,-.184542,.375363,.502599,.880018,-.189836,.373657,.529914,.88694,-.194294,.370673,.557683,.894779,-.197022,.36662,.586848,.902242,-.199108,.36138,.615831,.909914,-.200398,.355434,.644478,.917088,-.20094,.348173,.672905,.923888,-.200671,.339482,.701327,.930495,-.198773,.32956,.730101,.937247,-.195394,.318363,.758383,.943108,-.191956,.306323,.786539,.948296,-.187227,.292576,.813637,.953472,-.181165,.278234,.840793,.958485,-.174119,.263054,.867712,.962714,-.166564,.246756,.893635,.966185,-.158181,.229945,.919028,.970146,-.148275,.212633,.943413,.973491,-.138157,.195229,.966627,.975741,-.127574,.178048,.988817,.977238,-.11554,.160312,1.00924,.978411,-.10364,.142857,1.02845,.979811,-.0913122,.125317,1.04648,.98116,-.0782558,.107627,1.06284,.983543,-.0655957,.0895862,1.07798,.986789,-.0520411,.0713756,1.092,.990292,-.0389727,.053228,1.10484,.994187,-.025808,.0351945,1.11642,.997499,-.0126071,.0173198,1.12703,.999999,275604e-9,-148602e-9,1.13674,.81075,-78735e-10,.394456,161829e-10,.808692,-198293e-9,.393453,407564e-9,.80846,-792877e-9,.39334,.00162965,.808595,-.00178416,.393407,.00366711,.808597,-.00317182,.393408,.00651934,.808598,-.00495589,.393408,.0101866,.808591,-.00713627,.393403,.0146689,.808592,-.00971285,.393402,.0199667,.80861,-.0126855,.393407,.0260803,.808633,-.0160538,.393413,.0330107,.80868,-.0198175,.393429,.0407589,.808748,-.0239758,.393453,.0493264,.808854,-.0285286,.39349,.0587161,.808992,-.0334748,.39354,.0689304,.809141,-.0388116,.393588,.0799707,.809352,-.0445375,.39366,.0918432,.809608,-.0506427,.393742,.104549,.809915,-.0570708,.393834,.118085,.810253,-.0633526,.393885,.132377,.810687,-.0700966,.393953,.147537,.811233,-.0772274,.394047,.163543,.811865,-.0847629,.394148,.180394,.812648,-.0925663,.394265,.198051,.813583,-.100416,.394363,.216443,.814683,-.108119,.394402,.235502,.815948,-.11644,.394489,.255242,.817278,-.125036,.394542,.275441,.819605,-.133655,.39486,.296094,.822256,-.142682,.395248,.317309,.825349,-.150756,.395241,.340516,.829605,-.158392,.395285,.364819,.83391,-.165801,.394922,.389736,.839808,-.172677,.394691,.415409,.845708,-.179448,.394006,.441546,.853025,-.185746,.393279,.46832,.859666,-.191684,.391655,.495302,.86789,-.197146,.390068,.52262,.875845,-.201904,.38727,.550336,.882634,-.205023,.382688,.578825,.891076,-.207098,.377543,.608103,.900589,-.208474,.371752,.63723,.90791,-.209068,.364016,.665769,.915971,-.208655,.355593,.694428,.923455,-.20729,.345439,.723224,.931514,-.203821,.334099,.751925,.937885,-.19986,.321069,.780249,.943136,-.194993,.306571,.8077,.948818,-.189132,.291556,.83497,.954433,-.181617,.275745,.86188,.959078,-.173595,.258695,.888562,.962705,-.164855,.240825,.914008,.966753,-.155129,.22268,.939145,.970704,-.144241,.204542,.963393,.973367,-.133188,.185927,.985983,.975984,-.121146,.167743,1.00704,.976994,-.108366,.149218,1.02715,.978485,-.0956746,.13131,1.0455,.980074,-.0820733,.112513,1.06221,.98225,-.0684061,.0938323,1.07782,.98553,-.0549503,.0749508,1.09199,.989529,-.0407857,.055848,1.10508,.993536,-.0271978,.0368581,1.11684,.997247,-.0132716,.0181845,1.12789,1,431817e-9,-198809e-9,1.13792,.785886,-812608e-11,.405036,157669e-10,.790388,-205278e-9,.407355,398297e-9,.790145,-820824e-9,.407231,.00159263,.790135,-.00184681,.407226,.00358336,.790119,-.00328316,.407218,.00637039,.790126,-.00512988,.40722,.0099539,.79013,-.00738684,.407221,.0143339,.790135,-.0100538,.407221,.0195107,.790134,-.0131306,.407217,.0254848,.79016,-.0166169,.407224,.0322572,.790197,-.020512,.407236,.0398284,.790273,-.0248157,.407263,.0482014,.790381,-.029527,.407304,.0573777,.790521,-.0346446,.407355,.0673602,.790704,-.0401665,.40742,.0781522,.790925,-.0460896,.407499,.0897582,.791195,-.0524017,.407589,.10218,.791522,-.0590121,.407691,.11541,.791878,-.0654876,.407748,.12939,.792361,-.0725207,.407849,.144237,.792942,-.0799844,.407963,.159924,.79362,-.0877896,.408087,.176425,.794529,-.0958451,.408259,.193733,.795521,-.103827,.408362,.211756,.796778,-.111937,.408482,.230524,.798027,-.120521,.408547,.249967,.799813,-.129242,.408721,.269926,.802387,-.138048,.409148,.290338,.805279,-.147301,.409641,.311193,.809251,-.155895,.410154,.333611,.813733,-.163942,.410297,.357615,.819081,-.171666,.410373,.382339,.825427,-.178905,.410348,.407828,.83172,-.185812,.409486,.434034,.83877,-.192318,.408776,.460493,.845817,-.198249,.407176,.487346,.854664,-.204034,.405719,.514832,.863495,-.208908,.403282,.542401,.871883,-.212765,.399293,.570683,.88065,-.214911,.393803,.599947,.89004,-.216214,.387536,.62932,.898476,-.216745,.379846,.658319,.906738,-.216387,.370625,.687138,.914844,-.215053,.360139,.71601,.923877,-.212007,.348849,.745124,.931925,-.207481,.335639,.773366,.938054,-.202418,.320798,.801636,.943895,-.196507,.304772,.829055,.949468,-.189009,.288033,.856097,.955152,-.180539,.270532,.88301,.959403,-.171437,.251639,.909296,.963309,-.161661,.232563,.934868,.967399,-.150425,.213231,.959662,.972009,-.138659,.194247,.98302,.97433,-.126595,.174718,1.00517,.975823,-.113205,.155518,1.02566,.976371,-.0996096,.136709,1.04418,.978705,-.0860754,.117571,1.06146,.981477,-.0714438,.0980046,1.07777,.984263,-.0572304,.0782181,1.09214,.988423,-.0428875,.0584052,1.10553,.993,-.0282442,.038522,1.11758,.99704,-.0140183,.0190148,1.12864,.999913,369494e-9,-145203e-9,1.13901,.777662,-84153e-10,.423844,154403e-10,.770458,-211714e-9,.419915,38845e-8,.770716,-846888e-9,.420055,.00155386,.770982,-.00190567,.420202,.00349653,.770981,-.00338782,.420201,.00621606,.77098,-.00529338,.4202,.00971274,.770983,-.00762223,.4202,.0139867,.770985,-.0103741,.420198,.0190381,.770996,-.0135489,.4202,.0248677,.771029,-.0171461,.420212,.0314764,.771052,-.0211647,.420215,.0388648,.771131,-.0256048,.420245,.047036,.771235,-.0304647,.420284,.0559911,.771383,-.0357436,.420341,.0657346,.771591,-.0414392,.420423,.0762694,.771819,-.0475462,.420506,.0875984,.772123,-.0540506,.420617,.099727,.772464,-.060797,.42072,.112637,.772855,-.0675393,.420799,.126313,.773317,-.0748323,.420893,.140824,.773981,-.0825681,.421058,.15617,.774746,-.0906307,.421226,.172322,.77566,-.0988982,.421397,.189253,.776837,-.106994,.421569,.206912,.778097,-.115528,.421704,.225359,.779588,-.124317,.421849,.24447,.781574,-.133139,.422097,.264156,.784451,-.142179,.422615,.284318,.787682,-.15165,.423269,.304902,.792433,-.160771,.424396,.3265,.797359,-.169166,.424772,.35014,.803986,-.177149,.425475,.374768,.809504,-.184745,.424996,.399928,.815885,-.19173,.424247,.425796,.823513,-.198525,.423515,.452287,.832549,-.204709,.422787,.479321,.841653,-.210447,.421187,.506718,.850401,-.215501,.418519,.53432,.859854,-.219752,.414715,.56242,.869364,-.222305,.409462,.591558,.878837,-.223744,.402926,.621074,.888636,-.224065,.395043,.650538,.898132,-.223742,.38564,.679538,.907181,-.222308,.375378,.708674,.915621,-.219837,.363212,.737714,.9239,-.215233,.349313,.767014,.931644,-.209592,.334162,.795133,.938887,-.203644,.317943,.823228,.945282,-.196349,.300581,.850822,.950758,-.18742,.282195,.877594,.956146,-.177879,.262481,.904564,.960355,-.167643,.242487,.930741,.965256,-.156671,.222668,.955868,.968029,-.144123,.201907,.979869,.97251,-.131305,.18202,1.00291,.974925,-.118335,.161909,1.02392,.975402,-.103714,.142129,1.0433,.976987,-.089415,.122447,1.06089,.979677,-.0748858,.102248,1.07713,.983184,-.0596086,.0814851,1.09218,.987466,-.0447671,.0609484,1.10585,.992348,-.0295217,.0401835,1.11829,.996674,-.0143917,.0198163,1.12966,1.00003,321364e-9,-149983e-9,1.1402,.757901,-869074e-11,.436176,151011e-10,.751195,-217848e-9,.432317,378533e-9,.751178,-871373e-9,.432307,.0015141,.751195,-.00196061,.432317,.0034068,.751198,-.00348552,.432318,.00605659,.751195,-.00544599,.432315,.00946353,.751207,-.00784203,.43232,.013628,.751213,-.0106732,.43232,.0185499,.751221,-.0139393,.432319,.0242302,.751244,-.0176398,.432325,.0306694,.7513,-.0217743,.432348,.0378698,.751358,-.0263412,.432367,.0458321,.751458,-.0313396,.432404,.0545587,.751608,-.0367682,.432464,.0640543,.7518,-.0426246,.43254,.0743222,.752065,-.0489031,.432645,.0853668,.752376,-.0555828,.432762,.0971911,.752715,-.0623861,.432859,.109768,.753137,-.069415,.432958,.123126,.753676,-.0770039,.433099,.137308,.754345,-.084971,.433272,.15229,.755235,-.0932681,.433504,.168075,.756186,-.10171,.433693,.184625,.757363,-.110019,.433857,.201897,.75884,-.11887,.434102,.220014,.760467,-.127881,.434306,.238778,.762969,-.136766,.434751,.258172,.765823,-.14612,.43529,.278062,.769676,-.15566,.436236,.298437,.774909,-.165177,.437754,.319532,.77994,-.17402,.438343,.342505,.785757,-.182201,.438609,.366693,.792487,-.190104,.438762,.391668,.80038,-.197438,.438795,.417494,.808494,-.204365,.438226,.443933,.817695,-.210714,.437283,.470929,.828111,-.216651,.436087,.498569,.837901,-.221804,.433717,.526165,.847813,-.226318,.430133,.554155,.858314,-.229297,.425213,.582822,.868891,-.230999,.418576,.612847,.878941,-.231155,.410405,.642445,.888809,-.230935,.400544,.672024,.898089,-.229343,.389613,.701366,.908081,-.226886,.377197,.730763,.916819,-.222676,.363397,.759642,.924968,-.216835,.347437,.788775,.932906,-.210245,.32995,.817135,.940025,-.202992,.312262,.844912,.946101,-.19436,.293313,.872164,.952835,-.184125,.273638,.899443,.957347,-.173657,.252385,.926389,.961434,-.162204,.231038,.951947,.965522,-.14979,.209834,.976751,.969412,-.136307,.188821,1.00022,.973902,-.122527,.168013,1.02229,.974045,-.108213,.147634,1.04199,.975775,-.0927397,.12705,1.06019,.978383,-.0778212,.106309,1.07711,.98211,-.0621216,.0849279,1.09245,.986517,-.0463847,.0633519,1.10651,.991696,-.0309353,.0419698,1.11903,.996349,-.0150914,.0206272,1.13073,1.00003,442449e-9,-231396e-9,1.14146,.727498,-885074e-11,.441528,145832e-10,.730897,-223525e-9,.443589,368298e-9,.730796,-893996e-9,.443528,.00147303,.730805,-.00201149,.443533,.00331433,.730814,-.00357596,.443538,.00589222,.730815,-.00558734,.443538,.00920678,.730822,-.00804544,.44354,.0132582,.730836,-.0109501,.443545,.0180468,.730848,-.0143008,.443546,.0235732,.730871,-.0180969,.443552,.0298382,.730915,-.022338,.443567,.0368438,.730982,-.0270225,.443591,.044591,.731076,-.0321491,.443627,.0530831,.731245,-.0377166,.443699,.0623243,.73144,-.0437216,.443777,.0723181,.7317,-.0501576,.443881,.0830691,.732034,-.0569942,.444014,.0945809,.732388,-.0638756,.444113,.106825,.732853,-.071203,.444247,.119859,.733473,-.0790076,.444442,.13369,.734195,-.0871937,.444645,.148304,.735069,-.095696,.444877,.163702,.736169,-.10426,.445133,.179861,.73747,-.112853,.44537,.196778,.738991,-.12199,.445651,.214496,.740865,-.131153,.445958,.232913,.743637,-.140245,.446548,.251977,.746797,-.149722,.447246,.271551,.751517,-.159341,.448656,.291774,.756156,-.169106,.449866,.312455,.761519,-.178436,.450919,.334552,.768295,-.186904,.451776,.358491,.776613,-.195117,.452832,.383446,.783966,-.202695,.45249,.408945,.793542,-.20985,.452587,.435364,.803192,-.216403,.451852,.462336,.813892,-.22251,.450708,.48987,.824968,-.227676,.4486,.517697,.835859,-.232443,.445156,.545975,.846825,-.235775,.440351,.574483,.858085,-.237897,.433641,.604246,.868825,-.238074,.425354,.634101,.879638,-.237661,.415383,.664201,.889966,-.236186,.404136,.693918,.899479,-.233599,.390917,.723481,.908769,-.229737,.376352,.75258,.917966,-.223836,.360372,.781764,.926304,-.217067,.342551,.811139,.934626,-.209309,.324238,.839585,.941841,-.20071,.304484,.867044,.94789,-.190602,.283607,.894579,.954196,-.179253,.262205,.921743,.958383,-.167646,.239847,.948026,.963119,-.155073,.218078,.973296,.966941,-.141426,.195899,.998135,.970836,-.126849,.174121,1.02021,.973301,-.112296,.153052,1.04085,.97448,-.0964965,.131733,1.05946,.977045,-.080489,.10997,1.07693,.980751,-.064844,.0881657,1.09254,.985475,-.0481938,.0657987,1.10697,.991089,-.0319185,.0435215,1.12004,.996122,-.0158088,.0214779,1.13173,1.00001,372455e-9,-200295e-9,1.14291,.708622,-907597e-11,.45304,141962e-10,.711162,-228911e-9,.454662,358052e-9,.709812,-914446e-9,.453797,.00143034,.709865,-.00205819,.453834,.00321935,.709864,-.00365894,.453833,.00572331,.709855,-.00571692,.453826,.00894278,.709862,-.00823201,.453828,.012878,.709875,-.011204,.453832,.0175295,.709896,-.0146323,.453839,.0228978,.709925,-.0185163,.453847,.0289839,.709974,-.0228551,.453866,.0357894,.710045,-.0276473,.453892,.0433161,.710133,-.032891,.453924,.0515665,.710292,-.0385851,.453992,.0605458,.710485,-.0447254,.45407,.0702574,.710769,-.0513051,.454192,.0807077,.711106,-.0582733,.454329,.091896,.711516,-.0652866,.45446,.103814,.712071,-.0728426,.454653,.116508,.712676,-.0808307,.45484,.129968,.713476,-.0892216,.455096,.144206,.714377,-.0979047,.455346,.159212,.715579,-.106531,.455647,.174973,.716977,-.115492,.455961,.191504,.71862,-.124821,.456315,.208835,.72084,-.134079,.4568,.226869,.723786,-.143427,.457521,.245582,.727464,-.153061,.458475,.264957,.732771,-.162768,.460239,.284948,.736515,-.172627,.460899,.30522,.743519,-.182487,.463225,.326717,.750041,-.191295,.464027,.350113,.758589,-.199746,.465227,.374782,.767703,-.207584,.465877,.400226,.777484,-.214973,.465996,.426442,.788792,-.221796,.466019,.453688,.800194,-.228038,.465083,.481246,.811234,-.233346,.462506,.509086,.822859,-.238073,.459257,.537338,.835082,-.241764,.454863,.566108,.846332,-.244241,.448163,.595126,.858355,-.244736,.439709,.625574,.87034,-.244278,.429837,.65617,.881027,-.24255,.418002,.686029,.891007,-.239912,.404325,.716039,.900874,-.236133,.389222,.745518,.911072,-.230672,.373269,.775026,.920359,-.22356,.355083,.804521,.928604,-.215591,.335533,.834045,.937175,-.206503,.315278,.861612,.942825,-.196684,.293653,.889131,.949805,-.185116,.271503,.916853,.955535,-.172703,.248821,.943541,.959843,-.159978,.225591,.970132,.964393,-.146375,.202719,.994709,.968008,-.131269,.179928,1.0186,.971013,-.11569,.158007,1.03928,.973334,-.1003,.13624,1.05887,.975775,-.0833352,.1138,1.07652,.979579,-.0668981,.0913141,1.09297,.984323,-.0500902,.0683051,1.10734,.990351,-.0332377,.0451771,1.12084,.995823,-.0161491,.0221705,1.13296,1.0001,234083e-9,-108712e-9,1.14441,.683895,-924677e-11,.46015,137429e-10,.68833,-233383e-9,.463134,346865e-9,.688368,-933547e-9,.463159,.00138748,.688367,-.00210049,.463159,.00312187,.688369,-.00373415,.463159,.00555004,.688377,-.00583449,.463163,.00867216,.688386,-.00840128,.463166,.0124884,.688398,-.0114343,.463169,.0169993,.688418,-.0149329,.463175,.0222054,.688453,-.0188964,.463188,.028108,.688515,-.0233239,.463214,.0347085,.68857,-.0282136,.463231,.0420091,.688679,-.033564,.463276,.0500132,.688854,-.0393733,.463356,.0587255,.689038,-.0456354,.46343,.0681476,.689321,-.0523433,.463553,.0782897,.689662,-.059412,.463693,.0891501,.690188,-.0665736,.4639,.100735,.690755,-.0743106,.464107,.113074,.691405,-.0824722,.464329,.126161,.692198,-.0910484,.464585,.140007,.693196,-.0998778,.464893,.154612,.69454,-.108651,.465285,.169984,.695921,-.117855,.465596,.186106,.697749,-.12734,.466056,.203034,.700375,-.136714,.466771,.220703,.703395,-.146386,.467579,.239062,.707904,-.156096,.469067,.258188,.711673,-.165904,.469851,.277759,.717489,-.175812,.471815,.297935,.724051,-.185931,.47389,.318916,.731965,-.195238,.47587,.341591,.741151,-.204021,.477523,.366062,.751416,-.212113,.478881,.391396,.761848,-.21979,.479226,.417599,.771886,-.2267,.478495,.444401,.783998,-.232991,.477622,.472084,.796523,-.238645,.475833,.500193,.808851,-.243396,.472568,.52865,.821191,-.247226,.467857,.557362,.834261,-.250102,.461871,.586768,.846762,-.251056,.453543,.617085,.859867,-.250604,.443494,.647659,.871948,-.248783,.431711,.678119,.882967,-.245855,.417911,.708399,.892826,-.242168,.401993,.738256,.90332,-.237062,.385371,.767999,.913633,-.22997,.366837,.798191,.922774,-.221687,.346372,.827756,.931371,-.212345,.325682,.856425,.938929,-.20206,.303665,.884299,.944821,-.190981,.280786,.912023,.951792,-.178065,.2573,.939669,.957712,-.164634,.233448,.96655,.961912,-.150863,.209504,.992366,.966382,-.13577,.18597,1.01633,.969588,-.119593,.162905,1.03843,.971777,-.103203,.14053,1.05841,.97433,-.0865888,.117909,1.07632,.978686,-.0690829,.0944101,1.09326,.983281,-.0516568,.0705671,1.10796,.989562,-.034558,.0468592,1.12182,.995465,-.0167808,.0229846,1.1342,.999991,373016e-9,-235606e-9,1.1459,.662251,-939016e-11,.468575,132714e-10,.666634,-237624e-9,.471675,335842e-9,.666411,-950385e-9,.471516,.00134321,.666399,-.00213833,.471509,.00302221,.666386,-.0038014,.471499,.00537283,.666405,-.00593958,.471511,.00839533,.666406,-.00855253,.471508,.0120898,.666428,-.0116401,.471519,.0164569,.666444,-.0152015,.471522,.0214971,.66649,-.0192362,.471543,.027212,.666537,-.0237428,.471558,.033603,.666617,-.0287198,.471591,.0406728,.666718,-.0341647,.471631,.0484238,.666889,-.0400759,.47171,.0568621,.667104,-.0464479,.471805,.0659915,.667374,-.0532677,.471923,.0758178,.667772,-.0603805,.472098,.0863425,.668371,-.0677392,.472363,.0975917,.668971,-.0756028,.472596,.109567,.669696,-.0839293,.472869,.122272,.670481,-.0926683,.473126,.135718,.6715,-.1016,.473442,.149914,.672911,-.110566,.47389,.164882,.674512,-.119984,.474354,.180602,.67651,-.129574,.474922,.19711,.679292,-.139106,.475764,.214371,.682798,-.148993,.476886,.232405,.686955,-.158737,.478179,.251153,.691406,-.168754,.479432,.270436,.697438,-.178703,.481481,.290374,.704761,-.188955,.484143,.311044,.713599,-.198814,.487007,.333003,.723194,-.207869,.488962,.357144,.732601,-.216189,.489815,.382169,.744193,-.22398,.490888,.408227,.754907,-.231156,.490355,.434928,.767403,-.23747,.489548,.462599,.78107,-.243503,.488274,.490908,.793893,-.248114,.484843,.519421,.807296,-.25222,.4803,.548561,.820529,-.255265,.474097,.577772,.833716,-.256741,.466041,.607782,.848403,-.25637,.456547,.638807,.860755,-.254804,.443946,.670058,.874012,-.251834,.430852,.700749,.885619,-.247867,.414903,.731446,.896069,-.242634,.397276,.761191,.906266,-.236093,.378535,.791053,.916759,-.227543,.358038,.821298,.92523,-.21783,.335705,.850747,.93436,-.207534,.313797,.879258,.941631,-.195983,.289671,.907734,.947564,-.183567,.265319,.935206,.953681,-.169345,.240815,.962739,.960008,-.154909,.216119,.989227,.964145,-.140161,.192096,1.01465,.968171,-.123411,.167855,1.03737,.969859,-.106525,.144817,1.05767,.972666,-.0891023,.12149,1.0761,.977055,-.0718094,.0975306,1.09336,.982527,-.0534213,.0730217,1.10878,.989001,-.0355579,.0483366,1.12285,.99512,-.0176383,.023938,1.13548,1.00007,368831e-9,-211581e-9,1.14744,.651047,-960845e-11,.484101,12922e-9,.644145,-241347e-9,.478968,324578e-9,.64396,-965142e-9,.478831,.00129798,.64396,-.00217154,.47883,.00292046,.643968,-.00386049,.478835,.00519202,.643974,-.00603186,.478838,.0081128,.643977,-.0086854,.478836,.011683,.643982,-.0118207,.478834,.0159031,.644024,-.0154374,.478856,.0207743,.644059,-.0195343,.478868,.0262975,.644122,-.0241103,.478896,.0324747,.644207,-.0291638,.478933,.039309,.64432,-.0346919,.478981,.0468029,.644481,-.0406919,.479053,.0549614,.644722,-.047159,.479169,.0637909,.645013,-.0540748,.479302,.0732974,.645503,-.0612001,.479541,.0834898,.646117,-.0687303,.479829,.0943873,.646707,-.0767846,.480061,.105991,.647431,-.0852465,.480343,.11831,.64831,-.0940719,.48066,.131348,.649486,-.103056,.481083,.14514,.650864,-.112261,.481528,.159676,.652604,-.121852,.482102,.174979,.654825,-.131505,.482813,.191079,.657876,-.141189,.483876,.207927,.661339,-.151239,.48499,.225586,.665463,-.161091,.486279,.243947,.670542,-.171235,.487968,.262957,.677361,-.181347,.49053,.282781,.685672,-.191679,.493862,.303311,.694551,-.201781,.49699,.324607,.703753,-.211164,.498884,.347916,.713703,-.219675,.500086,.372628,.725911,-.227836,.501554,.398694,.73862,-.23533,.502193,.425529,.752118,-.241786,.501811,.453209,.76579,-.247865,.500185,.481381,.779568,-.252696,.497159,.51011,.793991,-.256802,.492765,.539322,.808182,-.259942,.486827,.569078,.821698,-.261703,.478386,.598818,.836009,-.262006,.468772,.629762,.849824,-.260333,.456352,.661366,.863888,-.257398,.442533,.69295,.876585,-.253264,.426573,.723608,.888665,-.248026,.408964,.754378,.899537,-.241487,.389677,.784761,.9094,-.233463,.368516,.814688,.920166,-.223397,.346624,.845009,.928899,-.21255,.322717,.874431,.937156,-.200869,.298698,.902922,.943861,-.188387,.273491,.931356,.949557,-.174341,.247866,.958854,.955862,-.158994,.222496,.986098,.961721,-.143664,.197522,1.01229,.965976,-.127412,.17302,1.03571,.968652,-.109798,.148954,1.05699,.971084,-.0916787,.125044,1.07587,.975584,-.0739634,.100577,1.09372,.98122,-.055322,.0753666,1.10948,.988253,-.0366825,.0498899,1.12394,.99482,-.0180389,.024611,1.13694,1.00001,229839e-9,-188283e-9,1.14919,.613867,-964198e-11,.479449,123452e-10,.621485,-244534e-9,.485399,313091e-9,.621429,-978202e-9,.485353,.00125245,.62112,-.00220004,.485114,.00281687,.621119,-.0039111,.485112,.00500783,.621122,-.00611091,.485112,.00782498,.621133,-.00879922,.485117,.0112687,.621152,-.0119756,.485125,.0153394,.621183,-.0156396,.485139,.0200382,.621227,-.0197898,.485158,.0253663,.621298,-.0244253,.485192,.0313261,.621388,-.0295441,.485233,.0379204,.621507,-.0351432,.485286,.0451523,.621693,-.0412198,.485378,.0530277,.621933,-.0477673,.485495,.0615522,.622232,-.0547574,.485635,.0707316,.622809,-.0619417,.485943,.0805883,.623407,-.069625,.486232,.0911267,.62406,-.077796,.486516,.102354,.624835,-.0863731,.486838,.114279,.625758,-.095251,.487188,.126902,.627043,-.104299,.487695,.140285,.628438,-.113724,.488163,.154397,.630325,-.123417,.488858,.169267,.632801,-.133137,.489754,.184941,.635784,-.143052,.490815,.20136,.639406,-.153132,.492048,.218643,.643872,-.163143,.49363,.236615,.6499,-.17333,.496009,.255449,.657201,-.183622,.498994,.275006,.666221,-.194019,.502888,.295354,.674419,-.204192,.505459,.316244,.683729,-.21406,.507771,.33849,.695584,-.222854,.510245,.363166,.708583,-.231315,.512293,.389071,.721233,-.238911,.512747,.415737,.735134,-.245657,.512482,.443331,.750179,-.251879,.511526,.471891,.765073,-.256911,.508935,.500892,.779794,-.261144,.504341,.530294,.794801,-.264316,.498515,.560144,.810339,-.266276,.491015,.590213,.824818,-.266981,.481126,.620865,.839375,-.265778,.468685,.652687,.853043,-.262748,.453925,.684759,.867335,-.258474,.437912,.716209,.88037,-.253187,.419648,.747508,.891711,-.246476,.39982,.77797,.902896,-.238735,.37879,.808586,.913601,-.22885,.355891,.838843,.923019,-.217656,.331773,.869014,.933432,-.205539,.307356,.898512,.939691,-.192595,.281321,.9269,.946938,-.178945,.255441,.955297,.952372,-.163587,.229013,.983231,.95909,-.147214,.203179,1.00971,.963675,-.13064,.17792,1.03438,.968247,-.113121,.152898,1.05625,.97001,-.0945824,.128712,1.07598,.974458,-.0755648,.103349,1.094,.980168,-.0571998,.0776731,1.1104,.987295,-.0377994,.0514445,1.12491,.994432,-.0186417,.025429,1.13851,.999975,542714e-9,-282356e-9,1.15108,.592656,-980249e-11,.486018,119532e-10,.598467,-247275e-9,.490781,301531e-9,.597934,-988317e-9,.490343,.00120517,.597903,-.00222366,.490319,.0027116,.597913,-.00395315,.490327,.00482077,.597919,-.00617653,.490329,.00753264,.597936,-.00889375,.490339,.0108478,.597956,-.0121043,.490347,.0147668,.597992,-.0158073,.490365,.0192905,.598032,-.0200017,.490382,.0244204,.598109,-.0246865,.49042,.0301593,.598215,-.0298594,.490474,.03651,.59833,-.0355167,.490524,.0434757,.598525,-.0416559,.490624,.0510629,.598778,-.0482692,.490753,.0592781,.599135,-.0553114,.49094,.0681304,.599802,-.062542,.491328,.0776467,.600361,-.0703638,.491598,.0878184,.60101,-.0786256,.491882,.0986573,.601811,-.0872962,.492232,.11018,.602861,-.0962284,.492684,.1224,.604167,-.10538,.493213,.135354,.605693,-.114896,.493799,.149034,.607682,-.124654,.494576,.163469,.610672,-.13456,.4959,.178747,.613313,-.144581,.496713,.194723,.617603,-.154703,.498499,.211617,.622174,-.16489,.500188,.229183,.628855,-.175164,.503072,.247786,.636963,-.185565,.506798,.267116,.644866,-.195911,.509719,.28702,.653741,-.206104,.512776,.307763,.664942,-.216447,.516812,.329631,.67633,-.22552,.519181,.353515,.690012,-.234316,.521681,.379226,.704243,-.242032,.523129,.405901,.719396,-.249172,.523768,.433585,.734471,-.255543,.522541,.462085,.750539,-.260697,.520217,.491233,.766365,-.26501,.516293,.521094,.781677,-.268409,.509708,.551014,.797132,-.270399,.501944,.581463,.812655,-.271247,.492025,.612402,.828592,-.270708,.480424,.643798,.844044,-.268085,.465955,.67682,.857305,-.263459,.448425,.708496,.87114,-.258151,.430243,.74046,.884936,-.251171,.410578,.771583,.895772,-.243305,.38862,.802234,.906961,-.234037,.365214,.833179,.917775,-.222714,.34116,.86353,.927883,-.210175,.31572,.893557,.936617,-.196925,.289159,.922976,.943384,-.182788,.261996,.951606,.949713,-.167965,.235324,.979958,.955818,-.151109,.208408,1.00765,.961344,-.133834,.182591,1.03329,.965469,-.115987,.156958,1.0557,.968693,-.09746,.132239,1.07583,.973165,-.0778514,.106195,1.09451,.979387,-.0585067,.0797669,1.11137,.98671,-.0390409,.0530263,1.12643,.994093,-.019408,.0263163,1.14016,1.00002,540029e-9,-194487e-9,1.15299,.574483,-989066e-11,.494533,114896e-10,.574478,-249127e-9,.494528,289403e-9,.574607,-996811e-9,.494637,.00115797,.574396,-.00224241,.494458,.00260498,.574377,-.00398632,.49444,.00463102,.574386,-.00622836,.494445,.00723623,.574401,-.0089683,.494453,.010421,.574419,-.0122056,.49446,.0141859,.574459,-.0159396,.494481,.0185322,.574525,-.0201692,.49452,.0234617,.574587,-.0248924,.494547,.0289762,.574697,-.0301074,.494604,.0350797,.574853,-.0358114,.494688,.0417767,.575027,-.041999,.494772,.0490718,.575294,-.0486618,.494915,.0569728,.575733,-.0557148,.495173,.0654955,.576356,-.0630489,.495537,.0746612,.576944,-.0709285,.495836,.0844615,.57765,-.0792723,.496177,.0949142,.578491,-.0880167,.496563,.10603,.579639,-.0969462,.497096,.117841,.580989,-.10622,.497684,.130367,.582587,-.115861,.498337,.143609,.584951,-.125605,.499414,.157625,.587602,-.135608,.500518,.172413,.59076,-.145742,.501767,.187999,.594992,-.155934,.503542,.20445,.600656,-.166303,.506135,.221764,.607816,-.176681,.509542,.24002,.61522,-.187071,.51263,.258992,.623702,-.197465,.516021,.278773,.634192,-.207816,.520422,.299377,.644936,-.218183,.524073,.320802,.657888,-.2278,.528049,.34384,.670666,-.236747,.52986,.36916,.685626,-.24484,.531892,.395867,.701304,-.252071,.532727,.423488,.717727,-.258714,.532146,.452201,.733914,-.264211,.529883,.481579,.750529,-.26859,.5259,.511558,.76747,-.272046,.51999,.542042,.785189,-.274225,.513083,.572799,.800954,-.275189,.502936,.603816,.816962,-.274946,.490921,.635461,.83336,-.272695,.47684,.6676,.848143,-.268223,.459405,.70051,.861818,-.262768,.440319,.732902,.876828,-.255872,.420123,.765084,.889312,-.247703,.398379,.796391,.900412,-.238381,.374496,.827333,.912251,-.227783,.349874,.858385,.921792,-.214832,.323181,.888652,.931273,-.200949,.296624,.917763,.940295,-.186537,.269211,.947878,.946812,-.171538,.241447,.977016,.953588,-.155254,.213829,1.00501,.958841,-.137156,.186807,1.03179,.963746,-.118699,.160706,1.05502,.966468,-.0998358,.135504,1.07568,.971178,-.0805186,.109131,1.09479,.97831,-.0599348,.0818293,1.1123,.985886,-.0399661,.0545872,1.12771,.994021,-.0198682,.0269405,1.14186,1.00009,271022e-9,-12989e-8,1.15514,.538716,-990918e-11,.486732,109675e-10,.550656,-250642e-9,.497518,277412e-9,.55057,-.00100265,.497441,.00110974,.550903,-.00225672,.497733,.00249779,.550568,-.00401046,.497438,.00443906,.550574,-.00626613,.49744,.00693637,.550591,-.0090226,.497449,.00998921,.550623,-.0122795,.497469,.0135984,.550667,-.0160361,.497495,.0177654,.550724,-.0202908,.497526,.0224915,.550792,-.0250421,.497557,.0277795,.550918,-.0302878,.49763,.0336334,.551058,-.0360241,.497701,.0400573,.551276,-.0422473,.497824,.0470585,.551551,-.0489441,.497977,.0546433,.552074,-.0559596,.498312,.0628367,.552681,-.0633978,.498679,.071646,.553324,-.0713176,.499031,.0810746,.554011,-.0797268,.499365,.091129,.55488,-.0885238,.499779,.101837,.556171,-.0974417,.500444,.113239,.557498,-.106841,.501025,.125316,.559299,-.116533,.501864,.138128,.561647,-.126298,.502967,.151695,.564347,-.136388,.504129,.16604,.567863,-.146576,.505713,.181207,.572569,-.156832,.507953,.197259,.578919,-.167323,.511186,.214258,.585387,-.177712,.514042,.232038,.593134,-.188184,.517484,.250733,.603295,-.198717,.522345,.270454,.613854,-.209177,.526751,.290807,.626092,-.219644,.531595,.312202,.637868,-.229494,.534721,.334435,.652458,-.238718,.538304,.359184,.666985,-.247061,.539875,.385637,.683301,-.254652,.541042,.41328,.69998,-.261376,.540735,.441903,.717824,-.267085,.539139,.471609,.734617,-.271465,.534958,.501446,.753663,-.27528,.53032,.532571,.770512,-.277617,.522134,.563641,.787356,-.278525,.51206,.595067,.806252,-.278512,.50119,.627226,.822061,-.277023,.486791,.659402,.838959,-.273175,.470467,.692874,.85379,-.267238,.450688,.725702,.868268,-.260327,.429741,.75832,.881994,-.251946,.407223,.790189,.893885,-.242432,.383214,.821625,.905118,-.231904,.357297,.853011,.916045,-.219545,.330733,.883773,.927614,-.205378,.303916,.914435,.936005,-.190388,.275941,.944502,.944533,-.1749,.247493,.974439,.950758,-.158588,.218996,1.00286,.957078,-.141027,.191559,1.0304,.962448,-.121507,.164457,1.05466,.964993,-.102068,.138636,1.0761,.970017,-.0822598,.111861,1.09541,.97661,-.062033,.0843438,1.11317,.985073,-.0409832,.0558496,1.12911,.993515,-.020146,.0275331,1.1438,1.00006,27329e-8,-107883e-9,1.15736,.525324,-999341e-11,.498153,105385e-10,.526513,-251605e-9,.499277,265329e-9,.526517,-.00100641,.499282,.0010613,.526588,-.00226466,.499337,.00238823,.526539,-.0040255,.499302,.00424535,.526547,-.00628954,.499306,.00663364,.526561,-.00905628,.499313,.00955337,.526593,-.0123253,.499334,.0130054,.526642,-.0160957,.499365,.0169911,.5267,-.0203661,.499396,.0215122,.526792,-.0251347,.499451,.0265718,.526904,-.0303985,.499511,.0321732,.527079,-.0361554,.499617,.0383231,.527285,-.0423982,.499731,.045026,.527602,-.0491121,.499924,.0522936,.528166,-.0561127,.500306,.0601528,.52879,-.0635988,.5007,.0686059,.529421,-.071581,.501048,.0776518,.530144,-.0799854,.501421,.0873148,.531062,-.0888032,.501884,.0976084,.532374,-.0977643,.50259,.108588,.533828,-.107197,.50329,.120234,.53581,-.116887,.504312,.132602,.538063,-.126755,.505365,.145721,.5409,-.136819,.506668,.159617,.544882,-.147117,.508731,.174369,.550238,-.157446,.511601,.190028,.556038,-.167988,.514431,.206587,.563031,-.178364,.517808,.224046,.571543,-.189007,.521937,.242503,.582255,-.199546,.527415,.261977,.59272,-.210084,.531682,.282162,.605648,-.220448,.537123,.303426,.61785,-.230593,.540664,.325323,.632223,-.240238,.544467,.348993,.648819,-.24887,.547594,.375462,.665825,-.256657,.54912,.403024,.683389,-.263711,.549294,.431773,.701495,-.269666,.547649,.461494,.719197,-.274169,.543786,.491623,.737906,-.278124,.538644,.522994,.756652,-.280632,.531057,.554775,.775279,-.281741,.521972,.586441,.792688,-.281652,.509613,.618596,.811894,-.280345,.496497,.651462,.827938,-.277128,.47968,.684023,.844837,-.271646,.460688,.718024,.859239,-.264397,.438872,.751207,.874088,-.256144,.41577,.784232,.887693,-.246311,.391369,.816191,.899402,-.235497,.365872,.847828,.910973,-.223631,.338618,.87934,.92204,-.209874,.310803,.910325,.930987,-.194265,.281802,.940695,.94,-.178125,.252836,.970958,.948018,-.161479,.224239,1.00078,.955141,-.144038,.195857,1.0288,.960513,-.124915,.168487,1.05371,.963964,-.104284,.141495,1.07596,.968713,-.0838732,.114437,1.09628,.975524,-.0635579,.0863105,1.11448,.98431,-.042291,.0574774,1.13069,.992916,-.0209131,.0284343,1.14568,.999926,743097e-9,-379265e-9,1.15955,.501042,-998428e-11,.498726,100306e-10,.502992,-252112e-9,.500665,253283e-9,.502417,-.00100791,.500092,.00101259,.502965,-.00226919,.500621,.00227978,.502318,-.00403109,.499994,.00405011,.502333,-.00629832,.500005,.00632868,.502362,-.00906907,.500027,.00911446,.502369,-.0123423,.500023,.0124078,.50243,-.0161178,.500066,.016211,.502493,-.0203937,.500103,.0205256,.502592,-.0251684,.500166,.0253548,.502707,-.0304389,.50023,.0307029,.502881,-.0362015,.500335,.0365753,.503124,-.0424507,.500488,.0429798,.503443,-.0491582,.500686,.0499268,.504083,-.0561476,.501155,.0574541,.504668,-.0636846,.501524,.0655408,.505319,-.0716834,.501904,.0742072,.50609,-.0800925,.502321,.0834699,.507122,-.0888425,.502896,.0933603,.508414,-.097855,.503603,.10391,.509955,-.107304,.504416,.115113,.512061,-.116921,.505565,.127054,.514419,-.12689,.506732,.139709,.517529,-.136934,.508338,.153173,.522085,-.147327,.510987,.167528,.526986,-.157612,.513527,.182708,.533122,-.168213,.516717,.198881,.540807,-.178688,.520832,.215986,.550687,-.189511,.52632,.234335,.560567,-.199998,.531009,.253375,.571698,-.210652,.535839,.273499,.584364,-.220917,.541091,.294355,.599066,-.23137,.546875,.316525,.614148,-.241206,.551306,.339671,.631157,-.250379,.555187,.36531,.647919,-.258397,.556595,.392767,.666112,-.265528,.556949,.421397,.686158,-.271827,.556617,.451433,.704838,-.27674,.552975,.482131,.723957,-.280733,.547814,.513458,.74262,-.283359,.53997,.545446,.762009,-.284541,.530422,.57775,.781314,-.284507,.518546,.610434,.799116,-.283309,.504178,.643178,.817604,-.280378,.48843,.676248,.83459,-.275619,.469457,.709698,.850974,-.26856,.447698,.744245,.866747,-.260094,.424791,.777695,.881412,-.249929,.399913,.810392,.8936,-.239137,.37308,.842872,.905943,-.226818,.345705,.874677,.916408,-.213699,.31706,.906257,.927215,-.198428,.288444,.936881,.935625,-.181643,.258329,.96795,.944076,-.164386,.228488,.998216,.951229,-.146339,.199763,1.02689,.958793,-.127709,.172153,1.0535,.963219,-.107244,.144989,1.07646,.967562,-.0857764,.11685,1.09675,.974866,-.0645377,.0880571,1.11576,.983353,-.0431732,.0587352,1.13227,.992503,-.0218356,.0294181,1.1478,1.00003,605203e-9,-231013e-9,1.16207,.482935,-101177e-10,.504695,968142e-11,.477554,-251521e-9,.499071,240676e-9,.477904,-.00100683,.499436,96342e-8,.478368,-.00226636,.499899,.0021687,.477977,-.00402719,.499513,.00385384,.477993,-.00629226,.499525,.0060221,.478011,-.00906011,.499536,.00867289,.478051,-.0123305,.499566,.0118074,.478089,-.016102,.499587,.0154269,.478171,-.0203736,.499645,.0195341,.478254,-.025143,.499692,.0241318,.47839,-.0304071,.499779,.0292247,.478588,-.0361631,.499911,.0348196,.478812,-.0424023,.500046,.0409231,.479208,-.0490724,.500326,.047552,.479841,-.0560722,.500805,.0547377,.480392,-.0636125,.501152,.0624607,.481068,-.0716134,.501561,.0707473,.481898,-.0800062,.502054,.0796118,.483022,-.0886568,.502728,.0890974,.484332,-.0977553,.503479,.0992099,.486126,-.107173,.504546,.10999,.488066,-.11677,.50557,.121476,.490521,-.126725,.506849,.133672,.494232,-.136793,.50911,.146731,.498302,-.147116,.511345,.160577,.503565,-.157446,.514344,.175335,.510902,-.168121,.518824,.191207,.519263,-.178799,.523666,.208058,.528204,-.189407,.528296,.225875,.538854,-.200145,.533724,.244782,.551278,-.210701,.539833,.264753,.565222,-.221303,.546131,.285745,.579403,-.231688,.551496,.307592,.595469,-.241718,.556809,.330582,.610929,-.250992,.559641,.354995,.629433,-.259602,.562379,.382471,.648504,-.267038,.563676,.411126,.66756,-.273388,.562092,.440924,.689143,-.278788,.560807,.472118,.709056,-.282783,.555701,.503774,.729855,-.285836,.548698,.536364,.748954,-.287078,.538544,.56895,.768373,-.287133,.526711,.601991,.78827,-.285839,.512511,.635403,.807465,-.283238,.496323,.668797,.825194,-.27906,.477638,.702584,.842203,-.272286,.456253,.736393,.857749,-.263854,.432412,.77096,.874799,-.253943,.407806,.80489,.887497,-.24237,.38033,.83771,.89966,-.230278,.352446,.870376,.911753,-.21646,.323268,.902256,.923011,-.202071,.294314,.933306,.932375,-.185519,.264104,.965177,.940537,-.167604,.234035,.996303,.948904,-.149068,.20412,1.0261,.955263,-.129539,.175431,1.05304,.960303,-.109932,.148116,1.07617,.965512,-.0880572,.119693,1.09742,.973466,-.0660548,.0901619,1.11721,.98284,-.0439228,.0599875,1.13436,.992216,-.0219588,.0298975,1.15006,.999946,119402e-9,-208547e-10,1.16471,.447827,-100414e-10,.491543,914833e-11,.454778,-251257e-9,.499172,22891e-8,.453519,-.00100342,.497787,914184e-9,.45357,-.00225776,.497847,.00205701,.453578,-.00401371,.497855,.00365705,.45357,-.00627107,.497841,.00571453,.453598,-.00902968,.497864,.00823019,.453627,-.0122888,.497882,.0112049,.453684,-.0160475,.497923,.0146405,.453764,-.0203044,.49798,.0185394,.453866,-.0250576,.498049,.0229054,.453996,-.0303028,.49813,.0277424,.454196,-.0360379,.498267,.0330587,.454457,-.0422521,.498445,.0388613,.454926,-.0488393,.498812,.0451767,.455525,-.0558653,.499272,.0520153,.456074,-.0633772,.499625,.0593754,.456752,-.0713606,.500049,.0672751,.457648,-.07971,.500615,.0757447,.458849,-.0883032,.501399,.0848231,.46029,-.0974095,.502293,.0945135,.462,-.106729,.503301,.104848,.464121,-.116354,.504533,.115884,.466889,-.126214,.506172,.127652,.470744,-.136324,.508667,.14024,.47488,-.146595,.510995,.153673,.480845,-.157027,.514832,.168053,.488262,-.167658,.519506,.183508,.496547,-.178343,.524347,.199948,.506254,-.188916,.52983,.217503,.517961,-.199975,.536357,.236272,.531484,-.210624,.543641,.256096,.545496,-.221227,.550048,.277085,.559497,-.231568,.555076,.298615,.575752,-.241698,.560541,.321547,.591999,-.251172,.564156,.345602,.610654,-.260178,.567607,.371851,.630484,-.268094,.56923,.40076,.651807,-.274661,.569779,.430801,.67239,-.280331,.566791,.461939,.693024,-.284501,.562007,.493854,.715473,-.287852,.555791,.526992,.736323,-.28929,.546345,.560102,.755771,-.289405,.534,.593543,.775424,-.2881,.519114,.627256,.795447,-.285562,.502543,.661464,.815319,-.281416,.484773,.695206,.831769,-.275523,.463445,.729044,.849464,-.267516,.440269,.764069,.866775,-.257584,.415049,.799089,.881252,-.245817,.388049,.831948,.894209,-.233127,.35889,.865526,.906922,-.219579,.329915,.89818,.919686,-.204491,.300441,.930013,.929044,-.188962,.269445,.962061,.938393,-.171079,.238402,.994214,.94661,-.15199,.208204,1.02533,.953095,-.131953,.178653,1.0529,.958644,-.111233,.150684,1.0771,.963925,-.0903098,.122359,1.09855,.971995,-.0680505,.0923342,1.11874,.981658,-.0448512,.0614195,1.13635,.991649,-.0221931,.0303582,1.15238,.999985,393403e-9,-111086e-9,1.16772,.396806,-971563e-11,.457671,842355e-11,.429186,-249421e-9,.495017,21625e-8,.429324,-998052e-9,.495173,865322e-9,.429175,-.00224487,.494999,.00194637,.429129,-.00399041,.494952,.00346004,.429153,-.00623476,.494974,.00540684,.429168,-.0089773,.494983,.00778714,.429207,-.0122175,.495012,.0106022,.429257,-.0159542,.495047,.0138535,.429338,-.0201864,.495106,.0175443,.429431,-.0249104,.495165,.0216774,.429587,-.0301252,.495279,.0262594,.429796,-.0358249,.495432,.0312968,.430065,-.0419972,.495621,.0367985,.430588,-.0485144,.496061,.042798,.43113,-.0555028,.496472,.0492914,.431743,-.0629852,.496904,.0562907,.432448,-.0709256,.497369,.0638056,.433414,-.0791942,.498032,.071885,.434638,-.0877346,.498854,.0805517,.43611,-.0968056,.499812,.0898047,.437859,-.106002,.500891,.0997142,.440017,-.115648,.502198,.110289,.443236,-.125427,.504389,.121644,.44697,-.135492,.506809,.133769,.451689,-.145746,.509858,.146787,.45811,-.156219,.514247,.160793,.465305,-.166834,.518816,.175791,.474085,-.177546,.524331,.191906,.484808,-.188262,.53104,.209199,.49732,-.199346,.538511,.227825,.509693,-.209951,.544554,.247269,.524367,-.220533,.551616,.267978,.539228,-.231082,.557368,.289672,.55644,-.241342,.563782,.31268,.574204,-.250964,.568851,.33651,.593388,-.260306,.57312,.362219,.613358,-.268667,.574916,.390322,.634512,-.275591,.575053,.420478,.65563,-.281328,.572404,.451614,.678265,-.285948,.568893,.484112,.70011,-.289408,.561878,.517348,.723005,-.291328,.55359,.551355,.743744,-.291418,.541099,.585109,.763949,-.290252,.526489,.619487,.784186,-.287648,.509496,.65404,.804304,-.283782,.491484,.688649,.823629,-.278067,.470517,.723133,.84094,-.270588,.44705,.757163,.857852,-.261188,.421252,.792816,.874934,-.249313,.394191,.827248,.888709,-.236492,.365359,.861074,.902589,-.222185,.336016,.894417,.914201,-.207314,.30527,.926825,.925978,-.191146,.274532,.9595,.93512,-.174135,.243393,.991583,.943656,-.155231,.212414,1.02356,.951719,-.134403,.182005,1.05239,.957164,-.113023,.153043,1.07754,.962656,-.0914493,.124186,1.09984,.970695,-.0694179,.0941654,1.12,.980749,-.0466199,.0629671,1.13849,.991205,-.0227032,.0311146,1.15494,.999884,632388e-9,-254483e-9,1.1706,.379821,-957289e-11,.460637,789337e-11,.405188,-247483e-9,.491396,204064e-9,.404796,-989434e-9,.490914,815853e-9,.40483,-.00222607,.490949,.00183559,.40473,-.00395723,.49084,.00326332,.404731,-.00618287,.490836,.00509945,.404768,-.00890258,.490871,.00734463,.404791,-.0121156,.490883,.00999992,.404857,-.0158214,.490938,.0130676,.404943,-.0200178,.491004,.0165503,.405059,-.0247027,.491093,.0204521,.405213,-.0298729,.491205,.0247788,.405399,-.0355226,.491333,.0295373,.405731,-.0416352,.491604,.034741,.406303,-.0480807,.492116,.0404255,.406814,-.0550458,.492506,.0465732,.407404,-.0624652,.492926,.0532058,.408149,-.0702958,.493442,.0603442,.409128,-.0784623,.494136,.0680297,.410408,-.087007,.495054,.0762786,.411813,-.0959639,.495962,.0851046,.413735,-.105075,.497257,.0945878,.416137,-.114646,.498882,.104725,.41934,-.124394,.501132,.11563,.423326,-.134328,.503883,.127325,.428419,-.14458,.50747,.139911,.43484,-.154979,.511964,.153481,.442641,-.165628,.517328,.168114,.452511,-.176365,.524258,.183995,.463473,-.187298,.531248,.200953,.475564,-.198244,.538367,.219176,.488664,-.208938,.545175,.238514,.504073,-.219599,.553227,.259129,.520832,-.230378,.560653,.280997,.538455,-.240703,.567523,.303821,.55709,-.250548,.573287,.327948,.576646,-.259964,.577795,.353362,.596705,-.268721,.580077,.380336,.618053,-.276054,.58018,.4101,.640303,-.282176,.578747,.44161,.662365,-.286931,.574294,.474106,.684542,-.290521,.567035,.507549,.707984,-.292672,.558687,.541853,.730913,-.293189,.547606,.576581,.752948,-.292199,.533471,.61172,.773452,-.289508,.516395,.646339,.794715,-.285716,.497873,.682131,.814251,-.280051,.476845,.716396,.833057,-.272873,.453449,.751503,.84959,-.263982,.427857,.786085,.867022,-.252745,.400335,.821355,.882277,-.239655,.371304,.85646,.895375,-.225386,.340397,.890828,.909347,-.209587,.310005,.923532,.921885,-.193433,.2796,.956419,.932127,-.176135,.247276,.989445,.941869,-.157872,.216186,1.02221,.949735,-.137577,.185602,1.05195,.956617,-.115285,.155767,1.07822,.961974,-.0928418,.126103,1.10149,.96972,-.0700592,.0956758,1.12207,.98012,-.0474671,.0643269,1.1408,.990825,-.0238113,.0320863,1.1577,.999876,381574e-9,-812203e-10,1.17403,.367636,-961342e-11,.469176,753287e-11,.380377,-244772e-9,.485434,191797e-9,.380416,-978857e-9,.485475,767015e-9,.380376,-.00220165,.485435,.00172522,.380419,-.00391408,.485487,.00306734,.380438,-.00611549,.485505,.00479332,.380462,-.00880558,.485525,.00690391,.380496,-.0119837,.485551,.00940039,.38056,-.0156487,.485605,.0122848,.38064,-.0197988,.485666,.0155601,.380767,-.0244324,.48577,.0192313,.380909,-.0295444,.485871,.0233032,.381142,-.0351321,.48606,.0277861,.381472,-.0411535,.486336,.0326939,.382015,-.0475408,.486833,.0380565,.382523,-.0544395,.487231,.0438615,.383129,-.061784,.487683,.0501332,.383952,-.0695085,.488313,.0568996,.38498,-.0775819,.489077,.0641952,.386331,-.0860443,.490113,.0720324,.387788,-.0948406,.491099,.0804379,.389808,-.103899,.492566,.0894899,.39252,-.113313,.494601,.0992098,.395493,-.123007,.496619,.109641,.399826,-.132859,.499912,.120919,.405341,-.143077,.504061,.133107,.411932,-.153465,.508905,.146263,.420591,-.164108,.515482,.160544,.43101,-.174893,.523191,.176123,.441881,-.185839,.53026,.192757,.453919,-.196633,.537295,.210535,.468715,-.207611,.546156,.229886,.485182,-.218517,.555173,.250543,.501926,-.229249,.562728,.27221,.51785,-.239481,.567494,.294892,.536947,-.249395,.573889,.318987,.557115,-.259,.578831,.344348,.577966,-.268075,.582055,.371223,.599489,-.276115,.583307,.399834,.62479,-.282523,.583902,.431415,.647504,-.287663,.57953,.464301,.670601,-.291538,.573103,.498123,.693539,-.293842,.563731,.532662,.717385,-.294681,.553169,.567925,.741533,-.293717,.539908,.603502,.762142,-.291156,.521902,.639074,.783014,-.28719,.502815,.674439,.805158,-.281773,.482598,.710497,.823646,-.274682,.458949,.7456,.841879,-.266184,.433129,.781085,.859515,-.255682,.406064,.816,.875335,-.242849,.376509,.851074,.890147,-.228329,.345502,.886473,.903144,-.212491,.31428,.920751,.916618,-.195695,.282994,.954606,.927953,-.178267,.251091,.988402,.937414,-.159549,.219107,1.02141,.946823,-.140022,.18896,1.05167,.954651,-.118154,.158667,1.07819,.959955,-.0946636,.128808,1.1025,.96858,-.0711792,.0973787,1.12391,.97938,-.0475046,.0650965,1.14322,.990498,-.024059,.0326267,1.16077,.999844,-512408e-10,112444e-9,1.17727,.316912,-934977e-11,.425996,695559e-11,.356423,-241372e-9,.479108,179562e-9,.356272,-965292e-9,.478897,71811e-8,.356262,-.00217182,.478894,.00161574,.356265,-.00386092,.478895,.00287261,.356278,-.0060324,.478905,.00448907,.356293,-.00868565,.478914,.00646572,.356346,-.0118207,.478965,.00880438,.356395,-.0154355,.479001,.0115066,.356484,-.019529,.479075,.0145762,.356609,-.0240991,.47918,.018018,.356766,-.0291413,.479305,.0218379,.357009,-.0346498,.479512,.0260454,.357424,-.0405462,.479909,.0306657,.357899,-.0468825,.480337,.0357054,.358424,-.0536887,.480771,.0411728,.359041,-.0609416,.481242,.0470841,.359903,-.0685239,.481943,.0534831,.360932,-.0764883,.482741,.0603795,.362196,-.0848364,.483688,.0678028,.363847,-.0935002,.484947,.0758086,.365972,-.102471,.486588,.0844173,.368741,-.111751,.488787,.0937199,.372146,-.121334,.491405,.103732,.377114,-.131147,.495604,.114608,.38226,-.141213,.499436,.126345,.389609,-.151632,.505334,.139116,.397925,-.162073,.51168,.152995,.407824,-.172819,.518876,.168071,.420014,-.183929,.527639,.184495,.434266,-.195032,.537588,.20232,.447352,-.205792,.544379,.221189,.463726,-.216704,.553422,.241616,.481406,-.227531,.562074,.263298,.498707,-.238017,.568227,.286116,.518039,-.247936,.574473,.3101,.538277,-.257437,.579191,.335401,.561166,-.266829,.584807,.362246,.583189,-.275329,.586476,.390609,.606024,-.28234,.585578,.420998,.632419,-.287924,.584496,.454357,.656128,-.291972,.577766,.488233,.679953,-.29456,.56875,.523248,.704654,-.295816,.558388,.559168,.729016,-.295157,.544826,.595326,.752062,-.292779,.528273,.631864,.773138,-.288681,.508482,.667793,.794869,-.283358,.487341,.704035,.815101,-.27608,.46354,.739925,.834212,-.26767,.438672,.775539,.852368,-.257397,.411239,.810895,.870207,-.245689,.3829,.846472,.884063,-.231452,.351496,.881788,.898284,-.215561,.31895,.917438,.912964,-.198208,.287367,.952422,.924666,-.180426,.254487,.987551,.934429,-.161525,.222226,1.02142,.943485,-.141197,.191143,1.05218,.9521,-.120085,.161112,1.07937,.957876,-.0975881,.130982,1.10403,.966943,-.0726842,.0990553,1.12616,.978313,-.0483705,.0662818,1.14619,.990048,-.0239072,.0329243,1.16413,.999984,461885e-9,-772859e-10,1.18099,.321287,-935049e-11,.455413,659662e-11,.332595,-237513e-9,.471437,167562e-9,.332729,-949964e-9,.471618,670192e-9,.332305,-.00213618,.471028,.00150712,.332326,-.00379765,.471055,.00267959,.332344,-.00593353,.471072,.00418751,.332356,-.00854349,.471077,.00603172,.332403,-.0116268,.471121,.00821362,.332461,-.0151824,.47117,.0107357,.332552,-.0192088,.471251,.0136014,.332657,-.0237024,.47133,.0168152,.332835,-.0286615,.471487,.0203853,.333083,-.0340765,.471708,.0243212,.333547,-.0398563,.47219,.0286518,.333989,-.0460916,.472587,.0333763,.334532,-.0527897,.473054,.0385084,.335167,-.0599284,.473568,.0440638,.33608,-.0673514,.474362,.0500962,.337146,-.0752237,.475231,.0566022,.338462,-.083418,.476282,.0636272,.34014,-.0919382,.477615,.0712153,.342341,-.100741,.479404,.079417,.345088,-.109905,.481618,.0882631,.349049,-.119369,.485081,.0978851,.353939,-.129033,.489317,.108336,.359893,-.139038,.494309,.119698,.366945,-.149411,.499983,.132024,.375814,-.159843,.507185,.145558,.387112,-.170664,.516392,.160433,.40023,-.181897,.526519,.176648,.412555,-.192785,.53423,.193922,.427023,-.203663,.542741,.212662,.443685,-.214695,.552066,.232944,.461499,-.225561,.560762,.254495,.480975,-.236257,.569421,.277531,.501,-.24639,.576101,.301724,.521691,-.256101,.581493,.327112,.543478,-.265289,.585221,.353917,.566094,-.273938,.587614,.381941,.589578,-.281679,.587991,.41172,.614583,-.287655,.585928,.444148,.641813,-.292228,.582092,.478617,.666189,-.295172,.57398,.51397,.690475,-.29648,.561676,.550118,.715543,-.296203,.548758,.586933,.740405,-.293999,.532792,.62384,.762183,-.28998,.512735,.660723,.786069,-.28478,.492402,.69807,.806812,-.277568,.469058,.734422,.826987,-.268951,.443017,.770946,.844588,-.259049,.415501,.80699,.863725,-.2471,.387328,.842107,.879137,-.234157,.356108,.878078,.894634,-.218719,.324315,.914058,.909162,-.201293,.291813,.949922,.92072,-.18267,.258474,.985337,.93158,-.163212,.225593,1.0205,.941238,-.142771,.193986,1.05273,.949293,-.120956,.163392,1.08075,.956226,-.0985743,.132934,1.10559,.96546,-.075118,.101255,1.12823,.977403,-.0497921,.0675441,1.149,.989648,-.0241574,.0334681,1.16765,1.00001,5762e-7,-184807e-9,1.18519,.303474,-916603e-11,.4542,61243e-10,.308894,-232869e-9,.462306,155592e-9,.309426,-931661e-9,.463093,622499e-9,.308643,-.0020949,.461933,.00139979,.308651,-.0037242,.461941,.00248874,.308662,-.00581873,.46195,.00388933,.308687,-.00837818,.461974,.00560247,.308728,-.0114016,.462011,.00762948,.308789,-.0148884,.462067,.00997326,.308882,-.0188369,.462151,.0126375,.309007,-.0232436,.462263,.0156271,.30918,-.0281054,.462417,.0189498,.309442,-.0334065,.462667,.0226167,.309901,-.0390589,.463162,.0266614,.310331,-.0452042,.463555,.0310715,.310858,-.0517735,.464019,.0358698,.311576,-.0587359,.464669,.0410848,.312436,-.0660383,.465406,.0467453,.313526,-.0737266,.466339,.0528718,.314903,-.0817574,.467504,.0595039,.316814,-.090167,.469226,.0666888,.318965,-.0987555,.470981,.0744658,.322077,-.107792,.473814,.082912,.325947,-.117098,.477241,.0920846,.331008,-.126602,.48184,.102137,.337893,-.136619,.488334,.113135,.345106,-.146838,.494415,.12511,.355111,-.157357,.503275,.138356,.365095,-.167955,.510966,.152686,.378344,-.179157,.521508,.16856,.391599,-.190143,.530455,.18561,.407786,-.20123,.541275,.204308,.425294,-.212456,.551784,.224623,.444021,-.223568,.561493,.246172,.463418,-.234154,.569886,.268979,.484077,-.244546,.577116,.293411,.505513,-.254301,.582914,.318936,.527672,-.263564,.587208,.345856,.550565,-.272332,.589277,.374054,.573656,-.280011,.588426,.403276,.59827,-.286924,.587504,.43474,.624731,-.291994,.583401,.468767,.652396,-.295159,.576997,.504411,.67732,-.296954,.565863,.54114,.703147,-.296877,.552316,.57816,.728715,-.295147,.536773,.616124,.752448,-.291275,.51771,.653885,.775169,-.285905,.496087,.691537,.799307,-.279064,.474232,.729251,.819482,-.270294,.447676,.766267,.837659,-.260032,.419656,.802616,.856903,-.248497,.391328,.838583,.873325,-.235252,.360285,.874711,.889788,-.221126,.329215,.91077,.904486,-.204304,.296392,.94653,.917711,-.185562,.262159,.983828,.928969,-.165635,.229142,1.01955,.939707,-.14442,.19673,1.05317,.948167,-.122147,.165095,1.0823,.955222,-.099098,.13451,1.10791,.964401,-.0755332,.102476,1.1312,.976605,-.0513817,.0689667,1.15218,.989085,-.0258499,.034506,1.17129,.999908,617773e-9,-271268e-9,1.18961,.285803,-905752e-11,.452348,572272e-11,.284689,-22732e-8,.450581,143626e-9,.285263,-910214e-9,.451482,575099e-9,.285302,-.00204784,.451553,.00129395,.285318,-.00364057,.451574,.0023006,.28533,-.00568813,.451585,.00359547,.285361,-.00819001,.451618,.00517934,.285397,-.0111458,.45165,.007054,.285447,-.0145536,.451688,.00922167,.285527,-.0184127,.451758,.0116869,.285688,-.0227207,.451929,.0144555,.28584,-.0274712,.452055,.0175341,.286136,-.0326278,.452369,.0209406,.286574,-.0381792,.452853,.0246965,.287012,-.0441879,.453272,.0287996,.287542,-.0506096,.453752,.033268,.288299,-.0573634,.454488,.0381504,.289186,-.0645458,.455294,.0434447,.290302,-.0720405,.456301,.0491973,.291776,-.0799046,.457648,.0554453,.29372,-.088117,.459483,.0622311,.296052,-.0965328,.461571,.0695992,.299563,-.105409,.465085,.077658,.30335,-.114553,.468506,.0864176,.309167,-.123917,.474423,.0961078,.31529,-.13381,.47995,.106643,.324163,-.144021,.488592,.118322,.333272,-.154382,.496461,.131133,.344224,-.165015,.50562,.145208,.357733,-.176168,.516719,.16073,.373046,-.187468,.528513,.177807,.38788,-.198488,.537713,.196072,.405133,-.209545,.547999,.21605,.423845,-.220724,.55759,.237484,.443777,-.231518,.566246,.26039,.464824,-.242035,.574326,.284835,.486635,-.251898,.58037,.310518,.51012,-.261304,.58568,.337678,.535301,-.270384,.590197,.366242,.559193,-.27841,.590569,.395873,.583544,-.285325,.588161,.426857,.608834,-.291113,.584249,.459477,.635753,-.294882,.57763,.494734,.664367,-.297088,.569479,.532023,.689688,-.297364,.555064,.569629,.715732,-.295949,.539522,.608124,.741307,-.292259,.521613,.646231,.764949,-.287063,.49969,.684938,.788599,-.28012,.476747,.723548,.81048,-.27153,.45116,.761135,.831372,-.261289,.424101,.798916,.850092,-.249559,.39443,.835952,.867777,-.236348,.363849,.871606,.884632,-.221569,.332477,.907843,.90047,-.20618,.300667,.944187,.914524,-.188771,.266552,.981371,.926892,-.168362,.232349,1.01841,.937951,-.146761,.199359,1.05308,.947236,-.123813,.1675,1.0839,.954367,-.099984,.136166,1.11047,.963907,-.0759278,.103808,1.13414,.976218,-.0511367,.0697061,1.15575,.988772,-.0267415,.0352529,1.17531,.999888,-520778e-9,289926e-9,1.19389,.263546,-883274e-11,.441896,526783e-11,.262352,-221849e-9,.439889,132311e-9,.262325,-886683e-9,.439848,528824e-9,.26228,-.00199476,.439765,.00118975,.262372,-.00354671,.439922,.00211568,.26239,-.00554141,.439941,.00330652,.262412,-.00797888,.439961,.00476346,.262453,-.0108584,.440002,.00648818,.262528,-.0141788,.440085,.0084835,.262615,-.017938,.440166,.0107533,.262744,-.0221346,.440291,.0133044,.262939,-.026762,.440493,.0161445,.263277,-.0317573,.440889,.0192974,.26368,-.0371832,.441338,.0227699,.264106,-.0430371,.441753,.0265698,.264624,-.0493035,.442227,.0307178,.265378,-.0558669,.442985,.0352616,.266253,-.0628718,.443795,.0401968,.267478,-.0701569,.445008,.04559,.269062,-.077845,.446599,.0514539,.270926,-.0857941,.448349,.0578382,.273693,-.0940773,.451221,.0648363,.276746,-.102704,.454097,.0724389,.281693,-.111735,.459517,.0808744,.287335,-.121004,.46531,.0901551,.29448,-.130734,.472605,.100371,.30257,-.140777,.480251,.111644,.312465,-.15111,.489444,.124111,.324856,-.16189,.500919,.137979,.33774,-.172946,.511317,.153163,.35255,-.184152,.522684,.169817,.367786,-.19522,.53248,.187886,.385474,-.20632,.543326,.207634,.404976,-.217744,.554109,.229165,.425203,-.228691,.563395,.252068,.446704,-.239299,.571565,.276471,.468951,-.249348,.577935,.302323,.493487,-.258933,.584309,.329882,.517861,-.268009,.58773,.358525,.543309,-.276238,.589612,.388585,.569704,-.28356,.589294,.419787,.594871,-.289497,.585137,.452114,.622555,-.294452,.580356,.486466,.651167,-.296918,.57185,.523079,.677332,-.297647,.558428,.5611,.703718,-.296321,.542232,.599592,.730262,-.293339,.524541,.639138,.754304,-.288036,.502691,.677978,.778051,-.281018,.479212,.716537,.801557,-.272414,.454071,.75586,.822559,-.262419,.425952,.794477,.843051,-.250702,.397313,.832664,.86232,-.237264,.366534,.869876,.879044,-.222716,.334816,.906973,.896362,-.206827,.303143,.943558,.910342,-.189659,.269699,.979759,.924119,-.171108,.236411,1.01718,.935374,-.149579,.202224,1.05289,.944295,-.126295,.16989,1.08496,.952227,-.101511,.138089,1.11256,.962041,-.0766392,.105053,1.1375,.97528,-.0511967,.070329,1.15983,.988476,-.025463,.0351268,1.17987,.999962,286808e-10,145564e-10,1.19901,.227089,-841413e-11,.404216,472707e-11,.239725,-215083e-9,.426708,120833e-9,.239904,-860718e-9,.427028,483555e-9,.239911,-.00193661,.427039,.00108806,.239914,-.00344276,.42704,.00193457,.239933,-.00537907,.427064,.00302363,.239944,-.00774482,.427065,.00435604,.239993,-.01054,.427122,.00593398,.240052,-.0137626,.427179,.00775987,.240148,-.0174115,.427279,.00983854,.240278,-.021484,.42741,.0121763,.240472,-.0259729,.427618,.0147827,.240839,-.0308131,.428086,.0176837,.241201,-.0360893,.428482,.0208775,.241626,-.0417723,.428907,.0243821,.242207,-.0478337,.42952,.0282228,.24298,-.0542199,.430332,.0324333,.243881,-.0610015,.431222,.0370252,.245123,-.0680874,.432512,.0420535,.24667,-.0755482,.434088,.0475414,.248779,-.0832873,.436323,.0535542,.251665,-.0913546,.439509,.0601716,.255305,-.0998489,.443478,.0674282,.260049,-.108576,.448713,.0754673,.266192,-.117754,.455524,.084339,.273158,-.127294,.4627,.0941683,.282131,-.137311,.472068,.10515,.293332,-.147736,.483565,.117402,.304667,-.158357,.493702,.130824,.317785,-.169274,.504708,.145724,.333245,-.180595,.517107,.16215,.349843,-.191892,.528849,.180149,.367944,-.203168,.540301,.199746,.387579,-.214443,.551514,.221047,.408247,-.225624,.560906,.243981,.43014,-.236422,.56959,.268513,.452669,-.24654,.576098,.294409,.476196,-.256157,.580925,.322002,.501157,-.265289,.584839,.351052,.527632,-.273671,.587614,.3812,.555754,-.281254,.589119,.412994,.581682,-.287448,.585204,.445498,.608196,-.292614,.579006,.479505,.635661,-.296068,.571297,.514643,.664999,-.297395,.560855,.552213,.691039,-.296645,.544525,.591365,.7179,-.293785,.526535,.630883,.744059,-.289089,.50545,.670932,.76863,-.282239,.482514,.710904,.793273,-.273688,.457246,.750259,.814731,-.26328,.428872,.78948,.835603,-.251526,.399384,.828597,.85489,-.238339,.368811,.866892,.872828,-.223607,.336617,.90563,.889462,-.207538,.303997,.943538,.904929,-.190297,.270812,.980591,.919101,-.172034,.237453,1.01935,.930536,-.152058,.204431,1.05498,.941223,-.129515,.172495,1.08717,.94982,-.104263,.140175,1.11551,.960592,-.0781944,.106465,1.14098,.974629,-.051688,.0711592,1.16418,.98811,-.0253929,.0354432,1.18465,1.00004,804378e-9,-330876e-9,1.20462,.214668,-821282e-11,.406619,433582e-11,.218053,-208144e-9,.413025,109887e-9,.217987,-832212e-9,.412901,439362e-9,.217971,-.00187246,.412876,988623e-9,.217968,-.00332855,.41286,.00175772,.217985,-.00520055,.412882,.00274729,.218014,-.00748814,.412916,.00395842,.218054,-.0101901,.412957,.00539274,.218106,-.0133057,.413005,.00705348,.218217,-.0168342,.413139,.00894581,.218338,-.0207707,.413258,.0110754,.21855,-.0251001,.413509,.0134551,.218913,-.0297861,.413992,.0161081,.219265,-.0348956,.414383,.0190307,.219696,-.0403909,.414839,.0222458,.220329,-.0462003,.415567,.025792,.220989,-.0524208,.41621,.0296637,.222027,-.058948,.417385,.0339323,.223301,-.0658208,.418779,.0386055,.224988,-.0730347,.420665,.0437355,.227211,-.0805274,.423198,.0493844,.230131,-.088395,.426566,.0556135,.233908,-.0966208,.43091,.0624829,.239092,-.105223,.437148,.0701636,.245315,-.11424,.444302,.0786949,.253166,-.12368,.453262,.0882382,.262374,-.133569,.463211,.0988682,.273145,-.143836,.474271,.110727,.285512,-.154577,.4863,.123945,.299512,-.165501,.498817,.138581,.314287,-.176698,.510341,.154676,.331083,-.188066,.522583,.172459,.349615,-.199597,.534879,.191979,.369318,-.210843,.546083,.21309,.390377,-.222068,.5562,.235998,.412411,-.233059,.564704,.260518,.435715,-.24357,.572314,.286795,.461196,-.253356,.579395,.314559,.485587,-.262362,.581985,.343581,.511908,-.270895,.584347,.374367,.539798,-.278452,.58505,.406015,.567974,-.284877,.583344,.439168,.594303,-.290124,.577348,.473005,.622951,-.294183,.570751,.508534,.652404,-.296389,.561541,.544764,.679291,-.296605,.546426,.582927,.706437,-.294095,.528599,.622681,.734485,-.28978,.508676,.663567,.758841,-.283363,.484768,.704092,.78537,-.275015,.460434,.745101,.807315,-.264689,.432166,.784712,.8271,-.252597,.401807,.824241,.849191,-.239154,.371458,.863803,.867046,-.224451,.338873,.903063,.8852,-.208342,.306175,.942763,.901771,-.190684,.272759,.981559,.915958,-.172105,.239306,1.02048,.928046,-.152214,.206071,1.05765,.939961,-.130247,.17367,1.08999,.948711,-.10672,.142201,1.11829,.959305,-.0808688,.108454,1.14467,.973009,-.0539145,.0728109,1.16839,.987631,-.0262947,.0360625,1.19004,.999978,.00132758,-559424e-9,1.21058,.193925,-793421e-11,.391974,392537e-11,.196746,-200315e-9,.397675,991033e-10,.19667,-801099e-9,.397521,396342e-9,.196633,-.00180246,.397445,891829e-9,.196654,-.00320443,.397482,.00158582,.196659,-.00500647,.39748,.00247867,.196683,-.0072086,.397506,.00357167,.196728,-.00981001,.397562,.00486675,.196792,-.0128096,.397633,.00636707,.19689,-.0162055,.397746,.00807752,.197017,-.0199943,.397884,.0100052,.19729,-.024139,.39827,.0121691,.197583,-.0286671,.398639,.0145755,.197927,-.0335858,.399034,.0172355,.198383,-.0388806,.399554,.0201718,.199002,-.0444736,.400289,.0234194,.199739,-.0504583,.401111,.026984,.200784,-.056729,.402349,.0309217,.202075,-.0633643,.403841,.0352496,.203898,-.0703247,.406076,.0400313,.206199,-.0775565,.408841,.0453282,.209252,-.085184,.41259,.0511794,.213638,-.0931994,.418288,.0577459,.21881,-.101617,.424681,.0650508,.225642,-.11052,.433429,.0732759,.233717,-.119772,.442897,.0824683,.242823,-.129505,.452888,.0927484,.254772,-.139906,.466407,.104417,.266603,-.150402,.477413,.117211,.28073,-.161395,.490519,.131598,.295399,-.172465,.50201,.147407,.312705,-.183982,.515311,.165031,.331335,-.195532,.52786,.184336,.351037,-.206971,.5392,.205361,.372175,-.218117,.54941,.228043,.394548,-.229327,.558642,.25267,.419598,-.240052,.567861,.279071,.443922,-.249937,.573332,.306882,.471495,-.259407,.58013,.33661,.496769,-.267749,.580564,.367328,.524951,-.275524,.581696,.399753,.55318,-.282148,.579885,.433134,.581577,-.287533,.575471,.467534,.609231,-.291612,.567445,.502943,.637478,-.293911,.557657,.53871,.667795,-.295096,.546535,.576568,.694272,-.294073,.529561,.614929,.722937,-.290386,.510561,.655909,.749682,-.284481,.487846,.697663,.774754,-.276188,.462487,.738515,.799301,-.266215,.43481,.779802,.820762,-.254116,.404879,.820045,.843231,-.240393,.374559,.860294,.861857,-.225503,.341582,.900965,.880815,-.209382,.308778,.941727,.89766,-.19155,.275232,.980916,.912926,-.172346,.240938,1.02162,.926391,-.151799,.207223,1.0597,.938429,-.129968,.17484,1.09291,.947834,-.10651,.142984,1.12248,.958432,-.0824098,.109902,1.149,.972402,-.0565242,.0744454,1.1733,.987191,-.028427,.0373794,1.19538,.999975,385685e-10,-4203e-8,1.21676,.178114,-766075e-11,.385418,354027e-11,.176074,-191966e-9,.381002,887135e-10,.17601,-767549e-9,.380861,354715e-9,.17598,-.00172696,.380798,798168e-9,.175994,-.00307012,.380824,.00141928,.176017,-.00479684,.380858,.00221859,.176019,-.00690648,.380839,.00319714,.176072,-.00939888,.380913,.0043572,.176131,-.0122726,.380979,.005702,.176239,-.0155264,.38112,.00723689,.176371,-.0191551,.381272,.00896907,.176638,-.023117,.381669,.0109194,.176912,-.0274633,.382015,.0130903,.177279,-.032173,.382476,.0154949,.17774,-.0372219,.383041,.0181669,.178344,-.0426132,.38378,.0211209,.179153,-.0483309,.384773,.0243899,.180197,-.0543447,.386076,.0280062,.181581,-.0607122,.387809,.032004,.18344,-.0673855,.390205,.036453,.186139,-.0743989,.393944,.0414162,.189432,-.0817731,.39832,.0469394,.193795,-.0895464,.404188,.0531442,.199641,-.0978264,.4121,.0601374,.206679,-.106499,.421425,.0680078,.214865,-.115654,.431504,.076919,.224406,-.125268,.442526,.0868835,.235876,-.135475,.455465,.0981875,.248335,-.146023,.4681,.110759,.262868,-.157016,.482069,.124885,.278962,-.168245,.496182,.140645,.295082,-.17958,.507401,.157838,.313738,-.191227,.520252,.17695,.333573,-.202718,.531708,.197817,.356433,-.214424,.544509,.220785,.378853,-.225492,.55373,.245306,.402717,-.236236,.561348,.271593,.428375,-.246568,.568538,.299776,.454724,-.255941,.573462,.329433,.482291,-.264511,.576356,.360598,.509706,-.272129,.576446,.393204,.538805,-.278979,.575298,.427227,.568919,-.284528,.572154,.462157,.596804,-.288801,.564691,.497997,.625987,-.291334,.555134,.534467,.656414,-.292722,.545051,.571736,.683916,-.292185,.528813,.610158,.711809,-.290043,.51106,.649061,.739547,-.285246,.490103,.690081,.766914,-.277647,.465523,.732554,.791375,-.267603,.437718,.773982,.814772,-.256109,.40882,.81609,.836691,-.242281,.377823,.856849,.856984,-.227155,.34496,.898363,.876332,-.210395,.311335,.939471,.894988,-.192612,.277703,.980799,.911113,-.173236,.243019,1.02215,.924092,-.152258,.209037,1.06139,.936828,-.129575,.175909,1.09635,.946869,-.10594,.143852,1.12707,.958284,-.081318,.110289,1.15419,.972325,-.0556133,.0747232,1.17909,.986878,-.0297899,.0383149,1.20163,.999936,-.00197169,912402e-9,1.22338,.151174,-720365e-11,.351531,309789e-11,.155594,-18279e-8,.361806,78608e-9,.156099,-731569e-9,.362982,314615e-9,.156053,-.00164578,.362869,707845e-9,.156093,-.0029261,.362961,.00125884,.156099,-.00457155,.362959,.00196783,.15612,-.00658224,.362982,.00283622,.156168,-.00895774,.363048,.00386625,.156221,-.0116962,.363101,.00506109,.156324,-.0147973,.363241,.00642675,.156476,-.0182503,.363448,.00797175,.156731,-.0220266,.36384,.00971484,.156994,-.026176,.364179,.0116575,.157341,-.0306701,.36462,.0138207,.157867,-.0354591,.365364,.0162356,.15846,-.0406141,.366111,.0189092,.159308,-.0460519,.367248,.021885,.160426,-.0518096,.368767,.0252004,.161877,-.0578906,.370745,.0288825,.163995,-.0642812,.373831,.0330139,.16655,-.0710067,.377366,.0376283,.170237,-.0781522,.382799,.0428493,.175096,-.0857172,.389915,.0487324,.181069,-.0938025,.398487,.0554214,.188487,-.102363,.408799,.0630189,.197029,-.111343,.419991,.071634,.206684,-.120812,.431455,.0812797,.218698,-.131033,.445746,.0923651,.230726,-.141373,.457471,.104545,.245516,-.152387,.472388,.118449,.261551,-.163628,.486671,.133923,.277437,-.174814,.49762,.150849,.296662,-.186713,.51162,.169924,.31795,-.198513,.525435,.190848,.339422,-.210119,.536267,.213504,.362143,-.221354,.545982,.237947,.387198,-.23224,.555364,.264427,.412349,-.24257,.561489,.292519,.439274,-.252284,.566903,.322561,.466779,-.261023,.569614,.353952,.496011,-.26899,.571589,.387278,.524964,-.275498,.570325,.421356,.556518,-.281449,.568792,.457314,.584363,-.285526,.560268,.493199,.614214,-.28844,.55205,.530276,.645684,-.289777,.541906,.56855,.673446,-.289722,.526464,.606927,.701924,-.287792,.509872,.645945,.73037,-.284315,.490649,.685564,.757405,-.278804,.467964,.726511,.784025,-.269543,.441468,.768601,.808255,-.258117,.41216,.811321,.830739,-.244728,.380606,.853496,.851914,-.229428,.348111,.895374,.872586,-.212508,.314732,.937674,.891581,-.194025,.280338,.979869,.907641,-.174711,.245203,1.02253,.922233,-.153509,.21077,1.06371,.935878,-.130418,.177399,1.09972,.946338,-.105558,.144507,1.13124,.957265,-.080059,.110508,1.15973,.971668,-.0539766,.0742311,1.18515,.9866,-.0277101,.0375224,1.20858,1.00021,-515531e-9,135226e-9,1.23135,.137468,-686011e-11,.345041,273315e-11,.13703,-173378e-9,.343936,690761e-10,.136986,-693048e-9,.34383,276126e-9,.136964,-.00155931,.343761,621337e-9,.137003,-.00277211,.343863,.00110494,.137012,-.00433103,.343868,.00172744,.137043,-.00623606,.343916,.00249022,.13709,-.0084868,.343986,.00339559,.137145,-.0110814,.344045,.00444687,.137242,-.0140187,.344177,.00565007,.137431,-.0172713,.344491,.00701868,.137644,-.0208605,.344805,.00856042,.13791,-.024792,.345172,.0102863,.138295,-.0290461,.345734,.0122185,.138764,-.0335957,.346371,.0143771,.139415,-.038467,.347298,.0167894,.140272,-.0436176,.348527,.0194895,.141457,-.0491016,.350276,.0225043,.14303,-.0548764,.352646,.0258962,.145289,-.0610096,.356206,.0297168,.148502,-.0674777,.361488,.0340562,.152188,-.074345,.367103,.0389534,.157359,-.0817442,.375247,.0445541,.16379,-.0896334,.385064,.0509535,.171376,-.098005,.396082,.0582611,.179901,-.106817,.407418,.06654,.189892,-.116239,.420031,.075994,.201838,-.12627,.434321,.0867239,.214311,-.136701,.447631,.0987517,.228902,-.147616,.462046,.112353,.245107,-.158871,.476942,.127605,.262292,-.170261,.490285,.144469,.281215,-.182017,.503783,.163282,.301058,-.193729,.515505,.183873,.322752,-.205512,.52682,.206466,.347547,-.217214,.539473,.231194,.370969,-.227966,.546625,.257288,.397533,-.238555,.55472,.285789,.42398,-.248278,.559468,.315746,.452928,-.257422,.564095,.347724,.482121,-.265306,.565426,.380922,.510438,-.272043,.563205,.415639,.541188,-.277614,.561087,.451702,.571667,-.281927,.554922,.48845,.602432,-.285015,.546838,.526442,.634126,-.286512,.537415,.564896,.662816,-.286388,.522906,.604037,.692411,-.284734,.507003,.643795,.720946,-.281297,.488398,.68298,.748293,-.276262,.466353,.723466,.776931,-.269978,.443573,.764565,.801065,-.260305,.415279,.805838,.825843,-.247426,.384773,.849985,.84807,-.232437,.352555,.893174,.869122,-.215806,.318642,.936564,.888963,-.197307,.28381,.980253,.905547,-.177203,.247888,1.02463,.918554,-.155542,.212904,1.06714,.931395,-.131948,.1787,1.10451,.941749,-.106723,.145902,1.13694,.954551,-.0804939,.111193,1.1666,.970279,-.0534239,.0744697,1.19249,.986117,-.0257452,.0368788,1.21665,.999938,.00190634,-.0010291,1.23981,.118493,-647439e-11,.32272,23772e-10,.118765,-163023e-9,.323456,598573e-10,.118772,-65212e-8,.323477,239447e-9,.118843,-.00146741,.323657,538881e-9,.118804,-.00260846,.323553,95826e-8,.118826,-.00407576,.323595,.00149845,.118846,-.00586826,.323617,.00216047,.118886,-.00798578,.32367,.00294679,.118947,-.0104273,.323753,.00386124,.119055,-.0131909,.323922,.00490999,.119241,-.0162444,.324251,.00610804,.11944,-.0196339,.324544,.00745805,.119739,-.0233378,.325026,.00897805,.12011,-.0273179,.325586,.0106895,.120571,-.0316143,.326231,.0126073,.12124,-.0361939,.327264,.0147654,.122162,-.0410511,.328733,.0172001,.123378,-.0462233,.330659,.0199375,.125183,-.0517109,.333754,.0230498,.127832,-.0575652,.338507,.026597,.130909,-.0637441,.343666,.0306345,.135221,-.0704302,.351063,.035273,.14082,-.0776364,.360604,.0406137,.146781,-.0852293,.369638,.0466788,.155121,-.0935351,.3827,.0537628,.16398,-.102234,.39522,.0617985,.173926,-.111465,.40793,.07097,.185137,-.121296,.42105,.0813426,.19826,-.13169,.435735,.0931596,.212938,-.142614,.450932,.106547,.229046,-.153884,.465726,.121575,.246246,-.165382,.479461,.138286,.264637,-.176806,.492106,.15666,.284959,-.188793,.504774,.17728,.308157,-.200763,.518805,.19988,.330951,-.21239,.528231,.224293,.3549,-.223521,.536376,.250541,.381502,-.234169,.544846,.278902,.409529,-.244077,.551717,.309227,.437523,-.253363,.55517,.341426,.467624,-.261659,.557772,.37518,.497268,-.268498,.556442,.41007,.528294,-.274018,.553915,.446445,.559053,-.278169,.549153,.483779,.589329,-.281229,.539878,.522249,.622503,-.282902,.53162,.561754,.652382,-.282815,.518119,.601544,.681847,-.281247,.502187,.641574,.712285,-.277986,.484824,.682633,.740094,-.273017,.463483,.723426,.768478,-.266692,.441299,.763747,.794556,-.258358,.415238,.805565,.819408,-.248807,.386912,.847254,.843411,-.236214,.356165,.891091,.862397,-.219794,.320562,.936174,.883113,-.201768,.285322,.982562,.90023,-.181672,.249713,1.02862,.915192,-.159279,.214546,1.07163,.928458,-.134725,.180285,1.10995,.94069,-.10913,.147119,1.14354,.953409,-.0821315,.112492,1.17372,.969537,-.0542677,.0752014,1.20043,.985612,-.0259096,.0370361,1.22528,.999835,.00298198,-.00151801,1.24959,.10097,-602574e-11,.300277,202619e-11,.101577,-152164e-9,.302077,511662e-10,.101572,-608889e-9,.302066,204751e-9,.101566,-.00136997,.302047,460753e-9,.101592,-.00243557,.302114,819497e-9,.101608,-.0038053,.30214,.00128154,.101627,-.00547906,.30216,.0018483,.101669,-.00745647,.302224,.00252223,.101732,-.00973615,.302318,.00330716,.101844,-.0123097,.302513,.00421061,.102025,-.0151681,.30285,.00524481,.102224,-.0183334,.303166,.0064154,.102515,-.0217819,.303654,.00774063,.102886,-.0255067,.304243,.0092398,.103395,-.029514,.305089,.0109339,.104109,-.0337912,.306301,.0128561,.105074,-.0383565,.30798,.0150338,.10654,-.0432132,.310726,.0175228,.108478,-.0484244,.314351,.0203648,.111015,-.0539339,.319032,.0236325,.114682,-.0598885,.32605,.0274188,.11911,-.0663375,.334109,.0317905,.124736,-.0733011,.344013,.0368502,.131479,-.0807744,.355358,.0427104,.139283,-.0888204,.367614,.0494788,.148054,-.0973394,.380072,.0572367,.159037,-.10665,.395678,.0662704,.169794,-.116221,.40795,.0763192,.18314,-.126632,.423546,.087956,.197515,-.137383,.438213,.101042,.213514,-.148641,.453248,.115827,.23065,-.160117,.46688,.132283,.249148,-.171807,.479962,.150644,.270219,-.183695,.494618,.171073,.292338,-.195574,.506937,.193378,.314999,-.207205,.516463,.217585,.340991,-.218955,.528123,.24428,.367982,-.229917,.537025,.272784,.39432,-.239737,.541627,.302742,.423364,-.249048,.546466,.335112,.453751,-.257329,.549466,.369032,.48416,-.264623,.549503,.404577,.515262,-.270411,.547008,.441337,.547036,-.274581,.542249,.479162,.576614,-.277266,.533015,.517904,.611143,-.279144,.525512,.558508,.640989,-.279001,.51154,.598995,.671182,-.277324,.495641,.639935,.700848,-.273908,.477526,.681017,.729862,-.269063,.457955,.722764,.758273,-.262282,.434846,.764349,.784121,-.254281,.409203,.806206,.809798,-.24505,.382694,.848617,.834953,-.233861,.354034,.892445,.856817,-.221308,.321764,.936263,.877609,-.205996,.288118,.982401,.897489,-.186702,.253277,1.02975,.913792,-.164618,.217963,1.07488,.92785,-.140023,.183221,1.11487,.940378,-.11328,.149385,1.14947,.95273,-.0853958,.114152,1.1807,.969059,-.0568698,.0769845,1.20912,.985574,-.0276502,.0381186,1.23498,.999943,.00239052,-.00126861,1.25987,.0852715,-560067e-11,.279021,171162e-11,.0854143,-140871e-9,.279483,430516e-10,.0854191,-563385e-9,.2795,172184e-9,.0854188,-.00126753,.279493,387464e-9,.0854229,-.00225337,.279501,68918e-8,.0854443,-.00352086,.279549,.00107803,.0854697,-.00506962,.279591,.00155536,.0855093,-.00689873,.279652,.00212354,.0855724,-.00900821,.279752,.00278703,.0856991,-.0113799,.280011,.0035551,.085855,-.0140314,.280297,.00443449,.0860682,-.016963,.280682,.00543636,.086344,-.0201438,.281159,.0065788,.0867426,-.0235999,.281886,.00787977,.087239,-.0273069,.282745,.0093606,.0879815,-.031269,.284139,.011056,.0891258,-.035531,.28647,.0130065,.0906909,-.0400947,.289708,.0152495,.0927624,-.0449638,.293904,.0178454,.0958376,-.0502427,.300471,.0208915,.0995827,-.0559514,.30806,.0244247,.104526,-.0622152,.317874,.0285721,.110532,-.0690046,.329332,.0334227,.117385,-.0763068,.341217,.0390466,.12522,-.084184,.353968,.0455786,.134037,-.0925248,.366797,.0530773,.144014,-.101487,.380209,.0617424,.156013,-.111273,.395956,.071777,.168872,-.121431,.41053,.0830905,.183089,-.132105,.425073,.0959341,.198763,-.143286,.439833,.110448,.216159,-.154841,.454507,.126769,.234859,-.166588,.468368,.14495,.255879,-.178626,.482846,.165233,.27677,-.190218,.493489,.187217,.301184,-.202227,.506549,.211659,.325852,-.213764,.5158,.237922,.352824,-.22487,.525442,.26632,.380882,-.235246,.532487,.296691,.410137,-.244847,.537703,.329179,.439787,-.253122,.540361,.363135,.472291,-.260517,.542734,.399222,.501856,-.266519,.538826,.436352,.534816,-.270905,.535152,.474505,.565069,-.273826,.525979,.513988,.597154,-.275333,.516394,.554852,.630473,-.275314,.506206,.596592,.660574,-.273323,.489769,.638117,.692015,-.270008,.472578,.680457,.720647,-.265001,.452134,.723008,.750528,-.258311,.430344,.765954,.777568,-.250046,.405624,.809012,.80387,-.240114,.378339,.852425,.828439,-.228737,.349877,.895346,.851472,-.216632,.318968,.940695,.873906,-.202782,.287489,.987235,.89467,-.187059,.254394,1.03348,.912281,-.168818,.221294,1.07812,.927358,-.146494,.18675,1.11928,.940385,-.120009,.152322,1.15609,.952672,-.0917183,.117514,1.18875,.968496,-.0620321,.0797405,1.21821,.985236,-.0314945,.0402383,1.24523,.99998,-575153e-9,110644e-9,1.27133,.0702429,-512222e-11,.255273,140947e-11,.0702981,-128826e-9,.255469,354488e-10,.0703691,-515562e-9,.255727,141874e-9,.0703805,-.00116,.255754,31929e-8,.0703961,-.00206224,.255813,567999e-9,.0704102,-.00322223,.255839,88871e-8,.0704298,-.00463928,.255863,.00128272,.0704759,-.00631375,.255953,.00175283,.0705434,-.00824317,.256079,.00230342,.0706693,-.010412,.25636,.0029443,.0708189,-.0128439,.256647,.00368031,.0710364,-.0155177,.257084,.00452614,.0713223,-.0184374,.257637,.00549706,.0717182,-.0216002,.258416,.00661246,.072321,-.0249966,.259699,.00790147,.0731446,-.0286566,.261475,.0093884,.0743352,-.0325888,.264132,.0111186,.0760676,-.036843,.26815,.013145,.078454,-.0414292,.273636,.0155251,.0818618,-.0464634,.281653,.0183525,.0857382,-.0519478,.289992,.0216642,.0908131,-.0579836,.30066,.0255956,.0967512,-.0645124,.312204,.0301954,.103717,-.0716505,.325001,.0356017,.111596,-.0793232,.338129,.041896,.120933,-.087645,.352853,.0492447,.130787,-.096492,.366192,.0576749,.142311,-.105973,.380864,.0673969,.155344,-.116182,.396575,.0785899,.169535,-.126815,.411443,.0912377,.185173,-.138015,.426256,.105607,.201755,-.149325,.439607,.121551,.221334,-.161207,.455467,.139608,.241461,-.173162,.469096,.159591,.26294,-.18504,.481014,.18156,.286776,-.196881,.493291,.205781,.311596,-.208311,.503556,.231819,.338667,-.219671,.513268,.260274,.366021,-.230451,.519414,.290862,.395875,-.240131,.526766,.323196,.425564,-.248566,.52905,.357071,.457094,-.256195,.530796,.393262,.488286,-.262331,.528703,.430797,.522291,-.267141,.52727,.470231,.554172,-.270411,.519848,.510477,.586427,-.271986,.510307,.551594,.619638,-.27192,.499158,.593849,.650656,-.269817,.483852,.636314,.68284,-.266267,.467515,.679679,.714356,-.26113,.44931,.723884,.742717,-.254067,.425789,.767245,.770894,-.245652,.401144,.811819,.797358,-.235554,.374224,.856315,.823377,-.223896,.346167,.901077,.847456,-.210865,.316056,.946502,.870697,-.196574,.284503,.993711,.891068,-.180814,.251628,1.04134,.909267,-.163314,.219065,1.08609,.925653,-.143304,.186446,1.12702,.940017,-.121322,.153416,1.16371,.952398,-.0973872,.120334,1.19712,.967568,-.0698785,.08352,1.22791,.984772,-.0390031,.0439209,1.25672,1.00026,-.0070087,.00315668,1.28428,.0556653,-459654e-11,.227325,112556e-11,.0565238,-116382e-9,.230826,284985e-10,.0565717,-465666e-9,.231026,114036e-9,.0565859,-.00104773,.231079,256656e-9,.0565761,-.00186255,.231025,45663e-8,.0565913,-.00291002,.231058,714664e-9,.0566108,-.00418998,.231085,.00103224,.0566532,-.00570206,.231169,.00141202,.0567473,-.00743666,.231417,.00186018,.0568567,-.00940298,.231661,.00238264,.0569859,-.0115991,.231895,.00298699,.0572221,-.0140096,.232456,.00368957,.057519,-.0166508,.233096,.00450303,.0579534,-.01951,.234094,.00544945,.0585922,-.0225991,.235629,.00655564,.0595647,-.0259416,.238106,.00785724,.0609109,-.0295661,.241557,.00939127,.0628751,-.0335126,.246652,.0112198,.0656908,-.0378604,.254091,.0134168,.0691347,-.0426543,.262666,.0160374,.0732165,-.0478967,.272029,.0191514,.0782863,-.0536716,.283007,.0228597,.0843973,-.0600683,.295732,.0272829,.0913598,-.0670095,.308779,.032484,.0994407,-.0745516,.322886,.0385886,.108189,-.082712,.336408,.0457133,.118574,-.0914927,.351692,.0539832,.129989,-.100854,.366502,.0635162,.142722,-.110837,.381675,.0744386,.156654,-.121353,.3963,.0868483,.172151,-.132414,.411477,.100963,.188712,-.143809,.42508,.116795,.208093,-.155765,.441328,.134715,.227936,-.167608,.454328,.154396,.249495,-.179579,.467235,.176179,.27362,-.191488,.480248,.200193,.296371,-.202618,.487886,.225775,.324234,-.214133,.499632,.25441,.353049,-.225212,.509532,.285077,.381785,-.234875,.514265,.317047,.414038,-.244205,.521282,.351874,.445251,-.252145,.522931,.388279,.476819,-.258433,.520947,.425825,.509209,-.263411,.517669,.465104,.542759,-.266732,.512841,.505741,.574822,-.268263,.503317,.547611,.609324,-.268489,.493035,.590953,.641772,-.266941,.478816,.63488,.674049,-.263297,.462863,.679072,.705071,-.257618,.442931,.723487,.734709,-.250625,.421299,.768708,.763704,-.24179,.397085,.814375,.791818,-.231115,.370577,.859907,.817439,-.21922,.34232,.906715,.843202,-.205658,.312627,.953943,.866639,-.190563,.280933,1.00185,.888129,-.173978,.248393,1.05105,.907239,-.155485,.216007,1.09704,.923893,-.134782,.183233,1.13857,.938882,-.11249,.150376,1.17539,.952464,-.0890706,.117177,1.20924,.968529,-.0646523,.0813095,1.24055,.984763,-.038606,.0439378,1.27018,1.00053,-.01238,.00598668,1.29873,.0437928,-409594e-11,.204012,8.79224e-7,.0440166,-103395e-9,.205049,221946e-10,.0440529,-413633e-9,.205225,887981e-10,.0440493,-930594e-9,.2052,199858e-9,.0439884,-.00165352,.204901,355495e-9,.0440716,-.0025849,.205255,556983e-9,.0440968,-.00372222,.205311,805326e-9,.0441359,-.00506478,.205391,.00110333,.0442231,-.00660384,.205638,.00145768,.0443254,-.00835246,.205877,.00187275,.0444832,-.0102992,.20627,.00235938,.0447001,-.0124449,.206796,.0029299,.0450168,-.0147935,.207593,.0036005,.0454816,-.017336,.208819,.00439246,.0462446,-.0201156,.211036,.00533864,.0473694,-.0231568,.214388,.00646984,.0490191,-.0264941,.219357,.00783856,.0512776,-.030184,.226061,.00950182,.0541279,-.0342661,.234094,.0115156,.0578989,-.0388539,.244297,.0139687,.0620835,-.0438735,.254457,.0169015,.0673497,-.04951,.266706,.0204554,.0731759,-.0556263,.278753,.0246606,.0803937,-.0624585,.29309,.0297126,.0879287,-.0697556,.305856,.0355868,.0970669,-.0778795,.321059,.0425768,.106508,-.0863541,.333873,.05056,.11776,-.0955935,.349008,.0598972,.130081,-.105438,.363776,.0706314,.144454,-.115899,.380112,.0828822,.1596,-.126827,.394843,.0967611,.176097,-.138161,.409033,.112381,.194726,-.149904,.424257,.129952,.213944,-.161675,.436945,.149333,.235516,-.173659,.450176,.170892,.260564,-.185963,.466305,.194984,.285183,-.197582,.477328,.220805,.311095,-.208697,.486566,.248694,.338924,-.219519,.494811,.279015,.369757,-.229766,.504065,.311725,.3996,-.238879,.507909,.345844,.430484,-.246802,.509805,.381749,.46413,-.253924,.511436,.420251,.497077,-.259319,.508787,.459957,.530434,-.263297,.50394,.501356,.565725,-.265619,.49804,.544252,.599254,-.265842,.487346,.587856,.631251,-.263978,.472975,.631969,.663972,-.26043,.457135,.677471,.697724,-.255358,.439844,.723744,.727725,-.248308,.417872,.770653,.756417,-.239181,.39273,.817357,.785419,-.22814,.367839,.864221,.81266,-.215681,.339449,.912701,.839391,-.201623,.309279,.962419,.86366,-.185624,.278029,1.0122,.885028,-.16797,.245294,1.06186,.904639,-.148336,.212689,1.10934,.922048,-.12637,.179616,1.15063,.936952,-.102928,.146749,1.18885,.951895,-.0785268,.112733,1.22352,.967198,-.0530153,.0760056,1.25681,.984405,-.02649,.0383183,1.28762,1.00021,70019e-8,-20039e-8,1.31656,.0325964,-355447e-11,.176706,6.55682e-7,.0329333,-899174e-10,.178527,165869e-10,.0329181,-359637e-9,.178453,663498e-10,.0329085,-808991e-9,.178383,149332e-9,.0329181,-.00143826,.178394,265873e-9,.0329425,-.00224678,.178517,416597e-9,.0329511,-.00323575,.17849,603299e-9,.033011,-.00439875,.178695,829422e-9,.0330733,-.00574059,.178843,.00109908,.0331857,-.00725896,.179176,.00141933,.0333445,-.00895289,.179618,.0017999,.0335674,-.0108219,.180238,.00225316,.033939,-.0128687,.181417,.00279765,.0345239,-.015114,.183395,.0034564,.0354458,-.017596,.186616,.00425864,.0368313,-.0203524,.191547,.00524936,.0386115,-.0234105,.197508,.00647033,.0410303,-.0268509,.205395,.00798121,.0442245,-.0307481,.215365,.0098557,.0478659,-.0350863,.225595,.0121417,.0522416,-.0399506,.236946,.0149385,.0574513,-.045357,.249442,.0183189,.0631208,-.0512863,.261222,.0223644,.0701124,-.0579273,.275418,.0272418,.0777331,-.0650652,.288989,.0329458,.0862709,-.0728813,.302546,.0396819,.096103,-.081363,.317164,.04757,.106976,-.0904463,.331733,.0567012,.119175,-.100105,.34661,.067202,.132919,-.110375,.362249,.0792588,.147727,-.121115,.376978,.0928672,.163618,-.132299,.390681,.108228,.182234,-.143887,.406571,.125502,.201809,-.155827,.42042,.144836,.225041,-.168357,.438411,.166706,.247621,-.18004,.450368,.189909,.27097,-.191536,.460083,.215251,.296658,-.203024,.469765,.243164,.325892,-.214056,.481837,.273388,.35406,-.224104,.487474,.305344,.384372,-.233489,.492773,.339741,.41749,-.241874,.498451,.376287,.45013,-.248834,.499632,.414195,.481285,-.254658,.495233,.454077,.519183,-.259367,.496401,.496352,.551544,-.261818,.487686,.538798,.587349,-.262964,.479453,.583626,.621679,-.262128,.467709,.629451,.654991,-.258998,.452123,.67566,.686873,-.254119,.433495,.723248,.719801,-.246946,.413657,.771156,.750355,-.237709,.390366,.81989,.780033,-.226549,.364947,.868601,.809254,-.214186,.337256,.920034,.836576,-.199639,.307395,.971706,.861774,-.183169,.275431,1.02479,.885707,-.165111,.243431,1.07837,.904742,-.144363,.210921,1.12783,.915604,-.121305,.17647,1.17254,.930959,-.0962119,.143106,1.21012,.948404,-.069969,.108112,1.24474,.967012,-.0427586,.0708478,1.27718,.984183,-.0147043,.032335,1.3083,.999577,.0142165,-.00726867,1.3382,.0229227,-299799e-11,.148623,4.62391e-7,.0232194,-758796e-10,.15054,117033e-10,.0232315,-303636e-9,.15063,468397e-10,.0232354,-683189e-9,.150624,105472e-9,.0232092,-.0012136,.150445,187744e-9,.0232523,-.00189765,.150679,294847e-9,.0232828,-.00273247,.150789,428013e-9,.0233371,-.00371287,.150995,591134e-9,.0234015,-.00484794,.15118,787642e-9,.023514,-.00612877,.151562,.00102547,.023679,-.00756125,.152116,.00131351,.0239559,-.00914651,.153162,.00166594,.0244334,-.010904,.155133,.00210182,.025139,-.0128615,.158035,.00264406,.0262598,-.0150628,.162751,.00332923,.0277875,-.0175532,.168944,.00419773,.0298472,-.0203981,.176835,.00530034,.0325444,-.023655,.186686,.00669777,.0355581,-.0272982,.196248,.00842661,.0392841,-.0314457,.207352,.0105854,.0436815,-.0361157,.219279,.0132458,.0485272,-.0412932,.230728,.0164736,.0541574,-.0470337,.242994,.0203715,.0609479,-.0535002,.257042,.0250953,.0685228,-.0605409,.27102,.0306856,.0768042,-.0680553,.28406,.037193,.0864844,-.0765011,.299186,.0449795,.0969415,-.0852674,.3132,.0538316,.108478,-.0947333,.327138,.0641149,.121705,-.10481,.342345,.0759185,.136743,-.115474,.358472,.0894116,.152986,-.126536,.374067,.104562,.170397,-.138061,.388267,.121632,.191392,-.150203,.406467,.140996,.211566,-.161751,.418641,.161696,.233567,-.173407,.430418,.184557,.257769,-.185397,.44277,.210092,.28531,-.197048,.457191,.237827,.311726,-.20784,.464712,.267253,.340537,-.218345,.472539,.299332,.372921,-.228306,.482331,.333988,.402924,-.236665,.484378,.369722,.434475,-.244097,.484717,.407836,.469736,-.250547,.487093,.448465,.505045,-.25511,.485575,.490263,.540262,-.258444,.481225,.534495,.576347,-.259903,.473481,.579451,.608656,-.259572,.4603,.625604,.646679,-.257908,.450341,.674511,.679902,-.253663,.431561,.723269,.714159,-.247419,.412684,.773263,.745345,-.239122,.389388,.824182,.778248,-.228837,.365361,.876634,.807208,-.216197,.337667,.92945,.835019,-.201772,.307197,.985261,.860261,-.185291,.274205,1.04299,.877601,-.165809,.240178,1.09816,.898211,-.143897,.207571,1.14694,.915789,-.119513,.174904,1.19008,.931831,-.0932919,.141423,1.2297,.949244,-.0656528,.105603,1.26553,.967527,-.0370262,.0679551,1.29986,.984139,-.00730117,.0283133,1.33252,.999713,.0234648,-.0121785,1.36397,.0152135,-245447e-11,.122795,3.04092e-7,.0151652,-615778e-10,.122399,76292e-10,.0151181,-245948e-9,.122023,304802e-10,.0151203,-553394e-9,.12203,686634e-10,.015125,-983841e-9,.122037,122463e-9,.0151427,-.00153774,.12214,192706e-9,.0151708,-.0022103,.122237,281219e-9,.0152115,-.00300741,.12238,390804e-9,.0152877,-.00392494,.1227,526317e-9,.015412,-.00496597,.123244,69443e-8,.0156201,-.00613314,.124228,90547e-8,.0159658,-.00744113,.125945,.0011732,.0165674,-.00892546,.129098,.00151888,.017487,-.010627,.133865,.00197007,.018839,-.0126043,.140682,.0025637,.020554,-.0148814,.148534,.00333637,.0226727,-.0175123,.157381,.00433738,.0251879,-.0205266,.166685,.00561664,.0283635,-.0240319,.177796,.00725563,.0318694,-.0279432,.188251,.00928811,.0361044,-.0324313,.200038,.011835,.0406656,-.0373527,.210685,.0149146,.0463846,-.0430132,.224182,.0187254,.0525696,-.0491013,.23634,.0232283,.0598083,-.0559175,.250013,.0286521,.0679437,-.0633657,.263981,.0350634,.0771181,-.0714602,.278072,.0425882,.0881273,-.0803502,.29511,.0514487,.0996628,-.0896903,.309976,.0615766,.112702,-.099644,.325611,.0732139,.126488,-.109829,.339321,.0862324,.142625,-.120859,.35574,.101275,.15953,-.131956,.369845,.117892,.176991,-.143145,.38146,.136205,.199715,-.155292,.40052,.157252,.220787,-.167066,.412055,.179966,.243697,-.178396,.423133,.204418,.272106,-.190433,.439524,.232141,.297637,-.201265,.447041,.261109,.325273,-.211834,.454488,.292627,.357219,-.221889,.465004,.326669,.387362,-.230729,.468527,.362426,.423131,-.23924,.475836,.401533,.45543,-.246067,.475017,.441902,.493393,-.251557,.478017,.484239,.526253,-.255571,.4709,.528586,.560554,-.257752,.463167,.574346,.599306,-.258076,.456452,.621655,.634541,-.256471,.443725,.670492,.668907,-.253283,.428719,.721943,.705619,-.247562,.411348,.772477,.739034,-.240626,.388939,.8264,.771408,-.231493,.36425,.881702,.803312,-.220125,.337321,.9385,.828457,-.206645,.305364,.997437,.854819,-.190664,.273715,1.05693,.878666,-.171429,.242218,1.11251,.898404,-.149235,.209556,1.16398,.917416,-.12435,.176863,1.21014,.933133,-.0972703,.142775,1.25178,.95066,-.0683607,.106735,1.29028,.968589,-.0378724,.0681609,1.32703,.984776,-.00605712,.0273966,1.36158,.99994,.0263276,-.0138124,1.3943,.00867437,-186005e-11,.0928979,1.73682e-7,.00864003,-466389e-10,.0925237,435505e-11,.00864593,-186594e-9,.0925806,174322e-10,.00864095,-419639e-9,.0924903,392862e-10,.00863851,-746272e-9,.0924589,702598e-10,.00868531,-.00116456,.0929,111188e-9,.00869667,-.00167711,.0928529,163867e-9,.00874332,-.00228051,.0930914,23104e-8,.00882709,-.00297864,.0935679,31741e-8,.00898874,-.00377557,.0946165,430186e-9,.00929346,-.00469247,.0967406,580383e-9,.00978271,-.00575491,.100084,783529e-9,.0105746,-.00701514,.105447,.00106304,.0116949,-.00851797,.112494,.00144685,.0130419,-.0102757,.119876,.00196439,.0148375,-.012381,.129034,.00266433,.0168725,-.01482,.137812,.00358364,.0193689,-.0176563,.147696,.00478132,.0222691,-.0209211,.157795,.00631721,.0256891,-.0246655,.168431,.00826346,.0294686,-.0288597,.178587,.0106714,.0340412,-.0336441,.190251,.0136629,.0393918,-.039033,.202999,.0173272,.0453947,-.0450087,.215655,.0217448,.0521936,-.0515461,.228686,.0269941,.0600279,-.058817,.242838,.033272,.0692398,-.0667228,.258145,.0406457,.0793832,-.0752401,.273565,.0492239,.0902297,-.0841851,.287735,.0590105,.102014,-.0936479,.301161,.0702021,.116054,-.103967,.317438,.0832001,.13191,-.114622,.334166,.0977951,.148239,-.125452,.348192,.113985,.165809,-.136453,.361094,.131928,.184616,-.147648,.373534,.151811,.207491,-.159607,.39101,.174476,.230106,-.171119,.402504,.198798,.257036,-.182906,.418032,.225796,.281172,-.193605,.425468,.254027,.312034,-.204771,.440379,.285713,.340402,-.214988,.445406,.319196,.370231,-.224711,.44968,.35537,.407105,-.233516,.460747,.393838,.439037,-.240801,.460624,.433747,.47781,-.24762,.465957,.477234,.510655,-.251823,.460054,.52044,.550584,-.255552,.459172,.567853,.585872,-.257036,.450311,.615943,.620466,-.257535,.437763,.667693,.660496,-.255248,.426639,.718988,.695578,-.251141,.409185,.772503,.732176,-.244718,.39015,.827023,.760782,-.236782,.362594,.885651,.79422,-.225923,.33711,.943756,.824521,-.213855,.308272,1.00874,.854964,-.197723,.278529,1.06764,.878065,-.179209,.246208,1.12836,.899834,-.157569,.21329,1.18318,.918815,-.133206,.181038,1.23161,.934934,-.106545,.146993,1.27644,.952115,-.0780574,.111175,1.31842,.96906,-.0478279,.0728553,1.35839,.985178,-.0160014,.032579,1.39697,1.00039,.0173126,-.0095256,1.43312,.00384146,-124311e-11,.0613583,7.78271e-8,.00390023,-314043e-10,.0622919,196626e-11,.00389971,-125622e-9,.0622632,787379e-11,.00389491,-282352e-9,.0620659,1778e-8,.00391618,-502512e-9,.0624687,320918e-10,.00392662,-784458e-9,.0625113,515573e-10,.00396053,-.00112907,.0628175,778668e-10,.00401911,-.00153821,.0633286,113811e-9,.00414994,-.0020208,.0646443,16445e-8,.00441223,-.00260007,.0673886,237734e-9,.00484427,-.0033097,.0716528,345929e-9,.00549109,-.00418966,.0774998,505987e-9,.00636293,-.00527331,.0844758,739208e-9,.00746566,-.00660428,.0921325,.00107347,.00876625,-.00818826,.0997067,.00153691,.0103125,-.0100811,.107433,.00217153,.0123309,-.0123643,.117088,.00303427,.0146274,-.0150007,.126438,.00416018,.0172295,-.0180531,.135672,.00561513,.0204248,-.0215962,.146244,.007478,.0241597,-.0256234,.157481,.00981046,.0284693,-.0302209,.169125,.0127148,.033445,-.0353333,.181659,.0162453,.0391251,-.0410845,.1944,.0205417,.0454721,-.0473451,.207082,.0256333,.0530983,-.0542858,.221656,.0317036,.0615356,-.0618384,.236036,.0388319,.0703363,-.0697631,.248398,.046974,.0810391,-.0784757,.263611,.0565246,.0920144,-.0873488,.275857,.0671724,.105584,-.0973652,.292555,.0798105,.119506,-.107271,.306333,.0935945,.134434,-.117608,.318888,.109106,.153399,-.128938,.337552,.127074,.171258,-.139944,.349955,.14643,.191059,-.151288,.361545,.168,.215069,-.163018,.378421,.192082,.237838,-.174226,.38879,.217838,.266965,-.186063,.405857,.246931,.292827,-.196909,.414146,.277505,.324352,-.207473,.426955,.310711,.354427,-.217713,.433429,.346794,.389854,-.227183,.443966,.385237,.420749,-.235131,.44471,.424955,.459597,-.242786,.451729,.468446,.495316,-.248767,.45072,.513422,.534903,-.253351,.450924,.560618,.572369,-.256277,.445266,.609677,.612383,-.2576,.438798,.660995,.644037,-.256931,.421693,.713807,.686749,-.254036,.4109,.767616,.719814,-.249785,.390151,.82533,.754719,-.244283,.367847,.888311,.792022,-.235076,.345013,.948177,.822404,-.225061,.316193,1.01661,.853084,-.211113,.287013,1.08075,.879871,-.19449,.255424,1.14501,.901655,-.174023,.222879,1.20203,.919957,-.1509,.18989,1.25698,.938412,-.124923,.15606,1.30588,.953471,-.0968139,.120512,1.3529,.970451,-.066734,.0828515,1.3986,.985522,-.034734,.0424458,1.44148,1.00099,-.00102222,678929e-9,1.48398,965494e-9,-6.27338e-7,.0306409,1.97672e-8,99168e-8,-158573e-10,.0314638,4.99803e-7,991068e-9,-634012e-10,.031363,200682e-11,974567e-9,-14144e-8,.03036,457312e-11,998079e-9,-252812e-9,.031496,860131e-11,.00102243,-396506e-9,.0319955,148288e-10,.00107877,-577593e-9,.0331376,249141e-10,.00121622,-816816e-9,.0359396,423011e-10,.0014455,-.00113761,.0399652,724613e-10,.00178791,-.00156959,.0450556,123929e-9,.00225668,-.00214064,.0508025,208531e-9,.00285627,-.00287655,.0568443,341969e-9,.0035991,-.00380271,.0630892,544158e-9,.00455524,-.00496264,.0702204,842423e-9,.00569143,-.0063793,.0773426,.00126704,.00716928,-.00813531,.0860839,.00186642,.00885307,-.0101946,.0944079,.00267014,.0109316,-.0126386,.103951,.00374033,.0133704,-.0154876,.113786,.0051304,.0161525,-.0187317,.123477,.00688858,.0194267,-.0224652,.133986,.00910557,.0230967,-.0265976,.143979,.0118074,.0273627,-.0312848,.154645,.0151266,.0323898,-.0365949,.166765,.0191791,.0379225,-.0422914,.177932,.0239236,.0447501,-.0487469,.19167,.0296568,.0519391,-.0556398,.203224,.0362924,.0599464,-.0631646,.215652,.0440585,.0702427,-.0714308,.232089,.0531619,.0806902,-.0800605,.245258,.0634564,.0923194,-.0892815,.258609,.0752481,.106938,-.09931,.276654,.0888914,.121238,-.109575,.289847,.104055,.138817,-.120461,.307566,.121266,.15595,-.131209,.320117,.139944,.178418,-.143049,.339677,.161591,.197875,-.154074,.349886,.184303,.224368,-.166307,.369352,.210669,.252213,-.178051,.386242,.238895,.277321,-.189335,.395294,.269182,.310332,-.200683,.412148,.302508,.338809,-.210856,.418266,.337264,.372678,-.220655,.428723,.374881,.405632,-.230053,.433887,.415656,.442293,-.237993,.439911,.457982,.477256,-.244897,.440175,.502831,.515592,-.250657,.441079,.550277,.550969,-.255459,.435219,.601102,.592883,-.257696,.432882,.651785,.629092,-.259894,.421054,.708961,.672033,-.258592,.41177,.763806,.709147,-.256525,.395267,.824249,.745367,-.254677,.375013,.8951,.784715,-.247892,.353906,.959317,.818107,-.240162,.327801,1.03153,.847895,-.229741,.298821,1.10601,.879603,-.213084,.269115,1.164,.902605,-.195242,.236606,1.22854,.922788,-.174505,.203442,1.29017,.944831,-.150169,.169594,1.34157,.959656,-.124099,.135909,1.3956,.972399,-.0960626,.0990563,1.45128,.986549,-.0657097,.0602348,1.50312,1.00013,-.0333558,.0186694,1.55364,619747e-11,-1e-7,.00778326,796756e-16,2.37499e-8,-9.99999e-8,282592e-10,1.14596e-10,100292e-11,-166369e-11,250354e-9,6.77492e-9,350752e-11,-637769e-11,357289e-9,6.31655e-8,826445e-11,-174689e-10,516179e-9,3.1851e-7,242481e-10,-450868e-10,.0010223,130577e-11,455631e-10,-89044e-9,.00144302,374587e-11,971222e-10,-178311e-9,.00241912,102584e-10,171403e-9,-313976e-9,.00354938,236481e-10,292747e-9,-520026e-9,.00513765,496014e-10,789827e-9,-.00118187,.0238621,139056e-9,.00114093,-.00171827,.0286691,244093e-9,.00176119,-.00249667,.0368565,420623e-9,.0022233,-.00333742,.0400469,65673e-8,.00343382,-.00481976,.0535751,.00109323,.00427602,-.00600755,.057099,.00155268,.00461435,-.00737637,.0551084,.00215031,.00695698,-.00971401,.0715767,.00316529,.00867619,-.0120943,.0793314,.00436995,.0106694,-.0148202,.0869391,.0058959,.0140351,-.0183501,.101572,.00798757,.0168939,-.022006,.11018,.0104233,.020197,-.0261568,.119041,.0134167,.0254702,-.0312778,.135404,.0173009,.0298384,-.0362469,.1437,.0215428,.035159,-.042237,.15512,.0268882,.0427685,-.0488711,.17128,.033235,.0494848,-.0557997,.181813,.0404443,.0592394,-.0635578,.198745,.0490043,.0681463,-.071838,.210497,.0588239,.0804753,-.0809297,.228864,.0702835,.0942205,-.0906488,.247008,.0834012,.106777,-.100216,.258812,.0975952,.124471,-.110827,.278617,.114162,.138389,-.121193,.287049,.131983,.159543,-.13253,.307151,.152541,.176432,-.143611,.31564,.174673,.201723,-.15548,.33538,.199842,.229721,-.167166,.355256,.227097,.250206,-.178238,.360047,.256014,.282118,-.189905,.378761,.28855,.312821,-.201033,.39181,.323348,.341482,-.211584,.397716,.360564,.377368,-.221314,.410141,.400004,.418229,-.230474,.423485,.442371,.444881,-.239443,.418874,.488796,.488899,-.245987,.427545,.535012,.520317,-.253948,.422147,.589678,.568566,-.256616,.42719,.637683,.599607,-.26376,.415114,.703363,.64222,-.268687,.408715,.771363,.685698,-.2694,.399722,.83574,.732327,-.266642,.388651,.897764,.769873,-.267712,.369198,.983312,.806733,-.263479,.346802,1.06222,.843466,-.254575,.321368,1.13477,.873008,-.242749,.29211,1.20712,.908438,-.22725,.262143,1.27465,.936321,-.207621,.228876,1.33203,.950353,-.187932,.19484,1.40439,.96442,-.165154,.163178,1.4732,.979856,-.139302,.127531,1.53574,.982561,-.11134,.0903457,1.59982,.996389,-.0808124,.0489007,1.6577],t=[1,0,0,0,1,791421e-36,0,0,1,104392e-29,0,0,1,349405e-26,0,0,1,109923e-23,0,0,1,947414e-22,0,0,1,359627e-20,0,0,1,772053e-19,0,0,1,108799e-17,0,0,1,110655e-16,0,0,1,865818e-16,0,0,.999998,5.45037e-10,0,0,.999994,2.85095e-9,0,0,.999989,1.26931e-8,0,0,.999973,4.89938e-8,0,0,.999947,1.66347e-7,0,0,.999894,5.02694e-7,0,0,.999798,136532e-11,0,0,.999617,335898e-11,0,0,.999234,752126e-11,0,0,.998258,152586e-10,0,0,.99504,266207e-10,0,0,.980816,236802e-10,0,0,.967553,207684e-11,0,0,.966877,403733e-11,0,0,.965752,741174e-11,0,0,.96382,127746e-10,0,0,.960306,202792e-10,0,0,.953619,280232e-10,0,0,.941103,278816e-10,0,0,.926619,160221e-10,0,0,.920983,235164e-10,0,0,.912293,311924e-10,0,.0158731,.899277,348118e-10,0,.0476191,.880884,26041e-9,0,.0793651,.870399,338726e-10,0,.111111,.856138,392906e-10,0,.142857,.837436,372874e-10,0,.174603,.820973,392558e-10,0,.206349,.803583,434658e-10,0,.238095,.782168,40256e-9,0,.269841,.764107,448159e-10,0,.301587,.743092,457627e-10,0,.333333,.721626,455314e-10,0,.365079,.700375,477335e-10,0,.396825,.677334,461072e-10,0,.428571,.655702,484393e-10,0,.460317,.632059,464583e-10,0,.492064,.610125,483923e-10,0,.52381,.58653,464342e-10,0,.555556,.564508,477033e-10,0,.587302,.541405,459263e-10,0,.619048,.519556,46412e-9,0,.650794,.497292,448913e-10,0,.68254,.475898,445789e-10,0,.714286,.454722,433496e-10,0,.746032,.434042,423054e-10,0,.777778,.414126,413737e-10,0,.809524,.394387,397265e-10,0,.84127,.375841,390709e-10,0,.873016,.357219,369938e-10,0,.904762,.340084,365618e-10,0,.936508,.322714,342533e-10,0,.968254,.306974,339596e-10,0,1,1,101524e-23,0,0,1,10292e-22,0,0,1,130908e-23,0,0,1,473331e-23,0,0,1,625319e-22,0,0,1,107932e-20,0,0,1,163779e-19,0,0,1,203198e-18,0,0,1,204717e-17,0,0,.999999,168995e-16,0,0,.999998,1.15855e-10,0,0,.999996,6.6947e-10,0,0,.999991,3.30863e-9,0,0,.999983,1.41737e-8,0,0,.999968,5.32626e-8,0,0,.99994,1.77431e-7,0,0,.999891,5.28835e-7,0,0,.999797,142169e-11,0,0,.999617,347057e-11,0,0,.999227,77231e-10,0,0,.998239,155753e-10,0,0,.994937,268495e-10,0,0,.980225,213742e-10,0,0,.967549,21631e-10,0,0,.966865,417989e-11,0,0,.965739,763341e-11,0,0,.963794,130892e-10,0,0,.960244,206456e-10,0,0,.953495,282016e-10,0,148105e-9,.940876,271581e-10,0,.002454,.926569,164159e-10,0,.00867491,.920905,239521e-10,0,.01956,.912169,315127e-10,0,.035433,.899095,346626e-10,0,.056294,.882209,290223e-10,0,.0818191,.870272,342992e-10,0,.111259,.855977,394164e-10,0,.142857,.837431,372343e-10,0,.174603,.820826,396691e-10,0,.206349,.803408,435395e-10,0,.238095,.782838,419579e-10,0,.269841,.763941,450953e-10,0,.301587,.742904,455847e-10,0,.333333,.721463,458833e-10,0,.365079,.700197,477159e-10,0,.396825,.677501,470641e-10,0,.428571,.655527,484732e-10,0,.460317,.6324,476834e-10,0,.492064,.609964,484213e-10,0,.52381,.586839,475541e-10,0,.555556,.564353,476951e-10,0,.587302,.541589,467611e-10,0,.619048,.519413,463493e-10,0,.650794,.497337,453994e-10,0,.68254,.475797,445308e-10,0,.714286,.454659,435787e-10,0,.746032,.434065,424839e-10,0,.777778,.414018,41436e-9,0,.809524,.39455,401902e-10,0,.84127,.375742,390813e-10,0,.873016,.357501,377116e-10,0,.904762,.339996,36535e-9,0,.936508,.323069,351265e-10,0,.968254,.306897,339112e-10,0,1,1,10396e-19,0,0,1,104326e-20,0,0,1,110153e-20,0,0,1,144668e-20,0,0,1,34528e-19,0,0,1,175958e-19,0,0,1,12627e-17,0,0,1,936074e-18,0,0,1,645742e-17,0,0,.999998,401228e-16,0,0,.999997,2.22338e-10,0,0,.999995,1.0967e-9,0,0,.999991,4.82132e-9,0,0,.999981,1.89434e-8,0,0,.999967,6.67716e-8,0,0,.999938,2.12066e-7,0,0,.999886,6.0977e-7,0,0,.999792,159504e-11,0,0,.999608,381191e-11,0,0,.999209,833727e-11,0,0,.998179,165288e-10,0,0,.994605,274387e-10,0,0,.979468,167316e-10,0,0,.967529,242877e-11,0,0,.966836,461696e-11,0,0,.96569,830977e-11,0,0,.963706,140427e-10,0,244659e-11,.960063,217353e-10,0,760774e-9,.953113,286606e-10,0,.00367261,.940192,247691e-10,0,.00940263,.927731,195814e-10,0,.018333,.920669,252531e-10,0,.0306825,.911799,324277e-10,0,.0465556,.89857,340982e-10,0,.0659521,.883283,319622e-10,0,.0887677,.86989,35548e-9,0,.114784,.855483,397143e-10,0,.143618,.837987,391665e-10,0,.174606,.820546,411306e-10,0,.206349,.802878,436753e-10,0,.238095,.783402,444e-7,0,.269841,.763439,458726e-10,0,.301587,.742925,467097e-10,0,.333333,.721633,478887e-10,0,.365079,.69985,481251e-10,0,.396825,.67783,491811e-10,0,.428571,.655126,488199e-10,0,.460318,.632697,496025e-10,0,.492064,.609613,48829e-9,0,.52381,.587098,492754e-10,0,.555556,.564119,482625e-10,0,.587302,.541813,482807e-10,0,.619048,.519342,471552e-10,0,.650794,.497514,466765e-10,0,.68254,.475879,455582e-10,0,.714286,.454789,446007e-10,0,.746032,.434217,435382e-10,0,.777778,.414086,421753e-10,0,.809524,.394744,412093e-10,0,.84127,.375782,396634e-10,0,.873016,.357707,386419e-10,0,.904762,.340038,370345e-10,0,.936508,.323284,359725e-10,0,.968254,.306954,3436e-8,0,1,1,599567e-19,0,0,1,600497e-19,0,0,1,614839e-19,0,0,1,686641e-19,0,0,1,972658e-19,0,0,1,221271e-18,0,0,1,833195e-18,0,0,1,403601e-17,0,0,.999999,206001e-16,0,0,.999998,1.01739e-10,0,0,.999997,4.70132e-10,0,0,.999993,2.00436e-9,0,0,.999988,7.83682e-9,0,0,.999979,2.80338e-8,0,0,.999962,9.17033e-8,0,0,.999933,2.74514e-7,0,0,.999881,7.53201e-7,0,0,.999783,189826e-11,0,0,.999594,440279e-11,0,0,.999178,93898e-10,0,0,.998073,181265e-10,0,0,.993993,280487e-10,0,0,.979982,149422e-10,0,0,.968145,378481e-11,0,0,.966786,53771e-10,0,0,.965611,947508e-11,0,388934e-10,.963557,156616e-10,0,9693e-7,.959752,235144e-10,0,.00370329,.952461,291568e-10,0,.00868428,.940193,240102e-10,0,.0161889,.929042,231235e-10,0,.0263948,.920266,273968e-10,0,.0394088,.911178,337915e-10,0,.0552818,.897873,333629e-10,0,.0740138,.884053,351405e-10,0,.0955539,.869455,378034e-10,0,.119795,.854655,399378e-10,0,.14656,.838347,419108e-10,0,.175573,.820693,440831e-10,0,.206388,.802277,445599e-10,0,.238095,.783634,472691e-10,0,.269841,.763159,476984e-10,0,.301587,.742914,491487e-10,0,.333333,.721662,502312e-10,0,.365079,.699668,502817e-10,0,.396825,.677839,51406e-9,0,.428571,.655091,511095e-10,0,.460317,.632665,516067e-10,0,.492064,.609734,512255e-10,0,.52381,.587043,510263e-10,0,.555556,.564298,50565e-9,0,.587302,.541769,497951e-10,0,.619048,.519529,492698e-10,0,.650794,.497574,482066e-10,0,.68254,.476028,473689e-10,0,.714286,.454961,461941e-10,0,.746032,.434341,450618e-10,0,.777778,.414364,438355e-10,0,.809524,.394832,424196e-10,0,.84127,.376109,412563e-10,0,.873016,.35779,396226e-10,0,.904762,.340379,384886e-10,0,.936508,.323385,368214e-10,0,.968254,.307295,356636e-10,0,1,1,106465e-17,0,0,1,106555e-17,0,0,1,107966e-17,0,0,1,114601e-17,0,0,1,137123e-17,0,0,1,21243e-16,0,0,.999999,489653e-17,0,0,.999999,160283e-16,0,0,.999998,62269e-15,0,0,.999997,2.51859e-10,0,0,.999996,9.96192e-10,0,0,.999992,3.74531e-9,0,0,.999986,1.32022e-8,0,0,.999975,4.33315e-8,0,0,.999959,1.31956e-7,0,0,.999927,3.72249e-7,0,0,.999871,9.72461e-7,0,0,.999771,235343e-11,0,0,.999572,52768e-10,0,0,.999133,109237e-10,0,0,.997912,203675e-10,0,0,.993008,279396e-10,0,0,.980645,139604e-10,0,0,.970057,646596e-11,0,0,.966717,65089e-10,0,474145e-10,.965497,111863e-10,0,89544e-8,.96334,179857e-10,0,.0032647,.959294,259045e-10,0,.0075144,.951519,292327e-10,0,.0138734,.940517,249769e-10,0,.0224952,.93014,26803e-9,0,.0334828,.91972,303656e-10,0,.0468973,.910294,353323e-10,0,.0627703,.897701,351002e-10,0,.0811019,.884522,388104e-10,0,.10186,.869489,412932e-10,0,.124985,.853983,415781e-10,0,.150372,.838425,454066e-10,0,.177868,.820656,471624e-10,0,.207245,.801875,475243e-10,0,.238143,.783521,505621e-10,0,.269841,.763131,50721e-9,0,.301587,.74261,523293e-10,0,.333333,.72148,528699e-10,0,.365079,.699696,538677e-10,0,.396825,.677592,539255e-10,0,.428571,.65525,546367e-10,0,.460317,.632452,541348e-10,0,.492064,.609903,544976e-10,0,.52381,.586928,536201e-10,0,.555556,.564464,535185e-10,0,.587302,.541801,524949e-10,0,.619048,.519681,51812e-9,0,.650794,.497685,507687e-10,0,.68254,.47622,496243e-10,0,.714286,.455135,485714e-10,0,.746032,.4346,471847e-10,0,.777778,.414564,459294e-10,0,.809524,.395165,444705e-10,0,.84127,.376333,430772e-10,0,.873016,.358197,416229e-10,0,.904762,.34064,401019e-10,0,.936508,.323816,386623e-10,0,.968254,.307581,370933e-10,0,1,1,991541e-17,0,0,1,992077e-17,0,0,1,100041e-16,0,0,1,10385e-15,0,0,1,115777e-16,0,0,1,150215e-16,0,0,.999999,254738e-16,0,0,.999999,598822e-16,0,0,.999998,1.79597e-10,0,0,.999997,6.02367e-10,0,0,.999994,2.06835e-9,0,0,.99999,6.94952e-9,0,0,.999984,2.23363e-8,0,0,.999972,6.78578e-8,0,0,.999952,1.93571e-7,0,0,.999919,5.16594e-7,0,0,.99986,128739e-11,0,0,.999753,299298e-11,0,0,.999546,648258e-11,0,0,.999074,129985e-10,0,0,.997671,232176e-10,0,0,.991504,256701e-10,0,0,.981148,131141e-10,0,0,.971965,869048e-11,0,280182e-10,.966624,808301e-11,0,695475e-9,.965344,135235e-10,0,.00265522,.963048,210592e-10,0,.00622975,.958673,287473e-10,0,.0116234,.950262,281379e-10,0,.018976,.940836,271089e-10,0,.0283844,.930996,30926e-9,0,.0399151,.919848,348359e-10,0,.0536063,.909136,366092e-10,0,.0694793,.897554,384162e-10,0,.0875342,.884691,430971e-10,0,.107749,.869414,447803e-10,0,.130087,.853462,452858e-10,0,.154481,.838187,495769e-10,0,.180833,.820381,502709e-10,0,.209005,.801844,522713e-10,0,.238791,.783061,541505e-10,0,.269869,.763205,553712e-10,0,.301587,.742362,564909e-10,0,.333333,.721393,572646e-10,0,.365079,.699676,581012e-10,0,.396825,.677395,58096e-9,0,.428571,.655208,585766e-10,0,.460317,.632451,583602e-10,0,.492064,.609839,580234e-10,0,.52381,.587093,577161e-10,0,.555556,.564467,568447e-10,0,.587302,.542043,563166e-10,0,.619048,.519826,55156e-9,0,.650794,.497952,541682e-10,0,.68254,.476477,528971e-10,0,.714286,.455412,514952e-10,0,.746032,.434926,502222e-10,0,.777778,.4149,485779e-10,0,.809524,.395552,472242e-10,0,.84127,.376712,454891e-10,0,.873016,.358622,440924e-10,0,.904762,.341048,422984e-10,0,.936508,.324262,408582e-10,0,.968254,.308013,390839e-10,0,1,1,613913e-16,0,0,1,614145e-16,0,0,1,617708e-16,0,0,1,633717e-16,0,0,1,681648e-16,0,0,1,808291e-16,0,0,1,1.14608e-10,0,0,.999998,2.10507e-10,0,0,.999997,4.99595e-10,0,0,.999995,1.39897e-9,0,0,.999994,4.19818e-9,0,0,.999988,1.27042e-8,0,0,.999979,3.75153e-8,0,0,.999965,1.06206e-7,0,0,.999945,2.85381e-7,0,0,.999908,7.23611e-7,0,0,.999846,17255e-10,0,0,.999733,386104e-11,0,0,.999511,808493e-11,0,0,.998993,156884e-10,0,0,.997326,265538e-10,0,0,.989706,206466e-10,0,0,.981713,130756e-10,0,70005e-10,.973636,106473e-10,0,464797e-9,.966509,10194e-9,0,.00201743,.965149,165881e-10,0,.00497549,.962669,249147e-10,0,.00953262,.95786,317449e-10,0,.0158211,.949334,281045e-10,0,.0239343,.941041,303263e-10,0,.0339372,.931575,356754e-10,0,.0458738,.920102,397075e-10,0,.059772,.908002,384886e-10,0,.075645,.897269,43027e-9,0,.0934929,.884559,479925e-10,0,.113302,.869161,48246e-9,0,.135045,.853342,509505e-10,0,.158678,.837633,542846e-10,0,.184136,.820252,554139e-10,0,.211325,.801872,581412e-10,0,.240113,.782418,585535e-10,0,.270306,.7631,610923e-10,0,.301594,.742183,613678e-10,0,.333333,.721098,627275e-10,0,.365079,.699512,629413e-10,0,.396825,.677372,636351e-10,0,.428571,.655059,633555e-10,0,.460317,.632567,636513e-10,0,.492064,.609784,628965e-10,0,.52381,.587237,625546e-10,0,.555556,.564525,615825e-10,0,.587302,.542181,605048e-10,0,.619048,.520017,596329e-10,0,.650794,.498204,581516e-10,0,.68254,.476742,569186e-10,0,.714286,.455803,553833e-10,0,.746032,.435251,537807e-10,0,.777778,.415374,522025e-10,0,.809524,.395921,503421e-10,0,.84127,.377253,488211e-10,0,.873016,.359021,468234e-10,0,.904762,.341637,453269e-10,0,.936508,.3247,433014e-10,0,.968254,.308625,418007e-10,0,1,1,2.86798e-10,0,0,1,2.86877e-10,0,0,1,2.88094e-10,0,0,1,2.93506e-10,0,0,1,3.09262e-10,0,0,.999999,3.48593e-10,0,0,.999999,4.44582e-10,0,0,.999998,6.88591e-10,0,0,.999996,1.34391e-9,0,0,.999993,3.17438e-9,0,0,.999989,8.35609e-9,0,0,.999983,2.28677e-8,0,0,.999974,6.23361e-8,0,0,.999959,1.65225e-7,0,0,.999936,4.19983e-7,0,0,.999896,101546e-11,0,0,.99983,232376e-11,0,0,.999709,50156e-10,0,0,.999469,10167e-9,0,0,.998886,190775e-10,0,0,.996819,300511e-10,0,0,.988837,185092e-10,0,1.68222e-7,.982178,134622e-10,0,259622e-9,.975017,125961e-10,0,.00142595,.967101,13507e-9,0,.00382273,.964905,205003e-10,0,.00764164,.96218,29546e-9,0,.0130121,.956821,343738e-10,0,.0200253,.948829,305063e-10,0,.0287452,.941092,346487e-10,0,.039218,.931883,412061e-10,0,.0514748,.920211,444651e-10,0,.0655351,.907307,431252e-10,0,.0814082,.89684,490382e-10,0,.0990939,.884119,53334e-9,0,.118583,.869148,54114e-9,0,.139856,.853377,578536e-10,0,.162882,.836753,592285e-10,0,.187615,.820063,622787e-10,0,.213991,.801694,645492e-10,0,.241918,.782116,65353e-9,0,.271267,.762673,674344e-10,0,.301847,.742133,682788e-10,0,.333333,.720779,691959e-10,0,.365079,.699386,696817e-10,0,.396826,.67732,699583e-10,0,.428572,.654888,698447e-10,0,.460318,.632499,694063e-10,0,.492064,.609825,691612e-10,0,.52381,.587287,681576e-10,0,.555556,.564743,674138e-10,0,.587302,.542409,661617e-10,0,.619048,.520282,647785e-10,0,.650794,.498506,633836e-10,0,.68254,.477102,615905e-10,0,.714286,.456167,601013e-10,0,.746032,.435728,581457e-10,0,.777778,.415809,564215e-10,0,.809524,.396517,544997e-10,0,.84127,.377737,525061e-10,0,.873016,.359698,506831e-10,0,.904762,.342164,48568e-9,0,.936508,.325417,467826e-10,0,.968254,.309186,446736e-10,0,1,1,1.09018e-9,0,0,1,1.0904e-9,0,0,1,1.09393e-9,0,0,1,1.1095e-9,0,0,1,1.154e-9,0,0,1,1.26089e-9,0,0,.999999,1.5059e-9,0,0,.999997,2.07899e-9,0,0,.999994,3.48164e-9,0,0,.999993,7.05728e-9,0,0,.999987,1.63692e-8,0,0,.999981,4.06033e-8,0,0,.999969,1.0245e-7,0,0,.999953,2.55023e-7,0,0,.999925,6.1511e-7,0,0,.999881,142218e-11,0,0,.99981,313086e-11,0,0,.99968,653119e-11,0,0,.999418,12832e-9,0,0,.998748,232497e-10,0,0,.996066,329522e-10,0,0,.988379,179613e-10,0,108799e-9,.982567,143715e-10,0,921302e-9,.976097,148096e-10,0,.00280738,.968475,178905e-10,0,.00596622,.964606,253921e-10,0,.0105284,.961564,348623e-10,0,.0165848,.955517,357612e-10,0,.0242,.948381,343493e-10,0,.03342,.941095,405849e-10,0,.0442777,.931923,475394e-10,0,.0567958,.91996,484328e-10,0,.0709879,.907419,502146e-10,0,.086861,.89618,561654e-10,0,.104415,.88337,587612e-10,0,.123643,.869046,618057e-10,0,.144531,.853278,657392e-10,0,.167057,.836091,66303e-9,0,.191188,.819644,704445e-10,0,.216878,.801246,714071e-10,0,.244062,.782031,740093e-10,0,.272649,.762066,74685e-9,0,.302509,.741964,766647e-10,0,.333442,.720554,766328e-10,0,.365079,.699098,777857e-10,0,.396826,.677189,774633e-10,0,.428572,.65484,776235e-10,0,.460318,.632496,770316e-10,0,.492064,.609908,762669e-10,0,.52381,.587312,753972e-10,0,.555556,.564938,739994e-10,0,.587302,.542577,728382e-10,0,.619048,.52062,71112e-9,0,.650794,.498819,694004e-10,0,.68254,.477555,675575e-10,0,.714286,.456568,653449e-10,0,.746032,.436278,636068e-10,0,.777778,.41637,613466e-10,0,.809524,.397144,594177e-10,0,.84127,.378412,570987e-10,0,.873016,.360376,550419e-10,0,.904762,.342906,527422e-10,0,.936508,.326136,506544e-10,0,.968254,.30997,484307e-10,0,1,1,3.54014e-9,0,0,1,3.54073e-9,0,0,1,3.54972e-9,0,0,1,3.58929e-9,0,0,1,3.70093e-9,0,0,.999999,3.96194e-9,0,0,.999998,4.53352e-9,0,0,.999997,5.78828e-9,0,0,.999994,8.63812e-9,0,0,.999991,1.53622e-8,0,0,.999985,3.16356e-8,0,0,.999977,7.12781e-8,0,0,.999964,1.66725e-7,0,0,.999945,3.90501e-7,0,0,.999912,8.95622e-7,0,0,.999866,198428e-11,0,0,.999786,421038e-11,0,0,.999647,850239e-11,0,0,.999356,162059e-10,0,0,.998563,282652e-10,0,0,.994928,336309e-10,0,244244e-10,.987999,178458e-10,0,523891e-9,.982893,159162e-10,0,.00194729,.977044,178056e-10,0,.00451099,.969972,230624e-10,0,.00835132,.964237,313922e-10,0,.013561,.960791,406145e-10,0,.0202056,.954292,372796e-10,0,.0283321,.948052,403199e-10,0,.0379739,.940938,479537e-10,0,.0491551,.931689,545292e-10,0,.0618918,.91987,54038e-9,0,.0761941,.907665,589909e-10,0,.0920672,.895281,642651e-10,0,.109511,.882621,659707e-10,0,.12852,.86873,709973e-10,0,.149085,.853008,742221e-10,0,.171189,.835944,761754e-10,0,.194809,.818949,797052e-10,0,.21991,.800951,812434e-10,0,.246447,.781847,838075e-10,0,.274352,.761649,84501e-9,0,.303535,.74152,860258e-10,0,.333857,.720495,866233e-10,0,.365104,.698742,868326e-10,0,.396826,.677096,87133e-9,0,.428572,.654782,863497e-10,0,.460318,.632335,860206e-10,0,.492064,.610031,849337e-10,0,.52381,.587457,838279e-10,0,.555556,.56513,82309e-9,0,.587302,.542877,803542e-10,0,.619048,.5209,786928e-10,0,.650794,.499291,765171e-10,0,.68254,.477971,744753e-10,0,.714286,.457221,72209e-9,0,.746032,.436803,697448e-10,0,.777778,.417083,675333e-10,0,.809524,.397749,648058e-10,0,.84127,.379177,625759e-10,0,.873016,.361061,598584e-10,0,.904762,.343713,575797e-10,0,.936508,.326894,549999e-10,0,.968254,.310816,527482e-10,0,1,1,1.0153e-8,0,0,1,1.01544e-8,0,0,1,1.01751e-8,0,0,1,1.02662e-8,0,0,1,1.0521e-8,0,0,.999999,1.11049e-8,0,0,.999999,1.23408e-8,0,0,.999996,1.4924e-8,0,0,.999992,2.04471e-8,0,0,.999989,3.26539e-8,0,0,.99998,6.03559e-8,0,0,.999971,1.23936e-7,0,0,.999955,2.69058e-7,0,0,.999933,5.93604e-7,0,0,.999901,129633e-11,0,0,.999847,275621e-11,0,0,.999761,564494e-11,0,0,.999607,110485e-10,0,0,.999282,204388e-10,0,0,.99831,341084e-10,0,2.2038e-7,.993288,294949e-10,0,242388e-9,.987855,192736e-10,0,.0012503,.983167,182383e-10,0,.0032745,.977908,218633e-10,0,.00646321,.971194,290662e-10,0,.0109133,.963867,386401e-10,0,.0166927,.95982,462827e-10,0,.0238494,.953497,420705e-10,0,.0324178,.947621,477743e-10,0,.0424225,.940611,568258e-10,0,.0538808,.931174,618061e-10,0,.0668047,.919919,627098e-10,0,.0812014,.907856,694714e-10,0,.0970745,.894509,735008e-10,0,.114424,.881954,763369e-10,0,.133246,.868309,821896e-10,0,.153534,.852511,83769e-9,0,.175275,.835821,881615e-10,0,.198453,.817981,896368e-10,0,.223042,.800504,930906e-10,0,.249009,.78141,945056e-10,0,.276304,.761427,963605e-10,0,.304862,.74094,968088e-10,0,.334584,.720233,981481e-10,0,.365322,.698592,979122e-10,0,.396826,.676763,981057e-10,0,.428571,.654808,973956e-10,0,.460318,.632326,962619e-10,0,.492064,.610049,952996e-10,0,.52381,.58763,933334e-10,0,.555556,.565261,917573e-10,0,.587302,.543244,896636e-10,0,.619048,.521273,873304e-10,0,.650794,.499818,852648e-10,0,.68254,.478536,823961e-10,0,.714286,.457826,79939e-9,0,.746032,.437549,77126e-9,0,.777778,.41776,743043e-10,0,.809524,.39863,716426e-10,0,.84127,.379954,686456e-10,0,.873016,.362025,660514e-10,0,.904762,.344581,630755e-10,0,.936508,.327909,605439e-10,0,.968254,.311736,576345e-10,0,1,1,2.63344e-8,0,0,1,2.63373e-8,0,0,1,2.63815e-8,0,0,1,2.65753e-8,0,0,1,2.71132e-8,0,0,.999999,2.83279e-8,0,0,.999997,3.0833e-8,0,0,.999995,3.58711e-8,0,0,.999992,4.61266e-8,0,0,.999985,6.7574e-8,0,0,.999977,1.1358e-7,0,0,.999966,2.13657e-7,0,0,.999948,4.31151e-7,0,0,.999923,8.96656e-7,0,0,.999884,186603e-11,0,0,.999826,381115e-11,0,0,.999732,754184e-11,0,0,.999561,143192e-10,0,0,.999191,257061e-10,0,0,.997955,405724e-10,0,744132e-10,.992228,276537e-10,0,716477e-9,.987638,208885e-10,0,.0022524,.983395,215226e-10,0,.00484816,.978614,270795e-10,0,.00860962,.972389,365282e-10,0,.0136083,.964392,474747e-10,0,.0198941,.95861,509141e-10,0,.0275023,.952806,48963e-9,0,.0364584,.94712,571119e-10,0,.04678,.940104,671704e-10,0,.0584799,.930398,687586e-10,0,.0715665,.919866,738161e-10,0,.086045,.907853,813235e-10,0,.101918,.894078,834582e-10,0,.119186,.881177,892093e-10,0,.137845,.867575,944548e-10,0,.157891,.852107,969607e-10,0,.179316,.835502,101456e-9,0,.202106,.81756,103256e-9,0,.226243,.79984,106954e-9,0,.251704,.780998,108066e-9,0,.278451,.761132,110111e-9,0,.306436,.740429,110459e-9,0,.335586,.719836,111219e-9,0,.365796,.698467,11145e-8,0,.3969,.676446,110393e-9,0,.428571,.654635,110035e-9,0,.460318,.632411,108548e-9,0,.492064,.609986,106963e-9,0,.52381,.587872,105238e-9,0,.555556,.565528,102665e-9,0,.587302,.543563,100543e-9,0,.619048,.52176,976182e-10,0,.650794,.500188,947099e-10,0,.68254,.479204,919929e-10,0,.714286,.458413,886139e-10,0,.746032,.438314,857839e-10,0,.777778,.418573,82411e-9,0,.809524,.39947,792211e-10,0,.84127,.380892,759546e-10,0,.873016,.362953,727571e-10,0,.904762,.345601,695738e-10,0,.936508,.328895,664907e-10,0,.968254,.312808,634277e-10,0,1,1,6.28647e-8,0,0,1,6.28705e-8,0,0,1,6.29587e-8,0,0,1,6.33441e-8,0,0,.999999,6.44087e-8,0,0,.999998,6.67856e-8,0,0,.999997,7.15889e-8,0,0,.999995,8.09577e-8,0,0,.999989,9.92764e-8,0,0,.999983,1.35834e-7,0,0,.999974,2.10482e-7,0,0,.999959,3.65215e-7,0,0,.999939,6.86693e-7,0,0,.999911,13472e-10,0,0,.999868,26731e-10,0,0,.999804,524756e-11,0,0,.9997,100403e-10,0,0,.99951,185019e-10,0,0,.999078,322036e-10,0,620676e-11,.997428,470002e-10,0,341552e-9,.99162,287123e-10,0,.00143727,.987479,234706e-10,0,.00349201,.983582,260083e-10,0,.0066242,.979186,337927e-10,0,.0109113,.97325,454689e-10,0,.0164064,.965221,573759e-10,0,.0231463,.957262,544114e-10,0,.0311571,.952211,587006e-10,0,.0404572,.946631,692256e-10,0,.0510592,.939391,787819e-10,0,.0629723,.929795,792368e-10,0,.0762025,.91965,875075e-10,0,.090753,.907737,950903e-10,0,.106626,.893899,972963e-10,0,.123822,.880239,10459e-8,0,.142337,.866562,107689e-9,0,.16217,.85164,113081e-9,0,.183314,.835021,116636e-9,0,.20576,.817311,120074e-9,0,.229496,.798845,121921e-9,0,.254502,.780479,12475e-8,0,.280753,.760694,125255e-9,0,.308212,.740142,126719e-9,0,.336825,.719248,12636e-8,0,.366517,.698209,126712e-9,0,.397167,.676398,125769e-9,0,.428578,.654378,124432e-9,0,.460318,.632484,123272e-9,0,.492064,.610113,12085e-8,0,.52381,.587931,118411e-9,0,.555556,.565872,11569e-8,0,.587302,.543814,112521e-9,0,.619048,.522265,109737e-9,0,.650794,.500835,106228e-9,0,.68254,.479818,102591e-9,0,.714286,.459258,991288e-10,0,.746032,.439061,952325e-10,0,.777778,.419552,91895e-9,0,.809524,.400399,879051e-10,0,.84127,.381976,844775e-10,0,.873016,.364009,806316e-10,0,.904762,.346761,771848e-10,0,.936508,.330049,735429e-10,0,.968254,.314018,702103e-10,0,1,1,1.39968e-7,0,0,1,1.39979e-7,0,0,1,1.40145e-7,0,0,1,1.4087e-7,0,0,.999999,1.42865e-7,0,0,.999998,1.47279e-7,0,0,.999997,1.56057e-7,0,0,.999992,1.7276e-7,0,0,.999989,2.04352e-7,0,0,.99998,2.6494e-7,0,0,.999969,3.83435e-7,0,0,.999953,6.18641e-7,0,0,.999929,108755e-11,0,0,.999898,201497e-11,0,0,.999849,381346e-11,0,0,.999778,719815e-11,0,0,.999661,133215e-10,0,0,.999451,238313e-10,0,0,.998936,401343e-10,0,113724e-9,.99662,517346e-10,0,820171e-9,.991094,304323e-10,0,.00238143,.987487,281757e-10,0,.00493527,.983731,320048e-10,0,.00856859,.979647,423905e-10,0,.0133393,.973837,562935e-10,0,.0192863,.96584,677442e-10,0,.0264369,.956309,623073e-10,0,.03481,.951523,704131e-10,0,.0444184,.946003,836594e-10,0,.0552713,.938454,911736e-10,0,.0673749,.929279,938264e-10,0,.0807329,.919239,103754e-9,0,.0953479,.907293,109928e-9,0,.111221,.893936,115257e-9,0,.128352,.879674,122265e-9,0,.14674,.865668,125733e-9,0,.166382,.850998,132305e-9,0,.187276,.834498,134844e-9,0,.209413,.816903,139276e-9,0,.232786,.798235,140984e-9,0,.257382,.779724,14378e-8,0,.283181,.760251,144623e-9,0,.310156,.739808,145228e-9,0,.338269,.718762,14539e-8,0,.367461,.697815,144432e-9,0,.397646,.67631,143893e-9,0,.428685,.654278,141846e-9,0,.460318,.632347,13935e-8,0,.492064,.610296,137138e-9,0,.52381,.588039,133806e-9,0,.555556,.566218,130755e-9,0,.587302,.544346,127128e-9,0,.619048,.522701,123002e-9,0,.650794,.501542,119443e-9,0,.68254,.480508,115055e-9,0,.714286,.460092,111032e-9,0,.746032,.440021,106635e-9,0,.777778,.420446,102162e-9,0,.809524,.401512,98184e-9,0,.84127,.38299,936497e-10,0,.873016,.365232,89813e-9,0,.904762,.347865,853073e-10,0,.936508,.331342,817068e-10,0,.968254,.315202,773818e-10,0,1,1,2.9368e-7,0,0,1,2.937e-7,0,0,1,2.93998e-7,0,0,1,2.95298e-7,0,0,.999999,2.98865e-7,0,0,.999998,3.067e-7,0,0,.999995,3.22082e-7,0,0,.999992,3.50767e-7,0,0,.999986,4.03538e-7,0,0,.999976,5.01372e-7,0,0,.999964,6.8562e-7,0,0,.999945,10374e-10,0,0,.999919,171269e-11,0,0,.999882,300175e-11,0,0,.999829,542144e-11,0,0,.999749,984182e-11,0,0,.99962,176213e-10,0,0,.999382,305995e-10,0,138418e-10,.998751,496686e-10,0,389844e-9,.995344,510733e-10,0,.00150343,.990768,345829e-10,0,.00352451,.987464,342841e-10,0,.00655379,.983846,399072e-10,0,.0106554,.980007,533219e-10,0,.0158723,.974494,696992e-10,0,.0222333,.96622,776754e-10,0,.029758,.956273,747718e-10,0,.0384596,.950952,864611e-10,0,.0483473,.945215,100464e-9,0,.0594266,.937287,103729e-9,0,.0717019,.928649,111665e-9,0,.0851752,.918791,12353e-8,0,.0998479,.906685,127115e-9,0,.115721,.893706,13628e-8,0,.132794,.879248,142427e-9,0,.151067,.864685,148091e-9,0,.170538,.850032,153517e-9,0,.191204,.833853,157322e-9,0,.213063,.816353,161086e-9,0,.236107,.797834,164111e-9,0,.260329,.778831,165446e-9,0,.285714,.759756,167492e-9,0,.312243,.739419,166928e-9,0,.339887,.718491,167e-6,0,.368604,.697392,165674e-9,0,.398329,.676102,163815e-9,0,.428961,.654243,162003e-9,0,.460331,.632176,158831e-9,0,.492064,.610407,155463e-9,0,.52381,.588394,152062e-9,0,.555556,.56645,147665e-9,0,.587302,.5449,14375e-8,0,.619048,.523276,138905e-9,0,.650794,.502179,134189e-9,0,.68254,.481359,129392e-9,0,.714286,.46092,124556e-9,0,.746032,.441084,11957e-8,0,.777778,.421517,114652e-9,0,.809524,.402721,109688e-9,0,.84127,.384222,104667e-9,0,.873016,.366534,999633e-10,0,.904762,.349205,950177e-10,0,.936508,.332702,907301e-10,0,.968254,.316599,859769e-10,0,1,1,5.85473e-7,0,0,1,5.85507e-7,0,0,1,5.8602e-7,0,0,.999999,5.88259e-7,0,0,.999999,5.94381e-7,0,0,.999998,6.07754e-7,0,0,.999995,6.33729e-7,0,0,.99999,6.8137e-7,0,0,.999984,7.67003e-7,0,0,.999973,9.21212e-7,0,0,.999959,120218e-11,0,0,.999936,172024e-11,0,0,.999907,268088e-11,0,0,.999866,445512e-11,0,0,.999806,768481e-11,0,0,.999716,1342e-8,0,0,.999576,232473e-10,0,0,.9993,391694e-10,0,129917e-9,.998498,608429e-10,0,845035e-9,.994132,489743e-10,0,.00237616,.99031,384644e-10,0,.00484456,.987409,421768e-10,0,.00832472,.983981,504854e-10,0,.0128643,.980268,671028e-10,0,.0184947,.974875,852749e-10,0,.025237,.966063,85531e-9,0,.0331046,.956779,900588e-10,0,.0421067,.950259,10577e-8,0,.0522487,.944239,119458e-9,0,.0635343,.936341,122164e-9,0,.0759654,.928047,134929e-9,0,.0895434,.918065,145544e-9,0,.104269,.906267,150531e-9,0,.120142,.893419,161652e-9,0,.137163,.878758,16593e-8,0,.15533,.863699,174014e-9,0,.174645,.848876,177877e-9,0,.195106,.833032,184049e-9,0,.21671,.815557,186088e-9,0,.239454,.797323,19054e-8,0,.263332,.778124,191765e-9,0,.288336,.758929,192535e-9,0,.314451,.738979,192688e-9,0,.341658,.718213,191522e-9,0,.369924,.696947,190491e-9,0,.399202,.675807,187913e-9,0,.429416,.654147,184451e-9,0,.460447,.63229,181442e-9,0,.492064,.610499,177139e-9,0,.523809,.588747,172596e-9,0,.555555,.566783,167457e-9,0,.587301,.545359,162518e-9,0,.619048,.523984,156818e-9,0,.650794,.502917,151884e-9,0,.68254,.482294,145514e-9,0,.714286,.461945,140199e-9,0,.746032,.442133,134101e-9,0,.777778,.422705,128374e-9,0,.809524,.403916,122996e-9,0,.84127,.38554,116808e-9,0,.873016,.367909,111973e-9,0,.904762,.350651,105938e-9,0,.936508,.334208,101355e-9,0,.968254,.318123,957629e-10,0,1,1,111633e-11,0,0,1,111639e-11,0,0,1,111725e-11,0,0,1,112096e-11,0,0,.999999,11311e-10,0,0,.999997,115315e-11,0,0,.999995,11956e-10,0,0,.999989,127239e-11,0,0,.999981,140772e-11,0,0,.999969,164541e-11,0,0,.999952,206607e-11,0,0,.999928,281783e-11,0,0,.999895,416835e-11,0,0,.999848,658728e-11,0,0,.999781,108648e-10,0,0,.999682,182579e-10,0,0,.999523,306003e-10,0,159122e-10,.999205,499862e-10,0,391184e-9,.998131,73306e-9,0,.00147534,.993334,513229e-10,0,.0034227,.99016,467783e-10,0,.00632232,.987321,523413e-10,0,.0102295,.984099,64267e-9,0,.0151794,.980432,843042e-10,0,.0211947,.974976,102819e-9,0,.0282899,.966429,996234e-10,0,.0364739,.957633,111074e-9,0,.0457522,.949422,128644e-9,0,.0561278,.943045,140076e-9,0,.0676023,.935448,146349e-9,0,.0801762,.927225,161854e-9,0,.0938499,.917033,169135e-9,0,.108623,.905762,179987e-9,0,.124496,.892879,189832e-9,0,.141469,.878435,195881e-9,0,.159541,.863114,20466e-8,0,.178713,.84776,209473e-9,0,.198985,.832084,214861e-9,0,.220355,.814915,217695e-9,0,.242823,.796711,220313e-9,0,.266385,.777603,22313e-8,0,.291036,.757991,222471e-9,0,.316767,.738371,222869e-9,0,.343563,.717872,221243e-9,0,.371402,.696619,218089e-9,0,.400248,.675379,21562e-8,0,.430047,.65411,21169e-8,0,.460709,.63241,206947e-9,0,.492079,.61046,201709e-9,0,.52381,.58903,196753e-9,0,.555556,.567267,189637e-9,0,.587302,.545886,184735e-9,0,.619048,.524714,177257e-9,0,.650794,.503789,171424e-9,0,.68254,.483204,164688e-9,0,.714286,.462976,157172e-9,0,.746032,.443294,151341e-9,0,.777778,.423988,143737e-9,0,.809524,.405325,138098e-9,0,.84127,.386981,130698e-9,0,.873016,.369436,125276e-9,0,.904762,.35219,118349e-9,0,.936508,.335804,11312e-8,0,.968254,.319749,106687e-9,0,1,1,204685e-11,0,0,1,204694e-11,0,0,1,204831e-11,0,0,.999999,205428e-11,0,0,.999999,207056e-11,0,0,.999997,210581e-11,0,0,.999993,21732e-10,0,0,.999987,229365e-11,0,0,.999979,250243e-11,0,0,.999965,286127e-11,0,0,.999947,348028e-11,0,0,.999918,455588e-11,0,0,.999881,643303e-11,0,0,.999828,970064e-11,0,0,.999753,153233e-10,0,0,.999642,24793e-9,0,0,.999464,402032e-10,0,122947e-9,.999089,635852e-10,0,807414e-9,.997567,857026e-10,0,.00227206,.992903,594912e-10,0,.00462812,.990011,578515e-10,0,.00794162,.987192,65399e-9,0,.0122534,.98418,819675e-10,0,.0175888,.980491,105514e-9,0,.0239635,.974779,121532e-9,0,.031387,.96675,119144e-9,0,.0398644,.958248,136125e-9,0,.0493982,.948884,155408e-9,0,.0599896,.941673,162281e-9,0,.0716382,.934521,176754e-9,0,.0843437,.926205,192873e-9,0,.0981056,.916089,200038e-9,0,.112923,.904963,213624e-9,0,.128796,.892089,221834e-9,0,.145725,.878028,232619e-9,0,.163709,.86249,238632e-9,0,.182749,.846587,247002e-9,0,.202847,.830988,250702e-9,0,.224001,.814165,255562e-9,0,.246214,.796135,257505e-9,0,.269482,.777052,258625e-9,0,.293805,.757201,258398e-9,0,.319176,.737655,256714e-9,0,.345587,.717477,255187e-9,0,.373021,.696433,251792e-9,0,.401454,.675084,247223e-9,0,.430844,.653907,242213e-9,0,.461125,.632561,237397e-9,0,.492187,.610658,229313e-9,0,.52381,.589322,224402e-9,0,.555556,.567857,216116e-9,0,.587302,.54652,209124e-9,0,.619048,.525433,201601e-9,0,.650794,.504679,192957e-9,0,.68254,.484203,186052e-9,0,.714286,.464203,177672e-9,0,.746032,.444549,170005e-9,0,.777778,.425346,162401e-9,0,.809524,.406706,1544e-7,0,.84127,.388576,147437e-9,0,.873016,.37094,139493e-9,0,.904762,.353996,133219e-9,0,.936508,.337391,125573e-9,0,.968254,.321648,119867e-9,0,1,1,362511e-11,0,0,1,362525e-11,0,0,1,362739e-11,0,0,.999999,363673e-11,0,0,.999998,366214e-11,0,0,.999996,371698e-11,0,0,.999992,382116e-11,0,0,.999986,400554e-11,0,0,.999976,432058e-11,0,0,.999961,485194e-11,0,0,.999938,574808e-11,0,0,.999908,726643e-11,0,0,.999865,984707e-11,0,0,.999807,142217e-10,0,0,.999723,215581e-10,0,0,.999602,336114e-10,0,119113e-10,.999398,527353e-10,0,355813e-9,.998946,805809e-10,0,.00137768,.996647,942908e-10,0,.00322469,.992298,668733e-10,0,.00597897,.989802,716564e-10,0,.00968903,.987019,821355e-10,0,.0143845,.984219,104555e-9,0,.0200831,.980425,131245e-9,0,.0267948,.974241,139613e-9,0,.034525,.967006,145931e-9,0,.0432757,.95893,167153e-9,0,.0530471,.949157,188146e-9,0,.0638386,.94062,194625e-9,0,.0756487,.933509,213721e-9,0,.0884762,.925088,229616e-9,0,.10232,.915178,239638e-9,0,.117178,.904093,254814e-9,0,.133051,.891337,263685e-9,0,.149939,.877326,274789e-9,0,.167841,.861794,280534e-9,0,.18676,.845758,289534e-9,0,.206696,.829792,294446e-9,0,.22765,.813037,296877e-9,0,.249625,.795285,300217e-9,0,.27262,.776323,299826e-9,0,.296636,.756673,299787e-9,0,.321671,.736856,297867e-9,0,.347718,.716883,294052e-9,0,.374768,.696089,289462e-9,0,.402804,.67505,285212e-9,0,.431796,.653509,27653e-8,0,.461695,.63258,271759e-9,0,.49242,.61104,262811e-9,0,.523822,.589567,255151e-9,0,.555556,.568322,246434e-9,0,.587302,.547235,237061e-9,0,.619048,.52616,228343e-9,0,.650794,.505716,219236e-9,0,.68254,.485274,209595e-9,0,.714286,.465411,201011e-9,0,.746032,.445854,19109e-8,0,.777778,.426911,182897e-9,0,.809524,.408222,173569e-9,0,.84127,.390307,165496e-9,0,.873016,.372624,156799e-9,0,.904762,.355804,14917e-8,0,.936508,.33924,140907e-9,0,.968254,.323534,134062e-9,0,1,1,622487e-11,0,0,1,62251e-10,0,0,1,622837e-11,0,0,.999999,624259e-11,0,0,.999998,628127e-11,0,0,.999996,636451e-11,0,0,.999991,65218e-10,0,0,.999984,679782e-11,0,0,.999973,726361e-11,0,0,.999955,803644e-11,0,0,.999931,931397e-11,0,0,.999896,114299e-10,0,0,.999847,149402e-10,0,0,.999784,207461e-10,0,0,.999692,302493e-10,0,0,.999554,454957e-10,0,997275e-10,.999326,690762e-10,0,724813e-9,.998757,101605e-9,0,.0020972,.995367,958745e-10,0,.00432324,.99209,832808e-10,0,.00746347,.989517,887601e-10,0,.0115534,.987008,10564e-8,0,.0166134,.98421,133179e-9,0,.0226552,.98021,161746e-9,0,.0296838,.973676,161821e-9,0,.0377016,.967052,178635e-9,0,.0467079,.959385,206765e-9,0,.0567013,.949461,22476e-8,0,.0676796,.939578,23574e-8,0,.0796403,.932416,25893e-8,0,.0925812,.923759,271228e-9,0,.106501,.914223,289165e-9,0,.121397,.902942,301156e-9,0,.13727,.890419,313852e-9,0,.15412,.876639,324408e-9,0,.171946,.861316,33249e-8,0,.190751,.84496,338497e-9,0,.210537,.828427,345861e-9,0,.231305,.811871,347863e-9,0,.253057,.794397,350225e-9,0,.275797,.775726,349915e-9,0,.299525,.75617,347297e-9,0,.324242,.736091,344232e-9,0,.349947,.716213,340835e-9,0,.376633,.695736,332369e-9,0,.404289,.674961,327943e-9,0,.432895,.653518,318533e-9,0,.462415,.632574,310391e-9,0,.492788,.61134,300755e-9,0,.523909,.590017,290506e-9,0,.555556,.568752,280446e-9,0,.587302,.548061,269902e-9,0,.619048,.52711,258815e-9,0,.650794,.506682,248481e-9,0,.68254,.486524,237141e-9,0,.714286,.466812,226872e-9,0,.746032,.44732,216037e-9,0,.777778,.428473,205629e-9,0,.809524,.409921,195691e-9,0,.84127,.392028,185457e-9,0,.873016,.374606,176436e-9,0,.904762,.357601,166508e-9,0,.936508,.341348,158385e-9,0,.968254,.32542,149203e-9,0,1,1,103967e-10,0,0,1,10397e-9,0,0,1,104019e-10,0,0,.999999,104231e-10,0,0,.999998,104806e-10,0,0,.999995,106042e-10,0,0,.999991,108366e-10,0,0,.999982,112415e-10,0,0,.999968,119174e-10,0,0,.99995,130227e-10,0,0,.999922,148176e-10,0,0,.999884,177303e-10,0,0,.99983,224564e-10,0,0,.999758,300966e-10,0,0,.999654,423193e-10,0,549083e-11,.999503,614848e-10,0,296087e-9,.999237,903576e-10,0,.00123144,.998491,1271e-7,0,.00295954,.994594,107754e-9,0,.00555829,.99178,103025e-9,0,.00907209,.989265,11154e-8,0,.0135257,.986998,136296e-9,0,.0189327,.984137,169154e-9,0,.0252993,.979798,196671e-9,0,.0326272,.97337,196678e-9,0,.0409157,.967239,223121e-9,0,.0501623,.959543,253809e-9,0,.0603638,.949466,265972e-9,0,.0715171,.939074,288372e-9,0,.0836187,.931118,310983e-9,0,.0966657,.922525,325561e-9,0,.110656,.912983,345725e-9,0,.125588,.901617,3556e-7,0,.141461,.889487,374012e-9,0,.158275,.875787,383445e-9,0,.176031,.860654,393972e-9,0,.19473,.844417,400311e-9,0,.214374,.82741,405004e-9,0,.234967,.810545,407378e-9,0,.256512,.793312,407351e-9,0,.279011,.774847,406563e-9,0,.302468,.755621,404903e-9,0,.326887,.735511,397486e-9,0,.352266,.715435,39357e-8,0,.378605,.695403,384739e-9,0,.405897,.674681,376108e-9,0,.43413,.65359,365997e-9,0,.463277,.632471,354957e-9,0,.493295,.61151,343593e-9,0,.524106,.59064,331841e-9,0,.555561,.569386,318891e-9,0,.587302,.548785,3072e-7,0,.619048,.528146,29361e-8,0,.650794,.507872,281709e-9,0,.68254,.487805,268627e-9,0,.714286,.468196,255887e-9,0,.746032,.448922,243997e-9,0,.777778,.430093,231662e-9,0,.809524,.411845,220339e-9,0,.84127,.393808,208694e-9,0,.873016,.376615,198045e-9,0,.904762,.359655,187375e-9,0,.936508,.343452,177371e-9,0,.968254,.32765,167525e-9,0,1,1,169351e-10,0,0,1,169356e-10,0,0,1,169427e-10,0,0,.999999,169736e-10,0,0,.999998,170575e-10,0,0,.999995,172372e-10,0,0,.99999,175739e-10,0,0,.999979,181568e-10,0,0,.999966,191206e-10,0,0,.999944,20677e-9,0,0,.999912,231644e-10,0,0,.999869,271268e-10,0,0,.999811,334272e-10,0,0,.99973,433979e-10,0,0,.999617,590083e-10,0,680315e-10,.999445,829497e-10,0,612796e-9,.999138,118019e-9,0,.00187408,.998095,156712e-9,0,.00395791,.993919,125054e-9,0,.00692144,.991333,126091e-9,0,.0107962,.989226,144912e-9,0,.0155986,.986954,175737e-9,0,.0213364,.983982,213883e-9,0,.0280114,.979128,234526e-9,0,.0356226,.973327,243725e-9,0,.0441668,.967416,2773e-7,0,.0536399,.959729,308799e-9,0,.0640376,.949758,322447e-9,0,.0753554,.939173,350021e-9,0,.0875893,.9296,370089e-9,0,.100736,.921181,391365e-9,0,.114793,.91164,413636e-9,0,.129759,.900435,427068e-9,0,.145632,.888183,441046e-9,0,.162412,.874772,454968e-9,0,.180101,.859566,461882e-9,0,.1987,.843579,471556e-9,0,.218213,.826453,474335e-9,0,.238641,.809164,477078e-9,0,.259989,.792179,47755e-8,0,.282262,.773866,472573e-9,0,.305464,.754944,469765e-9,0,.329599,.735133,462371e-9,0,.35467,.714858,453674e-9,0,.380678,.694829,443888e-9,0,.407622,.674453,432052e-9,0,.435493,.653685,420315e-9,0,.464275,.632666,406829e-9,0,.493938,.611676,392234e-9,0,.524422,.591193,379208e-9,0,.555624,.570145,36319e-8,0,.587302,.549566,349111e-9,0,.619048,.529278,334166e-9,0,.650794,.509026,318456e-9,0,.68254,.489186,30449e-8,0,.714286,.469662,289051e-9,0,.746032,.450691,275494e-9,0,.777778,.431841,261437e-9,0,.809524,.413752,247846e-9,0,.84127,.395951,235085e-9,0,.873016,.378633,222245e-9,0,.904762,.36194,210533e-9,0,.936508,.345599,198494e-9,0,.968254,.329999,188133e-9,0,1,1,269663e-10,0,0,1,26967e-9,0,0,1,269772e-10,0,0,.999999,270214e-10,0,0,.999998,271415e-10,0,0,.999994,27398e-9,0,0,.999988,278771e-10,0,0,.999977,287019e-10,0,0,.999961,300544e-10,0,0,.999937,322138e-10,0,0,.999904,356163e-10,0,0,.999854,409465e-10,0,0,.99979,492651e-10,0,0,.999699,621722e-10,0,8.8288e-7,.999572,819715e-10,0,223369e-9,.999381,111689e-9,0,.00105414,.999016,153862e-9,0,.0026493,.997437,187667e-9,0,.00508608,.993545,155672e-9,0,.00840554,.991135,161455e-9,0,.012629,.989157,188241e-9,0,.0177661,.986874,226229e-9,0,.0238198,.983714,268668e-9,0,.0307887,.978301,277109e-9,0,.0386688,.973227,303446e-9,0,.0474554,.967317,341851e-9,0,.0571428,.959477,370885e-9,0,.0677256,.950012,392753e-9,0,.0791988,.939484,42781e-8,0,.0915576,.928135,443866e-9,0,.104798,.919819,472959e-9,0,.118918,.910049,491551e-9,0,.133915,.899181,512616e-9,0,.149788,.886881,523563e-9,0,.166537,.87359,540183e-9,0,.184164,.858613,547386e-9,0,.202669,.842809,554809e-9,0,.222056,.825727,558316e-9,0,.242329,.808086,557824e-9,0,.263492,.790728,556346e-9,0,.285551,.772987,552672e-9,0,.30851,.7541,543738e-9,0,.332376,.734669,536107e-9,0,.357153,.714411,523342e-9,0,.382845,.694196,512238e-9,0,.409454,.674252,497465e-9,0,.436977,.65357,481096e-9,0,.465404,.632999,467054e-9,0,.494713,.611994,448771e-9,0,.524864,.591604,431889e-9,0,.555779,.571134,415238e-9,0,.587302,.550528,396369e-9,0,.619048,.530292,379477e-9,0,.650794,.510364,361488e-9,0,.68254,.490749,343787e-9,0,.714286,.471266,327822e-9,0,.746032,.452462,310626e-9,0,.777778,.433907,295352e-9,0,.809524,.415659,279179e-9,0,.84127,.398138,264685e-9,0,.873016,.380833,249905e-9,0,.904762,.364247,236282e-9,0,.936508,.348041,222905e-9,0,.968254,.332389,210522e-9,0,1,1,420604e-10,0,0,1,420614e-10,0,0,1,420757e-10,0,0,.999999,42138e-9,0,0,.999997,423067e-10,0,0,.999993,426668e-10,0,0,.999986,433372e-10,0,0,.999974,444857e-10,0,0,.999956,463554e-10,0,0,.99993,493105e-10,0,0,.999892,539077e-10,0,0,.999838,610005e-10,0,0,.999767,718822e-10,0,0,.999666,884581e-10,0,365471e-10,.999525,113398e-9,0,485623e-9,.999311,150043e-9,0,.00162096,.998865,200063e-9,0,.00355319,.996278,211014e-9,0,.00633818,.992956,189672e-9,0,.0100043,.991017,210262e-9,0,.0145648,.989055,244292e-9,0,.0200237,.986741,290481e-9,0,.0263798,.983288,334303e-9,0,.033629,.977784,340307e-9,0,.0417652,.973037,377864e-9,0,.0507821,.967181,4239e-7,0,.060673,.958971,443854e-9,0,.0714314,.950093,483039e-9,0,.0830518,.939552,517934e-9,0,.0955288,.927678,539449e-9,0,.108859,.918278,568604e-9,0,.123038,.908449,588505e-9,0,.138065,.897713,612473e-9,0,.153938,.885533,625575e-9,0,.170657,.872131,63854e-8,0,.188224,.857517,647034e-9,0,.20664,.841796,65209e-8,0,.225909,.824726,6544e-7,0,.246035,.807297,655744e-9,0,.267022,.789058,646716e-9,0,.288878,.77189,643898e-9,0,.311607,.753082,629973e-9,0,.335216,.7341,621564e-9,0,.359713,.714094,605171e-9,0,.385103,.693839,588752e-9,0,.41139,.673891,573294e-9,0,.438576,.653565,552682e-9,0,.466656,.633326,533446e-9,0,.495617,.612582,514635e-9,0,.525431,.59205,49303e-8,0,.556041,.571918,471842e-9,0,.587338,.551572,451713e-9,0,.619048,.531553,430049e-9,0,.650794,.51175,410445e-9,0,.68254,.49238,390098e-9,0,.714286,.473143,370033e-9,0,.746032,.45423,351205e-9,0,.777778,.435963,332049e-9,0,.809524,.41787,315021e-9,0,.84127,.400387,297315e-9,0,.873016,.383332,281385e-9,0,.904762,.366665,265397e-9,0,.936508,.350633,250601e-9,0,.968254,.334964,23589e-8,0,1,1,643736e-10,0,0,1,64375e-9,0,0,1,643947e-10,0,0,.999999,64481e-9,0,0,.999997,647143e-10,0,0,.999994,652119e-10,0,0,.999985,661359e-10,0,0,.999972,677116e-10,0,0,.999952,702599e-10,0,0,.999922,742517e-10,0,0,.99988,803906e-10,0,0,.99982,897315e-10,0,0,.999741,103838e-9,0,0,.999629,12496e-8,0,149024e-9,.999474,156161e-9,0,861027e-9,.999229,201034e-9,0,.00231198,.998662,259069e-9,0,.00458147,.995299,245439e-9,0,.00770895,.992732,24498e-8,0,.0117126,.990847,273211e-9,0,.0165989,.988911,316492e-9,0,.0223674,.98654,37161e-8,0,.0290135,.982636,410352e-9,0,.0365309,.977346,421756e-9,0,.0449117,.972909,475578e-9,0,.0541481,.966821,522482e-9,0,.0642326,.958686,545008e-9,0,.075158,.949754,589286e-9,0,.0869181,.939184,619995e-9,0,.0995074,.927505,654266e-9,0,.112922,.916606,682362e-9,0,.127157,.906707,704286e-9,0,.142212,.895937,725909e-9,0,.158085,.883913,743939e-9,0,.174776,.870642,755157e-9,0,.192287,.856241,764387e-9,0,.210619,.84069,771032e-9,0,.229775,.823728,765906e-9,0,.249761,.806481,767604e-9,0,.270582,.787924,754385e-9,0,.292243,.770588,749668e-9,0,.314753,.751991,731613e-9,0,.338118,.733407,717655e-9,0,.362347,.713688,700604e-9,0,.387447,.693595,678765e-9,0,.413424,.673426,657042e-9,0,.440284,.65359,635892e-9,0,.468027,.633576,611569e-9,0,.496645,.613144,586011e-9,0,.526122,.592711,563111e-9,0,.556417,.572722,537699e-9,0,.587451,.552762,512556e-9,0,.619048,.532985,489757e-9,0,.650794,.513219,464139e-9,0,.68254,.493992,442193e-9,0,.714286,.47509,418629e-9,0,.746032,.456287,397045e-9,0,.777778,.438152,375504e-9,0,.809524,.420294,35492e-8,0,.84127,.402749,335327e-9,0,.873016,.385879,316422e-9,0,.904762,.369352,298333e-9,0,.936508,.353301,281417e-9,0,.968254,.337781,265203e-9,0,1,1,968267e-10,0,0,1,968284e-10,0,0,1,968556e-10,0,0,.999999,969733e-10,0,0,.999997,972913e-10,0,0,.999993,979688e-10,0,0,.999984,992239e-10,0,0,.999969,101356e-9,0,0,.999946,104784e-9,0,0,.999913,110111e-9,0,0,.999868,118217e-9,0,0,.999801,130396e-9,0,0,.999712,148523e-9,0,124907e-10,.999589,175233e-9,0,355405e-9,.999416,213999e-9,0,.0013528,.999136,268529e-9,0,.00312557,.998367,333088e-9,0,.00573045,.994701,304757e-9,0,.00919397,.992497,318031e-9,0,.0135261,.990608,353863e-9,0,.0187278,.988715,409044e-9,0,.0247947,.986241,472967e-9,0,.0317196,.981696,495104e-9,0,.039494,.977097,532873e-9,0,.0481087,.972583,594447e-9,0,.0575549,.966142,636867e-9,0,.0678242,.95823,669899e-9,0,.0789089,.949677,719499e-9,0,.0908023,.939226,750584e-9,0,.103499,.927501,793183e-9,0,.116993,.915199,81995e-8,0,.131282,.90498,847654e-9,0,.146364,.894243,868929e-9,0,.162237,.882154,884278e-9,0,.178902,.869161,898108e-9,0,.196358,.854751,901254e-9,0,.21461,.839368,90679e-8,0,.23366,.822874,901541e-9,0,.253512,.805514,897297e-9,0,.274174,.78716,881856e-9,0,.29565,.769061,870032e-9,0,.31795,.751,851719e-9,0,.341081,.732614,830671e-9,0,.365053,.713171,806569e-9,0,.389874,.693472,78338e-8,0,.415553,.673528,756404e-9,0,.442098,.653397,726872e-9,0,.469512,.633781,700494e-9,0,.497794,.613877,67105e-8,0,.526935,.593506,640361e-9,0,.556908,.573667,613502e-9,0,.587657,.553932,583177e-9,0,.61906,.534345,554375e-9,0,.650794,.515042,527811e-9,0,.68254,.495674,499367e-9,0,.714286,.477132,47429e-8,0,.746032,.458609,447726e-9,0,.777778,.440354,424205e-9,0,.809524,.422765,399549e-9,0,.84127,.405472,378315e-9,0,.873016,.388482,355327e-9,0,.904762,.372191,336122e-9,0,.936508,.356099,315247e-9,0,.968254,.340737,29794e-8,0,1,1,143327e-9,0,0,1,14333e-8,0,0,1,143366e-9,0,0,.999999,143524e-9,0,0,.999996,143952e-9,0,0,.999991,144862e-9,0,0,.999981,146544e-9,0,0,.999966,149391e-9,0,0,.999941,153946e-9,0,0,.999905,160971e-9,0,0,.999852,171562e-9,0,0,.99978,18729e-8,0,0,.999681,210386e-9,0,826239e-10,.999546,243906e-9,0,664807e-9,.999352,291739e-9,0,.00196192,.999027,357419e-9,0,.00405941,.997886,422349e-9,0,.00699664,.99419,385008e-9,0,.0107896,.99214,409775e-9,0,.0154415,.990274,456418e-9,0,.0209488,.988455,527008e-9,0,.0273037,.985804,597685e-9,0,.0344969,.98103,613124e-9,0,.0425183,.976674,668321e-9,0,.0513575,.972021,736985e-9,0,.0610046,.965274,773789e-9,0,.0714508,.958046,830852e-9,0,.0826877,.949333,875766e-9,0,.0947085,.939135,917088e-9,0,.107507,.927119,952244e-9,0,.121078,.91469,990626e-9,0,.135419,.903006,.00101304,0,.150526,.892368,.00103834,0,.166399,.880231,.00105002,0,.183038,.867432,.00106331,0,.200443,.853208,.00106783,0,.218618,.837956,.00106458,0,.237566,.821772,.00105945,0,.257291,.804328,.00104685,0,.2778,.786465,.00103178,0,.2991,.768004,.00101077,0,.321199,.74972,985504e-9,0,.344106,.731682,962893e-9,0,.36783,.712813,932146e-9,0,.392383,.693139,89871e-8,0,.417774,.673566,869678e-9,0,.444013,.653483,835525e-9,0,.471107,.633891,799853e-9,0,.49906,.614433,766838e-9,0,.527869,.594586,732227e-9,0,.557517,.574769,696442e-9,0,.587966,.555149,663935e-9,0,.61913,.535898,629826e-9,0,.650794,.516753,596486e-9,0,.68254,.497816,567078e-9,0,.714286,.479034,534399e-9,0,.746032,.460975,507013e-9,0,.777778,.442935,477421e-9,0,.809524,.425263,451101e-9,0,.84127,.408248,424964e-9,0,.873016,.391339,39993e-8,0,.904762,.37513,377619e-9,0,.936508,.359172,354418e-9,0,.968254,.343876,334823e-9,0,1,1,209042e-9,0,0,1,209045e-9,0,0,1,209093e-9,0,0,.999999,209304e-9,0,0,.999996,209871e-9,0,0,.999991,211078e-9,0,0,.999979,213304e-9,0,0,.999963,217061e-9,0,0,.999933,223042e-9,0,0,.999894,232206e-9,0,0,.999837,245901e-9,0,0,.999756,266023e-9,0,102927e-11,.999648,295204e-9,0,233468e-9,.999499,336958e-9,0,.00108237,.999283,395563e-9,0,.00268832,.998896,473785e-9,0,.00511138,.997006,520008e-9,0,.00837705,.993819,497261e-9,0,.0124928,.991632,523722e-9,0,.0174561,.989875,587258e-9,0,.0232596,.988109,676329e-9,0,.0298932,.985155,747701e-9,0,.0373453,.980479,768803e-9,0,.0456045,.976271,841054e-9,0,.0546593,.971347,911469e-9,0,.0644994,.964528,953057e-9,0,.0751152,.957632,.00102221,0,.0864981,.948681,.00106122,0,.0986407,.938716,.00111857,0,.111537,.926629,.00114762,0,.125182,.914025,.00118995,0,.139571,.901026,.00121228,0,.154703,.890358,.00123946,0,.170576,.878283,.0012527,0,.18719,.865459,.00125536,0,.204547,.851407,.00126134,0,.222648,.836276,.00124759,0,.241498,.820436,.00124443,0,.261101,.803253,.00122071,0,.281465,.785562,.00120107,0,.302595,.76718,.00117762,0,.324501,.748551,.00114289,0,.347192,.730564,.00110872,0,.370679,.712253,.00107636,0,.394973,.692867,.00103646,0,.420085,.673695,996793e-9,0,.446027,.653912,95675e-8,0,.47281,.634129,916739e-9,0,.500441,.615004,874401e-9,0,.528921,.595587,833411e-9,0,.558244,.575965,794556e-9,0,.588384,.5566,75196e-8,0,.619281,.537428,716381e-9,0,.650795,.518623,676558e-9,0,.68254,.499964,64074e-8,0,.714286,.481356,605984e-9,0,.746032,.463279,570256e-9,0,.777778,.445673,540138e-9,0,.809524,.428032,507299e-9,0,.84127,.411112,479553e-9,0,.873016,.394444,450737e-9,0,.904762,.378247,424269e-9,0,.936508,.362415,399111e-9,0,.968254,.347103,375274e-9,0,1,1,300729e-9,0,0,1,300733e-9,0,0,1,300797e-9,0,0,.999998,301072e-9,0,0,.999996,301817e-9,0,0,.999989,303398e-9,0,0,.999977,306309e-9,0,0,.999958,311209e-9,0,0,.999927,318975e-9,0,0,.999884,330804e-9,0,0,.99982,34834e-8,0,0,.999733,373854e-9,0,326995e-10,.999613,410424e-9,0,477174e-9,.999447,462047e-9,0,.00161099,.999204,533322e-9,0,.00353153,.998725,624964e-9,0,.00627965,.995871,631786e-9,0,.0098693,.993194,632017e-9,0,.0143011,.991541,68923e-8,0,.019568,.989773,766892e-9,0,.0256593,.987647,863668e-9,0,.0325625,.984193,922089e-9,0,.0402647,.980016,970749e-9,0,.0487532,.975859,.00106027,0,.058016,.970514,.00112239,0,.0680419,.963625,.00117212,0,.0788208,.956959,.00125211,0,.0903439,.947956,.00129411,0,.102604,.93809,.00135879,0,.115594,.92659,.00139309,0,.129309,.913829,.00143253,0,.143745,.90005,.00145809,0,.158901,.888129,.0014748,0,.174774,.87607,.00148756,0,.191365,.863461,.00148714,0,.208674,.849594,.00148892,0,.226705,.834531,.00146496,0,.245461,.81903,.0014579,0,.264947,.802122,.00143039,0,.28517,.78445,.00139717,0,.306137,.766434,.00136312,0,.327857,.747816,.00132597,0,.350341,.729519,.00128323,0,.373598,.711454,.00123803,0,.397642,.692699,.00119097,0,.422485,.673723,.00114565,0,.448139,.654386,.00109552,0,.474619,.634673,.00104553,0,.501933,.615554,99985e-8,0,.530089,.596462,948207e-9,0,.559087,.577385,902299e-9,0,.588913,.558257,856448e-9,0,.619525,.5392,810395e-9,0,.650826,.520543,768558e-9,0,.68254,.502206,7239e-7,0,.714286,.48402,685794e-9,0,.746032,.465779,64471e-8,0,.777778,.448455,609583e-9,0,.809524,.431091,57227e-8,0,.84127,.414147,54042e-8,0,.873016,.39765,506545e-9,0,.904762,.381576,477635e-9,0,.936508,.365881,448446e-9,0,.968254,.350582,421424e-9,0,1,1,427144e-9,0,0,1,427151e-9,0,0,1,427232e-9,0,0,.999998,42759e-8,0,0,.999995,428555e-9,0,0,.999988,430603e-9,0,0,.999976,434368e-9,0,0,.999952,440688e-9,0,0,.999919,450667e-9,0,0,.999871,46578e-8,0,0,.999801,488024e-9,0,0,.999704,520092e-9,0,129791e-9,.999572,565553e-9,0,821056e-9,.999389,628906e-9,0,.00225241,.999114,714911e-9,0,.00449109,.998488,819218e-9,0,.00756249,.995234,80415e-8,0,.0114716,.993021,830181e-9,0,.0162131,.991407,902645e-9,0,.021776,.989625,996934e-9,0,.0281471,.987064,.00109707,0,.0353118,.983265,.00114353,0,.0432562,.979535,.0012272,0,.0519665,.975224,.00132642,0,.0614298,.969574,.00138092,0,.0716348,.963021,.00145896,0,.0825709,.956046,.00152834,0,.094229,.947136,.00158217,0,.106602,.937313,.0016347,0,.119682,.926073,.00168383,0,.133465,.913121,.00171627,0,.147947,.899165,.00174229,0,.163125,.885891,.00176137,0,.178998,.873783,.00176406,0,.195566,.861331,.00176156,0,.21283,.847569,.00175346,0,.230793,.832785,.00172753,0,.249459,.817442,.00170204,0,.268832,.800613,.00166576,0,.28892,.783597,.00162909,0,.30973,.76571,.0015826,0,.331271,.747021,.00153106,0,.353554,.728593,.00148036,0,.37659,.710661,.00142808,0,.400391,.692426,.00136906,0,.424973,.673623,.00131066,0,.450347,.65494,.00125569,0,.476531,.635448,.00119517,0,.503535,.616221,.00113828,0,.531372,.597531,.0010816,0,.560047,.578795,.00102673,0,.589554,.559892,970985e-9,0,.619869,.541307,919773e-9,0,.650923,.522608,868479e-9,0,.68254,.504484,82137e-8,0,.714286,.486603,772916e-9,0,.746032,.468802,730353e-9,0,.777778,.451172,684955e-9,0,.809524,.434348,647565e-9,0,.84127,.417445,605863e-9,0,.873016,.401077,571885e-9,0,.904762,.385039,536034e-9,0,.936508,.369483,504227e-9,0,.968254,.354272,473165e-9,0,1,1,599525e-9,0,0,1,599533e-9,0,0,1,599639e-9,0,0,.999998,600097e-9,0,0,.999994,601336e-9,0,0,.999987,603958e-9,0,0,.999972,608775e-9,0,0,.999949,616842e-9,0,0,.999912,629534e-9,0,0,.999857,648658e-9,0,0,.999781,676615e-9,0,538873e-11,.999674,716574e-9,0,308602e-9,.999528,772641e-9,0,.00127003,.999326,849806e-9,0,.00300783,.999009,952682e-9,0,.00556637,.998112,.00106394,0,.00895889,.994496,.00102228,0,.0131827,.992806,.00108586,0,.0182277,.991211,.0011759,0,.0240795,.989415,.00128955,0,.030723,.986499,.00139038,0,.0381418,.982679,.00144539,0,.046321,.978839,.00153954,0,.0552459,.974295,.00164417,0,.0649034,.968784,.00171517,0,.0752814,.962324,.00180282,0,.0863693,.954956,.00186387,0,.0981578,.94624,.00193817,0,.110639,.936517,.00198156,0,.123806,.925186,.00203042,0,.137655,.91252,.0020664,0,.15218,.898441,.00207822,0,.16738,.884394,.0020992,0,.183253,.871273,.00208748,0,.199799,.859057,.00208686,0,.21702,.845243,.00205519,0,.234918,.830723,.00202868,0,.253496,.815801,.00199501,0,.272761,.79914,.00194193,0,.292719,.782372,.00188824,0,.313377,.76482,.00183695,0,.334745,.746586,.00177418,0,.356833,.7281,.00170628,0,.379654,.709842,.00164063,0,.403221,.692019,.00157355,0,.427548,.67364,.00150262,0,.452651,.655277,.00143473,0,.478545,.636438,.00136371,0,.505246,.617364,.00129911,0,.532768,.598603,.00123014,0,.561122,.580195,.00116587,0,.590309,.561786,.00110398,0,.620318,.543377,.00104148,0,.651102,.525093,983984e-9,0,.682545,.506791,92667e-8,0,.714286,.489291,874326e-9,0,.746032,.471811,821734e-9,0,.777778,.454435,774698e-9,0,.809524,.437493,727302e-9,0,.84127,.420977,684039e-9,0,.873016,.404729,64373e-8,0,.904762,.388756,60285e-8,0,.936508,.373344,56765e-8,0,.968254,.358191,531929e-9,0,1,1,832169e-9,0,0,1,832178e-9,0,0,1,83231e-8,0,0,.999998,832893e-9,0,0,.999995,834465e-9,0,0,.999985,837791e-9,0,0,.999969,843893e-9,0,0,.999944,854086e-9,0,0,.999903,870071e-9,0,0,.999843,894042e-9,0,0,.999759,928865e-9,0,531805e-10,.999643,978242e-9,0,579365e-9,.99948,.00104684,0,.00182774,.999255,.00114012,0,.00387804,.998885,.00126188,0,.00675709,.997405,.00135888,0,.010468,.99424,.00133626,0,.0150018,.992458,.00140905,0,.0203443,.990929,.00152305,0,.0264786,.989116,.00165882,0,.0333875,.985624,.00174128,0,.0410536,.982003,.00182108,0,.0494609,.978336,.00194498,0,.0585941,.973184,.00202708,0,.0684396,.9678,.00212166,0,.0789851,.961348,.00221366,0,.0902199,.953841,.00228219,0,.102134,.94534,.00235662,0,.114721,.935552,.00240572,0,.127972,.924064,.00244405,0,.141884,.911827,.00247557,0,.156451,.897731,.00248374,0,.171672,.883409,.00249863,0,.187545,.868625,.00246688,0,.20407,.856529,.00246523,0,.221249,.842999,.00242368,0,.239083,.828505,.00237354,0,.257578,.813825,.00232588,0,.276738,.797813,.00226731,0,.296569,.781097,.00219704,0,.31708,.764038,.00212394,0,.338281,.746067,.00204786,0,.360181,.727687,.00196728,0,.382794,.709571,.00188779,0,.406133,.691503,.00180532,0,.430213,.673673,.00171849,0,.45505,.655732,.00164147,0,.480662,.637399,.00155858,0,.507065,.618616,.00147641,0,.534278,.60005,.00140125,0,.562313,.581713,.00132441,0,.59118,.563546,.00125014,0,.620875,.545605,.00118249,0,.651373,.527559,.0011116,0,.682593,.509764,.00104979,0,.714286,.49193,985977e-9,0,.746032,.475011,928592e-9,0,.777778,.457878,873466e-9,0,.809524,.440979,819585e-9,0,.84127,.424613,772365e-9,0,.873016,.408549,722195e-9,0,.904762,.392771,680014e-9,0,.936508,.377317,636797e-9,0,.968254,.362352,598318e-9,0,1,1,.00114313,0,0,1,.00114314,0,0,.999999,.00114331,0,0,.999998,.00114404,0,0,.999994,.00114601,0,0,.999984,.00115019,0,0,.999967,.00115784,0,0,.999937,.0011706,0,0,.999894,.00119054,0,0,.999828,.00122031,0,0,.999735,.00126331,0,169263e-9,.999606,.00132382,0,949167e-9,.999426,.0014071,0,.00249668,.999173,.00151895,0,.00486392,.99873,.00166102,0,.00806323,.996243,.0017023,0,.0120895,.993779,.00172782,0,.0169288,.9919,.0018108,0,.0225633,.990524,.00196028,0,.028974,.98868,.00212014,0,.036142,.984663,.00217598,0,.044049,.981457,.00230563,0,.0526781,.977608,.00243966,0,.0620137,.972215,.00251336,0,.0720418,.966798,.0026285,0,.0827499,.960241,.00271409,0,.0941271,.952489,.00278381,0,.106164,.944127,.00285399,0,.118852,.934282,.00290994,0,.132185,.923271,.00294558,0,.146157,.910803,.00296269,0,.160766,.896705,.00296803,0,.176007,.88238,.00296637,0,.19188,.867116,.00293163,0,.208385,.853636,.00289418,0,.225523,.840469,.00284663,0,.243296,.82639,.00278594,0,.261709,.811759,.00271618,0,.280767,.796113,.00263187,0,.300476,.779518,.00254589,0,.320845,.763142,.00246003,0,.341883,.745464,.00236529,0,.363601,.727491,.00226536,0,.386011,.709414,.00216375,0,.409128,.691396,.00207127,0,.432967,.67368,.00197106,0,.457545,.656049,.00187022,0,.482881,.638188,.00177605,0,.508992,.620177,.00168482,0,.535899,.601506,.00158909,0,.563619,.58362,.00150583,0,.592165,.565496,.00141791,0,.621544,.54789,.00133693,0,.651743,.530323,.00126038,0,.682709,.512795,.00118556,0,.714286,.495199,.00111527,0,.746032,.478101,.0010489,0,.777778,.461511,984264e-9,0,.809524,.444879,92591e-8,0,.84127,.428424,866582e-9,0,.873016,.412495,814463e-9,0,.904762,.396975,764498e-9,0,.936508,.381614,715967e-9,0,.968254,.366732,672483e-9,0,1,1,.00155501,0,0,1,.00155503,0,0,1,.00155524,0,0,.999998,.00155615,0,0,.999994,.0015586,0,0,.999983,.00156379,0,0,.999963,.0015733,0,0,.999932,.00158911,0,0,.999882,.00161376,0,0,.99981,.00165041,0,100875e-10,.999708,.00170304,0,367658e-9,.999565,.00177658,0,.0014234,.999368,.00187688,0,.00327939,.999081,.00200989,0,.00596629,.99852,.00217177,0,.0094852,.99549,.0021745,0,.013824,.993252,.00222357,0,.0189642,.991727,.00235022,0,.0248856,.989951,.00250561,0,.0315669,.988029,.00268829,0,.0389882,.984029,.0027496,0,.0471302,.980683,.00289793,0,.0559754,.976554,.00303315,0,.0655081,.97139,.00313257,0,.0757138,.965544,.00323656,0,.08658,.95912,.00333432,0,.0980954,.951183,.0034039,0,.110251,.942974,.00347515,0,.123038,.932642,.00350381,0,.13645,.922158,.00354519,0,.150482,.909404,.00353851,0,.165129,.896071,.0035435,0,.18039,.881206,.00349936,0,.196263,.866077,.00347256,0,.212748,.85093,.003415,0,.229847,.837703,.00333367,0,.247561,.823878,.003249,0,.265895,.809449,.00316347,0,.284854,.794379,.00306351,0,.304445,.778138,.0029499,0,.324675,.761997,.00284099,0,.345555,.744938,.00272104,0,.367095,.727212,.00260715,0,.389309,.709549,.00248855,0,.41221,.691704,.00236783,0,.435814,.673689,.00225178,0,.460138,.656453,.00213765,0,.485203,.639128,.00202178,0,.511028,.621512,.00191443,0,.537634,.603598,.00180977,0,.565041,.58559,.00170456,0,.593268,.567852,.00160927,0,.622327,.5503,.00151395,0,.652217,.533033,.00142499,0,.682907,.515942,.00133955,0,.714296,.498814,.0012602,0,.746032,.481595,.00118188,0,.777778,.465117,.00111171,0,.809524,.448865,.00104091,0,.84127,.432711,976618e-9,0,.873016,.416822,91859e-8,0,.904762,.401272,857704e-9,0,.936508,.386226,807172e-9,0,.968254,.371321,75464e-8,0,1,1,.00209596,0,0,1,.00209598,0,0,1,.00209624,0,0,.999997,.00209736,0,0,.999991,.00210039,0,0,.999979,.00210678,0,0,.999959,.00211847,0,0,.999925,.0021379,0,0,.99987,.00216809,0,0,.999791,.00221281,0,681487e-10,.999677,.00227669,0,658161e-9,.999521,.00236533,0,.00200635,.999301,.00248514,0,.0041779,.998977,.00264185,0,.00718648,.998191,.00281695,0,.0110239,.994801,.00278518,0,.015672,.993091,.00288774,0,.0211091,.991571,.00303931,0,.0273123,.9897,.00321643,0,.034259,.987023,.00337332,0,.0419282,.983289,.00346146,0,.0502998,.979892,.00363704,0,.0593562,.975111,.00373601,0,.069081,.970351,.0038842,0,.0794598,.964131,.00397053,0,.0904798,.957747,.00408078,0,.10213,.949536,.00413533,0,.1144,.941372,.00420305,0,.127284,.931049,.00422815,0,.140772,.920647,.00425048,0,.154862,.908033,.0042281,0,.169548,.895028,.00422026,0,.184828,.879968,.00415042,0,.200701,.864875,.00408821,0,.217167,.84918,.00400909,0,.234227,.834934,.00391178,0,.251884,.821397,.00380066,0,.270141,.807135,.00367974,0,.289004,.792363,.00355172,0,.308479,.776661,.003411,0,.328575,.760705,.00328123,0,.349301,.744408,.00314003,0,.370668,.726994,.0029906,0,.392689,.709598,.00285034,0,.415379,.692112,.00271179,0,.438754,.674435,.00257185,0,.46283,.65676,.00243425,0,.48763,.639982,.00230351,0,.513173,.622983,.0021777,0,.539482,.605471,.00204991,0,.566579,.58796,.00193759,0,.594488,.570463,.00181976,0,.623226,.553058,.00171497,0,.6528,.535894,.00161109,0,.683198,.519089,.00151394,0,.714354,.502454,.00142122,0,.746032,.485681,.00133488,0,.777778,.468935,.00124975,0,.809524,.452951,.00117309,0,.84127,.437139,.00110155,0,.873016,.421446,.00103124,0,.904762,.405951,966387e-9,0,.936508,.391003,908119e-9,0,.968254,.376198,848057e-9,0,1,1,.00280076,0,0,1,.00280078,0,0,.999999,.00280109,0,0,.999997,.00280246,0,0,.999992,.00280616,0,0,.999979,.00281396,0,0,.999956,.00282822,0,0,.999916,.00285186,0,0,.999857,.0028885,0,0,.999768,.00294259,0,196026e-9,.999645,.00301946,0,.00104842,.99947,.00312541,0,.00270199,.999229,.00326733,0,.00519449,.998852,.00344992,0,.00852602,.997558,.00361052,0,.0126804,.994417,.0035898,0,.017635,.992824,.00372393,0,.023365,.991344,.00390695,0,.0298456,.989337,.00410392,0,.0370529,.985811,.00420987,0,.0449651,.982772,.00437488,0,.0535615,.979001,.00455069,0,.0628243,.974102,.00464462,0,.0727368,.969197,.00480577,0,.0832844,.962759,.00487818,0,.0944545,.956207,.00498176,0,.106236,.947909,.00503392,0,.118619,.939596,.00507474,0,.131595,.929642,.00509798,0,.145159,.918807,.00508476,0,.159305,.906921,.00505634,0,.174028,.893312,.00498845,0,.189327,.878933,.0049133,0,.2052,.863986,.0048259,0,.221647,.847936,.00470848,0,.23867,.832253,.00456889,0,.25627,.818619,.00442726,0,.274453,.804788,.00427677,0,.293222,.790241,.00411906,0,.312585,.775162,.00394833,0,.33255,.759463,.00377366,0,.353126,.743598,.00361026,0,.374324,.72697,.00343627,0,.396158,.709646,.00326422,0,.418641,.69277,.00309717,0,.44179,.675371,.0029356,0,.465624,.657863,.00277712,0,.490163,.640772,.00261738,0,.515429,.624441,.0024737,0,.541445,.607497,.00233125,0,.568236,.590438,.00218994,0,.595828,.573224,.0020664,0,.624242,.556168,.00193526,0,.653496,.539232,.00182463,0,.683588,.522352,.00170735,0,.714482,.506172,.00160555,0,.746032,.489842,.00150451,0,.777778,.473463,.00140938,0,.809524,.457266,.00132568,0,.84127,.441609,.0012376,0,.873016,.426348,.00116265,0,.904762,.411002,.00108935,0,.936508,.396045,.00101946,0,.968254,.381448,955665e-9,0,1,1,.0037121,0,0,1,.00371213,0,0,1,.00371251,0,0,.999997,.00371417,0,0,.99999,.00371863,0,0,.999977,.00372807,0,0,.99995,.00374529,0,0,.999908,.0037738,0,0,.999843,.00381789,0,123596e-10,.999745,.00388273,0,407442e-9,.999608,.00397443,0,.0015447,.999415,.00409998,0,.00351385,.999143,.00426662,0,.0063316,.9987,.00447625,0,.00998679,.996363,.00455323,0,.0144569,.994021,.00461052,0,.0197151,.992372,.00476359,0,.0257344,.991007,.00499101,0,.0324882,.988767,.0051972,0,.0399517,.984872,.00528407,0,.0481022,.982004,.00548926,0,.0569191,.977714,.00564385,0,.0663839,.973076,.0057693,0,.0764801,.967565,.0058924,0,.0871928,.961384,.00599629,0,.0985095,.954435,.00605998,0,.110419,.946303,.0061133,0,.122912,.937662,.00612028,0,.13598,.927867,.00612209,0,.149617,.916475,.00604813,0,.163817,.90541,.00603088,0,.178577,.891591,.00592218,0,.193894,.877573,.00578854,0,.209767,.862511,.00566648,0,.226196,.846861,.00551481,0,.243182,.83068,.00533754,0,.260728,.815725,.00515487,0,.278837,.802321,.0049655,0,.297515,.787826,.00475421,0,.316768,.773454,.00456002,0,.336605,.758224,.00434727,0,.357034,.74265,.00414444,0,.378067,.726729,.00393738,0,.399717,.710155,.00373575,0,.421998,.693312,.00353736,0,.444928,.67653,.00334368,0,.468523,.659444,.00315981,0,.492806,.642051,.00297809,0,.517798,.625758,.00280592,0,.543525,.609615,.00264254,0,.570012,.592919,.00248459,0,.597288,.576298,.00233327,0,.625379,.559489,.00219519,0,.654307,.542891,.00205441,0,.684084,.526255,.00193385,0,.714693,.509853,.00180745,0,.746044,.494131,.00169817,0,.777778,.478114,.0015913,0,.809524,.462274,.00148981,0,.84127,.446412,.00139537,0,.873016,.431274,.00130984,0,.904762,.41635,.00122403,0,.936508,.401476,.00114809,0,.968254,.386993,.00107563,0,1,1,.00488216,0,0,1,.0048822,0,0,1,.00488265,0,0,.999997,.00488463,0,0,.999988,.00488999,0,0,.999974,.00490129,0,0,.999946,.00492191,0,0,.999897,.00495598,0,0,.999825,.00500855,0,744791e-10,.999718,.00508559,0,712744e-9,.999565,.005194,0,.00215249,.999352,.00534147,0,.00444576,.999046,.00553523,0,.00759218,.998492,.00577016,0,.0115714,.995564,.00578487,0,.0163557,.993339,.00586414,0,.021915,.991834,.00606002,0,.0282201,.990496,.00633312,0,.0352433,.987826,.00651941,0,.042959,.98383,.00660842,0,.0513439,.98109,.00685523,0,.0603772,.976131,.00695778,0,.0700402,.971922,.00714236,0,.0803163,.965901,.00721437,0,.0911908,.959606,.00732017,0,.102651,.952504,.00735788,0,.114686,.944365,.00738493,0,.127286,.935652,.00737969,0,.140443,.925813,.00733612,0,.154151,.914397,.00723094,0,.168405,.903257,.00714002,0,.183201,.890015,.00700149,0,.198536,.876014,.00682813,0,.214409,.861436,.00665567,0,.23082,.845752,.00644526,0,.24777,.829169,.00621635,0,.265263,.813435,.00597789,0,.283301,.799701,.00575694,0,.301889,.785726,.00549866,0,.321035,.77152,.0052503,0,.340746,.75683,.00499619,0,.361032,.741951,.0047543,0,.381904,.726367,.0045084,0,.403374,.710537,.00426784,0,.425457,.693965,.00403487,0,.448169,.677724,.0038075,0,.47153,.66117,.00359431,0,.495561,.644274,.00338354,0,.520284,.627449,.00318163,0,.545725,.611645,.00299672,0,.571911,.595614,.00281016,0,.598873,.579426,.00264252,0,.62664,.563016,.00247509,0,.655239,.546728,.00232647,0,.684692,.530539,.00217803,0,.714999,.514164,.00204216,0,.746106,.498344,.00191403,0,.777778,.482957,.00179203,0,.809524,.467336,.00167695,0,.84127,.451994,.00157567,0,.873016,.436514,.00147113,0,.904762,.42178,.00138034,0,.936508,.407271,.00129219,0,.968254,.392822,.0012098,0,1,1,.00637427,0,0,1,.00637431,0,0,.999999,.00637485,0,0,.999996,.00637721,0,0,.999987,.00638357,0,0,.999971,.006397,0,0,.999939,.00642142,0,0,.999888,.00646177,0,0,.999807,.00652387,0,207916e-9,.999689,.00661454,0,.00112051,.99952,.00674155,0,.00287719,.999283,.00691313,0,.00550145,.998936,.00713598,0,.00897928,.998165,.00738501,0,.0132829,.994847,.00734388,0,.01838,.993182,.00749991,0,.0242381,.991665,.0077246,0,.030826,.989708,.00797579,0,.0381152,.986663,.00813011,0,.0460794,.983288,.00830365,0,.0546951,.980104,.00853496,0,.0639411,.974855,.00861045,0,.0737988,.97045,.00879133,0,.0842516,.964509,.00886377,0,.0952848,.957594,.00890346,0,.106886,.950546,.00893289,0,.119044,.942225,.00890074,0,.131749,.933365,.00886826,0,.144994,.923202,.0087316,0,.158772,.912605,.00863082,0,.173078,.901099,.00847403,0,.187908,.888177,.00825838,0,.203261,.873955,.00801834,0,.219134,.860091,.00779026,0,.235527,.84434,.00752478,0,.252443,.828517,.00724074,0,.269883,.81239,.00693769,0,.287851,.79721,.00664817,0,.306352,.783489,.00634763,0,.325393,.769514,.00604221,0,.344981,.755419,.00573568,0,.365126,.741083,.00544359,0,.385839,.726059,.00515515,0,.407132,.710809,.00487139,0,.42902,.695052,.00459846,0,.45152,.678886,.00433412,0,.474651,.663042,.00407981,0,.498433,.646634,.00384264,0,.52289,.630117,.00360897,0,.548048,.613804,.00338863,0,.573936,.598338,.00318486,0,.600584,.582687,.00298377,0,.628027,.566809,.00280082,0,.656295,.550817,.00262255,0,.685417,.534937,.00245835,0,.715406,.519151,.00230574,0,.74624,.503118,.0021549,0,.777778,.487723,.00202008,0,.809524,.472725,.00189355,0,.84127,.457599,.00177108,0,.873016,.442558,.00165843,0,.904762,.427624,.00155494,0,.936508,.413171,.00145273,0,.968254,.399122,.00136454,0,1,1,.00826496,0,0,1,.00826499,0,0,1,.00826564,0,0,.999996,.00826842,0,0,.999987,.00827589,0,0,.999967,.00829167,0,0,.999933,.00832037,0,0,.999876,.00836768,0,109338e-10,.999786,.00844031,0,427145e-9,.999655,.00854603,0,.0016384,.999468,.00869337,0,.00372392,.999203,.008891,0,.00668513,.998803,.00914387,0,.0104968,.99748,.00935838,0,.015125,.994446,.00933309,0,.0205338,.99292,.00953084,0,.0266884,.991414,.0097893,0,.0335565,.989049,.0100228,0,.0411086,.98582,.0101664,0,.0493181,.982441,.0103582,0,.0581613,.978595,.0105292,0,.0676169,.973495,.0106274,0,.0776661,.968405,.0107261,0,.0882926,.962717,.0108234,0,.0994817,.955478,.0108102,0,.111221,.948275,.0107914,0,.123499,.940006,.0107161,0,.136308,.930831,.0106309,0,.149639,.920648,.0104083,0,.163485,.910205,.0102312,0,.177843,.898445,.0100051,0,.192707,.885986,.00971928,0,.208077,.872204,.00940747,0,.22395,.858436,.0091085,0,.240326,.843454,.00876595,0,.257208,.827437,.00839794,0,.274596,.811488,.00803692,0,.292496,.796039,.00767352,0,.310911,.781083,.0073097,0,.329849,.767642,.00694032,0,.349316,.753901,.00657476,0,.369323,.740131,.00622699,0,.38988,.725845,.0058838,0,.410999,.710991,.00555586,0,.432696,.696002,.00523089,0,.454987,.680461,.00492494,0,.47789,.664875,.00463464,0,.501426,.649273,.00435422,0,.52562,.63302,.0040875,0,.550498,.61705,.00384075,0,.576089,.601154,.00359557,0,.602427,.586008,.00337636,0,.629544,.570699,.00316019,0,.657479,.555166,.00296033,0,.686264,.539645,.00277552,0,.715924,.524159,.00259499,0,.746459,.508682,.00243257,0,.777789,.493163,.00227851,0,.809524,.478004,.00213083,0,.84127,.46347,.00199502,0,.873016,.448778,.00186967,0,.904762,.434105,.00174732,0,.936508,.419576,.00163861,0,.968254,.405541,.00153341,0,1,1,.0106462,0,0,1,.0106462,0,0,.999999,.010647,0,0,.999995,.0106502,0,0,.999985,.0106589,0,0,.999964,.0106773,0,0,.999925,.0107106,0,0,.999861,.0107655,0,712986e-10,.999763,.0108497,0,743959e-9,.999616,.0109716,0,.00227361,.999408,.0111408,0,.0046983,.999112,.0113659,0,.00800158,.998637,.0116475,0,.0121493,.996223,.0117231,0,.0171023,.994006,.0118064,0,.0228218,.992444,.0120254,0,.0292711,.991028,.0123314,0,.036417,.98803,.0124954,0,.0442295,.984816,.0126538,0,.0526815,.981399,.0128537,0,.0617492,.977085,.0129694,0,.0714114,.972154,.013091,0,.0816495,.966617,.0131166,0,.0924472,.960628,.0131583,0,.10379,.953295,.0131094,0,.115665,.94575,.0129966,0,.128062,.937654,.0128796,0,.140972,.927716,.0126477,0,.154387,.917932,.0123889,0,.168301,.907719,.012131,0,.182709,.89584,.0118013,0,.197608,.883526,.0114145,0,.212994,.870301,.0110075,0,.228867,.856272,.0106019,0,.245227,.842251,.0101938,0,.262074,.826466,.00973254,0,.279412,.810859,.0092846,0,.297244,.795051,.00883304,0,.315575,.780053,.00840272,0,.334412,.76575,.00796438,0,.35376,.752298,.00752526,0,.373631,.739153,.00711486,0,.394034,.725514,.00670361,0,.414983,.711473,.00632656,0,.436491,.696936,.00595206,0,.458575,.682126,.00559191,0,.481253,.667027,.00525362,0,.504547,.651875,.00493805,0,.528481,.636463,.00462848,0,.553081,.620641,.00433936,0,.578377,.604931,.00407,0,.604404,.589549,.00380864,0,.631197,.574712,.00357049,0,.658795,.559775,.00334466,0,.687238,.544514,.00312505,0,.716559,.529555,.00293199,0,.746776,.514402,.00274204,0,.777849,.499302,.00256647,0,.809524,.484114,.00239901,0,.84127,.469308,.00225148,0,.873016,.455133,.00210178,0,.904762,.440939,.0019727,0,.936508,.426627,.00184382,0,.968254,.412509,.00172548,0,1,1,.013628,0,0,1,.0136281,0,0,.999999,.0136289,0,0,.999995,.0136327,0,0,.999983,.0136427,0,0,.99996,.0136638,0,0,.999917,.0137022,0,0,.999846,.0137652,0,204597e-9,.999736,.0138615,0,.00116837,.999573,.0140007,0,.00303325,.99934,.0141927,0,.00580613,.999004,.0144457,0,.00945626,.998407,.0147489,0,.0139421,.995464,.014731,0,.0192202,.993328,.0148283,0,.0252495,.991799,.0150797,0,.0319921,.990397,.0154316,0,.0394138,.986835,.0155005,0,.0474843,.983938,.0157308,0,.0561763,.980154,.0158753,0,.0654661,.975659,.0159581,0,.0753326,.970171,.0159832,0,.0857571,.964803,.0160084,0,.0967236,.958366,.0159484,0,.108218,.950613,.0158001,0,.120227,.942874,.0155845,0,.132741,.935005,.0154292,0,.145751,.924991,.0150742,0,.159249,.914814,.0146757,0,.17323,.904743,.0143097,0,.187687,.893216,.0138695,0,.202619,.880769,.0133706,0,.218021,.868136,.0128606,0,.233894,.85469,.0123403,0,.250238,.840593,.0118091,0,.267052,.825808,.011253,0,.284341,.81009,.0107099,0,.302106,.79504,.0101636,0,.320354,.779757,.00964041,0,.33909,.764697,.00911896,0,.358322,.750913,.00859533,0,.378059,.738175,.00811592,0,.398311,.725242,.00764504,0,.41909,.711864,.00718885,0,.440412,.698009,.00675843,0,.462292,.683841,.00634984,0,.484748,.669391,.00595502,0,.507802,.654731,.00558671,0,.531477,.639805,.00523578,0,.555802,.624789,.00490834,0,.580805,.609325,.00459448,0,.606522,.593975,.00430342,0,.63299,.578983,.00403019,0,.66025,.564442,.0037707,0,.688346,.549835,.0035316,0,.717319,.535039,.00330255,0,.7472,.520403,.00308932,0,.777982,.505687,.00289335,0,.809524,.490939,.00270818,0,.84127,.476233,.0025343,0,.873016,.461624,.00237097,0,.904762,.447833,.00222065,0,.936508,.433992,.00207561,0,.968254,.420147,.00194955,0,1,1,.0173415,0,0,1,.0173416,0,0,.999999,.0173426,0,0,.999995,.0173468,0,0,.999983,.0173582,0,0,.999954,.0173822,0,0,.999908,.0174258,0,669501e-11,.999828,.0174973,0,427399e-9,.999705,.0176063,0,.00171019,.999524,.0177631,0,.0039248,.999263,.0179781,0,.00705382,.998878,.018258,0,.0110552,.998012,.0185551,0,.0158812,.994614,.0184264,0,.0214852,.993132,.0186385,0,.0278239,.991563,.0189067,0,.0348585,.989298,.0191577,0,.0425544,.986036,.0192522,0,.050881,.982558,.0194063,0,.059811,.978531,.019486,0,.0693209,.974198,.0195847,0,.0793895,.968148,.0194749,0,.0899984,.962565,.0194277,0,.101132,.956041,.0192991,0,.112775,.947749,.0189893,0,.124917,.94018,.018704,0,.137547,.93165,.0183458,0,.150655,.921798,.0178775,0,.164236,.911573,.0173618,0,.178281,.901569,.0168482,0,.192788,.890341,.016265,0,.207752,.877835,.0156199,0,.223171,.865472,.0149516,0,.239044,.852905,.0143274,0,.255371,.838906,.0136643,0,.272153,.824888,.0129903,0,.289393,.809977,.0123218,0,.307093,.794697,.0116572,0,.325259,.780028,.0110307,0,.343896,.765124,.0104236,0,.363012,.750411,.0098219,0,.382617,.737264,.00924397,0,.402719,.724799,.00868719,0,.423332,.712253,.00816476,0,.444469,.699267,.00767262,0,.466146,.685618,.00719746,0,.488383,.671736,.00673916,0,.511199,.657777,.00631937,0,.534618,.643497,.00592411,0,.558668,.62889,.00553928,0,.58338,.614299,.0051934,0,.608787,.599197,.00485985,0,.634929,.584175,.00454357,0,.661849,.569541,.00425787,0,.689594,.555193,.00397905,0,.718211,.540947,.00372364,0,.747742,.526593,.00348599,0,.778205,.512335,.00326103,0,.80953,.498017,.00305137,0,.84127,.483609,.00285485,0,.873016,.469368,.00267472,0,.904762,.455037,.00249945,0,.936508,.441493,.00234792,0,.968254,.428147,.00219936,0,1,1,.0219422,0,0,1,.0219423,0,0,.999998,.0219434,0,0,.999993,.0219481,0,0,.999981,.021961,0,0,.999949,.0219879,0,0,.999896,.0220367,0,593194e-10,.999808,.0221167,0,75364e-8,.99967,.0222383,0,.00237884,.999466,.0224125,0,.00495612,.999174,.0226495,0,.00844887,.998725,.0229525,0,.0128058,.996979,.0231123,0,.0179742,.994317,.0230742,0,.0239047,.992781,.0232895,0,.0305526,.991191,.0235734,0,.0378786,.987787,.0236152,0,.0458475,.985092,.0237994,0,.0544287,.981121,.0238553,0,.0635952,.976924,.0238706,0,.0733233,.97218,.0238704,0,.0835922,.965956,.0236598,0,.0943839,.959998,.0234735,0,.105682,.953245,.0232277,0,.117474,.944445,.0226973,0,.129747,.937087,.0223527,0,.142491,.928341,.0218144,0,.155697,.9184,.0211516,0,.169358,.907959,.0204553,0,.183469,.89808,.0197673,0,.198024,.887047,.0189915,0,.21302,.875221,.0182082,0,.228455,.86269,.0173584,0,.244329,.850735,.0165718,0,.260639,.837545,.0157524,0,.277389,.823639,.0149482,0,.29458,.809699,.0141431,0,.312216,.794797,.0133527,0,.3303,.780578,.0126193,0,.34884,.766019,.0118914,0,.367842,.751447,.0111839,0,.387315,.737275,.010514,0,.40727,.724545,.00987277,0,.427717,.712644,.00926569,0,.448671,.700432,.00869029,0,.470149,.687664,.00814691,0,.492167,.674288,.00763012,0,.514746,.660966,.00714437,0,.537911,.647264,.00668457,0,.561688,.633431,.00626581,0,.586108,.619133,.00585593,0,.611206,.604935,.00548188,0,.637022,.590236,.00513288,0,.663599,.575473,.0047906,0,.690989,.561228,.00448895,0,.719242,.547054,.00420233,0,.748411,.533175,.00392869,0,.778531,.519163,.00367445,0,.809583,.505328,.00344097,0,.84127,.491446,.00322003,0,.873016,.477356,.00301283,0,.904762,.46356,.00282592,0,.936508,.449623,.00264956,0,.968254,.436068,.00246956,0,1,1,.0276135,0,0,1,.0276136,0,0,.999998,.0276148,0,0,.999993,.0276201,0,0,.999976,.0276342,0,0,.999945,.027664,0,0,.999884,.0277179,0,18679e-8,.999784,.027806,0,.00119607,.99963,.0279394,0,.00318407,.999401,.0281295,0,.00613601,.999066,.0283858,0,.00999963,.998524,.0287027,0,.0147164,.995702,.0286256,0,.0202295,.993593,.0286733,0,.0264876,.992067,.0288989,0,.0334452,.990548,.0292135,0,.0410621,.986775,.0291296,0,.0493032,.984054,.0293099,0,.0581381,.979481,.0291881,0,.0675397,.975297,.0291598,0,.0774848,.96981,.028954,0,.0879528,.963524,.028628,0,.0989258,.957398,.0283135,0,.110388,.950088,.0278469,0,.122327,.941538,.0271798,0,.134729,.933332,.0265388,0,.147587,.924392,.0257776,0,.160889,.914581,.024916,0,.174631,.904347,.0240242,0,.188806,.894324,.0231229,0,.203409,.883724,.022153,0,.218437,.872207,.0211355,0,.233888,.859927,.0201048,0,.249761,.848373,.0191263,0,.266056,.836023,.0181306,0,.282774,.82289,.0171718,0,.299917,.809324,.0162196,0,.317488,.795361,.0152622,0,.335493,.781253,.01439,0,.353936,.767338,.013533,0,.372825,.753156,.0127244,0,.392168,.739122,.0119454,0,.411976,.725358,.0112054,0,.432259,.712949,.010487,0,.453032,.701621,.00984032,0,.47431,.689703,.00921495,0,.496111,.677216,.00862492,0,.518456,.664217,.00806882,0,.541367,.65137,.00755922,0,.564872,.638,.00705705,0,.589001,.62453,.00661266,0,.613789,.610601,.00618432,0,.639277,.59676,.00578033,0,.66551,.582433,.00540927,0,.692539,.568026,.00506104,0,.720422,.55414,.0047353,0,.749216,.540178,.00442889,0,.778974,.526513,.00414363,0,.809711,.512954,.00388237,0,.84127,.499403,.00362875,0,.873016,.486026,.00340827,0,.904762,.472345,.00318598,0,.936508,.458828,.00297635,0,.968254,.445379,.00279447,0,1,1,.0345716,0,0,1,.0345717,0,0,.999999,.034573,0,0,.999991,.0345787,0,0,.999974,.0345941,0,0,.999937,.0346263,0,188589e-11,.999869,.0346847,0,409238e-9,.999757,.0347798,0,.0017674,.999582,.0349233,0,.00413658,.999322,.0351265,0,.00747408,.998939,.0353967,0,.0117157,.998219,.0357018,0,.0167966,.994974,.0354726,0,.0226572,.993201,.0355621,0,.0292445,.991573,.0357641,0,.0365123,.989301,.0359252,0,.0444203,.985712,.0358017,0,.0529334,.982411,.0358353,0,.0620214,.977827,.035617,0,.0716574,.973278,.0354398,0,.0818186,.967397,.0350483,0,.0924846,.960696,.0344795,0,.103638,.954349,.0339861,0,.115263,.946066,.0331323,0,.127348,.938012,.032359,0,.13988,.929413,.0314413,0,.152849,.920355,.0304103,0,.166248,.910586,.0292785,0,.18007,.900609,.0281391,0,.194308,.890093,.0269103,0,.208958,.880013,.0257269,0,.224018,.869001,.0244671,0,.239485,.85751,.0232252,0,.255359,.84582,.0220117,0,.271638,.834383,.0208274,0,.288324,.822158,.0196628,0,.305419,.809056,.0185306,0,.322927,.795832,.0174174,0,.340851,.782547,.0163758,0,.359199,.7689,.015391,0,.377975,.755526,.0144488,0,.397189,.741681,.0135372,0,.416851,.728178,.0126957,0,.436971,.714642,.0118812,0,.457564,.702756,.0111165,0,.478644,.69175,.0104145,0,.500229,.680159,.00974439,0,.522339,.668073,.00911926,0,.544997,.655405,.00851393,0,.56823,.642921,.00797637,0,.592068,.629993,.00745119,0,.616546,.616828,.00696972,0,.641705,.603305,.00652425,0,.66759,.589833,.00610188,0,.694255,.575945,.00570834,0,.72176,.561745,.00533384,0,.750168,.548277,.00500001,0,.779545,.534467,.00467582,0,.809933,.521032,.00438092,0,.841272,.507877,.00410348,0,.873016,.494654,.00383618,0,.904762,.481592,.00358699,0,.936508,.468509,.00337281,0,.968254,.455293,.00316196,0,1,1,.0430698,0,0,1,.0430699,0,0,.999998,.0430713,0,0,.999991,.0430773,0,0,.99997,.0430936,0,0,.999928,.0431277,0,406396e-10,.999852,.0431893,0,744376e-9,.999724,.0432895,0,.0024806,.999527,.0434397,0,.00524779,.99923,.0436507,0,.00898164,.998783,.0439255,0,.0136083,.997507,.0441104,0,.0190582,.994418,.0438225,0,.0252694,.992864,.0439396,0,.0321879,.991127,.0440962,0,.039767,.987331,.0438408,0,.0479667,.984819,.0438991,0,.056752,.980384,.0435906,0,.0660929,.975846,.0432543,0,.075963,.970748,.0428293,0,.0863398,.964303,.042153,0,.0972035,.95772,.0414111,0,.108537,.950747,.0405893,0,.120325,.942533,.0394887,0,.132554,.934045,.0383544,0,.145215,.924942,.037057,0,.158296,.915811,.0356993,0,.17179,.90612,.0342401,0,.185691,.896434,.0328078,0,.199993,.886021,.031288,0,.214691,.876081,.0297776,0,.229782,.865608,.0282334,0,.245265,.854924,.026749,0,.261138,.843607,.02526,0,.277401,.832456,.0238214,0,.294056,.821342,.0224682,0,.311104,.809303,.0211297,0,.328548,.796468,.0198387,0,.346394,.784046,.0186227,0,.364645,.771262,.0174561,0,.38331,.758118,.0163806,0,.402396,.745075,.0153287,0,.421912,.731926,.0143647,0,.44187,.71863,.0134363,0,.462283,.705414,.0125603,0,.483165,.693792,.0117508,0,.504535,.683108,.0110016,0,.52641,.67183,.0102757,0,.548816,.66015,.00962044,0,.571776,.647907,.00898031,0,.595323,.635734,.00840811,0,.619489,.623208,.00786211,0,.644317,.610438,.00734953,0,.669852,.597345,.00687688,0,.696148,.584138,.00643469,0,.723267,.5707,.00602236,0,.75128,.556966,.0056324,0,.780258,.543607,.00528277,0,.810268,.530213,.00493999,0,.841311,.516912,.00462265,0,.873016,.503916,.0043307,0,.904762,.491146,.00406858,0,.936508,.478439,.00381436,0,.968254,.465834,.00358003,0,1,1,.0534039,0,0,1,.053404,0,0,.999998,.0534055,0,0,.999989,.0534116,0,0,.999968,.0534283,0,0,.999918,.0534633,0,155895e-9,.99983,.0535262,0,.00120914,.999685,.0536281,0,.00334944,.999461,.0537799,0,.00653077,.999119,.0539902,0,.0106718,.998582,.0542524,0,.0156907,.995919,.0540318,0,.0215147,.993735,.0538914,0,.0280801,.992126,.0539557,0,.0353323,.990266,.0540401,0,.0432247,.986317,.0536064,0,.0517172,.983213,.0534425,0,.0607754,.978303,.0528622,0,.0703698,.973665,.0523363,0,.0804742,.968091,.0516165,0,.0910667,.961026,.0505434,0,.102128,.954333,.049523,0,.113641,.946372,.0481698,0,.125591,.938254,.0467674,0,.137965,.929516,.0452341,0,.150754,.920106,.0435083,0,.163947,.910899,.0417399,0,.177537,.901532,.0399389,0,.191516,.891919,.0380901,0,.205881,.882006,.0362341,0,.220626,.871965,.0343444,0,.235749,.862145,.0324832,0,.251248,.852058,.0306681,0,.267121,.84161,.0289097,0,.283368,.830806,.0272079,0,.299992,.820476,.0256089,0,.316992,.809514,.0240394,0,.334374,.797865,.0225379,0,.35214,.785621,.0211235,0,.370296,.773765,.0197908,0,.388849,.761629,.0185235,0,.407807,.748891,.0173358,0,.427178,.736437,.0162305,0,.446974,.723707,.0151778,0,.467207,.710606,.0141791,0,.487892,.698019,.0132592,0,.509046,.686203,.0123887,0,.530687,.675692,.0115976,0,.552839,.664826,.0108325,0,.575527,.65349,.0101348,0,.59878,.641774,.00947756,0,.622634,.629794,.00886058,0,.647128,.617647,.00828526,0,.672308,.60534,.00775312,0,.698231,.592718,.00726033,0,.724958,.579746,.00679731,0,.752563,.566763,.00636111,0,.781127,.553515,.00595228,0,.810733,.540118,.00556876,0,.841426,.527325,.00523051,0,.873016,.514265,.00490712,0,.904762,.501406,.00460297,0,.936508,.488922,.00431247,0,.968254,.476541,.0040472,0,1,1,.0659184,0,0,1,.0659185,0,0,.999998,.06592,0,0,.999988,.0659259,0,0,.999963,.0659423,0,0,.999907,.0659764,0,374198e-9,.999806,.0660376,0,.00182071,.999639,.0661361,0,.0043894,.999378,.0662814,0,.00800055,.998985,.0664779,0,.0125594,.998285,.0666914,0,.0179786,.995071,.0661989,0,.0241822,.993172,.0660454,0,.031106,.991438,.0660105,0,.0386952,.988428,.0656875,0,.0469032,.985218,.0652913,0,.0556905,.981128,.0647107,0,.065023,.976015,.0638491,0,.0748717,.97097,.062993,0,.0852112,.964582,.0617927,0,.0960199,.957383,.0603626,0,.107279,.949969,.0588128,0,.118971,.941843,.0570274,0,.131084,.933624,.0551885,0,.143604,.924543,.053122,0,.156521,.914919,.0508897,0,.169825,.905773,.0486418,0,.18351,.896434,.0463364,0,.197569,.887195,.0440623,0,.211997,.877706,.0417799,0,.226789,.867719,.03945,0,.241944,.858587,.037243,0,.257458,.849317,.0350956,0,.273331,.839585,.0329852,0,.289563,.829856,.0310028,0,.306154,.819589,.0290953,0,.323108,.809714,.0272738,0,.340426,.79934,.0255631,0,.358113,.788224,.0239175,0,.376175,.776619,.0223831,0,.394616,.76521,.0209298,0,.413445,.753716,.0195786,0,.432671,.741564,.0183001,0,.452305,.729413,.0171259,0,.472358,.717146,.0159933,0,.492845,.70436,.0149495,0,.513783,.69219,.0139681,0,.535189,.680289,.0130577,0,.557087,.669611,.0122198,0,.5795,.659113,.0114174,0,.602459,.648148,.0106729,0,.625997,.636905,.00998997,0,.650154,.625154,.00934313,0,.674976,.613481,.00874839,0,.700518,.60154,.00818265,0,.726845,.58943,.00766889,0,.754032,.576828,.00717153,0,.782167,.564194,.00672696,0,.811344,.551501,.00630863,0,.841644,.538635,.00592177,0,.873016,.525724,.00554888,0,.904762,.513209,.00520225,0,.936508,.500457,.00488231,0,.968254,.48799,.00457153,0,1,1,.0810131,0,0,1,.0810133,0,0,.999997,.0810145,0,0,.999985,.08102,0,0,.999956,.0810347,0,195026e-10,.999893,.0810656,0,719316e-9,.999777,.0811205,0,.00259774,.999583,.081208,0,.00561807,.999281,.0813343,0,.00967472,.998813,.0814969,0,.0146627,.997597,.0815217,0,.0204902,.994379,.0808502,0,.0270802,.992744,.0806792,0,.0343674,.990745,.0804589,0,.0422974,.986646,.0796107,0,.0508242,.983611,.0790913,0,.0599087,.978869,.0780746,0,.0695175,.973475,.0768218,0,.0796223,.967845,.0754926,0,.0901983,.960778,.0737063,0,.101224,.953333,.0718052,0,.112682,.945274,.0695946,0,.124555,.936955,.0672492,0,.136831,.928319,.0647732,0,.149496,.919075,.0620947,0,.162542,.909114,.0591816,0,.175958,.900137,.0563917,0,.189739,.891069,.0535392,0,.203877,.882262,.0507642,0,.218368,.873232,.0479793,0,.233208,.864042,.045226,0,.248393,.855002,.0425413,0,.263923,.846569,.0400126,0,.279796,.837714,.0375269,0,.296012,.828918,.0352027,0,.312573,.819783,.0330011,0,.329479,.810129,.0308908,0,.346734,.800866,.0289112,0,.364342,.79093,.0270255,0,.382307,.780593,.0252758,0,.400637,.769511,.0236178,0,.419337,.758558,.0220652,0,.438418,.747632,.0206289,0,.457889,.736146,.0192873,0,.477761,.724093,.0180333,0,.49805,.71234,.0168264,0,.51877,.700201,.015746,0,.53994,.687949,.0147027,0,.561581,.676163,.0137512,0,.583718,.665001,.0128655,0,.60638,.65472,.0120366,0,.629599,.644213,.0112604,0,.653415,.633382,.0105413,0,.677874,.62212,.00986498,0,.70303,.610631,.00923308,0,.728948,.599078,.00864206,0,.755706,.587519,.00811784,0,.783396,.575505,.00761237,0,.812121,.563148,.00713949,0,.841989,.550828,.00668379,0,.873035,.538458,.00627715,0,.904762,.525905,.00588336,0,.936508,.513517,.00552687,0,.968254,.501395,.00519681,0,1,1,.0991506,0,0,1,.0991504,0,0,.999996,.0991515,0,0,.999984,.0991558,0,0,.999947,.0991672,0,114389e-9,.999874,.0991912,0,.00121503,.999739,.0992331,0,.00356108,.999514,.0992983,0,.00705578,.999159,.0993877,0,.011574,.998586,.0994837,0,.017003,.995731,.0988425,0,.0232484,.993384,.098276,0,.0302318,.991615,.0979269,0,.0378884,.989029,.0973432,0,.0461641,.985373,.0963539,0,.0550136,.981278,.0952306,0,.0643988,.975777,.0936233,0,.0742868,.970526,.0920219,0,.0846501,.963755,.0898912,0,.0954644,.956676,.0876064,0,.106709,.948099,.0847751,0,.118367,.939718,.0818638,0,.130423,.931305,.078857,0,.142862,.922342,.0756127,0,.155674,.912842,.0721473,0,.168849,.903304,.0686195,0,.182378,.89411,.0650589,0,.196255,.885512,.0616022,0,.210473,.877193,.0582434,0,.225027,.86877,.0548979,0,.239915,.860267,.0516095,0,.255132,.851915,.048468,0,.270678,.843912,.0454447,0,.286551,.83604,.0425612,0,.302751,.828245,.0398752,0,.31928,.820159,.0373198,0,.336138,.81167,.034916,0,.35333,.802659,.0326402,0,.370858,.793921,.0304901,0,.388728,.784713,.0284857,0,.406944,.774946,.0266186,0,.425515,.76448,.0248593,0,.444449,.753793,.0232114,0,.463756,.743506,.0217039,0,.483447,.732555,.0202841,0,.503535,.720965,.0189648,0,.524036,.709422,.0177189,0,.544968,.697756,.0165626,0,.56635,.685565,.015483,0,.588208,.673987,.0144892,0,.610569,.66244,.0135607,0,.633466,.651675,.0126956,0,.656936,.641598,.0118788,0,.681025,.63121,.0111261,0,.705788,.620514,.010437,0,.731289,.609366,.00978747,0,.757606,.598137,.00917257,0,.784834,.586966,.00859778,0,.813085,.575549,.00806803,0,.842485,.563797,.00757294,0,.87313,.551758,.00710592,0,.904762,.539894,.0066841,0,.936508,.527901,.00627901,0,.968254,.515819,.00590506,0,1,1,.120864,0,0,1,.120864,0,0,.999996,.120864,0,0,.99998,.120867,0,0,.99994,.120872,0,323781e-9,.999852,.120884,0,.00188693,.999693,.120903,0,.00473489,.999426,.120929,0,.00872704,.999002,.120955,0,.0137237,.998235,.120918,0,.0196068,.994608,.119764,0,.0262803,.992997,.119265,0,.0336657,.990968,.11863,0,.0416987,.987002,.117261,0,.0503261,.983524,.116009,0,.0595035,.97875,.114252,0,.0691935,.972652,.11193,0,.0793645,.966613,.109555,0,.0899894,.959275,.106612,0,.101045,.951272,.103375,0,.112512,.942323,.0996594,0,.124372,.933679,.0958841,0,.136611,.924822,.0919265,0,.149216,.915742,.0878061,0,.162176,.906348,.0834894,0,.175482,.896883,.079085,0,.189125,.88774,.0746745,0,.203098,.87986,.0705773,0,.217396,.871998,.0665005,0,.232015,.864325,.0625413,0,.24695,.856685,.0586781,0,.2622,.84925,.0550063,0,.277761,.841719,.0514727,0,.293634,.834755,.0481398,0,.309819,.827853,.0450172,0,.326315,.820888,.0420969,0,.343126,.813616,.0393702,0,.360254,.805767,.0367771,0,.377701,.797338,.0343274,0,.395474,.789122,.0320529,0,.413577,.780601,.0299485,0,.432018,.771424,.0279812,0,.450804,.761502,.0261054,0,.469944,.751166,.0243942,0,.489451,.741276,.0228087,0,.509337,.730898,.0213265,0,.529617,.719878,.0199307,0,.550307,.708379,.0186574,0,.571428,.697165,.0174446,0,.593003,.685554,.0163144,0,.615059,.673631,.015276,0,.637628,.662385,.0143003,0,.660746,.651059,.0134112,0,.68446,.640451,.0125794,0,.70882,.630536,.011793,0,.733893,.620316,.0110547,0,.759756,.609722,.0103668,0,.786505,.598804,.00973009,0,.814259,.587871,.00912812,0,.843157,.577121,.00858916,0,.87334,.566019,.00807333,0,.904762,.554664,.00759687,0,.936508,.543101,.00714759,0,.968254,.531558,.00673418,0,1,1,.146767,0,0,1,.146767,0,0,.999997,.146767,0,0,.999977,.146765,0,320658e-11,.999929,.146762,0,682576e-9,.999823,.146753,0,.00276402,.999633,.146735,0,.00614771,.999314,.146699,0,.0106613,.998796,.14662,0,.0161546,.997124,.146107,0,.0225063,.994062,.144857,0,.0296198,.992154,.144011,0,.037417,.989186,.142712,0,.0458348,.985279,.140926,0,.0548211,.980826,.13885,0,.0643326,.975056,.136168,0,.074333,.969005,.133217,0,.0847917,.961554,.12959,0,.0956828,.954206,.125886,0,.106984,.945046,.121335,0,.118675,.935678,.116492,0,.130741,.926748,.111635,0,.143166,.917764,.106625,0,.155939,.908358,.101325,0,.169049,.899219,.0960249,0,.182487,.890089,.0906527,0,.196245,.881488,.0853905,0,.210317,.874031,.0804177,0,.224697,.866932,.0756005,0,.23938,.859976,.0709019,0,.254364,.853375,.0664391,0,.269646,.846971,.0622012,0,.285223,.840483,.058129,0,.301096,.833969,.0542762,0,.317265,.82806,.0507042,0,.333729,.822128,.047368,0,.350491,.815989,.044272,0,.367554,.809336,.0413444,0,.38492,.802177,.038601,0,.402594,.79441,.0360227,0,.420582,.786573,.0336383,0,.438891,.778619,.0314321,0,.457527,.77,.029362,0,.476499,.760698,.0274102,0,.49582,.750932,.0256146,0,.5155,.740993,.023974,0,.535555,.731159,.0224182,0,.556,.720836,.0209889,0,.576855,.709913,.0196411,0,.598143,.698415,.0183824,0,.619888,.68745,.0172222,0,.642123,.676154,.0161509,0,.664883,.664383,.0151397,0,.688211,.6533,.0141873,0,.71216,.642072,.0133105,0,.736792,.631412,.0124932,0,.762186,.621622,.0117408,0,.788439,.611681,.0110358,0,.815672,.60142,.0103775,0,.844034,.59083,.00975623,0,.873699,.580254,.00918084,0,.904765,.569841,.00864721,0,.936508,.559224,.00815731,0,.968254,.548315,.00767924,0,1,1,.177563,0,0,1,.177563,0,0,.999994,.177562,0,0,.999972,.177555,0,664171e-10,.999914,.177536,0,.0012276,.999787,.177496,0,.00388025,.999556,.17742,0,.00783463,.999165,.177285,0,.0128953,.9985,.177037,0,.0189053,.995388,.175634,0,.025742,.993102,.174375,0,.033309,.990992,.173121,0,.0415298,.986932,.170896,0,.0503425,.982786,.16847,0,.0596964,.977592,.165455,0,.0695498,.971075,.161676,0,.0798676,.963967,.157458,0,.0906201,.956397,.152836,0,.101783,.947489,.147467,0,.113333,.937564,.14145,0,.125254,.928182,.135383,0,.137529,.919027,.129212,0,.150144,.909618,.12276,0,.163088,.900492,.116273,0,.176351,.891671,.1098,0,.189924,.883146,.103362,0,.203799,.875151,.0970799,0,.21797,.868338,.0911732,0,.232433,.862033,.0854966,0,.247182,.856107,.0800691,0,.262216,.850644,.0749618,0,.27753,.845261,.070079,0,.293124,.839885,.0654321,0,.308997,.834609,.0610975,0,.325149,.829083,.0569741,0,.341581,.82404,.0531736,0,.358294,.818968,.049665,0,.37529,.813496,.0463856,0,.392573,.807533,.0433217,0,.410148,.80099,.0404402,0,.428019,.793891,.0377578,0,.446192,.786281,.0352616,0,.464676,.778773,.0329577,0,.483478,.770737,.030808,0,.502608,.762094,.0287964,0,.522079,.752898,.0269254,0,.541905,.743306,.0251926,0,.5621,.733416,.023595,0,.582684,.723742,.0221155,0,.603677,.713542,.0207435,0,.625106,.702755,.019434,0,.646998,.691484,.0182046,0,.66939,.680531,.0170771,0,.692324,.66953,.0160339,0,.715849,.658126,.0150677,0,.740028,.646933,.0141551,0,.764937,.636107,.0133179,0,.790673,.625271,.0125284,0,.817358,.615225,.0117937,0,.84515,.605678,.0111181,0,.874244,.59583,.0104759,0,.904828,.585704,.00986672,0,.936508,.575413,.00929712,0,.968254,.565373,.00876713,0,1,1,.214058,0,0,.999999,.214058,0,0,.999994,.214055,0,0,.999966,.214039,0,259642e-9,.999893,.213998,0,.00200075,.999737,.21391,0,.00527775,.999449,.213745,0,.00983959,.99896,.213458,0,.0154755,.9979,.212855,0,.0220249,.994278,.210779,0,.0293654,.992254,.20926,0,.0374021,.98881,.206908,0,.0460604,.984715,.204009,0,.0552802,.979738,.200471,0,.0650127,.972884,.195813,0,.0752175,.965996,.190856,0,.0858612,.957974,.185077,0,.0969155,.949155,.17868,0,.108356,.939288,.171513,0,.120163,.928996,.163838,0,.132319,.919563,.156246,0,.144808,.910004,.148359,0,.157618,.900791,.140417,0,.170737,.892135,.132569,0,.184155,.883803,.124741,0,.197866,.876034,.117091,0,.211861,.869219,.109835,0,.226134,.863062,.102859,0,.240682,.857795,.0962928,0,.255499,.853009,.0900725,0,.270583,.848603,.0842101,0,.285931,.844335,.0786527,0,.301542,.840208,.0734397,0,.317415,.836035,.0685334,0,.33355,.83172,.0639275,0,.349948,.827135,.0595909,0,.36661,.822797,.0556204,0,.383539,.818387,.0519394,0,.400738,.813565,.0485317,0,.41821,.808142,.0453138,0,.435961,.802212,.0423354,0,.453997,.79573,.0395553,0,.472324,.788741,.036988,0,.490951,.781093,.0345688,0,.509887,.773597,.0323297,0,.529144,.765622,.0302719,0,.548735,.757083,.0283477,0,.568674,.747992,.0265562,0,.588979,.738591,.0248844,0,.609671,.728719,.0233342,0,.630773,.719146,.0219081,0,.652314,.709165,.0205711,0,.674328,.69875,.0193248,0,.696854,.687884,.0181582,0,.719942,.676818,.0170746,0,.743651,.666247,.0160718,0,.768057,.655284,.0151262,0,.793253,.64401,.0142561,0,.819363,.633353,.0134327,0,.846547,.622674,.012653,0,.875017,.612265,.0119354,0,.905021,.602455,.0112533,0,.936508,.593147,.0106234,0,.968254,.583592,.0100213,0,1,1,.25717,0,0,1,.25717,0,0,.999992,.257164,0,0,.999958,.257135,0,641715e-9,.999864,.25706,0,.00305314,.999666,.256897,0,.00700975,.999302,.256596,0,.0122194,.998663,.25607,0,.0184622,.995607,.254123,0,.0255773,.993094,.252081,0,.0334439,.9907,.249867,0,.0419696,.98594,.246118,0,.0510823,.981214,.242049,0,.0607242,.974966,.236869,0,.0708486,.967589,.230724,0,.081417,.95915,.223635,0,.0923974,.950257,.21596,0,.103763,.940165,.207296,0,.115491,.929396,.197901,0,.127562,.919288,.188437,0,.13996,.909428,.178762,0,.15267,.900105,.169072,0,.165679,.891418,.159478,0,.178979,.883347,.15002,0,.192558,.875992,.140813,0,.20641,.869466,.13196,0,.220529,.863699,.123501,0,.234907,.858553,.115436,0,.249542,.854379,.107901,0,.264428,.850894,.10088,0,.279564,.847632,.0942296,0,.294947,.844571,.0879861,0,.310575,.84163,.0821534,0,.326448,.838542,.0766409,0,.342566,.835412,.0715322,0,.358929,.831899,.0666883,0,.37554,.828177,.0622175,0,.392399,.82416,.0580452,0,.409511,.820393,.054267,0,.426878,.816068,.0507172,0,.444506,.811201,.0474041,0,.4624,.805785,.0443174,0,.480566,.799878,.0414562,0,.499013,.793469,.0388147,0,.517749,.786473,.0363453,0,.536785,.778874,.0340225,0,.556134,.771277,.0318599,0,.575809,.763426,.0298859,0,.595827,.755044,.0280357,0,.616207,.746161,.0262979,0,.636973,.737124,.0247295,0,.65815,.72761,.0232514,0,.679772,.717822,.0218755,0,.701876,.708279,.0205942,0,.724509,.698333,.0193947,0,.74773,.68802,.0182717,0,.771609,.677321,.0172044,0,.79624,.666504,.0162122,0,.821743,.656184,.0152924,0,.84828,.64556,.0144326,0,.876069,.634636,.0136157,0,.905404,.624124,.0128612,0,.936508,.613914,.0121435,0,.968254,.603589,.0114887,0,1,1,.307946,0,0,.999999,.307945,0,0,.999988,.307934,0,204479e-10,.999944,.307886,0,.00127833,.999824,.307756,0,.00445047,.999565,.30748,0,.00914673,.999085,.306966,0,.0150498,.998103,.306004,0,.0219367,.994249,.303028,0,.0296485,.991807,.300435,0,.038068,.987773,.296554,0,.0471062,.982673,.2916,0,.0566942,.976623,.285641,0,.0667768,.968757,.27815,0,.0773099,.959849,.269529,0,.088257,.950663,.260248,0,.0995879,.940129,.249704,0,.111277,.92895,.238291,0,.123304,.917996,.226501,0,.13565,.907813,.214669,0,.148299,.898305,.202835,0,.161237,.889626,.191158,0,.174455,.88175,.179695,0,.187941,.874715,.168548,0,.201687,.868746,.15792,0,.215687,.863703,.147807,0,.229933,.859315,.138149,0,.24442,.855538,.128993,0,.259145,.852428,.120414,0,.274103,.850168,.112498,0,.289293,.848132,.105054,0,.304711,.846291,.0981087,0,.320357,.844431,.0915942,0,.33623,.842493,.0855056,0,.35233,.840368,.0798204,0,.368658,.83798,.0745097,0,.385214,.83523,.0695424,0,.402002,.832091,.0649092,0,.419023,.828667,.0606291,0,.436282,.824805,.0566523,0,.453782,.820988,.0530229,0,.471529,.816635,.0496364,0,.489528,.811725,.0464658,0,.507788,.806316,.0435082,0,.526317,.800469,.0407873,0,.545124,.794107,.038255,0,.564221,.787218,.0358825,0,.583621,.779872,.0336785,0,.603341,.772097,.0316379,0,.623397,.764484,.0297379,0,.643812,.756428,.0279581,0,.664611,.748022,.0263153,0,.685824,.739268,.0247799,0,.707488,.73024,.0233385,0,.729646,.720893,.0220035,0,.752354,.71119,.0207555,0,.77568,.701791,.0195843,0,.799715,.692184,.0184891,0,.824574,.682258,.0174541,0,.850417,.67206,.0164873,0,.877466,.661717,.0155959,0,.90604,.651462,.0147519,0,.936528,.641467,.0139727,0,.968254,.631229,.0132363,0,1,1,.367573,0,0,.999999,.367571,0,0,.999984,.367553,0,183382e-9,.999925,.367473,0,.00225254,.999759,.367259,0,.00628165,.99941,.366801,0,.0117858,.998739,.365946,0,.0184359,.995529,.363191,0,.0260114,.992875,.360171,0,.0343581,.989135,.355981,0,.0433637,.984166,.350401,0,.0529438,.977871,.343348,0,.0630334,.96951,.334341,0,.0735805,.959964,.323862,0,.0845437,.950162,.312521,0,.095889,.938882,.299577,0,.107588,.926992,.285573,0,.119617,.915589,.271212,0,.131957,.904791,.256611,0,.144591,.895177,.242224,0,.157503,.886403,.227952,0,.170682,.878957,.214192,0,.184117,.872418,.200795,0,.197799,.867029,.188015,0,.21172,.862835,.175975,0,.225873,.859411,.164526,0,.240253,.856655,.153693,0,.254854,.854519,.14352,0,.269673,.852828,.13397,0,.284707,.851412,.124984,0,.299953,.850609,.116748,0,.315408,.849855,.10905,0,.331073,.849017,.101839,0,.346946,.848079,.0951359,0,.363028,.846911,.0888774,0,.379318,.845445,.0830375,0,.395818,.84362,.0775844,0,.41253,.841411,.0725054,0,.429457,.838768,.0677691,0,.446602,.835801,.0634016,0,.463968,.832341,.0593095,0,.481561,.828424,.0555121,0,.499386,.824312,.052024,0,.51745,.819918,.0487865,0,.535761,.815072,.0457801,0,.554328,.809863,.0430184,0,.573162,.804164,.0404245,0,.592275,.798034,.0380146,0,.611681,.791436,.0357436,0,.631398,.784498,.0336475,0,.651445,.777125,.0316666,0,.671845,.769365,.0298122,0,.692628,.761579,.0281001,0,.713827,.753746,.0265049,0,.735484,.745573,.0250067,0,.75765,.737083,.0236026,0,.78039,.728545,.0223302,0,.803789,.719691,.0211243,0,.82796,.710569,.0199983,0,.853056,.701216,.0189569,0,.879298,.692094,.0179702,0,.907014,.682909,.0170418,0,.936691,.673509,.0161732,0,.968254,.663863,.0153406,0,1,1,.437395,0,0,.999998,.437394,0,0,.99998,.437363,0,616704e-9,.999891,.437232,0,.00367925,.999656,.436877,0,.00867446,.999148,.436121,0,.0150679,.997959,.434564,0,.022531,.993464,.430134,0,.0308507,.990606,.426077,0,.0398805,.985027,.419397,0,.0495148,.978491,.41118,0,.0596749,.969643,.40048,0,.0703001,.959189,.38769,0,.0813427,.948223,.373575,0,.0927641,.935955,.357622,0,.104533,.923237,.34043,0,.116624,.911074,.322735,0,.129015,.899724,.30479,0,.141687,.890189,.287392,0,.154626,.881796,.270248,0,.167818,.874781,.253659,0,.181252,.869166,.237786,0,.194918,.864725,.222618,0,.208807,.861565,.208356,0,.222913,.859284,.194867,0,.237229,.857677,.18212,0,.25175,.856714,.17018,0,.266473,.856155,.158969,0,.281392,.8558,.148413,0,.296505,.855672,.138578,0,.311811,.855538,.129345,0,.327306,.855689,.120861,0,.342991,.855767,.112969,0,.358864,.855618,.105593,0,.374925,.85525,.0987451,0,.391176,.854583,.0923727,0,.407616,.853534,.0864143,0,.424249,.852061,.0808338,0,.441076,.850253,.0756771,0,.4581,.848004,.0708612,0,.475324,.845333,.0663784,0,.492754,.842376,.0622631,0,.510394,.838956,.0584112,0,.528251,.835121,.0548328,0,.546331,.830842,.0514838,0,.564644,.826212,.048355,0,.583198,.821522,.0454714,0,.602005,.816551,.0428263,0,.621078,.811211,.0403612,0,.640434,.805479,.038039,0,.660089,.799409,.0358739,0,.680066,.79306,.0338727,0,.70039,.786395,.0319985,0,.721094,.779416,.030241,0,.742215,.77214,.0285951,0,.7638,.764636,.0270747,0,.785912,.756836,.0256354,0,.808628,.749315,.0243027,0,.832055,.741561,.0230497,0,.856338,.733589,.0218801,0,.88169,.725479,.020784,0,.908441,.717255,.0197702,0,.937125,.708829,.0188168,0,.968254,.700191,.0179113,0,1,1,.518937,0,0,.999998,.518933,0,0,.999967,.518883,0,.00147741,.999832,.51866,0,.00573221,.999466,.518057,0,.011826,.998644,.516752,0,.0192116,.994458,.512347,0,.027573,.991223,.507675,0,.0367099,.985515,.500188,0,.046487,.978308,.490408,0,.0568071,.968359,.477357,0,.0675984,.95682,.461752,0,.0788059,.943929,.443796,0,.090386,.930224,.423893,0,.102304,.916514,.402682,0,.114532,.903653,.380914,0,.127047,.892315,.359212,0,.139828,.882942,.338102,0,.152861,.875438,.31773,0,.16613,.869642,.298186,0,.179624,.865304,.279491,0,.193332,.862382,.261804,0,.207247,.860666,.245146,0,.22136,.859788,.229406,0,.235666,.859608,.214605,0,.250158,.859912,.200691,0,.264832,.86053,.187623,0,.279684,.861368,.17539,0,.294711,.862237,.163901,0,.309911,.863127,.153175,0,.32528,.863923,.143147,0,.340819,.864567,.133781,0,.356524,.865013,.125042,0,.372397,.86539,.116952,0,.388438,.865591,.109476,0,.404645,.865517,.102542,0,.421022,.865084,.0960688,0,.437569,.864309,.0900499,0,.454287,.863151,.0844328,0,.471181,.861649,.0792218,0,.488253,.859742,.0743482,0,.505507,.857446,.0697963,0,.522947,.854757,.0655364,0,.54058,.851783,.061608,0,.558412,.848516,.0579701,0,.576449,.844897,.0545742,0,.594701,.840956,.0514167,0,.613178,.836676,.0484598,0,.631892,.832075,.0456934,0,.650856,.827191,.0431178,0,.670088,.822295,.0407718,0,.689606,.817294,.0386032,0,.709434,.812013,.0365675,0,.7296,.806465,.0346547,0,.750138,.800691,.0328717,0,.771093,.794709,.031211,0,.792519,.788493,.0296504,0,.814488,.782049,.0281782,0,.837097,.775403,.0267965,0,.860481,.76857,.0255002,0,.884842,.761536,.0242759,0,.910494,.754303,.0231142,0,.937985,.74692,.0220305,0,.968254,.739745,.0210192,0,1,1,.613914,0,0,.999996,.613907,0,963597e-10,.999942,.613814,0,.00301247,.999704,.613407,0,.00870385,.999046,.612302,0,.0160714,.995516,.608266,0,.0245899,.991726,.602863,0,.0339681,.985157,.593956,0,.0440254,.97642,.581748,0,.0546409,.964404,.565183,0,.0657284,.950601,.545273,0,.0772246,.935158,.522129,0,.0890812,.919364,.496782,0,.10126,.904754,.470571,0,.113731,.89176,.444037,0,.126469,.881492,.418322,0,.139454,.873656,.393522,0,.15267,.868053,.369795,0,.166101,.864336,.347171,0,.179736,.862259,.325737,0,.193565,.861556,.305532,0,.207578,.861776,.286416,0,.221769,.862661,.268355,0,.23613,.864015,.251334,0,.250656,.865711,.235352,0,.265343,.867519,.220302,0,.280187,.869351,.206161,0,.295183,.871144,.192908,0,.31033,.872839,.180505,0,.325624,.874307,.168848,0,.341065,.875667,.158021,0,.35665,.876758,.147877,0,.37238,.87764,.138441,0,.388253,.878237,.129627,0,.404269,.878563,.121415,0,.42043,.878572,.113741,0,.436735,.87842,.106652,0,.453187,.878057,.100097,0,.469786,.877413,.0940128,0,.486536,.87646,.0883462,0,.503439,.875233,.0830924,0,.520498,.8737,.0781975,0,.537717,.871873,.07364,0,.555102,.86978,.0694103,0,.572657,.867405,.0654696,0,.59039,.864751,.0617914,0,.608307,.861818,.0583491,0,.626419,.858645,.0551443,0,.644733,.855307,.0521894,0,.663264,.851736,.0494334,0,.682025,.847927,.0468504,0,.701032,.843888,.0444261,0,.720308,.839629,.0421497,0,.739875,.835158,.0400082,0,.759764,.830509,.0380076,0,.780014,.825714,.0361488,0,.800673,.820729,.0343956,0,.821803,.815751,.0327781,0,.843492,.810752,.031275,0,.86586,.805587,.0298542,0,.889087,.800317,.0285397,0,.913466,.79489,.0272948,0,.93952,.789314,.0261139,0,.96835,.783593,.0249938,0,1,1,.724258,0,0,.999992,.724243,0,726889e-9,.99987,.724044,0,.00569574,.999336,.72317,0,.0131702,.996271,.719432,0,.0220738,.991159,.712576,0,.0319405,.982465,.700927,0,.0425202,.97049,.684297,0,.0536599,.953973,.661244,0,.065258,.935546,.633804,0,.0772427,.916596,.603071,0,.0895616,.899353,.57105,0,.102175,.885216,.539206,0,.11505,.875076,.508714,0,.128164,.868334,.479571,0,.141495,.864414,.451796,0,.155026,.862678,.425328,0,.168745,.862835,.400352,0,.182639,.864067,.376532,0,.196699,.866086,.35391,0,.210915,.868557,.332424,0,.225282,.871271,.312053,0,.239792,.874058,.292764,0,.25444,.8768,.27453,0,.269223,.87939,.257297,0,.284135,.8819,.24114,0,.299174,.884187,.225934,0,.314337,.886262,.211669,0,.329622,.888119,.198311,0,.345026,.889709,.185783,0,.360549,.891054,.174063,0,.376189,.892196,.163143,0,.391946,.893101,.152952,0,.407819,.893803,.143475,0,.423808,.894277,.134647,0,.439914,.894532,.126434,0,.456137,.894576,.1188,0,.472479,.894393,.111694,0,.48894,.893976,.105069,0,.505523,.893346,.0989077,0,.52223,.892502,.0931724,0,.539064,.891441,.0878276,0,.556028,.890276,.082903,0,.573125,.888972,.0783505,0,.590361,.887469,.0741083,0,.607741,.885785,.0701633,0,.62527,.883914,.0664835,0,.642957,.881872,.0630567,0,.660809,.879651,.0598527,0,.678836,.877267,.0568615,0,.69705,.874717,.05406,0,.715465,.872012,.0514378,0,.734098,.869157,.0489805,0,.752968,.866155,.0466727,0,.772101,.863014,.0445056,0,.791529,.859748,.0424733,0,.81129,.856416,.0405957,0,.831438,.852958,.0388273,0,.852044,.849382,.0371619,0,.87321,.845694,.0355959,0,.89509,.841893,.0341155,0,.917932,.837981,.0327141,0,.942204,.833963,.0313856,0,.968981,.829847,.0301275,0,1,1,.85214,0,0,.999969,.852095,0,.00279627,.999483,.851408,0,.0107635,.994545,.84579,0,.0206454,.986188,.835231,0,.0315756,.969847,.814687,0,.0432021,.945951,.783735,0,.0553396,.91917,.746074,0,.0678766,.895488,.706938,0,.0807395,.878232,.669534,0,.0938767,.868252,.635168,0,.10725,.863873,.603069,0,.120832,.863369,.572514,0,.134598,.86545,.543169,0,.148533,.868803,.514578,0,.16262,.872794,.486762,0,.176849,.87702,.459811,0,.19121,.881054,.433654,0,.205694,.884974,.408574,0,.220294,.888587,.384525,0,.235005,.891877,.36156,0,.24982,.894793,.339661,0,.264737,.89743,.318913,0,.279751,.899796,.299302,0,.294859,.901943,.280843,0,.310058,.903858,.263481,0,.325346,.905574,.247197,0,.340721,.907069,.231915,0,.356181,.908379,.217614,0,.371725,.90952,.20425,0,.387353,.910483,.191758,0,.403063,.91128,.180092,0,.418854,.911936,.169222,0,.434727,.912454,.159098,0,.450682,.912835,.149668,0,.466718,.913078,.140884,0,.482837,.913192,.132709,0,.499038,.913175,.125095,0,.515324,.91304,.118012,0,.531695,.912781,.111417,0,.548153,.91241,.105281,0,.5647,.911924,.0995691,0,.581338,.911331,.0942531,0,.59807,.910637,.0893076,0,.6149,.90984,.0846998,0,.63183,.908941,.0804044,0,.648865,.907944,.0763984,0,.666011,.906857,.0726638,0,.683273,.90568,.0691783,0,.700659,.904416,.0659222,0,.718176,.903067,.0628782,0,.735834,.901637,.0600307,0,.753646,.900128,.0573647,0,.771625,.898544,.0548668,0,.78979,.89689,.052527,0,.808162,.895165,.0503306,0,.826771,.893371,.0482668,0,.845654,.891572,.0463605,0,.864863,.889763,.0445998,0,.884472,.887894,.0429451,0,.904592,.885967,.0413884,0,.925407,.883984,.0399225,0,.947271,.881945,.0385405,0,.97105,.879854,.0372362,0,1,.999804,.995833,0,0,.938155,.933611,0,.0158731,.864755,.854311,0,.0317461,.888594,.865264,0,.0476191,.905575,.863922,0,.0634921,.915125,.850558,0,.0793651,.920665,.829254,0,.0952381,.924073,.802578,0,.111111,.926304,.772211,0,.126984,.927829,.739366,0,.142857,.928924,.705033,0,.15873,.92973,.670019,0,.174603,.930339,.634993,0,.190476,.930811,.600485,0,.206349,.931191,.566897,0,.222222,.93149,.534485,0,.238095,.931737,.503429,0,.253968,.931939,.473811,0,.269841,.932108,.445668,0,.285714,.93225,.418993,0,.301587,.932371,.393762,0,.31746,.932474,.369939,0,.333333,.932562,.347479,0,.349206,.932638,.326336,0,.365079,.932703,.306462,0,.380952,.93276,.287805,0,.396825,.932809,.270313,0,.412698,.932851,.253933,0,.428571,.932887,.23861,0,.444444,.932917,.224289,0,.460317,.932943,.210917,0,.47619,.932965,.19844,0,.492063,.932982,.186807,0,.507937,.932995,.175966,0,.52381,.933005,.165869,0,.539683,.933011,.156468,0,.555556,.933013,.147719,0,.571429,.933013,.139579,0,.587302,.93301,.132007,0,.603175,.933004,.124965,0,.619048,.932994,.118416,0,.634921,.932982,.112326,0,.650794,.932968,.106663,0,.666667,.93295,.101397,0,.68254,.932931,.0964993,0,.698413,.932908,.0919438,0,.714286,.932883,.0877057,0,.730159,.932856,.0837623,0,.746032,.932827,.0800921,0,.761905,.932796,.0766754,0,.777778,.932762,.0734936,0,.793651,.932727,.0705296,0,.809524,.932689,.0677676,0,.825397,.93265,.0651929,0,.84127,.932609,.0627917,0,.857143,.932565,.0605515,0,.873016,.932521,.0584606,0,.888889,.932474,.0565082,0,.904762,.932427,.0546841,0,.920635,.932377,.0529793,0,.936508,.932326,.0513851,0,.952381,.932274,.0498936,0,.968254,.93222,.0484975,0,.984127,.932164,.0471899,0,1],i=new Float32Array(e),s=new Float32Array(t);n.UniformsLib.LTC_FLOAT_1=new n.DataTexture(i,64,64,n.RGBAFormat,n.FloatType,n.UVMapping,n.ClampToEdgeWrapping,n.ClampToEdgeWrapping,n.LinearFilter,n.NearestFilter,1),n.UniformsLib.LTC_FLOAT_2=new n.DataTexture(s,64,64,n.RGBAFormat,n.FloatType,n.UVMapping,n.ClampToEdgeWrapping,n.ClampToEdgeWrapping,n.LinearFilter,n.NearestFilter,1),n.UniformsLib.LTC_FLOAT_1.needsUpdate=!0,n.UniformsLib.LTC_FLOAT_2.needsUpdate=!0;const a=new Uint16Array(e.length);e.forEach((function(e,t){a[t]=n.DataUtils.toHalfFloat(e)}));const r=new Uint16Array(t.length);t.forEach((function(e,t){r[t]=n.DataUtils.toHalfFloat(e)})),n.UniformsLib.LTC_HALF_1=new n.DataTexture(a,64,64,n.RGBAFormat,n.HalfFloatType,n.UVMapping,n.ClampToEdgeWrapping,n.ClampToEdgeWrapping,n.LinearFilter,n.NearestFilter,1),n.UniformsLib.LTC_HALF_2=new n.DataTexture(r,64,64,n.RGBAFormat,n.HalfFloatType,n.UVMapping,n.ClampToEdgeWrapping,n.ClampToEdgeWrapping,n.LinearFilter,n.NearestFilter,1),n.UniformsLib.LTC_HALF_1.needsUpdate=!0,n.UniformsLib.LTC_HALF_2.needsUpdate=!0}}},function(e,t,i){"use strict";i.r(t),i.d(t,"retarget",(function(){return s})),i.d(t,"retargetClip",(function(){return a})),i.d(t,"getHelperFromSkeleton",(function(){return r})),i.d(t,"getSkeletonOffsets",(function(){return o})),i.d(t,"renameBones",(function(){return l})),i.d(t,"getBones",(function(){return c})),i.d(t,"getBoneByName",(function(){return d})),i.d(t,"getNearestBone",(function(){return h})),i.d(t,"findBoneTrackData",(function(){return u})),i.d(t,"getEqualsBonesNames",(function(){return p})),i.d(t,"clone",(function(){return f}));var n=i(0);function s(e,t,i={}){const s=new n.Vector3,a=new n.Quaternion,r=new n.Vector3,o=new n.Matrix4,l=new n.Matrix4,h=new n.Matrix4;i.preserveMatrix=void 0===i.preserveMatrix||i.preserveMatrix,i.preservePosition=void 0===i.preservePosition||i.preservePosition,i.preserveHipPosition=void 0!==i.preserveHipPosition&&i.preserveHipPosition,i.useTargetMatrix=void 0!==i.useTargetMatrix&&i.useTargetMatrix,i.hip=void 0!==i.hip?i.hip:"hip",i.names=i.names||{};const u=t.isObject3D?t.skeleton.bones:c(t),p=e.isObject3D?e.skeleton.bones:c(e);let f,m,g,v,y;if(e.isObject3D?e.skeleton.pose():(i.useTargetMatrix=!0,i.preserveMatrix=!1),i.preservePosition){y=[];for(let e=0;e<p.length;e++)y.push(p[e].position.clone())}if(i.preserveMatrix){e.updateMatrixWorld(),e.matrixWorld.identity();for(let t=0;t<e.children.length;++t)e.children[t].updateMatrixWorld(!0)}if(i.offsets){f=[];for(let e=0;e<p.length;++e)m=p[e],g=i.names[m.name]||m.name,i.offsets[g]&&(m.matrix.multiply(i.offsets[g]),m.matrix.decompose(m.position,m.quaternion,m.scale),m.updateMatrixWorld()),f.push(m.matrixWorld.clone())}for(let t=0;t<p.length;++t){if(m=p[t],g=i.names[m.name]||m.name,v=d(g,u),h.copy(m.matrixWorld),v){if(v.updateMatrixWorld(),i.useTargetMatrix?l.copy(v.matrixWorld):(l.copy(e.matrixWorld).invert(),l.multiply(v.matrixWorld)),r.setFromMatrixScale(l),l.scale(r.set(1/r.x,1/r.y,1/r.z)),h.makeRotationFromQuaternion(a.setFromRotationMatrix(l)),e.isObject3D){const t=p.indexOf(m),i=f?f[t]:o.copy(e.skeleton.boneInverses[t]).invert();h.multiply(i)}h.copyPosition(l)}m.parent&&m.parent.isBone?(m.matrix.copy(m.parent.matrixWorld).invert(),m.matrix.multiply(h)):m.matrix.copy(h),i.preserveHipPosition&&g===i.hip&&m.matrix.setPosition(s.set(0,m.position.y,0)),m.matrix.decompose(m.position,m.quaternion,m.scale),m.updateMatrixWorld()}if(i.preservePosition)for(let e=0;e<p.length;++e)m=p[e],g=i.names[m.name]||m.name,g!==i.hip&&m.position.copy(y[e]);i.preserveMatrix&&e.updateMatrixWorld(!0)}function a(e,t,i,a={}){a.useFirstFramePosition=void 0!==a.useFirstFramePosition&&a.useFirstFramePosition,a.fps=void 0!==a.fps?a.fps:30,a.names=a.names||[],t.isObject3D||(t=r(t));const o=Math.round(i.duration*(a.fps/1e3)*1e3),l=1/a.fps,h=[],u=new n.AnimationMixer(t),p=c(e.skeleton),f=[];let m,g,v,y,b;u.clipAction(i).play(),u.update(0),t.updateMatrixWorld();for(let i=0;i<o;++i){const n=i*l;s(e,t,a);for(let e=0;e<p.length;++e)b=a.names[p[e].name]||p[e].name,v=d(b,t.skeleton),v&&(g=p[e],y=f[e]=f[e]||{bone:g},a.hip===b&&(y.pos||(y.pos={times:new Float32Array(o),values:new Float32Array(3*o)}),a.useFirstFramePosition&&(0===i&&(m=g.position.clone()),g.position.sub(m)),y.pos.times[i]=n,g.position.toArray(y.pos.values,3*i)),y.quat||(y.quat={times:new Float32Array(o),values:new Float32Array(4*o)}),y.quat.times[i]=n,g.quaternion.toArray(y.quat.values,4*i));u.update(l),t.updateMatrixWorld()}for(let e=0;e<f.length;++e)y=f[e],y&&(y.pos&&h.push(new n.VectorKeyframeTrack(".bones["+y.bone.name+"].position",y.pos.times,y.pos.values)),h.push(new n.QuaternionKeyframeTrack(".bones["+y.bone.name+"].quaternion",y.quat.times,y.quat.values)));return u.uncacheAction(i),new n.AnimationClip(i.name,-1,h)}function r(e){const t=new n.SkeletonHelper(e.bones[0]);return t.skeleton=e,t}function o(e,t,i={}){const s=new n.Vector3,a=new n.Vector3,o=new n.Vector3,l=new n.Vector3,u=new n.Vector2,p=new n.Vector2;i.hip=void 0!==i.hip?i.hip:"hip",i.names=i.names||{},t.isObject3D||(t=r(t));const f=Object.keys(i.names),m=Object.values(i.names),g=t.isObject3D?t.skeleton.bones:c(t),v=e.isObject3D?e.skeleton.bones:c(e),y=[];let b,w,x,S;for(e.skeleton.pose(),S=0;S<v.length;++S)if(b=v[S],x=i.names[b.name]||b.name,w=d(x,g),w&&x!==i.hip){const e=h(b.parent,f),t=h(w.parent,m);e.updateMatrixWorld(),t.updateMatrixWorld(),s.setFromMatrixPosition(e.matrixWorld),a.setFromMatrixPosition(b.matrixWorld),o.setFromMatrixPosition(t.matrixWorld),l.setFromMatrixPosition(w.matrixWorld),u.subVectors(new n.Vector2(a.x,a.y),new n.Vector2(s.x,s.y)).normalize(),p.subVectors(new n.Vector2(l.x,l.y),new n.Vector2(o.x,o.y)).normalize();const i=u.angle()-p.angle(),r=(new n.Matrix4).makeRotationFromEuler(new n.Euler(0,0,i));b.matrix.multiply(r),b.matrix.decompose(b.position,b.quaternion,b.scale),b.updateMatrixWorld(),y[x]=r}return y}function l(e,t){const i=c(e);for(let e=0;e<i.length;++e){const n=i[e];t[n.name]&&(n.name=t[n.name])}return this}function c(e){return Array.isArray(e)?e:e.bones}function d(e,t){for(let i=0,n=c(t);i<n.length;i++)if(e===n[i].name)return n[i]}function h(e,t){for(;e.isBone;){if(-1!==t.indexOf(e.name))return e;e=e.parent}}function u(e,t){const i=/\[(.*)\]\.(.*)/,n={name:e};for(let s=0;s<t.length;++s){const a=i.exec(t[s].name);a&&e===a[1]&&(n[a[2]]=s)}return n}function p(e,t){const i=c(e),n=c(t),s=[];e:for(let e=0;e<i.length;e++){const t=i[e].name;for(let e=0;e<n.length;e++)if(t===n[e].name){s.push(t);continue e}}return s}function f(e){const t=new Map,i=new Map,n=e.clone();return m(e,n,(function(e,n){t.set(n,e),i.set(e,n)})),n.traverse((function(e){if(!e.isSkinnedMesh)return;const n=e,s=t.get(e),a=s.skeleton.bones;n.skeleton=s.skeleton.clone(),n.bindMatrix.copy(s.bindMatrix),n.skeleton.bones=a.map((function(e){return i.get(e)})),n.bind(n.skeleton,n.bindMatrix)})),n}function m(e,t,i){i(e,t);for(let n=0;n<e.children.length;n++)m(e.children[n],t.children[n],i)}},function(e,t){e.exports=function(e){function t(e){if(u!==e){if(e.isChild){const t=(e.parentIndex>-1?e.parent._children[e.parentIndex]:e.parent).matrixWorld;o.getInverse?o.getInverse(t):o.copy(t).invert(),o.multiply(e.matrixWorld)}else o.copy(e.matrixWorld);o.decompose(n,a,s),u=null,l._x=n.x,l._y=n.y,l._z=n.z,h.x=a.x,h.y=a.y,h.z=a.z,h.w=a.w,c._x=s.x,c._y=s.y,c._z=s.z,u=e}}e.Frustum.prototype.intersectsObject=function(){const t=new e.Sphere,i=[];return function(e){const n=e.geometry;return null===n.boundingSphere&&n.computeBoundingSphere(),e.isStatic?e.isChild&&e.parent.compound?e.parent._visible:(t.radius=e.radius,t.center.copy(e),e._visible=this.intersectsSphere(t),this.children=!e.visible&&e.compound?i:this._children,e._visible):(t.copy(n.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(t))}}();let i=-1;const n=new e.Vector3,s=new e.Vector3,a=new e.Quaternion,r=new e.Box3,o=new e.Matrix4,l=new e.Vector3,c=new e.Vector3,d=new e.Euler,h=new e.Quaternion;let u;e.StaticMesh=function(t,n){this.id=i--,this.index=0,this.parentIndex=0,this.x=0,this.y=0,this.z=0,this.radius=0,this.matrixWorld=new e.Matrix4,this.parent=n||null,this.isChild=!!n,t&&this.setSource(t)},e.StaticMesh.prototype={...e.Object3D.prototype,...e.Mesh.prototype,...e.EventDispatcher.prototype,updateMorphTargets:e.Mesh.prototype.updateMorphTargets,onBeforeRender:e.Mesh.prototype.onBeforeRender,onAfterRender:e.Mesh.prototype.onAfterRender,addEventListener:e.EventDispatcher.prototype.addEventListener,removeEventListener:e.EventDispatcher.prototype.removeEventListener,dispatchEvent:e.EventDispatcher.prototype.dispatchEvent,getObjectByName:e.Object3D.prototype.getObjectByName,getObjectByProperty:e.Object3D.prototype.getObjectByProperty,getObjectById:e.Object3D.prototype.getObjectById,constructor:e.StaticMesh,isObject3D:!0,isMesh:!1,isStatic:!0,isChild:!1,visible:!0,compound:!0,uuid:"",name:"",type:"StaticMesh",children:[],_visible:!0,_children:[],frustumCulled:!0,renderOrder:0,castShadow:!1,receiveShadow:!1,matrixAutoUpdate:!1,layers:new e.Layers,modelViewMatrix:new e.Matrix4,normalMatrix:new e.Matrix3,matrix:new e.Matrix4,up:e.Object3D.DEFAULT_UP.clone(),restore:function(e){if(this.isChild)return console.error("Trying to restore from a child"),null;{e=e||this.source;let t=-1;const i=this;return e.matrixWorld.copy(this.matrixWorld),e.matrix.copy(this.matrixWorld),this.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.traverse((e=>{if(t>-1){const n=i._children[t],s=n.parentIndex>-1?i._children[n.parentIndex]:i;o.copy(s.matrixWorld).invert(),o.multiply(n.matrixWorld),e.matrixWorld.copy(n.matrixWorld),e.matrix.copy(o),o.decompose(e.position,e.quaternion,e.scale)}t++})),e}},save:function(){const e=this.source;let t=-1;const i=this;!0!==e.matrixAutoUpdate&&e.updateMatrix(),e.updateMatrixWorld(!0),e.traverse((s=>{if(t>-1){const a=i._children[t];if(a.matrixWorld.copy(s.matrixWorld),!e.compound&&a.geometry){a.geometry.boundingSphere||a.geometry.computeBoundingSphere();const e=a.geometry.boundingSphere;a.radius=a.matrixWorld.getMaxScaleOnAxis()*e.radius,n.copy(e.center).applyMatrix4(a.matrixWorld),a.x=n.x,a.y=n.y,a.z=n.z}}t++})),this.matrixWorld.copy(e.matrixWorld),this.compound&&this.children.length&&this.computeBoundingSphere(),this.update()},update:function(){const e=this.source.boundingSphere?this.source:this.geometry;e.boundingSphere||e.computeBoundingSphere(),this.radius=this.matrixWorld.getMaxScaleOnAxis()*e.boundingSphere.radius,n.copy(e.boundingSphere.center).applyMatrix4(this.matrixWorld),this.x=n.x,this.y=n.y,this.z=n.z},composeMatrix:function(){this.isChild?(this.parent.restore(),this.source.position.set(l._x,l._y,l._z),this.source.quaternion.set(h._x,h._y,h._z,h._w),this.source.scale.set(c._x,c._y,c._z),this.parent.save()):this.children.length?(this.restore(),this.matrixWorld.compose(l,h,c),this.source.position.set(l._x,l._y,l._z),this.source.quaternion.set(h._x,h._y,h._z,h._w),this.source.scale.set(c._x,c._y,c._z),this.save()):(this.matrixWorld.compose(l,h,c),this.update())},computeBoundingSphere:function(){const t=this.source,i=t.boundingSphere||new e.Sphere;t.updateMatrix(),o.copy(t.matrix),t.position.set(0,0,0),t.scale.set(1,1,1),t.quaternion.set(0,0,0,1),t.updateMatrixWorld(!0),r.expandByObject(t),r.max.divideScalar(2),i.center.copy(r.max),i.radius=Math.sqrt(r.min.distanceToSquared(r.max)),o.decompose(t.position,t.quaternion,t.scale),t.updateMatrixWorld(!0),t.boundingSphere=i},setSource:function(t){if(this.source=t,this.geometry=t.geometry,this.material=t.material,void 0===t.used&&(t.used=0),t.used++,t.isMesh&&(this.isMesh=!0,this.isSkinnedMesh=!1,this.updateMorphTargets()),t.isSkinnedMesh&&(this.isMesh=!1,this.isSkinnedMesh=!0,this.skeleton=t.skeleton,this.bindMatrix=t.bindMatrix,this.bindMatrixInverse=t.bindMatrixInverse,this.updateMatrixWorld=t.updateMatrixWorld),this.isChild)this.matrixWorld.copy(t.matrixWorld);else{if(t.children.length){let i=0;const n=this;this.children=[],this._children=this.children,t.updateMatrixWorld(!0),t.index=-1,t.traverse((t=>{if(i>0){const s=new e.StaticMesh(t,n);t.index=i-1,s.parentIndex=t.parent.index,n.children.push(s)}i++}))}else this.children!==this.constructor.prototype.children&&(delete this.children,delete this._children);this.save()}},updateMatrixWorld:function(){},updateWorldMatrix:function(){},traverse:function(e){e(this);const t=this._children;for(let i=0,n=t.length;i<n;i++)t[i].traverse(e)},add:function(){console.error("Objects can't be added to static meshes")},remove:function(){console.error("Objects can't be removed from static meshes")}},l._x=0,l._y=0,l._z=0,Object.defineProperties(l,{x:{set:function(e){l._x=e,u.composeMatrix()},get:function(){return l._x}},y:{set:function(e){l._y=e,u.composeMatrix()},get:function(){return l._y}},z:{set:function(e){l._z=e,u.composeMatrix()},get:function(){return l._z}}}),c._x=0,c._y=0,c._z=0,Object.defineProperties(c,{x:{set:function(e){this._x=e,u.composeMatrix()},get:function(){return this._x}},y:{set:function(e){this._y=e,u.composeMatrix()},get:function(){return this._y}},z:{set:function(e){this._z=e,u.composeMatrix()},get:function(){return this._z}}}),d._onChangeCallback=function(){h.setFromEuler(d,!1),u&&u.composeMatrix()},h._onChangeCallback=function(){d.setFromQuaternion(h,void 0,!1),u&&u.composeMatrix()},Object.defineProperties(e.StaticMesh.prototype,{position:{get:function(){return t(this),l}},rotation:{get:function(){return t(this),d}},quaternion:{get:function(){return t(this),h}},scale:{get:function(){return t(this),c}}}),e.Mesh.prototype.toStatic=function(){return new e.StaticMesh(this)}}},function(e,t,i){var n=i(134);let{RenderPass:s}=i(278),{CopyShader:a}=i(135);e.exports=function(e){e.RenderPass=s,e.CopyShader=a,e.StrippedLambertMaterial=function(t){let i=new e.ShaderMaterial({name:"lambert-stripped",uniforms:e.UniformsUtils.merge([e.ShaderLib.lambert.uniforms]),lights:!0,fog:!0,vertexShader:"\n\t\t\t\t#define LAMBERT\n\t\t\t\tvarying vec3 vLightFront;\n\t\t\t\tvarying vec3 vIndirectFront;\n\t\t\t\t#ifdef DOUBLE_SIDED\n\t\t\t\t\tvarying vec3 vLightBack;\n\t\t\t\t\tvarying vec3 vIndirectBack;\n\t\t\t\t#endif\n\t\t\t\t#include <common>\n\t\t\t\t#include <uv_pars_vertex>\n\t\t\t\t#include <uv2_pars_vertex>\n\t\t\t\t// #include <envmap_pars_vertex>\n\t\t\t\t#include <bsdfs>\n\t\t\t\t#include <lights_pars_begin>\n\t\t\t\t#include <color_pars_vertex>\n\t\t\t\t#include <fog_pars_vertex>\n\t\t\t\t// #include <morphtarget_pars_vertex>\n\t\t\t\t// #include <skinning_pars_vertex>\n\t\t\t\t#include <shadowmap_pars_vertex>\n\t\t\t\t// #include <logdepthbuf_pars_vertex>\n\t\t\t\t// #include <clipping_planes_pars_vertex>\n\t\t\t\tvoid main() {\n\t\t\t\t\t#include <uv_vertex>\n\t\t\t\t\t#include <uv2_vertex>\n\t\t\t\t\t#include <color_vertex>\n\t\t\t\t\t#include <beginnormal_vertex>\n\t\t\t\t\t// #include <morphnormal_vertex>\n\t\t\t\t\t// #include <skinbase_vertex>\n\t\t\t\t\t// #include <skinnormal_vertex>\n\t\t\t\t\t#include <defaultnormal_vertex>\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t// #include <morphtarget_vertex>\n\t\t\t\t\t// #include <skinning_vertex>\n\t\t\t\t\t#include <project_vertex>\n\t\t\t\t\t// #include <logdepthbuf_vertex>\n\t\t\t\t\t// #include <clipping_planes_vertex>\n\t\t\t\t\t#include <worldpos_vertex>\n\t\t\t\t\t// #include <envmap_vertex>\n\t\t\t\t\t#include <lights_lambert_vertex>\n\t\t\t\t\t#include <shadowmap_vertex>\n\t\t\t\t\t#include <fog_vertex>\n\t\t\t\t}\n\t\t\t\t",fragmentShader:"\n\t\t\t\tuniform vec3 diffuse;\n\t\t\t\tuniform vec3 emissive;\n\t\t\t\tuniform float opacity;\n\n\t\t\t\tvarying vec3 vLightFront;\n\t\t\t\tvarying vec3 vIndirectFront;\n\n\t\t\t\t#ifdef DOUBLE_SIDED\n\t\t\t\t\tvarying vec3 vLightBack;\n\t\t\t\t\tvarying vec3 vIndirectBack;\n\t\t\t\t#endif\n\n\n\t\t\t\t#include <common>\n\t\t\t\t#include <packing>\n\t\t\t\t// #include <dithering_pars_fragment>\n\t\t\t\t#include <color_pars_fragment>\n\t\t\t\t#include <uv_pars_fragment>\n\t\t\t\t#include <uv2_pars_fragment>\n\t\t\t\t#include <map_pars_fragment>\n\t\t\t\t// #include <alphamap_pars_fragment>\n\t\t\t\t#include <aomap_pars_fragment>\n\t\t\t\t#include <lightmap_pars_fragment>\n\t\t\t\t#include <emissivemap_pars_fragment>\n\t\t\t\t// #include <envmap_pars_fragment>\n\t\t\t\t#include <bsdfs>  // Shading functions\n\t\t\t\t#include <lights_pars_begin>\n\t\t\t\t#include <fog_pars_fragment>\n\t\t\t\t#include <shadowmap_pars_fragment>\n\t\t\t\t#include <shadowmask_pars_fragment>\n\t\t\t\t// #include <specularmap_pars_fragment>\n\t\t\t\t// #include <logdepthbuf_pars_fragment>\n\t\t\t\t// #include <clipping_planes_pars_fragment>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\t// #include <clipping_planes_fragment>\n\n\t\t\t\t\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t\t\t\t\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t\t\t\t\tvec3 totalEmissiveRadiance = emissive;\n\n\t\t\t\t\t// #include <logdepthbuf_fragment>\n\t\t\t\t\t#include <map_fragment>\n\t\t\t\t\t#include <color_fragment>\n\t\t\t\t\t// #include <alphamap_fragment>\n\t\t\t\t\t#include <alphatest_fragment>\n\t\t\t\t\t// #include <specularmap_fragment>\n\t\t\t\t\t#include <emissivemap_fragment>\n\n\t\t\t\t\t// accumulation\n\t\t\t\t\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\n\t\t\t\t\t#ifdef DOUBLE_SIDED\n\n\t\t\t\t\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\n\t\t\t\t\t#else\n\n\t\t\t\t\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\n\t\t\t\t\t#endif\n\n\t\t\t\t\t#include <lightmap_fragment>\n\n\t\t\t\t\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\n\t\t\t\t\t#ifdef DOUBLE_SIDED\n\n\t\t\t\t\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\n\t\t\t\t\t#else\n\n\t\t\t\t\t\treflectedLight.directDiffuse = vLightFront;\n\n\t\t\t\t\t#endif\n\n\t\t\t\t\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\n\t\t\t\t\t// modulation\n\t\t\t\t\t#include <aomap_fragment>\n\n\t\t\t\t\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\n\t\t\t\t\t// #include <envmap_fragment>\n\n\t\t\t\t\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t\t\t\t\t// #include <tonemapping_fragment>\n\t\t\t\t\t// #include <encodings_fragment>\n\t\t\t\t\t#include <fog_fragment>\n\t\t\t\t\t#include <premultiplied_alpha_fragment>\n\t\t\t\t\t// #include <dithering_fragment>\n\t\t\t\t}\n\t\t\t\t\t"});return Object.assign(i,new e.MeshLambertMaterial(t)),i.isMeshLambertMaterial=!0,i.setValues(t),i},e.EffectComposer=function(t,i,n){if(this.renderer=t,void 0===i){var s={minFilter:e.LinearFilter,magFilter:e.LinearFilter,format:e.RGBAFormat},a=t.getSize(new e.Vector2);this._pixelRatio=t.getPixelRatio(),this._width=a.width,this._height=a.height,(i=new e.WebGLRenderTarget(this._width*this._pixelRatio,this._height*this._pixelRatio,s)).texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=i.width,this._height=i.height;this.renderTarget1=i,this.renderTarget2=i.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.RENDER=n,this.passes=[],void 0===e.CopyShader&&console.error("THREE.EffectComposer relies on THREE.CopyShader"),void 0===e.ShaderPass&&console.error("THREE.EffectComposer relies on THREE.ShaderPass"),this.copyPass=new e.ShaderPass(e.CopyShader),this.clock=new e.Clock},Object.assign(e.EffectComposer.prototype,{swapBuffers:function(){var e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e},addPass:function(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)},insertPass:function(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)},replacePass:function(e,t){this.passes[t]=e,e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)},removePass:function(e){const t=this.passes.indexOf(e);-1!==t&&this.passes.splice(t,1)},isLastEnabledPass:function(e){for(var t=e+1;t<this.passes.length;t++)if(this.passes[t]&&this.passes[t].enabled)return!1;return!0},render:function(t=this.clock.getDelta()){var i,n,s=this.renderer.getRenderTarget(),a=!1,r=this.passes.length;for(n=0;n<r;n++)if((i=this.passes[n])&&!1!==i.enabled){if(i.renderToScreen=!i.noRTS&&this.renderToScreen&&this.isLastEnabledPass(n),i.render(this.renderer,this.writeBuffer,this.readBuffer,t,a,this.RENDER),i.needsSwap){if(a){var o=this.renderer.getContext(),l=this.renderer.state.buffers.stencil;l.setFunc(o.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,t),l.setFunc(o.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==e.MaskPass&&(i instanceof e.MaskPass?a=!0:i instanceof e.ClearMaskPass&&(a=!1))}this.renderer.setRenderTarget(s)},reset:function(t){if(void 0===t){var i=this.renderer.getSize(new e.Vector2);this._pixelRatio=this.renderer.getPixelRatio(),this._width=i.width,this._height=i.height,(t=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=t,this.renderTarget2=t.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2},setSize:function(e,t){this._width=e,this._height=t;var i=this._width*this._pixelRatio,n=this._height*this._pixelRatio;this.renderTarget1.setSize(i,n),this.renderTarget2.setSize(i,n);for(var s=0;s<this.passes.length;s++)this.passes[s]&&this.passes[s].setSize(i,n)},setPixelRatio:function(e){this._pixelRatio=e,this.setSize(this._width,this._height)}}),e.Pass=function(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1},Object.assign(e.Pass.prototype,{setSize:function(){},render:function(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}),e.Pass.FullScreenQuad=function(){var t=new e.OrthographicCamera(-1,1,1,-1,0,1),i=new e.BufferGeometry;const n=new Float32Array([-1,3,0,-1,-1,0,3,-1,0]);i.setAttribute("position",new e.BufferAttribute(n,3));const s=new Float32Array([0,2,0,0,2,0]);function a(t){this._mesh=new e.Mesh(i,t)}return i.setAttribute("uv",new e.BufferAttribute(s,2)),Object.defineProperty(a.prototype,"material",{get:function(){return this._mesh.material},set:function(e){this._mesh.material=e}}),Object.assign(a.prototype,{dispose:function(){this._mesh.geometry.dispose()},render:function(e){e.render(this._mesh,t)}}),a}(),e.ShaderPass=function(t,i){e.Pass.call(this),this.textureID=void 0===i?"tDiffuse":i,t instanceof e.ShaderMaterial?(this.uniforms=t.uniforms,this.material=t):t&&(this.uniforms=e.UniformsUtils.clone(t.uniforms),this.material=new e.ShaderMaterial({defines:Object.assign({},t.defines),uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader})),this.material&&(this.material.transparent=!0),this.clock=new e.Clock,this.fsQuad=new e.Pass.FullScreenQuad(this.material)},e.ShaderPass.prototype=Object.assign(Object.create(e.Pass.prototype),{constructor:e.ShaderPass,render:function(e,t,i,n,s,a){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=i.texture),null==this.uniforms.time?this.uniforms.time={type:"1f",value:this.clock.getElapsedTime()}:this.uniforms.time.value=this.clock.getElapsedTime(),null==this.uniforms.delta?this.uniforms.delta={type:"1f",value:n}:this.uniforms.delta.value=n,null==this.uniforms.mouse?this.uniforms.mouse={value:a.tmpMouse}:this.uniforms.mouse.value=a.tmpMouse,null==this.uniforms.frame?this.uniforms.frame={value:1}:this.uniforms.frame.value++,this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}});class t extends e.RawShaderMaterial{constructor(i,n){var s=n||{};s.aspectRatio=s.aspectRatio||2;let a=1500/s.aspectRatio;s.width=1500,s.hieght=a;let r=t.retriveUsedUniforms(i);var o=new e.Clock;super({vertexShader:"\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tuniform mat4 projectionMatrix;\n\t\tuniform mat4 modelViewMatrix;\n\t\tvarying vec2 vUv;\n\t\tvoid main () {\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\tvUv=uv;\n\t\t}\n\t",fragmentShader:""}),(r.iTime||r.iTimeDelta||r.iFrame||r.iDate)&&((r.iTime||r.iTimeDelta)&&(this.clock=o),this.registerUpdate());let l=this.createUniformsObject(r,s);this.uniforms=l.prof;var c="\n\t\tprecision highp float;\n\t\tuniform vec2 iResolution;\n\t\tvarying vec2 vUv;\n\t\tvec4 texture(sampler2D sampler, vec2 coord){\n\t\t\treturn texture2D(sampler,  coord);\n\t\t}\n\t\tvoid  mainImage( out vec4,  vec2 fragCoord );\n\t\tvoid main () {\n\t\t\tvec4 outfrag;\n\t\t\tmainImage(outfrag,iResolution*vUv);\n\t\t\tgl_FragColor = outfrag;\n\t\t}\n\t\n"+l.code+"\n"+i;this.fragmentShader=c}registerUpdate(){setTimeout((()=>this.update()),0)}update(){if(this.uniforms.iTime&&(this.uniforms.iTime.value=this.clock.getElapsedTime()),this.uniforms.iTimeDelta&&(this.uniforms.iTimeDelta.value=this.clock.getDelta()),this.uniforms.iFrame&&++this.uniforms.iFrame.value,this.uniforms.iDate){let t=new Date,i=t.getSeconds()+60*t.getMinutes()+3600*t.getHours();this.uniforms.iDate.value=new e.Vector4(t.getFullYear(),t.getMonth(),t.getDay(),i)}if(this.uniforms.iChannelResolution){let t=t=>{this.uniforms["iChannel"+t]&&this.uniforms["iChannel"+t].value.image&&(this.uniforms.iChannelResolution.value[t]=new e.Vector3(this.uniforms["iChannel"+t].value.image.width,this.uniforms["iChannel"+t].value.image.height))};for(let e=0;e<4;e++)t(e)}requestAnimationFrame((()=>{this.update()}))}static retriveUsedUniforms(e){let t=e.replace(n(),""),i="iTime,iTimeDelta,iResolution,iFrame,iChannelTime[4],iChannelResolution,iChannel0,iChannel1,iChannel2,iChannel3,iDate,iMouse".split(","),s={};return i.forEach((e=>{t.includes(e)&&(s[e]=!0)})),s}createUniformsObject(t,i){function n(e){if(t["iChannel"+e]){let t=i.map?i.map:null;t=Array.isArray(t)?t[e]:t,s["iChannel"+e]={type:"t",value:t},a+="uniform sampler2D "+["iChannel"+e]+";\n"}}let s={},a="";t.iResolution&&(s.iResolution={value:new e.Vector2(i.width,i.hieght)}),t.iTime&&(s.iTime={type:"1f",value:this.clock.getElapsedTime()},a+="uniform float iTime;\n"),t.iDate&&(s.iDate={value:new e.Vector4},a+="uniform vec4 iDate;\n"),t.iTimeDelta&&(s.iTimeDelta={type:"1f",value:this.clock.getDelta()},a+="uniform float iTimeDelta;\n"),t.iFrame&&(s.iFrame={type:"1i",value:0},a+="uniform int iFrame;\n"),t.iMouse&&(s.iMouse={value:new e.Vector4(i.width/2,i.hieght/2,i.width/2,i.hieght/2)},a+="uniform vec4 iMouse;\n"),t.iChannelResolution&&(s.iChannelResolution={type:"v3v",value:[new e.Vector3,new e.Vector3,new e.Vector3,new e.Vector3]},a+="uniform vec3 iChannelResolution[4];\n");for(let e=0;e<4;e++)n(e);return{prof:s,code:a}}}e.ShaderToyMaterial=t}},function(e,t,i){"use strict";var n=e.exports=function(){return new RegExp("(?:"+n.line().source+")|(?:"+n.block().source+")","gm")};n.line=function(){return/(?:^|\s)\/\/(.+?)$/gm},n.block=function(){return/\/\*([\S\s]*?)\*\//gm}},function(e,t,i){"use strict";i.r(t),i.d(t,"CopyShader",(function(){return n}));const n={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tgl_FragColor = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor.a *= opacity;\n\n\n\t\t}"}},function(e,t,i){"use strict";i.r(t),i.d(t,"OBJLoader",(function(){return g}));var n=i(0);const s=/^[og]\s*(.+)?/,a=/^mtllib /,r=/^usemtl /,o=/^usemap /,l=/\s+/,c=new n.Vector3,d=new n.Vector3,h=new n.Vector3,u=new n.Vector3,p=new n.Vector3,f=new n.Color;function m(){const e={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);const i=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(e,t){const i=this._finalize(!1);i&&(i.inherited||i.groupCount<=0)&&this.materials.splice(i.index,1);const n={index:this.materials.length,name:e||"",mtllib:Array.isArray(t)&&t.length>0?t[t.length-1]:"",smooth:void 0!==i?i.smooth:this.smooth,groupStart:void 0!==i?i.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(e){const t={index:"number"==typeof e?e:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return t.clone=this.clone.bind(t),t}};return this.materials.push(n),n},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(e){const t=this.currentMaterial();if(t&&-1===t.groupEnd&&(t.groupEnd=this.geometry.vertices.length/3,t.groupCount=t.groupEnd-t.groupStart,t.inherited=!1),e&&this.materials.length>1)for(let e=this.materials.length-1;e>=0;e--)this.materials[e].groupCount<=0&&this.materials.splice(e,1);return e&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),t}},i&&i.name&&"function"==typeof i.clone){const e=i.clone(0);e.inherited=!0,this.object.materials.push(e)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(e,t){const i=parseInt(e,10);return 3*(i>=0?i-1:i+t/3)},parseNormalIndex:function(e,t){const i=parseInt(e,10);return 3*(i>=0?i-1:i+t/3)},parseUVIndex:function(e,t){const i=parseInt(e,10);return 2*(i>=0?i-1:i+t/2)},addVertex:function(e,t,i){const n=this.vertices,s=this.object.geometry.vertices;s.push(n[e+0],n[e+1],n[e+2]),s.push(n[t+0],n[t+1],n[t+2]),s.push(n[i+0],n[i+1],n[i+2])},addVertexPoint:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,i){const n=this.normals,s=this.object.geometry.normals;s.push(n[e+0],n[e+1],n[e+2]),s.push(n[t+0],n[t+1],n[t+2]),s.push(n[i+0],n[i+1],n[i+2])},addFaceNormal:function(e,t,i){const n=this.vertices,s=this.object.geometry.normals;c.fromArray(n,e),d.fromArray(n,t),h.fromArray(n,i),p.subVectors(h,d),u.subVectors(c,d),p.cross(u),p.normalize(),s.push(p.x,p.y,p.z),s.push(p.x,p.y,p.z),s.push(p.x,p.y,p.z)},addColor:function(e,t,i){const n=this.colors,s=this.object.geometry.colors;void 0!==n[e]&&s.push(n[e+0],n[e+1],n[e+2]),void 0!==n[t]&&s.push(n[t+0],n[t+1],n[t+2]),void 0!==n[i]&&s.push(n[i+0],n[i+1],n[i+2])},addUV:function(e,t,i){const n=this.uvs,s=this.object.geometry.uvs;s.push(n[e+0],n[e+1]),s.push(n[t+0],n[t+1]),s.push(n[i+0],n[i+1])},addDefaultUV:function(){const e=this.object.geometry.uvs;e.push(0,0),e.push(0,0),e.push(0,0)},addUVLine:function(e){const t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,i,n,s,a,r,o,l){const c=this.vertices.length;let d=this.parseVertexIndex(e,c),h=this.parseVertexIndex(t,c),u=this.parseVertexIndex(i,c);if(this.addVertex(d,h,u),this.addColor(d,h,u),void 0!==r&&""!==r){const e=this.normals.length;d=this.parseNormalIndex(r,e),h=this.parseNormalIndex(o,e),u=this.parseNormalIndex(l,e),this.addNormal(d,h,u)}else this.addFaceNormal(d,h,u);if(void 0!==n&&""!==n){const e=this.uvs.length;d=this.parseUVIndex(n,e),h=this.parseUVIndex(s,e),u=this.parseUVIndex(a,e),this.addUV(d,h,u),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(e){this.object.geometry.type="Points";const t=this.vertices.length;for(let i=0,n=e.length;i<n;i++){const n=this.parseVertexIndex(e[i],t);this.addVertexPoint(n),this.addColor(n)}},addLineGeometry:function(e,t){this.object.geometry.type="Line";const i=this.vertices.length,n=this.uvs.length;for(let t=0,n=e.length;t<n;t++)this.addVertexLine(this.parseVertexIndex(e[t],i));for(let e=0,i=t.length;e<i;e++)this.addUVLine(this.parseUVIndex(t[e],n))}};return e.startObject("",!1),e}class g extends n.Loader{constructor(e){super(e),this.materials=null}load(e,t,i,s){const a=this,r=new n.FileLoader(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(e,(function(i){try{t(a.parse(i))}catch(t){s?s(t):console.error(t),a.manager.itemError(e)}}),i,s)}setMaterials(e){return this.materials=e,this}parse(e){const t=new m;-1!==e.indexOf("\r\n")&&(e=e.replace(/\r\n/g,"\n")),-1!==e.indexOf("\\\n")&&(e=e.replace(/\\\n/g,""));const i=e.split("\n");let c=[];for(let e=0,n=i.length;e<n;e++){const n=i[e].trimStart();if(0===n.length)continue;const d=n.charAt(0);if("#"!==d)if("v"===d){const e=n.split(l);switch(e[0]){case"v":t.vertices.push(parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])),e.length>=7?(f.setRGB(parseFloat(e[4]),parseFloat(e[5]),parseFloat(e[6])).convertSRGBToLinear(),t.colors.push(f.r,f.g,f.b)):t.colors.push(void 0,void 0,void 0);break;case"vn":t.normals.push(parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]));break;case"vt":t.uvs.push(parseFloat(e[1]),parseFloat(e[2]))}}else if("f"===d){const e=n.slice(1).trim().split(l),i=[];for(let t=0,n=e.length;t<n;t++){const n=e[t];if(n.length>0){const e=n.split("/");i.push(e)}}const s=i[0];for(let e=1,n=i.length-1;e<n;e++){const n=i[e],a=i[e+1];t.addFace(s[0],n[0],a[0],s[1],n[1],a[1],s[2],n[2],a[2])}}else if("l"===d){const e=n.substring(1).trim().split(" ");let i=[];const s=[];if(-1===n.indexOf("/"))i=e;else for(let t=0,n=e.length;t<n;t++){const n=e[t].split("/");""!==n[0]&&i.push(n[0]),""!==n[1]&&s.push(n[1])}t.addLineGeometry(i,s)}else if("p"===d){const e=n.slice(1).trim().split(" ");t.addPointGeometry(e)}else if(null!==(c=s.exec(n))){const e=(" "+c[0].slice(1).trim()).slice(1);t.startObject(e)}else if(r.test(n))t.object.startMaterial(n.substring(7).trim(),t.materialLibraries);else if(a.test(n))t.materialLibraries.push(n.substring(7).trim());else if(o.test(n))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if("s"===d){if(c=n.split(" "),c.length>1){const e=c[1].trim().toLowerCase();t.object.smooth="0"!==e&&"off"!==e}else t.object.smooth=!0;const e=t.object.currentMaterial();e&&(e.smooth=t.object.smooth)}else{if("\0"===n)continue;console.warn('THREE.OBJLoader: Unexpected line: "'+n+'"')}}t.finalize();const d=new n.Group;d.materialLibraries=[].concat(t.materialLibraries);if(!0===(1!==t.objects.length||0!==t.objects[0].geometry.vertices.length))for(let e=0,i=t.objects.length;e<i;e++){const i=t.objects[e],s=i.geometry,a=i.materials,r="Line"===s.type,o="Points"===s.type;let l=!1;if(0===s.vertices.length)continue;const c=new n.BufferGeometry;c.setAttribute("position",new n.Float32BufferAttribute(s.vertices,3)),s.normals.length>0&&c.setAttribute("normal",new n.Float32BufferAttribute(s.normals,3)),s.colors.length>0&&(l=!0,c.setAttribute("color",new n.Float32BufferAttribute(s.colors,3))),!0===s.hasUVIndices&&c.setAttribute("uv",new n.Float32BufferAttribute(s.uvs,2));const h=[];for(let e=0,i=a.length;e<i;e++){const i=a[e],s=i.name+"_"+i.smooth+"_"+l;let c=t.materials[s];if(null!==this.materials)if(c=this.materials.create(i.name),!r||!c||c instanceof n.LineBasicMaterial){if(o&&c&&!(c instanceof n.PointsMaterial)){const e=new n.PointsMaterial({size:10,sizeAttenuation:!1});n.Material.prototype.copy.call(e,c),e.color.copy(c.color),e.map=c.map,c=e}}else{const e=new n.LineBasicMaterial;n.Material.prototype.copy.call(e,c),e.color.copy(c.color),c=e}void 0===c&&(c=r?new n.LineBasicMaterial:o?new n.PointsMaterial({size:1,sizeAttenuation:!1}):new n.MeshPhongMaterial,c.name=i.name,c.flatShading=!i.smooth,c.vertexColors=l,t.materials[s]=c),h.push(c)}let u;if(h.length>1){for(let e=0,t=a.length;e<t;e++){const t=a[e];c.addGroup(t.groupStart,t.groupCount,e)}u=r?new n.LineSegments(c,h):o?new n.Points(c,h):new n.Mesh(c,h)}else u=r?new n.LineSegments(c,h[0]):o?new n.Points(c,h[0]):new n.Mesh(c,h[0]);u.name=i.name,d.add(u)}else if(t.vertices.length>0){const e=new n.PointsMaterial({size:1,sizeAttenuation:!1}),i=new n.BufferGeometry;i.setAttribute("position",new n.Float32BufferAttribute(t.vertices,3)),t.colors.length>0&&void 0!==t.colors[0]&&(i.setAttribute("color",new n.Float32BufferAttribute(t.colors,3)),e.vertexColors=!0);const s=new n.Points(i,e);d.add(s)}return d}}},function(e,t,i){"use strict";i.r(t),i.d(t,"MeshoptDecoder",(function(){return n}));var n=function(){var e=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),t=new Uint8Array([32,0,65,2,1,106,34,33,3,128,11,4,13,64,6,253,10,7,15,116,127,5,8,12,40,16,19,54,20,9,27,255,113,17,42,67,24,23,146,148,18,14,22,45,70,69,56,114,101,21,25,63,75,136,108,28,118,29,73,115]);if("object"!=typeof WebAssembly)return{supported:!1};var i,n=WebAssembly.validate(e)?"b9H79TebbbeKl9Gbb9Gvuuuuueu9Giuuub9Geueuikqbbebeedddilve9Weeeviebeoweuec:q;Aekr;leDo9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bb8A9TW79O9V9Wt9F9KW9J9V9KW9wWVtW949c919M9MWVbdY9TW79O9V9Wt9F9KW9J9V9KW69U9KW949c919M9MWVblE9TW79O9V9Wt9F9KW9J9V9KW69U9KW949tWG91W9U9JWbvL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9p9JtboK9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9r919HtbrL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWVT949Wbwl79IV9RbDq;t9tqlbzik9:evu8Jjjjjbcz9Rhbcbheincbhdcbhiinabcwfadfaicjuaead4ceGglE86bbaialfhiadcefgdcw9hmbkaec:q:yjjbfai86bbaecitc:q1jjbfab8Piw83ibaecefgecjd9hmbkk;h8JlHud97euo978Jjjjjbcj;kb9Rgv8Kjjjjbc9:hodnadcefal0mbcuhoaiRbbc:Ge9hmbavaialfgrad9Rad;8qbbcj;abad9UhoaicefhldnadTmbaoc;WFbGgocjdaocjd6EhwcbhDinaDae9pmeawaeaD9RaDawfae6Egqcsfgoc9WGgkci2hxakcethmaocl4cifcd4hPabaDad2fhscbhzdnincehHalhOcbhAdninaraO9RaP6miavcj;cbfaAak2fhCaOaPfhlcbhidnakc;ab6mbaral9Rc;Gb6mbcbhoinaCaofhidndndndndnaOaoco4fRbbgXciGPlbedibkaipxbbbbbbbbbbbbbbbbpklbxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaialpbbbpklbalczfhlkdndndndndnaXcd4ciGPlbedibkaipxbbbbbbbbbbbbbbbbpklzxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklzalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklzalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaialpbbbpklzalczfhlkdndndndndnaXcl4ciGPlbedibkaipxbbbbbbbbbbbbbbbbpklaxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklaalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklaalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaialpbbbpklaalczfhlkdndndndndnaXco4Plbedibkaipxbbbbbbbbbbbbbbbbpkl8WxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibaXc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spkl8WalclfaYpQbfaXc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibaXc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spkl8WalcwfaYpQbfaXc:q:yjjbfRbbfhlxekaialpbbbpkl8Walczfhlkaoc;abfhiaocjefak0meaihoaral9Rc;Fb0mbkkdndnaiak9pmbaici4hoinaral9RcK6mdaCaifhXdndndndndnaOaico4fRbbaocoG4ciGPlbedibkaXpxbbbbbbbbbbbbbbbbpklbxikaXalpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaXalpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaXalpbbbpklbalczfhlkaocdfhoaiczfgiak6mbkkalTmbaAci6hHalhOaAcefgohAaoclSmdxekkcbhlaHceGmdkdnakTmbavcjdfazfhiavazfpbdbhYcbhXinaiavcj;cbfaXfgopblbgLcep9TaLpxeeeeeeeeeeeeeeeegQp9op9Hp9rgLaoakfpblbg8Acep9Ta8AaQp9op9Hp9rg8ApmbzeHdOiAlCvXoQrLgEaoamfpblbg3cep9Ta3aQp9op9Hp9rg3aoaxfpblbg5cep9Ta5aQp9op9Hp9rg5pmbzeHdOiAlCvXoQrLg8EpmbezHdiOAlvCXorQLgQaQpmbedibedibedibediaYp9UgYp9AdbbaiadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfgoaYaEa8EpmwDKYqk8AExm35Ps8E8FgQaQpmbedibedibedibedip9UgYp9AdbbaoadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfgoaYaLa8ApmwKDYq8AkEx3m5P8Es8FgLa3a5pmwKDYq8AkEx3m5P8Es8Fg8ApmbezHdiOAlvCXorQLgQaQpmbedibedibedibedip9UgYp9AdbbaoadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfgoaYaLa8ApmwDKYqk8AExm35Ps8E8FgQaQpmbedibedibedibedip9UgYp9AdbbaoadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfhiaXczfgXak6mbkkazclfgzad6mbkasavcjdfaqad2;8qbbavavcjdfaqcufad2fad;8qbbaqaDfhDc9:hoalmexikkc9:hoxekcbc99aral9Radcaadca0ESEhokavcj;kbf8Kjjjjbaokwbz:bjjjbk;uzeHu8Jjjjjbc;ae9Rgv8Kjjjjbc9:hodnaeci9UgrcHfal0mbcuhoaiRbbgwc;WeGc;Ge9hmbawcsGgDce0mbavc;abfcFecje;8kbavcUf9cu83ibavc8Wf9cu83ibavcyf9cu83ibavcaf9cu83ibavcKf9cu83ibavczf9cu83ibav9cu83iwav9cu83ibaialfc9WfhqaicefgwarfhodnaeTmbcmcsaDceSEhkcbhxcbhmcbhDcbhicbhlindnaoaq9nmbc9:hoxikdndnawRbbgrc;Ve0mbavc;abfalarcl4cu7fcsGcitfgPydlhsaPydbhzdnarcsGgPak9pmbavaiarcu7fcsGcdtfydbaxaPEhraPThPdndnadcd9hmbabaDcetfgHaz87ebaHcdfas87ebaHclfar87ebxekabaDcdtfgHazBdbaHclfasBdbaHcwfarBdbkaxaPfhxavc;abfalcitfgHarBdbaHasBdlavaicdtfarBdbavc;abfalcefcsGglcitfgHazBdbaHarBdlaiaPfhialcefhlxdkdndnaPcsSmbamaPfaPc987fcefhmxekaocefhrao8SbbgPcFeGhHdndnaPcu9mmbarhoxekaocvfhoaHcFbGhHcrhPdninar8SbbgOcFbGaPtaHVhHaOcu9kmearcefhraPcrfgPc8J9hmbxdkkarcefhokaHce4cbaHceG9R7amfhmkdndnadcd9hmbabaDcetfgraz87ebarcdfas87ebarclfam87ebxekabaDcdtfgrazBdbarclfasBdbarcwfamBdbkavc;abfalcitfgramBdbarasBdlavaicdtfamBdbavc;abfalcefcsGglcitfgrazBdbaramBdlaicefhialcefhlxekdnarcpe0mbaxcefgOavaiaqarcsGfRbbgPcl49RcsGcdtfydbaPcz6gHEhravaiaP9RcsGcdtfydbaOaHfgsaPcsGgOEhPaOThOdndnadcd9hmbabaDcetfgzax87ebazcdfar87ebazclfaP87ebxekabaDcdtfgzaxBdbazclfarBdbazcwfaPBdbkavaicdtfaxBdbavc;abfalcitfgzarBdbazaxBdlavaicefgicsGcdtfarBdbavc;abfalcefcsGcitfgzaPBdbazarBdlavaiaHfcsGgicdtfaPBdbavc;abfalcdfcsGglcitfgraxBdbaraPBdlalcefhlaiaOfhiasaOfhxxekaxcbaoRbbgzEgAarc;:eSgrfhsazcsGhCazcl4hXdndnazcs0mbascefhOxekashOavaiaX9RcsGcdtfydbhskdndnaCmbaOcefhxxekaOhxavaiaz9RcsGcdtfydbhOkdndnarTmbaocefhrxekaocdfhrao8SbegHcFeGhPdnaHcu9kmbaocofhAaPcFbGhPcrhodninar8SbbgHcFbGaotaPVhPaHcu9kmearcefhraocrfgoc8J9hmbkaAhrxekarcefhrkaPce4cbaPceG9R7amfgmhAkdndnaXcsSmbarhPxekarcefhPar8SbbgocFeGhHdnaocu9kmbarcvfhsaHcFbGhHcrhodninaP8SbbgrcFbGaotaHVhHarcu9kmeaPcefhPaocrfgoc8J9hmbkashPxekaPcefhPkaHce4cbaHceG9R7amfgmhskdndnaCcsSmbaPhoxekaPcefhoaP8SbbgrcFeGhHdnarcu9kmbaPcvfhOaHcFbGhHcrhrdninao8SbbgPcFbGartaHVhHaPcu9kmeaocefhoarcrfgrc8J9hmbkaOhoxekaocefhokaHce4cbaHceG9R7amfgmhOkdndnadcd9hmbabaDcetfgraA87ebarcdfas87ebarclfaO87ebxekabaDcdtfgraABdbarclfasBdbarcwfaOBdbkavc;abfalcitfgrasBdbaraABdlavaicdtfaABdbavc;abfalcefcsGcitfgraOBdbarasBdlavaicefgicsGcdtfasBdbavc;abfalcdfcsGcitfgraABdbaraOBdlavaiazcz6aXcsSVfgicsGcdtfaOBdbaiaCTaCcsSVfhialcifhlkawcefhwalcsGhlaicsGhiaDcifgDae6mbkkcbc99aoaqSEhokavc;aef8Kjjjjbaok:llevu8Jjjjjbcz9Rhvc9:hodnaecvfal0mbcuhoaiRbbc;:eGc;qe9hmbav9cb83iwaicefhraialfc98fhwdnaeTmbdnadcdSmbcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcdtfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfglBdbaoalBdbaDcefgDae9hmbxdkkcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcetfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfgl87ebaoalBdbaDcefgDae9hmbkkcbc99arawSEhokaok:EPliuo97eue978Jjjjjbca9Rhidndnadcl9hmbdnaec98GglTmbcbhvabhdinadadpbbbgocKp:RecKp:Sep;6egraocwp:RecKp:Sep;6earp;Geaoczp:RecKp:Sep;6egwp;Gep;Kep;LegDpxbbbbbbbbbbbbbbbbp:2egqarpxbbbjbbbjbbbjbbbjgkp9op9rp;Kegrpxbb;:9cbb;:9cbb;:9cbb;:9cararp;MeaDaDp;Meawaqawakp9op9rp;Kegrarp;Mep;Kep;Kep;Jep;Negwp;Mepxbbn0bbn0bbn0bbn0gqp;KepxFbbbFbbbFbbbFbbbp9oaopxbbbFbbbFbbbFbbbFp9op9qarawp;Meaqp;Kecwp:RepxbFbbbFbbbFbbbFbbp9op9qaDawp;Meaqp;Keczp:RepxbbFbbbFbbbFbbbFbp9op9qpkbbadczfhdavclfgval6mbkkalae9pmeaiaeciGgvcdtgdVcbczad9R;8kbaiabalcdtfglad;8qbbdnavTmbaiaipblbgocKp:RecKp:Sep;6egraocwp:RecKp:Sep;6earp;Geaoczp:RecKp:Sep;6egwp;Gep;Kep;LegDpxbbbbbbbbbbbbbbbbp:2egqarpxbbbjbbbjbbbjbbbjgkp9op9rp;Kegrpxbb;:9cbb;:9cbb;:9cbb;:9cararp;MeaDaDp;Meawaqawakp9op9rp;Kegrarp;Mep;Kep;Kep;Jep;Negwp;Mepxbbn0bbn0bbn0bbn0gqp;KepxFbbbFbbbFbbbFbbbp9oaopxbbbFbbbFbbbFbbbFp9op9qarawp;Meaqp;Kecwp:RepxbFbbbFbbbFbbbFbbp9op9qaDawp;Meaqp;Keczp:RepxbbFbbbFbbbFbbbFbp9op9qpklbkalaiad;8qbbskdnaec98GgxTmbcbhvabhdinadczfglalpbbbgopxbbbbbbFFbbbbbbFFgkp9oadpbbbgDaopmlvorxmPsCXQL358E8FpxFubbFubbFubbFubbp9op;6eaDaopmbediwDqkzHOAKY8AEgoczp:Sep;6egrp;Geaoczp:Reczp:Sep;6egwp;Gep;Kep;Legopxb;:FSb;:FSb;:FSb;:FSawaopxbbbbbbbbbbbbbbbbp:2egqawpxbbbjbbbjbbbjbbbjgmp9op9rp;Kegwawp;Meaoaop;Mearaqaramp9op9rp;Kegoaop;Mep;Kep;Kep;Jep;Negrp;Mepxbbn0bbn0bbn0bbn0gqp;Keczp:Reawarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9op9qgwaoarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9ogopmwDKYqk8AExm35Ps8E8Fp9qpkbbadaDakp9oawaopmbezHdiOAlvCXorQLp9qpkbbadcafhdavclfgvax6mbkkaxae9pmbaiaeciGgvcitgdfcbcaad9R;8kbaiabaxcitfglad;8qbbdnavTmbaiaipblzgopxbbbbbbFFbbbbbbFFgkp9oaipblbgDaopmlvorxmPsCXQL358E8FpxFubbFubbFubbFubbp9op;6eaDaopmbediwDqkzHOAKY8AEgoczp:Sep;6egrp;Geaoczp:Reczp:Sep;6egwp;Gep;Kep;Legopxb;:FSb;:FSb;:FSb;:FSawaopxbbbbbbbbbbbbbbbbp:2egqawpxbbbjbbbjbbbjbbbjgmp9op9rp;Kegwawp;Meaoaop;Mearaqaramp9op9rp;Kegoaop;Mep;Kep;Kep;Jep;Negrp;Mepxbbn0bbn0bbn0bbn0gqp;Keczp:Reawarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9op9qgwaoarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9ogopmwDKYqk8AExm35Ps8E8Fp9qpklzaiaDakp9oawaopmbezHdiOAlvCXorQLp9qpklbkalaiad;8qbbkk;4wllue97euv978Jjjjjbc8W9Rhidnaec98GglTmbcbhvabhoinaiaopbbbgraoczfgwpbbbgDpmlvorxmPsCXQL358E8Fgqczp:Segkclp:RepklbaopxbbjZbbjZbbjZbbjZpx;Zl81Z;Zl81Z;Zl81Z;Zl81Zakpxibbbibbbibbbibbbp9qp;6ep;NegkaraDpmbediwDqkzHOAKY8AEgrczp:Reczp:Sep;6ep;MegDaDp;Meakarczp:Sep;6ep;Megxaxp;Meakaqczp:Reczp:Sep;6ep;Megqaqp;Mep;Kep;Kep;Lepxbbbbbbbbbbbbbbbbp:4ep;Jepxb;:FSb;:FSb;:FSb;:FSgkp;Mepxbbn0bbn0bbn0bbn0grp;KepxFFbbFFbbFFbbFFbbgmp9oaxakp;Mearp;Keczp:Rep9qgxaqakp;Mearp;Keczp:ReaDakp;Mearp;Keamp9op9qgkpmbezHdiOAlvCXorQLgrp5baipblbpEb:T:j83ibaocwfarp5eaipblbpEe:T:j83ibawaxakpmwDKYqk8AExm35Ps8E8Fgkp5baipblbpEd:T:j83ibaocKfakp5eaipblbpEi:T:j83ibaocafhoavclfgval6mbkkdnalae9pmbaiaeciGgvcitgofcbcaao9R;8kbaiabalcitfgwao;8qbbdnavTmbaiaipblbgraipblzgDpmlvorxmPsCXQL358E8Fgqczp:Segkclp:RepklaaipxbbjZbbjZbbjZbbjZpx;Zl81Z;Zl81Z;Zl81Z;Zl81Zakpxibbbibbbibbbibbbp9qp;6ep;NegkaraDpmbediwDqkzHOAKY8AEgrczp:Reczp:Sep;6ep;MegDaDp;Meakarczp:Sep;6ep;Megxaxp;Meakaqczp:Reczp:Sep;6ep;Megqaqp;Mep;Kep;Kep;Lepxbbbbbbbbbbbbbbbbp:4ep;Jepxb;:FSb;:FSb;:FSb;:FSgkp;Mepxbbn0bbn0bbn0bbn0grp;KepxFFbbFFbbFFbbFFbbgmp9oaxakp;Mearp;Keczp:Rep9qgxaqakp;Mearp;Keczp:ReaDakp;Mearp;Keamp9op9qgkpmbezHdiOAlvCXorQLgrp5baipblapEb:T:j83ibaiarp5eaipblapEe:T:j83iwaiaxakpmwDKYqk8AExm35Ps8E8Fgkp5baipblapEd:T:j83izaiakp5eaipblapEi:T:j83iKkawaiao;8qbbkk:Pddiue978Jjjjjbc;ab9Rhidnadcd4ae2glc98GgvTmbcbhdabheinaeaepbbbgocwp:Recwp:Sep;6eaocep:SepxbbjZbbjZbbjZbbjZp:UepxbbjFbbjFbbjFbbjFp9op;Mepkbbaeczfheadclfgdav6mbkkdnaval9pmbaialciGgdcdtgeVcbc;abae9R;8kbaiabavcdtfgvae;8qbbdnadTmbaiaipblbgocwp:Recwp:Sep;6eaocep:SepxbbjZbbjZbbjZbbjZp:UepxbbjFbbjFbbjFbbjFp9op;Mepklbkavaiae;8qbbkk9teiucbcbydj1jjbgeabcifc98GfgbBdj1jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaikkkebcjwklz9Tbb":"b9H79Tebbbe8Fv9Gbb9Gvuuuuueu9Giuuub9Geueu9Giuuueuikqbeeedddillviebeoweuec:q;iekr;leDo9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bb8A9TW79O9V9Wt9F9KW9J9V9KW9wWVtW949c919M9MWVbeY9TW79O9V9Wt9F9KW9J9V9KW69U9KW949c919M9MWVbdE9TW79O9V9Wt9F9KW9J9V9KW69U9KW949tWG91W9U9JWbiL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9p9JtblK9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9r919HtbvL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWVT949Wbol79IV9Rbrq:P8Yqdbk;3sezu8Jjjjjbcj;eb9Rgv8Kjjjjbc9:hodnadcefal0mbcuhoaiRbbc:Ge9hmbavaialfgrad9Radz1jjjbhwcj;abad9UhoaicefhldnadTmbaoc;WFbGgocjdaocjd6EhDcbhqinaqae9pmeaDaeaq9RaqaDfae6Egkcsfgocl4cifcd4hxdndndndnaoc9WGgmTmbcbhPcehsawcjdfhzalhHinaraH9Rax6midnaraHaxfgl9RcK6mbczhoinawcj;cbfaogifgoc9WfhOdndndndndnaHaic9WfgAco4fRbbaAci4coG4ciGPlbedibkaO9cb83ibaOcwf9cb83ibxikaOalRblalRbbgAco4gCaCciSgCE86bbaocGfalclfaCfgORbbaAcl4ciGgCaCciSgCE86bbaocVfaOaCfgORbbaAcd4ciGgCaCciSgCE86bbaoc7faOaCfgORbbaAciGgAaAciSgAE86bbaoctfaOaAfgARbbalRbegOco4gCaCciSgCE86bbaoc91faAaCfgARbbaOcl4ciGgCaCciSgCE86bbaoc4faAaCfgARbbaOcd4ciGgCaCciSgCE86bbaoc93faAaCfgARbbaOciGgOaOciSgOE86bbaoc94faAaOfgARbbalRbdgOco4gCaCciSgCE86bbaoc95faAaCfgARbbaOcl4ciGgCaCciSgCE86bbaoc96faAaCfgARbbaOcd4ciGgCaCciSgCE86bbaoc97faAaCfgARbbaOciGgOaOciSgOE86bbaoc98faAaOfgORbbalRbiglco4gAaAciSgAE86bbaoc99faOaAfgORbbalcl4ciGgAaAciSgAE86bbaoc9:faOaAfgORbbalcd4ciGgAaAciSgAE86bbaocufaOaAfgoRbbalciGglalciSglE86bbaoalfhlxdkaOalRbwalRbbgAcl4gCaCcsSgCE86bbaocGfalcwfaCfgORbbaAcsGgAaAcsSgAE86bbaocVfaOaAfgORbbalRbegAcl4gCaCcsSgCE86bbaoc7faOaCfgORbbaAcsGgAaAcsSgAE86bbaoctfaOaAfgORbbalRbdgAcl4gCaCcsSgCE86bbaoc91faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc4faOaAfgORbbalRbigAcl4gCaCcsSgCE86bbaoc93faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc94faOaAfgORbbalRblgAcl4gCaCcsSgCE86bbaoc95faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc96faOaAfgORbbalRbvgAcl4gCaCcsSgCE86bbaoc97faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc98faOaAfgORbbalRbogAcl4gCaCcsSgCE86bbaoc99faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc9:faOaAfgORbbalRbrglcl4gAaAcsSgAE86bbaocufaOaAfgoRbbalcsGglalcsSglE86bbaoalfhlxekaOal8Pbb83bbaOcwfalcwf8Pbb83bbalczfhlkdnaiam9pmbaiczfhoaral9RcL0mekkaiam6mialTmidnakTmbawaPfRbbhOcbhoazhiinaiawcj;cbfaofRbbgAce4cbaAceG9R7aOfgO86bbaiadfhiaocefgoak9hmbkkazcefhzaPcefgPad6hsalhHaPad9hmexvkkcbhlasceGmdxikalaxad2fhCdnakTmbcbhHcehsawcjdfhminaral9Rax6mialTmdalaxfhlawaHfRbbhOcbhoamhiinaiawcj;cbfaofRbbgAce4cbaAceG9R7aOfgO86bbaiadfhiaocefgoak9hmbkamcefhmaHcefgHad6hsaHad9hmbkaChlxikcbhocehsinaral9Rax6mdalTmealaxfhlaocefgoad6hsadao9hmbkaChlxdkcbhlasceGTmekc9:hoxikabaqad2fawcjdfakad2z1jjjb8Aawawcjdfakcufad2fadz1jjjb8Aakaqfhqalmbkc9:hoxekcbc99aral9Radcaadca0ESEhokavcj;ebf8Kjjjjbaok;yzeHu8Jjjjjbc;ae9Rgv8Kjjjjbc9:hodnaeci9UgrcHfal0mbcuhoaiRbbgwc;WeGc;Ge9hmbawcsGgDce0mbavc;abfcFecjez:jjjjb8AavcUf9cu83ibavc8Wf9cu83ibavcyf9cu83ibavcaf9cu83ibavcKf9cu83ibavczf9cu83ibav9cu83iwav9cu83ibaialfc9WfhqaicefgwarfhodnaeTmbcmcsaDceSEhkcbhxcbhmcbhDcbhicbhlindnaoaq9nmbc9:hoxikdndnawRbbgrc;Ve0mbavc;abfalarcl4cu7fcsGcitfgPydlhsaPydbhzdnarcsGgPak9pmbavaiarcu7fcsGcdtfydbaxaPEhraPThPdndnadcd9hmbabaDcetfgHaz87ebaHcdfas87ebaHclfar87ebxekabaDcdtfgHazBdbaHclfasBdbaHcwfarBdbkaxaPfhxavc;abfalcitfgHarBdbaHasBdlavaicdtfarBdbavc;abfalcefcsGglcitfgHazBdbaHarBdlaiaPfhialcefhlxdkdndnaPcsSmbamaPfaPc987fcefhmxekaocefhrao8SbbgPcFeGhHdndnaPcu9mmbarhoxekaocvfhoaHcFbGhHcrhPdninar8SbbgOcFbGaPtaHVhHaOcu9kmearcefhraPcrfgPc8J9hmbxdkkarcefhokaHce4cbaHceG9R7amfhmkdndnadcd9hmbabaDcetfgraz87ebarcdfas87ebarclfam87ebxekabaDcdtfgrazBdbarclfasBdbarcwfamBdbkavc;abfalcitfgramBdbarasBdlavaicdtfamBdbavc;abfalcefcsGglcitfgrazBdbaramBdlaicefhialcefhlxekdnarcpe0mbaxcefgOavaiaqarcsGfRbbgPcl49RcsGcdtfydbaPcz6gHEhravaiaP9RcsGcdtfydbaOaHfgsaPcsGgOEhPaOThOdndnadcd9hmbabaDcetfgzax87ebazcdfar87ebazclfaP87ebxekabaDcdtfgzaxBdbazclfarBdbazcwfaPBdbkavaicdtfaxBdbavc;abfalcitfgzarBdbazaxBdlavaicefgicsGcdtfarBdbavc;abfalcefcsGcitfgzaPBdbazarBdlavaiaHfcsGgicdtfaPBdbavc;abfalcdfcsGglcitfgraxBdbaraPBdlalcefhlaiaOfhiasaOfhxxekaxcbaoRbbgzEgAarc;:eSgrfhsazcsGhCazcl4hXdndnazcs0mbascefhOxekashOavaiaX9RcsGcdtfydbhskdndnaCmbaOcefhxxekaOhxavaiaz9RcsGcdtfydbhOkdndnarTmbaocefhrxekaocdfhrao8SbegHcFeGhPdnaHcu9kmbaocofhAaPcFbGhPcrhodninar8SbbgHcFbGaotaPVhPaHcu9kmearcefhraocrfgoc8J9hmbkaAhrxekarcefhrkaPce4cbaPceG9R7amfgmhAkdndnaXcsSmbarhPxekarcefhPar8SbbgocFeGhHdnaocu9kmbarcvfhsaHcFbGhHcrhodninaP8SbbgrcFbGaotaHVhHarcu9kmeaPcefhPaocrfgoc8J9hmbkashPxekaPcefhPkaHce4cbaHceG9R7amfgmhskdndnaCcsSmbaPhoxekaPcefhoaP8SbbgrcFeGhHdnarcu9kmbaPcvfhOaHcFbGhHcrhrdninao8SbbgPcFbGartaHVhHaPcu9kmeaocefhoarcrfgrc8J9hmbkaOhoxekaocefhokaHce4cbaHceG9R7amfgmhOkdndnadcd9hmbabaDcetfgraA87ebarcdfas87ebarclfaO87ebxekabaDcdtfgraABdbarclfasBdbarcwfaOBdbkavc;abfalcitfgrasBdbaraABdlavaicdtfaABdbavc;abfalcefcsGcitfgraOBdbarasBdlavaicefgicsGcdtfasBdbavc;abfalcdfcsGcitfgraABdbaraOBdlavaiazcz6aXcsSVfgicsGcdtfaOBdbaiaCTaCcsSVfhialcifhlkawcefhwalcsGhlaicsGhiaDcifgDae6mbkkcbc99aoaqSEhokavc;aef8Kjjjjbaok:llevu8Jjjjjbcz9Rhvc9:hodnaecvfal0mbcuhoaiRbbc;:eGc;qe9hmbav9cb83iwaicefhraialfc98fhwdnaeTmbdnadcdSmbcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcdtfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfglBdbaoalBdbaDcefgDae9hmbxdkkcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcetfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfgl87ebaoalBdbaDcefgDae9hmbkkcbc99arawSEhokaok:Lvoeue99dud99eud99dndnadcl9hmbaeTmeindndnabcdfgd8Sbb:Yab8Sbbgi:Ygl:l:tabcefgv8Sbbgo:Ygr:l:tgwJbb;:9cawawNJbbbbawawJbbbb9GgDEgq:mgkaqaicb9iEalMgwawNakaqaocb9iEarMgqaqNMM:r:vglNJbbbZJbbb:;aDEMgr:lJbbb9p9DTmbar:Ohixekcjjjj94hikadai86bbdndnaqalNJbbbZJbbb:;aqJbbbb9GEMgq:lJbbb9p9DTmbaq:Ohdxekcjjjj94hdkavad86bbdndnawalNJbbbZJbbb:;awJbbbb9GEMgw:lJbbb9p9DTmbaw:Ohdxekcjjjj94hdkabad86bbabclfhbaecufgembxdkkaeTmbindndnabclfgd8Ueb:Yab8Uebgi:Ygl:l:tabcdfgv8Uebgo:Ygr:l:tgwJb;:FSawawNJbbbbawawJbbbb9GgDEgq:mgkaqaicb9iEalMgwawNakaqaocb9iEarMgqaqNMM:r:vglNJbbbZJbbb:;aDEMgr:lJbbb9p9DTmbar:Ohixekcjjjj94hikadai87ebdndnaqalNJbbbZJbbb:;aqJbbbb9GEMgq:lJbbb9p9DTmbaq:Ohdxekcjjjj94hdkavad87ebdndnawalNJbbbZJbbb:;awJbbbb9GEMgw:lJbbb9p9DTmbaw:Ohdxekcjjjj94hdkabad87ebabcwfhbaecufgembkkk;siliui99iue99dnaeTmbcbhiabhlindndnJ;Zl81Zalcof8UebgvciV:Y:vgoal8Ueb:YNgrJb;:FSNJbbbZJbbb:;arJbbbb9GEMgw:lJbbb9p9DTmbaw:OhDxekcjjjj94hDkalclf8Uebhqalcdf8UebhkabavcefciGaiVcetfaD87ebdndnaoak:YNgwJb;:FSNJbbbZJbbb:;awJbbbb9GEMgx:lJbbb9p9DTmbax:Ohkxekcjjjj94hkkabavcdfciGaiVcetfak87ebdndnaoaq:YNgoJb;:FSNJbbbZJbbb:;aoJbbbb9GEMgx:lJbbb9p9DTmbax:Ohqxekcjjjj94hqkabavcufciGaiVcetfaq87ebdndnJbbjZararN:tawawN:taoaoN:tgrJbbbbarJbbbb9GE:rJb;:FSNJbbbZMgr:lJbbb9p9DTmbar:Ohqxekcjjjj94hqkabavciGaiVcetfaq87ebalcwfhlaiclfhiaecufgembkkk9mbdnadcd4ae2geTmbinababydbgdcwtcw91:Yadce91cjjj;8ifcjjj98G::NUdbabclfhbaecufgembkkk9teiucbcbydj1jjbgeabcifc98GfgbBdj1jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaik;LeeeudndnaeabVciGTmbabhixekdndnadcz9pmbabhixekabhiinaiaeydbBdbaiclfaeclfydbBdbaicwfaecwfydbBdbaicxfaecxfydbBdbaiczfhiaeczfheadc9Wfgdcs0mbkkadcl6mbinaiaeydbBdbaeclfheaiclfhiadc98fgdci0mbkkdnadTmbinaiaeRbb86bbaicefhiaecefheadcufgdmbkkabk;aeedudndnabciGTmbabhixekaecFeGc:b:c:ew2hldndnadcz9pmbabhixekabhiinaialBdbaicxfalBdbaicwfalBdbaiclfalBdbaiczfhiadc9Wfgdcs0mbkkadcl6mbinaialBdbaiclfhiadc98fgdci0mbkkdnadTmbinaiae86bbaicefhiadcufgdmbkkabkkkebcjwklz9Kbb",s=WebAssembly.instantiate(a(n),{}).then((function(e){(i=e.instance).exports.__wasm_call_ctors()}));function a(e){for(var i=new Uint8Array(e.length),n=0;n<e.length;++n){var s=e.charCodeAt(n);i[n]=s>96?s-97:s>64?s-39:s+4}var a=0;for(n=0;n<e.length;++n)i[a++]=i[n]<60?t[i[n]]:64*(i[n]-60)+i[++n];return i.buffer.slice(0,a)}function r(e,t,n,s,a,r){var o=i.exports.sbrk,l=n+3&-4,c=o(l*s),d=o(a.length),h=new Uint8Array(i.exports.memory.buffer);h.set(a,d);var u=e(c,n,s,d,a.length);if(0==u&&r&&r(c,l,s),t.set(h.subarray(c,c+n*s)),o(c-o(0)),0!=u)throw new Error("Malformed buffer data: "+u)}var o={NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},l={ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"},c=[],d=0;function h(e){var t={object:new Worker(e),pending:0,requests:{}};return t.object.onmessage=function(e){var i=e.data;t.pending-=i.count,t.requests[i.id][i.action](i.value),delete t.requests[i.id]},t}function u(e){for(var t="var instance; var ready = WebAssembly.instantiate(new Uint8Array(["+new Uint8Array(a(n))+"]), {}).then(function(result) { instance = result.instance; instance.exports.__wasm_call_ctors(); });self.onmessage = workerProcess;"+r.toString()+p.toString(),i=new Blob([t],{type:"text/javascript"}),s=URL.createObjectURL(i),o=0;o<e;++o)c[o]=h(s);URL.revokeObjectURL(s)}function p(e){s.then((function(){var t=e.data;try{var n=new Uint8Array(t.count*t.size);r(i.exports[t.mode],n,t.count,t.size,t.source,i.exports[t.filter]),self.postMessage({id:t.id,count:t.count,action:"resolve",value:n},[n.buffer])}catch(e){self.postMessage({id:t.id,count:t.count,action:"reject",value:e})}}))}return{ready:s,supported:!0,useWorkers:function(e){u(e)},decodeVertexBuffer:function(e,t,n,s,a){r(i.exports.meshopt_decodeVertexBuffer,e,t,n,s,i.exports[o[a]])},decodeIndexBuffer:function(e,t,n,s){r(i.exports.meshopt_decodeIndexBuffer,e,t,n,s)},decodeIndexSequence:function(e,t,n,s){r(i.exports.meshopt_decodeIndexSequence,e,t,n,s)},decodeGltfBuffer:function(e,t,n,s,a,c){r(i.exports[l[a]],e,t,n,s,i.exports[o[c]])},decodeGltfBufferAsync:function(e,t,n,a,h){return c.length>0?function(e,t,i,n,s){for(var a=c[0],r=1;r<c.length;++r)c[r].pending<a.pending&&(a=c[r]);return new Promise((function(r,o){var l=new Uint8Array(i),c=d++;a.pending+=e,a.requests[c]={resolve:r,reject:o},a.object.postMessage({id:c,count:e,size:t,source:l,mode:n,filter:s},[l.buffer])}))}(e,t,n,l[a],o[h]):s.then((function(){var s=new Uint8Array(e*t);return r(i.exports[l[a]],s,e,t,n,i.exports[o[h]]),s}))}}}()},function(e,t,i){"use strict";i.r(t),i.d(t,"Water",(function(){return s}));var n=i(0);class s extends n.Mesh{constructor(e,t={}){super(e),this.isWater=!0;const i=this,s=void 0!==t.textureWidth?t.textureWidth:512,a=void 0!==t.textureHeight?t.textureHeight:512,r=void 0!==t.clipBias?t.clipBias:0,o=void 0!==t.alpha?t.alpha:1,l=void 0!==t.time?t.time:0,c=void 0!==t.waterNormals?t.waterNormals:null,d=void 0!==t.sunDirection?t.sunDirection:new n.Vector3(.70707,.70707,0),h=new n.Color(void 0!==t.sunColor?t.sunColor:16777215),u=new n.Color(void 0!==t.waterColor?t.waterColor:8355711),p=void 0!==t.eye?t.eye:new n.Vector3(0,0,0),f=void 0!==t.distortionScale?t.distortionScale:20,m=void 0!==t.side?t.side:n.FrontSide,g=void 0!==t.fog&&t.fog,v=new n.Plane,y=new n.Vector3,b=new n.Vector3,w=new n.Vector3,x=new n.Matrix4,S=new n.Vector3(0,0,-1),M=new n.Vector4,k=new n.Vector3,_=new n.Vector3,T=new n.Vector4,C=new n.Matrix4,I=new n.PerspectiveCamera,A=new n.WebGLRenderTarget(s,a),R={uniforms:n.UniformsUtils.merge([n.UniformsLib.fog,n.UniformsLib.lights,{normalSampler:{value:null},mirrorSampler:{value:null},alpha:{value:1},time:{value:0},size:{value:1},distortionScale:{value:20},textureMatrix:{value:new n.Matrix4},sunColor:{value:new n.Color(8355711)},sunDirection:{value:new n.Vector3(.70707,.70707,0)},eye:{value:new n.Vector3},waterColor:{value:new n.Color(5592405)}}]),vertexShader:"\n\t\t\t\tuniform mat4 textureMatrix;\n\t\t\t\tuniform float time;\n\n\t\t\t\tvarying vec4 mirrorCoord;\n\t\t\t\tvarying vec4 worldPosition;\n\n\t\t\t\t#include <common>\n\t\t\t\t#include <fog_pars_vertex>\n\t\t\t\t#include <shadowmap_pars_vertex>\n\t\t\t\t#include <logdepthbuf_pars_vertex>\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tmirrorCoord = modelMatrix * vec4( position, 1.0 );\n\t\t\t\t\tworldPosition = mirrorCoord.xyzw;\n\t\t\t\t\tmirrorCoord = textureMatrix * mirrorCoord;\n\t\t\t\t\tvec4 mvPosition =  modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t\tgl_Position = projectionMatrix * mvPosition;\n\n\t\t\t\t#include <beginnormal_vertex>\n\t\t\t\t#include <defaultnormal_vertex>\n\t\t\t\t#include <logdepthbuf_vertex>\n\t\t\t\t#include <fog_vertex>\n\t\t\t\t#include <shadowmap_vertex>\n\t\t\t}",fragmentShader:"\n\t\t\t\tuniform sampler2D mirrorSampler;\n\t\t\t\tuniform float alpha;\n\t\t\t\tuniform float time;\n\t\t\t\tuniform float size;\n\t\t\t\tuniform float distortionScale;\n\t\t\t\tuniform sampler2D normalSampler;\n\t\t\t\tuniform vec3 sunColor;\n\t\t\t\tuniform vec3 sunDirection;\n\t\t\t\tuniform vec3 eye;\n\t\t\t\tuniform vec3 waterColor;\n\n\t\t\t\tvarying vec4 mirrorCoord;\n\t\t\t\tvarying vec4 worldPosition;\n\n\t\t\t\tvec4 getNoise( vec2 uv ) {\n\t\t\t\t\tvec2 uv0 = ( uv / 103.0 ) + vec2(time / 17.0, time / 29.0);\n\t\t\t\t\tvec2 uv1 = uv / 107.0-vec2( time / -19.0, time / 31.0 );\n\t\t\t\t\tvec2 uv2 = uv / vec2( 8907.0, 9803.0 ) + vec2( time / 101.0, time / 97.0 );\n\t\t\t\t\tvec2 uv3 = uv / vec2( 1091.0, 1027.0 ) - vec2( time / 109.0, time / -113.0 );\n\t\t\t\t\tvec4 noise = texture2D( normalSampler, uv0 ) +\n\t\t\t\t\t\ttexture2D( normalSampler, uv1 ) +\n\t\t\t\t\t\ttexture2D( normalSampler, uv2 ) +\n\t\t\t\t\t\ttexture2D( normalSampler, uv3 );\n\t\t\t\t\treturn noise * 0.5 - 1.0;\n\t\t\t\t}\n\n\t\t\t\tvoid sunLight( const vec3 surfaceNormal, const vec3 eyeDirection, float shiny, float spec, float diffuse, inout vec3 diffuseColor, inout vec3 specularColor ) {\n\t\t\t\t\tvec3 reflection = normalize( reflect( -sunDirection, surfaceNormal ) );\n\t\t\t\t\tfloat direction = max( 0.0, dot( eyeDirection, reflection ) );\n\t\t\t\t\tspecularColor += pow( direction, shiny ) * sunColor * spec;\n\t\t\t\t\tdiffuseColor += max( dot( sunDirection, surfaceNormal ), 0.0 ) * sunColor * diffuse;\n\t\t\t\t}\n\n\t\t\t\t#include <common>\n\t\t\t\t#include <packing>\n\t\t\t\t#include <bsdfs>\n\t\t\t\t#include <fog_pars_fragment>\n\t\t\t\t#include <logdepthbuf_pars_fragment>\n\t\t\t\t#include <lights_pars_begin>\n\t\t\t\t#include <shadowmap_pars_fragment>\n\t\t\t\t#include <shadowmask_pars_fragment>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\t#include <logdepthbuf_fragment>\n\t\t\t\t\tvec4 noise = getNoise( worldPosition.xz * size );\n\t\t\t\t\tvec3 surfaceNormal = normalize( noise.xzy * vec3( 1.5, 1.0, 1.5 ) );\n\n\t\t\t\t\tvec3 diffuseLight = vec3(0.0);\n\t\t\t\t\tvec3 specularLight = vec3(0.0);\n\n\t\t\t\t\tvec3 worldToEye = eye-worldPosition.xyz;\n\t\t\t\t\tvec3 eyeDirection = normalize( worldToEye );\n\t\t\t\t\tsunLight( surfaceNormal, eyeDirection, 100.0, 2.0, 0.5, diffuseLight, specularLight );\n\n\t\t\t\t\tfloat distance = length(worldToEye);\n\n\t\t\t\t\tvec2 distortion = surfaceNormal.xz * ( 0.001 + 1.0 / distance ) * distortionScale;\n\t\t\t\t\tvec3 reflectionSample = vec3( texture2D( mirrorSampler, mirrorCoord.xy / mirrorCoord.w + distortion ) );\n\n\t\t\t\t\tfloat theta = max( dot( eyeDirection, surfaceNormal ), 0.0 );\n\t\t\t\t\tfloat rf0 = 0.3;\n\t\t\t\t\tfloat reflectance = rf0 + ( 1.0 - rf0 ) * pow( ( 1.0 - theta ), 5.0 );\n\t\t\t\t\tvec3 scatter = max( 0.0, dot( surfaceNormal, eyeDirection ) ) * waterColor;\n\t\t\t\t\tvec3 albedo = mix( ( sunColor * diffuseLight * 0.3 + scatter ) * getShadowMask(), ( vec3( 0.1 ) + reflectionSample * 0.9 + reflectionSample * specularLight ), reflectance);\n\t\t\t\t\tvec3 outgoingLight = albedo;\n\t\t\t\t\tgl_FragColor = vec4( outgoingLight, alpha );\n\n\t\t\t\t\t#include <tonemapping_fragment>\n\t\t\t\t\t#include <fog_fragment>\n\t\t\t\t}"},P=new n.ShaderMaterial({fragmentShader:R.fragmentShader,vertexShader:R.vertexShader,uniforms:n.UniformsUtils.clone(R.uniforms),lights:!0,side:m,fog:g});P.uniforms.mirrorSampler.value=A.texture,P.uniforms.textureMatrix.value=C,P.uniforms.alpha.value=o,P.uniforms.time.value=l,P.uniforms.normalSampler.value=c,P.uniforms.sunColor.value=h,P.uniforms.waterColor.value=u,P.uniforms.sunDirection.value=d,P.uniforms.distortionScale.value=f,P.uniforms.eye.value=p,i.material=P,i.onBeforeRender=function(e,t,n){if(b.setFromMatrixPosition(i.matrixWorld),w.setFromMatrixPosition(n.matrixWorld),x.extractRotation(i.matrixWorld),y.set(0,0,1),y.applyMatrix4(x),k.subVectors(b,w),k.dot(y)>0)return;k.reflect(y).negate(),k.add(b),x.extractRotation(n.matrixWorld),S.set(0,0,-1),S.applyMatrix4(x),S.add(w),_.subVectors(b,S),_.reflect(y).negate(),_.add(b),I.position.copy(k),I.up.set(0,1,0),I.up.applyMatrix4(x),I.up.reflect(y),I.lookAt(_),I.far=n.far,I.updateMatrixWorld(),I.projectionMatrix.copy(n.projectionMatrix),C.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),C.multiply(I.projectionMatrix),C.multiply(I.matrixWorldInverse),v.setFromNormalAndCoplanarPoint(y,b),v.applyMatrix4(I.matrixWorldInverse),M.set(v.normal.x,v.normal.y,v.normal.z,v.constant);const s=I.projectionMatrix;T.x=(Math.sign(M.x)+s.elements[8])/s.elements[0],T.y=(Math.sign(M.y)+s.elements[9])/s.elements[5],T.z=-1,T.w=(1+s.elements[10])/s.elements[14],M.multiplyScalar(2/M.dot(T)),s.elements[2]=M.x,s.elements[6]=M.y,s.elements[10]=M.z+1-r,s.elements[14]=M.w,p.setFromMatrixPosition(n.matrixWorld);const a=e.getRenderTarget(),o=e.xr.enabled,l=e.shadowMap.autoUpdate;i.visible=!1,e.xr.enabled=!1,e.shadowMap.autoUpdate=!1,e.setRenderTarget(A),e.state.buffers.depth.setMask(!0),!1===e.autoClear&&e.clear(),e.render(t,I),i.visible=!0,e.xr.enabled=o,e.shadowMap.autoUpdate=l,e.setRenderTarget(a);const c=n.viewport;void 0!==c&&e.state.viewport(c)}}}},function(e,t){e.exports=[{name:"Rainbow Hex",id:0,code:"\n\t#define c30 0.86602540378\n\t#define hm  1.33333333333\n\t#define grid 16.0\n\t#define smooth 0.02\n\t#define timeScale 0.1\n\tvec2 hex(vec2 v){\n\t\tfloat yc = abs(mod(v.x + floor((v.y*hm + 0.5))*(c30 / 2.0),c30) / c30 - 0.5);\n\t\tfloat y = floor(v.y*hm + yc);\n\t\tfloat x = floor(v.x/c30 + 0.5 + fract(y /  2.0))- fract(y / 2.0);\n\t\treturn vec2(x*c30,y /hm + 1.0/(hm * 4.0));\n\t}\n\tvoid mainImage(out vec4 fragColor, in vec2 fragCoord) {\n\t\tfloat wave =  texture(iChannel0, vec2(0.0,1.0)).x;\n\t\tfloat wave2 = texture(iChannel0, vec2(0.0,.1)).x;\n\t\tvec2 uv = fragCoord.xy / vec2(iResolution.y,iResolution.y);\n\t  \tuv.x -= .5;\n\t\tfloat rt = iTime * timeScale;\n\t\tvec2 gv = hex(uv*grid)/grid;\n\t\tvec2 mv = gv - 0.5;\n\t\tvec2 rv = vec2(((atan(mv.x,mv.y)/3.141526) + cos(iTime + wave2)) / 2.0, length(mv * sin(iTime + wave2)));\n\t\tfloat fv = fract((rv.x- rt) * cos(gv.x /20.0) * 2.0 + rv.y * 2.0);\n\t\tfloat dist = length(uv - gv) * grid;\n\t\tfloat dist2 = 1.0 - smoothstep(-smooth,0.0,dist - c30/2.);\n\t\tdist += fv + wave2;\n\t\tdist += cos(wave / 2.);\n\t\tdist = smoothstep(0.5,0.5 + smooth,fract(dist));\n\t\tfloat finCol = float(0.5);\n\t\tfinCol = mix(finCol, dist, dist2);\n\t\tfragColor = vec4(finCol) + vec4(cos(iTime + dist2 + wave2) + wave2, sin(fv * wave) * .5, sin(uv.x * 3.),  1.0);\n\t}"},{name:"Heart",id:1,code:"\n\t#define POINT_COUNT 8\n\n\tvec2 points[POINT_COUNT];\n\tconst float speed = -0.5;\n\tconst float len = 0.25;\n\tconst float scale = 0.012;\n\tfloat intensity = 1.3;\n\tfloat radius = 0.015;\n\tfloat sdBezier(vec2 pos, vec2 A, vec2 B, vec2 C){\n\t\tvec2 a = B - A;\n\t\tvec2 b = A - 2.0*B + C;\n\t\tvec2 c = a * 2.0;\n\t\tvec2 d = A - pos;\n\t\tfloat kk = 1.0 / dot(b,b);\n\t\tfloat kx = kk * dot(a,b);\n\t\tfloat ky = kk * (2.0*dot(a,a)+dot(d,b)) / 3.0;\n\t\tfloat kz = kk * dot(d,a);\n\t\tfloat res = 0.0;\n\t\tfloat p = ky - kx*kx;\n\t\tfloat p3 = p*p*p;\n\t\tfloat q = kx*(2.0*kx*kx - 3.0*ky) + kz;\n\t\tfloat h = q*q + 4.0*p3;\n\t\tif(h >= 0.0){\n\t\t\th = sqrt(h);\n\t\t\tvec2 x = (vec2(h, -h) - q) / 2.0;\n\t\t\tvec2 uv = sign(x)*pow(abs(x), vec2(1.0/3.0));\n\t\t\tfloat t = uv.x + uv.y - kx;\n\t\t\tt = clamp( t, 0.0, 1.0 );\n\t\t\tvec2 qos = d + (c + b*t)*t;\n\t\t\tres = length(qos);\n\t\t}else{\n\t\t\tfloat z = sqrt(-p);\n\t\t\tfloat v = acos( q/(p*z*2.0) ) / 3.0;\n\t\t\tfloat m = cos(v);\n\t\t\tfloat n = sin(v)*1.732050808;\n\t\t\tvec3 t = vec3(m + m, -n - m, n - m) * z - kx;\n\t\t\tt = clamp( t, 0.0, 1.0 );\n\t\t\tvec2 qos = d + (c + b*t.x)*t.x;\n\t\t\tfloat dis = dot(qos,qos);\n\t\t\tres = dis;\n\t\t\tqos = d + (c + b*t.y)*t.y;\n\t\t\tdis = dot(qos,qos);\n\t\t\tres = min(res,dis);\n\t\t\tqos = d + (c + b*t.z)*t.z;\n\t\t\tdis = dot(qos,qos);\n\t\t\tres = min(res,dis);\n\t\t\tres = sqrt( res );\n\t\t}\n\t\treturn res;\n\t}\n\tvec2 getHeartPosition(float t){\n\t\treturn vec2(16.0 * sin(t) * sin(t) * sin(t),\n\t\t\t\t\t-(13.0 * cos(t) - 5.0 * cos(2.0*t)\n\t\t\t\t\t- 2.0 * cos(3.0*t) - cos(4.0*t)));\n\t}\n\tfloat getGlow(float dist, float radius, float intensity){\n\t\treturn pow(radius/dist, intensity);\n\t}\n\tfloat getSegment(float t, vec2 pos, float offset){\n\t\tfor(int i = 0; i < POINT_COUNT; i++){\n\t\t\tpoints[i] = getHeartPosition(offset + float(i)*len + fract(speed * t) * 6.28);\n\t\t}\n\t\tvec2 c = (points[0] + points[1]) / 2.0;\n\t\tvec2 c_prev;\n\t\tfloat dist = 10000.0;\n\t\tfor(int i = 0; i < POINT_COUNT-1; i++){\n\t\t\tc_prev = c;\n\t\t\tc = (points[i] + points[i+1]) / 2.0;\n\t\t\tdist = min(dist, sdBezier(pos, scale * c_prev, scale * points[i], scale * c));\n\t\t}\n\t\treturn max(0.0, dist);\n\t}\n\tvoid mainImage( out vec4 fragColor, in vec2 fragCoord ){\n\t\tvec2 uv = fragCoord/iResolution.xy;\n\t\tfloat widthHeightRatio = iResolution.x/iResolution.y;\n\t\tvec2 centre = vec2(0.5, 0.5);\n\t\tvec2 pos = centre - uv;\n\t\tpos.y /= widthHeightRatio;\n\t\tpos.y += 0.03;\n\t\tfloat t = iTime;\n\t\tfloat dist = getSegment(t, pos, 0.0);\n\t\tfloat glow = getGlow(dist, radius, intensity);\n\t\tvec3 col = vec3(0.0);\n\t\tcol += 10.0*vec3(smoothstep(0.006, 0.003, dist));\n\t\tcol += glow * vec3(1.0,0.05,0.3);\n\t\tdist = getSegment(t, pos, 3.4);\n\t\tglow = getGlow(dist, radius, intensity);\n\t\tcol += 10.0*vec3(smoothstep(0.006, 0.003, dist));\n\t\tcol += glow * vec3(0.1,0.4,1.0);\n\t\tcol = 1.0 - exp(-col);\n\t\tcol = pow(col, vec3(0.4545));\n\t\tfragColor = vec4(col,1.0);\n\t}\n\t"},{name:"Purple Plasma",id:2,code:"\n\t#define PI 3.1415926\n\n\tfloat pat(vec2 uv,float p,float q,float s,float glow)\n\t{\n\t\tfloat z = cos(q * PI * uv.x) * cos(p * PI * uv.y) + cos(q * PI * uv.y) * cos(p * PI * uv.x);\n\n\t\tz += sin(iTime*4.0 + uv.x+uv.y * s)*0.5;\t// +wobble\n\t\tfloat dist=abs(z)*(1.0/glow);\n\t\treturn dist;\n\t}\n\n\n\tvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n\t{\n\t\t   vec2 uv = (fragCoord.xy - 0.5 * iResolution.xy) / iResolution.y;\n\t\tfloat d = pat(uv, 5.0, 2.0, 35.0, 0.35);\t\t// layer1\n\t\tif (iMouse.z>0.5)\n\t\t\td *= pat(uv, 1.0, 4.0, 55.0, 0.45);\t\t// layer2\n\n\t\tvec3 col = vec3(1.25,0.45,1.25)*0.5/d;\n\t\tfragColor = vec4(col,1.0);\n\t}\n\t"},{name:"Eyes",id:3,code:"\n\t#define thick   0.04\n\t#define smooth  (16.0 / iResolution.x)\n\t#define PI\t  3.1415926535\n\t#define S(x) smoothstep(-smooth, smooth, x)\n\t#define SR(x, y) smoothstep(-smooth * y, smooth * y, x)\n\t#define scalex 13.\n\t#define scaley 13.\n\t#define scx (scalex * PI * 2.)\n\n\t//Palettes by Inigo Quilez http://www.iquilezles.org/www/articles/palettes/palettes.htm\n\tvec3 pal( in float t, in vec3 a, in vec3 b, in vec3 c, in vec3 d )\n\t{\n\t\treturn a + b*cos( 6.28318*(c*t+d) );\n\t}\n\n\tvec3 pal1(in float t){\n\t\treturn pal(t, vec3(0.5,0.5,0.5),vec3(0.5,0.5,0.5),vec3(1.0,1.0,1.0),vec3(0.0,0.33,0.67)) ;\n\t}\n\n\tfloat rand(vec3 v){\n\t\treturn fract(cos(dot(v,vec3(13.46543,67.1132,123.546123)))*43758.5453);\n\t}\n\n\tfloat rand(vec2 v){\n\t\treturn fract(sin(dot(v,vec2(5.11543,71.3177)))*43758.5453);\n\t}\n\n\tfloat rand(float v){\n\t\treturn fract(sin(v * 71.3132)*43758.5453);\n\t}\n\n\tvec2 rand2(vec2 v){\n\t\treturn vec2(\n\t\t\tfract(sin(dot(v,vec2(5.11543,71.3132)))*43758.5453),\n\t\t\tfract(sin(dot(v,vec2(7.3113,21.5723)))*31222.1234)\n\t\t\t);\n\t}\n\tvec2 rotate(vec2 st, float angle){\n\t\tfloat c = cos(angle);\n\t\tfloat s = sin(angle);\n\t\treturn mat2(c, -s, s, c) * st;\n\t}\n\tfloat smrand(float v){\n\t\tfloat vv = floor(v);\n\t\treturn mix(rand(vv),rand(vv+1.0),fract(v));\n\t}\n\n\tvec3 eye(vec2 fst, vec2 cst, vec2 mouse){\n\t\tfloat noise = rand(cst);\n\n\t\tfloat nt = iTime*2.0 * (noise + 0.8 ) +noise * 100.0;\n\t\tfloat fnt = floor(nt);\n\t\tvec2 noise2 = rand2(cst + vec2(fnt));\n\t\tvec2 noise22 = rand2(cst + vec2(fnt + 1.));\n\t\tfloat pinoise = noise2.x * PI * 2.0;\n\t\tfloat pinoise2 = noise22.x * PI * 2.0;\n\t\tfloat move = 1.0 - (cos(fract(nt)*PI)+1.0) /2.0;\n\t\tmove = pow(move,4.0);\n\n\t\tfloat eyeOpen = (sin(iTime*2.0 + noise * 100.0) + 1.0) / 2.0;\n\t\teyeOpen = 1.0 - pow(eyeOpen, 3.0);\n\t\teyeOpen = 1.0;\n\n\t\tfloat col = (sin(fst.x) + 1.)/2.0;\n\t\t//col = pow(col,0.9);\n\t\tfloat col2 = col* eyeOpen + fst.y*2.1 - 0.1;\n\t\tcol = col* eyeOpen - fst.y*2.1 - 0.1;\n\t\tfloat cs1 = min(col - 0.1, col2- 0.1);\n\t\tfloat cs2 = S(cs1);\n\t\tcol = S(min(col, col2));\n\n\t\tfloat grad = min(eyeOpen * 1., 1.);\n\t\t//float grad = min(1.0 - pow(1.0 -abs(fst.y),10.) + 0.3,1.0);\n\n\t\tvec2 loc = vec2(fract(fst.x/PI/2.0 + PI*2.0) - 0.53,fst.y*iResolution.y/iResolution.x);\n\n\t\tvec2 pin2 = mix(vec2(cos(pinoise),sin(pinoise))*((noise2.y +1.0) / 2.0),\n\t\t\t\t\t\tvec2(cos(pinoise2),sin(pinoise2))*((noise22.y +1.0) / 2.0),move);\n\t\tpin2 *= 0.25;\n\t\tpin2 =  mix(pin2, mouse, max(-0.05,0.));\n\n\t\tfloat lloc = length(loc);\n\t\tfloat irisn = mix(1.0,mix(noise2.x, noise22.x, move),0.25);\n\t\tfloat iris = length(loc - pin2 * (0.5 -lloc) );\n\t\tfloat irisWhite = length(loc - pin2 * (0.2 -lloc) );\n\t\tfloat irisDark = SR(length(loc - pin2 * (0.4 -lloc) ) - 0.05 * irisn,0.5);\n\t\tfloat irisShadow = SR(-irisWhite + 0.07,15.);\n\t\tirisWhite = SR(-irisWhite + 0.03,1.4);\n\n\t\tvec3 irisColor = irisDark *pal1( irisShadow + nt/10.0);\n\t\tirisColor = max(irisColor, irisWhite*0.9);\n\t\tvec3 baseCol = vec3(SR(-lloc+ .25,15.));\n\t\tbaseCol = baseCol + 0.25*pal1( baseCol.x + nt/10.0);\n\n\t\tvec3 finCol = mix(baseCol, irisColor, S(-iris + 0.15));\n\t\tfinCol = mix(pal1(noise + nt/10.0) * grad,finCol, cs2);\n\t\tfinCol = min(finCol, col);\n\n\t\treturn finCol;\n\t}\n\n\tvoid mainImage( out vec4 fragColor, in vec2 fragCoord ){\n\t\tvec2 st = (fragCoord.xy)/ iResolution.xy;\n\n\t\tfloat fsty = fract(st.y * scaley) - 0.5;\n\t\tfloat fsty2 = fract(st.y * scaley  + 0.5) - 0.5;\n\t\tfloat csty = floor(st.y * scaley);\n\t\tfloat csty2 = floor(st.y * scaley + 0.5);\n\t\tfloat cstx = floor(st.x * scalex);\n\t\tfloat cstx2 = floor(st.x * scalex + 0.5);\n\t\tvec2 cst = vec2(cstx,csty);\n\t\tvec2 cst2 = vec2(cstx2,csty2 + 1234.);\n\t\tvec2 fst = vec2(st.x * scx - 0.5 * PI, fsty);\n\t\tvec2 fst2 = vec2(st.x * scx + 0.5 * PI, fsty2);\n\n\n\t\tvec2 m1 = vec2((cstx + 0.5)/scalex, (csty + 0.5)/scaley);\n\t\tvec2 m2 = vec2((cstx2 + 0.5)/scalex, (csty2 + 0.5)/scaley);\n\n\t\tvec3 col = eye(fst, cst, m1);\n\t\tvec3 col2 = eye(fst2, cst2, m2);\n\t\tcol = max(col,col2);\n\t\tcol += 0.1 * (rand(fragCoord.xy/3.0 + iTime)-0.5);\n\t\t//col -= 0.1 * (rand(fragCoord.xy/3.0 + iTime + 100.0));\n\n\t\tfragColor = vec4(col, 1.0);\n\t}\n\t"},{name:"Blobs",id:4,code:"\n\t#define scale 1.2\n\tvec2 hash (in vec2 p) {\n\t  p = vec2 (dot (p, vec2 (127.1, 311.7)),\n\t\t\t\tdot (p, vec2 (269.5, 183.3)));\n\n\t  return -1. + 2.*fract (sin (p)*43758.5453123);\n\t}\n\n\tfloat noise (in vec2 p) {\n\t  const float K1 = .366025404;\n\t  const float K2 = .211324865;\n\n\t  vec2 i = floor (p + (p.x + p.y)*K1);\n\n\t  vec2 a = p - i + (i.x + i.y)*K2;\n\t  vec2 o = step (a.yx, a.xy);\n\t  vec2 b = a - o + K2;\n\t  vec2 c = a - 1. + 2.*K2;\n\n\t  vec3 h = max (.5 - vec3 (dot (a, a), dot (b, b), dot (c, c) ), .0);\n\n\t  vec3 n = h*h*h*h*vec3 (dot (a, hash (i + .0)),\n\t\t\t\t\t\t\t dot (b, hash (i + o)),\n\t\t\t\t\t\t\t dot (c, hash (i + 1.)));\n\n\t  return dot (n, vec3 (70.));\n\t}\n\n\tfloat fbm(vec2 pos, float tm)\n\t{\n\t\tvec2 offset = vec2(cos(tm), 0.0);\n\t\tfloat aggr = 0.0;\n\n\t\taggr += noise(pos);\n\t\taggr += noise(pos + offset) * 0.5;\n\t\taggr += noise(pos + offset.yx) * 0.25;\n\t\taggr += noise(pos - offset) * 0.125;\n\t\taggr += noise(pos - offset.yx) * 0.0625;\n\n\t\taggr /= 1.0 + 0.5 + 0.25 + 0.125 + 0.0625;\n\n\t\treturn (aggr * 0.5) + 0.5;\n\t}\n\n\tvec3 lightning(vec2 pos, float offset)\n\t{\n\t\tvec3 col = vec3(0.0);\n\n\t vec2 f = vec2(-iTime * 0.25 , 0.0 );\n\n\t\tfor (int i = 0; i < 3; i++)\n\t\t{\n\t\t\tfloat time = iTime +float(i);\n\t\t\tfloat d1 = abs(offset * 0.03 / (0.0 + offset - fbm((pos + f) * 3.0, time)));\n\t\t\tfloat d2 = abs(offset * 0.03 / (0.0 + offset - fbm((pos + f) * 2.0, 0.9 * time + 10.0)));\n\t\t\tcol += vec3(d1 * vec3(0.1, 0.3, 0.8));\n\t\t\tcol += vec3(d2 * vec3(0.7, 0.3, 0.5));\n\t\t}\n\n\t\treturn col;\n\t}\n\n\tvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n\t{\n\t\tvec2 uv = -1. + 2. * fragCoord / iResolution.xy;\n\t\tuv.x *= iResolution.x / iResolution.y;\n\t\tuv *= scale;\n\t\t//float dist = length(uv) - 0.25;\n\t\tfloat dist = 0.;\n\n\t\tvec3 n = lightning(uv, dist + 0.4);\n\t\tvec3 col = vec3(0.0);\n\n\t\tcol += n;\n\n\n\t\tfragColor = vec4(col, 1.0);\n\t}\n\t"},{name:"RGB Blobs",id:5,code:"\n\t#define scale 1.\n\tfloat plasma(vec2 p, float iso, float fade)\n\t{\n\t\tfloat c = 0.0;\n\t\tfor (float i=1.0; i<10.0; ++i) {\n\t\t\tfloat f1 = i / 0.6;\n\t\t\tfloat f2 = i / 0.3;\n\t\t\tfloat f3 = i / 0.7;\n\t\t\tfloat f4 = i / 0.5;\n\t\t\tfloat s1 = i / 2.0;\n\t\t\tfloat s2 = i / 4.0;\n\t\t\tfloat s3 = i / 3.0;\n\t\t\tc += sin(p.x * f1 + iTime) * s1 + sin(p.y * f2 + 0.5 * iTime) * s2 + sin(p.x * f3 + p.y * f4 - 1.5 * iTime) * s3;\n\t\t}\n\t\t//c = mod(clamp(c, -1.0, 1.0), 0.5) * 2.0;\n\t\tc = mod(c, 16.0) * 0.5 - 7.0;\n\t\tif (c < iso) {\n\t\t\treturn 0.0;\n\t\t}\n\t\telse {\n\t\t\tif (c > 0.5) c = 1.0 - c;\n\t\t\tc *= 2.0;\n\t\t\treturn c * fade;\n\t\t}\n\t}\n\n\tvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n\n\t\tvec2 pos = (( fragCoord.xy / iResolution.xy ) - vec2(0.5)) * vec2(iResolution.x / iResolution.y, 1.0);\n\t\tpos.xy *= scale;\n\n\t\tfloat c = 0.0;\n\t\tfor (float i=0.0; i<27.0; ++i)\n\t\t{\n\t\t\tfloat patazoom = mod(0.5 * iTime, 1.0);\n\t\t\tfloat zoom = 1.0 + i - patazoom;\n\t\t\tvec2 trans = vec2(sin(iTime * 0.3) * 0.5, sin(iTime * 0.4) * 0.2);\n\t\t\tc = plasma(pos * zoom + trans, 0.0, 2.0 / (1.0 + i - patazoom));\n\t\t\tif (c> 0.001) break;\n\t\t}\n\t\tfragColor = vec4(c * pos.x, c * pos.y, c * abs(pos.x + pos.y), 0.5) * 2.0;\n\n\t}\n\t"},{name:"IDK",id:6,code:"\n\t#define pi 3.14159265359\n\n\t#define float2 vec2\n\t#define float3 vec3\n\t#define float4 vec4\n\n\n\tfloat saw(float x)\n\t{\n\t\treturn abs(fract(x)-0.5)*2.0;\n\t}\n\n\tfloat dw(float2 p, float2 c, float t)\n\t{\n\t\treturn sin(length(p-c)-t);\n\t}\n\n\tfloat dw1(float2 uv)\n\t{\n\t\tfloat v=0.0;\n\t\tfloat t=iTime*2.0;\n\t\tv+=dw(uv,float2(sin(t*0.07)*30.0,cos(t*0.04)*20.0),t*1.3);\n\t\tv+=dw(uv,float2(cos(t*0.13)*30.0,sin(t*0.14)*20.0),t*1.6+1.0);\n\t\tv+=dw(uv,float2( 18,-15),t*0.7+2.0);\n\t\tv+=dw(uv,float2(-18, 15),t*1.1-1.0);\n\t\treturn v/4.0;\n\t}\n\n\tfloat fun(float x, float y)\n\t{\n\t\treturn dw1(float2(x-0.5,y-0.5)*80.0);\n\t}\n\n\tfloat3 duv(float2 uv)\n\t{\n\t\tfloat x=uv.x;\n\t\tfloat y=uv.y;\n\t\tfloat v=fun(x,y);\n\t\tfloat d=1.0/400.0;\n\t\tfloat dx=(v-fun(x+d,y))/d;\n\t\tfloat dy=(v-fun(x,y+d))/d;\n\t\tfloat a=atan(dx,dy)/pi/2.0;\n\t\treturn float3(v,0,(v*4.0+a));\n\t}\n\n\tvoid mainImage( out float4 fragColor, in float2 fragCoord )\n\t{\n\t\tfloat2 uv = fragCoord.xy/iResolution.x;\n\t\tfloat3 h=duv(uv);\n\t\tfloat sp=saw(h.z+iTime*1.3);\n\t\t//sp=(sp>0.5)?0.3:1.0;\n\t\tsp=clamp((sp-0.25)*2.0,0.5,1.0);\n\t\tfragColor = float4((h.x+0.5)*sp, (0.3+saw(h.x+0.5)*0.6)*sp, (0.6-h.x)*sp, 1.0);\n\t}\n\t"},{name:"IDK",id:7,code:"\n\tfloat pi = atan(1.0)*4.0;\n\tfloat tau = atan(1.0)*8.0;\n\n\n\n\tfloat epsilon = 1e-3;\n\tfloat infinity = 1e6;\n\n\t//Settings\n\t#define BORDER_COLOR vec3(0.05, 0.20, 1.00)\n\n\t#define BRIGHTNESS 0.004\n\t#define THICKNESS  0.002\n\n\t//Checks if a and b are approximately equal.\n\tbool ApproxEqual(float a, float b)\n\t{\n\t\treturn abs(a - b) <= epsilon;\n\t}\n\n\t//Distance to a line segment,\n\tfloat dfLine(vec2 start, vec2 end, vec2 uv, float scale)\n\t{\n\t\tstart *= scale;\n\t\tend *= scale;\n\n\t\tvec2 line = end - start;\n\t\tfloat frac = dot(uv - start,line) / dot(line,line);\n\t\treturn distance(start + line * clamp(frac, 0.0, 1.0), uv);\n\t}\n\n\n\tfloat dfBorder(vec2 uv, float scale)\n\t{\n\t\tfloat dist = infinity;\n\n\t\tvec2 pt1 = vec2(0.,2.86),\n\t\t\t pt2=vec2(1.86,2.86),\n\t\t\t pt3=vec2(2.43,4.63),\n\t\t\t pt4=vec2(3.,2.86),\n\t\t\t pt5=vec2(4.86,2.86),\n\t\t\t pt6=vec2(3.36,1.77),\n\t\t\t pt7=vec2(3.93,0.),\n\t\t\t pt8=vec2(2.43,1.10),\n\t\t\t pt9=vec2(0.93,0.),\n\t\t\t pt10=vec2(1.51,1.77);\n\n\t\tdist = min(dist, dfLine(pt1, pt2, uv, scale));\n\t\tdist = min(dist, dfLine(pt2, pt3, uv, scale));\n\t\tdist = min(dist, dfLine(pt3, pt4, uv, scale));\n\t\tdist = min(dist, dfLine(pt4, pt5, uv, scale));\n\t\tdist = min(dist, dfLine(pt5, pt6, uv, scale));\n\t\tdist = min(dist, dfLine(pt6, pt7, uv, scale));\n\t\tdist = min(dist, dfLine(pt7, pt8, uv, scale));\n\t\tdist = min(dist, dfLine(pt8, pt9, uv, scale));\n\t\tdist = min(dist, dfLine(pt9, pt10, uv, scale));\n\t\tdist = min(dist, dfLine(pt10, pt1, uv, scale));\n\n\n\t\treturn dist;\n\t}\n\n\n\tvec3 DrawStar(vec2 uv, vec3 color, float ind)\n\t{\n\t\tfloat dist = 0.0;\n\t\tfloat shade = 0.0;\n\t\tfloat scale = -ind + mod(iTime-ind,8.)*2. / 6.0;\n\t\tif(scale >= 0. )\n\t\t{\n\t\t\tvec2 offs = vec2(5.0, 4.5) * scale/2.0;\n\n\t\t\tfloat bright_bord = BRIGHTNESS * min(1.0, 1.0 - sin(0.5 * pi * 50.0) / (0.5 * pi * 1.3));\n\n\n\t\t\t//Border\n\t\t\tdist = dfBorder(uv + offs, scale);\n\n\t\t\tshade = bright_bord / max(epsilon, dist - THICKNESS);\n\n\t\treturn color * shade;\n\t\t}\n\n\t\treturn vec3(0.,0.,0.);\n\t}\n\n\tvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n\t{\n\t\tvec2 aspect = iResolution.xy / iResolution.y;\n\t\tvec2 uv = fragCoord.xy / iResolution.y - aspect/2.0;\n\n\t\tvec3 color = vec3(0);\n\n\t\tfor(float i=0.;i<20.;i++)\n\t\t{\n\t\tcolor += DrawStar(uv, vec3(0.86-mod(i,10.)*0.2,0.0,0.48+0.02*mod(i,10.)), 0.1*i);\n\t\t}\n\n\n\t\tfragColor = vec4(color , 1.0);\n\t}\n\n\t"}]},function(e,t,i){i(4);const n=i(1);e.exports=function(e,t){var s=i(141)(e),a=i(142)(e),r="lambert",o=e.ShaderLib[r].fragmentShader;o=(o=(o=(o=(o=(o="\n\t\tuniform sampler2D texture1;\n\t\tvarying vec3 vertexColor;\n\t\tvarying vec3 vertexEmissive;\n\t\tvarying float vertexOpacity;\n\t\tvarying float vertexVisible;\n\t\tvarying float vertexTex;\n\t\tvarying vec2 vertexTexOff;\n\t\tvarying float vertexAlphaTest;\n\t"+o).replace("vec4 diffuseColor = vec4( diffuse, opacity );","\n\t\tif (vertexVisible == 0.0) discard;\n\t\tvec4 diffuseColor = vec4( vertexColor, vertexOpacity );\n\t")).replace(" = emissive;"," = vertexEmissive;")).replace("#include <map_fragment>","\n\t\tif (vertexTex > 0.0) {\n\t\t\tvec4 texelColor = texture2D( texture1, vertexTexOff );\n\t\t\tdiffuseColor *= texelColor;\n\t\t}\n\t")).replace("#include <color_fragment>","")).replace("#include <alphatest_fragment>","if ( diffuseColor.a < vertexAlphaTest ) discard;");var l=e.ShaderLib[r].vertexShader;l=(l="\n\t\tattribute vec3 iOffset;\n\t\tattribute vec3 iScale;\n\t\tattribute vec4 iRotation;\n\t\tattribute vec3 iColor;\n\t\tattribute vec3 iEmissive;\n\t\tattribute vec4 iTexOff;\n\t\tattribute float iTex;\n\t\tattribute float iOpacity;\n\t\tattribute float iVisible;\n\t\tattribute float iAlphaTest;\n\t\tvarying vec3 vertexColor;\n\t\tvarying vec3 vertexEmissive;\n\t\tvarying float vertexTex;\n\t\tvarying vec2 vertexTexOff;\n\t\tvarying float vertexVisible;\n\t\tvarying float vertexOpacity;\n\t\tvarying float vertexAlphaTest;\n\n\t\tvec3 applyTRS( vec3 position, vec3 translation, vec4 quaternion, vec3 scale ) {\n\t\t\tposition *= scale;\n\t\t\tposition += 2.0 * cross( quaternion.xyz, cross( quaternion.xyz, position ) + quaternion.w * position );\n\t\t\treturn position + translation;\n\t\t}\n\t"+l).replace("#include <project_vertex>","\n\t\t// COLOR:\n\t\tvertexColor = iColor;\n\t\tvertexEmissive = iEmissive;\n\t\tvertexOpacity = iOpacity;\n\t\tvertexAlphaTest = iAlphaTest;\n\n\t\t// TEXTURE ATLASS OFFSET:\n\t\tvertexTexOff = vec2(mix(iTexOff[0], iTexOff[1], uv.x), mix(iTexOff[2], iTexOff[3], uv.y));\n\n\t\t// TEXTURE SRC:\n\t\tvertexTex = iTex;\n\n\t\t// VISIBILITY:\n\t\tvertexVisible = iVisible;\n\n\t\t// POSITION:\n\t\tvec3 vPosition = applyTRS( transformed, iOffset, iRotation, iScale );\n\t\ttransformed = vPosition;\n\t\tvec4 mvPosition = modelViewMatrix * vec4( vPosition, 1.0 );\n\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( vPosition, 1.0 );\n\t");let c=new e.BoxGeometry(1,1,1);c.translate(0,.5,0);let d=new e.PlaneGeometry(1,1,1,1);class h extends e.Mesh{constructor(t,i,n){super(),this.name="ShaderMesh",this.uniforms=e.UniformsUtils.clone(e.ShaderLib[r].uniforms),this.uniforms.texture1={type:"t",value:h.merger.texture},this.frustumCulled=!1,this.material=new e.ShaderMaterial({fragmentShader:o,vertexShader:l,uniforms:this.uniforms,lights:!0,dithering:!0,side:e.DoubleSide,fog:!0,shading:e.FlatShading,depthPacking:e.RGBADepthPacking,vertexColors:!0,transparent:!1}),this.geometry=(new e.InstancedBufferGeometry).copy(i||c),this.geometry.instanceCount=n||t.length,this.numInstances=this.geometry.instanceCount,this.iColors=new Float32Array(3*this.numInstances),this.iEmissives=new Float32Array(3*this.numInstances),this.iAlphaTests=new Float32Array(1*this.numInstances),this.iOffsets=new Float32Array(3*this.numInstances),this.iScales=new Float32Array(3*this.numInstances),this.iRotations=new Float32Array(4*this.numInstances),this.iOpacitys=new Float32Array(1*this.numInstances),this.iVisibles=new Float32Array(1*this.numInstances),this.iTexOffs=new Float32Array(4*this.numInstances),this.iTexs=new Float32Array(1*this.numInstances),this.geometry.setAttribute("iColor",new e.InstancedBufferAttribute(this.iColors,3,!1)),this.geometry.setAttribute("iEmissive",new e.InstancedBufferAttribute(this.iEmissives,3,!1)),this.geometry.setAttribute("iAlphaTest",new e.InstancedBufferAttribute(this.iAlphaTests,1,!1)),this.geometry.setAttribute("iOffset",new e.InstancedBufferAttribute(this.iOffsets,3,!1)),this.geometry.setAttribute("iScale",new e.InstancedBufferAttribute(this.iScales,3,!1)),this.geometry.setAttribute("iRotation",new e.InstancedBufferAttribute(this.iRotations,4,!1)),this.geometry.setAttribute("iOpacity",new e.InstancedBufferAttribute(this.iOpacitys,1,!1)),this.geometry.setAttribute("iVisible",new e.InstancedBufferAttribute(this.iVisibles,1,!1)),this.geometry.setAttribute("iTexOff",new e.InstancedBufferAttribute(this.iTexOffs,4,!1)),this.geometry.setAttribute("iTex",new e.InstancedBufferAttribute(this.iTexs,1,!1)),this.geometry.attributes.iVisible.setUsage(e.DynamicDrawUsage),this.objects=[];for(let e=0;e<t.length;e++)t[e].src&&h.updateTextureOffsets(t[e]),this.objects.push(new a(e,{color:this.iColors,emissive:this.iEmissives,alphaTest:this.iAlphaTests,position:this.iOffsets,scale:this.iScales,rotation:this.iRotations,opacity:this.iOpacitys,visible:this.iVisibles,textureOffset:this.iTexOffs,texture:this.iTexs},t[e]));this.castShadow=!0,this.receiveShadow=!0,this.customDepthMaterial=u}addObj(e){var t=this.objects.findIndex((e=>0==e.active));t>-1?this.objects[t]=new a(t,{color:this.iColors,emissive:this.iEmissives,alphaTest:this.iAlphaTests,position:this.iOffsets,scale:this.iScales,rotation:this.iRotations,opacity:this.iOpacitys,visible:this.iVisibles,textureOffset:this.iTexOffs,texture:this.iTexs},e):(t=this.objects.length,this.objects.push(new a(t,{color:this.iColors,emissive:this.iEmissives,alphaTest:this.iAlphaTests,position:this.iOffsets,scale:this.iScales,rotation:this.iRotations,opacity:this.iOpacitys,visible:this.iVisibles,textureOffset:this.iTexOffs,texture:this.iTexs},e))),this.geoUpdate()}geoUpdate(){this.geometry.attributes.iColor.needsUpdate=!0,this.geometry.attributes.iEmissive.needsUpdate=!0,this.geometry.attributes.iAlphaTest.needsUpdate=!0,this.geometry.attributes.iOffset.needsUpdate=!0,this.geometry.attributes.iScale.needsUpdate=!0,this.geometry.attributes.iRotation.needsUpdate=!0,this.geometry.attributes.iOpacity.needsUpdate=!0,this.geometry.attributes.iVisible.needsUpdate=!0,this.geometry.attributes.iTexOff.needsUpdate=!0,this.geometry.attributes.iTex.needsUpdate=!0}remObj(e){this.objects.filter((t=>t.uid==e)).forEach((e=>{e.dispose()})),this.geometry.attributes.iVisible.needsUpdate=!0}updateTextures(){this.objects.filter((e=>e.data.src)).forEach((e=>{h.updateTextureOffsets(e.data),e.updateTexture()})),this.geometry.attributes.iTexOff.needsUpdate=!0,this.geometry.attributes.iTex.needsUpdate=!0}clear(){for(let e=0;e<this.objects.length;e++)this.objects[e].dispose();this.geoUpdate()}clean(){this.geometry.dispose()}dispose(){this.geometry.dispose(),this.material.dispose()}}var u=new e.MeshDepthMaterial({depthPacking:e.RGBADepthPacking,alphaTest:.5,blending:e.NoBlending});return u.onBeforeCompile=e=>{e.vertexShader="\n\t\t\t#define DEPTH_PACKING 3201\n\t\t\tattribute vec3 iOffset;\n\t\t\tattribute vec3 iScale;\n\t\t\tattribute vec4 iRotation;\n\t\t\tattribute float iVisible;\n\t\t\tvarying float vertexVisible;\n\n\t\t\tvec3 applyTRS( vec3 position, vec3 translation, vec4 quaternion, vec3 scale ) {\n\t\t\t\tposition *= scale;\n\t\t\t\tposition += 2.0 * cross( quaternion.xyz, cross( quaternion.xyz, position ) + quaternion.w * position );\n\t\t\t\treturn position + translation;\n\t\t\t}\n\t\t"+e.vertexShader,e.vertexShader=e.vertexShader.replace("#include <project_vertex>","\n\t\t\tvertexVisible = iVisible;\n\t\t\ttransformed = applyTRS( transformed, iOffset, iRotation, iScale );\n\t\t\tvec4 mvPosition = vec4( transformed, 1.0 );\n\t\t\tmvPosition = modelMatrix * mvPosition;\n\t\t\tmvPosition = modelViewMatrix * mvPosition;\n\t\t\tgl_Position = projectionMatrix * mvPosition;\n\t\t"),e.fragmentShader="\n\t\t\t#define DEPTH_PACKING 3201\n\t\t\tvarying float vertexVisible;\n\t\t"+e.fragmentShader,e.fragmentShader=e.fragmentShader.replace("#include <clipping_planes_fragment>","\n\t\t\tif (vertexVisible == 0.0) discard;\n\t\t\t#include <clipping_planes_fragment>\n\t\t")},h.enabled=!1,h.supported=!0,h.finalized=!1,h.merger={texture:null,ranges:{}},h.CUBES={instances:[],mesh:null},h.PLANES={instances:[],mesh:null},h.BUILDS=null,h.MODELS={},h.addBuild=function(e,i,s,a,r,o,l){if(h.supported){if(l.src=l.src||"",l.src.includes("default")&&(l.src=null),l.src=l.src||null,l.model){l.colr="#ffffff",i+=r/2;var d=!1;h.MODELS[l.src]?d=h.MODELS[l.src].pending:(d=!0,h.MODELS[l.src]={pending:!0,pendingObjs:[],mesh:null},t.loadGeo(l,(function(e,i){h.MODELS[e.src].mesh=new h([],i,2500),t.add(h.MODELS[e.src].mesh);for(var n=0;n<h.MODELS[e.src].pendingObjs.length;n++)h.MODELS[e.src].mesh.addObj(h.MODELS[e.src].pendingObjs[n]);h.MODELS[e.src].pending=!1,h.MODELS[e.src].pendingObjs.length=0})))}else h.BUILDS||(h.BUILDS=new h([],c,2500),t.add(h.BUILDS));h.updateTextureOffsets(l);var u={type:l.type||0,x:e,y:i,z:s,uid:l.uid,src:l.src,color:l.colr,emissive:l.emissive,w:l.model?1:a,h:l.model?1:r,l:l.model?1:o,opacity:n.limitMM(l.opacity,0,1),dir:l.dir,xR:l.xR,yR:l.yR,zR:l.zR,texOff:l.texOff,tex:l.tex};if(2==u.type){var p=0!=u.dir&&u.dir!=Math.PI,f=Math.sqrt(r*r+o*o);l.model?p?u.xR=-u.dir:u.zR=u.dir/2:(u.h=2,u.y=i+r/2-1,u.w=p?a:f,u.l=p?f:a,u[p?"yR":"zR"]=Math.asin(r/f)-Math.PI/2,u.dir<=0&&(u[p?"yR":"zR"]*=-1))}l.model?d?h.MODELS[l.src].pendingObjs.push(u):h.MODELS[l.src].mesh.addObj(u):h.BUILDS.addObj(u)}},h.removeBuild=function(e,t){return t&&t.model&&h.MODELS[t.src]&&h.MODELS[t.src].mesh?void h.MODELS[t.src].mesh.remObj(e):void(h.BUILDS&&h.BUILDS.remObj(e))},h.addPlane=function(e,t,i,s,a,r,o,l,c){return r.src=r.src||"",r.src.includes("default")&&(r.src=null),r.src=r.src||null,h.PLANES.instances.push({type:1,x:e,y:t,z:i,src:r.src,color:r.colr,emissive:r.emissive,w:s,l:a,h:1,opacity:n.limitMM(r.opacity,0,1),xR:o,yR:l,zR:c,texOff:[0,0,0,0],tex:0}),h.createProxyObj(1,h.PLANES.instances.length-1)},h.addRamp=function(e,t,i,s,a,r,o,l,c){l.src=l.src||"",l.src.includes("default")&&(l.src=null),l.src=l.src||null;var d=Math.sqrt(a*a+r*r);return h.PLANES.instances.push({type:1,x:e,y:t+a/2,z:i,src:l.src,color:l.colr,emissive:l.emissive,w:s,l:d,h:2,opacity:n.limitMM(l.opacity,0,1),xR:-Math.PI/2-o,yR:Math.asin(a/d),zR:c||0,ramp:!0,texOff:[0,0,0,0],tex:0}),h.createProxyObj(1,h.PLANES.instances.length-1)},h.addCube=function(e,t,i,s,a,r,o){return o.src=o.src||"",o.src.includes("default")&&(o.src=null),o.src=o.src||null,h.CUBES.instances.push({type:0,x:e,y:t,z:i,sid:o.sid,src:o.src,color:o.colr,emissive:o.emissive,w:s,h:a,l:r,opacity:n.limitMM(o.opacity,0,1),xR:o.xR,yR:o.yR,zR:o.zR,texOff:[0,0,0,0],tex:0}),h.createProxyObj(0,h.CUBES.instances.length-1)},h.createProxyObj=function(e,t){var i={type:e||0,id:t};return Object.defineProperty(i,"visible",{get(){return 0==this.type?!!h.CUBES.mesh.objects[parseInt(this.id)].visible:1==this.type&&!!h.PLANES.mesh.objects[parseInt(this.id)].visible},set(e){return 0==this.type?(h.CUBES.mesh.objects[parseInt(this.id)].visibility(e),h.CUBES.mesh.geometry.attributes.iVisible.needsUpdate=!0):1==this.type&&(h.PLANES.mesh.objects[parseInt(this.id)].visibility(e),h.PLANES.mesh.geometry.attributes.iVisible.needsUpdate=!0),!!e}}),i},h.reset=function(){h.CUBES.mesh&&t.scene.remove(h.CUBES.mesh),h.CUBES.mesh=null,h.CUBES.instances.length=0,h.PLANES.mesh&&t.scene.remove(h.PLANES.mesh),h.PLANES.mesh=null,h.PLANES.instances.length=0,h.BUILDS&&t.scene.remove(h.BUILDS),h.BUILDS=null},h.finalize=function(){h.finalized=!0,h.CUBES.instances.length&&(h.CUBES.mesh=new h(h.CUBES.instances,c),h.CUBES.instances.length=0,t.add(h.CUBES.mesh)),h.PLANES.instances.length&&(h.PLANES.mesh=new h(h.PLANES.instances,d),h.PLANES.instances.length=0,t.add(h.PLANES.mesh))},h.updateTextureMap=function(e){var t=new s(e);if(h.merger.texture=t.mergedTexture,h.merger.ranges=t.ranges,h.finalized&&(h.CUBES.mesh&&(h.CUBES.mesh.material.uniforms.texture1.value=h.merger.texture,h.CUBES.mesh.material.uniforms.texture1.needsUpdate=!0,h.CUBES.mesh.updateTextures()),h.PLANES.mesh&&(h.PLANES.mesh.material.uniforms.texture1.value=h.merger.texture,h.PLANES.mesh.material.uniforms.texture1.needsUpdate=!0,h.PLANES.mesh.updateTextures())),h.BUILDS&&(h.BUILDS.material.uniforms.texture1.value=h.merger.texture,h.BUILDS.material.uniforms.texture1.needsUpdate=!0,h.BUILDS.updateTextures()),h.MODELS)for(var i in h.MODELS)h.MODELS[i].mesh&&(h.MODELS[i].mesh.material.uniforms.texture1.value=h.merger.texture,h.MODELS[i].mesh.material.uniforms.texture1.needsUpdate=!0,h.MODELS[i].mesh.updateTextures())},h.updateTextureOffsets=function(e){if(h.merger.ranges[e.src]){e.texOff=[...Object.values(h.merger.ranges[e.src])];var t=.5/e.texOff[4];e.texOff[0]+=t,e.texOff[1]-=t,e.texOff[2]-=t,e.texOff[3]+=t,e.texOff.length=4,e.tex=1}else e.texOff=[0,0,0,0],e.tex=0},h}},function(e,t){e.exports=function(e){function t(e,t,i,n){this.x=e,this.y=t,this.width=i,this.height=n,this.finalX=e+i,this.finalY=t+n}function i(i){if(this.MAX_TEXTURE_SIZE=4096,i){for(var n in this.dataURLs={},i){var s=i[n];if(s instanceof e.CompressedTexture)throw new Error("CompressedTextures are not supported.");if(void 0===s.image.toDataURL){var a=document.createElement("canvas");a.width=s.image.naturalWidth,a.height=s.image.naturalHeight,a.getContext("2d").drawImage(s.image,0,0),this.dataURLs[n]=a.toDataURL()}else this.dataURLs[n]=s.image.toDataURL()}this.canvas=document.createElement("canvas"),this.textureCount=0,this.maxWidth=0,this.maxHeight=0;var r="";for(var n in i){this.textureCount++,(c=i[n]).area=c.image.width*c.image.height,c.image.width>this.maxWidth&&(this.maxWidth=c.image.width),c.image.height>this.maxHeight&&(this.maxHeight=c.image.height),r+=n+","}r=r.substring(0,r.length-1),this.textureCache={},this.node={},this.node.rectangle=new t(0,0,this.maxWidth*this.textureCount,this.maxHeight*this.textureCount),this.textureOffsets={},this.allNodes=[],this.insert(this.node,this.findNextTexture(i),i),this.ranges={};var o=this.calculateImageSize(i);this.canvas.width=o.width,this.canvas.height=o.height;var l=this.canvas.getContext("2d");for(n in this.context=l,this.textureOffsets){for(var c=i[n],d=this.textureOffsets[n].x,h=this.textureOffsets[n].y,u=c.image.width,p=c.image.height,f=h;f<h+p;f+=p)for(var m=d;m<d+u;m+=u)l.drawImage(c.image,m,f,u,p);var g={startU:d/o.width,endU:(d+u)/o.width,startV:1-h/o.height,endV:1-(h+p)/o.height,width:u};this.ranges[n]=g}this.makeCanvasPowerOfTwo(),this.mergedTexture=new e.CanvasTexture(this.canvas),this.mergedTexture.wrapS=e.ClampToEdgeWrapping,this.mergedTexture.wrapT=e.ClampToEdgeWrapping,this.mergedTexture.minFilter=e.NearestFilter,this.mergedTexture.magFilter=e.NearestFilter,this.mergedTexture.needsUpdate=!0}}return t.prototype.set=function(e,t,i,n,s,a){return this.x=e,this.y=t,this.finalX=i,this.finalY=n,this.width=s,this.height=a,this},t.prototype.fits=function(e){var t=e.image.width,i=e.image.height;return t<=this.width&&i<=this.height},t.prototype.fitsPerfectly=function(e){var t=e.image.width,i=e.image.height;return t==this.width&&i==this.height},t.prototype.overlaps=function(e){return this.x<e.x+e.width&&this.x+this.width>e.x&&this.y<e.y+e.height&&this.y+this.height>e.y},i.prototype.isTextureAlreadyInserted=function(e,t){var i=t[e],n=this.dataURLs[e];for(var s in t)if(s!=e){var a=t[s];if(n==this.dataURLs[s]&&a.offset.x==i.offset.x&&a.offset.y==i.offset.y&&a.offset.z==i.offset.z&&a.repeat.x==i.repeat.x&&a.repeat.y==i.repeat.y&&a.flipX==i.flipX&&a.flipY==i.flipY&&a.wrapS==i.wrapS&&a.wrapT==i.wrapT&&this.textureOffsets[s])return this.textureOffsets[s]}return!1},i.prototype.insert=function(e,i,n){var s=n[i],a=this.isTextureAlreadyInserted(i,n);if(a)return this.textureOffsets[i]=a,void(null!=(P=this.findNextTexture(n))&&this.insert(e,P,n));var r=s.image.width,o=s.image.height;if(e.upperNode){for(var l,c=this.maxWidth*this.textureCount+this.maxHeight*this.textureCount,d=0,h=!1,u=0;u<this.allNodes.length;u++)if(!(l=this.allNodes[u]).textureName&&l.rectangle.fits(s)){this.textureOffsets[i]={x:l.rectangle.x,y:l.rectangle.y};var p=this.calculateImageSize(n),f=p.width+p.height;if(f<c&&p.width<=this.MAX_TEXTURE_SIZE&&p.height<=this.MAX_TEXTURE_SIZE){var m=!1;for(var g in this.textureOffsets)if(g!=i){var v=l.rectangle,y=this.textureOffsets[g].x,b=this.textureOffsets[g].y,w=n[g].image,x=new t(v.x,v.y,r,o),S=new t(y,b,w.width,w.height);x.overlaps(S)&&(m=!0)}m||(c=f,d=this.allNodes[u],h=!0)}delete this.textureOffsets[i]}if(!h)throw new Error("Error: Try to use smaller textures.");if(this.textureOffsets[i]={x:d.rectangle.x,y:d.rectangle.y},d.textureName=i,!d.children){var M={};(R={}).upperNode=d,M.upperNode=d,d.children=[R,M];var k=d.rectangle.x,_=d.rectangle.y,T=this.maxWidth*this.textureCount,C=this.maxHeight*this.textureCount;R.rectangle=new t(k+r,_,T-(k+r),C-_),M.rectangle=new t(k,_+o,T-k,C-(_+o)),this.allNodes.push(R),this.allNodes.push(M)}null!=(P=this.findNextTexture(n))&&this.insert(e,P,n)}else{var I=e.rectangle.width,A=e.rectangle.height;e.textureName=i;var R;M={};(R={}).upperNode=e,M.upperNode=e,e.children=[R,M],R.rectangle=new t(r,0,I-r,o),M.rectangle=new t(0,o,I,A-o),this.textureOffsets[i]={x:e.rectangle.x,y:e.rectangle.y};var P,E=e.children[0];this.allNodes=[e,R,M],null!=(P=this.findNextTexture(n))&&this.insert(E,P,n)}},i.prototype.makeCanvasPowerOfTwo=function(e){var t=!1;e||(e=this.canvas,t=!0);var i=e.width,n=e.height,s=Math.pow(2,Math.round(Math.log(i)/Math.log(2))),a=Math.pow(2,Math.round(Math.log(n)/Math.log(2))),r=document.createElement("canvas");r.width=s,r.height=a,r.getContext("2d").drawImage(e,0,0,s,a),t&&(this.canvas=r)},i.prototype.calculateImageSize=function(e){var t=0,i=0;for(var n in this.textureOffsets){var s=e[n],a=s.image.width,r=s.image.height,o=this.textureOffsets[n].x,l=this.textureOffsets[n].y;o+a>t&&(t=o+a),l+r>i&&(i=l+r)}return{width:t,height:i}},i.prototype.findNextTexture=function(e){var t,i=-1;for(textureName in e){var n=e[textureName];!this.textureCache[textureName]&&n.area>i&&(i=n.area,t=textureName)}return-1==i?null:(this.textureCache[t]=!0,t)},i.prototype.rescale=function(e,t){var i=document.createElement("canvas");return i.width=e.width*t,i.height=e.height*t,i.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,i.width,i.height),i},i}},function(e,t){e.exports=function(e){let t=new e.BoxGeometry(1,1,1);t.translate(0,.5,0);let i=new e.Mesh(t),n=new e.Mesh(new e.BoxGeometry(1,1,1)),s=new e.PlaneGeometry(1,1,1,1),a=new e.Mesh(s);return class{constructor(t,i,n){this.index=t,this.buffers=i,this.data=n,this.uid=n.uid,this.offsets={position:3*t,rotation:4*t,color:3*t,emissive:3*t,alphaTest:1*t,scale:3*t,opacity:1*t,visible:1*t,textureOffset:4*t,texture:1*t},this.rotation=new e.Quaternion,this.position=new e.Vector3,this.scale=new e.Vector3,this.visible=1,this.textureOffset=[0,0,0,0],this.texture=0,this.color=new e.Color,this.emissive=new e.Color,this.alphaTest=0,this.opacity=1,this.active=!0,this.inUse=!0,this.init()}init(){this.color.set(this.data.color||"#ffffff"),this.color.toArray(this.buffers.color,this.offsets.color),this.emissive.set(this.data.emissive||"#000000"),this.emissive.toArray(this.buffers.emissive,this.offsets.emissive),this.textureOffset=this.data.texOff,this.buffers.textureOffset[this.offsets.textureOffset]=this.textureOffset[0],this.buffers.textureOffset[this.offsets.textureOffset+1]=this.textureOffset[1],this.buffers.textureOffset[this.offsets.textureOffset+2]=this.textureOffset[2],this.buffers.textureOffset[this.offsets.textureOffset+3]=this.textureOffset[3],this.texture=this.data.tex,this.buffers.texture[this.offsets.texture]=this.texture,this.alphaTest=this.data.alphaTest?this.data.alphaTest:0,this.buffers.alphaTest[this.offsets.alphaTest]=this.alphaTest,this.opacity=this.data.opacity||1,this.buffers.opacity[this.offsets.opacity]=this.opacity,this.visible=~~(this.data.visible||1),this.buffers.visible[this.offsets.visible]=this.visible,this.data.model?(n.position.set(this.data.x||0,this.data.y||0,this.data.z||0),n.rotation.set(this.data.yR||0,this.data.xR||0,this.data.zR||0),n.quaternion.normalize(),this.rotation.copy(n.quaternion),this.position.copy(n.position),this.position.toArray(this.buffers.position,this.offsets.position),this.rotation.toArray(this.buffers.rotation,this.offsets.rotation),this.scale.set(this.data.w||1,this.data.h||1,this.data.l||1),this.scale.toArray(this.buffers.scale,this.offsets.scale)):1==this.data.type?(a.position.set(this.data.x||0,this.data.y||0,this.data.z||0),a.rotation.set((this.data.yR||0)-Math.PI/2,this.data.xR||0,this.data.zR||0),a.quaternion.normalize(),this.rotation.copy(a.quaternion),this.position.copy(a.position),this.position.toArray(this.buffers.position,this.offsets.position),this.rotation.toArray(this.buffers.rotation,this.offsets.rotation),this.scale.set(2*(this.data.w||1),2*(this.data.l||1),this.data.h||1),this.scale.toArray(this.buffers.scale,this.offsets.scale)):(i.position.set(this.data.x||0,this.data.y||0,this.data.z||0),i.rotation.set(this.data.yR||0,this.data.xR||0,this.data.zR||0),i.quaternion.normalize(),this.rotation.copy(i.quaternion),this.position.copy(i.position),this.position.toArray(this.buffers.position,this.offsets.position),this.rotation.toArray(this.buffers.rotation,this.offsets.rotation),this.scale.set(this.data.w||1,this.data.h||1,this.data.l||1),this.scale.toArray(this.buffers.scale,this.offsets.scale))}visibility(e){this.visible=~~e,this.buffers.visible[this.offsets.visible]=this.visible}updateTexture(){this.textureOffset=this.data.texOff,this.buffers.textureOffset[this.offsets.textureOffset]=this.textureOffset[0],this.buffers.textureOffset[this.offsets.textureOffset+1]=this.textureOffset[1],this.buffers.textureOffset[this.offsets.textureOffset+2]=this.textureOffset[2],this.buffers.textureOffset[this.offsets.textureOffset+3]=this.textureOffset[3],this.texture=this.data.tex,this.buffers.texture[this.offsets.texture]=this.texture}dispose(){this.active=!1,this.inUse=!1,this.visible=0,this.buffers.visible[this.offsets.visible]=this.visible}}}},function(e,t,i){i(1);e.exports={id:"ffa",name:"Free for All",alias:"ffa",leaderStats:["score","kills","deaths"],description:"In this mode, you have no friends.\nEliminate as many opponents as you can.",descriptionLang:"game.mode.ffa.description"}},function(e,t,i){i(1);e.exports={id:"tdm",name:"Team Deathmatch",endStats:["sid","name","score","kills","deaths","assists","reward"],alias:"tdm",teams:!0,leaderStats:["score","kills","deaths"],description:"Its you and your team.\nEliminate the other team players.\nTeam with highest score, wins.",descriptionLang:"game.mode.tdm.description"}},function(e,t,i){i(1);const n=i(146);var s,a;e.exports={id:"point",name:"Hardpoint",sub:"Attack the Objective",alias:"point",description:"Follow the target and control the area. The longer you stay, the more points you and your team make. Location changes every minute.",descriptionLang:"game.mode.point.description",endStats:["sid","name","score","kills","deaths","obj","dmg","reward"],leaderStats:["score","objective","kills"],objective:!0,teams:!0,gameStart:function(e){e.activeObjective=-1,e.nextObjective(null,!0)},onKill:function(e,t,i,s){if(!e.isSandbox&&s&&s!=i&&e.isPubType()){var a=i.lastGround&&!i.onGround,r={x:a?i.lastGround.x:i.x,y:a?i.lastGround.y:i.y,z:a?i.lastGround.z:i.z},o=n.randomBytes(4).readUInt32LE()/4294967296;(o=(100*o).round(2))<=.015&&e.dropSpawnable(18,i,null,r)}},update:function(e,t,i){if(e.map.manager.objectives.length&&e.waitTimers&&e.waitTimers[0].contTime&&(e.objectiveTimer-=i,e.objectiveTimer<=0)){e.objectiveTimer=1500;for(var n=0;n<e.map.manager.objectives.length;++n)if((s=e.map.manager.objectives[n])&&s.uid==e.activeObjective)for(var r=0;r<e.players.list.length;++r)(a=e.players.list[r]).active&&a.collides(s)&&e.players.score(a,e.mode&&e.mode.objScore?e.mode.objScore:10,2);if(!e.notWinnable&&e.teamScores[1]!=e.teamScores[2]&&e.isComp&&(e.teamScores[1]||e.teamScores[2])){var o=(e.gameTimer||0)/1e3,l=Math.floor(o/1.5),c=e.config.tmSize+1,d=l*(e.mode&&e.mode.objScore?e.mode.objScore:10)*c,h=(e.teamScores[1]||0)>(e.teamScores[2]||0)?2:1,u=(e.teamScores[1]||0)>(e.teamScores[2]||0)?1:2;if((e.teamScores[h]||0)+d<(e.teamScores[u]||0)){e.notWinnable=!0;for(n=0;n<e.players.list.length;++n)(s=e.players.list[n]).send("chi",-1,null,s.team==h?"modes.round.loss":"modes.round.win",2,"#ff0000");e.endGame()}}}}}},function(e,t,i){"use strict";t.randomBytes=t.rng=t.pseudoRandomBytes=t.prng=i(16),t.createHash=t.Hash=i(20),t.createHmac=t.Hmac=i(83);var n=i(171),s=Object.keys(n),a=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(s);t.getHashes=function(){return a};var r=i(86);t.pbkdf2=r.pbkdf2,t.pbkdf2Sync=r.pbkdf2Sync;var o=i(173);t.Cipher=o.Cipher,t.createCipher=o.createCipher,t.Cipheriv=o.Cipheriv,t.createCipheriv=o.createCipheriv,t.Decipher=o.Decipher,t.createDecipher=o.createDecipher,t.Decipheriv=o.Decipheriv,t.createDecipheriv=o.createDecipheriv,t.getCiphers=o.getCiphers,t.listCiphers=o.listCiphers;var l=i(188);t.DiffieHellmanGroup=l.DiffieHellmanGroup,t.createDiffieHellmanGroup=l.createDiffieHellmanGroup,t.getDiffieHellman=l.getDiffieHellman,t.createDiffieHellman=l.createDiffieHellman,t.DiffieHellman=l.DiffieHellman;var c=i(193);t.createSign=c.createSign,t.Sign=c.Sign,t.createVerify=c.createVerify,t.Verify=c.Verify,t.createECDH=i(226);var d=i(227);t.publicEncrypt=d.publicEncrypt,t.privateEncrypt=d.privateEncrypt,t.publicDecrypt=d.publicDecrypt,t.privateDecrypt=d.privateDecrypt;var h=i(230);t.randomFill=h.randomFill,t.randomFillSync=h.randomFillSync,t.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join("\n"))},t.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},function(e,t,i){var n=i(6),s=n.Buffer;function a(e,t){for(var i in e)t[i]=e[i]}function r(e,t,i){return s(e,t,i)}s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?e.exports=n:(a(n,t),t.Buffer=r),r.prototype=Object.create(s.prototype),a(s,r),r.from=function(e,t,i){if("number"==typeof e)throw new TypeError("Argument must not be a number");return s(e,t,i)},r.alloc=function(e,t,i){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=s(e);return void 0===t?n.fill(0):"string"==typeof i?n.fill(t,i):n.fill(t),n},r.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return s(e)},r.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},function(e,t){},function(e,t,i){"use strict";function n(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function a(e,t){for(var i,n=0;n<t.length;n++)(i=t[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}var r=i(6).Buffer,o=i(150).inspect,l=o&&o.custom||"inspect";e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,i,c;return t=e,i=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,i=""+t.data;t=t.next;)i+=e+t.data;return i}},{key:"concat",value:function(e){if(0===this.length)return r.alloc(0);for(var t,i,n,s=r.allocUnsafe(e>>>0),a=this.head,o=0;a;)t=a.data,i=s,n=o,r.prototype.copy.call(t,i,n),o+=a.data.length,a=a.next;return s}},{key:"consume",value:function(e,t){var i;return e<this.head.data.length?(i=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):i=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,i=1,n=t.data;for(e-=n.length;t=t.next;){var s=t.data,a=e>s.length?s.length:e;if(n+=a===s.length?s:s.slice(0,e),0==(e-=a)){a===s.length?(++i,this.head=t.next?t.next:this.tail=null):(this.head=t,t.data=s.slice(a));break}++i}return this.length-=i,n}},{key:"_getBuffer",value:function(e){var t=r.allocUnsafe(e),i=this.head,n=1;for(i.data.copy(t),e-=i.data.length;i=i.next;){var s=i.data,a=e>s.length?s.length:e;if(s.copy(t,t.length-e,0,a),0==(e-=a)){a===s.length?(++n,this.head=i.next?i.next:this.tail=null):(this.head=i,i.data=s.slice(a));break}++n}return this.length-=n,t}},{key:l,value:function(e,t){return o(this,function(e){for(var t,i=1;i<arguments.length;i++)t=null==arguments[i]?{}:arguments[i],i%2?n(Object(t),!0).forEach((function(i){s(e,i,t[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):n(Object(t)).forEach((function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))}));return e}({},t,{depth:0,customInspect:!1}))}}],i&&a(t.prototype,i),c&&a(t,c),e}()},function(e,t){},function(e,t,i){"use strict";(function(t){var n;function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var a=i(42),r=Symbol("lastResolve"),o=Symbol("lastReject"),l=Symbol("error"),c=Symbol("ended"),d=Symbol("lastPromise"),h=Symbol("handlePromise"),u=Symbol("stream");function p(e,t){return{value:e,done:t}}function f(e){var t=e[r];if(null!==t){var i=e[u].read();null!==i&&(e[d]=null,e[r]=null,e[o]=null,t(p(i,!1)))}}function m(e){t.nextTick(f,e)}var g=Object.getPrototypeOf((function(){})),v=Object.setPrototypeOf((s(n={get stream(){return this[u]},next:function(){var e,i=this,n=this[l];if(null!==n)return Promise.reject(n);if(this[c])return Promise.resolve(p(void 0,!0));if(this[u].destroyed)return new Promise((function(e,n){t.nextTick((function(){i[l]?n(i[l]):e(p(void 0,!0))}))}));var s,a,r=this[d];if(r)e=new Promise((s=r,a=this,function(e,t){s.then((function(){return a[c]?void e(p(void 0,!0)):void a[h](e,t)}),t)}));else{var o=this[u].read();if(null!==o)return Promise.resolve(p(o,!1));e=new Promise(this[h])}return this[d]=e,e}},Symbol.asyncIterator,(function(){return this})),s(n,"return",(function(){var e=this;return new Promise((function(t,i){e[u].destroy(null,(function(e){return e?void i(e):void t(p(void 0,!0))}))}))})),n),g);e.exports=function(e){var t,i=Object.create(v,(s(t={},u,{value:e,writable:!0}),s(t,r,{value:null,writable:!0}),s(t,o,{value:null,writable:!0}),s(t,l,{value:null,writable:!0}),s(t,c,{value:e._readableState.endEmitted,writable:!0}),s(t,h,{value:function(e,t){var n=i[u].read();n?(i[d]=null,i[r]=null,i[o]=null,e(p(n,!1))):(i[r]=e,i[o]=t)},writable:!0}),t));return i[d]=null,a(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=i[o];return null!==t&&(i[d]=null,i[r]=null,i[o]=null,t(e)),void(i[l]=e)}var n=i[r];null!==n&&(i[d]=null,i[r]=null,i[o]=null,n(p(void 0,!0))),i[c]=!0})),e.on("readable",m.bind(null,i)),i}}).call(this,i(7))},function(e,t){e.exports=function(){throw new Error("Readable.from is not available in the browser")}},function(e,t,i){"use strict";e.exports=s;var n=i(76);function s(e){return this instanceof s?void n.call(this,e):new s(e)}i(2)(s,n),s.prototype._transform=function(e,t,i){i(null,e)}},function(e,t,i){"use strict";var n;var s=i(17).codes,a=s.ERR_MISSING_ARGS,r=s.ERR_STREAM_DESTROYED;function o(e){if(e)throw e}function l(e){e()}function c(e,t){return e.pipe(t)}e.exports=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];var d,h,u=(d=t).length&&"function"==typeof d[d.length-1]?d.pop():o;if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new a("streams");var p=t.map((function(e,s){var a=s<t.length-1;return function(e,t,s,a){var o,l;o=a,l=!1,a=function(){l||(l=!0,o.apply(void 0,arguments))};var c=!1;e.on("close",(function(){c=!0})),void 0===n&&(n=i(42)),n(e,{readable:t,writable:s},(function(e){return e?a(e):(c=!0,void a())}));var d=!1;return function(t){if(!c)return d?void 0:(d=!0,(i=e).setHeader&&"function"==typeof i.abort?e.abort():"function"==typeof e.destroy?e.destroy():void a(t||new r("pipe")));var i}}(e,a,s>0,(function(e){h||=e,e&&p.forEach(l),a||(p.forEach(l),u(h))}))}));return t.reduce(c)}},function(e,t,i){var n=i(2),s=i(19),a=i(3).Buffer,r=[1518500249,1859775393,-1894007588,-899497514],o=Array(80);function l(){this.init(),this._w=o,s.call(this,64,56)}n(l,s),l.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},l.prototype._update=function(e){for(var t,i,n,s,a,o,l=this._w,c=0|this._a,d=0|this._b,h=0|this._c,u=0|this._d,p=0|this._e,f=0;f<16;++f)l[f]=e.readInt32BE(4*f);for(;f<80;++f)l[f]=l[f-3]^l[f-8]^l[f-14]^l[f-16];for(var m=0;m<80;++m){var g=~~(m/20),v=0|((o=c)<<5|o>>>27)+(n=d,s=h,a=u,0===(i=g)?n&s|~n&a:2===i?n&s|n&a|s&a:n^s^a)+p+l[m]+r[g];p=u,u=h,h=(t=d)<<30|t>>>2,d=c,c=v}this._a=c+this._a|0,this._b=d+this._b|0,this._c=h+this._c|0,this._d=u+this._d|0,this._e=p+this._e|0},l.prototype._hash=function(){var e=a.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},e.exports=l},function(e,t,i){var n=i(2),s=i(19),a=i(3).Buffer,r=[1518500249,1859775393,-1894007588,-899497514],o=Array(80);function l(){this.init(),this._w=o,s.call(this,64,56)}n(l,s),l.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},l.prototype._update=function(e){for(var t,i,n,s,a,o,l,c=this._w,d=0|this._a,h=0|this._b,u=0|this._c,p=0|this._d,f=0|this._e,m=0;m<16;++m)c[m]=e.readInt32BE(4*m);for(;m<80;++m)c[m]=(t=c[m-3]^c[m-8]^c[m-14]^c[m-16])<<1|t>>>31;for(var g=0;g<80;++g){var v=~~(g/20),y=0|((l=d)<<5|l>>>27)+(s=h,a=u,o=p,0===(n=v)?s&a|~s&o:2===n?s&a|s&o|a&o:s^a^o)+f+c[g]+r[v];f=p,p=u,u=(i=h)<<30|i>>>2,h=d,d=y}this._a=d+this._a|0,this._b=h+this._b|0,this._c=u+this._c|0,this._d=p+this._d|0,this._e=f+this._e|0},l.prototype._hash=function(){var e=a.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},e.exports=l},function(e,t,i){var n=i(2),s=i(77),a=i(19),r=i(3).Buffer,o=Array(64);function l(){this.init(),this._w=o,a.call(this,64,56)}n(l,s),l.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},l.prototype._hash=function(){var e=r.allocUnsafe(28);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e},e.exports=l},function(e,t,i){var n=i(2),s=i(78),a=i(19),r=i(3).Buffer,o=Array(160);function l(){this.init(),this._w=o,a.call(this,128,112)}n(l,s),l.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},l.prototype._hash=function(){function e(e,i,n){t.writeInt32BE(e,n),t.writeInt32BE(i,n+4)}var t=r.allocUnsafe(48);return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),t},e.exports=l},function(e,t,i){e.exports=s;var n=i(21).EventEmitter;function s(){n.call(this)}i(2)(s,n),s.Readable=i(45),s.Writable=i(166),s.Duplex=i(167),s.Transform=i(168),s.PassThrough=i(169),s.Stream=s,s.prototype.pipe=function(e,t){function i(t){e.writable&&!1===e.write(t)&&c.pause&&c.pause()}function s(){c.readable&&c.resume&&c.resume()}function a(){d||(d=!0,e.end())}function r(){d||(d=!0,"function"==typeof e.destroy&&e.destroy())}function o(e){if(l(),0===n.listenerCount(this,"error"))throw e}function l(){c.removeListener("data",i),e.removeListener("drain",s),c.removeListener("end",a),c.removeListener("close",r),c.removeListener("error",o),e.removeListener("error",o),c.removeListener("end",l),c.removeListener("close",l),e.removeListener("close",l)}var c=this;c.on("data",i),e.on("drain",s),e._isStdio||t&&!1===t.end||(c.on("end",a),c.on("close",r));var d=!1;return c.on("error",o),e.on("error",o),c.on("end",l),c.on("close",l),e.on("close",l),e.emit("pipe",c),e}},function(e,t){},function(e,t,i){"use strict";var n=i(3).Buffer,s=i(162);e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,i=""+t.data;t=t.next;)i+=e+t.data;return i},e.prototype.concat=function(e){if(0===this.length)return n.alloc(0);if(1===this.length)return this.head.data;for(var t,i,s,a=n.allocUnsafe(e>>>0),r=this.head,o=0;r;)t=r.data,i=a,s=o,t.copy(i,s),o+=r.data.length,r=r.next;return a},e}(),s&&s.inspect&&s.inspect.custom&&(e.exports.prototype[s.inspect.custom]=function(){var e=s.inspect({length:this.length});return this.constructor.name+" "+e})},function(e,t){},function(e,t,i){(function(e){var n=void 0!==e&&e||"undefined"!=typeof self&&self||window,s=Function.prototype.apply;function a(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new a(s.call(setTimeout,n,arguments),clearTimeout)},t.setInterval=function(){return new a(s.call(setInterval,n,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(n,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},i(164),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,i(8))},function(e,t,i){(function(e,t){!function(e){"use strict";function i(e){delete r[e]}function n(e){if(o)setTimeout(n,0,e);else{var t=r[e];if(t){o=!0;try{!function(e){var t=e.callback,i=e.args;switch(i.length){case 0:t();break;case 1:t(i[0]);break;case 2:t(i[0],i[1]);break;case 3:t(i[0],i[1],i[2]);break;default:t.apply(void 0,i)}}(t)}finally{i(e),o=!1}}}}if(!e.setImmediate){var s,a=1,r={},o=!1,l=e.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(e);c=c&&c.setTimeout?c:e,"[object process]"==={}.toString.call(e.process)?s=function(e){t.nextTick((function(){n(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,i=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=i,t}}()?function(){var t="setImmediate$"+Math.random()+"$";function i(i){i.source===e&&"string"==typeof i.data&&0===i.data.indexOf(t)&&n(+i.data.slice(t.length))}e.addEventListener?e.addEventListener("message",i,!1):e.attachEvent("onmessage",i),s=function(i){e.postMessage(t+i,"*")}}():e.MessageChannel?((h=new MessageChannel).port1.onmessage=function(e){n(e.data)},s=function(e){h.port2.postMessage(e)}):l&&"onreadystatechange"in l.createElement("script")?(d=l.documentElement,s=function(e){var t=l.createElement("script");t.onreadystatechange=function(){n(e),t.onreadystatechange=null,d.removeChild(t),t=null},d.appendChild(t)}):s=function(e){setTimeout(n,0,e)},c.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=Array(arguments.length-1),i=0;i<t.length;i++)t[i]=arguments[i+1];var n={callback:e,args:t};return r[a]=n,s(a),a++},c.clearImmediate=i}var d,h}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,i(8),i(7))},function(e,t,i){"use strict";e.exports=a;var n=i(82),s=Object.create(i(23));function a(e){return this instanceof a?void n.call(this,e):new a(e)}s.inherits=i(2),s.inherits(a,n),a.prototype._transform=function(e,t,i){i(null,e)}},function(e,t,i){e.exports=i(46)},function(e,t,i){e.exports=i(14)},function(e,t,i){e.exports=i(45).Transform},function(e,t,i){e.exports=i(45).PassThrough},function(e,t,i){"use strict";var n=i(2),s=i(3).Buffer,a=i(13),r=s.alloc(128),o=64;function l(e,t){a.call(this,"digest"),"string"==typeof t&&(t=s.from(t)),this._alg=e,this._key=t,t.length>o?t=e(t):t.length<o&&(t=s.concat([t,r],o));for(var i=this._ipad=s.allocUnsafe(o),n=this._opad=s.allocUnsafe(o),l=0;l<o;l++)i[l]=54^t[l],n[l]=92^t[l];this._hash=[i]}n(l,a),l.prototype._update=function(e){this._hash.push(e)},l.prototype._final=function(){var e=this._alg(s.concat(this._hash));return this._alg(s.concat([this._opad,e]))},e.exports=l},function(e,t,i){e.exports=i(85)},function(e,t,i){(function(t){var n,s,a=i(3).Buffer,r=i(87),o=i(88),l=i(89),c=i(90),d=t.crypto&&t.crypto.subtle,h={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},u=[];function p(){return s||(s=t.process&&t.process.nextTick?t.process.nextTick:t.queueMicrotask?t.queueMicrotask:t.setImmediate?t.setImmediate:t.setTimeout)}function f(e,t,i,n,s){return d.importKey("raw",e,{name:"PBKDF2"},!1,["deriveBits"]).then((function(e){return d.deriveBits({name:"PBKDF2",salt:t,iterations:i,hash:{name:s}},e,n<<3)})).then((function(e){return a.from(e)}))}e.exports=function(e,i,s,m,g,v){"function"==typeof g&&(v=g,g=void 0);var y=h[(g=g||"sha1").toLowerCase()];if(y&&"function"==typeof t.Promise){if(r(s,m),e=c(e,o,"Password"),i=c(i,o,"Salt"),"function"!=typeof v)throw new Error("No callback provided to pbkdf2");var b,w;b=function(e){if(t.process&&!t.process.browser)return Promise.resolve(!1);if(!d||!d.importKey||!d.deriveBits)return Promise.resolve(!1);if(void 0!==u[e])return u[e];var i=f(n=n||a.alloc(8),n,10,128,e).then((function(){return!0})).catch((function(){return!1}));return u[e]=i,i}(y).then((function(t){return t?f(e,i,s,m,y):l(e,i,s,m,g)})),w=v,b.then((function(e){p()((function(){w(null,e)}))}),(function(e){p()((function(){w(e)}))}))}else p()((function(){var t;try{t=l(e,i,s,m,g)}catch(e){return v(e)}v(null,t)}))}}).call(this,i(8))},function(e,t,i){var n=i(174),s=i(48),a=i(49),r=i(187),o=i(32);function l(e,t,i){if(e=e.toLowerCase(),a[e])return s.createCipheriv(e,t,i);if(r[e])return new n({key:t,iv:i,mode:e});throw new TypeError("invalid suite type")}function c(e,t,i){if(e=e.toLowerCase(),a[e])return s.createDecipheriv(e,t,i);if(r[e])return new n({key:t,iv:i,mode:e,decrypt:!0});throw new TypeError("invalid suite type")}t.createCipher=t.Cipher=function(e,t){var i,n;if(e=e.toLowerCase(),a[e])i=a[e].key,n=a[e].iv;else{if(!r[e])throw new TypeError("invalid suite type");i=8*r[e].key,n=r[e].iv}var s=o(t,!1,i,n);return l(e,s.key,s.iv)},t.createCipheriv=t.Cipheriv=l,t.createDecipher=t.Decipher=function(e,t){var i,n;if(e=e.toLowerCase(),a[e])i=a[e].key,n=a[e].iv;else{if(!r[e])throw new TypeError("invalid suite type");i=8*r[e].key,n=r[e].iv}var s=o(t,!1,i,n);return c(e,s.key,s.iv)},t.createDecipheriv=t.Decipheriv=c,t.listCiphers=t.getCiphers=function(){return Object.keys(r).concat(s.getCiphers())}},function(e,t,i){var n=i(13),s=i(175),a=i(2),r=i(3).Buffer,o={"des-ede3-cbc":s.CBC.instantiate(s.EDE),"des-ede3":s.EDE,"des-ede-cbc":s.CBC.instantiate(s.EDE),"des-ede":s.EDE,"des-cbc":s.CBC.instantiate(s.DES),"des-ecb":s.DES};function l(e){var t;n.call(this);var i=e.mode.toLowerCase(),s=o[i];t=e.decrypt?"decrypt":"encrypt";var a=e.key;r.isBuffer(a)||(a=r.from(a)),"des-ede"!==i&&"des-ede-cbc"!==i||(a=r.concat([a,a.slice(0,8)]));var l=e.iv;r.isBuffer(l)||(l=r.from(l)),this._des=s.create({key:a,iv:l,type:t})}o.des=o["des-cbc"],o.des3=o["des-ede3-cbc"],e.exports=l,a(l,n),l.prototype._update=function(e){return r.from(this._des.update(e))},l.prototype._final=function(){return r.from(this._des.final())}},function(e,t,i){"use strict";t.utils=i(91),t.Cipher=i(47),t.DES=i(92),t.CBC=i(176),t.EDE=i(177)},function(e,t,i){"use strict";var n=i(9),s=i(2),a={};function r(e){n.equal(e.length,8,"Invalid IV length"),this.iv=Array(8);for(var t=0;t<this.iv.length;t++)this.iv[t]=e[t]}t.instantiate=function(e){function t(t){e.call(this,t),this._cbcInit()}var i;s(t,e);for(var n=Object.keys(a),r=0;r<n.length;r++)i=n[r],t.prototype[i]=a[i];return t.create=function(e){return new t(e)},t},a._cbcInit=function(){var e=new r(this.options.iv);this._cbcState=e},a._update=function(e,t,i,n){var s=this._cbcState,a=this.constructor.super_.prototype,r=s.iv;if("encrypt"===this.type){for(var o=0;o<this.blockSize;o++)r[o]^=e[t+o];a._update.call(this,r,0,i,n);for(o=0;o<this.blockSize;o++)r[o]=i[n+o]}else{a._update.call(this,e,t,i,n);for(o=0;o<this.blockSize;o++)i[n+o]^=r[o];for(o=0;o<this.blockSize;o++)r[o]=e[t+o]}}},function(e,t,i){"use strict";var n=i(9),s=i(2),a=i(47),r=i(92);function o(e,t){n.equal(t.length,24,"Invalid key length");var i=t.slice(0,8),s=t.slice(8,16),a=t.slice(16,24);this.ciphers="encrypt"===e?[r.create({type:"encrypt",key:i}),r.create({type:"decrypt",key:s}),r.create({type:"encrypt",key:a})]:[r.create({type:"decrypt",key:a}),r.create({type:"encrypt",key:s}),r.create({type:"decrypt",key:i})]}function l(e){a.call(this,e);var t=new o(this.type,this.options.key);this._edeState=t}s(l,a),e.exports=l,l.create=function(e){return new l(e)},l.prototype._update=function(e,t,i,n){var s=this._edeState;s.ciphers[0]._update(e,t,i,n),s.ciphers[1]._update(i,n,i,n),s.ciphers[2]._update(i,n,i,n)},l.prototype._pad=r.prototype._pad,l.prototype._unpad=r.prototype._unpad},function(e,t,i){var n=i(49),s=i(96),a=i(3).Buffer,r=i(97),o=i(13),l=i(31),c=i(32);function d(e,t,i){o.call(this),this._cache=new u,this._cipher=new l.AES(t),this._prev=a.from(i),this._mode=e,this._autopadding=!0}i(2)(d,o),d.prototype._update=function(e){this._cache.add(e);for(var t,i,n=[];t=this._cache.get();)i=this._mode.encrypt(this,t),n.push(i);return a.concat(n)};var h=a.alloc(16,16);function u(){this.cache=a.allocUnsafe(0)}function p(e,t,i){var o=n[e.toLowerCase()];if(!o)throw new TypeError("invalid suite type");if("string"==typeof t&&(t=a.from(t)),t.length!==o.key/8)throw new TypeError("invalid key length "+t.length);if("string"==typeof i&&(i=a.from(i)),"GCM"!==o.mode&&i.length!==o.iv)throw new TypeError("invalid iv length "+i.length);return"stream"===o.type?new r(o.module,t,i):"auth"===o.type?new s(o.module,t,i):new d(o.module,t,i)}d.prototype._final=function(){var e=this._cache.flush();if(this._autopadding)return e=this._mode.encrypt(this,e),this._cipher.scrub(),e;if(!e.equals(h))throw this._cipher.scrub(),new Error("data not multiple of block length")},d.prototype.setAutoPadding=function(e){return this._autopadding=!!e,this},u.prototype.add=function(e){this.cache=a.concat([this.cache,e])},u.prototype.get=function(){if(this.cache.length>15){var e=this.cache.slice(0,16);return this.cache=this.cache.slice(16),e}return null},u.prototype.flush=function(){for(var e=16-this.cache.length,t=a.allocUnsafe(e),i=-1;++i<e;)t.writeUInt8(e,i);return a.concat([this.cache,t])},t.createCipheriv=p,t.createCipher=function(e,t){var i=n[e.toLowerCase()];if(!i)throw new TypeError("invalid suite type");var s=c(t,!1,i.key,i.iv);return p(e,s.key,s.iv)}},function(e,t){t.encrypt=function(e,t){return e._cipher.encryptBlock(t)},t.decrypt=function(e,t){return e._cipher.decryptBlock(t)}},function(e,t,i){var n=i(24);t.encrypt=function(e,t){var i=n(t,e._prev);return e._prev=e._cipher.encryptBlock(i),e._prev},t.decrypt=function(e,t){var i=e._prev;e._prev=t;var s=e._cipher.decryptBlock(t);return n(s,i)}},function(e,t,i){var n=i(3).Buffer,s=i(24);function a(e,t,i){var a=t.length,r=s(t,e._cache);return e._cache=e._cache.slice(a),e._prev=n.concat([e._prev,i?t:r]),r}t.encrypt=function(e,t,i){for(var s,r=n.allocUnsafe(0);t.length;){if(0===e._cache.length&&(e._cache=e._cipher.encryptBlock(e._prev),e._prev=n.allocUnsafe(0)),!(e._cache.length<=t.length)){r=n.concat([r,a(e,t,i)]);break}s=e._cache.length,r=n.concat([r,a(e,t.slice(0,s),i)]),t=t.slice(s)}return r}},function(e,t,i){var n=i(3).Buffer;t.encrypt=function(e,t,i){for(var s=t.length,a=n.allocUnsafe(s),r=-1;++r<s;)a[r]=(o=e,l=t[r],c=i,d=void 0,d=o._cipher.encryptBlock(o._prev)[0]^l,o._prev=n.concat([o._prev.slice(1),n.from([c?l:d])]),d);var o,l,c,d;return a}},function(e,t,i){var n=i(3).Buffer;function s(e,t,i){for(var n,s,r=-1,o=0;++r<8;)n=t&1<<7-r?128:0,o+=(128&(s=e._cipher.encryptBlock(e._prev)[0]^n))>>r%8,e._prev=a(e._prev,i?n:s);return o}function a(e,t){var i=e.length,s=-1,a=n.allocUnsafe(e.length);for(e=n.concat([e,n.from([t])]);++s<i;)a[s]=e[s]<<1|e[s+1]>>7;return a}t.encrypt=function(e,t,i){for(var a=t.length,r=n.allocUnsafe(a),o=-1;++o<a;)r[o]=s(e,t[o],i);return r}},function(e,t,i){(function(e){var n=i(24);t.encrypt=function(t,i){for(;t._cache.length<i.length;)t._cache=e.concat([t._cache,(s=t,s._prev=s._cipher.encryptBlock(s._prev),s._prev)]);var s,a=t._cache.slice(0,i.length);return t._cache=t._cache.slice(i.length),n(i,a)}}).call(this,i(6).Buffer)},function(e,t,i){var n=i(3).Buffer,s=n.alloc(16,0);function a(e){var t=n.allocUnsafe(16);return t.writeUInt32BE(e[0]>>>0,0),t.writeUInt32BE(e[1]>>>0,4),t.writeUInt32BE(e[2]>>>0,8),t.writeUInt32BE(e[3]>>>0,12),t}function r(e){this.h=e,this.state=n.alloc(16,0),this.cache=n.allocUnsafe(0)}r.prototype.ghash=function(e){for(var t=-1;++t<e.length;)this.state[t]^=e[t];this._multiply()},r.prototype._multiply=function(){for(var e,t,i,n=[(i=this.h).readUInt32BE(0),i.readUInt32BE(4),i.readUInt32BE(8),i.readUInt32BE(12)],s=[0,0,0,0],r=-1;++r<128;){for(0!=(this.state[~~(r/8)]&1<<7-r%8)&&(s[0]^=n[0],s[1]^=n[1],s[2]^=n[2],s[3]^=n[3]),t=0!=(1&n[3]),e=3;e>0;e--)n[e]=n[e]>>>1|(1&n[e-1])<<31;n[0]>>>=1,t&&(n[0]^=225<<24)}this.state=a(s)},r.prototype.update=function(e){var t;for(this.cache=n.concat([this.cache,e]);this.cache.length>=16;)t=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(t)},r.prototype.final=function(e,t){return this.cache.length&&this.ghash(n.concat([this.cache,s],16)),this.ghash(a([0,e,0,t])),this.state},e.exports=r},function(e,t,i){var n=i(96),s=i(3).Buffer,a=i(49),r=i(97),o=i(13),l=i(31),c=i(32);function d(e,t,i){o.call(this),this._cache=new h,this._last=void 0,this._cipher=new l.AES(t),this._prev=s.from(i),this._mode=e,this._autopadding=!0}function h(){this.cache=s.allocUnsafe(0)}function u(e,t,i){var o=a[e.toLowerCase()];if(!o)throw new TypeError("invalid suite type");if("string"==typeof i&&(i=s.from(i)),"GCM"!==o.mode&&i.length!==o.iv)throw new TypeError("invalid iv length "+i.length);if("string"==typeof t&&(t=s.from(t)),t.length!==o.key/8)throw new TypeError("invalid key length "+t.length);return"stream"===o.type?new r(o.module,t,i,!0):"auth"===o.type?new n(o.module,t,i,!0):new d(o.module,t,i)}i(2)(d,o),d.prototype._update=function(e){this._cache.add(e);for(var t,i,n=[];t=this._cache.get(this._autopadding);)i=this._mode.decrypt(this,t),n.push(i);return s.concat(n)},d.prototype._final=function(){var e=this._cache.flush();if(this._autopadding)return function(e){var t=e[15];if(t<1||t>16)throw new Error("unable to decrypt data");for(var i=-1;++i<t;)if(e[i+(16-t)]!==t)throw new Error("unable to decrypt data");return 16===t?void 0:e.slice(0,16-t)}(this._mode.decrypt(this,e));if(e)throw new Error("data not multiple of block length")},d.prototype.setAutoPadding=function(e){return this._autopadding=!!e,this},h.prototype.add=function(e){this.cache=s.concat([this.cache,e])},h.prototype.get=function(e){var t;if(e){if(this.cache.length>16)return t=this.cache.slice(0,16),this.cache=this.cache.slice(16),t}else if(this.cache.length>=16)return t=this.cache.slice(0,16),this.cache=this.cache.slice(16),t;return null},h.prototype.flush=function(){if(this.cache.length)return this.cache},t.createDecipher=function(e,t){var i=a[e.toLowerCase()];if(!i)throw new TypeError("invalid suite type");var n=c(t,!1,i.key,i.iv);return u(e,n.key,n.iv)},t.createDecipheriv=u},function(e,t){t["des-ecb"]={key:8,iv:0},t["des-cbc"]=t.des={key:8,iv:8},t["des-ede3-cbc"]=t.des3={key:24,iv:8},t["des-ede3"]={key:24,iv:0},t["des-ede-cbc"]={key:16,iv:8},t["des-ede"]={key:16,iv:0}},function(e,t,i){(function(e){var n=i(98),s=i(191),a=i(192);var r={binary:!0,hex:!0,base64:!0};t.DiffieHellmanGroup=t.createDiffieHellmanGroup=t.getDiffieHellman=function(t){var i=new e(s[t].prime,"hex"),n=new e(s[t].gen,"hex");return new a(i,n)},t.createDiffieHellman=t.DiffieHellman=function t(i,s,o,l){return e.isBuffer(s)||void 0===r[s]?t(i,"binary",s,o):(s=s||"binary",l=l||"binary",o=o||new e([2]),e.isBuffer(o)||(o=new e(o,l)),"number"==typeof i?new a(n(i,o),o,!0):(e.isBuffer(i)||(i=new e(i,s)),new a(i,o,!0)))}}).call(this,i(6).Buffer)},function(e,t){},function(e,t){},function(e){e.exports={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}},function(e,t,i){(function(t){var n=i(5),s=new(i(99)),a=new n(24),r=new n(11),o=new n(10),l=new n(3),c=new n(7),d=i(98),h=i(16);function u(e,i){return i=i||"utf8",t.isBuffer(e)||(e=new t(e,i)),this._pub=new n(e),this}function p(e,i){return i=i||"utf8",t.isBuffer(e)||(e=new t(e,i)),this._priv=new n(e),this}e.exports=m;var f={};function m(e,t,i){this.setGenerator(t),this.__prime=new n(e),this._prime=n.mont(this.__prime),this._primeLen=e.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,i?(this.setPublicKey=u,this.setPrivateKey=p):this._primeCode=8}function g(e,i){var n=new t(e.toArray());return i?n.toString(i):n}Object.defineProperty(m.prototype,"verifyError",{enumerable:!0,get:function(){return"number"!=typeof this._primeCode&&(this._primeCode=function(e,t){var i=t.toString("hex"),n=[i,e.toString(16)].join("_");if(n in f)return f[n];var h,u=0;return!e.isEven()&&d.simpleSieve&&d.fermatTest(e)&&s.test(e)?(s.test(e.shrn(1))||(u+=2),"02"===i?e.mod(a).cmp(r)&&(u+=8):"05"===i?(h=e.mod(o)).cmp(l)&&h.cmp(c)&&(u+=8):u+=4,f[n]=u,u):(u+=1,u+="02"===i||"05"===i?8:4,f[n]=u,u)}(this.__prime,this.__gen)),this._primeCode}}),m.prototype.generateKeys=function(){return this._priv||=new n(h(this._primeLen)),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},m.prototype.computeSecret=function(e){var i=(e=(e=new n(e)).toRed(this._prime)).redPow(this._priv).fromRed(),s=new t(i.toArray()),a=this.getPrime();if(s.length<a.length){var r=new t(a.length-s.length);r.fill(0),s=t.concat([r,s])}return s},m.prototype.getPublicKey=function(e){return g(this._pub,e)},m.prototype.getPrivateKey=function(e){return g(this._priv,e)},m.prototype.getPrime=function(e){return g(this.__prime,e)},m.prototype.getGenerator=function(e){return g(this._gen,e)},m.prototype.setGenerator=function(e,i){return i=i||"utf8",t.isBuffer(e)||(e=new t(e,i)),this.__gen=e,this._gen=new n(e),this}}).call(this,i(6).Buffer)},function(e,t,i){var n=i(52).Buffer,s=i(20),a=i(69),r=i(2),o=i(194),l=i(225),c=i(85);function d(e){a.Writable.call(this);var t=c[e];if(!t)throw new Error("Unknown message digest");this._hashType=t.hash,this._hash=s(t.hash),this._tag=t.id,this._signType=t.sign}function h(e){a.Writable.call(this);var t=c[e];if(!t)throw new Error("Unknown message digest");this._hash=s(t.hash),this._tag=t.id,this._signType=t.sign}function u(e){return new d(e)}function p(e){return new h(e)}Object.keys(c).forEach((function(e){c[e].id=n.from(c[e].id,"hex"),c[e.toLowerCase()]=c[e]})),r(d,a.Writable),d.prototype._write=function(e,t,i){this._hash.update(e),i()},d.prototype.update=function(e,t){return"string"==typeof e&&(e=n.from(e,t)),this._hash.update(e),this},d.prototype.sign=function(e,t){this.end();var i=this._hash.digest(),n=o(i,e,this._hashType,this._signType,this._tag);return t?n.toString(t):n},r(h,a.Writable),h.prototype._write=function(e,t,i){this._hash.update(e),i()},h.prototype.update=function(e,t){return"string"==typeof e&&(e=n.from(e,t)),this._hash.update(e),this},h.prototype.verify=function(e,t,i){"string"==typeof t&&(t=n.from(t,i)),this.end();var s=this._hash.digest();return l(t,s,e,this._signType,this._tag)},e.exports={Sign:u,Verify:p,createSign:u,createVerify:p}},function(e,t,i){var n=i(52).Buffer,s=i(83),a=i(53),r=i(54).ec,o=i(105),l=i(34),c=i(111);function d(e,t,i,a){if((e=n.from(e.toArray())).length<t.byteLength()){var r=n.alloc(t.byteLength()-e.length);e=n.concat([r,e])}var o=i.length,l=function(e,t){e=(e=h(e,t)).mod(t);var i=n.from(e.toArray());if(i.length<t.byteLength()){var s=n.alloc(t.byteLength()-i.length);i=n.concat([s,i])}return i}(i,t),c=n.alloc(o);c.fill(1);var d=n.alloc(o);return d=s(a,d).update(c).update(n.from([0])).update(e).update(l).digest(),c=s(a,d).update(c).digest(),{k:d=s(a,d).update(c).update(n.from([1])).update(e).update(l).digest(),v:c=s(a,d).update(c).digest()}}function h(e,t){var i=new o(e),n=(e.length<<3)-t.bitLength();return n>0&&i.ishrn(n),i}function u(e,t,i){var a,r;do{for(a=n.alloc(0);8*a.length<e.bitLength();)t.v=s(i,t.k).update(t.v).digest(),a=n.concat([a,t.v]);r=h(a,e),t.k=s(i,t.k).update(t.v).update(n.from([0])).digest(),t.v=s(i,t.k).update(t.v).digest()}while(-1!==r.cmp(e));return r}function p(e,t,i,n){return e.toRed(o.mont(i)).redPow(t).fromRed().mod(n)}e.exports=function(e,t,i,s,f){var m=l(t);if(m.curve){if("ecdsa"!==s&&"ecdsa/rsa"!==s)throw new Error("wrong private key type");return function(e,t){var i=c[t.curve.join(".")];if(!i)throw new Error("unknown curve "+t.curve.join("."));var s=new r(i).keyFromPrivate(t.privateKey).sign(e);return n.from(s.toDER())}(e,m)}if("dsa"===m.type){if("dsa"!==s)throw new Error("wrong private key type");return function(e,t,i){for(var s,a=t.params.priv_key,r=t.params.p,l=t.params.q,c=t.params.g,f=new o(0),m=h(e,l).mod(l),g=!1,v=d(a,l,e,i);!1===g;)f=p(c,s=u(l,v,i),r,l),0===(g=s.invm(l).imul(m.add(a.mul(f))).mod(l)).cmpn(0)&&(g=!1,f=new o(0));return function(e,t){e=e.toArray(),t=t.toArray(),128&e[0]&&(e=[0].concat(e));128&t[0]&&(t=[0].concat(t));var i=[48,e.length+t.length+4,2,e.length];return i=i.concat(e,[2,t.length],t),n.from(i)}(f,g)}(e,m,i)}if("rsa"!==s&&"ecdsa/rsa"!==s)throw new Error("wrong private key type");e=n.concat([f,e]);for(var g=m.modulus.byteLength(),v=[0,1];e.length+v.length+1<g;)v.push(255);v.push(0);for(var y=-1;++y<e.length;)v.push(e[y]);return a(v,m)},e.exports.getKey=d,e.exports.makeKey=u},function(e,t,i){(function(e){!function(e,t){"use strict";function n(e,t){if(!e)throw new Error(t||"Assertion failed")}function s(e,t){function i(){}e.super_=t,i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}function a(e,t,i){return a.isBN(e)?e:(this.negative=0,this.words=null,this.length=0,this.red=null,void(null!==e&&("le"!==t&&"be"!==t||(i=t,t=10),this._init(e||0,t||10,i||"be"))))}function r(e,t){var i=e.charCodeAt(t);return i>=48&&i<=57?i-48:i>=65&&i<=70?i-55:i>=97&&i<=102?i-87:void n(!1,"Invalid character in "+e)}function o(e,t,i){var n=r(e,i);return i-1>=t&&(n|=r(e,i-1)<<4),n}function l(e,t,i,s){for(var a,r=0,o=0,l=Math.min(e.length,i),c=t;c<l;c++)r*=s,o=(a=e.charCodeAt(c)-48)>=49?a-49+10:a>=17?a-17+10:a,n(a>=0&&o<s,"Invalid character"),r+=o;return r}function c(e,t){e.words=t.words,e.length=t.length,e.negative=t.negative,e.red=t.red}function d(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}function h(e,t,i){i.negative=t.negative^e.negative;var n=e.length+t.length|0;i.length=n,n=n-1|0;var s=0|e.words[0],a=0|t.words[0],r=s*a,o=67108863&r,l=r/67108864|0;i.words[0]=o;for(var c=1;c<n;c++){for(var d,h=l>>>26,u=67108863&l,p=Math.min(c,t.length-1),f=Math.max(0,c-e.length+1);f<=p;f++)d=c-f|0,h+=(r=(s=0|e.words[d])*(a=0|t.words[f])+u)/67108864|0,u=67108863&r;i.words[c]=0|u,l=0|h}return 0===l?i.length--:i.words[c]=0|l,i._strip()}function u(e,t,i){var n;i.negative=t.negative^e.negative,i.length=e.length+t.length;for(var s=0,a=0,r=0;r<i.length-1;r++){n=a,a=0;for(var o=67108863&s,l=Math.min(r,t.length-1),c=Math.max(0,r-e.length+1);c<=l;c++){var d=r-c,h=(0|e.words[d])*(0|t.words[c]),u=67108863&h;o=67108863&(u=u+o|0),a+=(n=(n=n+(h/67108864|0)|0)+(u>>>26)|0)>>>26,n&=67108863}i.words[r]=o,s=n,n=a}return 0===s?i.length--:i.words[r]=s,i._strip()}function p(e,t,i){return u(e,t,i)}function f(e,t){this.x=e,this.y=t}function m(e,t){this.name=e,this.p=new a(t,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function g(){m.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function v(){m.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function y(){m.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function b(){m.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function w(e){if("string"==typeof e){var t=a._prime(e);this.m=t.p,this.prime=t}else n(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function x(e){w.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}var S;"object"==typeof e?e.exports=a:t.BN=a,a.BN=a,a.wordSize=26;try{S="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:i(196).Buffer}catch(e){}if(a.isBN=function(e){return!!(e instanceof a)||null!==e&&"object"==typeof e&&e.constructor.wordSize===a.wordSize&&Array.isArray(e.words)},a.max=function(e,t){return e.cmp(t)>0?e:t},a.min=function(e,t){return e.cmp(t)<0?e:t},a.prototype._init=function(e,t,i){if("number"==typeof e)return this._initNumber(e,t,i);if("object"==typeof e)return this._initArray(e,t,i);"hex"===t&&(t=16),n(t===(0|t)&&t>=2&&t<=36);var s=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(s++,this.negative=1),s<e.length&&(16===t?this._parseHex(e,s,i):(this._parseBase(e,t,s),"le"===i&&this._initArray(this.toArray(),t,i)))},a.prototype._initNumber=function(e,t,i){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(n(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),t,i)},a.prototype._initArray=function(e,t,i){if(n("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=Array(this.length);for(var s=0;s<this.length;s++)this.words[s]=0;var a,r,o=0;if("be"===i)for(s=e.length-1,a=0;s>=0;s-=3)r=e[s]|e[s-1]<<8|e[s-2]<<16,this.words[a]|=r<<o&67108863,this.words[a+1]=r>>>26-o&67108863,(o+=24)>=26&&(o-=26,a++);else if("le"===i)for(s=0,a=0;s<e.length;s+=3)r=e[s]|e[s+1]<<8|e[s+2]<<16,this.words[a]|=r<<o&67108863,this.words[a+1]=r>>>26-o&67108863,(o+=24)>=26&&(o-=26,a++);return this._strip()},a.prototype._parseHex=function(e,t,i){this.length=Math.ceil((e.length-t)/6),this.words=Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var s,a=0,r=0;if("be"===i)for(n=e.length-1;n>=t;n-=2)s=o(e,t,n)<<a,this.words[r]|=67108863&s,a>=18?(a-=18,r+=1,this.words[r]|=s>>>26):a+=8;else for(n=(e.length-t)%2==0?t+1:t;n<e.length;n+=2)s=o(e,t,n)<<a,this.words[r]|=67108863&s,a>=18?(a-=18,r+=1,this.words[r]|=s>>>26):a+=8;this._strip()},a.prototype._parseBase=function(e,t,i){this.words=[0],this.length=1;for(var n=0,s=1;s<=67108863;s*=t)n++;n--,s=s/t|0;for(var a=e.length-i,r=a%n,o=Math.min(a,a-r)+i,c=0,d=i;d<o;d+=n)c=l(e,d,d+n,t),this.imuln(s),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==r){var h=1;for(c=l(e,d,e.length,t),d=0;d<r;d++)h*=t;this.imuln(h),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this._strip()},a.prototype.copy=function(e){e.words=Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},a.prototype._move=function(e){c(e,this)},a.prototype.clone=function(){var e=new a(null);return this.copy(e),e},a.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},a.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},a.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{a.prototype[Symbol.for("nodejs.util.inspect.custom")]=d}catch(e){a.prototype.inspect=d}else a.prototype.inspect=d;var M=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],k=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],_=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function T(e,t,i){var n,s,a,r=e.words,o=t.words,l=i.words,c=0,d=0|r[0],h=8191&d,u=d>>>13,p=0|r[1],f=8191&p,m=p>>>13,g=0|r[2],v=8191&g,y=g>>>13,b=0|r[3],w=8191&b,x=b>>>13,S=0|r[4],M=8191&S,k=S>>>13,_=0|r[5],T=8191&_,C=_>>>13,I=0|r[6],A=8191&I,R=I>>>13,P=0|r[7],E=8191&P,D=P>>>13,O=0|r[8],L=8191&O,j=O>>>13,z=0|r[9],B=8191&z,N=z>>>13,F=0|o[0],H=8191&F,U=F>>>13,V=0|o[1],G=8191&V,W=V>>>13,q=0|o[2],Y=8191&q,K=q>>>13,X=0|o[3],Z=8191&X,J=X>>>13,Q=0|o[4],$=8191&Q,ee=Q>>>13,te=0|o[5],ie=8191&te,ne=te>>>13,se=0|o[6],ae=8191&se,re=se>>>13,oe=0|o[7],le=8191&oe,ce=oe>>>13,de=0|o[8],he=8191&de,ue=de>>>13,pe=0|o[9],fe=8191&pe,me=pe>>>13;i.negative=e.negative^t.negative,i.length=19;var ge=(c+(n=Math.imul(h,H))|0)+((8191&(s=(s=Math.imul(h,U))+Math.imul(u,H)|0))<<13)|0;c=((a=Math.imul(u,U))+(s>>>13)|0)+(ge>>>26)|0,ge&=67108863,n=Math.imul(f,H),s=(s=Math.imul(f,U))+Math.imul(m,H)|0,a=Math.imul(m,U);var ve=(c+(n=n+Math.imul(h,G)|0)|0)+((8191&(s=(s=s+Math.imul(h,W)|0)+Math.imul(u,G)|0))<<13)|0;c=((a=a+Math.imul(u,W)|0)+(s>>>13)|0)+(ve>>>26)|0,ve&=67108863,n=Math.imul(v,H),s=(s=Math.imul(v,U))+Math.imul(y,H)|0,a=Math.imul(y,U),n=n+Math.imul(f,G)|0,s=(s=s+Math.imul(f,W)|0)+Math.imul(m,G)|0,a=a+Math.imul(m,W)|0;var ye=(c+(n=n+Math.imul(h,Y)|0)|0)+((8191&(s=(s=s+Math.imul(h,K)|0)+Math.imul(u,Y)|0))<<13)|0;c=((a=a+Math.imul(u,K)|0)+(s>>>13)|0)+(ye>>>26)|0,ye&=67108863,n=Math.imul(w,H),s=(s=Math.imul(w,U))+Math.imul(x,H)|0,a=Math.imul(x,U),n=n+Math.imul(v,G)|0,s=(s=s+Math.imul(v,W)|0)+Math.imul(y,G)|0,a=a+Math.imul(y,W)|0,n=n+Math.imul(f,Y)|0,s=(s=s+Math.imul(f,K)|0)+Math.imul(m,Y)|0,a=a+Math.imul(m,K)|0;var be=(c+(n=n+Math.imul(h,Z)|0)|0)+((8191&(s=(s=s+Math.imul(h,J)|0)+Math.imul(u,Z)|0))<<13)|0;c=((a=a+Math.imul(u,J)|0)+(s>>>13)|0)+(be>>>26)|0,be&=67108863,n=Math.imul(M,H),s=(s=Math.imul(M,U))+Math.imul(k,H)|0,a=Math.imul(k,U),n=n+Math.imul(w,G)|0,s=(s=s+Math.imul(w,W)|0)+Math.imul(x,G)|0,a=a+Math.imul(x,W)|0,n=n+Math.imul(v,Y)|0,s=(s=s+Math.imul(v,K)|0)+Math.imul(y,Y)|0,a=a+Math.imul(y,K)|0,n=n+Math.imul(f,Z)|0,s=(s=s+Math.imul(f,J)|0)+Math.imul(m,Z)|0,a=a+Math.imul(m,J)|0;var we=(c+(n=n+Math.imul(h,$)|0)|0)+((8191&(s=(s=s+Math.imul(h,ee)|0)+Math.imul(u,$)|0))<<13)|0;c=((a=a+Math.imul(u,ee)|0)+(s>>>13)|0)+(we>>>26)|0,we&=67108863,n=Math.imul(T,H),s=(s=Math.imul(T,U))+Math.imul(C,H)|0,a=Math.imul(C,U),n=n+Math.imul(M,G)|0,s=(s=s+Math.imul(M,W)|0)+Math.imul(k,G)|0,a=a+Math.imul(k,W)|0,n=n+Math.imul(w,Y)|0,s=(s=s+Math.imul(w,K)|0)+Math.imul(x,Y)|0,a=a+Math.imul(x,K)|0,n=n+Math.imul(v,Z)|0,s=(s=s+Math.imul(v,J)|0)+Math.imul(y,Z)|0,a=a+Math.imul(y,J)|0,n=n+Math.imul(f,$)|0,s=(s=s+Math.imul(f,ee)|0)+Math.imul(m,$)|0,a=a+Math.imul(m,ee)|0;var xe=(c+(n=n+Math.imul(h,ie)|0)|0)+((8191&(s=(s=s+Math.imul(h,ne)|0)+Math.imul(u,ie)|0))<<13)|0;c=((a=a+Math.imul(u,ne)|0)+(s>>>13)|0)+(xe>>>26)|0,xe&=67108863,n=Math.imul(A,H),s=(s=Math.imul(A,U))+Math.imul(R,H)|0,a=Math.imul(R,U),n=n+Math.imul(T,G)|0,s=(s=s+Math.imul(T,W)|0)+Math.imul(C,G)|0,a=a+Math.imul(C,W)|0,n=n+Math.imul(M,Y)|0,s=(s=s+Math.imul(M,K)|0)+Math.imul(k,Y)|0,a=a+Math.imul(k,K)|0,n=n+Math.imul(w,Z)|0,s=(s=s+Math.imul(w,J)|0)+Math.imul(x,Z)|0,a=a+Math.imul(x,J)|0,n=n+Math.imul(v,$)|0,s=(s=s+Math.imul(v,ee)|0)+Math.imul(y,$)|0,a=a+Math.imul(y,ee)|0,n=n+Math.imul(f,ie)|0,s=(s=s+Math.imul(f,ne)|0)+Math.imul(m,ie)|0,a=a+Math.imul(m,ne)|0;var Se=(c+(n=n+Math.imul(h,ae)|0)|0)+((8191&(s=(s=s+Math.imul(h,re)|0)+Math.imul(u,ae)|0))<<13)|0;c=((a=a+Math.imul(u,re)|0)+(s>>>13)|0)+(Se>>>26)|0,Se&=67108863,n=Math.imul(E,H),s=(s=Math.imul(E,U))+Math.imul(D,H)|0,a=Math.imul(D,U),n=n+Math.imul(A,G)|0,s=(s=s+Math.imul(A,W)|0)+Math.imul(R,G)|0,a=a+Math.imul(R,W)|0,n=n+Math.imul(T,Y)|0,s=(s=s+Math.imul(T,K)|0)+Math.imul(C,Y)|0,a=a+Math.imul(C,K)|0,n=n+Math.imul(M,Z)|0,s=(s=s+Math.imul(M,J)|0)+Math.imul(k,Z)|0,a=a+Math.imul(k,J)|0,n=n+Math.imul(w,$)|0,s=(s=s+Math.imul(w,ee)|0)+Math.imul(x,$)|0,a=a+Math.imul(x,ee)|0,n=n+Math.imul(v,ie)|0,s=(s=s+Math.imul(v,ne)|0)+Math.imul(y,ie)|0,a=a+Math.imul(y,ne)|0,n=n+Math.imul(f,ae)|0,s=(s=s+Math.imul(f,re)|0)+Math.imul(m,ae)|0,a=a+Math.imul(m,re)|0;var Me=(c+(n=n+Math.imul(h,le)|0)|0)+((8191&(s=(s=s+Math.imul(h,ce)|0)+Math.imul(u,le)|0))<<13)|0;c=((a=a+Math.imul(u,ce)|0)+(s>>>13)|0)+(Me>>>26)|0,Me&=67108863,n=Math.imul(L,H),s=(s=Math.imul(L,U))+Math.imul(j,H)|0,a=Math.imul(j,U),n=n+Math.imul(E,G)|0,s=(s=s+Math.imul(E,W)|0)+Math.imul(D,G)|0,a=a+Math.imul(D,W)|0,n=n+Math.imul(A,Y)|0,s=(s=s+Math.imul(A,K)|0)+Math.imul(R,Y)|0,a=a+Math.imul(R,K)|0,n=n+Math.imul(T,Z)|0,s=(s=s+Math.imul(T,J)|0)+Math.imul(C,Z)|0,a=a+Math.imul(C,J)|0,n=n+Math.imul(M,$)|0,s=(s=s+Math.imul(M,ee)|0)+Math.imul(k,$)|0,a=a+Math.imul(k,ee)|0,n=n+Math.imul(w,ie)|0,s=(s=s+Math.imul(w,ne)|0)+Math.imul(x,ie)|0,a=a+Math.imul(x,ne)|0,n=n+Math.imul(v,ae)|0,s=(s=s+Math.imul(v,re)|0)+Math.imul(y,ae)|0,a=a+Math.imul(y,re)|0,n=n+Math.imul(f,le)|0,s=(s=s+Math.imul(f,ce)|0)+Math.imul(m,le)|0,a=a+Math.imul(m,ce)|0;var ke=(c+(n=n+Math.imul(h,he)|0)|0)+((8191&(s=(s=s+Math.imul(h,ue)|0)+Math.imul(u,he)|0))<<13)|0;c=((a=a+Math.imul(u,ue)|0)+(s>>>13)|0)+(ke>>>26)|0,ke&=67108863,n=Math.imul(B,H),s=(s=Math.imul(B,U))+Math.imul(N,H)|0,a=Math.imul(N,U),n=n+Math.imul(L,G)|0,s=(s=s+Math.imul(L,W)|0)+Math.imul(j,G)|0,a=a+Math.imul(j,W)|0,n=n+Math.imul(E,Y)|0,s=(s=s+Math.imul(E,K)|0)+Math.imul(D,Y)|0,a=a+Math.imul(D,K)|0,n=n+Math.imul(A,Z)|0,s=(s=s+Math.imul(A,J)|0)+Math.imul(R,Z)|0,a=a+Math.imul(R,J)|0,n=n+Math.imul(T,$)|0,s=(s=s+Math.imul(T,ee)|0)+Math.imul(C,$)|0,a=a+Math.imul(C,ee)|0,n=n+Math.imul(M,ie)|0,s=(s=s+Math.imul(M,ne)|0)+Math.imul(k,ie)|0,a=a+Math.imul(k,ne)|0,n=n+Math.imul(w,ae)|0,s=(s=s+Math.imul(w,re)|0)+Math.imul(x,ae)|0,a=a+Math.imul(x,re)|0,n=n+Math.imul(v,le)|0,s=(s=s+Math.imul(v,ce)|0)+Math.imul(y,le)|0,a=a+Math.imul(y,ce)|0,n=n+Math.imul(f,he)|0,s=(s=s+Math.imul(f,ue)|0)+Math.imul(m,he)|0,a=a+Math.imul(m,ue)|0;var _e=(c+(n=n+Math.imul(h,fe)|0)|0)+((8191&(s=(s=s+Math.imul(h,me)|0)+Math.imul(u,fe)|0))<<13)|0;c=((a=a+Math.imul(u,me)|0)+(s>>>13)|0)+(_e>>>26)|0,_e&=67108863,n=Math.imul(B,G),s=(s=Math.imul(B,W))+Math.imul(N,G)|0,a=Math.imul(N,W),n=n+Math.imul(L,Y)|0,s=(s=s+Math.imul(L,K)|0)+Math.imul(j,Y)|0,a=a+Math.imul(j,K)|0,n=n+Math.imul(E,Z)|0,s=(s=s+Math.imul(E,J)|0)+Math.imul(D,Z)|0,a=a+Math.imul(D,J)|0,n=n+Math.imul(A,$)|0,s=(s=s+Math.imul(A,ee)|0)+Math.imul(R,$)|0,a=a+Math.imul(R,ee)|0,n=n+Math.imul(T,ie)|0,s=(s=s+Math.imul(T,ne)|0)+Math.imul(C,ie)|0,a=a+Math.imul(C,ne)|0,n=n+Math.imul(M,ae)|0,s=(s=s+Math.imul(M,re)|0)+Math.imul(k,ae)|0,a=a+Math.imul(k,re)|0,n=n+Math.imul(w,le)|0,s=(s=s+Math.imul(w,ce)|0)+Math.imul(x,le)|0,a=a+Math.imul(x,ce)|0,n=n+Math.imul(v,he)|0,s=(s=s+Math.imul(v,ue)|0)+Math.imul(y,he)|0,a=a+Math.imul(y,ue)|0;var Te=(c+(n=n+Math.imul(f,fe)|0)|0)+((8191&(s=(s=s+Math.imul(f,me)|0)+Math.imul(m,fe)|0))<<13)|0;c=((a=a+Math.imul(m,me)|0)+(s>>>13)|0)+(Te>>>26)|0,Te&=67108863,n=Math.imul(B,Y),s=(s=Math.imul(B,K))+Math.imul(N,Y)|0,a=Math.imul(N,K),n=n+Math.imul(L,Z)|0,s=(s=s+Math.imul(L,J)|0)+Math.imul(j,Z)|0,a=a+Math.imul(j,J)|0,n=n+Math.imul(E,$)|0,s=(s=s+Math.imul(E,ee)|0)+Math.imul(D,$)|0,a=a+Math.imul(D,ee)|0,n=n+Math.imul(A,ie)|0,s=(s=s+Math.imul(A,ne)|0)+Math.imul(R,ie)|0,a=a+Math.imul(R,ne)|0,n=n+Math.imul(T,ae)|0,s=(s=s+Math.imul(T,re)|0)+Math.imul(C,ae)|0,a=a+Math.imul(C,re)|0,n=n+Math.imul(M,le)|0,s=(s=s+Math.imul(M,ce)|0)+Math.imul(k,le)|0,a=a+Math.imul(k,ce)|0,n=n+Math.imul(w,he)|0,s=(s=s+Math.imul(w,ue)|0)+Math.imul(x,he)|0,a=a+Math.imul(x,ue)|0;var Ce=(c+(n=n+Math.imul(v,fe)|0)|0)+((8191&(s=(s=s+Math.imul(v,me)|0)+Math.imul(y,fe)|0))<<13)|0;c=((a=a+Math.imul(y,me)|0)+(s>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,n=Math.imul(B,Z),s=(s=Math.imul(B,J))+Math.imul(N,Z)|0,a=Math.imul(N,J),n=n+Math.imul(L,$)|0,s=(s=s+Math.imul(L,ee)|0)+Math.imul(j,$)|0,a=a+Math.imul(j,ee)|0,n=n+Math.imul(E,ie)|0,s=(s=s+Math.imul(E,ne)|0)+Math.imul(D,ie)|0,a=a+Math.imul(D,ne)|0,n=n+Math.imul(A,ae)|0,s=(s=s+Math.imul(A,re)|0)+Math.imul(R,ae)|0,a=a+Math.imul(R,re)|0,n=n+Math.imul(T,le)|0,s=(s=s+Math.imul(T,ce)|0)+Math.imul(C,le)|0,a=a+Math.imul(C,ce)|0,n=n+Math.imul(M,he)|0,s=(s=s+Math.imul(M,ue)|0)+Math.imul(k,he)|0,a=a+Math.imul(k,ue)|0;var Ie=(c+(n=n+Math.imul(w,fe)|0)|0)+((8191&(s=(s=s+Math.imul(w,me)|0)+Math.imul(x,fe)|0))<<13)|0;c=((a=a+Math.imul(x,me)|0)+(s>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,n=Math.imul(B,$),s=(s=Math.imul(B,ee))+Math.imul(N,$)|0,a=Math.imul(N,ee),n=n+Math.imul(L,ie)|0,s=(s=s+Math.imul(L,ne)|0)+Math.imul(j,ie)|0,a=a+Math.imul(j,ne)|0,n=n+Math.imul(E,ae)|0,s=(s=s+Math.imul(E,re)|0)+Math.imul(D,ae)|0,a=a+Math.imul(D,re)|0,n=n+Math.imul(A,le)|0,s=(s=s+Math.imul(A,ce)|0)+Math.imul(R,le)|0,a=a+Math.imul(R,ce)|0,n=n+Math.imul(T,he)|0,s=(s=s+Math.imul(T,ue)|0)+Math.imul(C,he)|0,a=a+Math.imul(C,ue)|0;var Ae=(c+(n=n+Math.imul(M,fe)|0)|0)+((8191&(s=(s=s+Math.imul(M,me)|0)+Math.imul(k,fe)|0))<<13)|0;c=((a=a+Math.imul(k,me)|0)+(s>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,n=Math.imul(B,ie),s=(s=Math.imul(B,ne))+Math.imul(N,ie)|0,a=Math.imul(N,ne),n=n+Math.imul(L,ae)|0,s=(s=s+Math.imul(L,re)|0)+Math.imul(j,ae)|0,a=a+Math.imul(j,re)|0,n=n+Math.imul(E,le)|0,s=(s=s+Math.imul(E,ce)|0)+Math.imul(D,le)|0,a=a+Math.imul(D,ce)|0,n=n+Math.imul(A,he)|0,s=(s=s+Math.imul(A,ue)|0)+Math.imul(R,he)|0,a=a+Math.imul(R,ue)|0;var Re=(c+(n=n+Math.imul(T,fe)|0)|0)+((8191&(s=(s=s+Math.imul(T,me)|0)+Math.imul(C,fe)|0))<<13)|0;c=((a=a+Math.imul(C,me)|0)+(s>>>13)|0)+(Re>>>26)|0,Re&=67108863,n=Math.imul(B,ae),s=(s=Math.imul(B,re))+Math.imul(N,ae)|0,a=Math.imul(N,re),n=n+Math.imul(L,le)|0,s=(s=s+Math.imul(L,ce)|0)+Math.imul(j,le)|0,a=a+Math.imul(j,ce)|0,n=n+Math.imul(E,he)|0,s=(s=s+Math.imul(E,ue)|0)+Math.imul(D,he)|0,a=a+Math.imul(D,ue)|0;var Pe=(c+(n=n+Math.imul(A,fe)|0)|0)+((8191&(s=(s=s+Math.imul(A,me)|0)+Math.imul(R,fe)|0))<<13)|0;c=((a=a+Math.imul(R,me)|0)+(s>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,n=Math.imul(B,le),s=(s=Math.imul(B,ce))+Math.imul(N,le)|0,a=Math.imul(N,ce),n=n+Math.imul(L,he)|0,s=(s=s+Math.imul(L,ue)|0)+Math.imul(j,he)|0,a=a+Math.imul(j,ue)|0;var Ee=(c+(n=n+Math.imul(E,fe)|0)|0)+((8191&(s=(s=s+Math.imul(E,me)|0)+Math.imul(D,fe)|0))<<13)|0;c=((a=a+Math.imul(D,me)|0)+(s>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,n=Math.imul(B,he),s=(s=Math.imul(B,ue))+Math.imul(N,he)|0,a=Math.imul(N,ue);var De=(c+(n=n+Math.imul(L,fe)|0)|0)+((8191&(s=(s=s+Math.imul(L,me)|0)+Math.imul(j,fe)|0))<<13)|0;c=((a=a+Math.imul(j,me)|0)+(s>>>13)|0)+(De>>>26)|0,De&=67108863;var Oe=(c+(n=Math.imul(B,fe))|0)+((8191&(s=(s=Math.imul(B,me))+Math.imul(N,fe)|0))<<13)|0;return c=((a=Math.imul(N,me))+(s>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,l[0]=ge,l[1]=ve,l[2]=ye,l[3]=be,l[4]=we,l[5]=xe,l[6]=Se,l[7]=Me,l[8]=ke,l[9]=_e,l[10]=Te,l[11]=Ce,l[12]=Ie,l[13]=Ae,l[14]=Re,l[15]=Pe,l[16]=Ee,l[17]=De,l[18]=Oe,0!==c&&(l[19]=c,i.length++),i}a.prototype.toString=function(e,t){var i;if(t=0|t||1,16===(e=e||10)||"hex"===e){i="";for(var s=0,a=0,r=0;r<this.length;r++){var o=this.words[r],l=(16777215&(o<<s|a)).toString(16);a=o>>>24-s&16777215,(s+=2)>=26&&(s-=26,r--),i=0!==a||r!==this.length-1?M[6-l.length]+l+i:l+i}for(0!==a&&(i=a.toString(16)+i);i.length%t!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(e===(0|e)&&e>=2&&e<=36){var c=k[e],d=_[e];i="";var h=this.clone();for(h.negative=0;!h.isZero();){var u=h.modrn(d).toString(e);i=(h=h.idivn(d)).isZero()?u+i:M[c-u.length]+u+i}for(this.isZero()&&(i="0"+i);i.length%t!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}n(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0===this.negative?e:-e},a.prototype.toJSON=function(){return this.toString(16,2)},S&&(a.prototype.toBuffer=function(e,t){return this.toArrayLike(S,e,t)}),a.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},a.prototype.toArrayLike=function(e,t,i){this._strip();var s=this.byteLength(),a=i||Math.max(1,s);n(s<=a,"byte array longer than desired length"),n(a>0,"Requested array length <= 0");var r,o,l=(o=a,(r=e).allocUnsafe?r.allocUnsafe(o):new r(o));return this["_toArrayLike"+("le"===t?"LE":"BE")](l,s),l},a.prototype._toArrayLikeLE=function(e){for(var t,i=0,n=0,s=0,a=0;s<this.length;s++)t=this.words[s]<<a|n,e[i++]=255&t,i<e.length&&(e[i++]=t>>8&255),i<e.length&&(e[i++]=t>>16&255),6==a?(i<e.length&&(e[i++]=t>>24&255),n=0,a=0):(n=t>>>24,a+=2);if(i<e.length)for(e[i++]=n;i<e.length;)e[i++]=0},a.prototype._toArrayLikeBE=function(e){for(var t,i=e.length-1,n=0,s=0,a=0;s<this.length;s++)t=this.words[s]<<a|n,e[i--]=255&t,i>=0&&(e[i--]=t>>8&255),i>=0&&(e[i--]=t>>16&255),6==a?(i>=0&&(e[i--]=t>>24&255),n=0,a=0):(n=t>>>24,a+=2);if(i>=0)for(e[i--]=n;i>=0;)e[i--]=0},a.prototype._countBits=Math.clz32?function(e){return 32-Math.clz32(e)}:function(e){var t=e,i=0;return t>=4096&&(i+=13,t>>>=13),t>=64&&(i+=7,t>>>=7),t>=8&&(i+=4,t>>>=4),t>=2&&(i+=2,t>>>=2),i+t},a.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,i=0;return 0==(8191&t)&&(i+=13,t>>>=13),0==(127&t)&&(i+=7,t>>>=7),0==(15&t)&&(i+=4,t>>>=4),0==(3&t)&&(i+=2,t>>>=2),0==(1&t)&&i++,i},a.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e,t=0,i=0;i<this.length&&(t+=e=this._zeroBits(this.words[i]),26===e);i++);return t},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(e){return 0===this.negative?this.clone():this.abs().inotn(e).iaddn(1)},a.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return 0!==this.negative},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]|=e.words[t];return this._strip()},a.prototype.ior=function(e){return n(0==(this.negative|e.negative)),this.iuor(e)},a.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},a.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},a.prototype.iuand=function(e){for(var t=this.length>e.length?e:this,i=0;i<t.length;i++)this.words[i]&=e.words[i];return this.length=t.length,this._strip()},a.prototype.iand=function(e){return n(0==(this.negative|e.negative)),this.iuand(e)},a.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},a.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},a.prototype.iuxor=function(e){var t,i;this.length>e.length?(t=this,i=e):(t=e,i=this);for(var n=0;n<i.length;n++)this.words[n]=t.words[n]^i.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this._strip()},a.prototype.ixor=function(e){return n(0==(this.negative|e.negative)),this.iuxor(e)},a.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},a.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},a.prototype.inotn=function(e){n("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),i=e%26;this._expand(t),i>0&&t--;for(var s=0;s<t;s++)this.words[s]=67108863&~this.words[s];return i>0&&(this.words[s]=~this.words[s]&67108863>>26-i),this._strip()},a.prototype.notn=function(e){return this.clone().inotn(e)},a.prototype.setn=function(e,t){n("number"==typeof e&&e>=0);var i=e/26|0,s=e%26;return this._expand(i+1),t?this.words[i]|=1<<s:this.words[i]&=~(1<<s),this._strip()},a.prototype.iadd=function(e){var t,i,n;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(i=this,n=e):(i=e,n=this);for(var s=0,a=0;a<n.length;a++)t=(0|i.words[a])+(0|n.words[a])+s,this.words[a]=67108863&t,s=t>>>26;for(;0!==s&&a<i.length;a++)t=(0|i.words[a])+s,this.words[a]=67108863&t,s=t>>>26;if(this.length=i.length,0!==s)this.words[this.length]=s,this.length++;else if(i!==this)for(;a<i.length;a++)this.words[a]=i.words[a];return this},a.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},a.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var i,n,s=this.cmp(e);if(0===s)return this.negative=0,this.length=1,this.words[0]=0,this;s>0?(i=this,n=e):(i=e,n=this);for(var a=0,r=0;r<n.length;r++)a=(t=(0|i.words[r])-(0|n.words[r])+a)>>26,this.words[r]=67108863&t;for(;0!==a&&r<i.length;r++)a=(t=(0|i.words[r])+a)>>26,this.words[r]=67108863&t;if(0===a&&r<i.length&&i!==this)for(;r<i.length;r++)this.words[r]=i.words[r];return this.length=Math.max(this.length,r),i!==this&&(this.negative=1),this._strip()},a.prototype.sub=function(e){return this.clone().isub(e)},Math.imul||(T=h),a.prototype.mulTo=function(e,t){var i=this.length+e.length;return 10===this.length&&10===e.length?T(this,e,t):i<63?h(this,e,t):i<1024?u(this,e,t):p(this,e,t)},f.prototype.makeRBT=function(e){for(var t=Array(e),i=a.prototype._countBits(e)-1,n=0;n<e;n++)t[n]=this.revBin(n,i,e);return t},f.prototype.revBin=function(e,t,i){if(0===e||e===i-1)return e;for(var n=0,s=0;s<t;s++)n|=(1&e)<<t-s-1,e>>=1;return n},f.prototype.permute=function(e,t,i,n,s,a){for(var r=0;r<a;r++)n[r]=t[e[r]],s[r]=i[e[r]]},f.prototype.transform=function(e,t,i,n,s,a){this.permute(a,e,t,i,n,s);for(var r=1;r<s;r<<=1)for(var o=r<<1,l=Math.cos(2*Math.PI/o),c=Math.sin(2*Math.PI/o),d=0;d<s;d+=o)for(var h=l,u=c,p=0;p<r;p++){var f=i[d+p],m=n[d+p],g=i[d+p+r],v=n[d+p+r],y=h*g-u*v;v=h*v+u*g,g=y,i[d+p]=f+g,n[d+p]=m+v,i[d+p+r]=f-g,n[d+p+r]=m-v,p!==o&&(y=l*h-c*u,u=l*u+c*h,h=y)}},f.prototype.guessLen13b=function(e,t){var i=1|Math.max(t,e),n=1&i,s=0;for(i=i/2|0;i;i>>>=1)s++;return 1<<s+1+n},f.prototype.conjugate=function(e,t,i){if(i>1)for(var n,s=0;s<i/2;s++)n=e[s],e[s]=e[i-s-1],e[i-s-1]=n,n=t[s],t[s]=-t[i-s-1],t[i-s-1]=-n},f.prototype.normalize13b=function(e,t){for(var i,n=0,s=0;s<t/2;s++)i=8192*Math.round(e[2*s+1]/t)+Math.round(e[2*s]/t)+n,e[s]=67108863&i,n=i<67108864?0:i/67108864|0;return e},f.prototype.convert13b=function(e,t,i,s){for(var a=0,r=0;r<t;r++)a+=0|e[r],i[2*r]=8191&a,a>>>=13,i[2*r+1]=8191&a,a>>>=13;for(r=2*t;r<s;++r)i[r]=0;n(0===a),n(0==(-8192&a))},f.prototype.stub=function(e){for(var t=Array(e),i=0;i<e;i++)t[i]=0;return t},f.prototype.mulp=function(e,t,i){var n,s=2*this.guessLen13b(e.length,t.length),a=this.makeRBT(s),r=this.stub(s),o=Array(s),l=Array(s),c=Array(s),d=Array(s),h=Array(s),u=Array(s),p=i.words;p.length=s,this.convert13b(e.words,e.length,o,s),this.convert13b(t.words,t.length,d,s),this.transform(o,r,l,c,s,a),this.transform(d,r,h,u,s,a);for(var f=0;f<s;f++)n=l[f]*h[f]-c[f]*u[f],c[f]=l[f]*u[f]+c[f]*h[f],l[f]=n;return this.conjugate(l,c,s),this.transform(l,c,p,r,s,a),this.conjugate(p,r,s),this.normalize13b(p,s),i.negative=e.negative^t.negative,i.length=e.length+t.length,i._strip()},a.prototype.mul=function(e){var t=new a(null);return t.words=Array(this.length+e.length),this.mulTo(e,t)},a.prototype.mulf=function(e){var t=new a(null);return t.words=Array(this.length+e.length),p(this,e,t)},a.prototype.imul=function(e){return this.clone().mulTo(e,this)},a.prototype.imuln=function(e){var t=e<0;t&&(e=-e),n("number"==typeof e),n(e<67108864);for(var i=0,s=0;s<this.length;s++){var a=(0|this.words[s])*e,r=(67108863&a)+(67108863&i);i>>=26,i+=a/67108864|0,i+=r>>>26,this.words[s]=67108863&r}return 0!==i&&(this.words[s]=i,this.length++),t?this.ineg():this},a.prototype.muln=function(e){return this.clone().imuln(e)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(e){var t=function(e){for(var t=Array(e.bitLength()),i=0;i<t.length;i++){var n=i/26|0,s=i%26;t[i]=e.words[n]>>>s&1}return t}(e);if(0===t.length)return new a(1);for(var i=this,n=0;n<t.length&&0===t[n];i=i.sqr())n++;if(++n<t.length)for(var s=i.sqr();n<t.length;n++,s=s.sqr())0!==t[n]&&(i=i.mul(s));return i},a.prototype.iushln=function(e){var t;n("number"==typeof e&&e>=0);var i=e%26,s=(e-i)/26;if(0!=i){var a=0;for(t=0;t<this.length;t++){var r=this.words[t]&67108863>>>26-i<<26-i,o=(0|this.words[t])-r<<i;this.words[t]=o|a,a=r>>>26-i}a&&(this.words[t]=a,this.length++)}if(0!==s){for(t=this.length-1;t>=0;t--)this.words[t+s]=this.words[t];for(t=0;t<s;t++)this.words[t]=0;this.length+=s}return this._strip()},a.prototype.ishln=function(e){return n(0===this.negative),this.iushln(e)},a.prototype.iushrn=function(e,t,i){n("number"==typeof e&&e>=0);var s=t?(t-t%26)/26:0,a=e%26,r=Math.min((e-a)/26,this.length),o=i;if(s-=r,s=Math.max(0,s),o){for(var l=0;l<r;l++)o.words[l]=this.words[l];o.length=r}if(0===r);else if(this.length>r)for(this.length-=r,l=0;l<this.length;l++)this.words[l]=this.words[l+r];else this.words[0]=0,this.length=1;var c=0;for(l=this.length-1;l>=0&&(0!==c||l>=s);l--){var d=0|this.words[l];this.words[l]=c<<26-a|d>>>a,c=d&(67108863>>>a<<a^67108863)}return o&&0!==c&&(o.words[o.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},a.prototype.ishrn=function(e,t,i){return n(0===this.negative),this.iushrn(e,t,i)},a.prototype.shln=function(e){return this.clone().ishln(e)},a.prototype.ushln=function(e){return this.clone().iushln(e)},a.prototype.shrn=function(e){return this.clone().ishrn(e)},a.prototype.ushrn=function(e){return this.clone().iushrn(e)},a.prototype.testn=function(e){n("number"==typeof e&&e>=0);var t=e%26,i=(e-t)/26;return!(this.length<=i)&&!!(this.words[i]&1<<t)},a.prototype.imaskn=function(e){n("number"==typeof e&&e>=0);var t=e%26,i=(e-t)/26;return n(0===this.negative,"imaskn works only with positive numbers"),this.length<=i?this:(0!=t&&i++,this.length=Math.min(i,this.length),0!=t&&(this.words[this.length-1]&=67108863>>>t<<t^67108863),this._strip())},a.prototype.maskn=function(e){return this.clone().imaskn(e)},a.prototype.iaddn=function(e){return n("number"==typeof e),n(e<67108864),e<0?this.isubn(-e):0===this.negative?this._iaddn(e):1===this.length&&(0|this.words[0])<=e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this)},a.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t==this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},a.prototype.isubn=function(e){if(n("number"==typeof e),n(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this._strip()},a.prototype.addn=function(e){return this.clone().iaddn(e)},a.prototype.subn=function(e){return this.clone().isubn(e)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(e,t,i){var s,a,r=e.length+i;this._expand(r);var o=0;for(s=0;s<e.length;s++){a=(0|this.words[s+i])+o;var l=(0|e.words[s])*t;o=((a-=67108863&l)>>26)-(l/67108864|0),this.words[s+i]=67108863&a}for(;s<this.length-i;s++)o=(a=(0|this.words[s+i])+o)>>26,this.words[s+i]=67108863&a;if(0===o)return this._strip();for(n(-1===o),o=0,s=0;s<this.length;s++)o=(a=-(0|this.words[s])+o)>>26,this.words[s]=67108863&a;return this.negative=1,this._strip()},a.prototype._wordDiv=function(e,t){var i,n=(this.length,e.length),s=this.clone(),r=e,o=0|r.words[r.length-1];0!=(n=26-this._countBits(o))&&(r=r.ushln(n),s.iushln(n),o=0|r.words[r.length-1]);var l=s.length-r.length;if("mod"!==t){(i=new a(null)).length=l+1,i.words=Array(i.length);for(var c=0;c<i.length;c++)i.words[c]=0}var d,h=s.clone()._ishlnsubmul(r,1,l);0===h.negative&&(s=h,i&&(i.words[l]=1));for(var u=l-1;u>=0;u--){for(d=67108864*(0|s.words[r.length+u])+(0|s.words[r.length+u-1]),d=Math.min(d/o|0,67108863),s._ishlnsubmul(r,d,u);0!==s.negative;)d--,s.negative=0,s._ishlnsubmul(r,1,u),s.isZero()||(s.negative^=1);i&&(i.words[u]=d)}return i&&i._strip(),s._strip(),"div"!==t&&0!==n&&s.iushrn(n),{div:i||null,mod:s}},a.prototype.divmod=function(e,t,i){return n(!e.isZero()),this.isZero()?{div:new a(0),mod:new a(0)}:0!==this.negative&&0===e.negative?(o=this.neg().divmod(e,t),"mod"!==t&&(s=o.div.neg()),"div"!==t&&(r=o.mod.neg(),i&&0!==r.negative&&r.iadd(e)),{div:s,mod:r}):0===this.negative&&0!==e.negative?(o=this.divmod(e.neg(),t),"mod"!==t&&(s=o.div.neg()),{div:s,mod:o.mod}):0==(this.negative&e.negative)?e.length>this.length||this.cmp(e)<0?{div:new a(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new a(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new a(this.modrn(e.words[0]))}:this._wordDiv(e,t):(o=this.neg().divmod(e.neg(),t),"div"!==t&&(r=o.mod.neg(),i&&0!==r.negative&&r.isub(e)),{div:o.div,mod:r});var s,r,o},a.prototype.div=function(e){return this.divmod(e,"div",!1).div},a.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},a.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},a.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var i=0===t.div.negative?t.mod:t.mod.isub(e),n=e.ushrn(1),s=e.andln(1),a=i.cmp(n);return a<0||1===s&&0===a?t.div:0===t.div.negative?t.div.iaddn(1):t.div.isubn(1)},a.prototype.modrn=function(e){var t=e<0;t&&(e=-e),n(e<=67108863);for(var i=(1<<26)%e,s=0,a=this.length-1;a>=0;a--)s=(i*s+(0|this.words[a]))%e;return t?-s:s},a.prototype.modn=function(e){return this.modrn(e)},a.prototype.idivn=function(e){var t,i=e<0;i&&(e=-e),n(e<=67108863);for(var s=0,a=this.length-1;a>=0;a--)t=(0|this.words[a])+67108864*s,this.words[a]=t/e|0,s=t%e;return this._strip(),i?this.ineg():this},a.prototype.divn=function(e){return this.clone().idivn(e)},a.prototype.egcd=function(e){n(0===e.negative),n(!e.isZero());var t=this,i=e.clone();t=0===t.negative?t.clone():t.umod(e);for(var s=new a(1),r=new a(0),o=new a(0),l=new a(1),c=0;t.isEven()&&i.isEven();)t.iushrn(1),i.iushrn(1),++c;for(var d=i.clone(),h=t.clone();!t.isZero();){for(var u=0,p=1;0==(t.words[0]&p)&&u<26;p<<=1)++u;if(u>0)for(t.iushrn(u);u-- >0;)(s.isOdd()||r.isOdd())&&(s.iadd(d),r.isub(h)),s.iushrn(1),r.iushrn(1);for(var f=0,m=1;0==(i.words[0]&m)&&f<26;m<<=1)++f;if(f>0)for(i.iushrn(f);f-- >0;)(o.isOdd()||l.isOdd())&&(o.iadd(d),l.isub(h)),o.iushrn(1),l.iushrn(1);t.cmp(i)>=0?(t.isub(i),s.isub(o),r.isub(l)):(i.isub(t),o.isub(s),l.isub(r))}return{a:o,b:l,gcd:i.iushln(c)}},a.prototype._invmp=function(e){n(0===e.negative),n(!e.isZero());var t,i=this,s=e.clone();i=0===i.negative?i.clone():i.umod(e);for(var r=new a(1),o=new a(0),l=s.clone();i.cmpn(1)>0&&s.cmpn(1)>0;){for(var c=0,d=1;0==(i.words[0]&d)&&c<26;d<<=1)++c;if(c>0)for(i.iushrn(c);c-- >0;)r.isOdd()&&r.iadd(l),r.iushrn(1);for(var h=0,u=1;0==(s.words[0]&u)&&h<26;u<<=1)++h;if(h>0)for(s.iushrn(h);h-- >0;)o.isOdd()&&o.iadd(l),o.iushrn(1);i.cmp(s)>=0?(i.isub(s),r.isub(o)):(s.isub(i),o.isub(r))}return(t=0===i.cmpn(1)?r:o).cmpn(0)<0&&t.iadd(e),t},a.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),i=e.clone();t.negative=0,i.negative=0;for(var n=0;t.isEven()&&i.isEven();n++)t.iushrn(1),i.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;i.isEven();)i.iushrn(1);var s=t.cmp(i);if(s<0){var a=t;t=i,i=a}else if(0===s||0===i.cmpn(1))break;t.isub(i)}return i.iushln(n)},a.prototype.invm=function(e){return this.egcd(e).a.umod(e)},a.prototype.isEven=function(){return 0==(1&this.words[0])},a.prototype.isOdd=function(){return 1==(1&this.words[0])},a.prototype.andln=function(e){return this.words[0]&e},a.prototype.bincn=function(e){n("number"==typeof e);var t,i=e%26,s=(e-i)/26,a=1<<i;if(this.length<=s)return this._expand(s+1),this.words[s]|=a,this;for(var r=a,o=s;0!==r&&o<this.length;o++)t=0|this.words[o],r=(t+=r)>>>26,t&=67108863,this.words[o]=t;return 0!==r&&(this.words[o]=r,this.length++),this},a.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},a.prototype.cmpn=function(e){var t,i=e<0;if(0!==this.negative&&!i)return-1;if(0===this.negative&&i)return 1;if(this._strip(),this.length>1)t=1;else{i&&(e=-e),n(e<=67108863,"Number is too big");var s=0|this.words[0];t=s===e?0:s<e?-1:1}return 0===this.negative?t:0|-t},a.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0===this.negative?t:0|-t},a.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,i=this.length-1;i>=0;i--){var n=0|this.words[i],s=0|e.words[i];if(n!=s){n<s?t=-1:n>s&&(t=1);break}}return t},a.prototype.gtn=function(e){return 1===this.cmpn(e)},a.prototype.gt=function(e){return 1===this.cmp(e)},a.prototype.gten=function(e){return this.cmpn(e)>=0},a.prototype.gte=function(e){return this.cmp(e)>=0},a.prototype.ltn=function(e){return-1===this.cmpn(e)},a.prototype.lt=function(e){return-1===this.cmp(e)},a.prototype.lten=function(e){return this.cmpn(e)<=0},a.prototype.lte=function(e){return this.cmp(e)<=0},a.prototype.eqn=function(e){return 0===this.cmpn(e)},a.prototype.eq=function(e){return 0===this.cmp(e)},a.red=function(e){return new w(e)},a.prototype.toRed=function(e){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},a.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(e){return this.red=e,this},a.prototype.forceRed=function(e){return n(!this.red,"Already a number in reduction context"),this._forceRed(e)},a.prototype.redAdd=function(e){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},a.prototype.redIAdd=function(e){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},a.prototype.redSub=function(e){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},a.prototype.redISub=function(e){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},a.prototype.redShl=function(e){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},a.prototype.redMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},a.prototype.redIMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},a.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(e){return n(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var C={k256:null,p224:null,p192:null,p25519:null};m.prototype._tmp=function(){var e=new a(null);return e.words=Array(Math.ceil(this.n/13)),e},m.prototype.ireduce=function(e){var t,i=e;do{this.split(i,this.tmp),t=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength()}while(t>this.n);var n=t<this.n?-1:i.ucmp(this.p);return 0===n?(i.words[0]=0,i.length=1):n>0?i.isub(this.p):void 0===i.strip?i._strip():i.strip(),i},m.prototype.split=function(e,t){e.iushrn(this.n,0,t)},m.prototype.imulK=function(e){return e.imul(this.k)},s(g,m),g.prototype.split=function(e,t){for(var i=4194303,n=Math.min(e.length,9),s=0;s<n;s++)t.words[s]=e.words[s];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var a=e.words[9];for(t.words[t.length++]=a&i,s=10;s<e.length;s++){var r=0|e.words[s];e.words[s-10]=(r&i)<<4|a>>>22,a=r}a>>>=22,e.words[s-10]=a,e.length-=0===a&&e.length>10?10:9},g.prototype.imulK=function(e){var t;e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var i=0,n=0;n<e.length;n++)i+=977*(t=0|e.words[n]),e.words[n]=67108863&i,i=64*t+(i/67108864|0);return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},s(v,m),s(y,m),s(b,m),b.prototype.imulK=function(e){for(var t=0,i=0;i<e.length;i++){var n=19*(0|e.words[i])+t,s=67108863&n;n>>>=26,e.words[i]=s,t=n}return 0!==t&&(e.words[e.length++]=t),e},a._prime=function(e){if(C[e])return C[e];var t;if("k256"===e)t=new g;else if("p224"===e)t=new v;else if("p192"===e)t=new y;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new b}return C[e]=t,t},w.prototype._verify1=function(e){n(0===e.negative,"red works only with positives"),n(e.red,"red works only with red numbers")},w.prototype._verify2=function(e,t){n(0==(e.negative|t.negative),"red works only with positives"),n(e.red&&e.red===t.red,"red works only with red numbers")},w.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):(c(e,e.umod(this.m)._forceRed(this)),e)},w.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},w.prototype.add=function(e,t){this._verify2(e,t);var i=e.add(t);return i.cmp(this.m)>=0&&i.isub(this.m),i._forceRed(this)},w.prototype.iadd=function(e,t){this._verify2(e,t);var i=e.iadd(t);return i.cmp(this.m)>=0&&i.isub(this.m),i},w.prototype.sub=function(e,t){this._verify2(e,t);var i=e.sub(t);return i.cmpn(0)<0&&i.iadd(this.m),i._forceRed(this)},w.prototype.isub=function(e,t){this._verify2(e,t);var i=e.isub(t);return i.cmpn(0)<0&&i.iadd(this.m),i},w.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},w.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},w.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},w.prototype.isqr=function(e){return this.imul(e,e.clone())},w.prototype.sqr=function(e){return this.mul(e,e)},w.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(n(t%2==1),3===t){var i=this.m.add(new a(1)).iushrn(2);return this.pow(e,i)}for(var s=this.m.subn(1),r=0;!s.isZero()&&0===s.andln(1);)r++,s.iushrn(1);n(!s.isZero());var o=new a(1).toRed(this),l=o.redNeg(),c=this.m.subn(1).iushrn(1),d=this.m.bitLength();for(d=new a(2*d*d).toRed(this);0!==this.pow(d,c).cmp(l);)d.redIAdd(l);for(var h=this.pow(d,s),u=this.pow(e,s.addn(1).iushrn(1)),p=this.pow(e,s),f=r;0!==p.cmp(o);){for(var m=p,g=0;0!==m.cmp(o);g++)m=m.redSqr();n(g<f);var v=this.pow(h,new a(1).iushln(f-g-1));u=u.redMul(v),h=v.redSqr(),p=p.redMul(h),f=g}return u},w.prototype.invm=function(e){var t=e._invmp(this.m);return 0===t.negative?this.imod(t):(t.negative=0,this.imod(t).redNeg())},w.prototype.pow=function(e,t){if(t.isZero())return new a(1).toRed(this);if(0===t.cmpn(1))return e.clone();var i=Array(16);i[0]=new a(1).toRed(this),i[1]=e;for(var n=2;n<i.length;n++)i[n]=this.mul(i[n-1],e);var s=i[0],r=0,o=0,l=t.bitLength()%26;for(0===l&&(l=26),n=t.length-1;n>=0;n--){for(var c,d=t.words[n],h=l-1;h>=0;h--)c=d>>h&1,s!==i[0]&&(s=this.sqr(s)),0!==c||0!==r?(r<<=1,r|=c,(4===++o||0===n&&0===h)&&(s=this.mul(s,i[r]),o=0,r=0)):o=0;l=26}return s},w.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},w.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},a.mont=function(e){return new x(e)},s(x,w),x.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},x.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},x.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var i=e.imul(t),n=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),s=i.isub(n).iushrn(this.shift),a=s;return s.cmp(this.m)>=0?a=s.isub(this.m):s.cmpn(0)<0&&(a=s.iadd(this.m)),a._forceRed(this)},x.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new a(0)._forceRed(this);var i=e.mul(t),n=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),s=i.isub(n).iushrn(this.shift),r=s;return s.cmp(this.m)>=0?r=s.isub(this.m):s.cmpn(0)<0&&(r=s.iadd(this.m)),r._forceRed(this)},x.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e,this)}).call(this,i(50)(e))},function(e,t){},function(e){e.exports={name:"elliptic",version:"6.5.4",description:"EC cryptography",main:"lib/elliptic.js",files:["lib"],scripts:{lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository:{type:"git",url:"git@github.com:indutny/elliptic"},keywords:["EC","Elliptic","curve","Cryptography"],author:"Fedor Indutny <fedor@indutny.com>",license:"MIT",bugs:{url:"https://github.com/indutny/elliptic/issues"},homepage:"https://github.com/indutny/elliptic",devDependencies:{brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies:{"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"},_resolved:"https://registry.npmjs.org/elliptic/-/elliptic-6.5.4.tgz",_integrity:"sha512-iLhC6ULemrljPZb+QutR5TQGB+pdW6KGD5RSegS+8sorOZT+rdQFbsQFJgvN3eRqNALqJer4oQ16YvJHlU8hzQ==",_from:"elliptic@6.5.4"}},function(e,t,i){"use strict";var n=i(10),s=i(5),a=i(2),r=i(33),o=n.assert;function l(e){r.call(this,"short",e),this.a=new s(e.a,16).toRed(this.red),this.b=new s(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=[,,,,],this._endoWnafT2=[,,,,]}function c(e,t,i,n){r.BasePoint.call(this,e,"affine"),null===t&&null===i?(this.x=null,this.y=null,this.inf=!0):(this.x=new s(t,16),this.y=new s(i,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function d(e,t,i,n){r.BasePoint.call(this,e,"jacobian"),null===t&&null===i&&null===n?(this.x=this.curve.one,this.y=this.curve.one,this.z=new s(0)):(this.x=new s(t,16),this.y=new s(i,16),this.z=new s(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}a(l,r),e.exports=l,l.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,i;if(e.beta)t=new s(e.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);t=(t=n[0].cmp(n[1])<0?n[0]:n[1]).toRed(this.red)}if(e.lambda)i=new s(e.lambda,16);else{var a=this._getEndoRoots(this.n);0===this.g.mul(a[0]).x.cmp(this.g.x.redMul(t))?i=a[0]:(i=a[1],o(0===this.g.mul(i).x.cmp(this.g.x.redMul(t))))}return{beta:t,lambda:i,basis:e.basis?e.basis.map((function(e){return{a:new s(e.a,16),b:new s(e.b,16)}})):this._getEndoBasis(i)}}},l.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:s.mont(e),i=new s(2).toRed(t).redInvm(),n=i.redNeg(),a=new s(3).toRed(t).redNeg().redSqrt().redMul(i);return[n.redAdd(a).fromRed(),n.redSub(a).fromRed()]},l.prototype._getEndoBasis=function(e){for(var t,i,n,a,r,o,l,c,d,h,u=this.n.ushrn(Math.floor(this.n.bitLength()/2)),p=e,f=this.n.clone(),m=new s(1),g=new s(0),v=new s(0),y=new s(1),b=0;0!==p.cmpn(0);){h=f.div(p),c=f.sub(h.mul(p)),d=v.sub(h.mul(m));var w=y.sub(h.mul(g));if(!n&&c.cmp(u)<0)t=l.neg(),i=m,n=c.neg(),a=d;else if(n&&2==++b)break;l=c,f=p,p=c,v=m,m=d,y=g,g=w}r=c.neg(),o=d;var x=n.sqr().add(a.sqr());return r.sqr().add(o.sqr()).cmp(x)>=0&&(r=t,o=i),n.negative&&(n=n.neg(),a=a.neg()),r.negative&&(r=r.neg(),o=o.neg()),[{a:n,b:a},{a:r,b:o}]},l.prototype._endoSplit=function(e){var t=this.endo.basis,i=t[0],n=t[1],s=n.b.mul(e).divRound(this.n),a=i.b.neg().mul(e).divRound(this.n),r=s.mul(i.a),o=a.mul(n.a),l=s.mul(i.b),c=a.mul(n.b);return{k1:e.sub(r).sub(o),k2:l.add(c).neg()}},l.prototype.pointFromX=function(e,t){(e=new s(e,16)).red||(e=e.toRed(this.red));var i=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),n=i.redSqrt();if(0!==n.redSqr().redSub(i).cmp(this.zero))throw new Error("invalid point");var a=n.fromRed().isOdd();return(t&&!a||!t&&a)&&(n=n.redNeg()),this.point(e,n)},l.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,i=e.y,n=this.a.redMul(t),s=t.redSqr().redMul(t).redIAdd(n).redIAdd(this.b);return 0===i.redSqr().redISub(s).cmpn(0)},l.prototype._endoWnafMulAdd=function(e,t,i){for(var n=this._endoWnafT1,s=this._endoWnafT2,a=0;a<e.length;a++){var r=this._endoSplit(t[a]),o=e[a],l=o._getBeta();r.k1.negative&&(r.k1.ineg(),o=o.neg(!0)),r.k2.negative&&(r.k2.ineg(),l=l.neg(!0)),n[2*a]=o,n[2*a+1]=l,s[2*a]=r.k1,s[2*a+1]=r.k2}for(var c=this._wnafMulAdd(1,n,s,2*a,i),d=0;d<2*a;d++)n[d]=null,s[d]=null;return c},a(c,r.BasePoint),l.prototype.point=function(e,t,i){return new c(this,e,t,i)},l.prototype.pointFromJSON=function(e,t){return c.fromJSON(this,e,t)},c.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var i=this.curve;function n(e){return i.point(e.x.redMul(i.endo.beta),e.y)}e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(n)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(n)}}}return t}},c.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},c.fromJSON=function(e,t,i){function n(t){return e.point(t[0],t[1],i)}"string"==typeof t&&(t=JSON.parse(t));var s=e.point(t[0],t[1],i);if(!t[2])return s;var a=t[2];return s.precomputed={beta:null,doubles:a.doubles&&{step:a.doubles.step,points:[s].concat(a.doubles.points.map(n))},naf:a.naf&&{wnd:a.naf.wnd,points:[s].concat(a.naf.points.map(n))}},s},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return this.inf},c.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var i=t.redSqr().redISub(this.x).redISub(e.x),n=t.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,n)},c.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,i=this.x.redSqr(),n=e.redInvm(),s=i.redAdd(i).redIAdd(i).redIAdd(t).redMul(n),a=s.redSqr().redISub(this.x.redAdd(this.x)),r=s.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,r)},c.prototype.getX=function(){return this.x.fromRed()},c.prototype.getY=function(){return this.y.fromRed()},c.prototype.mul=function(e){return e=new s(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},c.prototype.mulAdd=function(e,t,i){var n=[this,t],s=[e,i];return this.curve.endo?this.curve._endoWnafMulAdd(n,s):this.curve._wnafMulAdd(1,n,s,2)},c.prototype.jmulAdd=function(e,t,i){var n=[this,t],s=[e,i];return this.curve.endo?this.curve._endoWnafMulAdd(n,s,!0):this.curve._wnafMulAdd(1,n,s,2,!0)},c.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},c.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var i=this.precomputed;function n(e){return e.neg()}t.precomputed={naf:i.naf&&{wnd:i.naf.wnd,points:i.naf.points.map(n)},doubles:i.doubles&&{step:i.doubles.step,points:i.doubles.points.map(n)}}}return t},c.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},a(d,r.BasePoint),l.prototype.jpoint=function(e,t,i){return new d(this,e,t,i)},d.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),i=this.x.redMul(t),n=this.y.redMul(t).redMul(e);return this.curve.point(i,n)},d.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},d.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),i=this.z.redSqr(),n=this.x.redMul(t),s=e.x.redMul(i),a=this.y.redMul(t.redMul(e.z)),r=e.y.redMul(i.redMul(this.z)),o=n.redSub(s),l=a.redSub(r);if(0===o.cmpn(0))return 0===l.cmpn(0)?this.dbl():this.curve.jpoint(null,null,null);var c=o.redSqr(),d=c.redMul(o),h=n.redMul(c),u=l.redSqr().redIAdd(d).redISub(h).redISub(h),p=l.redMul(h.redISub(u)).redISub(a.redMul(d)),f=this.z.redMul(e.z).redMul(o);return this.curve.jpoint(u,p,f)},d.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),i=this.x,n=e.x.redMul(t),s=this.y,a=e.y.redMul(t).redMul(this.z),r=i.redSub(n),o=s.redSub(a);if(0===r.cmpn(0))return 0===o.cmpn(0)?this.dbl():this.curve.jpoint(null,null,null);var l=r.redSqr(),c=l.redMul(r),d=i.redMul(l),h=o.redSqr().redIAdd(c).redISub(d).redISub(d),u=o.redMul(d.redISub(h)).redISub(s.redMul(c)),p=this.z.redMul(r);return this.curve.jpoint(h,u,p)},d.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var i=this;for(t=0;t<e;t++)i=i.dbl();return i}var n=this.curve.a,s=this.curve.tinv,a=this.x,r=this.y,o=this.z,l=o.redSqr().redSqr(),c=r.redAdd(r);for(t=0;t<e;t++){var d=a.redSqr(),h=c.redSqr(),u=h.redSqr(),p=d.redAdd(d).redIAdd(d).redIAdd(n.redMul(l)),f=a.redMul(h),m=p.redSqr().redISub(f.redAdd(f)),g=f.redISub(m),v=p.redMul(g);v=v.redIAdd(v).redISub(u);var y=c.redMul(o);t+1<e&&(l=l.redMul(u)),a=m,o=y,c=v}return this.curve.jpoint(a,c.redMul(s),o)},d.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},d.prototype._zeroDbl=function(){var e,t,i;if(this.zOne){var n=this.x.redSqr(),s=this.y.redSqr(),a=s.redSqr(),r=this.x.redAdd(s).redSqr().redISub(n).redISub(a);r=r.redIAdd(r);var o=n.redAdd(n).redIAdd(n),l=o.redSqr().redISub(r).redISub(r),c=a.redIAdd(a);c=(c=c.redIAdd(c)).redIAdd(c),e=l,t=o.redMul(r.redISub(l)).redISub(c),i=this.y.redAdd(this.y)}else{var d=this.x.redSqr(),h=this.y.redSqr(),u=h.redSqr(),p=this.x.redAdd(h).redSqr().redISub(d).redISub(u);p=p.redIAdd(p);var f=d.redAdd(d).redIAdd(d),m=f.redSqr(),g=u.redIAdd(u);g=(g=g.redIAdd(g)).redIAdd(g),e=m.redISub(p).redISub(p),t=f.redMul(p.redISub(e)).redISub(g),i=(i=this.y.redMul(this.z)).redIAdd(i)}return this.curve.jpoint(e,t,i)},d.prototype._threeDbl=function(){var e,t,i;if(this.zOne){var n=this.x.redSqr(),s=this.y.redSqr(),a=s.redSqr(),r=this.x.redAdd(s).redSqr().redISub(n).redISub(a);r=r.redIAdd(r);var o=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),l=o.redSqr().redISub(r).redISub(r);e=l;var c=a.redIAdd(a);c=(c=c.redIAdd(c)).redIAdd(c),t=o.redMul(r.redISub(l)).redISub(c),i=this.y.redAdd(this.y)}else{var d=this.z.redSqr(),h=this.y.redSqr(),u=this.x.redMul(h),p=this.x.redSub(d).redMul(this.x.redAdd(d));p=p.redAdd(p).redIAdd(p);var f=u.redIAdd(u),m=(f=f.redIAdd(f)).redAdd(f);e=p.redSqr().redISub(m),i=this.y.redAdd(this.z).redSqr().redISub(h).redISub(d);var g=h.redSqr();g=(g=(g=g.redIAdd(g)).redIAdd(g)).redIAdd(g),t=p.redMul(f.redISub(e)).redISub(g)}return this.curve.jpoint(e,t,i)},d.prototype._dbl=function(){var e=this.curve.a,t=this.x,i=this.y,n=this.z,s=n.redSqr().redSqr(),a=t.redSqr(),r=i.redSqr(),o=a.redAdd(a).redIAdd(a).redIAdd(e.redMul(s)),l=t.redAdd(t),c=(l=l.redIAdd(l)).redMul(r),d=o.redSqr().redISub(c.redAdd(c)),h=c.redISub(d),u=r.redSqr();u=(u=(u=u.redIAdd(u)).redIAdd(u)).redIAdd(u);var p=o.redMul(h).redISub(u),f=i.redAdd(i).redMul(n);return this.curve.jpoint(d,p,f)},d.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),i=this.z.redSqr(),n=t.redSqr(),s=e.redAdd(e).redIAdd(e),a=s.redSqr(),r=this.x.redAdd(t).redSqr().redISub(e).redISub(n),o=(r=(r=(r=r.redIAdd(r)).redAdd(r).redIAdd(r)).redISub(a)).redSqr(),l=n.redIAdd(n);l=(l=(l=l.redIAdd(l)).redIAdd(l)).redIAdd(l);var c=s.redIAdd(r).redSqr().redISub(a).redISub(o).redISub(l),d=t.redMul(c);d=(d=d.redIAdd(d)).redIAdd(d);var h=this.x.redMul(o).redISub(d);h=(h=h.redIAdd(h)).redIAdd(h);var u=this.y.redMul(c.redMul(l.redISub(c)).redISub(r.redMul(o)));u=(u=(u=u.redIAdd(u)).redIAdd(u)).redIAdd(u);var p=this.z.redAdd(r).redSqr().redISub(i).redISub(o);return this.curve.jpoint(h,u,p)},d.prototype.mul=function(e,t){return e=new s(e,t),this.curve._wnafMul(this,e)},d.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),i=e.z.redSqr();if(0!==this.x.redMul(i).redISub(e.x.redMul(t)).cmpn(0))return!1;var n=t.redMul(this.z),s=i.redMul(e.z);return 0===this.y.redMul(s).redISub(e.y.redMul(n)).cmpn(0)},d.prototype.eqXToP=function(e){var t=this.z.redSqr(),i=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(i))return!0;for(var n=e.clone(),s=this.curve.redN.redMul(t);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(i.redIAdd(s),0===this.x.cmp(i))return!0}},d.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},d.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},function(e,t,i){"use strict";var n=i(5),s=i(2),a=i(33),r=i(10);function o(e){a.call(this,"mont",e),this.a=new n(e.a,16).toRed(this.red),this.b=new n(e.b,16).toRed(this.red),this.i4=new n(4).toRed(this.red).redInvm(),this.two=new n(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function l(e,t,i){a.BasePoint.call(this,e,"projective"),null===t&&null===i?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new n(t,16),this.z=new n(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}s(o,a),e.exports=o,o.prototype.validate=function(e){var t=e.normalize().x,i=t.redSqr(),n=i.redMul(t).redAdd(i.redMul(this.a)).redAdd(t);return 0===n.redSqrt().redSqr().cmp(n)},s(l,a.BasePoint),o.prototype.decodePoint=function(e,t){return this.point(r.toArray(e,t),1)},o.prototype.point=function(e,t){return new l(this,e,t)},o.prototype.pointFromJSON=function(e){return l.fromJSON(this,e)},l.prototype.precompute=function(){},l.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},l.fromJSON=function(e,t){return new l(e,t[0],t[1]||e.one)},l.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},l.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},l.prototype.dbl=function(){var e=this.x.redAdd(this.z).redSqr(),t=this.x.redSub(this.z).redSqr(),i=e.redSub(t),n=e.redMul(t),s=i.redMul(t.redAdd(this.curve.a24.redMul(i)));return this.curve.point(n,s)},l.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},l.prototype.diffAdd=function(e,t){var i=this.x.redAdd(this.z),n=this.x.redSub(this.z),s=e.x.redAdd(e.z),a=e.x.redSub(e.z).redMul(i),r=s.redMul(n),o=t.z.redMul(a.redAdd(r).redSqr()),l=t.x.redMul(a.redISub(r).redSqr());return this.curve.point(o,l)},l.prototype.mul=function(e){for(var t=e.clone(),i=this,n=this.curve.point(null,null),s=[];0!==t.cmpn(0);t.iushrn(1))s.push(t.andln(1));for(var a=s.length-1;a>=0;a--)0===s[a]?(i=i.diffAdd(n,this),n=n.dbl()):(n=i.diffAdd(n,this),i=i.dbl());return n},l.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},l.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},l.prototype.eq=function(e){return 0===this.getX().cmp(e.getX())},l.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},l.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},function(e,t,i){"use strict";var n=i(10),s=i(5),a=i(2),r=i(33),o=n.assert;function l(e){this.twisted=1!=(0|e.a),this.mOneA=this.twisted&&-1==(0|e.a),this.extended=this.mOneA,r.call(this,"edwards",e),this.a=new s(e.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new s(e.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new s(e.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),o(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|e.c)}function c(e,t,i,n,a){r.BasePoint.call(this,e,"projective"),null===t&&null===i&&null===n?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new s(t,16),this.y=new s(i,16),this.z=n?new s(n,16):this.curve.one,this.t=a&&new s(a,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}a(l,r),e.exports=l,l.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)},l.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)},l.prototype.jpoint=function(e,t,i,n){return this.point(e,t,i,n)},l.prototype.pointFromX=function(e,t){(e=new s(e,16)).red||(e=e.toRed(this.red));var i=e.redSqr(),n=this.c2.redSub(this.a.redMul(i)),a=this.one.redSub(this.c2.redMul(this.d).redMul(i)),r=n.redMul(a.redInvm()),o=r.redSqrt();if(0!==o.redSqr().redSub(r).cmp(this.zero))throw new Error("invalid point");var l=o.fromRed().isOdd();return(t&&!l||!t&&l)&&(o=o.redNeg()),this.point(e,o)},l.prototype.pointFromY=function(e,t){(e=new s(e,16)).red||(e=e.toRed(this.red));var i=e.redSqr(),n=i.redSub(this.c2),a=i.redMul(this.d).redMul(this.c2).redSub(this.a),r=n.redMul(a.redInvm());if(0===r.cmp(this.zero)){if(t)throw new Error("invalid point");return this.point(this.zero,e)}var o=r.redSqrt();if(0!==o.redSqr().redSub(r).cmp(this.zero))throw new Error("invalid point");return o.fromRed().isOdd()!==t&&(o=o.redNeg()),this.point(o,e)},l.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),i=e.y.redSqr(),n=t.redMul(this.a).redAdd(i),s=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(i)));return 0===n.cmp(s)},a(c,r.BasePoint),l.prototype.pointFromJSON=function(e){return c.fromJSON(this,e)},l.prototype.point=function(e,t,i,n){return new c(this,e,t,i,n)},c.fromJSON=function(e,t){return new c(e,t[0],t[1],t[2])},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},c.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),i=this.z.redSqr();i=i.redIAdd(i);var n=this.curve._mulA(e),s=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),a=n.redAdd(t),r=a.redSub(i),o=n.redSub(t),l=s.redMul(r),c=a.redMul(o),d=s.redMul(o),h=r.redMul(a);return this.curve.point(l,c,h,d)},c.prototype._projDbl=function(){var e,t,i,n,s,a,r=this.x.redAdd(this.y).redSqr(),o=this.x.redSqr(),l=this.y.redSqr();if(this.curve.twisted){var c=(n=this.curve._mulA(o)).redAdd(l);this.zOne?(e=r.redSub(o).redSub(l).redMul(c.redSub(this.curve.two)),t=c.redMul(n.redSub(l)),i=c.redSqr().redSub(c).redSub(c)):(s=this.z.redSqr(),a=c.redSub(s).redISub(s),e=r.redSub(o).redISub(l).redMul(a),t=c.redMul(n.redSub(l)),i=c.redMul(a))}else n=o.redAdd(l),s=this.curve._mulC(this.z).redSqr(),a=n.redSub(s).redSub(s),e=this.curve._mulC(r.redISub(n)).redMul(a),t=this.curve._mulC(n).redMul(o.redISub(l)),i=n.redMul(a);return this.curve.point(e,t,i)},c.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},c.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),i=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),n=this.t.redMul(this.curve.dd).redMul(e.t),s=this.z.redMul(e.z.redAdd(e.z)),a=i.redSub(t),r=s.redSub(n),o=s.redAdd(n),l=i.redAdd(t),c=a.redMul(r),d=o.redMul(l),h=a.redMul(l),u=r.redMul(o);return this.curve.point(c,d,u,h)},c.prototype._projAdd=function(e){var t,i,n=this.z.redMul(e.z),s=n.redSqr(),a=this.x.redMul(e.x),r=this.y.redMul(e.y),o=this.curve.d.redMul(a).redMul(r),l=s.redSub(o),c=s.redAdd(o),d=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(a).redISub(r),h=n.redMul(l).redMul(d);return this.curve.twisted?(t=n.redMul(c).redMul(r.redSub(this.curve._mulA(a))),i=l.redMul(c)):(t=n.redMul(c).redMul(r.redSub(a)),i=this.curve._mulC(l).redMul(c)),this.curve.point(h,t,i)},c.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)},c.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)},c.prototype.mulAdd=function(e,t,i){return this.curve._wnafMulAdd(1,[this,t],[e,i],2,!1)},c.prototype.jmulAdd=function(e,t,i){return this.curve._wnafMulAdd(1,[this,t],[e,i],2,!0)},c.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&=this.t.redMul(e),this.z=this.curve.one,this.zOne=!0,this},c.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},c.prototype.getX=function(){return this.normalize(),this.x.fromRed()},c.prototype.getY=function(){return this.normalize(),this.y.fromRed()},c.prototype.eq=function(e){return this===e||0===this.getX().cmp(e.getX())&&0===this.getY().cmp(e.getY())},c.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(t))return!0;for(var i=e.clone(),n=this.curve.redN.redMul(this.z);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(n),0===this.x.cmp(t))return!0}},c.prototype.toP=c.prototype.normalize,c.prototype.mixedAdd=c.prototype.add},function(e,t,i){"use strict";t.sha1=i(202),t.sha224=i(203),t.sha256=i(103),t.sha384=i(204),t.sha512=i(104)},function(e,t,i){"use strict";var n=i(11),s=i(25),a=i(102),r=n.rotl32,o=n.sum32,l=n.sum32_5,c=a.ft_1,d=s.BlockHash,h=[1518500249,1859775393,2400959708,3395469782];function u(){return this instanceof u?(d.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],void(this.W=Array(80))):new u}n.inherits(u,d),e.exports=u,u.blockSize=512,u.outSize=160,u.hmacStrength=80,u.padLength=64,u.prototype._update=function(e,t){for(var i=this.W,n=0;n<16;n++)i[n]=e[t+n];for(;n<i.length;n++)i[n]=r(i[n-3]^i[n-8]^i[n-14]^i[n-16],1);var s=this.h[0],a=this.h[1],d=this.h[2],u=this.h[3],p=this.h[4];for(n=0;n<i.length;n++){var f=~~(n/20),m=l(r(s,5),c(f,a,d,u),p,i[n],h[f]);p=u,u=d,d=r(a,30),a=s,s=m}this.h[0]=o(this.h[0],s),this.h[1]=o(this.h[1],a),this.h[2]=o(this.h[2],d),this.h[3]=o(this.h[3],u),this.h[4]=o(this.h[4],p)},u.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},function(e,t,i){"use strict";var n=i(11),s=i(103);function a(){return this instanceof a?(s.call(this),void(this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])):new a}n.inherits(a,s),e.exports=a,a.blockSize=512,a.outSize=224,a.hmacStrength=192,a.padLength=64,a.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h.slice(0,7),"big"):n.split32(this.h.slice(0,7),"big")}},function(e,t,i){"use strict";var n=i(11),s=i(104);function a(){return this instanceof a?(s.call(this),void(this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428])):new a}n.inherits(a,s),e.exports=a,a.blockSize=1024,a.outSize=384,a.hmacStrength=192,a.padLength=128,a.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h.slice(0,12),"big"):n.split32(this.h.slice(0,12),"big")}},function(e,t,i){"use strict";var n=i(11),s=i(25),a=n.rotl32,r=n.sum32,o=n.sum32_3,l=n.sum32_4,c=s.BlockHash;function d(){return this instanceof d?(c.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],void(this.endian="little")):new d}function h(e,t,i,n){return e<=15?t^i^n:e<=31?t&i|~t&n:e<=47?(t|~i)^n:e<=63?t&n|i&~n:t^(i|~n)}function u(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function p(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}n.inherits(d,c),t.ripemd160=d,d.blockSize=512,d.outSize=160,d.hmacStrength=192,d.padLength=64,d.prototype._update=function(e,t){for(var i,n=this.h[0],s=this.h[1],c=this.h[2],d=this.h[3],y=this.h[4],b=n,w=s,x=c,S=d,M=y,k=0;k<80;k++)i=r(a(l(n,h(k,s,c,d),e[f[k]+t],u(k)),g[k]),y),n=y,y=d,d=a(c,10),c=s,s=i,i=r(a(l(b,h(79-k,w,x,S),e[m[k]+t],p(k)),v[k]),M),b=M,M=S,S=a(x,10),x=w,w=i;i=o(this.h[1],c,S),this.h[1]=o(this.h[2],d,M),this.h[2]=o(this.h[3],y,b),this.h[3]=o(this.h[4],n,w),this.h[4]=o(this.h[0],s,x),this.h[0]=i},d.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"little"):n.split32(this.h,"little")};var f=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],m=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],g=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],v=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},function(e,t,i){"use strict";var n=i(11),s=i(9);function a(e,t,i){return this instanceof a?(this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,void this._init(n.toArray(t,i))):new a(e,t,i)}e.exports=a,a.prototype._init=function(e){e.length>this.blockSize&&(e=(new this.Hash).update(e).digest()),s(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=(new this.Hash).update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=(new this.Hash).update(e)},a.prototype.update=function(e,t){return this.inner.update(e,t),this},a.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)}},function(e,t){e.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},function(e,t,i){"use strict";var n=i(5),s=i(209),a=i(10),r=i(55),o=i(51),l=a.assert,c=i(210),d=i(211);function h(e){return this instanceof h?("string"==typeof e&&(l(Object.prototype.hasOwnProperty.call(r,e),"Unknown curve "+e),e=r[e]),e instanceof r.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),void(this.hash=e.hash||e.curve.hash)):new h(e)}e.exports=h,h.prototype.keyPair=function(e){return new c(this,e)},h.prototype.keyFromPrivate=function(e,t){return c.fromPrivate(this,e,t)},h.prototype.keyFromPublic=function(e,t){return c.fromPublic(this,e,t)},h.prototype.genKeyPair=function(e){e||={};for(var t=new s({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||o(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),i=this.n.byteLength(),a=this.n.sub(new n(2));;){var r=new n(t.generate(i));if(r.cmp(a)<=0)return r.iaddn(1),this.keyFromPrivate(r)}},h.prototype._truncateToN=function(e,t){var i=8*e.byteLength()-this.n.bitLength();return i>0&&(e=e.ushrn(i)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},h.prototype.sign=function(e,t,i,a){var r;"object"==typeof i&&(a=i,i=null),a||={},t=this.keyFromPrivate(t,i),e=this._truncateToN(new n(e,16));for(var o=this.n.byteLength(),l=t.getPrivate().toArray("be",o),c=e.toArray("be",o),h=new s({hash:this.hash,entropy:l,nonce:c,pers:a.pers,persEnc:a.persEnc||"utf8"}),u=this.n.sub(new n(1)),p=0;;p++)if(r=a.k?a.k(p):new n(h.generate(this.n.byteLength())),(r=this._truncateToN(r,!0)).cmpn(1)>0&&r.cmp(u)<0){var f=this.g.mul(r);if(!f.isInfinity()){var m=f.getX(),g=m.umod(this.n);if(0!==g.cmpn(0)){var v=r.invm(this.n).mul(g.mul(t.getPrivate()).iadd(e));if(0!==(v=v.umod(this.n)).cmpn(0)){var y=(f.getY().isOdd()?1:0)|(0===m.cmp(g)?0:2);return a.canonical&&v.cmp(this.nh)>0&&(v=this.n.sub(v),y^=1),new d({r:g,s:v,recoveryParam:y})}}}}},h.prototype.verify=function(e,t,i,s){e=this._truncateToN(new n(e,16)),i=this.keyFromPublic(i,s);var a,r=(t=new d(t,"hex")).r,o=t.s;if(r.cmpn(1)<0||r.cmp(this.n)>=0)return!1;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var l=o.invm(this.n),c=l.mul(e).umod(this.n),h=l.mul(r).umod(this.n);return this.curve._maxwellTrick?!(a=this.g.jmulAdd(c,i.getPublic(),h)).isInfinity()&&a.eqXToP(r):!(a=this.g.mulAdd(c,i.getPublic(),h)).isInfinity()&&0===a.getX().umod(this.n).cmp(r)},h.prototype.recoverPubKey=function(e,t,i,s){l((3&i)===i,"The recovery param is more than two bits"),t=new d(t,s);var a=this.n,r=new n(e),o=t.r,c=t.s,h=1&i,u=i>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&u)throw new Error("Unable to find sencond key candinate");o=u?this.curve.pointFromX(o.add(this.curve.n),h):this.curve.pointFromX(o,h);var p=t.r.invm(a),f=a.sub(r).mul(p).umod(a),m=c.mul(p).umod(a);return this.g.mulAdd(f,o,m)},h.prototype.getKeyRecoveryParam=function(e,t,i,n){if(null!==(t=new d(t,n)).recoveryParam)return t.recoveryParam;for(var s=0;s<4;s++){var a;try{a=this.recoverPubKey(e,t,s)}catch(e){continue}if(a.eq(i))return s}throw new Error("Unable to find valid recovery factor")}},function(e,t,i){"use strict";var n=i(56),s=i(100),a=i(9);function r(e){if(!(this instanceof r))return new r(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=s.toArray(e.entropy,e.entropyEnc||"hex"),i=s.toArray(e.nonce,e.nonceEnc||"hex"),n=s.toArray(e.pers,e.persEnc||"hex");a(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,i,n)}e.exports=r,r.prototype._init=function(e,t,i){var n=e.concat(t).concat(i);this.K=Array(this.outLen/8),this.V=Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656},r.prototype._hmac=function(){return new n.hmac(this.hash,this.K)},r.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},r.prototype.reseed=function(e,t,i,n){"string"!=typeof t&&(n=i,i=t,t=null),e=s.toArray(e,t),i=s.toArray(i,n),a(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(i||[])),this._reseed=1},r.prototype.generate=function(e,t,i,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof t&&(n=i,i=t,t=null),i&&(i=s.toArray(i,n||"hex"),this._update(i));for(var a=[];a.length<e;)this.V=this._hmac().update(this.V).digest(),a=a.concat(this.V);var r=a.slice(0,e);return this._update(i),this._reseed++,s.encode(r,t)}},function(e,t,i){"use strict";var n=i(5),s=i(10).assert;function a(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}e.exports=a,a.fromPublic=function(e,t,i){return t instanceof a?t:new a(e,{pub:t,pubEnc:i})},a.fromPrivate=function(e,t,i){return t instanceof a?t:new a(e,{priv:t,privEnc:i})},a.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},a.prototype.getPublic=function(e,t){return"string"==typeof e&&(t=e,e=null),this.pub||=this.ec.g.mul(this.priv),t?this.pub.encode(t,e):this.pub},a.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},a.prototype._importPrivate=function(e,t){this.priv=new n(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},a.prototype._importPublic=function(e,t){return e.x||e.y?("mont"===this.ec.curve.type?s(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||s(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y))):void(this.pub=this.ec.curve.decodePoint(e,t))},a.prototype.derive=function(e){return e.validate()||s(e.validate(),"public point not validated"),e.mul(this.priv).getX()},a.prototype.sign=function(e,t,i){return this.ec.sign(e,this,t,i)},a.prototype.verify=function(e,t){return this.ec.verify(e,t,this)},a.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},function(e,t,i){"use strict";var n=i(5),s=i(10),a=s.assert;function r(e,t){return e instanceof r?e:void(this._importDER(e,t)||(a(e.r&&e.s,"Signature without r or s"),this.r=new n(e.r,16),this.s=new n(e.s,16),this.recoveryParam=void 0===e.recoveryParam?null:e.recoveryParam))}function o(){this.place=0}function l(e,t){var i=e[t.place++];if(!(128&i))return i;var n=15&i;if(0==n||n>4)return!1;for(var s=0,a=0,r=t.place;a<n;a++,r++)s<<=8,s|=e[r],s>>>=0;return s>127&&(t.place=r,s)}function c(e){for(var t=0,i=e.length-1;!e[t]&&!(128&e[t+1])&&t<i;)t++;return 0===t?e:e.slice(t)}function d(e,t){if(t<128)e.push(t);else{var i=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|i);--i;)e.push(t>>>(i<<3)&255);e.push(t)}}e.exports=r,r.prototype._importDER=function(e,t){e=s.toArray(e,t);var i=new o;if(48!==e[i.place++])return!1;var a=l(e,i);if(!1===a)return!1;if(a+i.place!==e.length)return!1;if(2!==e[i.place++])return!1;var r=l(e,i);if(!1===r)return!1;var c=e.slice(i.place,r+i.place);if(i.place+=r,2!==e[i.place++])return!1;var d=l(e,i);if(!1===d)return!1;if(e.length!==d+i.place)return!1;var h=e.slice(i.place,d+i.place);if(0===c[0]){if(!(128&c[1]))return!1;c=c.slice(1)}if(0===h[0]){if(!(128&h[1]))return!1;h=h.slice(1)}return this.r=new n(c),this.s=new n(h),this.recoveryParam=null,!0},r.prototype.toDER=function(e){var t=this.r.toArray(),i=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&i[0]&&(i=[0].concat(i)),t=c(t),i=c(i);!(i[0]||128&i[1]);)i=i.slice(1);var n=[2];d(n,t.length),(n=n.concat(t)).push(2),d(n,i.length);var a=n.concat(i),r=[48];return d(r,a.length),r=r.concat(a),s.encode(r,e)}},function(e,t,i){"use strict";var n=i(56),s=i(55),a=i(10),r=a.assert,o=a.parseBytes,l=i(213),c=i(214);function d(e){return r("ed25519"===e,"only tested with ed25519 so far"),this instanceof d?(e=s[e].curve,this.curve=e,this.g=e.g,this.g.precompute(e.n.bitLength()+1),this.pointClass=e.point().constructor,this.encodingLength=Math.ceil(e.n.bitLength()/8),void(this.hash=n.sha512)):new d(e)}e.exports=d,d.prototype.sign=function(e,t){e=o(e);var i=this.keyFromSecret(t),n=this.hashInt(i.messagePrefix(),e),s=this.g.mul(n),a=this.encodePoint(s),r=this.hashInt(a,i.pubBytes(),e).mul(i.priv()),l=n.add(r).umod(this.curve.n);return this.makeSignature({R:s,S:l,Rencoded:a})},d.prototype.verify=function(e,t,i){e=o(e),t=this.makeSignature(t);var n=this.keyFromPublic(i),s=this.hashInt(t.Rencoded(),n.pubBytes(),e),a=this.g.mul(t.S());return t.R().add(n.pub().mul(s)).eq(a)},d.prototype.hashInt=function(){for(var e=this.hash(),t=0;t<arguments.length;t++)e.update(arguments[t]);return a.intFromLE(e.digest()).umod(this.curve.n)},d.prototype.keyFromPublic=function(e){return l.fromPublic(this,e)},d.prototype.keyFromSecret=function(e){return l.fromSecret(this,e)},d.prototype.makeSignature=function(e){return e instanceof c?e:new c(this,e)},d.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t},d.prototype.decodePoint=function(e){var t=(e=a.parseBytes(e)).length-1,i=e.slice(0,t).concat(-129&e[t]),n=0!=(128&e[t]),s=a.intFromLE(i);return this.curve.pointFromY(s,n)},d.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)},d.prototype.decodeInt=function(e){return a.intFromLE(e)},d.prototype.isPoint=function(e){return e instanceof this.pointClass}},function(e,t,i){"use strict";var n=i(10),s=n.assert,a=n.parseBytes,r=n.cachedProperty;function o(e,t){this.eddsa=e,this._secret=a(t.secret),e.isPoint(t.pub)?this._pub=t.pub:this._pubBytes=a(t.pub)}o.fromPublic=function(e,t){return t instanceof o?t:new o(e,{pub:t})},o.fromSecret=function(e,t){return t instanceof o?t:new o(e,{secret:t})},o.prototype.secret=function(){return this._secret},r(o,"pubBytes",(function(){return this.eddsa.encodePoint(this.pub())})),r(o,"pub",(function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())})),r(o,"privBytes",(function(){var e=this.eddsa,t=this.hash(),i=e.encodingLength-1,n=t.slice(0,e.encodingLength);return n[0]&=248,n[i]&=127,n[i]|=64,n})),r(o,"priv",(function(){return this.eddsa.decodeInt(this.privBytes())})),r(o,"hash",(function(){return this.eddsa.hash().update(this.secret()).digest()})),r(o,"messagePrefix",(function(){return this.hash().slice(this.eddsa.encodingLength)})),o.prototype.sign=function(e){return s(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)},o.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)},o.prototype.getSecret=function(e){return s(this._secret,"KeyPair is public only"),n.encode(this.secret(),e)},o.prototype.getPublic=function(e){return n.encode(this.pubBytes(),e)},e.exports=o},function(e,t,i){"use strict";var n=i(5),s=i(10),a=s.assert,r=s.cachedProperty,o=s.parseBytes;function l(e,t){this.eddsa=e,"object"!=typeof t&&(t=o(t)),Array.isArray(t)&&(t={R:t.slice(0,e.encodingLength),S:t.slice(e.encodingLength)}),a(t.R&&t.S,"Signature without R or S"),e.isPoint(t.R)&&(this._R=t.R),t.S instanceof n&&(this._S=t.S),this._Rencoded=Array.isArray(t.R)?t.R:t.Rencoded,this._Sencoded=Array.isArray(t.S)?t.S:t.Sencoded}r(l,"S",(function(){return this.eddsa.decodeInt(this.Sencoded())})),r(l,"R",(function(){return this.eddsa.decodePoint(this.Rencoded())})),r(l,"Rencoded",(function(){return this.eddsa.encodePoint(this.R())})),r(l,"Sencoded",(function(){return this.eddsa.encodeInt(this.S())})),l.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},l.prototype.toHex=function(){return s.encode(this.toBytes(),"hex").toUpperCase()},e.exports=l},function(e,t){},function(e,t,i){"use strict";var n=i(106);t.certificate=i(222);var s=n.define("RSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())}));t.RSAPrivateKey=s;var a=n.define("RSAPublicKey",(function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())}));t.RSAPublicKey=a;var r=n.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(o),this.key("subjectPublicKey").bitstr())}));t.PublicKey=r;var o=n.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())})),l=n.define("PrivateKeyInfo",(function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(o),this.key("subjectPrivateKey").octstr())}));t.PrivateKey=l;var c=n.define("EncryptedPrivateKeyInfo",(function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())}));t.EncryptedPrivateKey=c;var d=n.define("DSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())}));t.DSAPrivateKey=d,t.DSAparam=n.define("DSAparam",(function(){this.int()}));var h=n.define("ECPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(u),this.key("publicKey").optional().explicit(1).bitstr())}));t.ECPrivateKey=h;var u=n.define("ECParameters",(function(){this.choice({namedCurve:this.objid()})}));t.signature=n.define("signature",(function(){this.seq().obj(this.key("r").int(),this.key("s").int())}))},function(e,t,i){"use strict";const n=i(107),s=i(109),a=i(2);function r(e,t){this.name=e,this.body=t,this.decoders={},this.encoders={}}t.define=function(e,t){return new r(e,t)},r.prototype._createNamed=function(e){function t(e){this._initNamed(e,i)}const i=this.name;return a(t,e),t.prototype._initNamed=function(t,i){e.call(this,t,i)},new t(this)},r.prototype._getDecoder=function(e){return e=e||"der",this.decoders.hasOwnProperty(e)||(this.decoders[e]=this._createNamed(s[e])),this.decoders[e]},r.prototype.decode=function(e,t,i){return this._getDecoder(t).decode(e,i)},r.prototype._getEncoder=function(e){return e=e||"der",this.encoders.hasOwnProperty(e)||(this.encoders[e]=this._createNamed(n[e])),this.encoders[e]},r.prototype.encode=function(e,t,i){return this._getEncoder(t).encode(e,i)}},function(e,t,i){"use strict";const n=i(2),s=i(108);function a(e){s.call(this,e),this.enc="pem"}n(a,s),e.exports=a,a.prototype.encode=function(e,t){const i=s.prototype.encode.call(this,e).toString("base64"),n=["-----BEGIN "+t.label+"-----"];for(let e=0;e<i.length;e+=64)n.push(i.slice(e,e+64));return n.push("-----END "+t.label+"-----"),n.join("\n")}},function(e,t,i){"use strict";const n=i(2),s=i(57).Buffer,a=i(110);function r(e){a.call(this,e),this.enc="pem"}n(r,a),e.exports=r,r.prototype.decode=function(e,t){const i=e.toString().split(/[\r\n]+/g),n=t.label.toUpperCase(),r=/^-----(BEGIN|END) ([^-]+)-----$/;let o=-1,l=-1;for(let e=0;e<i.length;e++){const t=i[e].match(r);if(null!==t&&t[2]===n){if(-1!==o){if("END"!==t[1])break;l=e;break}if("BEGIN"!==t[1])break;o=e}}if(-1===o||-1===l)throw new Error("PEM section not found for: "+n);const c=i.slice(o+1,l).join("");c.replace(/[^a-z0-9+/=]+/gi,"");const d=s.from(c,"base64");return a.prototype.decode.call(this,d,t)}},function(e,t,i){"use strict";const n=t;n.Reporter=i(59).Reporter,n.DecoderBuffer=i(26).DecoderBuffer,n.EncoderBuffer=i(26).EncoderBuffer,n.Node=i(58)},function(e,t,i){"use strict";const n=t;n._reverse=function(e){const t={};return Object.keys(e).forEach((function(i){(0|i)==i&&(i|=0);const n=e[i];t[n]=i})),t},n.der=i(60)},function(e,t,i){"use strict";var n=i(106),s=n.define("Time",(function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})})),a=n.define("AttributeTypeValue",(function(){this.seq().obj(this.key("type").objid(),this.key("value").any())})),r=n.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())})),o=n.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(r),this.key("subjectPublicKey").bitstr())})),l=n.define("RelativeDistinguishedName",(function(){this.setof(a)})),c=n.define("RDNSequence",(function(){this.seqof(l)})),d=n.define("Name",(function(){this.choice({rdnSequence:this.use(c)})})),h=n.define("Validity",(function(){this.seq().obj(this.key("notBefore").use(s),this.key("notAfter").use(s))})),u=n.define("Extension",(function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())})),p=n.define("TBSCertificate",(function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(r),this.key("issuer").use(d),this.key("validity").use(h),this.key("subject").use(d),this.key("subjectPublicKeyInfo").use(o),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(u).optional())})),f=n.define("X509Certificate",(function(){this.seq().obj(this.key("tbsCertificate").use(p),this.key("signatureAlgorithm").use(r),this.key("signatureValue").bitstr())}));e.exports=f},function(e){e.exports={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}},function(e,t,i){var n=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,s=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,a=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,r=i(32),o=i(48),l=i(3).Buffer;e.exports=function(e,t){var i,c=e.toString(),d=c.match(n);if(d){var h="aes"+d[1],u=l.from(d[2],"hex"),p=l.from(d[3].replace(/[\r\n]/g,""),"base64"),f=r(t,u.slice(0,8),parseInt(d[1],10)).key,m=[],g=o.createDecipheriv(h,f,u);m.push(g.update(p)),m.push(g.final()),i=l.concat(m)}else{var v=c.match(a);i=l.from(v[2].replace(/[\r\n]/g,""),"base64")}return{tag:c.match(s)[1],data:i}}},function(e,t,i){var n=i(52).Buffer,s=i(105),a=i(54).ec,r=i(34),o=i(111);function l(e,t){if(e.cmpn(0)<=0)throw new Error("invalid sig");if(e.cmp(t)>=t)throw new Error("invalid sig")}e.exports=function(e,t,i,c,d){var h=r(i);if("ec"===h.type){if("ecdsa"!==c&&"ecdsa/rsa"!==c)throw new Error("wrong public key type");return function(e,t,i){var n=o[i.data.algorithm.curve.join(".")];if(!n)throw new Error("unknown curve "+i.data.algorithm.curve.join("."));var s=new a(n),r=i.data.subjectPrivateKey.data;return s.verify(t,e,r)}(e,t,h)}if("dsa"===h.type){if("dsa"!==c)throw new Error("wrong public key type");return function(e,t,i){var n=i.data.p,a=i.data.q,o=i.data.g,c=i.data.pub_key,d=r.signature.decode(e,"der"),h=d.s,u=d.r;l(h,a),l(u,a);var p=s.mont(n),f=h.invm(a);return 0===o.toRed(p).redPow(new s(t).mul(f).mod(a)).fromRed().mul(c.toRed(p).redPow(u.mul(f).mod(a)).fromRed()).mod(n).mod(a).cmp(u)}(e,t,h)}if("rsa"!==c&&"ecdsa/rsa"!==c)throw new Error("wrong public key type");t=n.concat([d,t]);for(var u=h.modulus.byteLength(),p=[1],f=0;t.length+p.length+2<u;)p.push(255),f++;p.push(0);for(var m=-1;++m<t.length;)p.push(t[m]);p=n.from(p);var g=s.mont(h.modulus);e=(e=new s(e).toRed(g)).redPow(new s(h.publicExponent)),e=n.from(e.fromRed().toArray());var v=f<8?1:0;for(u=Math.min(e.length,p.length),e.length!==p.length&&(v=1),m=-1;++m<u;)v|=e[m]^p[m];return 0==v}},function(e,t,i){(function(t){var n=i(54),s=i(5);e.exports=function(e){return new r(e)};var a={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function r(e){this.curveType=a[e],this.curveType||={name:e},this.curve=new n.ec(this.curveType.name),this.keys=void 0}function o(e,i,n){Array.isArray(e)||(e=e.toArray());var s=new t(e);if(n&&s.length<n){var a=new t(n-s.length);a.fill(0),s=t.concat([a,s])}return i?s.toString(i):s}a.p224=a.secp224r1,a.p256=a.secp256r1=a.prime256v1,a.p192=a.secp192r1=a.prime192v1,a.p384=a.secp384r1,a.p521=a.secp521r1,r.prototype.generateKeys=function(e,t){return this.keys=this.curve.genKeyPair(),this.getPublicKey(e,t)},r.prototype.computeSecret=function(e,i,n){return i=i||"utf8",t.isBuffer(e)||(e=new t(e,i)),o(this.curve.keyFromPublic(e).getPublic().mul(this.keys.getPrivate()).getX(),n,this.curveType.byteLength)},r.prototype.getPublicKey=function(e,t){var i=this.keys.getPublic("compressed"===t,!0);return"hybrid"===t&&(i[i.length-1]%2?i[0]=7:i[0]=6),o(i,e)},r.prototype.getPrivateKey=function(e){return o(this.keys.getPrivate(),e)},r.prototype.setPublicKey=function(e,i){return i=i||"utf8",t.isBuffer(e)||(e=new t(e,i)),this.keys._importPublic(e),this},r.prototype.setPrivateKey=function(e,i){i=i||"utf8",t.isBuffer(e)||(e=new t(e,i));var n=new s(e);return n=n.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(n),this}}).call(this,i(6).Buffer)},function(e,t,i){t.publicEncrypt=i(228),t.privateDecrypt=i(229),t.privateEncrypt=function(e,i){return t.publicEncrypt(e,i,!0)},t.publicDecrypt=function(e,i){return t.privateDecrypt(e,i,!0)}},function(e,t,i){var n=i(34),s=i(16),a=i(20),r=i(112),o=i(113),l=i(5),c=i(114),d=i(53),h=i(3).Buffer;e.exports=function(e,t,i){var u,p=e.padding?e.padding:i?1:4,f=n(e);if(4===p)u=function(e,t){var i=e.modulus.byteLength(),n=t.length,c=a("sha1").update(h.alloc(0)).digest(),d=c.length,u=2*d;if(n>i-u-2)throw new Error("message too long");var p=h.alloc(i-n-u-2),f=i-d-1,m=s(d),g=o(h.concat([c,p,h.alloc(1,1),t],f),r(m,f)),v=o(m,r(g,d));return new l(h.concat([h.alloc(1),v,g],i))}(f,t);else if(1===p)u=function(e,t,i){var n,a=t.length,r=e.modulus.byteLength();if(a>r-11)throw new Error("message too long");return n=i?h.alloc(r-a-3,255):function(e){for(var t,i=h.allocUnsafe(e),n=0,a=s(2*e),r=0;n<e;)r===a.length&&(a=s(2*e),r=0),(t=a[r++])&&(i[n++]=t);return i}(r-a-3),new l(h.concat([h.from([0,i?1:2]),n,h.alloc(1),t],r))}(f,t,i);else{if(3!==p)throw new Error("unknown padding");if((u=new l(t)).cmp(f.modulus)>=0)throw new Error("data too long for modulus")}return i?d(u,f):c(u,f)}},function(e,t,i){var n=i(34),s=i(112),a=i(113),r=i(5),o=i(53),l=i(20),c=i(114),d=i(3).Buffer;e.exports=function(e,t,i){var h=e.padding?e.padding:i?1:4,u=n(e),p=u.modulus.byteLength();if(t.length>p||new r(t).cmp(u.modulus)>=0)throw new Error("decryption error");var f=i?c(new r(t),u):o(t,u),m=d.alloc(p-f.length);if(f=d.concat([m,f],p),4===h)return function(e,t){var i=e.modulus.byteLength(),n=l("sha1").update(d.alloc(0)).digest(),r=n.length;if(0!==t[0])throw new Error("decryption error");var o=t.slice(1,r+1),c=t.slice(r+1),h=a(o,s(c,r)),u=a(c,s(h,i-r-1));if(function(e,t){e=d.from(e),t=d.from(t);var i=0,n=e.length;e.length!==t.length&&(i++,n=Math.min(e.length,t.length));for(var s=-1;++s<n;)i+=e[s]^t[s];return i}(n,u.slice(0,r)))throw new Error("decryption error");for(var p=r;0===u[p];)p++;if(1!==u[p++])throw new Error("decryption error");return u.slice(p)}(u,f);if(1===h)return function(e,t,i){for(var n=t.slice(0,2),s=2,a=0;0!==t[s++];)if(s>=t.length){a++;break}var r=t.slice(2,s-1);("0002"!==n.toString("hex")&&!i||"0001"!==n.toString("hex")&&i)&&a++;r.length<8&&a++;if(a)throw new Error("decryption error");return t.slice(s)}(0,f,i);if(3===h)return f;throw new Error("unknown padding")}},function(e,t,i){"use strict";(function(e,n){function s(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}var a=i(3),r=i(16),o=a.Buffer,l=a.kMaxLength,c=e.crypto||e.msCrypto,d=Math.pow(2,32)-1;function h(e,t){if("number"!=typeof e||e!=e)throw new TypeError("offset must be a number");if(e>d||e<0)throw new TypeError("offset must be a uint32");if(e>l||e>t)throw new RangeError("offset out of range")}function u(e,t,i){if("number"!=typeof e||e!=e)throw new TypeError("size must be a number");if(e>d||e<0)throw new TypeError("size must be a uint32");if(e+t>i||e>l)throw new RangeError("buffer too small")}function p(e,t,i,s){if(n.browser){var a=e.buffer,o=new Uint8Array(a,t,i);return c.getRandomValues(o),s?void n.nextTick((function(){s(null,e)})):e}if(!s)return r(i).copy(e,t),e;r(i,(function(i,n){return i?s(i):(n.copy(e,t),void s(null,e))}))}c&&c.getRandomValues||!n.browser?(t.randomFill=function(t,i,n,s){if(!(o.isBuffer(t)||t instanceof e.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"==typeof i)s=i,i=0,n=t.length;else if("function"==typeof n)s=n,n=t.length-i;else if("function"!=typeof s)throw new TypeError('"cb" argument must be a function');return h(i,t.length),u(n,i,t.length),p(t,i,n,s)},t.randomFillSync=function(t,i,n){void 0===i&&(i=0);if(!(o.isBuffer(t)||t instanceof e.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');h(i,t.length),void 0===n&&(n=t.length-i);return u(n,i,t.length),p(t,i,n)}):(t.randomFill=s,t.randomFillSync=s)}).call(this,i(8),i(7))},function(e,t,i){i(1);e.exports={id:"ctf",name:"Capture the Flag",alias:"ctf",endStats:["sid","name","score","kills","deaths","caps","reward"],leaderStats:["caps","score"],description:"Help your team steal the other teams flag and bring it to your base. You cant steal if yours has been stolen. Get it back first by eliminating the carrier.",descriptionLang:"game.mode.ctg.description",leaderSort:function(e,t){return e.caps===t.caps&&e.score&&t.score?e.score-t.score:t.caps-e.caps},endSort:function(e,t){return e.caps===t.caps&&e.score&&t.score?e.score-t.score:t.caps-e.caps},onKill:function(e,t,i){e.dropFlag(i.flag)},flags:!0,teams:!0,noScoreC:!0}},function(e,t,i){i(1);e.exports={id:"bhop",name:"Parkour",alias:"bhop",sendR:5,endStats:["sid","name","score","deaths"],noKick:!0,friendly:!0,logTime:!0,showMS:!0,ownTime:!0,allowReset:!0,showHour:!0,viewDis:1e3,custUI:function(e,t,i){if(e.doLogTime&&(weapHolder.style.display="none",bottomRight.style.display="none",speedRunHolder.style.display="block",speedRunReset.style.display=e.mode&&e.mode.allowReset?"inline-block":"none",i)){for(var n,s="",a=e.map.manager.scorezones.length,r=0;r<a;++r)n=r+1,r<t.maxSpdRChck&&(s+="<div class='speedRunItem"+(0==r?" sriAct":"")+"' id='spdRunI"+n+"'>Point "+n+"<span class='speedRunITim' id='spdRunIVal"+n+"'>0:00</span></div>");""==s&&(s="<div>No Score Zones</div>"),speedRunList.innerHTML=s,speedRunInfo.innerHTML="Any% <span style='float:right;color:#fff'><span id='spdrnZC'  style='color:#fff'>0</span>/"+a+"<i class='material-icons' style='color:#fff;font-size:30px;margin-left:10px'>flag</i></span>",speedRunTimer.innerHTML="00:00.0"}}}},function(e,t,i){i(1);e.exports={id:"hide",name:"Hide & Seek",alias:"hide",endStats:["sid","name","score","found","reward"],winCondition:function(e){for(var t=0,i=0;i<e.players.list.length;++i)e.players.list[i].active&&1==e.players.list[i].team&&t++;return t>0?1:2},condition:[function(e){for(var t=0,i=0;i<e.players.list.length;++i)e.players.list[i].active&&1==e.players.list[i].team&&t++;return t>0}],minPlayers:2,waitTimers:[{time:1e4,msg:"picking seeker in ",trigger:function(e){e.pickSeeker()}},{time:45e3,msg:"releasing seeker in ",trigger:function(e){e.releaseSeeker()}}],spdMlt:{1:.8},teams:!0,teamOptions:["Hiders","Seekers"],killConv:!0,noKick:!0,showTeam:!0,viewDis:2e3,convTeam:2,convWord:"found",noWeap:!0,friendly:!0,hideNames:!0}},function(e,t,i){i(1);e.exports={id:"infect",name:"Infected",alias:"infect",endStats:["sid","name","score","kills","infected","reward"],winCondition:function(e){for(var t=0,i=0;i<e.players.list.length;++i)e.players.list[i].active&&1==e.players.list[i].team&&t++;return t>0?1:2},condition:[function(e){for(var t=0,i=0;i<e.players.list.length;++i)e.players.list[i].active&&1==e.players.list[i].team&&t++;return t>0}],minPlayers:2,waitTimers:[{time:2e4,msg:"infection in ",trigger:function(e){e.infectRandom()}}],teamClass:{2:9},spdMlt:{2:1.15},killConv:!0,noKick:!0,teams:!0,teamOptions:["Survivors","Infected"],convWord:"infected",convTeam:2,modelOverrides:{Infected:{headIndex:122,skinColor:5857617}}}},function(e,t,i){i(1);e.exports={id:"race",name:"Race",alias:"race",sendR:5,endStats:["sid","name","score","time"],gameTime:0,showMS:!0,timed:!0,logTime:!0,viewDis:1e3,noWeap:!0,friendly:!0,endSort:function(e,t){return e.score===t.score&&e.gameTimer&&t.gameTimer?e.gameTimer-t.gameTimer:t.score-e.score},gameStart:function(e){e.lockMove(),e.targetScore=0;for(var t=0;t<e.map.manager.objects.length;++t)e.map.manager.objects[t].score&&(e.targetScore+=e.map.manager.objects[t].scoreP)},condition:[function(e){for(var t=0;t<e.players.list.length;++t)e.players.list[t].score>=e.targetScore&&!e.players.list[t].timer&&(e.players.list[t].timer=e.lastTimer,e.players.list[t].gameTimer=e.gameTimer,e.waitTimers||=[{time:1e4,contTime:!0,msg:"race ends in ",trigger:function(e){e.gameTimer="skip"}}]);return!0}],waitTimers:[{time:15e3,msg:"race starting in ",trigger:function(e){e.unlockMove()}}],custUI:function(e,t,i){if(e.doLogTime&&(weapHolder.style.display="none",bottomRight.style.display="none",speedRunHolder.style.display="block",speedRunReset.style.display=e.mode&&e.mode.allowReset?"inline-block":"none",i)){for(var n,s="",a=e.map.manager.scorezones.length,r=0;r<a;++r)n=r+1,r<t.maxSpdRChck&&(s+="<div class='speedRunItem"+(0==r?" sriAct":"")+"' id='spdRunI"+n+"'>Point "+n+"<span class='speedRunITim' id='spdRunIVal"+n+"'>0:00</span></div>");""==s&&(s="<div>No Score Zones</div>"),speedRunList.innerHTML=s,speedRunInfo.innerHTML="Any% <span style='float:right;color:#fff'><span id='spdrnZC'  style='color:#fff'>0</span>/"+a+"<i class='material-icons' style='color:#fff;font-size:30px;margin-left:10px'>flag</i></span>",speedRunTimer.innerHTML="00:00.0"}}}},function(e,t,i){i(1);e.exports={id:"lms",name:"Last Man Standing",alias:"lms",endStats:["sid","name","score","kills","deaths","assists"],noRegen:!0,noKick:!0,teams:!0,lives:1,winCondition:function(e){for(var t=0,i=0,n=0;n<e.players.list.length;++n)if(e.players.list[n].lives>0){var s=e.players.list[n].lives;1==e.players.list[n].team?t+=s:i+=s}return t>i?1:2},gameTime:3e5}},function(e,t,i){i(1);e.exports={id:"simon",name:"Simon Says",alias:"simon",endStats:["sid","name","score","reward"],condition:[function(e){for(var t=0,i=0;i<e.players.list.length;++i)e.players.list[i].active&&1==e.players.list[i].team&&t++;return t>0}],minPlayers:3,waitTimers:[{time:1e4,msg:"starts in ",trigger:function(e){e.pickSimon()}}],teams:!0,viewDis:1e3,teamOptions:["Followers","Simon"],noKick:!0,teamSee:["Followers","Simon"]}},function(e,t,i){i(1);e.exports={id:"gun",name:"Gun Game",alias:"gun",party:!0,randClassScr:.5,tag:["Party","#ffac00","#ffb600"],endStats:["sid","name","weapon","kills","melees","setbacks","reward"],description:"Kill other players to progress through every gun in the game. Do it with all guns to win",descriptionLang:"game.mode.gun.description",leaderStats:["weaponTier","kills"],leaderSort:function(e,t){return e.weaponTier===t.weaponTier&&e.kills&&t.kills?e.kills-t.kills:t.weaponTier-e.weaponTier},endSort:function(e,t){return e.weaponTier===t.weaponTier&&e.kills&&t.kills?e.kills-t.kills:t.weaponTier-e.weaponTier},winCondition:function(e){for(var t=0,i=null,n=0;n<e.players.list.length;++n)(null==i||e.players.list[n].weaponTier>t)&&(t=e.players.list[n].weaponTier,i=e.players.list[n]);return 0==t?null:i},condition:[function(e){for(var t=0;t<e.players.list.length;++t)if(e.players.list[t].weaponTier>=e.mode.weaponOrder.length)return!1;return!0}],onKill:function(e,t,i,n,s){var a=s&&null!=s.stk;n&&n!=i?a||(e.weaponConfig[null==s.wId?n.loadout[n.loadoutIndex]:s.wId].melee?(e.decreaseWeapon(i),n.weaponTier==e.mode.weaponOrder.length-1&&e.increaseWeapon(n,s)):e.increaseWeapon(n,s)):e.decreaseWeapon(i),t&&e.players.syncLeaders()},startingLoadout:[2],keepLoadout:!0,noAssists:!0,minPlayers:2,noWeap:!0,noPickups:!0,weaponOrder:[2,27,16,10,4,11,21,5,3,9,1,14,6,0,28,18,7,8,13,22,12],disabledStreaks:[4,5,6]}},function(e,t,i){i(1);e.exports={id:"prop",name:"Prop Hunt",alias:"prop",genID:"p",prop:!0,tickR:20,endStats:["sid","name","score","kills"],noRegen:!0,noKick:!0,teams:!0,viewDis:2e3,lives:1,winCondition:function(e){for(var t=0,i=0;i<e.players.list.length;++i)e.players.list[i].active&&1==e.players.list[i].team&&t++;return t>0?1:2},condition:[function(e){for(var t=0,i=0,n=0;n<e.players.list.length;++n)e.players.list[n].lives>0&&e.players.list[n].active&&(1==e.players.list[n].team?t++:i++);return t>=1&&i>=1}],minPlayers:2,waitTimers:[{time:1e4,msg:"locking seekers in ",trigger:function(e){e.lockSeekers()}},{time:3e4,msg:"releasing seekers in ",noJoin:!0,trigger:function(e){e.releaseSeeker(),e.nextTaunt(null,null,!0)}}],propSwitches:3,teams:!0,teamOptions:["Prop","Seekers"],teamSort:!0,showTeam:!0,hideNames:!0}},function(e,t,i){i(1);e.exports={id:"boss",name:"Boss Hunt",alias:"boss",winCondition:function(e){for(var t=0,i=0;i<e.players.list.length;++i)e.players.list[i].active&&2==e.players.list[i].team&&t++;return t>0?2:1},condition:[function(e){for(var t=0,i=0;i<e.players.list.length;++i)e.players.list[i].active&&2==e.players.list[i].team&&t++;return t>0}],waitTimers:[{time:15e3,msg:"picking boss in ",trigger:function(e){e.pickBoss()}}],teams:!0,teamOptions:["Heros","Boss"],noReward:!0,minPlayers:2}},function(e,t,i){i(1);e.exports={id:"clas",name:"Classic FFA",alias:"clas",leaderStats:["score","kills","deaths"],party:!0,tag:["Party","#ffac00","#ffb600"],noSliding:!0,noKnives:!0,noStreaks:!0,noWallJ:!0,impulseMlt:0,noPickups:!0,noMelee:!0,realMov:!0}},function(e,t,i){let n=i(1);var s,a;e.exports={id:"depo",name:"Deposit",alias:"depo",endStats:["sid","name","score","kills","deaths","deposits","denies","reward"],leaderStats:["deposits","kills","denies","score"],objective:!0,teams:!0,tagLimit:65,objScore:50,noScoreC:!0,tagHoldLimit:20,deposit:!0,maxPerCluster:3,gameStart:function(e){e.activeObjective=-1,e.randObjective(null,!0)},leaderSort:function(e,t){return e.deposits===t.deposits&&e.kills&&t.kills?e.kills-t.kills:t.deposits-e.deposits},endSort:function(e,t){return e.deposits===t.deposits&&e.kills&&t.kills?t.kills-e.kills:t.deposits-e.deposits},winCondition:function(e){var t=e.teamScores[1]||0,i=e.teamScores[2]||0;if(t==i){for(var n=0,s=0,a=0,r=0,o=0,l=0,c=0;c<e.players.list.length;++c){var d=e.players.list[c].kills,h=e.players.list[c].score,u=e.players.list[c].denies;1==e.players.list[c].team?(a+=d,n+=h,o+=u):(r+=d,s+=d,l+=u)}return o==l?a==r?n>s?1:2:a>r?1:2:o>l?1:2}return t>i?1:2},condition:[function(e){var t=e.teamScores[1]||0,i=e.teamScores[2]||0;return t<e.mode.tagLimit&&i<e.mode.tagLimit}],onKill:function(e,t,i,s){var a=i.dogTags||0;if(s&&s!=i&&(a+=1),a){var r=i.lastGround&&(!s||s==i&&a>1);if(s&&s!=i||r){i.lastGround&&!i.onGround&&(r=!0);var o={x:r?i.lastGround.x:i.x,y:r?i.lastGround.y:i.y,z:r?i.lastGround.z:i.z};if(a<=e.mode.maxPerCluster)e.dropSpawnable(3,i,{c:a},o);else{for(var l=Math.floor(a/e.mode.maxPerCluster),c=a%e.mode.maxPerCluster,d=0;d<l;d++)e.dropSpawnable(3,i,{c:e.mode.maxPerCluster},{x:o.x+n.randInt(-10,10),y:o.y,z:o.z+n.randInt(-10,10)});c&&e.dropSpawnable(3,i,{c:c},{x:o.x+n.randInt(-10,10),y:o.y,z:o.z+n.randInt(-10,10)})}}}},update:function(e,t,i){if(e.map.manager.objectives.length&&e.waitTimers&&e.waitTimers[0].contTime&&(e.objectiveTimer-=i,e.objectiveTimer<=0)){e.objectiveTimer=500;for(var n=0;n<e.map.manager.objectives.length;++n)if((s=e.map.manager.objectives[n])&&s.uid==e.activeObjective)for(var r=0;r<e.players.list.length;++r)(a=e.players.list[r]).active&&a.dogTags>0&&a.collides(s)&&(a.dogTags--,a.deposits++,e.incMedal("Deposited",a),e.giveTeamScore(a.team,1),e.players.score(a,e.mode&&e.mode.objScore?e.mode.objScore:10),a.send("am",[49,e.mode&&e.mode.objScore?e.mode.objScore:10,0,1]),a.send("krt",a.dogTags),e.challenges.update(e,"dep",1,null,a))}}}},function(e,t,i){i(1);e.exports={id:"stalk",name:"Stalker",alias:"stalk",endStats:["sid","name","score","reward"],genID:"st",ambInd:5,minPlayers:2,fogD:250,fogC:1842204,skyCol:1842204,lightCol:855309,ambCol:1513239,lives:1,condition:[function(e){for(var t=0,i=0,n=0;n<e.players.list.length;++n)e.players.list[n].lives>0&&(1==e.players.list[n].team?t++:2==e.players.list[n].team&&i++);return t>=1&&i>=1}],winCondition:function(e){for(var t=0,i=0;i<e.players.list.length;++i)e.players.list[i].active&&2==e.players.list[i].team&&t++;return t>0?2:1},waitTimers:[{time:15e3,msg:"picking stalker in ",trigger:function(e){e.pickStalker()}}],onMelee:function(e,t,i,n){var s=t&&i&&2==t.team;return s&&(n&&i&&i.send("scr",0),e.players.changeHealth(t,null,-40)),s},hideNames:!0,noReward:!0,noKick:!0,teams:!0,teamOptions:["Living","Stalker"],spdMlt:{1:.65},modelOverrides:{Stalker:{noCosmetics:!0,skinColor:0,shirtColor:0,pantsColor:0,shoeColor:0,hairColor:0,sleeveColor:0,waistColor:0}}}},function(e,t,i){i(1);var n,s;e.exports={id:"king",name:"King of the Hill",alias:"king",endStats:["sid","name","score","kills","deaths","obj","reward"],objective:!0,killMlt:.15,hillMlt:.05,objScore:10,gameStart:function(e){e.activeObjective=-1,e.randObjective(null,!0)},collisionCheck:function(e,t){for(var i=0;i<e.map.manager.objectives.length;++i)(n=e.map.manager.objectives[i])&&n.uid==e.activeObjective&&t.collides(n)&&(t.onZone=n.uid)},update:function(e,t,i){if(e.map.manager.objectives.length&&e.waitTimers&&e.waitTimers[0].contTime){var a=!1;e.objectiveTimer-=i,e.objectiveTimer<=0&&(e.objectiveTimer=1500,a=!0);for(var r=0;r<e.map.manager.objectives.length;++r)if((n=e.map.manager.objectives[r])&&n.uid==e.activeObjective){for(var o=n.onZone,l=[],c=0;c<e.players.list.length;++c)(s=e.players.list[c]).active&&s.collides(n)&&l.push(c);n.onZone=l.length,1==n.onZone&&a&&e.players.list[l[0]]&&e.players.score(e.players.list[l[0]],e.mode.objScore,2),o!=n.onZone&&e.broadcast("uobj",n.uid,n.onZone)}}},onKill:function(e,t,i,n){n&&n!=i&&(n.onZone==e.activeObjective?(e.players.score(n,50),e.incMedal("Defender",n),n.send("am",[25,50,0,1]),n.killMlt+=e.mode.hillMlt,e.challenges.update(e,"defm",1,null,n)):i.onZone==e.activeObjective&&(e.players.score(n,25),e.incMedal("Attacker",n),n.send("am",[25,25,0,1]),e.challenges.update(e,"atkm",1,null,n)))}}},function(e,t,i){i(1);e.exports={id:"oinc",name:"One in the Chamber",alias:"oinc",party:!0,tag:["Party","#ffac00","#ffb600"],endStats:["sid","name","kills","deaths","melees"],leaderStats:["lives","kills"],leaderSort:function(e,t){return e.lives===t.lives&&e.kills&&t.kills?e.kills-t.kills:t.lives-e.lives},endSort:function(e,t){return e.lives===t.lives&&e.kills&&t.kills?t.kills-e.kills:t.lives-e.lives},condition:[function(e){for(var t=0,i=0;i<e.players.list.length;++i)e.players.list[i].lives>0&&t++;return t>1}],winCondition:function(e){for(var t=0;t<e.players.list.length;++t)if(e.players.list[t].lives>0)return e.players.list[t];return null},waitTimers:[{time:1e4,msg:"starts in ",trigger:function(e){e.unlockMove()}},{time:100,msg:"",noJoin:!0,trigger:function(){}}],gameStart:function(e){e.lockMove()},onKill:function(e,t,i,n){n&&n!=i&&(n.ammos[0]++,n.ammos[0]>7&&(n.ammos[0]=7),n.send("uamo",n.ammos,n.reserveAmmos)),t&&e.players.syncLeaders()},forceSpawn:3,lives:3,maxHealth:10,forceClass:10,ammoLimit:1,noReloads:!0,hideNames:!0,noAssists:!0,noStreaks:!0,minPlayers:2,noPickups:!0}},function(e,t,i){i(1);e.exports={id:"trade",name:"Trade",sendR:5,endStats:["sid","name","score"],alias:"trade",noClientKick:!0,canTrade:!0,friendly:!0,noHPbars:!0,viewDis:500,nameDist:60,gameTime:0,maxNoMov:18e4,noMinimap:!0}},function(e,t,i){i(1);e.exports={id:"kc",name:"Kill Confirmed",alias:"kc",endStats:["sid","name","score","kills","deaths","confirms","denies","reward"],leaderStats:["confirms","score","denies"],leaderSort:function(e,t){return e.confirms===t.confirms&&e.kills&&t.kills?e.kills-t.kills:t.confirms-e.confirms},endSort:function(e,t){return e.confirms===t.confirms&&e.kills&&t.kills?t.kills-e.kills:t.confirms-e.confirms},winCondition:function(e){var t=e.teamScores[1]||0,i=e.teamScores[2]||0;if(t==i){for(var n=0,s=0,a=0,r=0,o=0,l=0,c=0;c<e.players.list.length;++c){var d=e.players.list[c].kills,h=e.players.list[c].score,u=e.players.list[c].denies;1==e.players.list[c].team?(a+=d,n+=h,o+=u):(r+=d,s+=d,l+=u)}return o==l?a==r?n>s?1:2:a>r?1:2:o>l?1:2}return t>i?1:2},condition:[function(e){var t=e.teamScores[1]||0,i=e.teamScores[2]||0;return t<e.mode.tagLimit&&i<e.mode.tagLimit}],onKill:function(e,t,i){e.dropSpawnable(0,i)},tagLimit:65,teams:!0,noScoreC:!0}},function(e,t,i){i(1);e.exports={id:"def",name:"Defuse",alias:"def",site:!0,endStats:["sid","name","score","kills","deaths","reward"],lives:1,noRegen:!0,teams:!0,hitBoxPad:.5,gameStart:function(e){e.warmupReset(),e.lockMove()},realMov:!0,winCondition:function(e){for(var t,i=0,n=0;n<e.players.list.length;++n){if(t=e.players.list[n].team,e.players.list[n].diffuses)return t;e.players.list[n].active&&(1==t?i++:2==t&&0)}return i>0?1:2},condition:[function(e){for(var t=0,i=e.activeBomb?1:0,n=0;n<e.players.list.length;++n){if(e.players.list[n].diffuses)return!1;e.players.list[n].lives>0&&(1==e.players.list[n].team?t++:i++)}return t>=1&&i>=1}],onKill:function(e,t,i,n){var s=i.loadout.indexOf(17);if(s>-1)if(n&&n!=i)i.loadoutIndex=s,e.players.dropWeapon(i);else{if(null==i.lastPicked[17])return;var a=e.players.findEmptyPickup(i.lastPicked[17],!0);if(a){var r=[a.orgX,a.orgY,a.orgZ];e.updatePickup(a.uid,17,null,!0,r),e.broadcast("inat",-1,null,null,a.uid,17,!0,null,r)}}},waitTimers:[{time:1e4,comp:!0,noClear:!0,msg:"match starting in ",trigger:function(e){for(var t=0;t<e.players.list.length;++t)e.players.list[t].spectating?e.players.list[t].lives=0:e.players.list[t].send("gmsg",2==e.players.list[t].team?"DESTROY THE OBJECTIVE":"DEFEND THE OBJECTIVE");e.unlockMove()}}]}},function(e,t,i){i(1);e.exports={id:"shrp",name:"Sharp Shooter",alias:"shrp",party:!0,tag:["Party","#ffac00","#ffb600"],endStats:["sid","name","score","kills","deaths","reward"],leaderStats:["score","kills","deaths"],objWep:!0,randClassScr:.5,gameStart:function(e){e.activeObjective=0,e.nextWeapon(null,!0)},onKill:function(e,t,i,n){n&&n!=i&&(n.killStreak%2==0&&e.players.giveEffect(n,1),n.killStreak%3==0&&e.players.giveEffect(n,2),n.killStreak%5==0&&e.players.giveEffect(n,0))},forceClass:9,disabledStreaks:[4,5,6]}},function(e,t,i){i(1);e.exports={id:"trai",name:"Traitor",alias:"trai",lives:1,teams:!0,noDeadChat:!0,noKillFeed:!0,teamOptions:["Innocent","Traitor"],teamColors:["#37ad47","#d13838"],showTeam:!0,noRegen:!0,fakeNames:!0,noScoreK:!0,dmgTeam:!0,winCondition:function(e){for(var t=0,i=0,n=0;n<e.players.list.length;++n)if(e.players.list[n].lives>0){var s=e.players.list[n].lives;1==e.players.list[n].team?t+=s:i+=s}return t>i?1:2},condition:[function(e){for(var t=0,i=0,n=0;n<e.players.list.length;++n)e.players.list[n].lives>0&&e.players.list[n].active&&(1==e.players.list[n].team?t++:i++);return t>=1&&i>=1}],waitTimers:[{time:15e3,msg:"picking traitors in ",trigger:function(e){e.pickTraitors()}}],onKill:function(e,t,i){e.waitTimers||e.AI.spawn(null,0,i.name+"'s Ghost",i.x,i.y,i.z)},noReward:!0,minPlayers:3}},function(e,t,i){let n=i(1);e.exports={id:"raid",name:"Raid",alias:"raid",tag:["Event","#d95487","#e86b9b"],party:!0,randClassScr:.5,sendR:5,endStats:["sid","name","score","time","dmg","reward"],showMS:!0,noRegen:!0,lives:1,minPlayers:1,waitTimers:[{time:2e4,msg:"starting in "}],winCondition:function(e){for(var t=0,i=0;i<e.players.list.length;++i)e.players.list[i].lives>0&&t++;return e.gameTimerP>0&&t>0?1:2},condition:[function(e){for(var t=0,i=0;i<e.players.list.length;++i)e.players.list[i].lives>0&&e.players.list[i].active&&t++;return t>0}],onEnd:function(e){if(e.gameTimerP>0)for(var t,i=null==e.mode.gameTime?6e4*e.config.gameTime:e.mode.gameTime,s=0;s<e.players.list.length;++s)!(t=e.players.list[s]).timer&&t.active&&(t.timer=n.getTime(i-(e.gameTimerP||0)),t.gameTimer=i-(e.gameTimerP||0),t.account&&t.gameTimer>0&&!e.isCustom&&e.challenges.update(e,"time",t.gameTimer,null,t))},skipStats:["h","s","crc","step"],noWeap:!0,friendly:!0,noClan:!0,noFreeCam:!0,viewDis:500,specMaxD:25,gameTime:36e4,botsAsAI:!0,noAssists:!0,botBypassClass:!0,noMinimap:!0}},function(e,t,i){i(1);e.exports={id:"blitz",name:"Blitz",alias:"blitz",endStats:["sid","name","score","kills","deaths","caps"],onKill:function(e,t,i){e.dropFlag(i.flag)},rush:!0,flags:!0,teams:!0,noScoreC:!0}},function(e,t,i){let n=i(1);var s;e.exports={id:"dom",name:"Domination",sub:"Dominate the Objective",alias:"dom",endStats:["sid","name","score","kills","deaths","caps","reward"],leaderStats:["score","caps"],description:"Capture as many areas as possible by standing your position and defending it. The more time your team stay in the secured zone, the more points it wins.",descriptionLang:"game.mode.dom.description",dom:!0,teams:!0,noScoreC:!0,captureTime:1e4,lockoutMlt:1.5,perPlayerMlt:.2,collisionCheck:function(e,t){for(var i=0;i<e.map.manager.domzones.length;++i)s=e.map.manager.domzones[i],t.collides(s)&&(t.onZone=s.uid)},onKill:function(e,t,i,s){if(s&&s!=i){var a;if(n.isNumber(s.onZone))(a=e.map.manager.domzones[s.onZone])&&a.capturedBy==s.team&&(e.players.score(s,25),e.incMedal("Defender",s),s.send("am",[25,25,0,1]),e.challenges.update(e,"defm",1,null,s));if(n.isNumber(i.onZone))(a=e.map.manager.domzones[i.onZone])&&a.capturedBy==i.team&&(e.players.score(s,25),e.incMedal("Attacker",s),s.send("am",[26,25,0,1]),e.challenges.update(e,"atkm",1,null,s))}}}},function(e,t,i){i(1);e.exports={id:"sdm",name:"Squad Deathmatch",endStats:["sid","name","score","kills","deaths","assists","reward"],alias:"sdm",teams:!0,multiTeam:4}},function(e,t,i){i(1);e.exports={id:"krank",name:"Kranked FFA",endStats:["sid","name","score","kills","deaths","reward"],leaderStats:["score","kills","deaths"],alias:"krank",forceSpawn:5,krankedTimer:15e3,bonuses:{speed:1.25,reload:.35,firerate:.85},update:function(e,t,i){for(var n=0;n<e.players.list.length;++n)e.players.list[n].active&&e.players.list[n].krankedTimer&&(e.players.list[n].krankedTimer-=i,e.players.list[n].krankedTimer<=0&&(e.explosion(e.players.list[n].x,e.players.list[n].y+6,e.players.list[n].z,50,300,e.players.list[n],{}),e.players.kill(e.players.list[n])))},onKill:function(e,t,i,n){if(n&&n!=i){var s=n.isKranked;n.krankedTimer=e.mode.krankedTimer,n.isKranked=!0,e.broadcast("chrg",n.sid,n.krankedTimer),(s||i.isKranked)&&(e.players.score(n,35),e.incMedal(s?"Recharge":"Clock Work",n),n.send("am",[s?28:27,35,0,1]),s&&e.challenges.update(e,"rcm",1,null,n))}}}},function(e,t,i){i(1);e.exports={id:"tdf",name:"Team Defender",alias:"tdf",endStats:["sid","name","score","kills","deaths","obj","reward"],leaderStats:["objective","score"],teams:!0,objScore:20,teamCarrierMlt:1,nonCarrierMlt:.5,carrierMlt:1.25,onKill:function(e,t,i){e.dropFlag(i.flag)},oneflag:!0,update:function(e,t,i){if(e.map.manager.flags.length&&(!e.waitTimers||e.waitTimers[0]&&e.waitTimers[0].contTime)&&(e.objectiveTimer-=i,e.objectiveTimer<=0)){e.objectiveTimer=1500;for(var n=e.connectedClients<4&&!e.hasHost()&&!e.isComp,s=0;s<e.players.list.length;++s)e.players.list[s].active&&e.players.list[s].flag&&e.players.score(e.players.list[s],n?1:e.mode&&e.mode.objScore?e.mode.objScore:10)}}}},function(e,t,i){let n=i(1);var s,a;e.exports={id:"depoffa",name:"Deposit FFA",alias:"depoffa",party:!0,tag:["Party","#ffac00","#ffb600"],endStats:["sid","name","score","kills","deaths","deposits","reward"],leaderStats:["deposits","kills","score"],objective:!0,tagLimit:65,objScore:75,killMlt:.5,noScoreC:!0,tagHoldLimit:20,deposit:!0,maxPerCluster:3,gameStart:function(e){e.activeObjective=-1,e.randObjective(null,!0)},leaderSort:function(e,t){return e.deposits===t.deposits&&e.kills&&t.kills?e.kills-t.kills:t.deposits-e.deposits},endSort:function(e,t){return e.deposits===t.deposits&&e.kills&&t.kills?t.kills-e.kills:t.deposits-e.deposits},condition:[function(e){for(var t=0;t<e.players.list.length;++t)if(e.players.list[t].deposits>=e.mode.tagLimit)return!1;return!0}],onKill:function(e,t,i,s){var a=i.dogTags||0;if(s&&s!=i&&(a+=1),a){var r=i.lastGround&&(!s||s==i&&a>1);if(s&&s!=i||r){i.lastGround&&!i.onGround&&(r=!0);var o={x:r?i.lastGround.x:i.x,y:r?i.lastGround.y:i.y,z:r?i.lastGround.z:i.z};if(a<=e.mode.maxPerCluster)e.dropSpawnable(3,i,{c:a},o);else{for(var l=Math.floor(a/e.mode.maxPerCluster),c=a%e.mode.maxPerCluster,d=0;d<l;d++)e.dropSpawnable(3,i,{c:e.mode.maxPerCluster},{x:o.x+n.randInt(-10,10),y:o.y,z:o.z+n.randInt(-10,10)});c&&e.dropSpawnable(3,i,{c:c},{x:o.x+n.randInt(-10,10),y:o.y,z:o.z+n.randInt(-10,10)})}}}},update:function(e,t,i){if(e.map.manager.objectives.length&&e.waitTimers&&e.waitTimers[0].contTime&&(e.objectiveTimer-=i,e.objectiveTimer<=0)){e.objectiveTimer=750;for(var n=0;n<e.map.manager.objectives.length;++n)if((s=e.map.manager.objectives[n])&&s.uid==e.activeObjective)for(var r=0;r<e.players.list.length;++r)(a=e.players.list[r]).active&&a.dogTags>0&&a.collides(s)&&(a.dogTags--,a.deposits++,e.incMedal("Deposited",a),e.players.score(a,e.mode&&e.mode.objScore?e.mode.objScore:10),a.send("am",[49,e.mode&&e.mode.objScore?e.mode.objScore:10,0,1]),a.send("krt",a.dogTags),e.challenges.update(e,"dep",1,null,a))}}}},function(e,t,i){i(1);e.exports={id:"car",name:"Carrier",alias:"car",endStats:["sid","name","score","kills","deaths","obj","reward"],leaderStats:["objective","score"],preventCustomGames:!0,objScore:20,teamCarrierMlt:1,nonCarrierMlt:.5,carrierMlt:1.25,onKill:function(e,t,i){e.dropFlag(i.flag)},oneflag:!0,update:function(e,t,i){if(e.map.manager.flags.length&&(!e.waitTimers||e.waitTimers[0]&&e.waitTimers[0].contTime)&&(e.objectiveTimer-=i,e.objectiveTimer<=0)){e.objectiveTimer=1500;for(var n=e.connectedClients<4&&!e.hasHost()&&!e.isComp,s=0;s<e.players.list.length;++s)e.players.list[s].active&&e.players.list[s].flag&&e.players.score(e.players.list[s],n?1:e.mode&&e.mode.objScore?e.mode.objScore:10)}}}},function(e,t,i){let n=i(1);e.exports={id:"aon",name:"All or Nothing",alias:"aon",preventCustomGames:!0,tag:["Event","#d95487","#e86b9b"],event:4,endStats:["sid","name","score","kills","deaths","reward"],leaderStats:["score","kills"],onKill:function(e,t,i,s){var a=i.lastGround&&(!s||s==i);if(s&&s!=i||a){i.lastGround&&!i.onGround&&(a=!0);var r={x:a?i.lastGround.x:i.x,y:a?i.lastGround.y:i.y,z:a?i.lastGround.z:i.z},o=i.ammos[0]||0;e.dropSpawnable(6,i,{xD:i.xDire+n.toRad(90),c:o},r),n.randInt(1,100)<=30&&e.dropSpawnable(8,i,null,r)}s&&s!=i&&s.killStreak>=5&&n.randInt(1,100)>=50&&e.players.giveEffect(s,n.getRandom([0,2,9]))},doubleXP:!0,forceSpawn:3,forceClass:9,ammoLimit:0,noReloads:!0,noPickups:!0,randClassScr:.5,noScrLimit:!0,noKnives:!0,startingLoadout:[16],disabledStreaks:[4,5,6]}},function(e,t,i){let n=i(1);var s=[0,1,2,3,4,5,6,7,8,9,10,11,14,16,18,21,27];e.exports={id:"md",name:"Mag Dump",alias:"md",preventCustomGames:!0,tag:["Event","#d95487","#e86b9b"],event:5,endStats:["sid","name","score","kills","deaths","pickups","reward"],leaderStats:["score","kills","pickups"],onKill:function(e,t,i,a){if(a&&a!=i){var r=i.lastGround&&!i.onGround,o={x:r?i.lastGround.x:i.x,y:r?i.lastGround.y:i.y,z:r?i.lastGround.z:i.z};e.dropSpawnable(7,i,{wId:n.getRandom(s),xD:i.xDire+n.toRad(90)},o),n.randInt(1,100)<=20&&e.dropSpawnable(8,i,null,{x:o.x+n.randInt2(3,8),y:o.y,z:o.z+n.randInt2(3,8)})}},doubleXP:!0,forceSpawn:3,forceClass:9,noReloads:!0,noPickups:!0,randClassScr:.5,noScrLimit:!0,noKnives:!0,startingLoadout:[2],disabledStreaks:[4,5,6]}},function(e,t,i){i(1);i(4);e.exports={id:"chs",name:"Chaos Snipers",alias:"chs",party:!0,tag:["Party","#ffac00","#ffb600"],endStats:["sid","name","score","kills","deaths","reward"],leaderStats:["score","kills"],forceSpawn:3,forceClass:0,noPickups:!0,noKnives:!0,gravMlt:.92,jumpMlt:1.5,groundAccel:2,airAccel:1.4,reloadMlt:.5,frSlid:!0,wallJ:!0,wallJM:100,wallJD:.05,wallJV:.06,wallJYV:2,maxHealth:10,ammoLimit:1,noScrLimit:!0,startingLoadout:[0],disabledStreaks:[4,5,6]}},function(e,t,i){i(1);i(4);e.exports={id:"bhffa",name:"Bighead FFA",alias:"bhffa",leaderStats:["score","kills","deaths"],party:!0,tag:["Party","#ffac00","#ffb600"],bighead:!0,headMlt:.1,headMltMax:3,onKill:function(e,t,i,n){n&&n!=i&&(n.headMlt=Math.min(this.headMltMax||3,1+(this.headMlt||.1)*n.kills),e.players.updateHeadSize(n,n.headMlt),e.broadcast("bh",n.sid,n.headMlt))}}},function(e,t,i){let n=i(1);var s=[{p:[33,1,171],s:[1.3,7.21,7.45],i:55,h:200,cdy:1,tm:2,tAi:1,ct:1,te:15,mro:270,tas:[{ta:60,tct:"4280|0.1,4041|0.1,5728|0.1,3238|0.25"}],rsc:50,sd:1,ms:1.4,aid:"46802q",rmt:5e3,rmr:60,aic:10,tsd:1,spd:.8,prs:1,prg:0,prsc:1,prms:1,pjs:1,pjd:100,vd:1e4,idl:32601,dth:0,atk:0,atkh:0,mel:32600,melh:0,agr:0,fr:2e3,aac:0,shb:400,sha:0,shdy:0,mldy:300,mls:0,ss:0,crd:1.5,crh:2.8,hr:1e3,mlr:15,mlra:1.5,mld:40,grv:1,bh:0,pht:0,phi:"",cnh:1,xv:1,ain:"Walker",ains:1,hbh:2.7,hbw:.9,ail:10,sp:25,as:.8,sor:.8,pmv:1,dos:1},{p:[33,1,171],s:[1.6900000000000002,9.373000000000001,9.685],i:55,h:550,cdy:1,tm:2,tAi:1,ct:1,te:15,mro:270,tas:[{ta:60,tct:"4280|0.1,4041|0.1,5728|0.1,3238|0.25"}],rsc:50,sd:1,ms:1.8199999999999998,aid:"46802q",rmt:5e3,rmr:60,aic:10,tsd:1,spd:.35,prs:1,prg:0,prsc:1,prms:1,pjs:1,pjd:100,vd:1e4,idl:32601,dth:0,atk:0,atkh:0,mel:32600,melh:0,agr:0,fr:2e3,aac:0,shb:400,sha:0,shdy:0,mldy:500,mls:0,ss:0,crd:1.5,crh:3.1,hr:1100,mlr:20,mlra:1.5,mld:60,grv:1,bh:0,pht:0,phi:"",cnh:1,xv:1,ain:"Brute",ains:1,hbh:2.7,hbw:.9,ail:30,sp:35,as:.6,sor:.6,pmv:1,dos:1},{p:[33,1,171],s:[1.95,10.815,11.175],i:55,h:2500,cdy:1,tm:2,tAi:1,ct:1,te:15,mro:270,tas:[{ta:60,tct:"4280|0.5,4041|0.5,5728|0.5,3238|1,5819|0.1"}],rsc:50,sd:1,ms:1.8,aid:"46803q",rmt:5e3,rmr:60,aic:10,tsd:.4,spd:.35,prs:1,prg:0,prsc:1,prms:1,pjs:1,pjd:100,vd:1e4,idl:32601,dth:0,atk:0,atkh:0,mel:32600,melh:0,agr:0,fr:2e3,aac:0,shb:400,sha:0,shdy:0,mldy:700,mls:.1,ss:0,crd:1.5,crh:4.9,hr:1500,mlr:30,mlra:Math.PI,mld:100,grv:1,bh:0,pht:0,phi:"",cnh:1,xv:1,ain:"Flesh Colossal",ains:1.5,hbh:3.5,hbw:1.8,ail:70,sp:150,as:1,sor:.35,pmv:1,dos:1},{p:[33,1,171],s:[1.3,7.21,7.45],i:55,h:200,cdy:1,tm:2,tAi:1,ct:1,te:15,mro:270,tas:[{ta:60,tct:"4280|0.25,4041|0.25,5728|0.25,3238|0.5"}],rsc:50,sd:1,ms:1.4,aid:"46804q",rmt:5e3,rmr:60,aic:10,tsd:1.8,spd:1.4,prs:1,prg:0,prsc:1,prms:1,pjs:1,pjd:100,vd:1e4,idl:32601,dth:0,atk:0,atkh:0,mel:32600,melh:0,agr:0,fr:2e3,aac:0,shb:400,sha:0,shdy:0,mldy:300,mls:0,ss:0,crd:1.5,crh:2.1,hr:1e3,mlr:15,mlra:1.5,mld:30,grv:1,bh:0,pht:0,phi:"",cnh:1,xv:1,ain:"Runner",ains:1,hbh:2.5,hbw:1,ail:10,sp:25,as:.8,sor:1,pmv:1,dos:1},{p:[33,1,171],s:[1.3,7.21,7.45],i:55,h:200,cdy:1,tm:2,tAi:1,ct:1,te:15,mro:270,tas:[{ta:60,tct:"4280|0.1,4041|0.1,5728|0.1,3238|0.25"}],rsc:50,sd:1,ms:.5,aid:"46803q",rmt:5e3,rmr:60,aic:10,tsd:3.6,spd:1.4,prs:1,prg:0,prsc:1,prms:1,pjs:1,pjd:100,vd:1e4,idl:32601,dth:0,atk:0,atkh:0,mel:32600,melh:0,agr:0,fr:2e3,aac:0,shb:400,sha:0,shdy:0,mldy:300,mls:0,ss:0,crd:1.5,crh:2.1,hr:1e3,mlr:15,mlra:1.5,mld:30,grv:1,bh:0,pht:0,phi:"",cnh:1,xv:1,ain:"Rascal",ains:1,hbh:2.5,hbw:1,ail:1,sp:25,as:.8,sor:1,pmv:1,dos:1}];var a=[{name:"FRENZY",zombCnts:[0,2,0,10]},{name:"ONSLAUGHT",zombCnts:[0,15,1,1]},{name:"DEVASTATION",zombCnts:[2,2,5,5]},{name:"ANNIHILATION",zombCnts:[5,5,10,5]},{name:"LIMBO",zombCnts:[0,0,15,10]}];e.exports={id:"zom",name:"Zombies",alias:"zom",noSliding:!0,noStreaks:!0,noWallJ:!0,impulseMlt:0,lives:1,endStats:["sid","name","score","zombies","downs","rounds","reward"],leaderStats:["points","zombies","downs","dmg"],description:"Survive endless waves of zombies",descriptionLang:"game.mode.zom.description",sendR:5,lives:1,minPlayers:1,skipStats:["h","s","crc","step"],friendly:!0,viewDis:500,noClassScr:!0,forceClass:9,finiteAmmo:!0,startingLoadout:[2],noScrLimit:!0,unrestrictedWeapons:!0,pointsPerHit:.085,starterScore:150,gameTime:0,regenMlt:.1,forceOldScoreboard:!0,preventCustomGames:!0,forceCharge:!0,showAllLeaders:!0,noMinimap:!0,winCondition:function(){return 2},condition:[function(e){for(var t=0,i=0;i<e.players.list.length;++i)e.players.list[i].lives>0&&e.players.list[i].active&&t++;return t>0}],gameStart:function(e){e.zombieSpawnTim=0,e.skipZCheck=!1,e.zWave=0,e.zWaveData={concZomb:5,zombCnts:[10,0,0,1],tmpCnts:[],hpMlt:1,dmgMlt:1,spdMlt:1,zLeft:0},e.zSpawnPoints=e.map.manager.serverNodes?e.map.manager.serverNodes.filter((e=>e&&"zombie_spawn"==e.tag)):[],e.zFrogSpawnRound=n.randInt(4,7),e.zDroneSpawnRound=n.randInt(9,13),e.eePAPCompleted=!1,e.eePAPActive=!1,e.eePAPOrder=["Walker","Brute","Runner"],n.yateShuffle(e.eePAPOrder),e.eePAPProgress=0,e.eeDanceTimer=0,e.eeDanceCompleted=!1,e.eeDanceSkullSpawns=e.map.manager.serverNodes?e.map.manager.serverNodes.filter((e=>e&&"skull_spawn"==e.tag)):[],e.eeDanceSkulls=0},onPreEnd:function(e){if(e.bots&&e.bots.list)for(var t=e.bots.list.length-1;t>=0;--t)e.bots.remove(e.bots.list[t]);var i;for(t=0;t<e.players.list.length;++t)i=e.players.list[t],e.challenges.update(e,"rnd",i.rounds||0,null,i),i.score=100*(e.zWave||1)},onEnd:function(e,t,i){if(e.zWave>1&&e.isPubType())for(var n,s=0;s<e.players.list.length;++s)(n=e.players.list[s])&&n.account&&i.call(135,[4,n.account.id,e.zWave],(function(){}))},onKill:function(e,t,i){for(var n=0;n<e.players.list.length;++n)if((e.players.list[n].active&&!e.players.list[n].spectating||i==e.players.list[n])&&e.players.list[n].score>0){var s=Math.floor(.1*e.players.list[n].score);s>0&&e.players.score(e.players.list[n],-s)}},powerupRarities:[89,5,4,2],powerups:[[],[9,14],[11,15],[10,12,13]],onAIDeath:function(e,t,i){if(e.zWave&&e.zWave%5==0&&e.zWaveData.zLeft<=0&&e.activeAIs(2)<=0&&e.dropSpawnable(9,t,null,{x:t.x,y:t.y,z:t.z}),i&&i.isPlayer){var s=n.randFloat(0,100).round(2);0==this.powerupRarities[0]&&(s=Math.max(s,.01));for(var a=0,r=0,o=0;o<this.powerupRarities.length;++o)if(s<=(r+=this.powerupRarities[o])){a=o;break}if(this.powerups[a||0].length){var l=n.getRandom(this.powerups[a||0]);e.dropSpawnable(l,t,null,{x:t.x,y:t.y,z:t.z})}n.randFloat(0,100)>=99&&e.dropSpawnable(19,t,null,{x:t.x,y:t.y,z:t.z});var c=i.loadout[i.loadoutIndex];e.challenges.update(e,"aik",1,{wep:c},i)}},onTrigger:function(e){if(!e.eePAPActive){e.eePAPActive=!0;var t=e.map.manager.serverNodes.find((e=>e&&"portal_spawn"==e.tag));t&&e.dropSpawnable(20,null,null,{x:t.x,y:t.y,z:t.z})}},update:function(e,t,i){if(!e.waitTimers||e.waitTimers[0]&&e.waitTimers[0].contTime){if(!e.zSpawnPoints||!e.zSpawnPoints.length)return;if(e.eeDanceTimer&&(e.eeDanceTimer-=i,e.eeDanceTimer<=0&&(e.eeDanceTimer=0,e.eeDanceCompleted||e.broadcast("tx","Souls escaped","",!0))),e.zombieSpawnTim-=i,e.zombieSpawnTim<=0){e.zombieSpawnTim=1e4;var r=e.activeAIs(2);if(r<=0&&e.zWaveData.zLeft<=0&&!e.skipZCheck){e.zWave++,e.skipZCheck=!0,e.zombieSpawnTim=7500,e.checkPlayerLimit();for(var o=0;o<e.players.list.length;++o)e.players.list[o].rounds=(e.players.list[o].rounds||0)+1,e.players.list[o].active&&!e.players.list[o].spectating||e.players.list[o].kpdData||(e.players.list[o].lives=1,e.players.list[o].send("frs",!0),e.players.score(e.players.list[o],Math.round(.5*e.players.list[o].score),void 0,!0));if(e.zWave&&e.zWave%e.zDroneSpawnRound==0)if(n.randFloat(0,100)>=99.99){var l=n.getRandom(e.players.list.filter((e=>e&&e.account)));l&&e.giveSkin(l,5837,"zombies")}if(e.zWave&&e.zWave%e.zFrogSpawnRound==0)if(n.randFloat(0,100)>=80){var c=n.getRandom(e.map.manager.serverNodes.filter((e=>e&&"frog_spawn"==e.tag)));c&&e.dropSpawnable(17,null,null,{x:c.x,y:c.y,z:c.z})}e.zWaveData.concZomb+=2,e.zWaveData.concZomb=Math.min(e.zWaveData.concZomb,30),e.zWaveData.zombCnts[0]+=e.zWave%2==0?1:0,e.zWaveData.zombCnts[0]=Math.min(e.zWaveData.zombCnts[0],30),e.zWaveData.zombCnts[1]+=e.zWave%2==0?1:0,e.zWaveData.zombCnts[1]=Math.min(e.zWaveData.zombCnts[1],10),e.zWaveData.zombCnts[2]+=e.zWave%4==0?1:0,e.zWaveData.zombCnts[2]=Math.min(e.zWaveData.zombCnts[2],5),e.zWaveData.zombCnts[3]+=e.zWave%3==0?1:0,e.zWaveData.zombCnts[3]=Math.min(e.zWaveData.zombCnts[2],4);var d=e.zWave%5==0?n.getRandom(a):void 0;e.zWaveData.tmpCnts.length=0,e.zWaveData.zLeft=0;var h=d?d.zombCnts:e.zWaveData.zombCnts;for(o=0;o<h.length;++o){e.zWaveData.zLeft+=parseInt(h[o]);for(var u=0;u<h[o];++u)e.zWaveData.tmpCnts.push(o)}return e.zWaveData.hpMlt+=e.zWave%2==0?.1:0,e.zWaveData.dmgMlt+=e.zWave%4==0?.1:0,e.zWaveData.spdMlt+=e.zWave%4==0?.1:0,void e.broadcast("upz",e.zWave,d?d.name:null)}e.skipZCheck=!1;var p=e.zWaveData,f=p.concZomb-r;for(o=0;o<f&&p.tmpCnts.length;++o){var m=p.tmpCnts.splice(n.randInt(0,p.tmpCnts.length-1),1)[0],g=n.getRandom(e.zSpawnPoints),v=s[m],y={...v};y.h=Math.round(v.h*p.hpMlt),y.mld=Math.round(v.mld*p.dmgMlt),y.spd=v.spd*p.spdMlt,e.eePAPCompleted||(y.ail=parseInt(y.ail)+e.eePAPOrder.indexOf(y.ain)+1);var b=e.map.manager.addAI(g.x,g.y,g.z,y.r,y.s[0]/2,y.s[1]/2,y.s[2]/2,y,e.triggers,!0);e.zSpawned++,e.AI.spawn(null,0,y.ain,b.x,b.y,b.z,b.data),p.zLeft--}}}},custUI:function(){window.switchLeaderboard(!0,!0)}}},function(e,t,i){i(1);i(4);e.exports={id:"imp",name:"Impulsed",alias:"imp",party:!0,tag:["Party","#ffac00","#ffb600"],endStats:["sid","name","score","kills","deaths","reward"],leaderStats:["score","kills"],forceSpawn:3,forceClass:0,noPickups:!0,explMlt:5,explSMlt:2,gravMlt:1.05,jumpMlt:1.5,impulseMlt:3,nonObjImpulse:!0,groundAccel:2,airAccel:1.4,reloadMlt:.5,frSlid:!0,wallJ:!0,wallJM:100,wallJD:.05,wallJV:.06,wallJYV:2,noScrLimit:!0,startingLoadout:[5,22],disabledStreaks:[4,5,6],preventCustomGames:!0,onKill:function(e,t,i,n){n&&n!=i&&!n.canThrow&&e.refillPlayer(n)}}},function(e,t,i){const n=i(4),s=[289362,105683,201211],a=[3742667];e.exports=class{constructor(e,t,i){i=i||{},this.active=!0,this.id=e,this.name=t,this.score=i.player_score||0,this.kills=i.player_kills||0,this.deaths=i.player_deaths||0,this.wins=i.player_wins||0,this.hack=~~(i.player_hack||0),this.games=i.player_games_played||0,this.clan=i.player_clanid,this.funds=i.player_funds||0,this.featured=~~(i.player_featured||0),this.clan=i.player_clan||null,this.timePlayed=i.player_timeplayed||0,this.skins=i.skins||[],this.invVal=i.player_skinvalue||0,this.lastReward=i.player_lastreward||0,this.isDev=~~(i.player_developer||0),this.following=i.player_following||0,this.followers=i.player_followed||0,this.stats=i.player_stats?JSON.parse(i.player_stats):{},this.regionInd=i.player_region,this.role=i.player_role||0,this.premiumT=i.player_premium||0,this.premiumT=this.premiumT<0?0:this.premiumT,this.pType=i.player_type||0,this.twoFA=i.player_2FA||"",this.alias=this.premiumT&&i.player_alias||t,this.createDate=i.player_datenew||"",this.twitch=i.tw_twitchname||null,this.isCreationMod=~~(i.player_mapmod||0),this.clanDeaths=i.clan_deaths||0,this.clanKills=i.clan_kills||0,this.clanTime=i.clan_time||0,this.clanRole=i.player_clanrole||-1,this.jobRating=i.jobrating||0,this.jobRatingPos=i.jobratingpositive||0,this.reqDel=(i.player_cancelrequest||0)>0,this.externalToken=i.external_login_token||null,this.trades=i.player_trades||0,this.email=i.player_email||null,this.isAdmin=~~(i.player_admin||0),this.junk=i.player_jnk||0,this.badges=(i.player_badge?(i.player_badge||"").split(","):[]).map(Number),this.activeChallenges=[],this.metamask=i.player_metamask||null,this.isSkinMaker=~~(i.player_skinmaker||0),this.updateLevel(),this.updatePerms()}setData(e){this.kills=e[1],this.wins=e[2],this.games=e[3],this.deaths=e[4],this.funds=e[5],this.score=e[6],this.clan=e[7],this.timePlayed=e[8],this.featured=~~e[9],this.skins=e[10],this.lastReward=e[11],this.isDev=~~e[12],this.following=e[13],this.followers=e[14],this.stats=e[15],this.hack=~~e[16],this.regionInd=e[17],this.role=e[18],this.premiumT=e[19],this.twoFA=e[20],this.alias=this.premiumT&&e[21]||this.name,this.createDate=e[22],this.twitch=e[23],this.isCreationMod=~~e[24],this.clanDeaths=e[25],this.clanKills=e[26],this.jobRating=e[27],this.jobRatingPos=e[28],this.reqDel=e[29],this.clanRole=e[30],this.clanTime=e[31],this.externalToken=e[32],this.trades=e[33],this.email=e[34],this.isAdmin=e[35],this.invVal=e[36],this.junk=e[37],this.activeChallenges=e[38],this.badges=e[39],this.metamask=e[40],this.BP&&(this.BP.bpp=e[41]),this.isSkinMaker=e[42],this.updateLevel(),this.updatePerms()}getLevelProg(){const e=this.level>1?Math.pow(this.level/n.rankVar,2):0,t=Math.pow((this.level+1)/n.rankVar,2);return parseInt(this.score-e)/parseInt(t-e)*100}updateLevel(){const e=n.rankVar*Math.sqrt(this.score);this.level=Math.floor(e),this.level=Math.max(1,this.level),this.levelProg=this.getLevelProg()}updatePerms(){this.isDeputy=3==this.role,this.isMod=2==this.role,this.canFlag=this.isDev||this.isMod||this.isDeputy,this.canGlobalFlag=this.isDev||this.isMod,this.canTeleport=this.isDev,this.canSuicide=this.isDev,this.canVerify=this.isDev,this.canBadge=s.indexOf(this.id)>-1,this.canGlobalKick=this.isDev||this.isMod,this.canSilentKick=this.isDev||this.isAdmin,this.canGlobalBan=this.isDev||this.isMod,this.canViewReports=this.isDev||this.isMod,this.canFeatureCreations=this.isDev,this.canDeleteCreations=this.isDev||this.isCreationMod,this.canGlobalEdit=this.isDev||this.isAdmin,this.canUseKRTrigger=this.isDev||this.isAdmin,this.canRehost=this.isDev||this.isAdmin||a.indexOf(this.id)>-1,this.createDate&&(new Date).getTime()-new Date(this.createDate).getTime()>=n.krTriggerReq&&(this.canUseKRTrigger=!0)}setSkins(e){let t={};if(e)for(var i=0;i<e.length;++i)t={ind:e[i].i,cnt:e[i].c,a:e[i].a||""},e[i].a&&(t.a=e[i].a),this.skins.push(t)}addSkin(e,t){if(e=parseInt(e),this.skins.some((t=>t.ind===e))){const i=this.skins.find((t=>t.ind===e));i&&(i.cnt+=t||1)}else this.skins.push({ind:e,cnt:t||1})}removeSkin(e,t){if(e=parseInt(e),this.skins.some((t=>t.ind===e))){const i=this.skins.findIndex((t=>t.ind===e));i>=0&&(this.skins[i].cnt-=t||1,this.skins[i].cnt<=0&&this.skins.splice(i,1))}}getSkinCount(e){const t=this.skins.find((t=>t.ind===e));return t?t.cnt:0}hasSkin(e){return this.skins.some((t=>t.ind===e&&t.cnt>0))}getData(){return[this.id,this.kills,this.wins,this.games,this.deaths,this.funds,this.score,this.clan,this.timePlayed,this.featured,this.skins,this.lastReward,this.isDev,this.following,this.followers,this.stats,this.hack,this.regionInd,this.role,this.premiumT,!!this.twoFA,this.alias,this.createDate,this.twitch,this.isCreationMod,this.clanDeaths,this.clanKills,this.jobRating,this.jobRatingPos,this.reqDel,this.clanRole,this.clanTime,this.externalToken,this.trades,this.email,this.isAdmin,this.invVal,this.junk,this.activeChallenges,this.badges,this.metamask,this.BP?this.BP.bpp:0,this.isSkinMaker]}}},function(e,t,i){var n=i(4);const s=i(1);var a=i(63),r=i(29),o=i(267);const l=["nuke_0",1,1,0,!1];e.exports.events=[{name:"onShoot",desc:"REPLACE"},{name:"onMelee",desc:"REPLACE"},{name:"onDamage",desc:"REPLACE"},{name:"onEnterObject",desc:"REPLACE"},{name:"onDestroy",desc:"REPLACE"},{name:"onRespawn",desc:"REPLACE"},{name:"onTimer",desc:"REPLACE"},{name:"onProjectile",desc:"REPLACE"},{name:"onThrowingMelee",desc:"REPLACE"},{name:"onPunch",desc:"REPLACE"},{name:"onHoldMouse",desc:"REPLACE"},{name:"onCollision",desc:"REPLACE"},{name:"onStorageEquals",desc:"REPLACE"},{name:"onStorageGreater",desc:"REPLACE"},{name:"onStorageLesser",desc:"REPLACE"},{name:"onAIDeath",desc:"REPLACE"},{name:"onInteractKey",desc:"REPLACE"},{name:"onPlayerSpawn",desc:"REPLACE"},{name:"onPlayerKill",desc:"REPLACE"},{name:"onPlayerDie",desc:"REPLACE"},{name:"onAIDamage",desc:"REPLACE"},{name:"onNukeStart",desc:"REPLACE"},{name:"onNukeEnd",desc:"REPLACE"},{name:"onExitObject",desc:"REPLACE"},{name:"onCustomValEquals",desc:"REPLACE"},{name:"onCustomValLesser",desc:"REPLACE"},{name:"onGameStart",desc:"REPLACE"},{name:"onObjectiveSwitch",desc:"REPLACE"},{name:"onPlayerDamage",desc:"REPLACE"},{name:"onAIHalfHealth",desc:"REPLACE"},{name:"onCustomValGreater",desc:"REPLACE"},{name:"onAIKillPlayer",desc:"REPLACE"}],e.exports.conditions=[{name:"None",desc:"REPLACE",check:function(){return!0}},{name:"Player Value",desc:"REPLACE",vals:[{name:"Key",def:"",input:!0,len:10},{name:"Type",def:0,select:["Equal","Not Equal","Greater than","Greater or Equal","Less than","Less or Equal"]},{name:"Val",def:0,min:0,max:1e3,step:.01}],check:function(e,t,i,a,r){if(!i||!r)return!1;var o,l=r.trigCond[1]+"",c=r.trigCond[2],d=r.trigCond[3];return o=n.playerVals.indexOf(l)>-1?i[l]:i.custVals&&i.custVals[l]||0,s.compareVal(c,o,d)}},{name:"Current Class",desc:"REPLACE",vals:[{name:"Class",def:0,select:Object.keys(a).map((function(e){return a[e].name}))}],check:function(e,t,i,n,s){if(!i||!s)return!1;var a=parseInt(s.trigCond[1])||0;return i.classIndex==a}},{name:"Trigger Value",desc:"REPLACE",vals:[{name:"Key",def:"",input:!0,len:10},{name:"Type",def:0,select:["Equal","Not Equal","Greater than","Greater or Equal","Less than","Less or Equal"]},{name:"Val",def:0,min:0,max:1e3,step:.01}],check:function(e,t,i,n,a){if(!n||!i||!a)return!1;var r=a.trigCond[1]+"",o=a.trigCond[2],l=a.trigCond[3],c=n.custVals&&n.custVals[r]||0;return s.compareVal(o,c,l)}},{name:"Player Count",desc:"REPLACE",vals:[{name:"Type",def:0,select:["Equal","Not Equal","Greater than","Greater or Equal","Less than","Less or Equal"]},{name:"Filter",def:0,select:["Active","Spectating","Overall Connected"]},{name:"Amount",def:0,min:0,max:50,step:1}],check:function(e,t,i,n,a){if(!n||!a||!e)return!1;var r=a.trigCond[1],o=a.trigCond[2],l=a.trigCond[3],c=0;return 0==o?c=e.players.list.filter((e=>e&&e.active)).length||0:1==o?c=e.players.list.filter((e=>e&&e.spectating)).length||0:2==o&&(c=e.connectedClients||0),s.compareVal(r,c,l)}},{name:"Global Value",desc:"REPLACE",vals:[{name:"Key",def:"",input:!0,len:10},{name:"Type",def:0,select:["Equal","Not Equal","Greater than","Greater or Equal","Less than","Less or Equal"]},{name:"Val",def:0,min:0,max:1e3,step:.01}],check:function(e,t,i,n,a){if(!n||!i||!a)return!1;var r=a.trigCond[1]+"",o=a.trigCond[2],l=a.trigCond[3],c=e.globalVals&&e.globalVals[r]||0;return s.compareVal(o,c,l)}},{name:"Player has Account",desc:"REPLACE",check:function(e,t,i,n,s){return!!i&&!!s&&!!i.account}},{name:"Player has Premium",desc:"REPLACE",check:function(e,t,i,n,s){return!!i&&!!s&&!!i.account&&i.account.premiumT>0}},{name:"Player is Verified",desc:"REPLACE",check:function(e,t,i,n,s){return!!(i&&s&&i.account&&i.account.featured)}},{name:"Player is Partner",desc:"REPLACE",check:function(){return!1}},{name:"Player Level",desc:"REPLACE",vals:[{name:"Type",def:0,select:["Equal","Not Equal","Greater than","Greater or Equal","Less than","Less or Equal"]},{name:"Level",def:0,min:0,max:1e3,step:1}],check:function(e,t,i,n,a){if(!i||!a)return!1;var r=a.trigCond[1],o=parseInt(a.trigCond[2])||0,l=i.account&&i.account.level||0;return s.compareVal(r,l,o)}},{name:"Player Inventory Value",desc:"REPLACE",vals:[{name:"Type",def:0,select:["Equal","Not Equal","Greater than","Greater or Equal","Less than","Less or Equal"]},{name:"Val",def:0,min:0,max:1e8,step:1e3}],check:function(e,t,i,n,a){if(!i||!a)return!1;var r=a.trigCond[1],o=parseInt(a.trigCond[2])||0,l=i.account&&i.account.invVal||0;return s.compareVal(r,l,o)}}],e.exports.actions=[{name:"Give Player Score",desc:"REPLACE",hasCust:!0,execute:function(e,t,i,n,s){if(i){var a=e.getActionValue(i,n,s,"number",s.trigConst||1);null!=a&&e.players.score(i,a)}}},{name:"Kill Player",desc:"REPLACE",execute:function(e,t,i){i&&(i.godMode||e.players.kill(i))}},{name:"Respawn Player",desc:"REPLACE",execute:function(e,t,i){if(i){var n=i?i.checkPoint:null,s=n&&e.map.manager.objects[n]?e.map.manager.objects[n]:e.getSpawnPoint(i.team,i);e.players.changePosition(i,s.x,s.y,s.z,!0,!1,void 0,!0)}}},{name:"Change Player Health",desc:"REPLACE",hasCust:!0,execute:function(e,t,i,n,s){if(i){var a=e.getActionValue(i,n,s,"number",s.trigConst||0);null!=a&&e.players.changeHealth(i,null,-a,!0)&&e.players.kill(i)}}},{name:"Destroy Interface",desc:"REPLACE",execute:function(e,t,i,n,s,a){for(var r=0;r<e.map.manager.interfaces.length&&e.triggerChains[a]>0;++r){var o=e.map.manager.objects[e.map.manager.interfaces[r]];(n.isAI||o.sid!=n.sid)&&(o.health||o.gate||o.canDest&&!o.destroyed)&&o.interface!=n.interface&&o.interface==n.interfaceT&&(o.active=!1,o.gate?e.broadcast("gte",o.uid,o.active):(o.health=0,o.destroyedBy=i,o.destroyed=!0,e.map.manager.destObjs.push(o.uid),e.broadcast("do",o.uid)),(o.onDestroy||o.onDamage)&&e.onTrigger(i,o,a))}}},{name:"Toggle Interface Gate",desc:"REPLACE",execute:function(e,t,i,n){for(var s,a=0;a<e.map.manager.interfaces.length;++a)s=e.map.manager.objects[e.map.manager.interfaces[a]],(n.isAI||s.sid!=n.sid)&&s.gate&&s.interface!=n.interface&&s.interface==n.interfaceT&&(s.active=!s.active,e.broadcast("gte",s.uid,s.active))}},{name:"Change Interface Health",desc:"REPLACE",hasCust:!0,execute:function(e,t,i,n,s,a){for(var r=0;r<e.map.manager.interfaces.length&&e.triggerChains[a]>0;++r){var o=e.map.manager.objects[e.map.manager.interfaces[r]];if((n.isAI||o.sid!=n.sid)&&o.health&&o.canDest&&!o.destroyed&&o.interface!=n.interface&&o.interface==n.interfaceT){var l=e.getActionValue(i,o,s,"number",s.trigConst||0);if(null==l)continue;o.health-=-l,o.health<=0&&(o.active=!1,o.health=0,o.destroyedBy=i,o.destroyed=!0,e.map.manager.destObjs.push(o.uid),e.broadcast("do",o.uid),o&&o.onDestroy&&e.onTrigger(i,o,a)),o&&o.onDamage&&(s.trigConst||0)<0&&e.onTrigger(i,o,a)}}}},{name:"Teleport Player To Interface",desc:"REPLACE",execute:function(e,t,i,n,s,a){if(i)for(var r,o=0;o<e.map.manager.interfaces.length&&e.triggerChains[a]>0;++o)r=e.map.manager.objects[e.map.manager.interfaces[o]],!n.isAI&&r.sid==n.sid||null!=r.interface&&null!=r.interface&&r.interface==n.interface||r.interface!=n.interfaceT||e.players.changePosition(i,r.x,r.y-r.height,r.z,!0,!0,void 0,!0)}},{name:"Change Interface Deposit Box Amount",desc:"REPLACE",hasCust:!0,execute:function(e,t,i,n,s,a){for(var r=0;r<e.map.manager.interfaces.length&&e.triggerChains[a]>0;++r){var o=e.map.manager.objects[e.map.manager.interfaces[r]];if((n.isAI||o.sid!=n.sid)&&o.interface!=n.interface&&o.interface==n.interfaceT&&o.bank){var l=e.getActionValue(i,o,s,"number",s.trigConst||0);if(null==l)continue;null==o.deposited&&(o.deposited=0),o.deposited+=l,e.broadcast("bnk",o.uid,o.deposited)}}}},{name:"Kill Opposing Team",desc:"REPLACE",execute:function(e,t,i){if(i)for(var n,s=0;s<e.players.list.length;++s)!(n=e.players.list[s]).active||n==i||n.godMode||n.team&&i.team==n.team||e.players.kill(n,null,null,!0)}},{name:"Respawn Opposing Team",desc:"REPLACE",execute:function(e,t,i){if(i)for(var n,s=0;s<e.players.list.length;++s)if((n=e.players.list[s]).active&&n!=i&&(!n.team||i.team!=n.team)){var a=n?n.checkPoint:null,r=a&&e.map.manager.objects[a]?e.map.manager.objects[a]:e.getSpawnPoint(n.team,n);e.players.changePosition(n,r.x,r.y,r.z,!0,!1,void 0,!0)}}},{name:"Respawn Destructible Interface",desc:"REPLACE",execute:function(e,t,i,n,s,a){for(var r=0;r<e.map.manager.interfaces.length&&e.triggerChains[a]>0;++r){var o=e.map.manager.objects[e.map.manager.interfaces[r]],l=e.map.manager.destObjs.indexOf(o.uid);(n.isAI||o.sid!=n.sid)&&(o.startHealth||o.canDest&&o.destroyed)&&o.destroyed&&-1!=l&&o.interface!=n.interface&&o.interface==n.interfaceT&&(o.destroyed=!1,e.map.manager.destObjs.splice(l,1),o.active=!0,o.respawnT=o.respawnR?0:o.respawnTStart,null!=o.health&&(o.health=o.startHealth),e.broadcast("ro",o.uid),o&&o.onRespawn&&e.onTrigger(o.destroyedBy,o,a),o.destroyedBy=null)}}},{name:"Toggle Destructible Interface",desc:"REPLACE",execute:function(e,t,i,n,s,a){for(var r=0;r<e.map.manager.interfaces.length&&e.triggerChains[a]>0;++r){var o=e.map.manager.objects[e.map.manager.interfaces[r]],l=e.map.manager.destObjs.indexOf(o.uid);!n.isAI&&o.sid==n.sid||!o.startHealth&&!o.canDest||o.interface==n.interface||o.interface!=n.interfaceT||(-1==l?(o.active=!1,o.health=0,o.destroyed=!0,o.destroyedBy=i,e.map.manager.destObjs.push(o.uid),e.broadcast("do",o.uid),(o.onDestroy||o.onDamage)&&e.onTrigger(i,o,a)):(e.map.manager.destObjs.splice(l,1),o.active=!0,o.destroyed=!1,o.respawnT=o.respawnR?0:o.respawnTStart,null!=o.health&&(o.health=o.startHealth),e.broadcast("ro",o.uid),o&&o.onRespawn&&e.onTrigger(o.destroyedBy,o,a),o.destroyedBy=null))}}},{name:"Set Player Score",desc:"REPLACE",hasCust:!0,execute:function(e,t,i,n,s){if(i){var a=e.getActionValue(i,n,s,"number",s.trigConst||0);null!=a&&e.players.score(i,a,0,!0)}}},{name:"Broadcast Sound",desc:"REPLACE",hasSound:!0,execute:function(e,t,i,n,s){var a=s.triggerSound||l;if(2==a[3])e.broadcast("so",a[0]||"nuke_0",a[1]||1,1,0,0,0,a[2]||1,null,null,!!a[4]);else{var r=a[3]&&i,o=r?i:n;e.playSound(a[0]||"nuke_0",a[1]||1,o.sid,o.x,r?o.y+o.height:o.y,o.z,!0,a[2]||1,!1,null,null,!r,!!a[4])}}},{name:"Clear Player Loadout",desc:"REPLACE",execute:function(e,t,i){!i||1==i.loadout.length&&12==i.loadout[0]||(i.updateLoadout(e,0,!0,[12]),e.broadcast("inat",i.sid,[12],0,void 0,void 0,!1))}},{name:"Broadcast Message",desc:"REPLACE",type:"Text",actionValueTxt:"Message",execute:function(e,t,i,n,s){s.trigConstTx&&s.trigConstTx.length&&e.broadcast("ch",-1,null,s.trigConstTx,2)}},{name:"Send Message",desc:"REPLACE",type:"Text",actionValueTxt:"Message",execute:function(e,t,i,n,s){i&&s.trigConstTx&&s.trigConstTx.length&&i.send("ch",-1,null,s.trigConstTx,2)}},{name:"Swap Player Team",desc:"REPLACE",execute:function(e,t,i){if(i){var n=2==i.team?1:2;e.updateTeam(i,n)}}},{name:"Set Player Team",desc:"REPLACE",execute:function(e,t,i,a,r){if(i){var o=parseInt(r.trigConst)||0;o=s.limitMM(o,1,n.teamLimit),e.updateTeam(i,o)}}},{name:"Round Time",desc:"REPLACE",execute:function(e,t,i,n,a){if(s.isNumber(e.gameTimer)){var r=a.trigConst||0;e.gameTimer+=r,e.gameTimer<=0&&(e.gameTimer="skip")}}},{name:"Reset Interface",desc:"REPLACE",execute:function(e,t,i,n,s,a){for(var r=0;r<e.map.manager.interfaces.length&&e.triggerChains[a]>0;++r){var o=e.map.manager.objects[e.map.manager.interfaces[r]];if((n.isAI||o.sid!=n.sid)&&o.interface!=n.interface&&o.interface==n.interfaceT){var l=e.map.manager.destObjs.indexOf(o.uid);-1!=l&&(e.map.manager.destObjs.splice(l,1),o.respawnT=o.respawnR?0:o.respawnTStart,null!=o.health&&(o.health=o.startHealth),e.broadcast("ro",o.uid),o&&o.onRespawn&&e.onTrigger(o.destroyedBy,o,a),o.destroyedBy=null),o.trigT=1e3*(o.trigConstE||1),o.health=o.startHealth,o.destroyed=!1,o.active=!0,o.triggered=!1,o.uses&&(o.uses.length=0)}}}},{name:"End Round",desc:"REPLACE",execute:function(e){"skip"!=e.gameTimer&&(e.gameTimer="skip")}},{name:"Refill Player Knife",desc:"REPLACE",execute:function(e,t,i){i&&i.refillKnife&&(e.refillPlayer(i),i.send("rfl"))}},{name:"Destroy Self",desc:"REPLACE",execute:function(e,t,i,n,s,a){(n.health||n.gate||n.canDest)&&n.active&&(n.active=!1,n.gate?e.broadcast("gte",n.uid,n.active):(n.health=0,n.destroyed=!0,n.destroyedBy=i,e.map.manager.destObjs.push(n.uid),e.broadcast("do",n.uid)),n.selfDestruct||!n.onDestroy&&!n.onDamage||e.onTrigger(i,n,a))}},{name:"Increase Interface Storage",desc:"REPLACE",hasCust:!0,execute:function(e,t,i,n,s,a){for(var r=0;r<e.map.manager.interfaces.length&&e.triggerChains[a]>0;++r){var o=e.map.manager.objects[e.map.manager.interfaces[r]];if((n.isAI||o.sid!=n.sid)&&(o.onStorageEquals||o.onStorageGreater||o.onStorageLesser)&&o.interface!=n.interface&&o.interface==n.interfaceT){var l=e.getActionValue(i,o,s,"number",s.trigConst||0);if(null==l)continue;null==o.storage&&(o.storage=0),o.storage+=l,o.storage==(o.trigConstE||0)&&o.onStorageEquals&&e.onTrigger(i,o,a),o.storage>(o.trigConstE||0)&&o.onStorageGreater&&e.onTrigger(i,o,a),o.storage<(o.trigConstE||0)&&o.onStorageLesser&&e.onTrigger(i,o,a)}}}},{name:"Decrease Interface Storage",desc:"REPLACE",hasCust:!0,execute:function(e,t,i,n,s,a){for(var r=0;r<e.map.manager.interfaces.length&&e.triggerChains[a]>0;++r){var o=e.map.manager.objects[e.map.manager.interfaces[r]];if((n.isAI||o.sid!=n.sid)&&(o.onStorageEquals||o.onStorageGreater||o.onStorageLesser)&&o.interface!=n.interface&&o.interface==n.interfaceT){var l=e.getActionValue(i,o,s,"number",s.trigConst||0);if(null==l)continue;null==o.storage&&(o.storage=0),o.storage-=l,o.storage==(o.trigConstE||0)&&o.onStorageEquals&&e.onTrigger(i,o,a),o.storage>(o.trigConstE||0)&&o.onStorageGreater&&e.onTrigger(i,o,a),o.storage<(o.trigConstE||0)&&o.onStorageLesser&&e.onTrigger(i,o,a)}}}},{name:"Set Interface Storage",desc:"REPLACE",hasCust:!0,execute:function(e,t,i,n,s,a){for(var r=0;r<e.map.manager.interfaces.length&&e.triggerChains[a]>0;++r){var o=e.map.manager.objects[e.map.manager.interfaces[r]];if((n.isAI||o.sid!=n.sid)&&(o.onStorageEquals||o.onStorageGreater||o.onStorageLesser)&&o.interface!=n.interface&&o.interface==n.interfaceT){var l=e.getActionValue(i,o,s,"number",s.trigConst||0);if(null==l)continue;null==o.storage&&(o.storage=0),o.storage=l,o.storage==(o.trigConstE||0)&&o.onStorageEquals&&e.onTrigger(i,o,a),o.storage>(o.trigConstE||0)&&o.onStorageGreater&&e.onTrigger(i,o,a),o.storage<(o.trigConstE||0)&&o.onStorageLesser&&e.onTrigger(i,o,a)}}}},{name:"Reset Interface Storage",desc:"REPLACE",execute:function(e,t,i,n,s,a){for(var r=0;r<e.map.manager.interfaces.length&&e.triggerChains[a]>0;++r){var o=e.map.manager.objects[e.map.manager.interfaces[r]];!n.isAI&&o.sid==n.sid||!o.onStorageEquals&&!o.onStorageGreater||o.interface==n.interface||o.interface!=n.interfaceT||(o.storage=0,o.storage==(o.trigConstE||0)&&o.onStorageEquals&&e.onTrigger(i,o,a),o.storage>(o.trigConstE||0)&&o.onStorageGreater&&e.onTrigger(i,o,a),o.storage<(o.trigConstE||0)&&o.onStorageLesser&&e.onTrigger(i,o,a))}}},{name:"Broadcast Popup",desc:"REPLACE",type:"Text",actionValueTxt:"Message",execute:function(e,t,i,n,s){s.trigConstTx&&s.trigConstTx.length&&e.broadcast("am",[s.trigConstTx+"",null,0,1])}},{name:"Send Popup",desc:"REPLACE",type:"Text",actionValueTxt:"Message",execute:function(e,t,i,n,s){i&&s.trigConstTx&&s.trigConstTx.length&&i.send&&i.send("am",[s.trigConstTx+"",null,0,1])}},{name:"Jump Scare",desc:"REPLACE",execute:function(e,t,i){i&&i.send&&i.send("scr",0)}},{name:"Reward KR",desc:"REPLACE",actionValue:"KR Amount",execute:function(e,t,i,n,s){i&&e.krRewards&&e.rewardKR(i,parseInt(s.trigConst||0))}},{name:"Clear Player Checkpoints",desc:"REPLACE",execute:function(e,t,i){i&&(i.checkPoint=null,i.checkPointList&&(i.checkPointList.length=0),i.checkPointData&&(i.checkPointData.length=0),i.send&&i.send("chp",!0))}},{name:"Send Sound",desc:"REPLACE",hasSound:!0,execute:function(e,t,i,n,s){if(i){var a=s.triggerSound||l;if(2==a[3])i.send("so",a[0]||"nuke_0",a[1]||1,1,0,0,0,a[2]||1,null,null,!!a[4]);else{var r=a[3]&&i,o=r?i:n;i.send("s",a[0]||"nuke_0",o.sid,Math.round(o.x),Math.round(r?o.y+o.height:o.y),Math.round(o.z),a[1]||1,a[2]||1,null,null,!r,!!a[4])}}}},{name:"Explosion",desc:"REPLACE",hasCust:!0,actionValue:"Explosion Power",execute:function(e,t,i,n,s){var a=e.getActionValue(i,n,s,"number",s.trigConst||100);null!=a&&e.explosion(n.x,n.y,n.z,30,a,i,{})}},{name:"Spawn AI",desc:"REPLACE",execute:function(e,t,i,n){for(var s=0;s<e.map.manager.pendingAIs.length;++s){var a=e.map.manager.pendingAIs[s],r=a.data;r&&r.interface!=n.interface&&r.interface==n.interfaceT&&e.AI.spawn(null,0,r.aiName,a.x,a.y,a.z,r)}}},{name:"Set Player Value",desc:"REPLACE",type:"Both",actionValueTxt:"Key",actionValue:"Value",execute:function(e,t,i,s,a){if(i&&a.trigConstTx&&a.trigConstTx.length&&i.custVals){var r=a.trigConstTx+"",o=a.trigConst||0;if(null==i.custVals[r]){if(Object.keys(i.custVals).length>n.custValLimit)return;i.custVals[r]=0}i.custVals[r]=parseFloat(o)||0,i.send("cv",r,i.custVals[r])}}},{name:"Inc/Dec Player Value",desc:"REPLACE",type:"Both",actionValueTxt:"Key",actionValue:"Value",execute:function(e,t,i,s,a){if(i&&a.trigConstTx&&a.trigConstTx.length&&i.custVals){var r=a.trigConstTx+"",o=a.trigConst||0;if(null==i.custVals[r]){if(Object.keys(i.custVals).length>n.custValLimit)return;i.custVals[r]=0}i.custVals[r]+=parseFloat(o)||0,i.send("cv",r,i.custVals[r])}}},{name:"Play Animation",desc:"REPLACE",type:"Both",actionValueTxt:"Clip",actionValue:"Interface ID",execute:function(e,t,i,n,s,a){if(s.trigConstTx&&s.trigConstTx.length){for(var r,o=s.trigConstTx+"",l=s.trigConst||0,c=0;c<e.AI.ais.length;++c)(r=e.AI.ais[c]).active&&r.interface==l&&e.AI.playAnim(r,o,1,!0);for(c=0;c<e.map.manager.interfaces.length&&e.triggerChains[a]>0;++c)(r=e.map.manager.objects[e.map.manager.interfaces[c]]).sid!=n.sid&&r.interface!=n.interface&&r.interface==l&&e.playAnim(r,o,1,!0)}}},{name:"Teleport Player to Path Node",desc:"REPLACE",hasCust:!0,actionValue:"Node ID",execute:function(e,t,i,n,s){var a=e.getActionValue(i,n,s,"number",s.trigConst||0);if(null!=a){var r=parseInt(a),o=e.map.manager.pathNodes[r];o&&e.players.changePosition(i,o.x,o.y,o.z,!0,!0,void 0,!0)}}},{name:"Teleport Destructible Interface to Path Node",desc:"REPLACE",hasCust:!0,actionValue:"Node ID",execute:function(e,t,i,n,s,a){for(var r=0;r<e.map.manager.interfaces.length&&e.triggerChains[a]>0;++r){var o=e.map.manager.objects[e.map.manager.interfaces[r]];if((n.isAI||o.sid!=n.sid)&&o.interface!=n.interface&&o.interface==n.interfaceT){var l=e.getActionValue(i,o,s,"number",s.trigConst||0);if(null==l)continue;var c=parseInt(l);if(!e.map.manager.pathNodes[c])return;e.teleportToNode(o.uid,c)}}}},{name:"Reset Destructible Interface Position",desc:"REPLACE",execute:function(e,t,i,n,s,a){for(var r=0;r<e.map.manager.interfaces.length&&e.triggerChains[a]>0;++r){var o=e.map.manager.objects[e.map.manager.interfaces[r]];!n.isAI&&o.sid==n.sid||o.interface==n.interface||o.interface!=n.interfaceT||e.teleportFromNode(o.uid)}}},{name:"Set Interface Trigger Value",desc:"REPLACE",type:"Both",actionValueTxt:"Key",actionValue:"Value",execute:function(e,t,i,a,r,o){if(r.trigConstTx&&r.trigConstTx.length){var l=r.trigConstTx+"";if(l&&s.isString(l)&&l.length)for(var c,d=r.trigConst||0,h=0;h<e.map.manager.interfaces.length&&e.triggerChains[o]>0;++h)if((c=e.map.manager.objects[e.map.manager.interfaces[h]])&&(a.isAI||c.sid!=a.sid)&&c.interface!=a.interface&&c.interface==a.interfaceT){if(!c.custVals)continue;if(null==c.custVals[l]){if(Object.keys(c.custVals).length>n.custValLimit)return;c.custVals[l]=0}c.custVals[l]=parseFloat(d)||0,c.custVals[l]==(c.trigConstE||0)&&c.onCustomValEquals&&e.onTrigger(i,c,o),c.custVals[l]>(c.trigConstE||0)&&c.onCustomValGreater&&e.onTrigger(i,c,o),c.custVals[l]<(c.trigConstE||0)&&c.onCustomValLesser&&e.onTrigger(i,c,o)}}}},{name:"Inc/Dec Interface Trigger Value",desc:"REPLACE",type:"Both",actionValueTxt:"Key",actionValue:"Value",execute:function(e,t,i,a,r,o){if(r.trigConstTx&&r.trigConstTx.length){var l=r.trigConstTx+"";if(l&&s.isString(l)&&l.length)for(var c,d=r.trigConst||0,h=0;h<e.map.manager.interfaces.length&&e.triggerChains[o]>0;++h)if((c=e.map.manager.objects[e.map.manager.interfaces[h]])&&(a.isAI||c.sid!=a.sid)&&c.interface!=a.interface&&c.interface==a.interfaceT){if(!c.custVals)continue;if(null==c.custVals[l]){if(Object.keys(c.custVals).length>n.custValLimit)return;c.custVals[l]=0}c.custVals[l]+=d,c.custVals[l]==(c.trigConstE||0)&&c.onCustomValEquals&&e.onTrigger(i,c,o),c.custVals[l]>(c.trigConstE||0)&&c.onCustomValGreater&&e.onTrigger(i,c,o),c.custVals[l]<(c.trigConstE||0)&&c.onCustomValLesser&&e.onTrigger(i,c,o)}}}},{name:"Set Trigger Value (Self)",desc:"REPLACE",type:"Both",actionValueTxt:"Key",actionValue:"Value",execute:function(e,t,i,a,r){if(r.trigConstTx&&r.trigConstTx.length&&a){var o=r.trigConstTx+"";if(o&&s.isString(o)&&o.length){var l=r.trigConst||0;if(null!=a.custVals){if(null==a.custVals[o]){if(Object.keys(a.custVals).length>n.custValLimit)return;a.custVals[o]=0}a.custVals[o]=l}}}}},{name:"Inc/Dec Trigger Value (Self)",desc:"REPLACE",type:"Both",actionValueTxt:"Key",actionValue:"Value",execute:function(e,t,i,a,r){if(r.trigConstTx&&r.trigConstTx.length&&a){var o=r.trigConstTx+"";if(o&&s.isString(o)&&o.length){var l=r.trigConst||0;if(null==a.custVals[o]){if(Object.keys(a.custVals).length>n.custValLimit)return;a.custVals[o]=0}a.custVals[o]+=l}}}},{name:"Change Class",desc:"REPLACE",actionValue:"Class Index",actionOptions:Object.keys(a).map((e=>a[e].name)),execute:function(e,t,i,n,s){if(i){var a=parseInt(s.trigConst)||0;e.classes[a]&&i.classIndex!=a&&(i.classIndex=a,i.updateItems(e,t,!0,void 0,void 0,!0))}}},{name:"Set Interface Deposit Box Amount",desc:"REPLACE",hasCust:!0,execute:function(e,t,i,n,s,a){for(var r=0;r<e.map.manager.interfaces.length&&e.triggerChains[a]>0;++r){var o=e.map.manager.objects[e.map.manager.interfaces[r]];if((n.isAI||o.sid!=n.sid)&&o.interface!=n.interface&&o.interface==n.interfaceT&&o.bank){var l=e.getActionValue(i,o,s,"number",s.trigConst||0);if(null==l)continue;o.deposited=l,e.broadcast("bnk",o.uid,o.deposited)}}}},{name:"Save Data",desc:"REPLACE",hasCust:!0,bypassType:!0,type:"Both",actionValueTxt:"Data Name",hasExtra:!0,actionValue2:"Save Type",actionOptions2:["Set Value","Set If Higher","Set If Lower","Increase Value","Decrease Value"],execute:function(e,t,i,a,r){if((!e||!e.isSandbox)&&i&&i.account&&(e.defaultSetts||!n.isProd)&&r.trigConstTx&&r.trigConstTx.length){var o=r.trigConstTx+"";if(o&&s.isString(o)&&o.length){o=o.toLowerCase().substring(0,12);var l=s.limitMM(parseInt(r.trigConst2||0)||0,0,5),c=e.getActionValue(i,a,r,"number",r.trigConst||1);if("time"==o){var d=i.gameTime||e.gameTimerP||0;c=d&&s.isNumber(d)?d:void 0}null!=c&&e.storageUpdt(i.account.name,null,l,"private",(function(){}),o+","+c)}}}},{name:"Change Primary Weapon",desc:"REPLACE",actionValue:"Weapon",actionOptions:Object.keys(r).filter((e=>r[e].name)).map((e=>r[e].name)),execute:function(e,t,i,n,s){if(i){var a=parseInt(s.trigConst||0);if(e.weaponConfig[a]){var r=e.weaponConfig[a];if(!r.secondary&&!r.melee){for(var o,l=!1,c=0;c<i.loadout.length;c++)if(!(o=e.weaponConfig[i.loadout[c]]).secondary&&!o.melee&&!o.equipment){if(o.id==r.id)return;i.loadout[c]=r.id,l=!0;break}l||i.loadout.splice(0,0,r.id),i.updateLoadout(e,i.loadoutIndex,!0,i.loadout),e.broadcast("inat",i.sid,i.loadout,i.loadoutIndex,void 0,void 0,!1)}}}}},{name:"Change Secondary Weapon",desc:"REPLACE",actionValue:"Weapon",actionOptions:Object.keys(r).filter((e=>r[e].name)).map((e=>r[e].name)),execute:function(e,t,i,n,s){if(i){var a=parseInt(s.trigConst||0);if(e.weaponConfig[a]){var r=e.weaponConfig[a];if(r.secondary){for(var o,l=!1,c=0;c<i.loadout.length;c++)if((o=e.weaponConfig[i.loadout[c]]).secondary){if(o.id==r.id)return;i.loadout[c]=r.id,l=!0;break}l||i.loadout.splice(i.loadout.length>1?1:0,0,r.id),i.updateLoadout(e,i.loadoutIndex,!0,i.loadout),e.broadcast("inat",i.sid,i.loadout,i.loadoutIndex,void 0,void 0,!1)}}}}},{name:"Set Global Value",desc:"REPLACE",type:"Both",actionValueTxt:"Key",actionValue:"Value",execute:function(e,t,i,a,r){if(r.trigConstTx&&r.trigConstTx.length){var o=r.trigConstTx+"";if(o&&s.isString(o)&&o.length){var l=r.trigConst||0;if(null!=e.globalVals){if(null==e.globalVals[o]){if(Object.keys(e.globalVals).length>n.custValLimit)return;e.globalVals[o]=0}e.globalVals[o]=l,e.broadcast("gv",o,e.globalVals[o])}}}}},{name:"Change Global Value",desc:"REPLACE",type:"Both",actionValueTxt:"Key",actionValue:"Value",execute:function(e,t,i,a,r){if(r.trigConstTx&&r.trigConstTx.length){var o=r.trigConstTx+"";if(o&&s.isString(o)&&o.length){var l=r.trigConst||0;if(null==e.globalVals[o]){if(Object.keys(e.globalVals).length>n.custValLimit)return;e.globalVals[o]=0}e.globalVals[o]+=l,e.broadcast("gv",o,e.globalVals[o])}}}},{name:"Stop Sound",desc:"REPLACE",hasSound:!0,execute:function(e,t,i,n,s){var a=s.triggerSound||l;e.broadcast("sso",a[0]||"nuke_0",!!a[4])}},{name:"Show/Hide GUI Element (All)",desc:"REPLACE",hasExtra:!0,actionValue:"Element ID",actionValue2:"Status",actionOptions2:["Toggle","Show","Hide"],execute:function(e,t,i,n,s){if(e){var a=parseInt(s.trigConst||0)||0,r=parseInt(s.trigConst2||0)||0;e.broadcast("tgui",a,r)}}},{name:"Show/Hide GUI Element (Player)",desc:"REPLACE",hasExtra:!0,actionValue:"Element ID",actionValue2:"Status",actionOptions2:["Toggle","Show","Hide"],execute:function(e,t,i,n,s){if(e&&i){var a=parseInt(s.trigConst||0)||0,r=parseInt(s.trigConst2||0)||0;i.send("tgui",a,r)}}},{name:"Load Data",desc:"REPLACE",execute:function(e,t,i){e&&e.isSandbox||!i||!i.account||!e.defaultSetts||e.getStoragePlayer(i.account.name,null,(function(e){if(i.custVals&&e&&e.length)for(var t=0;t<e.length;t++){var s=e[t].mk,a=e[t].kv;if(null==i.custVals[s]){if(Object.keys(i.custVals).length>n.custValLimit)return;i.custVals[s]=0}i.custVals[s]=isNaN(parseFloat(a))?a:parseFloat(a),i.send("cv",s,i.custVals[s])}}))}},{name:"Custom Action",desc:"REPLACE",hasExtra:!0,type:"Text",actionValueTxt:"Custom Param",execute:function(e,t,i,n,s){if(e&&e.mainScript&&e.mainScript.onCustomTrigger){var a="";s.trigConstTx&&s.trigConstTx.length&&(a=s.trigConstTx+"");var r=parseInt(s.trigConst||0)||0;e.mainScript.onCustomTrigger(i?i.id:"NONE",a,r)}}},{name:"Reward Junk",desc:"REPLACE",type:"Text",actionValueTxt:"Amount",devOnly:!0,execute:function(e,t,i,n,s){if((!e||!e.isSandbox)&&i&&e.isPubType()&&i.account){var a=parseFloat(s.trigConstTx||0);a&&a<100&&e.sendUserJunk("trigger",i,a)}}},{name:"Reward Skin",desc:"REPLACE",type:"Text",actionValueTxt:"Ids",devOnly:!0,execute:function(e,t,i,n,a){if((!e||!e.isSandbox)&&i&&e.isPubType()&&i.account){for(var r,o=((a.trigConstTx||"")+"").split(","),l=[],c=0,d=s.randFloat(0,100).round(2),h=0;h<o.length;h++)if((r=o[h].split("|"))[1]){if(d<=(c+=parseFloat(r[1]))){l.push(r[0]);break}}else l.push(r[0]);l.length&&e.giveSkin(i,l.join(","),"trigger")}}},{name:"Change Ambient Sound",desc:"REPLACE",actionValue:"Ambient Sound",actionOptions:Object.keys(n.soundScapes).map((e=>e)),execute:function(e,t,i,s,a){var r=parseInt(a.trigConst||0),o=Object.keys(n.soundScapes);o[r]&&e.broadcast("camb",n.soundScapes[o[r]])}},{name:"Give Challenge Progress",desc:"REPLACE",actionValue:"Prog",devOnly:!0,type:"Both",actionValueTxt:"Key",execute:function(e,t,i,n,s){if((!e||!e.isSandbox)&&i&&e.isPubType()&&i.account){var a="";if(s.trigConstTx&&s.trigConstTx.length&&(a=s.trigConstTx+""),a.length){var r=parseInt(s.trigConst||0);e.challenges.update(e,a,r,null,i)}}}},{name:"Play Animation (Self)",desc:"REPLACE",type:"Text",actionValueTxt:"Clip",execute:function(e,t,i,n,s){if(s.trigConstTx&&s.trigConstTx.length){var a=s.trigConstTx+"";e.playAnim(n,a,1,!0)}}},{name:"Give Effect",desc:"REPLACE",actionValue:"Effect",actionOptions:Object.keys(o).map((e=>o[e].name)),execute:function(e,t,i,n,s){if(i){var a=parseInt(s.trigConst||0);o[a]&&e.players.giveEffect(i,a)}}},{name:"Give Challenge Progress (All)",desc:"REPLACE",actionValue:"Prog",devOnly:!0,type:"Both",actionValueTxt:"Key",execute:function(e,t,i,n,s){if((!e||!e.isSandbox)&&i&&e.isPubType()&&i.account){var a="";if(s.trigConstTx&&s.trigConstTx.length&&(a=s.trigConstTx+""),a.length)for(var r=parseInt(s.trigConst||0),o=0;o<e.players.list.length;o++)e.players.list[o]&&e.players.list[o].active&&!e.players.list[o].spectating&&e.challenges.update(e,a,r,null,e.players.list[o])}}},{name:"Give Random Effect",desc:"REPLACE",execute:function(e,t,i){i&&e.players.giveEffect(i,0,1,!0)}},{name:"Play Video Ad",desc:"REPLACE",execute:function(e,t,i){e&&e.isSandbox||!i||!t||i.send("vad")}},{name:"Drop Powerup",devOnly:!0,desc:"REPLACE",execute:function(e,t,i,n){if(e&&e.mode&&"zom"==e.mode.id&&(!e||!e.isCustom||e.mimicPubs)){var a=s.randInt(9,15);e.dropSpawnable(a,i,null,{x:n.x,y:n.y,z:n.z})}}},{name:"Spawn Bot at Node",desc:"REPLACE",devOnly:!0,hasCust:!0,execute:function(e,t,i,n,s){if((!e||!e.isCustom||e.mimicPubs)&&i){var a=e.getActionValue(i,n,s,"number",s.trigConst||0);if(null!=a){var r=parseInt(a),o=e.map.manager.pathNodes[r];if(o){var l=e.bots.add(o,!0,!0,{name:"Uncle Joe",forceClass:!0,primSkin:5076,dye:1075,lives:1,face:5078,hat:5077,back:5079,waist:5080,class:4,targetBots:!1,targetTeam:!1,forceCrouch:!1,attackTarget:!0,followTarget:!0,watchTarget:!0,mimicTarget:!1,slideHop:!1,canRespawn:!0,useSpawnDelay:!0,removeOnDeath:!0,nodYes:!1,nodNo:!1,joinMessage:!1,leaveMessage:!1,voiceChat:!1,godMode:!1,roam:!0});l.scoreOnDeath=!0,l.player.maxHealth=1e3,l.player.health=l.player.maxHealth,e.broadcast("h",l.player.health,l.player.sid,null,null,!0,!0),e.players.giveWeapon(l.player,5),e.bots.sync()}}}}},{name:"Force AI Target",desc:"REPLACE",execute:function(e,t,i,n){e.AI.forceTargetTimer=3e4,e.AI.forceTarget={x:n.x,y:n.y,z:n.z}}},{name:"Mode Specific",desc:"REPLACE",execute:function(e,t,i,n){e&&e.mode&&e.mode.onTrigger&&e.mode.onTrigger(e,n)}}]},function(e,t){for(var i=[{name:"Boosted",key:"speed",timer:0,def:1,max:5,mlt:.1,mid:41,execute:function(e,t){var i=1+t.effects[this.index]*this.mlt;t.attributes[this.key]=i}},{name:"Sleight of Hand",key:"reload",timer:0,def:1,max:5,mlt:.1,mid:42,execute:function(e,t){var i=1-t.effects[this.index]*this.mlt;t.attributes[this.key]=Math.abs(i)}},{name:"Rapid Fire",key:"fRate",timer:0,def:1,max:5,mlt:.05,mid:43,execute:function(e,t){var i=1-t.effects[this.index]*this.mlt;t.attributes[this.key]=Math.abs(i)}},{name:"Siphon",key:"siphon",timer:0,def:0,max:5,hp:10,mlt:1,mid:44,execute:function(e,t){var i=t.effects[this.index]*this.mlt;t.attributes[this.key]=i*this.hp}},{name:"Rooted",key:"rooted",timer:25,def:1,max:2,mlt:.25,mid:45,execute:function(e,t){var i=1-t.effects[this.index]*this.mlt;t.attributes[this.key]=Math.abs(i)}},{name:"Dizzy",key:"drunk",timer:35,def:0,max:4,mlt:.25,mid:46,execute:function(e,t){var i=t.effects[this.index]*this.mlt;t.attributes[this.key]=i}},{name:"Poisoned",key:"enraged",timer:40,def:0,hp:10,max:1,mlt:1,mid:47,execute:function(e,t){var i=t.effects[this.index]*this.mlt;t.attributes[this.key]=i*this.hp}},{name:"Jump Boost",key:"jump",timer:0,def:1,max:5,mlt:.1,mid:51,execute:function(e,t){var i=1+t.effects[this.index]*this.mlt;t.attributes[this.key]=i}},{name:"Zapped",key:"zap",timer:5,def:0,hp:2,max:10,mlt:.5,mid:52,execute:function(e,t){var i=t.effects[this.index]*this.mlt;t.attributes[this.key]=i*this.hp}},{name:"Strength",key:"dmg",timer:0,def:1,max:10,mlt:.1,mid:53,execute:function(e,t){var i=1+t.effects[this.index]*this.mlt;t.attributes[this.key]=i}}],n=0;n<i.length;n++)i[n].index=n;e.exports=i},function(e,t,i){const n=i(4),s=i(1),a=["inverse","linear","exponential"];e.exports=class{constructor(){this.queued=null,this.sounds=[],this.emitter=[],this.listener={},this.rate=1,this.volumes=[1,1,1,1,1,1,1,1,1],this.localLoadList=[],this.soundCats={nuke_0:0,siren_0:0,scare_0:0,beep_0:0,dragon_0:0,egg_0:0,ambient_1:2,ambient_2:2,ambient_3:2,ambient_4:2,ambient_5:2,ambient_6:2,ambient_7:2,ambient_8:2,ambient_9:2,ambient_10:2,gong_0:2,ambient_11:2,ambient_12:2,ambient_13:2,ambient_14:2,ambient_15:2,ambient_16:2,ambient_17:2,ambient_18:2,ambient_19:2,jug_0:2,aim_0:3,aim_1:3,explosion:3,gclick_0:3,pick_0:3,pick_1:3,reload_1:3,reload_2:3,swsh_0_0:3,swsh_0_1:3,weapon_1:3,weapon_1_0:3,weapon_2:3,weapon_3:3,weapon_4:3,weapon_5:3,weapon_6:3,weapon_7:3,weapon_8:3,weapon_9:3,weapon_10:3,weapon_11:3,weapon_12:3,weapon_13:3,weapon_14:3,weapon_15:3,weapon_16:3,weapon_17:3,weapon_18:3,whizz_0:3,whizz_1:3,weapon_6_0:3,weapon_1_2:3,weapon_3_0:3,rico_1:3,rico_2:3,case_0:3,case_1:3,weapon_3_2:3,weapon_2_0:3,weapon_1_4:3,weapon_1_3:3,weapon_17_0:3,weapon_8_0:3,weapon_10_0:3,melee_12:3,swsh_12_0:3,swsh_12_1:3,weapon_4_0:3,melee_equip:3,melee_14:3,swsh_14_0:3,swsh_14_1:3,weapon_1_5:3,weapon_19:3,melee_19:3,swsh_19_0:3,swsh_19_1:3,weapon_11_0:3,weapon_4_1:3,weapon_4_2:3,weapon_4_3:3,weapon_7_0:3,melee_25:3,melee_25_1:3,weapon_1_6:3,weapon_7_1:3,weapon_2_1:3,weapon_1_7:3,weapon_2_3:3,swing_0:3,weapon_9_0:3,weapon_1_8:3,weapon_3_16:3,weapon_14_0:3,weapon_10_1:3,weapon_11_1:3,melee_38:3,weapon_12_0:3,weapon_14_1:3,weapon_6_1:3,weapon_2_4:3,weapon_10_2:3,weapon_8_1:3,weapon_5_0:3,weapon_4_4:3,weapon_20:3,weapon_17_1:3,weapon_3_3:3,melee_42:3,weapon_2_5:3,weapon_1_12:3,weapon_1_9:3,weapon_2_6:3,weapon_2_7:3,weapon_2_8:3,weapon_2_9:3,weapon_5_1:3,weapon_5_2:3,weapon_7_2:3,weapon_7_3:3,weapon_7_4:3,weapon_7_5:3,weapon_9_1:3,weapon_10_3:3,weapon_15_1:3,weapon_15_2:3,weapon_15_3:3,weapon_16_1:3,weapon_6_2:3,weapon_3_4:3,weapon_4_6:3,weapon_4_5:3,weapon_1_11:3,weapon_17_3:3,weapon_2_10:3,weapon_7_6:3,weapon_8_2:3,weapon_11_3:3,weapon_1_10:3,weapon_22:3,weapon_17_4:3,weapon_19_0:3,weapon_12_1:3,weapon_14_2:3,weapon_1_13:3,weapon_2_11:3,weapon_3_6:3,weapon_4_8:3,weapon_5_3:3,weapon_6_3:3,weapon_7_7:3,weapon_8_3:3,weapon_9_2:3,weapon_10_4:3,weapon_11_4:3,weapon_12_2:3,weapon_14_3:3,weapon_15_4:3,weapon_16_2:3,weapon_17_4:3,weapon_19_1:3,weapon_3_5:3,weapon_9_3:3,weapon_6_4:3,weapon_2_13:3,weapon_7_9:3,melee_65:3,weapon_28_0:3,weapon_11_6:3,weapon_10_6:3,weapon_1_15:3,weapon_1_16:3,weapon_2_14:3,weapon_6_6:3,weapon_4_10:3,weapon_2_15:3,weapon_1_17:3,weapon_23:3,weapon_6_7:3,weapon_2_16:3,weapon_21:3,weapon_6_8:3,weapon_6_9:3,weapon_11_7:3,weapon_7_10:3,weapon_24:3,weapon_4_11:3,weapon_1_18:3,weapon_25:3,weapon_26:3,weapon_5_5:3,weapon_1_19:3,weapon_27:3,weapon_28:3,weapon_2_16:3,weapon_11_7:3,weapon_6_10:3,weapon_1_20:3,weapon_17_6:3,weapon_3_8:3,weapon_2_18:3,weapon_29:3,weapon_29_blast:3,weapon_4_12:3,weapon_1_21:3,weapon_9_6:3,weapon_4_13:3,weapon_16_4:3,weapon_4_14:3,weapon_1_22:3,weapon_8_5:3,weapon_8_5_r_1:3,weapon_8_5_r_2:3,weapon_4_15:3,weapon_6_11:3,weapon_9_7:3,weapon_upgraded:3,weapon_14_5:3,weapon_12_4:3,weapon_3_9:3,weapon_4_17:3,weapon_5_6:3,weapon_19_3:3,weapon_1_23:3,weapon_1_24:3,weapon_4_18:3,weapon_11_9:3,weapon_29_2:3,weapon_4_16:3,weapon_2_19:3,weapon_2_20:3,weapon_10_7:3,weapon_3_10:3,weapon_31:3,fart_0:4,headshot_0:4,hit_0:4,impact_0:4,jump_0:4,jump_1:4,land_0:4,punch_0:4,punch_1:4,slide_0:4,spray:4,step_0:4,step_1:4,step_2:4,taunt_0:4,taunt_1:4,taunt_2:4,taunt_3:4,taunt_4:4,cough_1:4,cough_2:4,collect_1:4,bounce_0:4,build_0:4,break_wood:4,taunt_5:4,spray_1:4,takedmg_0:4,takedmg_1:4,stepwo_0:4,stepwo_1:4,stepwat_0:4,stepwat_1:4,stepsa_0:4,stepsa_1:4,stepsno_0:4,stepsno_1:4,stepsno_2:4,egg_1:4,bounce_1:4,zap_0:4,crit_0:4,reload_3:4,buy_0:5,buy_1:5,cheer_0:5,reward:5,cheer_1:5,store:5,tick_0:5,limited_0:5,limited_1:5,limited_2:5,limited_3:5,limited_4:5,limited_5:5,limited_6:5,limited_7:5,bundle_1:5,bundle_2:5,bundle_3:5,bundle_4:5,select_0:5,hover_0:5,bundle_5:5,menu_0:5,bundle_6:5,bundle_7:5,menu_1:5,bundle_8:5,bundle_9:5,bundle_10:5,bundle_11:5,bundle_12:5,bundle_13:5,bundle_14:5,bundle_15:5,bundle_16:5,bundle_17:5,bundle_18:5,bo_plant:7,bo_diff:7,bhop_reset:7,bhop_check:7,dom_zone_securing_0:7,dom_zone_securing_1:7,dom_zone_losing_0:7,dom_zone_secured_0:7,dom_zone_secured_1:7,dom_zone_secured_2:7,dom_zone_all_0:7,dom_zone_all_1:7,medal_0:7,medal_1:7,gift_0:7,mystery_0:7,mystery_1:7,firesale_0:7,firesale_1:7,instantkill_0:7,shoe_1:8,shoe_2:8,shoe_19:8,shoe_28:8,shoe_46:8}}setVolume(e,t=0){if(null!=this.volumes[t])for(var i in this.volumes[t]=e,0==t&&Howler.volume(e),this.sounds)this.sounds[i].cat==t&&this.sounds[i].volume(this.sounds[i].vol*this.volumes[t])}getSound(e,t,i,n,a,r){this.localLoadList.includes(e)&&(a=!0);var o=e+(t||"")+(window.activeHacker?"hckd":"")+(i?"asset":"");if(this.queued=this.sounds[o],!this.queued||this.queued.reset){var l=i?s.userAssetsUrl(e+"/sound.mp3"):s.assetsUrl("/sound/"+(window.activeHacker?"fart_0":e)+".mp3",void 0,a);return this.queued=new Howl({src:l,volume:r,onload:n}),this.queued.cat=i?6:this.soundCats[e]||0,this.sounds[o]=this.queued,!1}return this.queued.cat=i?6:this.soundCats[e]||0,!0}getActive(e,t,i){var n=e+(t||"")+(window.activeHacker?"hckd":"")+(i?"asset":"");return this.sounds[n]}onLoad(e,t,i){this.getSound(e,null,i,t)}getVolume(e,t){return t?this.volumes[6]:null==this.soundCats[e]?1:this.volumes[this.soundCats[e]]}play(e,t,i,n,s,a){var r=(t||1)*this.getVolume(e,s);if(this.getSound(e,null,s,void 0,a,r),this.rate&&(!i||!this.queued.isPlaying)){this.queued.isPlaying=!0;var o=this.queued.play();return this.queued.vol=t||1,this.queued.volume(r,o),i&&this.queued.loop(i,o),n&&this.queued.rate((n||1)*this.rate,o),[this.queued,o]}}stop(e,t){var i=this.getActive(e,null,t);i&&(i.isPlaying=!1,i.stop()),(i=this.getActive(e,"3d",t))&&(i.isPlaying=!1,i.stop()),(i=this.getActive(e,"3dv",t))&&(i.isPlaying=!1,i.stop())}endLoops(){for(var e in this.sounds)this.sounds[e]&&this.sounds[e]._sounds[0]._loop&&(this.sounds[e].isPlaying=!1,this.sounds[e].stop())}stopALL(){for(var e in this.sounds)this.sounds[e]&&(this.sounds[e].isPlaying=!1,this.sounds[e].stop())}play3Dv2(e,t,i,a,r,o,l,c,d){var h,u=s.getD3D(t,i,a,c.x,c.y,c.z),p=(o=(o||1)*(1-u/r)*n.otherSoundMlt)*this.getVolume(e,d),f=()=>{this.queued.vol=o,this.queued.volume(p,h),this.queued.rate(l||1,h)};const m=this.getSound(e,"3dv",d,void 0,void 0,p);h=this.queued.play(),m?f():this.queued.on("load",f,h)}play3Dv(e,t,i,a,r,o,l,c,d){var h=1-s.getD3D(t,i,a,c.x,c.y,c.z)/r;if(h>.1){this.getSound(e,"3dv",d);var u=this.queued.play(),p=(o=(o||1)*h*n.otherSoundMlt)*this.getVolume(e,d);this.queued.vol=o,this.queued.volume(p,u),this.queued.rate(l||1,u)}}play3D(e,t,i,s,a,r,o,l,c,d){var h,u=(a=(a||1)*n.otherSoundMlt)*this.getVolume(e,c),p=()=>{this.queued.vol=a,this.queued.volume(u,h),this.queued.rate(r||1,h),this.queued.pos(t,i,s,h),this.queued.pannerAttr({refDistance:o||25,rolloffFactor:l||1},h)};const f=this.getSound(e,"3d",c,void 0,d,u);return h=this.queued.play(),f?p():this.queued.on("load",p,h),[this.queued,h]}update3DPos(e,t,i,n){return e[0].pos(t,i,n,e[1]),[e[0],e[1]]}play3DL(e,t,i,n,s,r,o,l,c,d,h){var u=(s||1)*this.getVolume(e,c);this.getSound(e,"3d",c,void 0,void 0,u);var p=this.queued.play();return this.queued.vol=s||1,this.queued.volume(u,p),this.queued.rate(r||1,p),this.queued.pos(t,i,n,p),this.queued.pannerAttr({refDistance:o||25,rolloffFactor:l||1,distanceModel:a[d||0],maxDistance:1e4,coneOuterGain:1},p),this.queued.on("end",(function(e){this.stopped||(this.isPlaying=!0,this.seek(0,e),this.play(e))})),h||this.emitter.push(this.queued),[this.queued,p]}clearEmitters(){for(var e=0;e<this.emitter.length;e++)this.emitter[e].isPlaying=!1,this.emitter[e].stop();this.emitter.length=0}updateSound(e,t){this.soundCats[e]&&2==this.soundCats[e]&&this.stop(e),this.sounds[e]=new Howl({src:[t],format:"mp3"}),this.sounds[e+"3d"]=new Howl({src:[t],format:"mp3"}),this.sounds[e+"3dv"]=new Howl({src:[t],format:"mp3"})}reset(){for(var e in this.sounds)this.sounds[e].reset=!0}}},function(e,t,i){const n=i(4).apiURL,s={apiRequest(e,t,i={}){for(let e in i)null==i[e]&&delete i[e];let s=new URLSearchParams(i).toString();return fetch(""+n+t+(s?"?"+s:"")).then((e=>e.json())).catch((t=>e(t,null))).then((t=>e(null,t)))},apiRequestAsync:(e,t={})=>new Promise((i=>{for(let e in t)null==t[e]&&delete t[e];let s=new URLSearchParams(t).toString();fetch(""+n+e+(s?"?"+s:"")).then((e=>e.json())).catch((e=>i([e,null]))).then((e=>i([null,e])))})),apiPost(e,t,i={},s){for(let e in i)null==i[e]&&delete i[e];return fetch(""+(s||n)+t,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(i)}).then((e=>e.json())).catch((t=>e(t,null))).then((t=>e(null,t)))},listMaps(e,t,i,n){this.apiRequest(n,"/webhooks/general/maps/list",{index:e,pos:t,accountId:i})},listMapsAsync(e,t,i){return this.apiRequestAsync("/webhooks/general/maps/list",{index:e,pos:t,accountId:i})},searchMap(e,t,i){this.apiRequest(i,"/webhooks/general/maps/search",{val:e,cat:t})},getMapPreset(e,t){this.apiRequest((function(i,n){t(e,(n=n||{}).da,n.fu)}),"/webhooks/general/maps/config",{mn:e})},listMods(e,t,i,n){this.apiRequest(n,"/webhooks/general/mods/list",{index:e,pos:t,accountId:i})},searchMod(e,t){this.apiRequest(t,"/webhooks/general/mods/search",{val:e})},listAssets(e,t,i,n,s){this.apiRequest(s,"/webhooks/general/assets/list",{index:e,cat:n,username:i})},searchAsset(e,t,i){this.apiRequest(i,"/webhooks/general/assets/search",{index:2,cat:t,val:e})},getPrices(e){this.apiRequest(e,"/webhooks/general/items/prices")}};e.exports=s},function(e,t,i){var n=i(4),s=i(1),a=i(271);e.exports={ahNum:0,socket:null,connected:!1,socketId:-1,sendQueue:[],trackPacketStats:!1,tickPacketCount:0,ingressPacketCount:0,ingressDataSize:0,egressPacketCount:0,egressDataSize:0,connect(e,t,i){if(!this.socket){this.events=i;var a=n.enableHttps?"wss:":"ws:";try{e.startsWith("http://")?e=e.slice(7):e.startsWith("https://")&&(e=e.slice(8));var r=!1,o=a+e;this.socket=new WebSocket(o),this.socket.binaryType="arraybuffer",this.socket.onmessage=e=>{this.trackPacketStats&&(this.ingressPacketCount++,this.ingressDataSize+=e.data.byteLength);var[t,i,n]=s.decodePacket(e.data);"k"===i&&this.tickPacketCount++,"io-init"==i?this.socketId=n[0]:"cpt"==i?this._showCaptcha():"cptR"==i?this._captchaComplete():("error"==i&&this._hideCaptcha(),this._dispatchEvent(i,n))},this.socket.onopen=()=>{this.connected=!0,t();for(let e of this.sendQueue)this.send(e[0],...e[1])},this.socket.onclose=e=>{this.connected=!1,r||t({error:"Disconnected. Try connecting to another server.",code:e?e.code:null,reason:e?e.reason:null})},this.socket.onerror=e=>{r=!0,console.error("Socket error",e),t({error:"Socket error"})}}catch(e){console.error("Socket connection error:",e),t({error:e})}}},_dispatchEvent(e,t){this.events[e]&&this.events[e].apply(void 0,t)},send(e,...t){if(!this.socket||this.socket.readyState!==WebSocket.OPEN)return console.warn("Socket sending on socket not open yet",this.socket.readyState),void this.sendQueue.push([e,t]);"cptR"!=e&&(this.ahNum=s.rotateNumber(this.ahNum,a));var i=s.encodePacket(s.serializePacket(e,...t),this.ahNum);this.socket.send(i),this.trackPacketStats&&(this.egressPacketCount++,this.egressDataSize+=i.byteLength)},socketReady(){return this.socket&&this.connected},resetPacketTally(){this.tickPacketCount=0,this.ingressPacketCount=0,this.ingressDataSize=0,this.egressPacketCount=0,this.egressDataSize=0},close(){this.socket&&this.socket.close()},captchaHolder:null,_showCaptcha(){if(null!=this.captchaHolder)return void console.warn("Already showing captcha");if(!window.hcaptcha||!window.hcaptchaReady)return console.warn("Hcaptcha not loaded yet or not ready yet"),void setTimeout(this._showCaptcha.bind(this),1e3);this.captchaHolder=document.createElement("div"),this.captchaHolder.id="captcha-holder",this.captchaHolder.style.backgroundColor="rgba(0, 0, 0, 0.5)",this.captchaHolder.style.zIndex=999999,this.captchaHolder.style.position="fixed",this.captchaHolder.style.top="0",this.captchaHolder.style.left="0",this.captchaHolder.style.bottom="0",this.captchaHolder.style.right="0",this.captchaHolder.style.pointerEvents="all",uiBase.appendChild(this.captchaHolder),this.captchaModal=document.createElement("div"),this.captchaModal.style.backgroundColor="white",this.captchaModal.style.zIndex=999999,this.captchaModal.style.position="fixed",this.captchaModal.style.top="50%",this.captchaModal.style.left="50%",this.captchaModal.style.transform="translate(-50%, -50%)",this.captchaModal.style.padding="20px",this.captchaModal.style.borderRadius="6px",this.captchaModal.style.boxShadow="0px 9px 0px 0px #a6a6a6",this.captchaModal.style.width="450px",this.captchaModal.style.display="flex",this.captchaModal.style.textAlign="center",this.captchaModal.style.flexDirection="column",this.captchaModal.style.justifyContent="center",this.captchaModal.style.alignItems="center",this.captchaModal.style.pointerEvents="all",this.captchaHolder.appendChild(this.captchaModal);let e=document.createElement("div");e.style.fontSize="32px",e.style.textTransform="uppercase",e.style.marginBottom="10px",e.textContent="Security Challenge",this.captchaModal.appendChild(e);let t=document.createElement("div");t.style.color="rgba(0, 0, 0, 0.6)",t.style.fontSize="20px",t.style.marginBottom="10px",t.textContent="Please complete the security challenge to continue",this.captchaModal.appendChild(t);let i=document.createElement("div");this.captchaModal.appendChild(i),window.hcaptchaCallback=e=>{this.send("cptR",e)},window.hcaptchaErrorCallback=e=>{console.error("Hcaptcha error",e),this._hideCaptcha(),this._dispatchEvent("error",["CAPTCHA FAILED"]),this.close()},window.hcaptchaExpiredCallback=()=>{this._hideCaptcha(),this._dispatchEvent("error",["CAPTCHA EXPIRED"]),this.close()},window.hcaptcha.render(i,{sitekey:"60a46f6a-e214-4aa8-b4df-4386e68dfde4",theme:"dark",callback:"hcaptchaCallback","error-callback":"hcaptchaErrorCallback","expired-callback":"hcaptchaExpiredCallback"})},_captchaComplete(){this._hideCaptcha()},_hideCaptcha(){this.captchaHolder&&(this.captchaHolder.remove(),this.captchaHolder=null,window.hcaptchaCallback=window.hcaptchaErrorCallback=window.hcaptchaExpiredCallback=null)},reset(){this.ahNum=0,this.socket&&(this.socket.onclose=function(){},this.socket.close(),this.socket=null),this.connected=!1,this.socketId=-1,this.sendQueue.length=0,this.events=null,this.tickPacketCount=0,this.ingressPacketCount=0,this.ingressDataSize=0,this.egressPacketCount=0,this.egressDataSize=0,this.captchaHolder&&(this.captchaHolder.remove(),this.captchaHolder=null),this.captchaModal&&(this.captchaHolder.remove(),this.captchaHolder=null)}}},function(e){e.exports=11},function(e,t,i){e.exports={init:{game:i(273),social:i(274),editor:i(275)}}},function(e,t,i){const n=i(4),s=i(1);e.exports=function(e,t){var i={_html:{settings:{input:{generic:function(e,t){return t=t||"window","<input type='"+e.type+"' name='"+e.type+"' id='slid_"+e.key+"' class='inputGrey2' placeholder='"+e.placeholder+"'\n\t\t\t\t\t\t\tvalue='"+e.val+"' oninput='"+t+'.setSetting("'+e.key+"\", this.value)'/>"},color:function(e,t){return t=t||"window","<input type='color' name='color' id='slid_"+e.key+"' style='float:right' value='"+e.val+"'\n\t\t\t\t\t\t\toninput='"+t+'.setSetting("'+e.key+"\", this.value)'/>"},switch:function(e,t){return"<label class='switch' style='margin-left:10px'><input type='checkbox' onclick='"+(t=t||"window")+'.setSetting("'+e.key+"\", this.checked)'\n\t\t\t\t\t\t\t"+(e.val?"checked":"")+"><span class='slider'><span class='grooves'></span></span></label>"},slider:function(e,t){return t=t||"window","<input type='number' class='sliderVal' id='slid_input_"+e.key+"' min='"+e.min+"' max='"+e.max+"'\n\t\t\t\t\t\t\tvalue='"+e.val+"' onkeypress='return "+t+'.delayExecute("'+e.key+'", this, '+e.delay+")' style='margin-right:0px;border-width:0px'/>\n\t\t\t\t\t\t\t<div class='slidecontainer' style='margin-top: -8px;"+(e.style||"")+"'><input type='range' id='slid_"+e.key+"' min='"+e.min+"' max='"+e.max+"' step='"+e.step+"'\n\t\t\t\t\t\t\tvalue='"+e.val+"' class='sliderM' oninput='"+t+'.setSetting("'+e.key+"\", this.value)'></div>"},select:function(e,t,i){return t=t||"window",i=e.options||i,"<select onchange='"+t+'.setSetting("'+e.key+"\", this.value)' class='inputGrey2'>\n\t\t\t\t\t\t\t"+Object.keys(i).map((t=>"<option value='"+t+"' "+(t==e.val?"selected":"")+">"+i[t]+"</option>"))+"</select>"}}}},endScreen:{tabs:{leaderboard:{name:"Leaderboard",gen:function(){return setTimeout(this.showTable),'<table id="endTable"></table>'}},performance:{name:"Performance",mode:{ids:["ffa","tdm","ctf","kc","point"],getIcon:function(){return this.ids.includes(e.mode.id)?'<img src="'+s.assetsUrl("img/modes/"+e.mode.id+".png")+'" class="modeIcon">':'<div class="unknownModeIcon">?</div>'}},xp:{animTime:1e3,newScoreCol:"#fff",getNewScoreProg:function(e,t){let i=e.level>1?Math.pow(e.level/n.rankVar,2):0;return t/parseInt(Math.pow((e.level+1)/n.rankVar,2)-i)*100},animateXPBar:function(e,t){let i=document.getElementsByClassName("xpEndBarB")[t];i&&(i.style.width=e+"%")}},gen:function(){let{rank:t,score:i,kills:n,deaths:a,funds:r,victory:o,endInd:l}=this.stats,c=(this.account?this.account.wins/this.account.games:-1==o?0:o?1:0).toFixed(2),d='<div class="endTitle" style="text-align:center">'+e.mode.name+'</div>\n\t\t\t\t\t\t\t<div id="modeLayout">'+this.mode.getIcon()+'\n\t\t\t\t\t\t\t<div class="modeStatus" style="margin-top: -5px;'+(-1==o?"color:var(--yellow)":o?"":"color:var(--red)")+'">\n\t\t\t\t\t\t\t'+(3==l?"CANCELLED":-1==o?"DRAW":o?"VICTORY":"DEFEAT")+"</div></div>",h='<div id="fundsLayout" style="'+(e.mode.ranked?"zoom:0.8":"")+'">\n\t\t\t\t\t\t\t<div class="fundsVal">'+("NONE"==r?"NONE":r)+"</div></div>",u="";if(this.account&&!this.isCustom&&this.bpData){this.bpData=this.bpData||{bpp:0,mx:1};let t=(this.bpData.bpp||0)%this.bpData.mx,i=t/this.bpData.mx*100,n=Math.floor((this.bpData.bpp||0)/this.bpData.mx)+1,s=n>=this.bpData.ml;s&&(t=this.bpData.mx,i=100,n=this.bpData.ml);let a=s?this.account.BP.tier>0?"VIP Tier Complete":"Free Tier Complete":"Next Level Reward",r=!s&&this.account.BP.tier<=0,o=this.bpData.re,l="./img/battlepass/logo_white.svg";o&&(l=o.kr?"./img/battlepass/krunkies.svg":o.sk?e.store.skins[o.sk].thumbnail:""),s&&(l="./img/battlepass/logo_0.png"),u+='<div id=\'endBPLayout\'>\n\t\t\t\t\t\t\t\t<div class="endSection" style="margin-bottom:10px">\n\t\t\t\t\t\t\t\t\t<div class=\'endTitle\'>\n\t\t\t\t\t\t\t\t\t\tBattle Pass\n\t\t\t\t\t\t\t\t\t\t<img class="endBpInfo"  onmouseenter="playTick()" onclick="playSelect();showWindow(6)" src="./img/frvr-ui/info-icon.svg">\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div id=\'endBPLvl\'>Level '+n+"</div>\n\t\t\t\t\t\t\t\t\t<div class=\"blackShad\" id='endBPGained'>+"+((this.bpData.gn||0)+(this.bpData.cbp||0))+"</div>\n\t\t\t\t\t\t\t\t\t<div class=\"blackShad\" id='endBPProgText'>"+t+"/"+(this.bpData.mx||0)+"</div>\n\t\t\t\t\t\t\t\t\t<div class='xpEndBar' style='margin-top: 19px;margin-bottom: 0px;'>\n\t\t\t\t\t\t\t\t\t\t<div class='xpEndBPBarB' style='width: "+i+'%;\'></div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div id="endBPUnlock" onmouseenter="playTick(0.1);" style="display:'+(this.account.BP.tier>0?"none":"block")+'" onclick="playSelect(0.1);windows[5].purchasePop();">Unlock VIP</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="endBPNext">\n\t\t\t\t\t\t\t\t\t<div id=\'endBPNextText\'>'+a+'</div>\n\t\t\t\t\t\t\t\t\t<img id="endBPLogo" src="./img/battlepass/logo_white.svg"'+(s?' style="visibility:hidden"':"")+'>\n\t\t\t\t\t\t\t\t\t<div id="endBPReward" style="display: '+(o||s?"block":"none")+';">\n\t\t\t\t\t\t\t\t\t\t<img id="endBPRewardImg" src="'+l+'">\n\t\t\t\t\t\t\t\t\t\t<img id="endBPRewardLock" src="./img/battlepass/lock.png" style="display:'+(r?"block":"none")+';">\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>'}if(u+="<div id='endLayout'><div><div id='gameFundsLayout'><div class='gfSection' style='margin-bottom: 0px;padding: 16px 0px;'>"+d+"</div><div class='gfSection'>"+h+"</div></div></div><div class='endSection'><div class='endTitle'>Combat Record</div><div id='combatRecordLayout'><div class='crStat'><div class='crLabel'>Score</div><div class='crVal'>"+i+"</div></div><div id='kdLayout'><div class='crStat'><div class='crLabel'>Kills</div><div class='crVal'>"+n+"</div></div><div class='crStat'><div class='crLabel'>Deaths</div><div class='crVal'>"+a+"</div></div></div><div class='crStat'><div class='crLabel'>Rank</div><div class='crVal'>"+t+"</div></div><div class='crStat'><div class='crLabel'>SPK</div><div class='crVal'>"+(i/(n||1)||0).toFixed(2)+"</div></div><div class='crStat'><div class='crLabel'>KDR</div><div class='crVal'>"+(n/(a||1)||0).toFixed(2)+"</div></div><div class='crStat'><div class='crLabel'>W/L</div><div class='crVal'>"+c+"</div></div></div></div></div>",this.account){this.account.updateLevel();let e=this.xp.getNewScoreProg(this.account,i),t=this.account.levelProg,n=t>100;u+='<div class="endSection" style="margin-top:10px">'+("<div id='lvlLayout'><img src='"+s.assetsUrl("/img/levels/"+s.levelIconId(this.account.level)+".png")+"' class='xpRnk'><div class='xpLvl'>"+this.account.level+"</div><div class='xpEndBar'><div class='xpEndBarB' style='width: 0%;"+(n?"background-color:"+this.xp.newScoreCol:"")+"'></div><div class='xpEndBarB' style='width: 0%;background-color: "+this.xp.newScoreCol+";margin-left: -7px;'></div><span class='xpEndBarV blackShad'>"+s.xpBarText(this.account)+"</span></div><img src='"+s.assetsUrl("/img/levels/"+s.levelIconId(this.account.level)+".png")+"' class='xpRnk' style='margin-left: auto'><div class='xpLvl'>"+(this.account.level+1)+"</div></div>")+"</div>",setTimeout((()=>{this.xp.animateXPBar(n?t%100:t-e,0)})),n||setTimeout((()=>{this.xp.animateXPBar(e,1)}),this.xp.animTime)}return u}},medals:{name:"Medals",gen:function(){var e=this.list||[];if(!e||!e.length)return'<div style="text-align:center;color:#fff;font-size:30px;background-color:rgba(0, 0, 0, 0.4);border-radius:6px;padding:20px;">You didnt earn any medals this game!</div>';let t="<div id='medalTable'>";for(var i=0;i<e.length;i++)t+="<div class='medalCard'><div class='medalImg' style='"+("background-image: url("+s.assetsUrl("/img/medals/medal_"+e[i].i+".png")+"), url("+s.assetsUrl("/img/medals/badge_0.svg")+")")+"'></div><div class='medalTxt'>"+e[i].n+"</div><div class='medalTxt'>x"+e[i].c+"</div></div>";return t+="</div>",t}},rewards:{name:"Rewards",gen:function(){var t=this.list||{};if(!t.junk&&!t.skins)return'<div style="text-align:center;color:#fff;font-size:30px;background-color:rgba(0, 0, 0, 0.4);border-radius:6px;padding:20px;">You didnt earn any rewards this game!</div>';let i="<div id='rewardTable'>",n=[];if(t.junk&&(i+="<div class='rewItemHolder' style='border: 2px solid "+e.store.rarities[2].color+";'><img draggable='false' class='rewJunkImg' loading='lazy' src='"+s.assetsUrl("/img/frvr-ui/junk-symbol.svg",void 0,!0)+"'><div class='rewItemN'>"+parseFloat(t.junk).toFixed(2)+" Junk</div></div>"),t.skins)for(var a=0;a<t.skins.length;a++)tmpObj=e.store.skins[t.skins[a].i],tmpObj&&(i+="<div class='rewItemHolder' style='border: 2px solid "+e.store.rarities[tmpObj.rarity].color+";' onclick='viewItem("+tmpObj.index+")'>"+(tmpObj.type&&4==tmpObj.type?"<div class='rewItemSprayImg' style='background: url(&quot;"+tmpObj.thumbnail+"&quot;);"+s.getFrameAnim(tmpObj,"sprayAnmD")+"'></div>":"<img draggable='false' class='"+(16==tmpObj.type?"rewCardImg":"rewItemImg")+"' loading='lazy' src='"+tmpObj.thumbnail+"'>")+"<div class='rewItemN'>"+tmpObj.name+"</div><div class='rewItemCnt'>x"+t.skins[a].c+"</div></div>",tmpObj.type&&4==tmpObj.type&&tmpObj.frames&&-1==n.indexOf(tmpObj.frames)&&n.push(tmpObj.frames));if(i+="</div>",n.length){i+="<style>";for(a=0;a<n.length;a++)i+="@keyframes sprayAnmD"+n[a]+" {100%{background-position:-"+120*n[a]+"px}}";i+="</style>"}return i}}},init:function(e,t,i,n,s,a,r,o,l,c){this.spectating=t,this.hasVoting=r,this.account=e,this.isCustom=a,this.clicked2XP=!1,setTimeout(l),this.tabs.leaderboard.showTable=c,this.tabs.performance.account=e,this.tabs.performance.stats=i,this.tabs.performance.isCustom=a,this.tabs.performance.bpData=o,this.tabs.medals.list=n,this.tabs.rewards.list=s,this.changeTab(this.spectating||a?"leaderboard":"performance")},changeTab:function(e){this.currentTab=e,this.show()},show:function(){let i="";if(!this.spectating){i+="<div id='tabHolder'>";for(let e in this.tabs)i+='<div class="tabHeader '+(e==this.currentTab?"selected":"")+'"\n\t\t\t\t\t\tonmouseenter="playTick()" onclick="GUI.endScreen.changeTab(\''+e+"')\">"+this.tabs[e].name+"</div>";i+="</div>"}let n='<div class="endCard">'+i+'\n\t\t\t\t\t<div class="tabBody"'+(this.hasVoting?' style="max-height:545px"':"")+">"+this.tabs[this.currentTab].gen()+"</div></div>";e.isComp?n+='<div id="returnHolder" onclick="openURL(location.origin, true)">\n\t\t\t\t\t\t<div id="returnText">Return to Krunker</div>\n\t\t\t\t\t</div>':!this.clicked2XP&&this.account&&this.account.id&&this.account.games%3==0&&0!=this.account.games&&!this.isCustom&&(n+='<div id="doubleXPHolder" onmouseenter="playTick(0.1);" onclick="showDoubleXPRewardedAd()">\n\t\t\t\t\t\t<img style="vertical-align: middle;display:inline" height="60px" src="./img/frvr-ui/ad-icon.svg">\n\t\t\t\t\t\t<div id="returnText">'+t.t("window.endgame.player.doubleGainedXP")+"</div>\n\t\t\t\t\t</div>"),endTabbedView.innerHTML=n}}};return window.GUI=s.removePrivateKeys(i),i}},function(e,t,i){i(4);const n=i(1);e.exports=function(){var e={_html:{settings:{input:{generic:function(e){return"<input type='"+e.type+"' name='"+e.type+"' id='slid_"+e.key+"' class='inputGrey2' placeholder='"+e.placeholder+"'\n\t\t\t\t\t\t\tvalue='"+e.val+"' oninput='setSetting(\""+e.key+"\", this.value)'/>"},color:function(e){return"<input type='color' name='color' id='slid_"+e.key+"' style='float:right' value='"+e.val+"'\n\t\t\t\t\t\t\toninput='setSetting(\""+e.key+"\", this.value)'/>"},switch:function(e){return"<label class='switch' style='margin-left:10px'><input type='checkbox' onclick='setSetting(\""+e.key+"\", this.checked)'\n\t\t\t\t\t\t\t"+(e.val?"checked":"")+"><span class='slider'></span></label>"},slider:function(e){return"<input type='number' class='sliderVal' id='slid_input_"+e.key+"' min='"+e.min+"' max='"+e.max+"'\n\t\t\t\t\t\t\tvalue='"+e.val+"' onkeypress='return delayExecute(\""+e.key+'", this, '+e.delay+")' style='margin-right:0px;border-width:0px'/>\n\t\t\t\t\t\t\t<div class='slidecontainer' style='margin-top: -8px;"+(e.style||"")+"'><input type='range' id='slid_"+e.key+"' min='"+e.min+"' max='"+e.max+"' step='"+e.step+"'\n\t\t\t\t\t\t\tvalue='"+e.val+"' class='sliderM' oninput='setSetting(\""+e.key+"\", this.value)'></div>"},select:function(e,t){return t=e.options||t,"<select onchange='setSetting(\""+e.key+"\", this.value)' class='inputGrey2'>\n\t\t\t\t\t\t\t"+Object.keys(t).map((i=>"<option value='"+i+"' "+(i==e.val?"selected":"")+">"+t[i]+"</option>"))+"</select>"}}}},action:function(t){let i=e;if(t.forEach((e=>i=i[e])),"button"===i.type)i.onclick&&i.onclick()},_build:function(t){let i=e;return t.forEach((e=>i=i[e])),Object.keys(i).map((e=>{let n=i[e],s="GUI.action("+JSON.stringify([...t,e]).replace(/\"/g,"'")+", this)";return"button"===n.type?'<div id="'+(n.id||"")+'" style="'+(n.style||"")+'" onclick="'+s+'">'+(n.html||"")+"</div>":""})).join("\n")}};return window.GUI=n.removePrivateKeys(e),e}},function(e,t,i){const n=i(4),s=i(1);function a(e){if(e=e||{},this.name=e.name,this.id=e.id,this.parent=e.parent,this.type=e.type,this.pos=e.pos,this.size=e.size,this.sub=e.sub,this.closed=e.closed,this.show=e.show,this.blueprint={},this.parent){var t=this.id||this.name;this.parent.blueprint[t]={type:this.type,children:e.children||{}},this.name&&(this.parent.blueprint[t].name=this.name),this.id&&(this.parent.blueprint[t].id=this.id),this.pos&&(this.parent.blueprint[t].pos=this.pos),this.size&&(this.parent.blueprint[t].size=this.size),this.sub&&(this.parent.blueprint[t].sub=this.sub),this.closed&&(this.parent.blueprint[t].closed=!0),null!=this.show&&(this.parent.blueprint[t].show=this.show),this.blueprint=this.parent.blueprint[t].children}this.addFolder=function(e,t,i,n,s,r,o){var l={name:e,parent:this,type:n||this.type,children:t||{}};(i||this.pos)&&(l.pos=i||this.pos),(s||this.size)&&(l.size=s||this.size),o&&(l.sub=o),r&&(l.closed=!0);return new a(l)},this.addDiv=function(e,t,i,n){var s={id:e,parent:this,type:"div",children:t||{}};(i||this.size)&&(s.size=i||this.size),null!=n&&(s.show=n);return new a(s)},this.addOption=function(e,t){return this.blueprint[e]={name:e,type:this.type,pos:"option",onClick:t},this},this.add=function(e,t,i,n,s,a,r,o){var l={object:i,key:n,type:e};return r&&(l.line="wide"),s&&(l.args=s),t&&(l.name=t),o&&(l.sub=o),a&&(l.onChange=a),!l.args||"select"!=e&&"button"!=e&&"number"!=e&&"text"!=e||(l.args=[l.args]),this.blueprint[t||n]=l,this},this.addPanelButton=function(e,t){var i={type:"panel_buttons",direction:t};return e?i.label=e:i.blank=!0,this.blueprint.panelButtons=i,this},this.addChildren=function(e){return this.blueprint={...e},this};var i=0;this.addRule=function(){return this.blueprint["rule"+i]={type:"rule"},i++,this},this.toJSON=function(){if(!e.parent)return this.blueprint}}e.exports=function(e,t,i,r,o,l,c,d,h,u){var p,f,m={_html:{panelButtons:function(e,t,i=!1){let n='<div class="'+("left"==e?"right":"left")+' panelButton" style="'+(i?"border-bottom-right-radius:5px":"")+'" onclick="KE.resizable.hide(this)">\n\t\t\t\t\t<div class="hide"><i class="material-icons hide">keyboard_arrow_'+e+"</i></div></div>",s=i?"<div></div>":'<div class="'+("left"==e?"left":"right")+' panelButton" onclick="GUI.panel.state.lock(this, \''+e+'\')">\n\t\t\t\t\t<div class="lock""><i class="material-icons lock">lock'+(m.panel[e].locked?"":"_open")+"</i></div></div>",a=i?"<div></div>":"<div class='panelLabel'>"+t+"</div>";return'<div class="panelButtonLayout">'+("left"==e?s+a+n:n+a+s)+"</div>"},arrow:function(e){return'<i class="material-icons" style="transform: translateY(5px) rotate('+{up:-45,down:135,left:-135,right:45}[e]+'deg)">call_made</i>'},folder:{standard:function(e,t="",i="",n=!1){return'<div id="'+e.toLowerCase()+'H" class="header" onclick="GUI.update.folder(this);'+i+'">\n\t\t\t\t\t\t<i class="material-icons">keyboard_arrow_'+(n?"right":"down")+"</i><a>"+e+'</a></div><hr>\n\t\t\t\t\t\t<div id="'+e.toLowerCase()+'B" style="'+(n?"display:none":"")+'">'+t+"<hr></div>"},small:function(e,t="",i="",n=!1,s=!1){return'<div id="'+e.toLowerCase()+'H" class="'+(s?"sub":"")+'subheader" style="cursor: pointer"\n\t\t\t\t\t\tonclick="GUI.update.folder(this);'+i+'"><i class="material-icons">keyboard_arrow_'+(n?"right":"down")+"</i><a>"+e+'</a></div>\n\t\t\t\t\t\t<div id="'+e.toLowerCase()+'B" style="'+(n?"display:none":"")+'">'+t+"</div>"},smaller:function(e,t="",i="",n=!1,s=!1){return'<div id="'+e.toLowerCase()+'H" class="'+(s?"sub":"")+'subsubheader" style="cursor: pointer"\n\t\t\t\t\t\tonclick="GUI.update.folder(this);'+i+'"><i class="material-icons">keyboard_arrow_'+(n?"right":"down")+"</i><a>"+e+'</a></div>\n\t\t\t\t\t\t<div id="'+e.toLowerCase()+'B" style="'+(n?"display:none":"")+'">'+t+"</div>"}},line:{standard:function(e,t="",i=0){return'<div class="inlineItem"><div class="section '+(["subsection","subsubsection"][i-1]||"")+'">'+e+"</div>\n\t\t\t\t\t\t<div>"+t+"</div></div>"},switch:function(e,t="",i=0){return'<div class="inlineItem" style="grid-template-columns: calc(85% - 5px) calc(15% - 5px);">\n\t\t\t\t\t\t<div class="section '+(["subsection","subsubsection"][i-1]||"")+'">'+e+"</div>\n\t\t\t\t\t\t<div>"+t+"</div></div>"},nodiv:function(e,t="",i=0){return'<div class="inlineItem">\n\t\t\t\t\t\t<div class="section '+(["subsection","subsubsection"][i-1]||"")+'">'+e+"</div>\n\t\t\t\t\t\t"+t+"</div>"},wide:function(e,t=""){return"<div>"+t+"</div>"}},input:{resizable:{button:function(e,t="",i){return'<div class="eButton" onclick="'+t+'">'+i+"</div>"},dbutton:function(e,t="",i,n){return'<div class="dbuttonTable"><div class="dbutton" onclick="'+t+'" id="left">'+i+'</div>\n\t\t\t\t\t\t<div class="dbutton" onclick="'+t+'" style="margin-left: 5px;" id="right">'+n+"</div></div>"},key:function(e="",t="",i=[],n=!1){return'<div class="inlineLabel '+(n?"":"disabled")+'" href="#" '+(n?'onclick="'+t+'"':"")+">"+[e,...i].join(" or ")+"</div>"},text:function(e="",t="",i=""){return'<input class="inlineInput" type="text" placeholder="'+i+'" value="'+e+'" oninput="'+t+'" onchange="GUI.update.field(this)">'},number:function(e=0,t="",i="",n="",s="",a=""){return'<input class="inlineInput" type="number" placeholder="'+i+'" value="'+e+'" min="'+n+'" max="'+s+'" step="'+a+'"\n\t\t\t\t\t\tonmousedown="GUI.update.number.mousedown(this)" onchange="GUI.update.field(this);GUI.update.number.change(this);'+t+'">'},color:function(e="#ffffff",t=""){return'<input class="color" style="background-color:'+e+";color:"+s.stringifyColor(s.parseColor(e)<7829367?16777215:0)+'"\n\t\t\t\t\t\ttype="text" spellcheck="false" value="'+e+'" onchange="GUI.update.field(this);GUI.update.color.change(this);'+t+'"\n\t\t\t\t\t\tonmousedown="GUI.update.color.mousedown(this)">'},switch:function(e=!1,t=""){return'<label class="switch" style="margin-top: 10px"><input type="checkbox"\n\t\t\t\t\t\tonclick="'+t+'" '+(e?"checked":"")+'><span class="slider"></span></label>'},slider:function(e=0,t="",i=0,n=1,s=.1){return'<div style="zoom:0.7;margin-top:12px;">\n\t\t\t\t\t\t<input type="number" class="sliderVal" min="'+i+'" max="'+n+'" value="'+e+'"\n\t\t\t\t\t\tonchange="GUI.update.field(this);GUI.update.slider.val(this);'+t+'"><div class="slidecontainer"><input type="range"\n\t\t\t\t\t\tmin="'+i+'" max="'+n+'" step="'+s+'" value="'+e+'" class="sliderM" oninput="GUI.update.slider.M(this);'+t+'">\n\t\t\t\t\t\t</div></div>'},select:function(e=0,t="",i){return'<select onchange="'+t+'">'+i.map((t=>'<option value="'+t.value+'"\n\t\t\t\t\t\t'+(e==t.value?"selected":"")+">"+t.name+"</option>"))+"</select>"},selectClick:function(e=0,t="",i,n,s){return'<div class="multiItem"><select onchange="'+t+'">'+i.map((t=>'<option value="'+t.value+'"\n\t\t\t\t\t\t'+(e==t.value?"selected":"")+">"+t.name+"</option>"))+'</select>\n\t\t\t\t\t\t<div class="iconButton" onclick="'+n+'"><span class="material-icons" style="line-height: 1.2;">'+s+"</span></div></div>"}},fixed:{vector3:function(t,n="",s=[0,0,0],a="",r="",o=""){return"Rotation"===t&&e.settings.degToRad&&(s=s.map((e=>i.MathUtils.radToDeg(e).round(2)))),'<div class="section">'+t+'</div><div class="vector3">\n\t\t\t\t\t\t'+e.xyzKeys.map(((e,t)=>'<input type="number" placeholder="'+e+'" min="'+a+'" max="'+r+'" step="'+o+'"\n\t\t\t\t\t\tonmousedown="GUI.update.number.mousedown(this)" onchange="GUI.update.field(this);GUI.update.number.change(this);'+n+'"\n\t\t\t\t\t\tvalue="'+s[t]+'">')).join("\n")+"</div>"}}},toolbar:{root:function(e,t){return'<div class="toolbarItem" onmouseover="GUI.update.toolbar(this, true)" onmouseout="GUI.update.toolbar(this)">\n\t\t\t\t\t\t'+e+'<div class="toolbarDropDown">'+t+"</div></div>"},menu:function(e,t){return'<div class="toolbarDropDownItem" onmouseover="GUI.update.toolbar(this, true)" onmouseout="GUI.update.toolbar(this)">\n\t\t\t\t\t\t'+e+'<div class="toolbarSubDropDown" style="top: this.offsetTop">'+t+"</div></div>"},option:function(e,t=""){return'<div class="toolbarDropDownItem" onclick=";'+t+'">'+e+"</div>"},textarea:function(e,t=""){return'<div class="toolbarDropDownItem textarea" onclick=";'+t+'"><textarea class="qs_textarea" rows="5"></textarea></div>'}},chunk:function(e,t,i,n){return""+i+s.arrayChunk(e,t).map((e=>e.join("\n"))).join(""+n+i)+n}},update:{folder:function(e){let t=e.parentElement.querySelector("[id='"+e.id.substring(0,e.id.length-1)+"B']"),i="none"==t.style.display;e.children[0].innerHTML="keyboard_arrow_"+(i?"down":"right"),t.style.display=i?null:"none"},field:function(e){e.blur()},key:{choice:{},keydown:function(e){let t=m.update.key.choice;if(t.elem){1==(e=window.event||e).key.toUpperCase().length?t.callback(e.key.toUpperCase(),!0):t.callback(t.prev),t.elem=null}},mousedown:function(e){let t=m.update.key.choice;t.elem&&(e=window.event||e,t.callback(t.prev),t.elem=null)}},number:{mousedown:function(e){m.update.number.elem=e},mousemove:function(e){let t=m.update.number.elem;e=window.event||e,t&&(t.value=parseFloat(t.value)-e.movementY*(parseFloat(t.step)||1),t.min&&t.value<t.min&&(t.value=parseFloat(t.min)),t.max&&t.value>t.max&&(t.value=parseFloat(t.max)),t.onchange())},mouseup:function(){delete m.update.number.elem},change:function(e){""==e.value&&(e.value=0)}},color:{init:function(){let e=document.createElement("div");e.style.display="none",document.body.appendChild(e),m.update.color.pickr=Pickr.create({el:e,theme:"nano",swatches:null,comparison:!1,lockOpacity:!0,autoReposition:!1,defaultRepresentation:"HEX",closeOnScroll:!0,components:{preview:!1,opacity:!1,hue:!0,interaction:{input:!1,cancel:!1,clear:!1,save:!1}}});var t=e=>{let t=m.update.color.elem;"Enter"===e.key&&s.isHexColor(t.value)&&m.update.color.pickr.setColor(t.value,!0)};m.update.color.pickr.on("show",(function(e,i){let n=m.update.color.elem.getBoundingClientRect();m.update.color.elem.removeEventListener("keydown",t),m.update.color.elem.addEventListener("keydown",t,{capture:!0});let s=n.y,a=n.x+n.width+4;s=window.innerHeight-s<i._root.app.offsetHeight?s-i._root.app.offsetHeight+n.height:s,a=window.innerWidth-a<i._root.app.offsetWidth?a-i._root.app.offsetWidth-n.width-8:a,i._root.app.style.top=s+"px",i._root.app.style.left=a+"px",i.setColor(m.update.color.elem.value),KE.updateColorSwatches()})).on("change",(function(e){let t=m.update.color.elem;t&&(t.value=e.toHEXA().toString(),t.setAttribute("data-hsva",e.toHSVA().toString()),t.onchange())})).on("hide",(function(){m.update.color.elem.removeEventListener("keydown",t),delete m.update.color.elem})).on("swatchselect",(function(e){let t=m.update.color.elem;t&&(t.value=e.toHEXA().toString(),t.setAttribute("data-hsva",e.toHSVA().toString()),t.onchange())}))},change:function(e){let t=e.style.backgroundColor,i=t.substr(4,t.length-5).split(", ");e.value=s.isHexColor(e.value)?e.value:s.rgbToHex(...i),e.style.backgroundColor=e.value,e.style.color=s.stringifyColor(s.parseColor(e.value)<7829367?16777215:0);var n=e.getAttribute("data-hsva")||e.value;m.update.color.pickr.setColor(n,!0)},mousedown:function(e){var t=window.event;t&&1===t.which&&(m.update.color.show=!0,m.update.color.elem=e,m.update.color.pickr.show())}},slider:{val:function(e){e.parentElement.children[1].children[0].value=Math.max(Math.min(e.value,e.max),e.min),e.value=e.parentElement.children[1].children[0].value},M:function(e){e.parentElement.parentElement.children[0].value=e.value}},toolbar:function(e,t){t?(e.children[0].style.display="block","toolbarSubDropDown"!=e.children[0].className||e.children[0].style.top||setTimeout((function(){e.children[0].style.top=e.offsetTop+"px"}),0)):e&&e.children[0]&&(e.children[0].style.display=null)}},action:function(t,i){let n=m;switch(t.forEach((e=>n=n[e])),n.type){case"toolbar":if(e.quickGUI._hidden){let e=i;t.slice(t.indexOf("blueprint")+2).forEach((()=>e=e.parentElement)),m.update.toolbar(e)}else"textarea"!=n.pos&&e.quickGUI.hide();n.onClick&&n.onClick(i,window.event);break;case"folder":let s="none"==document.getElementById(i.id.substring(0,i.id.length-1)+"B").style.display,a=[...t];a[a.indexOf("blueprint")]="folderStore";let r=m;a.forEach((e=>r=r[e]?r[e]:r[e]={})),r.closed=s;break;case"vector3":let o=[...i.parentElement.children].map((e=>parseFloat(e.value).round(n.round||0)));n.object[n.key]=o,n.onChange&&n.onChange(i,o);break;case"key":let l=m.update.key.choice;l.prev=i.innerHTML,i.innerHTML="Press Any Key",l.callback=function(e,t){i.innerHTML=[e,...n.args[0]].join(" or "),t&&(n.object[n.key]=e,n.onChange&&n.onChange(i,e))},l.elem=i;break;case"dbutton":n.onChange&&n.onChange(i,null);break;default:let c="checkbox"==i.type?i.checked:["text","select-one"].includes(i.type)?i.value:parseFloat(i.value);"DIV"==i.nodeName&&"selectClick"==n.type&&n.onClick?n.onClick():("function"==typeof n.object[n.key]?n.object[n.key](i.id,n):n.object[n.key]=c,n.onChange&&n.onChange(i,c))}},_build:function(t,i,n){let s=m;t.forEach((e=>s=s[e]));let a=Object.keys(s).map((i=>{let n=s[i],a="GUI.action("+JSON.stringify([...t,i]).replace(/\"/g,"'")+", this)";switch(n.type){case"panel_buttons":return m._html.panelButtons(n.direction,n.label,n.blank);case"rule":return"<hr>";case"div":return"<div id="+n.id+" "+(n.show?null:'style="display: none"')+">"+m._build([...t,i,"children"])+"</div>";case"toolbar":return["option","textarea"].includes(n.pos)?m._html.toolbar[n.pos](n.name,a):m._html.toolbar[n.pos](n.name,m._build([...t,i,"children"]));case"chunktoolbar":return["option","textarea"].includes(n.pos)?m._html.toolbar[n.pos](n.name,a):m._html.toolbar[n.pos](n.name,m._build([...t,i,"children"],m._html.chunk,[12,"<div class='toolbarChunkSubDropDown'>","</div>"]));case"folder":let s=[...t,i];s[s.indexOf("blueprint")]="folderStore";let r=m;return s.forEach((e=>r=r[e]?r[e]:r[e]={})),e.settings.preserveFolderState&&null!=r.closed?n.closed=r.closed:r.closed=!!n.closed,m._html.folder[n.size](n.name,m._build([...t,i,"children"]),a,n.closed,n.sub);case"vector3":return m._html.input.fixed.vector3(n.name,a,n.object[n.key],n.min);case"selectClick":return m._html.line["switch"==n.type?"switch":n.line||"standard"](n.name,m._html.input.resizable.selectClick(n.object[n.key],a,...n.args?n.args:[],a,n.icon),n.sub);default:return m._html.line["switch"==n.type?"switch":n.line||"standard"](n.name,m._html.input.resizable[n.type](n.object[n.key],a,...n.args?n.args:[]),n.sub)}}));return i?i(a,...n):a.join("\n")},_toolbar:{elem:document.getElementById("_toolbar"),show:function(){let t=[],i=[],o=[],l=[],c=[];for(let a in r.prefabs)r.prefabs[a].localOnly&&n.isProd||r.prefabs[a].custom||r.prefabs[a].noExport||""!=r.prefabs[a].name&&("lights"==r.prefabs[a].edCat?o:r.prefabs[a].zone?c:r.prefabs[a].tool||r.prefabs[a].tool2?i:r.prefabs[a].gen?t:l).push({name:s.formatConstName(r.prefabs[a].name),type:"toolbar",pos:"option",onClick:function(t,i){i&&i.shiftKey?e.reuseSelected(a):e.createObjects[a]()}});var d=new a({type:"toolbar",pos:"root"}),h=d.addFolder("File");h.addOption("Import Project",(function(){window.event.shiftKey?e.loadFile("importMap"):e.importMapPopup()})),e.dev&&h.addOption("Import Old Project",(function(){e.importOldMap()})),h.addOption("New Project",(function(){confirm("Are you sure you want to reset the map?")&&e.clearMap()})),h.addOption("Save Project",(()=>e.save())),h.addOption("Load Backup",(()=>showWindow(15))),h.addRule(),h.addOption("Export",(function(){window.event.shiftKey&&e.copyToClipboard(e.getMapExport()),e.exportMap()})),h.addOption("Copy Export",(()=>s.copyToClipboard(e.getMapExport()))),h.addRule(),h.addOption("Export GLTF",(()=>e.exportScene())),h.addOption("Export MTL",(()=>e.exportScene2()));var u=d.addFolder("Edit");u.addOption("Undo (Ctrl + Z)",(()=>e.executeHistory("undo"))),u.addOption("Redo (Ctrl + Y)",(()=>e.executeHistory("redo"))),u.addRule(),u.addOption("Delete (Del)",(function(){e.objectSelected(!0)?e.removeGroup():e.removeObject()})),u.addOption("Duplicate (Shift + R)",(function(){e.objectSelected(!0)?e.duplicateGroup():e.duplicateObject()})),u.addRule(),u.addOption("Settings...",(()=>showWindow(3)));var p=d.addFolder("Object");p.addOption("Scene Graph",(()=>m.panel.right.objectList.show())),p.addRule(),p.addFolder("Basic",l,"menu"),p.addFolder("Models",t,"menu","chunktoolbar"),p.addFolder("Tools",i,"menu","chunktoolbar"),p.addFolder("Lights",o,"menu"),p.addFolder("Zones",c,"menu"),p.addRule(),p.addOption("Placeholder",(()=>e.createPlaceholder()));var f=p.addFolder("Group",null,"menu");f.addOption("Create",(()=>e.advancedOptions.create())),f.addOption("Stop",(()=>e.advancedOptions.stop())),f.addOption("Stop All",(()=>e.advancedOptions.stopAll())),f.addRule(),f.addOption("Copy",(()=>e.advancedOptions.copy())),f.addOption("Cut",(()=>e.advancedOptions.cut())),f.addOption("Paste",(()=>e.advancedOptions.paste())),f.addRule();var g=f.addFolder("Prefab",null,"menu"),v=g.addFolder("Import",null,"menu");v.addOption("JSON",(()=>e.advancedOptions.json())),v.addOption("File",(()=>e.advancedOptions.file())),g.addOption("Export",(()=>e.advancedOptions.exportObj())),g.addOption("Tools",(()=>m.panel.right.prefab.show())),p.addRule(),p.addOption("Custom...",(()=>e.createObjects[44]()));var y=d.addFolder("Components");y.addOption("Environment",(()=>m.panel.right.environment.show())),y.addOption("Terrain",(()=>m.panel.right.terrain.show())),y.addOption("Zone",(()=>m.panel.right.zone.show())),y.addOption("Ocean",(()=>m.panel.right.ocean.show())),y.addOption("GUI",(()=>m.panel.right.gui.show())),d.addOption("Scripting",(()=>KE.scriptPopup()));var b=d.addFolder("Game");b.addOption("Test Game",(()=>e.testMap())),b.addOption("Host Game",(()=>e.testMap(!0))),b.addRule(),b.addOption("Quick Start",(()=>e.quickStart())),b.addOption("Templates",(()=>e.showTempls())),b.addRule(),b.addOption("Tools",(()=>m.panel.right.tools.show()));var w=d.addFolder("Publish");w.addOption("Game",(()=>e.publishMap())),w.addOption("Asset",(()=>e.publishAssetPopup())),w.addRule(),w.addOption("Publishing Guide",(()=>showWindow(11)));var x=d.addFolder("Account");e.autoLog&&!e.account?x.addOption("Logging in...",(()=>{})):e.account?(x.addOption("Username: "+e.account.name,(()=>{})),x.addOption("My Games",(()=>showWindow(14))),x.addOption("My Assets",(()=>e.myAssets()))):x.addOption("Login",(()=>loginPopup()));var S=d.addFolder("Help");S.addOption("Controls",(()=>showWindow(1))),S.addOption("Guide",(()=>showWindow(8))),d.addOption("Documentation",(()=>window.open("//docs.krunker.io","_blank"))),this.blueprint=d.toJSON(),this.elem.innerHTML=m._build([...this.objKeys,"blueprint"])}},panel:{state:{lock:function(e,t){let i=e.children[0].children[0],n=i.innerHTML.includes("open");i.innerHTML="lock"+(n?"":"_open"),m.panel[t].locked=n},setActive:function(e){m.panel[e[1]].elem.id=e.join("_")},isActive:function(e){return m.panel[e[1]].elem.id==e.join("_")},refresh:function(e){if(!document.getElementById(e))return;let t=m;e.split("_").forEach((e=>t=t[e])),t.show&&t.show()},refreshAll:function(){return s.getObjKeys(m.panel,["state","blueprint","objKeys","folderStore","show","elem","restore"]).forEach((e=>{m.panel.state.refresh("panel_"+e.replace(/\|/g,"_"))}))}},left:{elem:document.getElementsByClassName("panel")[0].children[1],restore:document.getElementsByClassName("restore")[0],essential:{show:function(){if(e.resizable.restore(m.panel.left.restore),m.panel.left.locked&&!m.panel.state.isActive(this.objKeys))return;let t={},i=[];for(var s=0;s<d.length;s++)!(p=d[s]).cost&&(!p.preventCustomGames||e.account&&e.account.isDev)&&(null==e.serverConfig.modes[s]&&(e.serverConfig.modes[s]=!s),i.push({name:p.name+" [ID: "+s+"]",object:e.serverConfig.modes,key:s,type:"switch",sub:1}));let r=[];for(s=0;s<l.length;s++)(p=l[s]).cost||(null==e.serverConfig.classes[s]&&(e.serverConfig.classes[s]=!0),r.push({name:p.name+" [ID: "+s+"]",object:e.serverConfig.classes,key:s,type:"switch",sub:1}));let h=[];t={};for(s=0;s<n.serverConfig.length;s++)if(!(p=n.serverConfig[s]).cost&&!p.hideE){null==e.serverConfig.settings[p.varN]&&(e.serverConfig.settings[p.varN]=p.def);var u=h;p.sub&&(t[p.sub]||(t[p.sub]={name:p.sub,type:"folder",size:"small",children:[],closed:!0},u.push(t[p.sub])),u=t[p.sub].children),p.bool?u.push({name:p.name,object:e.serverConfig.settings,key:p.varN,type:"switch",sub:1}):p.input?u.push({name:p.name,object:e.serverConfig.settings,key:p.varN,type:"text",sub:1}):p.select?u.push({name:p.name,object:e.serverConfig.settings,key:p.varN,type:"select",args:[p.options.map(((e,t)=>({name:e,value:t})))],sub:1}):u.push({name:p.name,object:e.serverConfig.settings,key:p.varN,type:"slider",args:[p.min,p.maxF||p.maxP||p.max,p.step],sub:1})}for(s=0;s<h.length;++s)h[s].children&&(h[s].children.unshift({type:"rule"}),h[s].children.push({type:"rule"}));let g=[];for(var v=0;v<o.length;v++){p=o[v],null==e.serverConfig.weps[v]&&(e.serverConfig.weps[v]={}),g["w"+v]={name:(e.serverConfig.weps[v].name||p.name)+" [ID: "+v+"]",type:"folder",size:"small",children:[],closed:!0};for(s=0;s<n.weaponConfig.length;s++)f=n.weaponConfig[s],null!=o[v][f.varN]&&(null==e.serverConfig.weps[v][f.varN]&&(e.serverConfig.weps[v][f.varN]=o[v][f.varN]),"name"==f.varN?g["w"+v].children.push({id:v,name:f.name,object:e.serverConfig.weps[v],key:f.varN,type:"text",onChange:function(){delayTimer("WepName"+this.id,(function(){m.panel.state.refresh("panel_left_essential")}),1e3)},sub:1}):"pj_asset"==f.varN?(g["w"+v].children.push({name:f.name+" ID",object:e.serverConfig.weps[v],key:f.varN,type:"text",args:["ID"],sub:1}),g["w"+v].children.push({id:v,line:"wide",object:e,key:"selectWeaponAsset",type:"button",args:["Select Asset"],sub:1})):"assetIcon"==f.varN?(g["w"+v].children.push({name:f.name+" ID",object:e.serverConfig.weps[v],key:f.varN,type:"text",args:["ID"],sub:1}),g["w"+v].children.push({id:v,line:"wide",object:e,key:"selectWeaponIcon",type:"button",args:["Select Icon"],sub:1})):f.bool?g["w"+v].children.push({name:f.name,object:e.serverConfig.weps[v],key:f.varN,type:"switch",sub:1}):f.input?g["w"+v].children.push({name:f.name,object:e.serverConfig.weps[v],key:f.varN,type:"text",sub:1}):g["w"+v].children.push({name:f.name,object:e.serverConfig.weps[v],key:f.varN,type:"slider",args:[f.min,f.max,f.step],sub:1}))}let y=[];for(v=0;v<l.length;v++){p=l[v],null==e.serverConfig.cls[v]&&(e.serverConfig.cls[v]={}),y["c"+v]={name:e.serverConfig.cls[v].name||p.name,type:"folder",size:"small",children:[],closed:!0},y["c"+v].children.push({id:v,line:"wide",object:e,key:"copyPlayerConfig",type:"button",args:["Copy to All Classes"],sub:1}),y["c"+v].children.push({id:v,line:"wide",object:e,key:"resetPlayerConfig",type:"button",args:["Reset"],sub:1}),t={};for(s=0;s<n.classConfig.length;s++)if(f=n.classConfig[s],null!=l[v][f.varN]){null==e.serverConfig.cls[v][f.varN]&&(e.serverConfig.cls[v][f.varN]=l[v][f.varN]);u=y["c"+v].children;f.sub&&(t[f.sub]||(t[f.sub]={name:f.sub,type:"folder",size:"smaller",children:[],closed:!0},u.push(t[f.sub]),t[f.sub].children.push({id:v,cat:f.sub,line:"wide",object:e,key:"copyPlayerConfigCat",type:"button",args:["Copy "+f.sub+" to All Classes"],sub:1})),u=t[f.sub].children),"name"==f.varN?u.push({id:v,name:f.name,object:e.serverConfig.cls[v],key:f.varN,type:"text",onChange:function(){delayTimer("ClassName"+this.id,(function(){m.panel.state.refresh("panel_left_essential")}),1e3)},sub:1}):"aID"==f.varN?(u.push({name:f.name+" ID",object:e.serverConfig.cls[v],key:f.varN,type:"text",args:["ID"],sub:1}),u.push({id:v,line:"wide",object:e,key:"selectPlayerType",type:"button",args:["Select Asset"],sub:1})):"cID"==f.varN?(u.push({name:f.name+" ID",object:e.serverConfig.cls[v],key:f.varN,type:"text",args:["ID"],sub:1}),u.push({id:v,line:"wide",object:e,key:"selectCrosshair",type:"button",args:["Select Asset"],sub:1})):"ccID"==f.varN?(u.push({name:f.name+" ID",object:e.serverConfig.cls[v],key:f.varN,type:"text",args:["ID"],sub:1}),u.push({id:v,line:"wide",object:e,key:"selectCrosshairC",type:"button",args:["Select Asset"],sub:1})):f.bool?u.push({name:f.name,object:e.serverConfig.cls[v],key:f.varN,type:"switch",sub:1}):f.input?u.push({name:f.name,object:e.serverConfig.cls[v],key:f.varN,type:"text",sub:1}):f.select?u.push({name:f.name,object:e.serverConfig.cls[v],key:f.varN,type:"select",args:[f.options.map(((e,t)=>({name:e,value:t})))],sub:1}):u.push({name:f.name,object:e.serverConfig.cls[v],key:f.varN,type:"slider",args:[f.min,f.maxF||f.maxP||f.max,f.step],sub:1})}}for(v=0;v<l.length;v++)y["c"+v].children&&(y["c"+v].children.unshift({type:"rule"}),y["c"+v].children.push({type:"rule"}));let b=[];for(v=0;v<c.length;v++){p=c[v],null==e.serverConfig.prks[v]&&(e.serverConfig.prks[v]={}),b["p"+v]={name:e.serverConfig.prks[v].name||p.name,type:"folder",size:"small",children:[],closed:!0},b["p"+v].children.push({id:v,line:"wide",object:e,key:"resetEffectConfig",type:"button",args:["Reset"],sub:1}),t={};for(s=0;s<n.effectConfig.length;s++)if(f=n.effectConfig[s],null!=c[v][f.varN]){null==e.serverConfig.prks[v][f.varN]&&(e.serverConfig.prks[v][f.varN]=c[v][f.varN]);u=b["p"+v].children;f.sub&&(t[f.sub]||(t[f.sub]={name:f.sub,type:"folder",size:"smaller",children:[],closed:!0},u.push(t[f.sub])),u=t[f.sub].children),"name"==f.varN?u.push({id:v,name:f.name,object:e.serverConfig.prks[v],key:f.varN,type:"text",onChange:function(){delayTimer("EffectName"+this.id,(function(){m.panel.state.refresh("panel_left_essential")}),1e3)},sub:1}):f.bool?u.push({name:f.name,object:e.serverConfig.prks[v],key:f.varN,type:"switch",sub:1}):f.input?u.push({name:f.name,object:e.serverConfig.prks[v],key:f.varN,type:"text",sub:1}):f.select?u.push({name:f.name,object:e.serverConfig.prks[v],key:f.varN,type:"select",args:[f.options.map(((e,t)=>({name:e,value:t})))],sub:1}):u.push({name:f.name,object:e.serverConfig.prks[v],key:f.varN,type:"slider",args:[f.min,f.maxF||f.maxP||f.max,f.step],sub:1})}}for(v=0;v<c.length;v++)b["p"+v].children&&(b["p"+v].children.unshift({type:"rule"}),b["p"+v].children.push({type:"rule"}));var w=new a({type:"folder",size:"standard"});w.addPanelButton("Essential","left"),w.add("text","Name",e.mapConfig,"name","Name"),w.add("text","Welcome Msg",e.mapConfig,"welMsg","Welcome"),w.add("text","Mod URL",e.mapConfig,"modURL","Mod URL"),w.add("button",null,e.advancedOptions,"selectMod","Select Mod",null,!0),w.add("slider","Death Height",e.mapConfig,"dthY",[-1e3,3e3,1],(function(t,i){e.mapConfig.dthY=i,e.updateDeathBarrier()})),w.add("switch","Force Old AO",e.mapConfig,"oldAO",null),w.add("text","Minimap AssetId",e.mapConfig,"mmId",null),w.addRule(),w.addFolder("Game Modes",i,null,"folder","standard",!0),w.addFolder("Server Preset",h,null,"folder","standard",!0),w.addFolder("Weapon Config",g,null,"folder","standard",!0),w.addFolder("Classes",r,null,"folder","standard",!0),w.addFolder("Class Config",y,null,"folder","standard",!0),w.addFolder("Effect Config",b,null,"folder","standard",!0),this.blueprint=w.toJSON(),m.panel.state.setActive(this.objKeys),m.panel.left.elem.innerHTML=m._build([...this.objKeys,"blueprint"])}}},right:{elem:document.getElementsByClassName("panel")[1].children[1],restore:document.getElementsByClassName("restore")[1],blank:{show:function(){m.panel.right.locked&&!m.panel.state.isActive(this.objKeys)||(this.blueprint={panelButtons:{type:"panel_buttons",direction:"right",blank:!0}},m.panel.state.setActive(this.objKeys),m.panel.right.elem.innerHTML=m._build([...this.objKeys,"blueprint"]))}},object:{show:function(){if(m.panel.right.locked&&!m.panel.state.isActive(this.objKeys))return;this.blueprint={panelButtons:{type:"panel_buttons",direction:"right",label:"Object"}},m.panel.right.blank.show();let i=e.transformControl.object;if(!i)return;let a=i.userData.owner,r=Object.keys(e.objGroups).includes(a.boundingMesh.uuid);for(var l of(this.blueprint.panelButtons.label=r?"Group":a.name,e.configVal))e.objConfig[l]=a[l];let d={},u=e.objConfig;for(let t of e.stringifiedColors)Object.defineProperty(d,t,{get:()=>s.stringifyColor(u[t]),set:e=>u[t]=s.parseColor(e)});if(a.prefab.ai&&(this.blueprint.aiName={name:"AI Name",object:e.objConfig,key:"aiName",type:"text",args:["BOT"],onChange:function(e,t){a.aiName=t}}),a.prefab.bot&&(this.blueprint.botName={name:"Bot Name",object:e.objConfig,key:"botName",type:"text",args:["Gnomie"],onChange:function(e,t){a.botName=t}}),a.prefab.tool&&!a.prefab.bounce||(this.blueprint.visible={name:"Visible",object:e.objConfig,key:"visible",type:"switch",onChange:function(e,t){a.visible=t}}),a.prefab.tool||a.prefab.forceCollision||a.prefab.noCollision||(this.blueprint.collidable={name:"Collidable",object:e.objConfig,key:"collidable",type:"switch",onChange:function(t,i){e.objCount[e.cntCheck(a)]--,a.collidable=i,e.objCount[e.cntCheck(a)]++,e.warningCheck("objects"),e.updateObjectCount()}}),a.prefab.canComplexColl&&(this.blueprint.complexColl={name:"Complex Collisions",object:e.objConfig,key:"complexColl",type:"switch",onChange:function(e,t){a.complexColl=t}}),"TRIGGER"==a.prefab.name&&(this.blueprint.playerCollidable={name:"Player Collidable",object:e.objConfig,key:"playerCollidable",type:"switch",onChange:function(e,t){a.playerCollidable=t}}),a.prefab.editBulletCol&&(this.blueprint.bulletColl={name:"Bullet Collisions",object:e.objConfig,key:"bulletColl",type:"switch",onChange:function(e,t){a.bulletColl=t}}),a.prefab.editAICol&&(this.blueprint.aiColl={name:"AI Collisions",object:e.objConfig,key:"aiColl",type:"switch",onChange:function(e,t){a.aiColl=t}}),a.prefab.editPen&&(this.blueprint.penetrable={name:"Penetrable",object:e.objConfig,key:"penetrable",type:"slider",args:[0,1,.01],onChange:function(e,t){a.penetrable=t}}),a.prefab.canWallJump&&(this.blueprint.canWallJump={name:"Wall Jumpable",object:e.objConfig,key:"canWallJump",type:"switch",onChange:function(e,t){a.canWallJump=t}}),a.prefab.canGrapple&&(this.blueprint.canGrapple={name:"Can Grapple",object:e.objConfig,key:"canGrapple",type:"switch",onChange:function(e,t){a.canGrapple=t}}),a.prefab.canImpulse&&(this.blueprint.canImpulse={name:"Can Impulse",object:e.objConfig,key:"canImpulse",type:"switch",onChange:function(e,t){a.canImpulse=t}}),a.prefab.boostable&&(this.blueprint.boost={name:"Boost",object:e.objConfig,key:"boost",type:"slider",args:[-n.boostRange,n.boostRange,.01],onChange:function(e,t){a.boost=t}}),a.prefab.bounce&&(this.blueprint.bounce={name:"Bounce",object:e.objConfig,key:"bounce",type:"slider",args:[-3,3,.1],onChange:function(e,t){a.bounce=t}},this.blueprint.crouch={name:"Crouch Reduces",object:e.objConfig,key:"crouch",type:"switch",onChange:function(e,t){a.crouch=t}}),a.prefab.edgeNoise&&(this.blueprint.edgeNoise={name:"Edge Noise",object:e.objConfig,key:"edgeNoise",type:"slider",args:[-5,5,.1],onChange:function(e,t){a.edgeNoise=t}}),a.prefab.hasBorder&&(this.blueprint.border={name:"Border",object:e.objConfig,key:"border",type:"switch",onChange:function(e,t){a.border=t}}),a.prefab.showMinimap&&(this.blueprint.showMinimap={name:"Show On Minimap",object:e.objConfig,key:"showMinimap",type:"switch",onChange:function(e,t){a.showMinimap=t}}),"MAP_ANCHOR"==a.prefab.name&&(this.blueprint.anchorType={name:"Anchor Type",object:e.objConfig,key:"anchorType",type:"select",args:[[{name:"Corner",value:0},{name:"Center",value:1}]],onChange:function(e,t){a.anchorType=t}}),"KR_ZONE"==a.prefab.name&&(this.blueprint.minimum={name:"Minimum Amount",object:e.objConfig,key:"minimum",type:"slider",args:[0,1e7,100],onChange:function(e,t){a.minimum=t}}),(a.prefab.gen||a.prefab.hasSpin)&&(this.blueprint.spin={name:"Spin",object:e.objConfig,key:"spin",type:"slider",args:[-20,20,.1],onChange:function(e,t){a.spin=t}},(a.prefab.gen||a.prefab.hasSpinDir)&&(this.blueprint.spinAxis={name:"Spin Axis",object:e.objConfig,key:"spinAxis",type:"select",args:[[{name:"Y",value:0},{name:"X",value:1}]],onChange:function(e,t){a.defaultMesh&&a.defaultMesh.rotation.set(0,0,0),a.mesh&&a.mesh.rotation.set(0,0,0),a.spinAxis=parseInt(t)}})),"CYLINDER"==a.prefab.name&&(this.blueprint.openEnded={name:"Open Ended",object:e.objConfig,key:"openEnded",type:"switch",onChange:function(e,t){a.openEnded=t,a.regen()}},this.blueprint.radiusTop={name:"Radius Top",object:e.objConfig,key:"radiusTop",type:"slider",args:[0,1,.01],onChange:function(e,t){a.radiusTop=t,a.regen()}},this.blueprint.radiusBottom={name:"Radius Bottom",object:e.objConfig,key:"radiusBottom",type:"slider",args:[0,1,.01],onChange:function(e,t){a.radiusBottom=t,a.regen()}}),"LIGHT_CONE"!=a.prefab.name&&"CYLINDER"!=a.prefab.name||(this.blueprint.sides={name:"Sides",object:e.objConfig,key:"sides",type:"slider",args:[3,64,1],onChange:function(e,t){a.sides=t,a.regen()}}),"CYLINDER"==a.prefab.name&&(this.blueprint.thetaStart={name:"Theta Start",object:e.objConfig,key:"thetaStart",type:"slider",args:["CYLINDER"==a.prefab.name?0:1,360,.1],onChange:function(e,t){a.thetaStart=t,a.regen()}}),"LIGHT_CONE"!=a.prefab.name&&"CYLINDER"!=a.prefab.name||(this.blueprint.thetaLength={name:"Theta Length",object:e.objConfig,key:"thetaLength",type:"slider",args:[.1,360,.1],onChange:function(e,t){a.thetaLength=t,a.regen()}}),"LEADERBOARD"==a.prefab.name&&(this.blueprint.leaderType={name:"Leader Type",object:e.objConfig,key:"leaderType",type:"select",args:[[{name:"Score",value:0},{name:"Time",value:1}]],onChange:function(e,t){a.leaderType=t}},this.blueprint.leaderTypeCust={name:"Leader Type Custom",object:e.objConfig,key:"leaderTypeCust",type:"text",args:[""],onChange:function(e,t){a.leaderTypeCust=t}},this.blueprint.leaderOrder={name:"Leader Order",object:e.objConfig,key:"leaderOrder",type:"select",args:[[{name:"ASC",value:0},{name:"DESC",value:1}]],onChange:function(e,t){a.leaderOrder=t}},this.blueprint.leaderResults={name:"Leader Results",object:e.objConfig,key:"leaderResults",type:"slider",args:[1,50,1],onChange:function(e,t){a.leaderResults=t,a.regen(!0)}}),a.prefab.customDirection&&(this.blueprint.direction={name:"Direction",object:e.objConfig,key:"direction",type:"slider",args:[0,a.prefab.extraDirection?7:a.prefab.altDirection?5:3,1],onChange:function(e,t){a.direction=t}}),a.prefab.optionalDirection&&(this.blueprint.forceDir={name:"Force Direction",object:e.objConfig,key:"forceDir",type:"switch",onChange:function(e,t){a.forceDir=t}}),a.prefab.teamable){var p=Array((a.prefab.noDefault?1:0)+n.teamLimit).fill(0).map(((e,t)=>({name:a.prefab.noDefault?n.teamNames[t]:0==t?"Default":n.teamNames[t-1],value:t})));a.prefab.canNeutral&&p.push({name:"Neutral",value:-1}),this.blueprint.teamable={name:"Team",object:e.objConfig,key:"team",type:"select",args:[p],onChange:function(e,t){a.team=t,"SPAWN_POINT"!=a.objType&&"FLAG"!=a.objType||a.regen()}}}if("SERVER_NODE"==a.objType&&(this.blueprint.nodeTag={name:"Tag",object:e.objConfig,key:"nodeTag",type:"text",args:[""],onChange:function(e,t){a.nodeTag=t}},this.blueprint.spread={name:"Max Spread",object:e.objConfig,key:"spread",type:"slider",args:[0,50,.1],onChange:function(e,t){a.spread=t,a.regen()}}),"RAMP"==a.prefab.name&&(this.blueprint.enclose={name:"Enclose",object:e.objConfig,key:"enclose",type:"switch",onChange:function(e,t){a.enclose=t,a.regen()}}),"CAMERA_POSITION"==a.prefab.name&&(this.blueprint.static={name:"Static Cam",object:e.objConfig,key:"static",type:"switch",onChange:function(e,t){a.static=t}}),"PATH_NODE"==a.prefab.name&&(this.blueprint.nodeId={name:"Node Id",object:e.objConfig,key:"nodeId",type:"slider",args:[0,1e3,1],onChange:function(e,t){a.nodeId=t}}),"BOT_PATH_NODE"==a.prefab.name&&(this.blueprint.botNodeGroup={name:"GroupId",object:e.objConfig,key:"botNodeGroup",type:"slider",args:[0,1e3,1],onChange:function(t,i){var n=i!=a.botNodeGroup;a.botNodeGroup=i,n&&e.checkConnections()}},this.blueprint.botNode={name:"NodeId",object:e.objConfig,key:"botNode",type:"slider",args:[0,1e3,1],onChange:function(t,i){var n=i!=a.botNode;a.botNode=i,n&&e.checkConnections()}},this.blueprint.botNodeNext={name:"Next NodeId",object:e.objConfig,key:"botNodeNext",type:"slider",args:[0,1e3,1],onChange:function(t,i){var n=i!=a.botNodeNext;a.botNodeNext=i,n&&e.checkConnections()}},0==a.botNode&&(this.blueprint.botNodeRev={name:"Reversible",object:e.objConfig,key:"botNodeRev",type:"switch",onChange:function(t,i){var n=i!=a.botNodeRev;a.botNodeRev=i,n&&e.checkConnections()}}),this.blueprint.botNodeCorrection={line:"wide",object:e.advancedOptions,key:"botNodeCorrection",type:"button",args:["Fix Node"]},this.blueprint.createNextNode={line:"wide",object:e.advancedOptions,key:"createNextNode",type:"button",args:["Create Next Node"]},this.blueprint.createNextGroup={line:"wide",object:e.advancedOptions,key:"createNextGroup",type:"button",args:["Create Next Group"]}),"PRIZE_WHEEL"==a.prefab.name&&(this.blueprint.stype={name:"Spin Type",object:e.objConfig,key:"stype",type:"select",args:[[{name:"Starter",value:0},{name:"Elite",value:1},{name:"Heroic",value:2}]],onChange:function(e,t){a.stype=t}}),a.prefab.gen&&(this.blueprint.mSize={name:"Model Scale",object:e.objConfig,key:"mSize",type:"slider",args:[.01,100,.01],onChange:function(e,t){a.mSize=t,a.updateMeshScale()}},a.prefab.ai&&(this.blueprint.mYOff={name:"Model Y Offset",object:e.objConfig,key:"mYOff",type:"slider",args:[-100,100,.1],onChange:function(e,t){a.mYOff=t,a.regenM()}},this.blueprint.mROff={name:"Model Direction",object:e.objConfig,key:"mROff",type:"slider",args:[0,360,1],onChange:function(e,t){a.mROff=t,a.regenM()}})),a.prefab.sprayTexture&&(this.blueprint.sprayTexture={name:"Spray",object:e.objConfig,key:"sprayTexture",type:"selectClick",line:"nodiv",args:[e.sprayList],onChange:function(t,i){a.sprayTexture=i,e.updateObjConfigGUI()},icon:"dashboard_customize",onClick:()=>e.viewTextureList(),sub:1}),"SHOWCASE"==a.prefab.name&&(this.blueprint.itemID={name:"Item",object:e.objConfig,key:"itemID",type:"selectClick",line:"nodiv",args:[Object.keys(e.skinList).map((t=>({name:t,value:e.skinList[t]})))],onChange:function(e,t){a.itemID=t,a.regenM()},icon:"dashboard_customize",onClick:()=>e.viewTextureList()}),a.prefab.canSetObjective&&(this.blueprint.objectiveId={name:"Objective Id",object:e.objConfig,key:"objectiveId",type:"slider",args:[0,10,1],onChange:function(e,t){a.objectiveId=t}}),"CAMERA"==a.prefab.name&&(this.blueprint.camType={name:"Camera Type",object:e.objConfig,key:"camType",type:"select",args:[n.cameraTypes.map(((e,t)=>({name:e,value:t})))],onChange:function(e,t){a.camType=t,m.panel.state.refresh("panel_right_object")}},0==a.camType?this.blueprint.objectiveLink={name:"Objective Link",object:e.objConfig,key:"objectiveLink",type:"slider",args:[-1,10,1],onChange:function(e,t){a.objectiveLink=t}}:1==a.camType&&(this.blueprint.forceCam={name:"Force Player Cam",object:e.objConfig,key:"forceCam",type:"switch",onChange:function(e,t){a.forceCam=t}},this.blueprint.followPath={name:"Follow Path",object:e.objConfig,key:"followPath",type:"text",args:["id,id,id"],onChange:function(e,t){a.followPath=t}})),a.prefab.stepSrc&&(this.blueprint.stepSrc={name:"Step Sound",object:e.objConfig,key:"stepSrc",type:"select",args:[Object.keys(e.stepsList).map((t=>({name:t,value:e.stepsList[t]})))],onChange:function(e,t){a.stepSrc=t}}),this.blueprint.rule={type:"rule"},this.blueprint.transform={name:"Transform",type:"folder",size:"standard",children:{position:{name:"Position",object:e.objConfig,key:"pos",type:"vector3",round:2,onChange:function(e,t){a.pos=t}}},closed:!r},a.prefab.noRotation||(this.blueprint.transform.children.rotation={name:"Rotation",object:e.objConfig,key:"rot",type:"vector3",round:2,onChange:function(t,i){a.rot=e.degToRad(i)}}),a.prefab.scalable&&!a.assetID&&(this.blueprint.transform.children.size={name:"Size",object:e.objConfig,key:"size",type:"vector3",min:0,round:2,onChange:function(e,t){a.prefab.noScaleX&&(t[0]=a.prefab.defaultSize[0]),a.prefab.noScaleY&&(t[1]=a.prefab.defaultSize[1]),a.size=t}}),r&&(this.blueprint.transform.children.reflect={name:"Reflect",type:"folder",size:"small",children:{direction:{name:"Direction",object:e.advancedOptions,key:"groupReflectDir",type:"select",args:[[{name:"X",value:0},{name:"Y",value:1},{name:"Z",value:2}]],sub:1},execute:{line:"wide",object:e.advancedOptions,key:"groupReflect",type:"button",args:["Execute"]}}}),!a.prefab.notStyleable){let t={};r&&(t.tex={name:"Texture",object:e.advancedOptions,key:"texture",type:"select",args:[e.textureList],onChange:function(t,i){e.editGroup("texture",i)}},t.color={name:"Color",object:e.advancedOptions,key:"editColor",type:"button",args:["Open"]}),(a.prefab.texturable||a.prefab.movingTexture||a.prefab.frameTexture)&&!a.prefab.sprayTexture&&(t.texture={name:"Texture",type:"folder",size:"small",children:{},closed:!0}),(a.prefab.ai||"CUSTOM_ASSET"==a.prefab.name||"TRIGGER"==a.prefab.name)&&(t.assetID={name:"Asset ID",object:e.objConfig,key:"assetID",type:"text",args:["ID"],onChange:function(e,t){a.assetID=t,a.regenM()},sub:1},t.customSelect={line:"wide",object:e.advancedOptions,key:"selectModel",type:"button",args:["Select Custom"]}),a.prefab.texturable&&!a.prefab.sprayTexture&&(t.texture.children.type={name:"Type",object:e.objConfig,key:"texture",type:"selectClick",line:"nodiv",args:[e.textureList],onChange:function(t,i){a.assetTexture=0,a.texture=i,e.updateObjConfigGUI()},icon:"dashboard_customize",onClick:()=>e.viewTextureList(),sub:1},a.texturePrefab&&a.texturePrefab.variants&&(t.texture.children.texVar={name:"Variant",object:e.objConfig,key:"texVar",type:"select",args:[a.texturePrefab.variants.map(((e,t)=>({name:e.name,value:t})))],onChange:function(e,t){a.texVar=parseInt(t),a.texture=a.texture},sub:1}),a.prefab.assetTextures&&(t.texture.children.custom={name:"Asset ID",object:e.objConfig,key:"assetTexture",type:"text",args:["Texture Asset ID",0],onChange:function(e,t){a.assetTexture=t},sub:1},t.texture.children.customSelect={line:"wide",object:e.advancedOptions,key:"selectTexture",type:"button",args:["Select Custom"]}),a.prefab.canStretch&&(t.texture.children.stretch={name:"Stretch",object:e.objConfig,key:"texStretch",type:"switch",onChange:function(e,t){a.texStretch=t,a.regen()},sub:1},t.texture.children.scale={name:"Scale",object:e.objConfig,key:"texScale",type:"slider",args:[0,10,.01],onChange:function(e,t){a.texScale=t,a.regen()},sub:1})),(a.prefab.texturable&&!a.prefab.sprayTexture||"AI_SPAWNER"==a.prefab.name)&&a.prefab.canTrans&&(t.texture.children.forceTrans={name:"Force Transparency",object:e.objConfig,key:"forceTrans",type:"switch",onChange:function(e,t){a.forceTrans=t},sub:1}),a.prefab.texturable&&!a.prefab.sprayTexture&&(t.texture.children.rotation={name:"Rotation",object:e.objConfig,key:"texRot",type:"slider",args:[0,360,1],onChange:function(e,t){a.texRot=t},sub:1},t.texture.children.offset={name:"Offset",type:"folder",closed:!0,size:"small",children:{x:{name:"X",object:e.objConfig,key:"texOffX",type:"slider",args:[0,1,.01],onChange:function(e,t){a.texOffX=t},sub:2},y:{name:"Y",object:e.objConfig,key:"texOffY",type:"slider",args:[0,1,.01],onChange:function(e,t){a.texOffY=t},sub:2}},sub:1}),a.prefab.movingTexture&&(t.texture.children.movement={name:"Movement",type:"folder",closed:!0,size:"small",children:{speed:{name:"Speed",object:e.objConfig,key:"movingSpeed",type:"slider",args:[-20,20,.1],onChange:function(e,t){a.movingSpeed=t},sub:2},axis:{name:"Axis",object:e.objConfig,key:"movingAxis",type:"select",args:[[{name:"X",value:0},{name:"Y",value:1}]],onChange:function(e,t){a.movingAxis=t},sub:2}},sub:1}),a.prefab.frameTexture&&(t.texture.children.frame={name:"Frame Animation",type:"folder",closed:!0,size:"small",children:{frames:{name:"Frame Count",object:e.objConfig,key:"frameCount",type:"slider",args:[0,100,1],onChange:function(e,t){a.frameCount=t,a.frameCur=0,a.frameDur=100*a.frameSpeed,a.frameNumX=Math.min(10,a.frameCount),a.frameNumY=a.frameCount>10?Math.ceil(a.frameCount/10):0,a.regen(!0)},sub:2},frameT:{name:"Frame Speed",object:e.objConfig,key:"frameSpeed",type:"slider",args:[0,10,.1],onChange:function(e,t){a.frameSpeed=t,a.frameDur=100*a.frameSpeed,a.frameCur=0},sub:2}},sub:1}),t.texture&&(t.texture.children.rule={type:"rule"}),a.prefab.variants&&(t.texVar={name:"Variant",object:e.objConfig,key:"texVar",type:"selectClick",line:"nodiv",args:[a.prefab.variants.map(((e,t)=>({name:e.name,value:t})))],onChange:function(e,t){a.texVar=parseInt(t),a.regenM()},icon:"dashboard_customize",onClick:()=>e.viewModelList()}),a.prefab.sprayTexture||(t.texEncode={name:"Encoding",object:e.objConfig,key:"texEncode",type:"select",args:[n.encodingTypes.map(((e,t)=>({name:e.name,value:t})))],onChange:function(e,t){a.texEncode=t}}),a.prefab.editColor&&(t.color={name:"Color",object:d,key:"color",type:"color",onChange:function(e,t){a.color=t}}),a.prefab.editEmissive&&(t.emissive={name:"Emissive",object:d,key:"emissive",type:"color",onChange:function(e,t){a.emissive=t}}),a.prefab.editOpac&&(t.opacity={name:"Opacity",object:e.objConfig,key:"opacity",type:"slider",args:[0,1,.1],onChange:function(e,t){a.opacity=t}}),(a.prefab.custom||"TRIGGER"==a.prefab.name||"AI_SPAWNER"==a.prefab.name)&&(t.texSmooth={name:"Texture Smoothing",object:e.objConfig,key:"texSmooth",type:"switch",onChange:function(e,t){a.texSmooth=t}}),a.prefab.complex||a.prefab.tool||(t.shading={name:"Shading",object:e.objConfig,key:"ambient",type:"switch",onChange:function(e,t){a.ambient=t}}),a.prefab.editFog&&(t.fog={name:"Fog",object:e.objConfig,key:"fog",type:"switch",onChange:function(e,t){a.fog=t}}),"CUSTOM_ASSET"!=a.prefab.name&&"TRIGGER"!=a.prefab.name||(t.cast={name:"Cast Shadows",object:e.objConfig,key:"cast",type:"switch",onChange:function(e,t){a.cast=t}},t.receive={name:"Receive Shadows",object:e.objConfig,key:"receive",type:"switch",onChange:function(e,t){a.receive=t}},t.forceRender={name:"Force Render",object:e.objConfig,key:"forceRender",type:"switch",onChange:function(e,t){a.forceRender=t}}),a.prefab.editAlphaTest&&(t.alphaTest={name:"AlphaTest",object:e.objConfig,key:"alphaTest",type:"slider",args:[0,1,.01],onChange:function(e,t){a.alphaTest=t,a.regenM()}}),a.prefab.editRenderSide&&(t.renderSide={name:"Render Side",object:e.objConfig,key:"renderSide",type:"select",args:[[{name:"Game Default",value:-1},{name:"Front",value:0},{name:"Back",value:1},{name:"Double",value:2}]],onChange:function(e,t){a.renderSide=t}}),"AI_SPAWNER"==a.prefab.name&&(t.bobD={name:"Bob Distance",object:e.objConfig,key:"bobD",type:"slider",args:[0,10,.01],onChange:function(e,t){a.bobD=t}},t.bobS={name:"Bob Speed",object:e.objConfig,key:"bobS",type:"slider",args:[0,10,.01],onChange:function(e,t){a.bobS=t}}),"LIGHT_CONE"==a.objType&&(t.lightCone={name:"Full Cone",object:e.objConfig,key:"fullcone",type:"switch",onChange:function(e,t){a.fullcone=t,a.regen(!0)}}),a.prefab.canSprite&&(t.mimicSprite={name:"Mimic Sprite",object:e.objConfig,key:"mimicSprite",type:"switch",onChange:function(e,t){a.mimicSprite=t}}),Object.keys(t).length&&(this.blueprint.style={name:"Style",closed:!r,type:"folder",size:"standard",children:t})}if(!a.prefab.notTechnical){let i={};if(r){let n=[],s=Object.getOwnPropertyDescriptors(t.prototype);for(let e in s)s[e].set&&n.push(e);i.key={name:"Key",object:e.advancedOptions,key:"editCustomKey",type:"select",args:[n.map((e=>({name:e,value:e})))],onChange:function(){}},i.execute={line:"wide",object:e.advancedOptions,key:"editCustomExec",type:"button",args:["Execute"]}}if("DEPOSIT_BOX"==a.objType&&(i={withdraw:{name:"Withdraw Amount",object:e.objConfig,key:"withdraw",type:"slider",args:[0,1e5,1],onChange:function(e,t){a.withdraw=t}},deposit:{name:"Deposit Amount",object:e.objConfig,key:"deposit",type:"slider",args:[0,1e5,1],onChange:function(e,t){a.deposit=t}}}),a.prefab.customScore){var f=a.prefab.mysteryBox||a.prefab.perkMachine||a.prefab.packapunch,g=f?5e4:1e4;i.customScore={name:f?"Cost":a.prefab.interact?"Amount":"Score",object:e.objConfig,key:"score",type:"slider",args:[a.prefab.interact||a.prefab.ai?0:1,g,1],onChange:function(e,t){a.score=t}}}if(a.prefab.perkMachine&&(i.perk={name:"Perk Type",object:e.objConfig,key:"perk",type:"select",args:[n.zombiePerks.map(((e,t)=>({name:e,value:t})))],onChange:function(e,t){a.perk=t,a.regen()}}),("CHECK_POINT"==a.objType||"TRIGGER"==a.objType||a.prefab.ai)&&(i.singleUse={name:"Single Use",object:e.objConfig,key:"single",type:"switch",onChange:function(e,t){a.single=t}}),"TRIGGER"==a.objType&&(i.singleUseP={name:"Once Per Player",object:e.objConfig,key:"singleP",type:"switch",onChange:function(e,t){a.singleP=t}}),a.prefab.interact&&(a.prefab.interact&&(i.method={name:"Method",object:e.objConfig,key:"method",type:"select",args:[[{name:"Cost Score",value:0},{name:"Require Score",value:1},{name:"Require Kills",value:2},{name:"Requires Account",value:3},{name:"Requires Verified",value:4},{name:"Requires Premium",value:5},{name:"Requires Partner",value:6},{name:"Requires Level",value:7}]],onChange:function(e,t){a.method=t}},a.prefab.canUndo&&(i.closeable={name:"Closeable",object:e.objConfig,key:"closeable",type:"switch",onChange:function(e,t){a.closeable=t}},i.startsClosed={name:"Starts Hidden",object:e.objConfig,key:"startClosed",type:"switch",onChange:function(e,t){a.startClosed=t}})),i.hidden={name:"No Popup",object:e.objConfig,key:"hidden",type:"switch",onChange:function(e,t){a.hidden=t}}),(a.prefab.interactMsg||"TRIGGER"==a.objType&&h.events[a.event]&&("onInteractKey"==h.events[a.event].name||"onHoldMouse"==h.events[a.event].name))&&(i.interactM={name:"Custom Message",object:e.objConfig,key:"interactM",type:"text",args:[""],onChange:function(e,t){a.interactM=t}}),a.prefab.hasHealth&&(i.canDest={name:"Destructible",object:e.objConfig,key:"canDest",type:"switch",onChange:function(e,t){a.canDest=t}},"GATE"!=a.prefab.name&&(i.startDest={name:"Start Destroyed",object:e.objConfig,key:"startDest",type:"switch",onChange:function(e,t){a.startDest=t}}),"GATE"!=a.prefab.name&&(i.spawnChance={name:"Spawn Chance",object:e.objConfig,key:"spawnChance",type:"slider",args:[0,100,.01],onChange:function(e,t){a.spawnChance=t}}),"TRIGGER"==a.prefab.name&&(i.selfDestruct={name:"Destroy On Use",object:e.objConfig,key:"selfDestruct",type:"switch",onChange:function(e,t){a.selfDestruct=t}}),i.health={name:"Health",object:e.objConfig,key:"health",type:"slider",args:[0,5e4,10],onChange:function(e,t){a.health=t}},i.trul={type:"rule"}),a.prefab.hasHealth&&(i.respawn={name:"Respawn",type:"folder",size:"small",closed:!0,children:{timer:{name:"Timer (s)",object:e.objConfig,key:"respawnT",type:"slider",args:[0,3600,.1],onChange:function(e,t){a.respawnT=t},sub:1},random:{name:"Random",object:e.objConfig,key:"respawnR",type:"switch",onChange:function(e,t){a.respawnR=t},sub:1},rule:{type:"rule"}}}),a.prefab.alterHitbox&&(i.hitbox={name:"Hitbox",type:"folder",size:"small",closed:!0,children:{width:{name:"Width Mlt",object:e.objConfig,key:"hbWidth",type:"slider",args:[.1,10,.1],onChange:function(e,t){a.hbWidth=t},sub:1},height:{name:"Height Mlt",object:e.objConfig,key:"hbHeight",type:"slider",args:[.1,20,.1],onChange:function(e,t){a.hbHeight=t},sub:1}}}),a.prefab.ai&&(i.hitbox.children.critDmg={name:"Crit Damage Mlt",object:e.objConfig,key:"critDmg",type:"slider",args:[0,5,.01],onChange:function(e,t){a.critDmg=t},sub:1},i.behavior={name:"Behavior",type:"folder",size:"small",closed:!0,children:{ignoreOnStuck:{name:"Ignore When Stuck",object:e.objConfig,key:"ignoreOnStuck",type:"switch",onChange:function(e,t){a.ignoreOnStuck=t},sub:1},driftOnStuck:{name:"Drift When Stuck",object:e.objConfig,key:"driftOnStuck",type:"switch",onChange:function(e,t){a.driftOnStuck=t},sub:1},invincibleOnStuck:{name:"Invincible When Stuck",object:e.objConfig,key:"invincibleOnStuck",type:"switch",onChange:function(e,t){a.invincibleOnStuck=t},sub:1},friendly:{name:"Friendly",object:e.objConfig,key:"friendly",type:"switch",onChange:function(e,t){a.friendly=t},sub:1},targPlr:{name:"Target Players",object:e.objConfig,key:"targPlr",type:"switch",onChange:function(e,t){a.targPlr=t},sub:1},targAI:{name:"Target other AI",object:e.objConfig,key:"targAI",type:"switch",onChange:function(e,t){a.targAI=t},sub:1},behaviorType:{name:"Behavior Type",object:e.objConfig,key:"behaviorType",type:"slider",args:[0,20,1],onChange:function(e,t){a.behaviorType=t},sub:1},aiChasd:{name:"Chase Distance",object:e.objConfig,key:"aiChasd",type:"slider",args:[0,2e3,1],onChange:function(e,t){a.aiChasd=t},sub:1},roamRad:{name:"Roam Radius",object:e.objConfig,key:"roamRad",type:"slider",args:[0,500,1],onChange:function(e,t){a.roamRad=t},sub:1},roamTime:{name:"Roam Time",object:e.objConfig,key:"roamTime",type:"slider",args:[1e3,1e4,1],onChange:function(e,t){a.roamTime=t},sub:1},pathType:{name:"Path Type",object:e.objConfig,key:"pathType",type:"select",args:[n.pathTypes.map(((e,t)=>({name:e,value:t})))],onChange:function(e,t){a.pathType=t},sub:1},pathInput:{name:"Path Input",object:e.objConfig,key:"pathInput",type:"text",args:["id,id,id"],onChange:function(e,t){a.pathInput=t},sub:1},rule:{type:"rule"}}},i.mov={name:"Movement",type:"folder",closed:!0,size:"small",children:{speed:{name:"Speed",object:e.objConfig,key:"speed",type:"slider",args:[0,10,.1],onChange:function(e,t){a.speed=t},sub:1},turnSpd:{name:"Turn Speed",object:e.objConfig,key:"turnSpd",type:"slider",args:[0,30,.1],onChange:function(e,t){a.turnSpd=t},sub:1},gravity:{name:"Gravity",object:e.objConfig,key:"gravity",type:"slider",args:[0,1,.1],onChange:function(e,t){a.gravity=t},sub:1},physMov:{name:"Velocity Movement",object:e.objConfig,key:"pMov",type:"switch",onChange:function(e,t){a.pMov=t},sub:1},rule:{type:"rule"}}},i.vision={name:"Vision",type:"folder",closed:!0,size:"small",children:{visDis:{name:"Vision Distance",object:e.objConfig,key:"visDis",type:"slider",args:[10,1e3,10],onChange:function(e,t){a.visDis=t},sub:1},xrayVis:{name:"Xray Vision",object:e.objConfig,key:"xrayVis",type:"switch",onChange:function(e,t){a.xrayVis=t},sub:1},rule:{type:"rule"}}},i.meleeing={name:"Melee",type:"folder",closed:!0,size:"small",children:{canHit:{name:"Can Melee",object:e.objConfig,key:"canHit",type:"switch",onChange:function(e,t){a.canHit=t},sub:1},meldmg:{name:"Melee Dmg",object:e.objConfig,key:"meldmg",type:"slider",args:[1,200,1],onChange:function(e,t){a.meldmg=t},sub:1},hrate:{name:"Melee Rate",object:e.objConfig,key:"hrate",type:"slider",args:[200,1e4,50],onChange:function(e,t){a.hrate=t},sub:1},melrng:{name:"Melee Range",object:e.objConfig,key:"melrng",type:"slider",args:[10,100,1],onChange:function(e,t){a.melrng=t},sub:1},melDel:{name:"Melee Delay (ms)",object:e.objConfig,key:"melDel",type:"slider",args:[0,5e3,1],onChange:function(e,t){a.melDel=t},sub:1},melShake:{name:"Melee Shake",object:e.objConfig,key:"melShake",type:"slider",args:[0,1,.1],onChange:function(e,t){a.melShake=t},sub:1},hitEff:{name:"Effect On Hit",object:e.objConfig,key:"hitEff",type:"select",args:[[{name:"None",value:-1},...c.map(((e,t)=>({name:e.name,value:t})))]],onChange:function(e,t){a.hitEff=t},sub:1},rule:{type:"rule"}}},i.attacking={name:"Shooting",type:"folder",closed:!0,size:"small",children:{canShoot:{name:"Can Shoot",object:e.objConfig,key:"canShoot",type:"switch",onChange:function(e,t){a.canShoot=t},sub:1},frate:{name:"Firerate",object:e.objConfig,key:"frate",type:"slider",args:[200,1e4,50],onChange:function(e,t){a.frate=t},sub:1},aicur:{name:"Spread",object:e.objConfig,key:"aicur",type:"slider",args:[0,1,.001],onChange:function(e,t){a.aicur=t},sub:1},shoBrk:{name:"Shot Break (ms)",object:e.objConfig,key:"shoBrk",type:"slider",args:[0,5e3,1],onChange:function(e,t){a.shoBrk=t},sub:1},shoOffH:{name:"Offset Shot",object:e.objConfig,key:"shoOffH",type:"switch",onChange:function(e,t){a.shoOffH=t},sub:1},shoArY:{name:"Shot Arch Y",object:e.objConfig,key:"shoArY",type:"slider",args:[-90,90,1],onChange:function(e,t){a.shoArY=t},sub:1},shoDel:{name:"Shot Delay (ms)",object:e.objConfig,key:"shoDel",type:"slider",args:[0,5e3,1],onChange:function(e,t){a.shoDel=t},sub:1},shoShake:{name:"Shot Shake",object:e.objConfig,key:"shoShake",type:"slider",args:[0,1,.1],onChange:function(e,t){a.shoShake=t},sub:1},shotEff:{name:"Effect On Shot",object:e.objConfig,key:"shotEff",type:"select",args:[[{name:"None",value:-1},...c.map(((e,t)=>({name:e.name,value:t})))]],onChange:function(e,t){a.shotEff=t},sub:1},projFol:{name:"Projectile",type:"folder",closed:!0,size:"smaller",children:{projA:{name:"Projectile Asset",object:e.objConfig,key:"projA",type:"text",args:["ID"],onChange:function(e,t){a.projA=t},sub:1},customProj:{id:"AI",line:"wide",object:e.advancedOptions,key:"selectProjModel",type:"button",args:["Select Custom"]},projDmg:{name:"Projectile Dmg",object:e.objConfig,key:"projDmg",type:"slider",args:[0,1e3,1],onChange:function(e,t){a.projDmg=t},sub:1},projSpd:{name:"Projectile Speed",object:e.objConfig,key:"projSpd",type:"slider",args:[0,20,.01],onChange:function(e,t){a.projSpd=t},sub:1},projSC:{name:"Projectile Size",object:e.objConfig,key:"projSC",type:"slider",args:[.1,10,.1],onChange:function(e,t){a.projSC=t},sub:1},projMS:{name:"Projectile Mesh Scale",object:e.objConfig,key:"projMS",type:"slider",args:[.01,10,.01],onChange:function(e,t){a.projMS=t},sub:1},projS:{name:"Projectile Spin",object:e.objConfig,key:"projS",type:"slider",args:[0,2,.01],onChange:function(e,t){a.projS=t},sub:1},projG:{name:"Projectile Gravity",object:e.objConfig,key:"projG",type:"slider",args:[-2,2,.01],onChange:function(e,t){a.projG=t},sub:1},projGL:{name:"Projectile Glow",object:e.objConfig,key:"projGL",type:"switch",onChange:function(e,t){a.projGL=t},sub:1},projT:{name:"Projectile Transparency",object:e.objConfig,key:"projT",type:"switch",onChange:function(e,t){a.projT=t},sub:1},explode:{name:"Explode",object:e.objConfig,key:"explode",type:"switch",onChange:function(e,t){a.explode=t},sub:1}}},rule:{type:"rule"}}},i.reward={name:"Rewards",type:"folder",closed:!0,size:"small",children:{rewardType:{name:"Skin Rewards",object:e.objConfig,key:"rewardType",type:"text",args:["id,id,id"],onChange:function(e,t){a.rewardType=t},sub:1},rewardMethod:{name:"Reward Method",object:e.objConfig,key:"rewardMethod",type:"select",args:[[{name:"Auto",value:0},{name:"Drop From AI",value:1},{name:"Drop on Node",value:2}]],onChange:function(e,t){a.rewardMethod=t},sub:1},rewardReq:{name:"Reward Requirements",object:e.objConfig,key:"rewardReq",type:"select",args:[[{name:"Player Active",value:0},{name:"Player Active & Damage",value:1},{name:"Player Killed",value:2}]],onChange:function(e,t){a.rewardReq=t},sub:1},rewardNode:{name:"Reward Node Id",object:e.objConfig,key:"rewardNode",type:"slider",args:[0,1e3,1],onChange:function(e,t){a.rewardNode=t},sub:1},rule:{type:"rule"}}},i.nameTag={name:"Nametag",type:"folder",closed:!0,size:"small",children:{aiLvl:{name:"Level",object:e.objConfig,key:"aiLvl",type:"slider",args:[0,999,1],onChange:function(e,t){a.aiLvl=t},sub:1},aiTagScale:{name:"Health Scale",object:e.objConfig,key:"aiTagScale",type:"slider",args:[0,10,.1],onChange:function(e,t){a.aiTagScale=t},sub:1},rule:{type:"rule"}}}),a.prefab.bot){i.botClass={name:"Class",object:e.objConfig,key:"botClass",type:"number",args:["id",0],onChange:function(e,t){a.botClass=t}},i.botForceClass={name:"Force Class",object:e.objConfig,key:"botForceClass",type:"switch",onChange:function(e,t){a.botForceClass=t}},i.botLives={name:"Lives",object:e.objConfig,key:"botLives",type:"slider",args:[0,10,1],onChange:function(e,t){a.botLives=t}};p=Array((a.prefab.noDefault?1:0)+n.teamLimit).fill(0).map(((e,t)=>({name:a.prefab.noDefault?n.teamNames[t]:0==t?"Default":n.teamNames[t-1],value:t})));i.botTeam={name:"Team",object:e.objConfig,key:"botTeam",type:"select",args:[p],onChange:function(e,t){a.botTeam=t}},i.healthMlt={name:"Health Mlt",object:e.objConfig,key:"healthMlt",type:"slider",args:[0,10,.01],onChange:function(e,t){a.healthMlt=t}},i.dmgMlt={name:"Damage Mlt",object:e.objConfig,key:"dmgMlt",type:"slider",args:[0,10,.01],onChange:function(e,t){a.dmgMlt=t}},i.spreadMlt={name:"Spread Mlt",object:e.objConfig,key:"spreadMlt",type:"slider",args:[0,10,.01],onChange:function(e,t){a.spreadMlt=t}},i.rangeMlt={name:"Range Mlt",object:e.objConfig,key:"rangeMlt",type:"slider",args:[0,10,.01],onChange:function(e,t){a.rangeMlt=t}},i.speedMlt={name:"Speed Mlt",object:e.objConfig,key:"speedMlt",type:"slider",args:[0,10,.01],onChange:function(e,t){a.speedMlt=t}},i.botRecoil={name:"Recoil",object:e.objConfig,key:"botRecoil",type:"switch",onChange:function(e,t){a.botRecoil=t}},i.botBehavior={name:"Behavior",type:"folder",size:"small",closed:!0,children:{botRandomSpawn:{name:"Choose Random Spawn",object:e.objConfig,key:"botRandomSpawn",type:"switch",onChange:function(e,t){a.botRandomSpawn=t},sub:1},botRoam:{name:"Roam When No Target",object:e.objConfig,key:"botRoam",type:"switch",onChange:function(e,t){a.botRoam=t},sub:1},botGodMode:{name:"God Mode",object:e.objConfig,key:"botGodMode",type:"switch",onChange:function(e,t){a.botGodMode=t},sub:1},botVoiceChat:{name:"Voicechat on Kill",object:e.objConfig,key:"botVoiceChat",type:"switch",onChange:function(e,t){a.botVoiceChat=t},sub:1},botJoinMessage:{name:"Message on Join",object:e.objConfig,key:"botJoinMessage",type:"switch",onChange:function(e,t){a.botJoinMessage=t},sub:1},botLeaveMessage:{name:"Message on Leave",object:e.objConfig,key:"botLeaveMessage",type:"switch",onChange:function(e,t){a.botLeaveMessage=t},sub:1},botNodYes:{name:"Nod Yes",object:e.objConfig,key:"botNodYes",type:"switch",onChange:function(e,t){a.botNodYes=t},sub:1},botNodNo:{name:"Nod No",object:e.objConfig,key:"botNodNo",type:"switch",onChange:function(e,t){a.botNodNo=t},sub:1},botRemoveOnDeath:{name:"Remove On Death",object:e.objConfig,key:"botRemoveOnDeath",type:"switch",onChange:function(e,t){a.botRemoveOnDeath=t},sub:1},botUseSpawnDelay:{name:"Has Spawn Delay",object:e.objConfig,key:"botUseSpawnDelay",type:"switch",onChange:function(e,t){a.botUseSpawnDelay=t},sub:1},botCanRespawn:{name:"Can Respawn",object:e.objConfig,key:"botCanRespawn",type:"switch",onChange:function(e,t){a.botCanRespawn=t},sub:1},botSlideHop:{name:"Can Slide hop",object:e.objConfig,key:"botSlideHop",type:"switch",onChange:function(e,t){a.botSlideHop=t},sub:1},botMimicTarget:{name:"Mimic Target",object:e.objConfig,key:"botMimicTarget",type:"switch",onChange:function(e,t){a.botMimicTarget=t},sub:1},botWatchTarget:{name:"Watch Target",object:e.objConfig,key:"botWatchTarget",type:"switch",onChange:function(e,t){a.botWatchTarget=t},sub:1},botFollowTarget:{name:"Follow Target",object:e.objConfig,key:"botFollowTarget",type:"switch",onChange:function(e,t){a.botFollowTarget=t},sub:1},botAttackTarget:{name:"Attack Target",object:e.objConfig,key:"botAttackTarget",type:"switch",onChange:function(e,t){a.botAttackTarget=t},sub:1},botForceCrouch:{name:"Force Crouch",object:e.objConfig,key:"botForceCrouch",type:"switch",onChange:function(e,t){a.botForceCrouch=t},sub:1},botTargetTeam:{name:"Can Target Team",object:e.objConfig,key:"botTargetTeam",type:"switch",onChange:function(e,t){a.botTargetTeam=t},sub:1},botTargetBots:{name:"Can Target Bots",object:e.objConfig,key:"botTargetBots",type:"switch",onChange:function(e,t){a.botTargetBots=t},sub:1},rule:{type:"rule"}}},i.botCosmetics={name:"Cosmetics",type:"folder",size:"small",closed:!0,children:{botPrimSkin:{name:"Primary Skin",object:e.objConfig,key:"botPrimSkin",type:"text",args:["id"],onChange:function(e,t){a.botPrimSkin=t},sub:1},botMelee:{name:"Melee Skin",object:e.objConfig,key:"botMelee",type:"text",args:["id"],onChange:function(e,t){a.botMelee=t},sub:1},botHat:{name:"Hat",object:e.objConfig,key:"botHat",type:"text",args:["id"],onChange:function(e,t){a.botHat=t},sub:1},botHead:{name:"Head",object:e.objConfig,key:"botHead",type:"text",args:["id"],onChange:function(e,t){a.botHead=t},sub:1},botFace:{name:"Face",object:e.objConfig,key:"botFace",type:"text",args:["id"],onChange:function(e,t){a.botFace=t},sub:1},botBody:{name:"Body",object:e.objConfig,key:"botBody",type:"text",args:["id"],onChange:function(e,t){a.botBody=t},sub:1},botBack:{name:"Back",object:e.objConfig,key:"botBack",type:"text",args:["id"],onChange:function(e,t){a.botBack=t},sub:1},botWaist:{name:"Waist",object:e.objConfig,key:"botWaist",type:"text",args:["id"],onChange:function(e,t){a.botWaist=t},sub:1},botShoes:{name:"Shoes",object:e.objConfig,key:"botShoes",type:"text",args:["id"],onChange:function(e,t){a.botShoes=t},sub:1},botDye:{name:"Dye",object:e.objConfig,key:"botDye",type:"text",args:["id"],onChange:function(e,t){a.botDye=t},sub:1},botWrist:{name:"Wrist",object:e.objConfig,key:"botWrist",type:"text",args:["id"],onChange:function(e,t){a.botWrist=t},sub:1},botWrist:{name:"Wrist",object:e.objConfig,key:"botWrist",type:"text",args:["id"],onChange:function(e,t){a.botWrist=t},sub:1},botPet:{name:"Pet",object:e.objConfig,key:"botPet",type:"text",args:["id"],onChange:function(e,t){a.botPet=t},sub:1},rule:{type:"rule"}}}}if(i.hitbox&&(i.hitbox.children.rule={type:"rule"}),"WEAPON_PICKUP"==a.objType&&(i.weapon={name:"Weapon",type:"folder",size:"small",children:{type:{name:"Type",object:e.objConfig,key:"weaponId",type:"select",args:[o.map(((e,t)=>e.src?{name:e.name,value:t}:null)).filter((e=>e))],onChange:function(e,t){a.weaponId=t,a.regen()},sub:1},replace:{name:"Replaceable",object:e.objConfig,key:"weaponReplace",type:"switch",onChange:function(e,t){a.weaponReplace=t},sub:1},random:{name:"Random",object:e.objConfig,key:"randWep",type:"switch",onChange:function(e,t){a.randWep=t},sub:1},groupId:{name:"Grouping Id",object:e.objConfig,key:"randWepGroup",type:"slider",args:[0,1e4,1],onChange:function(e,t){a.randWepGroup=t},sub:1},showPickupIcon:{name:"Show Icon",object:e.objConfig,key:"showPickupIcon",type:"switch",onChange:function(e,t){a.showPickupIcon=t},sub:1},noTexture:{name:"White Texture",object:e.objConfig,key:"noTexture",type:"switch",onChange:function(e,t){a.noTexture=t},sub:1}},rule:{type:"rule"}}),"TRIGGER"==a.objType||a.prefab.ai){i.events={name:"Trigger Event",type:"folder",size:"small",closed:!0,children:{}},a.prefab.ai&&(i.events.children.canTrigger={name:"Can Trigger",object:e.objConfig,key:"canTrigger",type:"switch",onChange:function(e,t){a.canTrigger=t}}),i.events.children.event={name:"Event",object:e.objConfig,key:"event",type:"select",args:[h.events.map(((e,t)=>({name:e.name,value:t}))).filter((e=>!!a.prefab.ai&&!!e.name.includes("onAI")||"TRIGGER"==a.objType&&!e.name.includes("onAI")))],onChange:function(e,t){a.event=t,m.panel.state.refresh("panel_right_object")}},i.events.children.constE={name:"Event Value",object:e.objConfig,key:"constE",type:"slider",args:[0,1e4,1],onChange:function(e,t){a.constE=t},rule:{type:"rule"}},i.actions={name:"Trigger Actions",type:"folder",size:"small",closed:!0,children:{},rule:{type:"rule"}},h.events[a.event]&&"onInteractKey"==h.events[a.event].name&&(i.actions.children.actionMethod={name:"Action Method",object:e.objConfig,key:"actionMethod",type:"select",args:[[{name:"Cost KR",value:0},{name:"Cost Score",value:1},{name:"Require Score",value:2},{name:"Require Kills",value:3},{name:"Requires Account",value:4},{name:"Requires Verified",value:5},{name:"Requires Premium",value:6},{name:"Requires Partner",value:7},{name:"Requires Level",value:8}]],onChange:function(e,t){a.actionMethod=t}},i.actions.children.actionCost={name:"Action Cost",object:e.objConfig,key:"actionCost",type:"slider",args:[0,1e4,1],onChange:function(e,t){a.actionCost=t}}),i.actions.children.chance={name:"Action Chance (%)",object:e.objConfig,key:"chance",type:"slider",args:[0,100,1],onChange:function(e,t){a.chance=t}},a.trigActions.length<n.triggerActionLimit&&(i.actions.children.add={line:"wide",object:a,key:"addAction",type:"button",args:["Add Action"],sub:1});for(var v=0;v<a.trigActions.length;v++){var y={name:"Action "+v,type:"folder",size:"small",closed:!0,children:{},sub:1},b=h.actions[a.trigActions[v].action];v>0&&(y.children.remove={id:v,line:"wide",object:a,key:"removeAction",type:"button",args:["Remove Action "+v],sub:1}),y.children.action={name:"Action",object:e.objConfig.trigActions[v],id:v,key:"action",type:"select",args:[h.actions.map(((e,t)=>({name:e.name,value:t}))).filter((e=>!h.actions[e.value].devOnly||h.actions[e.value].devOnly&&!n.isProd))],onChange:function(e,t){a.trigActions[this.id].action=t,m.panel.state.refresh("panel_right_object")},sub:1},b&&b.hasCust||(a.trigActions[v].constantType=0);var w=parseInt(a.trigActions[v].constantType)||0;if(b&&b.hasCust&&(y.children.constantType={name:"Value Type",object:e.objConfig.trigActions[v],key:"constantType",id:v,type:"select",args:[n.inputTypes.map(((e,t)=>({name:e,value:t})))],onChange:function(e,t){a.trigActions[this.id].constantType=t,m.panel.state.refresh("panel_right_object")}}),b&&b.hasCust&&w&&(y.children.constantCust={name:b&&b.actionValueCust?b.actionValueCust:"Key",object:e.objConfig.trigActions[v],key:"constantCust",id:v,type:"text",args:["Text"],onChange:function(e,t){a.trigActions[this.id].constantCust=t}}),!b||"Both"!=b.type&&"Text"!=b.type||!b.bypassType&&w||(y.children.constantTxt={name:b&&b.actionValueTxt?b.actionValueTxt:"Value",object:e.objConfig.trigActions[v],key:"constantTxt",id:v,type:"text",args:["Text"],onChange:function(e,t){a.trigActions[this.id].constantTxt=t}}),!b||"Both"!=b.type&&"Text"==b.type||w||(y.children.constant={name:b&&b.actionValue?b.actionValue:"Action Value",object:e.objConfig.trigActions[v],key:"constant",id:v,type:"slider",args:[-1e4,1e4,1],onChange:function(e,t){a.trigActions[this.id].constant=t}},b.actionOptions&&(y.children.constant.type="select",y.children.constant.args=[b.actionOptions],y.children.constant.args=[Object.keys(b.actionOptions).map((e=>({name:b.actionOptions[e],value:parseInt(e)})))])),b&&b.hasExtra&&(b.bypassType||!w)&&(y.children.constant2={name:b&&b.actionValue2?b.actionValue2:"Action Value",object:e.objConfig.trigActions[v],key:"constant2",id:v,type:"slider",args:[-1e4,1e4,1],onChange:function(e,t){a.trigActions[this.id].constant2=t}},b.actionOptions2&&(y.children.constant2.type="select",y.children.constant2.args=[b.actionOptions2],y.children.constant2.args=[Object.keys(b.actionOptions2).map((e=>({name:b.actionOptions2[e],value:parseInt(e)})))])),b&&(y.children.delay={name:"Delay",object:e.objConfig.trigActions[v],key:"delay",id:v,type:"slider",args:[0,60,.1],onChange:function(e,t){a.trigActions[this.id].delay=t}}),h.events[a.event]){var x=h.conditions[a.trigActions[v].condition||0];if(y.children.conditions={name:"Condition",type:"folder",closed:!0,size:"small",children:{type:{name:"Condition",object:e.objConfig.trigActions[v],key:"condition",id:v,type:"select",args:[h.conditions.map(((e,t)=>({name:e.name,value:t})))],onChange:function(e,t){a.trigActions[this.id].condition=t,m.panel.state.refresh("panel_right_object")}}},sub:1},x.vals)for(var S,M=0;M<x.vals.length;M++)S=x.vals[M],y.children.conditions.children[S.name]=S.input?{name:S.name,object:e.objConfig.trigActions[v],key:"conditionVal"+M,id:v,id2:M,type:"text",args:[S.name],onChange:function(e,t){a.trigActions[this.id][this.key]=t}}:S.select?{name:S.name,object:e.objConfig.trigActions[v],key:"conditionVal"+M,id:v,type:"select",args:[S.select.map(((e,t)=>({name:e,value:t})))],onChange:function(e,t){a.trigActions[this.id][this.key]=t}}:{name:S.name,object:e.objConfig.trigActions[v],key:"conditionVal"+M,id:v,type:"slider",args:[S.min,S.max,S.step],onChange:function(e,t){a.trigActions[this.id][this.key]=t}}}14!=a.trigActions[v].action&&34!=a.trigActions[v].action&&54!=a.trigActions[v].action||(y.children.sound={name:"Sound",type:"folder",closed:!0,size:"small",children:{type:{name:"Type",object:e.objConfig.trigActions[v],key:"snd",id:v,type:"select",args:[Object.keys(e.soundsList).map((t=>({name:t,value:e.soundsList[t]})))],onChange:function(e,t){a.trigActions[this.id].snd=t}},custom:{name:"Asset ID",object:e.objConfig.trigActions[v],key:"assetSound",id:v,type:"number",args:["Sound Asset ID",0],onChange:function(e,t){a.trigActions[this.id].assetSound=t}},customSelect:{line:"wide",object:a,key:"selectActionAudio",id:v,type:"button",args:["Select Custom"]},volume:{name:"Volume",object:e.objConfig.trigActions[v],key:"vol",id:v,type:"slider",args:[n.emitterVolMin,n.emitterVolMax,.01],onChange:function(e,t){a.trigActions[this.id].vol=t}},rate:{name:"Rate",object:e.objConfig.trigActions[v],key:"rate",id:v,type:"slider",args:[n.emitterRateMin,n.emitterRateMax,.1],onChange:function(e,t){a.trigActions[this.id].rate=t}}},sub:1},y.children.sound.children.emitfrom={name:"Emit From",object:e.objConfig.trigActions[v],id:v,key:"emitfrom",type:"select",args:[[{name:"Trigger (3D)",value:0},{name:"Player (3D)",value:1},{name:"Global (2D)",value:2}]],onChange:function(e,t){a.trigActions[this.id].emitfrom=t}}),i.actions.children["action"+v]=y,i.actions.children["rul"+v]={type:"rule"}}}let s={};"WEAPON_PICKUP"!=a.objType&&a.prefab.canInterface&&(s.id={name:"ID",object:e.objConfig,key:"interfaceId",type:"slider",args:[0,n.interfaceIDMax,1],onChange:function(t,i){var n=i!=a.interfaceId;a.interfaceId&&e.warningCheck("interface",a,-1),a.interfaceId=i,a.interfaceId&&e.warningCheck("interface",a,1),n&&e.checkConnections()},sub:1}),a.prefab.canTargetInterface&&(s.target={name:"Target",object:e.objConfig,key:"interfaceIdT",type:"slider",args:[0,n.interfaceIDMax,1],onChange:function(t,i){var n=i!=a.interfaceIdT;a.interfaceIdT=i,n&&e.checkConnections()},sub:1}),Object.keys(s).length&&(i.interface={name:"Interface",type:"folder",size:"small",closed:!0,children:s}),"TELEPORTER"==a.prefab.name&&(i.node={name:"Node",object:e.objConfig,key:"node",type:"select",args:[[{name:"Sending",value:0},{name:"Receiving",value:1},{name:"Both",value:2}]],onChange:function(t,i){a.node=i,e.checkConnections()}},i.channel={name:"Channel",object:e.objConfig,key:"channel",type:"slider",args:[0,100,1],onChange:function(t,i){a.channel=i,e.checkConnections()}},i.momentum={name:"Stop Momentum",object:e.objConfig,key:"momentum",type:"switch",onChange:function(e,t){a.momentum=t}},i.telCheckPoint={name:"Use Active Checkpoint",object:e.objConfig,key:"telCheckPoint",type:"switch",onChange:function(e,t){a.telCheckPoint=t}}),a.prefab.canScript&&(i.scriptId={name:"Script #",object:e.objConfig,key:"scriptId",type:"text",onChange:function(e,t){a.scriptId=t}}),Object.keys(i).length&&(this.blueprint.technical={name:"Technical & Logic",closed:!r,type:"folder",size:"standard",children:i})}a.prefab.editFaces&&(this.blueprint.renderFaces={name:"Render Faces",type:"folder",size:"standard",children:{...e.faces.map(((t,i)=>({name:t,object:e.objConfig.faces,key:i,type:"switch",onChange:function(){a.faces=e.objConfig.faces,a.regen()}})))},closed:!0}),"ENVIRONMENT_ZONE"==a.prefab.name&&(this.blueprint.environments={name:"Environment",type:"folder",size:"standard",children:{skyDome:{name:"Sky",object:e.objConfig,key:"skyDome",type:"select",args:[["Solid","Gradient"].map(((e,t)=>({name:e,value:t})))],onChange:function(e,t){[...e.children].forEach((e=>{document.getElementById("ensky_"+e.value).style.display="none"})),document.getElementById("ensky_"+t).style.display=null,a.skyDome=!!parseInt(t)}},sky0:{id:"ensky_0",type:"div",size:"standard",show:!a.skyDome,children:{sky:{name:"Color",object:d,key:"sky",type:"color",onChange:function(e,t){a.sky=t},sub:1}}},sky1:{id:"ensky_1",type:"div",size:"standard",show:!!a.skyDome,children:{color:{name:"Color",type:"folder",size:"small",children:{skyDomeCol0:{name:"Top",object:d,key:"skyDomeCol0",type:"color",onChange:function(e,t){a.skyDomeCol0=t},sub:2},skyDomeCol1:{name:"Middle",object:d,key:"skyDomeCol1",type:"color",onChange:function(e,t){a.skyDomeCol1=t},sub:2},skyDomeCol2:{name:"Bottom",object:d,key:"skyDomeCol2",type:"color",onChange:function(e,t){a.skyDomeCol2=t},sub:2}},sub:1},skyDomeTex:{name:"Cloud Texture",object:e.objConfig,key:"skyDomeTex",type:"switch",onChange:function(e,t){a.skyDomeTex=t,encloud.style.display=t?null:"none"},sub:1}}},cloud:{id:"encloud",type:"div",size:"standard",show:!!a.skyDomeTex,children:{skyDomeEmis:{name:"Emissive",object:d,key:"skyDomeEmis",type:"color",onChange:function(e,t){a.skyDomeEmis=t},sub:2},skyDomeEmisTex:{name:"Emissive Asset ID",object:e.objConfig,key:"skyDomeEmisTex",type:"text",args:["Emissive Asset ID"],onChange:function(e,t){a.skyDomeEmisTex=t},sub:2},selectEmissiveCloud:{line:"wide",object:e.advancedOptions,key:"selectEmissiveCloudEN",type:"button",args:["Select Emissive"],sub:2},skyDomeMovT:{name:"Speed",object:e.objConfig,key:"skyDomeMovT",type:"slider",args:[-20,20,.1],onChange:function(e,t){a.skyDomeMovT=t},sub:2},skyDomeMovD:{name:"Axis",object:e.objConfig,key:"skyDomeMovD",type:"select",args:[["X","Y"].map(((e,t)=>({name:e,value:t})))],onChange:function(e,t){a.skyDomeMovD=t},sub:2},skyDomeTexA:{name:"Asset ID",object:e.objConfig,key:"skyDomeTexA",type:"text",args:["Texture Asset ID"],onChange:function(e,t){a.skyDomeTexA=t},sub:2},selectCloud:{line:"wide",object:e.advancedOptions,key:"selectCloudEN",type:"button",args:["Select Custom"],sub:2}},sub:2},rule:{type:"rule"}}},this.blueprint.environments.children.ambient={name:"Ambient",type:"folder",closed:!0,size:"standard",children:{ambInd:{name:"Sound",object:e.objConfig,key:"ambInd",type:"select",args:[Object.keys(n.soundScapes).map((e=>({name:e,value:n.soundScapes[e]})))],onChange:function(e,t){a.ambInd=t}},ambIndC:{name:"Custom Sound ID",object:e.objConfig,key:"ambIndC",type:"number",args:["Sound Asset ID",0],onChange:function(e,t){a.ambIndC=t}},selectAmbEN:{line:"wide",object:e.advancedOptions,key:"selectAmbEN",type:"button",args:["Select Sound"]},ambientI:{name:"Intensity",object:e.objConfig,key:"ambientI",type:"slider",args:[.1,3,.1],onChange:function(e,t){a.ambientI=t}},ambientC:{name:"Color",object:d,key:"ambientC",type:"color",onChange:function(e,t){a.ambientC=t}}}},this.blueprint.environments.children.light={name:"Light",type:"folder",closed:!0,size:"standard",children:{lightC:{name:"Color",object:d,key:"lightC",type:"color",onChange:function(e,t){a.lightC=t}},lightD:{name:"Distance",object:e.objConfig,key:"lightD",type:"slider",args:[10,5e3,1],onChange:function(e,t){a.lightD=t}},lightI:{name:"Intensity",object:e.objConfig,key:"lightI",type:"slider",args:[.1,3,.1],onChange:function(e,t){a.lightI=t}},angle:{name:"Angle",type:"folder",size:"small",children:{sunAngX:{name:"X",object:e.objConfig,key:"sunAngX",type:"slider",args:[0,360,1],onChange:function(e,t){a.sunAngX=t}},sunAngY:{name:"Y",object:e.objConfig,key:"sunAngY",type:"slider",args:[0,360,1],onChange:function(e,t){a.sunAngY=t}}},sub:1}}},this.blueprint.environments.children.shadows={name:"Shadows",type:"folder",closed:!0,size:"standard",children:{shadowR:{name:"Resolution",object:e.objConfig,key:"shadowR",type:"slider",args:[128,4096,1],onChange:function(e,t){a.shadowR=t}},shadowD:{name:"Distance",object:e.objConfig,key:"shadowD",type:"slider",args:[128,4096,1],onChange:function(e,t){a.shadowD=t}}}},this.blueprint.environments.children.weather={name:"Weather",type:"folder",closed:!0,size:"standard",children:{fog:{name:"Fog",type:"folder",size:"small",children:{fogC:{name:"Color",object:d,key:"fogC",type:"color",onChange:function(e,t){a.fogC=t}},fogD:{name:"Distance",object:e.objConfig,key:"fogD",type:"slider",args:[0,15e3,1],onChange:function(e,t){a.fogD=t}}},sub:1}}},this.blueprint.environments.children.render={name:"Render",type:"folder",closed:!0,size:"standard",children:{toneMapping:{name:"ToneMapping",object:e.objConfig,key:"toneMapping",type:"select",args:[n.toneTypes.map(((e,t)=>({name:e,value:t})))],onChange:function(e,t){a.toneMapping=t}},toneMappingExposure:{name:"ToneMapping Exposure",object:e.objConfig,key:"toneMappingExposure",type:"slider",args:[0,10,.1],onChange:function(e,t){a.toneMappingExposure=t}},outputEncoding:{name:"Output Encoding",object:e.objConfig,key:"outputEncoding",type:"select",args:[n.encodingTypes.map(((e,t)=>({name:e.name,value:t})))],onChange:function(e,t){a.outputEncoding=t}},correctLights:{name:"Physically Correct Lights",object:e.objConfig,key:"correctLights",type:"switch",onChange:function(e,t){a.correctLights=t}}}}),(a.prefab.light||"DIRECTIONAL_LIGHT"==a.prefab.name||"RECTAREA_LIGHT"==a.prefab.name||"SPOT_LIGHT"==a.prefab.name)&&(this.blueprint.lighting={name:"Lighting",type:"folder",size:"standard",children:{intensity:{name:"Intensity",object:e.objConfig,key:"intensity",type:"slider",args:[0,15,.1],onChange:function(e,t){a.intensity=t}}}},(a.prefab.light||"SPOT_LIGHT"==a.prefab.name)&&(this.blueprint.lighting.children.distance={name:"Distance",object:e.objConfig,key:"distance",type:"slider",args:[0,1e3,.1],onChange:function(e,t){a.distance=t}},this.blueprint.lighting.children.decay={name:"Decay",object:e.objConfig,key:"decay",type:"slider",args:[0,2,.1],onChange:function(e,t){a.decay=t}}),"DIRECTIONAL_LIGHT"!=a.prefab.name&&"SPOT_LIGHT"!=a.prefab.name||(this.blueprint.lighting.children.target={name:"Target",object:e.objConfig,key:"lightTarget",type:"vector3",onChange:function(e,t){a.lightTarget=t}}),"SPOT_LIGHT"==a.prefab.name&&(this.blueprint.lighting.children.angle={name:"Angle",object:e.objConfig,key:"angle",type:"slider",args:[1,90,1],onChange:function(e,t){a.angle=t}},this.blueprint.lighting.children.penumbra={name:"Penumbra",object:e.objConfig,key:"penumbra",type:"slider",args:[0,1,.1],onChange:function(e,t){a.penumbra=t}}),this.blueprint.lighting.children.rule={type:"rule"}),"BILLBOARD"==a.objType&&(this.blueprint.billboard={name:"Billboard",type:"folder",size:"standard",children:{poster:{name:"Poster",object:e.objConfig,key:"poster",type:"select",args:[n.billboards.map(((e,t)=>({name:e,value:t})))],onChange:function(e,t){a.poster=t,a.regen(!0)}},rule:{type:"rule"}}}),"PARTICLES"==a.objType&&(this.blueprint.particles={name:"Particles",type:"folder",size:"standard",children:{texture:{name:"Texture",object:e.objConfig,key:"part",type:"select",args:[Object.keys(e.particleList).map((t=>({name:t,value:e.particleList[t]})))],onChange:function(e,t){a.part=t}},blending:{name:"Blending",object:e.objConfig,key:"partB",type:"select",args:[Object.keys(e.blendingList).map((t=>({name:t,value:e.blendingList[t]})))],onChange:function(e,t){a.partB=t}},count:{name:"Count",object:e.objConfig,key:"partC",type:"slider",args:[0,300,1],onChange:function(e,t){a.partC=t}},size:{name:"Size",object:e.objConfig,key:"partS",type:"slider",args:[0,30,.1],onChange:function(e,t){a.partS=t}},scale:{name:"Scale",object:e.objConfig,key:"partSC",type:"slider",args:[-10,10,.1],onChange:function(e,t){a.partSC=t}},movement:{name:"Movement",type:"folder",size:"small",children:{speed:{name:"Speed",object:e.objConfig,key:"partSP",type:"slider",args:[-10,10,.1],onChange:function(e,t){a.partSP=t},sub:1},deceleration:{name:"Deceleration",object:e.objConfig,key:"partD",type:"slider",args:[-1,1,.1],onChange:function(e,t){a.partD=t},sub:1},gravity:{name:"Gravity",object:e.objConfig,key:"partG",type:"slider",args:[-10,10,.1],onChange:function(e,t){a.partG=t},sub:1},rule:{type:"rule"}}},rule:{type:"rule"}}}),a.prefab.hasText&&(this.blueprint.text={name:"Text",type:"folder",size:"standard",children:{content:{name:"Content",object:e.objConfig,key:"text",type:"text",args:["Content"],onChange:function(e,t){a.text=t,a.regen(!0)}},align:{name:"Align",object:e.objConfig,key:"tAlign",type:"select",args:[[{name:"Left",value:0},{name:"Center",value:1},{name:"Right",value:2}]],onChange:function(e,t){a.tAlign=t,a.regen(!0)}},font:{name:"Font",type:"folder",size:"small",children:{size:{name:"Size",object:e.objConfig,key:"fsize",type:"slider",args:[n.signFontMin,n.signFontMax,1],onChange:function(e,t){a.fsize=t,a.regen(!0)},sub:1},noScaleFont:{name:"Dont Scale Font",object:e.objConfig,key:"noSCF",type:"switch",onChange:function(e,t){a.noSCF=t,a.regen(!0)},sub:1},color:{name:"Color",object:d,key:"fcolor",type:"color",onChange:function(e,t){a.fcolor=t,a.regen(!0)},sub:1},outline:{name:"Outline Color",object:d,key:"ocolor",type:"color",onChange:function(e,t){a.ocolor=t,a.regen(!0)},sub:1},outlineT:{name:"Outline Thickness",object:e.objConfig,key:"othick",type:"slider",args:[1,50,1],onChange:function(e,t){a.othick=t,a.regen(!0)},sub:1}},rule:{type:"rule"}},background:{name:"Background",type:"folder",size:"small",children:{color:{name:"Color",object:d,key:"bcolor",type:"color",onChange:function(e,t){a.bcolor=t,a.regen(!0)},sub:1},visible:{name:"Visible",object:e.objConfig,key:"backVisible",type:"switch",onChange:function(e,t){a.backVisible=t,a.regen(!0)},sub:1}}},rule:{type:"rule"}}},"LEADERBOARD"==a.prefab.name&&(delete this.blueprint.text.children.content,delete this.blueprint.text.children.align)),"SPAWN_POINT"==a.objType&&(this.blueprint.spawnpoint={name:"Spawn Point",type:"folder",size:"standard",children:{cmpSpwn:{name:"Starting Area",object:e.objConfig,key:"cmpSpwn",type:"switch",onChange:function(e,t){a.cmpSpwn=t,a.regen()}},teamOnly:{name:"Team Only",object:e.objConfig,key:"teamOnly",type:"switch",onChange:function(e,t){a.teamOnly=t,a.regen()}},spread:{name:"Spawn Spread",object:e.objConfig,key:"spread",type:"slider",args:[0,50,.1],onChange:function(e,t){a.spread=t,a.regen()}},rule:{type:"rule"}}}),"LIQUID"==a.objType&&(this.blueprint.liquid={name:"Wave",type:"folder",size:"standard",children:{wave:{name:"Liquid",type:"folder",size:"small",children:{speed:{name:"Speed",object:e.objConfig,key:"wSpeed",type:"slider",args:[0,25,.1],onChange:function(e,t){a.wSpeed=t},sub:1},height:{name:"Height",object:e.objConfig,key:"wHeight",type:"slider",args:[0,5,.1],onChange:function(e,t){a.wHeight=t},sub:1},rule:{type:"rule"}}},depth:{name:"Depth",type:"folder",size:"small",children:{x:{name:"X",object:e.objConfig,key:"tilesX",type:"slider",args:[2,100,1],onChange:function(e,t){a.tilesX=t,a.regen()},sub:1},z:{name:"Z",object:e.objConfig,key:"tilesZ",type:"slider",args:[2,100,1],onChange:function(e,t){a.tilesZ=t,a.regen()},sub:1}},rule:{type:"rule"}},rule:{type:"rule"}}}),("SOUND_EMITTER"==a.objType||a.prefab.hasSound)&&(this.blueprint.sound={name:"Sound",type:"folder",closed:!0,size:"standard",children:{type:{name:"Type",object:e.objConfig,key:"snd",type:"select",args:[Object.keys(e.soundsList).map((t=>({name:t,value:e.soundsList[t]})))],onChange:function(e,t){a.snd=t}},custom:{name:"Asset ID",object:e.objConfig,key:"assetSound",type:"number",args:["Sound Asset ID",0],onChange:function(e,t){a.assetSound=t}},customSelect:{line:"wide",object:e.advancedOptions,key:"selectAudio",type:"button",args:["Select Custom"]},volume:{name:"Volume",object:e.objConfig,key:"vol",type:"slider",args:[n.emitterVolMin,n.emitterVolMax,.01],onChange:function(e,t){a.vol=t}},rate:{name:"Rate",object:e.objConfig,key:"rate",type:"slider",args:[n.emitterRateMin,n.emitterRateMax,.01],onChange:function(e,t){a.rate=t}}}},"SOUND_EMITTER"==a.objType?(this.blueprint.sound.children.dist={name:"Reference Distance",object:e.objConfig,key:"dist",type:"slider",args:[n.emitterDistMin,n.emitterDistMax,1],onChange:function(e,t){a.dist=t}},this.blueprint.sound.children.distM={name:"Distance Model",object:e.objConfig,key:"distM",type:"select",args:[[{name:"Inverse",value:0},{name:"Linear",value:1},{name:"Exponential",value:2}]],onChange:function(e,t){a.distM=t}},this.blueprint.sound.children.roll={name:"Roll-off",object:e.objConfig,key:"roll",type:"slider",args:[n.emitterRollMin,n.emitterRollMax,.01],onChange:function(e,t){a.roll=t}}):this.blueprint.sound.children.emitfrom={name:"Emit From",object:e.objConfig,key:"emitfrom",type:"select",args:[[{name:"Trigger (3D)",value:0},{name:"Player (3D)",value:1},{name:"Global (2D)",value:2}]],onChange:function(e,t){a.emitfrom=t}}),a.prefab.ai&&(this.blueprint.sound={name:"Sound",type:"folder",size:"standard",closed:!0,children:{death:{name:"Death Sound ID",object:e.objConfig,key:"deathSound",type:"number",args:["Sound Asset ID",0],onChange:function(e,t){a.deathSound=t}},customDeath:{line:"wide",object:e.advancedOptions,key:"selectDeath",type:"button",args:["Select Sound"]},idle:{name:"Idle Sound ID",object:e.objConfig,key:"idleSound",type:"number",args:["Sound Asset ID",0],onChange:function(e,t){a.idleSound=t}},customIdle:{line:"wide",object:e.advancedOptions,key:"selectIdle",type:"button",args:["Select Sound"]},shoot:{name:"Shoot Sound ID",object:e.objConfig,key:"shootSound",type:"number",args:["Sound Asset ID",0],onChange:function(e,t){a.shootSound=t}},customShoot:{line:"wide",object:e.advancedOptions,key:"selectShoot",type:"button",args:["Select Sound"]},shootHit:{name:"Shoot-Hit Sound ID",object:e.objConfig,key:"shootHitSound",type:"number",args:["Sound Asset ID",0],onChange:function(e,t){a.shootHitSound=t}},customShootHit:{line:"wide",object:e.advancedOptions,key:"selectShootHit",type:"button",args:["Select Sound"]},mel:{name:"Melee Sound ID",object:e.objConfig,key:"melSound",type:"number",args:["Sound Asset ID",0],onChange:function(e,t){a.melSound=t}},customMel:{line:"wide",object:e.advancedOptions,key:"selectMelee",type:"button",args:["Select Sound"]},melHit:{name:"Melee-Hit Sound ID",object:e.objConfig,key:"melHitSound",type:"number",args:["Sound Asset ID",0],onChange:function(e,t){a.melHitSound=t}},customMelHit:{line:"wide",object:e.advancedOptions,key:"selectMeleeHit",type:"button",args:["Select Sound"]},agro:{name:"Agro Sound ID",object:e.objConfig,key:"agroSound",type:"number",args:["Sound Asset ID",0],onChange:function(e,t){a.agroSound=t}},customAgro:{line:"wide",object:e.advancedOptions,key:"selectAgro",type:"button",args:["Select Sound"]}}}),("CUSTOM_ASSET"==a.prefab.name||a.prefab.ai||"TRIGGER"==a.prefab.name)&&(this.blueprint.animations={name:"Animations",type:"folder",size:"standard",closed:!0,children:{animS:{name:"Animation Speed",object:e.objConfig,key:"animS",type:"slider",args:[.01,10,.01],onChange:function(e,t){a.animS=t}},startAnim:{name:"Start Animation",object:e.objConfig,key:"startAnim",type:"text",args:[""],onChange:function(e,t){a.startAnim=t}}}}),m.panel.state.setActive(this.objKeys),m.panel.right.elem.innerHTML=m._build([...this.objKeys,"blueprint"])}},environment:{show:function(){if(e.resizable.restore(m.panel.right.restore),m.panel.right.locked&&!m.panel.state.isActive(this.objKeys))return;let t=["ambient","sky","light","fog"],r={},o=e.mapConfig;for(let e of t)Object.defineProperty(r,e,{get:()=>s.stringifyColor(o[e]),set:t=>o[e]=s.parseColor(t)});var l=new a({type:"folder",size:"standard"});l.addPanelButton("Environment","right"),l.add("select","Sky",e.mapConfig,"skyDome",["Solid","Gradient"].map(((e,t)=>({name:e,value:t}))),(function(t,i){[...t.children].forEach((e=>{document.getElementById("sky_"+e.value).style.display="none"})),document.getElementById("sky_"+i).style.display=null,cloud.style.display=parseInt(i)&&e.mapConfig.skyDomeTex?null:"none",e.mapConfig.skyDome=!!parseInt(i),e.regenSky()})),l.addDiv("sky_0",null,null,!e.mapConfig.skyDome).add("color","Color",r,"sky",null,(function(t,n){e.backgroundScene.background=new i.Color(n),e.regenSky()}),null,1);var c=l.addDiv("sky_1",null,null,!!e.mapConfig.skyDome),d=c.addFolder("Color",null,null,"folder","small",null,1);d.add("color","Top",e.mapConfig,"skyDomeCol0",null,(function(){e.regenSky()}),null,2),d.add("color","Middle",e.mapConfig,"skyDomeCol1",null,(function(){e.regenSky()}),null,2),d.add("color","Bottom",e.mapConfig,"skyDomeCol2",null,(function(){e.regenSky()}),null,2),c.add("switch","Cloud Texture",e.mapConfig,"skyDomeTex",null,(function(t,i){cloud.style.display=i?null:"none",e.regenSky()}),null,1);var h=l.addDiv("cloud",null,null,e.mapConfig.skyDomeTex);h.add("color","Emissive",e.mapConfig,"skyDomeEmis",null,(function(){e.regenSky()}),null,2),h.add("text","Emissive Asset ID",e.mapConfig,"skyDomeEmisTex","Emissive Asset ID",(function(){e.regenSky()}),null,2),h.add("button",null,e.advancedOptions,"selectEmissiveCloud","Select Emissive",null,!0),h.add("slider","Speed",e.mapConfig,"skyDomeMovT",[-20,20,.1],(function(){e.regenSky()}),null,2),h.add("select","Axis",e.mapConfig,"skyDomeMovD",["X","Y"].map(((e,t)=>({name:e,value:t}))),(function(){e.regenSky()}),null,2),h.add("text","Asset ID",e.mapConfig,"skyDomeTexA","Texture Asset ID",(function(){e.regenSky()}),null,2),h.add("button",null,e.advancedOptions,"selectCloud","Select Custom",null,!0),l.addRule();var u=l.addFolder("Ambient",null,null,null,null,!0);u.add("select","Sound",e.mapConfig,"ambInd",Object.keys(n.soundScapes).map((e=>({name:e,value:n.soundScapes[e]})))),u.add("number","Custom Sound ID",e.mapConfig,"ambIndC",["Sound Asset ID",0],(function(t,i){e.mapConfig.ambIndC=i})),u.add("button",null,e.advancedOptions,"selectAmb","Select Sound",null,!0),u.add("slider","Intensity",e.mapConfig,"ambientI",[.1,3,.1],(function(t,i){e.ambientLight.intensity=i})),u.add("color","Color",r,"ambient",null,(function(t,i){e.ambientLight.color.set(i)}));var p=l.addFolder("Light",null,null,null,null,!0);p.add("color","Color",r,"light",null,(function(t,i){e.skyLight.color.set(i),e.updateSun()})),p.add("slider","Distance",e.mapConfig,"lightD",[10,5e3,1],(function(){e.updateSun()})),p.add("slider","Intensity",e.mapConfig,"lightI",[.1,3,.1],(function(t,i){e.ambientLight.intensity=i}));var f=p.addFolder("Angle",null,null,null,"small",!0);f.add("slider","X",e.mapConfig,"sunAngX",[0,360,1],(function(){e.updateSun()}),null,1),f.add("slider","Y",e.mapConfig,"sunAngY",[0,360,1],(function(){e.updateSun()}),null,1);var g=l.addFolder("Shadows",null,null,null,null,!0);g.add("slider","Resolution",e.mapConfig,"shadowR",[128,4096,1]),g.add("slider","Distance",e.mapConfig,"shadowD",[128,4096,1]);var v=l.addFolder("Weather",null,null,null,null,!0).addFolder("Fog",null,null,null,"small");v.add("color","Color",r,"fog",null,(function(t,i){e.scene.fog.color.set(i)}),null,2),v.add("slider","Distance",e.mapConfig,"fogD",[10,15e3,1],(function(t,i){e.scene.fog.far=i}),null,2);var y=l.addFolder("Render",null,null,null,null,!0);y.add("select","ToneMapping",e.mapConfig,"toneMapping",n.toneTypes.map(((e,t)=>({name:e,value:t}))),(function(){}),null,2),y.add("slider","ToneMapping Exposure",e.mapConfig,"toneMappingExposure",[0,10,.1]),y.add("select","Output Encoding",e.mapConfig,"outputEncoding",n.encodingTypes.map(((e,t)=>({name:e.name,value:t}))),(function(){}),null,2),y.add("switch","Physically Correct Lights",e.mapConfig,"correctLights",null),this.blueprint=l.toJSON(),m.panel.state.setActive(this.objKeys),m.panel.right.elem.innerHTML=m._build([...this.objKeys,"blueprint"])}},terrain:{show:function(){if(e.resizable.restore(m.panel.right.restore),!m.panel.right.locked||m.panel.state.isActive(this.objKeys)){var t=new a({type:"folder",size:"standard"});t.addPanelButton("Terrain","right"),t.add("text","Seed",e.mapConfig,"terrainSeed","Seed",(()=>e.regenTerrain())),t.add("button",null,e.mapConfig,"terrainSeed","Generate Random",(function(){e.mapConfig.terrainSeed=Math.random().toString(36).substring(4),m.panel.state.refresh("panel_right_terrain"),e.regenTerrain()}),!0,1),t.add("text","Tree Seed",e.mapConfig,"terrainTSeed","Seed",(()=>e.regenTerrain())),t.add("button",null,e.mapConfig,"terrainTSeed","Generate Random",(function(){e.mapConfig.terrainTSeed=Math.random().toString(36).substring(4),m.panel.state.refresh("panel_right_terrain"),e.regenTerrain()}),!0,1),t.add("select","Easing",e.mapConfig,"terrainEase",e.EASE_LIST.map(((e,t)=>({name:e,value:t}))),(function(){m.panel.state.refresh("panel_right_terrain"),e.regenTerrain()}),null,1),t.addRule();var i=t.addFolder("Dimensions",null,null,null,null,!0);i.add("slider","Width",e.mapConfig,"terrainWidth",[n.minTerrainSize,n.maxTerrainSize,1],(()=>e.regenTerrain())),i.add("slider","Length",e.mapConfig,"terrainHeight",[n.minTerrainSize,n.maxTerrainSize,1],(()=>e.regenTerrain())),i.add("slider","Height",e.mapConfig,"terrainMntMlt",[n.minMountainMlt,n.maxMountainMlt,.05],(()=>e.regenTerrain()));var s=t.addFolder("Style",null,null,null,null,!0).addFolder("Color",null,null,null,"small");s.add("color","Snow",e.mapConfig,"terrainSnwCol",null,(()=>e.regenTerrain()),null,1),s.add("color","Mountain",e.mapConfig,"terrainMntCol",null,(()=>e.regenTerrain()),null,1),s.add("color","Grass",e.mapConfig,"terrainGrsCol",null,(()=>e.regenTerrain()),null,1),s.add("color","Dirt",e.mapConfig,"terrainDrtCol",null,(()=>e.regenTerrain()),null,1),s.add("color","Sand",e.mapConfig,"terrainSndCol",null,(()=>e.regenTerrain()),null,1),this.blueprint=t.toJSON(),m.panel.state.setActive(this.objKeys),m.panel.right.elem.innerHTML=m._build([...this.objKeys,"blueprint"])}}},zone:{show:function(){if(e.resizable.restore(m.panel.right.restore),!m.panel.right.locked||m.panel.state.isActive(this.objKeys)){var t=new a({type:"folder",size:"standard"});t.addPanelButton("Zone","right"),t.add("switch","Enabled",e.mapConfig,"zone",null,(()=>e.regenZone())),t.add("slider","Speed",e.mapConfig,"zoneSpeed",[n.minShrinkSpeed,n.maxShrinkSpeed,.1]),t.add("slider","Stages",e.mapConfig,"zoneStages",[n.minZoneStages,n.maxZoneStages,1]),t.add("slider","Wait Timer (s)",e.mapConfig,"zoneWait",[n.minZoneWait,n.maxZoneWait,1]),t.add("switch","Random Endpoint",e.mapConfig,"zoneRnd",null,(()=>e.regenZone())),t.addRule();var i=t.addFolder("Dimensions");i.add("slider","Size",e.mapConfig,"zoneSize",[n.minZoneSize,n.maxZoneSize,10],(()=>e.regenZone())),i.add("slider","Height",e.mapConfig,"zoneHeight",[n.minZoneHeight,n.maxZoneHeight,10],(()=>e.regenZone()));var s=t.addFolder("Style").addFolder("Color",null,null,null,"small");s.add("color","Top",e.mapConfig,"zoneCol0",null,(()=>e.regenZone()),null,1),s.add("color","Middle",e.mapConfig,"zoneCol1",null,(()=>e.regenZone()),null,1),s.add("color","Bottom",e.mapConfig,"zoneCol2",null,(()=>e.regenZone()),null,1),this.blueprint=t.toJSON(),m.panel.state.setActive(this.objKeys),m.panel.right.elem.innerHTML=m._build([...this.objKeys,"blueprint"])}}},ocean:{show:function(){if(e.resizable.restore(m.panel.right.restore),!m.panel.right.locked||m.panel.state.isActive(this.objKeys)){var t=new a({type:"folder",size:"standard"});t.addPanelButton("Ocean","right"),t.add("switch","Enabled",e.mapConfig,"ocean",null,(()=>e.regenOcean())),t.add("color","Water Color",e.mapConfig,"ocCol",null,(()=>e.regenOcean())),t.add("slider","Opacity",e.mapConfig,"ocOpac",[0,1,.1],(()=>e.regenOcean())),t.add("slider","Distortion",e.mapConfig,"ocDist",[0,10,.01],(()=>e.regenOcean())),t.add("slider","Wave Speed",e.mapConfig,"ocSpd",[.1,5,.1],(()=>e.regenOcean())),t.add("slider","Y Offset",e.mapConfig,"ocYOff",[-1e3,1e3,.01],(()=>e.regenOcean())),t.add("select","Reflection Resolution",e.mapConfig,"ocRefRes",[{name:"32",value:1},{name:"64",value:2},{name:"128",value:3},{name:"256",value:4},{name:"1024",value:5},{name:"2048",value:6}],(()=>e.regenOcean())),t.add("slider","Width",e.mapConfig,"ocW",[100,2e4,1],(()=>e.regenOcean())),t.add("slider","Length",e.mapConfig,"ocL",[100,2e4,1],(()=>e.regenOcean())),this.blueprint=t.toJSON(),m.panel.state.setActive(this.objKeys),m.panel.right.elem.innerHTML=m._build([...this.objKeys,"blueprint"])}}},tools:{show:function(){if(e.resizable.restore(m.panel.right.restore),m.panel.right.locked&&!m.panel.state.isActive(this.objKeys))return;let t={},i=["Space","Dir"];for(let n of i)Object.defineProperty(t,n,{get:()=>e.xyzKeys.map((t=>e.advancedOptions["planner"+t+n])),set:t=>e.xyzKeys.forEach(((i,s)=>{e.advancedOptions["planner"+i+n]=t[s]}))});var n=new a({type:"folder",size:"standard"});n.addPanelButton("Tools","right"),n.addRule();var s=n.addFolder("Optimizations",null,null,"folder","standard");s.add("button","Optimize Faces",e.advancedOptions,"optimizeFaces","Execute"),s.addRule();var r=s.addFolder("Color Merging");r.add("slider","Color Range",e.advancedOptions,"colorRange",[500,5e4,100]),r.add("button",null,e.advancedOptions,"mergeColors","Merge Colors",null,!0),n.addFolder("Text Generator",null,null,"folder","standard",!0).add("button","Enter Text",e.advancedOptions,"textGen","Open");var o=n.addFolder("Image Converter",null,null,"folder","standard",!0);o.add("number","Size",e.settings,"imageSize",null,(function(t,i){e.setSettings("imageSize",i)})),o.add("number","Depth",e.settings,"imageDepth",null,(function(t,i){e.setSettings("imageDepth",i)})),o.add("switch","Collidable",e.settings,"imageCol",null,(function(t,i){e.setSettings("imageCol",i)})),o.add("button","Convert",e.advancedOptions,"imageConvert","Convert"),o.add("button","Import",e.advancedOptions,"imageImport","Import");var l=n.addFolder("Voxel Manager",null,null,"folder","standard",!0);l.add("switch","Merge",e.settings,"mergeVoxels",null,(function(t,i){e.setSettings("mergeVoxels",i)})),l.add("number","Size",e.settings,"voxelSize",null,(function(t,i){e.setSettings("voxelSize",i)})),l.add("button","Convert",e.advancedOptions,"voxelConvert","Convert"),l.add("button","Import",e.advancedOptions,"voxelImport","Import");var c=n.addFolder("Layout Planner",null,null,"folder","standard",!0);c.add("switch","Merge",e.settings,"mergeVoxels",null,(function(t,i){e.setSettings("mergeVoxels",i)})),c.add("number","Size",e.advancedOptions,"plannerSize"),c.add("color","Color",e.advancedOptions,"plannerColor"),c.add("vector3","Cubes in XYZ",t,"Dir"),c.add("vector3","Space in XYZ",t,"Space"),c.add("button",null,e.advancedOptions,"plannerExecute","Execute",null,!0);let d={},h=["scaleMap"];for(let t of h)Object.defineProperty(d,t,{get:()=>e.xyzKeys.map((i=>e.advancedOptions[t+i])),set:i=>e.xyzKeys.forEach(((n,s)=>{e.advancedOptions[t+n]=i[s]}))});var u=n.addFolder("Timelapse",null,null,"folder","standard",!0);u.add("slider","Timer",e.advancedOptions,"timelapseMS",[100,5e3,1]),u.add("switch","Follow Objects",e.advancedOptions,"timelapseFollow"),u.add("button",null,e.advancedOptions,"timelapseMap","Execute",null,!0);var p=n.addFolder("Transform",null,null,"folder","standard",!0);p.add("vector3","Scale",d,"scaleMap"),p.add("button",null,e.advancedOptions,"scaleMap","Scale",null,!0),p.add("select","Reflection",e.advancedOptions,"reflectDir",[{name:"X",value:0},{name:"Y",value:1},{name:"Z",value:2}]),p.add("button",null,e.advancedOptions,"reflectMap","Reflect",null,!0);var f=n.addFolder("Frame",null,null,"folder","standard",!0);f.add("number","Wall Thickness",e.advancedOptions,"frameThickness","Thickness"),f.add("switch","Has Ceiling",e.advancedOptions,"frameThickness"),f.add("switch","Has Floor",e.advancedOptions,"frameFloor"),f.add("button",null,e.advancedOptions,"frameObject","Frame It",null,!0);var g=n.addFolder("Breakable",null,null,"folder","standard",!0);g.add("slider","Health",e.advancedOptions,"breakableHealth",[1,500,1]),g.add("switch","Force Collision",e.advancedOptions,"breakableCollision"),g.add("button",null,e.advancedOptions,"breakableMap","Execute",null,!0);var v=n.addFolder("Colorize",null,null,"folder","standard",!0);v.add("button","Random",e.advancedOptions,"colorizeR","Execute"),v.add("button","Gold",e.advancedOptions,"colorizeG","Execute"),v.add("button","Input",e.advancedOptions,"colorizeI","Execute"),n.add("button","Drunk Map",e.advancedOptions,"drunkMap","Execute"),this.blueprint=n.toJSON(),m.panel.state.setActive(this.objKeys),m.panel.right.elem.innerHTML=m._build([...this.objKeys,"blueprint"])}},prefab:{show:function(){if(e.resizable.restore(m.panel.right.restore),!m.panel.right.locked||m.panel.state.isActive(this.objKeys)){var t=new a({type:"folder",size:"standard"});t.addPanelButton("Prefabs","right"),t.addRule(),t.add("switch","Auto Group",e.settings,"assetAutoGroup",null,(function(t,i){e.setSettings("assetAutoGroup",i)})),t.add("slider","Rotation",e.advancedOptions,"rotation",[0,359,1]);var i=t.addFolder("Import",null,null,null,"small");i.add("button","Json",e.advancedOptions,"json","Import",null,null,1),i.add("button","File",e.advancedOptions,"file","Import",null,null,1),t.add("switch","Object Painter",e.advancedOptions,"objectPainter",null,(function(e,t){objPaint.style.display=t?null:"none"}));var n=t.addDiv("objPaint",null,null,e.advancedOptions.objectPainterType);n.add("text","JSON",e.advancedOptions,"objectPainterJson","JSON",null,null,1),n.add("select","Type",e.advancedOptions,"objectPainterType",[{name:"JSON",value:0},{name:"Junk",value:1},{name:"Cloth",value:2},{name:"Wood",value:3},{name:"Wires",value:4},{name:"Tin can",value:5},{name:"Chocolate",value:6},{name:"Carrot",value:7},{name:"Frog",value:8}],null,null,1),this.blueprint=t.toJSON(),m.panel.state.setActive(this.objKeys),m.panel.right.elem.innerHTML=m._build([...this.objKeys,"blueprint"])}}},objectList:{show:function(){if(e.resizable.restore(m.panel.right.restore),!m.panel.right.locked||m.panel.state.isActive(this.objKeys)){this.blueprint={panelButtons:{type:"panel_buttons",direction:"right",label:"Objects"}};let t=[];for(let i in e.objInsts)t[i]={},this.blueprint["Object"+i]={key:i,object:t,name:s.formatConstName(e.objInsts[i].name),type:"button",args:["Focus"],onChange:function(){e.focusObject(i)}};m.panel.state.setActive(this.objKeys),m.panel.right.elem.innerHTML=m._build([...this.objKeys,"blueprint"])}}},gui:{show:function(){if(e.resizable.restore(m.panel.right.restore),!m.panel.right.locked||m.panel.state.isActive(this.objKeys)){var t;this.blueprint={panelButtons:{type:"panel_buttons",direction:"right",label:"Custom GUIs"}},this.blueprint.rule={type:"rule"},this.blueprint.toggle={name:"Show GUI",object:u,key:"enabled",type:"switch",onChange:function(e,t){u.enabled=t,m.panel.state.refresh("panel_right_gui")}},this.blueprint.add={line:"wide",object:e,key:"addGUIElement",type:"button",args:["Add Element"]};for(var i=0;i<u.customGUIs.length;i++){if((t={name:"Element "+i+(u.customGUIs[i].lbl?" - "+u.customGUIs[i].lbl.toString().replace(/[^\w\s]+/gim,""):""),type:"folder",size:"standard",children:{}}).children.remove={id:i,line:"wide",object:e,key:"removeGUIElement",type:"button",args:["Remove Element "+i],sub:1},t.children.duplicate={id:i,line:"wide",object:e,key:"duplicateGUIElement",type:"button",args:["Duplicate Element "+i],sub:1},t.children.elementLabel={name:"Element Label",object:u.customGUIs[i],id:i,key:"lbl",type:"text",args:[""],onChange:function(e,t){u.customGUIs[this.id].lbl=t.toString().replace(/[^\w\s]+/gim,"")},onChange:function(){delayTimer("ElementLabel"+this.id,(function(){m.panel.state.refresh("panel_right_gui")}),1e3)},sub:1},t.children.type={name:"Type",object:u.customGUIs[i],id:i,key:"t",type:"select",args:[n.custGUITypes.map(((e,t)=>({name:e,value:t})))],onChange:function(e,t){u.customGUIs[this.id].t=t,m.panel.state.refresh("panel_right_gui")},sub:1},1==u.customGUIs[i].t||3==u.customGUIs[i].t){var s=u.customGUIs[i].vt||0;t.children.valueType={name:"Value Type",object:u.customGUIs[i],id:i,key:"vt",type:"select",args:[n.inputTypesGUI.map(((e,t)=>({name:e,value:t})))],onChange:function(e,t){u.customGUIs[this.id].vt=t,m.panel.state.refresh("panel_right_gui")}},t.children.text={name:s?"Key":"Text",object:u.customGUIs[i],id:i,key:"v",type:"text",args:[s?"Key":"Text"],onChange:function(e,t){u.customGUIs[this.id].v=t},sub:1}}1!=u.customGUIs[i].t&&3!=u.customGUIs[i].t||(t.children.fontsize={name:"Font Size",object:u.customGUIs[i],id:i,key:"f",type:"slider",args:[0,100,1],onChange:function(e,t){u.customGUIs[this.id].f=t},sub:1}),2==u.customGUIs[i].t&&(t.children.img={name:"Image Asset ID",object:u.customGUIs[i],id:i,key:"s",type:"text",args:["ID"],onChange:function(e,t){u.customGUIs[this.id].s=t},sub:1},t.children.imgBtn={id:i,line:"wide",object:e,key:"selectImage",type:"button",args:["Select Image"],sub:1}),2!=u.customGUIs[i].t&&(t.children.color={name:"Color",object:u.customGUIs[i],id:i,key:"c",type:"color",onChange:function(e,t){u.customGUIs[this.id].c=t},sub:1}),t.children.opacity={name:"Opacity",object:u.customGUIs[i],id:i,key:"o",type:"slider",args:[0,1,.1],onChange:function(e,t){u.customGUIs[this.id].o=t},sub:1},t.children.x={name:"X",object:u.customGUIs[i],id:i,key:"x",type:"slider",args:[0,100,1],onChange:function(e,t){u.customGUIs[this.id].x=t},sub:1},t.children.y={name:"Y",object:u.customGUIs[i],id:i,key:"y",type:"slider",args:[0,100,1],onChange:function(e,t){u.customGUIs[this.id].y=t},sub:1},t.children.width={name:"Width",object:u.customGUIs[i],id:i,key:"w",type:"slider",args:[0,2e3,1],onChange:function(e,t){u.customGUIs[this.id].w=t},sub:1},t.children.height={name:"Height",object:u.customGUIs[i],id:i,key:"h",type:"slider",args:[0,2e3,1],onChange:function(e,t){u.customGUIs[this.id].h=t},sub:1},t.children.zIndex={name:"Order Index",object:u.customGUIs[i],id:i,key:"z",type:"slider",args:[0,2e3,1],onChange:function(e,t){u.customGUIs[this.id].z=t},sub:1},t.children.hide={name:"Hide",object:u.customGUIs[i],id:i,key:"nv",type:"switch",onChange:function(e,t){u.customGUIs[this.id].nv=~~!!t},sub:1},t.children.elementId={name:"Element Id",object:u.customGUIs[i],id:i,key:"id",type:"slider",args:[0,2e3,1],onChange:function(e,t){u.customGUIs[this.id].id=t},sub:1},this.blueprint["element"+i]=t}m.panel.state.setActive(this.objKeys),m.panel.right.elem.innerHTML=m._build([...this.objKeys,"blueprint"])}}}}},_window:{controls:{default:{gen:function(){return this.blueprint={rule:{type:"rule"}},this.blueprint.movement={name:"Movement",type:"folder",size:"standard",children:{fowardKey:{name:"Fly forward",object:e.settings,key:"fowardKey",type:"key",args:[[m._html.arrow("up")],!0],onChange:function(t,i){i=i.toUpperCase(),e.setSettings(this.key,i)}},backwardKey:{name:"Fly backwards",object:e.settings,key:"backwardKey",type:"key",args:[[m._html.arrow("down")],!0],onChange:function(t,i){i=i.toUpperCase(),e.setSettings(this.key,i)}},leftKey:{name:"Fly left",object:e.settings,key:"leftKey",type:"key",args:[[m._html.arrow("left")],!0],onChange:function(t,i){i=i.toUpperCase(),e.setSettings(this.key,i)}},rightKey:{name:"Fly right",object:e.settings,key:"rightKey",type:"key",args:[[m._html.arrow("right")],!0],onChange:function(t,i){i=i.toUpperCase(),e.setSettings(this.key,i)}},upKey:{name:"Fly up",object:e.settings,key:"upKey",type:"key",args:[[],!0],onChange:function(t,i){i=i.toUpperCase(),e.setSettings(this.key,i)}},downKey:{name:"Fly down",object:e.settings,key:"downKey",type:"key",args:[[],!0],onChange:function(t,i){i=i.toUpperCase(),e.setSettings(this.key,i)}},shiftKey:{name:"Hold to fly faster",object:{val:"Shift"},key:"val",type:"key"},speed:{name:"Speed",type:"folder",size:"small",children:{speedNormal:{name:"Normal",object:e.settings,key:"speedNormal",type:"number",onChange:function(t,i){e.setSettings("speedNormal",Math.abs(i)||e.defaultSettings.speedNormal)},sub:1},speedSprint:{name:"Sprinting",object:e.settings,key:"speedSprint",type:"number",onChange:function(t,i){e.setSettings("speedSprint",Math.abs(i)||e.defaultSettings.speedSprint)},sub:1},speedReset:{name:"Reset Speed",object:e.advancedOptions,key:"speedReset",type:"button",args:["Reset"],sub:1}}}}},this.blueprint.transform={name:"Transform",type:"folder",size:"standard",children:{translateKey:{name:"Translate",object:e.settings,key:"translateKey",type:"key",args:[[],!0],onChange:function(t,i){i=i.toUpperCase(),e.setSettings(this.key,i)}},rotateKey:{name:"Rotate",object:e.settings,key:"rotateKey",type:"key",args:[[],!0],onChange:function(t,i){i=i.toUpperCase(),e.setSettings(this.key,i)}},scaleKey:{name:"Scale",object:e.settings,key:"scaleKey",type:"key",args:[[],!0],onChange:function(t,i){i=i.toUpperCase(),e.setSettings(this.key,i)}},transformSpaceKey:{name:"Toggle World / Local space",object:e.settings,key:"transformSpaceKey",type:"key",args:[[],!0],onChange:function(t,i){i=i.toUpperCase(),e.setSettings(this.key,i)}}}},this.blueprint.edit={name:"Edit",type:"folder",size:"standard",children:{...[{keys:["Ctrl + Z"],name:"Undo"},{keys:["Ctrl + Y","Shift + Ctrl + Z"],name:"Redo"}].map((e=>({name:e.name,object:{val:e.keys.join(" or ")},key:"val",type:"key"})))}},this.blueprint.object={name:"Object",type:"folder",size:"standard",children:{faceModeKey:{name:"Face Selection Mode",object:e.settings,key:"faceModeKey",type:"key",args:[[],!0],onChange:function(t,i){i=i.toUpperCase(),e.setSettings(this.key,i),e.updateFaceSelection()}},groupModeKey:{name:"Group Selection Mode",object:e.settings,key:"groupModeKey",type:"key",args:[[],!0],onChange:function(t,i){i=i.toUpperCase(),e.setSettings(this.key,i),e.updateGroupSelection()}},wireframeKey:{name:"Wireframe Mode",object:e.settings,key:"wireframeKey",type:"key",args:[[],!0],onChange:function(t,i){i=i.toUpperCase(),e.setSettings(this.key,i),e.updateWireframe()}},delElement:{name:"Delete element",object:{val:["Del","Backspace"].join(" or ")},key:"val",type:"key"},snapping:{name:"Toggle snapping",object:{val:"Control"},key:"val",type:"key"},collidable:{name:"Toggle collidable",object:{val:"Shift + C"},key:"val",type:"key"},visible:{name:"Toggle visibilty",object:{val:"Shift + V"},key:"val",type:"key"}}},m._build([...this.objKeys,"blueprint"])}},advanced:{gen:function(){return this.blueprint={textureKey:{name:"Open Texture/Model List",object:e.settings,key:"textureKey",type:"key",args:[[],!0],onChange:function(t,i){i=i.toUpperCase(),e.setSettings(this.key,i)}},scriptingKey:{name:"Open Scripting Window",object:e.settings,key:"scriptingKey",type:"key",args:[[],!0],onChange:function(t,i){i=i.toUpperCase(),e.setSettings(this.key,i)}},placeHolderKey:{name:"Create placeholder",object:e.settings,key:"placeHolderKey",type:"key",args:[[],!0],onChange:function(t,i){i=i.toUpperCase(),e.setSettings(this.key,i)}},createCubeKey:{name:"Create Cube",object:e.settings,key:"createCubeKey",type:"key",args:[[],!0],onChange:function(t,i){i=i.toUpperCase(),e.setSettings(this.key,i)}},createGateKey:{name:"Create Gate",object:e.settings,key:"createGateKey",type:"key",args:[[],!0],onChange:function(t,i){i=i.toUpperCase(),e.setSettings(this.key,i)}},createTriggerKey:{name:"Create Trigger",object:e.settings,key:"createTriggerKey",type:"key",args:[[],!0],onChange:function(t,i){i=i.toUpperCase(),e.setSettings(this.key,i)}},hitbox:{name:"Hitbox fixer",object:{val:"Shift + F"},key:"val",type:"key"},flipXZ:{name:"Flip x/z size",object:{val:"F"},key:"val",type:"key"},quickAddKey:{name:"Quick Add",object:e.settings,key:"quickAddKey",type:"key",args:[[],!0],onChange:function(t,i){i=i.toUpperCase(),e.setSettings(this.key,i)}},rule:{type:"rule"}},this.blueprint.group={name:"Group",type:"folder",size:"standard",children:{...[{keys:["Shift + Alt + G"],name:"Remove all groups"},{keys:["Shift + G"],name:"Create group / Remove group if exist"},{keys:["Shift + R"],name:"Duplicate Group / Object"},{keys:["Ctrl + C"],name:"Copy group"},{keys:["Ctrl + V"],name:"Paste group"}].map((e=>({name:e.name,object:{val:e.keys.join(" or ")},key:"val",type:"key"})))}},this.blueprint.file={name:"File",type:"folder",size:"standard",children:{...[{keys:["Shift + Click + Import"],name:"Import from file"},{keys:["Shift + Click + Export"],name:"Export & copy"}].map((e=>({name:e.name,object:{val:e.keys.join(" or ")},key:"val",type:"key"})))}},this.blueprint.file={name:"File",type:"folder",size:"standard",children:{...[{keys:["Shift + Click (w/ Objectpainter)"],name:"Paste preset JSON"}].map((e=>({name:e.name,object:{val:e.keys.join(" or ")},key:"val",type:"key"})))}},m._build([...this.objKeys,"blueprint"])}}},settings:{general:{gen:function(){return this.blueprint={controls:{name:"Controls",object:{},key:"",type:"button",args:["Open Controls"],onChange:function(){showWindow(1)}},autoBackups:{name:"Auto Backup",object:e.settings,key:"autoBackups",type:"switch",onChange:function(t,i){e.setSettings("autoBackups",!!i),e.initAutoBackup()}},backupTimer:{name:"Backup Timer (Minutes)",object:e.settings,key:"backupTimer",type:"slider",args:[1,30,1],onChange:function(t,i){e.setSettings("backupTimer",Math.abs(i)),e.initAutoBackup()}},uiScale:{name:"UI Scale",object:e.settings,key:"uiScale",type:"slider",args:[.5,1.5,.1],onChange:function(t,i){e.setSettings("uiScale",i),e.scaleUI()}},pointerLock:{name:"Pointer Lock",object:e.settings,key:"pointerLock",type:"switch",onChange:function(t,i){e.setSettings("pointerLock",i)}},disableWarnings:{name:"Disable Warnings",object:e.settings,key:"disableWarnings",type:"switch",onChange:function(t,i){e.setSettings("disableWarnings",i),e.clearWarnings()}},testInEditor:{name:"Test Map in Editor",object:e.settings,key:"testInEditor",type:"switch",onChange:function(t,i){e.setSettings("testInEditor",i)}},autoLogin:{name:"Autologin",object:e.settings,key:"autoLog",type:"switch",onChange:function(t,i){e.setSettings("autoLog",i)}},rule:{type:"rule"},render:{name:"Render",type:"folder",size:"standard",closed:!0,children:{res:{name:"Resolution",object:e.settings,key:"resMltV",type:"slider",args:[.1,2,.1],onChange:function(t,i){e.setSettings("resMltV",Math.abs(i)),e.setResMlt()}},antiAlias:{name:"Anti-aliasing",object:e.settings,key:"resMltV",type:"switch",onChange:function(t,i){e.setSettings("antiAlias",i),alert("This change will occur after you refresh")}},renderDist:{name:"Render Distance",object:e.settings,key:"renderDist",type:"slider",args:[100,2e4,50],onChange:function(t,i){e.setSettings("renderDist",i),e.camera&&(e.camera.far=Math.abs(i),e.camera.updateProjectionMatrix())}}}},history:{name:"History",type:"folder",size:"standard",closed:!0,children:{disable:{name:"Disable",object:e.settings,key:"disableHistory",type:"switch",onChange:function(t,i){grid.style.display=i?"none":null,e.setSettings("disableHistory",i),e.toggleHistory(i)}},history:{type:"div",id:"grid",show:!e.settings.disableHistory,children:{limit:{name:"Limit",object:e.settings,key:"historyLimit",type:"slider",args:[0,1e3,1],onChange:function(t,i){e.setSettings("historyLimit",i)},sub:1}}}}},game:{name:"Game",type:"folder",size:"standard",closed:!0,children:{showRealHitbox:{name:"Show Real Hitbox",object:e.settings,key:"showRealHitbox",type:"switch",onChange:function(i,n){e.setSettings("showRealHitbox",n),t.showRealHitbox=n}}}},scripting:{name:"Scripting",type:"folder",size:"standard",closed:!0,children:{scriptFont:{name:"Scripting Font Size",object:e.settings,key:"scriptFont",type:"slider",args:[5,30,1],onChange:function(t,i){e.setSettings("scriptFont",i)}}}}},m._build([...this.objKeys,"blueprint"])}},display:{gen:function(){return this.blueprint={showFPS:{name:"Show FPS",object:e.settings,key:"showFPS",type:"switch",onChange:function(t,i){e.setSettings("showFPS",i),u.showFPS=i}},darkMode:{name:"Dark Mode",object:e.settings,key:"darkMode",type:"switch",onChange:function(t,i){e.setSettings("darkMode",i),e.updateTheme()}},rule:{type:"rule"},grid:{name:"Grid",type:"folder",size:"standard",children:{gridVisibility:{name:"Visible",object:e.settings,key:"gridVisibility",type:"switch",onChange:function(t,i){grid.style.display=i?null:"none",e.setSettings("gridVisibility",i),e.updateGridHelper()}},grid:{type:"div",id:"grid",show:e.settings.gridVisibility,children:{gridOpacity:{name:"Opacity",object:e.settings,key:"gridOpacity",type:"slider",args:[.05,1,.05],onChange:function(t,i){e.setSettings("gridOpacity",i),e.updateGridHelper()},sub:1},gridSize:{name:"Size",object:e.settings,key:"gridSize",type:"number",onChange:function(t,i){e.setSettings("gridSize",Math.abs(i)),e.updateGridHelper()},sub:1},gridSpacing:{name:"Spacing",object:e.settings,key:"gridSpacing",type:"number",onChange:function(t,i){e.setSettings("gridSpacing",Math.abs(i)||e.defaultSettings.gridSpacing),e.updateGridHelper()},sub:1}}},gridReset:{name:"Reset Grid",object:e.advancedOptions,key:"gridReset",type:"button",args:["Reset"]}}},deathBarrier:{name:"Death Barrier",type:"folder",size:"standard",children:{dbVisibility:{name:"Visible",object:e.settings,key:"dbVisibility",type:"switch",onChange:function(t,i){deathBarrier.style.display=i?null:"none",e.setSettings("dbVisibility",i),e.updateDeathBarrier()}},deathBarrier:{type:"div",id:"deathBarrier",show:e.settings.dbVisibility,children:{dbOpacity:{name:"Opacity",object:e.settings,key:"dbOpacity",type:"slider",args:[.05,1,.05],onChange:function(t,i){e.setSettings("dbOpacity",i),e.updateDeathBarrier()},sub:1}}},dbReset:{name:"Reset Barrier",object:e.advancedOptions,key:"dbReset",type:"button",args:["Reset"]}}}},m._build([...this.objKeys,"blueprint"])}},object:{gen:function(){return this.blueprint={triggerCons:{name:"Object Connections",object:e.settings,key:"triggerCons",type:"switch",onChange:function(t,i){e.setSettings("triggerCons",i),e.checkConnections()}},selectThrough:{name:"Select through invisible objects [ALT]",object:e.settings,key:"selectThroughInvis",type:"switch",onChange:function(t,i){e.setSettings("selectThroughInvis",i)}},borderVisuals:{name:"Object Border Visuals",object:e.settings,key:"borderVisuals",type:"switch",onChange:function(t,i){e.setSettings("borderVisuals",i),e.updateBorderVisuals()}},res:{name:"Highlight",object:e.settings,key:"objectHighlight",type:"switch",onChange:function(t,i){e.setSettings("objectHighlight",i)}},antiAlias:{name:"Create Near",object:e.settings,key:"createObjectNear",type:"switch",onChange:function(t,i){e.setSettings("createObjectNear",i)}},togLightCones:{name:"Lightcone Boundingbox",object:e.advancedOptions,key:"togLightCones",type:"button",args:["Toggle"]},togModels:{name:"Model & Asset Boundingbox",object:e.advancedOptions,key:"togModels",type:"button",args:["Toggle"]},rule:{type:"rule"},config:{name:"Config",type:"folder",size:"standard",children:{degToRad:{name:"Anti Radians",object:e.settings,key:"degToRad",type:"switch",onChange:function(t,i){e.setSettings("degToRad",i)}},preserveFolderState:{name:"Preserve Folders",object:e.settings,key:"preserveFolderState",type:"switch",onChange:function(t,i){e.setSettings("preserveFolderState",i)}}}},snapping:{name:"Snapping",type:"folder",size:"standard",children:{translation:{name:"Translation",object:e.settings,key:"translationSnapping",type:"slider",args:[.001,25,.001],onChange:function(t,i){e.setSettings("translationSnapping",Math.abs(i)||e.defaultSettings.translationSnapping),e.updateSnapping()}},rotation:{name:"Rotation",object:e.settings,key:"rotationSnapping",type:"slider",args:[.001,45,.001],onChange:function(t,i){e.setSettings("rotationSnapping",Math.abs(i)||e.defaultSettings.rotationSnapping),e.updateSnapping()}},scale:{name:"Scale",object:e.settings,key:"scaleSnapping",type:"slider",args:[.001,25,.001],onChange:function(t,i){e.setSettings("scaleSnapping",Math.abs(i)||e.defaultSettings.scaleSnapping),e.updateSnapping()}},reset:{name:"Reset Snapping",object:e.advancedOptions,key:"snappingReset",type:"button",args:["Reset"]}}}},m._build([...this.objKeys,"blueprint"])}},quickgui:{gen:function(){return this.blueprint={enabled:{name:"Enabled",object:e.settings,key:"quickGUI",type:"switch",onChange:function(t,i){quickgui.style.display=i?null:"none",e.setSettings("quickGUI",i)}},quickgui:{type:"div",id:"quickgui",show:e.settings.quickGUI,children:{quickGUIOpen:{name:"Open On",object:e.settings,key:"quickGUIOpen",type:"select",args:[[{name:"Middle Click",value:0},{name:"Right Click",value:1}]],onChange:function(t,i){e.setSettings("quickGUIOpen",parseInt(i))},sub:1}}}},m._build([...this.objKeys,"blueprint"])}}},quickaddcust:{gen:function(){let e=[],t=[],i=[];for(let a in r.prefabs)r.prefabs[a].localOnly&&n.isProd||r.prefabs[a].custom||r.prefabs[a].noExport||""!=r.prefabs[a].name&&(r.prefabs[a].tool||r.prefabs[a].tool2?t:r.prefabs[a].gen?e:i).push({name:s.formatConstName(r.prefabs[a].name),object:{},key:"",type:"button",args:["Add"],onChange:function(){windows[3].changeButton({name:s.formatConstName(r.prefabs[a].name),desc:"Click to add",item:a})}});return this.blueprint={rule:{type:"rule"},general:{name:"General",type:"folder",size:"standard",children:{customAsset:{name:"Custom Asset",object:{},key:"",type:"button",args:["Add"],onChange:function(){windows[3].changeButton({name:"Custom Asset",desc:"Import community made assets",cust:!0})}},placeholder:{name:"Placeholder",object:{},key:"",type:"button",args:["Add"],onChange:function(){windows[3].changeButton({name:"Placeholder",desc:"Stretch over objects to form a group",place:!0})}}}},basic:{name:"Basic",type:"folder",size:"standard",children:{...i}},models:{name:"Models",type:"folder",size:"standard",children:{...e}},tools:{name:"Tools",type:"folder",size:"standard",children:{...t}}},m._build([...this.objKeys,"blueprint"])}}},_quicksettings:{gen:function(){return this.blueprint={duplicate:{name:"Duplicate",type:"toolbar",pos:"option",onClick:function(){"PLACEHOLDER"==e.quickGUI.obj.objType?e.duplicateGroup(e.quickGUI.obj):e.duplicateObject(e.quickGUI.obj)}},delete:{name:"Delete",type:"toolbar",pos:"option",onClick:function(){"PLACEHOLDER"==e.quickGUI.obj.objType?e.removeGroup(e.quickGUI.obj):e.removeObject({boundingMesh:e.quickGUI.obj})}},rule0:{type:"rule"},group:{name:"Group",type:"toolbar",pos:"menu",children:{form:{name:"Create",type:"toolbar",pos:"option",onClick:function(){e.copyObjects(!1,!0,!1,e.quickGUI.obj)}},separate:{name:"Stop",type:"toolbar",pos:"option",onClick:function(){e.stopGroup(!1,e.quickGUI.obj)}},rule:{type:"rule"},copy:{name:"Copy",type:"toolbar",pos:"option",onClick:function(){e.copyObjects(!1,!1,!1,e.quickGUI.obj)}},paste:{name:"Paste",type:"toolbar",pos:"option",onClick:function(){e.pasteObjects(e.quickGUI.obj)}}}},rule1:{type:"rule"},fixHitbox:{name:"Fix Hitbox",type:"toolbar",pos:"option",onClick:function(){e.fixHitbox(this.quickGUI.obj)}},rule2:{type:"rule"},replace:{name:"Replace",type:"toolbar",pos:"menu",children:{form:{name:"JSON",type:"toolbar",pos:"option",onClick:function(){e.jsonInput(!1,e.quickGUI.obj)}},separate:{name:"File",type:"toolbar",pos:"option",onClick:function(){e.jsonInput(!0,e.quickGUI.obj)}}}},rule3:{type:"rule"},json:{name:"JSON",type:"toolbar",pos:"menu",children:{textArea:{type:"toolbar",pos:"textarea"}}}},m._build([...this.objKeys,"blueprint"])}}};return s.getObjKeys(m,["_html","update","action","_build","state","blueprint","folderStore","show","gen","elem","restore"]).forEach((e=>{let t=m,i=e.split("|");i.forEach((e=>t=t[e])),t.objKeys=i})),window.addEventListener("mousemove",m.update.number.mousemove),window.addEventListener("mouseup",m.update.number.mouseup),window.addEventListener("keydown",m.update.key.keydown),window.addEventListener("mousedown",m.update.key.mousedown),m.update.color.init(),window.GUI=s.removePrivateKeys(m),m}},function(e,t,i){"use strict";i.r(t),i.d(t,"FBXLoader",(function(){return $e}));var n=i(0),s={};function a(e){return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))}function r(e){return new Worker(e)}try{URL.revokeObjectURL(a(""))}catch(e){a=function(e){return"data:application/javascript;charset=UTF-8,"+encodeURI(e)},r=function(e){return new Worker(e,{type:"module"})}}var o=Uint8Array,l=Uint16Array,c=Uint32Array,d=new o([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),h=new o([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),u=new o([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);function p(e,t){for(var i=new l(31),n=0;n<31;++n)i[n]=t+=1<<e[n-1];var s=new c(i[30]);for(n=1;n<30;++n)for(var a=i[n];a<i[n+1];++a)s[a]=a-i[n]<<5|n;return[i,s]}var f=p(d,2),m=f[0],g=f[1];m[28]=258,g[258]=28;for(var v=p(h,0),y=v[0],b=v[1],w=new l(32768),x=0;x<32768;++x){var S=(43690&x)>>>1|(21845&x)<<1;S=(61680&(S=(52428&S)>>>2|(13107&S)<<2))>>>4|(3855&S)<<4,w[x]=((65280&S)>>>8|(255&S)<<8)>>>1}function M(e,t,i){for(var n=e.length,s=0,a=new l(t);s<n;++s)++a[e[s]-1];var r,o=new l(t);for(s=0;s<t;++s)o[s]=o[s-1]+a[s-1]<<1;if(i){r=new l(1<<t);var c=15-t;for(s=0;s<n;++s)if(e[s])for(var d=s<<4|e[s],h=t-e[s],u=o[e[s]-1]++<<h,p=u|(1<<h)-1;u<=p;++u)r[w[u]>>>c]=d}else for(r=new l(n),s=0;s<n;++s)e[s]&&(r[s]=w[o[e[s]-1]++]>>>15-e[s]);return r}var k=new o(288);for(x=0;x<144;++x)k[x]=8;for(x=144;x<256;++x)k[x]=9;for(x=256;x<280;++x)k[x]=7;for(x=280;x<288;++x)k[x]=8;var _=new o(32);for(x=0;x<32;++x)_[x]=5;var T=M(k,9,0),C=M(k,9,1),I=M(_,5,0),A=M(_,5,1);function R(e){for(var t=e[0],i=1;i<e.length;++i)e[i]>t&&(t=e[i]);return t}function P(e,t,i){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(7&t)&i}function E(e,t){var i=t/8|0;return(e[i]|e[i+1]<<8|e[i+2]<<16)>>(7&t)}function D(e){return(e/8|0)+(7&e&&1)}function O(e,t,i){(null==t||t<0)&&(t=0),(null==i||i>e.length)&&(i=e.length);var n=new(e instanceof l?l:e instanceof c?c:o)(i-t);return n.set(e.subarray(t,i)),n}function L(e,t,i){var n=e.length;if(!n||i&&!i.l&&n<5)return t||new o(0);var s=!t||i,a=!i||i.i;function r(e){var i=t.length;if(e>i){var n=new o(Math.max(2*i,e));n.set(t),t=n}}i||(i={}),t||(t=new o(3*n));var l=i.f||0,c=i.p||0,p=i.b||0,f=i.l,g=i.d,v=i.m,b=i.n,w=8*n;do{if(!f){i.f=l=P(e,c,1);var x=P(e,c+1,3);if(c+=3,!x){var S=e[(H=D(c)+4)-4]|e[H-3]<<8,k=H+S;if(k>n){if(a)throw"unexpected EOF";break}s&&r(p+S),t.set(e.subarray(H,k),p),i.b=p+=S,i.p=c=8*k;continue}if(1==x)f=C,g=A,v=9,b=5;else{if(2!=x)throw"invalid block type";var _=P(e,c,31)+257,T=P(e,c+10,15)+4,I=_+P(e,c+5,31)+1;c+=14;for(var L=new o(I),j=new o(19),z=0;z<T;++z)j[u[z]]=P(e,c+3*z,7);c+=3*T;var B=R(j),N=(1<<B)-1,F=M(j,B,1);for(z=0;z<I;){var H,U=F[P(e,c,N)];if(c+=15&U,(H=U>>>4)<16)L[z++]=H;else{var V=0,G=0;for(16==H?(G=3+P(e,c,3),c+=2,V=L[z-1]):17==H?(G=3+P(e,c,7),c+=3):18==H&&(G=11+P(e,c,127),c+=7);G--;)L[z++]=V}}var W=L.subarray(0,_),q=L.subarray(_);v=R(W),b=R(q),f=M(W,v,1),g=M(q,b,1)}if(c>w){if(a)throw"unexpected EOF";break}}s&&r(p+131072);for(var Y=(1<<v)-1,K=(1<<b)-1,X=c;;X=c){var Z=(V=f[E(e,c)&Y])>>>4;if((c+=15&V)>w){if(a)throw"unexpected EOF";break}if(!V)throw"invalid length/literal";if(Z<256)t[p++]=Z;else{if(256==Z){X=c,f=null;break}var J=Z-254;Z>264&&(J=P(e,c,(1<<(ee=d[z=Z-257]))-1)+m[z],c+=ee);var Q=g[E(e,c)&K],$=Q>>>4;if(!Q)throw"invalid distance";c+=15&Q;q=y[$];if($>3){var ee=h[$];q+=E(e,c)&(1<<ee)-1,c+=ee}if(c>w){if(a)throw"unexpected EOF";break}s&&r(p+131072);for(var te=p+J;p<te;p+=4)t[p]=t[p-q],t[p+1]=t[p+1-q],t[p+2]=t[p+2-q],t[p+3]=t[p+3-q];p=te}}i.l=f,i.p=X,i.b=p,f&&(l=1,i.m=v,i.d=g,i.n=b)}while(!l);return p==t.length?t:O(t,0,p)}function j(e,t,i){i<<=7&t;var n=t/8|0;e[n]|=i,e[n+1]|=i>>>8}function z(e,t,i){i<<=7&t;var n=t/8|0;e[n]|=i,e[n+1]|=i>>>8,e[n+2]|=i>>>16}function B(e,t){for(var i=[],n=0;n<e.length;++n)e[n]&&i.push({s:n,f:e[n]});var s=i.length,a=i.slice();if(!s)return[W,0];if(1==s){var r=new o(i[0].s+1);return r[i[0].s]=1,[r,1]}i.sort((function(e,t){return e.f-t.f})),i.push({s:-1,f:25001});var c=i[0],d=i[1],h=0,u=1,p=2;for(i[0]={s:-1,f:c.f+d.f,l:c,r:d};u!=s-1;)c=i[i[h].f<i[p].f?h++:p++],d=i[h!=u&&i[h].f<i[p].f?h++:p++],i[u++]={s:-1,f:c.f+d.f,l:c,r:d};var f=a[0].s;for(n=1;n<s;++n)a[n].s>f&&(f=a[n].s);var m=new l(f+1),g=N(i[u-1],m,0);if(g>t){n=0;var v=0,y=g-t,b=1<<y;for(a.sort((function(e,t){return m[t.s]-m[e.s]||e.f-t.f}));n<s;++n){var w=a[n].s;if(!(m[w]>t))break;v+=b-(1<<g-m[w]),m[w]=t}for(v>>>=y;v>0;){var x=a[n].s;m[x]<t?v-=1<<t-m[x]++-1:++n}for(;n>=0&&v;--n){var S=a[n].s;m[S]==t&&(--m[S],++v)}g=t}return[new o(m),g]}function N(e,t,i){return-1==e.s?Math.max(N(e.l,t,i+1),N(e.r,t,i+1)):t[e.s]=i}function F(e){for(var t=e.length;t&&!e[--t];);var i=new l(++t),n=0,s=e[0],a=1;function r(e){i[n++]=e}for(var o=1;o<=t;++o)if(e[o]==s&&o!=t)++a;else{if(!s&&a>2){for(;a>138;a-=138)r(32754);a>2&&(r(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(r(s),--a;a>6;a-=6)r(8304);a>2&&(r(a-3<<5|8208),a=0)}for(;a--;)r(s);a=1,s=e[o]}return[i.subarray(0,n),t]}function H(e,t){for(var i=0,n=0;n<t.length;++n)i+=e[n]*t[n];return i}function U(e,t,i){var n=i.length,s=D(t+2);e[s]=255&n,e[s+1]=n>>>8,e[s+2]=255^e[s],e[s+3]=255^e[s+1];for(var a=0;a<n;++a)e[s+a+4]=i[a];return 8*(s+4+n)}function V(e,t,i,n,s,a,r,o,c,p,f){j(t,f++,i),++s[256];for(var m=B(s,15),g=m[0],v=m[1],y=B(a,15),b=y[0],w=y[1],x=F(g),S=x[0],C=x[1],A=F(b),R=A[0],P=A[1],E=new l(19),D=0;D<S.length;++D)E[31&S[D]]++;for(D=0;D<R.length;++D)E[31&R[D]]++;for(var O=B(E,7),L=O[0],N=O[1],V=19;V>4&&!L[u[V-1]];--V);var G,W,q,Y,K=p+5<<3,X=H(s,k)+H(a,_)+r,Z=H(s,g)+H(a,b)+r+14+3*V+H(E,L)+(2*E[16]+3*E[17]+7*E[18]);if(K<=X&&K<=Z)return U(t,f,e.subarray(c,c+p));if(j(t,f,1+(Z<X)),f+=2,Z<X){G=M(g,v,0),W=g,q=M(b,w,0),Y=b;var J=M(L,N,0);j(t,f,C-257),j(t,f+5,P-1),j(t,f+10,V-4),f+=14;for(D=0;D<V;++D)j(t,f+3*D,L[u[D]]);f+=3*V;for(var Q=[S,R],$=0;$<2;++$){var ee=Q[$];for(D=0;D<ee.length;++D){j(t,f,J[te=31&ee[D]]),f+=L[te],te>15&&(j(t,f,ee[D]>>>5&127),f+=ee[D]>>>12)}}}else G=T,W=k,q=I,Y=_;for(D=0;D<o;++D)if(n[D]>255){var te;z(t,f,G[(te=n[D]>>>18&31)+257]),f+=W[te+257],te>7&&(j(t,f,n[D]>>>23&31),f+=d[te]);var ie=31&n[D];z(t,f,q[ie]),f+=Y[ie],ie>3&&(z(t,f,n[D]>>>5&8191),f+=h[ie])}else z(t,f,G[n[D]]),f+=W[n[D]];return z(t,f,G[256]),f+W[256]}var G=new c([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),W=new o(0);function q(e,t,i,n,s,a){var r=e.length,u=new o(n+r+5*(1+Math.ceil(r/7e3))+s),p=u.subarray(n,u.length-s),f=0;if(!t||r<8)for(var m=0;m<=r;m+=65535){var v=m+65535;v<r?f=U(p,f,e.subarray(m,v)):(p[m]=a,f=U(p,f,e.subarray(m,r)))}else{var y=G[t-1],w=y>>>13,x=8191&y,S=(1<<i)-1,M=new l(32768),k=new l(S+1),_=Math.ceil(i/3),T=2*_;function re(t){return(e[t]^e[t+1]<<_^e[t+2]<<T)&S}for(var C=new c(25e3),I=new l(288),A=new l(32),R=0,P=0,E=(m=0,0),L=0,j=0;m<r;++m){var z=re(m),B=32767&m,N=k[z];if(M[B]=N,k[z]=B,L<=m){var F=r-m;if((R>7e3||E>24576)&&F>423){f=V(e,p,0,C,I,A,P,E,j,m-j,f),E=R=P=0,j=m;for(var H=0;H<286;++H)I[H]=0;for(H=0;H<30;++H)A[H]=0}var q=2,Y=0,K=x,X=B-N&32767;if(F>2&&z==re(m-X))for(var Z=Math.min(w,F)-1,J=Math.min(32767,m),Q=Math.min(258,F);X<=J&&--K&&B!=N;){if(e[m+q]==e[m+q-X]){for(var $=0;$<Q&&e[m+$]==e[m+$-X];++$);if($>q){if(q=$,Y=X,$>Z)break;var ee=Math.min(X,$-2),te=0;for(H=0;H<ee;++H){var ie=m-X+H+32768&32767,ne=ie-M[ie]+32768&32767;ne>te&&(te=ne,N=ie)}}}X+=(B=N)-(N=M[B])+32768&32767}if(Y){C[E++]=g[q]<<18|268435456|b[Y];var se=31&g[q],ae=31&b[Y];P+=d[se]+h[ae],++I[257+se],++A[ae],L=m+q,++R}else C[E++]=e[m],++I[e[m]]}}f=V(e,p,a,C,I,A,P,E,j,m-j,f),!a&&7&f&&(f=U(p,f+1,W))}return O(u,0,n+D(f)+s)}var Y=function(){for(var e=new c(256),t=0;t<256;++t){for(var i=t,n=9;--n;)i=(1&i&&3988292384)^i>>>1;e[t]=i}return e}();function K(){var e=-1;return{p:function(t){for(var i=e,n=0;n<t.length;++n)i=Y[255&i^t[n]]^i>>>8;e=i},d:function(){return~e}}}function X(){var e=1,t=0;return{p:function(i){for(var n=e,s=t,a=i.length,r=0;r!=a;){for(var o=Math.min(r+2655,a);r<o;++r)s+=n+=i[r];n=(65535&n)+15*(n>>16),s=(65535&s)+15*(s>>16)}e=n,t=s},d:function(){return(255&(e%=65521))<<24|e>>>8<<16|(255&(t%=65521))<<8|t>>>8}}}function Z(e,t,i,n,s){return q(e,null==t.level?6:t.level,null==t.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):12+t.mem,i,n,!s)}function J(e,t){var i={};for(var n in e)i[n]=e[n];for(var n in t)i[n]=t[n];return i}function Q(e,t,i){for(var n=e(),s=e.toString(),a=s.slice(s.indexOf("[")+1,s.lastIndexOf("]")).replace(/ /g,"").split(","),r=0;r<n.length;++r){var o=n[r],l=a[r];if("function"==typeof o){t+=";"+l+"=";var c=o.toString();if(o.prototype)if(-1!=c.indexOf("[native code]")){var d=c.indexOf(" ",8)+1;t+=c.slice(d,c.indexOf("(",d))}else for(var h in t+=c,o.prototype)t+=";"+l+".prototype."+h+"="+o.prototype[h].toString();else t+=c}else i[l]=o}return[t,i]}var $=[];function ee(e,t,i,n){var d;if(!$[i]){for(var h="",u={},p=e.length-1,f=0;f<p;++f)h=(d=Q(e[f],h,u))[0],u=d[1];$[i]=Q(e[p],h,u)}var m,g,v,y,b,w,x=J({},$[i][1]);return m=$[i][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+t.toString()+"}",g=i,v=x,y=function(e){var t=[];for(var i in e)(e[i]instanceof o||e[i]instanceof l||e[i]instanceof c)&&t.push((e[i]=new e[i].constructor(e[i])).buffer);return t}(x),b=n,(w=r(s[g]||=a(m))).onerror=function(e){return b(e.error,null)},w.onmessage=function(e){return b(null,e.data)},w.postMessage(v,y),w}function te(){return[o,l,c,d,h,u,m,y,C,A,w,M,R,P,E,D,O,L,_e,ae,re]}function ie(){return[o,l,c,d,h,u,g,b,T,k,I,_,w,G,W,M,j,z,B,N,F,H,U,V,D,O,q,Z,Se,ae]}function ne(){return[fe,me]}function se(){return[ye]}function ae(e){return postMessage(e,[e.buffer])}function re(e){return e&&e.size&&new o(e.size)}function oe(e){return e.ondata=function(e,t){return postMessage([e,t],[e.buffer])},function(t){return e.push(t.data[0],t.data[1])}}function le(e,t,i,n,s){var a,r=ee(e,n,s,(function(e,i){e?(r.terminate(),t.ondata.call(t,e)):(i[1]&&r.terminate(),t.ondata.call(t,e,i[0],i[1]))}));r.postMessage(i),t.push=function(e,i){if(a)throw"stream finished";if(!t.ondata)throw"no stream handler";r.postMessage([e,a=i],[e.buffer])},t.terminate=function(){r.terminate()}}function ce(e,t){return e[t]|e[t+1]<<8}function de(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function he(e,t){return de(e,t)+4294967296*de(e,t+4)}function ue(e,t,i){for(;i;++t)e[t]=i,i>>>=8}function pe(e,t){var i=t.filename;if(e[0]=31,e[1]=139,e[2]=8,e[8]=t.level<2?4:9==t.level?2:0,e[9]=3,0!=t.mtime&&ue(e,4,Math.floor(new Date(t.mtime||Date.now())/1e3)),i){e[3]=8;for(var n=0;n<=i.length;++n)e[n+10]=i.charCodeAt(n)}}function fe(e){if(31!=e[0]||139!=e[1]||8!=e[2])throw"invalid gzip data";var t=e[3],i=10;4&t&&(i+=e[10]|2+(e[11]<<8));for(var n=(t>>3&1)+(t>>4&1);n>0;n-=!e[i++]);return i+(2&t)}function me(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function ge(e){return 10+(e.filename&&e.filename.length+1||0)}function ve(e,t){var i=t.level,n=0==i?0:i<6?1:9==i?3:2;e[0]=120,e[1]=n<<6|(n?32-2*n:1)}function ye(e){if(8!=(15&e[0])||e[0]>>>4>7||(e[0]<<8|e[1])%31)throw"invalid zlib data";if(32&e[1])throw"invalid zlib data: preset dictionaries not supported"}function be(e,t){return t||"function"!=typeof e||(t=e,e={}),this.ondata=t,e}var we=function(){function e(e,t){t||"function"!=typeof e||(t=e,e={}),this.ondata=t,this.o=e||{}}return e.prototype.p=function(e,t){this.ondata(Z(e,this.o,0,0,!t),t)},e.prototype.push=function(e,t){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";this.d=t,this.p(e,t||!1)},e}(),xe=function(e,t){le([ie,function(){return[oe,we]}],this,be.call(this,e,t),(function(e){var t=new we(e.data);onmessage=oe(t)}),6)};function Se(e,t){return Z(e,t||{},0,0)}var Me=function(){function e(e){this.s={},this.p=new o(0),this.ondata=e}return e.prototype.e=function(e){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";var t=this.p.length,i=new o(t+e.length);i.set(this.p),i.set(e,t),this.p=i},e.prototype.c=function(e){this.d=this.s.i=e||!1;var t=this.s.b,i=L(this.p,this.o,this.s);this.ondata(O(i,t,this.s.b),this.d),this.o=O(i,this.s.b-32768),this.s.b=this.o.length,this.p=O(this.p,this.s.p/8|0),this.s.p&=7},e.prototype.push=function(e,t){this.e(e),this.c(t)},e}(),ke=function(e){this.ondata=e,le([te,function(){return[oe,Me]}],this,0,(function(){var e=new Me;onmessage=oe(e)}),7)};function _e(e,t){return L(e,t)}!function(){function e(e,t){this.c=K(),this.l=0,this.v=1,we.call(this,e,t)}e.prototype.push=function(e,t){we.prototype.push.call(this,e,t)},e.prototype.p=function(e,t){this.c.p(e),this.l+=e.length;var i=Z(e,this.o,this.v&&ge(this.o),t&&8,!t);this.v&&(pe(i,this.o),this.v=0),t&&(ue(i,i.length-8,this.c.d()),ue(i,i.length-4,this.l)),this.ondata(i,t)}}();var Te=function(){function e(e){this.v=1,Me.call(this,e)}return e.prototype.push=function(e,t){if(Me.prototype.e.call(this,e),this.v){var i=this.p.length>3?fe(this.p):4;if(i>=this.p.length&&!t)return;this.p=this.p.subarray(i),this.v=0}if(t){if(this.p.length<8)throw"invalid gzip stream";this.p=this.p.subarray(0,-8)}Me.prototype.c.call(this,t)},e}(),Ce=function(e){this.ondata=e,le([te,ne,function(){return[oe,Me,Te]}],this,0,(function(){var e=new Te;onmessage=oe(e)}),9)};!function(){function e(e,t){this.c=X(),this.v=1,we.call(this,e,t)}e.prototype.push=function(e,t){we.prototype.push.call(this,e,t)},e.prototype.p=function(e,t){this.c.p(e);var i=Z(e,this.o,this.v&&2,t&&4,!t);this.v&&(ve(i,this.o),this.v=0),t&&ue(i,i.length-4,this.c.d()),this.ondata(i,t)}}();var Ie=function(){function e(e){this.v=1,Me.call(this,e)}return e.prototype.push=function(e,t){if(Me.prototype.e.call(this,e),this.v){if(this.p.length<2&&!t)return;this.p=this.p.subarray(2),this.v=0}if(t){if(this.p.length<4)throw"invalid zlib stream";this.p=this.p.subarray(0,-4)}Me.prototype.c.call(this,t)},e}(),Ae=function(e){this.ondata=e,le([te,se,function(){return[oe,Me,Ie]}],this,0,(function(){var e=new Ie;onmessage=oe(e)}),11)};function Re(e,t){return L((ye(e),e.subarray(2,-4)),t)}var Pe=function(){function e(e){this.G=Te,this.I=Me,this.Z=Ie,this.ondata=e}return e.prototype.push=function(e,t){if(!this.ondata)throw"no stream handler";if(this.s)this.s.push(e,t);else{if(this.p&&this.p.length){var i=new o(this.p.length+e.length);i.set(this.p),i.set(e,this.p.length)}else this.p=e;if(this.p.length>2){var n=this;function s(){n.ondata.apply(n,arguments)}this.s=31==this.p[0]&&139==this.p[1]&&8==this.p[2]?new this.G(s):8!=(15&this.p[0])||this.p[0]>>4>7||(this.p[0]<<8|this.p[1])%31?new this.I(s):new this.Z(s),this.s.push(this.p,t),this.p=null}}},e}();!function(){function e(e){this.G=Ce,this.I=ke,this.Z=Ae,this.ondata=e}e.prototype.push=function(e,t){Pe.prototype.push.call(this,e,t)}}();var Ee="undefined"!=typeof TextEncoder&&new TextEncoder,De="undefined"!=typeof TextDecoder&&new TextDecoder,Oe=0;try{De.decode(W,{stream:!0}),Oe=1}catch(e){}function Le(e){for(var t="",i=0;;){var n=e[i++],s=(n>127)+(n>223)+(n>239);if(i+s>e.length)return[t,O(e,i-1)];s?3==s?(n=((15&n)<<18|(63&e[i++])<<12|(63&e[i++])<<6|63&e[i++])-65536,t+=String.fromCharCode(n>>10|55296,1023&n|56320)):t+=1&s?String.fromCharCode((31&n)<<6|63&e[i++]):String.fromCharCode((15&n)<<12|(63&e[i++])<<6|63&e[i++]):t+=String.fromCharCode(n)}}(function(){function e(e){this.ondata=e,Oe?this.t=new TextDecoder:this.p=W}e.prototype.push=function(e,t){if(!this.ondata)throw"no callback";if(t=!!t,this.t){if(this.ondata(this.t.decode(e,{stream:!0}),t),t){if(this.t.decode().length)throw"invalid utf-8 data";this.t=null}}else{if(!this.p)throw"stream finished";var i=new o(this.p.length+e.length);i.set(this.p),i.set(e,this.p.length);var n=Le(i),s=n[0],a=n[1];if(t){if(a.length)throw"invalid utf-8 data";this.p=null}else this.p=a;this.ondata(s,t)}}})(),function(){function e(e){this.ondata=e}e.prototype.push=function(e,t){if(!this.ondata)throw"no callback";if(this.d)throw"stream finished";this.ondata(je(e),this.d=t||!1)}}();function je(e,t){if(t){for(var i=new o(e.length),n=0;n<e.length;++n)i[n]=e.charCodeAt(n);return i}if(Ee)return Ee.encode(e);var s=e.length,a=new o(e.length+(e.length>>1)),r=0;function l(e){a[r++]=e}for(n=0;n<s;++n){if(r+5>a.length){var c=new o(r+8+(s-n<<1));c.set(a),a=c}var d=e.charCodeAt(n);d<128||t?l(d):d<2048?(l(d>>6|192),l(63&d|128)):d>55295&&d<57344?(l((d=65536+(1047552&d)|1023&e.charCodeAt(++n))>>18|240),l(d>>12&63|128),l(d>>6&63|128),l(63&d|128)):(l(d>>12|224),l(d>>6&63|128),l(63&d|128))}return O(a,0,r)}function ze(e,t){if(t){for(var i="",n=0;n<e.length;n+=16384)i+=String.fromCharCode.apply(null,e.subarray(n,n+16384));return i}if(De)return De.decode(e);var s=Le(e),a=s[0];if(s[1].length)throw"invalid utf-8 data";return a}function Be(e){return 1==e?3:e<6?2:9==e?1:0}function Ne(e,t){for(;1!=ce(e,t);t+=4+ce(e,t+2));return[he(e,t+12),he(e,t+4),he(e,t+20)]}function Fe(e){var t=0;if(e)for(var i in e){var n=e[i].length;if(n>65535)throw"extra field too long";t+=n+4}return t}function He(e,t,i,n,s,a,r,o){var l=n.length,c=i.extra,d=o&&o.length,h=Fe(c);ue(e,t,null!=r?33639248:67324752),t+=4,null!=r&&(e[t++]=20,e[t++]=i.os),e[t]=20,t+=2,e[t++]=i.flag<<1|(null==a&&8),e[t++]=s&&8,e[t++]=255&i.compression,e[t++]=i.compression>>8;var u=new Date(null==i.mtime?Date.now():i.mtime),p=u.getFullYear()-1980;if(p<0||p>119)throw"date not in range 1980-2099";if(ue(e,t,p<<25|u.getMonth()+1<<21|u.getDate()<<16|u.getHours()<<11|u.getMinutes()<<5|u.getSeconds()>>>1),t+=4,null!=a&&(ue(e,t,i.crc),ue(e,t+4,a),ue(e,t+8,i.size)),ue(e,t+12,l),ue(e,t+14,h),t+=16,null!=r&&(ue(e,t,d),ue(e,t+6,i.attrs),ue(e,t+10,r),t+=14),e.set(n,t),t+=l,h)for(var f in c){var m=c[f],g=m.length;ue(e,t,+f),ue(e,t+2,g),e.set(m,t+4),t+=4+g}return d&&(e.set(o,t),t+=d),t}function Ue(e,t,i,n,s){ue(e,t,101010256),ue(e,t+8,i),ue(e,t+10,i),ue(e,t+12,n),ue(e,t+16,s)}var Ve=function(){function e(e){this.filename=e,this.c=K(),this.size=0,this.compression=0}return e.prototype.process=function(e,t){this.ondata(null,e,t)},e.prototype.push=function(e,t){if(!this.ondata)throw"no callback - add to ZIP archive before pushing";this.c.p(e),this.size+=e.length,t&&(this.crc=this.c.d()),this.process(e,t||!1)},e}();(function(){function e(e,t){var i=this;t||(t={}),Ve.call(this,e),this.d=new we(t,(function(e,t){i.ondata(null,e,t)})),this.compression=8,this.flag=Be(t.level)}e.prototype.process=function(e,t){try{this.d.push(e,t)}catch(e){this.ondata(e,null,t)}},e.prototype.push=function(e,t){Ve.prototype.push.call(this,e,t)}})(),function(){function e(e,t){var i=this;t||(t={}),Ve.call(this,e),this.d=new xe(t,(function(e,t,n){i.ondata(e,t,n)})),this.compression=8,this.flag=Be(t.level),this.terminate=this.d.terminate}e.prototype.process=function(e,t){this.d.push(e,t)},e.prototype.push=function(e,t){Ve.prototype.push.call(this,e,t)}}(),function(){function e(e){this.ondata=e,this.u=[],this.d=1}e.prototype.add=function(e){var t=this;if(2&this.d)throw"stream finished";var i=je(e.filename),n=i.length,s=e.comment,a=s&&je(s),r=n!=e.filename.length||a&&s.length!=a.length,l=n+Fe(e.extra)+30;if(n>65535)throw"filename too long";var c=new o(l);He(c,0,e,i,r);var d=[c];function h(){for(var e=0,i=d;e<i.length;e++){var n=i[e];t.ondata(null,n,!1)}d=[]}var u=this.d;this.d=0;var p=this.u.length,f=J(e,{f:i,u:r,o:a,t:function(){e.terminate&&e.terminate()},r:function(){if(h(),u){var e=t.u[p+1];e?e.r():t.d=1}u=1}}),m=0;e.ondata=function(i,n,s){if(i)t.ondata(i,n,s),t.terminate();else if(m+=n.length,d.push(n),s){var a=new o(16);ue(a,0,134695760),ue(a,4,e.crc),ue(a,8,m),ue(a,12,e.size),d.push(a),f.c=m,f.b=l+m+16,f.crc=e.crc,f.size=e.size,u&&f.r(),u=1}else u&&h()},this.u.push(f)},e.prototype.end=function(){var e=this;if(2&this.d){if(1&this.d)throw"stream finishing";throw"stream finished"}this.d?this.e():this.u.push({r:function(){1&e.d&&(e.u.splice(-1,1),e.e())},t:function(){}}),this.d=3},e.prototype.e=function(){for(var e=0,t=0,i=0,n=0,s=this.u;n<s.length;n++){i+=46+(c=s[n]).f.length+Fe(c.extra)+(c.o?c.o.length:0)}for(var a=new o(i+22),r=0,l=this.u;r<l.length;r++){var c;He(a,e,c=l[r],c.f,c.u,c.c,t,c.o),e+=46+c.f.length+Fe(c.extra)+(c.o?c.o.length:0),t+=c.b}Ue(a,e,this.u.length,i,t),this.ondata(null,a,!0),this.d=2},e.prototype.terminate=function(){for(var e=0,t=this.u;e<t.length;e++){t[e].t()}this.d=2}}();var Ge=function(){function e(){}return e.prototype.push=function(e,t){this.ondata(null,e,t)},e.compression=0,e}();(function(){function e(){var e=this;this.i=new Me((function(t,i){e.ondata(null,t,i)}))}e.prototype.push=function(e,t){try{this.i.push(e,t)}catch(i){this.ondata(i,e,t)}},e.compression=8})(),function(){function e(e,t){var i=this;t<32e4?this.i=new Me((function(e,t){i.ondata(null,e,t)})):(this.i=new ke((function(e,t,n){i.ondata(e,t,n)})),this.terminate=this.i.terminate)}e.prototype.push=function(e,t){this.i.terminate&&(e=O(e,0)),this.i.push(e,t)},e.compression=8}(),function(){function e(e){this.onfile=e,this.k=[],this.o={0:Ge},this.p=W}e.prototype.push=function(e,t){var i=this;if(!this.onfile)throw"no callback";if(!this.p)throw"stream finished";if(this.c>0){var n=Math.min(this.c,e.length),s=e.subarray(0,n);if(this.c-=n,this.d?this.d.push(s,!this.c):this.k[0].push(s),(e=e.subarray(n)).length)return this.push(e,t)}else{var a=0,r=0,l=void 0,c=void 0;this.p.length?e.length?((c=new o(this.p.length+e.length)).set(this.p),c.set(e,this.p.length)):c=this.p:c=e;var d=c.length,h=this.c,u=h&&this.d;function m(){var e,t=de(c,r);if(67324752==t){a=1,l=r,p.d=null,p.c=0;var n=ce(c,r+6),s=ce(c,r+8),o=2048&n,u=8&n,f=ce(c,r+26),m=ce(c,r+28);if(d>r+30+f+m){var g=[];p.k.unshift(g),a=2;var v,y=de(c,r+18),b=de(c,r+22),w=ze(c.subarray(r+30,r+=30+f),!o);4294967295==y?(e=u?[-2]:Ne(c,r),y=e[0],b=e[1]):u&&(y=-1),r+=m,p.c=y;var x={name:w,compression:s,start:function(){if(!x.ondata)throw"no callback";if(y){var e=i.o[s];if(!e)throw"unknown compression type "+s;(v=y<0?new e(w):new e(w,y,b)).ondata=function(e,t,i){x.ondata(e,t,i)};for(var t=0,n=g;t<n.length;t++){var a=n[t];v.push(a,!1)}i.k[0]==g&&i.c?i.d=v:v.push(W,!0)}else x.ondata(null,W,!0)},terminate:function(){v&&v.terminate&&v.terminate()}};y>=0&&(x.size=y,x.originalSize=b),p.onfile(x)}return"break"}if(h){if(134695760==t)return l=r+=12+(-2==h&&8),a=3,p.c=0,"break";if(33639248==t)return l=r-=4,a=3,p.c=0,"break"}}for(var p=this;r<d-4;++r){if("break"===m())break}if(this.p=W,h<0){var f=a?c.subarray(0,l-12-(-2==h&&8)-(134695760==de(c,l-16)&&4)):c.subarray(0,r);u?u.push(f,!!a):this.k[+(2==a)].push(f)}if(2&a)return this.push(c.subarray(r),t);this.p=c.subarray(r)}if(t){if(this.c)throw"invalid zip file";this.p=null}},e.prototype.register=function(e){this.o[e.compression]=e}}();function We(e,t,i){const n=i.length-e-1;if(t>=i[n])return n-1;if(t<=i[e])return e;let s=e,a=n,r=Math.floor((s+a)/2);for(;t<i[r]||t>=i[r+1];)t<i[r]?a=r:s=r,r=Math.floor((s+a)/2);return r}function qe(e,t,i,n){const s=[],a=[],r=[];s[0]=1;for(let o=1;o<=i;++o){a[o]=t-n[e+1-o],r[o]=n[e+o]-t;let i=0;for(let e=0;e<o;++e){const t=r[e+1],n=a[o-e],l=s[e]/(t+n);s[e]=i+t*l,i=n*l}s[o]=i}return s}function Ye(e,t){let i=1;for(let t=2;t<=e;++t)i*=t;let n=1;for(let e=2;e<=t;++e)n*=e;for(let i=2;i<=e-t;++i)n*=i;return i/n}function Ke(e,t,i,s,a){return function(e){const t=e.length,i=[],s=[];for(let a=0;a<t;++a){const t=e[a];i[a]=new n.Vector3(t.x,t.y,t.z),s[a]=t.w}const a=[];for(let e=0;e<t;++e){const t=i[e].clone();for(let i=1;i<=e;++i)t.sub(a[e-i].clone().multiplyScalar(Ye(e,i)*s[i]));a[e]=t.divideScalar(s[0])}return a}(function(e,t,i,s,a){const r=a<e?a:e,o=[],l=We(e,s,t),c=function(e,t,i,n,s){const a=[];for(let e=0;e<=i;++e)a[e]=0;const r=[];for(let e=0;e<=n;++e)r[e]=a.slice(0);const o=[];for(let e=0;e<=i;++e)o[e]=a.slice(0);o[0][0]=1;const l=a.slice(0),c=a.slice(0);for(let n=1;n<=i;++n){l[n]=t-s[e+1-n],c[n]=s[e+n]-t;let i=0;for(let e=0;e<n;++e){const t=c[e+1],s=l[n-e];o[n][e]=t+s;const a=o[e][n-1]/o[n][e];o[e][n]=i+t*a,i=s*a}o[n][n]=i}for(let e=0;e<=i;++e)r[0][e]=o[e][i];for(let e=0;e<=i;++e){let t=0,s=1;const l=[];for(let e=0;e<=i;++e)l[e]=a.slice(0);l[0][0]=1;for(let a=1;a<=n;++a){let n=0;const c=e-a,d=i-a;e>=a&&(l[s][0]=l[t][0]/o[d+1][c],n=l[s][0]*o[c][d]);const h=e-1<=d?a-1:i-e;for(let e=c>=-1?1:-c;e<=h;++e)l[s][e]=(l[t][e]-l[t][e-1])/o[d+1][c+e],n+=l[s][e]*o[c+e][d];e<=d&&(l[s][a]=-l[t][a-1]/o[d+1][e],n+=l[s][a]*o[e][d]),r[a][e]=n;const u=t;t=s,s=u}}let d=i;for(let e=1;e<=n;++e){for(let t=0;t<=i;++t)r[e][t]*=d;d*=i-e}return r}(l,s,e,r,t),d=[];for(let e=0;e<i.length;++e){const t=i[e].clone(),n=t.w;t.x*=n,t.y*=n,t.z*=n,d[e]=t}for(let t=0;t<=r;++t){const i=d[l-e].clone().multiplyScalar(c[t][0]);for(let n=1;n<=e;++n)i.add(d[l-e+n].clone().multiplyScalar(c[t][n]));o[t]=i}for(let e=r+1;e<=a+1;++e)o[e]=new n.Vector4(0,0,0);return o}(e,t,i,s,a))}class Xe extends n.Curve{constructor(e,t,i,s,a){super(),this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=s||0,this.endKnot=a||this.knots.length-1;for(let e=0;e<i.length;++e){const t=i[e];this.controlPoints[e]=new n.Vector4(t.x,t.y,t.z,t.w)}}getPoint(e,t=new n.Vector3){const i=t,s=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),a=function(e,t,i,s){const a=We(e,s,t),r=qe(a,s,e,t),o=new n.Vector4(0,0,0,0);for(let t=0;t<=e;++t){const n=i[a-e+t],s=r[t],l=n.w*s;o.x+=n.x*l,o.y+=n.y*l,o.z+=n.z*l,o.w+=n.w*s}return o}(this.degree,this.knots,this.controlPoints,s);return 1!==a.w&&a.divideScalar(a.w),i.set(a.x,a.y,a.z)}getTangent(e,t=new n.Vector3){const i=t,s=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),a=Ke(this.degree,this.knots,this.controlPoints,s,1);return i.copy(a[1]).normalize(),i}}let Ze,Je,Qe;class $e extends n.Loader{constructor(e){super(e)}load(e,t,i,s){const a=this,r=""===a.path?n.LoaderUtils.extractUrlBase(e):a.path,o=new n.FileLoader(this.manager);o.setPath(a.path),o.setResponseType("arraybuffer"),o.setRequestHeader(a.requestHeader),o.setWithCredentials(a.withCredentials),o.load(e,(function(i){try{t(a.parse(i,r))}catch(t){s?s(t):console.error(t),a.manager.itemError(e)}}),i,s)}parse(e,t){if(function(e){const t="Kaydara FBX Binary  \0";return e.byteLength>=t.length&&t===gt(e,0,t.length)}(e))Ze=(new st).parse(e);else{const t=gt(e);if(!function(e){const t=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let i=0;function n(t){const n=e[t-1];return e=e.slice(i+t),i++,n}for(let e=0;e<t.length;++e){if(n(1)===t[e])return!1}return!0}(t))throw new Error("THREE.FBXLoader: Unknown format.");if(ot(t)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+ot(t));Ze=(new nt).parse(t)}const i=new n.TextureLoader(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);return new et(i,this.manager).parse(Ze)}}class et{constructor(e,t){this.textureLoader=e,this.manager=t}parse(){Je=this.parseConnections();const e=this.parseImages(),t=this.parseTextures(e),i=this.parseMaterials(t),n=this.parseDeformers(),s=(new tt).parse(n);return this.parseScene(n,s,i),Qe}parseConnections(){const e=new Map;if("Connections"in Ze){Ze.Connections.connections.forEach((function(t){const i=t[0],n=t[1],s=t[2];e.has(i)||e.set(i,{parents:[],children:[]});const a={ID:n,relationship:s};e.get(i).parents.push(a),e.has(n)||e.set(n,{parents:[],children:[]});const r={ID:i,relationship:s};e.get(n).children.push(r)}))}return e}parseImages(){const e={},t={};if("Video"in Ze.Objects){const i=Ze.Objects.Video;for(const n in i){const s=i[n];if(e[parseInt(n)]=s.RelativeFilename||s.Filename,"Content"in s){const e=s.Content instanceof ArrayBuffer&&s.Content.byteLength>0,a="string"==typeof s.Content&&""!==s.Content;if(e||a){const e=this.parseImage(i[n]);t[s.RelativeFilename||s.Filename]=e}}}}for(const i in e){const n=e[i];void 0!==t[n]?e[i]=t[n]:e[i]=e[i].split("\\").pop()}return e}parseImage(e){const t=e.Content,i=e.RelativeFilename||e.Filename,n=i.slice(i.lastIndexOf(".")+1).toLowerCase();let s;switch(n){case"bmp":s="image/bmp";break;case"jpg":case"jpeg":s="image/jpeg";break;case"png":s="image/png";break;case"tif":s="image/tiff";break;case"tga":null===this.manager.getHandler(".tga")&&console.warn("FBXLoader: TGA loader not found, skipping ",i),s="image/tga";break;default:return void console.warn('FBXLoader: Image type "'+n+'" is not supported.')}if("string"==typeof t)return"data:"+s+";base64,"+t;{const e=new Uint8Array(t);return window.URL.createObjectURL(new Blob([e],{type:s}))}}parseTextures(e){const t=new Map;if("Texture"in Ze.Objects){const i=Ze.Objects.Texture;for(const n in i){const s=this.parseTexture(i[n],e);t.set(parseInt(n),s)}}return t}parseTexture(e,t){const i=this.loadTexture(e,t);i.ID=e.id,i.name=e.attrName;const s=e.WrapModeU,a=e.WrapModeV,r=void 0!==s?s.value:0,o=void 0!==a?a.value:0;if(i.wrapS=0===r?n.RepeatWrapping:n.ClampToEdgeWrapping,i.wrapT=0===o?n.RepeatWrapping:n.ClampToEdgeWrapping,"Scaling"in e){const t=e.Scaling.value;i.repeat.x=t[0],i.repeat.y=t[1]}if("Translation"in e){const t=e.Translation.value;i.offset.x=t[0],i.offset.y=t[1]}return i}loadTexture(e,t){let i;const s=this.textureLoader.path,a=Je.get(e.id).children;let r;void 0!==a&&a.length>0&&void 0!==t[a[0].ID]&&(i=t[a[0].ID],0!==i.indexOf("blob:")&&0!==i.indexOf("data:")||this.textureLoader.setPath(void 0));const o=e.FileName.slice(-3).toLowerCase();if("tga"===o){const t=this.manager.getHandler(".tga");null===t?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),r=new n.Texture):(t.setPath(this.textureLoader.path),r=t.load(i))}else"psd"===o?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),r=new n.Texture):r=this.textureLoader.load(i);return this.textureLoader.setPath(s),r}parseMaterials(e){const t=new Map;if("Material"in Ze.Objects){const i=Ze.Objects.Material;for(const n in i){const s=this.parseMaterial(i[n],e);null!==s&&t.set(parseInt(n),s)}}return t}parseMaterial(e,t){const i=e.id,s=e.attrName;let a=e.ShadingModel;if("object"==typeof a&&(a=a.value),!Je.has(i))return null;const r=this.parseParameters(e,t,i);let o;switch(a.toLowerCase()){case"phong":o=new n.MeshPhongMaterial;break;case"lambert":o=new n.MeshLambertMaterial;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',a),o=new n.MeshPhongMaterial}return o.setValues(r),o.name=s,o}parseParameters(e,t,i){const s={};e.BumpFactor&&(s.bumpScale=e.BumpFactor.value),e.Diffuse?s.color=(new n.Color).fromArray(e.Diffuse.value):!e.DiffuseColor||"Color"!==e.DiffuseColor.type&&"ColorRGB"!==e.DiffuseColor.type||(s.color=(new n.Color).fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(s.displacementScale=e.DisplacementFactor.value),e.Emissive?s.emissive=(new n.Color).fromArray(e.Emissive.value):!e.EmissiveColor||"Color"!==e.EmissiveColor.type&&"ColorRGB"!==e.EmissiveColor.type||(s.emissive=(new n.Color).fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(s.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(s.opacity=parseFloat(e.Opacity.value)),s.opacity<1&&(s.transparent=!0),e.ReflectionFactor&&(s.reflectivity=e.ReflectionFactor.value),e.Shininess&&(s.shininess=e.Shininess.value),e.Specular?s.specular=(new n.Color).fromArray(e.Specular.value):e.SpecularColor&&"Color"===e.SpecularColor.type&&(s.specular=(new n.Color).fromArray(e.SpecularColor.value));const a=this;return Je.get(i).children.forEach((function(e){const i=e.relationship;switch(i){case"Bump":s.bumpMap=a.getTexture(t,e.ID);break;case"Maya|TEX_ao_map":s.aoMap=a.getTexture(t,e.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":s.map=a.getTexture(t,e.ID),void 0!==s.map&&(s.map.encoding=n.sRGBEncoding);break;case"DisplacementColor":s.displacementMap=a.getTexture(t,e.ID);break;case"EmissiveColor":s.emissiveMap=a.getTexture(t,e.ID),void 0!==s.emissiveMap&&(s.emissiveMap.encoding=n.sRGBEncoding);break;case"NormalMap":case"Maya|TEX_normal_map":s.normalMap=a.getTexture(t,e.ID);break;case"ReflectionColor":s.envMap=a.getTexture(t,e.ID),void 0!==s.envMap&&(s.envMap.mapping=n.EquirectangularReflectionMapping,s.envMap.encoding=n.sRGBEncoding);break;case"SpecularColor":s.specularMap=a.getTexture(t,e.ID),void 0!==s.specularMap&&(s.specularMap.encoding=n.sRGBEncoding);break;case"TransparentColor":case"TransparencyFactor":s.alphaMap=a.getTexture(t,e.ID),s.transparent=!0;break;default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",i)}})),s}getTexture(e,t){return"LayeredTexture"in Ze.Objects&&t in Ze.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=Je.get(t).children[0].ID),e.get(t)}parseDeformers(){const e={},t={};if("Deformer"in Ze.Objects){const i=Ze.Objects.Deformer;for(const n in i){const s=i[n],a=Je.get(parseInt(n));if("Skin"===s.attrType){const t=this.parseSkeleton(a,i);t.ID=n,a.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),t.geometryID=a.parents[0].ID,e[n]=t}else if("BlendShape"===s.attrType){const e={id:n};e.rawTargets=this.parseMorphTargets(a,i),e.id=n,a.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[n]=e}}}return{skeletons:e,morphTargets:t}}parseSkeleton(e,t){const i=[];return e.children.forEach((function(e){const s=t[e.ID];if("Cluster"!==s.attrType)return;const a={ID:e.ID,indices:[],weights:[],transformLink:(new n.Matrix4).fromArray(s.TransformLink.a)};"Indexes"in s&&(a.indices=s.Indexes.a,a.weights=s.Weights.a),i.push(a)})),{rawBones:i,bones:[]}}parseMorphTargets(e,t){const i=[];for(let n=0;n<e.children.length;n++){const s=e.children[n],a=t[s.ID],r={name:a.attrName,initialWeight:a.DeformPercent,id:a.id,fullWeights:a.FullWeights.a};if("BlendShapeChannel"!==a.attrType)return;r.geoID=Je.get(parseInt(s.ID)).children.filter((function(e){return void 0===e.relationship}))[0].ID,i.push(r)}return i}parseScene(e,t,i){Qe=new n.Group;const s=this.parseModels(e.skeletons,t,i),a=Ze.Objects.Model,r=this;s.forEach((function(e){const t=a[e.ID];r.setLookAtProperties(e,t);Je.get(e.ID).parents.forEach((function(t){const i=s.get(t.ID);void 0!==i&&i.add(e)})),null===e.parent&&Qe.add(e)})),this.bindSkeleton(e.skeletons,t,s),this.createAmbientLight(),Qe.traverse((function(e){if(e.userData.transformData){e.parent&&(e.userData.transformData.parentMatrix=e.parent.matrix,e.userData.transformData.parentMatrixWorld=e.parent.matrixWorld);const t=pt(e.userData.transformData);e.applyMatrix4(t),e.updateWorldMatrix()}}));const o=(new it).parse();1===Qe.children.length&&Qe.children[0].isGroup&&(Qe.children[0].animations=o,Qe=Qe.children[0]),Qe.animations=o}parseModels(e,t,i){const s=new Map,a=Ze.Objects.Model;for(const r in a){const o=parseInt(r),l=a[r],c=Je.get(o);let d=this.buildSkeleton(c,e,o,l.attrName);if(!d){switch(l.attrType){case"Camera":d=this.createCamera(c);break;case"Light":d=this.createLight(c);break;case"Mesh":d=this.createMesh(c,t,i);break;case"NurbsCurve":d=this.createCurve(c,t);break;case"LimbNode":case"Root":d=new n.Bone;break;default:d=new n.Group}d.name=l.attrName?n.PropertyBinding.sanitizeNodeName(l.attrName):"",d.ID=o}this.getTransformData(d,l),s.set(o,d)}return s}buildSkeleton(e,t,i,s){let a=null;return e.parents.forEach((function(e){for(const r in t){const o=t[r];o.rawBones.forEach((function(t,r){if(t.ID===e.ID){const e=a;a=new n.Bone,a.matrixWorld.copy(t.transformLink),a.name=s?n.PropertyBinding.sanitizeNodeName(s):"",a.ID=i,o.bones[r]=a,null!==e&&a.add(e)}}))}})),a}createCamera(e){let t,i;if(e.children.forEach((function(e){const t=Ze.Objects.NodeAttribute[e.ID];void 0!==t&&(i=t)})),void 0===i)t=new n.Object3D;else{let e=0;void 0!==i.CameraProjectionType&&1===i.CameraProjectionType.value&&(e=1);let s=1;void 0!==i.NearPlane&&(s=i.NearPlane.value/1e3);let a=1e3;void 0!==i.FarPlane&&(a=i.FarPlane.value/1e3);let r=window.innerWidth,o=window.innerHeight;void 0!==i.AspectWidth&&void 0!==i.AspectHeight&&(r=i.AspectWidth.value,o=i.AspectHeight.value);const l=r/o;let c=45;void 0!==i.FieldOfView&&(c=i.FieldOfView.value);const d=i.FocalLength?i.FocalLength.value:null;switch(e){case 0:t=new n.PerspectiveCamera(c,l,s,a),null!==d&&t.setFocalLength(d);break;case 1:t=new n.OrthographicCamera(-r/2,r/2,o/2,-o/2,s,a);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+e+"."),t=new n.Object3D}}return t}createLight(e){let t,i;if(e.children.forEach((function(e){const t=Ze.Objects.NodeAttribute[e.ID];void 0!==t&&(i=t)})),void 0===i)t=new n.Object3D;else{let e;e=void 0===i.LightType?0:i.LightType.value;let s=16777215;void 0!==i.Color&&(s=(new n.Color).fromArray(i.Color.value));let a=void 0===i.Intensity?1:i.Intensity.value/100;void 0!==i.CastLightOnObject&&0===i.CastLightOnObject.value&&(a=0);let r=0;void 0!==i.FarAttenuationEnd&&(r=void 0!==i.EnableFarAttenuation&&0===i.EnableFarAttenuation.value?0:i.FarAttenuationEnd.value);const o=1;switch(e){case 0:t=new n.PointLight(s,a,r,o);break;case 1:t=new n.DirectionalLight(s,a);break;case 2:let e=Math.PI/3;void 0!==i.InnerAngle&&(e=n.MathUtils.degToRad(i.InnerAngle.value));let l=0;void 0!==i.OuterAngle&&(l=n.MathUtils.degToRad(i.OuterAngle.value),l=Math.max(l,1)),t=new n.SpotLight(s,a,r,e,l,o);break;default:console.warn("THREE.FBXLoader: Unknown light type "+i.LightType.value+", defaulting to a PointLight."),t=new n.PointLight(s,a)}void 0!==i.CastShadows&&1===i.CastShadows.value&&(t.castShadow=!0)}return t}createMesh(e,t,i){let s,a=null,r=null;const o=[];return e.children.forEach((function(e){t.has(e.ID)&&(a=t.get(e.ID)),i.has(e.ID)&&o.push(i.get(e.ID))})),o.length>1?r=o:o.length>0?r=o[0]:(r=new n.MeshPhongMaterial({color:13421772}),o.push(r)),"color"in a.attributes&&o.forEach((function(e){e.vertexColors=!0})),a.FBX_Deformer?(s=new n.SkinnedMesh(a,r),s.normalizeSkinWeights()):s=new n.Mesh(a,r),s}createCurve(e,t){const i=e.children.reduce((function(e,i){return t.has(i.ID)&&(e=t.get(i.ID)),e}),null),s=new n.LineBasicMaterial({color:3342591,linewidth:1});return new n.Line(i,s)}getTransformData(e,t){const i={};"InheritType"in t&&(i.inheritType=parseInt(t.InheritType.value)),i.eulerOrder="RotationOrder"in t?ft(t.RotationOrder.value):"ZYX","Lcl_Translation"in t&&(i.translation=t.Lcl_Translation.value),"PreRotation"in t&&(i.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(i.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(i.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(i.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(i.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(i.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(i.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(i.rotationPivot=t.RotationPivot.value),e.userData.transformData=i}setLookAtProperties(e,t){if("LookAtProperty"in t){Je.get(e.ID).children.forEach((function(t){if("LookAtProperty"===t.relationship){const i=Ze.Objects.Model[t.ID];if("Lcl_Translation"in i){const t=i.Lcl_Translation.value;void 0!==e.target?(e.target.position.fromArray(t),Qe.add(e.target)):e.lookAt((new n.Vector3).fromArray(t))}}}))}}bindSkeleton(e,t,i){const s=this.parsePoseNodes();for(const a in e){const r=e[a];Je.get(parseInt(r.ID)).parents.forEach((function(e){if(t.has(e.ID)){const t=e.ID;Je.get(t).parents.forEach((function(e){if(i.has(e.ID)){i.get(e.ID).bind(new n.Skeleton(r.bones),s[e.ID])}}))}}))}}parsePoseNodes(){const e={};if("Pose"in Ze.Objects){const t=Ze.Objects.Pose;for(const i in t)if("BindPose"===t[i].attrType&&t[i].NbPoseNodes>0){const s=t[i].PoseNode;Array.isArray(s)?s.forEach((function(t){e[t.Node]=(new n.Matrix4).fromArray(t.Matrix.a)})):e[s.Node]=(new n.Matrix4).fromArray(s.Matrix.a)}}return e}createAmbientLight(){if("GlobalSettings"in Ze&&"AmbientColor"in Ze.GlobalSettings){const e=Ze.GlobalSettings.AmbientColor.value,t=e[0],i=e[1],s=e[2];if(0!==t||0!==i||0!==s){const e=new n.Color(t,i,s);Qe.add(new n.AmbientLight(e,1))}}}}class tt{constructor(){this.negativeMaterialIndices=!1}parse(e){const t=new Map;if("Geometry"in Ze.Objects){const i=Ze.Objects.Geometry;for(const n in i){const s=Je.get(parseInt(n)),a=this.parseGeometry(s,i[n],e);t.set(parseInt(n),a)}}return!0===this.negativeMaterialIndices&&console.warn("THREE.FBXLoader: The FBX file contains invalid (negative) material indices. The asset might not render as expected."),t}parseGeometry(e,t,i){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,i);case"NurbsCurve":return this.parseNurbsGeometry(t)}}parseMeshGeometry(e,t,i){const n=i.skeletons,s=[],a=e.parents.map((function(e){return Ze.Objects.Model[e.ID]}));if(0===a.length)return;const r=e.children.reduce((function(e,t){return void 0!==n[t.ID]&&(e=n[t.ID]),e}),null);e.children.forEach((function(e){void 0!==i.morphTargets[e.ID]&&s.push(i.morphTargets[e.ID])}));const o=a[0],l={};"RotationOrder"in o&&(l.eulerOrder=ft(o.RotationOrder.value)),"InheritType"in o&&(l.inheritType=parseInt(o.InheritType.value)),"GeometricTranslation"in o&&(l.translation=o.GeometricTranslation.value),"GeometricRotation"in o&&(l.rotation=o.GeometricRotation.value),"GeometricScaling"in o&&(l.scale=o.GeometricScaling.value);const c=pt(l);return this.genGeometry(t,r,s,c)}genGeometry(e,t,i,s){const a=new n.BufferGeometry;e.attrName&&(a.name=e.attrName);const r=this.parseGeoNode(e,t),o=this.genBuffers(r),l=new n.Float32BufferAttribute(o.vertex,3);if(l.applyMatrix4(s),a.setAttribute("position",l),o.colors.length>0&&a.setAttribute("color",new n.Float32BufferAttribute(o.colors,3)),t&&(a.setAttribute("skinIndex",new n.Uint16BufferAttribute(o.weightsIndices,4)),a.setAttribute("skinWeight",new n.Float32BufferAttribute(o.vertexWeights,4)),a.FBX_Deformer=t),o.normal.length>0){const e=(new n.Matrix3).getNormalMatrix(s),t=new n.Float32BufferAttribute(o.normal,3);t.applyNormalMatrix(e),a.setAttribute("normal",t)}if(o.uvs.forEach((function(e,t){let i="uv"+(t+1).toString();0===t&&(i="uv"),a.setAttribute(i,new n.Float32BufferAttribute(o.uvs[t],2))})),r.material&&"AllSame"!==r.material.mappingType){let e=o.materialIndex[0],t=0;if(o.materialIndex.forEach((function(i,n){i!==e&&(a.addGroup(t,n-t,e),e=i,t=n)})),a.groups.length>0){const t=a.groups[a.groups.length-1],i=t.start+t.count;i!==o.materialIndex.length&&a.addGroup(i,o.materialIndex.length-i,e)}0===a.groups.length&&a.addGroup(0,o.materialIndex.length,o.materialIndex[0])}return this.addMorphTargets(a,e,i,s),a}parseGeoNode(e,t){const i={vertexPositions:void 0!==e.Vertices?e.Vertices.a:[],vertexIndices:void 0!==e.PolygonVertexIndex?e.PolygonVertexIndex.a:[]};if(e.LayerElementColor&&(i.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(i.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(i.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){i.uv=[];let t=0;for(;e.LayerElementUV[t];)e.LayerElementUV[t].UV&&i.uv.push(this.parseUVs(e.LayerElementUV[t])),t++}return i.weightTable={},null!==t&&(i.skeleton=t,t.rawBones.forEach((function(e,t){e.indices.forEach((function(n,s){void 0===i.weightTable[n]&&(i.weightTable[n]=[]),i.weightTable[n].push({id:t,weight:e.weights[s]})}))}))),i}genBuffers(e){const t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let i=0,n=0,s=!1,a=[],r=[],o=[],l=[],c=[],d=[];const h=this;return e.vertexIndices.forEach((function(u,p){let f,m=!1;u<0&&(u^=-1,m=!0);let g=[],v=[];if(a.push(3*u,3*u+1,3*u+2),e.color){const t=dt(p,i,u,e.color);o.push(t[0],t[1],t[2])}if(e.skeleton){if(void 0!==e.weightTable[u]&&e.weightTable[u].forEach((function(e){v.push(e.weight),g.push(e.id)})),v.length>4){s||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),s=!0);const e=[0,0,0,0],t=[0,0,0,0];v.forEach((function(i,n){let s=i,a=g[n];t.forEach((function(t,i,n){if(s>t){n[i]=s,s=t;const r=e[i];e[i]=a,a=r}}))})),g=e,v=t}for(;v.length<4;)v.push(0),g.push(0);for(let e=0;e<4;++e)c.push(v[e]),d.push(g[e])}if(e.normal){const t=dt(p,i,u,e.normal);r.push(t[0],t[1],t[2])}e.material&&"AllSame"!==e.material.mappingType&&(f=dt(p,i,u,e.material)[0],f<0&&(h.negativeMaterialIndices=!0,f=0)),e.uv&&e.uv.forEach((function(e,t){const n=dt(p,i,u,e);void 0===l[t]&&(l[t]=[]),l[t].push(n[0]),l[t].push(n[1])})),n++,m&&(n>4&&console.warn("THREE.FBXLoader: Polygons with more than four sides are not supported. Make sure to triangulate the geometry during export."),h.genFace(t,e,a,f,r,o,l,c,d,n),i++,n=0,a=[],r=[],o=[],l=[],c=[],d=[])})),t}genFace(e,t,i,n,s,a,r,o,l,c){for(let d=2;d<c;d++)e.vertex.push(t.vertexPositions[i[0]]),e.vertex.push(t.vertexPositions[i[1]]),e.vertex.push(t.vertexPositions[i[2]]),e.vertex.push(t.vertexPositions[i[3*(d-1)]]),e.vertex.push(t.vertexPositions[i[3*(d-1)+1]]),e.vertex.push(t.vertexPositions[i[3*(d-1)+2]]),e.vertex.push(t.vertexPositions[i[3*d]]),e.vertex.push(t.vertexPositions[i[3*d+1]]),e.vertex.push(t.vertexPositions[i[3*d+2]]),t.skeleton&&(e.vertexWeights.push(o[0]),e.vertexWeights.push(o[1]),e.vertexWeights.push(o[2]),e.vertexWeights.push(o[3]),e.vertexWeights.push(o[4*(d-1)]),e.vertexWeights.push(o[4*(d-1)+1]),e.vertexWeights.push(o[4*(d-1)+2]),e.vertexWeights.push(o[4*(d-1)+3]),e.vertexWeights.push(o[4*d]),e.vertexWeights.push(o[4*d+1]),e.vertexWeights.push(o[4*d+2]),e.vertexWeights.push(o[4*d+3]),e.weightsIndices.push(l[0]),e.weightsIndices.push(l[1]),e.weightsIndices.push(l[2]),e.weightsIndices.push(l[3]),e.weightsIndices.push(l[4*(d-1)]),e.weightsIndices.push(l[4*(d-1)+1]),e.weightsIndices.push(l[4*(d-1)+2]),e.weightsIndices.push(l[4*(d-1)+3]),e.weightsIndices.push(l[4*d]),e.weightsIndices.push(l[4*d+1]),e.weightsIndices.push(l[4*d+2]),e.weightsIndices.push(l[4*d+3])),t.color&&(e.colors.push(a[0]),e.colors.push(a[1]),e.colors.push(a[2]),e.colors.push(a[3*(d-1)]),e.colors.push(a[3*(d-1)+1]),e.colors.push(a[3*(d-1)+2]),e.colors.push(a[3*d]),e.colors.push(a[3*d+1]),e.colors.push(a[3*d+2])),t.material&&"AllSame"!==t.material.mappingType&&(e.materialIndex.push(n),e.materialIndex.push(n),e.materialIndex.push(n)),t.normal&&(e.normal.push(s[0]),e.normal.push(s[1]),e.normal.push(s[2]),e.normal.push(s[3*(d-1)]),e.normal.push(s[3*(d-1)+1]),e.normal.push(s[3*(d-1)+2]),e.normal.push(s[3*d]),e.normal.push(s[3*d+1]),e.normal.push(s[3*d+2])),t.uv&&t.uv.forEach((function(t,i){void 0===e.uvs[i]&&(e.uvs[i]=[]),e.uvs[i].push(r[i][0]),e.uvs[i].push(r[i][1]),e.uvs[i].push(r[i][2*(d-1)]),e.uvs[i].push(r[i][2*(d-1)+1]),e.uvs[i].push(r[i][2*d]),e.uvs[i].push(r[i][2*d+1])}))}addMorphTargets(e,t,i,n){if(0===i.length)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const s=this;i.forEach((function(i){i.rawTargets.forEach((function(i){const a=Ze.Objects.Geometry[i.geoID];void 0!==a&&s.genMorphGeometry(e,t,a,n,i.name)}))}))}genMorphGeometry(e,t,i,s,a){const r=void 0!==t.PolygonVertexIndex?t.PolygonVertexIndex.a:[],o=void 0!==i.Vertices?i.Vertices.a:[],l=void 0!==i.Indexes?i.Indexes.a:[],c=3*e.attributes.position.count,d=new Float32Array(c);for(let e=0;e<l.length;e++){const t=3*l[e];d[t]=o[3*e],d[t+1]=o[3*e+1],d[t+2]=o[3*e+2]}const h={vertexIndices:r,vertexPositions:d},u=this.genBuffers(h),p=new n.Float32BufferAttribute(u.vertex,3);p.name=a||i.attrName,p.applyMatrix4(s),e.morphAttributes.position.push(p)}parseNormals(e){const t=e.MappingInformationType,i=e.ReferenceInformationType,n=e.Normals.a;let s=[];return"IndexToDirect"===i&&("NormalIndex"in e?s=e.NormalIndex.a:"NormalsIndex"in e&&(s=e.NormalsIndex.a)),{dataSize:3,buffer:n,indices:s,mappingType:t,referenceType:i}}parseUVs(e){const t=e.MappingInformationType,i=e.ReferenceInformationType,n=e.UV.a;let s=[];return"IndexToDirect"===i&&(s=e.UVIndex.a),{dataSize:2,buffer:n,indices:s,mappingType:t,referenceType:i}}parseVertexColors(e){const t=e.MappingInformationType,i=e.ReferenceInformationType,n=e.Colors.a;let s=[];return"IndexToDirect"===i&&(s=e.ColorIndex.a),{dataSize:4,buffer:n,indices:s,mappingType:t,referenceType:i}}parseMaterialIndices(e){const t=e.MappingInformationType,i=e.ReferenceInformationType;if("NoMappingInformation"===t)return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:i};const n=e.Materials.a,s=[];for(let e=0;e<n.length;++e)s.push(e);return{dataSize:1,buffer:n,indices:s,mappingType:t,referenceType:i}}parseNurbsGeometry(e){const t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new n.BufferGeometry;const i=t-1,s=e.KnotVector.a,a=[],r=e.Points.a;for(let e=0,t=r.length;e<t;e+=4)a.push((new n.Vector4).fromArray(r,e));let o,l;if("Closed"===e.Form)a.push(a[0]);else if("Periodic"===e.Form){o=i,l=s.length-1-o;for(let e=0;e<i;++e)a.push(a[e])}const c=new Xe(i,s,a,o,l).getPoints(12*a.length);return(new n.BufferGeometry).setFromPoints(c)}}class it{parse(){const e=[],t=this.parseClips();if(void 0!==t)for(const i in t){const n=t[i],s=this.addClip(n);e.push(s)}return e}parseClips(){if(void 0===Ze.Objects.AnimationCurve)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}parseAnimationCurveNodes(){const e=Ze.Objects.AnimationCurveNode,t=new Map;for(const i in e){const n=e[i];if(null!==n.attrName.match(/S|R|T|DeformPercent/)){const e={id:n.id,attr:n.attrName,curves:{}};t.set(e.id,e)}}return t}parseAnimationCurves(e){const t=Ze.Objects.AnimationCurve;for(const i in t){const n={id:t[i].id,times:t[i].KeyTime.a.map(lt),values:t[i].KeyValueFloat.a},s=Je.get(n.id);if(void 0!==s){const t=s.parents[0].ID,i=s.parents[0].relationship;i.match(/X/)?e.get(t).curves.x=n:i.match(/Y/)?e.get(t).curves.y=n:i.match(/Z/)?e.get(t).curves.z=n:i.match(/d|DeformPercent/)&&e.has(t)&&(e.get(t).curves.morph=n)}}}parseAnimationLayers(e){const t=Ze.Objects.AnimationLayer,i=new Map;for(const s in t){const t=[],a=Je.get(parseInt(s));if(void 0!==a){a.children.forEach((function(i,s){if(e.has(i.ID)){const a=e.get(i.ID);if(void 0!==a.curves.x||void 0!==a.curves.y||void 0!==a.curves.z){if(void 0===t[s]){const e=Je.get(i.ID).parents.filter((function(e){return void 0!==e.relationship}))[0].ID;if(void 0!==e){const a=Ze.Objects.Model[e.toString()];if(void 0===a)return void console.warn("THREE.FBXLoader: Encountered a unused curve.",i);const r={modelName:a.attrName?n.PropertyBinding.sanitizeNodeName(a.attrName):"",ID:a.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};Qe.traverse((function(e){e.ID===a.id&&(r.transform=e.matrix,e.userData.transformData&&(r.eulerOrder=e.userData.transformData.eulerOrder))})),r.transform||(r.transform=new n.Matrix4),"PreRotation"in a&&(r.preRotation=a.PreRotation.value),"PostRotation"in a&&(r.postRotation=a.PostRotation.value),t[s]=r}}t[s]&&(t[s][a.attr]=a)}else if(void 0!==a.curves.morph){if(void 0===t[s]){const e=Je.get(i.ID).parents.filter((function(e){return void 0!==e.relationship}))[0].ID,a=Je.get(e).parents[0].ID,r=Je.get(a).parents[0].ID,o=Je.get(r).parents[0].ID,l=Ze.Objects.Model[o],c={modelName:l.attrName?n.PropertyBinding.sanitizeNodeName(l.attrName):"",morphName:Ze.Objects.Deformer[e].attrName};t[s]=c}t[s][a.attr]=a}}})),i.set(parseInt(s),t)}}return i}parseAnimStacks(e){const t=Ze.Objects.AnimationStack,i={};for(const n in t){const s=Je.get(parseInt(n)).children;s.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const a=e.get(s[0].ID);i[n]={name:t[n].attrName,layer:a}}return i}addClip(e){let t=[];const i=this;return e.layer.forEach((function(e){t=t.concat(i.generateTracks(e))})),new n.AnimationClip(e.name,-1,t)}generateTracks(e){const t=[];let i=new n.Vector3,s=new n.Quaternion,a=new n.Vector3;if(e.transform&&e.transform.decompose(i,s,a),i=i.toArray(),s=(new n.Euler).setFromQuaternion(s,e.eulerOrder).toArray(),a=a.toArray(),void 0!==e.T&&Object.keys(e.T.curves).length>0){const n=this.generateVectorTrack(e.modelName,e.T.curves,i,"position");void 0!==n&&t.push(n)}if(void 0!==e.R&&Object.keys(e.R.curves).length>0){const i=this.generateRotationTrack(e.modelName,e.R.curves,s,e.preRotation,e.postRotation,e.eulerOrder);void 0!==i&&t.push(i)}if(void 0!==e.S&&Object.keys(e.S.curves).length>0){const i=this.generateVectorTrack(e.modelName,e.S.curves,a,"scale");void 0!==i&&t.push(i)}if(void 0!==e.DeformPercent){const i=this.generateMorphTrack(e);void 0!==i&&t.push(i)}return t}generateVectorTrack(e,t,i,s){const a=this.getTimesForAllAxes(t),r=this.getKeyframeTrackValues(a,t,i);return new n.VectorKeyframeTrack(e+"."+s,a,r)}generateRotationTrack(e,t,i,s,a,r){void 0!==t.x&&(this.interpolateRotations(t.x),t.x.values=t.x.values.map(n.MathUtils.degToRad)),void 0!==t.y&&(this.interpolateRotations(t.y),t.y.values=t.y.values.map(n.MathUtils.degToRad)),void 0!==t.z&&(this.interpolateRotations(t.z),t.z.values=t.z.values.map(n.MathUtils.degToRad));const o=this.getTimesForAllAxes(t),l=this.getKeyframeTrackValues(o,t,i);void 0!==s&&((s=s.map(n.MathUtils.degToRad)).push(r),s=(new n.Euler).fromArray(s),s=(new n.Quaternion).setFromEuler(s)),void 0!==a&&((a=a.map(n.MathUtils.degToRad)).push(r),a=(new n.Euler).fromArray(a),a=(new n.Quaternion).setFromEuler(a).invert());const c=new n.Quaternion,d=new n.Euler,h=[];for(let e=0;e<l.length;e+=3)d.set(l[e],l[e+1],l[e+2],r),c.setFromEuler(d),void 0!==s&&c.premultiply(s),void 0!==a&&c.multiply(a),c.toArray(h,e/3*4);return new n.QuaternionKeyframeTrack(e+".quaternion",o,h)}generateMorphTrack(e){const t=e.DeformPercent.curves.morph,i=t.values.map((function(e){return e/100})),s=Qe.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new n.NumberKeyframeTrack(e.modelName+".morphTargetInfluences["+s+"]",t.times,i)}getTimesForAllAxes(e){let t=[];if(void 0!==e.x&&(t=t.concat(e.x.times)),void 0!==e.y&&(t=t.concat(e.y.times)),void 0!==e.z&&(t=t.concat(e.z.times)),t=t.sort((function(e,t){return e-t})),t.length>1){let e=1,i=t[0];for(let n=1;n<t.length;n++){const s=t[n];s!==i&&(t[e]=s,i=s,e++)}t=t.slice(0,e)}return t}getKeyframeTrackValues(e,t,i){const n=i,s=[];let a=-1,r=-1,o=-1;return e.forEach((function(e){if(t.x&&(a=t.x.times.indexOf(e)),t.y&&(r=t.y.times.indexOf(e)),t.z&&(o=t.z.times.indexOf(e)),-1!==a){const e=t.x.values[a];s.push(e),n[0]=e}else s.push(n[0]);if(-1!==r){const e=t.y.values[r];s.push(e),n[1]=e}else s.push(n[1]);if(-1!==o){const e=t.z.values[o];s.push(e),n[2]=e}else s.push(n[2])})),s}interpolateRotations(e){for(let t=1;t<e.values.length;t++){const i=e.values[t-1],n=e.values[t]-i,s=Math.abs(n);if(s>=180){const a=s/180,r=n/a;let o=i+r;const l=e.times[t-1],c=(e.times[t]-l)/a;let d=l+c;const h=[],u=[];for(;d<e.times[t];)h.push(d),d+=c,u.push(o),o+=r;e.times=vt(e.times,t,h),e.values=vt(e.values,t,u)}}}}class nt{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,t){this.currentProp=e,this.currentPropName=t}parse(e){this.currentIndent=0,this.allNodes=new rt,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const t=this,i=e.split(/[\r\n]+/);return i.forEach((function(e,n){const s=e.match(/^[\s\t]*;/),a=e.match(/^[\s\t]*$/);if(s||a)return;const r=e.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),o=e.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),l=e.match("^\\t{"+(t.currentIndent-1)+"}}");r?t.parseNodeBegin(e,r):o?t.parseNodeProperty(e,o,i[++n]):l?t.popStack():e.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(e)})),this.allNodes}parseNodeBegin(e,t){const i=t[1].trim().replace(/^"/,"").replace(/"$/,""),n=t[2].split(",").map((function(e){return e.trim().replace(/^"/,"").replace(/"$/,"")})),s={name:i},a=this.parseNodeAttr(n),r=this.getCurrentNode();0===this.currentIndent?this.allNodes.add(i,s):i in r?("PoseNode"===i?r.PoseNode.push(s):void 0!==r[i].id&&(r[i]={},r[i][r[i].id]=r[i]),""!==a.id&&(r[i][a.id]=s)):"number"==typeof a.id?(r[i]={},r[i][a.id]=s):"Properties70"!==i&&(r[i]="PoseNode"===i?[s]:s),"number"==typeof a.id&&(s.id=a.id),""!==a.name&&(s.attrName=a.name),""!==a.type&&(s.attrType=a.type),this.pushStack(s)}parseNodeAttr(e){let t=e[0];""!==e[0]&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));let i="",n="";return e.length>1&&(i=e[1].replace(/^(\w+)::/,""),n=e[2]),{id:t,name:i,type:n}}parseNodeProperty(e,t,i){let n=t[1].replace(/^"/,"").replace(/"$/,"").trim(),s=t[2].replace(/^"/,"").replace(/"$/,"").trim();"Content"===n&&","===s&&(s=i.replace(/"/g,"").replace(/,$/,"").trim());const a=this.getCurrentNode();if("Properties70"!==a.name){if("C"===n){const e=s.split(",").slice(1),t=parseInt(e[0]),i=parseInt(e[1]);let r=s.split(",").slice(3);r=r.map((function(e){return e.trim().replace(/^"/,"")})),n="connections",s=[t,i],function(e,t){for(let i=0,n=e.length,s=t.length;i<s;i++,n++)e[n]=t[i]}(s,r),void 0===a[n]&&(a[n]=[])}"Node"===n&&(a.id=s),n in a&&Array.isArray(a[n])?a[n].push(s):"a"!==n?a[n]=s:a.a=s,this.setCurrentProp(a,n),"a"===n&&","!==s.slice(-1)&&(a.a=mt(s))}else this.parseNodeSpecialProperty(e,n,s)}parseNodePropertyContinued(e){const t=this.getCurrentNode();t.a+=e,","!==e.slice(-1)&&(t.a=mt(t.a))}parseNodeSpecialProperty(e,t,i){const n=i.split('",').map((function(e){return e.trim().replace(/^\"/,"").replace(/\s/,"_")})),s=n[0],a=n[1],r=n[2],o=n[3];let l=n[4];switch(a){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":l=parseFloat(l);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":l=mt(l)}this.getPrevNode()[s]={type:a,type2:r,flag:o,value:l},this.setCurrentProp(this.getPrevNode(),s)}}class st{parse(e){const t=new at(e);t.skip(23);const i=t.getUint32();if(i<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+i);const n=new rt;for(;!this.endOfContent(t);){const e=this.parseNode(t,i);null!==e&&n.add(e.name,e)}return n}endOfContent(e){return e.size()%16==0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,t){const i={},n=t>=7500?e.getUint64():e.getUint32(),s=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();const a=e.getUint8(),r=e.getString(a);if(0===n)return null;const o=[];for(let t=0;t<s;t++)o.push(this.parseProperty(e));const l=o.length>0?o[0]:"",c=o.length>1?o[1]:"",d=o.length>2?o[2]:"";for(i.singleProperty=1===s&&e.getOffset()===n;n>e.getOffset();){const n=this.parseNode(e,t);null!==n&&this.parseSubNode(r,i,n)}return i.propertyList=o,"number"==typeof l&&(i.id=l),""!==c&&(i.attrName=c),""!==d&&(i.attrType=d),""!==r&&(i.name=r),i}parseSubNode(e,t,i){if(!0===i.singleProperty){const e=i.propertyList[0];Array.isArray(e)?(t[i.name]=i,i.a=e):t[i.name]=e}else if("Connections"===e&&"C"===i.name){const e=[];i.propertyList.forEach((function(t,i){0!==i&&e.push(t)})),void 0===t.connections&&(t.connections=[]),t.connections.push(e)}else if("Properties70"===i.name){Object.keys(i).forEach((function(e){t[e]=i[e]}))}else if("Properties70"===e&&"P"===i.name){let e=i.propertyList[0],n=i.propertyList[1];const s=i.propertyList[2],a=i.propertyList[3];let r;0===e.indexOf("Lcl ")&&(e=e.replace("Lcl ","Lcl_")),0===n.indexOf("Lcl ")&&(n=n.replace("Lcl ","Lcl_")),r="Color"===n||"ColorRGB"===n||"Vector"===n||"Vector3D"===n||0===n.indexOf("Lcl_")?[i.propertyList[4],i.propertyList[5],i.propertyList[6]]:i.propertyList[4],t[e]={type:n,type2:s,flag:a,value:r}}else void 0===t[i.name]?"number"==typeof i.id?(t[i.name]={},t[i.name][i.id]=i):t[i.name]=i:"PoseNode"===i.name?(Array.isArray(t[i.name])||(t[i.name]=[t[i.name]]),t[i.name].push(i)):void 0===t[i.name][i.id]&&(t[i.name][i.id]=i)}parseProperty(e){const t=e.getString(1);let i;switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return i=e.getUint32(),e.getArrayBuffer(i);case"S":return i=e.getUint32(),e.getString(i);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const n=e.getUint32(),s=e.getUint32(),a=e.getUint32();if(0===s)switch(t){case"b":case"c":return e.getBooleanArray(n);case"d":return e.getFloat64Array(n);case"f":return e.getFloat32Array(n);case"i":return e.getInt32Array(n);case"l":return e.getInt64Array(n)}const r=Re(new Uint8Array(e.getArrayBuffer(a))),o=new at(r.buffer);switch(t){case"b":case"c":return o.getBooleanArray(n);case"d":return o.getFloat64Array(n);case"f":return o.getFloat32Array(n);case"i":return o.getInt32Array(n);case"l":return o.getInt64Array(n)}break;default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}}class at{constructor(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=void 0===t||t,this._textDecoder=new TextDecoder}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return 1==(1&this.getUint8())}getBooleanArray(e){const t=[];for(let i=0;i<e;i++)t.push(this.getBoolean());return t}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getInt32());return t}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),2147483648&t?(t=4294967295&~t,e=4294967295&~e,4294967295===e&&(t=t+1&4294967295),e=e+1&4294967295,-(4294967296*t+e)):4294967296*t+e}getInt64Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getInt64());return t}getUint64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),4294967296*t+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getFloat32());return t}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getFloat64());return t}getArrayBuffer(e){const t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}getString(e){const t=this.offset;let i=new Uint8Array(this.dv.buffer,t,e);this.skip(e);const n=i.indexOf(0);return n>=0&&(i=new Uint8Array(this.dv.buffer,t,n)),this._textDecoder.decode(i)}}class rt{add(e,t){this[e]=t}}function ot(e){const t=e.match(/FBXVersion: (\d+)/);if(t){return parseInt(t[1])}throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function lt(e){return e/46186158e3}const ct=[];function dt(e,t,i,n){let s;switch(n.mappingType){case"ByPolygonVertex":s=e;break;case"ByPolygon":s=t;break;case"ByVertice":s=i;break;case"AllSame":s=n.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+n.mappingType)}"IndexToDirect"===n.referenceType&&(s=n.indices[s]);const a=s*n.dataSize,r=a+n.dataSize;return function(e,t,i,n){for(let s=i,a=0;s<n;s++,a++)e[a]=t[s];return e}(ct,n.buffer,a,r)}const ht=new n.Euler,ut=new n.Vector3;function pt(e){const t=new n.Matrix4,i=new n.Matrix4,s=new n.Matrix4,a=new n.Matrix4,r=new n.Matrix4,o=new n.Matrix4,l=new n.Matrix4,c=new n.Matrix4,d=new n.Matrix4,h=new n.Matrix4,u=new n.Matrix4,p=new n.Matrix4,f=e.inheritType?e.inheritType:0;if(e.translation&&t.setPosition(ut.fromArray(e.translation)),e.preRotation){const t=e.preRotation.map(n.MathUtils.degToRad);t.push(e.eulerOrder||n.Euler.DEFAULT_ORDER),i.makeRotationFromEuler(ht.fromArray(t))}if(e.rotation){const t=e.rotation.map(n.MathUtils.degToRad);t.push(e.eulerOrder||n.Euler.DEFAULT_ORDER),s.makeRotationFromEuler(ht.fromArray(t))}if(e.postRotation){const t=e.postRotation.map(n.MathUtils.degToRad);t.push(e.eulerOrder||n.Euler.DEFAULT_ORDER),a.makeRotationFromEuler(ht.fromArray(t)),a.invert()}e.scale&&r.scale(ut.fromArray(e.scale)),e.scalingOffset&&l.setPosition(ut.fromArray(e.scalingOffset)),e.scalingPivot&&o.setPosition(ut.fromArray(e.scalingPivot)),e.rotationOffset&&c.setPosition(ut.fromArray(e.rotationOffset)),e.rotationPivot&&d.setPosition(ut.fromArray(e.rotationPivot)),e.parentMatrixWorld&&(u.copy(e.parentMatrix),h.copy(e.parentMatrixWorld));const m=i.clone().multiply(s).multiply(a),g=new n.Matrix4;g.extractRotation(h);const v=new n.Matrix4;v.copyPosition(h);const y=v.clone().invert().multiply(h),b=g.clone().invert().multiply(y),w=r,x=new n.Matrix4;if(0===f)x.copy(g).multiply(m).multiply(b).multiply(w);else if(1===f)x.copy(g).multiply(b).multiply(m).multiply(w);else{const e=(new n.Matrix4).scale((new n.Vector3).setFromMatrixScale(u)).clone().invert(),t=b.clone().multiply(e);x.copy(g).multiply(m).multiply(t).multiply(w)}const S=d.clone().invert(),M=o.clone().invert();let k=t.clone().multiply(c).multiply(d).multiply(i).multiply(s).multiply(a).multiply(S).multiply(l).multiply(o).multiply(r).multiply(M);const _=(new n.Matrix4).copyPosition(k),T=h.clone().multiply(_);return p.copyPosition(T),k=p.clone().multiply(x),k.premultiply(h.invert()),k}function ft(e){const t=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return 6===(e=e||0)?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),t[0]):t[e]}function mt(e){return e.split(",").map((function(e){return parseFloat(e)}))}function gt(e,t=0,i=e.byteLength){return(new TextDecoder).decode(new Uint8Array(e,t,i))}function vt(e,t,i){return e.slice(0,t).concat(i).concat(e.slice(t))}},function(e,t,i){"use strict";i.r(t),i.d(t,"GLTFLoader",(function(){return a}));var n=i(0);function s(e,t){if(t===n.TrianglesDrawMode)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),e;if(t===n.TriangleFanDrawMode||t===n.TriangleStripDrawMode){let i=e.getIndex();if(null===i){const t=[],n=e.getAttribute("position");if(void 0===n)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(let e=0;e<n.count;e++)t.push(e);e.setIndex(t),i=e.getIndex()}const s=i.count-2,a=[];if(t===n.TriangleFanDrawMode)for(let e=1;e<=s;e++)a.push(i.getX(0)),a.push(i.getX(e)),a.push(i.getX(e+1));else for(let e=0;e<s;e++)e%2==0?(a.push(i.getX(e)),a.push(i.getX(e+1)),a.push(i.getX(e+2))):(a.push(i.getX(e+2)),a.push(i.getX(e+1)),a.push(i.getX(e)));a.length/3!==s&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const r=e.clone();return r.setIndex(a),r.clearGroups(),r}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),e}class a extends n.Loader{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register((function(e){return new h(e)})),this.register((function(e){return new y(e)})),this.register((function(e){return new b(e)})),this.register((function(e){return new w(e)})),this.register((function(e){return new p(e)})),this.register((function(e){return new f(e)})),this.register((function(e){return new m(e)})),this.register((function(e){return new g(e)})),this.register((function(e){return new d(e)})),this.register((function(e){return new v(e)})),this.register((function(e){return new u(e)})),this.register((function(e){return new l(e)})),this.register((function(e){return new x(e)})),this.register((function(e){return new S(e)}))}load(e,t,i,s){const a=this;let r;r=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:n.LoaderUtils.extractUrlBase(e),this.manager.itemStart(e);const o=function(t){s?s(t):console.error(t),a.manager.itemError(e),a.manager.itemEnd(e)},l=new n.FileLoader(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,(function(i){try{a.parse(i,r,(function(i){t(i),a.manager.itemEnd(e)}),o)}catch(e){o(e)}}),i,o)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,n){let s;const a={},r={},l=new TextDecoder;if("string"==typeof e)s=JSON.parse(e);else if(e instanceof ArrayBuffer){if(l.decode(new Uint8Array(e,0,4))===M){try{a[o.KHR_BINARY_GLTF]=new T(e)}catch(e){return void(n&&n(e))}s=JSON.parse(a[o.KHR_BINARY_GLTF].content)}else s=JSON.parse(l.decode(e))}else s=e;if(void 0===s.asset||s.asset.version[0]<2)return void(n&&n(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const d=new J(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});d.fileLoader.setRequestHeader(this.requestHeader);for(let e=0;e<this.pluginCallbacks.length;e++){const t=this.pluginCallbacks[e](d);r[t.name]=t,a[t.name]=!0}if(s.extensionsUsed)for(let e=0;e<s.extensionsUsed.length;++e){const t=s.extensionsUsed[e],i=s.extensionsRequired||[];switch(t){case o.KHR_MATERIALS_UNLIT:a[t]=new c;break;case o.KHR_DRACO_MESH_COMPRESSION:a[t]=new C(s,this.dracoLoader);break;case o.KHR_TEXTURE_TRANSFORM:a[t]=new I;break;case o.KHR_MESH_QUANTIZATION:a[t]=new A;break;default:i.indexOf(t)>=0&&void 0===r[t]&&console.warn('THREE.GLTFLoader: Unknown extension "'+t+'".')}}d.setExtensions(a),d.setPlugins(r),d.parse(i,n)}parseAsync(e,t){const i=this;return new Promise((function(n,s){i.parse(e,t,n,s)}))}}function r(){let e={};return{get:function(t){return e[t]},add:function(t,i){e[t]=i},remove:function(t){delete e[t]},removeAll:function(){e={}}}}const o={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class l{constructor(e){this.parser=e,this.name=o.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,n=t.length;i<n;i++){const n=t[i];n.extensions&&n.extensions[this.name]&&void 0!==n.extensions[this.name].light&&e._addNodeRef(this.cache,n.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let s=t.cache.get(i);if(s)return s;const a=t.json,r=((a.extensions&&a.extensions[this.name]||{}).lights||[])[e];let o;const l=new n.Color(16777215);void 0!==r.color&&l.fromArray(r.color);const c=void 0!==r.range?r.range:0;switch(r.type){case"directional":o=new n.DirectionalLight(l),o.target.position.set(0,0,-1),o.add(o.target);break;case"point":o=new n.PointLight(l),o.distance=c;break;case"spot":o=new n.SpotLight(l),o.distance=c,r.spot=r.spot||{},r.spot.innerConeAngle=void 0!==r.spot.innerConeAngle?r.spot.innerConeAngle:0,r.spot.outerConeAngle=void 0!==r.spot.outerConeAngle?r.spot.outerConeAngle:Math.PI/4,o.angle=r.spot.outerConeAngle,o.penumbra=1-r.spot.innerConeAngle/r.spot.outerConeAngle,o.target.position.set(0,0,-1),o.add(o.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+r.type)}return o.position.set(0,0,0),o.decay=2,W(o,r),void 0!==r.intensity&&(o.intensity=r.intensity),o.name=t.createUniqueName(r.name||"light_"+e),s=Promise.resolve(o),t.cache.add(i,s),s}getDependency(e,t){if("light"===e)return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,n=i.json.nodes[e],s=(n.extensions&&n.extensions[this.name]||{}).light;return void 0===s?null:this._loadLight(s).then((function(e){return i._getNodeRef(t.cache,s,e)}))}}class c{constructor(){this.name=o.KHR_MATERIALS_UNLIT}getMaterialType(){return n.MeshBasicMaterial}extendParams(e,t,i){const s=[];e.color=new n.Color(1,1,1),e.opacity=1;const a=t.pbrMetallicRoughness;if(a){if(Array.isArray(a.baseColorFactor)){const t=a.baseColorFactor;e.color.fromArray(t),e.opacity=t[3]}void 0!==a.baseColorTexture&&s.push(i.assignTexture(e,"map",a.baseColorTexture,n.sRGBEncoding))}return Promise.all(s)}}class d{constructor(e){this.parser=e,this.name=o.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const n=i.extensions[this.name].emissiveStrength;return void 0!==n&&(t.emissiveIntensity=n),Promise.resolve()}}class h{constructor(e){this.parser=e,this.name=o.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?n.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const a=[],r=s.extensions[this.name];if(void 0!==r.clearcoatFactor&&(t.clearcoat=r.clearcoatFactor),void 0!==r.clearcoatTexture&&a.push(i.assignTexture(t,"clearcoatMap",r.clearcoatTexture)),void 0!==r.clearcoatRoughnessFactor&&(t.clearcoatRoughness=r.clearcoatRoughnessFactor),void 0!==r.clearcoatRoughnessTexture&&a.push(i.assignTexture(t,"clearcoatRoughnessMap",r.clearcoatRoughnessTexture)),void 0!==r.clearcoatNormalTexture&&(a.push(i.assignTexture(t,"clearcoatNormalMap",r.clearcoatNormalTexture)),void 0!==r.clearcoatNormalTexture.scale)){const e=r.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new n.Vector2(e,e)}return Promise.all(a)}}class u{constructor(e){this.parser=e,this.name=o.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?n.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const i=this.parser,n=i.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const s=[],a=n.extensions[this.name];return void 0!==a.iridescenceFactor&&(t.iridescence=a.iridescenceFactor),void 0!==a.iridescenceTexture&&s.push(i.assignTexture(t,"iridescenceMap",a.iridescenceTexture)),void 0!==a.iridescenceIor&&(t.iridescenceIOR=a.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==a.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=a.iridescenceThicknessMinimum),void 0!==a.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=a.iridescenceThicknessMaximum),void 0!==a.iridescenceThicknessTexture&&s.push(i.assignTexture(t,"iridescenceThicknessMap",a.iridescenceThicknessTexture)),Promise.all(s)}}class p{constructor(e){this.parser=e,this.name=o.KHR_MATERIALS_SHEEN}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?n.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const a=[];t.sheenColor=new n.Color(0,0,0),t.sheenRoughness=0,t.sheen=1;const r=s.extensions[this.name];return void 0!==r.sheenColorFactor&&t.sheenColor.fromArray(r.sheenColorFactor),void 0!==r.sheenRoughnessFactor&&(t.sheenRoughness=r.sheenRoughnessFactor),void 0!==r.sheenColorTexture&&a.push(i.assignTexture(t,"sheenColorMap",r.sheenColorTexture,n.sRGBEncoding)),void 0!==r.sheenRoughnessTexture&&a.push(i.assignTexture(t,"sheenRoughnessMap",r.sheenRoughnessTexture)),Promise.all(a)}}class f{constructor(e){this.parser=e,this.name=o.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?n.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const i=this.parser,n=i.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const s=[],a=n.extensions[this.name];return void 0!==a.transmissionFactor&&(t.transmission=a.transmissionFactor),void 0!==a.transmissionTexture&&s.push(i.assignTexture(t,"transmissionMap",a.transmissionTexture)),Promise.all(s)}}class m{constructor(e){this.parser=e,this.name=o.KHR_MATERIALS_VOLUME}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?n.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const a=[],r=s.extensions[this.name];t.thickness=void 0!==r.thicknessFactor?r.thicknessFactor:0,void 0!==r.thicknessTexture&&a.push(i.assignTexture(t,"thicknessMap",r.thicknessTexture)),t.attenuationDistance=r.attenuationDistance||1/0;const o=r.attenuationColor||[1,1,1];return t.attenuationColor=new n.Color(o[0],o[1],o[2]),Promise.all(a)}}class g{constructor(e){this.parser=e,this.name=o.KHR_MATERIALS_IOR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?n.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const n=i.extensions[this.name];return t.ior=void 0!==n.ior?n.ior:1.5,Promise.resolve()}}class v{constructor(e){this.parser=e,this.name=o.KHR_MATERIALS_SPECULAR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?n.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const a=[],r=s.extensions[this.name];t.specularIntensity=void 0!==r.specularFactor?r.specularFactor:1,void 0!==r.specularTexture&&a.push(i.assignTexture(t,"specularIntensityMap",r.specularTexture));const o=r.specularColorFactor||[1,1,1];return t.specularColor=new n.Color(o[0],o[1],o[2]),void 0!==r.specularColorTexture&&a.push(i.assignTexture(t,"specularColorMap",r.specularColorTexture,n.sRGBEncoding)),Promise.all(a)}}class y{constructor(e){this.parser=e,this.name=o.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,n=i.textures[e];if(!n.extensions||!n.extensions[this.name])return null;const s=n.extensions[this.name],a=t.options.ktx2Loader;if(!a){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,a)}}class b{constructor(e){this.parser=e,this.name=o.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,n=i.json,s=n.textures[e];if(!s.extensions||!s.extensions[t])return null;const a=s.extensions[t],r=n.images[a.source];let o=i.textureLoader;if(r.uri){const e=i.options.manager.getHandler(r.uri);null!==e&&(o=e)}return this.detectSupport().then((function(s){if(s)return i.loadTextureImage(e,a.source,o);if(n.extensionsRequired&&n.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}class w{constructor(e){this.parser=e,this.name=o.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,n=i.json,s=n.textures[e];if(!s.extensions||!s.extensions[t])return null;const a=s.extensions[t],r=n.images[a.source];let o=i.textureLoader;if(r.uri){const e=i.options.manager.getHandler(r.uri);null!==e&&(o=e)}return this.detectSupport().then((function(s){if(s)return i.loadTextureImage(e,a.source,o);if(n.extensionsRequired&&n.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}class x{constructor(e){this.name=o.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const e=i.extensions[this.name],n=this.parser.getDependency("buffer",e.buffer),s=this.parser.options.meshoptDecoder;if(!s||!s.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return n.then((function(t){const i=e.byteOffset||0,n=e.byteLength||0,a=e.count,r=e.byteStride,o=new Uint8Array(t,i,n);return s.decodeGltfBufferAsync?s.decodeGltfBufferAsync(a,r,o,e.mode,e.filter).then((function(e){return e.buffer})):s.ready.then((function(){const t=new ArrayBuffer(a*r);return s.decodeGltfBuffer(new Uint8Array(t),a,r,o,e.mode,e.filter),t}))}))}return null}}class S{constructor(e){this.name=o.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||void 0===i.mesh)return null;const s=t.meshes[i.mesh];for(const e of s.primitives)if(e.mode!==D.TRIANGLES&&e.mode!==D.TRIANGLE_STRIP&&e.mode!==D.TRIANGLE_FAN&&void 0!==e.mode)return null;const a=i.extensions[this.name].attributes,r=[],o={};for(const e in a)r.push(this.parser.getDependency("accessor",a[e]).then((t=>(o[e]=t,o[e]))));return r.length<1?null:(r.push(this.parser.createNodeMesh(e)),Promise.all(r).then((e=>{const t=e.pop(),i=t.isGroup?t.children:[t],s=e[0].count,a=[];for(const e of i){const t=new n.Matrix4,i=new n.Vector3,r=new n.Quaternion,l=new n.Vector3(1,1,1),c=new n.InstancedMesh(e.geometry,e.material,s);for(let e=0;e<s;e++)o.TRANSLATION&&i.fromBufferAttribute(o.TRANSLATION,e),o.ROTATION&&r.fromBufferAttribute(o.ROTATION,e),o.SCALE&&l.fromBufferAttribute(o.SCALE,e),c.setMatrixAt(e,t.compose(i,r,l));for(const t in o)"TRANSLATION"!==t&&"ROTATION"!==t&&"SCALE"!==t&&e.geometry.setAttribute(t,o[t]);n.Object3D.prototype.copy.call(c,e),c.frustumCulled=!1,this.parser.assignFinalMaterial(c),a.push(c)}return t.isGroup?(t.clear(),t.add(...a),t):a[0]})))}}const M="glTF",k=1313821514,_=5130562;class T{constructor(e){this.name=o.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12),i=new TextDecoder;if(this.header={magic:i.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==M)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-12,s=new DataView(e,12);let a=0;for(;a<n;){const t=s.getUint32(a,!0);a+=4;const n=s.getUint32(a,!0);if(a+=4,n===k){const n=new Uint8Array(e,12+a,t);this.content=i.decode(n)}else if(n===_){const i=12+a;this.body=e.slice(i,i+t)}a+=t}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class C{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=o.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,n=this.dracoLoader,s=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,r={},o={},l={};for(const e in a){const t=B[e]||e.toLowerCase();r[t]=a[e]}for(const t in e.attributes){const n=B[t]||t.toLowerCase();if(void 0!==a[t]){const s=i.accessors[e.attributes[t]],a=O[s.componentType];l[n]=a.name,o[n]=!0===s.normalized}}return t.getDependency("bufferView",s).then((function(e){return new Promise((function(t){n.decodeDracoFile(e,(function(e){for(const t in e.attributes){const i=e.attributes[t],n=o[t];void 0!==n&&(i.normalized=n)}t(e)}),r,l)}))}))}}class I{constructor(){this.name=o.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class A{constructor(){this.name=o.KHR_MESH_QUANTIZATION}}class R extends n.Interpolant{constructor(e,t,i,n){super(e,t,i,n)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,n=this.valueSize,s=e*n*3+n;for(let e=0;e!==n;e++)t[e]=i[s+e];return t}interpolate_(e,t,i,n){const s=this.resultBuffer,a=this.sampleValues,r=this.valueSize,o=2*r,l=3*r,c=n-t,d=(i-t)/c,h=d*d,u=h*d,p=e*l,f=p-l,m=-2*u+3*h,g=u-h,v=1-m,y=g-h+d;for(let e=0;e!==r;e++){const t=a[f+e+r],i=a[f+e+o]*c,n=a[p+e+r],l=a[p+e]*c;s[e]=v*t+y*i+m*n+g*l}return s}}const P=new n.Quaternion;class E extends R{interpolate_(e,t,i,n){const s=super.interpolate_(e,t,i,n);return P.fromArray(s).normalize().toArray(s),s}}const D={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},O={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},L={9728:n.NearestFilter,9729:n.LinearFilter,9984:n.NearestMipmapNearestFilter,9985:n.LinearMipmapNearestFilter,9986:n.NearestMipmapLinearFilter,9987:n.LinearMipmapLinearFilter},j={33071:n.ClampToEdgeWrapping,33648:n.MirroredRepeatWrapping,10497:n.RepeatWrapping},z={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},B={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},N={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},F={CUBICSPLINE:void 0,LINEAR:n.InterpolateLinear,STEP:n.InterpolateDiscrete},H="OPAQUE",U="MASK",V="BLEND";function G(e,t,i){for(const n in i.extensions)void 0===e[n]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[n]=i.extensions[n])}function W(e,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function q(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(let i=0,n=t.weights.length;i<n;i++)e.morphTargetInfluences[i]=t.weights[i];if(t.extras&&Array.isArray(t.extras.targetNames)){const i=t.extras.targetNames;if(e.morphTargetInfluences.length===i.length){e.morphTargetDictionary={};for(let t=0,n=i.length;t<n;t++)e.morphTargetDictionary[i[t]]=t}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Y(e){const t=e.extensions&&e.extensions[o.KHR_DRACO_MESH_COMPRESSION];let i;return i=t?"draco:"+t.bufferView+":"+t.indices+":"+K(t.attributes):e.indices+":"+K(e.attributes)+":"+e.mode,i}function K(e){let t="";const i=Object.keys(e).sort();for(let n=0,s=i.length;n<s;n++)t+=i[n]+":"+e[i[n]]+";";return t}function X(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const Z=new n.Matrix4;class J{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new r,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,s=!1,a=-1;"undefined"!=typeof navigator&&(i=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),s=navigator.userAgent.indexOf("Firefox")>-1,a=s?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),"undefined"==typeof createImageBitmap||i||s&&a<98?this.textureLoader=new n.TextureLoader(this.options.manager):this.textureLoader=new n.ImageBitmapLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new n.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,n=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all(this._invokeAll((function(e){return e.beforeRoot&&e.beforeRoot()}))).then((function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])})).then((function(t){const a={scene:t[0][n.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:n.asset,parser:i,userData:{}};G(s,a,n),W(a,n),Promise.all(i._invokeAll((function(e){return e.afterRoot&&e.afterRoot(a)}))).then((function(){e(a)}))})).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let i=0,n=t.length;i<n;i++){const n=t[i].joints;for(let t=0,i=n.length;t<i;t++)e[n[t]].isBone=!0}for(let t=0,n=e.length;t<n;t++){const n=e[t];void 0!==n.mesh&&(this._addNodeRef(this.meshCache,n.mesh),void 0!==n.skin&&(i[n.mesh].isSkinnedMesh=!0)),void 0!==n.camera&&this._addNodeRef(this.cameraCache,n.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const n=i.clone(),s=(e,t)=>{const i=this.associations.get(e);null!=i&&this.associations.set(t,i);for(const[i,n]of e.children.entries())s(n,t.children[i])};return s(i,n),n.name+="_instance_"+e.uses[t]++,n}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const n=e(t[i]);if(n)return n}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let n=0;n<t.length;n++){const s=e(t[n]);s&&i.push(s)}return i}getDependency(e,t){const i=e+":"+t;let n=this.cache.get(i);if(!n){switch(e){case"scene":n=this.loadScene(t);break;case"node":n=this._invokeOne((function(e){return e.loadNode&&e.loadNode(t)}));break;case"mesh":n=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":n=this.loadAccessor(t);break;case"bufferView":n=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":n=this.loadBuffer(t);break;case"material":n=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":n=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":n=this.loadSkin(t);break;case"animation":n=this._invokeOne((function(e){return e.loadAnimation&&e.loadAnimation(t)}));break;case"camera":n=this.loadCamera(t);break;default:if(n=this._invokeOne((function(i){return i!=this&&i.getDependency&&i.getDependency(e,t)})),!n)throw new Error("Unknown type: "+e)}this.cache.add(i,n)}return n}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,n=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(n.map((function(t,n){return i.getDependency(e,n)}))),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[o.KHR_BINARY_GLTF].body);const s=this.options;return new Promise((function(e,a){i.load(n.LoaderUtils.resolveURL(t.uri,s.path),e,void 0,(function(){a(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){const i=t.byteLength||0,n=t.byteOffset||0;return e.slice(n,n+i)}))}loadAccessor(e){const t=this,i=this.json,s=this.json.accessors[e];if(void 0===s.bufferView&&void 0===s.sparse){const e=z[s.type],t=O[s.componentType],i=!0===s.normalized,a=new t(s.count*e);return Promise.resolve(new n.BufferAttribute(a,e,i))}const a=[];return void 0!==s.bufferView?a.push(this.getDependency("bufferView",s.bufferView)):a.push(null),void 0!==s.sparse&&(a.push(this.getDependency("bufferView",s.sparse.indices.bufferView)),a.push(this.getDependency("bufferView",s.sparse.values.bufferView))),Promise.all(a).then((function(e){const a=e[0],r=z[s.type],o=O[s.componentType],l=o.BYTES_PER_ELEMENT,c=l*r,d=s.byteOffset||0,h=void 0!==s.bufferView?i.bufferViews[s.bufferView].byteStride:void 0,u=!0===s.normalized;let p,f;if(h&&h!==c){const e=Math.floor(d/h),i="InterleavedBuffer:"+s.bufferView+":"+s.componentType+":"+e+":"+s.count;let c=t.cache.get(i);c||(p=new o(a,e*h,s.count*h/l),c=new n.InterleavedBuffer(p,h/l),t.cache.add(i,c)),f=new n.InterleavedBufferAttribute(c,r,d%h/l,u)}else p=null===a?new o(s.count*r):new o(a,d,s.count*r),f=new n.BufferAttribute(p,r,u);if(void 0!==s.sparse){const t=z.SCALAR,i=O[s.sparse.indices.componentType],l=s.sparse.indices.byteOffset||0,c=s.sparse.values.byteOffset||0,d=new i(e[1],l,s.sparse.count*t),h=new o(e[2],c,s.sparse.count*r);null!==a&&(f=new n.BufferAttribute(f.array.slice(),f.itemSize,f.normalized));for(let e=0,t=d.length;e<t;e++){const t=d[e];if(f.setX(t,h[e*r]),r>=2&&f.setY(t,h[e*r+1]),r>=3&&f.setZ(t,h[e*r+2]),r>=4&&f.setW(t,h[e*r+3]),r>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return f}))}loadTexture(e){const t=this.json,i=this.options,n=t.textures[e].source,s=t.images[n];let a=this.textureLoader;if(s.uri){const e=i.manager.getHandler(s.uri);null!==e&&(a=e)}return this.loadTextureImage(e,n,a)}loadTextureImage(e,t,i){const s=this,a=this.json,r=a.textures[e],o=a.images[t],l=(o.uri||o.bufferView)+":"+r.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,i).then((function(t){t.flipY=!1,t.name=r.name||o.name||"";const i=(a.samplers||{})[r.sampler]||{};return t.magFilter=L[i.magFilter]||n.LinearFilter,t.minFilter=L[i.minFilter]||n.LinearMipmapLinearFilter,t.wrapS=j[i.wrapS]||n.RepeatWrapping,t.wrapT=j[i.wrapT]||n.RepeatWrapping,s.associations.set(t,{textures:e}),t})).catch((function(){return null}));return this.textureCache[l]=c,c}loadImageSource(e,t){const i=this,s=this.json,a=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then((e=>e.clone()));const r=s.images[e],o=self.URL||self.webkitURL;let l=r.uri||"",c=!1;if(void 0!==r.bufferView)l=i.getDependency("bufferView",r.bufferView).then((function(e){c=!0;const t=new Blob([e],{type:r.mimeType});return l=o.createObjectURL(t),l}));else if(void 0===r.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const d=Promise.resolve(l).then((function(e){return new Promise((function(i,s){let r=i;!0===t.isImageBitmapLoader&&(r=function(e){const t=new n.Texture(e);t.needsUpdate=!0,i(t)}),t.load(n.LoaderUtils.resolveURL(e,a.path),r,void 0,s)}))})).then((function(e){var t;return!0===c&&o.revokeObjectURL(l),e.userData.mimeType=r.mimeType||((t=r.uri).search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/)?"image/jpeg":t.search(/\.webp($|\?)/i)>0||0===t.search(/^data\:image\/webp/)?"image/webp":"image/png"),e})).catch((function(e){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),e}));return this.sourceCache[e]=d,d}assignTexture(e,t,i,n){const s=this;return this.getDependency("texture",i.index).then((function(a){if(!a)return null;if(void 0===i.texCoord||0==i.texCoord||"aoMap"===t&&1==i.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+i.texCoord+" for texture "+t+" not yet supported."),s.extensions[o.KHR_TEXTURE_TRANSFORM]){const e=void 0!==i.extensions?i.extensions[o.KHR_TEXTURE_TRANSFORM]:void 0;if(e){const t=s.associations.get(a);a=s.extensions[o.KHR_TEXTURE_TRANSFORM].extendTexture(a,e),s.associations.set(a,t)}}return void 0!==n&&(a.encoding=n),e[t]=a,a}))}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const s=void 0===t.attributes.tangent,a=void 0!==t.attributes.color,r=void 0===t.attributes.normal;if(e.isPoints){const e="PointsMaterial:"+i.uuid;let t=this.cache.get(e);t||(t=new n.PointsMaterial,n.Material.prototype.copy.call(t,i),t.color.copy(i.color),t.map=i.map,t.sizeAttenuation=!1,this.cache.add(e,t)),i=t}else if(e.isLine){const e="LineBasicMaterial:"+i.uuid;let t=this.cache.get(e);t||(t=new n.LineBasicMaterial,n.Material.prototype.copy.call(t,i),t.color.copy(i.color),this.cache.add(e,t)),i=t}if(s||a||r){let e="ClonedMaterial:"+i.uuid+":";s&&(e+="derivative-tangents:"),a&&(e+="vertex-colors:"),r&&(e+="flat-shading:");let t=this.cache.get(e);t||(t=i.clone(),a&&(t.vertexColors=!0),r&&(t.flatShading=!0),s&&(t.normalScale&&(t.normalScale.y*=-1),t.clearcoatNormalScale&&(t.clearcoatNormalScale.y*=-1)),this.cache.add(e,t),this.associations.set(t,this.associations.get(i))),i=t}i.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",t.attributes.uv),e.material=i}getMaterialType(){return n.MeshStandardMaterial}loadMaterial(e){const t=this,i=this.json,s=this.extensions,a=i.materials[e];let r;const l={},c=[];if((a.extensions||{})[o.KHR_MATERIALS_UNLIT]){const e=s[o.KHR_MATERIALS_UNLIT];r=e.getMaterialType(),c.push(e.extendParams(l,a,t))}else{const i=a.pbrMetallicRoughness||{};if(l.color=new n.Color(1,1,1),l.opacity=1,Array.isArray(i.baseColorFactor)){const e=i.baseColorFactor;l.color.fromArray(e),l.opacity=e[3]}void 0!==i.baseColorTexture&&c.push(t.assignTexture(l,"map",i.baseColorTexture,n.sRGBEncoding)),l.metalness=void 0!==i.metallicFactor?i.metallicFactor:1,l.roughness=void 0!==i.roughnessFactor?i.roughnessFactor:1,void 0!==i.metallicRoughnessTexture&&(c.push(t.assignTexture(l,"metalnessMap",i.metallicRoughnessTexture)),c.push(t.assignTexture(l,"roughnessMap",i.metallicRoughnessTexture))),r=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),c.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,l)}))))}!0===a.doubleSided&&(l.side=n.DoubleSide);const d=a.alphaMode||H;if(d===V?(l.transparent=!0,l.depthWrite=!1):(l.transparent=!1,d===U&&(l.alphaTest=void 0!==a.alphaCutoff?a.alphaCutoff:.5)),void 0!==a.normalTexture&&r!==n.MeshBasicMaterial&&(c.push(t.assignTexture(l,"normalMap",a.normalTexture)),l.normalScale=new n.Vector2(1,1),void 0!==a.normalTexture.scale)){const e=a.normalTexture.scale;l.normalScale.set(e,e)}return void 0!==a.occlusionTexture&&r!==n.MeshBasicMaterial&&(c.push(t.assignTexture(l,"aoMap",a.occlusionTexture)),void 0!==a.occlusionTexture.strength&&(l.aoMapIntensity=a.occlusionTexture.strength)),void 0!==a.emissiveFactor&&r!==n.MeshBasicMaterial&&(l.emissive=(new n.Color).fromArray(a.emissiveFactor)),void 0!==a.emissiveTexture&&r!==n.MeshBasicMaterial&&c.push(t.assignTexture(l,"emissiveMap",a.emissiveTexture,n.sRGBEncoding)),Promise.all(c).then((function(){const i=new r(l);return a.name&&(i.name=a.name),W(i,a),t.associations.set(i,{materials:e}),a.extensions&&G(s,i,a),i}))}createUniqueName(e){const t=n.PropertyBinding.sanitizeNodeName(e||"");let i=t;for(let e=1;this.nodeNamesUsed[i];++e)i=t+"_"+e;return this.nodeNamesUsed[i]=!0,i}loadGeometries(e){const t=this,i=this.extensions,s=this.primitiveCache;function a(e){return i[o.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(i){return Q(i,e,t)}))}const r=[];for(let i=0,l=e.length;i<l;i++){const l=e[i],c=Y(l),d=s[c];if(d)r.push(d.promise);else{let e;e=l.extensions&&l.extensions[o.KHR_DRACO_MESH_COMPRESSION]?a(l):Q(new n.BufferGeometry,l,t),s[c]={primitive:l,promise:e},r.push(e)}}return Promise.all(r)}loadMesh(e){const t=this,i=this.json,a=this.extensions,r=i.meshes[e],o=r.primitives,l=[];for(let e=0,t=o.length;e<t;e++){const t=void 0===o[e].material?(void 0===(c=this.cache).DefaultMaterial&&(c.DefaultMaterial=new n.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:n.FrontSide})),c.DefaultMaterial):this.getDependency("material",o[e].material);l.push(t)}var c;return l.push(t.loadGeometries(o)),Promise.all(l).then((function(i){const l=i.slice(0,i.length-1),c=i[i.length-1],d=[];for(let i=0,h=c.length;i<h;i++){const h=c[i],u=o[i];let p;const f=l[i];if(u.mode===D.TRIANGLES||u.mode===D.TRIANGLE_STRIP||u.mode===D.TRIANGLE_FAN||void 0===u.mode)p=!0===r.isSkinnedMesh?new n.SkinnedMesh(h,f):new n.Mesh(h,f),!0===p.isSkinnedMesh&&p.normalizeSkinWeights(),u.mode===D.TRIANGLE_STRIP?p.geometry=s(p.geometry,n.TriangleStripDrawMode):u.mode===D.TRIANGLE_FAN&&(p.geometry=s(p.geometry,n.TriangleFanDrawMode));else if(u.mode===D.LINES)p=new n.LineSegments(h,f);else if(u.mode===D.LINE_STRIP)p=new n.Line(h,f);else if(u.mode===D.LINE_LOOP)p=new n.LineLoop(h,f);else{if(u.mode!==D.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+u.mode);p=new n.Points(h,f)}Object.keys(p.geometry.morphAttributes).length>0&&q(p,r),p.name=t.createUniqueName(r.name||"mesh_"+e),W(p,r),u.extensions&&G(a,p,u),t.assignFinalMaterial(p),d.push(p)}for(let i=0,n=d.length;i<n;i++)t.associations.set(d[i],{meshes:e,primitives:i});if(1===d.length)return d[0];const h=new n.Group;t.associations.set(h,{meshes:e});for(let e=0,t=d.length;e<t;e++)h.add(d[e]);return h}))}loadCamera(e){let t;const i=this.json.cameras[e],s=i[i.type];if(s)return"perspective"===i.type?t=new n.PerspectiveCamera(n.MathUtils.radToDeg(s.yfov),s.aspectRatio||1,s.znear||1,s.zfar||2e6):"orthographic"===i.type&&(t=new n.OrthographicCamera(-s.xmag,s.xmag,s.ymag,-s.ymag,s.znear,s.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),W(t,i),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],i=[];for(let e=0,n=t.joints.length;e<n;e++)i.push(this._loadNodeShallow(t.joints[e]));return void 0!==t.inverseBindMatrices?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then((function(e){const i=e.pop(),s=e,a=[],r=[];for(let e=0,o=s.length;e<o;e++){const o=s[e];if(o){a.push(o);const t=new n.Matrix4;null!==i&&t.fromArray(i.array,16*e),r.push(t)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[e])}return new n.Skeleton(a,r)}))}loadAnimation(e){const t=this.json.animations[e],i=[],s=[],a=[],r=[],o=[];for(let e=0,n=t.channels.length;e<n;e++){const n=t.channels[e],l=t.samplers[n.sampler],c=n.target,d=c.node,h=void 0!==t.parameters?t.parameters[l.input]:l.input,u=void 0!==t.parameters?t.parameters[l.output]:l.output;i.push(this.getDependency("node",d)),s.push(this.getDependency("accessor",h)),a.push(this.getDependency("accessor",u)),r.push(l),o.push(c)}return Promise.all([Promise.all(i),Promise.all(s),Promise.all(a),Promise.all(r),Promise.all(o)]).then((function(i){const s=i[0],a=i[1],r=i[2],o=i[3],l=i[4],c=[];for(let e=0,t=s.length;e<t;e++){const t=s[e],i=a[e],d=r[e],h=o[e],u=l[e];if(void 0===t)continue;let p;switch(t.updateMatrix(),N[u.path]){case N.weights:p=n.NumberKeyframeTrack;break;case N.rotation:p=n.QuaternionKeyframeTrack;break;default:p=n.VectorKeyframeTrack}const f=t.name?t.name:t.uuid,m=void 0!==h.interpolation?F[h.interpolation]:n.InterpolateLinear,g=[];N[u.path]===N.weights?t.traverse((function(e){e.morphTargetInfluences&&g.push(e.name?e.name:e.uuid)})):g.push(f);let v=d.array;if(d.normalized){const e=X(v.constructor),t=new Float32Array(v.length);for(let i=0,n=v.length;i<n;i++)t[i]=v[i]*e;v=t}for(let e=0,t=g.length;e<t;e++){const t=new p(g[e]+"."+N[u.path],i.array,v,m);"CUBICSPLINE"===h.interpolation&&(t.createInterpolant=function(e){return new(this instanceof n.QuaternionKeyframeTrack?E:R)(this.times,this.values,this.getValueSize()/3,e)},t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),c.push(t)}}const d=t.name?t.name:"animation_"+e;return new n.AnimationClip(d,void 0,c)}))}createNodeMesh(e){const t=this.json,i=this,n=t.nodes[e];return void 0===n.mesh?null:i.getDependency("mesh",n.mesh).then((function(e){const t=i._getNodeRef(i.meshCache,n.mesh,e);return void 0!==n.weights&&t.traverse((function(e){if(e.isMesh)for(let t=0,i=n.weights.length;t<i;t++)e.morphTargetInfluences[t]=n.weights[t]})),t}))}loadNode(e){const t=this,i=this.json.nodes[e],n=t._loadNodeShallow(e),s=[],a=i.children||[];for(let e=0,i=a.length;e<i;e++)s.push(t.getDependency("node",a[e]));const r=void 0===i.skin?Promise.resolve(null):t.getDependency("skin",i.skin);return Promise.all([n,Promise.all(s),r]).then((function(e){const t=e[0],i=e[1],n=e[2];null!==n&&t.traverse((function(e){e.isSkinnedMesh&&e.bind(n,Z)}));for(let e=0,n=i.length;e<n;e++)t.add(i[e]);return t}))}_loadNodeShallow(e){const t=this.json,i=this.extensions,s=this;if(void 0!==this.nodeCache[e])return this.nodeCache[e];const a=t.nodes[e],r=a.name?s.createUniqueName(a.name):"",o=[],l=s._invokeOne((function(t){return t.createNodeMesh&&t.createNodeMesh(e)}));return l&&o.push(l),void 0!==a.camera&&o.push(s.getDependency("camera",a.camera).then((function(e){return s._getNodeRef(s.cameraCache,a.camera,e)}))),s._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){o.push(e)})),this.nodeCache[e]=Promise.all(o).then((function(t){let o;if(o=!0===a.isBone?new n.Bone:t.length>1?new n.Group:1===t.length?t[0]:new n.Object3D,o!==t[0])for(let e=0,i=t.length;e<i;e++)o.add(t[e]);if(a.name&&(o.userData.name=a.name,o.name=r),W(o,a),a.extensions&&G(i,o,a),void 0!==a.matrix){const e=new n.Matrix4;e.fromArray(a.matrix),o.applyMatrix4(e)}else void 0!==a.translation&&o.position.fromArray(a.translation),void 0!==a.rotation&&o.quaternion.fromArray(a.rotation),void 0!==a.scale&&o.scale.fromArray(a.scale);return s.associations.has(o)||s.associations.set(o,{}),s.associations.get(o).nodes=e,o})),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],s=this,a=new n.Group;i.name&&(a.name=s.createUniqueName(i.name)),W(a,i),i.extensions&&G(t,a,i);const r=i.nodes||[],o=[];for(let e=0,t=r.length;e<t;e++)o.push(s.getDependency("node",r[e]));return Promise.all(o).then((function(e){for(let t=0,i=e.length;t<i;t++)a.add(e[t]);return s.associations=(e=>{const t=new Map;for(const[e,i]of s.associations)(e instanceof n.Material||e instanceof n.Texture)&&t.set(e,i);return e.traverse((e=>{const i=s.associations.get(e);null!=i&&t.set(e,i)})),t})(a),a}))}}function Q(e,t,i){const s=t.attributes,a=[];function r(t,n){return i.getDependency("accessor",t).then((function(t){e.setAttribute(n,t)}))}for(const t in s){const i=B[t]||t.toLowerCase();i in e.attributes||a.push(r(s[t],i))}if(void 0!==t.indices&&!e.index){const n=i.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));a.push(n)}return W(e,t),function(e,t,i){const s=t.attributes,a=new n.Box3;if(void 0===s.POSITION)return;{const e=i.json.accessors[s.POSITION],t=e.min,r=e.max;if(void 0===t||void 0===r)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(a.set(new n.Vector3(t[0],t[1],t[2]),new n.Vector3(r[0],r[1],r[2])),e.normalized){const t=X(O[e.componentType]);a.min.multiplyScalar(t),a.max.multiplyScalar(t)}}const r=t.targets;if(void 0!==r){const e=new n.Vector3,t=new n.Vector3;for(let n=0,s=r.length;n<s;n++){const s=r[n];if(void 0!==s.POSITION){const n=i.json.accessors[s.POSITION],a=n.min,r=n.max;if(void 0!==a&&void 0!==r){if(t.setX(Math.max(Math.abs(a[0]),Math.abs(r[0]))),t.setY(Math.max(Math.abs(a[1]),Math.abs(r[1]))),t.setZ(Math.max(Math.abs(a[2]),Math.abs(r[2]))),n.normalized){const e=X(O[n.componentType]);t.multiplyScalar(e)}e.max(t)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}a.expandByVector(e)}e.boundingBox=a;const o=new n.Sphere;a.getCenter(o.center),o.radius=a.min.distanceTo(a.max)/2,e.boundingSphere=o}(e,t,i),Promise.all(a).then((function(){return void 0!==t.targets?function(e,t,i){let n=!1,s=!1,a=!1;for(let e=0,i=t.length;e<i;e++){const i=t[e];if(void 0!==i.POSITION&&(n=!0),void 0!==i.NORMAL&&(s=!0),void 0!==i.COLOR_0&&(a=!0),n&&s&&a)break}if(!n&&!s&&!a)return Promise.resolve(e);const r=[],o=[],l=[];for(let c=0,d=t.length;c<d;c++){const d=t[c];if(n){const t=void 0!==d.POSITION?i.getDependency("accessor",d.POSITION):e.attributes.position;r.push(t)}if(s){const t=void 0!==d.NORMAL?i.getDependency("accessor",d.NORMAL):e.attributes.normal;o.push(t)}if(a){const t=void 0!==d.COLOR_0?i.getDependency("accessor",d.COLOR_0):e.attributes.color;l.push(t)}}return Promise.all([Promise.all(r),Promise.all(o),Promise.all(l)]).then((function(t){const i=t[0],r=t[1],o=t[2];return n&&(e.morphAttributes.position=i),s&&(e.morphAttributes.normal=r),a&&(e.morphAttributes.color=o),e.morphTargetsRelative=!0,e}))}(e,t.targets,i):e}))}},function(e,t,i){"use strict";i.r(t),i.d(t,"RenderPass",(function(){return r}));var n=i(0);class s{constructor(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}new n.OrthographicCamera(-1,1,1,-1,0,1);const a=new n.BufferGeometry;a.setAttribute("position",new n.Float32BufferAttribute([-1,3,0,-1,-1,0,3,-1,0],3)),a.setAttribute("uv",new n.Float32BufferAttribute([0,2,0,0,2,0],2));class r extends s{constructor(e,t,i,s,a){super(),this.scene=e,this.camera=t,this.overrideMaterial=i,this.clearColor=s,this.clearAlpha=void 0!==a?a:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new n.Color}render(e,t,i){const n=e.autoClear;let s,a;e.autoClear=!1,void 0!==this.overrideMaterial&&(a=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(e.getClearColor(this._oldClearColor),s=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:i),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor&&e.setClearColor(this._oldClearColor,s),void 0!==this.overrideMaterial&&(this.scene.overrideMaterial=a),e.autoClear=n}}},function(e,t,i){const n=i(0);var s=i(35),a=i(40);const r=i(4),o=i(1);var l=new n.Vector3,c=a.generateCube(null,1,1,1,{}),d=a.generateCylinder(0,0,0,{sides:5});function h(e){this.mesh=new n.Mesh(d),this.init=function(t,i,s,a){this.scale=.3,this.mesh.material=e.getMat("default",{mat:n.MeshBasicMaterial,forceMat:n.MeshBasicMaterial,color:e.ropeColor||11776947}),this.x=i,this.y=s,this.z=a,this.parent=t,e.moveMesh(this.mesh,i,s,a),this.updateMesh()},this.update=function(){return this.mesh.visible?this.parent&&this.parent.active&&this.parent.grapple?void this.updateMesh():void(this.mesh.visible=!1):void 0};let t=new n.Vector3;this.updateMesh=function(){if(this.parent){var i,n,s;this.parent.weaponMeshes&&this.parent.weaponMeshes[this.parent.loadoutIndex]&&this.parent.weaponMeshes[this.parent.loadoutIndex].muzzles?(this.parent.weaponMeshes[this.parent.loadoutIndex].muzzles[0].getWorldPosition(t),i=t.x,n=t.y,s=t.z):(i=this.parent.x,n=this.parent.y+(this.parent.height||0)/2,s=this.parent.z);var a=o.getD3D(this.x,this.y,this.z,i,n,s);this.mesh.lookAt(i,n,s),this.mesh.rotateX(Math.PI/2),e.scaleMesh(this.mesh,this.scale,a,this.scale),this.mesh.visible=!0}}}function u(e,t){var i=2==t?"trails/0":null;this.meshConf={src:null},i&&(this.meshConf={src:i,color:"#ef9ff2",mat:n.MeshBasicMaterial,noFog:!0,transparent:!0,depthWrite:!1,alphaTest:.05,blending:2,side:2}),this.meshConf.src?(this.mesh=e.genObj3D(0,0,0),e.loadMesh(this.meshConf,0,0,0,0,1,this.mesh)):this.mesh=new n.Mesh(c),this.tType=t,this.init=function(i){this.dst=i.dst/2,this.spd=i.spd,this.xS=i.xS,this.zS=i.zS,this.yS=i.yS,this.scale=2==t?6:.45,this.sclSpd=2==t?.016:36e-5,this.len=0,this.meshConf.src||(this.mesh.material=e.getMat("default",{mat:n.MeshBasicMaterial,forceMat:n.MeshBasicMaterial,color:e.trailColor||15592941,transparent:!0,opacity:.18}));var s=i.mesh.position.x,a=i.mesh.position.y,r=i.mesh.position.z;e.moveMesh(this.mesh,s,a,r),this.mesh.lookAt(s+this.xS,a+this.yS,r+this.zS),this.mesh.rotateX(Math.PI/2),e.scaleMesh(this.mesh,this.scale,this.dst,this.scale),this.mesh.visible=!0},this.update=function(t){this.mesh.visible&&(this.len<this.dst&&(this.len+=this.spd*t,this.len>=this.dst&&(this.len=this.dst)),this.scale-=this.sclSpd*t,e.scaleMesh(this.mesh,this.scale,this.len,this.scale),this.scale<=0&&(this.scale=0,this.mesh.visible=!1))}}class p extends n.Object3D{constructor(){super(),this.largeSpawnCount=8,this.smallSpawnCount=15,this.emissiveness=.55,this.velocityDamping=3,this.lifeSpeedMin=2.2,this.lifeSpeedRange=3,this.totalParticles=200,this.particleIndex=0;var e=new n.Color(12303291);let t=new n.BoxGeometry(1,1,1);t.computeVertexNormals(),this.mesh=new n.InstancedMesh(t,new n.StrippedLambertMaterial({color:e,emissive:e.multiplyScalar(this.emissiveness),flatShading:!1}),this.totalParticles),this.mesh.instanceMatrix.setUsage(n.DynamicDrawUsage),this.mesh.castShadow=!0,this.mesh.receiveShadow=!0,this.add(this.mesh),this.entities=[],this.entitiesToDelete=[],this.mesh.count=0}finished(){return 0===this.entities.length}explodeAt(e,t,i,n,s,a){this.sizeMin=.35*n,this.sizeRange=1.8*n,this.velocityMin=30*n,this.velocityRange=17*n,l.set(e,t,i),a=null==a?this.largeSpawnCount:a||0,s=null==s?this.smallSpawnCount:s||0,this.spawning=!0;for(var r=0;r<a;r++)this.spawnEntity(.1*Math.random()+.9,l,!1);for(r=0;r<s;r++)this.spawnEntity(.9*Math.random(),l,!1);this.spawning=!1}spawnEntity(e,t){var i=Math.pow(e,2.5),s=i*this.sizeRange+this.sizeMin,a=(1-i)*this.velocityRange+this.velocityMin,r=new n.Vector3(Math.random()-.5,Math.random()-.5,Math.random()-.5).normalize().multiplyScalar(a),o=i*this.lifeSpeedRange+this.lifeSpeedMin;let l=this.particleIndex%this.totalParticles;this.entities[l]={index:0,rank:i,rankSeed:e,life:0,lifeSpeed:o,size:s,scale:1,position:t.clone(),velocity:r,matrix:new n.Matrix4},this.particleIndex++,this.mesh.count=Math.min(this.particleIndex,this.totalParticles)}update(e){var t;e/=1e3;for(var i=0;i<Math.min(this.particleIndex,this.totalParticles);i++){(t=this.entities[i]).life+=e*t.lifeSpeed,t.velocity.multiplyScalar(1-this.velocityDamping*e),t.position.add(t.velocity.clone().multiplyScalar(e));var n=2-Math.pow(t.life/Math.sqrt(2),2);n*=t.size,t.scale=n,n<0&&(n=0),t.matrix.makeScale(n,n,n),t.matrix.setPosition(t.position.x,t.position.y,t.position.z),this.mesh.setMatrixAt(i,t.matrix)}this.mesh.instanceMatrix.needsUpdate=!0}}var f=[{rng:27,src:["whizz_0","whizz_1"],vol:.12}],m=[{mat:n.MeshBasicMaterial,snd:0,spd:1.7,scale:1,length:13,color:16777179},{spd:[.03,.031],rand:!0,carryV:!0,grav:3e-4,spn:[.04,.05],scale:.15,length:.5,color:10124094},{spd:[.03,.031],rand:!0,carryV:!0,grav:3e-4,spn:[.03,.05],scale:.1,length:.4,color:10124094}];function g(e,t,i){t=t||{};var a=(i=i||{})&&i.s?i.s:t?t.s:void 0,r=i?i.rot:void 0;if(this.meshConf={src:null},null!=a)if(o.isNumber(a))this.meshConf=o.getMeleeConfig(a,s,n);else{var l=(t.pjA||"").includes("g"),c=(t.pjA||"").includes("q"),d=(t.pjA||"").includes("f");this.meshConf={fileExt:c?"glb":l?"gltf":d?"fbx":null,hasAnim:!!l||!!c||!!d,src:a,asset:t.pjA,emissive:t.emis||null,noFog:!0,transparent:!!t.pjT,depthWrite:null==i.depthW?!!t.pjA:i.depthW,blending:null==i.blend?t.pjA&&!t.pjGl?0:2:i.blend,side:2}}this.meshConf.src?(this.mesh=e.genObj3D(0,0,0),e[this.meshConf.hasAnim?"loadAnimMesh":"loadMesh"](this.meshConf,0,0,0,null==r?Math.PI/2:r,1,this.mesh)):this.mesh=new n.Mesh(e.cubeGeo),this.init=function(t,i,s,a,r,l,c,d,h){this.dst=l,this.scale=c.scale*(h&&h.pjSC||1);var u=h&&h.v||1;this.spd=(c.spd[1]?o.randFloat(c.spd[0],c.spd[1]):c.spd)*u,this.spd*=h&&null!=h.pjSp?h.pjSp:1;var p=c&&c.carryV&&d;if(a-=Math.PI,this.xS=this.spd*Math.sin(a)*Math.cos(r)+(p?d.velocity.x:0),this.zS=this.spd*Math.cos(a)*Math.cos(r)+(p?d.velocity.z:0),this.yS=this.spd*Math.sin(r)+(p?d.velocity.y:0),this.grav=h&&null!=h.pjG?h.pjG:c.grav,this.lingerTime=c.linger,this.lookDir=!!c.lookDir,this.spin=(c.spn?c.spn[1]?o.randFloat(c.spn[0],c.spn[1]):c.spn:0)*u*(h&&null!=h.pjS?h.pjS||0:1),this.spinDir=(c.spnD||"x").toUpperCase(),this.sound=d&&d.isYou&&null!=c.snd?null:f[c.snd],this.soundPlayed=!1,this.meshConf.src||("BASIC"!=c.mat&&c.mat!=n.MeshBasicMaterial||(c.mat=n.MeshBasicMaterial,c.forceMat=n.MeshBasicMaterial),this.mesh.receiveShadow=c.mat!=n.MeshBasicMaterial,this.mesh.material=e.getMat("default",{fog:c.mat!=n.MeshBasicMaterial,color:c.color,emissive:c.emis,mat:c.mat,forceMat:c.forceMat,vertexColors:!1})),this.layer=d&&d.renderYou?1:0,e.moveMesh(this.mesh,t,i,s),c&&c.noLookAt||this.mesh.lookAt(t+this.xS,i+this.yS,s+this.zS),c&&c.rand&&this.mesh.rotateX(o.randFloat(-Math.PI,Math.PI)),h&&h.pjA){if(h){m=(h.pjSC||1)*(h.pjMS||1);e.scaleMesh(this.mesh,m,m,m)}}else{var m=(h&&h.pjMS&&h.pjMS||1)*(c.scaleMlt||1);e.scaleMesh(this.mesh,c.scale*m,c.scale*m,c.length*m)}},this.checkSound=function(){if(this.sound&&!this.soundPlayed){var e=Howler.pos();o.getD3D(e[0],e[1],e[2],this.mesh.position.x,this.mesh.position.y,this.mesh.position.z)<=this.sound.rng&&(SOUND.play(this.sound.src[o.randInt(0,this.sound.src.length-1)],this.sound.vol,!1,o.randFloat(.8,1.2)),this.soundPlayed=!0)}},this.update=function(e){this.mesh.visible&&(this.linger>0?(this.linger-=e,this.linger<=0&&(this.mesh.visible=!1)):(this.mesh.position.x+=this.xS*e,this.mesh.position.z+=this.zS*e,this.mesh.position.y+=this.yS*e,this.spin&&this.mesh["rotate"+this.spinDir](this.spin*e),this.grav&&(this.yS-=(this.grav||0)*e,this.lookDir&&this.mesh.lookAt(this.mesh.position.x+this.xS,this.mesh.position.y+this.yS,this.mesh.position.z+this.zS)),this.dst-=this.spd*e,this.checkSound(),this.dst<=0&&(this.mesh.visible=!1)))}}n.Sprite.prototype.init=function(e,t,i,n,s){this.position.x=e,this.position.y=t,this.position.z=i,this.xVel=n.xV||0,this.yVel=n.yV||0,this.oYVel=this.yVel,this.zVel=n.zV||0,this.startSiz=n.siz||0,this.scale.x=this.scale.y=this.startSiz,this.sclSpd=n.scl||0,this.life=n.life||0,this.decl=n.decl||0,this.grav=n.grav||0,this.static=n.static,this.dstVis=n.dstVis||0,this.visCountD=0,this.area=s,this.updC=0},n.Sprite.prototype.update=function(e,t,i,n){if(t){if((this.area||this.dstVis)&&(this.visCountD-=e,this.visCountD<=0)){var s=o.getD3D(i?i.x:0,i?i.y:0,i?i.z:0,this.position.x,this.position.y,this.position.z);this.visCountD=s>=2e3?o.randInt(5e3,7e3):s>=1e3?o.randInt(1500,2500):s>=400?o.randInt(1e3,1200):o.randInt(500,600),this.visible=s<=n*(this.dstVis||1)}if(this.visible||this.area){if(this.position.x+=this.xVel*e,this.position.z+=this.zVel*e,this.position.y+=this.yVel*e,this.yVel-=this.grav*e,this.area){var a=this.scale.x/2;this.position.x-a>=this.area.x+this.area.w?this.position.x=this.area.x-this.area.w-a:this.position.x+a<=this.area.x-this.area.w&&(this.position.x=this.area.x+this.area.w+a),this.position.z-a>=this.area.z+this.area.l?this.position.z=this.area.z-this.area.l-a:this.position.z+a<=this.area.z-this.area.l&&(this.position.z=this.area.z+this.area.l+a),this.position.y-a>this.area.y+this.area.h?(this.position.y=this.area.y-a,this.yVel=this.oYVel,this.visible=!1):this.position.y+a<this.area.y&&(this.position.y=this.area.y+this.area.h+a,this.yVel=this.oYVel,this.visible=!1)}this.life>0?(this.life-=e,this.life<=0&&this.updC&&(this.visible=!1),this.updC++):this.life<=0&&this.updC&&(this.visible=!1)}}else this.visible=!1};var v=[Math.PI/3,-Math.PI/3],y=[{src:"0",hole:!0,count:2,grav:-2e-5,scale:[5,9],speed:[0,.025],spread:[-.4,.4],life:[300,500]},{},{count:1,blending:2,scale:[5,7],speed:[0,0],spread:[0,0],life:[30,35]},{count:1,blending:2,scale:[2e3,2e3],speed:[0,0],spread:[0,0]},{count:4,src:"0",scale:[5,6],speed:[0,.01],spread:[-1,1],life:[600,800]},{src:"feather",count:1,grav:0,scale:[2,3],speed:[.005,.007],dstVis:70,colr:["#764CAD","#ffffc2","#51ff99","#ffa0b3"],spread:[-Math.PI,Math.PI],life:[1e3,1800]},{src:"glow_0",count:2,blending:2,grav:0,scale:[.5,.8],speed:[.005,.007],dstVis:70,colr:["#ffd666","#ffbd66"],spread:[-Math.PI,Math.PI],life:[1e3,1800]},{src:"star_0",count:5,blending:2,grav:0,scale:[.2,1],speed:[.005,.007],dstVis:70,colr:["#0A0068","#26007B","#42008D","#5E00A0","#7A00B2","#ffffff","#000000"],spread:[-Math.PI,Math.PI],life:[1e3,1800]}];e.exports=function(e){var t,i,s,a,l=this;this.particles=[],this.trails=[],this.ropes=[],this.physObjs=[],this.areas=[],this.active=!0,this.partDst=160,this.ExplosionManager=new p,this.showMuzzle=!0,this.showCasings=!0,this.showImpactHoles=!0,this.addRope=function(t,i,n,s){a=null;for(var r=0;r<this.ropes.length;++r)if(!this.ropes[r].mesh.visible||this.ropes[r].parent==t){a=this.ropes[r];break}a||(a=new h(e),this.ropes.push(a),e.scene.add(a.mesh)),a.init(t,i,n,s)},this.addTrail=function(t,i){s=null;for(var n=0;n<this.trails.length;++n)if(!this.trails[n].mesh.visible&&this.trails[n].tType==i){s=this.trails[n];break}s||(s=new u(e,i),this.trails.push(s),e.scene.add(s.mesh)),s.init(t)},this.area=function(e,t,i,n,s,a,c,d){n/=2,a/=2,l.areas.push({f:d,x:e,y:t,z:i,w:n,h:s,l:a});var h=.005*c.spd,u=((c.dir||0)+1)*Math.PI/2-Math.PI/2,p=r.particleIDS[c.txt||0]||"default";"default"!=p&&(p+="_0");for(var f=0;f<c.cnt;++f)l.add(e+o.randInt(-n,n),t+o.randInt(0,s),i+o.randInt(-a,a),{src:p,cnt:c.cnt,static:!0,xV:h*Math.cos(u),zV:h*Math.sin(u),grav:(c.grav||0)*(1e-5*o.randFloat(.7,1.3)),decl:c.decl,scl:c.scl*o.randFloat(.75,1.25),siz:c.siz,colr:c.colr,blend:c.blend},this.areas[this.areas.length-1])},this.effect=function(e,i,s,a,r,c,d){if(l.active){t=y[c];for(var h=0;h<t.count;++h){var u=o.randFloat(t.speed[0],t.speed[1]),p=a+o.randFloat(t.spread[0],t.spread[1]),f=r+o.randFloat(t.spread[0],t.spread[1]);this.add(e,i,s,{src:t.src||0,xV:u*Math.sin(p)*Math.cos(f),yV:u*Math.sin(f),zV:u*Math.cos(p)*Math.cos(f),blend:t.blending,grav:t.grav,dstVis:t.dstVis,colr:t.colr?t.colr[o.randInt(0,t.colr.length-1)]:null,siz:o.randFloat(t.scale[0],t.scale[1]),life:t.life?o.randInt(t.life[0],t.life[1]):0},null,d)}t.hole&&this.add(e,i,s,{src:"1",blend:n.SubtractiveBlending,siz:o.randFloat(.4,1),life:4e3},null,d)}},this.add=function(t,s,a,r,o,l){i=null;for(var c=l||e.scene,d=0;d<this.particles.length;++d)if(!this.particles[d].visible&&!this.particles[d].static&&this.particles[d].scene.name==c.name){i=this.particles[d];break}i||(i=new n.Sprite,this.particles.push(i),i.scene=c,c.add(i)),this.setMaterial(i,r.src,r.blend||0,"grass_0"!=r.src,r.colr),i.visible=!0,i.init(t,s,a,r,o)},this.setMaterial=function(t,i,s,a,r){t.material=e.getMat("particles/"+i,{mat:n.SpriteMaterial,color:null==r?"#ffffff":r,depthWrite:!1,blending:s||n.NormalBlending,rotation:a?v[o.randInt(0,2)]:0})},this.physObj=function(t,n,s,a,r,o,l,c,d,h,u,p,f){var v;i=null;for(var y=h||m[c],b=0;b<this.physObjs.length;++b)if(v=y&&y.s?y.s:f?f.s:null,!this.physObjs[b].mesh.visible&&this.physObjs[b].meshConf.src==v){i=this.physObjs[b];break}i||(i=new g(e,f,y),this.physObjs.push(i),e.scene.add(i.mesh)),i.sid=null==u?null:u,i.owid=p||null,i.mesh.visible=!0,i.init(t,n,s,a,r,o,y,d,f),l&&this.showTrails&&this.addTrail(i,l)},this.disablePhys=function(t,i,n,s,a,r){if(i)for(var o=0;o<this.physObjs.length;++o)this.physObjs[o].owid==t&&(this.physObjs[o].lingerTime&&n?(this.physObjs[o].mesh.children[0]&&this.physObjs[o].mesh.children[0].stopAllClips&&this.physObjs[o].mesh.children[0].stopAllClips(),e.moveMesh(this.physObjs[o].mesh,s,a,r),this.physObjs[o].mesh.lookAt(s-this.physObjs[o].xS,a-this.physObjs[o].yS,r-this.physObjs[o].zS),this.physObjs[o].linger=this.physObjs[o].lingerTime):this.physObjs[o].mesh.visible=!1);else for(o=0;o<this.physObjs.length;++o)this.physObjs[o].sid==t&&(this.physObjs[o].lingerTime&&n?(this.physObjs[o].mesh.children[0]&&this.physObjs[o].mesh.children[0].stopAllClips&&this.physObjs[o].mesh.children[0].stopAllClips(),e.moveMesh(this.physObjs[o].mesh,s,a,r),this.physObjs[o].mesh.lookAt(s-this.physObjs[o].xS,a-this.physObjs[o].yS,r-this.physObjs[o].zS),this.physObjs[o].linger=this.physObjs[o].lingerTime):this.physObjs[o].mesh.visible=!1)},this.update=function(e,t){if(t&&t.active)for(var i=0;i<this.areas.length;++i)this.areas[i].f&&(this.areas[i].x=t.x,this.areas[i].y=t.y,this.areas[i].z=t.z);for(i=0;i<this.ropes.length;++i)this.ropes[i].update();for(i=0;i<this.trails.length;++i)this.trails[i].update(e);for(i=0;i<this.particles.length;++i)this.particles[i].update(e,this.active,t,this.partDst);for(i=0;i<this.physObjs.length;++i)this.physObjs[i].update(e);this.ExplosionManager.update(e)},this.reset=function(){this.particles.length=0,this.trails.length=0,this.ropes.length=0,this.physObjs.length=0,this.areas.length=0},this.setTracerColor=function(e){m[0].color=e}}},function(e,t,i){let n=[{name:"Burg",fileName:"burg_new"},{name:"Littletown",fileName:"littletown"},{name:"Sandstorm",fileName:"sandstorm_v3"},{name:"Subzero",fileName:"subzero_new"},{name:"Undergrowth",fileName:"undergrowth"},{name:"Shipment",fileName:"shipment"},{name:"Freight",fileName:"freight"},{name:"Lostworld",fileName:"lostworld_s6"},{name:"Citadel",fileName:"citadel"},{name:"Oasis",fileName:"oasis_v3"},{name:"Kanji",fileName:"kanji"},{name:"Industry",fileName:"industry"},{name:"Lumber",fileName:"lumber"},{name:"Evacuation",fileName:"evacuation"},{name:"Site",fileName:"site"},{name:"SkyTemple",fileName:"skytemple_v2"},{name:"Lagoon",fileName:"lagoon"},{name:"Bureau",fileName:"bureau"},{name:"Tortuga",fileName:"shipwrecked"},{name:"Tropicano",fileName:"tropicano"},{name:"Krunk_Plaza",fileName:"krunk_plaza_v2"},{name:"Arena",fileName:"arena"},{name:"Habitat",fileName:"habitat_v2"},{name:"Atomic",fileName:"atomic"},{name:"Old_Burg",fileName:"burg_2018"},{name:"Throwback",fileName:"throwback_2018"},{name:"Stockade",fileName:"stockade_2018"},{name:"Facility",fileName:"facility"},{name:"Clockwork",fileName:"clockwork"},{name:"Laboratory",fileName:"laboratory"},{name:"Shipyard",fileName:"shipyard"},{name:"Soul Sanctum",fileName:"sanctum"},{name:"Bazaar",fileName:"bazaar"}];e.exports=()=>n},function(e,t,i){"use strict";i.d(t,"a",(function(){return l})),i.d(t,"b",(function(){return c})),i.d(t,"c",(function(){return o}));var n=i(27),s=i(61);Object(s.b)();const a=80;function r(e,t){const i=e,s=[];let a,r,o,l,c;if(!i||!i.tagName)return"";s.push(i.tagName.toLowerCase());const d=t&&t.length?t.filter((e=>i.getAttribute(e))).map((e=>[e,i.getAttribute(e)])):null;if(d&&d.length)d.forEach((e=>{s.push("["+e[0]+'="'+e[1]+'"]')}));else if(i.id&&s.push("#"+i.id),a=i.className,a&&Object(n.i)(a))for(r=a.split(/\s+/),c=0;c<r.length;c++)s.push("."+r[c]);const h=["aria-label","type","name","title","alt"];for(c=0;c<h.length;c++)o=h[c],l=i.getAttribute(o),l&&s.push("["+o+'="'+l+'"]');return s.join("")}i(124);function o(e,t,i){if(!(t in e))return;const n=e[t],s=i(n);if("function"==typeof s)try{!function(e,t){const i=t.prototype||{};e.prototype=t.prototype=i,l(e,"__sentry_original__",t)}(s,n)}catch(e){}e[t]=s}function l(e,t,i){Object.defineProperty(e,t,{value:i,writable:!0,configurable:!0})}function c(e){if(Object(n.b)(e))return{message:e.message,name:e.name,stack:e.stack,...h(e)};if(Object(n.c)(e)){const t={type:e.type,target:d(e.target),currentTarget:d(e.currentTarget),...h(e)};return"undefined"!=typeof CustomEvent&&Object(n.d)(e,CustomEvent)&&(t.detail=e.detail),t}return e}function d(e){try{return Object(n.a)(e)?function(e,t={}){try{let i=e;const n=[];let s=0,o=0;const l=" > ",c=l.length;let d;const h=Array.isArray(t)?t:t.keyAttrs,u=!Array.isArray(t)&&t.maxStringLength||a;for(;i&&s++<5&&(d=r(i,h),"html"!==d&&(s<=1||o+n.length*c+d.length<u));)n.push(d),o+=d.length,i=i.parentNode;return n.reverse().join(l)}catch(e){return"<unknown>"}}(e):Object.prototype.toString.call(e)}catch(e){return"<unknown>"}}function h(e){if("object"==typeof e&&null!==e){const t={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}return{}}},function(e,t,i){let n=i(1);var s,a={};e.exports.loadImg=e=>(a[e]||(a[e]=new Image,a[e].onload=()=>a[e].isReady=!0,a[e].src=e),a[e]),e.exports.patchImg=(e,t)=>(a[e]=new Image,a[e].onload=()=>a[e].isReady=!0,a[e].src=t,a[e]),e.exports.customGUI=(t,i,s,a,r,o,l)=>{t.save(1),t.globalAlpha=i.o||0;var c=(i.x||0)/100*s-(i.w||0)/2,d=(i.y||0)/100*a-(i.h||0)/2;if(t.fillStyle=i.c||"#ff0000",0==i.t&&t.fillRect(c,d,i.w||0,i.h||0),1==i.t){var h="";0==i.vt?h=i.v||"Text":1==i.vt?(h=i.v,r&&(h=l.playerVals.indexOf(i.v)>-1?r[i.v]:r.custVals[i.v]||0)):2==i.vt&&(h=0,o&&null!=o.globalVals[i.v+""]&&(h=o.globalVals[i.v+""]));var u=i.f||10;t.font=u+"px GameFont";var p=Math.round(t.measureText(h).width/2);t.fillText(h,c-p,d+u/2)}if(2==i.t){var f=n.userAssetsUrl("/"+(i.s||"").replace(/[^\d]/g,"")+"/texture.png"),m=e.exports.loadImg(f);m.isReady&&t.drawImage(m,c,d,i.w||0,i.h||0)}t.restore(-1)},e.exports.updateCustomGUI=(t,i,n,a,r,o,l,c,d,h)=>{if(l&&l.length)for(var u=c?l:[...l].sort(((e,t)=>(e.z||0)-(t.z||0))),p=0;p<u.length;++p)(s=u[p]).o&&!s.nv&&e.exports.customGUI(t,s,i,n,a,r,o,d,h)},e.exports.GIF=function(){function e(e){for(var t=[],i=0;i<e;i++)t.push([d.data[d.pos++],d.data[d.pos++],d.data[d.pos++]]);return t}function t(){var t,i,n;t=function(e){var t,i,n,s;for(t=p/e,i=0,h!==p&&(u=new Uint8Array(p),h=p),n=0;n<4;n++)for(s=m[n];s<t;s+=g[n])u.set(f.subArray(i,i+e),s*e),i+=e},i={},b.frames.push(i),i.disposalMethod=b.disposalMethod,i.time=b.length,i.delay=10*b.delayTime,b.length+=i.delay,i.transparencyIndex=b.transparencyGiven?b.transparencyIndex:void 0,i.leftPos=d.data[d.pos++]+(d.data[d.pos++]<<8),i.topPos=d.data[d.pos++]+(d.data[d.pos++]<<8),i.width=d.data[d.pos++]+(d.data[d.pos++]<<8),i.height=d.data[d.pos++]+(d.data[d.pos++]<<8),n=d.data[d.pos++],i.localColourTableFlag=!!(128&n),i.localColourTableFlag&&(i.localColourTable=e(1<<1+(7&n))),p!==i.width*i.height&&(f=new Uint8Array(i.width*i.height),p=i.width*i.height),function(e,t){var i,n,s,a,r,o,l,c,d,h,u,p;for(s=n=0,c=[],r=1+(a=1<<e),o=e+1,l=!1;!l;){for(h=d,d=0,i=0;i<o;i++)t[s>>3]&1<<(7&s)&&(d|=1<<i),s++;if(d===a){for(c=[],o=e+1,i=0;i<a;i++)c[i]=[i];c[a]=[],c[r]=null}else{if(d===r)return void(l=!0);for(d>=c.length?c.push(c[h].concat(c[h][0])):h!==a&&c.push(c[h].concat(c[d][0])),p=(u=c[d]).length,i=0;i<p;i++)f[n++]=u[i];c.length===1<<o&&o<12&&o++}}}(d.data[d.pos++],d.readSubBlocksB()),64&n?(i.interlaced=!0,t(i.width)):i.interlaced=!1,function(e){var t,i,n,s,a,o,l,c,d,h,p;e.image=document.createElement("canvas"),e.image.width=b.width,e.image.height=b.height,e.image.ctx=e.image.getContext("2d"),t=e.localColourTableFlag?e.localColourTable:b.globalColourTable,null===b.lastFrame&&(b.lastFrame=e);(o=2===b.lastFrame.disposalMethod||3===b.lastFrame.disposalMethod)||e.image.ctx.drawImage(b.lastFrame.image,0,0,b.width,b.height);for(i=e.image.ctx.getImageData(e.leftPos,e.topPos,e.width,e.height),p=e.transparencyIndex,n=i.data,d=e.interlaced?u:f,s=d.length,a=0,l=0;l<s;l++)h=t[c=d[l]],p===c?o?(n[a+3]=0,a+=4):a+=4:(n[a++]=h[0],n[a++]=h[1],n[a++]=h[2],n[a++]=255);e.image.ctx.putImageData(i,e.leftPos,e.topPos),b.lastFrame=e,b.waitTillDone||"function"!=typeof b.onload||r()}(i)}function i(){b.loading=!1,b.frameCount=b.frames.length,b.lastFrame=null,d=void 0,b.complete=!0,b.disposalMethod=void 0,b.transparencyGiven=void 0,b.delayTime=void 0,b.transparencyIndex=void 0,b.waitTillDone=void 0,f=void 0,u=void 0,p=void 0,u=void 0,b.currentFrame=0,b.frames.length>0&&(b.image=b.frames[0].image),r(),"function"==typeof b.onloadall&&b.onloadall.bind(b)({type:"loadall",path:[b]}),b.playOnLoad&&b.play()}function n(){const e=d.data[d.pos++];var t;e===v.GCExt?(d.pos++,t=d.data[d.pos++],b.disposalMethod=(28&t)>>2,b.transparencyGiven=!!(1&t),b.delayTime=d.data[d.pos++]+(d.data[d.pos++]<<8),b.transparencyIndex=d.data[d.pos++],d.pos++):e===v.COMMENT?b.comment+=d.readSubBlocks():e===v.APPExt?(d.pos+=1,"NETSCAPE"===d.getString(8)?d.pos+=8:(d.pos+=3,d.readSubBlocks())):(e===v.UNKNOWN&&(d.pos+=13),d.readSubBlocks())}function s(){if(void 0!==b.cancel&&!0===b.cancel)return i(),void("function"==typeof b.cancelCallback&&b.cancelCallback.bind(b)({type:"canceled",path:[b]}));const e=d.data[d.pos++];if(e!==v.IMAGE){if(e===v.EOF)return void i();n()}else if(t(),b.firstFrameOnly)return void i();"function"==typeof b.onprogress&&b.onprogress({bytesRead:d.pos,totalBytes:d.data.length,frame:b.frames.length}),setTimeout(s,0)}function a(e){"function"==typeof b.onerror&&b.onerror.bind(this)({type:e,path:[this]}),b.onload=b.onerror=void 0,b.loading=!1}function r(){b.currentFrame=0,b.nextFrameAt=b.lastFrameAt=(new Date).valueOf(),"function"==typeof b.onload&&b.onload.bind(b)({type:"load",path:[b]}),b.onerror=b.onload=void 0}function o(t){var i;(d=new y(t)).pos+=6,b.width=d.data[d.pos++]+(d.data[d.pos++]<<8),b.height=d.data[d.pos++]+(d.data[d.pos++]<<8),i=d.data[d.pos++],b.colorRes=(112&i)>>4,b.globalColourCount=1<<1+(7&i),b.bgColourIndex=d.data[d.pos++],d.pos++,128&i&&(b.globalColourTable=e(b.globalColourCount)),setTimeout(s,0)}function l(){var e,t;return 0===b.playSpeed?void b.pause():(b.playSpeed<0?(b.currentFrame-=1,b.currentFrame<0&&(b.currentFrame=b.frames.length-1),t=b.currentFrame,(t-=1)<0&&(t=b.frames.length-1),e=1*-b.frames[t].delay/b.playSpeed):(b.currentFrame+=1,b.currentFrame%=b.frames.length,e=1*b.frames[b.currentFrame].delay/b.playSpeed),b.image=b.frames[b.currentFrame].image,void(c=setTimeout(l,e)))}var c,d,h,u,p,f,m=[0,4,2,1],g=[8,8,4,2];const v={GCExt:249,COMMENT:254,APPExt:255,UNKNOWN:1,IMAGE:44,EOF:59,EXT:33};function y(e){this.data=new Uint8ClampedArray(e),this.pos=0;var t=this.data.length;this.getString=function(e){for(var t="";e--;)t+=String.fromCharCode(this.data[this.pos++]);return t},this.readSubBlocks=function(){var e,i,n="";do{for(i=e=this.data[this.pos++];i--;)n+=String.fromCharCode(this.data[this.pos++])}while(0!==e&&this.pos<t);return n},this.readSubBlocksB=function(){var e,i,n=[];do{for(i=e=this.data[this.pos++];i--;)n.push(this.data[this.pos++])}while(0!==e&&this.pos<t);return n}}var b={onload:null,onerror:null,onprogress:null,onloadall:null,paused:!1,playing:!1,waitTillDone:!0,loading:!1,firstFrameOnly:!1,width:null,height:null,frames:[],comment:"",length:0,currentFrame:0,frameCount:0,playSpeed:1,lastFrame:null,image:null,playOnLoad:!0,load:function(e){var t=new XMLHttpRequest;t.responseType="arraybuffer",t.onload=function(e){404===e.target.status?a("File not found"):e.target.status>=200&&e.target.status<300?o(t.response):a("Loading error : "+e.target.status)},t.open("GET",e,!0),t.send(),t.onerror=function(e){a("File error")},this.src=e,this.loading=!0},cancel:function(e){return!b.complete&&(b.cancelCallback=e,b.cancel=!0,!0)},play:function(){b.playing||(b.paused=!1,b.playing=!0,l())},pause:function(){b.paused=!0,b.playing=!1,clearTimeout(c)},seek:function(e){clearTimeout(c),e<0&&(e=0),e*=1e3,e%=b.length;for(var t=0;e>b.frames[t].time+b.frames[t].delay&&t<b.frames.length;)t+=1;b.currentFrame=t,b.playing?l():b.image=b.frames[b.currentFrame].image},seekFrame:function(e){clearTimeout(c),b.currentFrame=e%b.frames.length,b.playing?l():b.image=b.frames[b.currentFrame].image},togglePlay:function(){b.paused||!b.playing?b.play():b.pause()}};return b}},function(e,t){var i=[];e.exports.estimateValue=function(e){return i[e]},e.exports.update=function(e){i=e},e.exports.change=function(e,t){i[e]=t},e.exports.get=function(e){return i[e]},e.exports.dump=function(){return i}},function(e,t,i){let n="undefined"!=typeof location;const s=i(0);n&&(s.BufferGeometryUtils=i(116)(s));const a=i(1),r=i(4),{createNoise3D:o}=i(285),l=i(286),c=i(287).easing,d={GRASS:{ind:0,power:2100,slopeSton:.8,genTer:function(e,t,i,n){let s=e._sample(t,i,300);s=Math.floor(4*s)/4;let a=1*n[this.ind];return 18*s*n[this.ind]*e.sizeMlt+a}},MOUNTAIN:{ind:1,power:1900,genTer:function(e,t,i,n){let s=.4+.3*e._sample(t,i,200),a=1-2*Math.abs(s-e._sample(t,i,500)),r=.4+1.4*e._sample(t,i,400);return Math.abs(a*r*(220*e.mntMlt)*n[this.ind])*e.sizeMlt}},SNOW:{ind:2,forceCol:"SNOW",slopeSton:.75,earthLoc:.8,power:1e3,genTer:function(e,t,i,n){let s=e._sample(t,i,300);s=Math.floor(3*s)/3;let a=90*n[this.ind];return 15*s*n[this.ind]*e.sizeMlt+a}},HILLS:{ind:3,power:2100,slopeSton:.7,forceCol:"GRASS",genTer:function(e,t,i,n){let s=1-2*e._sample(t,i,2e3),a=.4+.4*e._sample(t,i,400);return Math.abs(s*a*(-100*e.mntMlt)*n[this.ind])*e.sizeMlt}}},h=Object.keys(d).length;var u=[];for(var p in d)d.hasOwnProperty(p)&&u.push(p);const f={TREE:{max:2e3,sample:300,maxHeight:230,biomes:["GRASS","SNOW","HILLS"],biomeCols:{SNOW:["#484d35","#4d4b35","#5c5a3c"]},biomeCoats:{SNOW:"#e8fdff"},check:function(e,t){return"MOUNTAIN"!=e&&"MOUNTAIN"!=t&&"DIRT"!=e&&"DIRT"!=t&&"SAND"!=e&&"SAND"!=t},rate:function(){return.18}},STUMP:{max:200,sample:300,maxHeight:600,biomes:["GRASS","SNOW","HILLS"],check:function(e,t){return"MOUNTAIN"!=e&&"MOUNTAIN"!=t},rate:function(){return.02}},LOOT:{max:50,sample:300,biomes:["GRASS","SNOW","HILLS"],check:function(e,t){return"MOUNTAIN"!=e&&"MOUNTAIN"!=t},rate:function(){return.02}},ROCK:{max:500,sample:300,maxHeight:400,biomes:["GRASS","SNOW","HILLS"],biomeCoats:{SNOW:"#e8fdff"},check:function(){return!0},rate:function(){return.075}},BUSH:{sample:400,maxHeight:200,client:!0,biomes:["GRASS","SNOW","HILLS"],biomeCols:{SNOW:["#484d35"]},biomeCoats:{SNOW:"#e8fdff"},check:function(e,t){return"MOUNTAIN"!=e&&"MOUNTAIN"!=t},rate:function(){return.05}},GRASS:{sample:400,maxHeight:200,countM:1,client:!0,biomes:["GRASS","HILLS"],biomeCols:{GRASS:["#4d5928"],HILLS:["#4d5928"]},check:function(e,t){return!1}}},m=e=>e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,((e,t,i,n)=>"#"+t+t+i+i+n+n)).substring(1).match(/.{2}/g).map((e=>parseInt(e,16)));var g=new s.Vector3,v=new s.Vector3,y=new s.Vector3;class b extends s.Object3D{static fromConfig(e){return new b(e.terrainSeed,e.terrainWidth,e.terrainHeight,e.sizeMlt,e.terrainMntMlt,e.terrainDrtCol,e.terrainGrsCol,e.terrainMntCol,e.terrainSnwCol,e.terrainSndCol,e.terrainTSeed,e.terrainEase)}constructor(e,t,i,h,p,g,v,y,w,x,S,M){function k(e,t,i,n){var s=i+"_"+n;z[s]||=[],z[s].push({i:e,c:t})}for(var _ in super(),5.7,this.name="Terrain",this.sizeMlt=5.7,this.sizeX=a.limitMM(t,r.minTerrainSize,r.maxTerrainSize),this.sizeY=a.limitMM(i,r.minTerrainSize,r.maxTerrainSize),this.edgeSize=500,this.mntMlt=a.limitMM(p,r.minMountainMlt,r.maxMountainMlt),this.COLORS={DIRT:m(g||"#8c6835"),GRASS:m(v||"#4a6904"),MOUNTAIN:m(y||"#a0a0a0"),SAND:m(x||"#967f51"),SNOW:m(w||"#e8fdff"),HILLS:m(v||"#4a6904")},this.ease=c[b.EASE_LIST[M]||"easeInOutQuint"],this.MAP_OBJS=f,this.BIOME_INDEXES=u,this.noise3D=o(l(e+"")),this.noise3DObjs=S?o(l(S+"")):null,this.sampleIndex3D=0,this.genObjs=!!S,this.objPos={},f)f.hasOwnProperty(_)&&(this.objPos[_]=[]);let T=Math.floor(this.sizeX/25),C=Math.floor(this.sizeY/25);this.xSegmentCount=T,this.ySegmentCount=C;let I=this.sizeX/T,A=this.sizeY/C;this.xSegmentSize=I,this.ySegmentSize=A;let R=new s.BufferGeometry,P=T*C*6,E=new s.BufferAttribute(new Float32Array(3*P),3);R.setAttribute("position",E);let D=new s.BufferAttribute(new Float32Array(3*P),3,!0);this.vertPositions=E,this.terrainPoints=(T+1)*(C+1),this.terrainHeights=new Float32Array(this.terrainPoints),this.biomeSegs={};for(let e=0;e<T+1;e++)for(let t=0;t<C+1;t++){let i=e+t*(T+1),n=this._vertPos(e,I,this.sizeX),s=this._vertPos(t,A,this.sizeY),[a,r]=this.evaluate(n,s);this.terrainHeights[i]=a;var O=0,L=0;for(var j in d)d.hasOwnProperty(j)&&r[d[j].ind]>L&&(L=r[d[j].ind],O=d[j].ind);this.biomeSegs[e+"_"+t]={i:O}}var z={};for(let e=0;e<T;e++)for(let t=0;t<C;t++){let i=6*(e+t*T),s=this._vertPos(e,I,this.sizeX),a=this._vertPos(t,A,this.sizeY),r=[s,a,this.terrainHeight(e,t)],o=[s+I,a,this.terrainHeight(e+1,t)],l=[s+I,a+A,this.terrainHeight(e+1,t+1)],c=[s,a+A,this.terrainHeight(e,t+1)];E.setXYZ(i,...r),E.setXYZ(i+1,...o),E.setXYZ(i+2,...l),E.setXYZ(i+3,...l),E.setXYZ(i+4,...c),E.setXYZ(i+5,...r);var B=this.biomeSegs[e+"_"+t];let d=this._centroid3D(r,o,l),h=this._centroid3D(l,c,r),p=this._normal3D(r,o,l);B.c=this.evaluateColor(d,p,B.i);var N=Math.max(d[2],h[2]);if(this.genObjs)for(var F in f)f.hasOwnProperty(F)&&f[F].biomes.indexOf(u[B.i])>=0&&(!f[F].maxHeight||f[F].maxHeight>N)&&f[F].check(B.c)&&(this.evaluateObj(d,r,o,l,B.i,F,f[F].client&&!n),this.evaluateObj(h,l,c,r,B.i,F,f[F].client&&!n));if(n){let n=this.calcAOWeight(e,t),s=this.calcAOWeight(e+1,t),a=this.calcAOWeight(e+1,t+1),r=this.calcAOWeight(e,t+1);var H=this.COLORS[B.c];k(i,this._weightColor(H,n),e-.5,t-.5),k(i+1,this._weightColor(H,s),e+.5,t-.5),k(i+2,this._weightColor(H,a),e+.5,t+.5),k(i+3,this._weightColor(H,a),e+.5,t+.5),k(i+4,this._weightColor(H,r),e-.5,t+.5),k(i+5,this._weightColor(H,n),e-.5,t-.5)}}if(n)for(var _ in z)if(z.hasOwnProperty(_)){H=[0,0,0];for(var U=0;U<z[_].length;++U)D.setXYZ(z[_][U].i,...z[_][U].c)}if(z=null,this.biomeSegs=null,R.setAttribute("color",new s.BufferAttribute(new Uint8Array(D.array),3,!0)),n){R=s.BufferGeometryUtils.mergeVertices(R),R.computeVertexNormals(!0);var V=new s.StrippedLambertMaterial({color:9211020,flatShading:!1,vertexColors:!0});this.baseMesh=new s.Mesh(R,V),this.baseMesh.receiveShadow=!0,this.baseMesh.scale.set(5.7,5.7,1),this.add(this.baseMesh)}this._raycastRay=new s.Ray,this._raycastTriA=new s.Vector3,this._raycastTriB=new s.Vector3,this._raycastTriC=new s.Vector3,this._raycastTriangle=new s.Triangle,this._raycastNormal=new s.Vector3,this._raycastTarget=new s.Vector3,this._raycastClosestTarget=new s.Vector3}generateTexture(e,t){var i=document.createElement("canvas");i.width=e,i.height=t;var n=i.getContext("2d");return n.fillStyle="#ffffff",n.fillRect(0,0,e,t),n.fillStyle="#000000",n.fillRect(0,0,e/2,t/2),i}evaluateObj(e,t,i,n,s,a,r){if(e[2]>-120){var o=f[a];if(!o.max||this.objPos[a].length<o.max){let u=this._sample3D(e[0],e[1],o.sample);var l=o.rate?o.rate(s):null;if(null==l||u>1-l||u<l)for(var c,d=Math.floor(u*(o.countM||1))||1,h=0;h<d;h++)c=this.randomInTriangle(t,i,n,e[0],e[1]),r||this.objPos[a].push([c.x*this.sizeMlt,c.z,-c.y*this.sizeMlt,s])}}}randomInTriangle(e,t,i,n,s){e=g.set(...e),t=v.set(...t),i=y.set(...i);var a=this._sample3D(n,s,400),r=Math.sqrt(this._sample3D(n,s,500));return e.clone().multiplyScalar(1-r).add(t.clone().multiplyScalar(r*(1-a))).add(i.clone().multiplyScalar(a*r))}terrainIndex(e,t){let i=e+t*(this.xSegmentCount+1);return i<0||i>=this.terrainHeights.length?0:i}terrainHeight(e,t){return this.terrainHeights[this.terrainIndex(e,t)]}calcAOWeight(e,t){let i=this._vertPos(e,this.xSegmentSize,this.sizeX),n=this._vertPos(t,this.ySegmentSize,this.sizeY),s=this._topAngleOnTerrain(i-this.xSegmentSize,this.terrainHeight(e-1,t),i,this.terrainHeight(e,t),i+this.xSegmentSize,this.terrainHeight(e+1,t)),a=this._topAngleOnTerrain(n-this.xSegmentSize,this.terrainHeight(e,t-1),n,this.terrainHeight(e,t),n+this.ySegmentSize,this.terrainHeight(e,t+1)),r=Math.PI,o=1-(1-Math.max(r-s,0)/r)*(1-Math.max(r-a,0)/r);return o>=.5?o=.65:o>=.2?o=.3:o>=.1&&(o=.25),o}heightAt(e,t){e/=this.sizeMlt,t/=this.sizeMlt;let i=Math.floor(this._worldToLocal(e,this.sizeX,this.xSegmentSize)),n=Math.floor(this._worldToLocal(t,this.sizeY,this.ySegmentSize)),s=w(this._worldToLocal(e),this.xSegmentSize)/this.xSegmentSize,a=w(this._worldToLocal(t),this.ySegmentSize)/this.ySegmentSize,r=x(this.terrainHeight(i,n),this.terrainHeight(i,n+1),a),o=x(this.terrainHeight(i+1,n),this.terrainHeight(i+1,n+1),a);return x(r,o,s)}_worldToLocal(e,t,i){return(e+t/2)/i}raycast(e,t,i,n,s,a,r=!1){e/=this.sizeMlt,t/=this.sizeMlt,n/=this.sizeMlt,s/=this.sizeMlt;let o,l,c,d=Math.sqrt(n*n+s*s+a*a);this._raycastRay.origin.set(e,t,i),this._raycastRay.direction.set(n,s,a);let h=this._worldToLocal(e,this.sizeX,this.xSegmentSize),u=this._worldToLocal(t,this.sizeY,this.ySegmentSize),p=h+n/this.xSegmentSize,f=u+s/this.ySegmentSize,m=Math.abs(p-h),g=Math.abs(f-u),v=Math.floor(h),y=Math.floor(u),b=1;for(0==m?(o=0,c=Number.POSITIVE_INFINITY):p>h?(o=1,b+=Math.floor(p)-v,c=(Math.floor(h)+1-h)*g):(o=-1,b+=v-Math.floor(p),c=(h-Math.floor(h))*g),0==g?(l=0,c-=Number.POSITIVE_INFINITY):f>u?(l=1,b+=Math.floor(f)-y,c-=(Math.floor(u)+1-u)*m):(l=-1,b+=y-Math.floor(f),c-=(u-Math.floor(u))*m);b>0;b--){if(this._raycastVisit(v,y,e,t,i,n,s,a,d,r)){let e=this._raycastClosestTarget;return e.x*=this.sizeMlt,e.y*=this.sizeMlt,e}c>0?(y+=l,c-=m):(v+=o,c+=g)}}_raycastVisit(e,t,i,n,s,a,r,o,l,c){let d=e+t*this.xSegmentCount,h=Number.POSITIVE_INFINITY,u=!1;for(let e,t=0;t<2;t++){e=6*d+3*t,this._raycastTriA.set(this.vertPositions.getX(e),this.vertPositions.getY(e),this.vertPositions.getZ(e)),this._raycastTriB.set(this.vertPositions.getX(e+1),this.vertPositions.getY(e+1),this.vertPositions.getZ(e+1)),this._raycastTriC.set(this.vertPositions.getX(e+2),this.vertPositions.getY(e+2),this.vertPositions.getZ(e+2));let i=this._raycastRay.intersectTriangle(this._raycastTriA,this._raycastTriB,this._raycastTriC,!0,this._raycastTarget);if(i){let e=i.distanceTo(this._raycastRay.origin);e<h&&e<l&&(h=e,u=!0,this._raycastClosestTarget.copy(i),this._raycastTriangle.set(this._raycastTriA,this._raycastTriB,this._raycastTriC))}}return c&&u&&this._raycastTriangle.getNormal(this._raycastNormal),u}evaluate(e,t){let i=0;this.sampleIndex=0;let n=[];for(let i=0;i<h;i++){var s=d[u[i]].power||1800;n.push(this._sample(e,t,s))}let a=n.reduce(((e,t)=>e+t),0);n=n.map(((e,t)=>[t,e/a])),n=n.sort(((e,t)=>t[1]-e[1]));let r={},[o,l]=n[0];r[o]=this._easeTerrain(l/(l+n[1][1]));for(let e=1;e<n.length;e++){let[t,i]=n[e];r[t]=this._easeTerrain(i/(l+i))}for(var c in d)d.hasOwnProperty(c)&&(i+=d[c].genTer(this,e,t,r));let p=this._calcEdgeFade(e,this.sizeX)*this._calcEdgeFade(t,this.sizeY);return i*=p,i+=2e3*(p-1),(Math.abs(e)>=this.sizeX/2||Math.abs(t)>=this.sizeY/2)&&(i=-1e3),[i,r]}evaluateColor(e,t,i){let n,s=e[2],a=Math.atan2(Math.abs(t[0]),Math.abs(t[2])),r=Math.atan2(Math.abs(t[1]),Math.abs(t[2])),o=1-a/(2*Math.PI),l=1-r/(2*Math.PI);n=s>100?"MOUNTAIN":s>5?"GRASS":"DIRT";var c=d[u[i]];return c.forceCol&&(n=c.forceCol),s>950&&(n="SNOW"),s<=-10?n="SAND":(s>250||o*l<=(c.slopeSton||.85))&&(n="MOUNTAIN"),n}_sample(e,t,i){return this.sampleIndex++,this.noise3D(e/i,t/i,1e4*this.sampleIndex)/2+.5}_sample3D(e,t,i){return this.sampleIndex3D++,this.noise3DObjs(e/i,t/i,1e4*this.sampleIndex3D)/2+.5}_easeTerrain(e){return this.ease(this.ease(e))}_calcEdgeFade(e,t){if(Math.abs(e)>=t/2)return 0;let i=(Math.abs(e)-t/2+this.edgeSize)/this.edgeSize;return i=1-Math.max(i,0),c.easeOutQuint(i)}_vertPos(e,t,i){return e*t-i/2}_avgPos(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2,(e[2]+t[2])/2]}_centroid3D(e,t,i){return[(e[0]+t[0]+i[0])/3,(e[1]+t[1]+i[1])/3,(e[2]+t[2]+i[2])/3]}_normal3D(e,t,i){let n=i[0]-t[0],s=i[1]-t[1],a=i[2]-t[2],r=e[0]-t[0],o=e[1]-t[1],l=e[2]-t[2],c=s*l-a*o,d=a*r-n*l,h=n*o-s*r,u=Math.sqrt(c*c+d*d+h+h);return[c/u,d/u,h/u]}_topAngleOnTerrain(e,t,i,n,s,a){let r=Math.atan2(t-n,e-i),o=Math.atan2(a-n,s-i);return r<0&&(r+=2*Math.PI),r-o}_weightColor(e,t){return e.map((e=>e*(1-t)))}}function w(e,t){return(e%t+t)%t}function x(e,t,i){return e*(1-i)+t*i}b.CONFIG_PROPS=["terrainSeed","terrainTSeed","terrainWidth","terrainHeight","sizeMlt","terrainMntMlt","terrainDrtCol","terrainGrsCol","terrainMntCol","terrainSnwCol","terrainSndCol","terrainEase"],b.EASE_LIST=Object.keys(c),b.BIOME_LIST=Object.keys(d),e.exports=b},function(e,t,i){"use strict";i.r(t),i.d(t,"createNoise2D",(function(){return p})),i.d(t,"createNoise3D",(function(){return f})),i.d(t,"createNoise4D",(function(){return m})),i.d(t,"buildPermutationTable",(function(){return g}));const n=.5*(Math.sqrt(3)-1),s=(3-Math.sqrt(3))/6,a=1/3,r=1/6,o=(Math.sqrt(5)-1)/4,l=(5-Math.sqrt(5))/20,c=e=>0|Math.floor(e),d=new Float64Array([1,1,-1,1,1,-1,-1,-1,1,0,-1,0,1,0,-1,0,0,1,0,-1,0,1,0,-1]),h=new Float64Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),u=new Float64Array([0,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,1,0,1,1,1,0,1,-1,1,0,-1,1,1,0,-1,-1,-1,0,1,1,-1,0,1,-1,-1,0,-1,1,-1,0,-1,-1,1,1,0,1,1,1,0,-1,1,-1,0,1,1,-1,0,-1,-1,1,0,1,-1,1,0,-1,-1,-1,0,1,-1,-1,0,-1,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,0]);function p(e=Math.random){const t=g(e),i=new Float64Array(t).map((e=>d[e%12*2])),a=new Float64Array(t).map((e=>d[e%12*2+1]));return function(e,r){let o=0,l=0,d=0;const h=(e+r)*n,u=c(e+h),p=c(r+h),f=(u+p)*s,m=e-(u-f),g=r-(p-f);let v,y;m>g?(v=1,y=0):(v=0,y=1);const b=m-v+s,w=g-y+s,x=m-1+2*s,S=g-1+2*s,M=255&u,k=255&p;let _=.5-m*m-g*g;if(_>=0){const e=M+t[k];_*=_,o=_*_*(i[e]*m+a[e]*g)}let T=.5-b*b-w*w;if(T>=0){const e=M+v+t[k+y];T*=T,l=T*T*(i[e]*b+a[e]*w)}let C=.5-x*x-S*S;if(C>=0){const e=M+1+t[k+1];C*=C,d=C*C*(i[e]*x+a[e]*S)}return 70*(o+l+d)}}function f(e=Math.random){const t=g(e),i=new Float64Array(t).map((e=>h[e%12*3])),n=new Float64Array(t).map((e=>h[e%12*3+1])),s=new Float64Array(t).map((e=>h[e%12*3+2]));return function(e,o,l){let d,h,u,p;const f=(e+o+l)*a,m=c(e+f),g=c(o+f),v=c(l+f),y=(m+g+v)*r,b=e-(m-y),w=o-(g-y),x=l-(v-y);let S,M,k,_,T,C;b>=w?w>=x?(S=1,M=0,k=0,_=1,T=1,C=0):b>=x?(S=1,M=0,k=0,_=1,T=0,C=1):(S=0,M=0,k=1,_=1,T=0,C=1):w<x?(S=0,M=0,k=1,_=0,T=1,C=1):b<x?(S=0,M=1,k=0,_=0,T=1,C=1):(S=0,M=1,k=0,_=1,T=1,C=0);const I=b-S+r,A=w-M+r,R=x-k+r,P=b-_+2*r,E=w-T+2*r,D=x-C+2*r,O=b-1+3*r,L=w-1+3*r,j=x-1+3*r,z=255&m,B=255&g,N=255&v;let F=.6-b*b-w*w-x*x;if(F<0)d=0;else{const e=z+t[B+t[N]];F*=F,d=F*F*(i[e]*b+n[e]*w+s[e]*x)}let H=.6-I*I-A*A-R*R;if(H<0)h=0;else{const e=z+S+t[B+M+t[N+k]];H*=H,h=H*H*(i[e]*I+n[e]*A+s[e]*R)}let U=.6-P*P-E*E-D*D;if(U<0)u=0;else{const e=z+_+t[B+T+t[N+C]];U*=U,u=U*U*(i[e]*P+n[e]*E+s[e]*D)}let V=.6-O*O-L*L-j*j;if(V<0)p=0;else{const e=z+1+t[B+1+t[N+1]];V*=V,p=V*V*(i[e]*O+n[e]*L+s[e]*j)}return 32*(d+h+u+p)}}function m(e=Math.random){const t=g(e),i=new Float64Array(t).map((e=>u[e%32*4])),n=new Float64Array(t).map((e=>u[e%32*4+1])),s=new Float64Array(t).map((e=>u[e%32*4+2])),a=new Float64Array(t).map((e=>u[e%32*4+3]));return function(e,r,d,h){let u,p,f,m,g;const v=(e+r+d+h)*o,y=c(e+v),b=c(r+v),w=c(d+v),x=c(h+v),S=(y+b+w+x)*l,M=e-(y-S),k=r-(b-S),_=d-(w-S),T=h-(x-S);let C=0,I=0,A=0,R=0;M>k?C++:I++,M>_?C++:A++,M>T?C++:R++,k>_?I++:A++,k>T?I++:R++,_>T?A++:R++;const P=C>=3?1:0,E=I>=3?1:0,D=A>=3?1:0,O=R>=3?1:0,L=C>=2?1:0,j=I>=2?1:0,z=A>=2?1:0,B=R>=2?1:0,N=C>=1?1:0,F=I>=1?1:0,H=A>=1?1:0,U=R>=1?1:0,V=M-P+l,G=k-E+l,W=_-D+l,q=T-O+l,Y=M-L+2*l,K=k-j+2*l,X=_-z+2*l,Z=T-B+2*l,J=M-N+3*l,Q=k-F+3*l,$=_-H+3*l,ee=T-U+3*l,te=M-1+4*l,ie=k-1+4*l,ne=_-1+4*l,se=T-1+4*l,ae=255&y,re=255&b,oe=255&w,le=255&x;let ce=.6-M*M-k*k-_*_-T*T;if(ce<0)u=0;else{const e=ae+t[re+t[oe+t[le]]];ce*=ce,u=ce*ce*(i[e]*M+n[e]*k+s[e]*_+a[e]*T)}let de=.6-V*V-G*G-W*W-q*q;if(de<0)p=0;else{const e=ae+P+t[re+E+t[oe+D+t[le+O]]];de*=de,p=de*de*(i[e]*V+n[e]*G+s[e]*W+a[e]*q)}let he=.6-Y*Y-K*K-X*X-Z*Z;if(he<0)f=0;else{const e=ae+L+t[re+j+t[oe+z+t[le+B]]];he*=he,f=he*he*(i[e]*Y+n[e]*K+s[e]*X+a[e]*Z)}let ue=.6-J*J-Q*Q-$*$-ee*ee;if(ue<0)m=0;else{const e=ae+N+t[re+F+t[oe+H+t[le+U]]];ue*=ue,m=ue*ue*(i[e]*J+n[e]*Q+s[e]*$+a[e]*ee)}let pe=.6-te*te-ie*ie-ne*ne-se*se;if(pe<0)g=0;else{const e=ae+1+t[re+1+t[oe+1+t[le+1]]];pe*=pe,g=pe*pe*(i[e]*te+n[e]*ie+s[e]*ne+a[e]*se)}return 27*(u+p+f+m+g)}}function g(e){const t=512,i=new Uint8Array(t);for(let e=0;e<256;e++)i[e]=e;for(let t=0;t<255;t++){const n=t+~~(e()*(256-t)),s=i[t];i[t]=i[n],i[n]=s}for(let e=256;e<t;e++)i[e]=i[e-256];return i}},function(e,t,i){e.exports=function(){"use strict";function e(){return function(e){var i=0,n=0,s=0,a=1;0==e.length&&(e=[+new Date]);var r=t();i=r(" "),n=r(" "),s=r(" ");for(var o=0;o<e.length;o++)(i-=r(e[o]))<0&&(i+=1),(n-=r(e[o]))<0&&(n+=1),(s-=r(e[o]))<0&&(s+=1);function l(){var e=2091639*i+2.3283064365386963e-10*a;return i=n,n=s,s=e-(a=0|e)}return r=null,l.next=l,l.uint32=function(){return 4294967296*l()},l.fract53=function(){return l()+11102230246251565e-32*(2097152*l()|0)},l.version="Alea 0.9",l.args=e,l.exportState=function(){return[i,n,s,a]},l.importState=function(e){i=+e[0]||0,n=+e[1]||0,s=+e[2]||0,a=+e[3]||0},l}(Array.prototype.slice.call(arguments))}function t(){var e=4022871197;function t(t){t=t.toString();for(var i=0;i<t.length;i++){var n=.02519603282416938*(e+=t.charCodeAt(i));n-=e=n>>>0,e=(n*=e)>>>0,e+=4294967296*(n-=e)}return 2.3283064365386963e-10*(e>>>0)}return t.version="Mash 0.9",t}return e.importState=function(t){var i=new e;return i.importState(t),i},e}()},function(e,t){e.exports.easing={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>e*(2-e),easeInOutQuad:e=>e<.5?2*e*e:(4-2*e)*e-1,easeInCubic:e=>e*e*e,easeOutCubic:e=>--e*e*e+1,easeInOutCubic:e=>e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1,easeInQuart:e=>e*e*e*e,easeOutQuart:e=>1- --e*e*e*e,easeInOutQuart:e=>e<.5?8*e*e*e*e:1-8*--e*e*e*e,easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>1+--e*e*e*e*e,easeInOutQuint:e=>e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}},function(e,t,i){let n="undefined"!=typeof location;const s=i(15),a=i(0),r=i(1),o=i(4);class l extends a.Object3D{static fromConfig(e,t){return new l(e.zoneSize,e.zoneSpeed,e.zoneRnd,e.zoneCol0,e.zoneCol1,e.zoneCol2,e.zoneHeight,e.zoneStages,e.zoneWait,t)}constructor(e,t,i,n,l,c,d,h,u,p){if(super(),this.randomEndPoint=!!i,u=r.isNumber(u)?u:0,this.waitTimer=1e3*r.limitMM(u||0,o.minZoneWait,o.maxZoneWait),h=r.isNumber(h)?h:0,this.stages=r.limitMM(h||0,o.minZoneStages,o.maxZoneStages),this._waitTimer=this.waitTimer,this._stages=this.stages,this._size=r.limitMM(e||50,o.minZoneSize,o.maxZoneSize),this._height=r.limitMM(d||1e3,o.minZoneHeight,o.maxZoneHeight),this.circleSize=new a.Vector3,this.circlePosition=new a.Vector3,this.targetCircleSize=new a.Vector3,this.targetCirclePosition=new a.Vector3,this.circleShrinkSpeed=2.5*r.limitMM(t||1,o.minShrinkSpeed,o.maxShrinkSpeed),p){let e={src:"zone_0",repeatX:20,repeatY:20},t=new a.MeshBasicMaterial({color:"#ffffff",depthWrite:!1,flatShading:!1,vertexColors:!0,side:a.DoubleSide,transparent:!0,opacity:.5});t.onBeforeCompile=e=>{e.defines?e.defines.USE_UV="":e.defines={USE_UV:""},e.uniforms.firstColor={value:new a.Color(n||s.zone.BR[0])},e.uniforms.middleColor={value:new a.Color(l||s.zone.BR[1])},e.uniforms.endColor={value:new a.Color(c||s.zone.BR[2])},e.fragmentShader="\n\t\t\t\t\tvarying vec2 vUv_kr;\n\t\t\t\t\tuniform vec3 firstColor;\n\t\t\t\t\tuniform vec3 middleColor;\n\t\t\t\t\tuniform vec3 endColor;\n\t\t\t\t\tvec2 RES = vec2(512,512);\n\t\t\t\t\tvec3 getGradient(vec2 coord) {\n\t\t\t\t\t\tvec2 xy = coord.yx / RES;\n\t\t\t\t\t\tfloat h = 0.5; // adjust position of middleColor\n\t\t\t\t\t\tvec3 col = mix(mix(endColor, middleColor, xy.x/h), mix(middleColor, firstColor, (xy.x - h)/(1.0 - h)), step(h, xy.x));\n\n\t\t\t\t\t\treturn col;\n\t\t\t\t\t}\n\t\t\t\t"+e.fragmentShader.replace("#include <dithering_fragment>","\n\t\t\t\t\t#include <dithering_fragment>\n\t\t\t\t\tgl_FragColor.rgb *= getGradient(RES*vUv_kr);\n\t\t\t\t"),e.vertexShader="\n\t\t\t\t\tvarying vec2 vUv_kr;\n\t\t\t\t"+e.vertexShader.replace("#include <fog_vertex>","\n\t\t\t\t\t#include <fog_vertex>\n\t\t\t\t\tvUv_kr=uv;\n\t\t\t\t")},e.src&&p.loadTexture(t,e.src,e);let i=new a.CylinderGeometry(1,1,1,32,32,!0);i.computeBoundingBox(),i.computeBoundingSphere(),i.computeVertexNormals(!0),this.baseMesh=new a.Mesh(i,t)}this.reset(),p&&this.add(this.baseMesh)}animate(e){this.baseMesh&&this.baseMesh.material.map&&(this.baseMesh.material.map.offset.y+=3e-5*e)}update(e,t,i){if(n)this.shrinkTween&&this.shrinkTween.stop(),this.shrinkTween=new TWEEN.Tween(this.scale).to({x:t[2],z:t[3]},900).easing(TWEEN.Easing.Linear.None).start(),this.moveTween&&this.moveTween.stop(),this.moveTween=new TWEEN.Tween(this.position).to({x:t[0],z:t[1]},900).easing(TWEEN.Easing.Linear.None).start(),(t[2]<=0||t[3]<=0)&&(this.visible=!1);else{if(this.circleSize.x<=this.targetCircleSize.x&&this.circleSize.z<=this.targetCircleSize.z){if(this.stages){if(this.waitTimer-=1e3*e,!this.waiting){this.waiting=!0;var s={time:this.waitTimer,contTime:!0,canDMG:!0,msg:"Zone closing in "};i.waitTimers?i.waitTimers.push(s):i.waitTimers=[s]}this.waitTimer<=0&&(this.waitTimer=this._waitTimer,this.stages--,this.nextCircle())}return}var r=(new a.Vector3).subVectors(this.targetCircleSize,this.circleSize).normalize(),o=(new a.Vector3).addVectors(this.circleSize,r.multiplyScalar(e*this.circleShrinkSpeed)),l=(new a.Vector3).subVectors(this.targetCirclePosition,this.circlePosition).normalize(),c=(new a.Vector3).addVectors(this.circlePosition,l.multiplyScalar(e*this.circleShrinkSpeed));this.setCircleSize(c,o)}}reset(){n?(this.scale.set(this._size,this._height,this._size),this.position.set(0,0,0),this.visible=!0):(this.waitTimer=this._waitTimer,this.stages=this._stages,this.waiting=!1,this.setCircleSize(new a.Vector3(0,0,0),new a.Vector3(this._size,this._height,this._size)),this.nextCircle())}nextCircle(){this.waiting=!1;var e=this.generateTargetCircle();this.setTargetCircle(new a.Vector3(e[0],0,e[1]),new a.Vector3(this.stages?this.circleSize.x/2:0,0,this.stages?this.circleSize.x/2:0))}isOutside(e){return r.getDistance(e.x,e.z,this.circlePosition.x,this.circlePosition.z)>this.circleSize.x}getData(){return[this.circlePosition.x,this.circlePosition.z,this.circleSize.x,this.circleSize.z]}setTargetCircle(e,t){this.targetCirclePosition=e,this.targetCircleSize=t}setCircleSize(e,t){this.circlePosition=e,this.circleSize=t}generateTargetCircle(){if(!this.randomEndPoint)return[0,0];var e=2*Math.random()*Math.PI,t=this.circleSize.x/2*Math.sqrt(Math.random());return[t*Math.cos(e),t*Math.sin(e)]}}l.CONFIG_PROPS=["zoneSize","zoneSpeed","zoneRnd","zoneCol0","zoneCol1","zoneCol2","zoneHeight","zoneStages","zoneWait"],e.exports=l},function(e,t,i){const n=i(301).default,s=i(1),a=i(4);e.exports=function(e,t,i){var r,o,l;this.biggestY=0,this.id=e,this.accid=0,this.isPlayer=!0,this.velocity=new i.THREE.Vector3(0,0,0),this.inputs=[],this.db=!0,this.stateHistory=[],this.weaponMeshes=[],this.custVals={},this.reloads=[],this.ammos=[],this.reserveAmmos=[],this.upgrades=[],this.tempEggs=[],this.tmpStats={},this.sentTo=[],this.weaponGeos={},this.objectiveScore=0,this.scoreObjs={},this.checkPoint=null,this.checkPointData=[],this.checkPointList=[],this.convs=0,this.legMeshes=[],this.shoeMeshes=[],this.armMeshes=[],this.mergedArmMeshes=[],this.wristMeshes=[],this.lastInput={},this.lastDeltas=[],this.trade=null,this.ping=0,this.pings=[],this.avgSpn=0,this.score=0,this.rounds=0,this.compScore=0,this.weaponStreak=0,this.currentStreakWeapon=null,this.deaths=0,this.timer=null,this.gameTimer=null,this.pickups=0,this.aiKills=0,this.kdr=1,this.kills=0,this.killsC=0,this.sussKills=0,this.totShots=0,this.hitShots=0,this.totShotsL=0,this.hitShotsL=0,this.killsL=0,this.deathsL=0,this.scoreL=0,this.weaponStats={},this.driftkills=0,this.closecalls=0,this.classScores={},this.firstblood=0,this.assists=0,this.nukes=0,this.headshots=0,this.legshots=0,this.quickscopes=0,this.noscopes=0,this.airKills=0,this.turboKills=0,this.killMlt=0,this.melees=0,this.wallbangs=0,this.longshots=0,this.tKnifeKills=0,this.fistKills=0,this.revengeKills=0,this.setbacks=0,this.confirms=0,this.deposits=0,this.dogTags=0,this.diffuses=0,this.airDropCnt=0,this.denies=0,this.caps=0,this.returns=0,this.deathStreak=0,this.highestStreak=0,this.level=0,this.lives=i.waitTimers&&i.config&&(i.config.lives||i.mode.lives)||0,this.deltaAdd=0,this.deltaDiv=1,this.sprayIndex=0,this.flagIndex=-1,this.badgeIndex=-1,this.meleeIndex=-1,this.skinColIndex=-1,this.hairCol=-1,this.chatCol=-1,this.attachIndex=0,this.faceIndex=-1,this.shoeIndex=-1,this.hatIndex=-1,this.headIndex=-1,this.playerCardIndex=-1,this.petIndex=-1,this.wristIndex=-1,this.backIndex=-1,this.bodyIndex=-1,this.waistIndex=-1,this.charms=[],this.dyeIndex=-1,this.pcStatIndex=-1,this.lastSpray=0,this.lastInteract=0,this.lastTerInteract=0,this.lastPicked={},this.medals={},this.playTime=0,this.playTimeUpdated=!1,this.gameTime=0,this.coverDis=0,this.lastTimer=null,this.timeLog=0,this.streaks={},this.deathInfo={},this.coughTimer=0,this.noclip=!1,this.speedBoost=0,this.debugMode=!1,this.unlimitedAmmo=!1,this.unlimitedSprays=!1,this.home={},this.lastLoadout=[],this.lastSkins=[],this.lastThrow=!0,this.lastThrowTime=0,this.weaponTier=0,this.inputLock=!1,this.assetTxt="",this.godMode=!1,this.kicked=!1,this.banned=!1,this.smite=!1,this.kickedByVote=!1,this.dmgDealt=0,this.mSent=0,this.didAct=!1,this.countedPlay=!1,this.spawned=!1,this.alias=null,this.clanKillsP=0,this.clanDeathsP=0,this.fakeName=null,this.fakeLevel=1,this.waitRew=!1,this.pendingTrigger=null,this.pendingSpin=null,this.buildHelper=null,this.buildHelperN=null,this.collidingObjs=[],this.custSync=[],this.effects={},this.perks=[],this.attributes={},this.additionalReward=0,this.spraysPlaced=0,this.config={},this.showBadges={verified:!0,premium:!0,custom:!0},this.challengeProg=[],this.streakIndexs=[],this.maxPossibleStreak=0,this.isJuggernaut=!1,this.isBusy=!1,this.headMlt=1,this.customLoadout=null,this.uniqueWeaponKills=[],this.didStarterScore=!1,this.tmpPos=new i.THREE.Vector3,this.lastInteractData={id:-1,type:-1},this.sharedBoxes=0,this.sharingIsCaring=!1,this.killedBy=[],this.noRecoil=!1,this.spreadMlt=1,this.dmgMlt=1,this.speedMlt=1,this.rangeMlt=1,this.healthMlt=1;var c=[],d=[],h={};Object.defineProperty(this,"inventory",{get(){return this._inventory},set(e){this._inventory=e}}),Object.defineProperty(this,"team",{get(){return this.forcePVP?void 0:this._team},set(e){this._team=e}}),Object.defineProperty(this,"currentSkin",{get(){var e=i.players.getWeapon(this,this.loadoutIndex),t=i.store.skins[e.melee?this.meleeIndex:this.getSkinForLoadout(this.loadoutIndex)];return e.upgraded&&(t=null),!e.melee&&t&&t.weapon-1!=this.loadout[this.loadoutIndex]?h:t||h}}),Object.defineProperty(this,"currentMelee",{get(){return i.store.skins[this.meleeIndex]||h}}),Object.defineProperty(this,"currentShoes",{get(){return i.store.skins[this.shoeIndex]||h}}),Object.defineProperty(this,"currentBack",{get(){return i.store.skins[this.backIndex]||h}}),Object.defineProperty(this,"currentBody",{get(){return i.store.skins[this.bodyIndex]||h}}),Object.defineProperty(this,"currentDye",{get(){return i.store.skins[this.dyeIndex]||h}}),Object.defineProperty(this,"renderYou",{get(){return this.isYou&&i.controls.camType.isNormal}}),Object.defineProperty(this,"hitboxPadW",{get(){return i.config.hitBoxPad+(this.config&&this.config.hbS||0)}}),Object.defineProperty(this,"hitboxPadH",{get(){return i.config.hitBoxPad+(this.config&&this.config.hbH||0)}}),Object.defineProperty(this,"currentWeaponId",{get(){return null==this.loadout[this.loadoutIndex]?-1:this.loadout[this.loadoutIndex]}}),Object.defineProperty(this,"weaponLimit",{get(){return this.perks.includes(6)?3:2}}),this.init=function(e,t,n,s,r,o){this.active=!0,this.isYou=r,this.sfres=!r&&-1!==this.id,this.isHacker=o,this.y=n,this.z=e,this.x=t,this.stepSrc=null,this.name=s||"unknown",this.velocity.set(0,0,0),this.xVelC=0,this.zVelC=0,this.tmpVel={x:0,y:0,z:0},this.walJum=0,this.lastInObj=0,this.renderMinimal=!1,this.spread=0,this.lastSpinD=0,this.stateHistory.length=0,this.xDire=0,this.yDire=0,this.xDirChase=null,this.yDirChase=null,this.camChase=null,this.height=a.playerHeight,this.adjustedHeight=a.playerHeight,this.headScale=a.cameraHeight,this.scale=a.playerScale,this.aimTime=0,this.spreadPlus=0,this.aimVal=1,this.aimDir=0,this.buildIndex=0,this.latestData=!1,this.interpolate=!1,this.posBuffer=[],this.interpFram=0,this.inputSTime=0,this.inputSTPrg=0,this.stepVal=0,this.stepChase=0,this.stepDir=1,this.crouchVal=0,this.rampFix=null,this.didJump=!1,this.didJumpW=!1,this.wallJumpC=0,this.onGround=!0,this.onGroundFrames=0,this.lastGround={},this.onPad=!0,this.onLadder=!1,this.onWall=0,this.jumpCooldown=0,this.spinDis=0,this.locked=!1,this.inputSN=0,this.inputs.length=0,this.inputFreq=0,this.grapple=null,this.streak=0,this.killStreak=0,this.realKillStreak=0,this.weaponStreak=0,this.currentStreakWeapon=null,this.lastKill=0,this.dmgReceived={},this.burstCount=0,this.didShoot=!1,this.canThrow=!i||!i.mode||!i.mode.noKnives,this.airTime=0,this.loadoutIndex=0,this.swapTime=0,this.customLoadout=null,this.lastPicked={},this.propID=1,this.weaponTier=0,this.cnBSeen=!1,this.lastLoadout.length=0,this.lastSkins.length=0,this.lastThrow=!0,this.shotCntP=0,this.noPVP=!1,this.forcePVP=!1,this.dogTags=0,this.hitTimer=0,this.ticker=0,this.tickerC=0,this.noMovTimer=0,this.noMovT=0,this.slideTimer=0,this.driftTimer=0,this.canSlide=!0,this.canSlideT=0,this.effectTimer=0,this.isKranked=!1,this.krankedTimer=0,this.swapTweenA=0,this.lastInput={},this.landBobY=0,this.landBobYR=0,this.jumpBobY=0,this.leanAnimX=0,this.bobAnimZ=0,this.leanAnimY=0,this.leanAnimZ=0,this.bobAnimY=0,this.idleAnim=0,this.inspecting=!1,this.inspectAn={},this.inspectX=!1,this.reward=0,this.recoilAnim=0,this.recoilAnimY=0,this.recoilForce=0,this.stepDirR=1,this.slideLegV=0,this.recoilTweenY=0,this.recoilTweenR=0,this.recoilTweenYM=0,this.recoilTweenZ=0,this.jumpRot=0,this.jumpRotM=0,this.recoilX=0,this.recoilZ=0,this.lodActive=!1,this.specStream=null,this.interProg=0,this.interMProg=0,this.chargeTime=0,this.fullCharge=!1,this.overCharged=!1,this.throwCharge=0,this.interTick=0,this.lastProg=0,this.lastMProg=0,this.makingProg=!1,this.makingMProg=!1,this.doingInter=!1,this.sentTo.length=0,this.deltaAdd=0,this.recon=!1,this.meleeAnim={},this.isHidden=!1,this.cnBSeen=!1,this.kpdData=!1,this.bypassUser=!1,this.resetTimer=0,this.overlayInfo=null,this.collidingObjs.length=0,this.onZone=null,this.defaultMovement=!0,this.defaultVelocity=!0,this.defaultRotation=!0,this.disabledInputs={},this.drunkCnt=0,this.effects={},this.attributes={},this.attributeTimers=[];for(var l=0;l<i.effectConfig.length;l++)this.attributes[i.effectConfig[l].key]=i.effectConfig[l].def,this.attributeTimers[l]=[];this.propSwitches=0,this.propRotSaved=null,this.propRot=!1,this.custSync.length=0,this.isBusy=!1,this.isJuggernaut=!1,this.zappedBy=null,this.perks=[],this.lastInteractData.id=-1,this.lastInteractData.type=-1,this.sharedBoxes=0,this.sharingIsCaring=!1,this.totShotsL=0,this.hitShotsL=0,this.killsL=0,this.deathsL=0,this.scoreL=0},this.setInitPos=function(){this.initPos||={x:this.x,y:this.y,z:this.z}},this.getName=function(e,t,i){return i||!this.account?this.name:this.kpdData?"Officer Buddy":e?this.fakeName?this.fakeName:t&&this.account&&this.account.premiumT>0&&this.showBadges.premium?this.account.alias:this.name:"Player_"+this.sid},this.getSkinForLoadout=e=>{if(!this||!this.skins||!this.skins.length)return-1;for(var t,n=this.loadout[e],s=0;s<this.skins.length;s++)if((t=i.store.skins[this.skins[s]])&&t.weapon-1==n)return this.skins[s];return-1},this.updateItems=function(e,i,n,s,a,r){i?(n&&(this.setClass(e,this.classIndex,this.secIndex,!!r||!i),t.resetMovVals(this),t.swapWeapon(this,0,!0)),e.broadcast("rg",this.sid,n,[this.skins,this.faceIndex,this.shoeIndex,this.hatIndex,this.headIndex,this.bodyIndex,this.backIndex,this.waistIndex,this.meleeIndex,this.skinColIndex,this.hairCol,this.dyeIndex,this.pcStatIndex,this.attachIndex,this.secIndex,this.classIndex,this.petIndex,this.wristIndex,this.playerCardIndex])):(this.skins=s[0],this.faceIndex=s[1],this.shoeIndex=s[2],this.hatIndex=s[3],this.headIndex=s[4],this.bodyIndex=s[5],this.backIndex=s[6],this.waistIndex=s[7],this.meleeIndex=s[8],this.skinColIndex=s[9],this.hairCol=s[10],this.dyeIndex=s[11],this.pcStatIndex=s[12],this.attachIndex=s[13],this.secIndex=s[14],this.classIndex=s[15],this.petIndex=s[16],this.wristIndex=s[17],this.playerCardIndex=s[18],n&&(this.renderYou=this.isYou&&e.controls.camType.isNormal,this.setClass(e,this.classIndex,this.secIndex,!i),t.resetMovVals(this),t.swapWeapon(this,0,!0),this.isYou&&window.updateCamMouse(this.classIndex))),a&&this.active&&t.regenMeshes(this)},this.updateLoadout=function(e,i,n=!0,a,r,o,l,c){var d,[h,u,p,f]=a;this.loadoutIndex=i,this.reloads.length=0,this.ammos.length=0,this.reserveAmmos.length=0,this.upgrades.length=0,this.loadout=[h],this.lastThrow=!0,s.isNumber(u)&&this.loadout.push(u),s.isNumber(u)&&(this.secIndex=u),s.isNumber(p)&&this.loadout.push(p),s.isNumber(f)&&this.loadout.push(f),!(this.loadout.indexOf(12)<0)||c||e.mode&&e.mode.noMelee||this.loadout.push(12);for(var m=0;m<this.loadout.length;++m){d=e.players.getWeapon(this,m),this.reloads.push(0);var g=null!=d.ammo&&e.mode&&null!=e.mode.ammoLimit?e.mode.ammoLimit:d.ammo;this.ammos.push(r&&s.isNumber(r[m])?r[m]:g),this.reserveAmmos.push(o&&s.isNumber(o[m])?o[m]:g*e.getReserveMags(d)),l&&this.upgrades.push(~~!!l[m])}this.customLoadout=[...this.loadout],n&&this.active&&t.regenMeshes(this)},this.refillKnife=function(){if(this.lastThrow=!0,this.canThrow=!0,this.isYou)for(var e,t=0;t<this.ammos.length;++t)if((e=i.players.getWeapon(this,t)).melee){var n=document.getElementById("weapIconMel"),a=s.assetsUrl((this.canThrow&&e.melee?"/textures/melee/icon_"+(i.store.skins[this.meleeIndex]&&i.store.skins[this.meleeIndex].id||0):"/textures/weapons/"+e.icon)+".png");e.assetIcon&&e.assetIcon.length&&(a=s.userAssetsUrl("/"+e.assetIcon.replace(/[^\d]/g,"")+"/texture.png")),n&&(n.src=a);break}},this.hasEquipment=function(){for(var e,t=0;t<this.loadout.length;t++)if((e=i.weaponConfig[this.loadout[t]])&&e.equipment)return!0;return!1},this.canUpgrade=function(){return!this.upgrades[this.loadoutIndex]&&i.weaponConfig[this.loadout[this.loadoutIndex]]&&i.weaponConfig[this.loadout[this.loadoutIndex]].canUpgrade&&!this.hasEquipment()},this.setClass=function(e,t,i,n){this.isBot&&e&&e.mode&&e.mode.botBypassClass&&(n=!0),n||(e.config&&e.config.classes.indexOf(t)<0&&(t!=e.config.classes[0]&&(this.skins=[-1,-1]),t=e.config.classes[0]),e.mode&&e.config.forceC&&(e.mode.noWeap&&(t=9),null!=e.mode.forceClass&&(t=e.mode.forceClass),e.mode.teamClass&&e.mode.teamClass[this.team]&&(t=e.mode.teamClass[this.team],this.skins=[-1,-1]))),null!=t&&null!=t||(t=e.classConfig.length-1),this.classIndex=t,this.config=e.classConfig[this.classIndex]||{loadout:[1]},this.loadout=[this.config.loadout[0]],e.config&&e.config.noSecondary||(this.config.secondary?s.isNumber(i)&&this.loadout.push(i):this.secIndex=null),!(this.loadout.indexOf(12)<0)||e.mode&&e.mode.noMelee||this.loadout.push(12),this.speed=this.config.speed||1,this.resetAmmo(),this.regenDelay=this.config.regenDelay||a.regenDelay,this.maxHealth=e.mode&&e.mode.maxHealth?e.mode.maxHealth:this.config.health*(e.config&&e.config.healthMlt||1)*(this.healthMlt&&this.healthMlt||1),this.throwCharge=this.config.throwChrg||a.throwCharge,this.meleeLeap=this.config.leap||0,this.wallJump=e.mode&&null!=e.mode.wallJ?e.mode.wallJ:this.config.wallJ||0,this.wallJumpMax=e.mode&&null!=e.mode.wallJM?e.mode.wallJM:this.config.wallJM||0,this.health=this.maxHealth,this.startHealth=this.health,this.hpChase=1,this.regen=(e.mode&&e.mode.noRegen||!e.config||!e.config.hpRegen?0:this.config.regen||a.regenVal)*(e.mode&&e.mode.regenMlt?e.mode.regenMlt:1)*(e.isSandbox&&!this.isBot?3:1)},this.resetAmmo=function(e,n){var s,a=[...this.reloads],r=[...this.ammos],o=[...this.reserveAmmos];this.reloads.length=0,this.ammos.length=0,this.reserveAmmos.length=0,this.reloadTimer=0,this.cantShootTimer=0;for(var l=0;l<this.loadout.length;++l)if((s=i.players.getWeapon(this,l)).noReload&&n)this.reloads.push(a[l]),this.ammos.push(r[l]),this.reserveAmmos.push(o[l]);else{this.reloads.push(0);var c=null!=s.ammo&&i.mode&&null!=i.mode.ammoLimit?i.mode.ammoLimit:s.ammo;this.ammos.push(c),this.reserveAmmos.push(c*i.getReserveMags(s))}e&&this.isYou&&(t.updatePlayerAmmo(this),t.resetReloadUIAnim(this))},this.resetPosition=function(e,i,n,s){this.z=n,this.x=e,this.y=i+.01,this.xDire=s,this.velocity.y=0,this.velocity.x=0,this.velocity.z=0,t.setOnGround(this),this.noPVP=!1,this.forcePVP=!1,this.onLadder=!1,this.onTerrain=!1,this.onWall=!1,this.didJump=!1,this.didJumpW=!1,this.onPad=!1,this.crouchVal=0,this.resetAmmo(!0),t.resetMovVals(this)},this.update=function(e,i){if(this.active){if(this.inputs.length){for(var n=0;n<this.inputs.length;++n)this.procInputs(this.inputs[n],e,!1,!e||e.moveLock);this.resetInputs()}if(this.idleAnim+=a.idleAnimS*i,this.hpChase>this.health/this.maxHealth?(this.hpChase-=2e-4*i,this.hpChase<=0&&(this.hpChase=0)):this.hpChase=this.health/this.maxHealth,this.interpolate){for(var r=null,o=null,l=null,c=e.now-1e3/this.sendRateA;this.posBuffer.length>=2&&this.posBuffer[1].t<=c;)this.posBuffer.shift();this.posBuffer.length>=2&&this.posBuffer[0].t<=c&&c<=this.posBuffer[1].t&&(r=(c-this.posBuffer[0].t)/(this.posBuffer[1].t-this.posBuffer[0].t),o=this.posBuffer[0],l=this.posBuffer[1]),null!=r&&(this.oldX=this.x,this.oldY=this.y,this.oldZ=this.z,this.x=o.x+(l.x-o.x)*r,this.y=o.y+(l.y-o.y)*r,this.z=o.z+(l.z-o.z)*r,this.xDire=Math.lerpAngle(l.xD,o.xD,r),this.yDire=Math.lerpAngle(l.yD,o.yD,r),this.stepVal=o.s+(l.s-o.s)*r,!this.posStep&&this.stepVal>0?(this.posStep=!0,t.playerStep(this,0,0,!0)):this.posStep&&this.stepVal<0&&(this.posStep=!1,t.playerStep(this,0,0,!0)))}if(this.interpolate||this.isYou){var d=s.getD3D(this.oldX,this.oldY,this.oldZ,this.x,this.y,this.z);t.playClip(this,this.crouchVal?"Crouch":d>.1?"Move":"Idle")}}},this.collides=function(e,t){return l=this.scale+(this.config?this.config.hbS:0),t=t||0,"cylinder"==e.collT?this.y<=e.y+e.height&&this.y+this.height>=e.y-e.height?s.getDistance(this.x,this.z,e.x,e.z)<=e.width+l:void 0:this.x-l<e.x+(e.width+t)&&this.x+l>e.x-(e.width+t)&&this.z-l<e.z+(e.length+t)&&this.z+l>e.z-(e.length+t)&&this.y<=e.y+(e.heightS||e.height)+(!e.isBorder||i.config&&i.config.disableB?0:a.borderH)&&this.y+(this.config?this.config.hbH:0)+this.height>=e.y-(e.heightS||e.height)},this.collidesE=function(e,t,n){return this.x-t<=e.x+(e.width+n)&&this.x+t>=e.x-(e.width+n)&&this.z-t<=e.z+(e.length+n)&&this.z+t>=e.z-(e.length+n)&&this.y<=e.y+e.height+(!e.isBorder||i.config&&i.config.disableB?0:a.borderH)&&this.y+(this.config?this.config.hbH:0)+this.height>=e.y-e.height},this.collidesP=function(e){return e.interpolate?this.x-this.scale-(this.config?this.config.hbS:0)<e.x2+e.scale&&this.x+this.scale+(this.config?this.config.hbS:0)>e.x2-e.scale&&this.z-this.scale-(this.config?this.config.hbS:0)<e.z2+e.scale&&this.z+this.scale+(this.config?this.config.hbS:0)>e.z2-e.scale&&this.y<=e.y2+e.height&&this.y+(this.config?this.config.hbH:0)+this.height>=e.y2:this.x-this.scale-(this.config?this.config.hbS:0)<e.x.round(1)+e.scale&&this.x+this.scale+(this.config?this.config.hbS:0)>e.x.round(1)-e.scale&&this.z-this.scale-(this.config?this.config.hbS:0)<e.z.round(1)+e.scale&&this.z+this.scale+(this.config?this.config.hbS:0)>e.z.round(1)-e.scale&&this.y<=e.y.round(1)+e.height&&this.y+(this.config?this.config.hbH:0)+this.height>=e.y.round(1)},this.resetInputs=function(){this.inputs.length=0},this.reset=function(){this.checkPoint=null,this.checkPointList.length=0,this.checkPointData.length=0,this.lastPicked={},this.weaponTier=0,this.customLoadout=null,this.lastLoadout.length=0,this.lastSkins.length=0,this.lastThrow=!0,this.medals={},this.headMlt=1,this.didStarterScore=!1,this.killedBy=[]},this.resetMeleeAnim=function(){this.meleeAnim.weaR=0,this.meleeAnim.weaM=0,this.meleeAnim.armY=0,this.meleeAnim.armR=0,this.meleeAnim.lArm=0,this.meleeAnim.rArm=0,this.meleeAnim.flipW=0,this.meleeAnim.armT=0,this.meleeAnim.armM=0,this.meleeAnim.armE=0,this.meleeAnim.armS=0},this.procInputs=function(e,i,l,h){this.recon=l,this.noclip&&(this.onGround=!0);var u=i.movement[this.config.movSch||0],p=Math.max(.1,Math.min(e[1],a.dltMx))/this.deltaDiv;(!p||p<.1)&&(p=.1),this.inputSN=e[0];var f=(parseFloat(e[2]||0)||0)/1e3;this.config.lckCmYR&&(f=0);var m=(parseFloat(e[3]||0)||0)/1e3;this.makingProg=!1,this.makingMProg=!1,t.clearInteract(this);var g=!!e[5],v=!!e[6],y=!!e[7],b=!!e[8],w=!!e[9],x=s.isNumber(e[13])?e[13]:0,S=!!e[14],M=s.isNumber(e[11])?e[11]:0,k=e[10];1!=k&&-1!=k&&(k=0);var _=a.movDirs[e[4]];if(null!=_&&(_+=(this.config.movDrP||0)*Math.PI),i&&i.mainScript&&(i.mainScript.onPlayerUpdate&&i.mainScript.onPlayerUpdate(this.id+"",p,n.prefix({mouseY:f,mouseX:m,movDir:_,lMouse:g,rMouse:v,jump:y,reload:b,crouch:w,scroll:k,swap:M,restK:x,inter:S})),this.disabledInputs.mouseY&&(f=0),this.disabledInputs.mouseX&&(m=0),this.disabledInputs.movDir&&(_=void 0),this.disabledInputs.lMouse&&(g=!1),this.disabledInputs.rMouse&&(v=!1),this.disabledInputs.jump&&(y=!1),this.disabledInputs.reload&&(b=!1),this.disabledInputs.crouch&&(w=!1),this.disabledInputs.scroll&&(k=0),this.disabledInputs.swap&&(M=0),this.disabledInputs.restK&&(x=0),this.disabledInputs.inter&&(S=!1)),!i.noDefaultBehav){if(e[15]){var T=e[15]||0;(!this.inputSTime||this.inputSTime<T)&&(this.inputSTime=T)}e[16]&&(this.inputSTPrg=e[16]||0,this.inputSTPrg=Math.min(Math.max(0,this.inputSTPrg),1.2));var C=s.getAngleDst(m,this.xDire);this.spinDis+=Math.abs(C);var I=s.getAngleDst(f,this.yDire),A=!l&&this.renderYou;if(A&&(this.leanAnimX-=C*a.leanSens,this.leanAnimX=s.limit(this.leanAnimX,a.leanMax),this.leanAnimY-=s.getAngleDst(f,this.yDire)*a.leanSens,this.leanAnimY=s.limit(this.leanAnimY,a.leanMax),this.leanAnimY&&(this.leanAnimY*=Math.pow(a.leanPull,p)),this.leanAnimX&&(this.leanAnimX*=Math.pow(a.leanPull,p)),this.leanAnimZ&&(this.leanAnimZ*=Math.pow(a.leanPullZ,p)),this.bobAnimZ&&(this.bobAnimZ*=Math.pow(a.bobPullZ,p)),this.bobAnimY&&(this.bobAnimY*=Math.pow(a.bobPullY,p)),this.recoilX&&(this.recoilX*=Math.pow(a.leanPull,p)),this.recoilZ&&(this.recoilZ*=Math.pow(a.leanPull,p)),this.inspecting&&this.weapon)){var R=this.weapon.insX||Math.PI/2.8;this.inspectX<R&&(this.inspectX+=.1*(R-this.inspectX))}if(this.defaultRotation&&(u.dir?u.dir(this,m.round(3),f.round(3),_,p,i,e):i.movement[0].dir(this,m.round(3),f.round(3),_,p,i,e)),!l&&1!=this.config.shtDrg)if(null==this.xDirChase||null==this.yDirChase)this.xDirChase=m,this.yDirChase=f;else{var P=2*Math.PI,E=.003*this.config.shtDrg*p,D=(this.xDirChase-m+P)%P,O=Math.min(Math.abs(D-P),D,E),L=D-Math.PI>=0?1:-1;this.xDirChase+=L*O+P,this.xDirChase%=P,this.yDirChase<f?(this.yDirChase+=E,this.yDirChase>f&&(this.yDirChase=f)):this.yDirChase>f&&(this.yDirChase-=E,this.yDirChase<f&&(this.yDirChase=f))}if(4==M?t.swapEquipment(this,l):2==M?t.swapMelee(this,l):1==M?t.swapSecondary(this,l):3==M?t.swapWeapon(this,null,null,void 0,0,l):k&&t.swapWeapon(this,k,!1,void 0,void 0,l),l||(this.recoilForce&&(this.recoilAnim+=this.recoilForce*p,this.recoilAnimY+=this.recoilForce*(this.weapon.recoilY||1)*(1-.3*this.crouchVal)*p,this.recoilForce*=Math.pow(this.weapon.recoverF,p)),this.recoilAnim&&(this.recoilAnim*=Math.pow(this.weapon.recover,p)),this.recoilAnimY&&(this.recoilAnimY*=Math.pow(this.weapon.recoverY||this.weapon.recover,p))),this.oldX=this.x,this.oldY=this.y,this.oldZ=this.z,this.weapon.noAim&&this.aimVal<1)this.isYou&&t.toggleAim(this,0),this.aimVal=1;else if(this.weapon.zoom&&(!i.mode.teamOptions||"Prop"!=i.mode.teamOptions[this.team-1])&&(!this.weapon.noAim||this.swapTime>0)){var j=this.reloadTimer<=0&&this.swapTime<=0&&(!this.weapon.melee||this.canThrow)&&!u.noThrow&&(i.config.throwMel||!this.weapon.melee);v&&this.aimVal>0&&j?(t.cancelInspect(this),this.aimDir=0,this.aimVal-=1/(this.weapon.aimSpd/p),this.aimVal<=0&&(this.aimVal=0,this.isYou&&!l&&t.toggleAim(this,1)),!this.isYou||l||this.weapon.scope&&!this.currentSkin.noScope||t.updateAim(this,1-this.aimVal)):(!j||!v&&this.aimVal<1)&&(this.aimDir=1,this.aimVal||!this.isYou||l||t.toggleAim(this,0),this.aimVal+=1/(this.weapon.aimSpd/p),this.aimVal>=1&&(this.aimVal=1),!this.isYou||l||this.weapon.scope&&!this.currentSkin.noScope||t.updateAim(this,1-this.aimVal)),0==this.aimVal?this.aimTime+=p:this.aimTime=0}if(!l&&i.config.chrgWeps){var z=this.weapon&&this.weapon.shootChrg?g:this.aimVal<1,B=this.weapon&&this.weapon.chrgTime?this.weapon.chrgTime:this.throwCharge,N=i&&i.mode&&i.mode.forceCharge;z&&!this.overCharged&&this.swapTime<=0&&(this.weapon&&this.weapon.chrgTime&&this.ammos[this.loadoutIndex]||this.canThrow&&this.weapon.canThrow)?N?(this.chargeTime=0,this.fullCharge=!0,this.overCharged=!1):(this.chargeTime+=this.chargeTime>=B?.1*p/(160/(B*(a.overCharge-1))):p,this.weapon.ovrChrg?this.chargeTime>=B*a.overCharge&&(this.chargeTime=0,this.fullCharge=!1,this.overCharged=!0):this.chargeTime>=B&&(this.fullCharge=!0,this.chargeTime=B),this.interMProg=this.chargeTime/B):!N&&this.weapon.chrgDec&&this.chargeTime>0?(this.chargeTime-=this.weapon.chrgDec*p,this.fullCharge=!1,this.chargeTime<=0&&(this.chargeTime=0,1==this.aimVal&&(this.overCharged=!1)),this.interMProg=this.chargeTime/B):(this.fullCharge=!1,this.chargeTime=0,1==this.aimVal&&(this.overCharged=!1)),this.makingMProg=this.chargeTime>0}if(this.selectBuild=!1,v&&this.weapon.build&&(this.selectBuild=!0,Math.abs(C)>.008||Math.abs(I)>.008)){var F=s.getDir(0,0,C,I);F+=Math.PI;var H=2*Math.PI/i.BUILD_OBJS.length,U=Math.floor(F/H);U>=i.BUILD_OBJS.length&&(U=0),this.buildIndex!=U&&(this.isYou&&SOUND&&!l&&SOUND.play("tick_0",.2),this.buildIndex=U)}this.wasStopCrouch=i.config.headClipFix&&this.stopCrouch,this.stopCrouch=!1,this.defaultMovement&&!this.wasStopCrouch&&(this.config.canCrch||(w=!1),w&&this.crouchVal<1&&!this.onLadder?(this.crouchVal+=a.crouchSpd*p,this.crouchVal>=1&&(this.crouchVal=1,t.isServer&&i.incStat("crc",this)),this.onGround||this.grapple?A&&(this.bobAnimY-=1.4*a.crouchAnim*p):this.y+=a.crouchSpd*p):!w&&this.crouchVal>0&&(this.crouchVal-=a.crouchSpd*p,this.crouchVal<=0&&(this.crouchVal=0),this.onGround||this.grapple?A&&(this.bobAnimY+=a.crouchAnim*p):this.y-=a.crouchSpd*p),this.crouchVal&&=this.crouchVal.round(3)),t.updateHeight(this);var V=this.onGround||this.onLadder;if(!h){var G;G=V?this.config.grA/100*this.speed*(null==i.mode.groundAccel?1:i.mode.groundAccel):this.config.arA/100*(i.mode.realMov?.72:1)*(null==i.mode.groundAccel?1:i.mode.groundAccel),G*=this.aimVal?1:a.aimSlow,G*=i.mode.spdMlt&&i.mode.spdMlt[this.team]||1,G*=this.crouchVal?this.config.crchSpd:1,G*=this.weapon.spdMlt*p,G*=this.weapon.shootChrg&&g?.35:1;var W=0;if(W=this.onLadder?a.ladderDecel:this.onTerrain?a.terrainDecel:this.onGround?this.config.grDec||a.groundDecel:u.airDecel||this.config.airDec||a.airDecel,this.canSlideT>0&&(this.canSlideT-=p,this.canSlideT<=0&&(this.canSlideT=0)),this.crouchVal<=.5&&(this.canSlide=!0),this.onGround&&this.crouchVal||(this.slideTimer=0),this.slideTimer)if(this.slideTimer-=p,t.isServer&&this.perks.includes(5)&&(this.driftTimer+=p,this.driftTimer>=750&&(this.driftTimer=0,i.explosion(this.x,this.y+this.height/2,this.z,50,300,this,{aiOnly:1,noHit:!0}))),this.slideTimer<=0)this.slideTimer=0;else{G*=.25,W=this.onTerrain?a.terrainSlideDecel:a.slideDecel;var q=s.getDistance(this.velocity.x,this.velocity.z,0,0),Y=this.xDire;(this.config.frSlid||i.mode&&i.mode.frSlid)&&-1!=e[4]?Y-=Math.PI/4*(e[4]-1):!this.config.bkSlid||4!=e[4]&&5!=e[4]&&6!=e[4]||(Y+=Math.PI);var K=s.getDir(Math.sin(Y),Math.cos(Y),0,0);this.velocity.x=q*Math.cos(K+Math.PI),this.velocity.z=q*Math.sin(K+Math.PI)}this.jumpCooldown=Math.max(this.jumpCooldown-p,0),this.defaultMovement&&this.jumpCooldown<=0&&!this.config.disJump&&(this.onGround||this.config&&this.config.infJ)&&t.tryJump(this,y);var X=i.mode.noWallJ?0:i.config?i.config.wallJP:0,Z=null==i.mode.wallJD?this.config.wallJD||0:i.mode.wallJD,J=this.velocity.y<0&&this.wallJump&&this.onWall&&X>0&&this.crouchVal?Z:1;if(V||(this.velocity.y-=p*(a.gravity*(i.config?i.config.gravMlt:1)*(this.weapon.gravMlt||1)*(null==i.mode.gravMlt?1:i.mode.gravMlt))*J),G*=s.limitMM(1-e[12],0,1),this.noclip&&(G*=2),this.speedBoost&&(G*=this.speedBoost),G*=this.attributes.speed,G*=this.attributes.rooted,G*=this.isKranked?i.mode.bonuses.speed:1,G*=this.perks.includes(3)?1.15:1,G*=this.speedMlt,this.defaultMovement&&(u.mov?u.mov(this,G,W,_,m,e,i,p):i.movement[0].mov(this,G,W,_,m,e,i,p)),V||(this.xVelC&&(this.velocity.x+=.07*this.xVelC,this.xVelC=0),this.zVelC&&(this.velocity.z+=.07*this.zVelC,this.zVelC=0)),a.currentSeason>=7&&!V&&C&&i.config.airStrf){q=s.getDistance(this.velocity.x,this.velocity.z,0,0);var Q=s.getDir(0,0,this.velocity.x,this.velocity.z)+1*C;((3==e[4]||2==e[4])&&C>0||(7==e[4]||0==e[4])&&C<0)&&(this.velocity.x=q*Math.cos(Q+Math.PI),this.velocity.z=q*Math.sin(Q+Math.PI))}if(this.defaultVelocity&&(u.vel?u.vel(this,W,p,i):i.movement[0].vel(this,W,p,i)),y&&t.endGrapple(this),this.grapple)if(this.grapple.range>35&&(this.grapple.range-=.04*p),s.getD3D(this.x,this.y,this.z,this.grapple.x,this.grapple.y,this.grapple.z)>this.grapple.range){var $=s.getDrs(this,this.grapple),ee=($[0]||0)+Math.PI/2,te=$[1]||0,ie=this.grapple.x+this.grapple.range*Math.sin(ee+Math.PI/2)*Math.cos(te),ne=this.grapple.z+this.grapple.range*Math.cos(ee+Math.PI/2)*Math.cos(te),se=this.grapple.y+this.grapple.range*Math.sin(te),ae=Math.pow(W,p);this.velocity.x=(ie-this.oldX)*ae/p,this.velocity.y=(se-this.oldY)*ae/p,this.velocity.z=(ne-this.oldZ)*ae/p,this.x=ie,this.z=ne,this.y=se}if(!l){this.velocity.x||this.velocity.y||this.velocity.z?this.noMovT=0:this.noMovT+=p;var re=i.mode.teamOptions&&"Stalker"==i.mode.teamOptions[this.team-1]&&this.noMovT>=300||this.forceHide;this.isHidden!=re&&(this.isHidden=re,this.isYou&&(hiddenMsg.style.display=this.isHidden?"block":"none"))}g&&i.mode.teamOptions&&"Prop"==i.mode.teamOptions[this.team-1]&&t.pickProp(this),g||l||(this.doingInter=!1),this.wasOnGround=this.onGround&&!this.didJump,this.wasOnPad=this.onPad;var oe=!1,le=null;this.onGround=this.noclip||!1,this.onWall=0,this.onLadder=!1,this.noPVP=!1,this.forcePVP=!1,this.onPad=!1;var ce=!1;if(t.playerCollision(this,l),d.length=0,o=i.map.manager.getGridArrays(this.x,this.y,this.z),!this.noclip){var de=this.scale+(this.config?this.config.hbS:0);c.length=0;if(o)for(var he=0;he<o.length;++he)if((r=o[he]).isTri){var ue=i.COLLISIONS.capsuleColl(r,this.x,this.y,this.z,this.scale,this.height);if(ue){ue.normal.y>.7&&t.setOnGround(this),this.velocity.addScaledVector(ue.normal,-ue.normal.dot(this.velocity));var pe=ue.normal.multiplyScalar(ue.depth);this.x+=pe.x,this.y+=pe.y,this.z+=pe.z}}else if(r.tRadius&&(r.perkMachine||r.krumMachine||r.mysteryBox||r.gate||r.bank||r.onInteractKey)&&(r.active||!r.active&&r.closeable)&&this.collides(r,r.tRadius||0)&&i.teamCheck(r,this)&&(!r.krumMachine||(this.upgrades[this.loadoutIndex]||!this.weapon.canUpgrade)&&r.purchasedBy!=this.id||this.hasEquipment()||1==r.state||null!=r.purchasedBy&&r.purchasedBy!=this.id?r.perkMachine&&!this.perks.includes(r.perk)?t.changeInteract(this,r,14):!r.mysteryBox||this.hasEquipment()||1==r.state||-1==r.pendingWeapon||null!=r.purchasedBy&&-1!=r.purchasedBy&&r.purchasedBy!=this.id?r.gate?t.changeInteract(this,r,0):r.bank?t.changeInteract(this,r,1):r.onInteractKey&&t.changeInteract(this,r,7):t.changeInteract(this,r,13):t.changeInteract(this,r,15)),r.active&&this.collidesE(r,de,a.collPad)){if(i.saveColls&&d.indexOf(r.sid)<0&&d.push(r.sid),(r.onCollision||r.onHoldMouse||r.onEnterObject||r.onExitObject||r.jumpPad||r.ladder||r.ropeLadder||r.trigger||r.teleporter||r.checkpoint)&&null!=r.sid){if(c.indexOf(r.sid)>=0)continue;c.push(r.sid)}if(r.onCollision&&i.now-(r.lastColT||0)>=r.onColT&&(r.lastColT=i.now,i.onTrigger(this,r)),r.perkMachine&&!r.gotFreeP&&1==this.crouchVal&&(r.gotFreeP=!0,t.score(this,50)),r.onHoldMouse)t.changeInteract(this,r,4,null,1),g&&this.onGround&&(this.doingInter=!0,this.makingProg=!0,this.interProg+=p/r.onInteractT,this.interProg>=1&&(this.interProg=0,i.onTrigger(this,r)));else if(r.onEnterObject||r.onExitObject){var fe=!1;this.collidingObjs.indexOf(r.sid)<0&&(this.collidingObjs.push(r.sid),fe=!0),r.onEnterObject&&fe&&i.onTrigger(this,r)}else if(r.isEvent);else if(r.redirection);else if(r.serverNode);else if(r.jumpPad){var me=.1*r.bounce/(1==this.crouchVal&&r.crouch?2:1),ge=0,ve=0;0==r.dir?ve=0:1==r.dir?ve=180:4==r.dir?ve=90:2==r.dir?ve=-90:5==r.dir?ge=-90:3==r.dir&&(ge=90);var ye=!ge&&!ve||180==ve;if(ge&&(ge-=90),ye)this.velocity.y=me*(180==ve?-1:1);else{ge=s.toRad(ge),ve=s.toRad(ve);var be=me*Math.sin(-ve)*Math.cos(ge),we=me*Math.cos(-ve)*Math.cos(ge);be&&(this.velocity.x=be),we&&(this.velocity.z=we)}this.onGround=!1,l||!this.isYou||this.wasOnPad||SOUND.play("bounce_0",1,!1,s.randFloat(.95,1)),t.isServer&&!this.wasOnPad&&i.challenges.update(i,"bst",1,null,this),this.onPad=!0}else if(r.score)this.scoreObjs[r.sid]||(this.scoreObjs[r.sid]=1,t.score(this,r.scoreP),t.logTime(this));else if(r.premium&&(this.account&&this.account.premiumT||this.premiumT));else if(r.verified&&(this.account&&this.account.featured||this.featured));else if(r.kpd&&this.account&&this.account.canFlag);else if(r.teamZ&&i.teamCheck(r,this));else if(r.kr&&t.enoughKR(this,r.amount));else if(r.noPVP)this.noPVP=!0;else if(r.forcePVP)this.forcePVP=!0;else if(r.teleporter)i.checkTeleport(this,r);else if(r.checkpoint)i.setCheckPoint(this,r);else if(null==r.pickup||!s.isNumber(r.pickup)||i.mode.teamOptions&&"Infected"==i.mode.teamOptions[this.team-1])if(r.flag);else if(r.trigger)!this.flag||i.mode.oneflag||r.team!=this.team||!r.flagObj||!i.mode.rush&&r.flagObj.carrier||r.flagObj.x!=r.flagObj.orgX||r.flagObj.y!=r.flagObj.orgY||r.flagObj.z!=r.flagObj.orgZ||i.capFlag(this,this.flag);else if(r.kill)this.flag&&(i.resetFlag(this.flag),this.flag=null),t.isServer&&!this.godMode&&t.kill(this);else if(r.ladder){if(this.y<r.y+r.height&&0==this.crouchVal&&!this.grapple&&(this.velocity.y=0,this.onLadder=!0,this.onTerrain=!1,this.stepSrc=null,void 0!==_))(_e=(Math.abs(s.getAngleDst(r.dir,_-this.xDire))-Math.PI/2)/(Math.PI/2))>0&&(this.y+=a.ladderSpeed*this.config.ldA*this.weapon.spdMlt*p*_e,this.y>=r.y+r.height&&(this.y=r.y+r.height))}else if(r.noPCol);else{if(r.ropeLadder&&this.y<r.y+r.height&&0==this.crouchVal&&!this.grapple&&(this.velocity.y=0,this.onLadder=!0,this.onTerrain=!1,this.stepSrc=null,void 0!==_)){K=s.getDir(Math.sin(this.xDire),Math.cos(this.xDire),0,0);(_e=(Math.abs(s.getAngleDst(K,_-this.xDire))-Math.PI/2)/(Math.PI/2))>0&&(this.y+=a.ladderSpeed*this.config.ldA*this.weapon.spdMlt*p*_e,this.y>=r.y+r.height&&(this.y=r.y+r.height))}if(!r.ramp&&"cylinder"!=r.collT&&!this.wasOnGround&&this.y<r.y+r.height&&r.y+r.height-this.y>a.climbHeight&&!r.notWallJ&&(this.oldX-this.scale-(this.config?this.config.hbS:0)>=r.x+r.width-a.collPad?this.onWall=1:this.oldX+this.scale+(this.config?this.config.hbS:0)<=r.x-r.width+a.collPad?this.onWall=2:this.oldZ-this.scale-(this.config?this.config.hbS:0)>=r.z+r.length-a.collPad?this.onWall=3:this.oldZ+this.scale+(this.config?this.config.hbS:0)<=r.z-r.length+a.collPad&&(this.onWall=4)),!this.collides(r))continue;if(r.ramp){if(this.y<r.y+r.height){var xe=Math.max(0,Math.min(1,s.progressOnLine(r.ramp.sX,r.ramp.sZ,r.ramp.eX,r.ramp.eZ,this.x+(this.scale+(this.config?this.config.hbS:0))*Math.cos(r.dir),this.z+(this.scale+(this.config?this.config.hbS:0))*Math.sin(r.dir)))),Se=r.y-r.height+(2*r.height+.01)*xe;if(null===le&&(le=Se),(this.y<=Se||this.wasOnGround)&&le<=Se)if(le=Se,r.boost){this.y=Se;var Me=r.boost*a.boosterSpd*p;this.velocity.x+=Me*Math.sin(-r.dir+Math.PI/2)*Math.cos(r.boostDr),this.velocity.z+=Me*Math.cos(-r.dir+Math.PI/2)*Math.cos(r.boostDr),this.velocity.y+=Me*Math.sin(r.boostDr)}else t.resetStep(this,l),this.y=Se,this.velocity.y=0,this.onWall=0,t.setOnGround(this),this.onTerrain=!1,this.stepSrc=r.stepSrc,oe=!0,this.rampFix=r.y-r.height+2*r.height*Math.round(xe)}}else if("cylinder"==r.collT){var ke=!1;if(this.oldY>=r.y+r.height)this.y=r.y+r.height,t.resetStep(this,l),this.wasOnPad||(this.velocity.y=0),t.setOnGround(this),this.onTerrain=!1,ke=!0;else if(this.oldY+this.height+(this.config?this.config.hbH:0)<=r.y-r.height)this.y=r.y-r.height-this.height,this.wasOnPad||(this.velocity.y=0);else if(this.y<r.y+r.height&&r.y+r.height-this.y<=a.climbHeight&&this.oldY<r.y+r.height&&this.wasOnGround)this.y+=.3*(r.y+r.height-this.y)+1e-5,t.setOnGround(this),this.onTerrain=!1,ke=!0;else{var _e=s.getDir(this.x,this.z,r.x,r.z);this.x=r.x+(r.width+this.scale+(this.config?this.config.hbS:0))*Math.cos(_e),this.z=r.z+(r.width+this.scale+(this.config?this.config.hbS:0))*Math.sin(_e),ce&&(this.velocity.x=0,this.velocity.z=0),ce=!0}if(ke){_e=s.getDir(this.x,this.z,r.x,r.z)-(r.spin||0)*p*a.diskSpin;var Te=s.getDistance(this.x,this.z,r.x,r.z),Ce=this.x,Ie=this.z;this.x=r.x+Te*Math.cos(_e),this.z=r.z+Te*Math.sin(_e),this.xVelC=this.x-Ce,this.zVelC=this.z-Ie}}else(!r.isBorder||i.config&&i.config.disableB)&&this.y<r.y+r.height&&r.y+r.height-this.y<=a.climbHeight&&this.oldY<r.y+r.height&&this.wasOnGround?(this.y+=.03*p,this.y>r.y+r.height&&(this.y=r.y+r.height),t.setOnGround(this),this.onTerrain=!1):this.oldY>=r.y+r.height+(!r.isBorder||i.config&&i.config.disableB?0:a.borderH)?(this.stepSrc=r.stepSrc,this.y=r.y+r.height+(!r.isBorder||i.config&&i.config.disableB?0:a.borderH),t.resetStep(this,l),this.wasOnPad||(this.velocity.y=0),t.setOnGround(this),this.onTerrain=!1):this.oldX-this.scale-(this.config?this.config.hbS:0)>=r.x+r.width-1e-5?(this.x=r.x+r.width+this.scale+(this.config?this.config.hbS:0),this.velocity.x=0):this.oldX+this.scale+(this.config?this.config.hbS:0)<=r.x-r.width+1e-5?(this.x=r.x-r.width-this.scale-(this.config?this.config.hbS:0),this.velocity.x=0):this.oldZ-this.scale-(this.config?this.config.hbS:0)>=r.z+r.length-1e-5?(this.z=r.z+r.length+this.scale+(this.config?this.config.hbS:0),this.velocity.z=0):this.oldZ+this.scale+(this.config?this.config.hbS:0)<=r.z-r.length+1e-5?(this.z=r.z-r.length-this.scale-(this.config?this.config.hbS:0),this.velocity.z=0):this.oldY+this.height+(this.config?this.config.hbH:0)<=r.y-r.height?(this.stopCrouch=!0,this.y=r.y-r.height-(this.wasStopCrouch&&i.config.headClipFix?this.heightOld:this.height)-(this.config?this.config.hbS:0),this.wasOnPad||(this.velocity.y=0)):i.config.headClipFix&&this.oldY+this.heightOld+(this.config?this.config.hbH:0)<=r.y-r.height&&(this.stopCrouch=!0,this.y=r.y-r.height-this.height-(this.config?this.config.hbS:0),this.wasOnPad||(this.velocity.y=0))}else;}var Ae,Re=[];for(he=0;he<this.collidingObjs.length;he++)-1==d.indexOf(this.collidingObjs[he])&&Re.push(this.collidingObjs[he]);for(he=0;he<Re.length;he++)(Ae=this.collidingObjs.indexOf(Re[he]))>-1&&this.collidingObjs.splice(Ae,1),i.objectTrigger("onExitObject",Re[he],this);if(i.mode&&i.mode.site)for(he=0;he<i.map.manager.sites.length;++he)r=i.map.manager.sites[he],!l&&this.collides(r)&&(2==this.team&&this.weapon&&this.weapon.bomb?g&&this.onGround?(this.doingInter=!0,this.interTick-=p,this.isYou&&this.interTick<=0&&(this.interTick=400,SOUND.play("beep_0",.1,!1,s.randFloat(.95,1))),this.interProg+=p/2e3,this.makingProg=!0,this.interProg>=1&&(this.interProg=1,i.plantBomb(this,r))):t.changeInteract(this,r,3,1,1):2==this.team&&this.loadout.indexOf(17)>-1&&t.changeInteract(this,r,3,2,1));if(this.onZone=null,i.mode&&i.mode.collisionCheck&&i.mode.collisionCheck(i,this,l),!i.mode||!i.mode.noPickups)for(he=0;he<i.map.manager.pickups.length;++he)r=i.map.manager.pickups[he],!this.collides(r)||!s.isNumber(r.pickup)||i.mode.teamOptions&&"Infected"==i.mode.teamOptions[this.team-1]||(r.active&&i.teamCheck(r,this)&&(!i.weaponConfig[r.pickup].bomb||i.mode&&i.mode.site)?t.changeInteract(this,r,6):!r.active&&1==this.team&&i.weaponConfig[r.pickup].bomb&&i.mode&&i.mode.site&&(g&&this.onGround?(this.doingInter=!0,this.interProg+=p/4e3,this.makingProg=!0,this.interProg>=1&&(this.interProg=1,i.diffuseBomb(this))):t.changeInteract(this,r,3,3,1)));for(he=0;he<i.airDrop.drops.length;++he)if((r=i.airDrop.drops[he]).canClaim&&this.collides(r,r.claimRadius)&&(t.changeInteract(this,r,10,null,1),S&&this.onGround)){this.makingProg=!0,this.interProg+=p/r.claimTime,this.interProg>=1&&(this.interProg=0,i.claimAirDrop(this,r));break}}if(!this.noclip){if(i.mode&&(i.mode.flags||i.mode.oneflag))for(he=0;he<i.map.manager.flags.length;++he)(r=i.map.manager.flags[he]).active&&this.collides(r)&&r.flag&&i.pickupFlag(this,r);for(var Pe in i.map.manager.spawnables)if((r=i.map.manager.spawnables[Pe]).active&&!r.ai&&this.collides(r)){var Ee=i.pickupSpawnable(this,r);Ee&&t.changeInteract(this,r,12,Ee,1)}for(he=0;he<i.map.manager.spinners.length;++he)r=i.map.manager.spinners[he],this.collides(r,r.tRadius||0)&&t.changeInteract(this,r,9)}if(this.grapple)s.getD3D(this.x,this.y,this.z,this.grapple.x,this.grapple.y,this.grapple.z)-this.grapple.range>=.2&&t.endGrapple(this);!this.didJump&&null!=this.rampFix&&Math.abs(this.y-this.rampFix)<=a.climbHeight?oe||(this.y=this.rampFix,t.setOnGround(this),this.velocity.y=0,this.rampFix=null):this.rampFix=null,this.makingProg||l||(this.interProg=0),this.makingMProg||l||(this.interMProg=0);var De=i.map.terrain;if(De&&!this.noclip){var Oe=De.raycast(this.x,-this.z,1e4,0,0,-2e4,!0);if(Oe){var Le=Oe.z;if(this.y<=Le&&(t.resetStep(this,l),this.onTerrain=!0),this.onTerrain){t.setOnGround(this);var je=De._raycastNormal;je.set(je.x,je.z,-je.y),this.y=Le,this.velocity.y=0,this.jumpCooldown=0}}}this.onGround?this.airTime=0:this.airTime+=p}if(this.coverDis+=s.getDistance(this.oldX,this.oldZ,this.x,this.z),!(l||i.mode.teamOptions&&"Prop"==i.mode.teamOptions[this.team-1]||this.config&&1===this.config.mdl)){var ze=s.getD3D(this.oldX,this.oldY,this.oldZ,this.x,this.y,this.z);this.renderYou&&(this.onLadder&&(ze*=1.4),this.bobAnimZ+=s.getDistance(this.oldX,this.oldZ,this.x,this.z)*a.bobMltZ,this.bobAnimY-=(this.oldY-this.y)*a.bobMltY),V&&ze&&ze>=.1&&t.playerStep(this,ze),this.renderYou&&(V&&void 0!==_?this.leanAnimZ-=ze*a.leanMltZ*(this.weapon.zLnM||1)*Math.cos(_):this.stepVal*=Math.pow(a.stepPull,p)),this.stepChase!=this.stepVal&&(this.stepChase+=.15*(this.stepVal-this.stepChase)),this.spreadPlus+=(ze*a.spreadMove+Math.abs(this.oldY-this.y)*a.spreadFall)*(this.weapon.movSpread||0),this.spreadPlus*=Math.pow(a.spreadRecover,p),this.spread=this.weapon.noSpread?0:Math.max(this.weapon.minSpread||0,(this.weapon.spread-this.weapon.spread*a.crouchSpread*this.crouchVal+(this.noRecoil?0:this.recoilAnim*a.spreadMlt)+this.spreadPlus)*(this.aimVal+(1-this.aimVal)*this.weapon.adSpread)),this.resetTimer>0&&(this.resetTimer-=p,this.resetTimer<=0&&(this.resetTimer=0));var Be=!i.mode||!i.mode.noReloads;if(i.mode&&i.mode.finiteAmmo&&!this.isBot&&this.ammos[this.loadoutIndex]<=0&&this.reserveAmmos[this.loadoutIndex]<=0&&(Be=!1),b&&Be&&t.reload(this),this.reloadTimer>0){var Ne=this.reloadTimer;this.reloadTimer-=p,t.reloadUIAnim(this);var Fe=this.reloadTimer/(this.weapon.reload*(i.config.reSpd||1)*this.attributes.reload*(this.perks.includes(2)?.5:1)*(this.isKranked?i.mode.bonuses.reload:1)*(i.mode&&null!=i.mode.reloadMlt?i.mode.reloadMlt:1));if(this.isYou&&Ne>=Fe/2&&this.reloadTimer<Fe/2&&t.endReload(this),this.reloadTimer<=0){if(this.reloadTimer=0,this.didShoot=!1,i.mode&&i.mode.finiteAmmo&&!this.isBot){var He=i.mode&&null!=i.mode.ammoLimit?i.mode.ammoLimit:this.weapon.ammo,Ue=0,Ve=this.reserveAmmos[this.loadoutIndex];Ve+=this.ammos[this.loadoutIndex],(Ve-=He)<0?(Ue=He+Ve,Ve=0):Ue=He,this.reserveAmmos[this.loadoutIndex]=Ve,this.ammos[this.loadoutIndex]=Ue}else this.ammos[this.loadoutIndex]=i.mode&&null!=i.mode.ammoLimit?i.mode.ammoLimit:this.weapon.ammo;t.updatePlayerAmmo(this),t.resetReloadUIAnim(this)}}this.cantShootTimer>0&&(this.cantShootTimer-=p,this.cantShootTimer<=0&&(this.cantShootTimer=0)),this.buildHelper&&(!this.weapon.build||this.reloads[this.loadoutIndex]||this.selectBuild)&&(this.buildHelper.visible=!1,this.buildHelperN.visible=!1),this.swapTime>0&&(this.swapTime-=p,this.swapTime<0&&(this.swapTime=0));for(he=0;he<this.reloads.length;++he)this.reloads[he]>0&&(this.reloads[he]-=p,this.reloads[he]<0&&(this.reloads[he]=0));if(this.weapon&&!h&&!this.doingInter){this.onGround||this.config.airSh||(this.didShoot=!1);var Ge=g||this.weapon.rShoot&&v||!1,We=this.burstCount||!this.weapon.nAuto&&Ge;if(this.didShoot&&!Ge&&(this.didShoot=!1),!this.didShoot&&Ge&&(We=!0),this.reloads[this.loadoutIndex]<=0&&this.swapTime<=0&&this.reloadTimer<=0)if(this.weapon.grapRang)t.tryGrapple(this,this.weapon.grapRang,We,e);else if(this.weapon.build)t.build(this,We);else if(We&&(!this.crouchVal||this.crouchVal&&this.config.croSh)&&(this.config.airSh||this.onGround&&!this.config.airSh)&&(this.config.hipF||1!=this.aimVal&&!this.config.hipF))if(this.noMovTimer=0,this.weapon.melee)t.melee(this,e);else{var qe=parseInt(this.weapon.id);this.ammos[this.loadoutIndex]>0?this.fullCharge?t.shoot(this,e,qe,m,f,!0,v):t.shoot(this,e,qe,m,f,!1,v):Be?t.reload(this):t.cantShoot(this)}}}if(!h&&l&&(e.velObj&&(this.velocity.x-=e.velObj.x,this.velocity.z-=e.velObj.y,this.noclip||(this.velocity.y-=e.velObj.z),this.onGround=!1),e.grapObj&&(this.grapple={x:e.grapObj.x,y:e.grapObj.y,z:e.grapObj.z,range:e.grapObj.r})),!u.noWallJ&&this.wallJump&&this.wallJumpC<this.wallJumpMax&&!this.onGround&&!this.onLadder&&this.onWall&&X>0&&!h&&(this.didJumpW&&!y&&(this.didJumpW=!1),!this.didJumpW&&y)){this.didJumpW=!0,this.wallJumpC++,!l&&this.isYou&&(this.jumpTween&&this.jumpTween.stop(),this.jumpTween=new TWEEN.Tween(this).to({jumpBobY:.26},500).easing(TWEEN.Easing.Back.Out).start(),new TWEEN.Tween(this).to({jumpRot:[.15,0]},900).easing(TWEEN.Easing.Back.Out).start(),SOUND.play(i.players.getJumpSound(this),.04,!1));var Ye=(null==i.mode.wallJV?this.config.wallJV||0:i.mode.wallJV)*(i.mode.realMov?.7:1);this.velocity.y=.058*(i.mode.realMov?.9:1)*(null==i.mode.wallJYV?1:i.mode.wallJYV),1==this.onWall?this.velocity.x=Ye*X:2==this.onWall?this.velocity.x=-Ye*X:3==this.onWall?this.velocity.z=Ye*X:4==this.onWall&&(this.velocity.z=-Ye*X),this.onWall=0}if(!h&&i.mode.canTrade&&!i.waitTimers){var Ke=this.x,Xe=this.y,Ze=this.z;if(i.now-0>=500)for(he=0;he<i.players.list.length;++he)if(r=i.players.list[he],this.active&&r.active&&!r.isYou&&r.level){var Je=a.playerHeight/2;s.getD3D(Ke,Xe+Je,Ze,r.x,r.y+Je,r.z)<=2.4*Je&&t.changeInteract(this,r,5,null,1)}}h||(t.playerConvTeam(this),t.updateInteract(this)),2!=x||!this.active||this.resetTimer||l?x&&this.active&&!this.resetTimer&&!l&&t.resetToStart(this):t.resetToLast(this)}},this.didMov=()=>s.getD3D(this.x,this.y,this.z,this.oldX,this.oldY,this.oldZ)>=.1?1:0,this.send=function(){i&&i.send&&i.send(this.id,...arguments)}}},function(e,t,i){var n=i(1),s=i(4);const a=[{name:"Legacy Challenger",id:0,desc:"Completed Old Challenge Lvl 30"},{name:"Skin Creator I",id:1,desc:"50 skins added to the game"},{name:"Skin Creator II",id:1,tex:1,desc:"100 skins added to the game"},{name:"Skin Creator III",id:1,tex:2,desc:"200 skins added to the game"},{name:"Skin Creator IV",id:1,tex:3,desc:"300 skins added to the game"},{name:"Deputy",id:2,desc:""},{name:"Officer",id:2,tex:1,desc:""},{name:"Sergeant",id:2,tex:2,desc:""},{name:"Lieutenant",id:2,tex:3,desc:""},{name:"Captain",id:2,tex:4,desc:""},{name:"Major",id:2,tex:5,desc:""},{name:"Nuclear I",id:3,desc:"Call in 500 Nukes",claimable:!0,req:function(e){return e&&e.stats&&(e.stats.n||0)>=500}},{name:"Translators",id:7,desc:"Contributors of the Translation Project"},{name:"Nuclear II",id:3,tex:1,desc:"Call in 750 Nukes",claimable:!0,req:function(e){return e&&e.stats&&(e.stats.n||0)>=750}},{name:"Nuclear III",id:3,tex:2,desc:"Call in 1000 Nukes",claimable:!0,req:function(e){return e&&e.stats&&(e.stats.n||0)>=1e3}},{name:"Nuclear IV",id:3,tex:3,desc:"Call in 1500 Nukes",claimable:!0,req:function(e){return e&&e.stats&&(e.stats.n||0)>=1500}},{name:"Gratitude I",id:8,desc:"Contributing to the development of krunker"},{name:"Gratitude II",id:8,tex:1,desc:"Contributing to the development of krunker"},{name:"Gratitude III",id:8,tex:2,desc:"Contributing to the development of krunker"},{name:"Map Maker I",id:9,desc:""},{name:"Map Maker II",id:9,tex:1,desc:""},{name:"Map Maker III",id:9,tex:2,desc:""},{name:"Season 6 Founder",id:10,desc:"Purchase the Battle Pass in the first week",endDate:"December 1, 2022 12:00 AM UTC",founder:!0,season:6,claimable:!0,req:function(e){if(e){var t=new Date(this.endDate).getTime();return 6==s.currentSeason&&e&&e.BP&&e.BP.tier&&Date.now()<t}}},{name:"S6 Map Master",id:12,desc:"Collect all Season 6 map rewards",claimable:!0,req:function(e){if(!e||e&&!e.skins)return!1;for(var t=[5237,5238,5239,5240,5241,5242,5243,5244,5245,5246,5247,5248,5249,5250,5251,5252,5253],i=0,n=0;n<t.length;n++)e.hasSkin(t[n])&&i++;return 6==s.currentSeason&&i>=t.length}},{name:"S6 Battle Pass Master",id:14,desc:"Complete the Battle Pass in Season 6",claimable:!0,req:function(e){return 6==s.currentSeason&&e&&e.BP&&e.BP.tier&&e.BP.bpp>=15e3}},{name:"S6 Badge Master",id:13,desc:"Obtain all Season 6 badges",claimable:!0,req:function(e){return 6==s.currentSeason&&e&&e.badges&&e.badges.includes(22)&&e.badges.includes(23)&&e.badges.includes(24)}},{name:"Season 7 Founder",id:15,desc:"Purchase the Battle Pass in the first week",endDate:"April 11, 2023 12:00 AM UTC",founder:!0,season:7,claimable:!0,req:function(e){if(e){var t=new Date(this.endDate).getTime();return 7==s.currentSeason&&e&&e.BP&&e.BP.tier&&Date.now()<t}}},{name:"S7 Battle Pass Master",id:16,desc:"Complete the Battle Pass in Season 7",claimable:!0,req:function(e){return 7==s.currentSeason&&e&&e.BP&&e.BP.tier&&e.BP.bpp>=15e3}},{name:"S7 Badge Master",id:17,desc:"Obtain all Season 7 badges",claimable:!0,req:function(e){return 7==s.currentSeason&&e&&e.badges&&e.badges.includes(26)&&e.badges.includes(27)}}];for(var r=0;r<a.length;r++)a[r].index=r,a[r].url=n.assetsUrl("textures/badges/badge_"+a[r].id+(a[r].tex?"_"+a[r].tex:"")+".png",void 0,!!a[r].local);e.exports=a},function(e,t){e.exports=[["Afghanistan","af"],["Albania","al"],["Algeria","dz"],["American Samoa","as"],["Andorra","ad"],["Angola","ao"],["Anguilla","ai"],["Antarctica","aq"],["Antigua and Barbuda","ag"],["Argentina","ar"],["Armenia","am"],["Aruba","aw"],["Australia","au"],["Austria","at"],["Azerbaijan","az"],["Bahamas","bs"],["Bahrain","bh"],["Bangladesh","bd"],["Barbados","bb"],["Belarus","by"],["Belgium","be"],["Belize","bz"],["Benin","bj"],["Bermuda","bm"],["Bhutan","bt"],["Bolivia","bo"],["Bosnia and Herzegovina","ba"],["Botswana","bw"],["Brazil","br"],["British Indian Ocean Territory","io"],["British Virgin Islands","vg"],["Brunei","bn"],["Bulgaria","bg"],["Burkina Faso","bf"],["Burundi","bi"],["Cambodia","kh"],["Cameroon","cm"],["Canada","ca"],["Cape Verde","cv"],["Cayman Islands","ky"],["Central African Republic","cf"],["Chad","td"],["Chile","cl"],["China","cn"],["Christmas Island","cx"],["Cocos Islands","cc"],["Colombia","co"],["Comoros","km"],["Cook Islands","ck"],["Costa Rica","cr"],["Croatia","hr"],["Cuba","cu"],["Curacao","cw"],["Cyprus","cy"],["Czech Republic","cz"],["Democratic Republic of the Congo","cd"],["Denmark","dk"],["Djibouti","dj"],["Dominica","dm"],["Dominican Republic","do"],["East Timor","tl"],["Ecuador","ec"],["Egypt","eg"],["El Salvador","sv"],["Equatorial Guinea","gq"],["Eritrea","er"],["Estonia","ee"],["Ethiopia","et"],["Falkland Islands","fk"],["Faroe Islands","fo"],["Fiji","fj"],["Finland","fi"],["France","fr"],["French Polynesia","pf"],["Gabon","ga"],["Gambia","gm"],["Georgia","ge"],["Germany","de"],["Ghana","gh"],["Gibraltar","gi"],["Greece","gr"],["Greenland","gl"],["Grenada","gd"],["Guam","gu"],["Guatemala","gt"],["Guernsey","gg"],["Guinea","gn"],["Guinea-Bissau","gw"],["Guyana","gy"],["Haiti","ht"],["Honduras","hn"],["Hong Kong","hk"],["Hungary","hu"],["Iceland","is"],["India","in"],["Indonesia","id"],["Iran","ir"],["Iraq","iq"],["Ireland","ie"],["Isle of Man","im"],["Israel","il"],["Italy","it"],["Ivory Coast","ci"],["Jamaica","jm"],["Japan","jp"],["Jersey","je"],["Jordan","jo"],["Kazakhstan","kz"],["Kenya","ke"],["Kiribati","ki"],["Kosovo","xk"],["Kuwait","kw"],["Kyrgyzstan","kg"],["Laos","la"],["Latvia","lv"],["Lebanon","lb"],["Lesotho","ls"],["Liberia","lr"],["Libya","ly"],["Liechtenstein","li"],["Lithuania","lt"],["Luxembourg","lu"],["Macau","mo"],["Macedonia","mk"],["Madagascar","mg"],["Malawi","mw"],["Malaysia","my"],["Maldives","mv"],["Mali","ml"],["Malta","mt"],["Marshall Islands","mh"],["Mauritania","mr"],["Mauritius","mu"],["Mayotte","yt"],["Mexico","mx"],["Micronesia","fm"],["Moldova","md"],["Monaco","mc"],["Mongolia","mn"],["Montenegro","me"],["Montserrat","ms"],["Morocco","ma"],["Mozambique","mz"],["Myanmar","mm"],["Namibia","na"],["Nauru","nr"],["Nepal","np"],["Netherlands","nl"],["Netherlands Antilles","an"],["New Caledonia","nc"],["New Zealand","nz"],["Nicaragua","ni"],["Niger","ne"],["Nigeria","ng"],["Niue","nu"],["North Korea","kp"],["Northern Mariana Islands","mp"],["Norway","no"],["Oman","om"],["Pakistan","pk"],["Palau","pw"],["Palestine","ps"],["Panama","pa"],["Papua New Guinea","pg"],["Paraguay","py"],["Peru","pe"],["Philippines","ph"],["Pitcairn","pn"],["Poland","pl"],["Portugal","pt"],["Puerto Rico","pr"],["Qatar","qa"],["Republic of the Congo","cg"],["Reunion","re"],["Romania","ro"],["Russia","ru"],["Rwanda","rw"],["Saint Barthelemy","bl"],["Saint Helena","sh"],["Saint Kitts and Nevis","kn"],["Saint Lucia","lc"],["Saint Martin","mf"],["Saint Pierre and Miquelon","pm"],["Saint Vincent and the Grenadines","vc"],["Samoa","ws"],["San Marino","sm"],["Sao Tome and Principe","st"],["Saudi Arabia","sa"],["Senegal","sn"],["Serbia","rs"],["Seychelles","sc"],["Sierra Leone","sl"],["Singapore","sg"],["Sint Maarten","sx"],["Slovakia","sk"],["Slovenia","si"],["Solomon Islands","sb"],["Somalia","so"],["South Africa","za"],["South Korea","kr"],["South Sudan","ss"],["Spain","es"],["Sri Lanka","lk"],["Sudan","sd"],["Suriname","sr"],["Svalbard and Jan Mayen","sj"],["Swaziland","sz"],["Sweden","se"],["Switzerland","ch"],["Syria","sy"],["Taiwan","tw"],["Tajikistan","tj"],["Tanzania","tz"],["Thailand","th"],["Togo","tg"],["Tokelau","tk"],["Tonga","to"],["Trinidad and Tobago","tt"],["Tunisia","tn"],["Turkey","tr"],["Turkmenistan","tm"],["Turks and Caicos Islands","tc"],["Tuvalu","tv"],["U.S. Virgin Islands","vi"],["Uganda","ug"],["Ukraine","ua"],["United Arab Emirates","ae"],["United Kingdom","gb"],["United States","us"],["Uruguay","uy"],["Uzbekistan","uz"],["Vanuatu","vu"],["Vatican","va"],["Venezuela","ve"],["Vietnam","vn"],["Wallis and Futuna","wf"],["Western Sahara","eh"],["Yemen","ye"],["Zambia","zm"],["Zimbabwe","zw"]]},function(e,t,i){var n=i(4);e.exports=[{id:0,name:"Reflex Sight",src:"attach_0",dotSrc:"dot_0",aimOffY:.16,scale:1.2,expScale:12},{id:1,name:"Acog Scope",src:"attach_1",dotSrc:"dot_0",minRec:20,req:function(e,t){var i=e&&e.stats&&e.stats["c"+t]?e.stats["c"+t]:0,s=Math.max(1,Math.floor(n.rankVar*Math.sqrt(i))+1);return!!e&&!!e.isDev||s>=this.minRec},zRec:.9,aimOffY:.22,zoomMlt:1.35,zOff:.35,yOff:{1:.01,14:-.01},scale:1.1,expScale:8,noVertM:!0}]},function(e,t,i){const n=i(1);i(4);function s(e,t){this.init=function(i,n){this.active=!0,this.owner=i,this.preview=n;var s=this.getTPos();if(this.x=s.x,this.y=s.y,this.z=s.z,this.xRot=0,this.speed=.12,this.scale=.8,this.bobSpd=.002,this.bobY=0,t&&(this.mesh=t.genObj3D(0,0,0),i.petIndex>=0)){var a=e.store.skins[i.petIndex];this.speed=a.spd||this.speed,this.scale=a.sclMlt||this.scale,t[a.hasAnim?"loadAnimMesh":"loadMesh"]({fileExt:a.fileExt,animS:a.animS,hasAnim:a.hasAnim,local:a.local,localM:a.localM,src:"pets/pet_"+a.id,texSrc:a.tex?"pets/pet_"+a.id+"_"+a.tex:null,frames:a.frames,frameT:a.frameT,rotT:a.rotT,movT:a.movT,movD:a.movD,sameEnv:a.sameEnv,env:a.env||a.sameEnv?a.env||3:void 0,sameGlow:a.sameGlow,glowText:a.glow,emissive:a.glow||a.sameGlow?a.emiss||"#ffffff":null,pulsT:a.pulsT,transparent:null!=a.opac||a.trans,rAnim:a.rAnim,rAnimA:a.rAnimA,rAnimT:a.rAnimT,rAnimM:a.rAnimM,rgb:a.rgb,rgbS:a.rgbS,rgbT:a.rgbT,useWireframe:a.wire,side:a.side||0,opacity:a.opac||1,alphaTest:a.alpha||0,shaderNum:a.shaderNum,video:a.video,projection:a.projection,color:a.color||null},0,0,0,this.preview?0:Math.PI/2,this.scale,this.mesh),this.preview?this.owner.objInstances.parent.add(this.mesh):t.scene.add(this.mesh)}};let i=t?new t.THREE.Vector3:null;this.getTPos=function(){return this.owner.petHolder.getWorldPosition(i)},this.update=function(e){if(this.active){var t=this.getTPos(),i=n.getDrs(t,this),s=(i[0]||0)+Math.PI/2,a=i[1]||0,r=n.getD3D(this.x,this.y,this.z,t.x,t.y,t.z),o=Math.min(r,this.speed*e),l=1;if(r<40&&(l=r/40),o*=l,this.x+=o*Math.sin(s+Math.PI/2)*Math.cos(a),this.z+=o*Math.cos(s+Math.PI/2)*Math.cos(a),this.y+=o*Math.sin(a),this.mesh){this.bobY+=this.bobSpd*e,this.mesh.position.set(this.x,this.y+.2*Math.sin(this.bobY),this.z),s-=Math.PI/2;var c=2*Math.PI,d=(this.mesh.rotation.y-s+c)%c,h=Math.min(Math.abs(d-c),d,.01*l*e),u=d-Math.PI>=0?1:-1;this.mesh.rotation.y+=u*h+c,this.mesh.rotation.y%=2*Math.PI}}}}e.exports=function(e,t,i){this.list=[],this.update=function(e){for(var t=0;t<this.list.length;++t)this.list[t].update(e)},this.add=function(n,a){if(n.petIndex>=0){var r=new s(e,t,i);r.init(n,a),this.list.push(r)}},this.remove=function(e){if(e.petIndex>=0)for(var i=this.list.length-1;i>=0;--i)if(this.list[i]&&this.list[i].owner==e){this.list[i].mesh&&(this.list[i].preview?this.list[i].owner.objInstances.parent.remove(this.list[i].mesh):t.scene.remove(this.list[i].mesh)),this.list.splice(i,1);break}}}},function(e,t){e.exports=[{name:"Red Dot",id:0},{name:"Green Dot",id:1},{name:"Pyramid",id:2},{name:"Tau",id:3},{name:"Ray",id:4},{name:"Spread",id:5},{name:"Marine",id:6},{name:"Underline",id:7},{name:"Precision",id:8},{name:"Quantum",id:9},{name:"Triad",id:10},{name:"Nuclear",id:11}]},function(e,t){e.exports=[{name:"Midnight Snow",id:0}]},function(e,t){e.exports={PRIMARY:0,SECONDARY:1,MELEE:2,EQUIPMENT:3}},function(e,t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2},t.isValid=function(e){return e&&void 0!==e.bit&&e.bit>=0&&e.bit<4},t.from=function(e,i){if(t.isValid(e))return e;try{return function(e){if("string"!=typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+e)}}(e)}catch(e){return i}}},function(e,t,i){let n=i(4),s=i(15),a=i(1);const r=i(0);let o=new(i(37));var l=i(299);let c={HELPER:i(282),scale:1};var d;let h=c.canvas=document.getElementById("game-overlay"),u=c.ctx=h.getContext("2d");c.resize=function(){h.width=window.innerWidth,h.height=window.innerHeight},c.resize();const p=i(318);c.miniMap=new p;let f=new Image;f.onload=()=>f.isReady=!0,f.src="./img/muzflash.png",c.updateMuzzle=e=>{f.isReady=!1,f.onload=()=>f.isReady=!0,f.src=e};let m=new Image;m.onload=()=>m.isReady=!0,m.src=a.assetsUrl("/textures/marker_0.png");let g=new Image;g.onload=()=>g.isReady=!0,g.src=a.assetsUrl("/textures/marker_0_next.png"),c.updateObjectiveMarker=e=>{m.isReady=!1,m.onload=()=>m.isReady=!0,m.src=e},c.updateNextObjectiveMarker=e=>{g.isReady=!1,g.onload=()=>g.isReady=!0,g.src=e},c.sprayList=[],c.sprayWheel=!1,c.sprayWheelTimer=0,c.sprayWheelIndex=15,c.sprayWheelMax=15,c.sprayWheelReq=200,c.sprayWheelUpdate=e=>{c.sprayWheel&&(c.sprayWheelTimer+=e)},c.sprayWheelClose=()=>{c.sprayWheelTimer=0,c.sprayWheel=!1},c.getSprayIndex=()=>{var e=c.sprayWheelIndex;return c.sprayList[e]},c.sprayWheelOpened=()=>c.sprayWheelTimer>=c.sprayWheelReq&&c.sprayWheel,c.sprayWheelOpen=()=>c.sprayWheel=!0,c.sprayWheelChange=e=>{var t=c.sprayWheelIndex;(t+=e)>c.sprayWheelMax&&(t=0),t<0&&(t=c.sprayWheelMax),c.sprayWheelIndex=t,window.playTick()},c.propList=o.props,c.propWheel=!1,c.propWheelTimer=0,c.propWheelIndex=0,c.propWheelMax=o.props.length-1,c.propWheelReq=200,c.propWheelUpdate=e=>{c.propWheel&&(c.propWheelTimer+=e)},c.propWheelClose=()=>{c.propWheelTimer=0,c.propWheel=!1},c.getPropIndex=()=>c.propList[c.propWheelIndex],c.pickRandomProp=()=>{var e=a.randInt(0,c.propList.length-1);return c.propWheelIndex=e,c.propList[e]},c.propWheelOpened=()=>c.propWheelTimer>=c.propWheelReq&&c.propWheel,c.propWheelOpen=()=>c.propWheel=!0,c.propWheelChange=e=>{var t=c.propWheelIndex;(t+=e)>c.propWheelMax&&(t=0),t<0&&(t=c.propWheelMax),c.propWheelIndex=t,window.playTick()},c.bloodCustom=!1,c.bloodOpacity=0,c.bloodImage=new Image,c.bloodImage.onload=()=>c.bloodImage.isReady=!0,c.bloodImage.src="./img/blood.png";let v=[new Image,new Image,new Image];v[0].onload=()=>v[0].isReady=!0,v[0].src=a.assetsUrl("/textures/flag_r.png"),v[1].onload=()=>v[1].isReady=!0,v[1].src=a.assetsUrl("/textures/flag_b.png"),v[2].onload=()=>v[2].isReady=!0,v[2].src=a.assetsUrl("/textures/flag_w.png"),c.updateFlagMarker=(e,t)=>{v[t].isReady=!1,v[t].onload=()=>v[t].isReady=!0,v[t].src=e};let y=[c.HELPER.loadImg(a.assetsUrl("/textures/jugg_1.png")),c.HELPER.loadImg(a.assetsUrl("/textures/jugg_2.png"))],b={vic:{},dra:{},def:{}};Object.keys(b).forEach((e=>{b[e]=new Image,b[e].onload=()=>b[e].isReady=!0,b[e].src="./img/"+e+".png"})),c.medalsList=["Humiliation","Promotion","First Blood","Revenge","Bullseye","Beatdown","Execution","No Scope","Quick Scope","Headshot","Wallbang","Longshot","Snatched","Close Call","Comeback","Buzzkill","Driftkill","Mid Air","Turbo Kill","Bomb Planted","Secured","Team Work","Capture","Return","Pickup","Defender","Attacker","Clock Work","Recharge","Denied","Confirmed","Assist","Double Kill","Triple Kill","Quad Kill","Multi Kill","Mega Kill","Ultra Kill","Super Kill","Leveled Up","Nuked","Boosted","Sleight of Hand","Rapid Fire","Siphon","Rooted","Dizzy","Poisoned","Collected","Deposited","Bombed","Jump Boost","Zapped","Strength","Scavenger","Cycled"];let w=c.HELPER.loadImg(a.assetsUrl("/img/medals/badge_0.png")),x=[];c.updateMedalIcon=(e,t)=>{-1==t?w=c.HELPER.patchImg(a.assetsUrl("/img/medals/badge_0.png"),e):c.medalsList[t]&&(x[t]=c.HELPER.patchImg(a.assetsUrl("/img/medals/medal_"+t+".png"),e))};var S=null;c.divs=[],c.kpdData=null,c.hideNames=!1,c.deathMarkerOpacity=1,c.deathMarkerAdsOpacity=.5,c.deathMarkerDisplay=0,c.deathMarkerDuration=7,c.showDMG=!0,c.dmgNums=[],c.showFlash=!1,c.flashX=0,c.flashY=0,c.fakeCross=!1,c.crosshairType=1,c.dmgColor="white",c.critColor="white",c.healColor="#03fc30",c.crosshairColor="white",c.crosshairShadow="black",c.crosshairShadowThickness=1,c.crosshairOpacity=0,c.crosshairUseOpacityCustom=!1,c.crosshairOpacityCustom=0,c.crosshairScale=0,c.crosshairAlways=!1,c.dynamicHP=!0,c.dmgScale=30,c.crosshairStyle=1,c.crosshairThick=2,c.crosshairLen=16,c.crosshairGap=0,c.crosshairDot=!0,c.crosshairImage=new Image,c.crosshairImageW=0,c.crosshairImageH=0,c.mapCross=null,c.mapCrossChase=null,c.nametagStyle=0,c.nametagOpacity=1,c.nametagScale=1,c.healthNum=!1,c.healthColT=s.teams[0],c.healthColE=s.teams[1],c.adsObjectiveOpacity=.5,c.objectiveOpacity=1,c.scopeBorders={color:"#000000",display:!0},c.crosshairColorM="white",c.crosshairShadowM="black",c.crosshairLenM=16,c.crosshairThickM=3,c.crosshairUseOpacityCustomM=!1,c.crosshairOpacityCustomM=0,c.crosshairAlwaysM=!1,c.crosshairShadowThicknessM=1,c.crosshairGapM=14,c.crosshairDotM=!0,c.crosshairTypeM=3,c.crosshairImageM=new Image,c.crosshairImageWM=0,c.crosshairImageHM=0,c.crosshairStyleM=1,c.kpdVision=!0,c.kpdVisionCol="#00ffff",c.interactProg={color:"#ffffff",display:!1,left:50,top:80,width:400,height:30,prog:0,opacity:1,rot:0},c.captureProg={color:"#ffffff",left:50,top:80,width:400,height:30,opacity:1,rot:0,scale:.8},c.interactMProg={color:"#ffffff",oColor:"#eb2f2f",display:!1,scale:.5,left:56,top:50,width:400,height:30,prog:0,opacity:1,rot:0},c.scoreText={color:"#ffea78",text:"",opacity:0,textAlign:"center",top:37,left:50,display:!1},c.timerText={color:"#fff",text:"",opacity:0,textAlign:"center",top:26,left:50,display:!1},c.infoText={color:"#fff",width:460,height:100,text:"",opacity:.5,textAlign:"center",top:"215px",left:50,display:!1},c.infoSub={color:"#fbc02d",width:330,height:60,text:"",opacity:.5,textAlign:"center",top:"280px",left:50,display:!1},c.checkText={color:"#40C4FF",text:"",opacity:0,textAlign:"center",top:20,left:50,display:!1},c.chalName={color:"#fff",text:"",text2:"",fontSize:80,width:517,height:167,lineHeight:150,opacity:0,textAlign:"center",top:"80px",left:50,display:!1,rect:{color:null}},c.vicTitle={type:"vic",show:!1,opacity:{val:0,increment:.05},scale:{val:2.5,decrement:.005,acc:.01}},c.medals=[],c.medalPrefab={medal:!0,marginName:40,marginScore:70,marginCount:30,size:130,scale:1,border:7,offset:{x:0,y:-5},left:50,top:8,opacity:0,zoomInc:.06,zoom:2,soundN:null,sound:!0,count:1,filter:null},c.hitmarker={image:null,opacity:0,width:105,height:105,display:!1,custom:!1};var M={};function k(e,t,i,n,s,a,r){let o=e.createLinearGradient(t,i,t+("X"==a?n:0),i+("Y"==a?s:0));r.forEach(((e,t)=>o.addColorStop(t,e))),e.fillStyle=o,e.fillRect(t,i,n,s)}function _(e){return e.slice(0,-1)+String.fromCharCode(65+a.randInt(0,5))}c.hitSet={enabled:!0,opacity:1},c.showHit=e=>{c.hitSet.enabled&&(M.active=!0,M.opacity=c.hitSet.opacity,M.spacing=c.hitSet.spacing,M.inc=c.hitSet.inc,M.length=e?1.2*c.hitSet.length:c.hitSet.length,M.colors=e?c.hitSet.kColors:c.hitSet.colors)};var T={center:!0,center_marker:!0,height:24,y:-2,speed_scale:1,speed_y:1,speedPX:24,enabled:!0,hudScale:.5,neutralZoneCol:"#4C4C4C",gainZoneCol:"#34FD34",outlineCol:"#000000",speedCol:"#FDFDFD",prestrafeCol:"#ffd026"};c.drawSRM=(e,t,i)=>{if(e&&e.overlayInfo){var n,s,r,o,l=(i-T.height)/2+T.y,c=0;T.center&&(c=-e.overlayInfo.c),e.overlayInfo.mi<e.overlayInfo.o?(n=e.overlayInfo.mi+c,r=e.overlayInfo.o-e.overlayInfo.mi):(n=e.overlayInfo.o+c,r=e.overlayInfo.mi-e.overlayInfo.o),e.overlayInfo.o<e.overlayInfo.ma?(s=e.overlayInfo.o+c,o=e.overlayInfo.ma-e.overlayInfo.o):(s=e.overlayInfo.ma+c,o=e.overlayInfo.o-e.overlayInfo.ma),n&&r&&s&&o&&e.overlayInfo.c&&(u.clearRect(0,i/2-T.height/2-4,t,T.height+8),u.lineWidth=1,u.fillStyle=T.gainZoneCol,u.strokeStyle=T.outlineCol,u.fillRect(a.AngleToPixel(s,T.hudScale,t),l,a.AngleDiffToPixelDiff(o,T.hudScale,t),T.height),u.strokeRect(a.AngleToPixel(s,T.hudScale,t),l,a.AngleDiffToPixelDiff(o,T.hudScale,t),T.height),u.fillStyle=T.neutralZoneCol,u.fillRect(a.AngleToPixel(n,T.hudScale,t),l,a.AngleDiffToPixelDiff(r,T.hudScale,t),T.height),u.strokeRect(a.AngleToPixel(n,T.hudScale,t),l,a.AngleDiffToPixelDiff(r,T.hudScale,t),T.height),T.center_marker&&(u.fillStyle=T.marker,u.fillRect(a.AngleToPixel(e.overlayInfo.c+c,T.hudScale,t)-.5,l+T.height/2,2,T.height/2)))}};var C=0,I=0;c.speedDisplay={color:"#ffea78",colorMax:"#ff0000",curr:0,max:0,display:!1,fontSize:24,opacity:1,top:54,left:50,update:0},c.reset=()=>{for(var e=0;e<c.divs.length;++e)c.divs[e].display=!1;c.divs.length=0},c.animateText=(e,t,i,n,s,a,r,o,l,d)=>{c.divs.indexOf(e)<0&&c.divs.push(e),e.delay=r,r||(e.display=!0),e.fontSize=i,e.scale=i,e.shadow=d||0,e.minScale=n?i*(l||.4):i,e.text=t,e.scaleSpeed=n,e.life=s,e.fade=a,e.opacity=1,e.callback=o},c.animateMedal=(e,t,i,n,s,a,r,o,l)=>{c.divs.indexOf(e)<0&&c.divs.push(e),e.delay=o,o||(e.display=!0),e.fontSize=n,e.scale=n,e.minScale=s?.4*n:n,e.text=t.toUpperCase(),e.text2=i?i.toUpperCase():null,e.scaleSpeed=s,e.life=a,e.fade=r,e.opacity=1,e.callback=l},c.animateMedalNew=(e,t,i,n,s,r,o,l,d)=>{var h=c.medalsList[t];c.divs.indexOf(e)<0&&c.divs.push(e),e.delay=l,l||(e.display=!0),e.score=i?i.toUpperCase():null,e.name=h.toUpperCase(),e.index=t,e.opacity=0,e.zoom=1.5,x[t]||=c.HELPER.loadImg(a.assetsUrl("/img/medals/medal_"+t+".png")),e.icon=x[t],e.life=r,e.fade=o,e.soundN=a.isNumber(n)?"medal_"+(n||0):null,e.opacity=1,e.count=s||1,e.callback=d,!l&&e.soundN&&e.sound&&SOUND.play(e.soundN,.08)},c.animateDiv=(e,t,i,n,s)=>{c.divs.indexOf(e)<0&&c.divs.push(e),e.display=!0,e.life=t,e.maxLife=t,e.opacity=1,e.fade=i,n&&(e.width=n,e.height=n,e.startS=n,e.scaleSpd=s)},c.dmgVal=(e,t,i,n,s,r)=>{if(c.showDMG){S=null;for(var o=0;o<c.dmgNums.length;++o)if(!c.dmgNums[o].life){S=c.dmgNums[o];break}S||(S={},c.dmgNums.push(S)),S.heal=r,S.crit=s,S.life=1e3,S.x=e,S.y=t+7,S.z=i,S.dir=a.randFloat(-Math.PI,Math.PI),S.val=Math.abs(n)}};var A=[];function R(){this.life=0,this.init=function(e,t,i,n){this.x=e,this.y=t,this.speed=i.map(0,400,2,8),this.life=this.startLife=a.randInt(500,1100),this.alpha=a.randFloat(Math.max(0,c.shoSpdLines-.4),c.shoSpdLines)*Math.min(1,(i-50)/50),this.angle=Math.PI*a.randFloat(0,2),this.size=i.map(0,350,1,400),this.inRadius=i.map(0,400,550,350),this.outRadius=n},this.update=function(e,t){this.life-=this.speed*t,this.inRadius+=this.speed*t,this.alpha*=this.life/this.startLife,this.size*=this.life/this.startLife,this.render(e)},this.render=function(e){e.save(1),e.translate(this.x,this.y),e.rotate(this.angle),e.beginPath(),e.moveTo(0,this.inRadius),e.lineTo(this.size,this.outRadius),e.lineTo(-this.size,this.outRadius),e.closePath(),e.fillStyle="rgba("+c.spdLinesCol+", "+this.alpha+")",e.fill(),e.restore(-1)}}c.speedLineMlt=500,Number.prototype.map=function(e,t,i,n){return(this-e)*(n-i)/(t-e)+i},c.shoSpdLines=0,c.spdLinesCol="230,230,230";for(var P=0;P<15;++P)A.push(new R);c.deathMarkers=[],c.addDeathMarker=(e,t,i,n)=>{if(3!=c.deathMarkerDisplay&&(1!=c.deathMarkerDisplay||n)&&(2!=c.deathMarkerDisplay||!n)){for(var s=null,a=0;a<c.deathMarkers.length;++a)if(!c.deathMarkers[a].life){s=c.deathMarkers[a];break}s||(s={},c.deathMarkers.push(s)),s.isYou=n,s.life=1e3*c.deathMarkerDuration,s.x=e,s.y=t,s.z=i}};var E=0,D=0,O=["volume_down","volume_up"],L=0,j=0,z=["hourglass_bottom","hourglass_top"],B=new r.Vector3,N=u.createLinearGradient(0-c.chalName.width/2,0,c.chalName.width/2,0);function F(e,t,i,n,s){if(n>0){e.save(1),e.globalAlpha=n,e.fillStyle="rgba("+c.hitColor+",1)",e.rotate((s||0)*Math.PI/180+Math.PI/2),e.beginPath();var a=-t/2+i;e.lineTo(0,a),e.lineTo(10,a+20),e.lineTo(90,a+30+25),e.bezierCurveTo(0,a+25,0,a+25,-90,a+30+25),e.lineTo(-10,a+20),e.closePath(),e.fill(),e.restore(-1)}}N.addColorStop(0,"rgba(0,0,0,0)"),N.addColorStop(.4,"rgba(0,0,0,0.3)"),N.addColorStop(.6,"rgba(0,0,0,0.3)"),N.addColorStop(1,"rgba(0,0,0,0)"),c.chalName.rect.color=N,c.hits=[],c.showHits=!0,c.hitColor="255,63,63",c.rainbow={col:"#ffffff",val:0,freq:1e3/60,upd:0},c.resetAll=()=>{customGUIHolder.innerHTML="",c.customGUIs.length=0,c.divsToUpd.length=0,c.deathMarkers.length=0},c.customGUIs=[],c.divsToUpd=[],c.generateUIS=(e,t)=>{c.customGUIs=e;for(var i=0;i<e.length;++i)if(3==e[i].t){var n=document.createElement("div");n.innerHTML=0,n.style.opacity=parseFloat(e[i].o)||0,n.style.width=parseFloat(e[i].w)||0,n.style.height=parseFloat(e[i].h)||0,n.style.top=(parseFloat(e[i].y)||0)+"%",n.style.left=(parseFloat(e[i].x)||0)+"%",n.style.fontSize=(e[i].f||10)+"px",n.style.color=e[i].c||"#ff0000",n.style.zIndex=e[i].z||0,n.style.position="absolute",n.style.transform="translate(-50%, -50%)",n.style.display=~~!!parseInt(e[i].nv)?"none":"block",n.id="cusDIV"+i,n.setAttribute("data-text",n.innerHTML),n.addEventListener("click",(e=>{e.stopPropagation(),e.cancelBubble=!0,e&&e.target&&t&&t.mainScript&&t.mainScript.onDIVClicked&&t.mainScript.onDIVClicked(e.target.id)})),customGUIHolder.appendChild(n),c.divsToUpd.push({id:parseInt(e[i].id)||0,elm:n,curr:n.innerHTML,data:e[i]})}};let H=new r.Vector3;function U(e,t,i,n,s,r,o,l){B.set(r.x,r.y+7,r.z);var d=70*Math.max(.3,1-a.getD3D(o.x,o.y,o.z,B.x,B.y,B.z)/600),h=d>=1&&e.frustum.containPoint(B),p=l?g:m;if(h&&p&&p.isReady){B.project(e.camera),B.x=(B.x+1)/2,B.y=(B.y+1)/2;var f=B.x*i,v=(1-B.y)*n,y=s?s.aimVal:1,b=a.inRange(f,.45*i,.55*i)&&a.inRange(v,.4*n,.6*n)&&1!=y;u.globalAlpha=b?c.adsObjectiveOpacity:c.objectiveOpacity;let r=d/144;u.save(1),u.translate(f,v),u.scale(r,r);let o=80,h=12,m=12;var w=35;u.font=w+"px GameFont";var x=l?"Next":t.mode.deposit?"Deposit":"Capture";if(u.fillStyle="#fff",u.strokeStyle="#2e2e2e",u.lineWidth=4,u.textAlign="center",u.textBaseline="middle",u.strokeText(x,0,-(o+h+m)),u.fillText(x,0,-(o+h+m)),!l){w=35,u.font=w+"px GameFont";var S=a.getChargedTime(t.objtvTime||0);u.fillStyle="#fff",u.strokeStyle="#2e2e2e",u.lineWidth=4,u.textAlign="center",u.textBaseline="top",u.strokeText(S,0,o+h+m),u.fillText(S,0,o+h+m)}o=80,u.save(1),u.translate(.5,.5),u.rotate(45*Math.PI/180),u.fillStyle="rgba(0, 0, 0, 0.4)",u.fillRect(-o/2-h,-o/2-h,o+2*h,o+2*h),u.fillStyle=l?"#fff":"#FBC02D",u.fillRect(-o/2,-o/2,o,o),u.restore(-1);const g=.8*o;u.drawImage(p,-g/2,-g/2,g,g),u.restore(-1)}}function V(e,t,i,n,s,a=1,r=!1,o=!0,l=!0){if(o){e.save(1);let o=2;l?e.fillStyle=c.crosshairShadow:e.strokeStyle=c.crosshairShadow,e.lineWidth=a,e.globalAlpha*=.5,e.beginPath(),r?e.ellipse(t+n/2,i+s/2,n/2+o,s/2+o,0,0,2*Math.PI):e.rect(t-o,i-o,n+2*o,s+2*o),l?e.fill():e.stroke(),e.restore(-1)}l?e.fillStyle=c.crosshairColor:e.strokeStyle=c.crosshairColor,e.lineWidth=a,e.beginPath(),r?e.ellipse(t+n/2,i+s/2,n/2,s/2,0,0,2*Math.PI):e.rect(t,i,n,s),l?e.fill():e.stroke()}c.render=(e,t,i,r,o,p,g,x)=>{"use strict";let S=c;S.scale=e;let T=h.width/e,R=h.height/e,P="none"!=endUI.style.display||"none"!=menuHolder.style.display,N="none"==deathUIHolder.style.display&&!P,G=r.camera.getWorldPosition(H);var W,q,Y,Z,J,Q=o&&o.team?o.team:window.spectating?1:0,$=!r.aimRecticle.custom&&r.aimRecticle.display&&r.aimRecticle.opacity>0&&r.aimRecticle.image&&r.aimRecticle.image.isReady;if((D-=p)<=0&&(D=300,++E>=O.length&&(E=0)),(j-=p)<=0&&(j=800,++L>=z.length&&(L=0)),u.save(1),u.scale(e,e),u.clearRect(0,0,T,R),function(e,t,i,n,s){if(c.shoSpdLines&&e&&e.active){var r=a.getDistance(0,0,e.velocity.x,e.velocity.z)*c.speedLineMlt;if(r>=50)for(var o=0;o<A.length;++o)A[o].life<=0?A[o].init(i/2,n/2,r,i):A[o].update(t,s)}}(o,u,T,R,p),c.drawSRM(o,T,R),c.showHits){if(u.save(1),u.translate(T/2,R/2),o&&o.active)for(var ee=0;ee<S.hits.length;++ee)S.hits[ee].life&&(S.hits[ee].life-=p,S.hits[ee].life<=0&&(S.hits[ee].life=0),F(u,R/2,83,S.hits[ee].life/n.hitLife,a.toDeg(a.getDir(S.hits[ee].x,S.hits[ee].z,o.x,o.z)+i.xDr)));u.restore(-1)}if(c.showDMG)for(ee=0;ee<c.dmgNums.length;++ee)if((d=c.dmgNums[ee]).life)if(d.life-=p,d.life<=0)d.life=0;else{if(d.y+=.022*p,d.x+=.013*p*Math.cos(d.dir),d.z+=.013*p*Math.sin(d.dir),B.set(d.x,d.y,d.z),!r.frustum.containPoint(B))continue;u.save(1),B.project(r.camera),B.x=(B.x+1)/2,B.y=(B.y+1)/2,u.translate(Math.round(T*B.x),Math.round(R*(1-B.y))),u.fillStyle=d.heal?c.healColor:d.crit?c.critColor:c.dmgColor,u.strokeStyle="#2e2e2e",u.lineWidth=5,u.font=c.dmgScale+"px GameFont";var te=-Math.round(u.measureText(d.val).width/2);u.strokeText(d.val,te+1,0),u.fillText(d.val,te,0),u.restore(-1)}if(!P)for(ee=0;ee<t.AI.ais.length;++ee){if(!((d=t.AI.ais[ee]).active&&d.canBSeen&&d.mesh&&d.mesh.visible))continue;var ie=1+d.scale/30;if((se=d.mesh.position.clone()).y+=d.height*(d.assetID?4:2)+n.nameOffset+1.5,!(oe=20*(Ce=Math.max(.3,1-a.getD3D(G.x,G.y,G.z,se.x,se.y,se.z)/600))>=1&&r.frustum.containPoint(se)))continue;u.save(1),se.project(r.camera),se.x=(se.x+1)/2,se.y=(se.y+1)/2,u.translate(T*se.x,R*(1-se.y)),u.scale(Ce,Ce);let e=20*ie+"px GameFont",i=120*ie*(d.tagScale||1),s=16*(1+.3*(ie-1)),o=d.lvl||0;if(o){u.font="30.25px GameFont";let e=10,t=1.5*e,n=10,a=50,r=u.measureText(o).width;u.fillStyle="rgba(0, 0, 0, 0.65)",u.fillRect(-i/2-n-r-t,-(a+e/2)-3,r+t,a+e),u.fillStyle="white",o>=99?u.fillStyle="#e834eb":o>=60?u.fillStyle="#eb9634":o>=30&&(u.fillStyle="#AC69B9"),u.fillText(o,-i/2-n-r-t/2,-s/2)}if(d.maxHealth){u.fillStyle="rgba(0,0,0,0.4)",u.fillRect(-i/2,-s,i,s);var ne=!(d.team&&t.mode&&t.mode.teams&&d.team==Q||t.mode&&t.mode.friendly&&1==d.team);u.fillStyle=ne?S.healthColE:S.healthColT,u.fillRect(-i/2,-s,i*(d.health/d.maxHealth),s)}u.font=e;let l=d.name;if(u.fillStyle="white",u.font=e,u.fillText(l,-i/2,-s-7*ie),o>60){(pe=S.HELPER.loadImg("./img/skull_0.png")).isReady&&u.drawImage(pe,i/2+5,-60,60,60)}u.restore(-1)}if(W=p,c.rainbow.val+=.3*W,c.rainbow.val>=360&&(c.rainbow.val=0),c.rainbow.upd-=W,c.rainbow.upd<=0&&(c.rainbow.upd=c.rainbow.freq,c.rainbow.col=a.hexFromHue(Math.round(c.rainbow.val))),!P&&S.nametagOpacity>0)for(ee=0;ee<t.players.list.length;++ee)if((d=t.players.list[ee]).active&&(!t.controls||t.controls.spect.target!=d)&&!d.isYou&&d.objInstances){if(d.cnBSeen){var se;if((se=d.objInstances.position.clone()).y+=n.playerHeight+n.nameOffset-d.crouchVal*n.crouchDst,(d.hatIndex>=0||d.headIndex>=0)&&(se.y+=n.nameOffsetHat),se.y+=n.headScale*d.headMlt-n.headScale,!(oe=20*(Ce=Math.max(.3,1-a.getD3D(G.x,G.y,G.z,se.x,se.y,se.z)/600))>=1&&r.frustum.containPoint(se)))continue;if(u.save(1),u.globalAlpha=S.nametagOpacity,Ce*=S.nametagScale,se.project(r.camera),se.x=(se.x+1)/2,se.y=(se.y+1)/2,u.translate(T*se.x,R*(1-se.y)),u.scale(Ce,Ce),4==c.nametagStyle){let e=16,i=2;const n=Q==d.team||t.mode&&t.mode.fakeNames&&2!=Q;let s=_(n?S.healthColT:S.healthColE);if(S.kpdData&&S.kpdVision&&window.spectating&&t.controls.spect.target){let e=t.controls.spect.target;if(e&&d.id!==e.id&&(!e.team||e.team!=d.team))null==t.canSee(e,d.x,d.y,d.z)&&(s=S.kpdVisionCol)}if(u.save(1),u.fillStyle="rgba(0, 0, 0, 0.4)",n?(e/=1.5,i/=1.5,u.beginPath(),u.arc(0,0,e+2*i,0,2*Math.PI),u.fill(),u.closePath(),u.beginPath(),u.fillStyle=s,u.arc(0,0,e,0,2*Math.PI),u.fill(),u.closePath()):(u.rotate(45*Math.PI/180),u.fillRect(-e/2-i,-e/2-i,e+2*i,e+2*i),u.fillStyle=s,u.fillRect(-e/2,-e/2,e,e)),u.restore(-1),window.spectating||n){let e=c.hideNames?"Player "+d.sid:d.premiumT?d.alias:d.name;u.font="20px GameFont";let t=Math.min(425,u.measureText(e).width);u.translate(0,-21),u.fillStyle=S.kpdData&&S.kpdData.sus==d.id?"#eb5656":"white",u.fillStyle=S.kpdData&&S.kpdData.caller==d.id?"#135DD8":u.fillStyle,u.globalAlpha=S.nametagOpacity,u.fillText(e,-t/2,0,425)}}else{var ae=!t.mode.noHPbars;let e=130,i=1!=c.nametagStyle&&ae?16:6;if(ae&&(0==c.nametagStyle||3==c.nametagStyle)){if(u.fillStyle="rgba(0, 0, 0, 0.4)",u.fillRect(-e/2,-i,e,i),S.dynamicHP&&d.hpChase>d.health/d.maxHealth&&(u.fillStyle="#FFFFFF",u.fillRect(-e/2,-i,e*d.hpChase,i)),u.fillStyle=_(Q==d.team||t.mode&&t.mode.fakeNames&&2!=Q?S.healthColT:S.healthColE),S.kpdData&&S.kpdVision&&window.spectating&&t.controls.spect.target){let e=t.controls.spect.target;if(e&&d.id!==e.id&&(!e.team||e.team!=d.team))null==t.canSee(e,d.x,d.y,d.z)&&(u.fillStyle=S.kpdVisionCol)}u.fillRect(-e/2,-i,e*(d.health/d.maxHealth),i),c.healthNum&&(u.save(1),u.globalAlpha=S.nametagOpacity,u.fillStyle="white",u.font="9px GameFont",u.fillText(d.health.round(1),-e/2+2,-3),u.restore(-1))}if(c.nametagStyle<3){let n=c.hideNames?"Player "+d.sid:d.premiumT?d.alias:d.name,a=c.hideNames?null:d.clan?d.clan+"":null,r=t.isComp?0:d.level;var re=s.getClanCol(d.clan,null);let o=d.featured?"check_circle":null,l=d.premiumT?"beenhere":null,h=d.badgeIndex>-1,p=h?S.HELPER.loadImg(t.badges[d.badgeIndex].url):null,f="20px GameFont",m="26px Material Icons",g="16px GameFont";u.font=g;let v=r&&1!=c.nametagStyle?u.measureText(r).width:0;u.font=m;let y=o?u.measureText(o).width:0,b=l?u.measureText(l).width:0;u.font=f;let w=Math.min(425,u.measureText(n).width)+(a||o||l||h?5:0),M=a?Math.min(75,u.measureText(a).width):0;if(u.translate(0,-i-10),ae||(e=w),r&&1!=c.nametagStyle){let t=20,i=10,n=1.8*i;u.font=g,u.fillStyle="rgba(0, 0, 0, 0.65)",u.fillRect(-e/2-v-n,-(t+i/2)-3,v+n,t+i),u.fillStyle="white",u.fillText(r,-e/2-v-n/2,-3)}u.fillStyle=S.kpdData&&S.kpdData.sus==d.id?"#eb5656":"white",u.fillStyle=S.kpdData&&S.kpdData.caller==d.id?"#135DD8":u.fillStyle,u.font=f,u.globalAlpha=S.nametagOpacity,u.fillText(n,-e/2+(v?5:0),0,425),u.globalAlpha=(re?1:.4)*S.nametagOpacity,u.fillStyle=re||"white",a&&(u.fillText("[",-e/2+(v?5:0)+w,0),u.fillText(a,-e/2+(v?5:0)+w+u.measureText("[").width,0,75),u.fillText("]",-e/2+(v?5:0)+w+u.measureText("[").width+M,0),M+=u.measureText("[").width+u.measureText("]").width,M+=o||l||h?3:0);const k=x&&x[n]&&x[n].length,_=d.isBusy;k&&(u.save(1),u.globalAlpha=S.nametagOpacity,u.font="55px Material Icons",u.textAlign="center",u.textBaseline="middle",u.fillStyle="#FFF",u.fillText(O[E],_?-25:0,-60),u.restore(-1)),_&&(u.save(1),u.globalAlpha=S.nametagOpacity,u.fillStyle="#fbc02d",u.textAlign="center",u.textBaseline="middle",u.font="55px Material Icons",u.fillText(z[L],k?25:0,-60),u.restore(-1)),u.globalAlpha=S.nametagOpacity,u.font="26px Material Icons",u.fillStyle=s.verified.clan,l&&u.fillText(l,-e/2+(v?5:0)+w+M+1,1),u.globalAlpha=S.nametagOpacity,u.font=m,u.fillStyle=s.verified.player,o&&u.fillText(o,-e/2+(v?5:0)+w+M+1+b+1,0),u.globalAlpha=S.nametagOpacity,h&&p&&p.isReady&&u.drawImage(p,-e/2+(v?5:0)+w+M+1+b+1+y+3,-24,23,23)}}u.restore(-1)}if(d.isJuggernaut&&!d.cnBSeen&&!a.pointInBox3D(G.x,G.y,G.z,d)){B.set(d.x,d.y+d.height/2,d.z);var oe=(Ie=70*(Ce=Math.max(.3,1-a.getD3D(G.x,G.y,G.z,B.x,B.y,B.z)/600)))>=1&&r.frustum.containPoint(B),le=y[d.team&&t.mode&&t.mode.teams&&d.team==Q?0:1];if(oe&&le&&le.isReady){B.project(r.camera),B.x=(B.x+1)/2,B.y=(B.y+1)/2;var ce=B.x*T,de=(1-B.y)*R,he=o?o.aimVal:1,ue=a.inRange(ce,.45*T,.55*T)&&a.inRange(de,.4*R,.6*R)&&1!=he;u.globalAlpha=ue?S.adsObjectiveOpacity:S.objectiveOpacity;let e=Ie/le.width;u.save(1),u.translate(ce,de),u.scale(e,e),u.drawImage(le,-le.width/2,-le.height/2),u.restore(-1)}}}if(N&&function(e,t,i,n,s,r){for(var o=0;o<c.deathMarkers.length;++o)if((d=c.deathMarkers[o]).life){d.life-=t,d.life<=0&&(d.life=0);if(!a.pointInBox3D(r.x,r.y,r.z,d,10)){B.set(d.x,d.y+10,d.z);var l=50*Math.max(.3,1-a.getD3D(r.x,r.y,r.z,B.x,B.y,B.z)/600),h=l>=1&&e.frustum.containPoint(B),p=d.isYou?0:2,f=c.HELPER.loadImg(a.assetsUrl("/img/death_"+p+"_1.png"));if(h&&f.isReady){B.project(e.camera),B.x=(B.x+1)/2,B.y=(B.y+1)/2;var m=B.x*i,g=(1-B.y)*n,v=s?s.aimVal:1,y=a.inRange(m,.45*i,.55*i)&&a.inRange(g,.4*n,.6*n)&&1!=v;u.globalAlpha=y?c.deathMarkerAdsOpacity:c.deathMarkerOpacity;let t=l/f.width;u.save(1),u.translate(m,g),u.scale(t,t),u.drawImage(f,-f.width/2,-f.height/2),u.restore(-1)}}}}(r,p,T,R,o,G),N)for(ee=0;ee<t.airDrop.drops.length;++ee)if((d=t.airDrop.drops[ee]).canClaim&&!a.pointInBox3D(G.x,G.y,G.z,d,10)){B.set(d.x,d.y+13,d.z);oe=(Ie=70*(Ce=Math.max(.3,1-a.getD3D(G.x,G.y,G.z,B.x,B.y,B.z)/600)))>=1&&r.frustum.containPoint(B);var pe=S.HELPER.loadImg(a.assetsUrl("/img/streaks/package/"+(d.icon||0)+".png"));if(oe&&pe.isReady){B.project(r.camera),B.x=(B.x+1)/2,B.y=(B.y+1)/2;let e=Ie/pe.width;u.save(1),u.translate(B.x*T,(1-B.y)*R),u.scale(e,e),d.animate&&(u.filter="hue-rotate("+S.rainbow.val+"deg)"),u.drawImage(pe,-pe.width/2,-pe.height/2),u.restore(-1)}}if(N&&t.map.manager.pickups.length>0)for(ee=0;ee<t.map.manager.pickups.length;++ee)if((d=t.map.manager.pickups[ee]).active&&d.showIcon&&null!=d.pickup&&!a.pointInBox3D(G.x,G.y,G.z,d,0)){if(B.set(d.x,d.y+2,d.z),(ge=a.getD3D(G.x,G.y,G.z,B.x,B.y,B.z))>n.pickupImgRange)continue;oe=(Ie=120*(Ce=Math.max(.3,1-ge/600)))>=1&&r.frustum.containPoint(B);var fe=a.assetsUrl((t.weaponConfig[d.pickup].melee?"/textures/melee/icon_0":"/textures/weapons/"+t.weaponConfig[d.pickup].icon)+".png");t.weaponConfig[d.pickup].assetIcon&&t.weaponConfig[d.pickup].assetIcon.length&&(fe=a.userAssetsUrl("/"+t.weaponConfig[d.pickup].assetIcon.replace(/[^\d]/g,"")+"/texture.png"));pe=S.HELPER.loadImg(fe);if(oe&&pe.isReady){B.project(r.camera),B.x=(B.x+1)/2,B.y=(B.y+1)/2;let e=Ie/pe.width;u.save(1),u.translate(B.x*T,(1-B.y)*R),u.scale(e,e),d.animate&&(u.filter="hue-rotate("+S.rainbow.val+"deg)"),u.drawImage(pe,-pe.width/2,-pe.height/2),u.restore(-1)}}if(N)for(var me in t.map.manager.spawnables)if((d=t.map.manager.spawnables[me])&&d.active&&l[d.i]&&null!=l[d.i].icon&&!a.pointInBox3D(G.x,G.y,G.z,d,0)){var ge;if(B.set(d.x,d.y+2,d.z),(ge=a.getD3D(G.x,G.y,G.z,B.x,B.y,B.z))>n.pickupImgRange)continue;oe=(Ie=60*(Ce=Math.max(.3,1-ge/600)))>=1&&r.frustum.containPoint(B),pe=S.HELPER.loadImg(a.assetsUrl("/img/medals/medal_"+l[d.i].icon+".png"));if(oe&&pe&&pe.isReady){B.project(r.camera),B.x=(B.x+1)/2,B.y=(B.y+1)/2;let e=Ie/pe.width;u.save(1),u.translate(B.x*T,(1-B.y)*R),u.scale(e,e),u.drawImage(pe,-pe.width/2,-pe.height/2),u.restore(-1)}}if(t.mode&&(t.mode.flags||t.mode.oneflag)&&N&&t.map.manager.flags.length>0)for(ee=0;ee<t.map.manager.flags.length;++ee)if(d=t.map.manager.flags[ee],(!t.mode.oneflag||d.neutral)&&(t.mode.oneflag||!d.neutral)&&!a.pointInBox3D(G.x,G.y,G.z,d.img)){B.set(d.img.x,d.img.y+7,d.img.z);oe=(Ie=70*(Ce=Math.max(.3,1-a.getD3D(G.x,G.y,G.z,B.x,B.y,B.z)/600)))>=1&&r.frustum.containPoint(B);var ve=v[d.team==Q?1:0];if(oe&&ve&&ve.isReady){B.project(r.camera),B.x=(B.x+1)/2,B.y=(B.y+1)/2;ce=B.x*T,de=(1-B.y)*R,he=o?o.aimVal:1,ue=a.inRange(ce,.45*T,.55*T)&&a.inRange(de,.4*R,.6*R)&&1!=he;u.globalAlpha=ue?S.adsObjectiveOpacity:S.objectiveOpacity;let e=Ie/ve.width;u.save(1),u.translate(ce,de),u.scale(e,e),u.drawImage(ve,-ve.width/2,-ve.height/2),u.restore(-1)}}if(t.mode&&t.mode.objective&&N&&t.map.manager.objectives.length>0){var ye=t.activeObjective,be=t.map.manager.objectives.find((e=>e&&e.uid==ye+1)),we=be?be.uid:0,xe=!t.mode.deposit&&t.objtvTime<=15e3&&t.gameTimer-t.objtvTime>=5e3;for(ee=0;ee<t.map.manager.objectives.length;++ee)if((d=t.map.manager.objectives[ee])&&(d.uid!=ye||a.pointInBox3D(G.x,G.y,G.z,d)?xe&&d.uid==we&&!a.pointInBox3D(G.x,G.y,G.z,d)&&U(r,t,T,R,o,d,G,!0):U(r,t,T,R,o,d,G),d.uid==ye&&o&&o.onZone==d.uid&&d.onZone>1)){u.save(1),u.beginPath(),u.translate(a.calcPercent(T,S.captureProg.left),a.isNumber(S.captureProg.top)?a.calcPercent(R,S.captureProg.top):+S.captureProg.top.replace("px","")),S.captureProg.rot&&u.rotate(S.captureProg.rot),u.fillStyle=S.captureProg.color,u.font="20px GameFont";var Se="CONTESTED",Me=u.measureText(Se).width;u.fillStyle="#333",u.globalAlpha=.8,u.fillRect(0-(Me+50)/2,-57.5,Me+50,50),u.globalAlpha=1,u.textAlign="center",u.fillStyle=S.captureProg.color,u.fillText(Se,0,-20),u.closePath(),u.restore(-1)}}if(t.mode&&t.mode.site&&N&&t.map.manager.sites.length>0){for(ee=0;ee<t.map.manager.sites.length;++ee)if(d=t.map.manager.sites[ee],!a.pointInBox3D(G.x,G.y,G.z,d)){B.set(d.x,d.y+7,d.z);oe=(Ie=40*(Ce=Math.max(.3,1-a.getD3D(G.x,G.y,G.z,B.x,B.y,B.z)/600)))>=1&&r.frustum.containPoint(B);var ke=String.fromCharCode(65+ee);if(oe){B.project(r.camera),B.x=(B.x+1)/2,B.y=(B.y+1)/2;ce=B.x*T,de=(1-B.y)*R,he=o?o.aimVal:1,ue=a.inRange(ce,.45*T,.55*T)&&a.inRange(de,.4*R,.6*R)&&1!=he;u.globalAlpha=ue?S.adsObjectiveOpacity:S.objectiveOpacity;let e=Ie/50;u.save(1),u.translate(ce,de),u.scale(e,e),u.fillStyle="#FBC02D",u.font="50px GameFont",u.strokeStyle="#2e2e2e",u.lineWidth=4,u.strokeText(ke,-24,-25),u.fillText(ke,-25,-25),u.restore(-1)}}for(ee=0;ee<t.map.manager.pickups.length;++ee){if(d=t.map.manager.pickups[ee],2==Q&&17==d.pickup&&!a.pointInBox3D(G.x,G.y,G.z,d))if(B.set(d.x,d.y+4,d.z),(oe=(Ie=40*(Ce=Math.max(.3,1-a.getD3D(G.x,G.y,G.z,B.x,B.y,B.z)/600)))>=1&&r.frustum.containPoint(B))&&m&&m.isReady){B.project(r.camera),B.x=(B.x+1)/2,B.y=(B.y+1)/2;let e=Ie/m.width;u.save(1),u.translate(B.x*T,(1-B.y)*R),u.scale(e,e);var _e=50,Te=n.alphabet[t.activeObjective||0]||"";u.fillStyle="#fff",u.font=_e+"px GameFont",u.fillText(Te,-_e/2,-_e/2-40),u.drawImage(m,-m.width/2,-m.height/2),u.restore(-1)}}}if(t.mode&&t.mode.dom&&N&&t.map.manager.domzones.length>0)for(ee=0;ee<t.map.manager.domzones.length;++ee)if(d=t.map.manager.domzones[ee]){if(!a.pointInBox3D(G.x,G.y,G.z,d)){B.set(d.x,d.y+7,d.z);var Ce=Math.max(.3,1-a.getD3D(G.x,G.y,G.z,B.x,B.y,B.z)/600);B.set(d.x,d.y+7,d.z);oe=(Ie=70*Ce)>=1&&r.frustum.containPoint(B),ke=String.fromCharCode(65+(d.uid||0));var Ie,Ae=null==d.capturedBy?"#dbdbdb":d.capturedBy==Q?"#5699EB":"#eb5656",Re=d.lastTeamOn==Q?"#5699EB":"#eb5656";if(oe){B.project(r.camera),B.x=(B.x+1)/2,B.y=(B.y+1)/2;ce=B.x*T,de=(1-B.y)*R,he=o?o.aimVal:1,ue=a.inRange(ce,.45*T,.55*T)&&a.inRange(de,.4*R,.6*R)&&1!=he;u.globalAlpha=ue?S.adsObjectiveOpacity:S.objectiveOpacity;let e=Ie/128;u.save(1),u.translate(ce,de),u.scale(e,e);var Pe=1.25*(_e=50);u.beginPath(),u.arc(-_e/10,-_e-_e/10,Pe,0,2*Math.PI,!1),u.fillStyle=Ae,u.fill(),u.closePath(),u.fillStyle="#fff",u.font=_e+"px GameFont",u.strokeStyle="#2e2e2e",u.lineWidth=4,u.strokeText(ke,-_e/2+1,-_e/2),u.fillText(ke,-_e/2,-_e/2);Se=d.capturedBy==Q?d.capturedBy==Q&&d.captureT>0?"LOSING":"DEFEND":d.capturedBy!=Q&&d.captureT>0&&d.lastTeamOn==Q?"SECURING":"SECURE";u.font=_e/2+"px GameFont",u.fillStyle="#333",u.globalAlpha=.8*(ue?S.adsObjectiveOpacity:S.objectiveOpacity);Me=u.measureText(Se).width;if(u.fillRect(0-(Me+50)/2,-(170+_e/2),Me+50,_e/2+30),u.fillStyle="#fff",u.strokeStyle="#2e2e2e",u.lineWidth=4,u.textAlign="center",u.strokeText(Se,1,-150),u.fillText(Se,0,-150),d.captureT>0){u.globalAlpha=ue?S.adsObjectiveOpacity:S.objectiveOpacity;let e=d.captureT/t.mode.captureTime;u.lineWidth=10,u.strokeStyle=Re,u.beginPath(),u.translate(-_e/10,-_e-_e/10),u.rotate(-Math.PI/2),u.translate(- -_e/10,-(-_e-_e/10)),u.arc(-_e/10,-_e-_e/10,Pe+5,2*Math.PI*e,0,!0),u.stroke(),u.closePath()}u.restore(-1)}}if(d.captureT>0&&o&&o.onZone==d.uid){d.needsUpdate=!1;let e=d.lastTeamOn==Q&&d.capturedBy!=Q,i=d.captureT/t.mode.captureTime,s=S.captureProg.width*S.captureProg.scale,r=S.captureProg.height*S.captureProg.scale;u.save(1),u.beginPath(),u.translate(a.calcPercent(T,S.captureProg.left),a.isNumber(S.captureProg.top)?a.calcPercent(R,S.captureProg.top):+S.captureProg.top.replace("px","")),S.captureProg.rot&&u.rotate(S.captureProg.rot),u.fillStyle=S.captureProg.color,u.font="20px GameFont";Se=(e?"SECURING":"CONTESTING")+" "+(Te=n.alphabet[d.uid||0]||""),Me=u.measureText(Se).width;u.fillStyle="#333",u.globalAlpha=.8,u.fillRect(0-(Me+50)/2,-57.5,Me+50,50),u.globalAlpha=1,u.textAlign="center",u.fillStyle=S.captureProg.color,u.fillText(Se,0,-20),u.globalAlpha=S.captureProg.opacity,u.fillStyle="rgba(0, 0, 0, 0.4)",S.captureProg.shadow&&(u.strokeStyle="#000000"),u.roundRect(0-s/2,0,s,r,4,!0,S.captureProg.shadow),u.strokeStyle=null,u.fillStyle=e?S.captureProg.color:"#eb5656",u.roundRect(0-s/2,0,s*i,r,2,!0,S.captureProg.shadow),u.closePath(),u.restore(-1)}}if(o&&o.active&&o.isKranked&&o.krankedTimer>0){if(o.krankedTimer-=p,o.krankedTick-=p,o.krankedTick<=0){var Ee=1e3;o.krankedTimer<=2e3?Ee=250:o.krankedTimer<=5e3&&(Ee=500),o.krankedTick=Ee,SOUND.play("beep_0",.1,!1,a.randFloat(.95,1))}if(N&&o.krankedTimer>0){_e=35;u.save(1),u.beginPath(),u.translate(a.calcPercent(T,50),a.calcPercent(R,80)),u.font=_e+"px GameFont";var De=a.getChargedTime(o.krankedTimer),Oe=u.measureText(De).width,Le="Kranked! ",je=(Me=u.measureText(Le).width)+Oe;u.fillStyle="rgba(0, 0, 0, 0.6)",u.roundRect(-je/2-40,-80,je+80,80,4,!0),u.fillStyle="#fff",u.strokeStyle="#2e2e2e",u.lineWidth=4,u.strokeText(Le,-je/2+1,-_e/2),u.fillText(Le,-je/2,-_e/2),u.fillStyle=o.krankedTimer<5e3?"#eb5656":o.krankedTimer<8500?"#FBC02D":"#76ff03",u.strokeStyle="#2e2e2e",u.lineWidth=4,u.strokeText(De,-je/2+Me+1,-_e/2),u.fillText(De,-je/2+Me,-_e/2),u.closePath(),u.restore(-1)}}if(N&&function(e,t,i,n,s,r){if(c.speedDisplay.display){if(c.speedDisplay.update-=n,c.speedDisplay.update<=0){var o=0;c.speedDisplay.update=100,r&&r.active&&!s.moveLock&&(o=a.getD3D(0,0,0,r.velocity.x,0,r.velocity.z));var l=Math.round(1e3*o);l>I&&(I=l),C=l}e.save(1),e.globalAlpha=c.speedDisplay.opacity,e.translate(a.calcPercent(t,c.speedDisplay.left),a.isNumber(c.speedDisplay.top)?a.calcPercent(i,c.speedDisplay.top):+c.speedDisplay.top.replace("px","")),e.font=c.speedDisplay.fontSize+"px GameFont",e.textBaseline="middle";let d=e.measureText(C).width,h=e.measureText(I).width,u=d+h+5;e.fillStyle=_(c.speedDisplay.color),e.fillText(C,0-u/2,0),e.fillStyle=_(c.speedDisplay.colorMax),e.fillText(I,0+u/2-h,0),e.restore(-1)}}(u,T,R,p,t,o),t.controls.camType.isNormal||o&&o.config.shtToCam){if(S.showFlash&&f&&f.isReady){let e=1.6*T;u.drawImage(f,T*S.flashX-e/2,R*S.flashY-e/2,e,e)}if(N){var ze="inline-grid"!==centerLeaderDisplay.style.display&&!S.disableCrosshair;if(ze&&o&&o.active&&1!=o.config.shtDrg){var Be=1e3,Ne=o.xDirChase||0,Fe=o.yDirChase||0;if(B.set(o.x+Be*Math.sin(Ne+Math.PI)*Math.cos(Fe),o.y+o.height+Be*Math.sin(Fe),o.z+Be*Math.cos(Ne+Math.PI)*Math.cos(Fe)),r.frustum.containPoint(B)){B.project(r.camera),B.x=(B.x+1)/2,B.y=(B.y+1)/2;var He=Math.round(T*B.x),Ue=Math.round(R*(1-B.y));if(u.save(1),u.translate(He,Ue),S.mapCrossChase)(pe=S.HELPER.loadImg(a.userAssetsUrl(S.mapCrossChase+"/texture.png"))).isReady&&(u.beginPath(),u.drawImage(pe,-pe.width/2,-pe.height/2));else u.strokeStyle="#000000",u.lineWidth=5,u.beginPath(),u.arc(0,0,20,0,2*Math.PI),u.stroke(),u.strokeStyle="#ffffff",u.lineWidth=3,u.beginPath(),u.arc(0,0,20,0,2*Math.PI),u.stroke();u.restore(-1)}}if(S.fakeCross)ze&&1!=aimRecticle.style.opacity&&1!=r.aimRecticle.opacity&&(u.save(1),u.translate(T/2,R/2),K(u,2,4,1,1,90),K(u,2,4,1,1,-90),K(u,2,4,1,1,0),K(u,2,4,1,1,180),u.restore(-1));else if(!window.spectating&&ze){let e=T/2,t=R/2;if(o&&0==o.aimVal&&o.canThrow&&o.weapon.canThrow){let i=S.crosshairThickM,n=S.crosshairLenM,s=1;if(S.crosshairTypeM>0&&S.crosshairAlwaysM&&(s=1),S.crosshairTypeM>0&&S.crosshairUseOpacityCustomM&&(s=S.crosshairOpacityCustomM),s){if(u.save(1),u.globalAlpha=s,1==S.crosshairTypeM)0==S.crosshairStyleM?(V(u,e-.5*i,t-n,i,2*n,1,!1,S.crosshairShadowThicknessM),V(u,e-n,t-i/2,2*n,i,1,!1,S.crosshairShadowThicknessM),V(u,e-.5*i,t-n,i,2*n,1,!1,!1)):S.crosshairStyleM>0&&V(u,e-2*n/2,t-2*n/2,2*n,2*n,i/2,1==S.crosshairStyleM||2==S.crosshairStyleM,S.crosshairShadowThicknessM,2==S.crosshairStyleM||4==S.crosshairStyleM);else if(2==S.crosshairTypeM){u.translate(0,0),u.beginPath();var Ve=S.crosshairImageWM||S.crosshairImageM.width,Ge=S.crosshairImageHM||S.crosshairImageM.height,We=S.crosshairImageM?S.crosshairImageM.lastFrame&&S.crosshairImageM.lastFrame.image?S.crosshairImageM.lastFrame.image:S.crosshairImageM.image?S.crosshairImageM.image:S.crosshairImageM:null;S.crosshairImageM&&S.crosshairImageM.isReady&&We&&u.drawImage(We,e-Ve/2,t-Ge/2,Ve,Ge)}else 3==S.crosshairTypeM&&(u.translate(e,t),X(u,i,null,null,S.crosshairShadowThicknessM,null,!0),X(u,i,.8*n,S.crosshairGapM,S.crosshairShadowThicknessM,90),X(u,i,.8*n,S.crosshairGapM,S.crosshairShadowThicknessM,-90),X(u,i,1.5*n,S.crosshairGapM,S.crosshairShadowThicknessM,0),X(u,i,1.5*n,S.crosshairGapM+1,S.crosshairShadowThicknessM,180));u.restore(-1)}}else if(S.crosshairType>0){let i=S.crosshairScale,n=4,s=21,r=S.crosshairThick,l=S.crosshairLen,c=S.crosshairOpacity;if(S.crosshairType>1&&S.crosshairAlways&&(c=1),S.crosshairType>1&&S.crosshairUseOpacityCustom&&(c=S.crosshairOpacityCustom),c){if(u.save(1),u.globalAlpha=c,S.mapCross){(pe=S.HELPER.loadImg(a.userAssetsUrl(S.mapCross+"/texture.png"))).isReady&&(u.translate(0,0),u.beginPath(),u.drawImage(pe,e-pe.width/2,t-pe.height/2))}else{if(4==S.crosshairType){u.translate(0,0),u.beginPath();Ve=S.crosshairImageW||S.crosshairImage.width,Ge=S.crosshairImageH||S.crosshairImage.height,We=S.crosshairImage?S.crosshairImage.lastFrame&&S.crosshairImage.lastFrame.image?S.crosshairImage.lastFrame.image:S.crosshairImage.image?S.crosshairImage.image:S.crosshairImage:null;S.crosshairImage&&S.crosshairImage.isReady&&We&&u.drawImage(We,e-Ve/2,t-Ge/2,Ve,Ge)}else 2==S.crosshairType||3==S.crosshairType?0==S.crosshairStyle?(V(u,e-.5*r,t-l,r,2*l,1,!1,S.crosshairShadowThickness),V(u,e-l,t-r/2,2*l,r,1,!1,S.crosshairShadowThickness),V(u,e-.5*r,t-l,r,2*l,1,!1,!1)):S.crosshairStyle>0&&V(u,e-2*l/2,t-2*l/2,2*l,2*l,r/2,1==S.crosshairStyle||2==S.crosshairStyle,S.crosshairShadowThickness,2==S.crosshairStyle||4==S.crosshairStyle):5==S.crosshairType&&(u.translate(e,t),S.crosshairDot&&K(u,r,null,null,null,null,!0),K(u,r,l,S.crosshairGap,S.crosshairShadowThickness,90),K(u,r,l,S.crosshairGap,S.crosshairShadowThickness,-90),K(u,r,l,S.crosshairGap,S.crosshairShadowThickness,0),K(u,r,l,S.crosshairGap,S.crosshairShadowThickness,180));if(1==S.crosshairType||3==S.crosshairType){u.globalAlpha=S.crosshairOpacity,u.translate(e,t);var qe=i/2-n/2;S.crosshairDot&&K(u,n+2,null,null,S.crosshairShadowThickness,null,!0,!0),K(u,n+2,s+2,qe,S.crosshairShadowThickness,90,!1,!0),K(u,n+2,s+2,qe,S.crosshairShadowThickness,-90,!1,!0),K(u,n+2,s+2,qe,S.crosshairShadowThickness,0,!1,!0),K(u,n+2,s+2,qe,S.crosshairShadowThickness,180,!1,!0)}}u.restore(-1)}else o&&o.weapon.build&&!o.selectBuild&&(u.save(1),u.translate(e,t),K(u,3,null,null,S.crosshairShadowThickness,null,!0),K(u,3,.5*l,12,S.crosshairShadowThickness,90),K(u,3,.5*l,12,S.crosshairShadowThickness,-90),K(u,3,.5*l,12,S.crosshairShadowThickness,0),K(u,3,.5*l,12,S.crosshairShadowThickness,180),u.restore(-1))}}}}if(o&&o.selectBuild&&!$){u.save(1),u.translate(T/2,R/2);var Ye=R/2*.4;u.globalAlpha=.7,u.beginPath(),u.arc(0,0,Ye,0,2*Math.PI,!1),u.fillStyle="#171717",u.fill();var Ke=1.33*Ye,Xe=Ye/1.9;u.globalAlpha=1,u.lineWidth=Xe,u.strokeStyle="#cfcfcf",u.beginPath(),u.arc(0,0,Ke,0,2*Math.PI,!1),u.stroke();var Ze=t.BUILD_OBJS[o.buildIndex],Je=(mt=2*Math.PI/t.BUILD_OBJS.length)*o.buildIndex;u.strokeStyle="#55acee",u.beginPath(),u.arc(0,0,Ke,Je,Je+mt,!1),u.stroke();var Qe=50,$e=40,et=Ze.name;u.fillStyle="#dbdbdb",u.font=$e+"px GameFont",u.fillText(et,-u.measureText(et).width/2,$e/2+Qe),$e=25,et=Ze.cost+" Score",u.fillStyle=o.score>=Ze.cost?"#a3a3a3":"#d63e3e",u.font=$e+"px GameFont",u.fillText(et,-u.measureText(et).width/2,$e/2+Qe+50);pe=S.HELPER.loadImg(a.assetsUrl("/img/build/build_"+Ze.icon+".png"));u.drawImage(pe,-50,-50-1.5*Qe,100,100);var tt=-mt/2;for(ee=0;ee<t.BUILD_OBJS.length;++ee)tt+=mt,(pe=S.HELPER.loadImg(a.assetsUrl("/img/build/build_"+t.BUILD_OBJS[ee].icon+".png"))).isReady&&u.drawImage(pe,Ke*Math.cos(tt)-40,Ke*Math.sin(tt)-40,80,80);u.restore(-1)}if(N){S.HELPER.updateCustomGUI(u,T,R,o,t,n,S.customGUIs,!0,i.mouseX/e,i.mouseY/e);for(ee=0;ee<S.divsToUpd.length;ee++){var it=S.divsToUpd[ee],nt=it.curr;0==it.data.vt?nt=it.data.v||"Text":1==it.data.vt?o&&(nt=n.playerVals.indexOf(it.data.v)>-1?o[it.data.v]:o.custVals[it.data.v]||0):2==it.data.vt&&t&&null!=t.globalVals[it.data.v+""]&&(nt=t.globalVals[it.data.v+""]),it.curr!=nt&&(it.curr=nt,it.elm.innerHTML=it.curr,it.elm.setAttribute("data-text",it.curr))}}if(!S.bloodCustom&&S.bloodOpacity>0&&S.bloodImage&&S.bloodImage.isReady&&!P&&(u.save(1),u.globalAlpha=S.bloodOpacity,u.drawImage(S.bloodImage,0,0,T,R),u.restore(-1)),$&&(u.save(1),S.scopeBorders.display&&S.scopeBorders.opacity>0&&(u.beginPath(),u.globalAlpha=S.scopeBorders.opacity,u.fillStyle=S.scopeBorders.color,u.rect(0,0,T,R/2-r.aimRecticle.height/2+2),u.rect(0,R/2+r.aimRecticle.height/2-2,T,R-R/2+r.aimRecticle.height/2+2),u.rect(0,0,T/2-r.aimRecticle.width/2+2,R),u.rect(T/2+r.aimRecticle.width/2-2,0,T-(T/2+r.aimRecticle.width/2)+2,R),u.fill()),u.globalAlpha=r.aimRecticle.opacity*r.aimRecticle.opacMlt,u.drawImage(r.aimRecticle.image,T/2-r.aimRecticle.width/2,R/2-r.aimRecticle.height/2,r.aimRecticle.width,r.aimRecticle.height),u.restore(-1)),!r.aimDot.custom&&r.aimDot.display&&r.aimDot.opacity>0&&r.aimDot.image&&r.aimDot.image.isReady&&(u.save(1),u.globalAlpha=1,u.drawImage(r.aimDot.image,T/2-r.aimDot.width/2,R/2-r.aimDot.height/2,r.aimDot.width,r.aimDot.height),u.restore(-1)),q=u,Y=T,Z=R,J=p,M.active&&(M.opacity>0&&(M.spacing+=c.hitSet.inc*J,M.inc-=c.hitSet.speed*J,M.opacity-=c.hitSet.fadeOut*J,M.opacity=Math.max(M.opacity,0),M.opacity<=0)?M.active=!1:(q.save(1),q.translate(Y/2,Z/2),q.rotate(Math.PI/4),q.globalAlpha=M.opacity,k(q,-c.hitSet.thickness/2,-M.length/2-M.spacing,c.hitSet.thickness,M.length,"Y",M.colors[0]),k(q,-c.hitSet.thickness/2,-M.length/2+M.spacing,c.hitSet.thickness,M.length,"Y",M.colors[1]),k(q,-M.length/2-M.spacing,-c.hitSet.thickness/2,M.length,c.hitSet.thickness,"X",M.colors[0]),k(q,-M.length/2+M.spacing,-c.hitSet.thickness/2,M.length,c.hitSet.thickness,"X",M.colors[1]),q.restore(-1))),N){if(S.interactProg.display){let e=S.interactProg.prog,t=S.interactProg.width*S.interactProg.scale,i=S.interactProg.height*S.interactProg.scale;u.save(1),u.beginPath(),u.translate(a.calcPercent(T,S.interactProg.left),a.isNumber(S.interactProg.top)?a.calcPercent(R,S.interactProg.top):+S.interactProg.top.replace("px","")),S.interactProg.rot&&u.rotate(S.interactProg.rot),u.globalAlpha=S.interactProg.opacity,u.fillStyle="rgba(0, 0, 0, 0.4)",S.interactProg.shadow&&(u.strokeStyle="#000000"),u.roundRect(0-t/2,0,t,i,4,!0,S.interactProg.shadow),u.strokeStyle=null,u.fillStyle=S.interactProg.color,u.roundRect(0-t/2,0,t*e,i,2,!0,S.interactProg.shadow),u.closePath(),u.restore(-1)}if(S.interactMProg.display){let e=S.interactMProg.prog,t=S.interactMProg.width*S.interactMProg.scale,i=S.interactMProg.height*S.interactMProg.scale;u.save(1),u.beginPath();var st=0;if(e>1){var at=(e-1)/(1-n.overCharge)*300;st=8*Math.sin((e-1)*at),i*=1+2*(e-1)}u.translate(a.calcPercent(T,S.interactMProg.left)+st,a.isNumber(S.interactMProg.top)?a.calcPercent(R,S.interactMProg.top):+S.interactMProg.top.replace("px","")),S.interactMProg.rot&&u.rotate(S.interactMProg.rot),u.globalAlpha=S.interactMProg.opacity;var rt=o&&o.overCharged;if(u.fillStyle="rgba(0, 0, 0, 0.4)",S.interactMProg.shadow&&(u.strokeStyle="#000000"),u.roundRect(0-t/2,0,t,i,4,!0,S.interactMProg.shadow),rt||(u.strokeStyle=null,u.fillStyle=S.interactMProg.color,e>1&&(u.fillStyle=S.interactMProg.oColor),u.roundRect(0-t/2,0,t*Math.min(1,e),i,2,!0,S.interactMProg.shadow)),u.closePath(),rt){u.translate(0,i/2);for(var ot=0;ot<2;++ot){u.strokeStyle=ot?S.interactMProg.oColor:"#000",u.lineWidth=ot?10:14;var lt=ot?28:30;u.beginPath(),u.moveTo(-lt,-lt),u.lineTo(lt,lt),u.stroke(),u.fill(),u.moveTo(lt,-lt),u.lineTo(-lt,lt),u.stroke(),u.fill()}}u.restore(-1)}}for(ee=S.divs.length-1;ee>=0;--ee){if((d=S.divs[ee]).life>=0&&d.display&&!d.disabled&&N){if(u.save(1),u.globalAlpha=d.opacity,d.text)u.translate(a.calcPercent(T,d.left),a.isNumber(d.top)?a.calcPercent(R,d.top):+d.top.replace("px","")),d.rect&&(u.fillStyle=d.rect.color,u.fillRect(0-d.width/2,d.rect.yOff||0,d.width,d.height)),u.font=d.fontSize+"px GameFont",u.textBaseline="middle",d.textAlign&&(u.textAlign=d.textAlign),d.shadow&&(u.strokeStyle="#363636",u.lineWidth=d.shadow,u.strokeText(d.text,1,0+(d.lineHeight?d.lineHeight/2:0))),u.fillStyle=d.color,u.fillText(d.text,0,0+(d.lineHeight?d.lineHeight/2:0)),d.text2&&(u.font="34px GameFont",u.textBaseline="middle",d.textAlign&&(u.textAlign=d.textAlign),u.fillStyle=S.scoreText.color,u.fillText(d.text2,0,d.height-26));else if(d.image&&d.isReady&&!d.custom)u.drawImage(d.image,T/2-d.width/2,R/2-d.height/2,d.width,d.height);else if(d.medal){var ct=d.zoom*d.scale;if(u.translate(a.calcPercent(T,d.left),a.isNumber(d.top)?a.calcPercent(R,d.top):+d.top.replace("px","")),S.medalPrefab.filter&&(u.filter=S.medalPrefab.filter),w&&w.isReady&&u.drawImage(w,-(d.size+10)*ct/2-d.border,0-(d.size+10)*ct/2-d.border,(d.size+10)*ct+2*d.border,(d.size+10)*ct+2*d.border),d.icon&&d.icon.isReady&&u.drawImage(d.icon,-.325*d.size*ct+(d.offset.x||0),0-.325*d.size*ct+(d.offset.y||0),.65*d.size*ct,.65*d.size*ct),u.font=20*ct+"px GameFont",u.strokeStyle="black",u.lineWidth=3,u.strokeText(d.name,1-u.measureText(d.name).width/2,0+d.size*ct/2+d.marginName*d.scale),u.fillStyle="white",u.fillText(d.name,-u.measureText(d.name).width/2,0+d.size*ct/2+d.marginName*d.scale),d.score&&(u.font=18*ct+"px GameFont",u.strokeStyle="black",u.lineWidth=3,u.strokeText(d.score,1-u.measureText(d.score).width/2,0+d.size*ct/2+d.marginScore*d.scale),u.fillStyle=S.scoreText.color,u.fillText(d.score,-u.measureText(d.score).width/2,0+d.size*ct/2+d.marginScore*d.scale)),d.count>1){var dt="x"+d.count;u.font=25*ct+"px GameFont",u.strokeStyle="black",u.lineWidth=3,u.strokeText(dt,1-u.measureText(dt).width/2+d.marginCount*d.scale,0+d.size*ct/2),u.fillStyle=S.scoreText.color,u.fillText(dt,-u.measureText(dt).width/2+d.marginCount*d.scale,0+d.size*ct/2)}d.zoom-=d.zoomInc*(p/16),d.zoom=Math.max(1,d.zoom)}u.restore(-1)}if(d.delay>0)d.delay-=p,d.delay<=0&&(d.display=!0,d.sound&&d.soundN&&SOUND.play(d.soundN,.08));else{if(d.scale>d.minScale&&(d.scale-=d.scaleSpeed*p,d.scale<=d.minScale&&(d.scale=d.minScale),d.fontSize=d.scale),d.scaleSpd&&(d.startS+=d.scaleSpd*p,d.width=d.startS,d.height=d.startS),d.life-=p,d.life<=0){d.display=!1;var ht=d.callback;S.divs.splice(ee,1),ht&&ht()}d.fade&&d.life<=d.fade&&(d.opacity=d.life/d.fade)}}if(S.sprayWheelUpdate(p),N&&S.sprayWheelOpened()&&S.sprayList.length&&!$){u.save(1),u.translate(T/2,R/2);Ye=R/2*.4;u.globalAlpha=.7,u.beginPath(),u.arc(0,0,Ye,0,2*Math.PI,!1),u.fillStyle="#171717",u.fill();Ke=1.33*Ye,Xe=Ye/1.9;u.globalAlpha=1,u.lineWidth=Xe,u.strokeStyle="#cfcfcf",u.beginPath(),u.arc(0,0,Ke,0,2*Math.PI,!1),u.stroke();var ut=S.sprayWheelIndex,pt=S.sprayList[ut];Je=(mt=2*Math.PI/S.sprayList.length)*ut;u.strokeStyle="#55acee",u.beginPath(),u.arc(0,0,Ke,Je,Je+mt,!1),u.stroke();Qe=50,$e=40,et=pt.name;u.fillStyle=null==pt.rarity?"#dbdbdb":t.store.rarities[pt.rarity].color,u.font=$e+"px GameFont",u.fillText(et,-u.measureText(et).width/2,$e/2+Qe),$e=25,et="Spray",u.fillStyle="#a3a3a3",u.font=$e+"px GameFont",u.fillText(et,-u.measureText(et).width/2,$e/2+Qe+50);pe=S.HELPER.loadImg(pt.thumbnail);pt.frames&&pe?(null==pt.cur&&(pt.cur=0),null==pt.dur&&(pt.dur=pt.frameT),pt.dur-=p,pt.dur<=0&&(pt.dur=pt.frameT,pt.cur++,pt.cur>=pt.frames&&(pt.cur=0)),u.drawImage(pe,pe.width/pt.frames*pt.cur,0,pe.width/pt.frames,pe.height,-50,-50-1.5*Qe,100,100)):pe&&u.drawImage(pe,-50,-50-1.5*Qe,100,100);var ft=S.HELPER.loadImg(a.assetsUrl("/img/scroll_2.png"));u.drawImage(ft,Ke+Xe/4,-100,200,200);for(tt=-mt/2,ee=0;ee<S.sprayList.length;++ee)tt+=mt,(pe=S.HELPER.loadImg(S.sprayList[ee].thumbnail)).isReady&&(S.sprayList[ee].frames?(null==S.sprayList[ee].cur&&(S.sprayList[ee].cur=0),null==S.sprayList[ee].dur&&(S.sprayList[ee].dur=S.sprayList[ee].frameT),ee!=ut&&(S.sprayList[ee].dur-=p,S.sprayList[ee].dur<=0&&(S.sprayList[ee].dur=S.sprayList[ee].frameT,S.sprayList[ee].cur++,S.sprayList[ee].cur>=S.sprayList[ee].frames&&(S.sprayList[ee].cur=0))),u.drawImage(pe,pe.width/S.sprayList[ee].frames*S.sprayList[ee].cur,0,pe.width/S.sprayList[ee].frames,pe.height,Ke*Math.cos(tt)-40,Ke*Math.sin(tt)-40,80,80)):u.drawImage(pe,Ke*Math.cos(tt)-40,Ke*Math.sin(tt)-40,80,80));u.restore(-1)}if(S.propWheelUpdate(p),N&&S.propWheelOpened()&&S.propList.length&&o&&!$){u.save(1),u.translate(T/2,R/2);Ye=R/2*.4;u.globalAlpha=.7,u.beginPath(),u.arc(0,0,Ye,0,2*Math.PI,!1),u.fillStyle="#171717",u.fill();Ke=1.33*Ye,Xe=Ye/1.9;u.globalAlpha=1,u.lineWidth=Xe,u.strokeStyle="#cfcfcf",u.beginPath(),u.arc(0,0,Ke,0,2*Math.PI,!1),u.stroke();var mt,gt=S.propWheelIndex;Ze=S.propList[gt],Je=(mt=2*Math.PI/S.propList.length)*gt;u.strokeStyle="#55acee",u.beginPath(),u.arc(0,0,Ke,Je,Je+mt,!1),u.stroke();Qe=50,$e=40,et=Ze.name;u.fillStyle="#dbdbdb",u.font=$e+"px GameFont",u.fillText(et,-u.measureText(et).width/2,$e/2+Qe),$e=25,et=t.mode.propSwitches-(o.propSwitches||0)+" switches left",u.fillStyle="#a3a3a3",u.font=$e+"px GameFont",u.fillText(et,-u.measureText(et).width/2,$e/2+Qe+50),(pe=S.HELPER.loadImg(Ze.thumbnail)).isReady&&u.drawImage(pe,-64,-64-1.5*Qe,128,128);ft=S.HELPER.loadImg(a.assetsUrl("/img/scroll_2.png"));u.drawImage(ft,Ke+Xe/4,-100,200,200);for(tt=-mt/2,ee=0;ee<S.propList.length;++ee)tt+=mt,(pe=S.HELPER.loadImg(S.propList[ee].thumbnail)).isReady&&u.drawImage(pe,Ke*Math.cos(tt)-50,Ke*Math.sin(tt)-50,100,100);u.restore(-1)}var vt=window.spectating&&"none"!=spectateUI.style.display;if(S.miniMap.enabled&&!P&&N&&S.miniMap.update(t,i,Q,p,vt),d=c.vicTitle,"none"!=endUI.style.display&&d.show){let e=g/16;u.save(1),u.globalAlpha=d.opacity.val,d.opacity.val+=d.opacity.increment*e,u.fillStyle="rgba(0, 0, 0, 0.33)",u.fillRect(0,0,T,R);let t=b[d.type];if(t&&t.isReady){let e=t.height*d.scale.val,i=t.width*d.scale.val;u.drawImage(t,(T-i)/2,(R-e)/2,i,e)}d.scale.val-=d.scale.decrement*e,d.scale.val=Math.max(1,d.scale.val),d.scale.decrement+=d.scale.acc*e,u.restore(-1)}else 0!=d.opacity.val&&(d.opacity.val=0),2!=d.scale.val&&(d.scale.val=2.5),.01!=d.scale.decrement&&(d.scale.decrement=.01);S.fakeCross=!1,u.restore(-1)};var G=19,W=19,q=1,Y=3;function K(e,t,i,n,s,a,r,o,l,d){e.save(1),e.fillStyle=l||c.crosshairColor,s&&!r&&(e.strokeStyle=d||c.crosshairShadow),e.lineWidth=1,o||(n=n*q+Y,t=t/10*G,i=-1*(i/10*W)),e.beginPath(),r||e.rotate((a||0)*Math.PI/180),e.rect(-t/2,-(t/2+(r?0:n)),t,r?t:i),e.fill(),s&&!r&&(e.strokeStyle=d||c.crosshairShadow,e.lineWidth=s,e.stroke()),e.restore(-1)}function X(e,t,i,n,s,a,r){K(e,t,i,n,s,a,r,!1,c.crosshairColorM,c.crosshairShadowM)}CanvasRenderingContext2D.prototype.roundRect=function(e,t,i,n,s,a,r){if(void 0===r&&(r=!0),void 0===s&&(s=5),"number"==typeof s)s={tl:s,tr:s,br:s,bl:s};else{var o={tl:0,tr:0,br:0,bl:0};for(var l in o)s[l]=s[l]||o[l]}this.beginPath(),this.moveTo(e+s.tl,t),this.lineTo(e+i-s.tr,t),this.quadraticCurveTo(e+i,t,e+i,t+s.tr),this.lineTo(e+i,t+n-s.br),this.quadraticCurveTo(e+i,t+n,e+i-s.br,t+n),this.lineTo(e+s.bl,t+n),this.quadraticCurveTo(e,t+n,e,t+n-s.bl),this.lineTo(e,t+s.tl),this.quadraticCurveTo(e,t,e+s.tl,t),this.closePath(),a&&this.fill(),r&&this.stroke()},e.exports=c},function(e,t,i){const n=i(4);var s=i(1);const a=(e,t,i,n)=>{e&&(e.soundData=SOUND.play3DL("egg_0",t,i,n,.8))},r=(e,t,i,n)=>{!t&&n&&n.soundData&&(n.soundData[0].isPlaying=!1,n.soundData[0].stop(n.soundData[1]),n.soundData=null)};e.exports=[{name:"Tag",model:"tag_0",scale:6,padMlt:.8,yOff:6,timer:8e3,emissive:function(e,t){return e&&t==e.team?8729652:4360861},onPickup:function(e,t,i,s){i.team==s.team?(i.denies++,e.incMedal("Denied",i),i.send("am",[29,10,0,1]),e.players.score(i,10,2),e.challenges.update(e,"dym",1,null,i)):(e.players.teamScore(i,1),i.confirms++,e.incMedal("Confirmed",i),i.send("am",[30,25,0,1]),e.players.score(i,25,2),e.playSound&&e.playSound(n.networkSounds.indexOf("collect_1"),1.2,i.sid,i.x,i.y,i.z,!0),e.challenges.update(e,"cnf",1,null,i))}},{name:"Gift",model:"gift_0",scale:3,yOff:6,timer:2e4,texRange:3,rarities:[{chance:77,items:[4379,4389,4409]},{chance:20,items:[4407,4391,4387]},{chance:2.5,items:[4399,4402,4403,4408,4397,4394,4390]},{chance:.5,items:[4412,4395,4388]}],stopInteract:function(e,t,i){return!(t&&i&&!i.isBot&&i.account)},onPickup:function(e,t,i){e.challenges.update(e,"gifts",1,null,i);for(var a=s.randFloat(0,100).round(2),r=0,o=0,l=0;l<this.rarities.length;++l)if(a<=(o+=this.rarities[l].chance)){r=l;break}var c=s.getRandom(this.rarities[r].items);c&&e.giveSkin(i,c,"christmas"),e.playSound&&e.playSound(n.networkSounds.indexOf("gift_0"),1.2,i.sid,i.x,i.y,i.z,!0)}},{name:"Golden Egg",model:"egg_0",texSrc:"egg_0_4",scale:3,yOff:1,noAnim:!0,timer:4e4,onSpawn:function(e,t,i,n){SOUND.play3DL("egg_0",t,i,n,.5)},stopInteract:function(e,t,i){return t?!i||!!i.isBot||!i.account||4797!=i.meleeIndex||12!=i.currentWeaponId||-1!=i.tempEggs.indexOf(uniqueID):!i||4797==i.meleeIndex&&12==i.currentWeaponId?"":"<span style='color:var(--yellow);'>Egg Basket is Required</span>"},onPickup:function(e,t,i){},onDestroy:function(e,t){return t?void e.broadcast("chi",-1,null,["event.easter.golden.despawn"],2,"#61fff7"):SOUND.stop("egg_0")}},{name:"KR Tag",model:"krunkie_0",scale:3.5,padMlt:1.25,yOff:6,timer:12e3,emissive:function(e,t){return e&&t==e.team?8729652:4360861},getScale:function(e){var t=e&&e.c||1;return this.scale+.5*t},stopInteract:function(e,t,i,n){return!(e.mode.teams&&i.team==n.team||t&&i&&!(i.dogTags>=e.mode.tagHoldLimit))},onPickup:function(e,t,i,s){var a=s.data&&s.data.c||0,r=e.mode.teams?10:5;if(e.mode.teams&&i.team==s.team)a||=1,i.denies++,e.incMedal("Denied",i),i.send("am",[29,r,0,a]),e.players.score(i,r),e.challenges.update(e,"dym",a,null,i),s.dontDestroy=!1;else{var o=e.mode.tagHoldLimit,l=a;if(i.dogTags+a>o){var c=o-i.dogTags;i.dogTags+=c,s.data.c=a-c,s.dontDestroy=!0,l=c}else i.dogTags+=a;e.incMedal("Collected",i),i.send("am",[48,r,0,l]),i.send("krt",i.dogTags),e.players.score(i,r),e.playSound&&e.playSound(n.networkSounds.indexOf("collect_1"),1.2,i.sid,i.x,i.y,i.z,!0)}}},{name:"Diamond Egg",model:"egg_0",texSrc:"egg_0_5",scale:2,yOff:6,timer:12e3,getScale:function(e){var t=e&&e.c||1;return this.scale+.5*t},stopInteract:function(e,t,i,n){return!(e.mode.teams&&i.team==n.team||t&&i&&!(i.dogTags>=e.mode.tagHoldLimit))},onPickup:function(e,t,i,s){if(e.mode.teams&&i.team==s.team)i.denies++,e.incMedal("Denied",i),i.send("am",[29,5,0,1]),e.players.score(i,5),e.challenges.update(e,"dym",1,null,i),s.dontDestroy=!1;else{var a=s.data&&s.data.c||0,r=e.mode.tagHoldLimit,o=a;if(i.dogTags+a>r){var l=r-i.dogTags;i.dogTags+=l,s.data.c=a-l,s.dontDestroy=!0,o=l}else i.dogTags+=a;e.incMedal("Collected",i),i.send("am",[48,5,0,o]),i.send("krt",i.dogTags),e.players.score(i,5),e.playSound&&e.playSound(n.networkSounds.indexOf("egg_1"),1.2,i.sid,i.x,i.y,i.z,!0)}}},{name:"Slime Pad",model:"pad_1",scale:4,yOff:.2,noAnim:!0,timer:1e4,alwaysActive:!0,getRotation:function(e){return[s.toRad(e.xD),0,s.toRad(e.zD)]},onCollision:function(e,t,i,n){var a=.125,r=n.data&&n.data.xD&&n.data.xD||0,o=n.data&&n.data.zD&&n.data.zD||0,l=!r&&!o||180==o;if(r&&(r-=90),l)i.velocity.y=a*(180==o?-1:1);else{r=s.toRad(r),o=s.toRad(o);var c=a*Math.sin(-o)*Math.cos(r),d=a*Math.cos(-o)*Math.cos(r);c&&(i.velocity.x=c),d&&(i.velocity.z=d)}i.isYou&&!i.wasOnPad&&SOUND.play("bounce_1",1,!1,s.randFloat(.95,1)),i.onGround=!1,i.onPad=!0}},{name:"Ammo Pack",model:"ammobox_0",scale:1.5,yOff:.25,timer:2e4,noAnim:!0,outline:0,icon:54,getRotation:function(e){return[0,e.xD,0]},stopInteract:function(e,t,i){return!t||!i||!!i.isBot},onPickup:function(e,t,i,a){var r=a.data&&a.data.c&&a.data.c||0;r<10&&(r=s.randInt(8,12)),i.ammos[0]+=r,i.send("uamo",i.ammos,i.reserveAmmos),e.playSound&&e.playSound(n.networkSounds.indexOf("reload_3"),1.2,i.sid,i.x,i.y,i.z,!0),e.players.score(i,5),e.incMedal("Scavenger",i),i.send("am",[54,5,0,1]),e.challenges.update(e,"amc",i.ammos[0],null,i),e.challenges.update(e,"amp",1,null,i)}},{name:"Weapon Box",model:"weaponbox_0",scale:3,padMlt:1.5,yOff:.9,timer:2e4,noAnim:!0,emisTex:!0,icon:55,emissive:function(){return 16777215},getRotation:function(e){return[0,e.xD,0]},stopInteract:function(e,t,i){return!t||!i||!!i.isBot},onPickup:function(e,t,i,s){i.pickups++,s.data&&null!=s.data.wId&&(e.players.replaceLoadout(i,[s.data.wId]),e.challenges.update(e,"wpb",1,{wep:s.data.wId},i),e.players.score(i,5),e.incMedal("Armed",i),i.send("am",[55,5,0,1])),e.playSound&&e.playSound(n.networkSounds.indexOf("reload_3"),1.2,i.sid,i.x,i.y,i.z,!0)}},{name:"Melee Pickup",model:"melee/melee_0",scale:3,yOff:6,timer:2e4,outline:0,stopInteract:function(e,t,i){var n=500-(Date.now()-i.lastThrowTime);return!t&&i?i.canThrow?"<span style='color:var(--yellow);'>You already have a melee</span>":!i.canThrow&&n>0&&"<span style='color:var(--yellow);'>Wait "+s.getReadableTime(n,!0)+" to pickup</span>":!t||!i||i.isBot||i.canThrow},onPickup:function(e,t,i){500-(Date.now()-i.lastThrowTime)<=0&&(e.refillPlayer(i),e.playSound&&e.playSound(n.networkSounds.indexOf("melee_equip"),1.2,i.sid,i.x,i.y,i.z,!0))}},{name:"Ammo Cache",model:"ammobox_0",scale:4.5,yOff:6,timer:2e4,outline:1,powerup:!0,outlineScale:1.1,onSpawn:a,onPickup:function(e,t,i){for(var s,a=0;a<e.players.list.length;++a)(s=e.players.list[a]).resetAmmo(!0,!0),s&&!s.canThrow&&e.refillPlayer(s),s.send("uamo",s.ammos,s.reserveAmmos);e.playSound&&e.playSound(n.networkSounds.indexOf("reload_3"),1.2,i.sid,i.x,i.y,i.z,!0)},onDestroy:r},{name:"Nuke",model:"streak_0",scale:4.5,yOff:6,timer:2e4,outline:1,rotAxis:"z",powerup:!0,outlineScale:1.1,onSpawn:a,getRotation:function(){return[s.toRad(90),0,0]},onPickup:function(e){for(var t=e.AI.ais.length-1;t>=0;--t)1!=e.AI.ais[t].team&&e.AI.ais[t].kill();for(t=0;t<e.players.list.length;++t)e.players.score(e.players.list[t],400);e.broadcast("n",1)},onDestroy:r},{name:"Minigun",model:"weapons/weapon_26",scale:4,padMlt:2500,yOff:12,timer:2e4,outline:1,powerup:!0,onSpawn:a,getScale:function(){return.0026568026773869323},stopInteract:function(e,t,i){return!t||!i||i.isBot||i.hasEquipment()},onPickup:function(e,t,i){e.players.giveWeapon(i,25,!1,!0)},onDestroy:r},{name:"Insta-kill",model:"skull_0",scale:3,yOff:8,timer:2e4,outline:1,powerup:!0,outlineScale:1.1,onSpawn:a,onPickup:function(e){e.instaKillTimer=3e4,e.broadcast("pwup",0,e.instaKillTimer)},onDestroy:r},{name:"Discount",model:"sale_0",scale:2,padMlt:1.5,yOff:8,timer:2e4,outline:1,powerup:!0,outlineScale:1.1,onSpawn:a,onPickup:function(e){e.fireSaleTimer=2e4,e.broadcast("pwup",1,e.fireSaleTimer),e.switchMysteryBox(e.getActiveMysteryBox(),!0)},onDestroy:r},{name:"Double Points",model:"doublepoints_0",scale:4,yOff:8,timer:2e4,outline:1,powerup:!0,outlineScale:1.1,onSpawn:a,onPickup:function(e){e.doublePointsTimer=3e4,e.broadcast("pwup",2,e.doublePointsTimer)},onDestroy:r},{name:"Grenade Launcher",model:"weapons/weapon_27",scale:2,padMlt:2,yOff:8,timer:2e4,outline:1,powerup:!0,onSpawn:a,stopInteract:function(e,t,i){return!t||!i||i.isBot||i.hasEquipment()},onPickup:function(e,t,i){e.players.giveWeapon(i,26,!1,!0)},onDestroy:r},{name:"Joe Tag",model:"tag_0",scale:6,padMlt:.8,yOff:6,timer:2e4,outline:1,powerup:!0,onSpawn:a,onPickup:function(e,t,i,n){var s=n.data&&n.data.pnts&&n.data.pnts||1;e.players.score(i,s)},onDestroy:r},{name:"Frog",model:"collectibles/collect_19",scale:2,padMlt:1.25,timer:3e4,noAnim:!0,outline:1,onSpawn:a,onPickup:function(e,t,i){e.giveSkin(i,5366,"zombies")},onDestroy:r},{name:"Krunkanium",model:"collectibles/collect_11",scale:2,yOff:6,timer:3e4,onPickup:function(e,t,i){e.giveSkin(i,4222,"killdrops"),e.playSound&&e.playSound(n.networkSounds.indexOf("collect_1"),1.2,i.sid,i.x,i.y,i.z,!0)}},{name:"Perk Bottle",model:"bottle_1",texSrc:"bottle_1_0",scale:2,padMlt:2,yOff:8,timer:3e4,outline:1,powerup:!0,onSpawn:a,stopInteract:function(e,t,i){return!t||!i||!!i.isBot||i.perks.length>=n.zombiePerks.length},onPickup:function(e,t,i){for(var a=[],r=0;r<n.zombiePerks.length;r++)i.perks.includes(r)||a.push(r);if(a.length){var o=s.getRandom(a);e.players.givePerk(i,o),e.playSound(30220,2,0,Math.round(i.x),Math.round(i.y),Math.round(i.z),!0,1,!1,null,null,!0,!0)}},onDestroy:r},{name:"Zombie Portal",model:"zombie_portal_0",fileExt:"gltf",scale:2,padMlt:8,yOff:-1,timer:15e3,aiOnly:!0,onSpawn:a,onPickup:function(e,t,i){var n=i.name;if(e.eePAPOrder[e.eePAPProgress]!=n)e.eePAPProgress=0,e.broadcast("so","mystery_1",2,1);else if(e.eePAPProgress++,e.broadcast("so","collect_1",2,1),i.kill(null),e.eePAPProgress>=e.eePAPOrder.length){var s;e.eePAPCompleted=!0,e.broadcast("so","cheer_1",2,1);for(var a=0;a<e.map.manager.interfaces.length;++a)if((s=e.map.manager.objects[e.map.manager.interfaces[a]]).canDest&&!s.destroyed&&525==s.interface){s.active=!1,s.health=0,s.destroyed=!0,e.map.manager.destObjs.push(s.uid),e.broadcast("do",s.uid);break}e.eeDanceTimer=122e3;for(a=0;a<e.eeDanceSkullSpawns.length;a++)e.dropSpawnable(21,null,null,{x:e.eeDanceSkullSpawns[a].x,y:e.eeDanceSkullSpawns[a].y,z:e.eeDanceSkullSpawns[a].z})}},onDestroy:function(e,t,i,n){!t&&n&&n.soundData&&(n.soundData[0].isPlaying=!1,n.soundData[0].stop(n.soundData[1]),n.soundData=null),t&&e&&!e.eePAPCompleted&&(e.eePAPActive=!1,e.globalVals.portal=0,e.broadcast("gv","portal",e.globalVals.portal))}},{name:"Skull EE",model:"skull_0",scale:3,noAnim:!0,timer:12e4,powerup:!0,canShoot:!0,onShoot:function(e,t,i){if(e.playSound&&e.playSound(n.networkSounds.indexOf("collect_1"),1.2,i.sid,i.x,i.y,i.z,!0),e.eeDanceSkulls++,e.eeDanceSkulls>=e.eeDanceSkullSpawns.length&&!e.eeDanceCompleted){e.eeDanceCompleted=!0,e.eeDanceTimer=0,e.AI.forceDanceTimer=1e4,e.AI.forceDance=!0,e.broadcast("so","cheer_0",2,1);for(var a=e.map.spawns[0],r=[22,19],o=0;o<4;o++)e.dropSpawnable(s.getRandom(r),null,null,{x:a.x+s.randInt(15,25)*s.getRandom([1,-1]),y:a.y,z:a.z+s.randInt(15,25)*s.getRandom([1,-1])});for(o=0;o<e.map.manager.interfaces.length;++o){var l=e.map.manager.objects[e.map.manager.interfaces[o]],c=e.map.manager.destObjs.indexOf(l.uid);-1!=c&&252==l.interface&&(e.map.manager.destObjs.splice(c,1),l.active=!0,l.destroyed=!1,l.respawnT=l.respawnR?0:l.respawnTStart,null!=l.health&&(l.health=l.startHealth),e.broadcast("ro",l.uid),l.destroyedBy=null)}}}},{name:"Free Upgrade",model:"krummachine_0",scale:2,yOff:8,timer:3e4,outline:1,onSpawn:a,stopInteract:function(e,t,i){return!t||!i||!i.canUpgrade()},onPickup:function(e,t,i){e.playSound&&e.playSound(n.networkSounds.indexOf("collect_1"),1.2,i.sid,i.x,i.y,i.z,!0);var s=i.loadout[i.loadoutIndex];e.players.removeWeapon(i,s),e.players.giveWeapon(i,s,!0,!0)},onDestroy:r},{name:"Mega Slime Pad",model:"pad_1",scale:20,yOff:1,noAnim:!0,timer:1e4,alwaysActive:!0,getRotation:function(e){return[s.toRad(e.xD),0,s.toRad(e.zD)]},onCollision:function(e,t,i,n){var a=.225,r=n.data&&n.data.xD&&n.data.xD||0,o=n.data&&n.data.zD&&n.data.zD||0,l=!r&&!o||180==o;if(r&&(r-=90),l)i.velocity.y=a*(180==o?-1:1);else{r=s.toRad(r),o=s.toRad(o);var c=a*Math.sin(-o)*Math.cos(r),d=a*Math.cos(-o)*Math.cos(r);c&&(i.velocity.x=c),d&&(i.velocity.z=d)}i.isYou&&!i.wasOnPad&&SOUND.play("bounce_1",1,!1,s.randFloat(.95,1)),i.onGround=!1,i.onPad=!0}},{name:"Loot Drop",model:"cardb_0",scale:4,padMlt:1.5,yOff:8,playerSpecific:!0,outline:0,getRotation:function(e){return[0,e.xD,0]},onPickup:function(e,t,i,s){s.data&&null!=s.data.itemId&&e.giveSkin(i,s.data.itemId,s.data.reason),e.playSound&&e.playSound(n.networkSounds.indexOf("aim_1"),2,i.sid,i.x,i.y,i.z,!0)}}];var o=0;e.exports.getData=function(e,t,i,n,s,a,r,l,c,d,h,u){return{i:e,x:i,y:n,z:s,team:r,timer:l||0,sid:t||o++,width:a,length:a,height:a/2,ai:~~!!d,shoot:~~!!h,pid:u,data:c=c||{}}}},function(e,t){const i="undefined"!=typeof location;var n=0;e.exports=function(e,t=null,s=!0){if(s&&!i){for(var a in e)null==e[a]&&delete e[a];this._initData=e}this.sid=null!=t&&null!=t?t:n++,this.uid=e.uid,this.width=e.w,this.length=e.l,this.height=e.h,void 0!==e.buildInd&&(this.buildInd=e.buildInd),this.active=void 0===e.active?!e.startClosed&&!e.startDest:e.active,this.x=e.x,this.orgX=this.x,this.y=e.y,this.orgY=this.y,this.z=e.z,this.orgZ=this.z,void 0!==e.xR&&(this.xR=e.xR),void 0!==e.yR&&(this.yR=e.yR),void 0!==e.zR&&(this.zR=e.zR),void 0!==e.d&&(this.dir=e.d),void 0!==e.fd&&(this.forceDir=e.fd),void 0!==e.src&&(this.src=e.src),void 0!==e.ramp&&(this.ramp=e.ramp),void 0!==e.ladder&&(this.ladder=e.ladder),void 0!==e.ropeLadder&&(this.ropeLadder=e.ropeLadder),void 0!==e.noShoot&&(this.noShoot=e.noShoot),void 0!==e.s&&(this.stepSrc=e.s),void 0!==e.score&&(this.score=e.score),void 0!==e.scoreP&&(this.scoreP=e.scoreP),void 0!==e.kill&&(this.kill=e.kill),void 0!==e.dummy&&(this.dummy=e.dummy),void 0!==e.noVis&&(this.noVis=e.noVis),void 0!==e.complexMesh&&(this.complexMesh=e.complexMesh),void 0!==e.penetrable&&(this.penetrable=e.penetrable),void 0!==e.health&&(this.health=e.health),void 0!==e.health&&(this.startHealth=e.health),void 0!==e.canDest&&(this.canDest=e.canDest),void 0!==e.transparent&&(this.transparent=e.transparent),void 0!==e.boost&&(this.boost=e.boost),void 0!==e.boostDr&&(this.boostDr=e.boostDr),void 0!==e.aoM&&(this.aoMlt=e.aoM),void 0!==e.team&&(this.team=e.team),void 0!==e.flag&&(this.flag=e.flag),void 0!==e.neutral&&(this.neutral=e.neutral),void 0!==e.img&&(this.img=e.img),void 0!==e.trigger&&(this.trigger=e.trigger),void 0!==e.meshRef&&(this.meshRef=e.meshRef),void 0!==e.isBorder&&(this.isBorder=e.isBorder),void 0!==e.propID&&(this.propID=e.propID),void 0!==e.noAmb&&(this.noAmb=e.noAmb),void 0!==e.tRadius&&(this.tRadius=e.tRadius);var r=0!=e.respawnT&&null!=e.respawnT&&e.respawnT<100?100:e.respawnT;r&&(this.respawnT=r),void 0!==e.respawnR&&(this.respawnR=e.respawnR),r&&(this.respawnTStart=r),(e.respawnR||r)&&(this.canRespawn=!0),void 0!==e.breakSnd&&(this.breakSnd=e.breakSnd),void 0!==e.interface&&(this.interface=e.interface),void 0!==e.objLink&&(this.objLink=e.objLink),void 0!==e.isEvent&&(this.isEvent=e.isEvent),void 0!==e.collT&&(this.collT=e.collT),void 0!==e.spin&&(this.spin=e.spin),void 0!==e.gravity&&(this.gravity=e.gravity),void 0!==e.dynamic&&(this.dynamic=e.dynamic),void 0!==e.type&&(this.type=e.type),void 0!==e.notWallJ&&(this.notWallJ=e.notWallJ),void 0!==e.noGrapple&&(this.noGrapple=e.noGrapple),void 0!==e.noImpulse&&(this.noImpulse=e.noImpulse),void 0!==e.bounce&&(this.bounce=e.bounce),void 0!==e.crouch&&(this.crouch=e.crouch),void 0!==e.pickup&&(this.pickup=e.pickup),void 0!==e.orgPickup&&(this.orgPickup=e.orgPickup),void 0!==e.pickupRep&&(this.pickupRep=e.pickupRep),void 0!==e.pickupRand&&(this.pickupRand=e.pickupRand),void 0!==e.pickupRandGroup&&(this.pickupRandGroup=e.pickupRandGroup),void 0!==e.noMsg&&(this.noMsg=e.noMsg),void 0!==e.method&&(this.method=e.method),void 0!==e.selfDestruct&&(this.selfDestruct=e.selfDestruct),void 0!==e.actions&&(this.trigActions=e.actions),void 0!==e.actionCost&&(this.trigActCost=e.actionCost),void 0!==e.actionMethod&&(this.trigActM=e.actionMethod),void 0!==e.chance&&(this.trigChance=e.chance),void 0!==e.interfaceT&&(this.interfaceT=e.interfaceT),void 0!==e.singleUseP&&(this.singleUseP=e.singleUseP),void 0!==e.eventN&&(this.eventN=e.eventN,void 0!==e.constE&&(this.trigConstE=e.constE||0),this.trigT=1e3*(e.constE||1),this.onInteractT=1e3*(e.constE||1),this.onColT=1e3*(e.constE||1),e.eventN&&(this[e.eventN]=!0),this.uses=[],this.triggered=!1,this.lastColT=0),void 0!==e.singleUse&&(this.singleUse=e.singleUse),void 0!==e.node&&(this.node=e.node),void 0!==e.channel&&(this.channel=e.channel),void 0!==e.telCheckPoint&&(this.telCheckPoint=e.telCheckPoint),void 0!==e.telCooldown&&(this.telCooldown=e.telCooldown),void 0!==e.momentum&&(this.telStopMo=e.momentum),void 0!==e.closeable&&(this.closeable=e.closeable),void 0!==e.startClosed&&(this.startClosed=e.startClosed),void 0!==e.startDest&&(this.startDest=e.startDest),void 0!==e.spawnChance&&(this.spawnChance=e.spawnChance),void 0!==e.withdraw&&(this.withdrawAmnt=e.withdraw),void 0!==e.deposit&&(this.depositAmnt=e.deposit),void 0!==e.asset&&(this.assetID=e.asset),void 0!==e.teleporter&&(this.teleporter=e.teleporter),void 0!==e.gate&&(this.gate=e.gate),void 0!==e.mysteryBox&&(this.mysteryBox=e.mysteryBox),void 0!==e.perkMachine&&(this.perkMachine=e.perkMachine),void 0!==e.krumMachine&&(this.krumMachine=e.krumMachine),void 0!==e.perk&&(this.perk=e.perk),void 0!==e.premium&&(this.premium=e.premium),void 0!==e.teamZ&&(this.teamZ=e.teamZ),void 0!==e.noPVP&&(this.noPVP=e.noPVP),void 0!==e.kpd&&(this.kpd=e.kpd),void 0!==e.forcePVP&&(this.forcePVP=e.forcePVP),void 0!==e.kr&&(this.kr=e.kr),void 0!==e.amount&&(this.amount=e.amount),void 0!==e.bank&&(this.bank=e.bank),void 0!==e.verified&&(this.verified=e.verified),void 0!==e.jumpPad&&(this.jumpPad=e.jumpPad),void 0!==e.checkpoint&&(this.checkpoint=e.checkpoint),void 0!==e.enclose&&(this.enclose=e.enclose),void 0!==e.interactMsg&&(this.interactMsg=e.interactMsg),void 0!==e.wheel&&(this.wheel=e.wheel),void 0!==e.hasAnim&&(this.hasAnim=e.hasAnim),void 0!==e.scriptId&&(this.scriptId=e.scriptId),void 0!==e.noPCol&&(this.noPCol=e.noPCol),void 0!==e.complexColl&&(this.complexColl=e.complexColl),void 0!==e.noAICol&&(this.noAICol=e.noAICol),void 0!==e.redirection&&(this.redirection=e.redirection),void 0!==e.spread&&(this.spread=e.spread),void 0!==e.tag&&(this.tag=e.tag),void 0!==e.serverNode&&(this.serverNode=e.serverNode),void 0!==e.showIcon&&(this.showIcon=e.showIcon),void 0!==e.noMinimap&&(this.noMinimap=e.noMinimap),void 0!==e.noTex&&(this.noTex=e.noTex),this.custVals={}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,s=(n=i(327))&&n.__esModule?n:{default:n};function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,s,a=[],r=!0,o=!1;try{for(i=i.call(e);!(r=(n=i.next()).done)&&(a.push(n.value),!t||a.length!==t);r=!0);}catch(e){o=!0,s=e}finally{try{r||null==i.return||i.return()}finally{if(o)throw s}}return a}}(e,t)||o(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){if(e){if("string"==typeof e)return l(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=Array(t);i<t;i++)n[i]=e[i];return n}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var i,n=0;n<t.length;n++)(i=t[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}var h=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,i,n;return t=e,n=[{key:"addPrefix",value:function(e){return s.default.prefix.has(e)?e:s.default.prefix.add(e)}},{key:"sanitize",value:function(t){if("object"==c(t)){if(Array.isArray(t))return t.map((function(t){return e.sanitize(t)}));var i={};for(var n in t)i[s.default.prefix.remove(n)]=e.sanitize(t[n]);return i}return"function"==typeof t?Symbol("action"):t}},{key:"prefix",value:function(t,i=[]){if("object"==c(t)){if(Array.isArray(t))return t.map((function(t){return e.prefix(t,i)}));var n={},a=function(a){var r=Object.getOwnPropertyDescriptor(t,a);return r.configurable=!1,s.default.prefix.has(a)?(Object.defineProperty(n,a,{get:function(){return t[a]},set:function(e){return t[a]=e},configurable:!1,enumerable:!0}),"continue"):(r.hasOwnProperty("value")&&(r.value=e.prefix(r.value,i.concat(a)),["function","object"].includes(c(r.value))&&(r.writable=!1)),void Object.defineProperty(n,s.default.prefix.add(a),r))};for(var r in t)a(r);return new Proxy(n,{set:function(e,i,n){return Object.getOwnPropertyDescriptor(e,i)||Object.defineProperty(e,i,{get:function(){return t[i]},set:function(e){return t[i]=e},configurable:!1,enumerable:!0}),e[i]=n,!0}})}if("function"==typeof t){var o=function(){try{return e.prefix(t.apply(void 0,arguments),i)}catch(t){throw e.log&&console.log(t),new Error(`Internal Error "${i.join(".")}"`)}};return o.origin=t,o}return t}},{key:"autoCompleteList",value:function(t,i,n){var l=[];if("object"==c(t))if(Array.isArray(t))if(t.length){var d,h=function(e,t){var i,n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var s=0;function l(){}return{s:l,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a=!0,r=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){r=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(r)throw i}}}}(e.autoCompleteList(t[0],i,n));try{for(h.s();!(d=h.n()).done;){var u=d.value;l.push({text:u.text,type:`${u.type}[]`})}}catch(e){h.e(e)}finally{h.f()}}else l.push({text:`${n.join(".")}${params}`,type:"any"});else for(var p in t)l.push.apply(l,r(e.autoCompleteList(t[p],i,n.concat(s.default.prefix.remove(p)))));else if("function"==typeof t){var f=/\s*(\([^\)]*\))/g.exec((t.origin||t).toString())[1].replace(/[\t\r\n]/g," ").replace(/\s+/g," "),m=!1;for(var g in i)if(s.default.wildcardToRegex(g).test(n.join("."))){var v=a(i[g],1)[0];l.push({text:`${n.join(".")}${f}`,type:v}),m=!0;break}m||l.push({text:`${n.join(".")}${f}`,type:"action()"})}else l.push({text:n.join("."),type:{boolean:"bool",number:"num",string:"str"}[c(t)]||"any"});return n.length<2?l.sort((function(e,t){return e.text<t.text?-1:1})):l}},{key:"parse",value:function(e,t,i={}){var n=i.error,s=new Function(e).bind(t)();if(n){var a={},r=function(e){a[e]=function(){try{return s[e].apply(s,arguments)}catch(e){n(e.message)}}};for(var o in s)r(o);return a}return s}},{key:"minify",value:function(e){return e.replace(/^\s*#[^\r\n]+[\r\n]/gm,"").replace(/\s+/g," ").replace(/\s?([^\w])\s?/g,"$1").replace(/(public )?((bool|num|str|obj) )?action \w+\([\w\s,]*\){}/g,"").trim()}}],(i=null)&&d(t.prototype,i),n&&d(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=h},function(e,t){},function(e,t,i){const n=i(297),s=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],a=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];t.getBlocksCount=function(e,t){return t===n.L?s[4*(e-1)+0]:t===n.M?s[4*(e-1)+1]:t===n.Q?s[4*(e-1)+2]:t===n.H?s[4*(e-1)+3]:void 0},t.getTotalCodewordsCount=function(e,t){return t===n.L?a[4*(e-1)+0]:t===n.M?a[4*(e-1)+1]:t===n.Q?a[4*(e-1)+2]:t===n.H?a[4*(e-1)+3]:void 0}},function(e,t){t.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}},function(e,t){let i="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";i=i.replace(/u/g,"\\u");const n="(?:(?![A-Z0-9 $%*+\\-./:]|"+i+")(?:.|[\r\n]))+";t.KANJI=new RegExp(i,"g"),t.BYTE_KANJI=/[^A-Z0-9 $%*+\-./:]+/g,t.BYTE=new RegExp(n,"g"),t.NUMERIC=/[0-9]+/g,t.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");const s=new RegExp("^"+i+"$"),a=/^[0-9]+$/,r=/^[A-Z0-9 $%*+\-./:]+$/;t.testKanji=function(e){return s.test(e)},t.testNumeric=function(e){return a.test(e)},t.testAlphanumeric=function(e){return r.test(e)}},function(e,t){function i(e){if("number"==typeof e&&(e=e.toString()),"string"!=typeof e)throw new Error("Color should be defined as hex string");let t=e.slice().replace("#","").split("");if(t.length<3||5===t.length||t.length>8)throw new Error("Invalid hex color: "+e);3!==t.length&&4!==t.length||(t=Array.prototype.concat.apply([],t.map((function(e){return[e,e]})))),6===t.length&&t.push("F","F");const i=parseInt(t.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:255&i,hex:"#"+t.slice(0,6).join("")}}t.getOptions=function(e){e||={},e.color||={};const t=void 0===e.margin||null===e.margin||e.margin<0?4:e.margin,n=e.width&&e.width>=21?e.width:void 0,s=e.scale||4;return{width:n,scale:n?4:s,margin:t,color:{dark:i(e.color.dark||"#000000ff"),light:i(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}},t.getScale=function(e,t){return t.width&&t.width>=e+2*t.margin?t.width/(e+2*t.margin):t.scale},t.getImageWidth=function(e,i){const n=t.getScale(e,i);return Math.floor((e+2*i.margin)*n)},t.qrToImageData=function(e,i,n){const s=i.modules.size,a=i.modules.data,r=t.getScale(s,n),o=Math.floor((s+2*n.margin)*r),l=n.margin*r,c=[n.color.light,n.color.dark];for(let t=0;t<o;t++)for(let i=0;i<o;i++){let d=4*(t*o+i),h=n.color.light;if(t>=l&&i>=l&&t<o-l&&i<o-l){h=c[a[Math.floor((t-l)/r)*s+Math.floor((i-l)/r)]?1:0]}e[d++]=h.r,e[d++]=h.g,e[d++]=h.b,e[d]=h.a}}},,function(e,t,i){"use strict";function n(){const e="function"==typeof WeakSet,t=e?new WeakSet:[];return[function(i){if(e)return!!t.has(i)||(t.add(i),!1);for(let e=0;e<t.length;e++){if(t[e]===i)return!0}return t.push(i),!1},function(i){if(e)t.delete(i);else for(let e=0;e<t.length;e++)if(t[e]===i){t.splice(e,1);break}}]}i.d(t,"a",(function(){return n}))},function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));const n="<anonymous>";function s(e){try{return e&&"function"==typeof e&&e.name||n}catch(e){return n}}},function(e,t,i){(function(t){e.exports=function e(t,i,n){function s(r,o){if(!i[r]){if(!t[r]){if(a)return a(r,!0);var l=new Error("Cannot find module '"+r+"'");throw l.code="MODULE_NOT_FOUND",l}var c=i[r]={exports:{}};t[r][0].call(c.exports,(function(e){var i=t[r][1][e];return s(i||e)}),c,c.exports,e,t,i,n)}return i[r].exports}for(var a=!1,r=0;r<n.length;r++)s(n[r]);return s}({1:[function(e,i){(function(e){"use strict";function t(){var e,t;a=!0;for(var i=h.length;i;){for(t=h,h=[],e=-1;++e<i;)t[e]();i=h.length}a=!1}function n(e){1!==h.push(e)||a||s()}var s,a,r=e.MutationObserver||e.WebKitMutationObserver;if(r){var o=0,l=new r(t),c=e.document.createTextNode("");l.observe(c,{characterData:!0}),s=function(){c.data=o=++o%2}}else if(e.setImmediate||void 0===e.MessageChannel)s="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var i=e.document.createElement("script");i.onreadystatechange=function(){t(),i.onreadystatechange=null,i.parentNode.removeChild(i),i=null},e.document.documentElement.appendChild(i)}:function(){setTimeout(t,0)};else{var d=new e.MessageChannel;d.port1.onmessage=t,s=function(){d.port2.postMessage(0)}}var h=[];i.exports=n}).call(this,void 0===t?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:t)},{}],2:[function(e,t,i){"use strict";function n(){}function s(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=y,this.queue=[],this.outcome=void 0,e!==n&&l(this,e)}function a(e,t,i){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof i&&(this.onRejected=i,this.callRejected=this.otherCallRejected)}function r(e,t,i){f((function(){var n;try{n=t(i)}catch(t){return m.reject(e,t)}n===e?m.reject(e,new TypeError("Cannot resolve promise with itself")):m.resolve(e,n)}))}function o(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function l(e,t){function i(t){a||(a=!0,m.reject(e,t))}function n(t){a||(a=!0,m.resolve(e,t))}function s(){t(n,i)}var a=!1,r=c(s);"error"===r.status&&i(r.value)}function c(e,t){var i={};try{i.value=e(t),i.status="success"}catch(e){i.status="error",i.value=e}return i}function d(e){return e instanceof this?e:m.resolve(new this(n),e)}function h(e){var t=new this(n);return m.reject(t,e)}function u(e){function t(e,t){function n(e){r[t]=e,++o!==s||a||(a=!0,m.resolve(c,r))}i.resolve(e).then(n,(function(e){a||(a=!0,m.reject(c,e))}))}var i=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var s=e.length,a=!1;if(!s)return this.resolve([]);for(var r=Array(s),o=0,l=-1,c=new this(n);++l<s;)t(e[l],l);return c}function p(e){function t(e){i.resolve(e).then((function(e){a||(a=!0,m.resolve(o,e))}),(function(e){a||(a=!0,m.reject(o,e))}))}var i=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var s=e.length,a=!1;if(!s)return this.resolve([]);for(var r=-1,o=new this(n);++r<s;)t(e[r]);return o}var f=e(1),m={},g=["REJECTED"],v=["FULFILLED"],y=["PENDING"];t.exports=s,s.prototype.catch=function(e){return this.then(null,e)},s.prototype.then=function(e,t){if("function"!=typeof e&&this.state===v||"function"!=typeof t&&this.state===g)return this;var i=new this.constructor(n);return this.state!==y?r(i,this.state===v?e:t,this.outcome):this.queue.push(new a(i,e,t)),i},a.prototype.callFulfilled=function(e){m.resolve(this.promise,e)},a.prototype.otherCallFulfilled=function(e){r(this.promise,this.onFulfilled,e)},a.prototype.callRejected=function(e){m.reject(this.promise,e)},a.prototype.otherCallRejected=function(e){r(this.promise,this.onRejected,e)},m.resolve=function(e,t){var i=c(o,t);if("error"===i.status)return m.reject(e,i.value);var n=i.value;if(n)l(e,n);else{e.state=v,e.outcome=t;for(var s=-1,a=e.queue.length;++s<a;)e.queue[s].callFulfilled(t)}return e},m.reject=function(e,t){e.state=g,e.outcome=t;for(var i=-1,n=e.queue.length;++i<n;)e.queue[i].callRejected(t);return e},s.resolve=d,s.reject=h,s.all=u,s.race=p},{1:1}],3:[function(e,i,n){(function(t){"use strict";"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0===t?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:t)},{2:2}],4:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}function a(){try{if(!we||!we.open)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}function r(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(s){if("TypeError"!==s.name)throw s;for(var i=new("undefined"==typeof BlobBuilder?"undefined"==typeof MSBlobBuilder?"undefined"==typeof MozBlobBuilder?WebKitBlobBuilder:MozBlobBuilder:MSBlobBuilder:BlobBuilder),n=0;n<e.length;n+=1)i.append(e[n]);return i.getBlob(t.type)}}function o(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function l(e,t,i){"function"==typeof t&&e.then(t),"function"==typeof i&&e.catch(i)}function c(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e+=""),e}function d(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}function h(e){for(var t=e.length,i=new ArrayBuffer(t),n=new Uint8Array(i),s=0;s<t;s++)n[s]=e.charCodeAt(s);return i}function u(e){return new xe((function(t){var i=e.transaction(Se,Ce),n=r([""]);i.objectStore(Se).put(n,"key"),i.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},i.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),i=navigator.userAgent.match(/Edge\//);t(i||!e||parseInt(e[1],10)>=43)}})).catch((function(){return!1}))}function p(e){return"boolean"==typeof Me?xe.resolve(Me):u(e).then((function(e){return Me=e}))}function f(e){var t=ke[e.name],i={};i.promise=new xe((function(e,t){i.resolve=e,i.reject=t})),t.deferredOperations.push(i),t.dbReady=t.dbReady?t.dbReady.then((function(){return i.promise})):i.promise}function m(e){var t=ke[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function g(e,t){var i=ke[e.name].deferredOperations.pop();if(i)return i.reject(t),i.promise}function v(e,t){return new xe((function(i,n){if(ke[e.name]=ke[e.name]||C(),e.db){if(!t)return i(e.db);f(e),e.db.close()}var s=[e.name];t&&s.push(e.version);var a=we.open.apply(we,s);t&&(a.onupgradeneeded=function(t){var i=a.result;try{i.createObjectStore(e.storeName),t.oldVersion<=1&&i.createObjectStore(Se)}catch(i){if("ConstraintError"!==i.name)throw i;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),a.onerror=function(e){e.preventDefault(),n(a.error)},a.onsuccess=function(){var t=a.result;t.onversionchange=function(e){e.target.close()},i(t),m(e)}}))}function y(e){return v(e,!1)}function b(e){return v(e,!0)}function w(e,t){if(!e.db)return!0;var i=!e.db.objectStoreNames.contains(e.storeName),n=e.version<e.db.version,s=e.version>e.db.version;if(n&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),s||i){if(i){var a=e.db.version+1;a>e.version&&(e.version=a)}return!0}return!1}function x(e){return new xe((function(t,i){var n=new FileReader;n.onerror=i,n.onloadend=function(i){var n=btoa(i.target.result||"");t({__local_forage_encoded_blob:!0,data:n,type:e.type})},n.readAsBinaryString(e)}))}function S(e){return r([h(atob(e.data))],{type:e.type})}function M(e){return e&&e.__local_forage_encoded_blob}function k(e){var t=this,i=t._initReady().then((function(){var e=ke[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return l(i,e,e),i}function _(e){var t;f(e);for(var i=ke[e.name],n=i.forages,s=0;s<n.length;s++)(t=n[s])._dbInfo.db&&(t._dbInfo.db.close(),t._dbInfo.db=null);return e.db=null,y(e).then((function(t){return e.db=t,w(e)?b(e):t})).then((function(t){e.db=i.db=t;for(var s=0;s<n.length;s++)n[s]._dbInfo.db=t})).catch((function(t){throw g(e,t),t}))}function T(e,t,i,n=1){try{var s=e.db.transaction(e.storeName,t);i(null,s)}catch(s){if(n>0&&(!e.db||"InvalidStateError"===s.name||"NotFoundError"===s.name))return xe.resolve().then((function(){if(!e.db||"NotFoundError"===s.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),b(e)})).then((function(){return _(e).then((function(){T(e,t,i,n-1)}))})).catch(i);i(s)}}function C(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function I(e){function t(){return xe.resolve()}var i=this,n={db:null};if(e)for(var s in e)n[s]=e[s];var a,r=ke[n.name];r||(r=C(),ke[n.name]=r),r.forages.push(i),i._initReady||(i._initReady=i.ready,i.ready=k);for(var o=[],l=0;l<r.forages.length;l++)(a=r.forages[l])!==i&&o.push(a._initReady().catch(t));var c=r.forages.slice(0);return xe.all(o).then((function(){return n.db=r.db,y(n)})).then((function(e){return n.db=e,w(n,i._defaultConfig.version)?b(n):e})).then((function(e){var t;n.db=r.db=e,i._dbInfo=n;for(var s=0;s<c.length;s++)(t=c[s])!==i&&(t._dbInfo.db=n.db,t._dbInfo.version=n.version)}))}function A(e,t){var i=this;e=c(e);var n=new xe((function(t,n){i.ready().then((function(){T(i._dbInfo,Te,(function(s,a){if(s)return n(s);try{var r=a.objectStore(i._dbInfo.storeName).get(e);r.onsuccess=function(){var e=r.result;void 0===e&&(e=null),M(e)&&(e=S(e)),t(e)},r.onerror=function(){n(r.error)}}catch(e){n(e)}}))})).catch(n)}));return o(n,t),n}function R(e,t){var i=this,n=new xe((function(t,n){i.ready().then((function(){T(i._dbInfo,Te,(function(s,a){if(s)return n(s);try{var r=a.objectStore(i._dbInfo.storeName).openCursor(),o=1;r.onsuccess=function(){var i=r.result;if(i){var n=i.value;M(n)&&(n=S(n));var s=e(n,i.key,o++);void 0===s?i.continue():t(s)}else t()},r.onerror=function(){n(r.error)}}catch(e){n(e)}}))})).catch(n)}));return o(n,t),n}function P(e,t,i){var n=this;e=c(e);var s=new xe((function(i,s){var a;n.ready().then((function(){return a=n._dbInfo,"[object Blob]"===_e.call(t)?p(a.db).then((function(e){return e?t:x(t)})):t})).then((function(t){T(n._dbInfo,Ce,(function(a,r){if(a)return s(a);try{var o=r.objectStore(n._dbInfo.storeName);null===t&&(t=void 0);var l=o.put(t,e);r.oncomplete=function(){void 0===t&&(t=null),i(t)},r.onabort=r.onerror=function(){var e=l.error?l.error:l.transaction.error;s(e)}}catch(e){s(e)}}))})).catch(s)}));return o(s,i),s}function E(e,t){var i=this;e=c(e);var n=new xe((function(t,n){i.ready().then((function(){T(i._dbInfo,Ce,(function(s,a){if(s)return n(s);try{var r=a.objectStore(i._dbInfo.storeName).delete(e);a.oncomplete=function(){t()},a.onerror=function(){n(r.error)},a.onabort=function(){var e=r.error?r.error:r.transaction.error;n(e)}}catch(e){n(e)}}))})).catch(n)}));return o(n,t),n}function D(e){var t=this,i=new xe((function(e,i){t.ready().then((function(){T(t._dbInfo,Ce,(function(n,s){if(n)return i(n);try{var a=s.objectStore(t._dbInfo.storeName).clear();s.oncomplete=function(){e()},s.onabort=s.onerror=function(){var e=a.error?a.error:a.transaction.error;i(e)}}catch(e){i(e)}}))})).catch(i)}));return o(i,e),i}function O(e){var t=this,i=new xe((function(e,i){t.ready().then((function(){T(t._dbInfo,Te,(function(n,s){if(n)return i(n);try{var a=s.objectStore(t._dbInfo.storeName).count();a.onsuccess=function(){e(a.result)},a.onerror=function(){i(a.error)}}catch(e){i(e)}}))})).catch(i)}));return o(i,e),i}function L(e,t){var i=this,n=new xe((function(t,n){return e<0?void t(null):void i.ready().then((function(){T(i._dbInfo,Te,(function(s,a){if(s)return n(s);try{var r=a.objectStore(i._dbInfo.storeName),o=!1,l=r.openKeyCursor();l.onsuccess=function(){var i=l.result;return i?void(0===e||o?t(i.key):(o=!0,i.advance(e))):void t(null)},l.onerror=function(){n(l.error)}}catch(e){n(e)}}))})).catch(n)}));return o(n,t),n}function j(e){var t=this,i=new xe((function(e,i){t.ready().then((function(){T(t._dbInfo,Te,(function(n,s){if(n)return i(n);try{var a=s.objectStore(t._dbInfo.storeName).openKeyCursor(),r=[];a.onsuccess=function(){var t=a.result;return t?(r.push(t.key),void t.continue()):void e(r)},a.onerror=function(){i(a.error)}}catch(e){i(e)}}))})).catch(i)}));return o(i,e),i}function z(e,t){t=d.apply(this,arguments);var i,n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var s=this;if(e.name){var a=e.name===n.name&&s._dbInfo.db?xe.resolve(s._dbInfo.db):y(e).then((function(t){var i=ke[e.name],n=i.forages;i.db=t;for(var s=0;s<n.length;s++)n[s]._dbInfo.db=t;return t}));i=e.storeName?a.then((function(t){if(t.objectStoreNames.contains(e.storeName)){var i=t.version+1;f(e);var n,s=ke[e.name],a=s.forages;t.close();for(var r=0;r<a.length;r++)(n=a[r])._dbInfo.db=null,n._dbInfo.version=i;return new xe((function(t,n){var s=we.open(e.name,i);s.onerror=function(e){s.result.close(),n(e)},s.onupgradeneeded=function(){s.result.deleteObjectStore(e.storeName)},s.onsuccess=function(){var e=s.result;e.close(),t(e)}})).then((function(e){var t;s.db=e;for(var i=0;i<a.length;i++)(t=a[i])._dbInfo.db=e,m(t._dbInfo)})).catch((function(t){throw(g(e,t)||xe.resolve()).catch((function(){})),t}))}})):a.then((function(t){f(e);var i=ke[e.name],n=i.forages;t.close();for(var s=0;s<n.length;s++)n[s]._dbInfo.db=null;return new xe((function(t,i){var n=we.deleteDatabase(e.name);n.onerror=function(){var e=n.result;e&&e.close(),i(n.error)},n.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},n.onsuccess=function(){var e=n.result;e&&e.close(),t(e)}})).then((function(e){i.db=e;for(var t=0;t<n.length;t++)m(n[t]._dbInfo)})).catch((function(t){throw(g(e,t)||xe.resolve()).catch((function(){})),t}))}))}else i=xe.reject("Invalid arguments");return o(i,t),i}function B(){return"function"==typeof openDatabase}function N(e){var t,i,n,s,a,r=.75*e.length,o=e.length,l=0;"="===e[e.length-1]&&(r--,"="===e[e.length-2]&&r--);var c=new ArrayBuffer(r),d=new Uint8Array(c);for(t=0;t<o;t+=4)i=Ae.indexOf(e[t]),n=Ae.indexOf(e[t+1]),s=Ae.indexOf(e[t+2]),a=Ae.indexOf(e[t+3]),d[l++]=i<<2|n>>4,d[l++]=(15&n)<<4|s>>2,d[l++]=(3&s)<<6|63&a;return c}function F(e){var t,i=new Uint8Array(e),n="";for(t=0;t<i.length;t+=3)n+=Ae[i[t]>>2],n+=Ae[(3&i[t])<<4|i[t+1]>>4],n+=Ae[(15&i[t+1])<<2|i[t+2]>>6],n+=Ae[63&i[t+2]];return i.length%3==2?n=n.substring(0,n.length-1)+"=":i.length%3==1&&(n=n.substring(0,n.length-2)+"=="),n}function H(e,t){var i="";if(e&&(i=qe.call(e)),e&&("[object ArrayBuffer]"===i||e.buffer&&"[object ArrayBuffer]"===qe.call(e.buffer))){var n,s=Ee;e instanceof ArrayBuffer?(n=e,s+=Oe):(n=e.buffer,"[object Int8Array]"===i?s+=je:"[object Uint8Array]"===i?s+=ze:"[object Uint8ClampedArray]"===i?s+=Be:"[object Int16Array]"===i?s+=Ne:"[object Uint16Array]"===i?s+=He:"[object Int32Array]"===i?s+=Fe:"[object Uint32Array]"===i?s+=Ue:"[object Float32Array]"===i?s+=Ve:"[object Float64Array]"===i?s+=Ge:t(new Error("Failed to get type for BinaryArray"))),t(s+F(n))}else if("[object Blob]"===i){var a=new FileReader;a.onload=function(){var i=Re+e.type+"~"+F(this.result);t(Ee+Le+i)},a.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(i){console.error("Couldn't convert value into a JSON string: ",e),t(null,i)}}function U(e){if(e.substring(0,De)!==Ee)return JSON.parse(e);var t,i=e.substring(We),n=e.substring(De,We);if(n===Le&&Pe.test(i)){var s=i.match(Pe);t=s[1],i=i.substring(s[0].length)}var a=N(i);switch(n){case Oe:return a;case Le:return r([a],{type:t});case je:return new Int8Array(a);case ze:return new Uint8Array(a);case Be:return new Uint8ClampedArray(a);case Ne:return new Int16Array(a);case He:return new Uint16Array(a);case Fe:return new Int32Array(a);case Ue:return new Uint32Array(a);case Ve:return new Float32Array(a);case Ge:return new Float64Array(a);default:throw new Error("Unkown type: "+n)}}function V(e,t,i,n){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],i,n)}function G(e){var t=this,i={db:null};if(e)for(var n in e)i[n]="string"==typeof e[n]?e[n]:e[n].toString();var s=new xe((function(e,n){try{i.db=openDatabase(i.name,i.version+"",i.description,i.size)}catch(e){return n(e)}i.db.transaction((function(s){V(s,i,(function(){t._dbInfo=i,e()}),(function(e,t){n(t)}))}),n)}));return i.serializer=Ye,s}function W(e,t,i,n,s,a){e.executeSql(i,n,s,(function(e,r){r.code===r.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],(function(e,o){o.rows.length?a(e,r):V(e,t,(function(){e.executeSql(i,n,s,a)}),a)}),a):a(e,r)}),a)}function q(e,t){var i=this;e=c(e);var n=new xe((function(t,n){i.ready().then((function(){var s=i._dbInfo;s.db.transaction((function(i){W(i,s,"SELECT * FROM "+s.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,i){var n=i.rows.length?i.rows.item(0).value:null;n&&=s.serializer.deserialize(n),t(n)}),(function(e,t){n(t)}))}))})).catch(n)}));return o(n,t),n}function Y(e,t){var i=this,n=new xe((function(t,n){i.ready().then((function(){var s=i._dbInfo;s.db.transaction((function(i){W(i,s,"SELECT * FROM "+s.storeName,[],(function(i,n){for(var a=n.rows,r=a.length,o=0;o<r;o++){var l=a.item(o),c=l.value;if(c&&=s.serializer.deserialize(c),void 0!==(c=e(c,l.key,o+1)))return void t(c)}t()}),(function(e,t){n(t)}))}))})).catch(n)}));return o(n,t),n}function K(e,t,i,n){var s=this;e=c(e);var a=new xe((function(a,r){s.ready().then((function(){void 0===t&&(t=null);var o=t,l=s._dbInfo;l.serializer.serialize(t,(function(t,c){c?r(c):l.db.transaction((function(i){W(i,l,"INSERT OR REPLACE INTO "+l.storeName+" (key, value) VALUES (?, ?)",[e,t],(function(){a(o)}),(function(e,t){r(t)}))}),(function(t){if(t.code===t.QUOTA_ERR){if(n>0)return void a(K.apply(s,[e,o,i,n-1]));r(t)}}))}))})).catch(r)}));return o(a,i),a}function X(e,t,i){return K.apply(this,[e,t,i,1])}function Z(e,t){var i=this;e=c(e);var n=new xe((function(t,n){i.ready().then((function(){var s=i._dbInfo;s.db.transaction((function(i){W(i,s,"DELETE FROM "+s.storeName+" WHERE key = ?",[e],(function(){t()}),(function(e,t){n(t)}))}))})).catch(n)}));return o(n,t),n}function J(e){var t=this,i=new xe((function(e,i){t.ready().then((function(){var n=t._dbInfo;n.db.transaction((function(t){W(t,n,"DELETE FROM "+n.storeName,[],(function(){e()}),(function(e,t){i(t)}))}))})).catch(i)}));return o(i,e),i}function Q(e){var t=this,i=new xe((function(e,i){t.ready().then((function(){var n=t._dbInfo;n.db.transaction((function(t){W(t,n,"SELECT COUNT(key) as c FROM "+n.storeName,[],(function(t,i){var n=i.rows.item(0).c;e(n)}),(function(e,t){i(t)}))}))})).catch(i)}));return o(i,e),i}function $(e,t){var i=this,n=new xe((function(t,n){i.ready().then((function(){var s=i._dbInfo;s.db.transaction((function(i){W(i,s,"SELECT key FROM "+s.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,i){var n=i.rows.length?i.rows.item(0).key:null;t(n)}),(function(e,t){n(t)}))}))})).catch(n)}));return o(n,t),n}function ee(e){var t=this,i=new xe((function(e,i){t.ready().then((function(){var n=t._dbInfo;n.db.transaction((function(t){W(t,n,"SELECT key FROM "+n.storeName,[],(function(t,i){for(var n=[],s=0;s<i.rows.length;s++)n.push(i.rows.item(s).key);e(n)}),(function(e,t){i(t)}))}))})).catch(i)}));return o(i,e),i}function te(e){return new xe((function(t,i){e.transaction((function(n){n.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(i,n){for(var s=[],a=0;a<n.rows.length;a++)s.push(n.rows.item(a).name);t({db:e,storeNames:s})}),(function(e,t){i(t)}))}),(function(e){i(e)}))}))}function ie(e,t){t=d.apply(this,arguments);var i,n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var s=this;return o(i=e.name?new xe((function(t){var i;i=e.name===n.name?s._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?t({db:i,storeNames:[e.storeName]}):t(te(i))})).then((function(e){return new xe((function(t,i){e.db.transaction((function(n){function s(e){return new xe((function(t,i){n.executeSql("DROP TABLE IF EXISTS "+e,[],(function(){t()}),(function(e,t){i(t)}))}))}for(var a=[],r=0,o=e.storeNames.length;r<o;r++)a.push(s(e.storeNames[r]));xe.all(a).then((function(){t()})).catch((function(e){i(e)}))}),(function(e){i(e)}))}))})):xe.reject("Invalid arguments"),t),i}function ne(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}function se(e,t){var i=e.name+"/";return e.storeName!==t.storeName&&(i+=e.storeName+"/"),i}function ae(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(e){return!0}}function re(){return!ae()||localStorage.length>0}function oe(e){var t=this,i={};if(e)for(var n in e)i[n]=e[n];return i.keyPrefix=se(e,t._defaultConfig),re()?(t._dbInfo=i,i.serializer=Ye,xe.resolve()):xe.reject()}function le(e){var t=this,i=t.ready().then((function(){for(var e,i=t._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--)0===(e=localStorage.key(n)).indexOf(i)&&localStorage.removeItem(e)}));return o(i,e),i}function ce(e,t){var i=this;e=c(e);var n=i.ready().then((function(){var t=i._dbInfo,n=localStorage.getItem(t.keyPrefix+e);return n&&=t.serializer.deserialize(n),n}));return o(n,t),n}function de(e,t){var i=this,n=i.ready().then((function(){for(var t,n=i._dbInfo,s=n.keyPrefix,a=s.length,r=localStorage.length,o=1,l=0;l<r;l++)if(0===(t=localStorage.key(l)).indexOf(s)){var c=localStorage.getItem(t);if(c&&=n.serializer.deserialize(c),void 0!==(c=e(c,t.substring(a),o++)))return c}}));return o(n,t),n}function he(e,t){var i=this,n=i.ready().then((function(){var t,n=i._dbInfo;try{t=localStorage.key(e)}catch(e){t=null}return t&&=t.substring(n.keyPrefix.length),t}));return o(n,t),n}function ue(e){var t=this,i=t.ready().then((function(){for(var e,i=t._dbInfo,n=localStorage.length,s=[],a=0;a<n;a++)0===(e=localStorage.key(a)).indexOf(i.keyPrefix)&&s.push(e.substring(i.keyPrefix.length));return s}));return o(i,e),i}function pe(e){var t=this.keys().then((function(e){return e.length}));return o(t,e),t}function fe(e,t){var i=this;e=c(e);var n=i.ready().then((function(){var t=i._dbInfo;localStorage.removeItem(t.keyPrefix+e)}));return o(n,t),n}function me(e,t,i){var n=this;e=c(e);var s=n.ready().then((function(){void 0===t&&(t=null);var i=t;return new xe((function(s,a){var r=n._dbInfo;r.serializer.serialize(t,(function(t,n){if(n)a(n);else try{localStorage.setItem(r.keyPrefix+e,t),s(i)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||a(e),a(e)}}))}))}));return o(s,i),s}function ge(e,t){if(t=d.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var i=this.config();e.name=e.name||i.name,e.storeName=e.storeName||i.storeName}var n,s=this;return o(n=e.name?new xe((function(t){e.storeName?t(se(e,s._defaultConfig)):t(e.name+"/")})).then((function(e){for(var t,i=localStorage.length-1;i>=0;i--)0===(t=localStorage.key(i)).indexOf(e)&&localStorage.removeItem(t)})):xe.reject("Invalid arguments"),t),n}function ve(e,t){e[t]=function(){var i=arguments;return e.ready().then((function(){return e[t].apply(e,i)}))}}function ye(){for(var e,t=1;t<arguments.length;t++)if(e=arguments[t])for(var i in e)e.hasOwnProperty(i)&&(arguments[0][i]=Qe(e[i])?e[i].slice():e[i]);return arguments[0]}var be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},we=s();"undefined"==typeof Promise&&e(3);var xe=Promise,Se="local-forage-detect-blob-support",Me=void 0,ke={},_e=Object.prototype.toString,Te="readonly",Ce="readwrite",Ie={_driver:"asyncStorage",_initStorage:I,_support:a(),iterate:R,getItem:A,setItem:P,removeItem:E,clear:D,length:O,key:L,keys:j,dropInstance:z},Ae="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Re="~~local_forage_type~",Pe=/^~~local_forage_type~([^~]+)~/,Ee="__lfsc__:",De=Ee.length,Oe="arbf",Le="blob",je="si08",ze="ui08",Be="uic8",Ne="si16",Fe="si32",He="ur16",Ue="ui32",Ve="fl32",Ge="fl64",We=De+Oe.length,qe=Object.prototype.toString,Ye={serialize:H,deserialize:U,stringToBuffer:N,bufferToString:F},Ke={_driver:"webSQLStorage",_initStorage:G,_support:B(),iterate:Y,getItem:q,setItem:X,removeItem:Z,clear:J,length:Q,key:$,keys:ee,dropInstance:ie},Xe={_driver:"localStorageWrapper",_initStorage:oe,_support:ne(),iterate:de,getItem:ce,setItem:me,removeItem:fe,clear:le,length:pe,key:he,keys:ue,dropInstance:ge},Ze=function(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)},Je=function(e,t){for(var i=e.length,n=0;n<i;){if(Ze(e[n],t))return!0;n++}return!1},Qe=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},$e={},et={},tt={INDEXEDDB:Ie,WEBSQL:Ke,LOCALSTORAGE:Xe},it=[tt.INDEXEDDB._driver,tt.WEBSQL._driver,tt.LOCALSTORAGE._driver],nt=["dropInstance"],st=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(nt),at={description:"",driver:it.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1},rt=function(){function e(t){for(var i in n(this,e),tt)if(tt.hasOwnProperty(i)){var s=tt[i],a=s._driver;this[i]=a,$e[a]||this.defineDriver(s)}this._defaultConfig=ye({},at),this._config=ye({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":be(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"==t&&(e[t]=e[t].replace(/\W/g,"_")),"version"==t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,i){var n=new xe((function(t,i){try{var n=e._driver,s=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void i(s);for(var a=st.concat("_initStorage"),r=0,l=a.length;r<l;r++){var c=a[r];if((!Je(nt,c)||e[c])&&"function"!=typeof e[c])return void i(s)}var d=function(){for(var t,i=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver"),i=xe.reject(t);return o(i,arguments[arguments.length-1]),i}},n=0,s=nt.length;n<s;n++)t=nt[n],e[t]||=i(t)};d();var h=function(i){$e[n]&&console.info("Redefining LocalForage driver: "+n),$e[n]=e,et[n]=i,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(h,i):h(!!e._support):h(!0)}catch(e){i(e)}}));return l(n,t,i),n},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,i){var n=$e[e]?xe.resolve($e[e]):xe.reject(new Error("Driver not found."));return l(n,t,i),n},e.prototype.getSerializer=function(e){var t=xe.resolve(Ye);return l(t,e),t},e.prototype.ready=function(e){var t=this,i=t._driverSet.then((function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready}));return l(i,e,e),i},e.prototype.setDriver=function(e,t,i){function n(){r._config.driver=r.driver()}function s(e){return r._extend(e),n(),r._ready=r._initStorage(r._config),r._ready}function a(e){return function(){function t(){for(;i<e.length;){var a=e[i];return i++,r._dbInfo=null,r._ready=null,r.getDriver(a).then(s).catch(t)}n();var o=new Error("No available storage method found.");return r._driverSet=xe.reject(o),r._driverSet}var i=0;return t()}}var r=this;Qe(e)||(e=[e]);var o=this._getSupportedDrivers(e),c=null===this._driverSet?xe.resolve():this._driverSet.catch((function(){return xe.resolve()}));return this._driverSet=c.then((function(){var e=o[0];return r._dbInfo=null,r._ready=null,r.getDriver(e).then((function(e){r._driver=e._driver,n(),r._wrapLibraryMethodsWithReady(),r._initDriver=a(o)}))})).catch((function(){n();var e=new Error("No available storage method found.");return r._driverSet=xe.reject(e),r._driverSet})),l(this._driverSet,t,i),this._driverSet},e.prototype.supports=function(e){return!!et[e]},e.prototype._extend=function(e){ye(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t,i=[],n=0,s=e.length;n<s;n++)t=e[n],this.supports(t)&&i.push(t);return i},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=st.length;e<t;e++)ve(this,st[e])},e.prototype.createInstance=function(t){return new e(t)},e}(),ot=new rt;t.exports=ot},{3:3}]},{},[4])(4)}).call(this,i(8))},function(e,t,i){"use strict";i.r(t),function(e){var t=i(123),n=i.n(t),s=i(122),a=i(38),r=i(62),o=i.n(r);"localhost"==location.hostname&&FRVR.channelCharacteristics.allowNavigation&&(location.hostname="127.0.0.1");const l="undefined"!=typeof b475796ed633d5fd0485;l&&(b475796ed633d5fd0485=b475796ed633d5fd0485.split("").map((e=>String.fromCharCode(e.charCodeAt(0)-5))).join(""));const c=navigator.userAgent.toString();console.info("%c Browser %c "+c.slice(c.lastIndexOf(") ")+2,c.length)+" ","padding: 1px; border-radius: 3px 0 0 3px; color: #fff; background: #606060;","padding: 1px; border-radius: 0 3px 3px 0; color: #fff; background: #1475b2;");const d=c.includes("io.krunker.steam")&&"io.krunker.steam"!=c,h=String.fromCharCode(75,82,76).toLowerCase();i(312);var u=i(4);function p(){return window._isMobile}function f(){return p()}var g=(0,eval)('typeof require == "function"')&&u.isProd,v=navigator.webdriver;Object.defineProperty(navigator,"webdriver",{configurable:!1,writable:!1}),FRVR.lifecycle.onGamePause=function(){},FRVR.lifecycle.onSuspend=function(){},FRVR.lifecycle.onResume=function(){},FRVR.lifecycle.onAudioSuspend=function(){},FRVR.lifecycle.onAudioResume=function(){},window.setTimeout=window.setTimeout.isProxy?(e,t)=>{var i=Date.now();let n=()=>{Date.now()>i+t?e():requestIdleCallback(n)};requestIdleCallback(n)}:window.setTimeout;var y=[]instanceof Array;function b(){return"undefined"!=typeof window&&"object"==typeof window.process&&"renderer"===window.process.type||void 0!==e&&"object"==typeof e.versions&&e.versions.electron||"object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0}Object.defineProperty(window,"setTimeout",{configurable:!1,writable:!1}),Object.defineProperty(window,"clearTimeout",{configurable:!1,writable:!1}),Object.defineProperty(window,"setInterval",{configurable:!1,writable:!1}),Object.defineProperty(window,"clearInterval",{configurable:!1,writable:!1}),Object.defineProperty(CanvasRenderingContext2D.prototype,"measureText",{configurable:!1,writable:!1}),Object.defineProperty(CanvasRenderingContext2D.prototype,"fillText",{configurable:!1,writable:!1});const w=b();window.isDeskCli=g||b();var x="undefined"!=typeof Storage;try{window.localStorage.canStore=!0}catch{x=!1}window.saveVal=function(e,t){x&&localStorage.setItem(e,t)},window.deleteVal=function(e){x&&localStorage.removeItem(e)},window.getSavedVal=function(e){return x?localStorage.getItem(e):null};var S=new(i(128));function M(e,t){if(p())return t(!0);if(u.bypassCaptcha)return t(!0);var i=e?{action:e}:void 0;"undefined"==typeof grecaptcha?t(null,!0):grecaptcha.enterprise.execute(u.recaptchaKey,i).then((e=>{t(e)}))}const k=["msstart_sdk_init"],_=(e,t,i)=>{if(!window.forceMergeQueryString)return t;const n=new URLSearchParams(e.search),s=new URLPattern(t,window.location.origin),a=new URLSearchParams(s.search);i.forEach((e=>{n.has(e)&&a.set(e,n.get(e))}));const r=a.toString().replace(/%3A/g,":");return 0===r.length?t:t.split("?")[0]+"?"+r};window.openURL=function(e,t){"/"===e.charAt(0)&&(e=_(window.location,e,k)),t?window.open(e,"_self"):window.open(e,"_blank")},window.openDiscord=function(){window.open(u.discordInvite,"_blank")};var T,C,I=String.fromCharCode(99,104,111,110,107,101,114,99,104,101,97,116,115).toLowerCase(),A=!1,R=!1;void 0===document.hidden?void 0===document.msHidden?void 0!==document.webkitHidden&&(T="webkitHidden",C="webkitvisibilitychange"):(T="msHidden",C="msvisibilitychange"):(T="hidden",C="visibilitychange"),void 0!==document.addEventListener&&void 0!==T&&document.addEventListener(C,(function(){R=document[T]}),!1);var P=new URLSearchParams(window.location.search.replace("#","%23").replace("+","%2B"));new URLSearchParams(window.location.hash.replace("#","?"));function E(e,t){var i=P.get(e);return null!=i&&/[^\w\_\-\.\!]+/gim.test(i)&&(i=t),null==t?i:i||t}var D=parseInt(E("tm",0))||0,O=E("play",null),L=E("host",null),j=O||L||null,z=E("mod",null);(O||L)&&(loadGamNm.innerHTML=S.t("generic.loading.simple")+" "+(O||L)+" ...");var B=getSavedVal("lastViewedUpdate")||null,N={default:"Default"};window.updateAudioInputs=function(){navigator&&navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices&&navigator.mediaDevices.enumerateDevices().then((e=>{var t=e.filter((e=>"audioinput"==e.kind));N=t.length?Object.fromEntries(Object.keys(t).map((e=>[t[e].deviceId,t[e].label||"Unknown Device"]))):{default:"Default"},we&&(we.list.audioInput.options=N)}))},updateAudioInputs(),window.getAudioInputs=()=>N;var F=i(313).default;F.PING_REGION_CACHE_KEY="pingRegion7",F.USE_PORT=!1,F.MERGE_QUERY=!!window.forceMergeQueryString;var H=new F(u.matchmakerURL,u.availableRegions,u.dedicatedOnlyRegions),U=null,V=null,G=null,W=null;function q(e){H.switchGame(e,!FRVR.channelCharacteristics.allowNavigation)}function Y(e,t){t&&(t.textContent="..."),H.fetchGameInfo(e).then((i=>{var[n,s,a,r,o]=i;a>=r?t&&(t.textContent=S.t("matchmaker.full")):q(e),t&&setTimeout((()=>{t.textContent=Math.min(a,r)+"/"+r}),1e3)})).catch((()=>{t&&(t.textContent="ERROR")}))}FRVR.tracker.addExtraFieldFunction((function(e){V&&(e.krunker_session_id=V),U&&(ve&&ve.map&&(e.map_id=ve.mapIndex),ve&&ve.map&&(e.map_name=ve.map.getMapName()),ve&&ve.map&&(e.user_generated=!!ve.map.maps&&!!ve.map.maps[ve.mapIndex]&&!!ve.map.maps[ve.mapIndex].creator),ve&&ve.mode&&(e.game_mode_id=ve.modeIndex),ve&&ve.mode&&(e.game_mode_name=ve.mode.name),U&&(e.match_id=U),ve&&ve.roundId&&(e.round_id=ve.roundId),ve&&ve.sessionId&&(e.game_session_id=ve.sessionId),me&&me.socket&&me.socket.url&&(e.server=(new URL(me.socket.url).hostname+"").replace("cf_","")),e.server_type=ve&&ve.isCustom?"custom":"quickplay")})),window.switchServer=q,window.checkedSwitchServer=Y;var K=null;function X(e){he.play("tick_0",.2),hn(S.t("respawn.auto",e-1)),e>1&&dn?K=setTimeout((function(){dn?X(e-1):hn(null)}),1e3):hn(null)}window.showGames=function(e){windows[9].hostType=e||null,showWindow(10)};const Z={type:"Scene",name:"Main",get children(){return hi||=!0,ce.scene.children||[]}},J={parent:{type:"Scene",name:"Main",get children(){return hi||=!0,ce.scene.children||[]}}};function Q(e,t,i){try{hostGameMsg.innerHTML=e+(t?"<a class='menuLink' style='float:right' onclick='copyGameLink(this, &quot;"+t+"&quot;)'>Click to Copy</a>":""),hostActionH.style.display=t?"none":"block",teamLink1.innerHTML=t&&i?u.teamNames[0]+" Team Link <a class='menuLink' style='float:right' onclick='copyGameLink(this, &quot;"+t+"&quot;,1)'>Copy</a>":"",teamLink2.innerHTML=t&&i?u.teamNames[1]+" Team Link <a class='menuLink' style='float:right' onclick='copyGameLink(this, &quot;"+t+"&quot;,2)'>Copy</a>":""}catch(e){}var n=document.getElementById("startServBtn");if(n&&(n.style.background="#4582d1",n.style.pointerEvents="all"),(n=document.getElementById("rehostServBtn"))&&(n.style.background="var(--red)",n.style.pointerEvents="all"),t){var s=document.getElementById("rawMapData");s&&(s.value=""),ee.toggleWindow(!1),function(e){var t=H.generateHref(e);!we.tmp.streamMode&&FRVR.channelCharacteristics.allowNavigation&&window.history.replaceState({},"Krunker",t);windows[1].lastLoadTime=0,U=e}(t)}Pr=null,Rr=null,Er=0,!t&&j&&(location.href=_(window.location,location.origin,k))}Object.defineProperty(window,"rentDediServer",{writeable:!1,value:function(e,t){var i=null;dediHostErr.style.display="block";var n=windows[7].dediServers.data[windows[7].servInd],s=n.CONF?JSON.parse(n.CONF):null;if(n.TRM<=0&&(s=null),Pr||s||(i="Please select a game to host"),i)dediHostErr.innerHTML=i,dediHostErr.style.color="#ff3232";else{var a=document.getElementById("rentServBtn");a&&(a.style.display="none");var r=document.getElementById("updDediServBtn");r&&(r.style.display="none"),dediHostErr.innerHTML="Please Wait...",dediHostErr.style.color="#fff",me.send("rdsrv",e,{typ:dediHostDur.value,mid:Pr?Pr.id:s.gid,gnm:Pr?Pr.name:s.mn},t)}}}),Object.defineProperty(window,"createPrivateRoom",{writeable:!1,value:function(e){if(e=ct&&e&&Re&&Re.canRehost,u.isComp)hostGameMsg.innerHTML="<span class='error'>"+S.t("custom.host.ranked")+"</span>";else{for(var t=u.hostTypes[Er||0]||{},i=[],n=document.getElementById("rawMapData"),s=0;s<xe.length;s++){if(13!=xe[s])(o=document.getElementById("gameMap"+s))&&o.checked&&i.push(s)}if(0!=i.length||Pr||n&&""!=n.value){var a=windows[7];if(!t.comp&&!t.restrict){var r=[];for(s=0;s<ne.length;s++){if(!ne[s].preventCustomGames||Re&&Re.isDev)(o=document.getElementById("gameMode"+s))&&o.checked&&r.push(s)}if(0==r.length)return void(hostGameMsg.innerHTML="<span class='error'>"+S.t("custom.mode.missing")+"</span>");var o,l=[];for(s=0;s<ve.classConfig.length;s++)(o=document.getElementById("gameClass"+s))&&o.checked&&l.push(s);if(0==l.length)return void(hostGameMsg.innerHTML="<span class='error'>"+S.t("custom.class.missing")+"</span>");if(a.costVal&&(!Re||Re.funds<a.costVal))return void(hostGameMsg.innerHTML="<span class='error'>"+S.t("funds.insufficient")+"</span>");var c=document.getElementById("passCode");if(c&&""!=c.value&&c.value.length>16)return void(hostGameMsg.innerHTML="<span class='error'>"+S.t("custom.passcode.long")+"</span>")}var d=document.getElementById("shareToHub"),h=document.getElementById("krRewards"),p=document.getElementById("defaultSetts"),f=document.getElementById("makePrivate"),m={private:!!f&&f.checked,krRewards:!!h&&h.checked,defaultSetts:!!p&&p.checked,share:!!d&&d.checked,customMap:Pr?Pr.name:null,rawMapData:n?n.value:null,maps:i,modes:r,classes:l,override:Er,passCode:c?c.value:null};for(s=0;s<u.serverConfig.length;s++){let e;y=document.getElementById("customS"+u.serverConfig[s].varN),e=u.serverConfig[s].bool?y?y.checked:0:u.serverConfig[s].input?y?ae.sanitizeStr(y.value):0:u.serverConfig[s].select?y&&null!=u.serverConfig[s].options[y.value]?parseInt(y.value):u.serverConfig[s].def:y?parseFloat(y.value):u.serverConfig[s].def||0,m[u.serverConfig[s].varN]=e}if(!t.comp&&!t.restrict){for(s=0;s<u.serverUpg.length;s++){var g=u.serverUpg[s].varN;(y=document.getElementById("servUp"+g))&&(m[g]=y.checked)}if(a.wepConf)for(var v=0;v<ve.weapons.length;v++)for(s=0;s<u.weaponConfig.length;s++){if(null==ve.weapons[v][u.weaponConfig[s].varN])continue;var y=document.getElementById("customW"+v+u.weaponConfig[s].varN);let e;if(u.weaponConfig[s].bool)e=y?y.checked:0;else if(u.weaponConfig[s].select)e=y&&null!=u.weaponConfig[s].options[y.value]?parseInt(y.value):u.weaponConfig[s].def;else if(u.weaponConfig[s].input)e=y?y.value:"",ae.isString(e)||(e=ve.weapons[v][u.weaponConfig[s].varN]),/[^\w \-\|]+/gim.test(e)&&(e=ve.weapons[v][u.weaponConfig[s].varN]),e.length>(u.weaponConfig[s].len||16)&&(e=ve.weapons[v][u.weaponConfig[s].varN]);else{var b=u.weaponConfig[s].decs;e=y?ae.fixFloat(y.value,b):0}e!=ve.weapons[v][u.weaponConfig[s].varN]&&(m.weps||(m.weps={}),m.weps[v]||(m.weps[v]={}),m.weps[v][u.weaponConfig[s].varN]=e)}if(a.clsConf)for(v=0;v<ve.classes.length;v++)for(s=0;s<u.classConfig.length;s++){if(null==ve.classes[v][u.classConfig[s].varN])continue;var y=document.getElementById("customC"+v+u.classConfig[s].varN);let e;if(u.classConfig[s].bool)e=y?y.checked:0;else if(u.classConfig[s].select)e=y&&null!=u.classConfig[s].options[y.value]?parseInt(y.value):u.classConfig[s].def;else if(u.classConfig[s].input)e=y?y.value:"",ae.isString(e)||(e=ve.classes[v][u.classConfig[s].varN]),/[^\w \-\|]+/gim.test(e)&&(e=ve.classes[v][u.classConfig[s].varN]),e.length>(u.classConfig[s].len||16)&&(e=ve.classes[v][u.classConfig[s].varN]);else{b=u.classConfig[s].decs;e=y?ae.fixFloat(y.value,b):0}e!=ve.classes[v][u.classConfig[s].varN]&&(m.cls||(m.cls={}),m.cls[v]||(m.cls[v]={}),m.cls[v][u.classConfig[s].varN]=e)}if(a.effectConf)for(v=0;v<ve.effects.length;v++)for(s=0;s<u.effectConfig.length;s++){if(null==ve.effects[v][u.effectConfig[s].varN])continue;y=document.getElementById("customE"+v+u.effectConfig[s].varN);let e;if(u.effectConfig[s].bool)e=y?y.checked:0;else if(u.effectConfig[s].select)e=y&&null!=u.effectConfig[s].options[y.value]?parseInt(y.value):u.effectConfig[s].def;else if(u.effectConfig[s].input)e=y?y.value:"",ae.isString(e)||(e=ve.effects[v][u.effectConfig[s].varN]),/[^\w \-\|]+/gim.test(e)&&(e=ve.effects[v][u.effectConfig[s].varN]),e.length>(u.effectConfig[s].len||16)&&(e=ve.effects[v][u.effectConfig[s].varN]);else{b=u.effectConfig[s].decs;e=y?ae.fixFloat(y.value,b):0}e!=ve.effects[v][u.effectConfig[s].varN]&&(m.prks||(m.prks={}),m.prks[v]||(m.prks[v]={}),m.prks[v][u.effectConfig[s].varN]=e)}}hostGameMsg.innerHTML=S.t("generic.wait"),(y=document.getElementById("startServBtn"))&&(y.style.background="#595959",y.style.pointerEvents="none"),(y=document.getElementById("rehostServBtn"))&&(y.style.background="#595959",y.style.pointerEvents="none"),Re?me.send("custom",m,void 0,!!e):M("hosting",(function(t,i){i?Q(S.t("custom.tryagain")):me.send("custom",m,t,!!e)}))}else hostGameMsg.innerHTML="<span class='error' style='margin-bottom:10px'>"+S.t("custom.map.missing")+"</span>"}}}),Object.defineProperty(console,"_commandLineAPI",{get:function(){throw""}}),Object.defineProperty(window,"requestAnimFrame",{writeable:!1,value:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}});var $=Date.now();window.requestAnimFrameF=function(e,t){var i=Math.max(0,16-(t-$)),n=window.setTimeout((function(){e(t+i)}),i);return $=t+i,n};var ee=i(317);ee.toggleMobileUI(f());var te=i(15),ie=i(283),ne=i(67),se=i(265),ae=i(1),re=i(298),oe=i(319),le="true"==getSavedVal("kro_setngss_shaderRendering"),ce=new(i(125))(re,ee,!1,le,f()),de=ce.THREE,he=window.SOUND=new(i(268)),ue=new(i(279))(ce),pe=new(i(347))(ce),fe=i(269),me=i(270),ge=new(i(348)),ve=new oe(!1,0,null,ce,null,he,ue,re,me);ee.Game=ve;var ye=new(i(349))(ce,ee,ve,me,re,f());ve.controls=ye;var be=i(272).init.game(ve,S),we=new(i(353))(ce,ue,ye,ve,F,be,ee,re,me,S,w);ve.settings=we,ve.ui=ee,window.canShowNFTs||ae.removeNFT(ve.store);var xe=i(280)(),Se=i(289),Me=i(294),ke=i(354),_e=i(295);const Te=i(12),Ce=i(296),Ie=i(355);var Ae,Re,Pe,Ee,De,Oe,Le=new(i(377)),je=i(39),ze=null,Be=null;Object.defineProperty(ve,"tmpPlayer",{get:()=>Ae}),ce.updateGameEnvironment=function(e,t){ce.updateEnvironment(ve,e,t)};var Ne,Fe=null;window.locked=!1;var He,Ue,Ve,Ge,We,qe,Ye,Ke,Xe,Ze,Je,Qe,$e={},et={},tt=0,it=new de.Ray,nt=[],st=null,at=[],rt=[],ot=new de.Vector3,lt=new de.Plane,ct=!1,dt=null,ht=!1,ut=0,pt=0,ft=0,mt=30,gt=0,vt=0,yt=-1,bt=0,wt=!1,xt=!1,St=[],Mt=null,kt=0,_t=0,Tt=[],Ct=[],It=!1,At=0,Rt=null,Pt=!1,Et=!1,Dt=null,Ot=getSavedVal("testCode"),Lt=0,jt=!1,zt=!1,Bt={},Nt=!1;FRVR.tracker.addExtraFieldFunction((function(e){Re&&(e.krunker_user_id=Re.id)})),window.onbeforeunload=function(){if(Bd(),jt)return!0};var Ft=yd("mute_chat"),Ht=yd("mute_voice");Ft&&Ft.length||(Ft=[]),Ht&&Ht.length||(Ht=[]);var Ut=parseInt(getSavedVal("krk_advanced"))?"advanced":"basic",Vt=null;function Gt(e,t){u.serverScripting&&ve&&ve.mainScript&&ve.mainScript.onNetworkMessage&&ve.mainScript.onNetworkMessage(e,t)}u.isProd||((Vt=document.createElement("style")).innerHTML="#onetrust-consent-sdk {display: none!important}",document.head.append(Vt));var Wt=getSavedVal("krk_favList")||"[]";window.updateFavList=function(e,t){if(!t)try{e=JSON.parse(e)}catch(t){e=[]}Wt=e,saveVal("krk_favList",JSON.stringify(e)),Fo(!0)},updateFavList(Wt);var qt=getSavedVal("krk_custRet")||"[]";window.setCustomRets=function(e,t){if(!t)try{e=JSON.parse(e)}catch(t){e=[]}qt=e,saveVal("krk_custRet",JSON.stringify(e))},setCustomRets(qt);var Yt=getSavedVal("kro_setngss_customADSDot");(Yt=Jt(Yt))&&(qt.push(["OLD",Yt]),setCustomRets(qt,!0),Yt=null,deleteVal("kro_setngss_customADSDot"));var Kt=getSavedVal("krk_custScps")||"[]";window.setCustomScopes=function(e,t){if(!t)try{e=JSON.parse(e)}catch(t){e=[]}Kt=e,saveVal("krk_custScps",JSON.stringify(e))},setCustomScopes(Kt);var Xt=getSavedVal("kro_setngss_customScope");(Xt=Jt(Xt))&&(Kt.push(["OLD",Xt]),setCustomScopes(Kt,!0),Xt=null,deleteVal("kro_setngss_customScope"));var Zt=getSavedVal("krk_custImgs")||"[]";function Jt(e){return e&&/\.(jpg|jpeg|png|gif|webp|ico)/.test(e)?(e&&e.replace&&(e=e.replace(/\u0027/g,"").replace(/\u0022/g,"")),e&&ae.isURL(e)&&!/\.svg/.test(e)?e:null):null}window.setCustomImages=function(e,t){if(!t)try{e=JSON.parse(e)}catch(t){e=[]}Zt=e,saveVal("krk_custImgs",JSON.stringify(e))},setCustomImages(Zt),Object.defineProperty(window,"selectImage",{writeable:!1,value:function(e,t,i){e>=0&&(t=ae.assetsUrl("/img/backgrounds/"+_e[e].id+"."+(_e[e].type||"png"))),setSetting(i,t),clearPops()}}),Object.defineProperty(window,"removeImage",{writeable:!1,value:function(e,t){ea(window.event),Zt[e]&&(Zt.splice(e,1),setCustomImages(Zt,!0),imagePopup(t))}});var Qt=["Backgrounds","Overlays","Scopes","Reticles","Icons"];window.imagePopup=function(e,t){var i="<div class='imageListHeader'>Image Collection<div class='imageListAdd' onclick='window.imageNewPopup(&quot;"+e+"&quot;)' onmouseenter='playTick()'>Add Image</div></div>";t=ae.limitMM(parseInt(t)||0,0,Qt.length-1),i+="<div id='skinList' style='margin-top:18px'>",i+="<div id='imagesTabLayout'>",i+=Qt.map(((i,n)=>"<div class='imageTab "+(n==t?"tabAIMG":"")+"' onmouseenter='playTick()'\n\t\tonclick='playSelect(0.1);imagePopup(&quot;"+e+"&quot;, "+n+")'>"+i+"</div>")).join("\n"),i+="</div>";for(var n=0;n<Zt.length;++n)if(Ee=Zt[n]){var s=Ee[0].replace(/[^a-zA-Z0-9 _-]+/gim,""),a=Jt(Ee[1]);if(ae.limitMM(parseInt(Ee[2])||0,0,Qt.length-1)!=t)continue;i+="<div class='imageListItem'><div class='imageActionOvrl'><div class='imageActionHol'><div class='imageActionB' onclick='selectImage(-2, &quot;"+a+"&quot;, &quot;"+e+"&quot;)' title='Select' style='margin-top:0px;'><span class='material-icons' style='font-size:50px;color:#fff;'>play_arrow</span></div><div class='imageActionSep' style='margin-left:2px'></div><div class='imageActionB' onclick='removeImage("+n+", &quot;"+e+"&quot;)' title='Delete' style='margin-top:0px;'><span class='material-icons' style='font-size:50px;color:#fff;'>delete_forever</span></div></div></div><div class='imageListThumbH'><img loading='lazy' class='imageListThumb' draggable='false' src='"+(a||"")+"' onmouseenter='playTick()' /></div><div class='imageListName'>"+(s||"Custom")+"<span class='imageListType'>Custom</span></div></div>"}for(n=0;n<_e.length;++n)if(Ee=_e[n]){if(0!=t)continue;a=ae.assetsUrl("/img/backgrounds/"+Ee.id+"."+(Ee.type||"png"));i+="<div class='imageListItem'><div class='imageActionOvrl'><div class='imageActionHol'><div class='imageActionB' onclick='selectImage("+n+", null, &quot;"+e+"&quot;)' title='Select' style='margin-top:0px;'><span class='material-icons' style='font-size:50px;color:#fff;'>play_arrow</span></div></div></div><div class='imageListThumbH'><img loading='lazy' class='imageListThumb' draggable='false' src='"+(a||"")+"' onmouseenter='playTick()' /></div><div class='imageListName'>"+Ee.name+"<span class='imageListType'>Default</span></div></div>"}i+="</div>",genericPopup(i,"imagePop")},window.imageNewPopup=function(e){var t="<div class='imageListHeader' style='font-size: 26px;'>New Image</div><div style='font-size:20px;color:#fff'><div style='margin-top: 3px;font-size: 22px;color: rgba(255, 255, 255, 0.7);'>Name:<input type='text' id='newCustName' class='inputGrey2' placeholder='Name'></div><div style='margin-top: 3px;font-size: 22px;color: rgba(255, 255, 255, 0.7);'>Category:<select id='newCustCat' class='inputGrey2'>"+Qt.map(((e,t)=>"<option value='"+t+"'>"+e+"</option>")).join("\n")+"</select></div><div style='margin-top: 4px;font-size: 22px;color: rgba(255, 255, 255, 0.7);'>Image:<input type='url' id='newCustImg' class='inputGrey2' placeholder='Image URL'></div><div class='mapFndB' onclick='window.addNewImage(&quot;"+e+"&quot;)' onmouseover='playTick(0.1)' style='background-color:#fc5a4e;width: 380px;margin-top: 10px;'>Add</div></div>";genericPopup(t,"imageNewPop")},window.addNewImage=function(e){var t=document.getElementById("newCustImg"),i=document.getElementById("newCustName"),n=document.getElementById("newCustCat");if(!(i&&t&&t.value&&i.value))return zs(null,"Something Went Wrong");var s=i.value.replace(/[^a-zA-Z0-9 _-]+/gim,"");if(!s.length)return zs(null,"Invalid Name");var a=Jt(t.value);if(!a)return zs(null,"Invalid Image");var r=ae.limitMM(parseInt(n?n.value:0)||0,0,Qt.length-1);Zt.push([s,a,r]),setCustomImages(Zt,!0),imagePopup(e)};var $t=getSavedVal("krk_lastMod")||"";window.setLastMod=function(e){$t=e,saveVal("krk_lastMod",e)},setLastMod($t);var ei,ti,ii,ni,si=1;window.scaleBase=function(e,t){if(void 0!==we.tmp.uiScaling){var i=window.innerHeight,n=window.innerWidth;if(t||ti!=i||ii!=n){ti=i,ii=n;var s=[uiBase];if(we.tmp.uiScaling){var a=1700*we.tmp.scaleUI,r=900*we.tmp.scaleUI,o=n/a,l=i/r;l<o?(si=l,s.forEach((e=>{e.style.transform="scale("+l.toFixed(3)+")",e.style.width=(n/l).toFixed(3)+"px",e.style.height=r+"px"}))):(si=o,s.forEach((e=>{e.style.transform="scale("+o.toFixed(3)+")",e.style.width=a+"px",e.style.height=(i/o).toFixed(3)+"px"})))}else s.forEach((e=>{e.style.transform="",e.style.width="",e.style.height=""}));ei=i/si/693,re.resize(),ce.resize()}}},window.addEventListener("resize",scaleBase),window.refreshChat=function(){for(;chatList.childNodes.length>=u.chatListLength;){var e=chatList.childNodes[0];St[parseInt(e.id.replace("chatMsg_",""))].life=0,chatList.removeChild(e)}},window.refreshFeed=function(e){for(;killFeed.childNodes.length>=e;){var t=killFeed.childNodes[0];St[parseInt(t.id.replace("feed_",""))].life=0,killFeed.removeChild(t)}},window.updateChatTimer=function(e){if(St)for(var t in St)St[t].life-=1e3*e},window.switchLeaderboard=function(e,t){(ve&&ve.mode&&ve.mode.forceOldScoreboard||t)&&(e=!0);var i=!!e;we.tmp.leaderType=e?0:1,leaderboardHolder.style.display=i?"block":"none",killFeed.style.display=!i&&we.list.showKills.val?"inline-grid":"none",document.getElementsByClassName("topRightCounters")[0].style.width=i?"400px":"auto",Mt&&Hl(Mt)},window.refreshClassDisplay=function(){xs&&Is()},window.updatePacketLoop=function(e){un(),e?ni=setInterval(un,1e3):clearInterval(ni)};var ai=!1;function ri(e){ce.addSphere(e.x,e.y-.25,e.z,.5,.5,.5,{colr:16711680})}window.toggleChal=function(e){ai=e},window.updateWeaponShow=function(e,t){if(Ae)if(0==e)for(var i=0;i<Ae.loadout.length;i++)n=ve.weaponConfig[Ae.loadout[i]],Ae.weaponMeshes[i]&&(n.melee?(Ae.armMeshes[0]&&(Ae.armMeshes[0].visible=t),Ae.armMeshes[1]&&(Ae.armMeshes[1].realMat||(Ae.armMeshes[1].realMat=Ae.armMeshes[1].material),Ae.armMeshes[1].material=t?Ae.armMeshes[1].realMat:ce.invisMat)):Ae.mergedArmMeshes[i]&&(Ae.mergedArmMeshes[i].visible=t));else if(1==e){var n;for(i=0;i<Ae.loadout.length;i++)(n=ve.weaponConfig[Ae.loadout[i]]).secondary||n.melee||!Ae.weaponMeshes[i]||Ae.loadoutIndex!=i||(Ae.weaponMeshes[i].visible=t)}else if(2==e)for(i=0;i<Ae.loadout.length;i++)ve.weaponConfig[Ae.loadout[i]].secondary&&Ae.weaponMeshes[i]&&Ae.loadoutIndex==i&&(Ae.weaponMeshes[i].visible=t);else if(3==e)for(i=0;i<Ae.loadout.length;i++)ve.weaponConfig[Ae.loadout[i]].melee&&Ae.weaponMeshes[i]&&Ae.loadoutIndex==i&&(Ae.weaponMeshes[i].visible=t)},window.updateFov=function(e,t,i){if(Ae&&i>-1){if(Ae.currentWeaponId!=i)return;t=null==t?we.tmp[(0==e?"fov":"fpsFOV")+"_"+i]:t}else t=we.tmp[0==e?"fov":"fpsFOV"];0==e?ce.setFov(t):ce.setFPSFov(t)},window.bundleFilters=function(e,t){if(null!=t){var i="saturate("+t+"%)";return re.canvas.style.filter=i,ce.renderer.domElement.style.filter=i,void(uiBase.style.filter=i)}var n=[],s=1==e;1!=we.tmp[s?"menuSaturation":"saturationn"]&&n.push("saturate("+100*we.tmp[s?"menuSaturation":"saturationn"]+"%)"),0!=we.tmp[s?"menuHue":"hue"]&&n.push("hue-rotate("+3.6*we.tmp[s?"menuHue":"hue"]+"deg)"),s?n.length?uiBase.style.filter=n.join(" "):uiBase.style.removeProperty("filter"):n.length?(re.canvas.style.filter=n.join(" "),ce.renderer.domElement.style.filter=n.join(" ")):(re.canvas.style.removeProperty("filter"),ce.renderer.domElement.style.removeProperty("filter"))},window.updateAimDot=function(e,t){var i=Me[e];if(-1==e)return ce.aimDot.display=!1;-2==e?ce.aimDot.savedCustom=t||"":i&&(t=ae.assetsUrl("/textures/reticles/reticle_"+i.id+"."+(i.type||"png"))),t=t&&t.length&&ae.isURL(t)&&!/\.svg/.test(t)?t:ae.assetsUrl("/textures/reticles/reticle_0.png"),/\.(jpg|jpeg|png)/.test(t)?(ce.aimDot.image.isReady=!1,ce.aimDot.image.onload=()=>ce.aimDot.image.isReady=!0,ce.aimDot.image.src=t,ce.aimDot.custom=!1):(aimDot.src=t,ce.aimDot.custom=!0),ce.aimDot.display=!0,Gn=e};window.updateScope=function(e,t){var i=ke[e];if(-1==e)return ce.aimRecticle.display=!1;-2==e?ce.aimRecticle.savedCustom=t||"":i&&(t=ae.assetsUrl("/textures/scopes/scope_"+i.id+"."+(i.type||"png"))),t=t&&t.length&&ae.isURL(t)&&!/\.svg/.test(t)?t:ae.assetsUrl("/textures/scopes/scope_0.png"),/\.(jpg|jpeg|png)/.test(t)?(ce.aimRecticle.image.isReady=!1,ce.aimRecticle.image.onload=()=>ce.aimRecticle.image.isReady=!0,ce.aimRecticle.image.src=t,ce.aimRecticle.custom=!1):(recticleImg.src=t,ce.aimRecticle.custom=!0),ce.aimRecticle.display=!0,qn=e},we.init(),window.checkTerms=function(e){e?(consentBlock.style.display="none",saveVal("consent",1)):function(e){Ad&&(Ad.classList.remove("shakeEffect"),e.offsetWidth);(Ad=e).classList.add("shakeEffect")}(document.getElementById("consentShake"))};Math.PI2=2*Math.PI,Number.prototype.map=function(e,t,i,n){return(this-e)*(n-i)/(t-e)+i},Math.lerpAngle=function(e,t,i){Math.abs(t-e)>Math.PI&&(e>t?t+=Math.PI2:e+=Math.PI2);var n=t+(e-t)*i;return n>=0&&n<=Math.PI2?n:n%Math.PI2},console.warn=function(){},console.info=function(){};var oi=String.fromCharCode(115,115,106,117,110,107,101,114,99,111,110,102,105,103).toLowerCase();const li=!!x&&!!localStorage&&!!localStorage.hasOwnProperty(oi);window.toggleStrm=function(e){FRVR.channelCharacteristics.allowNavigation&&window.history.pushState(document.title,document.title,e?"/":H.generateHref(U)),Hl(Mt)};var ci=!1;ee.loading=!1;const di=!!x&&!!localStorage&&!!localStorage.hasOwnProperty(h);var hi=!1;function ui(e){ee.loading=!1,en(),Jc(),e&&Rc(-1,null,e,2,"#ed4242")}Object.defineProperty(window,"enterGame",{writeable:!1,value:function(e){if(He)ui();else{if(K&&(clearTimeout(K),K=null,hn(null)),e&&window.setSpect(!1),ve.isSandbox&&(!ci||window.spectating&&!zi)){var t=null==Be?jn:Be.team,i=Be?Be.checkPoint:null,n=Be?Be.checkPointList:[],s=Be?Be.customLoadout:null;s=ze.mode.keepLoadout?s:null;var a=Be?Be.weaponTier:0,r=Be?Be.headMlt:1,o=i&&ze.map.manager.objects[i]?ze.map.manager.objects[i]:ze.getSpawnPoint(t,Be),l=(p=ze.classConfig[parseInt(kt)]).loadout,c=[null==ss[l[0]]?-1:ss[l[0]],null!=ss[os]&&p.secondary?ss[os]:-1],d=[-2==rs[0]?ws(null,Te.CHARM):parseInt(rs[0]),null!=rs[1]&&p.secondary?-2==rs[1]?ws(null,Te.CHARM):parseInt(rs[1]):-1];if(!zi){var h=ze.weaponConfig[l[0]].forceAttach;ve.store.skins[c[0]]&&ve.store.skins[c[0]].forceAttach&&(h=!0);var u=ze.mode&&ze.mode.prop?ze.players.randomProp():null;(Be=ze.players.add(me.socketId,null,0,0,0,window.isBotFTUE?"Guest_2":"Local User",parseInt(kt),c,parseInt(Hn),parseInt(Un),parseInt(Jn),parseInt(Qn),parseInt(Xn),parseInt(Zn),parseInt(es),parseInt(ts),parseInt(is),parseInt(Kn),zn,Bn,parseInt(Fn),h?0:parseInt(Vn),parseInt(ls),p.secondary?parseInt(os):null,u,null,null,!1,s,null,null,null,r,d,[],!1)).team=t||Be.team,Be.x=o.x,Be.y=o.y,Be.z=o.z,Be.fakeX=Be.x,Be.fakeY=Be.y,Be.fakeZ=Be.z,Be.setInitPos(),Be.xDire=-((o.dir||0)+1)*Math.PI/2,Be.checkPoint=i,Be.checkPointList=n,Be.weaponTier=a,Be.sprayIndex=parseInt(No),Be.playerCardIndex=parseInt($n),Be.streakIndexs=[parseInt(us),parseInt(ps),parseInt(fs)],Be.maxPossibleStreak=0,Be.streakIndexs.forEach((e=>{ze.streaks[e]&&ze.streaks[e].kills&&(Be.maxPossibleStreak=ze.streaks[e].kills)})),Be.spectating=zi,Be.spawnTime=Date.now(),zi&&(Be.active=!1,(!ze.waitTimers||ze.waitTimers[0].noJoin||ze.waitTimers[0].contTime)&&(Be.lives=0)),(Be.active&&!Be.spawned||Re&&Re.isDev)&&(Rt||(Be.affectStats=!0),Be.spawned=!0),Be.send("start",ae.getTime(ze.gameTimer),Be.team,zi,Be.challMode,ze.moveLock?1:0,1,null,Be.classIndex),ze.players.sync(),ze.players.syncLeaders(!0)}ci=!0,ee.toggleMenu(!1)}else if(me.connected&&(!ci||window.spectating&&!zi)){re.bloodOpacity=0,bloodDisplay.style.display="none",ci=!0,ye.idleTimer=0,ee.toggleMenu(!1),instructions.innerHTML="",ee.loading=!0;var p=parseInt(kt);l=ve.classConfig[p].loadout,c=[Pt||null==ss[l[0]]?-1:-2==ss[l[0]]?ws(l[0]+1):ss[l[0]],Pt?-1:null!=ss[os]&&ve.classConfig[p].secondary?-2==ss[os]?ws(os+1):ss[os]:-1],d=[Pt?-1:-2==rs[0]?ws(null,Te.CHARM):parseInt(rs[0]),Pt?-1:null!=rs[1]&&ve.classConfig[p].secondary?-2==rs[1]?ws(null,Te.CHARM):parseInt(rs[1]):-1];me.send("en",[p,Pt?-1:-2==No?ws(null,Te.SPRAY):parseInt(No),c,Pt?-1:-2==Jn?ws(null,Te.HAT):parseInt(Jn),Pt?-1:-2==Xn?ws(null,Te.BODY):parseInt(Xn),parseInt(os),zi?1:0,ai?1:0,jn,Pt?-1:-2==Kn?ws(null,Te.MELEE):parseInt(Kn),zn,parseFloat(we.tmp.lagComp),parseInt(Vn),parseInt(ls),-2==Fn?ws(null,Te.DYE):parseInt(Fn),Pt?-1:-2==Un?ws(null,Te.SHOE):parseInt(Un),Pt?-1:-2==es?ws(null,Te.WAIST):parseInt(es),Bn,Nn,we.tmp.anonMode?1:0,Pt?-1:-2==Hn?ws(null,Te.FACE):parseInt(Hn),Pt?-1:-2==ts?ws(null,Te.PET):parseInt(ts),we.tmp.verifiedBadge?1:0,we.tmp.premiumBadge?1:0,we.tmp.customBadge?1:0,Pt?-1:-2==is?ws(null,Te.WRIST):parseInt(is),us,ps,fs,d,Pt?-1:-2==Zn?ws(null,Te.BACK):parseInt(Zn),Pt?-1:-2==Qn?ws(null,Te.HEAD):parseInt(Qn),Pt?-1:-2==$n?ws(null,Te.PLAYER_CARD):parseInt($n)],16,18,!!di,!!hi,!1,!1,!!Reflect.getOwnPropertyDescriptor(Object.prototype,"createDate"),li,""==windows[11].header?void 0:windows[11].header+"",!!window.hasOwnProperty(I),!1)}chatList.scrollTop=chatList.scrollHeight-chatList.clientHeight}}});var pi,fi=!1,mi=!1,gi=null;function vi(e,t){return mi?void Rc(-1,null,"Xsolla is currently loading",2):(yi(),mi=!0,XPayStationWidget.off(),XPayStationWidget.on(XPayStationWidget.eventTypes.CLOSE,(function(){mi=!1,"troubled"==gi?purchaseError("xsolla"):purchaseCancel("xsolla"),gi=null})),XPayStationWidget.on(XPayStationWidget.eventTypes.INIT,(function(){XPayStationWidget.open()})),XPayStationWidget.on(XPayStationWidget.eventTypes.STATUS,(function(e,t){gi=t.paymentInfo.status})),XPayStationWidget.on(XPayStationWidget.eventTypes.STATUS_DONE,(function(e,t){mi=!1,me.send("xsin",t.paymentInfo.invoice)})),XPayStationWidget.on(XPayStationWidget.eventTypes.STATUS,(function(e,t){gi=t.paymentInfo.status})),void window.XPayStationWidget.init({access_token:e,lightbox:{width:"740px",height:"630px",spinner:"round"},sandbox:t}))}function yi(){mi=!1,gi=null;var e=document.querySelector(".xpaystation-widget-lightbox");e&&e.remove()}function bi(e,t,i){if(fi)window.XPayStationWidget&&vi(e,t);else{var n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src="//static.xsolla.com/embed/paystation/1.0.7/widget.min.js",n.addEventListener("load",(function(){vi(e,t)}),!1),document.getElementsByTagName("head")[0].appendChild(n),fi=!0}}function wi(e){return u.apiURL+e}window.canShowPaypal&&((pi=document.createElement("script")).type="text/javascript",pi.async=!0,pi.src="//www.paypalobjects.com/api/checkout.min.js",document.getElementsByTagName("head")[0].appendChild(pi));var xi=0,Si=!1;function Mi(e,t){Re&&(null==e&&null==e||(Re.funds=parseInt(e)),null==t&&null==t||(Re.junk=parseFloat(t))),updateMenuAccountData()}function ki(e,t,i,n,s){if(n&&logEventFRVR("item_flow",{item:"junks",flow_type:"source",amount:n,item_context:"challenge",item_context_details:"type_challenge",wallet:Re?Re.junk:0}),s&&logEventFRVR("item_flow",{item:"krunkers",flow_type:"source",amount:s,item_context:"challenge",item_context_details:"type_challenge",wallet:Re?Re.funds:0}),Re&&((null!=t||null!=t)&&(Re.funds=parseInt(t)),(null!=i||null!=i)&&(Re.junk=parseFloat(i)),e&&e.length))for(var a=0;a<e.length;a++)Re.addSkin(e[a]);updateMenuAccountData()}function _i(e,t){logEventFRVR("item_flow",{item:"junks",flow_type:"source",amount:parseFloat(t).toFixed(2),item_context:"map_rotation",wallet:Re?Re.junk:0}),(Re&&null!=e||null!=e)&&(Re.junk=parseFloat(e)),Rc(-1,null,"<span style='color:#fff'>You</span> found <span style='color:#cc51f8'>["+parseFloat(t).toFixed(2)+"]</span> Junk",1),Bt.junk=(Bt.junk||0)+parseFloat(t)}function Ti(e,t,i){if(e)zs(null,e);else{if(i&&i.length)for(var n=0;n<i.length;n++)Re.addSkin(i[n]);zs("SUCCESS",null,"Bundle Recieved"),updateMenuAccountData(),updateWindow(null,!0),ee.toggleMenuHider(!0),purchaseLoad.style.display="none",logEventFRVR("survey_bundle_recieved")}}function Ci(e,t,i,n,s,a,r,o){if(ye.idleTimer=0,yi(),t)purchaseError(e,t,"kr_"+ve.store.purchases[parseInt(n)||0].val);else{var l=ve.store.purchases[n].val;Re&&(ae.isNumber(n)&&(zs("SUCCESS",null,S.t("purchase.kr.success",ae.commaNumber(l))),logEventFRVR("item_flow",{item:"krunkers",flow_type:"source",amount:l,item_context:"iap_shop",wallet:Re?Re.funds:0})),Re.funds=i),updateMenuAccountData(),updateWindow(null,!0),ee.toggleMenuHider(!0),purchaseLoad.style.display="none",logEventFRVR("iap_request_payment_success",{product_id:"kr_"+l,price_amount:s,price_currency_code:a,payment_provider:e,transaction_id:r,external_transaction_id:o,productId:"kr_"+l,priceValue:s,currencyCode:a,provider:e,transactionId:o,trackingName:l+" KR",label:l+" KR"})}}function Ii(e,t,i,n,s,a,r,o){ye.idleTimer=0,yi();var l=ve.store.premium[parseInt(i)||0];t?purchaseError(e,t,"premium_"+l.val):(Re&&(l&&zs("SUCCESS",null,"Premium Purchased"),Re.premiumT=n),updateMenuAccountData(),updateWindow(null,!0),ee.toggleMenuHider(!0),purchaseLoad.style.display="none",logEventFRVR("iap_request_payment_success",{product_id:"premium_"+i,payment_provider:e,price_amount:s,price_currency_code:a,transaction_id:r,external_transaction_id:o,productId:"premium_"+i,provider:e,priceValue:s,currencyCode:a,transactionId:o,trackingName:"Premium "+i,label:"premium_ "+i}))}function Ai(e,t,i,n,s,a,r,o,l,c){if(ye.idleTimer=0,yi(),t)purchaseError(e,t,"bundle_"+a);else{if(Re){if(null==i&&null==i||(Re.funds=parseInt(i)),null==n&&null==n||(Re.junk=parseFloat(n)),s&&s.length)for(var d=0;d<s.length;d++)Re.addSkin(s[d]);zs("SUCCESS",null,"Bundle Purchased")}if(Array.isArray(Ri)){var h=Ri.findIndex((e=>e.ID==a));Ri[h].OWNED=!0}updateMenuAccountData(),updateWindow(null,!0),ee.toggleMenuHider(!0),purchaseLoad.style.display="none",logEventFRVR("iap_request_payment_success",{product_id:"bundle_"+a,payment_provider:e,price_amount:r,price_currency_code:o,transaction_id:l,external_transaction_id:c,productId:"bundle_"+a,provider:e,priceValue:r,currencyCode:o,transactionId:c,trackingName:"Bundle "+a,label:"Bundle "+a})}}window.cancelPurchase=function(){Si&&(ye.idleTimer=0,purchaseResponse.style.display="none",xi=0,0,purchaseLoad.style.display="none",Si=!1)},window.XsollaPopup=function(e,t){closePurchaseSelector(),me.send("xst",xi,we.list.lang.val,e,t,window.paymentsChannelId)};var Ri=null,Pi=!1;function Ei(e){Ri=e;const t=(e||[{ID:9,NM:"No Bundle",ORDER:-1}]).sort((function(e,t){return u.featuredBundleOrder.indexOf(t.ID)-u.featuredBundleOrder.indexOf(e.ID)}))[0];homeStoreAdC.style.backgroundImage="url("+ae.assetsUrl("/img/backgrounds/bundles/b_"+t.ID+".png")+")",homeStoreAdC.style.backgroundSize="cover",homeStoreAdTx.innerHTML=t.NAME,bundleQuickBuyB.innerHTML="$"+t.PRICE,homeStoreAd.onclick=function(){bundlePopup(!0,!1,t.ID)}}function Di(e){Ri&&Ri.forEach((t=>{t.OWNED=!e.includes(t.ID)})),bundlePopup(void 0,!0)}function Oi(e){e}window.bundlePopup=function(e,t,i){window.canShowKRPopupAd||(t=!1);var n=function(e,t){var i=null;if(null!=e&&Ri)i=Ri.find((t=>t.ID==e));else if(Ri&&Ri.length){Ri.sort(((e,t)=>(getSavedVal("bundle_"+e.ID)||-1)-(getSavedVal("bundle_"+t.ID)||-1))),Ri.sort(((e,t)=>u.featuredBundleOrder.indexOf(t.ID)-u.featuredBundleOrder.indexOf(e.ID)));const e=Ri.filter((e=>!e.OWNED));e.length>0&&(i=e[0])}return!t&&Date.now()-0<=u.priorityPopTimer?void 0:i}(i,e);if(n){if("none"==menuHolder.style.display)return;const i=getSavedVal("bundle_"+n.ID);if(!e&&i&&Date.now()-i<=216e5&&t)return freeKRAuto(!0);const h=0===n.PRICE,u=!(!n.NAME.toLowerCase().includes("starter")&&!h||d),p=parseInt(n.FUNDS)||0,f=(parseFloat(n.JUNK)||0).toFixed(2);var s="<div style='margin-top:15px;'>";const m=n.SKINS.split(","),g=[],v=[];for(var a,r=0,o=0;o<12;){if(a=ve.store.skins[m[r]],r++,a){var l=0;if(a.collection){if(v.includes(a.collection))continue;v.push(a.collection),l=ve.store.skins.filter((e=>e&&e.collection==a.collection)).length}const e=ve.store.rarities[a.rarity].color;a.type==Te.SPRAY&&a.frames&&-1==g.indexOf(a.frames)&&g.push(a.frames),s+="<div class='bundlItmC' style='background:url("+a.thumbnail+");"+(a.type==Te.SPRAY&&a.frames?"background-size: cover !important;"+ae.getFrameAnim(a,"sprayAnmB"):"background-size: contain;background-position: center;")+"border: 3px solid "+e+";' onclick='viewItem("+a.index+")'>"+(l?"<div class='bundlItmCnt'>+"+(l-1)+"</div>":"")+"</div>"}else s+="<div class='bundlItmC' style='border: 3px solid #707070;'></div>";o++}s+="</div>";var c="";if(g.length){c+="<style>";for(o=0;o<g.length;o++)c+="@keyframes sprayAnmB"+g[o]+" {100%{background-position:-"+81*g[o]+"px}}";c+="</style>"}c+="<div class='bundlPopImg' style='background:url("+ae.assetsUrl("/img/backgrounds/bundles/b_"+n.ID+".png")+");background-size: cover;'></div><div class='bundlPopCurncs'>"+(f>0?"<div style='color:#cfcfcf'>+ <span style='color:#7d7d7d;'>"+f+"</span> <span class='material-icons' style='color:#cc51f8;font-size:35px;margin-left:-5px;vertical-align:top;'>plumbing</span></div>":"")+(p?"<div style='color:#cfcfcf'>+ <span style='color:#7d7d7d;'>"+p+"</span> <span style='color:#fbc02d'>KR</span></div>":"")+"</div><div class='bundlPopSidH'><div class='bundlPopNam'>"+n.NAME+"</div><div class='bundlPopInfo'>"+n.INFO+"</div>"+s,c+="<div class='bundlPopBuyH'>",u&&(c+="<div class='bundlPopBuy"+(h?"C":"S")+"' onclick='selectBundle(this, "+n.ID+", true)'>\n\t\t\t\tComplete Free Survey</div>"),h||(c+="<div class='bundlPopBuy"+(u?"B":"C")+"' onclick='selectBundle(this, "+n.ID+", false)'>\n\t\t\t\tBuy - "+n.PRICE+" USD</div>"),c+="</div>",resetPops(),bundlePop.style.display="block",bundlePop.innerHTML=c,n.ID>1&&(he.play("bundle_"+n.ID,12==n.ID?1:.1,!0,6==n.ID?1.25:1),Pi="bundle_"+n.ID),saveVal("bundle_"+n.ID,Date.now())}else t?freeKRAuto(!0):updateWindow(14)},window.selectBundle=function(e,t,i,n){if(!n&&d)return zs(null,"Invalid Steam Account");if(n&&d){if(i)return zs(null,"Not available on Steam");if(!!!(window.ClientSession&&window.ClientSession.settings&&window.ClientSession.settings.gameCap&&window.ClientSession.settings.gameCap.val))return zs(null,"Game Capture must be enabled to use Steam Purchase");me.send("stpbV",n+"",t,null)}else i?window.showAd({type:FRVR.ads.AdType.SURVEY,onComplete:()=>me.connected?void me.send("svyb",t):(zs("SUCCESS",null,"Refresh page to recieve bundle"),void saveVal("2390v",t)),onError:()=>zs(null,"Try again later")}):me.send("xstb",t,we.list.lang.val,null,null,window.paymentsChannelId);logEventFRVR("iap_request_payment",{product_id:"bundle_"+t,productId:"bundle_"+t,trackingName:"Bundle "+t,label:"Bundle "+t,provider:d?"steam":"xsolla"}),e.style.pointerEvents="none",setTimeout((()=>{e&&(e.style.pointerEvents="")}),3500)},window.selectBPTier=function(e,t,i){if(!i&&d)return zs(null,"Invalid Steam Account");if(i&&d){if(!!!(window.ClientSession&&window.ClientSession.settings&&window.ClientSession.settings.gameCap&&window.ClientSession.settings.gameCap.val))return zs(null,"Game Capture must be enabled to use Steam Purchase");me.send("stpbpV",i+"",t,null)}else me.send("xstbp",t,we.list.lang.val,null,null,window.paymentsChannelId);e.style.pointerEvents="none",setTimeout((()=>{e&&(e.style.pointerEvents="")}),3500)},window.skipLevels=function(e,t){var i=document.getElementById("bp-skip-num");if(i){var n=parseInt(i.textContent)||1;if(!t&&d)return zs(null,"Invalid Steam Account");if(t&&d){if(!!!(window.ClientSession&&window.ClientSession.settings&&window.ClientSession.settings.gameCap&&window.ClientSession.settings.gameCap.val))return zs(null,"Game Capture must be enabled to use Steam Purchase");me.send("stpbplV",t+"",n)}else me.send("xstbpl",n,we.list.lang.val,null,null,window.paymentsChannelId);e.style.pointerEvents="none",setTimeout((()=>{e&&(e.style.pointerEvents="")}),3500)}},window.authorizeSteamPayment=function(e){ye.idleTimer=0,d&&Re&&me.send("stpA",e)},window.showPurchase=function(e,t){if(ve.store.purchases[e]&&(ye.idleTimer=0),Re){var i=ve.store.purchases[e||0].val;if(!t&&d)return zs(null,"Invalid Steam Account");if(t&&d)return!!(window.ClientSession&&window.ClientSession.settings&&window.ClientSession.settings.gameCap&&window.ClientSession.settings.gameCap.val)?(me.send("stpV",t+"",e,null,1),void logEventFRVR("iap_request_payment",{product_id:"kr_"+i,productId:"kr_"+i,trackingName:i+" KR",label:i+" KR",provider:"steam"})):zs(null,"Game Capture must be enabled to use Steam Overlay");logEventFRVR("iap_request_payment",{product_id:"kr_"+i,productId:"kr_"+i,trackingName:i+" KR",label:i+" KR"}),xi=e,purchaseHolder.style.display="block";var n=document.getElementById("xsollaPayB");if(n)u.xsollaEnabled||Re&&Re.isDev?n.innerHTML="<img src='"+ae.assetsUrl("/img/xsolla.png")+"' style='width:26px;margin-right:13px;margin-bottom:-4px' />Credit/Debit Card":n.style.display="none";if(window.canShowPaypal){var s=document.getElementById("paypal-button");s&&(s.innerHTML=""),Re&&paypal.Button.render({style:{size:"large",color:"blue",shape:"rect",label:"paypal",tagline:!1},env:"production",commit:!0,payment:function(e,t){return closePurchaseSelector(),t.request.post(wi("/my-api/create-payment/"),{pIndex:xi,acID:Re.id}).then((function(e){return e.id}))},onAuthorize:function(e,t){return t.request.post(wi("/my-api/execute-payment/"),{pIndex:xi,acID:Re.id,paymentID:e.paymentID,payerID:e.payerID}).then((function(e){e&&null!=e.funds&&null!=e.funds?Ci("paypal",null,e.funds,xi,e.price,"USD"):purchaseError("paypal",e,"kr_"+ve.store.purchases[parseInt(xi)||0].val)}))},onError:function(e){purchaseError("paypal",e,"kr_"+ve.store.purchases[parseInt(xi)||0].val)},onCancel:function(){purchaseCancel("paypal","kr_"+ve.store.purchases[parseInt(xi)||0].val)}},"#paypal-button")}}else showWindow(5)},window.closePurchaseSelector=function(){purchaseHolder.style.display="none"},window.purchaseCancel=function(e,t){closePurchaseSelector(),logEventFRVR("iap_request_payment_failed",{payment_provider:e,product_id:t,productId:t,provider:e,err:"Purchase cancelled by user"})},window.purchaseError=function(e,t,i){Si=!0;var n="Purchase Error";t&&t.err&&(n=t.err),purchaseResponse.style.display="block",purchaseRespH.innerHTML=n+" <a href='javascript:;' onclick='cancelPurchase()'>"+S.t("purchase.error.click")+"</a>",logEventFRVR("iap_request_payment_failed",{payment_provider:e,product_id:i,provider:e,productId:i,err:n})},purchaseResponse.onclick=function(){purchaseResponse.style.display="none"};var Li={},ji={},zi=!1,Bi=!1;window.noMouseInp=!1,ye.spect.target=null;var Ni=!1,Fi=!0,Hi=!0;window.spectating=!1;var Ui=!0;function Vi(){ye.spect.target=null,mc(0,!1),fc(0)}function Gi(e){if(e=ye.spect.target){var t=Li[e.sid]||{},i=(t.HP||0)/(t.MHP||100)*100;if(specNames.style.display="none",specStatsInner.innerHTML.length)specStatsInner.children[0].src.includes("icon_"+(e.classIndex||0))||(specStatsInner.children[0].src=ae.assetsUrl("textures/classes/icon_"+(e.classIndex||0)+".png",!0)),specStatsInner.children[1].id!="f_"+e.flagIndex&&(specStatsInner.children[1].id="f_"+e.flagIndex,specStatsInner.children[1].className="specFlag"+(e.flagIndex>-1?" flag-icon flag-icon-"+ve.flags[e.flagIndex][1]:"")),specStatsInner.children[2].children[0].id!="lvl_"+e.levell&&(specStatsInner.children[2].children[0].id="lvl_"+e.level,specStatsInner.children[2].children[0].textContent=e.level,specStatsInner.children[2].children[0].style.color="white"),specStatsInner.children[2].children[1].id!="s_"+e.sid&&(specStatsInner.children[2].children[1].id="s_"+e.sid,specStatsInner.children[2].children[1].innerHTML=e.alias+(e.clan?"<span style='color:"+te.getClanCol(e.clan,"rgba(255,255,255,0.5)")+"'> ["+e.clan+"]</span>":"")),specStatsInner.children[2].children[2].style.display=e.featured?"inline-block":"none",spectHPV.textContent=(t.HP||0)+" | "+(t.MHP||100),spectHPBI.style.width=i+"%",spectHPBI.style.backgroundColor=i<=30?we.tmp.hudHealthLow:we.tmp.hudHealthHigh;else{var n="<img class='spectPIcon' src='"+ae.assetsUrl("textures/classes/icon_"+(e.classIndex||0)+".png",!0)+"' /><span id='f_"+e.flagIndex+"' class='specFlag"+(e.flagIndex>-1?" flag-icon flag-icon-"+ve.flags[e.flagIndex][1]:"")+"'></span><div style='display:inline-block;width:200px;vertical-align:top'><div class='specLevelBox' id='lvl_"+e.level+"' style='color:white;'>"+e.level+"</div><span class='specPHead' id='s_"+e.sid+"'>"+e.alias+(e.clan?"<span style='color:"+te.getClanCol(e.clan,"rgba(255,255,255,0.5)")+"'> ["+e.clan+"]</span>":"")+"</span><i class='material-icons specVerified' style='display:"+(e.featured?"inline-block":"none")+"'>check_circle</i><div id='spectHPB'><span id='spectHPV'>"+(t.HP||0)+" | "+(t.MHP||100)+"</span><div id='spectHPBI' style='width:"+i+"%;background-color:"+(i<=30?we.tmp.hudHealthLow:we.tmp.hudHealthHigh)+"'></div></div></div>";specStatsInner.innerHTML=n}specSUS.style.display=Rt&&Rt.sus==e.id?"inline-block":"none",specStats.style.display="inline-block"}else specNames.style.display="block",specStats.style.display="none",specSUS.style.display="none"}function Wi(e,t,i){Li[e]||={},Li[e][t]=i,"inline-block"==specStats.style.display&&Gi()}window.setSpect=function(e){specBtn.checked=e,zi=e,Jc()},window.toggleSpect=function(){zi=!zi,specBtn.checked=zi,cmpSpectTgl.innerHTML=zi?"visibility":"visibility_off",cmpSpectBtn.style.backgroundColor=zi?"#8ec72c":"#eb4034",Jc()},window.spectMode=function(e){if(ve&&ve.players){if(e){for(var t=null,i=Ni?ve.map.manager.spectateCams[ve.activeObjective||0]:ve.players.list,n=Math.max(0,ye.spect.target?i.indexOf(ye.spect.target):0),s=0;s<i.length;++s)if((n+=e)>=i.length?n=0:n<0&&(n=i.length-1),(Ee=i[n])&&Ee.active&&(!Ee.isBot||Ee.isBot&&!ve.mode.botsAsAI)){t=Ee;break}ye.spect.target!=t&&(Vi(),ye.spect.target=t,Bi=!1,Ni||me.send("fpSp",t?t.sid:null))}else Ni&&(ye.object.rotation.x=0,ye.object.rotation.y=0,ye.object.rotation.z=0),Ni=!1,Bi=!1,Vi(),ji={},ye.setCamPosOff(),me.send("fpSp");window.noMouseInp=!!Ni,Gi(),ce.zoom(1),ce.aimRecticle.opacity=0,aimRecticle.style.opacity=0}};const qi=new FileReader;var Yi,Ki,Xi=!1,Zi=!0,Ji={};function Qi(e,t,i){if(Ji[e]&&Ji[e][0]&&(i?Ji[e].splice(Ji[e].length-1,1):Ji[e].splice(0,1),Ji[e][0]&&Ji[e][0].isReady)){var n=Ji[e][0];n.play();!!n.srcObj&&!!we.tmp.voiceChatType&&n.pos(n.srcObj.x,n.srcObj.y+n.srcObj.height-u.cameraHeight,n.srcObj.z)}Ji[e]&&Ji[e].length&&!t||(Ji[e]=null,delete Ji[e]),window.updateWindow(23)}function $i(e,t,i,n,s,a,r){if(he.volumes[1]*s>0){we.tmp.streamMode&&(t=ae.scrambleS(t));try{Ee=ve.players.findBySid(i),-1!=n&&n!=_c||function(e,t,i,n,s,a){if(we.tmp.muteSpec&&(null==sid||e&&!e.active))return;if(null!=a&&Ht.includes(a))return;Ji[t]||=[];const r=!!e&&!!we.tmp.voiceChatType;var o=new Howl({src:[i],volume:he.volumes[0]*n*2,onload:function(){!s&&o.duration()>1.2*u.voiceChatMaxLength?Qi(t,!1,!0):(o.on("end",(function(){Qi(t,s)})),o.isReady=!0,Ji[t]&&0==Ji[t].indexOf(o)&&(r&&(o.pos(o.srcObj.x,o.srcObj.y+o.srcObj.height-u.cameraHeight,o.srcObj.z),o.pannerAttr({refDistance:we.tmp.voiceDistance,rolloffFactor:1})),o.play()))}});o.srcObj=e,Ji[t].push(o),window.updateWindow(23)}(Ee,t,e,he.volumes[1]*s,a,r)}catch(e){}}}function en(e){infoHolder.style.display=null,aHolder.style.display=null,ci=!1,ye.idleTimer=0,"block"!=spinUI.style.display&&(ee.toggleMenu(!0,!0===e),ye.toggle(!1))}function tn(e){var t=null;return ve&&ve.classConfig[e].mdl&&ve.classConfig[e].aID.length&&(t=ae.isString(ve.classConfig[e].aID)&&ve.classConfig[e].aID.includes("c")?parseInt(ve.classConfig[e].aID.replace(/[^\d]/g,"")):null),t>0?ae.userAssetsUrl("/"+t+"/icon.png"):ae.assetsUrl("/textures/classes/icon_"+e+".png")}function nn(){vn(menuMiniProfilePic,Re?Re.id:null,Re&&Re.premiumT>0,tn(Ae?Ae.classIndex:kt)),vn(bottomLeftClassImg,Re?Re.id:null,Re&&Re.premiumT>0,tn(Ae?Ae.classIndex:kt))}qi.addEventListener("load",(function(){var e=qi.result;me.send("vc",e,_c,we.tmp.micVolume,parseInt(we.tmp.micQuality))})),window.toggleRecord=function(e){if("INPUT"==document.activeElement.tagName)return;var t=we.tmp.voiceChatTrigger,i=!voiceIcon.classList.contains("voiceOff");0==t&&(e=1==e?~~!i:~~!!i);let n=parseInt(we.tmp.micQuality);e&&!Xi&&Zi?navigator.mediaDevices.getUserMedia({audio:{deviceId:{exact:we.tmp.audioInput}},video:!1}).then((function(e){Zi=!1,voiceIcon.classList.toggle("voiceOn",!0),voiceIcon.classList.toggle("voiceOff",!1),Xi=!0,Yi=new MediaRecorder(e,{mimetype:"audio/ogg; codecs=opus",bitsPerSecond:n});const t=[];Yi.addEventListener("dataavailable",(function(e){e.data.size>0&&t.push(e.data)})),Yi.addEventListener("stop",(function(){var e=new Blob(t,{type:"audio/ogg; codecs=opus"});qi.readAsDataURL(e),t.length=0})),Yi.start(),Ki=setInterval((function(){"recording"==Yi.state&&Yi.stop(),Xi?Yi.start():(voiceIcon.classList.toggle("voiceOn",!1),voiceIcon.classList.toggle("voiceOff",!0),Ki&&clearInterval(Ki),Zi=!0)}),u.voiceRate)})).catch((function(){Xi=!1,voiceIcon.classList.toggle("voiceOn",!1),voiceIcon.classList.toggle("voiceOff",!0),Ki&&clearInterval(Ki)})):!e&&Xi&&Yi&&(Xi=!1)},window.updateSliderLabel=function(e,t){var i;(i=document.getElementById("customSet"+e))&&(i.textContent=t),(i=document.getElementById("customSetPrev"+e))&&(i.textContent=t)},window.updateSliderLabel2=function(e,t,i,n){var s=document.getElementById("custom"+(0==e?"W":2==e?"E":"C")+"Set"+t+"_"+i);s&&(s.textContent=n)},Object.defineProperty(window,"setSetting",{writeable:!1,value:function(e,t,i,n,s){we.set(e,t,i,n,s)}}),window.resetSettings=function(){confirm(S.t("settings.reset.confirm"))&&(selectSettingPre(0,void 0,!0),Object.keys(localStorage).filter((e=>e.includes("cont_"))).forEach((e=>localStorage.removeItem(e))),ye.resetBinds(),showWindow(1,!0))},window.exportSettings=e=>we.export(e),window.importSettingsPopup=()=>{genericPopup("<div class='pubHed'>Import Settings</div><div style='color:rgba(255,255,255,0.7);font-size:19px;text-align:center;margin-bottom:15px;'>Copy Paste Settings Text Here</div><textarea id='importTxt' rows='3' onkeydown='if(event.keyCode == 13) importSettings();'></textarea><div class='mapFndB' onclick='importSettings()' onmouseover='playTick(0.1)' style='margin-left: 0px;margin-top: 10px;background-color:#4ca9f5;width: 380px;'>Import</div>","importPop"),importTxt.focus()},window.importSettings=function(){var e=document.getElementById("importTxt");e&&e.value.length&&we.import(e.value),clearPops()};var sn=getSavedVal("preIndex")||2;window.selectSettingPre=function(e,t,i){if(sn!=e){if(0==e){if(!i&&!confirm(S.t("settings.reset.confirm"))){return void[...document.getElementById("settingsPreset").children].forEach((e=>{e.selected=e.value==sn}))}var n={};Object.keys(we.list).forEach((function(e){2==sn&&we.list[e].val!=we.list[e].def&&(n[e]=we.list[e].val),setSetting(e,we.list[e].def,!0)})),2==sn&&saveVal("krk_customPre",JSON.stringify(n))}else if(1==e||3==e){n={};Object.keys(we.list).forEach((function(t){2==sn&&(n[t]=we.list[t].val),setSetting(t,null==we.list[t][1==e?"pro":"perf"]?we.list[t].def:we.list[t][1==e?"pro":"perf"],!0)})),2==sn&&saveVal("krk_customPre",JSON.stringify(n))}else if(2==e&&!t)try{n=JSON.parse(getSavedVal("krk_customPre")||"{}");for(var s in n)we.list[s]&&setSetting(s,n[s],!0);ye.checkScroll()}catch(e){alert(e)}sn=e,saveVal("preIndex",sn),i||showWindow(1,!0)}},window.aspectSelect=function(e,t){var i=t.selectedIndex-1,n=document.getElementById("slid_"+e);n&&(n.value=0==i?"":u.customRatios[i]),t.selectedIndex=0,setSetting(e,n.value)};var an={};window.delayExecute=function(e,t,i=600){return clearTimeout(an[e]),an[e]=setTimeout((function(){setSetting(e,t.value)}),i),!0};var rn={};function on(e){Re&&(Re.setData(e),Re.activeChallenges=ve.challenges.updateNames(Re.activeChallenges,S)),updateWindow(5),updateMenuAccountData(),Fo(!0)}function ln(e){if(e&&""!=e){try{JSON.parse(e)}catch(e){return zs(null,S.t("settings.loaded.none"))}we.import(e),zs("SUCCESS",null,S.t("settings.loaded"))}else zs(null,S.t("settings.loaded.none"))}window.delayExecute2=function(e,t,i,n=600){return clearTimeout(rn[e+"_"+t]),rn[e+"_"+t]=setTimeout((function(){setShaderInput(e,t,i.value)}),n),!0},Object.defineProperty(window,"setShaderInput",{writeable:!1,value:function(e,t,i){var n=ce.shaderInputs[e];n&&(n=ce.shaderInputs[e][t])&&("false"==i&&(i=!1),"true"==i&&(i=!0),(n.min||n.max)&&(i=Math.min(n.max,Math.max(n.min,+i))),n.toggle&&(i=~~!!i),document.getElementById("shader_"+e+"_"+t)&&(document.getElementById("shader_"+e+"_"+t).value=i),document.getElementById("shader_input_"+e+"_"+t)&&(document.getElementById("shader_input_"+e+"_"+t).value=i),ce.shaderInputs[e][t].val=i,0==t?ce.postprocessing.composer.passes[ce.postprocessing.composer.passes.length-ce.shaderInputs.length+e].enabled=!!i:ce.postprocessing.composer.passes[ce.postprocessing.composer.passes.length-ce.shaderInputs.length+e].uniforms[n.name].value=i)}}),Object.defineProperty(window,"focusChat",{writeable:!1,value:function(e){1==we.tmp.shwChat&&(chatList.style.display=e?"block":"none")}}),window.changeCont=function(e,t,i){showWindow(7,!0),ye.inputChanger=[e,t,i],document.getElementById("cont"+e+(null==i?"":"_"+i)+(t?"_alt":"")).innerHTML=S.t("settings.controls.press")},window.changeContSet=function(e,t){ye.toggleSets[e]=t,saveVal("cont_"+(e+27)+"_set",t),showWindow(7,!0)},window.changeContMsg=function(e,t){t=filterCM(t),ye.chatMessages[e]=t,saveVal("cont_"+(e+43)+"_set",t)},window.unbindCont=function(e,t,i){showWindow(7,!0),ye.inputChanger=null,document.getElementById("cont"+e+(null==i?"":"_"+i)+(t?"_alt":"")).innerHTML="UNBOUND",ye.updateBind(e,t,i,-1)},window.resetCont=function(e,t,i){showWindow(7,!0),ye.inputChanger=null,ye.resetBind(e,t,i),document.getElementById("cont"+e+(null==i?"":"_"+i)+(t?"_alt":"")).innerHTML=ae.getKeyName(null==i?ye.binds[e].val:ye.binds[e][i].val)},window.updateKeybindUI=function(e,t){("reset"==e||t)&&(speedRunRstKey.innerHTML="["+ae.getKeyName(ye.binds.reset.val)+"]"),("resetLast"==e||t)&&(speedRunRstLKey.innerHTML="["+ae.getKeyName(ye.binds.resetLast.val)+"]"),("kickVoteY"==e||t)&&(kickVoteY.innerHTML="["+ae.getKeyName(ye.binds.kickVoteY.val)+"]"),("kickVoteN"==e||t)&&(kickVoteN.innerHTML="["+ae.getKeyName(ye.binds.kickVoteN.val)+"]"),("specObj"==e||t)&&(specObjCam.innerHTML="["+ae.getKeyName(ye.binds.specObj.val)+"]"),("specFree"==e||t)&&(specFreeCam.innerHTML="["+ae.getKeyName(ye.binds.specFree.val)+"]"),("specNames"==e||t)&&(specNamesF.innerHTML="["+ae.getKeyName(ye.binds.specNames.val)+"]"),("specFirst"==e||t)&&(specFirstP.innerHTML="["+ae.getKeyName(ye.binds.specFirst.val)+"]"),("specFocus"==e||t)&&(specFocus.innerHTML="["+ae.getKeyName(ye.binds.specFocus.val)+"]"),("kpdVision"==e||t)&&(kpdVision.innerHTML="["+ae.getKeyName(ye.binds.kpdVision.val)+"]"),("kpdVoteY"==e||t)&&(kpdVoteY.lastChild.innerHTML="["+ae.getKeyName(ye.binds.kpdVoteY.val)+"]"),("kpdVoteN"==e||t)&&(kpdVoteN.lastChild.innerHTML="["+ae.getKeyName(ye.binds.kpdVoteN.val)+"]"),("taunt0"==e||t)&&(taunt0.innerHTML="["+ae.getKeyName(ye.binds.taunt[0].val)+"]"),("taunt1"==e||t)&&(taunt1.innerHTML="["+ae.getKeyName(ye.binds.taunt[1].val)+"]"),("taunt2"==e||t)&&(taunt2.innerHTML="["+ae.getKeyName(ye.binds.taunt[2].val)+"]"),("taunt3"==e||t)&&(taunt3.innerHTML="["+ae.getKeyName(ye.binds.taunt[3].val)+"]"),("taunt4"==e||t)&&(taunt4.innerHTML="["+ae.getKeyName(ye.binds.taunt[4].val)+"]"),("taunt5"==e||t)&&(taunt5.innerHTML="["+ae.getKeyName(ye.binds.taunt[5].val)+"]"),("propRand"==e||t)&&(pickRandProp.innerHTML="["+ae.getKeyName(ye.binds.propRand.val)+"]"),("prop"==e||t)&&(pickProp.innerHTML="["+ae.getKeyName(ye.binds.prop.val)+"]"),("propRot"==e||t)&&(rotProp.innerHTML="["+ae.getKeyName(ye.binds.propRot.val)+"]"),("propRotR"==e||t)&&(rotRProp.innerHTML="["+ae.getKeyName(ye.binds.propRotR.val)+"]"),("specMiniMap"==e||t)&&(specMinimap.innerHTML="["+ae.getKeyName(ye.binds.specMiniMap.val)+"]")},window.canAfford=function(e){return Re&&Re.funds>=e},window.refreshMenuAcc=function(){updateMenuAccountData(),Is()},window.updateMenuAccountData=function(){Re?(signedOutHeaderBar.style.display="none",signedInHeaderBar.style.display=null,Re.level>=u.rewardMinLvl&&On(),menuAccountUsername.textContent=Re.premiumT&&we.tmp.premiumBadge?Re.alias:Re.name,menuKRCount.innerHTML=ae.commaNumber(Re.funds)+" <span style='color:#fbc02d'>KR</span>",menuJNKCount.innerHTML=ae.commaFloat(parseFloat(Re.junk||0).toFixed(2))+"<span class='material-icons' style='color:#cc51f8;font-size:27px;margin-left:5px;vertical-align:top;margin-right:-5px;'>plumbing</span>",menuLevelBar.style.width=Re.levelProg+"%",mLevelContV.textContent=Re.level||1,signedInHeaderBar.offsetWidth&&(signedInHeaderBar.style.borderRadius="0px")):(signedOutHeaderBar.style.display=null,signedInHeaderBar.style.display="none")},window.uploadSettings=function(){return Re?(Bs("Loading..."),void me.send("uploadS",exportSettings(!0))):zs(null,S.t("account.login.required"))},window.fetchSettings=function(){return Re?void me.send("getS"):zs(null,S.t("account.login.required"))};var cn,dn=null;function hn(e){me.connected&&e!=dn&&(dn=ci||ye.locked||"inline-block"==endMidHolder.style.display?null:e,Jc())}function un(){ingressPacketCount.textContent=me.ingressPacketCount+" P/s",ingressDataSize.textContent=(me.ingressDataSize/1e3).toFixed(2)+" KB/s",egressPacketCount.textContent=me.egressPacketCount+" P/s",egressDataSize.textContent=(me.egressDataSize/1e3).toFixed(2)+" KB/s",tickPacketCount.textContent=me.tickPacketCount+" TPS",me.resetPacketTally()}const pn=[];let fn,mn=0;function gn(e){u.ftueHideProfilePopup||zs("INFO",null,e||u.accAnnounce)}function vn(e,t,i,n){var s=null;ve&&ve.classConfig[kt].mdl&&ve.classConfig[kt].aID.length&&(s=ae.isString(ve.classConfig[kt].aID)&&ve.classConfig[kt].aID.includes("c")?parseInt(ve.classConfig[kt].aID.replace(/[^\d]/g,"")):null),e.setAttribute("onerror",'this.onerror=null;this.src="'+n+'";'),e.src=s>0?ae.userAssetsUrl("/"+s+"/icon.png"):i>0?ae.userAssetsUrl("/p"+t+"/profile.png"):n}var yn=null;function bn(e){try{accResp.innerHTML=e||"",accResp.style.display=e?"block":"none"}catch(e){}}function wn(e,t,i,n){0==e,e>=0&&bn(S.t("generic.wait")),me.send("a",e,t,i,n)}function xn(e,t,i,n,s,r){if(friendCon.innerHTML="",e)bn(e);else{Nt=!1;let e=u.ftueHideProfilePopup;window.fullMenu(),!1,saveVal("krunker_haslogin",!0),window.getSavedVal("krunker_id")!=t&&Mn(),Re=new se(t,i,null),saveVal("krunker_id",t),saveVal("krunker_username",i),on(n),window.totalLogins=getSavedVal("total_logins")||0,window.totalLogins++,saveVal("total_logins",window.totalLogins),Re.activeChallenges=ve.challenges.updateNames(Re.activeChallenges,S),Re.hack&&(window.activeHacker=!0),s&&(saveVal("krunker_token",s),yn=s),window.hasOwnProperty("KrunkerAppLogin")&&window.KrunkerAppLogin.postMessage(s||null),window.updateWindow(null,!0),Is(),nn(),(u.hideLoginWindowAfterLogin||e)&&ee.toggleWindow(!1),Re.hack?genericPopup("<div style='text-align:center'><div style='font-size:80px;color:#eb3434'>BANNED</div><div style='color:#fff'>"+S.t("account.banned.hack")+"</div><div style='color:#fff'>"+S.t("account.banned.appeal")+"</div><div style='margin-top:10px;color:#3483eb'>krunker+banappeal@frvr.com</div><div style='height:10px'></div></div>","contPop"):(Object(a.navigateBack)(),Ln(),getSavedVal("2390v")&&(me.send("svyb",parseInt(getSavedVal("2390v"))),deleteVal("2390v")),Re.premiumT>0&&(aHider.style.display="none",topRightAdHolder.style.display="none"),u.differentStorePopups&&(window.totalLogins=parseInt(getSavedVal("total_logins"))||0,window.totalLogins%3==1&&(showWindow(14),windows[13].switchTab(1)),window.totalLogins%3==2&&(showWindow(14),windows[13].switchTab(3)))),newUserGuide.style.display=Re.level>20?"none":"",zd()}}function Sn(){yn=getSavedVal("krunker_token");var e=getSavedVal("krunker_username");yn&&e?wn(1,[e,null,yn]):(Ln(),function(){if(window.canShowRegisterPopupAd){if(!ae.getSavedVal("register_gift_popup")&&!d){var e='<div id="acpImg">\n\t\t\t<div id="acpImgBack"></div>\n\t\t\t<div id="acpImgFront"></div>\n\t\t\t<div id="acpImgGrad"></div>\n\t\t</div>\n\t\t<div id="acpText">\n\t\t\t<div id="acpHeader">Want to earn '+u.ftueKRGift+"<span style=\"color:var(--yellow)\">KR</span>?</div>\n\t\t\t<div id=\"acpInfo\">Register after watching this ad!</div>\n\t\t</div>\n\t\t<div id=\"acpButtonHolder\">\n\t\t\t<div class='button buttonP acpButton'\n\t\t\t\tstyle='border: 2px solid var(--yellow) !important'\n\t\t\t\tonclick='playSelect(0.1);clearPops();showRegisterVideoAd();'>Earn KR\n\t\t\t\t<img style=\"vertical-align: top;height: 46px;margin-top: -8px;\" src=\"./img/frvr-ui/ad-icon.svg\"></div>\n\t\t\t<div class='button buttonP acpButton'\n\t\t\t\tonclick='playSelect(0.1);clearPops();'>Close</div>\n\t\t</div>";genericPopup(e,"registerGiftPop"),ae.saveVal("register_gift_popup",1),logEventFRVR("pop_up",{label:"register_gift"})}}}()),m.redraw();let t=Date.now();saveVal("krunker_last",t),setTimeout((()=>me.send("sb","welc",e)))}function Mn(){deleteVal("krunker_id"),deleteVal("krunker_username"),deleteVal("krunker_token"),deleteVal("skins"),deleteVal("hatIndex"),deleteVal("headIndex"),deleteVal("playerCardIndex"),deleteVal("waistIndex"),deleteVal("bodyIndex"),deleteVal("backIndex"),deleteVal("meleeIndex"),deleteVal("skinColIndex"),deleteVal("hairCol"),deleteVal("chatCol"),deleteVal("dyeIndex"),deleteVal("faceIndex"),deleteVal("shoeIndex"),deleteVal("petIndex"),deleteVal("classindex"),deleteVal("secondaryInd"),deleteVal("krunker_last_with_login"),Jn=-1,Qn=-1,$n=-1,es=-1,Xn=-1,Zn=-1,Kn=-1,zn=-1,Bn=-1,Nn=-1,Fn=-1,Hn=-1,Un=-1,ts=-1,ss={},rs=[],windows[12].clanData=null,windows[4].drops=null,yn=null,Re=null,Pe=null,!1}window.registerAcc=function(){var e=document.getElementById("accName")||{},t=document.getElementById("accPass")||{},i=document.getElementById("accEmail")||{};bn(S.t("generic.wait")),M("register",(function(n,s){s?bn("Please try again."):(logEventFRVR("account_register"),wn(0,[e.value,t.value,"",0,0,i.value],n,Nt))}))},Object.defineProperty(window,"loginAcc",{writeable:!1,value:function(){var e=document.getElementById("accName")||{},t=document.getElementById("accPass")||{};logEventFRVR("account_login"),wn(1,[e.value,t.value,null],null)}}),Object.defineProperty(window,"logoutAcc",{writeable:!1,value:function(e){wn(-1),bn(),Mn(),selectSecondary(2,e),on(),showWindow(5),Is(),Fo(!0),clearSpinHistory()}});var kn=!1;function _n(e,t){t&&t.length>0&&window.newTok(t),newPRes.innerHTML=e}window.newTok=function(e){e&&(saveVal("krunker_token",e),yn=e)},window.logoutSessions=function(e){e&&(e.style.display="none"),kn=!0,me.send("las")},Object.defineProperty(window,"requestDeletion",{writeable:!1,value:function(e){var t="<div style='color:#fff;font-size:20px;position:relative;margin-bottom:15px;'>"+(e?S.t("account.delete.request")+"</div>":S.t("account.delete.cancel")+"</div>")+"<div id='confirmBtn' onclick='requestConfirm("+e+")' onmouseover='playTick(0.1)'>YES</div><div id='declineBtn' onclick='clearPops()' onmouseover='playTick(0.1)'>NO</div>";genericPopup(t,"confPop")}}),window.requestConfirm=function(e){me.send("rqd",e),Re.reqDel=e,clearPops(),updateWindow(5)},Object.defineProperty(window,"changePass",{writeable:!1,value:function(){newPRes.innerHTML="Please wait...",me.send("upp",oldPass.value,newPass.value,repNPass.value)}}),window.onKeyDown2FA=e=>{if(13==window.event.keyCode){var t=document.getElementsByClassName("twoFAIn");if(t){var i=0;[...t].forEach((e=>{i+=e.value.length})),i<u.twoFAKeyLen?event.preventDefault():twoFAbtn.click()}}8==window.event.keyCode&&(event.preventDefault(),!e.value.length&&e.previousElementSibling?(e.previousElementSibling.focus(),e.previousElementSibling&&(e.previousElementSibling.value="")):e.value="")},window.onInput2FA=e=>{"deleteContentBackward"==window.event.inputType?!e.value.length&&e.previousElementSibling&&e.previousElementSibling.focus():e.nextElementSibling?(e.value.length>1&&(e.value=e.value.slice(-1)),e.nextElementSibling.focus()):twoFAbtn.click()};var Tn=null;function Cn(e){52!=oa&&showWindow(53);try{emailError.innerHTML=e||"",emailError.style.display=e?"block":"none"}catch(e){}}Object.defineProperty(window,"twoFAres",{writeable:!1,value:function(e,t,i,n){Tn=t,clearPops(),e?1==e?twoFAPop.style.display="none":2==e&&Re&&(Re.twoFA=n,updateWindow(5)):(twoFAPop.style.display="block",twoFAbtn.innerHTML="Submit",twoFAbtn.className="twoFAbtn",twoFAForm.innerHTML=function(e){for(var t="",i=0;i<e;++i)t+="<input class='twoFAIn' type='number' min='0' max='9'\n\t\t\tmaxlength='1' placeholder=' ' oninput='onInput2FA(this);'\n\t\t\tonkeydown='onKeyDown2FA(this);' "+(0==i?"autofocus":"")+">";return t}(u.twoFAKeyLen),i&&Ie.toDataURL(i,(function(e,t){twoFAqr.style.display="block",twoFAqr.lastElementChild.src=t})))}}),Object.defineProperty(window,"act2FA",{writeable:!1,value:function(){me.send("a2FA")}}),Object.defineProperty(window,"dact2FA",{writeable:!1,value:function(){me.send("d2FA")}}),Object.defineProperty(window,"sub2FA",{writeable:!1,value:function(){for(var e="",t=document.getElementsByClassName("twoFAIn"),i=0;i<u.twoFAKeyLen;++i)t&&t[i]&&t[i].value&&1==t[i].value.length&&(e+=t[i].value);e.length==u.twoFAKeyLen&&(twoFAbtn.innerHTML="...",twoFAbtn.className="twoFAbtnN",me.send(Tn||"2fa",e))}});var In=null,An=!1;function Rn(){An||(An=!0,networkLag.style.display="block",In=setTimeout((function(){networkLag.style.display="none",In&&(clearTimeout(In),In=null)}),1e4))}var Pn=0,En=!1,Dn=Date.now();function On(){Pn=function(){const e=u.rewardTime-((Ue||Date.now())-parseInt(Re&&Re.lastReward||0));return e<0?0:e}();const e=window.canShowKRPopupAd&&Re&&Pn<=0&&!d?"block":"none";freeKRAd.style.display!=e&&(freeKRAd.style.display=e)}function Ln(){p()||(On(),(En=Pn<=0&&!d)&&freeKRAuto())}window.freeKRAuto=function(e){En&&!d&&(Ue-Dn>=u.rewardUpdate||e)&&freeKRPopup()},window.freeKRPopup=function(){Date.now()-0>u.priorityPopTimer&&"none"!=menuHolder.style.display&&"block"!=bundlePop.style.display&&(genericPopup("<div style='text-align:center'><div style='margin-top:210px;'><div class='button buttonCL buttonP' style='border: 6px solid #b447ff !important;height: 40px;background-color: rgba(0, 0, 0, 0.55);' onmouseenter='playTick(0.1);' onclick='playSelect(0.1);claimReward();'>CLAIM KR</div></div></div>","claimPop"),Dn=Date.now(),logEventFRVR("pop_up",{label:"free_kr"}))},window.showRegisterVideoAd=function(){logEventFRVR("btn_click",{label:"register_gift_ad"}),showRewardedAd((()=>{Nt=!0,showWindow(5)}))},window.accountCreatePopup=function(){genericPopup('<div id="acpImg">\n\t\t\t<div id="acpImgBack"></div>\n\t\t\t<div id="acpImgFront"></div>\n\t\t\t<div id="acpImgGrad"></div>\n\t\t</div>\n\t\t<div id="acpText">\n\t\t\t<div id="acpHeader">Tired of watching these Ads?</div>\n\t\t\t<div id="acpInfo">Register and get rid of these ads on Krunker!</div>\n\t\t</div>\n\t\t<div id="acpButtonHolder">\n\t\t\t<div class=\'button buttonP acpButton\'\n\t\t\t\tstyle=\'border: 2px solid var(--yellow) !important\'\n\t\t\t\tonclick=\'playSelect(0.1);clearPops();showWindow(5);\'>Register</div>\n\t\t\t<div class=\'button buttonP acpButton\'\n\t\t\t\tonclick=\'playSelect(0.1);clearPops();\'>I like Ads</div>\n\t\t</div>',"accountCreatePop")},window.claimReward=function(){p()||d||(clearPops(),Pn<=0&&(logEventFRVR("btn_click",{label:"free_kr"}),me.send("sfkr"),showAd({allowSkip:!0,onComplete:()=>{logEventFRVR("win_open",{destination:"spin_free",source:"free_kr"}),prizeWheel(4)},onShow:()=>me.send("lfkr"),onError:e=>{me.send("fkrf"),"skipped"!=e&&alert(S.t(e))}})))},window.customizeExport=function(){var e={};qt.length&&(e.reticles=qt),Kt.length&&(e.scopes=Kt),Zt.length&&(e.images=Zt),Wt.length&&(e.favorites=Wt);let t=getSavedVal("krk_loadouts");return t=t?JSON.parse(t):{},Object.keys(t).length&&(e.loadouts=t),e},Object.defineProperty(window,"setClassIndex",{writeable:!1,value:function(e){if(kt=ve.classes[e]?e:0,window.selectFace&&Hn>0){let t=ve.store.skins[Hn].name;if(t!==ve.classConfig[e].name){ve.classConfig.find((e=>{if(e.name===t)return!0}))&&window.selectFace(-1)}}}});var jn=1,zn=getSavedVal("skinColIndex")||-1,Bn=getSavedVal("hairCol")||-1,Nn=getSavedVal("chatCol")||-1,Fn=getSavedVal("dyeIndex")||-1,Hn=getSavedVal("faceIndex")||-1,Un=getSavedVal("shoeIndex")||-1,Vn=getSavedVal("attachIndex")||0,Gn=getSavedVal("reticleIndex")||0,Wn=getSavedVal("savedReticle")||"";updateAimDot(Gn,Jt(Wn));var qn=getSavedVal("scopeIndex")||0,Yn=getSavedVal("savedScope")||"";updateScope(qn,Jt(Yn));var Kn=getSavedVal("meleeIndex")||-1,Xn=getSavedVal("bodyIndex")||-1,Zn=getSavedVal("backIndex")||-1,Jn=getSavedVal("hatIndex")||-1,Qn=getSavedVal("headIndex")||-1,$n=getSavedVal("playerCardIndex")||-1,es=getSavedVal("waistIndex")||-1,ts=getSavedVal("petIndex")||-1,is=getSavedVal("wristIndex")||-1,ns=getSavedVal("skins"),ss=ns?JSON.parse(ns):{},as=getSavedVal("charms"),rs=as?JSON.parse(as):[];setClassIndex(getSavedVal("classindex")||0);var os=getSavedVal("secondaryInd")||2,ls=getSavedVal("pcStatIndex")||-1,cs=0,ds=0;function hs(e,t,i){return ae.isNumber(t)||(t=null==i?-1:i),ve.streaks[t]||(t=-1),ve.streaks[t]&&ve.streaks[t].slot!=e&&(t=-1),t}var us=parseInt(getSavedVal("streakIndex1"));us=hs(0,us);var ps=parseInt(getSavedVal("streakIndex2"));ps=hs(1,ps);var fs=parseInt(getSavedVal("streakIndex3"));function ms(e,t){ci&&Re&&Re.isDev&&t&&we.list.forceUpdate.val&&me.send("prmA",10,[e,...Array.isArray(t)?t:[t],!!we.list.forceRegen.val])}function gs(e){var t="<div class='settName' title='"+(we.list[e].info||"")+"'"+(null==we.list[e].hide?"":"id='"+e+"_div' style='display:"+(we.list[e].hide?"none":"block")+"'")+">"+S.t(we.list[e].name)+(we.list[e].needsRestart?" <span style='color: #eb5656'>*</span>":we.list[e].verified?" <i class='material-icons' style='color:#2196F3;font-size:33px;vertical-align:bottom;'>check_circle</i>":"")+" ";return t+=we.list[e].html?we.list[e].html():be._html.settings.input[we.list[e].type]?be._html.settings.input[we.list[e].type](we.list[e]):be._html.settings.input.generic(we.list[e]),t+="</div>"}fs=hs(2,fs,0),Object.defineProperty(window,"selectHat",{writeable:!1,value:function(e,t,i){saveVal("hatIndex",e),Jn=e,Is(),t||showWindow(3),i&&updateWindow(3),ms("hat",e)}}),Object.defineProperty(window,"selectHead",{writeable:!1,value:function(e,t,i){saveVal("headIndex",e),Qn=e,Is(),t||showWindow(3),i&&updateWindow(3),ms("head",e)}}),Object.defineProperty(window,"selectPlayerCard",{writeable:!1,value:function(e,t,i){saveVal("playerCardIndex",e),$n=e,Is(),t||showWindow(3),i&&updateWindow(3),ms("playercard",e)}}),Object.defineProperty(window,"selectBody",{writeable:!1,value:function(e,t,i){saveVal("bodyIndex",e),Xn=e,Is(),t||showWindow(3),i&&updateWindow(3),ms("body",e)}}),Object.defineProperty(window,"selectBack",{writeable:!1,value:function(e,t,i){saveVal("backIndex",e),Zn=e,Is(),t||showWindow(3),i&&updateWindow(3),ms("back",e)}}),Object.defineProperty(window,"selectWaist",{writeable:!1,value:function(e,t,i){saveVal("waistIndex",e),es=e,Is(),t||showWindow(3),i&&updateWindow(3),ms("waist",e)}}),Object.defineProperty(window,"selectPet",{writeable:!1,value:function(e,t,i){saveVal("petIndex",e),ts=e,Is(),t||showWindow(3),i&&updateWindow(3),ms("pet",e)}}),Object.defineProperty(window,"selectWrist",{writeable:!1,value:function(e,t,i){saveVal("wristIndex",e),is=e,Is(),t||showWindow(3),i&&updateWindow(3),ms("wrist",e)}}),Object.defineProperty(window,"charmSelector",{writeable:!1,value:function(e){ea(window.event),ds=e,showWindow(46)}}),Object.defineProperty(window,"overrideCharm",{writeable:!1,value:function(e){rs=[-1,-1],selectCharm(e)}}),Object.defineProperty(window,"selectCharm",{writeable:!1,value:function(e,t,i){if((Ee=ve.store.skins[e],rs[ds]=Ee||-2==e?e:-1,rs[0]==rs[1]&&rs[ds]>=0)&&!(Re&&Re.skins.some((t=>t.ind===e&&t.cnt>1))))return rs[ds]=-1,void genericPopup('<div class="popHeader">Charm Error</div>Charm already in use<div style="margin-top: 20px;"><div class="charmBtn" onmouseenter="playTick(0.1);" onclick="playSelect(0.1);clearPops();overrideCharm('+e+');">Override</div><div class="charmBtn" style="background:var(--green)" onmouseenter="playTick(0.1);" onclick="playSelect(0.1);clearPops();">Ok</div></div>',"charmErrorPop");saveVal("charms",JSON.stringify(rs)),t||showWindow(3),i&&updateWindow(3)}}),Object.defineProperty(window,"selectMelee",{writeable:!1,value:function(e,t,i){saveVal("meleeIndex",e),Kn=e,Is(),t||showWindow(3),i&&updateWindow(3),ms("melee",e)}}),Object.defineProperty(window,"selectSecondary",{writeable:!1,value:function(e,t){if(saveVal("secondaryInd",e),os=e,Is(),t||showWindow(3),ci&&Re&&Re.isDev&&e&&we.list.forceUpdate.val){var i=ve.classConfig[parseInt(kt)].loadout;ms("skins",[[Pt||null==ss[i[0]]?-1:-2==ss[i[0]]?ws(i[0]+1):ss[i[0]],Pt?-1:null!=ss[os]&&ve.classConfig[parseInt(kt)].secondary?-2==ss[os]?ws(os+1):ss[os]:-1],os])}}}),Object.defineProperty(window,"selectSkinColor",{writeable:!1,value:function(e){saveVal("skinColIndex",e),zn=e,Is(),updateWindow(3)}}),Object.defineProperty(window,"selectHairColor",{writeable:!1,value:function(e){saveVal("hairCol",e),Bn=e,Is(),updateWindow(3)}}),Object.defineProperty(window,"selectChatColor",{writeable:!1,value:function(e){saveVal("chatCol",e),Nn=e,Is(),updateWindow(3)}}),Object.defineProperty(window,"selectAttachment",{writeable:!1,value:function(e){saveVal("attachIndex",e),Vn=e,Is(),showWindow(3)}}),Object.defineProperty(window,"selectReticle",{writeable:!1,value:function(e,t){saveVal("reticleIndex",e),Gn=e,Wn=Jt(t),saveVal("savedReticle",Wn||""),updateAimDot(e,Wn||ce.aimDot.savedCustom),Is(),showWindow(3)}}),Object.defineProperty(window,"removeReticle",{writeable:!1,value:function(e){ea(window.event),qt[e]&&(qt.splice(e,1),setCustomRets(qt,!0),updateWindow(32))}}),Object.defineProperty(window,"selectScope",{writeable:!1,value:function(e,t){saveVal("scopeIndex",e),qn=e,Yn=Jt(t),saveVal("savedScope",Yn||""),updateScope(e,Yn||ce.aimRecticle.savedCustom),Is(),showWindow(3)}}),Object.defineProperty(window,"removeScope",{writeable:!1,value:function(e){ea(window.event),Kt[e]&&(Kt.splice(e,1),setCustomScopes(Kt,!0),updateWindow(41))}}),Object.defineProperty(window,"selectClass",{writeable:!1,value:function(e){saveVal("classindex",e),ve.classConfig[e].txts?Kc(ve.classConfig[e].txts[ae.randInt(0,ve.classConfig[e].txts.length-1)]):ae.randInt(0,2)||Kc(["Let's Go!","Alright!","I'm Ready!"][ae.randInt(0,2)]),setClassIndex(e),Is(),window.isBotFTUE?showWindow(0):windows[2].switchTab(1,!0),updSyncDat("c",e),ve&&ve.isSandbox&&Ae&&ze.classes[e]&&Be.classIndex!=e&&(Be.classIndex=e,Be.updateItems(ze,!0,!0,void 0,void 0,!0)),logEventFRVR("class_selected",{label:ve.classes[e].name,classIndex:e})}}),Object.defineProperty(window,"skinSelector",{writeable:!1,value:function(e,t,i){if(cs=e,t&&(saveVal("secondaryInd",e),os=e),Is(),i||showWindow(15),ci&&Re&&Re.isDev&&e&&we.list.forceUpdate.val){var n=ve.classConfig[parseInt(kt)].loadout;ms("skins",[[Pt||null==ss[n[0]]?-1:-2==ss[n[0]]?ws(n[0]+1):ss[n[0]],Pt?-1:null!=ss[os]&&ve.classConfig[parseInt(kt)].secondary?-2==ss[os]?ws(os+1):ss[os]:-1],os])}}}),Object.defineProperty(window,"viewAttachments",{writeable:!1,value:function(){ea(window.event),showWindow(31)}}),Object.defineProperty(window,"selectStat",{writeable:!1,value:function(e){saveVal("pcStatIndex",e),ls=e,Is(),updateWindow(3)}}),Object.defineProperty(window,"selectDye",{writeable:!1,value:function(e,t,i){saveVal("dyeIndex",e),Fn=e,Is(),t||showWindow(3),i&&updateWindow(3),ms("dye",e)}}),Object.defineProperty(window,"selectFace",{writeable:!1,value:function(e,t,i){saveVal("faceIndex",e),Hn=e,Is(),t||showWindow(3),i&&updateWindow(3),ms("face",e)}}),Object.defineProperty(window,"selectShoe",{writeable:!1,value:function(e,t,i){saveVal("shoeIndex",e),Un=e,Is(),t||showWindow(3),i&&updateWindow(3),ms("shoes",e)}}),Object.defineProperty(window,"selectStreak",{writeable:!1,value:function(e,t){e=parseInt(e),ve.streaks[e]&&ve.streaks[e].slot==t||(e=-1);var i=!0;0==t?(saveVal("streakIndex1",e),us==e&&(i=!1),us=e):1==t?(saveVal("streakIndex2",e),ps==e&&(i=!1),ps=e):2==t&&(saveVal("streakIndex3",e),fs==e&&(i=!1),fs=e),Is(),i&&updateWindow(45)}}),Object.defineProperty(window,"selectFlag",{writeable:!1,value:function(e){Re&&me.send("flg",parseInt(e))}}),Object.defineProperty(window,"selectBadge",{writeable:!1,value:function(e){Re&&me.send("bdg",parseInt(e))}}),Object.defineProperty(window,"claimBadge",{writeable:!1,value:function(e){Re&&me.send("cbdg",parseInt(e))}}),window.selectBadgePop=function(){if(Re){for(var e=0,t=0;t<ve.badges.length;t++)Re.badges.indexOf(ve.badges[t].index)<0&&ve.badges[t].claimable&&ve.badges[t].req(Re)&&e++;if(!Re.badges.length&&e<=0)return zs(null,"You dont own any badges");null==Re.stats.bdg&&(Re.stats.bdg=-1);var i="<div class='imageListHeader'>Badge Collection</div>";i+="<div id='skinList' style='margin-top:18px;text-align: center;'>";var n=[...ve.badges].sort((function(e,t){return(Re.badges.indexOf(t.index)>-1?1:0)-(Re.badges.indexOf(e.index)>-1?1:0)})).sort((function(e,t){var i=e.claimable&&e.req(Re)&&-1==Re.badges.indexOf(e.index);return(t.claimable&&t.req(Re)&&-1==Re.badges.indexOf(t.index)?1:0)-(i?1:0)}));for(t=0;t<n.length;t++){var s=Re.badges.indexOf(n[t].index)>-1,a=!s&&n[t].claimable&&n[t].req(Re);i+="<div class='badgeCard'"+(s?" onclick='selectBadge("+n[t].index+")'":a?" onclick='claimBadge("+n[t].index+")' style='outline: 2px inset #FBC02D;'":"")+"><img class='badgeImg' src='"+n[t].url+"'><div class='badgeName'>"+(n[t].name||"Unknown")+"</div><div class='badgeDesc'>"+(n[t].desc||"No Description")+"</div>"+(a?"<div class='badgeBound'><span class='material-icons' style='font-size:30px;color:#FBC02D;'>lock_open</span></div>":s?"":"<div class='badgeBound'><span class='material-icons' style='font-size:30px;color:#fff;'>lock</span></div>")+"</div>"}i+="</div>",genericPopup(i,"badgePop")}},Object.defineProperty(window,"toggleStatus",{writeable:!1,value:function(e){Re&&me.send("hds",!!e)}}),Object.defineProperty(window,"selectRegen",{writeable:!1,value:function(){ci&&Re&&Re.isDev&&me.send("prmA",11,"regen")}}),Object.defineProperty(window,"selectPack",{writeable:!1,value:function(e,t){window.ClientSession.togglePack(e,t),selectPackPop()}}),Object.defineProperty(window,"downloadPack",{writeable:!1,value:function(e){if(Bs("Downloading Mod..."),windows[3].listData[windows[3].tabIndex]&&windows[3].listData[windows[3].tabIndex].list){let t=windows[3].listData[windows[3].tabIndex].list.find((t=>t&&t.mod_id==e));if(t){let e=ae.getAssetData(t.mod_info),i=e&&e.t?ae.userAssetsUrl("/md"+t.mod_id+"/thumb.png"):null,n=ae.cleanseString(t.creatorname),s=parseInt(t.mod_updatecounter)||1,a=t.mod_name+"",r=t.mod_url;"ua"==r&&(r=ae.userAssetsUrl("/md"+t.mod_id+"/mod.zip")),window.ClientSession.downloadPack(r,a,n,i,s)}}else zs(null,"No Mod Found")}}),window.packRes=function(...e){zs(...e)},window.selectPackPop=function(){if(!window.ClientSession||!window.ClientSession.packs)return;let e="<div class='imageListHeader'>Resource Packs</div>";e+="<div id='skinList' style='margin-top:18px;text-align: center;'>";let t=window.ClientSession.packs.loaded;for(var i=0;i<t.length;i++)e+="<div class='badgeCard' onclick='selectPack("+i+", "+(t[i].enabled?0:1)+")'><img class='badgeImg' src='"+(t[i].png||"./img/cube.png")+"'><div class='badgeName'>"+(t[i].name||"Unknown").replace(/[^\w +#]/gim,"")+"</div><div class='badgeDesc'>By "+(t[i].author||"Unknown").replace(/[^\w +#]/gim,"")+"</div>"+(t[i].enabled?"":"<div class='badgeBound'><span class='material-icons' style='font-size:30px;color:#fff;'>lock</span></div>")+"</div>";e+="<div style='margin-top:18px;text-align: center;color: var(--red);margin-bottom: -4px;'>"+(t.length?"Changes take effect after a restart!":"No Packs Found!")+"</div>",e+="</div>",genericPopup(e,"badgePop")};var vs=null,ys=Object.keys(ve.store.skins).filter((e=>ve.store.skins[parseInt(e)]&&ve.store.skins[parseInt(e)].free)).map((e=>({ind:parseInt(e),cnt:1})));function bs(e,t){vs||=Object.keys(ve.store.skins).map((e=>({ind:parseInt(e),cnt:1})));var i=ve.isSandbox||e&&e.isDev?vs:e?e.skins:[];if(!ve.isSandbox&&(!e||!e.isDev)&&t){i=i.concat(ys);var n=ve.store.skins.filter((e=>!i.find((t=>t&&t.ind===e.index))&&(!!e.creators&&!!Re&&e.creators.indexOf(Re.name.toLowerCase())>-1||!!e.streamers&&!!Re&&!!Re.twitch&&e.streamers.indexOf(Re.twitch.toLowerCase())>-1||!!e.kpd&&!!Re&&(!!Re.isMod||!!Re.isDeputy)||!e.creator&&(e.seas||0)>=6&&!!Re&&!!Re.isSkinMaker&&!e.blocked))).map((e=>({ind:parseInt(e.index),cnt:1})));i=i.concat(n)}return i}function ws(e,t,i){if(!Re)return-1;var n=bs(Re,!0).filter((n=>ve.store.skins[n.ind]&&(null==t?!ve.store.skins[n.ind].type&&ve.store.skins[n.ind].weapon==e:ve.store.skins[n.ind].type==t)&&(null==ve.store.skins[n.ind].classIndex||ve.store.skins[n.ind].classIndex==kt)&&(null==i||(ve.store.skins[n.ind].rarity||0)<=i))),s=n.filter((e=>Wt.indexOf(e.ind)>=0));return s.length?ae.getRandom(s).ind||-1:n.length&&ae.getRandom(n).ind||-1}Object.defineProperty(window,"selectSkin",{writeable:!1,value:function(e,t,i){if(Ee=ve.store.skins[e],ss[t]=Ee||-2==e?e:void 0,saveVal("skins",JSON.stringify(ss)),Is(),i||showWindow(3),ci&&Re&&Re.isDev&&e&&we.list.forceUpdate.val){var n=ve.classConfig[parseInt(kt)].loadout,s=[Pt||null==ss[n[0]]?-1:-2==ss[n[0]]?ws(n[0]+1):ss[n[0]],Pt?-1:null!=ss[os]&&ve.classConfig[parseInt(kt)].secondary?-2==ss[os]?ws(os+1):ss[os]:-1];me.send("prmA",10,["skins",s,os,!!we.list.forceRegen.val])}}});var xs,Ss,Ms,ks=new de.PerspectiveCamera(15,1,.1,100);ks.aspect=1.25,ks.updateProjectionMatrix();var _s=new de.WebGLRenderer({canvas:classPreviewCanvas,precision:"mediump",antialias:!1,alpha:!0});_s.setSize(750,600),_s.setPixelRatio(window.devicePixelRatio*we.tmp.resolution),window.updateClassRender=function(){_s.setPixelRatio(window.devicePixelRatio*we.tmp.resolution)};var Ts=new de.Vector3,Cs={};function Is(e){function t(e,t=!0){n&&(n+=" - ");var i="inherit",s=ve.weaponConfig[e].name,a=!1,r=ae.assetsUrl("/textures/previews/"+(12==e?"cosmetics/3_default.png":"weapons/"+ve.weaponConfig[e].src+".png"));if(null!=ss[e]){var o=ve.store.skins[ss[e]];o&&(a=ve.store.rarities[o.rarity].animate,i=ve.store.rarities[o.rarity].color,s=o.name,r=o.thumbnail)}n+="<span "+(ce.rarityAnim&&a?"class='rainbowText' ":"")+"style='color:"+(t?i:"inherit")+"'>"+s+"</span>",menuClassIcn.src=r}var i=ve.classConfig[Cs.class||kt];menuClassName.textContent=Cs.classN||i.name,menuClassContainer.style.zIndex=e||99999;var n="";for(var s of i.loadout)t(s);menuClassSubtext.innerHTML=n;var a="";Re&&null==Re.stats.bdg&&(Re.stats.bdg=-1);var r=Re&&Re.stats.bdg>=0&&ve.badges[Re.stats.bdg]&&we.tmp.customBadge&&Re.badges.indexOf(Re.stats.bdg)>=0?ve.badges[Re.stats.bdg]:null;if(Cs.name?a=(Cs.lvl?"<div class='menuClassLevelBox' style='color:#fb2d2d'>"+Cs.lvl+"</div>":"")+(Cs.clan?"<span class='menuClassPlayerClan' style='color:#FF6A0B'>["+Cs.clan+"] </span>":"")+Cs.name+" <i class='material-icons menuClassPlayerPremium'>beenhere</i>":a+=(Re?"<div class='menuClassLevelBox' style='color:white;'>"+(Re.level||0)+"</div>":"")+"<span class='menuClassPlayerName'>"+(Re?Re.premiumT&&we.tmp.premiumBadge&&Re.alias||Re.name:Ae?"Guest_"+Ae.sid:"Guest")+"</span>"+(Re&&Re.clan?"<span class='menuClassPlayerClan' style='color:"+te.getClanCol(Re.clan,"rgba(255,255,255,0.5)")+"'>["+Re.clan+"]</span>":"")+(Re&&Re.premiumT&&we.tmp.premiumBadge?"<i class='material-icons menuClassPlayerPremium'>beenhere</i>":"")+(Re&&Re.featured&&we.tmp.verifiedBadge?"<i class='material-icons menuClassPlayerVerified'>check_circle</i>":"")+(r?"<img src='"+r.url+"' class='menuClassPlayerCustom'>":""),menuClassNameTag.innerHTML=a,d&&(menuClassNameTag.style.cssText+="margin-top: -350px !important;"),!xs){(xs=new de.Scene).name="Class",xs.add(new de.AmbientLight(9937064));var o=new de.DirectionalLight(15923452,.5);o.position.set(10,17,-10),xs.add(o)}var l=[null!=ss[i.loadout[0]]||-2!=ss[i.loadout[0]]?ss[i.loadout[0]]:-1,null==ss[i.loadout[1]]?-1:ss[i.loadout[1]]];Ss&&ve.pets.remove(Ss);var c=!ve||!ve.disableMeshes;(Ss=new Se(-1,this,ve,!0)).sid=-1,Ss.init(0,0,0,"preview",!1),Ss.skins=l,Ss.hatIndex=Cs.hat||(-2==Jn?-1:Jn),Ss.headIndex=Cs.head||(-2==Qn?-1:Qn),Ss.bodyIndex=Cs.body||(-2==Xn?-1:Xn),Ss.backIndex=Cs.back||(-2==Zn?-1:Zn),Ss.waistIndex=Cs.waist||-2==es?-1:es,Ss.petIndex=Cs.pet||-2==ts?-1:ts,Ss.meleeIndex=Cs.melee||(-2==Kn?-1:Kn),Ss.attachIndex=ve.weaponConfig[i.loadout[0]].forceAttach||ve.store.skins[l[0]]&&ve.store.skins[l[0]].forceAttach?0:parseInt(Vn),Ss.skinColIndex=zn,Ss.hairCol=Bn,Ss.dyeIndex=Cs.dye||Fn,Ss.faceIndex=Cs.face||(-2==Hn?-1:Hn),Ss.shoeIndex=Cs.shoe||(-2==Un?-1:Un),Ss.wristIndex=Cs.wrist||(-2==is?-1:is),Ss.secIndex=os,Ss.setClass(ve,Cs.class||kt,os,!0),ve.players.swapWeapon(Ss,0,!0),Ms&&xs.remove(Ms),Ms=ve.players.generateMeshes(Ss,!1,!0,c),xs.add(Ms),ve.players.updateHeadSize(Ss,Ae?Ae.headMlt:1),Ss.swapTime=0,Ss.weaponMeshes&&Ss.weaponMeshes[0]&&(Ss.weaponMeshes[0].visible=!0),Cs={},Ts.set(0,.8*u.playerHeight,0),ks.lookAt(Ts),Ss.petIndex>=0&&c&&ve.pets.add(Ss,!0)}ks.position.x=-30,ks.position.y=17,ks.position.z=-35,Is();var As="true"==getSavedVal("krk_hideFull");window.toggleHF=function(e){As=e,saveVal("krk_hideFull",e)},toggleHF(As);var Rs="true"==getSavedVal("krk_regionPriority");window.toggleRP=function(e){Rs=e,saveVal("krk_regionPriority",e)},toggleRP(!0),window.windows=[{header:S.t("windows.settings.header"),label:"settings",sticky:!0,dark:!0,popup:!0,width:1200,maxH:"calc(100% - 270px)",settingSearch:null,tabIndex:0,settingType:Ut||"basic",tabs:{basic:[{name:"General",categories:["local","serverb","kpd","dev"]},{name:"Display",categories:["interface","quality"]},{name:"Game",categories:["binds","gameplay","mobile","viewmodel"]},{name:"Sound",categories:["audio"]}].concat(w?{name:"Client",categories:["client"]}:[]),advanced:[{name:"General",categories:["local","network","serverb","popup","experimental","kpd","dev"]},{name:"Controls",categories:["binds","gameplay","controller","mobile"]},{name:"Display",categories:["interface","spectating","minimap","medals","crosshair","crosshairm","hitmarker","chat"]},{name:"Render",categories:["shaders","quality","post","editing"]},{name:"Game",categories:["gameprivacy","viewmodel","mods"]},{name:"Sound",categories:["audio"]}].concat(w?{name:"Client",categories:["client"]}:[])},searchList:function(){var e=document.getElementById("settSearch");this.settingSearch=e&&""!=e.value?e.value:null,this.settingSearch?-1==this.tabIndex?(e=document.getElementById("settHolder"))&&(e.innerHTML=this.getSettings()):this.changeTab(this.tabIndex=-1):this.changeTab(this.tabIndex=0)},collapseFolder:function(e){let t=document.getElementById("setBod_"+e.id.split("setHed_")[1]),i="none"==t.style.display;e.children[0].innerHTML="keyboard_arrow_"+(i?"down":"right"),t.style.display=i?null:"none"},changeTab:function(e){var t;this.tabIndex=e,e>-1&&(t=document.getElementById("settSearch"),this.settingSearch=null,t&&(t.value="")),(t=document.getElementById("settingsTabLayout"))&&(t.innerHTML=this.getTabs()),(t=document.getElementById("settHolder"))&&(t.innerHTML=this.getSettings())},currWep:0,changeWep:function(e){this.currWep=parseInt(e.value),updateWindow(1)},applyAllWeps:function(e){for(var t=Object.keys(we.list).filter((t=>we.list[t]["gpSetts"==e?"perWepG":"perWep"])),i=0;i<ve.weapons.length;i++)for(var n=0;n<t.length;n++)we.list[t[n]],setSetting(t[n]+"_"+i,we.list[t[n]+"_"+this.currWep].val);updateWindow(1)},resetAllWeps:function(e){for(var t=Object.keys(we.list).filter((t=>we.list[t]["gpSetts"==e?"perWepG":"perWep"])),i=0;i<ve.weapons.length;i++)for(var n=0;n<t.length;n++)we.list[t[n]],setSetting(t[n]+"_"+i,we.list[t[n]+"_"+this.currWep].def);updateWindow(1)},toggleType:function(e){-1==this.tabIndex||this.tabs[this.settingType][this.tabIndex]||(this.tabIndex=0),this.settingType=e.checked?"advanced":"basic",saveVal("krk_advanced",~~!!e.checked),setTimeout((()=>updateWindow(1)),250)},getTabs:function(){let e=-1==this.tabIndex?e=>"class='settingTab' style='border-bottom: 5px solid transparent'":e=>"class='settingTab "+(e==this.tabIndex?"tabANew":"")+"'";return this.tabs[this.settingType].map(((t,i)=>"<div "+e(i)+" onmouseenter='playTick()'\n\t\t\tonclick='playSelect(0.1);window.windows[0].changeTab("+i+")'>"+t.name+"</div>")).join("\n")},getSettings:function(){var e="";let t="settings.shaders.header",i="settings.controls.change";if((this.tabs[this.settingType][this.tabIndex]&&this.tabs[this.settingType][this.tabIndex].categories.includes("binds")||this.settingSearch&&this.searchMatches({name:i}))&&(e+='<div class=\'setBodH\'><div class="settName" style="margin-top:15px">\n\t\t\t\t'+S.t(i)+'\n\t\t\t\t<div class="settingsBtn" style="width: auto;" onclick="showWindow(7)">Edit</div>\n\t\t\t</div></div>'),this.tabs[this.settingType][this.tabIndex]&&this.tabs[this.settingType][this.tabIndex].categories.includes("shaders")||this.settingSearch&&this.searchMatches({name:t}))try{if(ce.shaderInputs.length){e+="<div class='setHed'>"+S.t(t)+"</div><div class='setBodH'>";for(var n=0;n<ce.shaderInputs.length;n++){Ee=ce.shaderInputs[n];for(var s,a=0;a<Ee.length;a++)s=Ee[a].val,e+='<div class="settName" style="margin-top:15px">'+Ee[a].name.replace(/[^\w +#]/gim,""),Ee[a].toggle?e+="<label class='switch' style='margin-left:10px'>\n\t\t\t\t\t\t\t\t\t<input type='checkbox' onclick='setShaderInput("+n+", "+a+", this.checked)'\n\t\t\t\t\t\t\t\t\t"+((s=!!s)?"checked":"")+"><span class='slider'></span></label>":(s=parseFloat(s)||0,e+="<input type='number' class='sliderVal' id='shader_input_"+n+"_"+a+"' min='"+Ee[a].min+"'\n\t\t\t\t\t\t\t\t\tmax='"+Ee[a].max+"' value='"+s+"' onkeypress='return delayExecute2("+n+", "+a+", this)'\n\t\t\t\t\t\t\t\t\tstyle='margin-right:0px;border-width:0px' />\n\t\t\t\t\t\t\t\t\t<div class='slidecontainer'><input type='range' id='shader_"+n+"_"+a+"' min='"+Ee[a].min+"'\n\t\t\t\t\t\t\t\t\tmax='"+Ee[a].max+"' step='"+Ee[a].step+"' value='"+s+"' class='sliderM'\n\t\t\t\t\t\t\t\t\toninput='setShaderInput("+n+", "+a+", this.value)'></div>"),e+="</div>"}e+="</div>"}}catch(e){}0==this.tabIndex&&(e+="<div class='setSugBox2' onclick='selectSettingPre(0)'>Default<div class='segSugIH'><div class='setSugInf'>Krunkers default Settings</div></div></div><div class='setSugBox2' onclick='selectSettingPre(1)'>Pro<div class='segSugIH'><div class='setSugInf'>Basic competitive preset</div></div></div><div class='setSugBox2' onclick='selectSettingPre(3)'>Performance<div class='segSugIH'><div class='setSugInf'>Recommended for Laptops & Chromebooks</div></div></div><div class='setSugBox2' onclick='selectSettingPre(2)'>Custom<div class='segSugIH'><div class='setSugInf'>Custom preset</div></div></div>");let r="settings.backup";(Re&&0==this.tabIndex||this.settingSearch&&this.searchMatches({name:r}))&&(e+='<div class=\'setBodH\'><div class="settName" style="margin-top:15px">\n\t\t\t\t'+S.t(r)+'\n\t\t\t\t<div class="settingsBtn" style="width: auto;" onclick="uploadSettings()">Upload</div>\n\t\t\t\t<div class="settingsBtn" style="width: auto;" onclick="fetchSettings()">Download</div>\n\t\t\t</div></div>');var o=[];for(var l in we.list){if(we.list[l].noShow)continue;if(we.list[l].dev&&(we.list[l].hide=!Re||!Re.isDev),we.list[l].kpd&&!we.list[l].hide&&(we.list[l].hide=!Re||!Re.isDev&&!Re.isMod&&!Re.isDeputy),we.list[l].admin&&(we.list[l].hide=!Re||!Re.isDev&&!Re.isAdmin),"basic"==this.settingType&&"advanced"==we.list[l].sType)continue;let e=e=>{o[we.list[l].cat]||={cnt:0,body:[],head:"<div class='setHed' id='setHed_"+we.list[l].cat+"' style='display:none' onclick='window.windows[0].collapseFolder(this)'><span class='material-icons plusOrMinus'>keyboard_arrow_down</span> "+S.t("settings."+we.list[l].cat+".header")+"</div><div class='setBodH' id='setBod_"+we.list[l].cat+"' style='display:none'>"};var t=l;(1==we.tmp.vmSetts&&we.list[l].perWep||1==we.tmp.gpSetts&&we.list[l].perWepG)&&window.windows[0].currWep>=0&&(t=l+"_"+window.windows[0].currWep);var i="<div class='settName' title='"+(we.list[l].info||"")+"'"+(null==we.list[l].hide?"":"id='"+l+"_div' style='display:"+(we.list[l].hide?"none":"block")+"'")+">"+S.t(we.list[t].name)+(we.list[t].needsRestart?" <span style='color: #eb5656'>*</span>":we.list[t].verified?" <i class='material-icons' style='color:#2196F3;font-size:33px;vertical-align:bottom;'>check_circle</i>":we.list[t].premium?" <i class='material-icons' style='color:#FBC02D;font-size:33px;vertical-align:bottom;'>beenhere</i>":"")+" ";if(we.list[t].collection&&(i+="<div class='openCollection material-icons' onclick='imagePopup(&quot;"+t+"&quot;)'>collections</div>"),i+=we.list[t].html?we.list[t].html():be._html.settings.input[we.list[t].type]?be._html.settings.input[we.list[t].type](we.list[t]):be._html.settings.input.generic(we.list[t]),i+="</div>",("vmSetts"==l||"gpSetts"==l)&&1==we.list[l].val){i+="<div class='settName'>Select Weapon<select onchange='window.windows[0].changeWep(this)' class='inputGrey2'>";for(var n=0;n<ve.weapons.length;n++)i+="<option value='"+n+"' "+(window.windows[0].currWep==n?"selected":"")+">"+ve.weapons[n].name+"</option>";i+="</select>",i+="<div class='settingsBtn' style='width: auto;' onclick='window.windows[0].applyAllWeps(&quot;"+l+"&quot;)'>Apply To All</div>",i+="<div class='settingsBtn' style='width: auto;' onclick='window.windows[0].resetAllWeps(&quot;"+l+"&quot;)'>Reset All</div>",i+="</div>"}o[we.list[l].cat].body.push(i),we.list[l].hide||o[we.list[l].cat].cnt++};this.settingSearch?this.searchMatches(we.list[l])&&!we.list[l].hide&&e():this.tabs[this.settingType][this.tabIndex]&&this.tabs[this.settingType][this.tabIndex].categories.includes(we.list[l].cat)&&e()}if(window.ClientSession&&window.ClientSession.settings)for(var l in window.ClientSession.settings){window.ClientSession.settings[l].dev&&(window.ClientSession.settings[l].hide=!Re||!Re.isDev),window.ClientSession.settings[l].admin&&(window.ClientSession.settings[l].hide=!Re||!Re.isDev&&!Re.isAdmin);let e=e=>{o[window.ClientSession.settings[l].cat]||={cnt:0,body:[],head:"<div class='setHed' id='setHed_"+window.ClientSession.settings[l].cat+"' style='display:none' onclick='window.windows[0].collapseFolder(this)'><span class='material-icons plusOrMinus'>keyboard_arrow_down</span> "+S.t("settings."+window.ClientSession.settings[l].cat+".header")+"</div><div class='setBodH' id='setBod_"+window.ClientSession.settings[l].cat+"' style='display:none'>"};var t="<div class='settName' title='"+(window.ClientSession.settings[l].info||"")+"'"+(null==window.ClientSession.settings[l].hide?"":"id='"+l+"_div' style='display:"+(window.ClientSession.settings[l].hide?"none":"block")+"'")+">"+S.t(window.ClientSession.settings[l].name)+(window.ClientSession.settings[l].needsRestart?" <span style='color: #eb5656'>*</span>":window.ClientSession.settings[l].verified?" <i class='material-icons' style='color:#2196F3;font-size:33px;vertical-align:bottom;'>check_circle</i>":window.ClientSession.settings[l].premium?" <i class='material-icons' style='color:#FBC02D;font-size:33px;vertical-align:bottom;'>beenhere</i>":"")+" ";t+=window.ClientSession.settings[l].html?window.ClientSession.settings[l].html():be._html.settings.input[window.ClientSession.settings[l].type]?be._html.settings.input[window.ClientSession.settings[l].type](window.ClientSession.settings[l],"window.ClientSession"):be._html.settings.input.generic(window.ClientSession.settings[l],"window.ClientSession"),t+="</div>",o[window.ClientSession.settings[l].cat].body.push(t),window.ClientSession.settings[l].hide||o[window.ClientSession.settings[l].cat].cnt++};this.settingSearch?this.searchMatches(window.ClientSession.settings[l])&&!window.ClientSession.settings[l].hide&&e():this.tabs[this.settingType][this.tabIndex].categories.includes(window.ClientSession.settings[l].cat)&&e()}for(var c in o)e+=o[c].head+o[c].body.join("")+"</div>",o[c].cnt&&(e=(e=e.replace("id='setHed_"+c+"' style='display:none'","id='setHed_"+c+"'")).replace("id='setBod_"+c+"' style='display:none'","id='setBod_"+c+"'"));var d=e;return d.length?d:"<div class='setHed'>"+S.t("settings.none")+"</div>"},genList:function(){var e="<div class='settingsHeader'>\n\t\t\t<div style='display:inline-block;text-align:right;float:right;'>\n\t\t\t\t"+(window.canShowAds?"<div class=\"settingsBtn\" style='width:auto;background-color:#994cd1' onclick='openOneTrust()'>Manage Ads</div>":"")+"\n\t\t\t\t<div class=\"settingsBtn\" onclick='resetSettings()'>"+S.t("settings.reset")+"</div>\n\t\t\t\t<div class=\"settingsBtn\" onclick='exportSettings()'>"+S.t("settings.export")+"</div>\n\t\t\t\t<div class=\"settingsBtn\" onclick='importSettingsPopup()'>"+S.t("settings.import")+'</div>\n\t\t\t\t<select id="settingsPreset" onchange="selectSettingPre(this.value)" class="inputGrey2" style="margin-left:0px;font-size:14px">\n\t\t\t\t\t<option value="0" '+(0==sn?"selected":"")+'>Default</option>\n\t\t\t\t\t<option value="1" '+(1==sn?"selected":"")+'>Pro</option>\n\t\t\t\t\t<option value="3" '+(3==sn?"selected":"")+'>Performance</option>\n\t\t\t\t\t<option value="2" '+(2==sn?"selected":"")+">Custom</option>\n\t\t\t\t</select>\n\t\t\t</div>\n\t\t\t<div style='display:inline-block;width:415px;'>\n\t\t\t\t<input id='settSearch' style='width: 220px;'\n\t\t\t\t\t"+(this.settingSearch?"value='"+this.settingSearch+"'":"")+"\n\t\t\t\t\ttype='text' placeholder='"+S.t("generic.search")+'\' oninput=\'windows[0].searchList()\'>\n\t\t\t\t<label class="advancedSwitch">\n\t\t\t\t\t<input type="checkbox" id="typeBtn" '+("advanced"==this.settingType?"checked":"")+"\n\t\t\t\t\t\tonclick='windows[0].toggleType(this)'>\n\t\t\t\t\t<div class=\"advancedSlider\"></div>\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t\t<div id='settingsTabLayout'>"+this.getTabs()+"</div>\n\t\t</div>";return e+="<div id='settHolder'>"+this.getSettings()+"</div>"},gen:function(){return this.genList()},searchMatches:function(e){return!!e.name&&((S.t(e.name)||"").toLowerCase().indexOf((this.settingSearch||"").toLowerCase())>=0||(S.t("settings."+e.cat+".header")||"").toLowerCase().indexOf((this.settingSearch||"").toLowerCase())>=0)}},{header:S.t("windows.servers.header"),label:"server_browser",sticky:!0,lastLoadTime:0,startTime:0,width:1150,loadedServers:!1,serverListData:[],pingData:{},socialPlayerCount:0,editorPlayerCount:0,customsInfo:[],gen:function(){return Date.now()-this.lastLoadTime<u.serverBrowserRate?this.genList():(this.lastLoadTime=Date.now(),this.loadData())},loadData:function(){var e=H.fetchGameList();fetch(u.socialURL+"/player-count").then((e=>e.json())).catch((e=>{})).then((e=>{if(e&&(windows[1].socialPlayerCount=e.playerCount,windows[1].loadedServers&&"block"==windowHolder.style.display&&2==ra)){var t=document.getElementById("socialCnt");t&&(t.innerHTML=S.t("windows.servers.social",ae.commaNumber(this.socialPlayerCount)))}})),fetch(u.editorURL+"/player-count").then((e=>e.json())).catch((e=>{})).then((e=>{if(e&&(windows[1].editorPlayerCount=e.playerCount,windows[1].loadedServers&&"block"==windowHolder.style.display&&2==ra)){var t=document.getElementById("editorCnt");t&&(t.innerHTML=S.t("windows.servers.editor",ae.commaNumber(this.editorPlayerCount)))}}));if(H.getRegionPing)H.getRegionPing().then((e=>{windows[1].pingData=e,windows[1].loadedServers&&"block"==windowHolder.style.display&&2==ra&&window.showWindow(2,!0)}));return this.loadedServers=!1,Promise.all([e]).then((e=>{var t=e[0];this.totalPlayerCount=t.totalPlayerCount;var i=t.games;this.serverListData=i,this.customsInfo.length=0,this.startTime=Date.now();var n=!1;for(var s of i){var[a,r,o,l,t]=s;if(t.c&&t.cm){var c=t.h||t.i,d=this.customsInfo.findIndex((e=>e.n==c));this.customsInfo[d]?this.customsInfo[d].c+=o:this.customsInfo.push({n:c,i:t.cm,c:o,oc:t.oc,ds:t.ds})}const e=t.v;if((u.useLooseClient||!e||e!=je)&&a===U){n=!0;break}}this.customsInfo=this.customsInfo.sort(((e,t)=>(t.c||-1)-(e.c||-1))),n?window.showWindow(2,!0):H.fetchGameInfo(U).then((e=>{this.privateServerData=e,"block"==windowHolder.style.display&&2==ra&&window.showWindow(2,!0)})),windows[1].loadedServers=!0})),"<div style='padding-top:19px;>"+S.t("generic.loading")+"</div>"},expandedRegion:-1,totalPlayerCount:0,serverSearch:null,autoPlaySearch:null,searchList:function(e){var t=document.getElementById("serverSearch");e&&(t.value=e),this.serverSearch=t&&""!=t.value?t.value:null,e&&(this.expandedRegion="Krunk_Plaza"==this.serverSearch?0:1),(t=document.getElementById("serverHolder"))&&(t.innerHTML=this.getServers())},getServers:function(e,t){var i=!!x&&localStorage.debugServerList,n=!!we.tmp.oldBrowser,s=we.list.defaultRegion.val,a=!we.list.showRegion.val,r=!!we.list.showServerTimer.val,o=t||we.tmp.defaultRegionOnly,l="",c={},d=[];if(n){c={official:{order:1,name:"Official Customs",players:0,games:[]},custom:{order:1,name:"Custom Games",players:0,games:[]}};for(var h=!1,p=0;p<this.serverListData.length;p++){var f=this.serverListData[p],[m,g,v,y,b]=f;if(b&&(!o||s==g)){if(!c[g]){var w=a?s==g?"Default Region":W==g?"Current Region":"Hidden Region":u.regionNames[g];c[g]={name:w,players:0,games:[]},s==g&&(c[g].order=1)}var M=b.oc?"official":b.c&&!this.autoPlaySearch?"custom":g;f[2]=Math.min(v,y),U===m&&(h=!0),(!this.autoPlaySearch&&!this.serverSearch||this.searchMatches(f))&&(c[M].players+=v),c[M].games.push(f)}}for(var g in h||(this.privateServerData?this.privateServerData[4]?c.custom.games.push(this.privateServerData):console.warn("Server doesn't have data yet."):console.warn("Missing private server data.")),c)c.hasOwnProperty(g)&&c[g].games&&c[g].games.length&&d.push(c[g]);for(var g of d=d.sort(((e,t)=>(t.order||-1)-(e.order||-1))))g.games.sort(((e,t)=>(t[4].pr?1:0)-(e[4].pr?1:0)||t[2]-e[2])),"Custom Games"!=g.name&&"Official Customs"!=g.name||!Rs||g.games.sort(((e,t)=>s==e[1]&&s!=t[1]?-1:s==t[1]&&s!=e[1]?1:0))}else{for(p=0;p<ne.length;++p)c[ne[p].alias]={name:ne[p].name,players:0,games:[]};for(h=!1,p=0;p<this.serverListData.length;p++){f=this.serverListData[p];var[m,g,v,y,b]=f;f[2]=Math.min(v,y);var k=!!b.c;if(b.oc&&(k=!1),b&&(!o||s==g))(z=ne[b.g])&&c[z.alias]&&(0==this.tabIndex&&k||(1!=this.tabIndex||k)&&(U===m&&(h=!0),(!this.autoPlaySearch&&!this.serverSearch||this.searchMatches(f))&&(c[z.alias].players+=v),c[z.alias].games.push(f)))}for(var g in c)c.hasOwnProperty(g)&&c[g].games.length&&d.push(c[g]);for(var g of d=d.sort(((e,t)=>(t.players||0)-(e.players||0)))){var _=Object.keys(u.regionIND);g.games.sort(((e,t)=>{var i=!!t[4].c;t[4].oc&&(i=!1);var n=!!e[4].c;e[4].oc&&(n=!1);var a=t[2],r=e[2];return a+=100*_.indexOf(t[1]),r+=100*_.indexOf(e[1]),t[4].pr&&(a+=i?2e4:50),e[4].pr&&(r+=n?2e4:50),t[1]==s&&(a+=1e4),e[1]==s&&(r+=1e4),t[2]<=0&&!t[4].pr&&(a-=5e4),e[2]<=0&&!e[4].pr&&(r-=5e4),a-r}))}}if(null!=e){var T=[];if(!(g=d[e])||!g.games)return T;g.games=g.games.filter((e=>e[2]<e[3]&&e[2]>0));for(var C=0;C<g.games.length;C++){var I=g.games[C],[m,A,v,y,b]=I,R=U&&U==m;(this.autoPlaySearch||this.serverSearch)&&!this.searchMatches(I)||R||T.push(m)}return T}for(var P=0;P<d.length;P++){(g=d[P]).games=g.games.filter((e=>!As||e[2]!=e[3]));var E=g.name+"<span style='float:right;color:rgba(255,255,255,0.9)'>"+g.players+" <span style='color:rgba(255,255,255,0.6)'>online</span></span>",D=this.expandedRegion==P;if(l+="<div class='setHed' style='margin-top:20px;' onmouseenter='playTick()' onclick='playSelect(0.1);setExpandedRegion("+(D?-1:P)+")' style='cursor: pointer;'><span class='material-icons plusOrMinus'>"+(D?"expand_more":"navigate_next")+"</span> "+E+"<div class='quickJoin' onclick='quickJoinRegion("+P+","+(n?0:1)+")'>Quick Join</div></div>",D){l+="<div class='setBodH' style='padding-top:10px;padding-bottom:10px;'>";var O=0,L=Date.now();for(C=0;C<g.games.length;C++){I=g.games[C];var[m,A,v,y,b,j]=I;R=U&&U==m;if((!o||s==A)&&(!this.autoPlaySearch&&!this.serverSearch||this.searchMatches(I))){O++;var z=ne[b.g]&&ne[b.g].alias||"",B=ne[b.g]&&ne[b.g].doubleXP&&!b.ds&&!b.c,N=!!b.oc,F=!!b.oc||!!b.ds,H=i?m:b.h||b.i;b.oc||b.ds||b.c||b.h||n||!z||(H=z+"_"+H);var V=te.ping.low;(this.pingData[A]||0)/2>=150?V=te.ping.high:(this.pingData[A]||0)/2>=50&&(V=te.ping.medium);var G=!b.oc&&!b.c&&!b.ds&&r,q=Math.max(0,(j||0)-(L-this.startTime)/1e3),Y=ae.getReadableTime(1e3*(q||0),!0,void 0,!0),K=(b.c||n?b.ds||b.h?"":z+"_":"")+(N?" <div class='krIcon' style='margin-top:-14px;vertical-align:middle;background-color: var(--green);'>OFFICIAL</div> ":"")+(F?" <div class='krIcon' style='margin-top:-14px;vertical-align:middle;background-color: var(--blue);'>24/7</div> ":"")+(B?" <div class='krIcon' style='margin-top:-14px;vertical-align:middle;background-color: var(--yellow);'>2XP</div> ":"")+H+(b.kr?" <div class='krIcon' style='margin-top:-6px;vertical-align:middle'>KR</div> ":"")+(b.pr?" <span class='material-icons' style='margin-top:-6px;color:#FBC02D;vertical-align:middle'>star</span> ":"")+(b.pw?" <span class='material-icons' style='margin-top:-6px;color:#FBC02D;vertical-align:middle'>lock</span> ":"")+"<div class='serverPCount'>"+v+"/"+y+"</div>"+(b.c||!n||n&&b.oc?"<div class='serverRegion'>"+(a?s==A?"DEFAULT":W==A?"CURRENT":"HIDDEN":m.split(":")[0])+" -&nbsp;</div>":"")+"<div class='serverPing material-icons' style='color:"+(V||te.ping.low)+"!important;'>signal_cellular_alt</div>"+(G?'<div class="serverTimeLeft" data-time-left="'+(q||0)+'">'+(Y?S.t("windows.servers.timeLeft",Y):S.t("windows.servers.starting"))+"</div>":"");l+="<div class='settName settNameIn' onmouseenter='playTick()'style='"+(R?"color:#fff !important;":"")+"padding-top:10px;margin-top:0px;' onclick='playSelect(0.1);"+('checkedSwitchServer("'+m+'", this.querySelector(".serverPCount"))')+"'>"+K+"</div>"}}g.games.length&&O||(l+="<div style='margin-left: 30px;margin-top: 5px;margin-bottom: 2px;'>"+S.t("windows.servers.none")+"</div>"),l+="</div>"}}return l},tabIndex:0,switchTab:function(e){this.tabIndex=e,this.expandedRegion=-1,updateWindow(2)},genList:function(){var e,t=this;if(window.setExpandedRegion=function(e){t.expandedRegion=e,t.lastLoadTime=Date.now();var i=document.getElementById("serverHolder");i&&(i.innerHTML=t.getServers())},we.tmp.oldBrowser){if(e="<div class='serverHeader'><div class='setBodH' style='padding:10px;margin-top:0px;margin-bottom:8px;width:calc(100% - 20px) !important;margin-left:0px;'><div style='display:inline-block'><a onclick='showWindow(42)'>+ Host Game</a></div><div style='display:inline-block;'><input id='serverSearch' style='width:450px;margin-left:16px;margin-right:18px' type='text' placeholder='Search: FFA, SYD, Burg'"+(this.serverSearch?" value='"+this.serverSearch+"'":"")+" oninput='windows[1].searchList()'></input></div><div style='float:right;display:inline-block;'><div id='hostMenuBtn' onclick='windows[0].tabIndex=0;showWindow(1);'><span class='material-icons' style='color:#fff;font-size:40px;margin-bottom:-1px;'>miscellaneous_services</span></div></div><div id=\"hideFull\" style=\"display:inline-block;float:right;margin-right:20px;margin-top:3px;\"><span style='color:#fff'>"+S.t("windows.servers.hide")+"</span><label class='switch2' style='margin-top: 4px;margin-left: 11px;'><input type='checkbox' onclick='toggleHF(this.checked);windows[1].searchList()'"+(As?" checked":"")+"><span class='slider2'></span></label></div></div></div><div style='height:10px'></div>",this.customsInfo.length>=3){e+="<div class='carousel' id='carousel-infinite' style='margin-bottom:25px;'>",this.customsInfo.length=Math.min(31,this.customsInfo.length);for(var i,n=0;n<this.customsInfo.length;n++)i=!!this.customsInfo[n].oc||!!this.customsInfo[n].ds,e+="<div class='slide' onclick='windows[1].searchList(&quot;"+ae.cleanseString(this.customsInfo[n].n)+"&quot;)'><img class='slideImg' loading='lazy' src='"+ae.userAssetsUrl("/m"+this.customsInfo[n].i+"/thumb.png")+"' onerror='this.onerror=null;this.src=\"./img/noimg.png\";'><div class='slideName'>"+this.customsInfo[n].n+"</div><div class='slidePlayers'><span class='material-icons'>person</span>"+this.customsInfo[n].c+"</div>"+(i?"<div class='slideTag'>24/7</div>":"")+"</div>";e+="</div>"}e+="<div style='font-size:20px'>",e+="<div id='serverHolder'>"+this.getServers()+"</div>",e+="<div class='setBodH' style='padding-bottom:10px;margin-top:30px;padding-top:0px;margin-left:0px;width:calc(100% - 40px);'><div style='height:10px'></div><b style='font-size:26px;color:rgba(255,255,255,0.8)'><span style='font-size:26px;color:rgba(255,255,255,0.8)' id='playerCnt'>"+S.t("windows.servers.online",ae.commaNumber(this.totalPlayerCount))+"</span><span style='float:right;font-size:26px;color:font-size:26px;color:rgba(255,255,255,0.6);position: absolute;left: 50%;transform: translateX(-50%);' id='editorCnt'>"+S.t("windows.servers.editor",ae.commaNumber(this.editorPlayerCount))+"</span><span style='float:right;font-size:26px;color:rgba(255,255,255,0.6)' id='socialCnt'>"+S.t("windows.servers.social",ae.commaNumber(this.socialPlayerCount))+"</span></b></div>",e+="</div>"}else{e="<div class='serverHeader'><div class='setBodH' style='padding:10px;margin-top:0px;margin-bottom:8px;width:calc(100% - 20px) !important;margin-left:0px;'><div style='display:inline-block'><a onclick='showWindow(42)'>+ Host Game</a></div><div style='display:inline-block;'><input id='serverSearch' style='width:450px;margin-left:16px;margin-right:18px' type='text' placeholder='Search: FFA, SYD, Burg'"+(this.serverSearch?" value='"+this.serverSearch+"'":"")+" oninput='windows[1].searchList()'></input></div><div style='float:right;display:inline-block;'><div id='hostMenuBtn' onclick='windows[0].tabIndex=0;showWindow(1);'><span class='material-icons' style='color:#fff;font-size:40px;margin-bottom:-1px;'>miscellaneous_services</span></div></div><div id=\"hideFull\" style=\"display:inline-block;float:right;margin-right:20px;margin-top:3px;\"><span style='color:#fff'>"+S.t("windows.servers.hide")+"</span><label class='switch2' style='margin-top: 4px;margin-left: 11px;'><input type='checkbox' onclick='toggleHF(this.checked);windows[1].searchList()'"+(As?" checked":"")+"><span class='slider2'></span></label></div></div></div><div style='height:10px'></div>",e+="<div class='bigMenTabs' style='margin-top:0px !important;margin-bottom:30px !important;'>";for(n=0;n<u.serverTabs.length;++n)e+="<div class='bigMenTab"+(this.tabIndex==n?" bigMenTabA":"")+"' style='height:18px;' onclick='playSelect();windows[1].switchTab("+n+")'>"+u.serverTabs[n]+"</div>";e+="</div>",2!=this.tabIndex&&(e+="<div id='serverHolder'>"+this.getServers()+"</div>"),e+="<div class='setBodH' style='padding-bottom:10px;margin-top:30px;padding-top:0px;margin-left:0px;width:calc(100% - 40px);'><div style='height:10px'></div><b style='font-size:26px;color:rgba(255,255,255,0.8)'><span style='font-size:26px;color:rgba(255,255,255,0.8)' id='playerCnt'>"+S.t("windows.servers.online",ae.commaNumber(this.totalPlayerCount))+"</span><span style='float:right;font-size:26px;color:font-size:26px;color:rgba(255,255,255,0.6);position: absolute;left: 50%;transform: translateX(-50%);' id='editorCnt'>"+S.t("windows.servers.editor",ae.commaNumber(this.editorPlayerCount))+"</span><span style='float:right;font-size:26px;color:rgba(255,255,255,0.6)' id='socialCnt'>"+S.t("windows.servers.social",ae.commaNumber(this.socialPlayerCount))+"</span></b></div>",e+="</div>"}return e},updateTimeLeft:function(e){e.querySelectorAll('[data-time-left]:not([data-time-left="0"])').forEach((e=>{let t=parseInt(e.dataset.timeLeft);t--,e.dataset.timeLeft=t;let i=ae.getReadableTime(1e3*(t||0),!0,void 0,!0);e.textContent=""+(i?S.t("windows.servers.timeLeft",i):S.t("windows.servers.starting"))}))},timeLeftInterval:null,updateTimers:function(){windows[1].stopTimers(),windows[1].timeLeftInterval=setInterval((()=>{let e=document.getElementById("serverHolder");return e?void windows[1].updateTimeLeft(e):void windows[1].stopTimers()}),1e3)},stopTimers:function(){clearInterval(windows[1].timeLeftInterval),windows[1].timeLeftInterval=null},post:function(){if(this.customsInfo.length>=3&&we.tmp.oldBrowser)if(document.getElementById("carousel-infinite"))new PureJSCarousel({carousel:"#carousel-infinite",slide:".slide"});else setTimeout((function(){new PureJSCarousel({carousel:"#carousel-infinite",slide:".slide"})}),200);we.list.showServerTimer.val&&this.updateTimers()},close:function(){windows[1].stopTimers()},searchMatches(e){var[t,i,n,s,a]=e;if(!a)return!1;var r=ne[a.g]&&ne[a.g].alias||"",o=a.h||a.i;a.oc||a.c||we.tmp.oldBrowser||!r||(o=r+"_"+o);var l=(a.c||we.tmp.oldBrowser?r+"_":"")+o,c=u.regionNames[i],d=(this.autoPlaySearch||this.serverSearch||"").toLowerCase();return(a.h||a.i||"").toLowerCase().indexOf(d)>=0||(t.split(":")[0]||"").toLowerCase().indexOf(d)>=0||(o||"").toLowerCase().indexOf(d)>=0||(r||"").toLowerCase().indexOf(d)>=0||(l||"").toLowerCase().indexOf(d)>=0||(i||"").toLowerCase().indexOf(d)>=0||(c||"").toLowerCase().indexOf(d)>=0}},{header:S.t("windows.loadout.header"),label:"customize",import:function(e){if(e){var t={};for(var i in e)e[i]&&(t[i.replace(/[^a-zA-Z0-9 _-]+/gim,"")]=e[i]);saveVal("krk_loadouts",JSON.stringify(t))}},action:function(e){var t=loadoutSelect.value.replace(/[^a-zA-Z0-9 _-]+/gim,"");if((0==e||2==e)&&"Select"==t)return;let i=getSavedVal("krk_loadouts");i=i?JSON.parse(i):{};var n=loadoutName.value.length?loadoutName.value:"Select"==t?"Preset1":t;if(2==e)i[t]&&delete i[t],saveVal("krk_loadouts",JSON.stringify(i));else{let s=1==e?{}:i[t];1==e?(s.skinColIndex=zn,s.hairCol=Bn,s.chatCol=Nn,s.dyeIndex=parseInt(Fn),s.faceIndex=parseInt(Hn),s.shoeIndex=parseInt(Un),s.attachIndex=parseInt(Vn),s.reticleIndex=parseInt(Gn),s.savedReticle=Wn,s.scopeIndex=parseInt(qn),s.savedScope=Yn,s.meleeIndex=parseInt(Kn),s.bodyIndex=parseInt(Xn),s.backIndex=parseInt(Zn),s.petIndex=parseInt(ts),s.wristIndex=parseInt(is),s.hatIndex=parseInt(Jn),s.headIndex=parseInt(Qn),s.playerCardIndex=parseInt($n),s.waistIndex=parseInt(es),s.secondaryInd=parseInt(os),s.pcStatIndex=parseInt(ls),s.classindex=parseInt(kt),s.streakIndex1=parseInt(us),s.streakIndex2=parseInt(ps),s.streakIndex3=parseInt(fs),s.skins=JSON.stringify(ss||{}),s.charms=JSON.stringify(rs||[]),i[n]=s,saveVal("krk_loadouts",JSON.stringify(i))):0==e&&("skinColIndex"in s&&(saveVal("skinColIndex",s.skinColIndex),zn=s.skinColIndex),"hairCol"in s&&(saveVal("hairCol",s.hairCol),Bn=s.hairCol),"chatCol"in s&&(saveVal("chatCol",s.chatCol),Nn=s.chatCol),"dyeIndex"in s&&(saveVal("dyeIndex",s.dyeIndex),Fn=s.dyeIndex),"faceIndex"in s&&(saveVal("faceIndex",s.faceIndex),Hn=s.faceIndex),"shoeIndex"in s&&(saveVal("shoeIndex",s.shoeIndex),Un=s.shoeIndex),"attachIndex"in s&&(saveVal("attachIndex",s.attachIndex),Vn=s.attachIndex),"reticleIndex"in s&&(saveVal("reticleIndex",s.reticleIndex),Gn=s.reticleIndex,Wn=Jt(s.savedReticle),saveVal("savedReticle",Wn||""),updateAimDot(Gn,Wn)),"scopeIndex"in s&&(saveVal("scopeIndex",s.scopeIndex),qn=s.scopeIndex,Yn=Jt(s.savedScope),saveVal("savedScope",Yn||""),updateScope(qn,Yn)),"meleeIndex"in s&&(saveVal("meleeIndex",s.meleeIndex),Kn=s.meleeIndex),"bodyIndex"in s&&(saveVal("bodyIndex",s.bodyIndex),Xn=s.bodyIndex),"backIndex"in s&&(saveVal("backIndex",s.backIndex),Zn=s.backIndex),"hatIndex"in s&&(saveVal("hatIndex",s.hatIndex),Jn=s.hatIndex),"headIndex"in s&&(saveVal("headIndex",s.headIndex),Qn=s.headIndex),"playerCardIndex"in s&&(saveVal("playerCardIndex",s.playerCardIndex),$n=s.playerCardIndex),"waistIndex"in s&&(saveVal("waistIndex",s.waistIndex),es=s.waistIndex),"pcStatIndex"in s&&(saveVal("pcStatIndex",s.pcStatIndex),ls=s.pcStatIndex),"secondaryInd"in s&&(saveVal("secondaryInd",s.secondaryInd),os=s.secondaryInd),"classindex"in s&&(saveVal("classindex",s.classindex),setClassIndex(s.classindex||0)),"skins"in s&&(ns=s.skins,ss=ns?JSON.parse(ns):{},saveVal("skins",JSON.stringify(ss))),"charms"in s&&(as=s.charms,rs=as?JSON.parse(as):[],saveVal("charms",JSON.stringify(rs))),"petIndex"in s&&(saveVal("petIndex",s.petIndex),ts=s.petIndex),"wristIndex"in s&&(saveVal("wristIndex",s.wristIndex),is=s.wristIndex),"streakIndex1"in s&&(saveVal("streakIndex1",s.streakIndex1),us=s.streakIndex1,ae.isNumber(us)||(us=-1),ve.streaks[us]||(us=-1)),"streakIndex2"in s&&(saveVal("streakIndex2",s.streakIndex2),ps=s.streakIndex2,ae.isNumber(ps)||(ps=1),ve.streaks[ps]||(ps=-1)),"streakIndex3"in s&&(saveVal("streakIndex3",s.streakIndex3),fs=s.streakIndex3,ae.isNumber(fs)||(fs=0),ve.streaks[fs]||(fs=-1)),Is(),updateWindow(3))}windows[2].genLoadouts()},genLoadouts:function(e=!1){let t=getSavedVal("krk_loadouts");t=t?JSON.parse(t):{};var i="<span class='settNameSmall' style='margin:0;margin-bottom:5px;border-bottom: unset;'><input id='loadoutName' type='text' class='formInput' placeholder='Loadout name' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' style='border:none;background:#eee;padding-bottom:6px;float:left;margin-top:5px;margin-bottom:5px;'><select id='loadoutSelect'><option selected>Select</option>";for(let e in t)i+="<option>"+e+"</option>";return i+="</select>",i+="<div class='loadoutBtn' onclick='windows[2].action(2)'>Delete</div><div class='loadoutBtn' onclick='windows[2].action(1)'>Save</div><div class='loadoutBtn' onclick='windows[2].action(0)'>Load</div></span>",e?i:void(loadoutHolder.innerHTML=i)},width:850,tabIndex:window.isBotFTUE?0:1,tabSub:0,switchTab:function(e,t,i){this.tabSub=i||0,(this.tabIndex!=e||t)&&(this.tabIndex=e,menuWindow.scrollTop=0,updateWindow(3))},goBack:function(){showWindow(3)},gen:function(){var e="";if(e+="<div id='selectorContainer'>",e+="<div class='selectorItem"+(0==this.tabIndex?" selectedItem":"")+"' onclick='windows[2].switchTab(0)' onmouseenter='playTick()'><div class='selectorLabel'>Class</div><img loading='lazy' class='selectorIcon pixelated' src='"+ae.assetsUrl("/img/customize/class.png")+"'></div>",window.isBotFTUE||(e+="<div class='selectorItem"+(1==this.tabIndex?" selectedItem":"")+"' onclick='windows[2].switchTab(1)' onmouseenter='playTick()'><div class='selectorLabel'>Loadout</div><img loading='lazy' class='selectorIcon crisp-edges' src='"+ae.assetsUrl("/img/customize/loadout.png")+"'></div>",e+="<div class='selectorItem"+(2==this.tabIndex?" selectedItem":"")+"' style='font-size: 17px' onclick='windows[2].switchTab(2)' onmouseenter='playTick()'><div class='selectorLabel'>Customize</div><img loading='lazy' class='selectorIcon' src='"+ae.assetsUrl("/img/customize/outfit.png")+"'></div>",e+="<div class='selectorItem"+(3==this.tabIndex?" selectedItem":"")+"' onclick='windows[2].switchTab(3)' onmouseenter='playTick()'><div class='selectorLabel'>Other</div><img loading='lazy' class='selectorIcon' src='"+ae.assetsUrl("/img/customize/other.png")+".png'></div>"),e+="</div>",e+="<div id='customizeContainer'"+(2==this.tabIndex?" style='margin-bottom: -10px;text-align: center;'":"")+">",0==this.tabIndex){const o=window.isBotFTUE?[0,1,2,3,4,5]:ve.config.classes;e+="<div class='skinList' style='text-align: center;'>";for(var t=0;t<ve.classConfig.length;++t)if(Ee=ve.classConfig[t],o.indexOf(t)>=0){var i=Re&&Re.stats&&Re.stats["c"+t]?Re.stats["c"+t]:0,n=u.rankVar*Math.sqrt(i),s=Math.floor(n),a=Math.round(100*(n-s)),r=s>1?Math.pow(s/u.rankVar,2):0,l=Math.pow((s+1)/u.rankVar,2);s=Math.max(1,s+1);var c=!Ee.req||Ee.req(Re,ve)||ve.isSandbox;e+='<div class="classCard" onmouseenter="playTick()" '+(c?'onclick="selectClass('+t+')"':"")+'>\n\t\t\t\t\t\t<div class="classImgH">\n\t\t\t\t\t\t\t<img loading="lazy" style="image-rendering:pixelated" class="classImgC" src="'+tn(t)+"\">\n\t\t\t\t\t\t\t<div class='classHP'>"+Ee.health+"<span style='color: #868484;font-size: 12px;'> HP</span></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"className\">"+Ee.name+'</div>\n\t\t\t\t\t\t<div class="classWeap">'+(c?ve.weaponConfig[Ee.loadout[0]].name:S.t("windows.secondary."+(Ee.customOnly?"customOnly":Ee.premiumOnly?"premiumOnly":"req"),Ee.minRec))+"</div>\n\t\t\t\t\t\t<div class='classXPBar'>\n\t\t\t\t\t\t\t<div class='clsXPBarC' style='width:calc("+a+"% - 8px)'></div>\n\t\t\t\t\t\t\t<div class='clsXPBarV'>"+parseInt(i-r)+" / "+parseInt(l-r)+"</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class='classLvl'>Lvl "+s+"</div>\n\t\t\t\t\t\t"+(c?"":"<div class='lockedClass'>\n\t\t\t\t\t\t\t<span class='material-icons' style='font-size: 70px;color:"+(Ee.premiumOnly?"var(--yellow)":"#fff")+";'>\n\t\t\t\t\t\t\t"+(Ee.premiumOnly?"beenhere":"lock")+"\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>")+"\n\t\t\t\t\t</div>"}window.isBotFTUE&&(e+='<div class="ftueUnlockClasses" onclick="showWindow(5)">Login / Register to unlock all '+ve.classConfig.length+" classes</div>"),e+="</div>"}else if(1==this.tabIndex){var d=ve.classConfig[kt];ve.config.classes.indexOf(parseInt(kt))<0&&(kt=ve.config.classes[0],d=ve.classConfig[kt]);var h=12==d.loadout[0]?"None":ve.weaponConfig[d.loadout[0]].name,p="#efefef",f=null,m=!1,g=ae.assetsUrl("/textures/previews/weapons/"+ve.weaponConfig[d.loadout[0]].src+".png"),v=d.secondary&&ve.weaponConfig[os]?ve.weaponConfig[os].name:"None",y=d.secondary?"#2196F3":"#efefef",b=null,w=!1,x=ae.assetsUrl("/textures/previews/weapons/"+ve.weaponConfig[os].src+".png"),M=-2==Kn?"Random":"Combat Knife",k="#efefef",_=null,T=!1,C=ae.assetsUrl("/textures/previews/cosmetics/3_default.png"),I=(null!=ve.weaponConfig[d.loadout[0]].attach||ve.store.skins[ss[d.loadout[0]]]&&ve.store.skins[ss[d.loadout[0]]].attachBypass)&&!ve.weaponConfig[d.loadout[0]].forceAttach,A="None",R=null,P=ae.assetsUrl("/textures/previews/cosmetics/12_default.png"),E="None",D=null,O=ae.assetsUrl("/textures/previews/cosmetics/12_default.png");if(Re){var L;if(null!=ss[d.loadout[0]]&&12!=d.loadout[0])(Q=ve.store.skins[ss[d.loadout[0]]])?(p=ve.store.rarities[Q.rarity||0].color,ve.store.rarities[Q.rarity]&&(f=ve.store.rarities[Q.rarity].color),m=ve.store.rarities[Q.rarity||0].animate,h=Q.name,g=Q.thumbnail,Q.forceAttach&&(I=!1)):-2==ss[d.loadout[0]]&&(h="Random",p="#2196F3");if(d.secondary&&null!=ss[os])(Q=ve.store.skins[ss[os]])?(y=ve.store.rarities[Q.rarity||0].color,ve.store.rarities[Q.rarity]&&(b=ve.store.rarities[Q.rarity].color),w=ve.store.rarities[Q.rarity||0].animate,v=Q.name,x=Q.thumbnail):-2==ss[os]&&(v="Random");if(Kn>=0&&ve.store.skins[Kn])(Q=ve.store.skins[Kn])&&(T=ve.store.rarities[Q.rarity||0].animate,ve.store.rarities[Q.rarity]&&(_=ve.store.rarities[Q.rarity].color),M=Q.name,k=ve.store.rarities[Q.rarity||0].color,C=Q.thumbnail);if(12!=d.loadout[0])(L=ve.store.skins[rs[0]])?(ve.store.rarities[L.rarity||0].color,ve.store.rarities[L.rarity]&&(R=ve.store.rarities[L.rarity].color),ve.store.rarities[L.rarity||0].animate,A=L.name,P=L.thumbnail):-2==rs[0]&&(A="Random","#2196F3");if(d.secondary)(L=ve.store.skins[rs[1]])?(ve.store.rarities[L.rarity||0].color,ve.store.rarities[L.rarity]&&(D=ve.store.rarities[L.rarity].color),ve.store.rarities[L.rarity||0].animate,E=L.name,O=L.thumbnail):-2==rs[1]&&(E="Random","#2196F3")}var j=I&&ve.attach[Vn]?ve.attach[Vn].name:"None",z=I,B=z&&Me[Gn]?Me[Gn].name:-2==Gn?"Custom":"None",N=z&&Me[Gn]?ae.assetsUrl("/textures/reticles/reticle_"+Me[Gn].id+"."+(Me[Gn].type||"png")):-2==Gn?Wn:"",F=null!=ve.weaponConfig[d.loadout[0]].scope,H=F&&ke[qn]?ke[qn].name:-2==qn?"Custom":"None",U=F&&ke[qn]?ae.assetsUrl("/textures/scopes/scope_"+ke[qn].id+"."+(ke[qn].type||"png")):-2==qn?Yn:"";e+="<div id='loadoutHolder' style='text-align:left;margin-bottom:5px;margin-top: -8px;'>"+windows[2].genLoadouts(!0)+"</div>",e+="<div style='margin-top: 10px;'>",e+="<div class='custContainer"+(12==d.loadout[0]?"":" contCanSelect' onclick='skinSelector("+d.loadout[0]+")")+"' style='width: 47.5%;height: 163px;' onmouseenter='playTick()'>",e+="<div class='custItNm'>"+S.t("windows.loadout.primary")+"</div>",e+="<span class='settLabel "+("#292929"==p?"greyShad":"blackShad")+(ce.rarityAnim&&m?" rainbowText":"")+"' style='color:"+p+";right: unset;left: 8px;'>"+h+"</span>","Random"==h?(e+="<img draggable='false' class='custIcon custSil' src='"+g+"'>",e+="<div class='selRandom blackShad'>?</div>"):e+="None"==h?"<div class='selRandom blackShad'>X</div>":"<img class='custIcon' src='"+g+"'"+(f?" style='filter:drop-shadow(0 0 0.2rem "+f+"88)'":"")+">";var V=ve.weaponConfig[d.loadout[0]]&&ve.weaponConfig[d.loadout[0]].charm&&(!ve.store.skins[rs[0]]||!ve.store.skins[rs[0]].noCharm);e+=V?'<div class="custSubContainer" onclick="charmSelector(0)">\n\t\t\t\t<div class="custItNm" style="font-size: 12px;">'+S.t("windows.loadout.charm")+"</div>\n\t\t\t\t"+("None"==A?'<div class="selRandom blackShad" style="font-size: 20px;">X</div>':"Random"==A?"<img draggable='false' class='custIcon custSil' src='"+P+"'>\n\t\t\t\t\t<div class='selRandom blackShad' style=\"font-size: 20px;\">?</div>":'<img class="custIcon" src="'+P+'" '+(R?' style="margin-top:0;filter:drop-shadow(0 0 0.2rem '+R+'88)"':"")+">")+"\n\t\t\t</div>":"",e+=I?'<div class="custSubContainer contCanSelect'+(V?" bottom":"")+'" onclick="viewAttachments()">\n\t\t\t\t<div class="custItNm" style="font-size: 12px;">'+S.t("windows.loadout.primary.sight")+"</div>\n\t\t\t\t"+("None"==j?'<div class="selRandom blackShad" style="font-size: 20px;">X</div>':'<img class="custIcon" src="'+ae.assetsUrl("/textures/previews/attach/attach_"+ve.attach[Vn].id+".png")+'">')+"\n\t\t\t</div>":"",e+="</div> ",e+="<div class='custContainer"+(d.secondary?" contCanSelect' onclick='showWindow(20)":"")+"' style='width: 47.5%;height: 163px;' onmouseenter='playTick()'>",e+="<div class='custItNm'>"+S.t("windows.loadout.secondary")+"</div>",e+="<span class='settLabel "+("#292929"==y?"greyShad":"blackShad")+(ce.rarityAnim&&w?" rainbowText":"")+"' style='color:"+y+";right: unset;left: 8px;'>"+v+"</span>","Random"==v?(e+="<img draggable='false' class='custIcon custSil' src='"+x+"'>",e+="<div class='selRandom blackShad'>?</div>"):e+="None"==v?"<div class='selRandom blackShad'>X</div>":"<img class='custIcon' src='"+x+"'"+(b?" style='filter:drop-shadow(0 0 0.2rem "+b+"88)'":"")+">",e+=d.secondary&&ve.weaponConfig[os]&&ve.weaponConfig[os].charm&&(!ve.store.skins[rs[1]]||!ve.store.skins[rs[1]].noCharm)?'<div class="custSubContainer" onclick="charmSelector(1)">\n\t\t\t\t<div class="custItNm" style="font-size: 12px;">'+S.t("windows.loadout.charm")+"</div>\n\t\t\t\t"+("None"==E?'<div class="selRandom blackShad" style="font-size: 20px;">X</div>':"Random"==E?"<img draggable='false' class='custIcon custSil' src='"+O+"'>\n\t\t\t\t\t<div class='selRandom blackShad' style=\"font-size: 20px;\">?</div>":'<img class="custIcon" src="'+O+'" '+(D?' style="margin-top:0;filter:drop-shadow(0 0 0.2rem '+D+'88)"':"")+">")+"\n\t\t\t</div>":"",e+="</div> ",e+="<div class='custContainer contCanSelect' onclick='showWindow(26)' style='width: 30.7%;height: 163px;' onmouseenter='playTick()'>",e+="<div class='custItNm'>"+S.t("windows.loadout.melee")+"</div>",e+="<span class='settLabel "+("#292929"==k?"greyShad":"blackShad")+(ce.rarityAnim&&T?" rainbowText":"")+"' style='color:"+k+"'>"+M+"</span>","Random"==M?(e+="<img draggable='false' class='custIcon custSil' src='"+C+"'>",e+="<div class='selRandom blackShad'>?</div>"):e+="None"==M?"<div class='selRandom blackShad'>X</div>":"<img class='custIcon' src='"+C+"'"+(_?" style='filter:drop-shadow(0 0 0.2rem "+_+"88)'":"")+">",e+="</div> ";e+="<div class='custContainer"+(z||F?" contCanSelect' onclick='showWindow("+(z?32:41)+")":"")+"' onmouseenter='playTick()' style='width: 30.7%;height: 163px;'>",e+="<div class='custItNm'>"+S.t("windows.loadout.primary."+(z?"reticle":"scope"))+"</div>",e+="<span class='settLabel blackShad' style='color:"+((z||F)&&"None"!=(z?B:H)?"#2196F3":"#efefef")+"'>"+(z?B:H)+"</span>",e+=(z||F)&&"None"!=(z?B:H)&&(z?N:U)?"<img class='custIconScope' src='"+(z?N:U)+"'>":"<div class='selRandom blackShad'>X</div>",e+="</div> ";var G=[us,ps,fs];e+="<div class='custContainer contCanSelect' onclick='showWindow(45)' onmouseenter='playTick()' style='width: 30.7%;height: 163px;'>",e+="<div class='custItNm'>"+S.t("windows.loadout.streaks")+"</div>";var W="";for(t=0;t<G.length;t++)ve.streaks[G[t]]&&(W+="<img class='custStreakIcon' src='"+ae.assetsUrl("/img/streaks/"+G[t]+".png")+"'>");e+=W?"<div class='custStreakIconH'>"+W+"</div>":"<div class='selRandom blackShad'>X</div>",e+="</div>"}else if(2==this.tabIndex){var q=[["hat",1,Jn,16,1],["head",15,Qn,51,0],["face",7,Hn,39],["body",2,Xn,17,4],["back",14,Zn,50,3],["dye",5,Fn,34],["waist",6,es,38],["shoe",8,Un,40],["pet",9,ts,43],["wrist",11,is,44],["spray",null,No,9],["playerCard",16,$n,52]],Y=[];for(t=0;t<q.length;t++){var K=!1,X="#efefef",Z=-2==q[t][2]?"Random":"None",J="spray"==q[t][0]?ae.assetsUrl("/textures/sprays/0.png"):ae.assetsUrl("/textures/previews/cosmetics/"+q[t][1]+"_default.png"),Q={},$="blackShad",ee=16==q[t][1]?"custIconCard":"custIcon",te=null!=q[t][4],ie=Re&&Re.premiumT>0;ve.isSandbox&&(te=!1),Re&&Re.isDev&&(te=!1);var ne=!1;if(te&&!ie){var se=q[q[t][4]];(ne=!!(se[2]&&(se[2]>=0||-2==se[2])))&&(q[t][2]=-1)}q[t][2]>=0&&ve.store.skins[q[t][2]]&&(Re||ve.store.skins[q[t][2]].free)&&(Q=ve.store.skins[q[t][2]])&&(Z=Q.name,K=ve.store.rarities[Q.rarity||0].animate,X=ve.store.rarities[Q.rarity||0].color,Q.rarity==o.a.CONTRABAND&&($="greyShad"),J=Q.thumbnail),ne?(e+="<div class='custContainer' onclick='windows[13].premium()' style='width: 22.5%;height: 174px;'>",e+="<div class='custItNm blackShad'>"+S.t("windows.loadout."+q[t][0])+"</div>",e+='<div class="custPremReq blackShad">\n\t\t\t\t\t\t<div style="color: var(--yellow);font-size: 15px;">Premium Required to use Both</div>\n\t\t\t\t\t\tor\n\t\t\t\t\t\t<div style="color: var(--red);font-size: 15px;">Remove '+S.t("windows.loadout."+q[q[t][4]][0])+"</div>\n\t\t\t\t\t</div>",e+="</div> "):(e+="<div class='custContainer contCanSelect' onclick='showWindow("+q[t][3]+")' onmouseenter='playTick()' style='width: 22.25%;height: 174px;'>",e+="<div class='custItNm blackShad'>"+S.t("windows.loadout."+q[t][0])+"</div>",e+="<div class='custClear' onclick='windows["+(q[t][3]-1)+"].clear();'><span class='material-icons'>close</span></div>",e+="<span class='custLabel "+$+(ce.rarityAnim&&K?" rainbowText":"")+"' style='color:"+X+"'>"+Z+"</span>","Random"==Z?(e+="<img draggable='false' class='"+ee+" custSil' style='margin-top: 0px;' src='"+J+"'>",e+="<div class='selRandom blackShad'>?</div>"):"None"==Z?e+="<div class='selRandom blackShad'>X</div>":Q&&Q.type==Te.SPRAY?(Q.frames&&-1==Y.indexOf(Q.frames)&&Y.push(Q.frames),e+="<div draggable='false' class='custIconSpray' style='background: url(&quot;"+Q.thumbnail+"&quot;) -1px;"+ae.getFrameAnim(Q,"custIconAnm")+"'></div>"):e+="<img class='"+ee+"' style='margin-top: 0px;' src='"+J+"'>",e+="</div> ")}if(e+="<div style='margin-bottom: 10px'></div>",Y.length){e+="<style>";for(t=0;t<Y.length;t++)e+="@keyframes custIconAnm"+Y[t]+" {100%{background-position:-"+144*Y[t]+"px}}";e+="</style>"}}else if(3==this.tabIndex){e+="<div class='settName' style='border-bottom:unset;'>"+S.t("windows.loadout.color.skin")+(Re&&Re.premiumT>0?"<input class='skinColorItem' "+(ae.isHexColor(zn)?"value='"+zn+"' ":"")+"type='color' style='border-radius:2px;width:40px;' onmouseenter='playTick()' onchange='selectSkinColor(this.value)'>":"<i class='material-icons premiumSkinCol' onclick='windows[13].premium()'>add_circle_outline</i>");for(t=u.skinColors.length-1;t>=0;t--)u.skinColors[t].req&&!u.skinColors[t].req(Re)||(e+="<div class='skinColorItem"+(parseInt(zn)==t?" activeSkin":"")+"' style='background-color:#"+u.skinColors[t].col.toString(16)+"' onmouseenter='playTick()' onclick='selectSkinColor("+t+")'></div>");e+="</div>",e+="<div class='settName' style='border-bottom:unset;'>"+S.t("windows.loadout.color.hair")+(Re&&Re.premiumT>0?"<input class='skinColorItem' "+(ae.isHexColor(Bn)?"value='"+Bn+"' ":"")+"type='color' style='border-radius:2px;width:40px;' onmouseenter='playTick()' onchange='selectHairColor(this.value)'>":"<i class='material-icons premiumSkinCol' onclick='windows[13].premium()'>add_circle_outline</i>")+"</div>",e+="<div class='settName' style='border-bottom:unset;'>"+S.t("windows.loadout.color.chat")+(Re&&Re.premiumT>0?"<input class='skinColorItem' value='"+(ae.isHexColor(Nn)?Nn:"#ffffff")+"' type='color' style='border-radius:2px;width:40px;' onmouseenter='playTick()' onchange='selectChatColor(this.value)'>":"<i class='material-icons premiumSkinCol' onclick='windows[13].premium()'>add_circle_outline</i>")+"</div>",e+="<div class='settName' style='border-bottom:unset;'>"+S.t("windows.loadout.stat")+"<select onchange='selectStat(this.value)' class='inputGrey2' style='font-size:16px;padding:4px;margin-bottom: 5px;'><option value='-1' "+(-1==ls?"selected":"")+">None</option>";for(t=0;t<u.playerCardStats.length;t++)e+="<option value='"+t+"' "+(ls==t?"selected":"")+">"+u.playerCardStats[t].name+"</option>";e+="</select></div>"}return e+="</div>"}},{header:S.t("windows.mods.header"),label:"mods",tabIndex:0,width:1460,maxH:"calc(100% - 325px)",yPos:48,dark:!0,popup:!0,listData:{},loadedMods:[],searchId:u.modTabs.findIndex((e=>e.search)),searchMods:function(){searchResultsMO.innerHTML="Loading...",fe.searchMod(mdSrch.value,pr)},searchResp:function(e){var t="";e.length?(t+="<div style='height:10px'></div>",t+=ia(e,"mod",this.searchId),this.listData[this.tabIndex]||(this.listData[this.tabIndex]={}),this.listData[this.tabIndex].list=e):t=S.t("windows.mods.none"),document.getElementById("searchResultsMO")&&(document.getElementById("searchResultsMO").innerHTML=t)},loadMore:function(e){this.listData[this.tabIndex].waiting||(e&&(e.className="loadMoreW",e.innerHTML="Loading..."),this.listData[this.tabIndex].waiting=!0,this.listData[this.tabIndex].loadInd+=1,fe.listMods(this.tabIndex,this.listData[this.tabIndex].loadInd,Re?Re.id:null,ur))},modsLoaded:function(e,t,i){if(modList)if(this.listData[t].waiting=!1,e&&e.length)if(i)this.listData[t].dat||(modList.innerHTML=i,this.listData[t]=null);else{var n=ia(e,"mod",t);this.listData[t].dat=(this.listData[t].dat||"")+n,this.listData[t].list=e,this.tabIndex==t&&updateWindow(4)}else this.listData[t].dat||(modList.innerHTML=S.t("windows.mods.none"),this.listData[t]=null)},switchTab:function(e){this.tabIndex!=e&&(this.tabIndex=e,updateWindow(4))},autoload:function(e,t){this.listData[this.tabIndex].list.find((t=>t.mod_id==e))},loaded:function(e,t,i,n,s,a,r,o){var l={};r&&(l.t=1),this.loadedMods.find((e=>e.name==n))||(!n&&o&&(n="Auto Loaded"),!n&&i&&(n="Server Mod"),this.loadedMods.push({mod_name:n||"Mod",mod_url:e,mod_id:s,creatorname:a,mod_info:JSON.stringify(l)}))},reset:function(e){this.loadedMods.length=0,ce.reset(),ce.resetShaderPasses(),he.reset();var t=document.getElementById("customCSS");t&&t.remove(),Fr&&(mainLogo.src=Fr),modVote.style.display="none",e?Rc(-1,null,"Mods Cleared",2):(updateWindow(4),zs("SUCCESS",null,[S.t("mod.reset.0"),"<small>"+S.t("mod.reset.1")+"</small>"]))},gen:function(){for(var e=u.modTabs[this.tabIndex],t="<div class='bigMenTabs'>",i=0;i<u.modTabs.length;++i)t+="<div class='bigMenTab"+(this.tabIndex==i?" bigMenTabA":"")+"' onmouseenter='playTick(0.1);' onclick='playSelect();windows[3].switchTab("+i+")'>"+(u.modTabs[i].txt||u.modTabs[i].n)+"</div>";t+="</div>";var n="";e.search?n="<input type='text' id='mdSrch' class='smlInput' placeholder='Mod Name or Keyword' onkeydown='if(window.event.keyCode==13)windows[3].searchMods()' /><div class='searchBtn' onclick='windows[3].searchMods()'><span class='material-icons' style='color:#fff;font-size:45px;margin-bottom:-30px;line-height:75px'>search</span></div><div style='color:rgba(0,0,0,0.5);margin-top:10px' id='searchResultsMO'></div>":e.noLoad?this.loadedMods.length?(n+=function(e,t){for(var i,n="",s=0;s<e.length;++s)i=ae.getAssetData(e[s].mod_info),"ua"==e[s].mod_url&&(e[s].mod_url=ae.userAssetsUrl("/md"+e[s].mod_id+"/mod.zip")),n+="<div class='mapListItem'><div style='height:200px;width:100%;overflow: hidden;'><img class='mapListThumb' loading='lazy' src='"+(i&&i.t?ae.userAssetsUrl("/md"+e[s].mod_id+"/thumb.png"):e[s].mod_image||"./img/noimg.png")+"' /></div><div style='margin-top:1px'><a href='javascript:;'>"+e[s].mod_name+"</a></div></div>";return n}(this.loadedMods),n+="<div class='loadMoreD' onclick='windows[3].reset()'>Reset Mods</div>"):n+=S.t("windows.mods.none"):this.listData[this.tabIndex]?this.listData[this.tabIndex].dat?(n=this.listData[this.tabIndex].dat,this.listData[this.tabIndex].waiting?n+="<div class='loadMoreW'>Loading...</div>":e.sendID||e.noPages||(n+="<div class='loadMoreD' onclick='windows[3].loadMore(this)'>Load More</div>")):n="<div class='loadMoreW'>Loading...</div>":(n="<div class='loadMoreW'>Loading...</div>",this.listData[this.tabIndex]={loadInd:0},fe.listMods(this.tabIndex,0,Re?Re.id:null,ur));var s="";if(e.home){var a=this.listData[this.tabIndex];if(a&&a.list){var r=a.list[ae.randInt(0,a.list.length-1)],o=ae.cleanseString(r.creatorname),l=ae.getAssetData(r.mod_info);s+="<div class='bigMFeatHold' style='background-image:linear-gradient(to right, black, rgba(0, 0, 0, 0.5)),url("+(l&&l.t?ae.userAssetsUrl("/md"+r.mod_id+"/thumb.png"):"")+".png);'><div id='bigMFeatName' style='top:200px;'>"+r.mod_name+"</div><div id='bigMFeatVbar' style='top:275px;'>"+ae.commaNumber(r.mod_votes)+"<span class='material-icons' style='margin-left:10px;font-size:33px;vertical-align:top;color:rgba(255,255,255,0.5);'>thumb_up</span><div style='color:#7d7d7d;margin-left:20px;margin-top:-12px;display:inline-block;vertical-align:middle;'>by <a>"+o+"</a></div></div><div id='bigMFeatPBtn' style='bottom:30px;width:230pxheight:40px;padding-top:10px;' onclick='loadUserMod(`"+r.mod_name+"`,`"+r.mod_url+"`,`"+r.mod_id+"`,`"+o+"`,"+~~(l&&l.t)+")'>Load Mod <span class='material-icons' style='font-size:40px;color:#fff;vertical-align:top;margin-top:-3px;margin-left:5px'>move_to_inbox</span></div><div id='bigMFeatHBtn' style='bottom:30px;right:320px;width:auto;height:40px;padding-top:8px;' onclick='openURL(`/social.html?p=profile&q="+o+"`)'>by <span style='color:#fff;'>"+o+"</span></div></div>",s+="<div class='mapListCat' style='margin-bottom:10px;padding-bottom:10px;margin-top:20px;'>Featured Mods</div>"}}return"<a href='javascript:;' onclick='showWindow(18)' class='menuLink'>Load Mod</a> | <a href='/social.html?p=mods&openPubMo' target='_blank' class='menuLink'>Upload Mod</a><div style='float:right'> <span style='color:rgba(255,255,255,0.5)'>30,000+</span> Mods | <a href='/viewer.html' class='menuLink'>Model Viewer</a></div><div style='margin-top:30px;margin-bottom:10px'>"+t+"</div>"+s+"<div style='color:rgba(255,255,255,0.3)' id='modList'>"+n+"</div>"}},{header:S.t("windows.account.header"),label:"profile",aSuccess:!1,dark:!0,width:1280,maxH:"calc(100% - 330px)",aResp:function(e,t){e?zs(null,e):(zs("SUCCESS"),Re.alias=t,updateMenuAccountData(),Is(),updateWindow(null,!0))},tabIndex:0,switchTab:function(e){windows[4].tabIndex=e,updateWindow(5)},friendsLoaded:function(e){updateWindow(5)},promoData:void 0,promosLoaded:function(e){this.promoData=e||null,updateWindow(5)},claimNFTs:function(){Bs("Please Wait..."),me.send("cnft")},collapseCon:function(e){let t=document.getElementById("setBod_"+e.id.split("setHed_")[1]),i="none"==t.style.display;e.children[0].innerHTML="keyboard_arrow_"+(i?"down":"right"),t.style.display=i?null:"none"},switchStat:function(e){for(var t,i=0;i<u.statTabs.length;++i)(t=document.getElementById("statTab"+i))&&(i==e?t.classList.add("bigMenTabA"):t.classList.remove("bigMenTabA"),document.querySelectorAll(".statTabB"+i).forEach((function(t){e==i?t.classList.remove("hide"):t.classList.add("hide")})))},gen:function(){if(window.isBotFTUE)return exitBotFTUE(!0);var e="";if(this.width=Re?1280:955,Re){e+="<div style='height:15px;'></div><div class='bigMenTabs'>";for(var t=0;t<u.profileTabs.length;++t)e+="<div class='bigMenTab"+(this.tabIndex==t?" bigMenTabA":"")+"' style='font-size:16px' onmouseenter='playTick(0.1);' onclick='playSelect();windows[4].switchTab("+t+")'>"+u.profileTabs[t]+"</div>";if(e+="</div>",0==this.tabIndex){e+="<div class='setHed' style='margin-top:10px;margin-bottom:20px;'>Your Account</div>";var i=Re.premiumT>0?ae.userAssetsUrl("/p"+Re.id+"/profile.png"):ae.assetsUrl("/textures/classes/icon_0.png");e+="<div id='profilePicM' class='"+(Re.premiumT>0?"":"blurred")+"'><img style='width: inherit;height: inherit;border-radius: inherit;' loading='lazy' src='"+i+"' onerror='this.onerror=null;this.parentNode.className='blurred';this.src='"+ae.assetsUrl("/textures/classes/icon_0.png")+"';'><a class='pfpAction' onmouseenter='playTick(0.1)' onclick='pfpPopup();'>"+S.t("windows.profile.picture")+"</a></div>",e+="<div class='setBodH' style='display:inline-block;padding-top:10px;vertical-align:top;width:1004px;margin-left:15px;margin-top:0px;'><div class='settName' style='width:100%;margin-top:0px'>"+S.t("generic.name")+"<a href='/social.html?p=profile&q="+Re.name+"' class='floatR' target='_blank'>"+Re.name+"</a></div><div class='settName' style='width:100%'>"+S.t("generic.clan")+"<a style='float:right'  onclick='showWindow(13)'>"+(Re.clan?"["+Re.clan+"]":"None")+"</a></div><div class='settName'>"+S.t("generic.level")+"<span class='floatR' style='color:rgba(255,255,255,0.8)'>"+Re.level+"</span></div></div>",e+="<div class='setHed' style='margin-top:10px;margin-bottom:15px;'>Your Stats</div>",e+="<div class='xpBar' style='height:31px;line-height:34px;font-size:28px;'><div class='xpBarB' style='width:"+Re.levelProg+"%'></div><span class='xpBarV'>"+ae.xpBarText(Re)+"</span></div>";var n=Re.stats;e+="<div id='statHolder'>",e+="<div style='height:15px;'></div><div class='bigMenTabs' style='margin-bottom: 5px;table-layout: fixed;'>";for(t=0;t<u.statTabs.length;++t)e+="<div id='statTab"+t+"' class='bigMenTab"+(0==t?" bigMenTabA":"")+"' onclick='playSelect(0.1);windows[4].switchStat("+t+")' style='padding-left: 5px; padding-right: 5px; padding-top: 10px; padding-bottom: 5px; line-height: 35px;font-size: 16px;'onmouseenter='playTick();'>"+u.statTabs[t]+"</div>";e+="</div>",e+="<div class='statTabB0'>",e+="<div class='pSt'>LVL<strong>"+Re.level+"</strong></div>",e+="<div class='pSt'>KR<strong>"+ae.commaFloat(Re.funds)+"</strong></div>",e+="<div class='pSt'>Junk<strong>"+ae.commaFloat(Re.junk)+"</strong></div>",e+="<div class='pSt'>Inventory<strong> ~"+ae.commaFloat(Re.invVal||0)+"</strong></div>",e+="<div class='pSt'>"+S.get("generic.score")+"<strong>"+ae.commaFloat(Re.score)+"</strong></div>",e+="<div class='pSt'>SPK<strong>"+ae.commaFloat((Re.score/Math.max(Re.kills,1)).toFixed(2))+"</strong></div>",e+="<div class='pSt'>"+S.get("generic.kills")+"<strong>"+ae.commaFloat(Re.kills)+"</strong></div>",e+="<div class='pSt'>"+S.get("generic.deaths")+"<strong>"+ae.commaFloat(Re.deaths)+"</strong></div>",e+="<div class='pSt'>"+S.get("generic.kdr")+"<strong>"+ae.commaFloat((Re.kills/Math.max(Re.deaths,1)).toFixed(4))+"</strong></div>",e+="<div class='pSt'>KPG<strong>"+ae.commaFloat((Re.kills/Math.max(Re.games,1)).toFixed(4))+"</strong></div>",e+="<div class='pSt'>"+S.get("generic.games")+"<strong>"+ae.commaFloat(Re.games)+"</strong></div>",e+="<div class='pSt'>W/L<strong>"+(Re.wins/Math.max(Re.games-Re.wins,1)).round(3)+"</strong></div>",e+="<div class='pSt'>"+S.get("generic.wins")+"<strong>"+ae.commaFloat(Re.wins)+"</strong></div>",e+="<div class='pSt'>"+S.get("generic.lose")+"<strong>"+ae.commaFloat(Math.max(Re.games-Re.wins,0))+"</strong></div>",e+="<div class='pSt'>"+S.t("stats.assists")+"<strong>"+ae.commaFloat(n.ast||0)+"</strong></div>",e+="<div class='pSt'>"+S.t("stats.melee")+"<strong>"+ae.commaFloat(n.mk||0)+"</strong></div>",e+="<div class='pSt'>"+S.t("stats.fistkills")+"<strong>"+ae.commaFloat(n.fk||0)+"</strong></div>",e+="<div class='pSt'>"+S.t("stats.thrownkills")+"<strong>"+ae.commaFloat(n.tmk||0)+"</strong></div>",e+="<div class='pSt'>"+S.t("stats.headshots")+"<strong>"+ae.commaFloat(n.hs||0)+"</strong></div>",e+="<div class='pSt'>"+S.t("stats.legshots")+"<strong>"+ae.commaFloat(n.ls||0)+"</strong></div>",e+="<div class='pSt'>"+S.t("stats.wallbangs")+"<strong>"+ae.commaFloat(n.wb||0)+"</strong></div>",e+="<div class='pSt'>"+S.t("stats.shots")+"<strong>"+ae.commaFloat(n.s||0)+"</strong></div>",e+="<div class='pSt'>"+S.t("stats.hits")+"<strong>"+ae.commaFloat(Math.min(n.s||0,n.h||0))+"</strong></div>",e+="<div class='pSt'>"+S.t("stats.misses")+"<strong>"+ae.commaFloat((n.s||0)-Math.min(n.s||0,n.h||0))+"</strong></div>",e+="<div class='pSt'>"+S.get("generic.accuracy")+"<strong>"+ae.commaFloat((n.s?Math.min(n.s||0,n.h||0)/n.s*100:0).round(2))+"%</strong></div>",e+="<div class='pSt'>"+S.get("generic.timep")+"<strong>"+ae.getReadableTime(Re.timePlayed)+"</strong></div>",e+="</div>",e+="<div class='statTabB1 hide'>",e+="<div class='pSt'>"+S.t("stats.nukes")+"<strong>"+ae.commaFloat(n.n||0)+"</strong></div>",e+="<div class='pSt'>"+S.t("stats.airdrops")+"<strong>"+ae.commaFloat(n.ad||0)+"</strong></div>",e+="<div class='pSt'>"+S.t("stats.airdrops.stolen")+"<strong>"+ae.commaFloat(n.sad||0)+"</strong></div>",e+="<div class='pSt'>"+S.t("stats.slimers")+"<strong>"+ae.commaFloat(n.sl||0)+"</strong></div>",e+="<div class='pSt'>"+S.t("stats.juggernauts")+"<strong>"+ae.commaFloat(n.jg||0)+"</strong></div>",e+="<div class='pSt' style='font-size: 12px;padding-left: 0px;padding-right: 0px;width: 174px;'>"+S.t("stats.juggernauts.killed")+"<strong>"+ae.commaFloat(n.kjg||0)+"</strong></div>",e+="<div class='pSt'>"+S.t("stats.warmachines")+"<strong>"+ae.commaFloat(n.wm||0)+"</strong></div>",e+="</div>",e+="<div class='statTabB2 hide'>",e+="<div class='pSt'>"+S.t("stats.crouches")+"<strong>"+ae.commaFloat(n.crc||0)+"</strong></div>",e+="<div class='pSt'>"+S.t("stats.sprays")+"<strong>"+ae.commaFloat(n.spry||0)+"</strong></div>",e+="<div class='pSt'>"+S.t("stats.kpd")+"<strong>"+(parseInt(Re.jobRatingPos)||0)+"/"+(parseInt(Re.jobRating)||0)+"</strong></div>",e+="</div>",e+="<div class='statTabB3 hide'>";for(t=0;t<ve.classes.length;++t)if(!ve.classes[t].hide){var s=n&&n["c"+t]?n["c"+t]:0,a=u.rankVar*Math.sqrt(s),r=Math.floor(a),o=Math.round(100*(a-r)),l=r>1?Math.pow(r/u.rankVar,2):0,c=Math.pow((r+1)/u.rankVar,2);r=Math.max(1,r+1),e+="<div class='clsStatCard'><img class='clsStatImg' src='"+ae.assetsUrl("/textures/classes/icon_"+t+".png")+"'/><div class='clsStatName'>"+ve.classes[t].name+"</div><div class='clsStatWeap'>"+ve.weapons[ve.classes[t].loadout[0]].name+"</div><div class='clsStatXPBar'><div class='clsStatXPBarC' style='width:"+o+"%'></div><div class='clsStatXPBarV'>"+parseInt(s-l)+" / "+parseInt(c-l)+"</div></div><div class='clsStatLvl'>Lvl "+r+"</div></div>"}e+="</div>",e+="</div>"}if(1==this.tabIndex)if(e+="<div class='setBodH' style='padding-top:10px;padding-bottom:10px;margin-bottom:20px;'>Friends can send private messages and see eachothers online status.<div style='height:10px;'></div>You can add new friends by following eachother.</div>",Pe){if(e+="<div id='friendList'>",Pe.length)for(t=0;t<Pe.length;++t){var d,h=Pe[t];d=1==h.st?"<div class='onStatus' style='background:#27ab32'></div>"+(h.sm?h.sm:"Online"):"<div class='onStatus' style='background:#7f7f7f'></div>Offline",e+="<div><div style='margin-bottom:10px;text-align:left;padding-bottom:10px;border-bottom:3px solid #ffffff33;padding-top:10px;'><img class='folPfp' onerror='this.onerror=null;this.src=\"./img/player_pfp.png\";' src='"+(h.sub?ae.userAssetsUrl("/p"+h.fid+"/profile.png"):"./img/player_pfp.png")+"' /><div class='folInfHldr'>"+(h.sub?"<i class='material-icons' style='color:"+te.premium+";margin-top:-8px;font-size:28px;vertical-align:middle;'>beenhere</i>":"")+(h.plf?"<i class='material-icons' style='color:"+te.verified.player+";margin-top:-8px;margin-right: 4px;font-size:28px;vertical-align:middle;'>check_circle</i>":"")+"<a target='_blank' href='/social.html?p=profile&q="+h.fna+"' class='lName' style='color:rgba(255,255,255,0.9)'>"+h.fna+"</a><div style='color:rgba(255,255,255,0.4);font-size:16px;margin-top:4px;max-width:500px;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;'>"+d+"</div></div><div style='float:right;'>"+(h.gid?"<div class='button buttonG' style='padding:10px;margin-right:15px;' onclick='openURL(`/?game="+h.gid+"`,1)'>Join</div>":"")+"<div class='button buttonR' style='padding:10px;' onclick='deleteFollower(`"+h.fna+"`,"+t+")'>Remove Friend</div></div></div></div>"}else e+="<span style='color:#9a9a9a'>You don't have any friends yet.</span>";e+="</div>"}else e+="<div id='friendList'>Loading Friends...</div>";if(2==this.tabIndex){e+="<div class='setHedS' style='margin-top:10px;'>Account Settings</div>",Re.premiumT&&(e+="<div class='setBodH'><div class='settName'>Display Name<div class='updDisN' onclick='clearName();' style='background-color: var(--red);'>Clear</div><div class='updDisN' onclick='changeName();'>Update</div><input type='search' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' id='displayN' class='smlInput' placeholder='"+Re.alias+"'><div id='aliasRes'></div></div>",this.aSuccess=!1),null==Re.stats.flg&&(Re.stats.flg=-1),e+="<div class='settName'>"+S.t("windows.loadout.flag")+"<select onchange='selectFlag(this.value)' class='inputGrey2' style='padding:4px;margin-top:4px'><option value='-1' "+(-1==Re.stats.flg?"selected":"")+">None</option>";for(t=0;t<ve.flags.length;t++)e+="<option value='"+t+"' "+(Re.stats.flg==t?"selected":"")+">"+ve.flags[t][0]+"</option>";e+="</select></div>",null==Re.stats.bdg&&(Re.stats.bdg=-1);var p=Re.stats.bdg>=0&&ve.badges[Re.stats.bdg]&&Re.badges.indexOf(Re.stats.bdg)>=0?ve.badges[Re.stats.bdg]:null;e+="<div class='settName'>"+S.t("windows.loadout.badge")+"<div class='updDisN' onclick='selectBadge(-1);' style='background-color: var(--red);'>Clear</div><div class='updDisN' onclick='selectBadgePop();'>Select</div>"+(p?"<img draggable='false' src='"+p.url+"' class='customBadge'>":"")+"</div>",null==Re.stats.hds&&(Re.stats.hds=0),e+="<div class='settName'>Hide Detailed Online Status<label class='switch' style='margin-left:10px'><input type='checkbox' onclick='toggleStatus(this.checked)'"+(Re.stats.hds?" checked":"")+"><span class='slider'></span></label></div>",e+="</div>";var f=Re.isDev||Re.featured||Re.level>=20,m=!!Re.twoFA;e+=Re.hack?"":"<div class='setHedS'>Account Security</div><div class='setBodH' style='padding-bottom:10px;'><div style='font-size:21px;color:rgba(255,255,255,0.4);margin-top:5px'>You can update your password every 30 minutes. <span style='color:#fff'>Never share your password</span> with anyone and keep it in a secure place</div><input type='password' id='oldPass' class='smlInput' style='width:100%;margin-bottom:8px' placeholder='Current Password' /><input type='password' id='newPass' class='smlInput' style='width:100%;margin-bottom:8px' placeholder='New Password' /><input type='password' id='repNPass' class='smlInput' style='width:82%;margin-bottom:8px' placeholder='Repeat Password' /><div class='subPassChg' onclick='changePass()'>"+S.t("generic.submit")+"</div><div id='newPRes' style='color:rgba(255,255,255,0.5)'></div>"+(f?"<div class='settName' style='margin-bottom:20px;'></div><div style='font-size:21px;color:rgba(255,255,255,0.4);margin-top:5px;margin-bottom: 10px;'>To further protect your account, you can add enable <span style='color:#fff'>2FA</span>:<div class='subPassChg' onclick='"+(m?"dact2FA()":"act2FA()")+"' style='float: right;margin-top: -8px;'>"+(m?"Disable":"Enable")+"</div></div>":"")+"</div>",e+="<div class='setHedS'>Account Privacy</div><div class='setBodH' style='padding-bottom:15px;'><div style='font-size:21px;color:rgba(255,255,255,0.4);margin-top:5px'>"+S.t("account.delete")+"</div>",e+="<div style='height:10px;'></div>",e+=(Re.reqDel?"<div style='margin-top:10px'>Processing Deletion <a class='menuLink' onclick='requestDeletion(0)' style='float:right;font-size:18px'>Cancel</a></div>":"<div style='margin-top:10px'>Delete Account <a class='menuLink' onclick='requestDeletion(1)' style='float:right;font-size:20px'>Request Deletion</a></div>")+"</div>"}3==this.tabIndex&&(window.canShowNFTs&&(e+="<div>NFTs use blockchain technology to verify ownership of an item.</div>",e+="<div class='setHed' id='setHed_metamask' style='margin-top:0px'onclick='window.windows[4].collapseCon(this)'><span class='material-icons plusOrMinus3'>keyboard_arrow_right</span> <img src='"+ae.assetsUrl("/img/connections/metamask.svg")+"' style='height: 40px;'><span style='padding-left: 20px;padding-right: 20px;vertical-align: super;font-size: 18px;'>/</span><img src='"+ae.assetsUrl("/img/connections/opensea.png")+"' style='height: 40px;'></div>",e+="<div class='setBodH' id='setBod_metamask' style='display:none'><div class='settName'>Metamask Account ("+(Re.metamask||"none")+")<div class='lnkTw' onclick='"+(Re.metamask?"unlinkMetaPop();":"linkMetaPop();")+"' style='background-color:#f5841f'>"+(Re.metamask?"Unlink":"Link")+"</div></div><div class='settName'>Opensea NFT's"+(Re.metamask?"<div class='lnkTw' style='background-color:#4144a5;width: 140px;' onclick='window.windows[4].claimNFTs();'>Claim Items</div>":"")+"</div>",e+="</div>"),e+="</div>"),e+="<div style='height:15px;margin-top:30px;border-top:4px solid rgba(255, 255, 255, 0.8);'></div><a class='menuLink' onclick='logoutAcc()'>"+S.t("generic.logout")+"</a>"+(kn?"":"<a style='float:right' class='menuLink' onclick='logoutSessions(this)'>"+S.t("generic.logout.sessions")+"</a>")}else e+="<div style='position:relative;z-index:9'><div id='referralHeader'>Register or Login</div><div style='height:20px;'></div><input id='accName' type='text' placeholder='"+S.t("generic.username")+"' class='accountInput' style='margin-top:0' value='"+(getSavedVal("krunker_username")||"")+"'></input><input id='accPass' type='password' placeholder='"+S.t("generic.password")+"' class='accountInput'></input><input id='accEmail' type='email' placeholder='Email' class='accountInput'></input><div class='setBodH' style='margin-left:0px;width:calc(100% - 40px)'><div id='accResp' style='margin-top:20px;margin-bottom:20px;font-size:18px;color:rgba(255,255,255,0.5);text-align:center'>For lost Passwords/Accounts contact <a style='color:rgba(255,255,255,0.8)'>recovery@yendis.ch</a></div></div><div style='width:100%;text-align:center;margin-top:10px;background-color:rgba(0,0,0,0.3);padding-top:10px;padding-bottom:20px;'><div class='accBtn button buttonP' onclick='registerAcc()'>"+S.t("generic.register")+"</div><div class='accBtn button buttonG' onclick='loginAcc()'>"+S.t("generic.login")+"</div></div>";return e}},{header:S.t("windows.battlepass.header"),label:"battlepass",width:1580,maxHeight:"calc(100% - 189px)",wrapAround:!1,columnsToScroll:8,updateScroll:function(e,t){var i=document.querySelector(".bpCols");if(i){var n=i.children[0].scrollWidth,s=(i.children.length-1)*n-i.clientWidth,a=i.scrollLeft+e*(n*(t||this.columnsToScroll)),r=i.clientWidth+i.scrollLeft,o=!!this.wrapAround||a>0||-1!=e,l=!!this.wrapAround||r<s||1!=e;this.wrapAround&&r>=s&&1==e?a=0:this.wrapAround&&a<0&&-1==e&&(a=5e4),i.scrollLeft=a;var c=document.querySelectorAll(".bSliderBtn");c&&(c[0].classList.toggle("disabled",!o),c[1].classList.toggle("disabled",!l))}},updateScrollWheel:function(){this.updateScroll(window.event.deltaY>0?-1:1)},showBalloon:function(){document.querySelector(".bpInfoBalloon").style.display="block"},hideBalloon:function(){document.querySelector(".bpInfoBalloon").style.display="none"},tabIndex:0,switchTab:function(e){windows[5].tabIndex=e,updateWindow(6)},syncBPProg:function(e){Re&&(this.itemsClaimed=(Re.BP.items_claimed+"").split(",")),updateWindow(6)},itemsClaimed:[],data:null,dataStatus:0,dataLoaded:function(e){windows[5].data=e||null,windows[5].dataStatus=2,updateWindow(6),windows[5].afterData&&(windows[5].afterData(),windows[5].afterData=null)},genDailyCard:function(e,t){var i=e.DAT,n="",s=(e.REW&&e.REW.sk?e.REW.sk:null)||[];Array.isArray(s)||(s=(s+"").split(","));for(var a,r=0;r<s.length;r++)(a=ve.store.skins[s[r]])&&(n+="<div class='chalRewSkn' style='background-image:url("+a.thumbnail+");border:2px solid "+ve.store.rarities[a.rarity].color+";' onclick='viewItem("+a.index+")'></div>");var o=!!e.PT;return"<div class='chalCard' style='margin-top:"+(t||0)+"px;"+(i.boss?"box-shadow: 0 0 14px #ffa000;background:rgb(79 50 0 / 40%);border:4px solid #ff9c00;":"")+"'><img class='chalImgC' src='"+ae.assetsUrl("img/chals/icon_"+(e.IC||0)+".png")+"'  style='"+(i.boss?"border: 4px solid #ff9c00;":"")+(o?"filter:grayscale(1);brightness(0.8);":"")+"' />"+(o?"<div class='challComplB'><span class='material-icons' style='font-size:110px;color:#38cd3a;'>done</span></div>":"")+"<div class='chalRight'>"+e.N+(e.TR?"<div class='chalExpr'>"+ae.getReadableTime(e.TR||0)+" left</div>":"")+"<div class='chalXPBar'><div class='chalXPVal'>"+(o?"Completed":"time"==e.DAT.ky?ae.getReadableTime(i.val):(e.PV||0)+"/"+i.val)+"</div><div class='chalXPBarC' style='width:"+(o?100:"time"==e.DAT.ky?0:(e.PV||0)/i.val*100)+"%;'></div></div></div><div class='chalRews' style='"+(i.boss?"border-left: 3px solid #ff9c00;":"")+"'><div class='chalRewV' style='"+(e.REW&&e.REW.bpp?"":"filter:grayscale(1);")+"'><span style='color:white'>+</span>"+(e.REW&&e.REW.bpp||0)+" <span style='color:#fbc02d'>BPP</span></div><div class='chalRewV' style='"+(e.REW&&e.REW.kr?"":"filter:grayscale(1);")+"'><span style='color:white'>+</span>"+(e.REW&&e.REW.kr||0)+" <span style='color:#fbc02d'>KR</span></div><div class='chalRewV' style='"+(e.REW&&e.REW.jnk?"":"filter:grayscale(1);")+"'><span style='color:white'>+</span>"+(e.REW&&e.REW.jnk||0)+" <span class='material-icons' style='color:#cc51f8;font-size:29px;vertical-align:top;'>plumbing</span></div>"+n+"</div></div>"},gen:function(){this.width=this.tabIndex?1200:1580;for(var e='<div class="bpBG"></div>\n\t\t\t<div style="height:15px;"></div>\n\t\t\t<div class="bigMenTabs">',t=0;t<u.bpTabs.length;++t)e+='<div class="bigMenTab flex'+(this.tabIndex==t?" bigMenTabA":"")+'"\n\t\t\t\tonclick="playSelect();windows[5].switchTab('+t+')"\n\t\t\t\tonmouseenter="SOUND.play(\'tick_0\',0.1)"\n\t\t\t\tstyle="font-size:16px">'+u.bpTabs[t]+"</div>";if(e+="</div>",Re)if(this.data&&Re.BP){if(0==this.tabIndex){var i=this.data.itemcount,n=this.data.itemcount*this.data.bpp_perlevel;this.battlepassLvl=Math.floor(Re.BP.bpp/this.data.bpp_perlevel)+1;var s=this.battlepassLvl>i;this.bpPoints=Re.BP.bpp%this.data.bpp_perlevel,s&&(this.battlepassLvl=i,this.bpPoints=this.data.bpp_perlevel),this.itemsClaimed=(Re.BP.items_claimed+"").split(",");var a=Re.BP.tier>=1,r=(new Date(this.data.enddate).getTime(),(Math.floor((Date.now()-new Date(this.data.startdate).getTime())/864e5)+1)*u.bppCapDay),o=Math.max(r-Re.BP.bpp,0);e+='<div style="display: inline-block;position: relative;">',e+='<div class="bpTopH">\n\t\t\t\t<div class="bpSeasonH">\n\t\t\t\t\t'+this.data.name+"\n\t\t\t\t</div>",e+=s?'<div class="bpLevelH">\n\t\t\t\t\t<div class="bpLevelText">Battlepass Complete</div>\n\t\t\t\t</div>':'<div class="bpLevelH">\n\t\t\t\t\t<div class="bpLevelText">Level '+this.battlepassLvl+"/"+i+"</div>\n\t\t\t\t\t<div class=\"bpXPText\">\n\t\t\t\t\t\t<span style='color:#fbc02d'>BPP</span> "+this.bpPoints+"/"+this.data.bpp_perlevel+'\n\t\t\t\t\t\t<div class="bpXPBarH">\n\t\t\t\t\t\t\t<div class="bpXPBar" style="width:'+this.bpPoints/this.data.bpp_perlevel*100+'%;"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="bpXPText">\n\t\t\t\t\t\tAvailable BPP <img class="bpXPIcon" onmouseenter="windows[5].showBalloon()" onmouseleave="windows[5].hideBalloon()" src="./img/frvr-ui/info-icon.svg">\n\t\t\t\t\t\t<div class="bpXPBarH">\n\t\t\t\t\t\t\t<div class="bpXPBar" style="width:'+o/r*100+'%;"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="bpInfoBalloon">\n\t\t\t\t\t\t<div>BPP has a daily cap. The amount you can earn increases every day.</div>\n\t\t\t\t\t\t<div style="margin-top: 20px">Current available BPP: <span style=\'color:#00b1ff\'>'+o+"</span></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>",e+="</div>",e+='<div class="bpMidH">',e+='<div class="bpRowTitles">\n\t\t\t\t<div class="bpCard free">\n\t\t\t\t\t<div class="bpRowTitleText">Free</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="bpCard vip active">\n\t\t\t\t\t'+(a?"":'<div class="bpCardLock"></div>')+'\n\t\t\t\t\t<div class="bpRowTitleText" style="left: 19%;">VIP</div>\n\t\t\t\t</div>\n\t\t\t</div>',e+='<div class="bSliderH">\n\t\t\t\t<div class="bSliderBtn disabled" onmouseenter="playTick(0.1);" onmousedown="playSelect(0.1);windows[5].updateScroll(-1);">\n\t\t\t\t\t<div class="bpSliderArrow"></div>\n\t\t\t\t</div>\n\t\t\t</div>',e+='<div class="bpCols" onwheel="windows[5].updateScrollWheel();">';var l=ae.arrayChunk(this.data.itemdata.split(","),4),c={};for(t=0;t<l.length;++t)c[l[t][1]+"_"+l[t][2]]={id:l[t][0],sk:parseInt(l[t][3])};for(t=0;t<i;t++){for(var d=t+1,h=this.battlepassLvl>=d,p=this.battlepassLvl==d,f="",m=0;m<2;++m){var g=c[m+"_"+t],v=g?g.id:null,y=null,b=0==m,w=this.itemsClaimed.includes(v),x=(b||a)&&null!=v&&!w,S=b&&!a,M=!0;g&&(g.sk?y={thumbnail:ve.store.skins[g.sk].thumbnail,shine:ve.store.rarities[ve.store.skins[g.sk].rarity].color,click:"viewItem("+g.sk+");",index:g.sk}:g=null);let e="<img style='vertical-align: bottom;margin-right:10px;display:inline' height='30px' src ='./img/frvr-ui/ad-icon.svg' class='frvr-button__icon'/>";f+='<div class="bpCard '+(b?"free":"vip")+(h?" completed":"")+'">'+(y?'<div class="bpCardSlot" onmouseenter="playTick(0.1);" onclick="playSelect(0.1);'+y.click+'">\n\t\t\t\t\t\t\t'+(a||b?"":'<div class="bpCardLock"></div>')+'\n\t\t\t\t\t\t\t<div class="bpCardImgH">\n\t\t\t\t\t\t\t\t<img class="bpCardImg" loading="lazy" draggable="false" src="'+y.thumbnail+'" style="filter:drop-shadow(0 0 0.2rem '+y.shine+'88)">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t'+(y.label?"<div class='bpClaimLabel'>"+y.val+" "+y.label+"</div>":"")+"\n\t\t\t\t\t\t"+(h&&x?"<div class='bpClaimB' onclick=\"windows[5]."+(S?"free":"")+"claimItem("+v+')"> '+(S?e:"")+"CLAIM</div>":"")+"\n\n\t\t\t\t\t\t"+(w?'<div class="bpClaimed"><span class="material-icons" style="font-size:160px;color:#38cd3a;line-height:256px">done</span></div>':"")+"\n\n\t\t\t\t\t\t":"")+"</div>"}e+='<div class="bpCol" style=\''+(h?"":"filter:grayscale(100%)")+"'>\n\t\t\t\t\t<div class=\"bpLevelNum"+(p?" active":h?" completed":"")+'">'+d+"</div>\n\t\t\t\t\t"+f+"\n\t\t\t\t</div>"}e+="</div>",e+='<div class="bSliderH">\n\t\t\t\t<div class="bSliderBtn" onmouseenter="playTick(0.1);" onmousedown="playSelect(0.1);windows[5].updateScroll(1);">\n\t\t\t\t\t<div class="bpSliderArrow right"></div>\n\t\t\t\t</div>\n\t\t\t</div>',e+="</div>",e+='<div class="bpBotH">\n\t\t\t\t<div class="bpBtn claim'+(a?" blockClick":"")+'" onmouseenter="playTick(0.1);" onclick="playSelect(0.1);windows[5].purchasePop();">Purchase VIP Tier</div>\n\t\t\t\t<div class="bpBtn skip'+(!M||Re.BP.bpp>=n?" blockClick":"")+'" onmouseenter="playTick(0.1);" onclick="playSelect(0.1);windows[5].skipLevelPop()">Skip levels</div>\n\t\t\t</div>',e+="</div>"}else if(1==this.tabIndex){var k=Re.activeChallenges.filter((e=>e&&"daily"==e.T));k.filter((e=>e&&e.PT)).length;if(e+="<div class='challCrdMsg' style='margin-bottom:25px;font-size:27px;color:#9f9f9f;position: relative;'>Abandoning a match will result in the loss of challenge progress.</div>",e+="<div style='margin-top:10px;'>",k.length){k.sort((function(e,t){return t.PT-e.PT}));var _;for(t=0;t<k.length;t++)_=k[t],e+=this.genDailyCard(_,t?20:0)}else e+="<div class='challCrdMsg'>Check back later for new daily battle pass challenges!</div>";e+="</div>"}}else this.dataStatus||(this.dataStatus=1,me.send("bpdl")),e+='<div style="font-size: 40px;text-align: center;display: inline-block;position: relative;width: 100%;">\n\t\t\t\t'+(2==this.dataStatus&&Re.BP?"No Battle Pass Found":"Loading Battle Pass")+"\n\t\t\t</div>";else e+='<div style="font-size: 40px;text-align: center;display: inline-block;position: relative;width: 100%;">\n\t\t\t\t\tSign-in to use the Battle Pass feature\n\t\t\t\t</div>';return e},post:function(){0==this.tabIndex&&this.battlepassLvl-3>0&&this.updateScroll(1,this.battlepassLvl-3)},claimItemRes:function(e,t,i,n,s,a){let r=a.id;if(Re){let e,t;a.tier&&a.col&&(e=parseInt(a.tier)>=1?"premium":"free",t=parseInt(a.col)+1),i&&(i=parseInt(i),Re.addSkin(i));let n="",s=0;a.sk>0&&(n="skin_"+a.sk,s=1),logEventFRVR("battle_pass_claim_reward",{level:t,battle_pass_track:e,item:n,item_amount:s,season:u.currentSeason}),windows[5].itemsClaimed.push(r),Re.BP.items_claimed=windows[5].itemsClaimed.join(",")}updateMenuAccountData(),updateWindow(6),zs("SUCCESS",null,"Item Claimed")},freeclaimItem:function(e){window.showRewardedAd((()=>{Bs("Claiming..."),me.send("bpclm",parseInt(e))}))},claimItem:function(e){Bs("Claiming..."),me.send("bpclm",parseInt(e))},increaseSkip:function(e){var t=document.getElementById("bp-skip-num");if(t){var i=parseInt(t.textContent)||1;i+=e,i=ae.limitMM(i,1,Math.max(1,this.data.itemcount-this.battlepassLvl)),t.textContent=i;var n=parseFloat(u.levelSkipPrice),s=document.getElementById("bp-skip-levels");s&&(s.textContent="$"+(n*i).toFixed(2))}},skipLevels:function(e,t){var i=document.getElementById("bp-skip-num");if(i){var n=parseInt(i.textContent)||1;if(!t&&d)return zs(null,"Invalid Steam Account");if(t&&d){if(!!!(window.ClientSession&&window.ClientSession.settings&&window.ClientSession.settings.gameCap&&window.ClientSession.settings.gameCap.val))return zs(null,"Game Capture must be enabled to use Steam Purchase");me.send("stpbplV",t+"",n)}else me.send("xstbpl",n,we.list.lang.val,null,null,window.paymentsChannelId);e.style.pointerEvents="none",setTimeout((()=>{e&&(e.style.pointerEvents="")}),3500)}},purchaseLvlRes:function(e,t,i,n,s,a,r,o,l,c){if(ye.idleTimer=0,yi(),t)purchaseError(e,t,"battlepass_levels_"+n);else{if(Re){var d=parseInt(Re.BP.bpp);Re.BP.bpp=parseInt(s);var h=Re.BP.bpp-d;h>0&&logEventFRVR("item_flow",{item:"bpp",flow_type:"source",amount:h,item_context:"iap",wallet:Re.BP&&Re.BP.bpp||0}),logEventFRVR("battle_pass_level_up",{level:windows[5].battlepassLvl+parseInt(n),hasPremium:Re.BP.tier?"premium":"free",levels_skipped:parseInt(n)||0,season:u.currentSeason}),c&&Re.badges.push(c)}updateMenuAccountData(),updateWindow(null,!0),ee.toggleMenuHider(!0),purchaseLoad.style.display="none",windows[5].skippedLevelPop(n),logEventFRVR("iap_request_payment_success",{product_id:"pass_skip_"+n+"_levels_season_"+u.currentSeason,payment_provider:e,price_amount:a,price_currency_code:r,transaction_id:o,external_transaction_id:l,productId:"pass_skip_"+n+"_levels_season_"+u.currentSeason,provider:e,priceValue:a,currencyCode:r,transactionId:l,trackingName:"Pass "+u.currentSeason+" Skip levels ",label:"Pass "+u.currentSeason+" Skip levels "})}},skipLevelPop:function(){var e='<div class="bp-generic-img-holder">\n\t\t\t<div class="bp-generic-img-back"></div>\n\t\t\t<div class="bp-generic-img bp-generic-img-skip"></div>\n\t\t</div>\n\t\t<div class="bp-generic-text">\n\t\t\t<div class="bp-generic-header">Skip levels</div>\n\t\t\t<div class="bp-generic-info">\n\t\t\t\tSkip Battle Pass level\n\t\t\t\t<div style="color: var(--yellow);font-size: 12px;">*BPP limit will not increase*</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="bp-generic-btn-holder">\n\t\t\t<div class=\'button bp-generic-btn-small\' onmouseenter="playTick(0.1);" onclick=\'playSelect(0.1);windows[5].increaseSkip(-1)\'>-</div>\n\t\t\t<div id=\'bp-skip-num\'>1</div>\n\t\t\t<div class=\'button bp-generic-btn-small\' onmouseenter="playTick(0.1);" onclick=\'playSelect(0.1);windows[5].increaseSkip(1)\'>+</div>\n\t\t\t<div id="bp-skip-levels" class=\'button bp-generic-btn\' onmouseenter="playTick(0.1);" onclick=\'playSelect(0.1);skipLevels(this)\'>$'+parseFloat(u.levelSkipPrice).toFixed(2)+"</div>\n\t\t</div>";genericPopup(e,"bp-generic-pop no-box-shadow")},skippedLevelPop:function(e){genericPopup('<div class="bp-generic-img-holder">\n\t\t\t<div class="bp-generic-img-back"></div>\n\t\t\t<div class="bp-generic-img bp-generic-img-skip"></div>\n\t\t</div>\n\t\t<div class="bp-generic-text">\n\t\t\t<div class="bp-generic-header">'+(e||0)+' levels skipped</div>\n\t\t\t<div class="bp-generic-info">On the way to the top!</div>\n\t\t</div>\n\t\t<div class="bp-generic-btn-holder">\n\t\t\t<div class=\'button bp-generic-btn\' onmouseenter="playTick(0.1);" onclick=\'playSelect(0.1);clearPops();\'>Awesome!</div>\n\t\t</div>',"bp-generic-pop")},selectBPTier:function(e,t,i){if(!i&&d)return zs(null,"Invalid Steam Account");if(i&&d){if(!!!(window.ClientSession&&window.ClientSession.settings&&window.ClientSession.settings.gameCap&&window.ClientSession.settings.gameCap.val))return zs(null,"Game Capture must be enabled to use Steam Purchase");me.send("stpbpV",i+"",t,null)}else me.send("xstbp",t,we.list.lang.val,null,null,window.paymentsChannelId);e.style.pointerEvents="none",setTimeout((()=>{e&&(e.style.pointerEvents="")}),3500)},purchaseRes:function(e,t,i,n,s,a,r,o){ye.idleTimer=0,yi(),t?purchaseError(e,t,"battlepass_"+i):(Re&&(Re.BP.tier=n),updateMenuAccountData(),updateWindow(null,!0),ee.toggleMenuHider(!0),purchaseLoad.style.display="none",windows[5].purchasedPop(0),logEventFRVR("iap_request_payment_success",{product_id:"premium_pass_season_"+u.currentSeason,payment_provider:e,price_amount:s,price_currency_code:a,transaction_id:r,external_transaction_id:o,productId:"premium_pass_season_"+u.currentSeason,provider:e,priceValue:s,currencyCode:a,transactionId:o,trackingName:"Premium pass "+u.currentSeason,label:"Premium pass "+u.currentSeason}))},purchasedPop:function(e){genericPopup('<div class="bp-generic-img-holder">\n\t\t\t<div class="bp-generic-img-back"></div>\n\t\t\t<div class="bp-generic-img-splash"></div>\n\t\t\t<div class="bp-generic-img"></div>\n\t\t</div>\n\t\t<div class="bp-generic-text">\n\t\t\t<div class="bp-generic-header">VIP'+(e?"+":"")+' battle pass unlocked!</div>\n\t\t\t<div class="bp-generic-info">You now have access to vip rewards'+(e?' <span style="color:#FFE540">plus 15 Battle Pass levels</span>':"")+"!</div>\n\t\t</div>\n\t\t<div class=\"bp-generic-btn-holder\">\n\t\t\t<div class='button bp-generic-btn' onmouseenter=\"playTick(0.1);\" onclick='playSelect(0.1);clearPops();'>Awesome!</div>\n\t\t</div>","bp-generic-pop")},purchasePop:function(){if(!this.data)return this.afterData=()=>this.purchasePop(),void showWindow(6);var e=this.data.tier1price,t=this.data.tier1name,i='<div class="bp-generic-img-holder">\n\t\t\t<div class="bp-generic-img-back"></div>\n\t\t\t<div class="bp-generic-img"></div>\n\t\t</div>\n\t\t<div class="bp-generic-text">\n\t\t\t<div class="bp-generic-header" style="margin-bottom: 25px;">Purchase '+t.toUpperCase()+' Battle Pass</div>\n\t\t\t<div class="bp-generic-info">Unlock '+t.toLowerCase()+" rewards</div>\n\t\t</div>\n\t\t<div class=\"bp-generic-btn-holder\">\n\t\t\t<div class='button bp-generic-btn' onmouseenter=\"playTick(0.1);\" onclick='playSelect(0.1);selectBPTier(this, 1);'>$"+e+"</div>\n\t\t</div>";genericPopup(i,"bp-purchase-pop")}},{header:S.t("windows.controls.header"),label:"controls",width:1300,tabs:[{n:"General",list:[["forward","move",0,void 0,"Movement"],["backward","move",1,void 0,"Movement"],["left","move",2,void 0,"Movement"],["right","move",3,void 0,"Movement"],["jump","jump",void 0,void 0,"Movement"],["crouch","crouch",void 0,void 0,"Movement"],["reload","reload",void 0,void 0,"Weapon"],["aim1","aim",void 0,void 0,"Weapon"],["shoot1","shoot",void 0,void 0,"Weapon"],["prim","primary",void 0,void 0,"Weapon"],["melee","melee",void 0,void 0,"Weapon"],["swap","swap",void 0,void 0,"Weapon"],["equip","equip",void 0,void 0,"Weapon"],["inspect","inspect",void 0,void 0,"Weapon"],["spray","spray",void 0,void 0,"Weapon"],["sprayWheel","sprayWheel",void 0,void 0,"Weapon"],["list","playerList",void 0,void 0,"Interface"],["board","scoreBoard",void 0,void 0,"Interface"],["hidePlayers","hidePlayers",void 0,void 0,"Players"]]},{n:"Chat & Toggles",list:[["chat","chat",void 0,void 0,"Interface & Audio"],["voice","voiceChat",void 0,void 0,"Interface & Audio"],["premium0","premium",0,void 0,"Premium & Host"],["premium1","premium",1,void 0,"Premium & Host"],["premium2","premium",2,void 0,"Premium & Host"],["premium3","premium",3,void 0,"Premium & Host"],["message0","message",0,"chatMessages","Chat Messages",0],["message1","message",1,"chatMessages","Chat Messages",1],["message2","message",2,"chatMessages","Chat Messages",2],["message3","message",3,"chatMessages","Chat Messages",3],["message4","message",4,"chatMessages","Chat Messages",4],["message5","message",5,"chatMessages","Chat Messages",5],["wepVis","wepVis",void 0,void 0,"Toggle Settings"],["toggle0","toggle",0,"toggleSets","Toggle Settings",0],["toggle1","toggle",1,"toggleSets","Toggle Settings",1],["toggle2","toggle",2,"toggleSets","Toggle Settings",2],["toggle3","toggle",3,"toggleSets","Toggle Settings",3],["toggle4","toggle",4,"toggleSets","Toggle Settings",4],["toggle5","toggle",5,"toggleSets","Toggle Settings",5]]},{n:"Interaction",list:[["interact","interact",void 0,void 0,"Interaction"],["interactSec","secondaryInteract",void 0,void 0,"Interaction"],["drop","drop",void 0,void 0,"Interaction"],["confirm","confirm",void 0,void 0,"Interaction"],["streak0","streak",0,void 0,"Killstreaks"],["streak1","streak",1,void 0,"Killstreaks"],["streak2","streak",2,void 0,"Killstreaks"]]},{n:"Spectate & Vote",list:[["specFocus","specFocus",void 0,void 0,"Spectating"],["specFree","specFree",void 0,void 0,"Spectating"],["specObj","specObj",void 0,void 0,"Spectating"],["specFirst","specFirst",void 0,void 0,"Spectating"],["specNames","specNames",void 0,void 0,"Spectating"],["specMiniMap","specMiniMap",void 0,void 0,"Spectating"],["kpdVoteY","kpdVoteY",void 0,void 0,"KPD"],["kpdVoteN","kpdVoteN",void 0,void 0,"KPD"],["kpdVision","kpdVision",void 0,void 0,"KPD"],["kickVoteY","kickVoteY",void 0,void 0,"Vote"],["kickVoteN","kickVoteN",void 0,void 0,"Vote"]]},{n:"Modes",list:[["prop","prop",void 0,void 0,"Prop Hunt"],["propRand","propRand",void 0,void 0,"Prop Hunt"],["propRot","propRot",void 0,void 0,"Prop Hunt"],["propRotR","propRotR",void 0,void 0,"Prop Hunt"],["taunt0","taunt",0,void 0,"Prop Hunt"],["taunt1","taunt",1,void 0,"Prop Hunt"],["taunt2","taunt",2,void 0,"Prop Hunt"],["taunt3","taunt",3,void 0,"Prop Hunt"],["taunt4","taunt",4,void 0,"Prop Hunt"],["taunt5","taunt",5,void 0,"Prop Hunt"],["reset","reset",void 0,void 0,"Parkour & Race"],["resetLast","resetLast",void 0,void 0,"Parkour & Race"],["noclipSB","noclipSB",void 0,void 0,"Sandbox (Test mode)"],["godModeSB","godModeSB",void 0,void 0,"Sandbox (Test mode)"],["smiteSB","smiteSB",void 0,void 0,"Sandbox (Test mode)"],["unlimitedSB","unlimitedSB",void 0,void 0,"Sandbox (Test mode)"],["killSB","killSB",void 0,void 0,"Sandbox (Test mode)"],["spawnBot","spawnBot",void 0,void 0,"Sandbox (Test mode)"],["clearBots","clearBots",void 0,void 0,"Sandbox (Test mode)"]]}],sticky:!0,tabIndex:0,switchTab:function(e,t){(this.tabIndex!=e||t)&&(ye.inputChanger=null,this.tabIndex=e,updateWindow(7))},collapseFolder:function(e){let t=document.getElementById("setBindBod_"+e.id.split("setBindHed_")[1]),i="none"==t.style.display;e.children[0].innerHTML="keyboard_arrow_"+(i?"down":"right"),t.style.display=i?null:"none"},gen:function(){for(var e,t,i="<div id='bindsHeader'><div class='bigMenTabs' style='table-layout: fixed;margin-top: 18px!important;margin-bottom: unset;'>",n=0;n<this.tabs.length;++n)i+="<div class='bigMenTab"+(this.tabIndex==n?" bigMenTabA":"")+"' onclick='windows[6].switchTab("+n+")' style='padding-top:10px;padding-bottom:5px;'>"+this.tabs[n].n+"</div>";i+="</div></div>",i+="<div id='bindsHolder'>";var s=this.tabs[this.tabIndex].list,a=[];for(n=0;n<s.length;n++){f=s[n][4].replace(/[^\w]/gim,"_").toLowerCase(),a[f]||={body:[],head:"<div class='setHed' id='setBindHed_"+f+"' onclick='window.windows[6].collapseFolder(this)'><span class='material-icons plusOrMinus'>keyboard_arrow_down</span> "+s[n][4]+"</div><div class='setBodH' id='setBindBod_"+f+"'>"};var r="<div class='settName'>";if(null==s[n][3])r+=S.t("windows.controls."+s[n][0]);else{var o=ye[s[n][3]][s[n][5]];if("toggle"==s[n][1]){for(var l in r+="Toggle <select class='setToggle' onchange='changeContSet("+s[n][2]+", this.value)'><option value='-1'"+(-1==o?" selected":"")+">None</option>",we.list)we.list[l].toggle&&(r+="<option value='"+l+"'"+(o==l?" selected":"")+">"+S.t(we.list[l].name)+" ["+S.t("settings."+we.list[l].cat+".header")+"]</option>");r+="</select>"}else{var c=filterCM(o);r+="Message <input type='text' name='"+s[n][0]+"' class='inputGrey2' placeholder='Message to Send' style='float: none;' value='"+c+"' oninput='changeContMsg("+s[n][2]+", this.value)' />"}}var d=null==s[n][2]?ye.binds[s[n][1]].val:ye.binds[s[n][1]][s[n][2]].val,h=null==s[n][2]?ye.binds[s[n][1]].altVal:ye.binds[s[n][1]][s[n][2]].altVal,u=10001==d||10002==d||10003==d||2e4==d,p=10001==h||10002==h||10003==h||2e4==h;null!=we.list[s[n][1]+"Trigger"]&&(r+=(e=s[n][1]+"Trigger",t=void 0,t="<div style='float:right'>",t+=we.list[e].html?we.list[e].html():be._html.settings.input[we.list[e].type]?be._html.settings.input[we.list[e].type](we.list[e]):be._html.settings.input.generic(we.list[e]),t+="</div>")),r+="<div style='float:right'><span class='reset' title='Reset Bind' onclick='resetCont(&quot;"+s[n][1]+"&quot;,1,"+s[n][2]+")'><i class='material-icons' style='font-size:40px;color:var(--yellow);'>refresh</i></span><span class='unbind' title='Unbind' onclick='unbindCont(&quot;"+s[n][1]+"&quot;,1,"+s[n][2]+")'><i class='material-icons' style='font-size:40px;color:var(--red);'>delete_forever</i></span><span class='settText floatRNoC keyIcon' id='cont"+s[n][1]+(null==s[n][2]?"":"_"+s[n][2])+"_alt' onmouseover='playTick()' onclick='changeCont(&quot;"+s[n][1]+"&quot;,1,"+s[n][2]+")'>"+ae.getKeyName(h)+"</span>"+(p?"<div class='mouseBtn' style='background-image: url("+ae.assetsUrl("/img/mouse/"+h+".png")+");'></div>":"")+"</div>",r+="<div class='bindSep'></div>",r+="<div style='float:right'><span class='reset' title='Reset Bind' onclick='resetCont(&quot;"+s[n][1]+"&quot;,0,"+s[n][2]+")'><i class='material-icons' style='font-size:40px;color:var(--yellow);'>refresh</i></span><span class='unbind' title='Unbind' onclick='unbindCont(&quot;"+s[n][1]+"&quot;,0,"+s[n][2]+")'><i class='material-icons' style='font-size:40px;color:var(--red);'>delete_forever</i></span><span class='settText floatRNoC keyIcon' id='cont"+s[n][1]+(null==s[n][2]?"":"_"+s[n][2])+"' onmouseover='playTick()' onclick='changeCont(&quot;"+s[n][1]+"&quot;,0,"+s[n][2]+")'>"+ae.getKeyName(d)+"</span>"+(u?"<div class='mouseBtn' style='background-image: url("+ae.assetsUrl("/img/mouse/"+d+".png")+");'></div>":"")+"</div>",r+="</div>",a[f].body.push(r)}for(var f in a)i+=a[f].head+a[f].body.join("")+"</div>";return i+="</div>"}},{header:S.t("windows.host.header"),label:"host_games",presets:{},width:1200,maxH:"calc(100% - 300px)",forceScroll:!0,yPos:48,dark:!0,popup:!0,updateSet:function(e,t){t&&(windows[7].costVal+=t.checked?e:-e,hCustCost.innerHTML=windows[7].costVal?windows[7].costVal+" KR":"None")},presetLoaded:function(e,t,i){try{e&&windows[7].presets[e]&&t?(windows[7].presets[e].data=JSON.parse(t),windows[7].presets[e].funds=i||0):(windows[7].presets[e].data="DEFAULT",windows[7].presets[e].funds=i||0)}catch(t){windows[7].presets[e].data="DEFAULT",windows[7].presets[e].funds=i||0}updateWindow(8)},toggle:function(e){for(var t=document.querySelectorAll("input[id^='"+e+"']"),i=0;i<t.length;i++)t[i].checked=!t[i].checked},changeWep:function(e){if(windows[7].wepConf)for(var t=document.querySelectorAll("div[id^='weaponConf']"),i=0;i<t.length;i++)t[i].style.display=t[i].id=="weaponConf"+e?"block":"none"},toggleWep:function(e){if(windows[7].wepConf=null==e?!windows[7].wepConf:e,null!=e){var t=document.getElementById("togConfW");t&&(t.checked=e)}for(var i=windows[7].wepConf?weaponSelect.value||0:-1,n=document.querySelectorAll("div[id^='weaponConf']"),s=0;s<n.length;s++)n[s].style.display=n[s].id=="weaponConf"+i?"block":"none"},changeCls:function(e){if(windows[7].clsConf)for(var t=document.querySelectorAll("div[id^='classConf']"),i=0;i<t.length;i++)t[i].style.display=t[i].id=="classConf"+e?"block":"none"},toggleCls:function(e){if(windows[7].clsConf=null==e?!windows[7].clsConf:e,null!=e){var t=document.getElementById("togConfC");t&&(t.checked=e)}for(var i=windows[7].clsConf?classSelect.value||0:-1,n=document.querySelectorAll("div[id^='classConf']"),s=0;s<n.length;s++)n[s].style.display=n[s].id=="classConf"+i?"block":"none"},changeEffects:function(e){if(windows[7].effectConf)for(var t=document.querySelectorAll("div[id^='effectConf']"),i=0;i<t.length;i++)t[i].style.display=t[i].id=="effectConf"+e?"block":"none"},toggleEffects:function(e){if(windows[7].effectConf=null==e?!windows[7].effectConf:e,null!=e){var t=document.getElementById("togConfE");t&&(t.checked=e)}for(var i=windows[7].effectConf?effectSelect.value||0:-1,n=document.querySelectorAll("div[id^='effectConf']"),s=0;s<n.length;s++)n[s].style.display=n[s].id=="effectConf"+i?"block":"none"},toggleKRRew:function(e){if(document.getElementById("krRewards")&&!e){var t=document.getElementById("defaultSetts");t&&(t.checked=!0),windows[7].toggleDefault(!0)}},toggleDefault:function(e){var t=document.getElementById("defaultSetts");if(t){if(!e){var i=document.getElementById("krRewards");i&&(i.checked=!1),windows[7].toggleKRRew(!0)}forcedSettings.style.display=t.checked?"none":"block",hostGamePreset.style.display=t.checked?"none":"block";for(var n=0;n<this.setTabs.length;++n){var s=document.getElementById("hstTab"+n),a=!t.checked;this.setTabs[n].rd&&(a?s.classList.remove("bigMenTabDis"):s.classList.add("bigMenTabDis"))}}},setTabs:[{n:"Select"},{n:"Game Settings",rd:!0},{n:"Advanced",rd:!0},{n:"Server"}],switchTab:function(e){for(var t,i=0;i<this.setTabs.length;++i)(t=document.getElementById("hstTab"+i))&&(i==e?t.classList.add("bigMenTabA"):t.classList.remove("bigMenTabA"),document.querySelectorAll(".hostTb"+i).forEach((function(t){e==i?t.classList.remove("hide"):t.classList.add("hide")})))},tabIndex:0,switchTab2:function(e){0==e&&(Pr=null),windows[7].tabIndex=e,updateWindow(8)},buyTabs:[{n:"Rent Server"},{n:"My Servers"}],dediRes:function(e,t,i){if(0==e)windows[7].dediServers.data=t,updateWindow(8);else if(1==e&&(dediHostErr.innerHTML=t,dediHostErr.style.color="#fff",!i)){var n=document.getElementById("rentServBtn");n&&(n.style.display="inline-block");var s=document.getElementById("updDediServBtn");s&&(s.style.display="inline-block")}},dediCst:function(e){dediCostI.innerHTML=ae.commaFormatNum(u.dediPrices[e])},gen:function(){windows[7].costVal=0,windows[7].wepConf=!1,windows[7].clsConf=!1,windows[7].effectConf=!1;var e=windows[7].presets[Pr?Pr.name:null];if(Rr&&!Pr)try{var t=JSON.parse(Rr);t&&t.config&&((e={data:t.config}).data.modes||(e.data.modes=[0]))}catch(e){}var i="",n=!Pr||e&&e.data,s=Pr&&n,a=Pr&&n&&e.funds;a&&(s=!0);var r=u.hostTypes[Er||0],o=!!s,l=!n&&!windows[7].presets[Pr?Pr.name:null],c=[];if(o&&c.push(1,2),l&&c.push(1,2,3),r.disTabs&&c.push(...r.disTabs),r.buyServ){i="";var d={},h={};if(this.dediServers){if(this.dediServers.data)for(var p=0;p<this.dediServers.data.length;++p)f=this.dediServers.data[p],d[f.REG]||=[],d[f.REG].push(f),f.TRM<=0&&(h[f.REG]=(h[f.REG]||0)+1)}else me.send("dsrvl"),this.dediServers={};i+="<div class='bigMenTabs' style='margin-top:0px !important;margin-left:0px;'>";for(p=0;p<this.buyTabs.length;++p)i+="<div class='bigMenTab"+(this.tabIndex==p?" bigMenTabA":"")+(this.tabIndex>=2?" bigMenTabDis":"")+"' onclick='playSelect();"+(this.tabIndex>=2?"":"windows[7].switchTab2("+p+")")+"' onmouseenter='playTick(0.1);'>"+this.buyTabs[p].n+"</div>";if(this.tabIndex>=2&&(i+="<div class='bigMenTab bigMenTabA' onclick='playSelect();windows[7].switchTab2(0)' onmouseenter='playTick(0.1);'><span class='material-icons-outlined' style='font-size:40px;color:#fb5555;vertical-align:middle;margin-top:-12px;'>close</span></div>"),i+="</div>",0==this.tabIndex)for(p=0;p<u.purchServRegions.length;++p){var f=u.purchServRegions[p],m=d[p]||[];i+="<div class='serverCard' onclick='windows[7].servInd="+p+";playSelect();windows[7].switchTab2(2);'><img class='serverFlag' src='"+ae.assetsUrl("/img/flags/3x2/"+f.f+".svg")+"' /><div class='serverCardInfo'><span style='padding-left:10px;color:#fff;'>"+f.n+"</span><span class='servCrdAv'>"+(h[p]||0)+" Available</span></div></div>"}else if(1==this.tabIndex)if(this.dediServers&&this.dediServers.data){m=this.dediServers.data||[];var g=0;for(p=0;p<m.length;++p)if(f=m[p],Re&&f.TRM>0&&Re.id==f.OID){var v=JSON.parse(f.CONF||"{}");i+="<div class='serverCard' onclick='windows[7].servInd="+p+";playSelect();windows[7].switchTab2(3);'><div style='background-image:url("+(b=ae.userAssetsUrl("/m"+v.gid+"/thumb.png"))+")' class='serverCardI'></div><img class='serverFlag' src='"+ae.assetsUrl("/img/flags/3x2/"+u.purchServRegions[f.REG].f+".svg")+"' /><div class='serverCardInfo'><span style='padding-left:10px;color:#fff;'>"+f.SVN+"_"+f.SID+"</span><span class='servCrdAv'>Cloud Compute</span></div></div>",g++}g||(i+="<div style='color:#fff;text-align:center;'>No available servers</div>")}else i+="<div style='text-align:center;color:#fff'>Loading...</div>";else if(2==this.tabIndex){if(this.dediServers&&this.dediServers.data)if((m=d[this.servInd]||[]).length)for(p=0;p<m.length;++p){f=m[p];var y=this.dediServers.data.indexOf(f);v=JSON.parse(f.CONF||"{}");f.TRM<=0&&(v={});var b=ae.userAssetsUrl("/m"+v.gid+"/thumb.png");i+="<div class='serverCard' style='"+(f.TRM>0?"filter:grayscale(100%);":"")+"'"+(f.TRM>0?"":"onclick='windows[7].servInd="+y+";playSelect();windows[7].switchTab2(3);'")+"><div style='background-image:url("+b+")' class='serverCardI'></div><img class='serverFlag' src='"+ae.assetsUrl("/img/flags/3x2/"+u.purchServRegions[f.REG].f+".svg")+"' /><div class='serverCardInfo'><span style='padding-left:10px;color:#fff;'>"+f.SVN+"_"+f.SID+"</span><span class='servCrdAv'>Cloud Compute</span></div></div>"}else i+="<div style='color:#fff;text-align:center;'>No available servers</div>";else i+="<div style='text-align:center;color:#fff;'>Loading...</div>"}else if(3==this.tabIndex){if(f=this.dediServers.data[this.servInd]){var w=f.SVN+"_"+f.SID,x=u.purchServRegions[f.REG];v=JSON.parse(f.CONF||"{}");f.TRM<=0&&(v={});b=ae.userAssetsUrl("/m"+(Pr?Pr.id:v.gid)+"/thumb.png");var M=v.typ||0,k=v.mn||null,_=f.OID==Re.id&&f.TRM>0,T="";for(p=0;p<u.dediDurat.length;++p)T+="<option value='"+p+"' "+(p==M?" selected=''":"")+">"+u.dediDurat[p]+" Days</option>";i+="<div class='serverCard'><div style='background-image:url("+b+")' class='serverCardI'></div><img class='serverFlag' src='"+ae.assetsUrl("/img/flags/3x2/"+x.f+".svg")+"' /><div class='serverCardInfo'><span style='padding-left:10px;color:#fff;'>"+w+"</span><span class='servCrdAv'>Cloud Compute</span></div></div><div class='setBodH' style='width:731px;display:inline-block;margin-top:8px;margin-left:10px;'><div class='settName' style='font-size:20px;'>Server Name <span class='floatR'>"+w+"</span></div><div class='settName' style='font-size:20px;'>Server Region <span class='floatR'>"+x.r+"</span></div><div class='settName' style='font-size:20px;'>City <span class='floatR'>"+x.n+"</span></div><div class='settName' style='font-size:20px;'>Type <span class='floatR'>Cloud Compute single-core</span></div></div><div class='setBodH' style='margin-top:10px;'>"+(f.TRM>0?"<div class='settName' style='font-size:20px;padding-bottom:15px;padding-top:10px;'>Time remaining<span style='float:right;color:#c2c2c2;'>"+ae.getReadableTime(f.TRM)+"</span></div>":"")+"<div class='settName' style='font-size:20px;padding-bottom:15px;padding-top:10px;'>"+(_?"Extend Time":"Rental Duration")+"<select onchange='windows[7].dediCst(this.value)' class='inputGrey2' style='margin-top:-5px;' id='dediHostDur'>"+T+"</select></div><div class='settName' style='font-size:20px;padding-bottom:15px;padding-top:10px;'>"+(_?"Change Game":"Select Game")+"<span class='floatR' style='margin-top:-5px;'><a href='javascript:showGames(2);'>"+(Pr?Pr.name:k||"Select Game")+"</a></span></div><div class='setBodH' style='margin-top:20px;padding-bottom:5px;padding-top:15px;'>By renting a server, you agree to the <a>Terms & Conditions</a>. It may take up to 10 minutes for a server to become available once it starts up.<div class='settName' style='font-size:20px;padding-top:10px;border-top: 3px solid rgba(255, 255, 255, 0.2);'>Server Cost<span class='floatR' style='color:#fff'><span id='dediCostI' style='color:rgba(255,255,255,0.7)'>"+ae.commaFormatNum(u.dediPrices[M])+"</span> KR</span></div></div></div><div style='font-size:22px;padding-left:10px;margin-top:20px;display:none;width:100%;text-align:center;' id='dediHostErr'></div><div id='rentServBtn' onclick='rentDediServer(`"+f.ID+"`);' style='"+(_?"width:calc(50% - 20px);":"")+"'>"+(_?"Extend Rental":"Rent Server")+"</div>"+(_?"<div id='updDediServBtn' onclick='rentDediServer("+f.ID+", 1)'>Restart/Update</div>":"")}}return i}var C="<div class='bigMenTabs' style='margin-top:30px !important;margin-left:0px;'>";for(p=0;p<this.setTabs.length;++p)C+="<div id='hstTab"+p+"' class='bigMenTab"+(0==p?" bigMenTabA":c.indexOf(p)>=0?" bigMenTabDis":"")+"' onclick='playSelect();"+(this.setTabs[p].click?this.setTabs[p].click:"windows[7].switchTab("+p+")")+"' onmouseenter='playTick(0.1);'>"+this.setTabs[p].n+"</div>";var I=!!ct&&!!Re&&!!Re.canRehost;(C+="<div class='bigMenTab' id='startServBtn' style='background:"+(l?"#595959":"#4582d1")+"!important;"+(I?"":"border-top-right-radius:6px;border-bottom-right-radius:6px;")+"' onclick='"+(l?"":"playSelect(0.1);createPrivateRoom();")+"'>Start Game</div>",I&&(C+="<div class='bigMenTab' id='startServBtn' style='background:"+(l?"#595959":"var(--red)")+"!important;border-top-right-radius:6px;border-bottom-right-radius:6px;' onclick='"+(l?"":"playSelect(0.1);createPrivateRoom(true);")+"'>Rehost</div>"),C+="</div>",i+="<div class='hostHeader' style='margin-bottom:15px;width:100%;margin-top:-10px;padding-left:15px;'>"+r.title+"<span style='color:#919191;font-size:22px;float:right;' id='hostGameMsg'>"+(l?"Loading preset...":"")+"</span></div>"+C,i+="<div class='hostTb2 hide' style='margin-top:-10px;'></div>",i+="<div class='hostTb0'>",Pr)?i+='<div style=\'margin-top:30px;\'>\n\t\t\t\t<div style="width:360px;display:inline-block;margin-left:10px;margin-right:20px;">\n\t\t\t\t\t<div class="setSugBox sugBoxSelCus blackShad" style="background:url('+ae.userAssetsUrl("/m"+Pr.id+"/thumb.png")+')"\n\t\t\t\t\t\tonmouseenter="playTick(0.1);" onclick="playSelect();showGames(1)">\n\t\t\t\t\t\t<div class="segSugIH">\n\t\t\t\t\t\t\t<div class="setSugInf">Change Game</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div id="hostGameNameHolder">\n\t\t\t\t\t\t<span><i style="color:#eb5656;font-size:30px;vertical-align:-3px;cursor:pointer" onclick="openHostWindow(true)" class="material-icons">delete</i> </span>\n\t\t\t\t\t\t<span id="commMap" style="color:white">'+Pr.name+'</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="setBodH" style="width:745px;display:inline-block;margin-top:0px;vertical-align:top">\n\t\t\t\t\t<div class="settNameSmall" style="font-size:19px">Players<span id="customSetPrev0" style="color:white;float:right">...</span></div>\n\t\t\t\t\t<div class="settNameSmall" style="font-size:19px">Minutes<span id="customSetPrev2" style="color:white;float:right">...</span></div>\n\t\t\t\t\t<div class="settNameSmall" style="font-size:19px">Gamemodes\n\t\t\t\t\t<span id="gameModesC" style="max-width:480px;color:white;float:right;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;"\n\t\t\t\t\tclass="textOverflow">...</span></div>\n\t\t\t\t\t<div class="settNameSmall" style="font-size:19px">Likes<span id="gameLikesC" style="color:white;float:right">...</span></div>\n\t\t\t\t</div>\n\t\t\t</div>':r.topHedr&&(i+=r.topHedr());if(l||!r.info&&!Pr||(i+="<div class='setBodH' style='padding-top:10px'>",!r.noCustM&&Pr&&(i+="<div class='settNameSmall' style='margin:0px;margin-top:10px;border-bottom:none;padding-bottom: 0px;'>"+S.t("server.config.forceDefault")+"<label class='switch'><input id='defaultSetts' type='checkbox' onclick='windows[7].toggleDefault()' checked><span class='slider'></span></label></div>",i+="<div id='defaultSettsInfo' style='margin-top:15px;margin-bottom:15px;'><div style='padding:10px;background-color:rgba(0,0,0,0.6);border: 3px solid rgba(255, 255, 255, 0.4);margin-bottom:0px;margin-top:10px;padding-left:15px;font-size:18px'>"+S.t("windows.host.default.settings")+"</div></div>"),r.info&&(i+="<div id='krRewardsInfo' style='margin-top:10px;padding-bottom:0px;'><div style='padding:10px;background-color:rgba(0,0,0,0.4);border: 3px solid rgba(255, 255, 255, 0.4);margin-bottom:0px;margin-top:0px;padding-left:15px;font-size:18px'>"+r.info+"</div>"+(r.infoAdd?"<span style='color:rgba(255,255,255,0.4);font-size:14px;margin-bottom:5px'>"+r.infoAdd+"</span>":"")+"</div>"),a&&(i+="<div class='settNameSmall' style='margin:0px;margin-top:20px;border-bottom:none;padding-top:0px;padding-bottom:0px;'>"+S.t("server.config.krRewards")+"<div class='krIconHost'>KR</div> <label class='switch'><input id='krRewards' type='checkbox' onclick='windows[7].toggleKRRew()'"+(a?" checked":"")+"><span class='slider'></span></label></div>",i+="<div id='krRewardsInfo' style='margin-top:15px;margin-bottom:5px;'><div style='padding:10px;background-color:rgba(0,0,0,0.4);border: 3px solid rgba(255, 255, 255, 0.4);margin-bottom:0px;margin-top:10px;padding-left:15px;font-size:18px'>"+S.t("windows.host.rewards")+"<div style='margin-top:20px;'>Available <span style='float:right;color:rgba(255,255,255,0.4)'>"+ae.commaFormatNum(e.funds||0)+" <span style='color:rgba(255,255,255,0.8)'>KR</span></span></div></div></div>",i+="<div style='height:10px;'></div>"),i+="</div>"),Pr||r.noCustM||(i+="<div class='setBodH'><div class='settNameSmall'>"+S.t("windows.host.raw")+"<input id='rawMapData' type='search' "+(Rr?"value='"+Rr.replace("'",'"')+"'":"placeholder='"+S.t("windows.host.raw")+"'")+" autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false'></div></div>"),i+="<div style='margin-top:20px;margin-bottom:-10px;'>",!Pr){i+="<div class='mapListCat'>"+(r.mapH||"Default Krunker Maps")+"</div>";for(p=0;p<xe.length;p++){var A=xe[p],R=A.name.toLowerCase();(!r.allMaps||r.allMaps.indexOf(R)>=0)&&(i+="<label class='hostMap'><div class='hostMapName blackShad'>"+ae.capFirst(A.name)+"</div><input onclick='playSelect(0.1)' id='gameMap"+p+"' type='checkbox'><img loading='lazy' onmouseenter='playTick();' draggable='false' class='hostMapImg' src='"+ae.assetsUrl("/img/maps/map_"+p+".png")+"'></label>")}}if(i+="</div>",i+="</div>",n){if(e&&=e.data,"DEFAULT"==e&&(e=null),i+="<div id='forcedSettings' style='display:"+(o?"none":"block")+"'>",!r.comp&&!r.restrict){i+="<div class='hostTb1 hide'>",i+="<div class='setHed' style='margin-bottom:15px;margin-top:30px;'>"+S.t("windows.host.modes")+"<div class='hostToggle' onclick='windows[7].toggle(&quot;gameMode&quot;)'>Toggle</div></div>",i+="<div style='margin-top:5px'>";var P;for(p=0;p<ne.length;p++)if(!(P=ne[p]).preventCustomGames||Re&&Re.isDev){var E=e&&e.modes&&e.modes.length?e.modes.indexOf(p)>=0:0==p;i+="<label class='hostOpt' onmouseenter='playTick()'><span class='optName'>"+ae.capFirst(P.name)+"</span><input id='gameMode"+p+"' type='checkbox'"+(E?"checked":"")+"><div class='optCheck'></div></label>"}i+="</div>",i+="<div class='setHed' style='margin-bottom:15px;'>"+S.t("windows.host.classes")+"<div class='hostToggle' onclick='windows[7].toggle(&quot;gameClass&quot;)'>Toggle</div></div>",i+="<div style='margin-top:5px'>";for(p=0;p<ve.classConfig.length;p++){var D=ve.classConfig[p];E=!e||!e.classes||e.classes.indexOf(p)>=0;i+="<label class='hostOpt' onmouseenter='playTick()'><span class='optName'>"+D.name+"</span><img loading='lazy' class='optImg' src='"+ae.assetsUrl("textures/classes/icon_"+p+".png",!0)+"' /><input id='gameClass"+p+"' type='checkbox'"+(E?"checked":"")+"><div class='optCheck'></div></label>"}i+="</div>",i+="</div>",i+="<div class='hostTb2 hide'><div class='setHed' style='margin-bottom:15px;'>Weapon Config<select id='weaponSelect' class='inputGrey2' onchange='windows[7].changeWep(this.value)'>",windows[7].wepConf=e&&e.weps;for(var O=0;O<ve.weapons.length;O++)i+="<option value='"+O+"' "+(0==O?"selected":"")+">"+ve.weapons[O].name+"</option>";i+="</select><label class='switch'><input type='checkbox' id='togConfW' onchange='windows[7].toggleWep()' "+(windows[7].wepConf?"checked":"")+"><span class='slider'></span></label></div>";for(O=0;O<ve.weapons.length;O++){i+="<div id='weaponConf"+O+"' style='display:"+(0==O&&e&&e.weps?"block":"none")+";margin-top:10px'><div class='setBodH'>";var L=e&&e.weps&&null!=e.weps[O]?e.weps[O]:null;for(p=0;p<u.weaponConfig.length;p++)if(Ee=u.weaponConfig[p],null!=ve.weapons[O][Ee.varN]){var j=Ee.name,z=L&&null!=L[Ee.varN]?L[Ee.varN]:ve.weapons[O][Ee.varN];if(Ee.bool)i+="<div class='settNameSmall'>"+j+" <label class='switch'><input type='checkbox' id='customW"+O+Ee.varN+"' "+(z?"checked":"")+"><span class='slider'></span></label>"+(Ee.cost?"<span style='float:right;margin-right:10px;color:rgba(0,0,0,0.5)'>"+Ee.cost+" <b>KR</b></span>":"")+"</div>";else if(Ee.select){i+="<div class='settNameSmall'>"+j,i+="<select id='customW"+O+Ee.varN+"' class='inputGrey2'>";for(var B=0;B<Ee.options.length;B++)i+="<option value='"+B+"' "+(B==z?"selected":"")+">"+Ee.options[B]+"</option>";i+="</select></div>"}else i+=Ee.input?"<div class='settNameSmall'>"+j+"<input id='customW"+O+Ee.varN+"' value='"+z+"' type='text'style='border-radius:6px;border:none;background:#eee;padding:6px;padding-bottom:6px;float:right;margin-top:5px;margin-bottom:5px;' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false'></div>":"<div class='settNameSmall'>"+j+"<span class='sliderVal' id='customWSet"+O+"_"+p+"'>"+z+"</span><div class='slidecontainer'><input type='range' min='"+Ee.min+"' max='"+Ee.max+"' step='"+Ee.step+"' id='customW"+O+Ee.varN+"' value='"+z+"' oninput='updateSliderLabel2(0,"+O+","+p+",this.value)' class='sliderM'></div></div>"}i+="</div></div>"}i+="</div>",i+="<div class='hostTb2 hide'><div class='setHed' style='margin-bottom:15px'>Class Config<select id='classSelect' class='inputGrey2' onchange='windows[7].changeCls(this.value)'>",windows[7].clsConf=e&&e.cls;for(O=0;O<ve.classes.length;O++)i+="<option value='"+O+"' "+(0==O?"selected":"")+">"+ve.classes[O].name+"</option>";i+="</select><label class='switch'><input type='checkbox' id='togConfC' onchange='windows[7].toggleCls()' "+(windows[7].clsConf?"checked":"")+"><span class='slider'></span></label></div>";for(O=0;O<ve.classes.length;O++){i+="<div id='classConf"+O+"' style='display:"+(0==O&&e&&e.cls?"block":"none")+";margin-top:10px;'><div class='setBodH'>";var N=e&&e.cls&&null!=e.cls[O]?e.cls[O]:null;for(p=0;p<u.classConfig.length;p++)if(Ee=u.classConfig[p],null!=ve.classes[O][Ee.varN]){j=Ee.name,z=N&&null!=N[Ee.varN]?N[Ee.varN]:ve.classes[O][Ee.varN];if(Ee.bool)i+="<div class='settNameSmall'>"+j+" <label class='switch'><input type='checkbox' id='customC"+O+Ee.varN+"' "+(z?"checked":"")+"><span class='slider'></span></label></div>";else if(Ee.select){i+="<div class='settNameSmall'>"+j,i+="<select id='customC"+O+Ee.varN+"' class='inputGrey2'>";for(B=0;B<Ee.options.length;B++)i+="<option value='"+B+"' "+(B==z?"selected":"")+">"+Ee.options[B]+"</option>";i+="</select></div>"}else i+=Ee.input?"<div class='settNameSmall'>"+j+"<input id='customC"+O+Ee.varN+"' value='"+z+"' type='text'style='border-radius:6px;border:none;background:#eee;padding:6px;padding-bottom:6px;float:right;margin-top:5px;margin-bottom:5px;' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false'></div>":"<div class='settNameSmall'>"+j+"<span class='sliderVal' id='customCSet"+O+"_"+p+"'>"+z+"</span><div class='slidecontainer'><input type='range' min='"+Ee.min+"' max='"+Ee.max+"' step='"+Ee.step+"' id='customC"+O+Ee.varN+"' value='"+z+"' oninput='updateSliderLabel2(1,"+O+","+p+",this.value)' class='sliderM'></div></div>"}i+="</div></div>"}i+="</div>",i+="<div class='hostTb2 hide'><div class='setHed' style='margin-bottom:15px'>Effect Config<select id='effectSelect' class='inputGrey2' onchange='windows[7].changeEffects(this.value)'>",windows[7].effectConf=e&&e.prks;for(O=0;O<ve.effects.length;O++)i+="<option value='"+O+"' "+(0==O?"selected":"")+">"+ve.effects[O].name+"</option>";i+="</select><label class='switch'><input type='checkbox' id='togConfE' onchange='windows[7].toggleEffects()' "+(windows[7].effectConf?"checked":"")+"><span class='slider'></span></label></div>";for(O=0;O<ve.effects.length;O++){i+="<div id='effectConf"+O+"' style='display:"+(0==O&&e&&e.prks?"block":"none")+";margin-top:10px;'><div class='setBodH'>";var F=e&&e.prks&&null!=e.prks[O]?e.prks[O]:null;for(p=0;p<u.effectConfig.length;p++)if(Ee=u.effectConfig[p],null!=ve.effects[O][Ee.varN]){j=Ee.name,z=F&&null!=F[Ee.varN]?F[Ee.varN]:ve.effects[O][Ee.varN];if(Ee.bool)i+="<div class='settNameSmall'>"+j+" <label class='switch'><input type='checkbox' id='customE"+O+Ee.varN+"' "+(z?"checked":"")+"><span class='slider'></span></label></div>";else if(Ee.select){i+="<div class='settNameSmall'>"+j,i+="<select id='customE"+O+Ee.varN+"' class='inputGrey2'>";for(B=0;B<Ee.options.length;B++)i+="<option value='"+B+"' "+(B==z?"selected":"")+">"+Ee.options[B]+"</option>";i+="</select></div>"}else i+=Ee.input?"<div class='settNameSmall'>"+j+"<input id='customE"+O+Ee.varN+"' value='"+z+"' type='text'style='border-radius:6px;border:none;background:#eee;padding:6px;padding-bottom:6px;float:right;margin-top:5px;margin-bottom:5px;' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false'></div>":"<div class='settNameSmall'>"+j+"<span class='sliderVal' id='customESet"+O+"_"+p+"'>"+z+"</span><div class='slidecontainer'><input type='range' min='"+Ee.min+"' max='"+Ee.max+"' step='"+Ee.step+"' id='customE"+O+Ee.varN+"' value='"+z+"' oninput='updateSliderLabel2(2,"+O+","+p+",this.value)' class='sliderM'></div></div>"}i+="</div></div>"}i+="</div>"}i+="<div class='hostTb2 hide'>",i+="<div class='setHed' style='margin-bottom:15px'>"+S.t("windows.host.settings")+"</div><div class='setBodH'>";var H=ae.getAccountType(Re),U=!0;for(p=0;p<u.serverConfig.length;p++)if(-1!=((Ee=u.serverConfig[p]).hostTypes||[0]).indexOf(Er||0)){j=S.t("server.config."+Ee.varN),!!r.showAll||Ee.basic;if(Ee.head&&!r.hideHead&&(U&&(i+="</div>"),U=!0,i+="<div class='setHed' style='margin-bottom:15px'>"+Ee.head+"</div><div class='setBodH'>"),Ee.bool){E=r.comp&&null!=Ee.defC?Ee.defC:Ee.def;e&&e.settings&&null!=e.settings[Ee.varN]&&!Ee.cost&&(E=!!e.settings[Ee.varN]),i+="<div class='settNameSmall' style='"+(Ee.hide?"display:none":"")+"'>"+j+" <label class='switch'><input type='checkbox' onchange='windows[7].updateSet("+(Ee.cost||0)+",this)' id='customS"+Ee.varN+"' "+(E?"checked":"")+"><span class='slider'></span></label>"+(Ee.cost?"<span style='float:right;margin-right:10px;color:rgba(0,0,0,0.5)'>"+Ee.cost+" <b>KR</b></span>":"")+"</div>"}else if(Ee.input)i+="<div class='settNameSmall' style='"+(Ee.hide?"display:none":"")+"'>"+j+"<input id='customS"+Ee.varN+"' value='"+(r.comp&&null!=Ee.defC?Ee.defC:Ee.def)+"' type='text'style='border-radius:6px;border:none;background:#eee;padding:6px;padding-bottom:6px;float:right;margin-top:5px;margin-bottom:5px;' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false'></div>";else if(Ee.select){i+="<div class='settNameSmall' style='"+(Ee.hide?"display:none":"")+"'>"+j,i+="<select id='customS"+Ee.varN+"' class='inputGrey2'>";for(O=0;O<Ee.options.length;O++)i+="<option value='"+O+"' "+(O==(r.comp&&null!=Ee.defC?Ee.defC:Ee.def)?"selected":"")+">"+Ee.options[O]+"</option>";i+="</select></div>"}else{var V=r.comp&&null!=Ee.defC?Ee.defC:Ee.def,G=Ee.max;3==H?G=Ee.maxF||Ee.max:2==H?G=Ee.maxP||Ee.max:0==H&&(G=Ee.maxG||Ee.max),e&&e.settings&&null!=e.settings[Ee.varN]&&!Ee.cost&&(V=e.settings[Ee.varN])>G&&(V=G),i+="<div class='settNameSmall' style='"+(Ee.hide?"display:none":"")+"'>"+(null==Ee.classIcon?"":"<img loading='lazy' class='classLimitIcon' src='"+ae.assetsUrl("textures/classes/icon_"+Ee.classIcon+".png",!0)+"' />")+j+"<span class='sliderVal' id='customSet"+p+"'>"+V+"</span><div class='slidecontainer' style='vertical-align:top;margin-top:-6px'><input type='range' min='"+Ee.min+"' max='"+G+"' step='"+Ee.step+"' id='customS"+Ee.varN+"' value='"+V+"' oninput='updateSliderLabel("+p+",this.value)' class='sliderM'></div></div>"}}if(U&&(i+="</div>"),i+="</div></div></div>",i+="<div class='hostTb3 hide' style='margin-top:-10px;'>",Re&&Re.level>=10&&!r.comp&&!r.restrict&&(i+="<div class='setHed' style='margin-bottom:15px'>Social</div>",i+="<div class='setBodH'><div class='settNameSmall'>Share on Hub <label class='switch'><input id='shareToHub' type='checkbox'><span class='slider'></span></label></div></div>"),Re&&!r.comp&&!r.restrict){i+="<div class='setHed' style='margin-bottom:15px;'>Server Upgrades</div><div class='setBodH'>";for(var W=0;W<u.serverUpg.length;++W)i+="<div class='settNameSmall'>"+u.serverUpg[W].name+" <label class='switch'><input id='servUp"+u.serverUpg[W].varN+"' type='checkbox' onchange='windows[7].updateSet("+u.serverUpg[W].cost+",this)'><span class='slider'></span></label><span style='float:right;margin-right:10px;color:rgba(255,255,255,0.5)'>"+u.serverUpg[W].cost+" <b style='color:#fff'>KR</b></span></div>";i+="</div>"}r.comp||r.restrict||(i+="<div class='setHed' style='margin-bottom:15px;'>Privacy</div>",i+="<div class='setBodH'><div class='settNameSmall'>"+S.t("server.config.private")+" <label class='switch'><input id='makePrivate' type='checkbox'><span class='slider'></span></label></div>",i+="<div class='settNameSmall'>Server Password<input id='passCode' value='' type='text' placeholder='Enter Password'style='border-radius:6px;border:none;background:#eee;padding:6px;padding-bottom:6px;float:right;margin-top:5px;margin-bottom:5px;' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false'></div></div>",i+="<div id='hostGamePreset' style='text-align:left;margin-top:20px;margin-bottom:10px;display:"+(o||r.comp?"none":"block")+"'>"+windows[7].genPresets(!0)+"</div>"),i+="</div>"}else windows[7].presets[Pr.name]||(windows[7].presets[Pr.name]={},fe.getMapPreset(Pr.name,this.presetLoaded));return i+="<div style='margin-top:40px'></div>",i+="<div id='stickyHostH'>Server Cost <span id='hCustCost' style='float:right;color:rgba(255,255,255,0.6)'>None</span></div>"},presetAction:function(e){if(0==e&&"Select"==presetSelect.value)return;if(2==e&&"Select"==presetSelect.value)return;let t=getSavedVal("krk_hostPresets");t=t?JSON.parse(t):{};var i=presetName.value.length?presetName.value:"Select"==presetSelect.value?"Preset1":presetSelect.value;if(2==e)t[presetSelect.value]&&delete t[presetSelect.value],saveVal("krk_hostPresets",JSON.stringify(t));else{let d=1==e?{}:t[presetSelect.value];for(var n,s=0;s<xe.length;s++)xe[s],(n=document.getElementById("gameMap"+s))&&(1==e?d["gameMap"+s]=n.checked:"gameMap"+s in d&&(n.checked=d["gameMap"+s]));for(s=0;s<ne.length;s++)(!ne[s].preventCustomGames||Re&&Re.isDev)&&(n=document.getElementById("gameMode"+s))&&(1==e?d["gameMode"+s]=n.checked:"gameMode"+s in d&&(n.checked=d["gameMode"+s]));for(s=0;s<ve.classConfig.length;s++)ve.classConfig[s],(n=document.getElementById("gameClass"+s))&&(1==e?d["gameClass"+s]=n.checked:"gameClass"+s in d&&(n.checked=d["gameClass"+s]));for(s=0;s<u.serverConfig.length;s++)Ee=u.serverConfig[s],(n=document.getElementById("customS"+Ee.varN))&&(1==e?d[Ee.varN]=n[Ee.bool?"checked":"value"]:Ee.varN in d&&(Ee.bool||Ee.input||(document.getElementById("customSet"+s).textContent=d[Ee.varN]),n[Ee.bool?"checked":"value"]=d[Ee.varN]));for(var a=!1,r=0;r<ve.weapons.length;r++)for(s=0;s<u.weaponConfig.length;s++)if(Ee=u.weaponConfig[s],null!=ve.weapons[r][Ee.varN]&&(n=document.getElementById("customW"+r+Ee.varN))){var o=Ee.varN+"_W_"+r;1==e?d[o]=n[Ee.bool?"checked":"value"]:o in d&&(Ee.bool||Ee.input||updateSliderLabel2(0,r,s,d[o]),n[Ee.bool?"checked":"value"]=d[o],d[o]!=ve.weapons[r][Ee.varN]&&(a=!0))}a&&windows[7].toggleWep(!0);var l=!1;for(r=0;r<ve.classes.length;r++)for(s=0;s<u.classConfig.length;s++)if(Ee=u.classConfig[s],null!=ve.classes[r][Ee.varN]&&(n=document.getElementById("customC"+r+Ee.varN))){o=Ee.varN+"_C_"+r;1==e?d[o]=n[Ee.bool?"checked":"value"]:o in d&&(Ee.bool||Ee.input||updateSliderLabel2(1,r,s,d[o]),n[Ee.bool?"checked":"value"]=d[o],d[o]!=ve.classes[r][Ee.varN]&&(l=!0))}l&&windows[7].toggleCls(!0);var c=!1;for(r=0;r<ve.effects.length;r++)for(s=0;s<u.effectConfig.length;s++)if(Ee=u.effectConfig[s],null!=ve.effects[r][Ee.varN]&&(n=document.getElementById("customE"+r+Ee.varN))){o=Ee.varN+"_E_"+r;1==e?d[o]=n[Ee.bool?"checked":"value"]:o in d&&(Ee.bool||Ee.input||updateSliderLabel2(2,r,s,d[o]),n[Ee.bool?"checked":"value"]=d[o],d[o]!=ve.effects[r][Ee.varN]&&(c=!0))}c&&windows[7].toggleEffects(!0),1==e?(Pr&&(d.commMap=Pr.name),(n=document.getElementById("rawMapData"))&&""!=n.value&&(d.rawMapData=n.value),(n=document.getElementById("makePrivate"))&&0!=n.checked&&(d.makePrivate=n.checked),(n=document.getElementById("krRewards"))&&0!=n.checked&&(d.krRewards=n.checked),t[i]=d,saveVal("krk_hostPresets",JSON.stringify(t))):("commMap"in d&&(document.getElementById("commMap").textContent=Pr.name=d.commMap),"rawMapData"in d&&(document.getElementById("rawMapData").value=d.rawMapData),"makePrivate"in d&&(document.getElementById("makePrivate").checked=d.makePrivate),"krRewards"in d&&(document.getElementById("krRewards").checked=d.krRewards))}windows[7].genPresets()},genPresets:function(e=!1){let t=getSavedVal("krk_hostPresets");t=t?JSON.parse(t):{};var i="<div class='setHed' style='margin-bottom:15px;'>"+S.t("windows.host.preset")+"</div><div class='setBodH' style='padding-top:20px;padding-bottom:15px;'>";i+="<span class='settNameSmall'><input id='presetName' type='text' class='formInput' placeholder='"+S.t("windows.host.preset.name")+"' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' style='border:none;background:#eee;padding-bottom:6px;float:left;margin-top:5px;margin-bottom:5px;'><select id='presetSelect' style='border-radius:6px;margin-left:10px;border:none;background:#eee;;padding:6px;padding-bottom:6px;margin-top:5px;margin-bottom:5px;'><option selected>Select</option>";for(let e in t)i+="<option>"+e+"</option>";return i+="</select>",i+="<div class='hostPresetBtn' onclick='windows[7].presetAction(2)'>"+S.t("generic.delete")+"</div><div class='hostPresetBtn' onclick='windows[7].presetAction(1)'>"+S.t("generic.save")+"</div><div class='hostPresetBtn' onclick='windows[7].presetAction(0)'>"+S.t("generic.load")+"</div></span></div>",e?i:void(hostGamePreset.innerHTML=i)}},{header:S.t("windows.spray.header"),label:"spray_selection",width:877,height:"calc(100% - 300px)",sticky:!0,dark:!0,hideScroll:!0,gen:function(){var e=[],t="",i="<div id='itemSearchH'><div class='custBack' onclick='playSelect(0.1);goBackWindow(2)' onmouseenter='playTick();'><span class='material-icons custBackArr'>arrow_back</span></div><input id='itemSearch' type='text' placeholder='Search Item' onkeyup='searchItems(this, &quot;noBtnCard&quot;)'><div class='winClose' onclick='playSelect(0.1);closWind()' onmouseenter='playTick();'><span class='material-icons winCloseArr'>close</span></div></div><div id='skinList' style='overflow-y: scroll;height: calc(100% - 95px);'><div class='noBtnCard blackShad' onclick='selectSpray(-2)' style='height:158px;border: 5px solid lightgrey'>"+S.t("generic.random")+"<div class='itemOwn' style='opacity:0;''>by ???</div><img draggable='false' style='margin-top:10px;width:110px;' class='noBtnImgC skinSil' src='"+ae.assetsUrl("/textures/sprays/0.png")+"' onmouseenter='playTick()'><div class='skinRandom blackShad' style='top: 80px;'>?</div></div>",n=[...bs(Re,!0)].sort((function(e,t){return(null!=t.ind&&ve.store.skins[t.ind]?null==ve.store.skins[t.ind].rarity?-1:ve.store.skins[t.ind].rarity||0:0)-(null!=e.ind&&ve.store.skins[e.ind]?null==ve.store.skins[e.ind].rarity?-1:ve.store.skins[e.ind].rarity||0:0)}));n.sort((function(e,t){return~~(Wt.indexOf(t.ind)>=0)-~~(Wt.indexOf(e.ind)>=0)}));for(var s=0;s<n.length;++s)if((Ee=ve.store.skins[n[s].ind])&&Ee.type==Te.SPRAY){var a=Wt.indexOf(Ee.index)>=0;Ee.frames&&-1==e.indexOf(Ee.frames)&&e.push(Ee.frames),i+="<div class='noBtnCard"+(Ee.rarity==o.a.CONTRABAND?"":" blackShad")+(!Ee.free&&ce.rarityAnim&&ve.store.rarities[Ee.rarity].animate?" rainbow":"")+"' style='height:158px;"+(Ee.free?"border: 5px solid lightgrey":"color:"+ve.store.rarities[Ee.rarity].color+";border: 5px solid "+ve.store.rarities[Ee.rarity].color)+"'onclick='selectSpray("+n[s].ind+");cancelTip()' data-index='"+Ee.index+"' onmouseover='createTip(this)' onmouseout='cancelTip()'>"+(Ee.free?"":"<div class='sprayCnt'>x"+n[s].cnt+"</div>")+Ee.name+"<div class='itemOwn'>"+(Ee.free?S.t("windows.spray.default"):Ee.creator?"by "+Ee.creator:S.t("windows.spray.spin"))+"</div><div draggable='false' class='sprayImg' onmouseenter='playTick()' style='background: url(&quot;"+Ee.thumbnail+"&quot;) -1px;"+ae.getFrameAnim(Ee,"sprayAnm")+"'></div><div class='selctInfoBtn' onmouseenter='playTick()'onclick='viewItem("+Ee.index+")'>?</div><div class='selctFavBtn material-icons' onmouseenter='playTick()' data-col='"+(a?"yellow":"white")+"' data-icon='"+(a?"star":"star_border")+"' onclick='favItem(this, "+Ee.index+")'></div></div>"}if(i+="</div>",e.length){t+="<style>";for(s=0;s<e.length;s++)t+="@keyframes sprayAnm"+e[s]+" {100%{background-position:-"+110*e[s]+"px}}";t+="</style>"}return t+i},close:()=>cancelTip(),clear:()=>{ea(window.event),selectSpray(-1,!0,!0)}},{header:S.t("windows.maps.header"),label:"games",width:1950,maxH:"calc(100% - 325px)",yPos:48,dark:!0,popup:!0,playerData:{},hostType:null,updatePlayers:function(){if(Object.keys(this.playerData).length)for(var e in this.playerData){var t=document.getElementById("pcnt_"+e);t&&t.firstChild&&(t.firstChild.textContent=this.playerData[e])}else fetchMatches((function(e){e&&(windows[9].playerData=e,windows[9].updatePlayers())}))},update:function(){updateWindow(10),this.updatePlayers()},post:function(){ta(this.hostType)},searchId:u.mapTabs.findIndex((e=>e.search)),searchMaps:function(){var e=document.getElementById("mpCat"),t=e.options[e.selectedIndex].value;searchResultsMA.innerHTML="Loading...",fe.searchMap(mpSrch.value,t,pr)},searchResp:function(e){var t="";e.length?(t+="<div style='height:10px'></div>",t+=ia(e,"map",this.searchId,this.hostType)):t=S.t("windows.maps.none"),document.getElementById("searchResultsMA")&&(document.getElementById("searchResultsMA").innerHTML=t),this.updatePlayers(),ta(this.hostType)},loadMore:function(e){this.listData[this.tabIndex].waiting||(e&&(e.className="loadMoreW",e.innerHTML="Loading..."),this.listData[this.tabIndex].waiting=!0,this.listData[this.tabIndex].loadInd+=1,fe.listMaps(this.tabIndex,this.listData[this.tabIndex].loadInd,Re?Re.id:null,hr))},mapsLoaded:function(e,t,i){if(mapList)if(this.listData[t].waiting=!1,e&&e.length)if(i)this.listData[t].dat||(mapList.innerHTML=i,this.listData[t]=null);else{var n=ia(2==t?ae.shuffleArray(e):e,"map",t,this.hostType);this.listData[t].dat=(this.listData[t].dat||"")+n,this.tabIndex==t&&this.update()}else this.listData[t].dat||(mapList.innerHTML=S.t("windows.maps.none"),this.listData[t]=null)},tabIndex:0,listData:{},switchTab:function(e){this.tabIndex!=e&&(this.tabIndex=e,this.update())},gen:function(){for(var e=u.mapTabs[this.tabIndex],t="<div class='bigMenTabs' style='margin-top:0px'>",i=0;i<u.mapTabs.length;++i)u.mapTabs[i].hide||(t+="<div class='bigMenTab"+(this.tabIndex==i?" bigMenTabA":"")+"' onclick='playSelect();"+(u.mapTabs[i].click?u.mapTabs[i].click:"windows[9].switchTab("+i+")")+"' onmouseenter='playTick(0.1);'>"+(u.mapTabs[i].txt||u.mapTabs[i].n)+"</div>");t+="</div>";var n="";if("Home"==e.n){this.listData[this.tabIndex]?this.listData[this.tabIndex].dat?(n=this.listData[this.tabIndex].dat,this.listData[this.tabIndex].waiting&&(n+="<div class='loadMoreW'>Loading...</div>")):n="<div class='loadMoreW'>Loading...</div>":(n="<div class='loadMoreW'>Loading...</div>",this.listData[this.tabIndex]={loadInd:0},fe.listMaps(this.tabIndex,0,Re?Re.id:null,hr));var s="";if(dd&&dd.length>=1){null==this.fetInd&&(this.fetInd=ae.randInt(0,dd.length-1));var a=dd[this.fetInd],r=u.fetMapVids[a.map_name];a.map_videolink&&""!=a.map_videolink&&(r=a.map_videolink),s="<div class='bigMFeatHold' style='background-image:linear-gradient(to right, black, rgba(0, 0, 0, 0.6)),url("+ae.userAssetsUrl("/m"+a.map_id+"/thumb.png")+");width:1300px;display:inline-block;'><div id='bigMFeatName'>"+a.map_name+"</div><div id='bigMFeatVbar'><span style='color:#fff;'>"+ae.commaNumber(a.map_pl)+"</span><span class='material-icons' style='margin-top:-8px;margin-left:0px;font-size:46px;vertical-align:middle;color:rgba(255,255,255,0.5);margin-right:10px;'>play_arrow</span>"+ae.commaNumber(a.map_votes)+"<span class='material-icons' style='margin-left:10px;font-size:33px;vertical-align:top;color:rgba(255,255,255,0.5);'>thumb_up</span><div style='color:#7d7d7d;margin-left:20px;margin-top:-12px;display:inline-block;vertical-align:middle;'>by <a>"+a.creatorname+"</a></div></div><div id='bigMFeatDesc'>"+a.map_description+"</div><iframe id='bigMFeatVid' width='100px' height='100px' src='https://www.youtube.com/embed/"+r+"?autoplay=1&mute=1' frameborder='0' allowfullscreen></iframe><div id='bigMFeatPBtn' onclick='openURL(&quot;/?play="+a.map_name+"&quot;, 1)' style='color:#fff !important;'>Play Now</div><div id='bigMFeatHBtn' onclick='selectHostMap(&quot;"+a.map_name+"&quot;,null,&quot;"+a.map_id+"&quot;)'>Host Server</div></div>"}return"<div style='margin-top:15px;margin-bottom:15px'>"+t+"</div>"+s+("<div class='bigMFeatHold' style='margin-left:20px;background:#0b0b0b;display:inline-block;width:580px;vertical-align:top;'><div class='biMFeatInfH'>Create your own game!</div>"+(window.canShowKrunkerEditor?"<div class='biMFeatInfB' onclick='openURL(`./editor.html`)'>Open Editor</div>":"")+"<div class='biMFeatInfB' onclick='openURL(`./games`)'>Discover Games</div>"+(window.canShowExternalLinks?"<div class='biMFeatInfB' onclick='openURL(`https://discord.com/invite/Kfypyp5`)'>Dev Community</div>":"")+"</div>")+"<div id='mapList'>"+n+"</div>"}if(e.search){n="<input type='text' id='mpSrch' class='smlInput' placeholder='Game Name or Keyword' onkeydown='if(window.event.keyCode==13)windows[9].searchMaps()' />",n+="<select id='mpCat'><option value='-1'>All</option>";for(i=0;i<u.mapCats.length;i++)n+="<option value='"+i+"'>"+u.mapCats[i]+"</option>";n+="</select>",n+="<div class='searchBtn' onclick='windows[9].searchMaps()'><span class='material-icons' style='color:#fff;font-size:45px;margin-bottom:-30px;line-height:75px'>search</span></div><div style='color:rgba(0,0,0,0.5);margin-top:10px' id='searchResultsMA'></div>"}else this.listData[this.tabIndex]?this.listData[this.tabIndex].dat?(n=this.listData[this.tabIndex].dat,this.listData[this.tabIndex].waiting?n+="<div class='loadMoreW'>Loading...</div>":e.sendID||e.noPages||(n+="<div class='loadMoreD' onclick='windows[9].loadMore(this)'>Load More</div>")):n="<div class='loadMoreW'>Loading...</div>":(n="<div class='loadMoreW'>Loading...</div>",this.listData[this.tabIndex]={loadInd:0},fe.listMaps(this.tabIndex,0,Re?Re.id:null,hr));var o="";return"My Games"==e.n&&(o+="<div class='setBodH'>"+(window.canShowKrunkerEngine?"<div class='settName'>Publish or create a game<a style='float:right' href='./editor.html' target='_blank'>Open Editor</a></div><div class='settName'>Learn how to make a game<a style='float:right' href='//docs.krunker.io' target='_blank'>Open Documentation</a></div>":"")+"</div>"),"<div style='margin-top:15px;margin-bottom:15px'>"+t+"</div>"+o+"<div id='mapList'>"+n+"</div>"}},{header:S.t("windows.publish.map.header"),label:"unused",gen:function(){return""}},{header:"",label:"unused",gen:function(){return""}},{header:S.t("windows.clans.header"),label:"clan",clanData:null,width:1e3,maxH:"calc(100% - 320px)",kickReq:function(e,t){confKickClan(e,t)},kick:function(e){if(me.send("cln",5,e),this.clanData&&this.clanData.members){for(var t=this.clanData.members.length-1;t>=0;--t)this.clanData.members[t].i==e&&this.clanData.members.splice(t,1);updateWindow(13)}},sendReq:function(e,t){var i=document.getElementById("clanErr");i&&(i.style.color="rgba(0,0,0,0.6)",i.innerHTML=S.t("generic.loading"));var n=(i=document.getElementById("clanInp"+e))?i.value:null;me.send("cln",e,t||n||1)},updReq:function(e,t,i){me.send("clnR",t,i),this.clanData.members&&1==i&&this.clanData.members.push({p:this.clanData.requests[e].player_name}),this.clanData.requests.splice(e,1),updateWindow(13)},delReq:function(){confDelClan(Re&&this.clanData.clan_playerid==Re.id)},del:function(){this.clanData=null,Re&&(Re.clan=null),showWindow(5)},updRolR:function(e){},updRol:function(e){var t=document.getElementById("clanRolD"+e);Bs("Please Wait..."),me.send("cln",6,e,{r:parseInt(t.options[t.selectedIndex].value||0)})},chngFunds:function(e){var t=clanFundsIn.value||0;t&&(Bs("Please Wait..."),me.send("cln",7,parseInt(t),{wd:e}))},calcFee:function(e){if(e){var t=e.value||0;t<0&&(t=0),t&&(e.value=t);var i=Math.floor(.1*t);(e=document.getElementById("clnFeeVal"))&&(e.innerHTML=i?"<span style='color:rgba(255,255,255,0.7)'>-"+ae.commaFormatNum(i)+" <span style='color:#fff'>KR</span></span>":"None")}},mangFunds:function(){var e=Re&&this.clanData.clan_playerid==Re.id,t="<div style='font-size:21px;color:#fff'>Manage Clan Funds<span style='float:right;color:rgba(255,255,255,0.6)'>"+ae.commaNumber(this.clanData.clan_funds||0)+" <span style='color:#fff'>KR</span></span></div><div style='margin-top:20px;font-size:18px;color:#FFF'>Deposit Fee<span id='clnFeeVal' style='float:right;color:rgba(255,255,255,0.7)'>None</span></div><input type='number' oninput='windows[12].calcFee(this)' placeholder='Enter KR Amount' id='clanFundsIn'></input><div class='clanFndB' style='background-color:"+(e?"#fc5a4e":"#6e6e6e")+"' "+(e?"onclick='windows[12].chngFunds(1)'":"")+">Withdraw</div><div class='clanFndB' style='margin-left:16px;background-color:#4ca9f5' onclick='windows[12].chngFunds(0)'>Deposit</div>";genericPopup(t,"contPop")},declinePop:function(){if(Re&&this.clanData.clan_playerid==Re.id){contPopup("<div style='color:#fff;font-size:20px;position:relative;margin-bottom:15px;'>Are you sure you want to Decline All clan requests?</div><div id='confirmBtn' onclick='windows[12].decAll();' onmouseover='playTick(0.1)'>YES</div><div id='declineBtn' onclick='clearPops()' onmouseover='playTick(0.1)'>NO</div>","433px","2px solid #ffffff47")}},decAll:function(){clearPops(),Re&&this.clanData.clan_playerid==Re.id&&(me.send("clnRA"),this.clanData.requests.length=0,updateWindow(13))},discordPop:function(){if(Re&&this.clanData.clan_playerid==Re.id){contPopup("<div style='font-size:20px;color:#fff'><div style='margin-top: 3px;font-size: 22px;color: rgba(255, 255, 255, 0.7);'>Discord Link:<input type='text' id='clanDiscordLink' class='inputGrey2' style='width: 300px;'></div><div class='mapFndB' onclick='windows[12].updateDis()' onmouseover='playTick(0.1)' style='background-color:#fc5a4e;width: 569px;margin-top: 10px;'>Update</div></div>","588px")}else this.clanData.clan_link4&&window.open("https://discord.gg/"+this.clanData.clan_link4)},updateDis:function(){if(Re&&this.clanData.clan_playerid==Re.id){var e=document.getElementById("clanDiscordLink");if(!(e&&e.value&&/discord(?:\.com|app\.com|\.gg)\/(?:invite\/)?([a-zA-Z0-9\-]{2,32})/gim.exec(e.value)))return zs(null,"Invalid Discord");me.send("cln",9,e.value)}},resp:function(e,t,i,n){if(7==n)i&&t?(Re.funds=t.pf||0,updateMenuAccountData(),this.clanData.clan_funds=t.cf||0,updateWindow(13),zs("SUCCESS",null,"Success")):zs(null,e||"Error");else if(8==n)i&&t?(this.clanData.members[t.i]&&(this.clanData.clan_funds=t.cf||0,this.clanData.members[t.i].st=1,this.clanData.members[t.i].cr=t.cr,updateWindow(13)),zs("SUCCESS",null,"Success")):zs(null,e||"Error");else{if(6==n){if(i&&t){var s=this.clanData.members.find((e=>e.i==t.i));s&&(s.r=t.r,updateWindow(13)),zs("SUCCESS",null,"Success")}else zs(null,e||"Error");return}var a=document.getElementById("clanErr");e&&a?(a.style.color=i?"rgba(0,0,0,0.6)":"rgba(255,0,0,0.6)",a.innerHTML=e):t&&(Re&&(Re.clan=t.clan_name),this.clanData=t,this.clanData.members=this.clanData.members||[],this.clanData.requests=this.clanData.requests||[],updateWindow(13))}},tabIndex:0,switchTab:function(e){windows[12].tabIndex=e,updateWindow(13)},gen:function(){if(!Re)return $s(null,S.t("windows.clans.login"),!0);if(!Re.clan)return"<div class='setHed' style='margin-top:-5px'>"+S.t("windows.clans.create")+"</div><input id='clanInp1' type='text' class='smlInput' maxlength='4' placeholder='"+S.t("windows.clans.name")+"' /><a class='clanSubmitBtn' style='margin-left:20px' onclick='windows[12].sendReq(1)'>"+S.t("generic.create")+"</a><div class='setHed'>"+S.t("windows.clans.join")+" <a href='./social.html?p=leaders&q=clans' target='_blank' class='menuLink' style='float:right'>"+S.t("windows.clans.view")+"</a></div><input id='clanInp2' type='text' class='smlInput' maxlength='5' placeholder='"+S.t("windows.clans.name")+"' /><a class='clanSubmitBtn' style='margin-left:20px' onclick='windows[12].sendReq(2)'>"+S.t("generic.submit")+"</a><div id='clanErr' style='margin-top:10px'></div>";me.send("vcln");var e="<div style='height:15px;'></div>";e+="<div class='bigMenTabs'>";for(var t=0;t<u.clanTabs.length;++t)e+="<div class='bigMenTab"+(this.tabIndex==t?" bigMenTabA":"")+"' style='font-size:16px' onmouseenter='playTick(0.1);' onclick='playSelect();windows[12].switchTab("+t+")'>"+u.clanTabs[t]+"</div>";if(e+="</div>",e+="<div id='clanErr' style='margin-top:0px;color:rgba(0,0,0,0.5)'>",Re&&Re.clan&&!this.clanData)this.sendReq(3),e+=S.t("generic.loading");else if(0==this.tabIndex){var i=this.clanData.clan_score||0,n=u.rankVar*Math.sqrt(i),s=Math.floor(n),a=Math.round(100*(n-s)),r=(s=Math.max(1,s))>1?Math.pow(s/u.rankVar,2):0,o=parseInt(Math.pow((s+1)/u.rankVar,2)-r);r=parseInt(i-r),e+="<div class='setHed' style='margin-top:0px'><a target='_blank' href='/social.html?p=clan&q="+Re.clan+"'>"+S.t("windows.clans.page",Re.clan)+"</a><a style='float:right' href='javascript:;' onclick='windows[12].delReq()' class='menuLink'>"+(Re&&this.clanData.clan_playerid==Re.id?S.t("generic.delete"):S.t("generic.leave"))+"</a></div><div class='setBodH'><div class='settName'>Rank<span class='floatR'>0</span></div><div class='settName'>Clan Discord<a style='float:right' href='javascript:;' onclick='windows[12].discordPop()' class='menuLink'>"+(Re&&this.clanData.clan_playerid==Re.id?"Update Link":"Link Here")+"</a></div><div class='settName'>Bank<span class='floatR'><span style='color:rgba(0,0,0,0.4)'><a href='javascript:;'  onclick='windows[12].mangFunds()' class='menuLink'>"+ae.commaNumber(this.clanData.clan_funds||0)+"</a></span> KR</span></div><div class='settName'>"+S.t("generic.level")+"<span class='floatR'>"+s+"</span></div><div class='settName'>Total Score<span class='floatR'>"+ae.commaNumber(i)+"</span></div><div class='xpBar' style='margin-bottom:15px;margin-top:20px'><div class='xpBarB' style='width:"+a+"%'></div><span class='xpBarV'>"+ae.commaNumber(r)+" / "+ae.commaNumber(o)+"</span></div></div>",e+='<div style="text-align: center;">\n\t\t\t\t<span class="material-icons" style="color: var(--yellow);font-size: 35px;margin-right: 10px;vertical-align: text-bottom;">\n\t\t\t\t\twarning_amber\n\t\t\t\t</span>\n\t\t\t\tClan members will be limited to 100 in a Future Season\n\t\t\t</div>'}else if(1==this.tabIndex){var l=Re&&this.clanData.clan_playerid==Re.id;this.clanData.members.sort((function(e,t){return t.s-e.s}));for(var c=u.clanRoles.length-1;c>=0;--c){var d=u.clanRoles[c],h=0,p="<div class='setBodH'>";for(t=0;t<this.clanData.members.length;++t)if(g=this.clanData.members[t],this.clanData.clan_playerid==g.i&&2==d.perms||g.r==c&&this.clanData.clan_playerid!=g.i){h++;for(var f="<select class='clanRolD' onchange='windows[12].updRol("+g.i+", this)' id='clanRolD"+g.i+"'>",m=u.clanRoles.length-1;m>=0;--m)2!=u.clanRoles[m].perms&&(f+="<option value='"+m+"' "+(g.r==m?"selected":"")+">"+u.clanRoles[m].name+"</option>");f+="</select>",p+="<div class='settName'>"+(g.su?"<i class='material-icons' style='color:"+te.premium+";margin-top:-8px;font-size:28px;vertical-align:middle;margin-right:2px'>beenhere</i>":"")+(g.ve?"<i class='material-icons' style='color:"+te.verified.player+";margin-top:4px;font-size:28px;vertical-align:baseline;margin-right:2px'>check_circle</i>":"")+"<a target='_blank'href='/social.html?p=profile&q="+g.p+"' "+(g.h?"style='color:#E85656'":"")+">"+g.p+"</a>"+(l&&this.clanData.clan_playerid!=g.i?"<div style='float:right;'><i style='font-size:40px;color:rgba(255,0,0,0.9)'  class='material-icons h' onclick='windows[12].kickReq(&quot;"+g.p+"&quot;,"+g.i+")'>clear</i>"+f+"</div>":"")+"</div>"}p+="</div>",0==h&&(p="No "+d.name+"s"),e+="<div class='setHed' style='margin-top:20px'>"+d.name+"s<span style='float:right;color:rgba(255,255,255,0.4)'>"+h+(d.max?"/"+d.max:"")+" <span style='color:#fff'>Members</span></span></div>"+p}}else if(2==this.tabIndex){e+="<div class='setHed' style='margin-top:10px;'>Top Scorers <span style='float:right;color:rgba(255,255,255,0.4)'>Last 7 Days</span></div>",this.clanData.members.sort((function(e,t){return t.s7-e.s7})),e+="<div class='setBodH'>";var g;for(t=0;t<this.clanData.members.length;++t)e+="<div class='settName'>"+((g=this.clanData.members[t]).su?"<i class='material-icons' style='color:"+te.premium+";margin-top:-8px;font-size:28px;vertical-align:middle;margin-right:2px'>beenhere</i>":"")+(g.ve?"<i class='material-icons' style='color:"+te.verified.player+";margin-top:4px;font-size:28px;vertical-align:baseline;margin-right:2px'>check_circle</i>":"")+"<a target='_blank'href='/social.html?p=profile&q="+g.p+"' "+(g.h?"style='color:#E85656'":"")+">"+g.p+"</a><div style='float:right;color:rgba(255,255,255,0.8)'>"+ae.commaNumber(g.s7)+"</div></div>";e+="</div>"}else if(3==this.tabIndex){e+="<div class='setHed' style='margin-top:18px'>Manage Requests <div id='clanDeclineAll' onclick='windows[12].declinePop()'>Decline All</div><span style='float:right;color:rgba(255,255,255,0.4)'>"+this.clanData.requests.length+"</span></div><div class='setBodH'>";for(t=0;t<this.clanData.requests.length;++t)e+="<div class='settName'><a target='_blank' href='/social.html?p=profile&q="+this.clanData.requests[t].player_name+"'>"+this.clanData.requests[t].player_name+"</a><span style='float:right'><i style='font-size:40px;color:rgba(255,0,0,0.9)'  class='material-icons h' onclick='windows[12].updReq("+t+","+this.clanData.requests[t].cr_playerid+", 0)'>clear</i><i style='font-size:40px;color:rgba(0,255,0,0.9);margin-left:10px' class='material-icons h' onclick='windows[12].updReq("+t+","+this.clanData.requests[t].cr_playerid+", 1)'>done</i></span></div>";e+="</div>",this.clanData.requests.length||(e+="<div style='margin-top:10px;color:rgba(255,255,255,0.4)'>"+S.t("windows.clans.requests.none")+"</div>")}return e+="</div>"}},{header:S.t("windows.store.header"),label:"shop_crafting",width:1300,maxH:"calc(100% - 290px)",yPos:48,dark:!0,popup:!0,resp:function(e,t,i,n){if(e)zs(null,e);else{var s=ve.store.premium[n];s&&logEventFRVR("item_flow",{item:"krunkers",flow_type:"sink",amount:s.price||0,item_context:"premium_"+s.val+"days",wallet:Re?Re.funds:0}),Re.premiumT=i,Mi(t),Is(),updateWindow(null,!0),zs("SUCCESS")}},subTab:0,subTabs:3,subTabT:3e3,updSubTab:function(e){if(0==this.tabIndex&&(this.subTabT-=e,this.subTabT<=0)){this.subTabT=3e3,this.subTab++,this.subTab>=this.subTabs&&(this.subTab=0);for(var t=document.querySelectorAll(".windowSubTabs"),i=0;i<t.length;i++)if(t[i].style.display=i==this.subTab?"":"none",i==this.subTab){var n=t[i].querySelector(".shopMainSellTbs");n&&(n.innerHTML=this.genSubBtns())}}},genSubBtns:function(){let e="";for(var t=0;t<this.subTabs;++t)e+="<div class='shpMTbsI' style='background:"+(t==this.subTab?"#fff":"rgba(255,255,255,0.4)")+"' onclick='event.stopPropagation();windows[13].subTabT=5000;windows[13].subTab="+t+";updateWindow(14);'></div>";return e},tabIndex:0,switchTab:function(e){return 5==e?window.open("/social.html?p=market"):4==e?voucherPopup():(3==e&&logEventFRVR("shop_action"),windows[13].tabIndex=e,void updateWindow(14))},purchase:function(e){if(e)logEventFRVR("shop_action"),windows[13].tabIndex=3,clearPops(),showWindow(14,!0);else{var t="<div style='color:#fff;font-size:20px;position:relative;margin-bottom:15px;'>"+S.t("funds.out")+"</div><div id='confirmBtn' style='width: calc(100% - 20px)' onmouseover='playTick(0.1)' onclick='windows[13].purchase(1)'>Purchase More</div>";contPopup(t,"513px")}},directPurchase:function(e){showPurchase(e),XsollaPopup()},premium:function(){windows[13].tabIndex=2,showWindow(14,!0)},craftDatRes:function(e){e&&e.length&&(e=e.sort((function(e,t){return t&&e?(parseFloat(t.JUNK)||0)-parseFloat(e.JUNK||0):0}))),windows[13].craftData={dat:e,err:!e},updateWindow(14)},craftRes:function(e,t,i){if(t){for(var n,s=0;s<windows[13].craftData.dat.length;++s)(n=windows[13].craftData.dat[s]).SID==e&&(n.EXP=1e3*n.DUR,n.STATORD=1,logEventFRVR("item_flow",{item:"junks",flow_type:"sink",amount:n.JUNK||0,item_context:"junkyard",item_context_details:"item_"+n.SOUT,wallet:Re?Re.junk:0}));clearPops(),updateWindow(14)}else zs(null,i||"Error")},startCraft:function(e){he.play("craft_0",.4),Bs("Please Wait..."),me.send("crft",e)},sendCraft:function(e){var t=windows[13].craftData.dat.find((t=>t&&t.SID==e));if(t){for(var i,n=ve.store.skins[t.SOUT],s=ve.store.rarities[n.rarity].color,a="",r=(t.SIN||"").split(","),o=0;o<r.length;o+=2)(i=ve.store.skins[r[o]])&&(a+="<div class='crftRecSml' style='"+(o?"":"margin-left:-5px;")+"border: 2px solid "+ve.store.rarities[i.rarity].color+";background-image:url("+i.thumbnail+"'></div>");var l="<div style='color:#979797;'>Junk<span style='float:right;color:#e5e5e5;'>-"+parseFloat(t.JUNK||0).toFixed(2)+"<span class='material-icons' style='color:#cc51f8;font-size:30px;vertical-align:middle;margin-top:-7px;margin-left:5px;margin-right:-5px;'>plumbing</span></span></div><div style='color:#979797;'>Materials<div style='float:right;'>-"+a+"</div></div><div style='color:#979797;'>Craft time<span style='float:right;color:#e5e5e5;'>"+ae.getReadableTime(1e3*t.DUR)+"</span></div>",c="<div class='pubHed'>Craft <span style='color:"+s+"'>"+n.name+"</span></div><div style='color:#fff;font-size:20px;position:relative;margin-bottom:15px;'>"+l+"</div><div id='confirmBtn' onclick='logBtnFRVR(`craft_item_confirm`);windows[13].startCraft("+t.SID+")' onmouseover='playTick(0.1)'>Craft</div><div id='declineBtn' onclick='clearPops()' onmouseover='playTick(0.1)'>Cancel</div>";genericPopup(c,"confPremiumPop")}},craftMenu:function(){windows[13].tabIndex=6,showWindow(14,!0)},viewTickets:function(){var e=Re?Re.skins.filter((e=>e&&ve.store.skins[e.ind]&&ve.store.skins[e.ind].type==Te.TICKET)):[];if(!e.length)return zs(null,"You don't have any Spin Tickets!");for(var t='<div><div class="popHeader" style="margin-bottom: 30px;">Spin Tickets</div>',i=0;i<e.length;i++){Ee=ve.store.skins[e[i].ind];var n=ve.store.rarities[Ee.rarity||0];t+='<div class="ticketCard" onmouseenter="playTick()" onclick="playSelect();prizeWheel(null, '+e[i].ind+");cancelTip()\"\n\t\t\t\tdata-index='"+e[i].ind+"' onmouseover='createTip(this)' onmouseout='cancelTip()'\n\t\t\t\tstyle=\"background-image:url("+Ee.thumbnail+");border-color:"+n.color+'!important">\n\t\t\t\t<div class="ticketCount" style="width: unset;top:2px;right: 2px;color:'+n.color+'">x'+e[i].cnt+'</div>\n\t\t\t\t<div class="ticketText" style="color:'+n.color+'!important">Redeem</div>\n\t\t\t</div>'}t+="</div>",genericPopup(t,"ticketPop")},wrapAround:!1,columnsToScroll:5,updateScroll:function(e,t){var i=document.querySelector(".bundleCols");if(i){var n=i.children[0].scrollWidth,s=(i.children.length-1)*n-i.clientWidth,a=i.scrollLeft+e*(n*(t||this.columnsToScroll)),r=i.clientWidth+i.scrollLeft,o=!!this.wrapAround||a>0||-1!=e,l=!!this.wrapAround||r<s||1!=e;this.wrapAround&&r>=s&&1==e?a=0:this.wrapAround&&a<0&&-1==e&&(a=5e4),i.scrollLeft=a;var c=document.querySelectorAll(".bundleSliderBtn");c&&(c[0].classList.toggle("disabled",!o),c[1].classList.toggle("disabled",!l))}},updateScrollWheel:function(){this.updateScroll(window.event.deltaY>0?-1:1)},gen:function(){for(var e=ae.isKRSale()&&!d,t="<div id='shopHeader'><div style='height:15px;'></div><div class='bigMenTabs'>",i=0;i<u.shopTabs.length;++i)!window.canShowMarketplace&&u.shopTabs[i].includes("Marketplace")||(t+="<div class='bigMenTab"+(this.tabIndex==i?" bigMenTabA":"")+"' onclick='playSelect();windows[13].switchTab("+i+")'  onmouseenter='SOUND.play(`tick_0`,0.1)'  style='font-size:16px'>"+u.shopTabs[i]+"</div>");if(t+="</div></div>",0==this.tabIndex){var n="";if(n+='<div class="bundleSliderH">\n\t\t\t\t\t<div class="bundleSliderBtn disabled" onmouseenter="playTick(0.1);" onmousedown="playSelect(0.1);windows[13].updateScroll(-1);">\n\t\t\t\t\t\t<div class="bundleSliderArrow"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>',n+='<div class="bundleCols" onwheel="windows[13].updateScrollWheel();">',Ri){Ri=Ri.sort(((e,t)=>new Date(t.DATE).getTime()-new Date(e.DATE).getTime())),(!Re||Re&&Re.level<=u.bundleLvlSort)&&(Ri=Ri.sort(((e,t)=>e.PRICE-t.PRICE))),Ri=Ri.sort(((e,t)=>(t.OWNED?-1:1)-(e.OWNED?-1:1)));for(i=0;i<Ri.length;++i){var s=Ri[i],a=s.SKINS.split(",");n+='<div class="bundleCrd"'+(s.OWNED?' style="filter:grayscale(1)"':"")+'>\n\t\t\t\t\t\t<div class="bundleIcn" loading="lazy" onmouseover=\'playTick(0.1)\' onclick="playSelect(0.1);bundlePopup(true, false, '+s.ID+')" style="background-image: url('+ae.assetsUrl("/img/backgrounds/bundles/b_"+s.ID+".png")+');background-repeat: no-repeat;background-size: cover;">\n\t\t\t\t\t\t\t<div class="bundleItmNm">'+s.NAME+"</div>\n\t\t\t\t\t\t</div>",n+='<div class="bundleHl">';const e=a.length>4?3:4;for(let t=0;t<e;t++){var r=ve.store.skins[a[t]];n+=r?'<div class="bundleItmReq" onclick="viewItem('+a[t]+');" style="border:2px solid '+ve.store.rarities[r.rarity||0].color+";background-image:url("+r.thumbnail+')"></div>':'<div class="bundleItmReq"></div>'}a.length>4&&(n+='<div class="bundleItmReq">\n\t\t\t\t\t\t\t<div class="bundleItmMore">+'+(a.length-e)+"</div>\n\t\t\t\t\t\t</div>"),n+="</div>",n+='<div class="bundleItmBtn" onmouseover=\'playTick(0.1)\' onclick="playSelect(0.1);bundlePopup(true, false, '+s.ID+')">\n\t\t\t\t\t\t<div class="bundleItmBtnT">'+(s.OWNED?"Already Purchased":"BUY $"+s.PRICE)+"</div></div>",n+="</div>"}}n+="</div>",n+='<div class="bundleSliderH">\n\t\t\t\t\t<div class="bundleSliderBtn" onmouseenter="playTick(0.1);" onmousedown="playSelect(0.1);windows[13].updateScroll(1);">\n\t\t\t\t\t\t<div class="bundleSliderArrow right"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>',this.subTab=this.subTab||0;var o=this.genSubBtns();t+="<div style='text-align: center;'>",t+="<div id='shopMainSellB' class='windowSubTabs' onclick='playSelect();showWindow(6);'  style='background:linear-gradient(rgb(0 0 0 / 38%), #00000000, rgb(10 10 10 / 41%)),url("+ae.assetsUrl("/img/battlepass/bg_window_2.png",void 0,!0)+");background-size:100%;"+(0==this.subTab?"":"display:none;")+"'><div class='shopMainSellTbs'>"+o+"</div><div id='shopMainNav'>Unlock new Items!</div><div id='shopMainHedr'><div id='shopMainSubT' style=''>Checkout the</div>Battle Pass</div></div>",t+="<div id='shopMainSellB' class='windowSubTabs' onclick='playSelect();windows[13].directPurchase(1);'  style='background:linear-gradient(rgb(0 0 0 / 38%), #00000000, rgb(10 10 10 / 41%)),url("+ae.assetsUrl("/img/prem_bg.png")+");background-size:120%;"+(1==this.subTab?"":"display:none;")+"'><div class='shopMainSellTbs'>"+o+"</div><div id='shopMainNav'>Unlock new skins!</div><div id='shopMainHedr'><div id='shopMainSubT' style='color:var(--yellow)!important'>Purchase</div>600 KR</div></div>",t+="<div id='shopMainSellB' class='windowSubTabs' onclick='windows[13].craftMenu();'  style='background: linear-gradient(rgb(10 10 10 / 37%), #0000003b),url("+ae.assetsUrl("/img/backgrounds/junkyrd_0.png")+");background-size:cover;background-position-x: -600px;"+(2==this.subTab?"":"display:none;")+"'><div class='shopMainSellTbs'>"+o+"</div><div id='shopMainNav'>Craft new Items!</div><div id='shopJnkDsp'>"+(Re?parseFloat(Re.junk||0).toFixed(2):"0.00")+"<span class='material-icons' style='color:#cc51f8;font-size:38px;margin-left:8px;vertical-align:top;margin-right:-9px;'>plumbing</span></div><div id='shopMainHedr'><div id='shopMainSubT'>Enter the</div>Junkyard</div></div>";var l=ve.store.wheels[2],c=void 0!==l.ticketIndex,h=l.rarities.indexOf(l.rarities.filter((e=>e>0)).slice(-1).pop()),f=ve.store.getSpnItems(l,h,Re,l.season||u.currentSeason,l.bigRar);ae.yateShuffle(f);var m=ve.store.skins[f[0]].thumbnail;if(t+="<div id='shopSideSellB'"+(Re?"":" onclick='showWindow(5)'")+" onmouseenter='playTick()'\n\t\t\t\tstyle='color:"+(l.headCol||"#fff")+";border: 4px solid;text-shadow: 0px 0px 30px rgb(0 0 0);background: rgba(0, 0, 0, 0.4);height:361px!important'>",Re){var g=Re.skins.find((e=>e&&e.ind==l.ticketIndex));t+="<div class='shopActionOvrl'>",t+=l.multi?'<div class="shopActions">\n\t\t\t\t\t\t\t<div class="shopSubAction" onclick="playSelect();prizeWheel(2)" onmouseenter=\'playTick()\' style="font-size: 34px;!important">\n\t\t\t\t\t\t\t\t1x Spin <div style="color:'+(l.headCol||"#fff")+'">'+l.price+' KR</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="shopSubActionSep" style="background:'+(l.headCol||"#fff")+'"></div>\n\t\t\t\t\t\t\t<div class="shopSubAction" onclick="playSelect();prizeWheel(2, null, '+l.multi+')" onmouseenter=\'playTick()\' style="font-size: 34px;!important">\n\t\t\t\t\t\t\t\t'+l.multi+'x Spin <div style="color:'+(l.headCol||"#fff")+'">'+l.price*l.multi+" KR</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>":'<div class="shopAction" onclick="playSelect();prizeWheel(2)" onmouseenter=\'playTick()\'>\n\t\t\t\t\t\t\tSpend <div style="color:'+(l.headCol||"#fff")+'">'+l.price+" KR</div>\n\t\t\t\t\t\t</div>",t+='<div style=\'display: table-cell;\'><div class="shopActionSep" style="background:'+(l.headCol||"#fff")+'"></div></div>',t+='<div class="shopAction" onclick="playSelect();prizeWheel(null, '+l.ticketIndex+')"\n\t\t\t\t\t\tonmouseenter=\'playTick()\' style="font-size: 34px;!important">\n\t\t\t\t\t\tRedeem\n\t\t\t\t\t\t<div style="color:'+(l.headCol||"#fff")+'">\n\t\t\t\t\t\t\t<img class="ticketImg" src="'+ve.store.skins[l.ticketIndex].thumbnail+'" style="width:70px!important;">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>',t+='<div class="ticketCount" style="font-size:22px!important;color:'+(l.headCol||"#fff")+'">You have '+(g?g.cnt:0)+"</div>",t+="</div>"}t+="<div class='shopSpinValH'>"+S.t("windows.store.spin",l.name)+"<div class='shopSpinValL' style='color:"+(l.headCol||"#fff")+" !important;'>"+l.price+' KR<div class="ticketImgSep">|</div><img class="ticketImg" src="'+ve.store.skins[l.ticketIndex].thumbnail+'" style="width:56px!important"></div></div>',t+="<div class='shopSpinImg' style='background-image: url("+m+");'></div><div class='shopImgGrad' style='margin-left:0!important;background-image: linear-gradient(transparent, "+(l.headCol||"#fff")+"30);'></div>",t+="</div>",t+="<div id='shopBundleHolder'>"+n+"</div>",t+="</div>"}if(1==this.tabIndex){t+="<div class='setBodH' style='padding-top:15px'><div style='color:rgba(255,255,255,0.6);margin-bottom:10px;margin-top:0px;width:100%;text-align:center'>"+S.t("windows.store.wheels.sub")+"</div></div>",t+="<div class='prizeWheelTable'>";for(ve.store.wheels.filter((e=>e&&!e.hide&&e.primary)).length,i=0;i<ve.store.wheels.length;++i)if(!((Ee=ve.store.wheels[i]).hide||Ee.kr&&p())){var v=!Re||Ee.free&&Re.level<Ee.minLvl||Ee.locked,y=Ee.locked?"Coming Soon":v?"Sold Out":Ee.priceT||Ee.price,b=!0;if((Re&&Ee.aReq&&Re[Ee.aReq.ind]<Ee.aReq.val||Ee.locked)&&(v=!0,b=!1,Ee.aReq&&Ee.aReq.txt&&(y=Ee.aReq.txt)),Ee.kr){On();var w=ae.getTimeH(Math.max(0,Pn));y=Pn<=0||"00:00:00"==w?Ee.priceT:w,v=Pn>0,b=!1}if(!Ee.kr&&!Ee.locked&&Re){var x=Ee.rarities;h=x.indexOf(x.filter((e=>e>0)).slice(-1).pop()),f=ve.store.getSpnItems(Ee,h,Re,Ee.season||u.currentSeason,Ee.bigRar);ae.yateShuffle(f);m=ve.store.skins[f[0]].thumbnail}c=void 0!==Ee.ticketIndex;var M=!!Ee.ticketOnly;if(t+="<div class='shopCard"+(v?" makeGray":"")+"' onmouseenter='playTick()' style='color:"+(Ee.headCol||"#fff")+";border: 4px solid;text-shadow: 0px 0px 30px rgb(0 0 0);width:293px;height: 202px;"+(Ee.kr||Ee.locked?"background-image:url("+ae.assetsUrl("/img/shop/filter/vignette.png")+"),url(&quot;"+ae.assetsUrl("/img/shop/spins/"+i+"_"+ae.randInt(0,Ee.icons-1)+".png")+"&quot;)'":"background: rgba(0, 0, 0, 0.4);'")+(v||c&&!M?"":" onclick='"+(Ee.kr?"claimReward()":M?"prizeWheel(null, "+Ee.ticketIndex+")":"prizeWheel("+i+")")+"'")+">",c&&!M&&Re){g=Re.skins.find((e=>e&&e.ind==Ee.ticketIndex));t+="<div class='shopActionOvrl'>",t+=Ee.multi?'<div class="shopActions">\n\t\t\t\t\t\t\t<div class="shopSubAction" onclick="playSelect();prizeWheel('+i+")\" onmouseenter='playTick()'>\n\t\t\t\t\t\t\t\t1x Spin\n\t\t\t\t\t\t\t\t<div style=\"color:"+(Ee.headCol||"#fff")+'">\n\t\t\t\t\t\t\t\t\t'+y+(Ee.priceT||!b?"":" KR")+'\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="shopSubActionSep" style="background:'+(Ee.headCol||"#fff")+'"></div>\n\t\t\t\t\t\t\t<div class="shopSubAction" onclick="playSelect();prizeWheel('+i+", null, "+Ee.multi+")\" onmouseenter='playTick()'>\n\t\t\t\t\t\t\t\t"+Ee.multi+'x Spin\n\t\t\t\t\t\t\t\t<div style="color:'+(Ee.headCol||"#fff")+'">\n\t\t\t\t\t\t\t\t\t'+y*Ee.multi+(Ee.priceT||!b?"":" KR")+"\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>":'<div class="shopAction" onclick="playSelect();prizeWheel('+i+")\" onmouseenter='playTick()'>\n\t\t\t\t\t\t\tSpend\n\t\t\t\t\t\t\t<div style=\"color:"+(Ee.headCol||"#fff")+'">\n\t\t\t\t\t\t\t\t'+y+(Ee.priceT||!b?"":" KR")+"\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>",t+='<div style=\'display: table-cell;\'><div class="shopActionSep" style="background:'+(Ee.headCol||"#fff")+'"></div></div>',t+='<div class="shopAction" onclick="playSelect();prizeWheel(null, '+Ee.ticketIndex+")\"\n\t\t\t\t\t\tonmouseenter='playTick()'>\n\t\t\t\t\t\tRedeem\n\t\t\t\t\t\t<div style=\"color:"+(Ee.headCol||"#fff")+'">\n\t\t\t\t\t\t\t<img class="ticketImg" src="'+ve.store.skins[Ee.ticketIndex].thumbnail+'">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>',t+='<div class="ticketCount" style="color:'+(Ee.headCol||"#fff")+'">You have '+(g?g.cnt:0)+"</div>",t+="</div>"}if(M&&Re){g=Re.skins.find((e=>e&&e.ind==Ee.ticketIndex));t+='<div class="ticketCount" style="width: unset;top:7px;right: 10px;color:'+(Ee.headCol||"#fff")+'">You have '+(g?g.cnt:0)+"</div>"}t+="<div class='spinValH'>"+S.t("windows.store.spin",Ee.name)+"<div class='spinValL' style='color:"+(Ee.headCol||"#fff")+" !important;width:314px'>"+(M?'Redeem <img class="ticketImg" src="'+ve.store.skins[Ee.ticketIndex].thumbnail+'">':y+(Ee.priceT||!b?"":" KR")+(c?'<div class="ticketImgSep">|</div><img class="ticketImg" src="'+ve.store.skins[Ee.ticketIndex].thumbnail+'">':""))+"</div></div>",t+=(Ee.kr||Ee.locked?"":"<div class='shopImg' style='background-image: url("+m+");left:60px'></div>")+"<div class='shopImgGrad' style='background-image: linear-gradient(transparent, "+(Ee.headCol||"#fff")+"30);'></div>",t+="</div>"}Ee=ve.store.wheels[3];var k="#fc038d";f=[...ve.store.skins.filter((e=>e&&e.type==Te.TICKET))];ae.yateShuffle(f);m=f[0].thumbnail;t+="<div class='shopCard' onmouseenter='playTick()' style='color:"+k+";border: 4px solid;text-shadow: 0px 0px 30px rgb(0 0 0);width:293px;height: 202px;background: rgba(0, 0, 0, 0.4);' onclick='windows[13].viewTickets()'>",t+="<div class='spinValH'>View Tickets<div class='spinValL' style='color:"+k+"!important;width:314px'>You have "+(Re?Re.skins.filter((e=>e&&ve.store.skins[e.ind]&&ve.store.skins[e.ind].type==Te.TICKET)):[]).reduce(((e,t)=>e+t.cnt),0)+"</div>",t+="</div>",t+="<div class='shopImg' style='background-image: url("+m+");left:60px'></div><div class='shopImgGrad' style='background-image: linear-gradient(transparent, "+k+"30);'></div>",t+="</div>"}if(2==this.tabIndex){t+="<div class='setBodH' style='padding-top:15px'><div style='color:rgba(255,255,255,0.5);margin-bottom:10px'>"+S.t("windows.store.buyP")+" <a href='javascript:;' onclick='showWindow(36)'>"+S.t("windows.store.premium2")+"</a></div></div>",t+="<div id='storeList' style='margin-bottom:10px'>";for(i=0;i<ve.store.premium.length;++i)t+="<div class='shopCard' onmouseenter='playTick()' onclick='premiumPopup("+i+")' style='color:"+((Ee=ve.store.premium[i]).headCol||"#fff")+";border: 4px solid;width:293px;height:212px;background-image:linear-gradient(transparent, "+(Ee.headCol||"#fff")+"30), url(&quot;"+ae.assetsUrl("/img/prem_crd.png")+"&quot;);'>"+Ee.val+" Days<div class='spinVal' style='margin-top:119px;width: 309px;line-height: 63px;'>$"+Ee.price+" <span style='color:#fff'>USD</span></div></div>";t+="</div><div id='premiumRes'></div>",t+="<div class='setBodH' style='padding-top:10px;padding-bottom:10px;'><span style='color:#fff'>Time Remaining</span><span id='premTime'>"+ae.getReadableTime(Re&&Re.premiumT?Math.floor(Re.premiumT):0)+"</span></div>"}if(3==this.tabIndex){t+="<div id='purchaseInfoTable'>";for(i=0;i<ve.store.purchases.length;++i)if(!(Ee=ve.store.purchases[i]).hide&&!Ee.type){var _=d?e?Ee.priceSteamSale:Ee.priceSteam:e?Ee.priceSale:Ee.price;t+="<div class='shopCard' onmouseenter='playTick()' onclick='logBtnFRVR(`buy_kr_"+Ee.val+"`);showPurchase("+i+")' style='background-image:url("+ae.assetsUrl("/img/shop/filter/vignette.png")+"),url(&quot;"+ae.assetsUrl("/img/shop/"+i+".png")+"&quot;);border: 4px solid;color:"+(Ee.col||"")+"'>"+(Ee.tag||e?"<div class='shopSale' style='background-color:"+(e?"#E040FB":Ee.tagCol)+"'>"+(e?"10% Off":Ee.tag)+"</div>":"")+Ee.val+" <span style='color:#fff'>KR</span><div class='spinVal' style='color:#fff'>$"+_+" USD</div></div>"}t+="</div>",t+="<div style='font-size:15px;text-align:center;margin-bottom:10px;margin-top:10px;color:#d4d4d4;'>"+S.t("windows.store.currency")+"</div>",t+="<div>",t+="<div style='color:#d4d4d4;font-size:16px;text-align:center;margin-bottom:10px;margin-top:10px;'>"+S.t("windows.store.agree","<a target='_blank' href='https://frvr.com/legal/krunker#TermsofService'>")+"</a>.</div>"}if(this.tabIndex,6==this.tabIndex){if(t+="<div id='crftHeaderImg' style='background-image:linear-gradient(rgb(10 10 10 / 37%),#0000003b),url("+ae.assetsUrl("/img/backgrounds/junkyrd_0.png")+");'><div id='crftHeaderName'>Welcome to the Junkyard</div><div id='crftHeaderDesc'>Craft brand new skins & items by using Junk and other Materials, which can be found scattered around every map in the game or earned from challenges.</div></div>",!this.craftData&&Re&&(this.craftData={},me.send("recps")),t+="<div style='margin-top:0px;'>",this.craftData&&this.craftData.dat){this.craftData.dat.forEach((e=>{e.order=parseFloat(e.JUNK||0);var t=(e.STATORD||0)>0,i=parseFloat(e.JUNK||0);if(t)e.order-=2e4;else{Math.abs(ve.now-(e.DAT||0))<1728e5&&(e.order+=1e4);var n=Re&&Re.junk>=i;if(n)for(var s,a=ae.arrayChunk((e.SIN||"").split(","),2),r=0;r<a.length;r++){if(s=a[r][0])!(Re?Re.skins:[]).find((e=>e.ind==s&&e.cnt>=parseInt(a[r][1]||0)))&&n&&(n=!1)}n?e.order+=15e3:e.order-=15e3}})),this.craftData.dat=this.craftData.dat.sort(((e,t)=>(t.order||-1)-(e.order||-1)));for(i=0;i<this.craftData.dat.length;++i){var T=this.craftData.dat[i],C=T.STATORD||0,I=ve.store.skins[T.SOUT];if(I){var A=T.EXP,R=(T.SIN||"").split(","),P="<div>",E=parseFloat(T.JUNK||0),D=parseInt(T.CNT||0),O=!Re||Re.junk<E?"Not enough Junk":null;0==D&&(O="Sold out");for(var L,j=Math.abs(ve.now-(T.DAT||0))<1728e5,z=0;z<10;z+=2)if(L=R[z]){var B=ve.store.skins[L],N=(Re?Re.skins:[]).find((e=>e.ind==L&&e.cnt>=parseInt(R[z+1]||0)));N||O||(O="Missing materials"),P+="<div class='crftItmReq' onclick='viewItem("+L+");' style='"+(N?"":"filter:grayscale(1);border: 2px solid #5e5e5e !important;")+"border: 2px solid "+ve.store.rarities[B.rarity].color+";background-image:url("+B.thumbnail+"'><div class='crftReqCnt'>x"+(R[z+1]||0)+"</div></div>"}else P+="<div class='crftItmReq' style='"+(z?"":"margin-left:-5px;")+"'></div>";P+="</div>",t+="<div class='crftRcpeCrd'><div class='craftRcIcn' style='border:3px solid "+ve.store.rarities[I.rarity].color+";' onclick='viewItem("+T.SOUT+")'><img style='height:100%' src='"+I.thumbnail+"'><div class='crftItmNm' style='color:"+ve.store.rarities[I.rarity].color+"'>"+I.name+"</div><div class='crftItmJnk'>"+E.toFixed(2)+"<span class='material-icons' style='color:#cc51f8;font-size:34px;margin-left:5px;vertical-align:top;'>plumbing</span></div>"+(j&&0==C?"<div class='crftNewRc'>NEW</div>":"")+(D>0?"<div class='crftLimAmnt' title='"+(D||0)+" left in the world'>x"+(D||0)+"</div>":"")+(1==C?"<div class='crftHmmrAnm'><span class='material-icons crftHammrIcn'>plumbing</span></div>":"")+(2==C?"<div class='donCrftIcn'><span class='material-icons' style='font-size:160px;color:#38cd3a;line-height:175px;'>done</span></div>":"")+"</div><div class='craftRiHl'>"+P+"</div>"+(1==C?"<div class='crftTim'>"+ae.getReadableTime(Math.max(0,A))+" remaining</div>":O||2==C?"<div class='crftTim'>"+(2==C?"Complete":O||"Error")+"</div>":"<div class='crftItmBtn' onclick='logBtnFRVR(`craft_item`);windows[13].sendCraft("+T.SID+")'>Craft</div>")+"</div>"}}}else t+=Re&&this.craftData?"<div style='color:#fff;text-align:center;margin-top:20px;'>"+(this.craftData.error?"No Recipes Found":"Loading Recipes...")+"</div>":"<div style='color:#fff;text-align:center;margin-top:20px;cursor: pointer;' onclick='showWindow(5)'><span style='color:#31caec'>Register</span> to craft! </div>";t+="</div>"}return t}},{header:S.t("windows.skin.header"),label:"skin_selection",width:877,height:"calc(100% - 300px)",sticky:!0,dark:!0,hideScroll:!0,gen:function(){var e="<div id='itemSearchH'><div class='custBack' onclick='playSelect(0.1);goBackWindow("+(ve.weaponConfig[cs]&&ve.weaponConfig[cs].secondary?19:2)+")' onmouseenter='playTick();'><span class='material-icons custBackArr'>arrow_back</span></div><input id='itemSearch' type='text' placeholder='Search Item' onkeyup='searchItems(this)'><div class='winClose' onclick='playSelect(0.1);closWind()' onmouseenter='playTick();'><span class='material-icons winCloseArr'>close</span></div></div><div id='skinList' style='margin-top: 8px;overflow-y: scroll;height: calc(100% - 95px);'><div class='skinCard blackShad' style='border:5px solid lightgrey' onmouseenter='playTick()' onclick='selectSkin(-3,"+cs+")'>"+S.t("generic.none")+"<div class='itemOwn'>"+S.t("generic.default")+"</div><div class='itemSea' style='opacity:0;'>Season 1</div><img draggable='false' class='skinImg' src='"+ae.assetsUrl("/textures/previews/weapons/"+ve.weaponConfig[cs].src+".png")+"'></div><div class='skinCard blackShad' style='border:5px solid lightgrey' onmouseenter='playTick()' onclick='selectSkin(-2,"+cs+")'>"+S.t("generic.random")+"<div class='itemOwn' style='opacity:0;'>by ???</div><div class='itemSea' style='opacity:0;'>All Seasons</div><img draggable='false' class='skinImg skinSil' onmouseenter='playTick()' src='"+ae.assetsUrl("/textures/previews/weapons/"+ve.weaponConfig[cs].src+".png")+"'><div class='skinRandom blackShad' style='top:68px'>?</div></div>",t=[...bs(Re,!0)].sort((function(e,t){var i=null!=t.ind&&ve.store.skins[t.ind]&&ve.store.skins[t.ind].rarity||0,n=null!=e.ind&&ve.store.skins[e.ind]&&ve.store.skins[e.ind].rarity||0,s=null!=t.ind&&ve.store.skins[t.ind]?ve.store.skins[t.ind].seas||1:0,a=null!=e.ind&&ve.store.skins[e.ind]?ve.store.skins[e.ind].seas||1:0;return i>n?1:i<n?-1:s>a?1:s<a?-1:(t.ind||0)-(e.ind||0)}));t.sort((function(e,t){return~~(Wt.indexOf(t.ind)>=0)-~~(Wt.indexOf(e.ind)>=0)}));for(var i=0;i<t.length;++i)if((Ee=ve.store.skins[t[i].ind])&&!Ee.type&&Ee.weapon==cs+1){var n=Re&&Re.isDev||null==Ee.classIndex||Ee.classIndex==kt||ve.isSandbox,s=Wt.indexOf(Ee.index)>=0;e+="<div class='skinCard"+(Ee.rarity==o.a.CONTRABAND?"":" blackShad")+(!Ee.free&&ce.rarityAnim&&ve.store.rarities[Ee.rarity].animate?" rainbow":"")+"' style='color:"+(Ee.free?"border: 5px solid lightgrey":"color:"+ve.store.rarities[Ee.rarity].color+";border:5px solid"+ve.store.rarities[Ee.rarity].color)+"' onmouseenter='playTick()' "+(n?"onclick='selectSkin("+t[i].ind+","+(Ee.weapon-1)+");cancelTip()' ":" ")+"data-index='"+Ee.index+"' onmouseover='createTip(this)' onmouseout='cancelTip()'>"+(Ee.free?"":"<div class='itemCnt' data-badge='x"+t[i].cnt+"'></div>")+Ee.name+"<div class='itemOwn' style='z-index: 3;position: relative;'>"+(n?Ee.free?S.t("windows.skins.default"):"by "+(Ee.creator||"Krunker.io"):S.t("windows.skins.classOnly",ve.classes[Ee.classIndex].name))+"</div>"+(Ee.free?"":"<div class='itemSea'>Season "+(Ee.seas||1)+"</div>")+"<img loading='lazy' draggable='false' class='skinImg"+(Ee.type?"C":"")+(Ee.rgb?" rgbHue":"")+"' src='"+Ee.thumbnail+"' /><div class='selctInfoBtn' onmouseenter='playTick()'onclick='viewItem("+t[i].ind+")'>?</div><div class='selctFavBtn material-icons' onmouseenter='playTick()' data-col='"+(s?"yellow":"white")+"' data-icon='"+(s?"star":"star_border")+"' onclick='favItem(this, "+t[i].ind+")'></div>"+(n?"":"<div class='lockedSkin'><span class='material-icons' style='font-size: 55px;color:#fff'>lock</span></div>")+"</div>"}return e+="</div>"}},{header:S.t("windows.hat.header"),label:"hat_selection",width:877,height:"calc(100% - 300px)",sticky:!0,dark:!0,hideScroll:!0,gen:()=>sa("selectHat",1),close:()=>cancelTip(),clear:()=>{ea(window.event),selectHat(-1,!0,!0)}},{header:S.t("windows.body.header"),label:"body_selection",width:877,height:"calc(100% - 300px)",sticky:!0,dark:!0,hideScroll:!0,gen:function(){return sa("selectBody",2)},close:()=>cancelTip(),clear:()=>{ea(window.event),selectBody(-1,!0,!0)}},{header:S.t("windows.mods.load.header"),label:"mods_load",gen:function(){return"<div id='modPckHead' class='setHed' style='margin-top:0px;margin-bottom:20px;'>Mod Loader</div><form id='modDropper'><input onchange='loadMod()' id='modInput'type='file'><p id='modLInfo'>"+S.t("windows.mods.drop")+"</p></form><input type='text' id='modURL' class='accountInput' style='width:78%' placeholder='"+S.t("windows.mods.paste")+"'><a class='menuLink' style='display:inline-block;margin-left:10px' onclick='loadModURL()'>"+S.t("windows.mods.load")+"</a>"}},{header:S.t("windows.publish.mod.header"),label:"unused",gen:function(){return""}},{header:S.t("windows.secondary.header"),label:"secondary_selection",dark:!0,goBack:function(){showWindow(20)},gen:function(){var e="<div class='winBackH'><div class='custBack' onclick='playSelect(0.1);goBackWindow(44)' onmouseenter='playTick();'><span class='material-icons custBackArr'>arrow_back</span></div><div class='winSelH'>Select Secondary</div><div class='winClose' onclick='playSelect(0.1);closWind()' onmouseenter='playTick();'><span class='material-icons winCloseArr'>close</span></div></div>";e+="<div id='skinList'>";for(var t=ve.weaponConfig.filter((e=>e.secondary)).sort(((e,t)=>(null==e.minRec?0:e.minRec)-(null==t.minRec?0:t.minRec))),i=0;i<t.length;++i)if(Ee=t[i]){var n=!Ee.req||Ee.req(Re,ve)||ve.isSandbox,s=ve.weaponConfig.findIndex((e=>e.name==Ee.name)),a=ss[s]>=0?a=ve.store.skins[ss[s]]:null;e+="<div class='skinCard blackShad' style='height: 165px;border:5px solid lightgrey'"+(n?" onclick='skinSelector("+s+", true)'":"")+">"+Ee.name+"<div class='itemOwn'>"+(Ee.req?S.t("windows.secondary."+(n?"unlocked":Ee.customOnly?"customOnly":Ee.premiumOnly?"premiumOnly":"req"),Ee.minRec):S.t("generic.default"))+"</div><img loading='lazy' draggable='false' class='secImg' onmouseenter='playTick()' src='"+(a?a.thumbnail:ae.assetsUrl("/textures/previews/weapons/"+ve.weaponConfig[s].src+".png"))+"' />"+(n?"":"<div class='lockedCard'><span class='material-icons' style='font-size: 70px;color:"+(Ee.premiumOnly?"var(--yellow)":"#fff")+";'>"+(Ee.premiumOnly?"beenhere":"lock")+"</span></div>")+"</div>"}return e+="</div>"}},{header:S.t("windows.advertise.header"),label:"contact",width:1e3,maxH:"calc(100% - 330px)",gen:function(){var e="<div style='height:15px;'></div>";return e+="<div class='setHed' style='margin-top:0px;'>Recovery</div><div class='setBodH' style='padding-top:10px'><div style='color:rgba(255,255,255,0.4);margin-top:0px'>To recover your account <b>username or password</b>, please contact <a>recovery@yendis.ch</a> Recovery is only possible if certain information can be provided.<div style='height:10px'></div></div></div> <div class='setHed' style='margin-top:20px;'>General Support</div><div class='setBodH'><div style='color:rgba(255,255,255,0.4);margin-top:10px'>Contact us on <a href='mailto:support_krunker_io@frvr.com?subject=Krunker Support'>support_krunker_io@frvr.com</a> for <b>General Support</b> requests.<div style='height:10px'></div> </div></div><div class='setHed' style='margin-top:20px;'>Payments & Refunds</div><div class='setBodH'><div style='color:rgba(255,255,255,0.4);margin-top:10px'>Contact us on <a href='mailto:support_krunker_io@frvr.com?subject=Krunker Payment'>support_krunker_io@frvr.comm</a> for support requests relating to <b>Payments & Refunds</b>.<div style='height:10px'></div> </div></div><div class='setHed' style='margin-top:20px;'>Forums</div><div class='setBodH' style='padding-top:15px'>For <b>Bug Reports, Suggestions</b> or <b>Other Queries</b> join our <a href='"+u.discordInvite+"'>Discord</a> or <a href='https://www.reddit.com/r/KrunkerIO'>Reddit</a> communities.<div style='height:10px'></div></div><div class='setHed' style='margin-top:20px;'>Company Information</div><div class='setBodH' style='padding-top:10px;padding-bottom:10px'>FRVR Limited</br>61 Saint Paul Street Valletta,</br>AVLT 1212,</br>Malta</br></div><div class='setHed' style='margin-top:20px;'>Contact</div><div class='setBodH' style='padding-top:10px;padding-bottom:15px;'>Legal<a style='float:right' href='mailto:legal+krunker@frvr.com?subject=Krunker Legal'>legal+krunker@frvr.com</a></br>Bug Bounties<a style='float:right' href='mailto:krunker+bugs@frvr.com?subject=Krunker Bugs'>krunker+bugs@frvr.com</a></br>Ban Appeals<a style='float:right' href='mailto:krunker+banappeal@frvr.com?subject=Krunker Ban Appeal'>krunker+banappeal@frvr.com</a></br>Advertising/Acquisition<a style='float:right' href='mailto:krunker+info@frvr.com?subject=Krunker Advertising'>krunker+info@frvr.com</a></div>"}},{header:"Social",label:"unused",gen:function(){return"TODO"}},{header:S.t("windows.players.header"),label:"player_list",width:1020,sticky:!0,dark:!0,playerSearch:null,searchMatches:function(e){return!!e.name&&((e.name||"").toLowerCase().indexOf((this.playerSearch||"").toLowerCase())>=0||(e.alias||"").toLowerCase().indexOf((this.playerSearch||"").toLowerCase())>=0)},searchPlayers:function(e){this.playerSearch=e&&""!=e.value?e.value:null;var t=document.getElementById("playerListH");t&&(t.innerHTML=this.genList())},genList:function(){var e="<table class='pListTable' style='margin-top: 8px;overflow-y: scroll;height: calc(100% - 75px);'><tbody>",t=Rt?ve.players.list.find((e=>e.id==Rt.sus)):null;if(t){var i=te.ping[t.ping>=150?"high":t.ping>=50?"medium":!t.ping||t.ping<=0?"unknown":"low"];e+="<tr style='border:solid 2px red'><td class='pListName'>"+(window.spectating?"<span onmouseenter='playTick()' title='Focus Player' class='punishButton' onclick='focusPlayer(\""+t.id+"\", this)'><span class='takeAction material-icons'>"+(t.id==Dt?"visibility_off":"visibility")+"</span></span>":"")+"<span class='pListPing material-icons' style='color:"+i+"' title='"+(t.ping||0)+"ms'>signal_cellular_alt</span><a target='_blank' class='red' href='/social.html?p=profile&q="+t.name+"' oncontextmenu='copyUser(this, &quot;"+t.id+"&quot;)'>"+t.alias+(t.clan?"<span style='color:"+te.getClanCol(t.clan,"#353535")+"'> ["+t.clan+"]</span>":"")+"</a></td></td><td class='pListActions'>"+(ct||Re&&(Re.canSilentKick||Re.canGlobalKick||Re.canGlobalBan||Re.canGlobalFlag)?"<span onmouseenter='playTick()' class='punishButton kick' onclick='punishPopup(\""+t.id+"\")'><span class='takeAction material-icons'>construction</span></span>":"")+"</td></tr>"}Ae&&(e+="<tr><td class='pListName'>"+(ct?"<i class='material-icons' style='font-size:25px'>stars</i>":"")+Ae.alias+(Ae.clan?"<span style='color:"+te.getClanCol(Ae.clan,"#353535")+"'> ["+Ae.clan+"]</span>":"")+"</td><td class='pListActions'>"+(window.spectating?"<span onmouseenter='playTick()' title='Clear Focus' class='punishButton kick' onclick='clearFocus()'>Clear Focus</span>":"")+(ct||Re&&Re.canGlobalKick?"<span onmouseenter='playTick()' class='punishButton kick' onclick='punishPlayer(null, 2)'>Kick Spec</span>":"")+(Re&&Re.isDev?"<span onmouseenter='playTick()' class='punishButton kill' onclick='punishPlayer(\""+Ae.id+"\", 3)'>Kill</span>":"")+(Re&&Re.isDev?"<span onmouseenter='playTick()' class='punishButton tpall' onclick='punishPlayer(null, 9)'>TPAll</span>":"")+(Re&&Re.isDev?"<span onmouseenter='playTick()' class='punishButton kick' onclick='botsPopup();'><span class='takeAction material-icons'>smart_toy</span></span>":"")+"</td></tr>");for(let l of ve.players.list.filter((e=>!u.isProd||!e.isYou)))if(!(t&&t.id==l.id||l.isBot&&ve.mode.botsAsAI)){var n=Re&&!ve.isCustom&&-1==Ct.indexOf(l.alias)&&(xt==l.alias||!xt&&!It),s=!ve.isCustom&&Re&&Re.level>=u.minKDFCall,a=l.level>=1,r=l.level>=1,o=(i=te.ping[l.ping>=150?"high":l.ping>=50?"medium":!l.ping||l.ping<=0?"unknown":"low"],"<tr><td class='pListName'>"+(window.spectating?"<span onmouseenter='playTick()' title='Focus Player' class='punishButton' onclick='focusPlayer(\""+l.id+"\", this)'><span class='takeAction material-icons'>"+(l.id==Dt?"visibility_off":"visibility")+"</span></span>":"")+(Fe==l.id?"<i class='material-icons' style='font-size:25px'>stars</i>":"")+"<span class='pListPing material-icons' style='color:"+i+"' title='"+(l.ping||0)+"ms'>signal_cellular_alt</span><a target='_blank' class='"+(l.isHacker?"red":"")+"' href='/social.html?p=profile&q="+l.name+"' oncontextmenu='copyUser(this, &quot;"+l.id+"&quot;)'>"+l.alias+(l.clan?"<span style='color:"+te.getClanCol(l.clan,"#353535")+"'> ["+l.clan+"]</span>":"")+"</a>"+(Ji[l.alias]?"<span class='pListVoice material-icons'>volume_up</span>":"")+"</td><td class='pListActions'>"+(ve&&ve.mode&&ve.mode.canTrade?"<span onmouseenter='playTick()' title='Trade Player' class='punishButton' onclick='requestTrade(\""+l.id+"\", this)'><span class='takeAction material-icons'>store</span></span>":"")+(a?"<span title='Chat mute/unmute' onmouseenter='playTick()' class='muteUserBtn material-icons' onclick='muteUser(this, `"+l.id+"`, 0)'>"+(Ft.includes(l.accid)?"speaker_notes_off":"chat")+"</span>":"")+(r?"<span title='Voice mute/unmute' onmouseenter='playTick()' class='muteUserBtn material-icons' onclick='muteUser(this, `"+l.id+"`, 1)'>"+(Ht.includes(l.accid)?"voice_over_off":"record_voice_over")+"</span>":"")+(s?"<span onmouseenter='playTick()' class='punishButton kdf' onclick='confirmPolice(`"+l.alias+"`,`"+l.id+"`)'><img src='./img/police.png' style='height:25px;vertical-align:middle;margin-top:-6px'></span>":"")+(n?"<span onmouseenter='playTick()' class='punishButton vote' onclick='kickVote(\""+l.id+"\")'>Votekick</span>":"")+(Re&&Re.isDev?"<span onmouseenter='playTick()' class='punishButton kill' onclick='punishPlayer(\""+l.id+"\", 3)'>Kill</span>":"")+(Re&&Re.canTeleport?"<span onmouseenter='playTick()' class='punishButton tp2' onclick='punishPlayer(\""+l.id+"\", 4)'>TP2</span>":"")+(Re&&Re.canTeleport?"<span onmouseenter='playTick()' class='punishButton tpme' onclick='punishPlayer(\""+l.id+"\", 5)'>TPME</span>":"")+(Re&&Re.isDev?"<span onmouseenter='playTick()' class='punishButton tpme' onclick='punishPlayer(\""+l.id+"\", 6)'>FREEZE</span>":"")+(ct||Re&&(Re.canGlobalKick||Re.canSilentKick||Re.canGlobalBan||Re.canGlobalFlag)?"<span onmouseenter='playTick()' class='punishButton kick' onclick='punishPopup(\""+l.id+"\")'><span class='takeAction material-icons'>construction</span></span>":"")+"</td></tr>");this.playerSearch&&!this.searchMatches(l)||(e+=o)}return e+="</tbody></table>"},gen:function(){var e=ve.players.list.length?"<div id='playerSearchH' class='setHed'>"+S.t("windows.players.header")+" ["+ve.players.list.length+"]<div id='plySearchH'><input id='plySearch' type='text' "+(this.playerSearch?"value='"+this.playerSearch+"' ":"")+"placeholder='Search Player' oninput='windows[22].searchPlayers(this)'></div></div>":"<div style='margin-top:0px;' class='setHed'><center>"+S.t("windows.players.none")+"<center></div>";return e+="<div id='playerListH'>"+this.genList()+"</div>"}},{header:S.t("windows.join.header"),label:"join_game",dark:!0,gen:function(){return"<input id='gameURL' type='text' placeholder='"+S.t("windows.join.code")+"' class='accountInput' style='margin-top:0;margin-bottom:10px;' value=''></input><div class='joinBtn' onclick='joinGame()' style='width:100%'>"+S.t("windows.join.header")+"</div>"}},{header:S.t("windows.client.header"),label:"client_download",gen:function(){return"<div class='setHed' style='text-align:center;margin-top:0px'>Download Krunker Client</div><div class='setBodH' style='padding-bottom:10px'>Clients provide a more integrated experience with better performance.</div><div><ul style='padding:0;display:flex;list-style:none;text-align:center;margin:0;margin-top:-10px'><li style='display: flex;flex-basis:200px;-webkit-box-flex:1;flex-grow:1;margin-right:10px'><a href='//client2.krunker.io/setup.exe' style='display:block;width:100%;padding-top:1em;'><img src ='./img/windows.png' style='width:80px;height:80px;display:block;margin:0 auto 10px;'>"+S.t("windows.client.windows")+"</a></li><li style='display: flex;flex-basis:200px;-webkit-box-flex:1;flex-grow:1;'><a href='//client2.krunker.io/setup.dmg' style='display: block;width: 100%;padding-top:1em;'><img src ='./img/mac.png' style='width:80px;height:80px;display:block;margin:0 auto 10px;'>"+S.t("windows.client.mac")+"</a></li><li style='display: flex;flex-basis:200px;-webkit-box-flex:1;flex-grow:1;'><a href='//client2.krunker.io/setup.AppImage' style='display: block;width: 100%;padding-top:1em;'><img src ='./img/linux.png' style='width:80px;height:80px;display:block;margin:0 auto 10px;'>"+S.t("windows.client.linux")+"</a></li></ul></div>"}},{header:S.t("windows.melee.header"),label:"melee_selection",width:877,height:"calc(100% - 300px)",sticky:!0,dark:!0,hideScroll:!0,gen:function(){return sa("selectMelee",3)},close:()=>cancelTip()},{header:S.t("windows.ranked.header"),label:"ranked",justCopied:null,tabIndex:0,dark:!0,popup:!0,width:1800,extraCls:"menuWindowF",maxH:"calc(100% - 325px)",yPos:48,flagLinks:[ae.assetsUrl("/img/flags/flag_4.png"),ae.assetsUrl("/img/flags/flag_0.png"),ae.assetsUrl("/img/flags/flag_3.png"),ae.assetsUrl("/img/flags/flag_2.png"),ae.assetsUrl("/img/flags/flag_1.png"),ae.assetsUrl("/img/flags/flag_0.png"),ae.assetsUrl("/img/flags/flag_0.png"),ae.assetsUrl("/img/flags/flag_0.png"),ae.assetsUrl("/img/flags/flag_0.png"),ae.assetsUrl("/img/flags/flag_0.png")],switchTab:function(e,t){(this.tabIndex!=e||t)&&(this.tabIndex=e,updateWindow(27))},gen:function(){return""}},{header:"",gen:function(){return""}},{header:S.t("windows.support.header"),label:"unused",gen:function(){return""}},{header:S.t("windows.mail.header"),label:"mail",mailData:null,width:1e3,count:0,mailCount:function(e){this.count=e,e>99&&(e="99"),e<0&&(e=0),mailCount.innerHTML=e,mailCount.style.display=e?"inline-block":"none"},onData:function(e,t){this.tabIndex=e,t?(t.forEach((e=>{4==e.km_notificationtype&&e.km_link&&e.km_subject.includes("Creator code")&&(e.km_notificationtype=5),null==e.km_notificationtype&&"Item sold"==e.km_subject&&(e.km_notificationtype=4)})),this.mailData={d:t}):this.mailData=null,updateWindow(30)},onReadData:function(e,t){if(e){if(e=e[0],(n=document.getElementById("mail_"+e.km_id))&&(n.style.border="",n.classList.remove("mailUnread"),0!=t)){var i=e.km_text.replace(/<|>/g,"").replace("&","").replace(/[^\x00-\x7F]/g,"");5==e.km_type&&(i=i.replace("Post!","<a target='_blank' href='./social.html?p=post&q="+e.km_link+"'>Post</a>")),n.children[3]&&(n.children[3].innerHTML=i.length?i:"No message provided")}this.mailCount(this.count-1)}else if(0!=t&&5!=t){var n;(n=document.getElementById("mail_"+e.km_id))&&(n.children[3].innerHTML="Failed to load mail")}},readMail:function(e,t,i){0!=i&&5!=i&&(e.children[3].style.display="block",e.children[3].innerHTML="Loading..."),me.send("rml",t,i)},clickFollow:function(e,t,i){this.readMail(e,t,i),window.open("/social.html?p=profile&q="+e.innerText,"_blank")},readAll:function(){me.send("raml"),this.switchTab(u.mailTabs.length-1),this.mailCount(0)},tabIndex:0,listData:{},switchTab:function(e,t){(this.tabIndex!=e||t)&&(this.tabIndex=e,this.mailData=null,updateWindow(30))},gen:function(){var e={};if(this.mailData&&this.mailData.d)for(var t,i=this.mailData.d.filter((e=>!e.km_archive)),n=0;n<i.length;++n)4!=(t=i[n].km_notificationtype)&&5!=t||(t=3),null!=t&&(e[t]=(e[t]||0)+1);var s="<div class='bigMenTabs' style='table-layout: fixed;'>";for(n=0;n<u.mailTabs.length;++n)s+="<div class='bigMenTab"+(this.tabIndex==n?" bigMenTabA":"")+"' onclick='windows[29].switchTab("+n+")' style='height:30px;'>"+u.mailTabs[n].n+(e[n]?"<div class='unreadBtnM'>"+e[n]+"</div>":"")+"</div>";if(s+="</div>",s+="<div id='mailList'>",4==this.tabIndex)if(this.mailData)if(this.mailData.d){var a=this.mailData.d.filter((e=>e.km_archive));for(n=0;n<a.length;++n){var r=(Ee=a[n]).km_notificationtype;if(Ee.km_link||0!=r){s+="<div class='mailObj' id='mail_"+Ee.km_id+"' onclick='windows[29].readMail(this, "+Ee.km_id+", "+r+")'>";var o="<div style='position:relative;'><div class='mailDate'>"+ae.getReadableTime2((new Date).getTime()-new Date(Ee.km_datesent).getTime());if(0==r)s+=(o+="<div class='followBack' onclick='followPlayer(&quot;"+(d=Ee.km_link.replace(/<|>/g,"").replace("&","").replace(/[^\x00-\x7F]/g,""))+"&quot;, this)'>Follow Back</div></div></div>")+"<div class='followFrom'><a onclick='windows[29].clickFollow(this, "+Ee.km_id+", "+r+")'>"+d+"</a> has followed you!</div></div>";else if(5==r){var l=Ee.km_link.replace(/<|>/g,"").replace("&","").replace(/[^\x00-\x7F]/g,"");s+=(o+="</div></div>")+"<div class='followFrom'><a onclick='windows[29].clickFollow(this, "+Ee.km_id+", "+r+")'>"+l+"</a> used your creator code!</div></div>"}else s+=(o+="</div></div>")+"<div class='mailFrom' style='margin-bottom:15px'>"+Ee.km_playerfrom+"</div><span class='mailSubj'>"+Ee.km_subject+"</span><div class='mailText'></div></div>"}}a.length||(s+="No archive messages"),this.mailData=null}else s+="Loading...";else this.mailData=null,me.send("kml",1,this.tabIndex),s+="Loading...";else if(this.mailData)if(this.mailData.d){i=this.mailData.d.filter((e=>!e.km_archive));var c=0;for(n=0;n<i.length;++n){r=(Ee=i[n]).km_notificationtype;if((Ee.km_link||0!=r)&&(r==this.tabIndex||(4==r||5==r)&&3==this.tabIndex)){c++,s+="<div class='mailObj mailUnread' id='mail_"+Ee.km_id+"' onclick='windows[29].readMail(this, "+Ee.km_id+", "+r+")' style='border: 2px solid #5699eb;'>";var d;o="<div style='position:relative;'><div class='mailDate'>"+ae.getReadableTime2((new Date).getTime()-new Date(Ee.km_datesent).getTime());if(0==r)s+=(o+="<div class='followBack' onclick='followPlayer(&quot;"+(d=Ee.km_link.replace(/<|>/g,"").replace("&","").replace(/[^\x00-\x7F]/g,""))+"&quot;, this)'>Follow Back</div></div></div>")+"<div class='followFrom'><a onclick='windows[29].clickFollow(this, "+Ee.km_id+", "+r+")'>"+d+"</a> has followed you!</div></div>";else if(5==r){l=Ee.km_link.replace(/<|>/g,"").replace("&","").replace(/[^\x00-\x7F]/g,"");s+=(o+="</div></div>")+"<div class='followFrom'><a onclick='windows[29].clickFollow(this, "+Ee.km_id+", "+r+")'>"+l+"</a> used your creator code!</div></div>"}else s+=(o+="</div></div>")+"<div class='mailFrom' style='margin-bottom:15px'>"+Ee.km_playerfrom+"</div><span class='mailSubj'>"+Ee.km_subject+"</span><div class='mailText'></div></div>"}}c&&i.length||(s+="No messages"),this.mailData=null}else s+="Loading...";else this.mailData=null,me.send("kml",0,this.tabIndex),s+="Loading...";return s+="</div>","<div>Your Notifications"+(this.tabIndex==u.mailTabs.length-1?"":"<div class='button buttonR readAll' onclick='windows[29].readAll()'>Read All</div>")+"</div><div style='height:30px;'></div>"+s}},{header:S.t("windows.attach.header"),label:"attachment_selection",dark:!0,gen:function(){var e="<div id='skinList'><div class='noBtnCard blackShad' style='height:150px;border:5px solid lightgrey' onclick='selectAttachment(-1)'>"+S.t("generic.none")+"<div class='skinRandom blackShad' style='top: 60px;'>X</div></div>",t=null!=ve.weaponConfig[ve.classConfig[kt].loadout[0]].attach||ve.store.skins[ss[ve.classConfig[kt].loadout[0]]]&&ve.store.skins[ss[ve.classConfig[kt].loadout[0]]].attachBypass,i=ve.attach.sort(((e,t)=>(null==e.minRec?0:e.minRec)-(null==t.minRec?0:t.minRec)));if(t)for(var n=0;n<i.length;++n)if(Ee=i[n]){var s=Re&&Re.stats&&Re.stats["c"+kt]?Re.stats["c"+kt]:0,a=(Math.max(1,Math.floor(u.rankVar*Math.sqrt(s))+1),ve.isCustom||!Ee.req||Ee.req(Re,kt)||ve.isSandbox);e+="<div class='noBtnCard blackShad' style='height:150px;border:5px solid lightgrey'"+(a?" onclick='selectAttachment("+Ee.id+")'":"")+">"+Ee.name+"<div class='itemOwn'>"+(Ee.minRec?S.t("windows.secondary."+(a?"unlocked":"req"),Ee.minRec):S.t("generic.default"))+"</div><img loading='lazy' draggable='false' class='noBtnImgA' src='"+ae.assetsUrl("/textures/previews/attach/attach_"+Ee.id+".png")+"' />"+(a?"":"<div class='lockedCard'><span class='material-icons' style='font-size: 70px;color:#fff;'>lock</span></div>")+"</div>"}return e+="</div>"}},{header:S.t("windows.reticle.header"),label:"reticle_selection",dark:!0,width:900,gen:function(){var e="<div>"+gs("reticleWidth")+gs("reticleHeight")+"</div>";if(e+="<div id='skinList' style='margin-top:18px;'><div class='noBtnCard blackShad' style='height:140px;border:5px solid lightgrey' onclick='selectReticle(-1)' onmouseenter='playTick()'>None<div class='skinRandom blackShad' style='top: 60px;' onmouseenter='playTick()'>X</div></div>",null!=ve.weaponConfig[ve.classConfig[kt].loadout[0]].attach||ve.store.skins[ss[ve.classConfig[kt].loadout[0]]]&&ve.store.skins[ss[ve.classConfig[kt].loadout[0]]].attachBypass){e+="<div class='noBtnCard blackShad' style='height:140px;border:5px solid lightgrey'><div style='color: #fff;margin-top: 33px;' onclick='window.windows[31].newPop()' onmouseenter='playTick()'>ADD<br>CUSTOM</div></div>";for(var t=0;t<qt.length;++t)if(Ee=qt[t]){var i=Ee[0].replace(/[^a-zA-Z0-9 _-]+/gim,""),n=Jt(Ee[1]);e+="<div class='noBtnCard blackShad' style='height:140px;border:5px solid #fc5a4e' onclick='selectReticle(-2, &quot;"+n+"&quot;)'>"+(i||"Custom")+"<div class='itemOwn' style='margin-top:1px'>Custom</div><img loading='lazy' class='noBtnImgR' draggable='false' src='"+(n||"")+"' onmouseenter='playTick()' /><div class='selctDelBtn' onmouseenter='playTick()'onclick='removeReticle("+t+")'>X</div></div>"}for(t=0;t<Me.length;++t)(Ee=Me[t])&&(e+="<div class='noBtnCard blackShad' style='height:140px;border:5px solid lightgrey' onclick='selectReticle("+t+")'>"+Ee.name+"<div class='itemOwn' style='margin-top:1px'>"+S.t("generic.default")+"</div><img loading='lazy' class='noBtnImgR' draggable='false' src='"+ae.assetsUrl("/textures/reticles/reticle_"+Ee.id+"."+(Ee.type||"png"))+"' onmouseenter='playTick()' /></div>")}return e+="</div>"},newPop:function(){genericPopup("<div class='pubHed'>New Image</div><div style='font-size:20px;color:#fff'><div style='margin-top: 3px;font-size: 22px;color: rgba(255, 255, 255, 0.7);'>Name:<input type='text' id='newCustomName' class='inputGrey2' placeholder='Name'></div><div style='margin-top: 3px;font-size: 22px;color: rgba(255, 255, 255, 0.7);'>Image:<input type='url' id='newCustomImg' class='inputGrey2' placeholder='Image URL'></div><div class='mapFndB' onclick='window.windows[31].addNew()' onmouseover='playTick(0.1)' style='background-color:#fc5a4e;width: 380px;margin-top: 10px;'>Add</div></div>","imageNewPop")},addNew:function(){var e=document.getElementById("newCustomImg"),t=document.getElementById("newCustomName");if(!(t&&e&&e.value&&t.value))return zs(null,"Something Went Wrong");var i=t.value.replace(/[^a-zA-Z0-9 _-]+/gim,"");if(!i.length)return zs(null,"Invalid Name");var n=Jt(e.value);if(!n)return zs(null,"Invalid Image");qt.push([i,n]),setCustomRets(qt,!0),clearPops(),updateWindow(32)}},{header:S.t("windows.chall.header"),label:"challenges",dark:!0,width:1200,tabIndex:0,genChallengeCard:function(e,t){var i=e.DAT,n="<div>",s=(e.REW&&e.REW.sk?e.REW.sk:null)||[];Array.isArray(s)||(s=(s+"").split(","));for(var a=0;a<3;++a){var r=ve.store.skins[s[2-a]],o=null,l=null,c=null;r&&(o=r.thumbnail,l=ve.store.rarities[r.rarity].color,c=s[2-a]),n+="<div class='chalRewSkn' style='"+(o?"background-image:url("+o+");":"")+(l?"border:2px solid "+l+";":"")+"' "+(c?"onclick='viewItem("+c+")'":"")+"></div>"}n+="</div>";var d=!!e.PT;return"<div class='chalCard' style='margin-top:"+(t||0)+"px;"+(i.boss?"box-shadow: 0 0 14px #ffa000;background:rgb(79 50 0 / 40%);border:4px solid #ff9c00;":"")+"'><img class='chalImgC' src='"+ae.assetsUrl("img/chals/icon_"+(e.IC||0)+".png")+"'  style='"+(i.boss?"border: 4px solid #ff9c00;":"")+(d?"filter:grayscale(1);brightness(0.8);":"")+"' />"+(d?"<div class='challComplB'><span class='material-icons' style='font-size:110px;color:#38cd3a;'>done</span></div>":"")+"<div class='chalRight'>"+e.N+(e.TR?"<div class='chalExpr'>"+ae.getReadableTime(e.TR||0)+" left</div>":"")+"<div class='chalXPBar'><div class='chalXPVal'>"+(d?"Completed":"time"==e.DAT.ky?ae.getReadableTime(i.val):(e.PV||0)+"/"+i.val)+"</div><div class='chalXPBarC' style='width:"+(d?100:"time"==e.DAT.ky?0:(e.PV||0)/i.val*100)+"%;'></div></div></div><div class='chalRews' style='"+(i.boss?"border-left: 3px solid #ff9c00;":"")+"'><div class='chalRewV' style='"+(e.REW&&e.REW.kr?"":"filter:grayscale(1);")+"'><span style='color:white'>+</span>"+(e.REW&&e.REW.kr||0)+" <span style='color:#fbc02d'>KR</span></div><div class='chalRewV' style='"+(e.REW&&e.REW.jnk?"":"filter:grayscale(1);")+"'><span style='color:white'>+</span>"+(e.REW&&e.REW.jnk||0)+" <span class='material-icons' style='color:#cc51f8;font-size:29px;vertical-align:top;'>plumbing</span></div>"+n+"</div></div>"},openChallenge:null,closeChallengeCat:function(){playSelect(.1),windows[32].openChallenge=null,menuWindow.scrollTop=0,updateWindow(33)},openHome:function(){windows[32].openChallenge=null,showWindow(33)},openChallengeCat:function(e,t){playSelect(.1),windows[32].openChallenge={typ:e,ind:t},menuWindow.scrollTop=0,updateWindow(33)},gen:function(){if(!Re)return $s(null,S.t("windows.chall.login"),!0);if(Re.level<u.minChalLevel)return $s(u.minChalLevel,"for Challenges");if(!Re.activeChallenges||0==Re.activeChallenges.length)return"<span style='color: #fff;'>No active challenges.</span>";for(var e="",t="",i="<div class='challCrdMsg' style='margin-bottom:25px;font-size:27px;color:#9f9f9f;'>Abandoning a match will result in the loss of challenge progress.</div>",n={},s={},a={},r={},o=0;o<Re.activeChallenges.length;o++){var l=(y=Re.activeChallenges[o]).T;if(n[l]||=[],n[l].push(y),y.DAT)if("map"==l)s[c=l+"_"+y.DAT.mp]=(s[c]||0)+1,y.PT&&(a[c]=(a[c]||0)+1,r.map=(r.map||0)+1);else if("weapon"==l){s[c=l+"_"+y.DAT.wep]=(s[c]||0)+1,y.PT&&(a[c]=(a[c]||0)+1,r.weapon=1+(0|r.weapon))}else if("event"==l){var c;s[c=l+"_"+y.DAT.evt]=(s[c]||0)+1,y.PT&&(a[c]=(a[c]||0)+1,r.event=1+(0|r.event))}}if(n.event=n.event||[],n.ranked=n.ranked||[],n.map=n.map||[],n.weapon=n.weapon||[],n.nightmare=n.nightmare||[],n.clan=n.clan||[],windows[32].openChallenge){if("map"==windows[32].openChallenge.typ){var d=windows[32].openChallenge.ind;t+="<div class='challHeadrI' style='background-image:url("+ae.assetsUrl("img/chals/hed_1.png")+");margin-top:0px;'><div class='challHeadrBck' onclick='windows[32].closeChallengeCat();'><span class='material-icons challBackArr'>arrow_back</span></div><div class='challHeadrT'>"+xe[d].name+" Challenges</div><div class='challHeadrS'>"+(a["map_"+d]||0)+"<span style='color:#fff;'>/"+(s["map_"+d]||0)+"</span></div></div>",t+=i,t+="<div style='margin-top:10px;'>";var h=!1;n.map.length&&n.map.sort((function(e,t){return(t.DAT.boss?2:t.PT)-(e.DAT.boss?2:e.PT)}));for(o=0;o<n.map.length;o++)(y=n.map[o]).DAT&&y.DAT.mp==d&&(t+=windows[32].genChallengeCard(y,h?20:0),h=!0);h||(t+="<div class='challCrdMsg'>Check back later for new challenges!</div>"),t+="</div>"}else if("weapon"==windows[32].openChallenge.typ){d=windows[32].openChallenge.ind;t+="<div class='challHeadrI' style='background-image:url("+ae.assetsUrl("img/chals/"+(ve.weapons[d].src||ve.weapons[d].challSrc)+".png")+");margin-top:0px;filter: saturate(0.8);'><div class='challHeadrBck' onclick='windows[32].closeChallengeCat();'><span class='material-icons challBackArr'>arrow_back</span></div><div class='challHeadrT'>"+ve.weapons[d].name+" Challenges</div><div class='challHeadrS'>"+(a["weapon_"+d]||0)+"<span style='color:#fff;'>/"+(s["weapon_"+d]||0)+"</span></div></div>",t+=i,t+="<div style='margin-top:10px;'>";h=!1;n.weapon.length&&n.weapon.sort((function(e,t){return(t.DAT.boss?2:t.PT)-(e.DAT.boss?2:e.PT)}));for(o=0;o<n.weapon.length;o++)(y=n.weapon[o]).DAT&&y.DAT.wep==d&&(t+=windows[32].genChallengeCard(y,h?20:0),h=!0);h||(t+="<div class='challCrdMsg'>Check back later for new challenges!</div>"),t+="</div>"}else if("event"==windows[32].openChallenge.typ){d=windows[32].openChallenge.ind;var p=u.events.find((e=>e.id==d));t+="<div class='challHeadrI' style='background-image:url("+ae.assetsUrl("img/chals/hed_1.png")+");margin-top:0px;'><div class='challHeadrBck' onclick='windows[32].closeChallengeCat();'><span class='material-icons challBackArr'>arrow_back</span></div><div class='challHeadrT'>"+p.name+" Challenges</div><div class='challHeadrS'>"+(a["event_"+d]||0)+"<span style='color:#fff;'>/"+(s["event_"+d]||0)+"</span></div></div>",t+=i,t+="<div style='margin-top:10px;'>";h=!1;n.event.sort((function(e,t){return(t.DAT.boss?2:t.PT)-(e.DAT.boss?2:e.PT)}));for(o=0;o<n.event.length;o++)(y=n.event[o]).DAT&&y.DAT.evt==d&&(t+=windows[32].genChallengeCard(y,h?20:0),h=!0);t+="</div>"}}else{let i=!1;if(n.event.length&&ae.hasActiveEvents()){t+="<div class='challHeadrI' style='background-image:url("+ae.assetsUrl("img/chals/hed_1.png")+");'><div class='challHeadrT'>Event Challenges</div><div class='challHeadrS'>"+(r.event||0)+"<span style='color:#fff;'>/"+n.event.length+"</span></div></div>",t+="<div style='margin-top:10px;text-align:center;'>";for(var f,o=0;o<u.events.length;o++)s["event_"+(f=u.events[o]).id]&&(t+="<div class='challMapCrd' style='background-image:url("+ae.assetsUrl("/img/events/event_"+f.id+".png")+")' onmouseenter='playTick()' onclick='windows[32].openChallengeCat(`event`,"+f.id+");'><div class='challMapCvr'></div><div class='challMapName blackShad'>"+ae.capFirst(f.name)+"</div><div class='challMapPrg'>"+(a["event_"+f.id]||0)+"<span style='color:#fff;'>/"+(s["event_"+f.id]||0)+"</span></div></div>");t+="</div>",i=!0}e="";t+="<div class='challHeadrI"+((r.map||0)>=n.map.length?" chalCardH":"")+"' style='background-image:url("+ae.assetsUrl("img/chals/hed_1.png")+");margin-top:"+(i?30:0)+"px;'><div class='challHeadrT'>Map Challenges</div><div class='challHeadrS'>"+(r.map||0)+"<span style='color:#fff;'>/"+n.map.length+"</span></div></div>",t+="<div style='margin-top:10px;text-align:center;'>";for(var o=0;o<xe.length;o++){var m=xe[o];m.name.toLowerCase();if(!s["map_"+o])continue;t+="<div class='challMapCrd"+((a["map_"+o]||0)>=(s["map_"+o]||0)?" chalCardH":"")+"' style='background-image:url("+ae.assetsUrl("/img/maps/map_"+o+".png")+")' onmouseenter='playTick()' onclick='windows[32].openChallengeCat(`map`,"+o+");'><div class='challMapCvr'></div><div class='challMapName blackShad'>"+ae.capFirst(m.name)+"</div><div class='challMapPrg'>"+(a["map_"+o]||0)+"<span style='color:#fff;'>/"+(s["map_"+o]||0)+"</span></div></div>"}t+="</div>";t+="<div class='challHeadrI"+((r.weapon||0)>=n.weapon.length?" chalCardH":"")+"' style='background-image:url("+ae.assetsUrl("img/chals/hed_2.png")+");margin-top:30px;'><div class='challHeadrT'>Weapon Challenges</div><div class='challHeadrS'>"+(r.weapon||0)+"<span style='color:#fff;'>/"+n.weapon.length+"</span></div></div>",t+="<div style='margin-top:10px;text-align:center;'>";for(var o=0;o<ve.weapons.length;o++){var g=ve.weapons[o];g.name.toLowerCase();if(g.type==Ce.EQUIPMENT||g.customOnly||!s["weapon_"+o])continue;t+="<div class='challMapCrd"+((a["weapon_"+o]||0)>=(s["weapon_"+o]||0)?" chalCardH":"")+"' onmouseenter='playTick()' onclick='windows[32].openChallengeCat(`weapon`,"+o+");'><img class='challRotImg' style='background-image:url("+ae.assetsUrl("/img/chals/"+(g.src||g.challSrc)+".png")+");background-size:contain;background-repeat:no-repeat;' /><div class='challMapCvr'></div><div class='challMapName blackShad'>"+ae.capFirst(g.name)+"</div><div class='challMapPrg'>"+(a["weapon_"+o]||0)+"<span style='color:#fff;'>/"+(s["weapon_"+o]||0)+"</span></div></div>"}t+="</div>";var v=0;e+="<div style='margin-top:10px;'>",n.nightmare.length&&n.nightmare.sort((function(e,t){return(t.DAT.boss?2:t.PT)-(e.DAT.boss?2:e.PT)}));var y;for(o=0;o<n.nightmare.length;o++)(y=n.nightmare[o]).PT&&v++,e+=windows[32].genChallengeCard(y,o?20:0);n.nightmare.length||(e+="<div class='challCrdMsg'>Check back later for new nightmare challanges!</div>"),e+="</div>";t+="<div class='challHeadrI"+((r.nightmare||0)>=(v||0)?" chalCardH":"")+"' style='background-image:url("+ae.assetsUrl("img/chals/hed_4.png")+");margin-top:30px;'><div class='challHeadrT'>Nightmare Challenges</div><div class='challHeadrS'>"+(v||0)+"<span style='color:#fff'>/"+n.nightmare.length+"</span></div></div>",t+=e,e=""}return t}},{header:S.t("windows.dye.header"),label:"dye_selection",width:877,height:"calc(100% - 300px)",sticky:!0,dark:!0,hideScroll:!0,gen:()=>sa("selectDye",5),close:()=>cancelTip(),clear:()=>{ea(window.event),selectDye(-1,!0,!0)}},{header:S.t("windows.changelog.header"),label:"changelog",logData:null,parsedLog:{},rawLog:{},tabIndex:3,dark:!0,width:1e3,latestUpd:null,fetchLog:function(){fetch("/docs/versions.txt?t="+ae.randInt(1,1e7)).then((e=>e.text())).then((e=>this.onFetched(e))).catch((e=>{}))},onFetched:function(e){if(e){this.logData=e.split(/^\s*== (?=.*?\bUPDATE|UPADTE|INITIAL|TRICKSHOT\b)(.*) ==/gm);for(var t,i=1;i<this.logData.length-2;i+=2)(t=this.logData[i].match(/[\d\.]+/))&&(t=t[0],this.parsedLog[t[0]]||={},this.parsedLog[t[0]][t]=this.fixChanges(this.logData[i+1]),this.rawLog[t[0]]||={},this.rawLog[t[0]][t]=this.fixRawChanges(this.logData[i+1]));this.tabIndex=parseInt(Object.keys(this.parsedLog).slice(-1)),this.latestUpd=Object.keys(this.parsedLog[Object.keys(this.parsedLog).slice(-1)]).slice(0,1),updateWindow(35)}},toggleLog:function(e){e.children[2].style.display="none"==e.children[2].style.display?"block":"none",e.children[0].innerHTML="none"==e.children[2].style.display?"arrow_drop_down":"arrow_drop_up"},fixChanges:function(e){return"<li class='changeText' style='color: rgba(255, 255, 255, 0.5);'>"+e.split(String.fromCharCode(10)).map((e=>((e.startsWith("*")||e.startsWith(" *"))&&(e=""),(e.startsWith("@")||e.startsWith(" @"))&&(e=""),e.trim().replace("- ","")))).filter((e=>e.length)).join('</li><li class="changeText" style="color: rgba(255, 255, 255, 0.5);">')+"</li>"},fixRawChanges:function(e){return e.split(String.fromCharCode(10)).map((e=>e.trim())).filter((e=>e.length))},switchTab:function(e){this.tabIndex!=e&&(this.tabIndex=e,updateWindow(35))},viewAll:function(){B=ae.getSubGameVersion(),saveVal("lastViewedUpdate",B),showWindow(35,!0)},gen:function(){var e="";if(this.logData)if(B!=ae.getSubGameVersion()){updateAd.style.display="none";var t=this.rawLog[parseInt(Object.keys(this.rawLog).slice(-1))][u.gameVersion];e+="<div class='logVersionHed' style='background:url("+ae.assetsUrl("/img/backgrounds/whatsnew.png")+");'>Whats New in v"+u.gameVersion+" ?</div>";var i=!1;for(var n in t)if(t[n].startsWith("*")||t[n].startsWith(" *"))i&&(e+="</div>"),i=!0,e+="<div class='mapListCat'>"+t[n].substr(1)+"</div><div class='setBodH' style='padding-top:20px;padding-bottom:20px;'>";else{var s=t[n].substr(1);" "==s.substr(0,1)&&(s=s.substr(1)),e+=t[n].startsWith("@")?"<img class='logImg' src='"+s+"'><div></div>":"- <span style='color:rgba(255,255,255,0.6);'>"+s+"</span><div></div>"}e+="</div><div class='viewAllUpdates' onclick='windows[34].viewAll()'>View All Updates</div>"}else{var a=Object.keys(this.parsedLog).reverse(),r="<div style='height:20px;'></div><div class='bigMenTabs'>";for(var n in a)r+="<div class='bigMenTab"+(this.tabIndex==parseInt(a[n])?" bigMenTabA":"")+"' onclick='windows[34].switchTab("+parseInt(a[n])+")'>v"+a[n]+".x</div>";r+="</div>";var o="<div id='mailList'>";for(var n in this.parsedLog[this.tabIndex])o+="<div class='mailObj' onclick='windows[34].toggleLog(this)'><i class='material-icons' style='vertical-align:middle;margin-top:-10px;font-size:50px;float:right;margin-right:10px;color:#fff'>"+(this.latestUpd==n?"arrow_drop_up":"arrow_drop_down")+"</i><div class='mailFrom' style='color: #fbc02d;'>"+(this.latestUpd==n?"LATEST UPDATE":"UPDATE")+" "+n+"</div><div style='margin-top:10px;"+(this.latestUpd==n?"":"display:none;")+"'>"+this.parsedLog[this.tabIndex][n]+"</div></div>";e+="<div style='margin-bottom:15px'>"+r+"</div>",e+=o+="</div>"}else this.fetchLog(),e="Loading...";return e}},{header:S.t("windows.premium.header"),label:"premium",width:1e3,maxH:"calc(100% - 350px)",gen:function(){return"<div style='font-size: 24px;margin-bottom:20px;background:#000;width:100%;text-align:center;padding-bottom:10px;padding-top:10px;'>Premium Benefits</div><div style='background-color:#333;padding:15px;border-radius:6px;border:5px solid var(--yellow)'>"+u.premiumBenifits.map((e=>"<div class='settNameSmall premText'><i class='material-icons'>grade</i>"+e+"</div>")).join("")+"</div>"}},{header:S.t("windows.trade.header"),width:1146,label:"trade",trades:[[],[]],inventories:[],trader:null,inv:null,otherInv:null,hideScroll:!0,gen:function(){var e=ve.players.findBySid(this.trader);if(!e)return"Error";this.trades=[[],[]],this.inventories.length=0;var t=[],i="";this.inventories[0]=ae.sortItems(this.inv,ve.store.skins);var n="<div>";n+="<div class='tHolderL'><div class='tListN inv'>Your Inventory</div><div id='invList0' class='tList' style='height: 225px;'>";for(var s=0;s<this.inventories[0].length;s++)if((Ee=ve.store.skins[this.inventories[0][s].i])&&this.inventories[0][s].c){var a=r=Ee.free||Ee.noSale||Ee.blackM||Ee.opensea||Ee.itemShop&&1==Ee.itemShop;if(!Ee.free&&Re&&Re.isDev&&(r=!1),r&&we.tmp.hideNonTrade)continue;n+="<div id='trd_inv_0_"+this.inventories[0][s].i+"' class='tItemHolder' onclick='windows[36].add("+this.inventories[0][s].i+")' style='border: 2px solid "+ve.store.rarities[Ee.rarity].color+";' oncontextmenu='openSales("+this.inventories[0][s].i+")' data-index='"+this.inventories[0][s].i+"' onmouseover='createTip(this)' onmouseout='cancelTip()'>"+(Ee.type&&Ee.type==Te.SPRAY?"<div class='tItemSprayImg' style='background: url(&quot;"+Ee.thumbnail+"&quot;);"+ae.getFrameAnim(Ee,"sprayAnm")+"'></div>":"<img draggable='false' class='tItemImg' loading='lazy' src='"+Ee.thumbnail+"'>")+"<div class='tItemN'>"+Ee.name+"</div><div class='tItemCnt'>x"+this.inventories[0][s].c+"</div>"+(a?"<div class='tItemBound'><span class='material-icons' style='font-size:30px;color:#fff;'>lock</span></div>":"")+"</div>",Ee.type&&Ee.type==Te.SPRAY&&Ee.frames&&-1==t.indexOf(Ee.frames)&&t.push(Ee.frames)}n+="</div>",n+="<input class='tSearch' type='text' placeholder='Search Item' onkeyup='windows[36].searchItems(this, 0)'>",n+="<div id='tHeader0' class='tListN trade'>You <span id='tradeTotal0' class='tTotal'>0/"+(Re.premiumT?u.tradeMaxOutP:u.tradeMaxOut)+"</span><span id='tradeReady0' class='tReady'></span></div><div id='tradeList0' class='tList' style='height:125px;margin-bottom: 5px;'></div><div class='estOfferVal' id='offerVal0'>Est. Value <span style='color: var(--red);'>0</span> KR</div><label class='tSubHolder' onmouseenter='playTick()'><span id='tSubName'>Accept Offer - 10 KR</span><input id='tSubOffer' type='checkbox' onclick='windows[36].accept()'><div class='tSubCheck'></div></label></div>",this.inventories[1]=ae.sortItems(this.otherInv,ve.store.skins),n+="<div class='tHolderR'><div class='tListN inv'>"+e.alias+"'s Inventory</div><div id='invList1' class='tList' style='height: 225px;'>";for(s=0;s<this.inventories[1].length;s++)if((Ee=ve.store.skins[this.inventories[1][s].i])&&this.inventories[1][s].c){var r;a=r=Ee.free||Ee.noSale||Ee.blackM||Ee.opensea||Ee.itemShop&&1==Ee.itemShop;if(!Ee.free&&Re&&Re.isDev&&(r=!1),r&&we.tmp.hideNonTrade)continue;n+="<div id='trd_inv_1_"+this.inventories[1][s].i+"' class='tItemHolder' style='border: 2px solid "+ve.store.rarities[Ee.rarity].color+";' onclick='windows[36].request("+this.inventories[1][s].i+")' oncontextmenu='openSales("+this.inventories[1][s].i+")' data-index='"+this.inventories[1][s].i+"' onmouseover='createTip(this)' onmouseout='cancelTip()'>"+(Ee.type&&Ee.type==Te.SPRAY?"<div class='tItemSprayImg' style='background: url(&quot;"+Ee.thumbnail+"&quot;);"+ae.getFrameAnim(Ee,"sprayAnm")+"'></div>":"<img draggable='false' class='tItemImg' loading='lazy' src='"+Ee.thumbnail+"'>")+"<div class='tItemN'>"+Ee.name+"</div><div class='tItemCnt'>x"+this.inventories[1][s].c+"</div>"+(a?"<div class='tItemBound'><span class='material-icons' style='font-size:30px;color:#fff;'>lock</span></div>":"")+"</div>",Ee.type&&Ee.type==Te.SPRAY&&Ee.frames&&-1==t.indexOf(Ee.frames)&&t.push(Ee.frames)}if(n+="</div>",n+="<input class='tSearch' type='text' placeholder='Search Item' onkeyup='windows[36].searchItems(this, 1)'>",n+="<div id='tHeader1' class='tListN trade'>"+e.alias+" <span id='tradeTotal1' class='tTotal'>0/"+(e.premiumT?u.tradeMaxOutP:u.tradeMaxOut)+"</span><span id='tradeReady1' class='tReady'></span></div><div id='tradeList1' class='tList' style='height:125px;margin-bottom: 5px;'></div><div class='estOfferVal' id='offerVal1'>Est. Value <span style='color: var(--red);'>0</span> KR</div><label class='tSubHolder' onmouseenter='playTick()'><span id='tDecName'>Decline Offer</span><input id='tDecOffer' type='checkbox' onclick='windows[36].decline()'><div class='tDecCheck'></div></label></div>",n+="<div id='tradeChatHolder'><div id='tradeChatInner'><div id='tradeChatList'></div><input id='tradeChatInput' placeholder='Enter Message' maxlength='70' autocomplete='off'></input></div></div>",n+="</div>",t.length){i+="<style>";for(s=0;s<t.length;s++)i+="@keyframes sprayAnm"+t[s]+" {100%{background-position:-"+60*t[s]+"px}}";i+="</style>"}return i+n},searchItems:function(e,t){for(var i,n=e.value,s=this.inventories[t],a=0;a<s.length;a++){if(i=!1,n&&ve.store.skins[s[a].i]){if(ve.store.skins[s[a].i].keyW&&ae.compareString(n,ve.store.skins[s[a].i].keyW))i=!0;else if(ve.store.skins[s[a].i].drop&&ae.compareString(n,"drops"))i=!0;else if(ve.store.skins[s[a].i].limT&&ae.compareString(n,ve.store.skins[s[a].i].limT))i=!0;else if(ve.store.skins[s[a].i].weapon&&ae.compareString(n,ve.weapons[ve.store.skins[s[a].i].weapon-1].name))i=!0;else if(ae.compareString(n,ve.store.skins[s[a].i].name))i=!0;else if(ve.store.skins[s[a].i].creators)for(var r=0;r<ve.store.skins[s[a].i].creators.length;r++)if(ae.compareString(n,ve.store.skins[s[a].i].creators[r])){i=!0;break}}else i=!0;var o=document.getElementById("trd_inv_"+t+"_"+s[a].i);o&&(o.style.display=i?"inline-block":"none")}},request:function(e){var t=ve.store.skins[e];if(t){var i=t.free||t.noSale||t.blackM||t.opensea||t.itemShop&&1==t.itemShop;!t.free&&Re&&Re.isDev&&(i=!1),i||this.active&&me.send("utrd",e,2)}},add:function(e){var t=ve.store.skins[e];if(t){var i=t.free||t.noSale||t.blackM||t.opensea||t.itemShop&&1==t.itemShop;!t.free&&Re&&Re.isDev&&(i=!1),i||this.active&&me.send("utrd",e,1)}},addItem:function(e,t){var i=t==Ae.id?0:1,n=ve.store.skins[e];this.trades[i][e]?this.trades[i][e].c++:this.trades[i][e]={i:e,c:1};var s=document.getElementById("trd_sel_"+i+"_"+e);if(Ee=this.trades[i][e],s?s.children[2].innerHTML="x"+Ee.c:document.getElementById("tradeList"+i).insertAdjacentHTML("beforeend","<div id='trd_sel_"+i+"_"+e+"' class='tItemHolder' oncontextmenu='openSales("+e+")' "+(i?"":"onclick='windows[36].remove("+e+")' ")+"style='border: 2px solid "+ve.store.rarities[n.rarity].color+";' data-index='"+e+"' onmouseover='createTip(this)' onmouseout='cancelTip()'>"+(n.type&&n.type==Te.SPRAY?"<div class='tItemSprayImg' style='background: url(&quot;"+n.thumbnail+"&quot;);"+ae.getFrameAnim(n,"sprayAnm")+"'></div>":"<img draggable='false' class='tItemImg' loading='lazy' src='"+n.thumbnail+"'>")+"<div class='tItemN'>"+n.name+"</div><div class='tItemCnt'>x"+Ee.c+"</div></div>"),!i){s=document.getElementById("trd_inv_0_"+e);var a=this.inv.find((t=>t.i==e));s&&a&&(s.children[2].textContent="x"+(a.c-Ee.c))}document.getElementById("tradeTotal"+i).textContent=document.getElementById("tradeTotal"+i).textContent.replace(/\d{1,2}\//g,this.trades[i].reduce(((e,t)=>e+t.c),0)+"/");var r=this.trades[i].reduce(((e,t)=>e+Math.round((ie.estimateValue(t.i)||0)*t.c)),0);document.getElementById("offerVal"+i).children[0].innerHTML=ae.commaNumber(r)},remove:function(e){this.active&&me.send("utrd",e,0)},removeItem:function(e,t){var i=t==Ae.id?0:1;if(this.trades[i][e]){this.trades[i][e].c--;var n=document.getElementById("trd_sel_"+i+"_"+e);if(this.trades[i][e].c<=0?(delete this.trades[i][e],n&&n.remove(),cancelTip()):n.children[2].innerHTML="x"+this.trades[i][e].c,!i){n=document.getElementById("trd_inv_0_"+e);var s=this.inv.find((t=>t.i==e)),a=this.trades[i][e]?this.trades[i][e].c:0;n&&s&&(n.children[2].textContent="x"+(s.c-a))}document.getElementById("tradeTotal"+i).textContent=document.getElementById("tradeTotal"+i).textContent.replace(/\d{1,2}\//g,this.trades[i].reduce(((e,t)=>e+t.c),0)+"/");var r=this.trades[i].reduce(((e,t)=>e+Math.round((ie.estimateValue(t.i)||0)*t.c)),0);document.getElementById("offerVal"+i).children[0].innerHTML=ae.commaNumber(r)}},cancel:function(){this.active&&me.send("ctrd")},canceled:function(){this.active=!1,showWindow(0)},accept:function(){this.active&&!tSubOffer.disabled&&me.send("atrd")},accepted:function(e){0==(e==Ae.sid?0:1)?(tSubOffer.disabled=!0,tSubOffer.checked=!0,tHeader0.style.backgroundColor="#5ce05a",tradeReady0.textContent="READY"):(tHeader1.style.backgroundColor="#5ce05a",tradeReady1.textContent="READY")},decline:function(){this.active&&me.send("dtrd")},process:function(e){tSubName.textContent="Loading "+e},done:function(){showWindow(0),Ac(-1,null,"modes.trade.success",2,"#5ce05a")},failed:function(e){showWindow(0),Rc(-1,null,e,2,"#ed4242")},updateButtons:function(){tSubOffer.disabled=!1,tSubOffer.checked=!1,tHeader0.style.backgroundColor="#ed4242",tHeader1.style.backgroundColor="#ed4242",tradeReady0.textContent="",tradeReady1.textContent="",tSubName.textContent="Accept Offer - 10 KR"},close:function(){this.cancel(),cancelTip()}},{header:S.t("windows.waist.header"),label:"waist_selection",width:877,height:"calc(100% - 300px)",sticky:!0,dark:!0,hideScroll:!0,gen:()=>sa("selectWaist",6),close:()=>cancelTip(),clear:()=>{ea(window.event),selectWaist(-1,!0,!0)}},{header:S.t("windows.face.header"),label:"face_selection",width:877,height:"calc(100% - 300px)",sticky:!0,dark:!0,hideScroll:!0,gen:()=>sa("selectFace",7),close:()=>cancelTip(),clear:()=>{ea(window.event),selectFace(-1,!0,!0)}},{header:S.t("windows.shoe.header"),label:"shoe_selection",width:877,height:"calc(100% - 300px)",sticky:!0,dark:!0,hideScroll:!0,gen:()=>sa("selectShoe",8),close:()=>cancelTip(),clear:()=>{ea(window.event),selectShoe(-1,!0,!0)}},{header:S.t("windows.scope.header"),label:"scope_selection",width:900,dark:!0,gen:function(){var e="<div>"+gs("scopeBorderCol")+gs("scopeBorders")+gs("scopeBorderOpac")+gs("scopeWidth")+gs("scopeHeight")+gs("scopeOpac")+"</div>";if(e+="<div id='skinList' style='margin-top:18px'><div class='noBtnCard blackShad' style='height:140px;border:5px solid lightgrey' onclick='selectScope(-1)' onmouseenter='playTick()'>None<div class='skinRandom blackShad' style='top: 60px;' onmouseenter='playTick()'>X</div></div>",null!=ve.weaponConfig[ve.classConfig[kt].loadout[0]].scope){e+="<div class='noBtnCard' style='height:140px;border:5px solid lightgrey'><div style='color: #fff;margin-top: 33px;' onclick='window.windows[40].newPop()' onmouseenter='playTick()'>ADD<br>CUSTOM</div></div>";for(var t=0;t<Kt.length;++t)if(Ee=Kt[t]){var i=Ee[0].replace(/[^a-zA-Z0-9 _-]+/gim,""),n=Jt(Ee[1]);e+="<div class='noBtnCard blackShad' style='height:140px;border:5px solid #fc5a4e' onclick='selectScope(-2, &quot;"+n+"&quot;)'>"+(i||"Custom")+"<div class='itemOwn' style='margin-top:1px'>Custom</div><img loading='lazy' class='noBtnImgR' draggable='false' src='"+(n||"")+"' onmouseenter='playTick()' /><div class='selctDelBtn' onmouseenter='playTick()'onclick='removeScope("+t+")'>X</div></div>"}for(t=0;t<ke.length;++t)(Ee=ke[t])&&(e+="<div class='noBtnCard blackShad' style='height:140px;border:5px solid lightgrey' onclick='selectScope("+t+")'>"+Ee.name+"<div class='itemOwn' style='margin-top:1px'>"+S.t("generic.default")+"</div><img loading='lazy' class='noBtnImgR' draggable='false' src='"+ae.assetsUrl("/textures/scopes/scope_"+Ee.id+"."+(Ee.type||"png"))+"' onmouseenter='playTick()' /></div>")}return e+="</div>"},newPop:function(){genericPopup("<div class='pubHed'>New Image</div><div style='font-size:20px;color:#fff'><div style='margin-top: 3px;font-size: 22px;color: rgba(255, 255, 255, 0.7);'>Name:<input type='text' id='newCustomName' class='inputGrey2' placeholder='Name'></div><div style='margin-top: 3px;font-size: 22px;color: rgba(255, 255, 255, 0.7);'>Image:<input type='url' id='newCustomImg' class='inputGrey2' placeholder='Image URL'></div><div class='mapFndB' onclick='window.windows[40].addNew()' onmouseover='playTick(0.1)' style='background-color:#fc5a4e;width: 380px;margin-top: 10px;'>Add</div></div>","imageNewPop")},addNew:function(){var e=document.getElementById("newCustomImg"),t=document.getElementById("newCustomName");if(!(t&&e&&e.value&&t.value))return zs(null,"Something Went Wrong");var i=t.value.replace(/[^a-zA-Z0-9 _-]+/gim,"");if(!i.length)return zs(null,"Invalid Name");var n=Jt(e.value);if(!n)return zs(null,"Invalid Image");Kt.push([i,n]),setCustomScopes(Kt,!0),clearPops(),updateWindow(41)}},{header:S.t("windows.maps.header"),label:"host_type",width:985,dark:!0,popup:!0,hideScroll:!0,gen:function(){return"<div class='serverHostOpH'>Select a Server Type to Host</div><div class='serverHostOpGroup'><div class='serverHostOp serverHostOp-small' style='margin-bottom:15px;background-image:url(&quot;"+ae.assetsUrl("img/backgrounds/server_raids_2.png")+"&quot;);' onclick='playSelect(0.1);openHostWindow(false, 4)' onmouseenter='playTick()'>Raids</div><div class='serverHostOp serverHostOp-small' style='margin-bottom:15px;background-image:url(&quot;"+ae.assetsUrl("img/backgrounds/server_zombies_2.png")+"&quot;);' onclick='playSelect(0.1);openHostWindow(false, 3)' onmouseenter='playTick()'>Zombies</div><div class='serverHostOp serverHostOp-small' style='background-image:url(&quot;"+ae.assetsUrl("img/backgrounds/server_comp_2.png")+"&quot;);' onclick='playSelect(0.1);openHostWindow(false, 1)' onmouseenter='playTick()'>Comp</div></div><div class='serverHostOp' style='margin-right:20px;background-image:url(&quot;"+ae.assetsUrl("img/backgrounds/customs.png")+"&quot;);' onmouseenter='playTick()' onclick='playSelect(0.1);openHostWindow(false, 0)'>Custom</div><div class='serverHostOp' onmouseenter='playTick()' style='background-image:url(&quot;"+ae.assetsUrl("/img/host-bg/2.png")+"&quot;);' onclick='playSelect(0.1);openHostWindow(false, 2)'>Dedicated</div>"}},{header:S.t("windows.pet.header"),label:"pet_selection",width:877,height:"calc(100% - 300px)",sticky:!0,dark:!0,hideScroll:!0,gen:()=>sa("selectPet",9),close:()=>cancelTip(),clear:()=>{ea(window.event),selectPet(-1,!0,!0)}},{header:S.t("windows.wrist.header"),label:"wrist_selection",width:877,height:"calc(100% - 300px)",sticky:!0,dark:!0,hideScroll:!0,gen:()=>sa("selectWrist",11),close:()=>cancelTip(),clear:()=>{ea(window.event),selectWrist(-1,!0,!0)}},{header:S.t("windows.streaks.header"),label:"streak_selection",width:877,dark:!0,selected:[],goBack:function(){showWindow(3)},gen:function(){var e="<div class='winBackH'><div class='custBack' onclick='playSelect(0.1);goBackWindow(44)' onmouseenter='playTick();'><span class='material-icons custBackArr'>arrow_back</span></div><div class='winSelH'>Select Streaks</div><div class='winClose' onclick='playSelect(0.1);closWind()' onmouseenter='playTick();'><span class='material-icons winCloseArr'>close</span></div></div>",t=[us,ps,fs],i=ve.streaks.filter((e=>!e.devOnly||e.devOnly&&Re&&Re.isDev)).sort(((e,t)=>(null==e.kills?0:e.kills)-(null==t.kills?0:t.kills))).sort(((e,t)=>(null==e.slot?0:e.slot)-(null==t.slot?0:t.slot)));e+="<div id='custStreakListH'>";for(var n=0;n<i.length;++n)if(Ee=i[n]){Ee.slot,Ee.index;var s=-1==t[Ee.slot||0];e+="<div class='streakCard blackShad' style='height: 165px;border:5px solid lightgrey'"+(s?" onclick='selectStreak("+Ee.index+", "+(Ee.slot||0)+");cancelTip()'":"")+" data-index='"+Ee.index+"' onmouseover='createStreakTip(this)' onmouseout='cancelTip()' id='streakSel"+(Ee.slot||0)+"_"+Ee.index+"'>"+Ee.name+"<div class='itemOwn'>Slot "+((Ee.slot||0)+1)+" | "+(Ee.kills||0)+" kills</div><img loading='lazy' draggable='false' class='streakImg' onmouseenter='playTick()' src='"+ae.assetsUrl("/img/streaks/"+Ee.index+".png")+"' />"+(s?"":"<div class='lockedCard'><span class='material-icons' style='font-size: 70px;color:#fff'>lock</span></div>")+"</div>"}e+="</div>",e+="<div id='custStreakSelH'>";for(n=0;n<3;++n)e+="<div class='streakCard blackShad' style='height: 165px;border:5px solid lightgrey' onclick='selectStreak(-1, "+n+")'><div class='streakActionOvrl'><div class='streakActionHol'><div class='streakActionB'><span class='material-icons' style='font-size:70px;color:#fff;'>close</span></div></div></div>"+((Ee=ve.streaks[t[n]])?Ee.name:"None")+"<div class='itemOwn'>Slot "+(n+1)+"</div>"+(Ee?"<img loading='lazy' draggable='false' class='streakImg' onmouseenter='playTick()' src='"+ae.assetsUrl("/img/streaks/"+(Ee?Ee.index:1)+".png")+"'/>":"<div class='skinRandom blackShad' style='top:68px;left: 57px;'>?</div>")+"</div>";return e+="</div>"},close:()=>cancelTip()},{header:S.t("windows.charm.header"),label:"charm_selection",width:877,height:"calc(100% - 300px)",sticky:!0,dark:!0,hideScroll:!0,gen:()=>sa("selectCharm",12),close:()=>cancelTip(),clear:()=>{ea(window.event),selectCharm(-1,!0,!0)}},{label:"terms",dark:!1,width:1460,dark:!0,hideScroll:!1,gen:function(){return'\n\t\t\t<iframe width=1460 height=1460 border=0 src="https://frvr.com/legal/krunker/"></iframe>\n\t\t'}},{header:S.t("windows.maps.header"),label:"host_type",width:985,dark:!0,popup:!0,hideScroll:!0,gen:function(){return"<div class='serverHostOpH'>Select a Server</div><div class='serverHostOpGroup'><div class='serverHostOp serverHostOp-small' style='margin-bottom:15px;background-image:url(&quot;"+ae.assetsUrl("img/backgrounds/server_raids_2.png")+"&quot;);' onclick='playSelect(0.1);openServerWindow(2)' onmouseenter='playTick()'>Raids</div><div class='serverHostOp serverHostOp-small' style='margin-bottom:15px;background-image:url(&quot;"+ae.assetsUrl("img/backgrounds/server_zombies_2.png")+"&quot;);' onclick='playSelect(0.1);openServerWindow(3)' onmouseenter='playTick()'>Zombies</div><div class='serverHostOp serverHostOp-small' style='background-image:url(&quot;"+ae.assetsUrl("img/backgrounds/server_trade.png")+"&quot;);' onclick='playSelect(0.1);openServerWindow(4)' onmouseenter='playTick()'>Trade Plaza</div></div><div class='serverHostOp' style='margin-right:20px;background-image:url(&quot;"+ae.assetsUrl("/img/host-bg/2.png")+"&quot;);' onmouseenter='playTick()' onclick='playSelect(0.1);openServerWindow(0)'>Public</div><div class='serverHostOp' onmouseenter='playTick()' style='background-image:url(&quot;"+ae.assetsUrl("img/backgrounds/customs.png")+"&quot;);' onclick='playSelect(0.1);openServerWindow(1)'>Customs</div>"}},{header:S.t("windows.esports.header"),width:985,dark:!0,popup:!0,list:[{description:"NACK is currently the official pickup server for North America. They provide both a casual and competitive experience for players trying to get better at Krunker.io and start competing.",link:"https://discord.gg/nJmqWam3tj",image:ae.assetsUrl("/img/esports/nack.png")},{description:"KPC is the largest competitive Krunker community for Europe. They host many community events on the server, as well as supporting the competitive scene through pickup games.",link:"https://discord.gg/k6TR9hT",image:ae.assetsUrl("/img/esports/kpc.png")},{description:"CKA is the official competitive hub for Asia, where they host PUGs, monthly tournaments and other events with cash prizes. Anyone is welcome to participate once they meet the requirements.",link:"https://discord.gg/bRs2PVzZza",image:ae.assetsUrl("/img/esports/cka.png")}],gen:function(){let e='<div class="scrimHeader">Regional Pickup Servers</div>\n\t\t\t<div class="scrimSub">Official community-run scrim servers. Each server may have different sign-up requirements and events.</div>\n\t\t\t<div class="scrimHolder">';for(let t=0;t<this.list.length;t++)e+='<a target="_blank" href="'+this.list[t].link+'">\n\t\t\t\t<img class="scrimImage" src="'+this.list[t].image+'">\n\t\t\t</a>\n\t\t\t<div class="scrimDesc">'+this.list[t].description+'\n\t\t\t\t<div class="scrimLink">Join here: <a target="_blank" href="'+this.list[t].link+'">'+this.list[t].link+"</a></div>\n\t\t\t</div>";return e+="</div></div>",e}},{header:S.t("windows.back.header"),label:"back_selection",width:877,height:"calc(100% - 300px)",sticky:!0,dark:!0,hideScroll:!0,gen:function(){return sa("selectBack",14)},close:()=>cancelTip(),clear:()=>{ea(window.event),selectBack(-1,!0,!0)}},{header:S.t("windows.head.header"),label:"head_selection",width:877,height:"calc(100% - 300px)",sticky:!0,dark:!0,hideScroll:!0,gen:function(){return sa("selectHead",15)},close:()=>cancelTip(),clear:()=>{ea(window.event),selectHead(-1,!0,!0)}},{header:S.t("windows.playercard.header"),label:"playercard_selection",width:877,height:"calc(100% - 300px)",sticky:!0,dark:!0,hideScroll:!0,gen:function(){return sa("selectPlayerCard",16)},close:()=>cancelTip(),clear:()=>{ea(window.event),selectPlayerCard(-1,!0,!0)}},{header:"",label:"update_email",width:877,dark:!0,hideScroll:!0,gen:function(){return"<div style='position:relative;z-index:9'><div id='referralHeader'>Email Required</div><input id='accEmail' type='email' placeholder='Email' class='accountInput'></input><div id='emailError' style='margin-top:20px;margin-bottom:20px;font-size:18px;color:rgba(255,255,255,0.5);text-align:center'></div><div class='accBtn button buttonG' onclick='windows[52].submitEmail()' style='width: calc(100% - 10px);margin-left: 0px;margin-right: 0px;'>Submit Email</div>"},submitEmail:function(){me.send("cemail",accEmail.value)}}],window.searchItems=function(e,t){t=t||"skinCard";for(var i=e.value,n=document.querySelectorAll("#menuWindow>#skinList>."+t),s=2;s<n.length;s++){var a=!1,r=n[s].getAttribute("data-index");if(i&&ve.store.skins[r]){if(ve.store.skins[r].keyW&&ae.compareString(i,ve.store.skins[r].keyW))a=!0;else if(ve.store.skins[r].drop&&ae.compareString(i,"drops"))a=!0;else if(ve.store.skins[r].limT&&ae.compareString(i,ve.store.skins[r].limT))a=!0;else if(ve.store.skins[r].weapon&&ae.compareString(i,ve.weapons[ve.store.skins[r].weapon-1].name))a=!0;else if(ae.compareString(i,ve.store.skins[r].name))a=!0;else if(ve.store.skins[r].creators)for(var o=0;o<ve.store.skins[r].creators.length;o++)if(ae.compareString(i,ve.store.skins[r].creators[o])){a=!0;break}}else a=!0;n[s].style.display=a?"inline-block":"none"}},window.fetchMatches=function(e){return fetch(u.matchmakerURL+"/game-list?hostname="+location.hostname,{cache:"no-cache"}).then((e=>e.json())).catch((t=>e({}))).then((t=>{let i={};if(t.games)for(var n=0;n<t.games.length;n++){var[s,a,r,o,l]=t.games[n];if(l&&l.c){var c=ae.escapeStr(l.i);i[c]=(i[c]||0)+Math.min(r,o)}}e(i)}))},window.clientExitPopup=function(){var e=[m("div",{style:"color:#fff;font-size:20px;position:relative;margin-bottom:15px;"},"Are you sure you want to close krunker?"),m("#confirmBtn",{onclick:()=>closeClient(),onmouseover:()=>playTick(.1)},"YES"),m("#declineBtn",{onclick:()=>clearPops(),onmouseover:()=>playTick(.1)},"NO")];genericPopup(e,"clientExitPop")},window.closeClient||=function(){};var Ps=null;function Es(e){if(!window.ethereum)return e("Please install MetaMask first.");if(Ps)Ps.eth.getCoinbase().then((t=>{if(!t)return e("Please activate MetaMask first.");var i=t.toLowerCase();return e(null,Ps,i)})).catch((t=>e("Please activate MetaMask first.")));else try{window.ethereum.enable().then((t=>{(Ps=new Web3(window.ethereum)).eth.getCoinbase().then((t=>{if(!t)return e("Please activate MetaMask first.");var i=t.toLowerCase();return e(null,Ps,i)})).catch((t=>e("Please activate MetaMask first.")))}))}catch(t){return e("You need to allow MetaMask.")}}function Ds(e){return d||!Re||Re.metamask?void 0:e?void Es((function(t,i,n){if(t)return alert(t);try{i.eth.personal.sign("I am signing my one-time nonce: "+e,n,"").then((e=>{me.send("vmms",e,n)}))}catch(e){return alert("You need to sign the message to be able to log in.")}})):zs(null,"Please Try later")}function Os(e){Re&&(Re.metamask=e),zs("SUCCESS",null,"Metamask Linked!"),updateWindow(5)}function Ls(){Re&&(Re.metamask=null),zs("SUCCESS",null,"Metamask Unlinked!"),updateWindow(5)}function js(e){for(var t="<div style='color:#fff;font-size:20px;position:relative;margin-bottom:15px;text-align: center;'>NFT'S Claimed</div><div id='skinList' style='text-align: center;'>",i=[],n=0;n<e.length;n++)e[n]=parseInt(e[n]),Re.addSkin(e[n]),(Ee=ve.store.skins[e[n]])&&(t+="<div class='tItemHolder' style='border: 2px solid "+ve.store.rarities[Ee.rarity].color+";' onclick='openSales("+e[n]+")'>"+(Ee.type&&Ee.type==Te.SPRAY?"<div class='tItemSprayImg' style='background: url(&quot;"+Ee.thumbnail+"&quot;);"+ae.getFrameAnim(Ee,"sprayAnm")+"'></div>":"<img draggable='false' class='tItemImg' loading='lazy' src='"+Ee.thumbnail+"'>")+"<div class='tItemN'>"+Ee.name+"</div></div>",Ee.type&&Ee.type==Te.SPRAY&&Ee.frames&&-1==i.indexOf(Ee.frames)&&i.push(Ee.frames));if(t+="</div>",i.length){var s="<style>";for(n=0;n<i.length;n++)s+="@keyframes sprayAnm"+i[n]+" {100%{background-position:-"+68*i[n]+"px}}";t=(s+="</style>")+t}genericPopup(t,"nftPop")}function zs(e,t,i,n){var s="";t&&"object"==typeof t&&(t=t.join("<br>")),i&&"object"==typeof i&&(i=i.join("<br>")),"SUCCESS"==e?(n||(n="Success"),s="<div style='width:100%;text-align:center'><div><i class='material-icons' style='font-size:80px;color:#3be354'>done</i></div><div style='font-size:20px;color:rgba(255,255,255,0.5)'>"+(i||"Success!")+"</div></div>"):"INFO"==e?(n||(n="Info"),s="<div style='width:100%;text-align:center'><div><i class='material-icons' style='font-size:80px;color:rgba(255,255,255,0.9)'>info</i></div><div style='font-size:20px;color:rgba(255,255,255,0.9)'>"+(i||"Warning!")+"</div></div>"):(n||(n="Error"),s="<div style='width:100%;text-align:center'><div><i class='material-icons' style='font-size:80px;color:#e33b3b'>clear</i></div><div style='font-size:20px;color:rgba(255,255,255,0.5)'>"+(t||S.get("social.market.failed"))+"</div></div>"),genericPopup(s,"INFO"==e?"infoPop":"responsePop")}function Bs(e){if(null!=e){var t=m("div",{style:"width:100%;text-align:center"},[m("div",{class:"lds-ring sm"},[m("div"),m("div"),m("div"),m("div")]),m("div",{style:"font-size:20px;color:rgba(255,255,255,0.5)"},e)]);genericPopup(t,"loadingPop")}else genericPop.classList.includes("loadingPop")&&clearPops()}function Ns(){genericPopup("<div style='width:100%;text-align:center;color:#fff;font-size:24px;margin-bottom:15px'><br>We are discontinuing this version of the Krunker Client. If you want to update your client to the latest version. Please download and install the new client</div><div><ul style='padding:0;display:flex;list-style:none;text-align:center;margin:0;margin-top:-10px'><li style='display: flex;flex-basis:200px;-webkit-box-flex:1;flex-grow:1;margin-right:10px'><a href='//client2.krunker.io/setup.exe?v=1.9.7' style='display:block;width:100%;padding-top:1em;'><img src ='./img/windows.png' style='width:80px;height:80px;display:block;margin:0 auto 10px;'>Windows Installer</a></li><li style='display: flex;flex-basis:200px;-webkit-box-flex:1;flex-grow:1;'><a href='//client2.krunker.io/setup.dmg?v=1.9.7' style='display: block;width: 100%;padding-top:1em;'><img src ='./img/mac.png' style='width:80px;height:80px;display:block;margin:0 auto 10px;'>macOS Installer</a></li><li style='display: flex;flex-basis:200px;-webkit-box-flex:1;flex-grow:1;'><a href='//client2.krunker.io/setup.AppImage?v=1.9.7' style='display: block;width: 100%;padding-top:1em;'><img src ='./img/linux.png' style='width:80px;height:80px;display:block;margin:0 auto 10px;'>Linux Installer</a></li></ul></div>","clientPop")}window.linkMetaPop=function(){if(!d&&Re&&!Re.metamask){var e=[m("div",{style:"color: #ffffff;font-size: 24px;"},"Re-enter Krunker Password"),m("input.accountInput",{id:"accPass2",type:"password",style:"margin-top: 5px",placeholder:S.t("generic.password"),onclick:()=>()=>{},onmouseover:()=>playTick(.1)},"YES"),m(".metaLoginBtn",{onclick:()=>requestMetaLink()},"Link Metamask")];genericPopup(e,"metaPop")}},window.requestMetaLink=function(){Es((function(e,t){return e?alert(e):(Bs("Please Wait..."),void me.send("vmm",accPass2.value))}))},window.unlinkMetaPop=function(){if(!d&&Re&&Re.metamask){var e=[m("div",{style:"color: #ffffff;font-size: 24px;"},"Are you sure you want to unlink?"),m(".metaLoginBtn",{onclick:()=>unlinkMeta()},"Unlink")];genericPopup(e,"metaPop")}},window.unlinkMeta=function(){Bs("Please Wait..."),me.send("rmm")},window.promoPopup=function(e){var t=[m("img",{src:ae.assetsUrl("/img/gsupps_logo2.png"),style:"margin-bottom: 20px;width: 100%;"}),m("div",{style:"color:#cfcfcf;font-size:23px;text-align:center;"},["You won a ",m("span",{style:"color:#ffb800;"},"Free $40 GamerSupps")]),m("input#promoCode",{type:"text",value:"XXXX-XXXX-XXXX-XXXX-XXXX-XXXX",disabled:"true"}),m("div",{style:"color: #ffffff;font-size: 19px;"},"You might want to grab one of these with your code"),m("img.promoIcon",{src:ae.assetsUrl("/img/gsupps_icon_0.png"),onclick:()=>openURL("https://gamersupps.gg/products/citrus-lemonade-100-serving"),onmouseover:()=>playTick(.1)}),m("img.promoIcon",{src:ae.assetsUrl("/img/gsupps_icon_1.png"),onclick:()=>openURL("https://gamersupps.gg/products/blue-razz-100-serving"),onmouseover:()=>playTick(.1)}),m("img.promoIcon",{src:ae.assetsUrl("/img/gsupps_icon_2.png"),onclick:()=>openURL("https://gamersupps.gg/products/dragonfruit-punch-100-serving"),onmouseover:()=>playTick(.1)}),m("img.promoIcon",{src:ae.assetsUrl("/img/gsupps_icon_3.png"),onclick:()=>openURL("https://gamersupps.gg/products/waifu-candy-100-serving"),onmouseover:()=>playTick(.1)}),m("img.promoIcon",{src:ae.assetsUrl("/img/gsupps_icon_4.png"),onclick:()=>openURL("https://gamersupps.gg/products/misfits-melon"),onmouseover:()=>playTick(.1)}),m(".codeBtn",{src:ae.assetsUrl("/img/gsupps_icon_4.png"),onclick:function(){copyPromoCode(this,e)},onmouseover:()=>playSelect(.1)},"Copy Code"),m(".codeBtn",{src:ae.assetsUrl("/img/gsupps_icon_4.png"),onclick:()=>revealPromoCode(e),onmouseover:()=>playSelect(.1)},"Reveal Code"),m("div",{style:"margin-top: 20px;font-size:17px;color: rgba(255,255,255,0.5);text-align: center;"},["Use code at ",m("span.promoLink",{onclick:()=>openURL("https://gamersupps.gg/")},"GamerSupps.GG")," to claim your free item!"])];genericPopup(t,"promoPop")},window.copyPromoCode=function(e,t){var i=e.textContent;ae.copyToClipboard(t),e.textContent="Copied",setTimeout((()=>e.textContent=i),1250)},window.revealPromoCode=function(e){promoCode.removeAttribute("disabled"),promoCode.setAttribute("readonly",!0),promoCode.value=e},window.resetPops=function(){popupHolder.style.zIndex=2147483645,popupHolder.style.display="block",popupContent.style.display="none",popupContent.style.backgroundColor="#353535",itemViewPop.style.display="none",bundlePop.style.display="none",premiumPop.style.display="none",spinHistoryPop.style.display="none",genericPop.style.display="none",genericPop.removeAttribute("class"),genericPop.innerHTML&&m.render(genericPop,m.trust("")),hidePolicePop(),Pi&&(he.stop(Pi),Pi=null)},window.clearPops=function(e){resetPops(),popupHolder.style.zIndex=2147483647,popupHolder.style.display="none"},window.contPopup=function(e,t,i){genericPopup(e,"contPop","width:"+(t||"700px")+";border:"+(i||"")+";")},window.genericPopup=function(e,t,i){return resetPops(),t&&genericPop.setAttribute("class",t),genericPop.setAttribute("style",i||""),m.render(genericPop,"object"==typeof e?e:m.trust(e)),genericPop.style.display="block",genericPop},window.confDelClan=function(e){var t="<div style='color:#fff;font-size:20px;position:relative;margin-bottom:15px;'>"+S.t("windows.clan."+(e?"delete":"leave"))+"</div><div id='confirmBtn' onclick='delClanConfirmed()' onmouseover='playTick(0.1)'>YES</div><div id='declineBtn' onclick='clearPops()' onmouseover='playTick(0.1)'>NO</div>";genericPopup(t,"confPop")},window.delClanConfirmed=function(){Bs("Please Wait..."),me.send("cln",4,1)},window.confKickClan=function(e,t){var i="<div style='color:#fff;font-size:20px;position:relative;margin-bottom:15px;'>"+S.t("windows.clan.kick",e)+"</div><div id='confirmBtn' onclick='kickClanConfirmed("+t+")' onmouseover='playTick(0.1)'>YES</div><div id='declineBtn' onclick='clearPops()' onmouseover='playTick(0.1)'>NO</div>";genericPopup(i,"confPop")},window.kickClanConfirmed=function(e){clearPops(),windows[12].kick(e)};var Fs=["#63de26","#f7d31e","#fc3232"],Hs=["I'm here to spin KR and bust hackers...and I'm all out of KR","A fine day for Hacker Hunting","What's a cops favourite food? I DONUT know...","A really good Detective never gets married","I love this song..."],Us=["You look Strong. Why don't you join us?","Sign In to Join the Fight against the Hackers!","Your Level isn't High enough to Join us. Call Us if you find a Hacker!","Welcome Back Officer. Let's see who needs our help today..."];window.hidePolicePop=function(){"block"==policePop.style.display&&(Is(),he.stop("ambient_9")),policePop.style.display="none"};var Vs=0;window.switchKPDTab=function(e){Vs=e,shoPolicePop()},window.shoPolicePop=function(){resetPops(),popupHolder.style.zIndex=20,policePop.style.display="block";var e=0;Re?(Re.isMod||Re.isDeputy)&&(e=3):e=1,Cs={name:"Officer Buddy",classN:Re&&Re.isDeputy?"Deputy":Re&&Re.isMod?"Marshal":"Officer",class:5,back:1487,body:-1,hat:1890,head:-1,dye:1891,face:1842,pet:-1,waist:-1},Is(),he.play("ambient_9",.14,!0),qs=ae.randInt(15e3,3e4),Kc(Us[e],3400,!0);var t="";if(3==e){for(var i="<div class='menuTabsNew' style='margin-top:10px;table-layout: fixed;'>",n=0;n<u.kpdTabs.length;++n)i+="<div class='menuTabNew"+(Vs==n?" tabANew":"")+"' onclick='switchKPDTab("+n+")'>"+u.kpdTabs[n].n+"</div>";t="<div style='margin-top:0px;color:rgba(0,0,0,0.6)'>When responding to a <b>Distress Call</b>, please remember to follow the <a href='./docs/kpd.txt' class='menuLink' style='font-size:15px'>Mod Rules</a></div>"+(i+="</div>")+"<div id='kpdCalls'>Loading...</div>",me.send("kpd",Vs+1)}else{var s=0;Re&&(s=(Re.jobRatingPos||1)/(Re.jobRating||1));var a=Fs[0];s<=.7&&(a=Fs[1]),s<=.5&&(a=Fs[2]),t="<div style='color:rgba(0,0,0,0.6);font-size: 23px;'>The <b>K.P.D</b> allows you to <b>Combat & Report Hackers</b> in an easier way. <div style='height:15px'></div>If you suspect that there is a Hacker in your Current Lobby you can <b>Call for Aid by pressing the K.P.D Icon on the player list</b>. <div style='height:15px'></div>Any Active <b>Moderators</b> will then be able to respond to your call from a list of Active Distress calls & Deal with the Hacker accordingly.</div><div style='height:15px'></div>",t+=Re?"<div id='trustProg'><div id='trustProgHD'>"+(Re.jobRatingPos||0)+"/"+(Re.jobRating||0)+" Helpful Reports</div><div id='trustPrgHD' style='width:"+100*s+"%;background-color:"+a+"'></div></div>":"";t+="<div style='margin-top:20px;margin-bottom:20px;font-size:25px;color: #858585;'>",t+=e?"Sign-in to apply for K.P.D":(Re.jobRatingPos||0)>=20&&s>.7?"You may qualify to become a K.P.D officer. Submit a application <a href='https://forms.gle/1xy2LznPkYn9gh8Q7' target='_blank' style='color:#fff'>here</a>":"20 positive reports are required to apply.",t+="</div>"}var r="<div style='font-size:30px;margin-bottom:12px;color:#858585'>Krunker Police Department</div>"+(Re&&Re.role>1?"<div class='kpdRank'>"+(2==Re.role?"Marshal":"Deputy")+"</div>":"")+t;policePopC.innerHTML=r},window.kpdSubmit=function(){Bs("Loading...");var e=document.getElementById("kpdDiscord"),t=document.getElementById("kpdExplain");return Re&&Re.level>=u.minKDFLvl&&!Re.hack?e&&e.value.length?t&&t.value.length?Re&&(Re.isMod||Re.isDeputy)?zs(null,"Already K.P.D"):void me.send("kpdA",e.value,t.value):zs(null,"Invalid Reason"):zs(null,"Invalid Discord"):zs(null,"Requires Lvl "+u.minKDFLvl)};var Gs=!1;window.confirmPolice=function(e,t){Gs||genericPopup("<div style='color:rgba(255,255,255,0.6);font-size:20px;margin-bottom:15px;'>Only call the <b>K.P.D</b> if you strongly suspect <b>"+e+"</b> of using Hacks. <div style='height:10px'></div>False Reports can result in a Ban or Loss of Perms.</div><div id='confirmBtn' style='width:142px;margin-right:5px' onclick='callPolice(`"+e+"`,`"+t+"`)'>Call<span class='material-icons' style='color:#fff;margin-left:10px;font-size:28px;vertical-align:bottom;margin-bottom:1px'>call</span></div><div id='declineBtn' style='width:142px;margin-left:3px' onclick='clearPops()'>Cancel</div>","polConfPop")},window.callPolice=function(e,t){Gs||(clearPops(),Gs=!0,Ws=!1,Ys=0,he.play("dial_0",.2),Xs=700,he.play("whoosh_0",.1),Rc(-1,null,"Calling K.P.D ...",2),phoneImg.style.marginBottom="0px",me.send("kpd",0,{id:t}))},window.policeJoin=function(e,t,i,n){he.play("siren_1",.1),saveVal("queuePort",n),saveVal("queueHost",i),saveVal("bpt",t),saveVal("gId",e),window.switchServer(e)},window.callSort=(e,t)=>0,window.policeRes=function(e,t,i){var n;if((i=i||{},0==e&&(Gs=!1,he.stop("ring_0"),"reported"==t?(he.play("siren_1",.1),t="Reported "+i.n+" to the K.P.D",Ws=!0,setTimeout((function(){phoneImg.style.marginBottom="-700px",he.play("whoosh_0",.1)}),2200)):(he.play("busy_0",.1),phoneImg.style.marginBottom="-700px",he.play("whoosh_0",.1)),Rc(-1,null,t,2)),1==e)&&(n=document.getElementById("kpdCalls"))){var s=i.length?"":"No Active Distress Calls";if(i.length){i=(i=(i=i.sort((function(e,t){var i=(e.jop||1)/(e.jor||1),n=(t.jop||1)/(t.jor||1),s=1+(e.jop||0);i<=.7&&(s=1),i<=.5&&(s=0);var a=1+(t.jop||0);return n<=.7&&(a=1),n<=.5&&(a=0),(a||0)-(s||0)}))).sort((function(e,t){return(t.typ||0)-(e.typ||0)}))).sort(window.callSort),s+='<table style="width:100%">\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th style="font-size: 16px;">Rating</th>\n\t\t\t\t\t\t<th style="font-size: 16px;">Reporter</th>\n\t\t\t\t\t\t<th style="font-size: 16px;">Suspect</th>\n\t\t\t\t\t\t<th style="font-size: 16px;">Info</th>\n\t\t\t\t\t\t<th style="font-size: 16px;">Join</th>\n\t\t\t\t\t</tr>';for(var a=0;a<i.length;++a){var r=Math.max(1,Math.floor(u.rankVar*Math.sqrt(i[a].cos||0))),o=Math.max(1,Math.floor(u.rankVar*Math.sqrt(i[a].crs||0))),l=(i[a].jop||1)/(i[a].jor||1),c=Fs[0];l<=.7&&(c=Fs[1]),l<=.5&&(c=Fs[2]),s+="<tr>",s+="<td><span class='kpdRepLvl' style='color:"+c+"'>"+(i[a].jop||0)+"/"+(i[a].jor||0)+"</span></td>",s+="<td><span class='kpdRepLvl'>"+o+"</span>\n\t\t\t\t\t\t<a target='_blank' href='/social.html?p=profile&q="+i[a].can+"' class='menuLink' style='font-size:16px'>"+i[a].can+"</a>\n\t\t\t\t\t\t</td>",s+="guest"==i[a].con||null==i[a].con?"<td style='color: var(--red);'>Guest</td>":"<td><span class='kpdRepLvl'>"+r+"</span>\n\t\t\t\t\t\t<a target='_blank' href='/social.html?p=profile&q="+i[a].con+"' class='menuLink' style='font-size:16px;color: var(--red);'>"+i[a].con+"</a>\n\t\t\t\t\t\t</td>",s+="<td>\n\t\t\t\t\t\t<span style='color:#858585;margin-right:12px'>"+ae.getReadableTime(i[a].tim)+" ago</span>\n\t\t\t\t\t\t<span class='callRegion'>"+i[a].gco.split(":")[0]+"</span>\n\t\t\t\t\t</td>",s+="<td>\n\t\t\t\t\t\t<span class='policeJoinB' onclick=\"policeJoin('"+i[a].gco+"','"+i[a].tok+"','"+i[a].hos+"','"+i[a].por+"')\">Join</span>\n\t\t\t\t\t</td>",s+="</tr>"}s+="</table>"}n.innerHTML=s}if(2==e&&(n=document.getElementById("kpdCalls"))){s=i.length?"":"No Data";if(i.length){s+='<table style="width:100%">\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th style="font-size: 16px;">Moderator</th>\n\t\t\t\t\t\t<th style="font-size: 16px;">Action</th>\n\t\t\t\t\t\t<th style="font-size: 16px;">Suspect</th>\n\t\t\t\t\t\t<th style="font-size: 16px;">Time</th>\n\t\t\t\t\t</tr>';for(a=0;a<i.length;++a)s+="<tr>\n\t\t\t\t\t\t<td><a target='_blank' href='/social.html?p=profile&q="+i[a].modn+"' class='menuLink' style='font-size:16px'>"+i[a].modn+"</a></td>\n\t\t\t\t\t\t<td><span style='color:#858585'>"+(1==i[a].htag?"tagged":"untagged")+"</span></td>\n\t\t\t\t\t\t<td><a target='_blank' href='/social.html?p=profile&q="+i[a].hckn+"' class='menuLink' style='font-size:16px;color: var(--red);'>"+i[a].hckn+"</a></td>\n\t\t\t\t\t\t<td><span style='color:#858585;'>"+ae.getDate(i[a].dat,!0)+" ago</span></td>\n\t\t\t\t\t</tr>";s+="</table>"}n.innerHTML=s}if(3==e&&(n=document.getElementById("kpdCalls"))){s=i.length?"":"No Data";var d=["1day","3day","7day","14day","30day","90day","alltime"];if(i.length){s+='<table style="width:100%">\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th style="font-size: 16px;">Range</th>\n\t\t\t\t\t\t<th style="font-size: 16px;">Tag Count</th>\n\t\t\t\t\t</tr>';for(a=0;a<d.length;++a)s+="<tr>\n\t\t\t\t\t\t<td><span style='color:#858585'>"+d[a]+"</span></td>\n\t\t\t\t\t\t<td><span style='color:#858585'>"+i[0][d[a]+"Entries"]+"</span></td>\n\t\t\t\t\t</tr>";s+="</table>"}n.innerHTML=s}};var Ws=!1,qs=0,Ys=0,Ks=0,Xs=0;function Zs(e,t,i,n){var s,a;0==i?(s=t,(a=ve.players.findBySid(s))&&Rc(-1,a.alias,s,3)):1==i?(document.exitPointerLock(),windows[36].trader=t,windows[36].active=!0,windows[36].inv=n[0],Re&&(Re.skins=ae.convertInv(n[0]||[])),windows[36].otherInv=n[1],showWindow(37)):2==i?windows[36].canceled():3==i?windows[36].accepted(t):4==i?windows[36].process(t):5==i&&windows[36].updateButtons(),e&&Rc(-1,null,e,2)}function Js(e,t,i,n){if(windows[36].active=!1,windows[36].trader=null,e)windows[36].failed(e);else if(Mi(t),windows[36].done(),Re){if(i&&i.length)for(var s=0;s<i.length;s++)i[s]=parseInt(i[s]),Re.removeSkin(i[s]);if(n&&n.length)for(s=0;s<n.length;s++)n[s]=parseInt(n[s]),Re.addSkin(n[s])}}function Qs(e,t,i,n){t?windows[36].addItem(i,e,n):windows[36].removeItem(i,e,n),windows[36].updateButtons()}function $s(e,t,i){return"<div class='reqW"+(i?" login":"")+"'"+(i?" onclick='showWindow(5)'":"")+"><i class='material-icons reqWIcon'>clear</i><div class='reqWLvl'>"+(i?"LOGIN REQUIRED":"LEVEL "+e+" REQUIRED")+"</div><div class='reqWTxt'>"+t+"</div></div>"}function ea(e){e&&(e.stopPropagation(),e.cancelBubble=!0)}function ta(e){document.querySelectorAll(".hideOnHost").forEach((function(t){t.style.display=e?"none":"inline-block"}))}function ia(e,t,i){var n="",s="map"==t?"selectHostMap":"loadUserMod",a=u["map"==t?"mapTabs":"modTabs"][i],r=null;if(0==i&&"map"==t){e=ae.shuffleArray(e);for(var o={},l=0;l<e.length;++l)o[e[l].category]||=[],o[e[l].category].length<8&&o[e[l].category].push(e[l]);for(var c in e.length=0,o)o.hasOwnProperty(c)&&(o[c].length<8&&o[c].length>=4&&(o[c].length=4),e.push(...o[c]))}let d=!!window.ClientSession&&!!window.ClientSession.downloadPack;for(var h=0;h<e.length;++h){e[h].dte&&(e[h][t+"_date"]=e[h].dte),e[h].mna&&(e[h][t+"_name"]=e[h].mna),null!=e[h].mid&&(e[h][t+"_id"]=e[h].mid),null!=e[h].inf&&(e[h][t+"_info"]=e[h].inf),null!=e[h].minf&&(e[h][t+"_info"]=e[h].minf),null!=e[h].pli&&(e[h][t+"_player"]=e[h].pli),e[h].ctn&&(e[h].creatorname=e[h].ctn),e[h].url&&(e[h][t+"_url"]=e[h].url),null!=e[h].vte&&(e[h][t+"_votes"]=e[h].vte),null!=e[h].upd&&(e[h][t+"_updatecounter"]=e[h].upd);var p=-1;if(e[h]&&e[h][t+"_date"]){var f=0,m=new Date(e[h][t+"_date"]);m&&(f=Ue-(m.getTime()||0)),p=f/864e5}var g=ae.getAssetData(e[h][t+"_info"]),v=e[h].fav||"map"==t&&a.fav||"mod"==t&&a.fav;"mod"==t&&"ua"==e[h].mod_url&&(e[h].mod_url=ae.userAssetsUrl("/md"+e[h].mod_id+"/mod.zip"));var y=windows[9].playerData[ae.escapeStr(e[h].map_name)]||0,b=(ae.commaFormatNum(e[h].fund||0),Re&&(Re.canGlobalEdit||Re.name==e[h].creatorname&&a.owned));e[h].category&&r!=e[h].category&&(n+="<div class='mapListCat'>"+(r=e[h].category)+"</div>"),n+="<div style='display:inline-block;'><div class='mapListItem'><div class='mapActionOvrl'><div class='mapActionHol'><div class='mapActionB' title='"+("map"==t?"Host":"Load")+"' onclick='"+s+"(&quot;"+e[h][t+"_name"]+"&quot;,&quot;"+e[h].mod_url+"&quot;,&quot;"+e[h][t+"_id"]+"&quot;,&quot;"+ae.cleanseString(e[h].creatorname)+"&quot;,"+~~(g&&g.t)+")'>"+("map"==t?"<span class='material-icons' style='font-size:70px;color:#fff;'>video_settings</span>":"<span class='material-icons' style='font-size:70px;color:#fff;'>play_arrow</span>")+"</div><div class='mapActionSep'></div>"+("map"==t?"<div class='hideOnHost mapActionB' onclick='openURL(&quot;/?play="+e[h].map_name+"&quot;, 1)' title='Play' style='margin-top:-5px;'><span class='material-icons' style='font-size:80px;color:#fff;'>play_arrow</span></div><div class='mapActionSep' style='margin-left:2px'></div>":"")+("map"==t&&b&&a.owned?"<div class='mapActionB' onclick='openEdit(&quot;"+ae.escapeStr(e[h].map_name)+"&quot;,"+e[h].map_id+","+e[h].fund+")' title='Edit' style='margin-top:0px;'><span class='material-icons' style='font-size:70px;color:#fff;'>create</span></div>":"<div class='mapActionB"+(v?"":" sel")+"'onclick='favoriteM("+("map"==t?0:1)+",this, "+e[h][t+"_id"]+");'>"+(v?"<span class='material-icons' style='font-size:70px;color:#fff;'>star</span>":"<span class='material-icons' style='font-size:70px;color:#fff;'>star_border</span>")+"</div>")+("mod"==t&&d?"<div class='mapActionB'onclick='downloadPack("+e[h][t+"_id"]+");'><span class='material-icons' style='font-size:70px;color:#fff;'>download</span></div>":"")+"</div></div>"+(p>=0&&p<=7?"<div class='mapAgeD' style='background-image:"+(e[h][t+"_updatecounter"]>1?"linear-gradient(to right,#E040FB,#6240fb);":"linear-gradient(to right,#fb9c40,#fb4040);")+"'>"+(e[h][t+"_updatecounter"]>1?"UPDATED":"NEW!")+"</div>":"")+("map"==t?"<div class='mapsVotes' title='Players Online' id='pcnt_"+ae.escapeStr(e[h].map_name)+"' style='left:10px;right:unset'>"+y+"<span style='color:#999999;'> online</span></div>":"")+"<div style='height:200px;width:100%;overflow: hidden;'><img class='mapListThumb' loading='lazy' src='"+(g&&g.t?ae.userAssetsUrl("/m"+("mod"==t?"d"+e[h].mod_id:e[h][t+"_id"])+"/thumb.png"):e[h][t+"_image"]||"./img/noimg.png")+"' /></div><div style='margin-top:5px;padding-left:5px;padding-right:5px;line-height:30px;margin-bottom:0px;'><div style='display:inline-block;max-width:250px;overflow:hidden;white-space:nowrap'><a href='javascript:;' onclick='openURL(&quot;https://krunker.io/social.html?q="+e[h][t+"_name"]+"&p="+t+"&quot;)' />"+e[h][t+"_name"]+"</a></div><span style='font-size:15px;text-align:right;padding-right:2px;float:right;color:#fff;'>"+ae.formatNumYT(e[h]["map"==t?"map_pl":"mod_votes"]||0)+" <span style='color:rgba(255,255,255,0.5)'>"+("map"==t?"plays":"likes")+"</span></span></div></div>"+(e[h].friendname?"<div class='likdByFrnd'><span class='material-icons' style='color:#fff;font-size:23px;vertical-align:middle;margin-right:6px;margin-top:-4px;'>thumb_up</span>liked by <span style='color:rgba(255,255,255,0.6);'>"+e[h].friendname+"</span></div>":"<div style='height:10px;'></div>")+"</div>"}if(0==i&&"map"==t){n+="<div class='mapListCat'>Popular Categories</div>";var w="";for(l=0;l<u.mapCatsP.length;++l)w+="<div class='mapListItem' style='width:624px;height:130px;'><div class='mapLICat' onclick='windows[9].switchTab(7);mpCat.selectedIndex="+(u.mapCats.indexOf(u.mapCatsP[l].n)+1)+";windows[9].searchMaps();' style='background:url("+ae.assetsUrl("/img/backgrounds/gamecats/c_"+(u.mapCatsP[l].i||0)+".png")+")'>"+u.mapCatsP[l].n+"</div></div>";n+=w}return n}function na(e,t,i=5){var n=document.createElement("div");n.className="tooltip",n.insertAdjacentHTML("beforeend",t);var s=document.body.firstChild;s.parentNode.insertBefore(n,s);var a=e.getBoundingClientRect(),r=n.getBoundingClientRect(),o=a.top-(r.height+i)-4;a.left;n.setAttribute("style","top:"+o+"px;left:"+a.left+"px;")}function sa(e,t,i){for(var n=t?16==t?"skinImgP":5==t?"skinImgD":"skinImgC":"skinImg",s="<div id='itemSearchH'><div class='custBack' onclick='playSelect(0.1);goBackWindow(2)' onmouseenter='playTick();'><span class='material-icons custBackArr'>arrow_back</span></div><input id='itemSearch' type='text' placeholder='Search Item' onkeyup='searchItems(this)'><div class='winClose' onclick='playSelect(0.1);closWind()' onmouseenter='playTick();'><span class='material-icons winCloseArr'>close</span></div></div><div id='skinList' style='overflow-y: scroll;height: calc(100% - 95px);'><div class='skinCard blackShad' style='border:5px solid lightgrey' onmouseenter='playTick()' onclick='"+e+"(-3)'>"+(3==t?"Combat Knife":S.t("generic.none"))+"<div class='itemOwn'>"+S.t("generic.default")+"</div>"+(5==t?"":"<div class='itemSea' style='opacity:0;'>Season 1</div>")+(i?"<div class='skinRandom blackShad'>X</div>":"<img class='"+n+"' src='"+ae.assetsUrl("/textures/previews/cosmetics/"+t+"_default.png")+"'>")+"</div><div class='skinCard blackShad' style='border:5px solid lightgrey' onmouseenter='playTick()' onclick='"+e+"(-2)'>"+S.t("generic.random")+"<div class='itemOwn' style='opacity:0;'>by ???</div>"+(5==t?"":"<div class='itemSea' style='opacity:0;'>All Seasons</div>")+(i?"":"<img class='"+n+" skinSil' src='"+ae.assetsUrl("/textures/previews/cosmetics/"+t+"_default.png")+"'>")+"<div class='skinRandom blackShad'>?</div></div>",a=[...bs(Re,!0)].sort((function(e,t){var i=null!=t.ind&&ve.store.skins[t.ind]&&ve.store.skins[t.ind].rarity||0,n=null!=e.ind&&ve.store.skins[e.ind]&&ve.store.skins[e.ind].rarity||0,s=null!=t.ind&&ve.store.skins[t.ind]?ve.store.skins[t.ind].seas||1:0,a=null!=e.ind&&ve.store.skins[e.ind]?ve.store.skins[e.ind].seas||1:0;return i>n?1:i<n?-1:s>a?1:s<a?-1:(t.ind||0)-(e.ind||0)})).sort((function(e,t){return~~(Wt.indexOf(t.ind)>=0)-~~(Wt.indexOf(e.ind)>=0)})).filter((e=>ve.store.skins[e.ind]&&ve.store.skins[e.ind].type==t)),r=0;r<a.length;++r){Ee=ve.store.skins[a[r].ind];var l=Re&&Re.isDev||null==Ee.classIndex||Ee.classIndex==kt||ve.isSandbox,c=Wt.indexOf(Ee.index)>=0;s+="<div class='skinCard"+(Ee.rarity==o.a.CONTRABAND?"":" blackShad")+(!Ee.free&&ce.rarityAnim&&ve.store.rarities[Ee.rarity].animate?" rainbow":"")+"' style='"+(Ee.free?"border: 5px solid lightgrey":"color:"+ve.store.rarities[Ee.rarity].color+";border:5px solid"+ve.store.rarities[Ee.rarity].color)+"' onmouseenter='playTick()'"+(l?"onclick='"+e+"("+a[r].ind+");cancelTip()' ":" ")+"data-index='"+a[r].ind+"' onmouseover='createTip(this)' onmouseout='cancelTip()'>"+(Ee.free?"":"<div class='itemCnt' data-badge='x"+a[r].cnt+"'></div>")+Ee.name+"<div class='itemOwn' style='z-index: 3;position: relative;'>"+(l?Ee.free?S.t("windows.skins.default"):"by "+(Ee.creator||"Krunker.io"):S.t("windows.skins.classOnly",ve.classes[Ee.classIndex].name))+"</div>"+(5==t||Ee.free?"":"<div class='itemSea'>Season "+(Ee.seas||1)+"</div>")+"<img loading='lazy' class='"+n+(Ee.rgb?" rgbHue":"")+"' src='"+Ee.thumbnail+"' /><div class='selctInfoBtn' onmouseenter='playTick()'onclick='viewItem("+a[r].ind+")'>?</div><div class='selctFavBtn material-icons' onmouseenter='playTick()' data-col='"+(c?"yellow":"white")+"' data-icon='"+(c?"star":"star_border")+"' onclick='favItem(this, "+a[r].ind+")'></div>"+(l?"":"<div class='lockedSkin'><span class='material-icons' style='font-size: 55px;color:#fff'>lock</span></div>")+"</div>"}return s+="</div>"}window.updateDropsScroll=function(e,t){var i=document.querySelector(".dropsCols");if(i){var n=i.children[0].scrollWidth,s=(i.children.length-1)*n-i.clientWidth,a=i.scrollLeft+e*(n*(t||3)),r=a>0||-1!=e,o=i.clientWidth+i.scrollLeft<s||1!=e;i.scrollLeft=a;var l=document.querySelectorAll(".dropsSliderBtn");l&&(l[0].classList.toggle("disabled",!r),l[1].classList.toggle("disabled",!o))}},window.updateDropsScrollWheel=()=>updateDropsScroll(window.event.deltaY>0?-1:1),window.pfpPopup=function(e){if(!Re)return zs(null,S.t("account.login.required"));if(Re.premiumT<=0)return zs(null,"Must have premium");var t="<div class='pubHed'>Upload or Update Profile Pic</div>";t+="<div style='color: rgba(255,255,255,0.4);font-size:18px' id='pfpH'><input onclick='selectFile(&quot;pfp&quot;)' type='button' id='pfpBtn' style='cursor:pointer' value='Select'><input id='pfp' name='profilepic' type='file' accept='image/png' style='width:1px;visibility:hidden;' onchange='updateFile(this.id)'><span style='color: rgba(255,255,255,0.4);margin-left:10px;font-size: 14px;' id='pfpName'>Image (.png) - Max "+u.maxPfp+"KB</span><span style='color: rgba(255,255,255,0.4);font-size: 14px;float:right;margin-top: 5px;' id='pfpSize'></span></div>",t+="<div id='pfpResHolder' style='margin-top:8px;margin-bottom:5px;display:inline-block'><div id='pfpUpResp' style='color: rgba(255,255,255,0.3);display: inline-block;'>Inappropriate Images will result in a ban</div></div><div id='pubPfp' onclick='uploadProfilePic()'>Publish/Update</div>",genericPopup(t,"pfpPop")},window.updateFile=function(e,t){var i=null;try{i=document.getElementById(e).files[0]}catch(e){}document.getElementById(e+"Name").innerHTML=i?i.name:S.t("generic.failed");var n,s=(n=e,document.getElementById(n).files[0]).size/1e3;document.getElementById(e+"Size").innerHTML=(s||0)+" <span style='color:rgba(0,0,0,0.8);'>kb</span>"},window.selectFile=function(e){document.getElementById(e).click()},window.uploadProfilePic=function(){Or("Loading...",1);var e=null;try{e=document.getElementById("pfp").files[0]}catch(e){}if(e){var t=new FileReader;t.readAsDataURL(e),t.onload=function(){return ae.thumbnailSize(t.result)>u.maxPfp?void Or(S.t("image.upload.limit",u.maxPfp),1):void me.send("uploadP",t.result)},t.onerror=function(){Or("Picture Error",1)}}else Or("Upload Error",1)},window.confPremium=function(e){var t=ve.store.premium[e],i="<div class='pubHed'>Confirmation</div><div style='color:#fff;font-size:20px;position:relative;margin-bottom:15px;'>"+S.t("windows.store.premium.purchase",t.val)+"</div><div id='confirmBtn' onclick='logBtnFRVR(`buy_premium_confirm`);premiumConfirmed("+e+")' onmouseover='playTick(0.1)'>YES</div><div id='declineBtn' onclick='clearPops()' onmouseover='playTick(0.1)'>NO</div>";genericPopup(i,"confPremiumPop")},window.premiumConfirmed=function(e){Bs("Please Wait..."),me.send("prm",e)},window.selectPremium=function(e,t){if(ve.store.premium[e]&&(ye.idleTimer=0),Re){if(!t&&d)return zs(null,"Invalid Steam Account");if(t&&d){if(!!!(window.ClientSession&&window.ClientSession.settings&&window.ClientSession.settings.gameCap&&window.ClientSession.settings.gameCap.val))return zs(null,"Game Capture must be enabled to use Steam Purchase");me.send("stppV",t+"",e,null)}else me.send("xstp",e,we.list.lang.val,null,null,window.paymentsChannelId)}else showWindow(5)},window.premiumPopup=function(e){var t=ve.store.premium[e];if(t){const n=u.premiumBenifits.slice(0,10);var i="<div class='bundlPopImg' style='background:url("+ae.assetsUrl("/img/prem_bg.png")+");background-size: cover;background-position: center;'></div><div class='bundlPopSidH'><div class='bundlPopNam'>"+t.val+" days of Premium</div>";i+="<div class='bundlPopInfo'>"+n.map((e=>"<li>"+e+"</li>")).join("")+"<li>& more</li></div>",i+="<div class='bundlPopBuyH'><div class='bundlPopBuyC' onclick='selectPremium("+e+")'>Buy - "+t.price+" USD</div></div></div>",resetPops(),premiumPop.innerHTML=i,premiumPop.style.display="block"}},Object.defineProperty(window,"changeName",{writeable:!1,value:function(){Bs("Please Wait...");var e=document.getElementById("displayN");Re&&Re.premiumT?me.send("nme",e&&e.value.length?e.value:null):zs(null,"Premium required")}}),Object.defineProperty(window,"clearName",{writeable:!1,value:function(){Bs("Please Wait..."),Re&&Re.premiumT?me.send("nme"):zs(null,"Premium required")}}),window.acceptRequest=function(e){me.send("trd",e,1)},window.openSales=function(e){ea(window.event),openURL("/social.html?p=itemsales&i="+e)},window.viewItem=function(e,t){ea(window.event);var i=ve.store.skins[e];if(!i||t)return openSales(e);var n=0;Re&&Re.skins&&(n=Re.getSkinCount(e)||0),resetPops();var s=ve.store.rarities[i.rarity]||{};itemViewPop.style.display="block",itemViewPop.style.border="5px solid "+(s.color||"lightgrey"),itemViewPop.classList.remove("rainbow"),s.animate&&itemViewPop.classList.add("rainbow");var a="<div class='itemViewName"+(i.rarity==o.a.CONTRABAND?"":" blackShad")+(ce.rarityAnim&&s.animate?" rainbow":"")+"' style='color:"+(s.color||"#fff")+";'>"+i.name+"</div>"+(i.blackM?"<div class='itemViewSea' style='background:#00ffff'>Black Market</div>":i.limT?"<div class='itemViewSea' style='background:"+(ve.store.tags[i.limT]||"#41c300")+"'>"+i.limT+"</div>":i.seas!=u.currentSeason||i.limited&&i.noSpin&&!i.itemShop?"<div class='itemViewSea'>Vaulted</div>":i.limited||i.blocked?"<div class='itemViewSea' style='background:#faa332;'>Limited</div>":"")+(i.type==Te.PLAYER_CARD?"<div class='viewItemCard' style='background-image:url("+i.thumbnail+")'></div>":"<iframe style='width: 100%;height: 450px;border:none;margin-top:10px;' src='/viewer.html?nobg&showcase="+e+"'></iframe>")+"<div class='itemViewCnt'>x"+(n||0)+" <span style='color:#ffffff8f;'>Owned</span></div><div id='itemInfoBtn' onclick='openSales("+e+")'>More Information</div>";itemViewPop.innerHTML=a},window.favItem=function(e,t){ea(window.event);var i=ve.store.skins[t];if(i){var n=Wt.indexOf(i.index);-1==n?Wt.push(i.index):Wt.splice(n,1),e.dataset.col=-1==n?"yellow":"white",e.dataset.icon=-1==n?"star":"star_border",updateFavList(Wt,!0)}},window.quickJoinRegion=function(e,t){let i=windows[1].getServers(e,t);var n=10;for(let e=0;e<i.length&&(H.switchGame(i[e],!FRVR.channelCharacteristics.allowNavigation),--n>0);e++);},window.createTip=function(e,t,i){var n=parseInt(e.getAttribute("data-index")),s=ve.store.skins[n],a=ie.estimateValue(n);na(e,(s.lore?"<div class='tooltipSub' style='font-style:italic;font-size:10px;'>"+s.lore+"</div>":"")+"<div class='tooltipSub'><span style='color:"+(s.free?"lightgrey":ve.store.rarities[s.rarity||0].color)+"'>"+s.name+"</span></div>"+(s.free?"":"<div class='tooltipSub' style='font-size:10px'>Est <span style='color: #FBC02D;'>"+(null==a?"Unknown</span>":ae.commaNumber(a)+"</span> KR")+"</div>"))},window.createStreakTip=function(e){var t=parseInt(e.getAttribute("data-index")),i=ve.streaks[t];i&&na(e,"<div class='tooltipSub'><span style='color:#FBC02D'>"+i.name+"</span></div><div class='tooltipSub' style='font-style:italic;font-size:8px;max-width: 300px;'>"+i.desc+"</div>")},window.createSpinHistoryTip=function(e){var t=parseInt([...e.parentElement.children].indexOf(e)),i=qa[t];if(i){var n=ve.store.skins[i.ind];if(n){var s=ie.estimateValue(n.index),a=new Date(i.dte);na(e,"<div class='tooltipSub'><span style='color:"+ve.store.rarities[n.rarity].color+"'>"+n.name+"</span></div><div class='tooltipSub' style='font-size:10px'>Est: <span style='color: #FBC02D;'>"+(null==s?"Unknown</span>":ae.commaNumber(s)+"</span> KR")+"</div><div class='tooltipSub' style='font-size:10px'>Date: <span style='color: #FBC02D;'>"+ae.getReadableTime(Date.now()-a.getTime())+" ago</span></div><div class='tooltipSub' style='font-size:10px'>Cost: <span style='color: #FBC02D;'>"+ae.commaNumber(i.fds||0)+" KR</span></div>")}}},window.cancelTip=function(){var e=document.querySelector(".tooltip");e&&e.remove()};for(var aa=0;aa<windows.length;++aa)windows[aa].html="";var ra=0,oa=null;function la(e,t){var i=document.getElementById("vouchRes");i&&(i.style.display="block",i.innerHTML=t||""),null!=e&&null!=e&&(Mi(e),updateWindow(null,!0))}function ca(e,t){windows[29].onReadData(e,t)}function da(e){windows[29].mailCount(e)}function ha(e,t){windows[29].onData(e,t)}Object.defineProperty(window,"updateWindow",{writeable:!1,value:function(e,t){"block"==windowHolder.style.display&&(ra==e&&null!=e?showWindow(e,!0,!0):t&&showWindow(ra,!0))}}),window.goBackWindow=function(e){windows[e].goBack()},Object.defineProperty(window,"showWindow",{writeable:!1,value:function(e,t,i){if(ae.isNumber(e)&&e>=0){if(ye.idleTimer=0,e){var n=ra&&windows[ra-1]&&windows[ra-1].label||"home",s=e&&windows[e-1]&&windows[e-1].label||"home";n!=s&&logEventFRVR("win_open",{source:n,destination:s})}if(ve&&ve.mode&&ve.mode.canTrade&&37!=e&&windows[36].cancel(),closeWindow(i),t||e&&("block"!=windowHolder.style.display||e!=ra)){oa=e,ee.toggleMenu(!0);let t=windows[e-1];t.menuOpen&&!i&&he.play(t.menuOpen,.1),menuWindow.className=t.extraCls?t.extraCls:"",menuWindow.innerHTML=t.gen?t.gen():t.html,ra=e,t.closed=!1,menuWindow.classList.toggle("stickyHeader",!!t.sticky),menuWindow.style.overflowY=windows[e-1].hideScroll?"hidden":"auto",t.forceScroll&&(menuWindow.style.overflowY="scroll"),menuWindow.style.width=null==t.width?"":ae.isString(t.width)?t.width:t.width+"px",menuWindow.style.height=t.height?t.height:"",menuWindow.style.maxHeight=t.maxHeight?t.maxHeight:"",menuWindow.style.borderRadius=null==t.radius?"":t.radius+"px",menuWindow.classList.toggle("dark",!0),menuWindow.classList.toggle("forceFill",!!t.forceFill),windowHolder.classList.toggle("popupWin",!0),windowHeader.innerHTML=t.header,ee.toggleWindow(!0,ye.gamepad.active),t.post&&t.post()}else ee.toggleWindow(!1,ye.gamepad.active),ye.inputChanger=null}}}),window.closWind=function(){ee.toggleWindow(!1)},Object.defineProperty(window,"closeWindow",{writeable:!1,value:function(e){oa=null,ra&&windows[ra-1].close&&!windows[ra-1].closed&&(windows[ra-1].closed=!0,windows[ra-1].close()),ra&&windows[ra-1].menuOpen&&!e&&he.stop(windows[ra-1].menuOpen),Is()}}),window.openGuide=function(e){guidePopupH.style.display=e?"block":"none"},window.copyToClip=function(e,t){ae.copyToClipboard(e),t||alert("Link Copied!")},window.copyGameLink=function(e,t,i){var n=e.textContent;ae.copyToClipboard("http"+("127.0.0.1"==location.hostname?"":"s")+"://"+location.host+"/?game="+t+(i?"&tm="+i:"")),e.textContent=S.t("menu.btn.invite.clicked"),setTimeout((()=>e.textContent=n),1250)},window.playTick=function(e){he.play("hover_0",e||.2)},window.playTickAndPreventRedraw=function(e){window.playTick(),e.redraw=!1},window.playSelect=function(e){he.play("select_0",e||.15)},window.copyInviteLink=function(e){ae.copyToClipboard("https://"+location.host+"/?game="+U),inviteButton.textContent=S.t("menu.btn.invite.clicked"),setTimeout((()=>inviteButton.textContent=S.t("menu.btn.invite")),1250),e&&Rc(-1,null,"Link Copied. Send it to someone to invite them",2)},Object.defineProperty(window,"muteUser",{writeable:!1,value:function(e,t,i){if(Ee=ve.players.findById(t),0==i){var n=(s=Ft.indexOf(Ee.accid))>=0;e&&(e.textContent=n?"chat":"speaker_notes_off"),n?Ft.splice(s,1):Ft.push(Ee.accid),saveVal("mute_chat",Ft)}else if(1==i){var s;n=(s=Ht.indexOf(Ee.accid))>=0;e&&(e.textContent=n?"record_voice_over":"voice_over_off"),n?Ht.splice(s,1):Ht.push(Ee.accid),saveVal("mute_chat",Ht)}}}),Object.defineProperty(window,"punishPlayer",{writeable:!1,value:function(e,t){if(t>8||2==t)me.send("pnh",t,null);else for(var i=0;i<ve.players.list.length;++i)if((Ee=ve.players.list[i]).id==e){me.send("pnh",t,Ee.id,!!we.list.extraBan.val);break}}}),Object.defineProperty(window,"requestTrade",{writeable:!1,value:function(e){ve.players.list.find((t=>t.id==e))&&me.send("strd",e)}}),Object.defineProperty(window,"focusPlayer",{writeable:!1,value:function(e,t,i){var n=ve.players.list.find((t=>t.id==e));if(t||i){if(Dt==e&&!i)return clearFocus();n?Rc(-1,null,"Focusing - "+n.name,2):Rt&&Rt.sus==e&&i&&Rc(-1,null,"Auto Focusing Suspect",2)}Dt=e,n&&n.active&&(Vi(),ye.spect.target=n,Bi=!1,me.send("fpSp",n.sid),Gi()),t&&t.firstChild&&window.updateWindow(23)}}),Object.defineProperty(window,"clearFocus",{writeable:!1,value:function(){Dt&&(Dt=null,Vi(),window.updateWindow(23),Rc(-1,null,"Focus Cleared",2))}}),Object.defineProperty(window,"copyUser",{writeable:!1,value:function(e,t){var i=ve.players.list.find((e=>e&&e.id==t)),n=e.innerHTML;ae.copyToClipboard("https://krunker.io/social.html?p=profile&q="+i.name),e.innerHTML=S.t("menu.btn.invite.clicked"),setTimeout((()=>{e&&(e.innerHTML=n)}),1250)}}),Object.defineProperty(window,"banPlayer",{writeable:!1,value:function(e){var t=ve.players.list.find((t=>t.id==e)),i="<div style='color:#fff;font-size:20px;position:relative;margin-bottom:15px;'>"+S.t("windows.playerlist.ban",t.alias)+"</div><div id='confirmBtn' onclick='banPlayerConfirmed(\""+t.id+"\")' onmouseover='playTick(0.1)'>YES</div><div id='declineBtn' onclick='clearPops()' onmouseover='playTick(0.1)'>NO</div>";genericPopup(i,"confPop")}}),Object.defineProperty(window,"flagPlayer",{writeable:!1,value:function(e,t){var i=ve.players.list.find((t=>t.id==e));t=null==t?i.isHacker?0:1:parseInt(t);var n="<div style='color:#fff;font-size:20px;position:relative;margin-bottom:15px;'>"+S.t("windows.playerlist."+(t?"flag":"unflag"),i.alias)+"</div><div id='confirmBtn' onclick='flagPlayerConfirmed(\""+i.id+'",'+t+")' onmouseover='playTick(0.1)'>YES</div><div id='declineBtn' onclick='clearPops()' onmouseover='playTick(0.1)'>NO</div>";genericPopup(n,"confPop")}}),Object.defineProperty(window,"punishPopup",{writeable:!1,value:function(e){var t=ve.players.list.find((t=>t.id==e)),i=t.isHacker?0:1,n="<div style='color:#fff;font-size:15px;position:relative;margin-bottom:15px;'>"+S.t("windows.playerlist.punish",t.alias)+"</div><div class='takeActionTable'>"+(ct||Re&&Re.canGlobalKick?"<span onmouseenter='playTick()' class='takeActionBtn kick' onclick='punishPlayer(\""+t.id+"\", 0);clearPops();'>Kick</span>":"")+(ct||Re&&Re.canGlobalBan?"<span onmouseenter='playTick()' class='takeActionBtn ban' onclick='banPlayer(\""+t.id+"\")'>Ban</span>":"")+(Re&&Re.canGlobalFlag&&t.level>0?"<span onmouseenter='playTick()' class='takeActionBtn tag' onclick='flagPlayer(\""+t.id+'", '+i+")'>"+(i?"Flag":"Unflag")+"</span>":"")+"</div><div class='takeActionTable'>"+(Re&&Re.canSilentKick?"<span onmouseenter='playTick()' class='takeActionBtn kick' onclick='punishPlayer(\""+t.id+"\", 7);clearPops();'>Disconnect</span>":"")+(ct?"<span onmouseenter='playTick()' class='takeActionBtn enabled' onclick='punishPlayer(\""+t.id+"\", 8);clearPops();'>Transfer Host</span>":"")+"</div>";genericPopup(n,"confPop")}}),window.banPlayerConfirmed=function(e){clearPops(),punishPlayer(e,1)},window.flagPlayerConfirmed=function(e,t){clearPops();var i=ve.players.list.find((t=>t.id==e));i&&me.send("flgu",i.id,parseInt(t))},Object.defineProperty(window,"debugBots",{writeable:!1,value:function(...e){Re&&Re.isDev&&me.send("bots",...e)}}),Object.defineProperty(window,"botsPopup",{writeable:!1,value:function(e){if(Re&&Re.isDev){if(null==e)return me.send("bcfg");var t="<div style='color:#fff;font-size: 19px;position:relative;margin-bottom:15px;text-align: center;'>Bot Debugging</div><div style='color: var(--green);font-size: 13px;position:relative;margin-bottom:15px;text-align: center;'>Left Click Toggle, Right Click Disable</div>";t+="<div class='takeActionTable'><span onmouseenter='playTick()' class='takeActionBtn kick' onclick='debugBots(0);clearPops();'>Clear All</span><span onmouseenter='playTick()' class='takeActionBtn kick' onclick='debugBots(1);clearPops();'>Spawn 1</span><span onmouseenter='playTick()' class='takeActionBtn kick' onclick='debugBots(2);clearPops();'>Bring to</span></div>",t+="<div class='takeActionTable'><span onmouseenter='playTick()' class='takeActionBtn "+((e=e||{}).followTarget?"enabled":"disabled")+"' onclick='debugBots(3);clearPops();' oncontextmenu='debugBots(3, false);clearPops();'>Follow</span><span onmouseenter='playTick()' class='takeActionBtn "+(e.watchTarget?"enabled":"disabled")+"' onclick='debugBots(4);clearPops();' oncontextmenu='debugBots(4, false);clearPops();'>Watch</span><span onmouseenter='playTick()' class='takeActionBtn "+(e.mimicTarget?"enabled":"disabled")+"' onclick='debugBots(6);clearPops();' oncontextmenu='debugBots(6, false);clearPops();'>Mimic</span><span onmouseenter='playTick()' class='takeActionBtn "+(e.attackTarget?"enabled":"disabled")+"' onclick='debugBots(9);clearPops();' oncontextmenu='debugBots(9, false);clearPops();'>Attack</span></div>",t+="<div class='takeActionTable'><span onmouseenter='playTick()' class='takeActionBtn "+(e.targetTeam?"enabled":"disabled")+"' onclick='debugBots(7);clearPops();' oncontextmenu='debugBots(7, false);clearPops();'>Target Team</span><span onmouseenter='playTick()' class='takeActionBtn "+(e.targetBots?"enabled":"disabled")+"' onclick='debugBots(8);clearPops();' oncontextmenu='debugBots(8, false);clearPops();'>Target Bots</span></div>",t+="<div class='takeActionTable'><span onmouseenter='playTick()' class='takeActionBtn "+(e.slideHop?"enabled":"disabled")+"' onclick='debugBots(5);clearPops();' oncontextmenu='debugBots(5, false);clearPops();'>Bhop</span><span onmouseenter='playTick()' class='takeActionBtn "+(e.forceCrouch?"enabled":"disabled")+"' onclick='debugBots(10);clearPops();' oncontextmenu='debugBots(10, false);clearPops();'>Crouch</span><span onmouseenter='playTick()' class='takeActionBtn "+(e.nodYes?"enabled":"disabled")+"' onclick='debugBots(17);clearPops();' oncontextmenu='debugBots(17, false);clearPops();'>Nod Yes</span><span onmouseenter='playTick()' class='takeActionBtn "+(e.roam?"enabled":"disabled")+"' onclick='debugBots(19);clearPops();' oncontextmenu='debugBots(19, false);clearPops();'>Roam</span></div>",t+="<div class='takeActionTable'><span onmouseenter='playTick()' class='takeActionBtn "+(e.canRespawn?"enabled":"disabled")+"' onclick='debugBots(11);clearPops();' oncontextmenu='debugBots(11, false);clearPops();'>Can Respawn</span><span onmouseenter='playTick()' class='takeActionBtn "+(e.useSpawnDelay?"enabled":"disabled")+"' onclick='debugBots(12);clearPops();' oncontextmenu='debugBots(12, false);clearPops();'>Spawn Delay</span></div>",t+="<div class='takeActionTable'><span onmouseenter='playTick()' class='takeActionBtn "+(e.joinMessage?"enabled":"disabled")+"' onclick='debugBots(14);clearPops();' oncontextmenu='debugBots(14, false);clearPops();'>Join Message</span><span onmouseenter='playTick()' class='takeActionBtn "+(e.leaveMessage?"enabled":"disabled")+"' onclick='debugBots(15);clearPops();' oncontextmenu='debugBots(15, false);clearPops();'>Leave Message</span></div>",t+="<div class='takeActionTable'><span onmouseenter='playTick()' class='takeActionBtn "+(e.removeOnDeath?"enabled":"disabled")+"' onclick='debugBots(13);clearPops();' oncontextmenu='debugBots(13, false);clearPops();'>Leave on Death</span><span onmouseenter='playTick()' class='takeActionBtn "+(e.voiceChat?"enabled":"disabled")+"' onclick='debugBots(16);clearPops();' oncontextmenu='debugBots(16, false);clearPops();'>Voice on Death</span></div>",t+="<div class='takeActionTable'><span onmouseenter='playTick()' class='takeActionBtn "+(e.godMode?"enabled":"disabled")+"' onclick='debugBots(18);clearPops();' oncontextmenu='debugBots(18, false);clearPops();'>God Mode</span></div>",t+="<div class='takeActionTable'><span onmouseenter='playTick()' class='takeActionBtn kick' onclick='debugBots(19);clearPops();'>Slimer</span><span onmouseenter='playTick()' class='takeActionBtn kick' onclick='debugBots(20);clearPops();'>Juggernaut</span></div>",t+="<div style='font-size: 12px;color: var(--yellow);text-align: center;'>Dont forget to clear bots</div>",genericPopup(t,"confPop")}}}),Object.defineProperty(window,"redeemVoucher",{writeable:!1,value:function(){var e=document.getElementById("redVouch");if(e&&e.value){var t=e.value;(e=document.getElementById("vouchRes"))&&(e.style.display="block",e.innerHTML="Loading..."),me.send("vo",t)}}}),window.voucherPopup=function(){if(Re){var e="<div style='color:rgba(255,255,255,0.7);margin-top:-5px;font-size:19px;text-align:center;margin-bottom:5px;'>"+S.t("windows.store.voucherinfo")+"</div>";e+="<div><input type='text' id='redVouch' class='smlInput' placeholder='Enter KR Code' /><div class='redVouchBtn' onclick='redeemVoucher()'>Redeem</div></div>",e+="<div id='vouchRes' style='display:none'></div>",genericPopup(e,"vouchPop")}else showWindow(5,!0)};var ua,pa,fa,ma,ga=spinWindow,va=ga.getContext("2d"),ya=.5,ba=.6,wa=null,xa=!1,Sa=0,Ma=30,ka=300,_a=0,Ta=[0],Ca=[0],Ia=[],Aa=[],Ra=0,Pa=0,Ea=null,Da=!1,Oa=!1,La=0,ja=!0,za=!1,Ba=!1,Na=0,Fa=0,Ha=new de.PerspectiveCamera(45,1,.1,100),Ua=new de.WebGLRenderer({precision:"mediump",antialias:!1,alpha:!0});Ua.setPixelRatio(.6*window.devicePixelRatio),Ha.position.y=10,spinItemCanvas.appendChild(Ua.domElement),Object.defineProperty(window,"prizeWheel",{writeable:!1,value:function(e,t,i,n,s){if(Da=t&&ve.store.skins[t].spinWheel,ma=Da?ve.store.skins[t].spinWheel:ve.store.wheels[e]){Oa=i&&ma.multi,spinAgainBtn.style.display=ma.free?"none":"",spinInfoBtn.style.display=ma.free?"none":"",spinEquipBtn.style.display="",spinNextBtn.style.display=Oa?"":"none",Pa=e,Ea=t,showWindow(0),_a=s?1:0,ja=!xa,za=!1,Ba=!ma.kr,Aa=[],Ta=[0],Fa=0,Ca=[0],La=Sa=0,"block"!=spinUI.style.display&&ee.toggleMenuHider(!1),spinItem.style.display="none",spinUIBtns.style.display="none",spinUI.style.display="block",spinItemName.style.display="none",Ha.position.x=ka,spinButton.style.opacity=1,spinText.style.display="table-cell",spinHeader.innerHTML="SPIN",spinCost.innerHTML="-"+ma.price*(Oa?ma.multi:1)+"KR",spinCost.style.display=Ea?"none":"",spinAgainBtn.innerHTML="<i class='material-icons' style='margin-top: -10px;margin-left: -10px;text-shadow: none;vertical-align: middle;font-size: 38px;color: #fff;'>refresh</i> "+(Da?'Redeem<img src="'+ve.store.skins[Ea].thumbnail+'" style="width: 40px;vertical-align: text-top;display: inline-block;">':+ma.price*(Oa?ma.multi:1)+" KR");for(var a="<div style='font-size:50px;color:#fff'>"+ma.name.toUpperCase()+"</div>",r=0;r<ve.store.rarities.length;++r)if(!(Ee=ve.store.rarities[r]).noSpin){var o=ma.rarities[r]||0;if(ma.kr&&!o)continue;a+="<div style='margin-top:5px;color:#fff'>"+(ce.rarityAnim&&Ee.animate?"<div class='colCub rainbowBG'></div>":"<div class='colCub' style='background-color:"+Ee.color+"'></div>")+(ma.kr?"<span style='color:rgba(255,255,255,0.5)'>&emsp;"+ve.store.getFreeKR(r,Re).kr+" KR</span>":Ee.name+"<span style='color:rgba(255,255,255,0.5);float:right'>&emsp;"+(o||0)+"%</span>")+"</div>"}if(ma.kr||(a+='<div id="spinHistoryBtn" onclick="spinHistoryPopup()">Spin History</div>'),spinInfo.innerHTML=a,Re&&(spinKR.innerHTML="<span style='color:rgba(255,255,255,0.6)'>"+ae.commaNumber(Re.funds)+"</span> KR"),!ma.kr){a="";var l,c=ma.rarities,d=c.indexOf(c.filter((e=>e>0)).slice(-1).pop()),h=ve.store.getSpnItems(ma,d,Re,ma.season||u.currentSeason,ma.bigRar),p=[],f="";for(r=0;r<4;++r)l=h[ae.randInt(0,h.length-1)],(Ee=ve.store.skins[l])&&(Ee.frames&&-1==p.indexOf(Ee.frames)&&p.push(Ee.frames),a+=Ee.type&&Ee.type==Te.SPRAY?"<div onclick='viewItem("+l+")' class='spinSprayDiv' style='border-color:"+ve.store.rarities[Ee.rarity].color+"'><div class='spinSprayIcon' style='background: url(&quot;"+Ee.thumbnail+"&quot;);"+ae.getFrameAnim(Ee,"sprayAnm")+"'></div></div>":"<img class='spinPrevIcon' style='border-color:"+ve.store.rarities[Ee.rarity].color+"' onclick='viewItem("+l+")' src='"+Ee.thumbnail+"' />");if(p.length){f+="<style>";for(r=0;r<p.length;r++)f+="@keyframes sprayAnm"+p[r]+" {100%{background-position:-"+91*p[r]+"px}}";f+="</style>"}h.length&&(a+="<span style='color:#fff;line-height:85px;margin-left:6px'>+ More</span>"),spinItems.innerHTML=f+a}n&&spinButton.click()}}}),spinAgainBtn.onclick=()=>{za&&prizeWheel(Pa,Ea,Oa,!0,!0)},spinInfoBtn.onclick=()=>{za&&openURL("/social.html?p=itemsales&i="+ve.store.skins.findIndex((e=>e==wa)))},spinNextBtn.onclick=()=>{or(!0)},spinEquipBtn.onclick=()=>{if(Ba){const t=[null,"selectHat","selectBody","selectMelee","selectSpray","selectDye","selectWaist","selectFace","selectShoe","selectPet",null,"selectWrist",null,null,"selectBack","selectHead"];if(wa.type&&t[wa.type])window[t[wa.type]](wa.index,!0);else if(null!=wa.weapon){var e=ve.weapons[wa.weapon-1];skinSelector(e.id,e.secondary,!0),selectSkin(wa.index,e.id,!0)}zs("SUCCESS",null,"Skin equipped")}};window.dontInc=!1;function Va(e,t,i){if(we.tmp.showUnboxings){var n;if(n=i?{rarity:ve.store.freeKR[t].rarity,name:i+" KR"}:ve.store.skins[t]){var s=ce.rarityAnim&&ve.store.rarities[n.rarity].animate;Rc(0,null,"<span style='color:#fff'>"+S.t("windows.store.unboxed",ae.fixStr(we.tmp.streamMode?ae.scrambleS(e):e),"</span>")+" <span class='click"+(s?" rainbowText":"")+"' style='color:"+ve.store.rarities[n.rarity].color+"'"+(i?"":" onclick='viewItem("+t+")'")+">["+ae.fixStr(n.name)+"]</span>","block"==spinUI.style.display?4:1)}}}function Ga(e,t){if(we.tmp.showUnboxings){var i=ve.store.skins[t],n=ve.players.findById(e);if(i&&n){var s=n.name,a=ce.rarityAnim&&ve.store.rarities[i.rarity].animate;Rc(0,null,"<span style='color:#fff'>"+S.t("windows.store.unboxed",ae.fixStr(we.tmp.streamMode?ae.scrambleS(s):s),"</span>")+" <span class='click"+(a?" rainbowText":"")+"' style='color:"+ve.store.rarities[i.rarity].color+"' onclick='viewItem("+t+")'>["+ae.fixStr(i.name)+"]</span>",4)}}}function Wa(e){"Spin Error 9"!=e?("block"==spinUI.style.display&&prizeWheel(Pa,Ea,Oa),genericPopup('<div class="popHeader">Spin Error</div>'+e,"spinErrorPop")):windows[13].purchase()}spinButton.onclick=function(e){if(e.stopPropagation(),e.preventDefault(),ye.idleTimer=0,u.isProd,me&&ma.kr&&!Re)me.send("fkr");else if(me&&!xa&&ja&&Re){if(!Ea&&Re.funds<ma.price)return Wa("Spin Error 9");xa=!0,ja=!1,ma.kr?me.send("fkr"):me.send("spin",Pa,Ea,!!Oa),spinHeader.innerHTML="",spinCost.innerHTML=S.t("windows.store.purchasing"),he.play("buy_1",.1)}else za&&e.shiftKey&&prizeWheel(Pa,Ea,Oa,!0,!0)},spinUI.onclick=function(e){showWindow(14),ee.toggleMenuHider(!0),spinUI.style.display="none",confetti&&confetti.reset(),me&&me.send("unbx"),Re&&(spinKR.innerHTML="<span style='color:rgba(255,255,255,0.6)'>"+ae.commaNumber(Re.funds)+"</span> KR"),za&&e.shiftKey&&prizeWheel(Pa,Ea,Oa,!0,!0)},spinUI.addEventListener("mousewheel",(function(e){e=window.event||e;if("block"==spinItem.style.display&&e.target.id&&e.target.id.startsWith("spin")){var t=-Math.max(-1,Math.min(1,e.wheelDelta||-e.detail));window.rotPrev(t>0?-.1:.1)}return!1}),!1),window.rotPrev=function(e){fa&&(fa.rotation.y+=e)};let qa=[],Ya=!1,Ka=-1,Xa=0,Za=!0;function Ja(e,t,i){var n="";return(Ee=ve.store.skins[e.ind])&&!Ee.blackM&&"Raid"!=Ee.limT&&null==Ee.itemShop&&(n+=Ee.type&&Ee.type==Te.SPRAY?"<div onclick='viewItem("+Ee.index+");cancelTip()' onmouseover='createSpinHistoryTip(this)' onmouseout='cancelTip()' class='spinSprayDiv' style='margin:5px;border-color:"+ve.store.rarities[Ee.rarity].color+"'><div class='spinSprayIcon' loading='lazy' style='background: url(&quot;"+Ee.thumbnail+"&quot;);"+ae.getFrameAnim(Ee,"sprayAnm")+"'></div></div>":"<img class='spinPrevIcon' style='margin:5px;border-color:"+ve.store.rarities[Ee.rarity].color+"'  onmouseover='createSpinHistoryTip(this)' onmouseout='cancelTip()' onclick='viewItem("+Ee.index+");cancelTip()' loading='lazy' src='"+Ee.thumbnail+"' />"),t?void t.insertAdjacentHTML(i||"beforeend",n):n}function Qa(e){var t;Xa+=e&&e.length||0,Ka=qa.length,e&&qa.push(...(t=e,t.filter((e=>e&&ve.store.skins[e.ind]&&!ve.store.skins[e.ind].blackM&&"Raid"!=ve.store.skins[e.ind].limT&&null==ve.store.skins[e.ind].itemShop)))),Ya=!0,spinHistoryPopup(!0)}function $a(){if(Aa[Ra]){wa=Aa[Ra];const i=Re.getSkinCount(wa.index);spinItemName.innerHTML=wa.name+"<div style='color:rgba(255,255,255,0.5)'>"+ae.getItemDesc(wa,ve.weapons,S).replace(" Item","")+"</div><div style='color:rgba(255,255,255,0.5)'>"+(i>1?"<span style='color:#fff'>x"+i+"</span> Owned":"<span style='color:#fff'>NEW</span>")+"</div>",Na=0,(ua=new de.Scene).name="Wheel",ua.add(new de.AmbientLight(5197647));var e=new de.DirectionalLight("#ffffff",.5);e.position.set(3,1,0),ua.add(e);var t=wa.type?wa:ve.store.previews[wa.weapon]||{};fa=ce.genObj3D(0,0,0),pa=ce.genObj3D(0,1+(t.yOff||0),t.xOff||0),wa.type!=Te.PLAYER_CARD&&(pa.rotateX(wa.type&&wa.type==Te.DYE?-Math.PI/11:-Math.PI/7),pa.rotateY(Math.PI+.5+(t.zRota||0)),pa.rotateZ(-.5)),pa.orgXR=pa.rotation.x,pa.orgYP=pa.position.y,wa.type&&wa.type==Te.DYE?((Ee=new Se(-1,this,ve,!0)).sid=-1,Ee.init(.5,0,-7,"preview",!1),Ee.skins=[-1,-1],Ee.dyeIndex=parseInt(wa.index),Ee.setClass(ve,9,2,!0),ve.players.swapWeapon(Ee,0,!0),ve.players.generateMeshes(Ee,!1,!0,!0),pa.add(Ee.objInstances),Ee.swapTime=0,Ee&&Ee.weaponMeshes&&Ee.weaponMeshes[0]&&(Ee.weaponMeshes[0].visible=!0),Ee&&Ee.weaponGeos&&Ee.weaponGeos[0]&&(Ee.weaponGeos[0].visible=!1),ve.players.updateMsh(Ee,!0)):wa.type&&wa.type==Te.SPRAY?((Ee=new de.Mesh(new de.PlaneGeometry(1,1))).scale.set(9,7.2,1),Ee.material=ce.getMat(ve.store.types[wa.type]+(wa.id||0),{local:wa.local,depthWrite:!1,transparent:!0,frames:wa.frames,frameT:wa.frameT,centerZ:!0}),pa.add(Ee),Ee.rotation.y=1.1*Math.PI):wa.type&&wa.type==Te.PLAYER_CARD?((Ee=new de.Mesh(new de.PlaneGeometry(1,1))).scale.set(13,3.7,1),Ee.material=ce.getMat(ve.store.types[wa.type]+(wa.id||0),{texExt:wa.texExt,local:wa.local,depthWrite:!1,transparent:!0,frames:wa.frames,frameT:wa.frameT,centerZ:!0,side:2}),pa.add(Ee),Ee.rotation.y=Math.PI/2):ce[wa.hasAnim?"loadAnimMesh":"loadMesh"]({fileExt:wa.fileExt,setLayer:0,hasAnim:wa.hasAnim,animS:wa.animS,inspectAnim:wa.inspectAnim,local:wa.local,localM:wa.localM,src:ve.store.types[wa.assetType||wa.type||0]+(wa.assetType||wa.type?wa.id:wa.weapon)+(null==wa.mid?"":"_"+wa.mid),texSrc:null==wa.mid?wa.type&&wa.type==Te.MELEE?wa.pat?wa.tex:"melee/melee_"+(wa.id||0)+(wa.tex?"_"+wa.tex:""):wa.type?wa.tex?ve.store.types[wa.assetType||wa.type||0]+wa.id+"_"+wa.tex:null:wa.tex?wa.tex:"weapons/skins/weapon_"+wa.weapon+"_"+wa.id:ae.getReModel(ve.store,wa),rotT:wa.rotT,movT:wa.movT,movD:wa.movD,pulsT:wa.pulsT,repeatY:wa.tileS||0,repeatX:wa.tileS||0,frames:wa.frames,frameT:wa.frameT,sameGlow:wa.sameGlow,sameEnv:wa.sameEnv,env:wa.env||wa.sameEnv?wa.env||3:void 0,glowText:wa.glow||wa.sameGlow,emissive:wa.glow||wa.sameGlow?wa.emiss||"#ffffff":null,emissInt:wa.glowInt,rgb:wa.rgb,rgbS:wa.rgbS,uv2:!0,fillScale:60,centerZ:!0,color:wa.color||null,rAnim:wa.rAnim,rAnimA:wa.rAnimA,rAnimT:wa.rAnimT,rAnimM:wa.rAnimM,transparent:null!=wa.opac||wa.trans,useWireframe:wa.wire,side:wa.side||0,opacity:wa.opac||1,alphaTest:wa.alpha||0,shaderNum:wa.shaderNum,video:wa.video,projection:wa.projection},0,0,0,(wa.type&&wa.type!=Te.MELEE?Math.PI:Math.PI/2)+(t.xRot||0),2.2*(wa.spnScl||t.scl||1),pa),fa.add(pa),ua.add(fa),Ha.lookAt(ua.position),spinItemCanvas.style.filter="drop-shadow(0 0 20px "+ve.store.rarities[wa.rarity].color+")",Ra++}}function er(e,t,i,n,s){if(xa=!1,e)Wa("DISABLED"==e?S.t("spins.banned"):e);else{Array.isArray(t)||(t=[t]),Array.isArray(i)||(i=[i]),Ra=0,i.map(((e,i)=>({n:t[i],i:e}))).sort(((e,t)=>(ve.store.skins[t.i].rarity||0)-(ve.store.skins[e.i].rarity||0))).forEach(((e,n)=>{t[n]=e.n,i[n]=e.i})),(Aa=i.map((e=>ve.store.skins[e]))).forEach((e=>function(e){if(Ya){qa.unshift({ind:e,dte:(new Date).toString(),fds:ma&&ma.price?ma.price:0}),Ya&&(Ka++,Xa++);var t=document.getElementById("spinHistoryList");t&&Ja(qa[0],t,"afterbegin")}}(e.index))),Re&&(ma&&ma.price&&Aa.forEach((e=>{logEventFRVR("item_flow",{item:"krunkers",flow_type:"sink",amount:ma.price||0,item_context:ma.name.toLowerCase()+"_spin",item_context_details:ve.store.rarities[e.rarity].name.toLowerCase(),wallet:Re?Re.funds:0})})),Re.funds=n,updateMenuAccountData(),spinKR.innerHTML="<span style='color:rgba(255,255,255,0.6)'>"+ae.commaNumber(Re.funds)+"</span> KR",Aa.forEach((e=>Re.addSkin(e.index))),s&&Re.removeSkin(s)),Ta=Array(Aa.length).fill(0).map(((e,i)=>i%2==0?2*Math.PI*(t[i]/100+13)+Math.PI/2:Math.PI/2-2*Math.PI*(13-t[i]/100))),Ca=Array(Aa.length).fill(0),Ia=Array(Aa.length).fill(0).map((()=>.4+.6*Math.random()));let e=Math.max(...Ia);Ia=Ia.map((t=>t/e)),spinCost.innerHTML="",$a()}}function tr(e,t,i,n,s,a){if(!i){if(e&&e==me.socketId&&Re){if(wa=ve.store.skins[s],ve.map.manager.spinners.length)for(var r=0;r<ve.map.manager.spinners.length;++r)if((Ee=ve.map.manager.spinners[r]).uid==t){var o=ve.store.wheels[Ee.wheel];o&&o.price&&logEventFRVR("item_flow",{item:"krunkers",flow_type:"sink",amount:o.price||0,item_context:o.name.toLowerCase()+"_spin",item_context_details:ve.store.rarities[wa.rarity].name.toLowerCase(),wallet:Re?Re.funds:0});break}Re.funds=a,updateMenuAccountData(),Re.addSkin(s)}ve.updateSpinner(t,n,s)}}function ir(e,t){if(we.tmp.showUnboxings){var i=ve.store.skins[t],n=ve.players.findById(e);if(i&&n){var s=n.name,a=ce.rarityAnim&&ve.store.rarities[i.rarity].animate;Rc(0,null,"<span style='color:#fff'>"+S.t("windows.store.found",ae.fixStr(we.tmp.streamMode?ae.scrambleS(s):s),"</span>")+" <span class='click"+(a?" rainbowText":"")+"' style='color:"+ve.store.rarities[i.rarity].color+"' onclick='viewItem("+t+")'>["+ae.fixStr(i.name)+"]</span>",4)}if(Ae&&Ae.isYou){Bt.skins||=[];var r=Bt.skins.find((e=>e&&e.i==t));r?r.c++:Bt.skins.push({i:t,c:1})}}}window.getSpinHistory=e=>{e?(e.classList.toggle("disabled",!0),e.innerHTML="Loading..."):Bs("Fetching Spin History..."),me.send("spinH",Xa)},window.clearSpinHistory=()=>{qa.length=0,Ya=!1,Ka=-1,Xa=0,Za=!0},window.showSpinStats=function(e){if(ea(window.event),qa.length){for(var t,i=new Date(qa[0].dte).toDateString(),n=new Date(qa[qa.length-1].dte).toDateString(),s=0,a=[],r=0,o=0;o<qa.length;++o){a[(t=ve.store.skins[qa[o].ind]).rarity||0]=(a[t.rarity||0]||0)+1,s+=qa[o].fds;var l=ie.estimateValue(qa[o].ind)||0;r+=Math.round(l)}var c='<div class="popHeader">Spin Stats</div>\n\t\t<div class="spinHistoryTime">Current Date Range: '+n+" - "+i+'</div>\n\t\t<div style="text-align:left">\n\t\t<div style="color:#fff">Total Spent:<span style=\'color:rgba(255,255,255,0.5);float:right\'>&emsp;'+ae.commaNumber(s)+" KR</span></div>\n\t\t<div style=\"color:#fff\">Est Value:<span style='color:rgba(255,255,255,0.5);float:right'>&emsp;"+ae.commaNumber(r)+" KR</span></div>\n\t\t<div style=\"color:#fff\">Total Spins:<span style='color:rgba(255,255,255,0.5);float:right'>&emsp;"+ae.commaNumber(qa.length)+"</span></div>";for(o=0;o<ve.store.rarities.length;++o)(Ee=ve.store.rarities[o]).noSpin||(c+="<div style='margin-top:5px;color:#fff'>"+(ce.rarityAnim&&Ee.animate?"<div class='colCub rainbowBG'></div>":"<div class='colCub' style='background-color:"+Ee.color+"'></div>")+Ee.name+"<span style='color:rgba(255,255,255,0.5);float:right'>&emsp;"+ae.commaNumber(a[o]||0)+"</span></div>");c+="</div>",genericPopup(c,"spinHistoryStatsPop")}else zs(null,"No spin history found")},window.spinHistoryPopup=function(e){if(ea(window.event),rr()){if(!Ya)return void getSpinHistory();if(!qa.length)return void zs(null,"No spin history found");resetPops(),spinHistoryPop.style.display="block";var t="",i=new Date(qa[0].dte).toDateString(),n=new Date(qa[qa.length-1].dte).toDateString();if(Za){t="<div class='spinHistoryHeader'><div class='spinHistoryStats' onmouseover='playTick();' onclick='playSelect();showSpinStats(this);'>Stats</div>Recent Items<div class='spinHistoryClear' onmouseover='playTick();' onclick='playSelect();getSpinHistory(this);'>Load More</div></div>";t+='<div class="spinHistoryTime">Current Date Range: '+n+" - "+i+"</div>",t+="<div id='spinHistoryList'></div>",t+="<div class='spinHistoryWarning'>Data only tracks back to April 2020</div>",t+="<style id='spinHistoryStyle'>";for(var s=1;s<10;s++)t+="@keyframes sprayAnm"+s+" {100%{background-position:-"+91*s+"px}}";t+="</style>",spinHistoryPop.innerHTML=t}else{var a=document.querySelector(".spinHistoryClear");a&&(a.classList.toggle("disabled",!1),a.innerHTML="Load More");var r=document.querySelector(".spinHistoryTime");r&&(r.textContent="Current Date Range: "+n+" - "+i)}var o=document.getElementById("spinHistoryList");for(s=0;s<qa.length;++s)(s>=Ka||Za)&&Ja(qa[s],o,"beforeend");!Za&&e&&(o.scrollTop=o.scrollHeight),Za&&=!1,Ka=qa.length}};let nr=[];function sr(e){Re&&Re.addSkin(e);var t=ve.store.skins[e];if(t){const e=ce.rarityAnim&&ve.store.rarities[t.rarity].animate;!function(e,t){"block"!=skinRewardHolder.style.display&&(skinRewardHolder.style.display="block");for(var i=null,n=0;n<nr.length;++n)if(!nr[n].life&&!nr[n].elm){i=nr[n];break}i||(i={},nr.push(i)),i.elm&&i.elm.remove(),i.life=5e3,(Ke=document.createElement("div")).className="skinRewCard",Ke.setAttribute("onmouseenter","playTick()"),Ke.setAttribute("onclick","openSales("+e.index+")"),Ke.innerHTML="<img class='skinRewImg"+(t?" rainbowBorder":"")+"'\n\t\tsrc='"+e.thumbnail+"' style='border: 2px solid "+ve.store.rarities[e.rarity].color+"' />\n\t\t<div class='skinRewRight'>"+e.name+"</div>",i.elm=Ke,skinRewList.insertAdjacentElement("afterbegin",i.elm)}(t,e),Rc(-1,null,"<span style='color:#fff'>You</span> found <span class='click"+(e?" rainbowText":"")+"' style='color:"+ve.store.rarities[t.rarity].color+"' onclick='viewItem("+t.index+")'>["+ae.fixStr(t.name)+"]</span>",1)}Bt.skins||=[];var i=Bt.skins.find((t=>t&&t.i==e));i?i.c++:Bt.skins.push({i:e,c:1})}function ar(e,t,i,n,s){if(xa=!1,s)Wa(s);else{wa=ve.store.getFreeKR(i,Re),spinItemName.innerHTML=wa.kr+" KR",Ta=[2*Math.PI*(t/100+13)+Math.PI/2],logEventFRVR("item_flow",{item:"krunkers",flow_type:"source",amount:wa.kr,item_context:"free_spin",wallet:Re?Re.funds:0}),Re&&(Re.lastReward=parseInt(e),Re.funds=n,updateMenuAccountData()),On(),spinCost.innerHTML="",Ca=[0],Na=0,(ua=new de.Scene).name="KR",ua.add(new de.AmbientLight(5197647));var a=new de.DirectionalLight(16777215,.5);a.position.set(3,1,0),ua.add(a),(pa=ce.genObj3D(0,1,0)).rotateX(-Math.PI/7),pa.rotateY(1.07),pa.rotateZ(-2.4499999999999997),pa.orgXR=pa.rotation.x,pa.orgYP=pa.position.y,ce.loadMesh({src:"krunkie_0",texSrc:"krunkie_0",noGreen:!0,uv2:!0,fillScale:60,centerZ:!0},0,0,0,.3,4.840000000000001,pa),ua.add(pa),Ha.lookAt(ua.position)}}function rr(){for(let e=0;e<Ca.length;e++)if(Ca[e]!=Ta[e])return!1;return!0}function or(e){rr()&&(e&&$a(),La=0,Sa=100-ma.rarities[wa.rarity],he.play("reward",.3),confetti&&confetti.reset(),confetti({spread:360,origin:{x:.5,y:.5},particleCount:ve.store.rarities[wa.rarity].confC,colors:ve.store.rarities[wa.rarity].confCols}),me&&me.send("unbx"),ma.kr&&Re&&(spinKR.innerHTML="<span style='color:rgba(255,255,255,0.6)'>"+ae.commaNumber(Re.funds)+"</span> KR"),wa.rarity>=o.a.RELIC?he.play("cheer_1",.1):wa.rarity>=o.a.RARE&&he.play("cheer_0",.1))}var lr=0;function cr(e,t,i,n){try{windows[13].resp(e,t,i,n)}catch(e){}}function dr(e,t){try{windows[4].aResp(e,t)}catch(e){}}function hr(e,t){try{t&&mapList&&windows[9].mapsLoaded(t.data,t.index,t.error)}catch(e){}}function ur(e,t){try{t&&modList&&windows[3].modsLoaded(t.data,t.index,t.error)}catch(e){}}function pr(e,t){t&&windows[t.index].searchResp(t.data)}function fr(e,t,i,n){windows[12].resp(e,t,i,n)}function mr(){windows[12].del()}function gr(e){windows[4].dropsLoaded(e)}function vr(e){windows[4].promosLoaded(e)}function yr(e,t,i){windows[7].dediRes(e,t,i)}function br(e){e&&e.length&&e.sort((function(e,t){return e.st=e.st||0,t.st=t.st||0,e.st<t.st?1:e.st>t.st?-1:0})),Pe=e||[],windows[4].friendsLoaded(e),Pe.length&&(id=1,nd())}function wr(e){if(Re&&e)for(var t,i=0;i<e.length;i+=3)(t=Re.activeChallenges.find((t=>t&&t.CI==e[i+1])))&&(t.PV=e[i+2],t.PT=parseInt(e[i]));ci||updateWindow(33)}function xr(e){if(Re&&e)for(var t,i=0;i<e.length;i+=2)(t=Re.activeChallenges.find((t=>t&&t.CI==e[i])))&&(t.PV=e[i+1],t.PV>=t.DAT.val&&(t.PT=1))}function Sr(e,t,i){if(Re){var n=Re.activeChallenges[e];if(t){if(Rc(-1,null,"<span style='color:#fff'>Finish the game to complete:</span> <span style='color:#FBC02D'>["+n.N+"]</span> challenge",1),i.jnk&&(Bt.junk=(Bt.junk||0)+parseFloat(i.jnk)),i.sk)Bt.skins||=[],(Array.isArray(i.sk)?i.sk:[i.sk]).forEach((e=>{var t=Bt.skins.find((t=>t&&t.i==e));t?t.c++:Bt.skins.push({i:e,c:1})}))}else endChals.insertAdjacentHTML("beforeend","<div class='endChalCard' onclick='showWindow(33, true)' onmouseenter='playTick()'><img class='endChalImg' src='"+ae.assetsUrl("/img/chals/icon_"+(n.IC||0)+".png")+"' /><div class='endChalRight'>"+n.N+"<div class='endChalDesc'>Completed!</div></div></div>")}}function Mr(e){Re&&(Re.stats.flg=null==e?Re.stats.flg:e,updateWindow(5))}function kr(e){Re&&(Re.stats.bdg=null==e?Re.stats.bdg:e,clearPops(),updateWindow(5))}function _r(e){Re&&(Re.badges.push(e),zs("SUCCESS",null,"Badge Claimed!"))}function Tr(e){Re&&(Re.badges.push(...e),zs("SUCCESS",null,"You unlocked new badges"))}function Cr(e){Re&&(Re.stats.hds=e,updateWindow(5))}function Ir(e){return windows[5].dataLoaded(e)}function Ar(e){return Re&&(Re.BP=e),windows[5].syncBPProg(e)}var Rr,Pr,Er=0;function Dr(e,t,i){return new Promise(((n,s)=>{H.fetchGameList().then((a=>{var r,o=(r=a).games,l=we.list.defaultRegion.val,c=[];for(var d of o){var[h,u,p,f,r]=d;if(p<f){var m=0;for(var g in e)m++,e[g]==r[g]&&m--;0==m&&c.push({id:h,region:u,clients:p,maxClients:f,data:r})}}c=c.sort(((e,t)=>(t.clients||0)-(e.clients||0))),i||(c=c.sort(((e,t)=>(t.region==l?1:0)-(e.region==l?1:0)))),c.length?(c.length>t&&(c.length=t),n(c)):s()}))}))}function Or(e,t){try{pfpUpResp&&1==t&&(pfpUpResp.innerHTML=e)}catch(e){}try{setUpResp&&2==t&&(setUpResp.innerHTML=e)}catch(e){}}function Lr(){nn(),updateWindow(5),zs("SUCCESS",null,"Uploaded!")}Object.defineProperty(window,"selectHostMap",{writeable:!1,value:function(e,t=null,i){2==windows[9].hostType?Pr={id:i,name:e}:(Pr={id:i,name:e},Er=0,Rr=null,"undefined"!=t&&null!=t&&(Pr=null,Rr=t)),showWindow(8)}}),Object.defineProperty(window,"autoHostMap",{writeable:!1,value:function(e,t){t&&(loadGamNm.innerHTML=S.t("generic.hosting.noGames")),fe.getMapPreset(e,(function(i,n,s){t&&(loadGamNm.innerHTML=S.t("generic.hosting")+" "+e+" ...");var a=null;try{a=i&&n?JSON.parse(n):null}catch(e){a=null}for(var r=[],o=0;o<ne.length;o++){if(!ne[o].preventCustomGames||Re&&Re.isDev)(a?a.modes&&a.modes.indexOf(o)>=0:0==o)&&r.push(o)}r.length||r.push(0);var l=[];for(o=0;o<ve.classConfig.length;o++){ve.classConfig[o];(!a||!a.classes||a.classes.indexOf(o)>=0)&&l.push(o)}var c={private:!1,krRewards:(s||0)>0,defaultSetts:!0,override:0,customMap:e,rawMapData:null,maps:[],modes:r,classes:l,passCode:null},d=ae.getAccountType(Re);for(o=0;o<u.serverConfig.length;o++){let e;if((Ee=u.serverConfig[o]).bool)e=Ee.def,a&&a.settings&&null!=a.settings[Ee.varN]&&!Ee.cost&&(e=!!a.settings[Ee.varN]);else if(Ee.input)e="";else if(Ee.select)e=Ee.def;else{var h=Ee.def,p=Ee.max;3==d?p=Ee.maxF||Ee.max:2==d?p=Ee.maxP||Ee.max:0==d&&(p=Ee.maxG||Ee.max),a&&a.settings&&null!=a.settings[Ee.varN]&&!Ee.cost&&(h=a.settings[Ee.varN])>p&&(h=p),e=parseFloat(h)||0}c[Ee.varN]=e}if(a&&a.weps)for(var f,m=0;m<ve.weapons.length;m++){f=a.weps&&null!=a.weps[m]?a.weps[m]:null;for(o=0;o<u.weaponConfig.length;o++)if(Ee=u.weaponConfig[o],null!=ve.weapons[m][Ee.varN]){var g=f&&null!=f[Ee.varN]?f[Ee.varN]:ve.weapons[m][Ee.varN];if(Ee.bool)g=!!g;else if(Ee.select)g=null==Ee.options[g]?Ee.def:parseInt(g);else if(Ee.input)g=g||"",ae.isString(g)||(g=ve.weapons[m][Ee.varN]),/[^\w \-\|]+/gim.test(g)&&(g=ve.weapons[m][Ee.varN]),g.length>(Ee.len||16)&&(g=ve.weapons[m][Ee.varN]);else{var v=Ee.decs;g=ae.fixFloat(g,v)}g!=ve.weapons[m][Ee.varN]&&(c.weps||(c.weps={}),c.weps[m]||(c.weps[m]={}),c.weps[m][Ee.varN]=g)}}if(a&&a.cls){var y;for(m=0;m<ve.classes.length;m++){y=a.cls&&null!=a.cls[m]?a.cls[m]:null;for(o=0;o<u.classConfig.length;o++)if(Ee=u.classConfig[o],null!=ve.classes[m][Ee.varN]){g=y&&null!=y[Ee.varN]?y[Ee.varN]:ve.classes[m][Ee.varN];if(Ee.bool)g=!!g;else if(Ee.select)g=null==Ee.options[g]?Ee.def:parseInt(g);else if(Ee.input)g=g||"",ae.isString(g)||(g=ve.classes[m][Ee.varN]),/[^\w \-\|]+/gim.test(g)&&(g=ve.classes[m][Ee.varN]),g.length>(Ee.len||16)&&(g=ve.classes[m][Ee.varN]);else{v=Ee.decs;g=ae.fixFloat(g,v)}g!=ve.classes[m][Ee.varN]&&(c.cls||(c.cls={}),c.cls[m]||(c.cls[m]={}),c.cls[m][Ee.varN]=g)}}}if(a&&a.prks){var b;for(m=0;m<ve.effects.length;m++){b=a.prks&&null!=a.prks[m]?a.prks[m]:null;for(o=0;o<u.effectConfig.length;o++)if(Ee=u.effectConfig[o],null!=ve.effects[m][Ee.varN]){g=b&&null!=b[Ee.varN]?b[Ee.varN]:ve.effects[m][Ee.varN];if(Ee.bool)g=!!g;else if(Ee.select)g=null==Ee.options[g]?Ee.def:parseInt(g);else if(Ee.input)g=g||"",ae.isString(g)||(g=ve.effects[m][Ee.varN]),/[^\w \-\|]+/gim.test(g)&&(g=ve.effects[m][Ee.varN]),g.length>(Ee.len||16)&&(g=ve.effects[m][Ee.varN]);else{v=Ee.decs;g=ae.fixFloat(g,v)}g!=ve.effects[m][Ee.varN]&&(c.prks||(c.prks={}),c.prks[m]||(c.prks[m]={}),c.prks[m][Ee.varN]=g)}}}M("hosting",(function(e,t){t||me.send("custom",c,e)}))}))}}),Object.defineProperty(window,"openServerWindow",{writeable:!1,value:function(e){var t=!!window.event&&!!window.event.shiftKey;0==e?showWindow(2):1==e?(showWindow(2),setTimeout((()=>{!!we.tmp.oldBrowser?setExpandedRegion(-1):windows[1].switchTab(1)}),500)):2==e?(Bs("Searching..."),Dr({oc:1,g:23},20,t).then((e=>{for(var t=0;t<e.length;t++)Y(e[t].id);setTimeout((()=>zs(null,"Took to long to find")),2e3)})).catch((()=>{zs(null,"Couldnt find any")}))):3==e?(Bs("Searching..."),Dr({oc:1,g:35},20,t).then((e=>{for(var t=0;t<e.length;t++)Y(e[t].id);setTimeout((()=>zs(null,"Took to long to find")),2e3)})).catch((()=>{zs(null,"Couldnt find any")}))):4==e&&(Bs("Searching..."),Dr({oc:1,g:18},20,!0).then((e=>{for(var t=0;t<e.length;t++)Y(e[t].id);setTimeout((()=>zs(null,"Took to long to find")),2e3)})).catch((()=>{zs(null,"Couldnt find any")})))}}),Object.defineProperty(window,"openHostWindow",{writeable:!1,value:function(e,t){return ve&&ve.isOfficial?showWindow(0):(Pr=null,Rr=null,Er=e?0:t||0,void showWindow(8,e))}}),Object.defineProperty(window,"openJoinWindow",{writeable:!1,value:function(e,t){return t||!navigator.clipboard?showWindow(24):void(t||navigator.clipboard.readText().then((function(e){$r(e)})).catch((e=>{showWindow(24)})))}}),window.downloadFile=function(e,t){var i=document.createElement("a");i.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(JSON.stringify(t))),i.setAttribute("download",e),i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i)},window.loadCSSF=function(e){var t=document.getElementsByTagName("head")[0],i=document.createElement("link");i.id="cssLoadr"+ae.randInt(0,1e4),i.rel="stylesheet",i.type="text/css",i.href="./css/"+e+"/main.css",i.media="all",t.appendChild(i)};var jr=[],zr=[],Br=new FileReader,Nr=null;Br.onload=e=>loadModPack(e.target.result);var Fr=null;function Hr(e){this.imgAsDataURL="",this.process=function(t){if(e){this.imgAsDataURL=URL.createObjectURL(t);try{if("textures/logo.png"==e)we.tmp.canChangeLogo&&(Fr||(Fr=mainLogo.src.toString()),mainLogo.src=this.imgAsDataURL);else if("scares/scare_2.png"==e)Rd[0].img=this.imgAsDataURL;else if("textures/muzflash.png"==e)re.updateMuzzle(this.imgAsDataURL);else if("textures/objective_1.png"==e||"textures/objective_7.png"==e)re.updateObjectiveMarker(this.imgAsDataURL);else if("textures/objective_6.png"==e||"textures/objective_8.png"==e)re.updateNextObjectiveMarker(this.imgAsDataURL);else if("textures/flag_r.png"==e)re.updateFlagMarker(this.imgAsDataURL,0);else if("textures/flag_b.png"==e)re.updateFlagMarker(this.imgAsDataURL,1);else if(e.startsWith("img/medals/")){var i=parseInt(e.replace("img/medals/","").replace("badge_","").replace("medal_","").replace(".png",""))||0;re.updateMedalIcon(this.imgAsDataURL,e.includes("badge_")?-1:i)}else{var n=new Image;n.onload=function(){ce.updateTexture(e.replace("textures/","").replace("img/","").replace(".png",""),this)},n.src=this.imgAsDataURL}}catch(e){}}Jr.close()}}function Ur(e){this.process=function(t){var i=URL.createObjectURL(t);if(i)try{var n=e.split("/")[1];he.updateSound(n,i);var s=parseInt(ve.mode.ambInd||ve.map.maps[ve.mapIndex].ambInd||1);n=="ambient_"+s&&he.play("ambient_"+s,u.amvVols[s]||.12,!0,1)}catch(e){}Jr.close()}}function Vr(e){this.process=function(t){if(e)try{var i=e.split(".").slice(-1).pop(),n=new FileReader;n.addEventListener("loadend",(t=>{var n=t.srcElement.result;ce.updateMesh(e.replace(/models\/|\.obj|\.gltf|\.glb|\.fbx/gim,""),n,i)})),n.readAsText(t)}catch(e){}Jr.close()}}var Gr=["aimAnim","hideADS","showHands","showWeapon","showWeaponSec","showWeaponMel"];function Wr(e){this.process=function(t){if(e)try{var i=e.replace("scripts/","").replace(".txt",""),n=new FileReader;n.addEventListener("loadend",(e=>{var t=e.srcElement.result;"settings"==i&&function(e){if(e&&ae.isString(e))for(var t,i=e.split(/\r?\n/).filter((e=>e.length)).map((e=>e.trim())),n=0;n<i.length;n++)t=i[n].split(","),!we.list[t[0]]||"url"==we.list[t[0]].type||"text"==we.list[t[0]].type||we.list[t[0]].dev||we.list[t[0]].kpd||we.list[t[0]].admin||we.list[t[0]].premium||we.list[t[0]].verified||we.list[t[0]].noMod?"defaultSkins"==t[0]&&(Pt=!!t[1]):(t[1]=(t[1]||"").trim(),Gr.indexOf(t[0])>-1&&(0==parseInt(t[1])&&(t[1]=!1),1==parseInt(t[1])&&(t[1]=!0)),setSetting(t[0],t[1],!0,!0,!0))}(t)})),n.readAsText(t)}catch(e){}Jr.close()}}function qr(e){this.process=function(t){if(e)try{e.replace("shaders/","").replace(".json","");var i=new FileReader;i.addEventListener("loadend",(e=>{var t=e.srcElement.result;ce.insertShaderPass(JSON.parse(t)),Jr.close()})),i.readAsText(t)}catch(e){Jr.close()}else Jr.close()}}function Yr(e,t){this.process=function(i){if(e)try{e.replace("css/","").replace(".css","");var n=new FileReader;n.addEventListener("loadend",(e=>{var i=e.srcElement.result;if(u.cssBypass.indexOf(t)<0){if(!ae.cssCheck(i))return void Jr.close();for(var n=/aHolder|aMerger|aContainer|krunkerio_728x90_1|\/21823819281\/frvr-krunker_io-krunker-display-banner-krunkerio_728x90_1|\/21823819281\/frvr-frvr-krunker-display-banner-krunkerio_728x90_1|mapVote|mapVoteD|mapVoteU|modVoteHold|modVoteD|modVoteU|modVote|mapInfoHolder|tDecCheck|tSubCheck|tSubOffer|tHeader0|tHeader1|tradeReady0|tradeReady1|tSubName|tradeChatHolder|tradeChatList|tradeChatItem|tradeTotal|trd_|offerVal|trd_inv_|tItemN|tItemCnt|tItemImg|tItemSprayImg|tItemHolder|tSubHolder|tDecOffer|tradeList0|tradeList1|offerVal0|offerVal1|estOfferVal|tDecName|tTotal|tListN|tHolderR|tHolderL|invList1|tList|invList0|jumpSIMG|jumpSVID|jumpSVIDHolder|material-icons|vote|ot-sdk-btn-floating|interactMsg/gim;n.test(i);)i=i.replace(n,"")}var s=document.getElementById("customCSS");s||((s=document.createElement("style")).id="customCSS",document.head.appendChild(s)),s.innerHTML=i,Jr.close()})),n.readAsText(i)}catch(e){Jr.close()}else Jr.close()}}function Kr(e){this.process=function(t){if(e)try{var i=e.replace("css-img/","").replace(".png","");jr[i]=URL.createObjectURL(t)}catch(e){}Jr.close()}}function Xr(e){this.process=function(t){if(e)try{var i=e.replace("css/fonts/","").replace(".ttf","").replace(".woff2","");zr[i]=URL.createObjectURL(t)}catch(e){}Jr.close()}}function Zr(e,t){try{t&&setTimeout((function(){ee.toggleWholeUI(!0)}),1e3),modLInfo.textContent=e}catch(e){}}var Jr=new function(){this.init=function(e,t){this.numFiles=t,this.progress=0,this.reader=e},this.close=function(){var e;this.reader&&(this.progress++,Zr(S.t("mod.extracting",this.progress,this.numFiles)),this.numFiles===this.progress&&(Zr(S.t("generic.success"),!0),(e=document.getElementById("customCSS"))&&(Object.keys(jr).length&&(e.innerHTML=e.innerHTML.replace(/CSSIMAGE:(\w+)/gm,(function(e,t){return jr[t]?"url('"+jr[t]+"')":""}))),Object.keys(zr).length&&(e.innerHTML=e.innerHTML.replace(/CSSFONT:(\w+)/gm,(function(e,t){return zr[t]?"url('"+zr[t]+"')":""}))),ee.toggleWholeUI(!0)),this.reader.close(),this.reader=void 0))}};Object.defineProperty(window,"loadUserMod",{writeable:!1,value:function(e,t,i,n,s,a){showWindow(18),Zr(S.t("generic.loading")),loadModPack(t,!0,!1,e,i,n,s,a)}}),window.loadModURL=function(){modURL.value&&loadModPack(modURL.value,!0)};const Qr=(e,t,i)=>e.getData(t).then((t=>i(t,e)));function $r(e){var t=e.match(/^(https?:\/\/)?(www\.)?(krunker\.io|127\.0\.0\.1:8080)\/\?(party|game)=(.+)$/);t&&6==t.length?eo(e)==eo(window.location.href)&&"game"!=t[4]||!FRVR.channelCharacteristics.allowNavigation?showWindow(24):window.location.href=_(window.location,e,k):e.match(/^([A-Z]+):(\w+)$/)?FRVR.channelCharacteristics.allowNavigation&&(e=window.location.origin+"/?game="+e,window.location.href=_(window.location,e,k)):showWindow(24)}function eo(e){return e.match(/^(https?:\/\/)?(www\.)?(.+)(krunker\.io|127\.0\.0\.1:8080)\/\?(party|game)=(.+)$/).slice(3,5).join("")}function to(e,t,i,n,s,a,r,o){null!=s&&ve[s?"lockMove":"unlockMove"](),Rt=r,re.kpdData=Rt,Rt?(specControlHolder.firstElementChild.children[8].style.display="",Uc(0)):specKPDContr.style.display="none",ft=t,window.spectating=i,3==ve.eventIndex?ce.toggleMeshGroup("event_0",!i):ce.toggleMeshGroup("event_0",!1),!ft&&i&&(ft=1),Vo(e),function(){uo&&he.stop(uo);uo=null}(),ee.toggleMenu(!1),he.play("reload_3",.2),rc.length=0,re.hits.length=0,ee.toggleGameUI(!0),pe.reset(),re.reset(),ye.reset(!ve.detachedCam),xo(!1),ve.players.forcePos(),ve.players.resetAim(),ve.AI.hideAll(),$e={},nt.length=0,st=null,ut=0,pt=0,mt=30,bt=0,0,re.speedDisplay.max=0,at.length=0,rt=[],et={},tt=0,dt=null,ht=!1,window.noMouseInp=!1,ee.loading=!1,ye.idleTimer=0,hiddenMsg.style.display="none",re.interactProg.display=!1,re.interactMProg.display=!1,Jc(),specTeam1.innerHTML="",specTeam0.innerHTML="",Go.length=0,Vi(),An=!1,updateCamMouse(o),io(),ee.toggleControlUI(ye.enabled),window.scaleBase(null,!0),roundsDisplay.style.display=ve&&ve.config.gamRounds>1&&!window.spectating?"inline-block":"none",bottomLeftChallIcon.classList.toggle("challIconSkull",n),bottomLeftChallIcon.classList.toggle("challIconHP",!n),a||ed(null,"000003"),Rt&&Rt.sus!=Dt&&focusPlayer(Rt.sus,!1,!0),Lt=Date.now(),function(e){var t=Re&&Re.stats&&Re.stats["c"+e]?Re.stats["c"+e]:0,i=u.rankVar*Math.sqrt(t),n={character_level:(t=Math.max(1,Math.floor(i)+1))||0,character_class:ve&&ve.classes[e]?ve.classes[e].name:"unknown"};ve&&ve.map&&(n.base_game=ve.map.getMapName());n.match_rank=ve&&ve.isSandbox?"sandbox":"non-ranked",n.mode=window.spectating?"spectator":"player",logEventFRVR("game_play_start",n)}(o)}function io(e){speedRunHolder.style.display="none",killCount.style.display=ve.mode.friendly||!we.tmp.showKillC?"none":"inline-block",deathCount.style.display=ve.mode.friendly||!we.tmp.showDeaths?"none":"inline-block",kdCount.style.display=ve.mode.friendly||!we.tmp.showKD?"none":"inline-block",ve.mode.custUI&&!window.spectating&&ve.mode.custUI(ve,u,e)}Object.defineProperty(window,"loadModPack",{writeable:!1,value:function(e,t,i,n,s,a,r,o){if(e&&=ae.replaceUserAsset(e),(ae.isDropbox(e)||ae.isUserAsset(e))&&e.indexOf("&")<=-1||!t){if(!we.tmp.canLoadMods)return Zr(S.t("mod.disabled"),!0);t&&!i&&we.list.autoLoadLast.val&&setLastMod(e),null!=n&&null!=s?(wo=0,modVoteName.innerHTML=n+" Mod",modVoteHold.innerHTML='\n\t\t\t\t<div class="voteHint vHR" onclick="openURL(\'/social.html?p=profile&q='+a+"&autoGift=1&mn="+n+'\')">Donate</div>\n\t\t\t\t<div style="float:right;">\n\t\t\t\t\t<i id="modVoteD" onclick="voteMod('+s+', -1);" class=\'material-icons vote\'>thumb_down</i>\n\t\t\t\t\t<i id="modVoteU" onclick="voteMod('+s+", 1);\" class='material-icons vote'>thumb_up</i>\n\t\t\t\t</div>\n\t\t\t",modVote.style.display="block"):modVote.style.display="none";try{windows[3].loaded(e,t,i,n,s,a,r,e==$t),e=e.replace("dropbox.com","dl.dropboxusercontent.com").replace(/&/g,"nope");var l="",c=t?new zip.HttpReader(e):new zip.Data64URIReader(e);jr.length=0,zr.length=0;let o=new zip.ZipReader(c);o.getEntries().then((function(e){if(!!e.find((e=>e.filename.startsWith("css/")))||ee.toggleWholeUI(!0),e.length){Jr.init(o,e.length);for(var t,i=0;i<e.length;i++)if((t=e[i]).directory)Jr.close();else if("textures"==(l=t.filename.split("/"))[0]||"img"==l[0])Qr(t,new zip.BlobWriter("image/png"),((e,t)=>new Hr(t.filename).process(e)));else if("sound"==l[0])Qr(t,new zip.BlobWriter("audio/mp3"),((e,t)=>new Ur(t.filename.replace(".mp3","")).process(e)));else if("models"!=l[0]||t.filename.includes("event_0"))if("scripts"==l[0])Qr(t,new zip.BlobWriter("text/plain"),((e,t)=>new Wr(t.filename).process(e)));else if("shaders"==l[0])Qr(t,new zip.BlobWriter("application/json"),((e,t)=>new qr(t.filename).process(e)));else if("css"!=l[0])"css-img"==l[0]?Qr(t,new zip.BlobWriter("image/png"),((e,t)=>new Kr(t.filename).process(e))):Jr.close();else if(l[1]&&"fonts"==l[1]){var n=t.filename.includes("woff2")?"font/woff2":"font/ttf";Qr(t,new zip.BlobWriter(n),((e,t)=>new Xr(t.filename).process(e)))}else Qr(t,new zip.BlobWriter("text/css"),((e,t)=>new Yr(t.filename,a).process(e)));else Qr(t,new zip.BlobWriter(t.filename.endsWith("glb")?"model/gltf-binary":t.filename.endsWith("gltf")?"model/gltf+json":"application/x-tgif"),((e,t)=>new Vr(t.filename).process(e)))}})).catch((function(e){Zr(S.t("mod.error"),!0)}))}catch(e){Zr(S.t("mod.error"),!0)}}}}),we.list.autoLoadLast.val&&$t.length&&loadModPack($t,!0),window.loadMod=function(){if(modInput.files&&modInput.files[0]){var e=modInput.files[0];"zip"==e.name.split(".").pop().toLowerCase()?(Zr(S.t("mod.loading")),Br.readAsDataURL(e)):Zr(S.t("mod.invalid"),!0)}},window.joinGame=function(){$r(gameURL.value||"")},window.closeRankedPopup=function(){clearPops(!0)};var no={};function so(e,t){no[e]=t,t||delete no[e],oo()}function ao(e){no=e,oo()}window.updSyncDat=function(e,t){me.send("cd",e,t)};var ro=[];function oo(){var e={},t=2*(ve.config.tmSize+1);for(var i in ro.length=0,no)if(no.hasOwnProperty(i)){var n=no[i];i==fd&&(e=n),n.a&&ro.push(n)}compPlListL.innerHTML="<div class='cmpTmHed'>"+u.teamNames[0]+"</div>",compPlListR.innerHTML="<div class='cmpTmHed'>"+u.teamNames[1]+"</div>";for(var s=e.t||0,a=ve.config.limitClasses,r=0;r<ve.classConfig.length;r++){var o=!1,l=ve.config["classLim"+r]||0,c=0;if(!a||l){if(a)for(var d=0;d<ro.length;++d)if(ro[d].c==r&&ro[d].t==s&&++c>=l){o=!0;break}var h=document.getElementById("cmpClassIc"+r);h&&h.classList.toggle("cmpClassGr",o),(h=document.getElementById("cmpClassLck"+r))&&(h.style.display=o?"inline-block":"none"),(h=document.getElementById("cmpClassCnt"+r))&&(h.classList.toggle("cmpClassGr",o),a&&(h.textContent=c+"/"+l))}}for(r=0;r<t;++r){n=null;var p="compPfpI"+r,f=r<t/2;for(d=0;d<ro.length;++d){if(r<t/2&&1==ro[d].t){n=ro[d],ro.splice(d,1);break}if(r>=t/2&&2==ro[d].t){n=ro[d],ro.splice(d,1);break}}var m=!ve.isComp&&n&&n.l?"<div class='menuClassLevelBox' style='color:#fff;margin-top:-7px;font-size:20px;padding:3px;padding-right:12px;padding-left:12px;margin-right:0px'>"+(n.l||0)+"</div>":"",g=n&&n.v?" <i class='material-icons' style='color:"+te.verified.player+";margin-top:-8px;font-size:35px;vertical-align:middle;'>check_circle</i> ":n&&n.l?"<div style='display:inline-block;width:10px'></div>":"",v=n&&null!=n.c?"<img src='"+ae.assetsUrl("/textures/weapons/"+ve.weaponConfig[ve.classConfig[n.c].loadout[0]].icon+".png")+"' class='compPlWpIcn' />":"",y=n&&null!=n.f?n.f:-1,b=y>=0?"<div class='cmpFlagIc"+(f?"L":"")+" flag-icon flag-icon-"+ve.flags[y][1]+"'></div>":"",w=(Re&&n&&(Re.id,n.i),"3px solid #fff"),x="None",S=n&&s!=n.t;S&&(v="",x="???"),f?compPlListL.innerHTML+="<div class='compPlLitL'><div class='compPlWepsL'>"+v+"</div>"+b+"<img class='compPLstIcn' id='"+p+"' style='border:"+w+"' /><div class='compPLstSt'>"+m+g+(n?n.n||"Guest Player":"Open Slot")+"<div class='compPLstCl'>"+(n&&null!=n.c&&!S?ve.classConfig[n.c].name:x)+"</div></div></div>":compPlListR.innerHTML+="<div class='compPlLitR'><div class='compPLstSt compPLstStR' style='text-align:right'>"+(n?(n.n||"Guest Player")+g+m:"Open Slot")+"<div class='compPLstCl'>"+(n&&null!=n.c&&!S?ve.classConfig[n.c].name:x)+"</div></div><img class='compPLstIcn' id='"+p+"' style='border:"+w+"' />"+b+"<div class='compPlWepsR'>"+v+"</div></div>";var M=n?parseInt(n.c):-1;vn(document.getElementById(p),n?n.i:null,!!n&&!!n.i,ae.assetsUrl("/textures/classes/icon_"+(!S&&n&&M>=0?M:-1)+".png"))}!!ve.config.selTeam&&(compPlListL.innerHTML+="<div class='compSwpTmB' style='background-color:#eb4034'  onmouseenter='SOUND.play(`tick_0`,0.1)' onclick='playSelect();toggleTeam("+(1==s?0:1)+")'>"+(1==s?"Leave Team":"Join Team")+"</div>",compPlListR.innerHTML+="<div class='compSwpTmB' style='background-color:#3489eb'  onmouseenter='SOUND.play(`tick_0`,0.1)' onclick='playSelect();toggleTeam("+(2==s?0:2)+")'>"+(2==s?"Leave Team":"Join Team")+"</div>")}function lo(){yo(!1),gameCode()}function co(){clearPops()}function ho(e){var t=document.getElementById("confirmBtn");t&&(t.innerHTML="Submit - "+e+"s")}window.toggleTeam=function(e){jn=e||0,teamNm1.style.color=e?"rgba(255,255,255,0.5)":"#fff",teamNm2.style.color=e?"#fff":"rgba(255,255,255,0.5)",updSyncDat("t",jn)},window.gameCode=function(){var e="<div style='color:#fff;font-size:20px;position:relative;'>"+S.t("custom.passcode.input")+"</div><input type='text' id='codeInput' placeholder='Password'><div id='confirmBtn' onclick='submitGameCode()' onmouseover='playTick(0.1)'>Submit</div><div id='declineBtn' onclick='location=location.origin' onmouseover='playTick(0.1)'>Leave</div>";genericPopup(e,"gameCodePop")},window.submitGameCode=function(){var e=document.getElementById("codeInput");e&&e.value&&me.send("code",e.value)};var uo=null;function po(e,t,i,n){if(!t){for(var s=0;s<ve.players.list.length;++s){if(!(Ee=ve.players.list[s]))return;Ee.active=!1,Ee.objInstances&&ve.players.disposeMesh(Ee),Ee.isYou&&ve.players.toggleAim(Ee,0)}ve.mode&&ve.mode.canTrade&&window.closeWindow(),reloadMsg.style.display="none",ee.toggleGameUI(!1),deathUIHolder.style.display="none",uiBase.classList.toggle("onDeathScrn",!0),ye.camTarget(0,220,100,-Math.PI/2*.7,0),setTimeout((function(){Ae&&Ae.active||en()}),3e3);var a;a=i?u.teamNames[parseInt(i)-1]+" is in the Lead!":"Both Teams are Equal!",he.play("woosh_0",.5),ic("Switching Sides",a,!0),Ac(-1,"","modes.round.switch",2),ve.objtvTime=0}roundsVal.innerHTML=ve.config.gamRounds-(e||0)+"/"+ve.config.gamRounds,n&&n[1]&&Zl(1,n[1]),n&&n[2]&&Zl(2,n[2])}function fo(e,t){if(Fe=e,ct=e&&e==me.socketId,ve&&(ve.isCustom=!!e,ve.host=e),!t){let e=ve.players.list.find((e=>e.id==Fe));e&&Ac(0,null,ct?"host.transfer.you":["host.transfer",e.name],2)}}window.toggleMinimap=function(e){re.miniMap.toggle(ve,e)};const mo=new WeakMap;function go(e,t,i,n,s,a,r,o,l,c){xe[e].didLoad||c&&c.data?vo.apply(this,arguments):fetch("maps/"+xe[e].fileName+".json?v=Mpyh8").then((async t=>{let i=await t.text();if(u.isProd){const t=(new TextEncoder).encode(i),n=await crypto.subtle.digest("SHA-256",t);if(Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")!=["8a31d556c6c62258d0ebea29cc720f52d3f0c69f279e680d0c182361e8f6be8f","079d37f4a7c405dae4dea6d54dbc788ee0f1e370d11b76384b674beb708d9fb7","0a4e83ac0b77a498bfc09d3dfb7e5c82218b8aa61615318ea3a8cb793a3e25c9","1189565420dce7ef7a5e60c707fca395f0a2bcfaccdf7e20994d284e0d18686f","c24b9a20d6477b779a88d105f395a515d22989ebe417e2ac8686f2e972d3616b","0ab687573e645e2c7e09a68694af3792c17df131752975586ad3db807169c7b6","d6c4ef5d0db0ffa6d106832ec5f16fec138d178090519142d6525539d9b64d2b","be7b43f6eb102ed905affc2057949f52c1da589325c1ad8c2f56cf0fab4f21cb","6b433f86c25c0fa319c7cf23234f77c267da0acc0a8056a7787103191cb56234","c82f0bebfb2623d9b80e0fa9494b6825fddb7084e9b51300a4f3b2f5b7114bad","78eb8b97dead2a1e98a1ee34d59bf349895cc71d45365f3f3a9972867b806522","96380d306fe6b54d358101a1439a5257bbc6bf64383b6d8efc7a4ed5ad1b73cc","c51b188a35373ab976e8ef3ac2fca88ceeaec5366241b06a41727acf2a001228","244d88003009fe55432f4985df52e1cd0c60bf7c9943cbd0c24c501e291e6b53","b3a79f35553da8a324fc0333fd40f248d5ce8b1e586c392819826ce01fe16d7b","a4be4181bbf04f70cfe5387ae5f35afa3d44eccc49c64872f049e18faae0f9b3","9f5fcc7fba49e14d736e761215f86a7733c22214e6d6c4fcbf60c608c2331c83","1a4fd6fe0ed9679396a16b844889dee970ab7c1b89fb610e50bbcdd3b5b88ec2","140c1ec06df4b360192c461c2bff8e70efa6610cd35504f0079bfe1e799d532e","a8d575190bd4a0e2e4c7e00482d953ed10285d7d22c861254db6f263e7dfdf43","db63861e3807afe4be317e3a6077321c3a2a55c7977d49dcc6cebaf9d9d291e3","3c89400721d1e6e01a182eef8664a82a55f2e1fc5311a904bc1fa97685082faa","f74d04dd51ce4f02f3e5d4ef63ec705ee931425b52a6facd5435a96fc448fec3","62c316af932b264f722bfa01c1cb5543b068312c72aa9b0b940cc9d8f2a1e8de","0dd7a2c5696d1ef2bbc98cf621a669ed98461808de7b5dffe4250fadd21e3b61","60b4c3280d412b06ef85090ea820b8fea4a035776ec05efae8c98949c19e7346","015a2a92e6ba9abd4e7f592c826151b30d00e2039d9946c81989659ff265daad","43cf16748a3d7fb6fda7c87d8661efbf8773e60a1454059a82f0cf2c6f5eb09e","7b44e7e8d258684853dd522d0583ed98eea0197bcbb23c1a5e739f7639acefda","a4aa266921bdfb77ccd7da7959a9cad1ebb9c05ab2fcbca30fec0b03e1bbbc11","71a6c82efc2b4923b049af02e213c49f31f46b0f2c97e7c0d240fbd5602b7e01","0f30cecf6fbb0d8a0deae3bdceba66ff73f2dc11bcaa886fe1453ca56252ea47","19088b39622c94d06566a483d7574abdcd02e7efa16d418939cf2f57ac03a685"][e])return}xe[e]=JSON.parse(i),xe[e].didLoad=!0,ve.map.maps=xe,vo.apply(this,arguments)})).catch((e=>{console.error("Error Download Map:",e)}))}function vo(e,t,i,n,s,a,r,o,l,c,h,p,f,m,g,v,y,b){if(L)return O=!1,void(L=!1);z&&fe.searchMod(z,(function(e,t){if(t&&t.data&&t.data.length){var i=t.data.find((e=>e.mod_name==z));if(i){var n=ae.getAssetData(i.mod_info);"ua"==i.mod_url&&(i.mod_url=ae.userAssetsUrl("/md"+i.mod_id+"/mod.zip")),loadModPack(i.mod_url,!0,!0,i.mod_name,i.mod_id,ae.cleanseString(i.creatorname),n&&n.t)}}z=null})),dl(),ee.hasEndScreen=!1,ce.isSandbox=ve.isSandbox,re.resetAll(),ve.customGUIs.length=0,ve.hidePlayers=!1,Bt={},Ji={},we.tmp.streamMode&&FRVR.channelCharacteristics.allowNavigation&&window.history.replaceState({},"Krunker","/"),wt=!1,ve.host=a,ve.isCustom=!!a,ve.isOfficial=!!m,ve.mainScript=null,ve.customsData=c,c?c.data&&ve.prepareGame(c.data,c.id,c.creator,c.info,c.accType,!0,e):ve.map.changedMaps=!0,(h=h||{}).gor||ve.isSandbox||ed(null,"000004"),Fe=a,ct=a&&a==me.socketId,mapVote.innerHTML="",Xe=0,Tt.length=0,ve.hasThumb=null,a&&c&&null!=c.id&&(ve.hasThumb=c.thumb?ae.userAssetsUrl("/m"+c.id+"/thumb.png"):null,Tt=[c.id,c.creator],mapVote.innerHTML="<div class='voteHint'  onclick='openURL(&quot;/social.html?p=profile&q="+c.creator+"&autoGift=2&mn="+ve.map.maps[e].name+"&quot;)'>Donate</div><div style='float:right;'><i id='mapVoteD' onclick='voteMap("+c.id+",-1)' class='material-icons vote'>thumb_down</i><i id='mapVoteU' onclick='voteMap("+c.id+",1)' class='material-icons vote'>thumb_up</i></div>"),(r=r||{}).weps=o?o.weps:void 0,r.cls=o?o.cls:void 0,r.prks=o?o.prks:void 0,ve.applyNetworking(p),ve.applyConfig(r,c?c.accType:1),ve.isComp=!!g,ve.sessionId=v,ve.roundId=y,ve.init(e,t,i,f,!1),ve.isDoubleXP&&Ac(0,null,"mode.doubleXP",2),setTimeout((()=>{mo.set(Z,Z),mo.get(Z),[].push(J)}),2e3);var w=h.obj||[null,0];if(ve.mode&&ve.mode.objWep?ve.setWeapon(w[0]):ve.setObjective(w[0],w[1],!0),loadingBg.style.display="none",menuBtnHost.classList.toggle("buttonD",!!ve&&!!ve.isOfficial),uiBase.classList.toggle("isMobile",!!ee.isMobileControls),specControlHolder.firstElementChild.children[2].style.display=ve.mode.objective&&Object.keys(ve.map.manager.spectateCams).length?"":"none",h.dest)for(var x=0;x<h.dest.length;++x)ve.destroyObj(h.dest[x]);if(h.mov)for(x=0;x<h.mov.length;x+=2)ve.teleportToNode(h.mov[x],h.mov[x+1]);if(h.flg)for(x=0;x<h.flg.length;++x)ve.updateFlag(...h.flg[x]);if(h.spwns)for(x=0;x<h.spwns.length;++x)ve.createSpawnable(...h.spwns[x]);if(h.pkups)for(x=0;x<h.pkups.length;++x)ve.updatePickup(...h.pkups[x]);if(h.gates)for(x=0;x<h.gates.length;x+=2)ve.updateGate(h.gates[x],!!h.gates[x+1]);if(h.banks)for(x=0;x<h.banks.length;x+=2)ve.updateBank(h.banks[x],h.banks[x+1]);if(h.dyno)for(x=0;x<h.dyno.length;++x)ve.buildObj(...h.dyno[x],!0);if(h.gbl)for(x=0;x<h.gbl.length;x+=2)jo(h.gbl[x],h.gbl[x+1]);if(h.doms)for(x=0;x<h.doms.length;x+=2)ve.updateDomZone(h.doms[x],h.doms[x+1]);if(h.asnd)for(x=0;x<h.asnd.length;x+=3)ve.addPlayerSound(h.asnd[x],h.asnd[x+1],h.asnd[x+2]);if(h.mybx)for(x=0;x<h.mybx.length;x+=6)ve.updateMysteryBox(h.mybx[x],h.mybx[x+1],h.mybx[x+2],h.mybx[x+3],h.mybx[x+4],h.mybx[x+5]);if(h.krm)for(x=0;x<h.krm.length;x+=6)ve.updateKrumMachine(h.krm[x],h.krm[x+1],h.krm[x+2],h.krm[x+3],h.krm[x+4],h.krm[x+5]);if(h.pwup)for(x=0;x<h.pwup.length;x++)hl(x,h.pwup[x]);ve.map.manager.syncAll(h.dest),h.zone&&ve.updateZone(...h.zone),null!=h.lck&&ve[h.lck?"lockMove":"unlockMove"](),h.exf&&ml(h.exf),ve.mode&&ve.mode.canTrade&&fe.getPrices((function(e,t){ie.update(t||{})})),specNameTm0.textContent=teamNm1.textContent=ve.mode&&ve.mode.teamOptions?ve.mode.teamOptions[0]:ve.config.nameTeam1.replace(/\s/g,"").length>0?ve.config.nameTeam1:u.teamNames[0],specNameTm1.textContent=teamNm2.textContent=ve.mode&&ve.mode.teamOptions?ve.mode.teamOptions[1]:ve.config.nameTeam1.replace(/\s/g,"").length>0?ve.config.nameTeam2:u.teamNames[1],teamScores.style.display="none",teamScores.innerHTML="",specHeaderTm0.style.display="none",specHeaderTm1.style.display="none",function(e){if(ve.mode.teams){if(ve.teamScores={},!e)return;for(var t=0;t<e.length;++t)ve.teamScores[e[t][0]]=e[t][1],ve.mode.flags&&(ve.teamFlags[e[t][0]]=e[t][2]);Jl()}}(s);var S=0,M=0;for(x=0;x<ve.map.manager.objects.length;++x)ve.map.manager.objects[x].score&&(S++,M+=ve.map.manager.objects[x].scoreP);if(S?(scoreZoneCount.style.display="inline-block",scoreZoneVal.textContent=M):scoreZoneCount.style.display="none",n)for(x=0;x<n.length;++x)Zl(n[x][0],n[x][1]||0);(po(h.roundC,!0),ve.config.lives||ve.mode.lives?(livesCount.style.display="inline-block",ac(ve.config.lives||ve.mode.lives||0)):livesCount.style.display="none",ee.setShowSpect(ve.config.allowSpect),ee.setShowSelTeam(ve.config.selTeam),ve.config.selTeam&&D&&ae.isNumber(D))&&(document.getElementById("selectT")&&2==D&&selectT.click(),D=null);Ye=null,ye.reset(!ve.detachedCam);var k=ve.map.maps[e],_=k.camPos?k.camPos:[0,0,0];Et=!!_[3],ve.detachedCam||(ye.moveCam(_[0]||0,_[1]||0,_[2]||0),ye.rotateCam(_[5]||0,_[4]||0,_[6]||0)),ce.clearSprays(),ce.scene.add(ye.object),Ae=null,re.miniMap.reset(ve,we.tmp.showMinimap),re.sprayWheelClose(),re.propWheelClose(),re.showObjective=!!ve.mode.objective&&ve.map.manager.objectives.length>0,endChals.innerHTML="",killStreakHolder.innerHTML="",krTagHolder.innerHTML="",giftTagHolder.innerHTML="",perkHolder.innerHTML="",zPerksHolder.innerHTML="",re.bloodOpacity=0,bloodDisplay.style.display="none",killsVal.textContent=0,kdVal.textContent="0.0",deathsVal.textContent=0,myScoreVal.textContent=0,_t=0,streakVal.textContent=_t,vt=0,Ct.length=0,xt=!1,It=!1,voteToKick.style.display="none",voteToForfeit.style.display="none",Ni=!1,Bi=!1,Vi(),ji={},Gi(),Li={},c=null,ye.masterLock=!1,updateCamMouse(0),ye.spect.maxD=ve.mode.specMaxD||u.specMaxD,Is(),He=h.lockT,yo(ve.isComp),io(!0),Jc(),en(!0),ve.map.maps&&ve.map.maps[0]&&ve.map.maps[0].modURL&&""!=ve.map.maps[0].modURL&&Nr!=ve.map.maps[0].modURL&&(ee.toggleWholeUI(!1),Nr=ve.map.maps[0].modURL,loadModPack(Nr,!0,!0,void 0,void 0,ve.map.maps[0].creator)),Ln(),doubleClassXPAd.style.display=ae.isDoubleClassXP()?"block":"none",doubleRaidDropsAd.style.display=ae.isDoubleRaidDrops()?"block":"none",doubleXPAd.style.display=ve&&ve.mode&&ve.mode.doubleXP?"block":"none";let T=ae.getActiveEvent(ve.eventIndex);if(T){var C=new Date(T.start).getTime()-Date.now(),I=new Date(T.end).getTime()-Date.now();eventAdName.firstChild.textContent=T.name,eventAdImg.src=ae.assetsUrl("/img/events/event_"+T.id+".png"),eventAdDesc.textContent=(C>0?"Starts":"Ends")+" in "+ae.getReadableTime(C>0?C:I),eventAd.setAttribute("onclick","eventPopup()")}if(eventAd.style.display=T?"block":"none",1!=_c||ve&&ve.mode&&ve.mode.teams||switchChat(chatSwitch),1!=_c&&ve&&ve.isComp&&switchChat(chatSwitch),function(){for(var e="",t=0;t<ve.classConfig.length;++t)Ee=ve.classConfig[t],ve.config.classes.indexOf(t)>=0&&(e+="<div id='menuClassPicker"+t+"' onmouseenter='playTick()' onclick='selectClass("+t+")'></div>");hiddenClasses.innerHTML=e}(),krDiscountAd.style.display=ae.isKRSale()&&!d?"":"none",updateKeybindUI(null,!0),ve.isCustom){var A=ve.map?ve.map.getMapName():null;A&&(R=ae.escapeStr(A)+" - Krunker",P=null,E=null,j=(j="https://krunker.io/play/"+ae.escapeStr(A))||"https://krunker.io",E=E||"Krunker.io is a free Multiplayer Online Game. No Download needed",P=P||ae.assetsUrl("/promo/og.png"),R=R||"Krunker",document.title=R,document.querySelector('meta[property="og:title"]').setAttribute("content",R),document.querySelector('meta[property="og:image"]').setAttribute("content",P),document.querySelector('meta[property="og:description"]').setAttribute("content",E),document.querySelector('meta[name="description"]').setAttribute("content",E),document.querySelector('meta[property="og:url"]').setAttribute("content",j))}var R,P,E,j;!function(e){var t={};ve&&ve.map&&(t.base_game=ve.map.getMapName());if(t.match_rank=ve&&ve.isSandbox?"sandbox":"non-ranked",ve){var i=e&&"number"==typeof e&&!ve.isCustom?Math.floor(e/1e3):0;t.game_seconds_left=i}logEventFRVR("game_session_start",t)}(b),ce.GEOS.reset(),bhHolder.style.display=ve.mode.bighead?"inline-block":"none",instructionsFadeBG.style.opacity=0,Je=!0,Ze=4}function yo(e){if(window.canShowExternalLinks||(headerRightSocial.style.display="none",applePayB.style.display="none",androidPayB.style.display="none"),window.canShowSocialHub||(menuBtnSocial.parentNode.style.display="none"),window.canShowMods||(menuBtnMods.parentNode.style.display="none"),instructionHider.style.display="block",aHider.style.display=window.canShowAds&&(!Re||Re.premiumT<=0)?"block":"none",topRightAdHolder.style.display=window.canShowAds&&(!Re||Re.premiumT<=0)?"inline-block":"none",infoHider.style.display="block",vsHolder.style.display="none",mMenuHolDef.style.display="none",mMenuHolComp.style.display="none",uiBase.classList.toggle("onCompMenu",!1),ve&&ve.config&&ve.config.tstCmp&&e){setClassIndex(0);for(var t="",i=ve.config.limitClasses,n=0;n<ve.classConfig.length;n++)if(ve.config.classes.indexOf(n)>=0){var s=ve.config["classLim"+n]||0;if(i&&!s)continue;t+="<div class='cmpClassLck'  style='display:none;' id='cmpClassLck"+n+"'><span class='material-icons' style='font-size:70px;color:#fff;vertical-align:top;'>lock</span></div><div class='compClassPItm' onmouseenter='SOUND.play(`tick_0`,0.1)' onclick='SOUND.play(`reload_3`,0.09);playSelect(0.03);selectClass("+n+")'><img src='"+ae.assetsUrl("textures/classes/icon_"+n+".png")+"' class='compClassPIcn'  id='cmpClassIc"+n+"' />"+(i?"<span class='compClassPCnt' id='cmpClassCnt"+n+"'>0/"+s+"</span>":"")+"</div>"}compClassHold.innerHTML=t,oo(),He&&(vsHolder.style.display="block",instructions.innerHTML="",instructionHider.style.display="none");var a="Unknown";try{a=ve.map.maps[ve.mapIndex].name}catch(e){}cmpDatSub.innerHTML=ve.config.tmSize+1+"v"+(ve.config.tmSize+1)+" <span style='color:rgba(255,255,255,0.5);'>on "+a+"</span>",he.play("pop_3",.3),aHider.style.display="none",infoHider.style.display="none",mMenuHolComp.style.display="block",uiBase.classList.toggle("onCompMenu",!0),uiBase.classList.toggle("onMenu",!1),r="ambient_14",uo&&he.stop(uo),uo=r,he.play(r,.15,!0,1)}else mMenuHolDef.style.display="block";var r;endMidHolder.style.display="none"}function bo(e){U=e,H.fetchGameInfo(e).then((e=>{var[t,i,n,s,a]=e;W=i,menuRegionLabel.textContent=u.regionNames[i]})).catch((e=>console.error("Failed to fetch game info",e)))}var wo;function xo(e){window.locked=e,blockerDiv.style.display=e?"block":"none"}function So(e){M("limit",(function(e,t){t||me.send("reCaR",e)}))}function Mo(e){me.send("ct",_c,e)}function ko(e,t,i,n,s,a,r){function o(){ye.disable(),function(e,t,i,n,s){endInfo.style.display="block",endUI.style.backgroundColor="transparent",function(e){3!=e&&(victorySub.style.display="");re.vicTitle.show=!1,endAHolderR.style.display="none",endAHolderR.style.opacity=1,endAHolderL.style.display="none",endAHolderL.style.opacity=1}(n),(!Re||Re.premiumT<=0)&&(endAHolderL.style.display="inline-block",endAHolderR.style.display="inline-block");endMidHolder.style.display="inline-block";let a,r={};Ae&&null!=Ae.sid?r=function(e,t,i){let n=ve.mode.endStats||u.endStats,s=n.length,a=e.ed.filter(((e,t)=>!(t%s))).indexOf(Ae.sid),r=a*s,o=e.ed.slice(r,r+s),l=n.includes("points")?"points":"score";return{rank:"#"+(a+1),score:o[n.indexOf(l)]||0,kills:["kills","melees"].map((e=>o[n.indexOf(e)]||0)).reduce(((e,t)=>e+t)),deaths:["deaths","setbacks"].map((e=>o[n.indexOf(e)]||0)).reduce(((e,t)=>e+t)),funds:o[n.indexOf("reward")]||o[n.indexOf("MMR")]||"NONE",victory:t,medals:e.mdls,endInd:i}}(t,e,n):a=!0;let o=[];for(var l=0;l<t.mdls.length;l+=2)o.push({n:t.mdls[l],c:t.mdls[l+1],i:re.medalsList.indexOf(t.mdls[l])});(function(e){if(e&&e.ed.length){var t="",i=e.mts;if(matchVoteHolder.style.display="inline-block",i.length>1){for(var n=0;n<i.length;++n){var s=i[n].split(","),a=ve.map.modes[parseInt(s[0])],r=ve.map.maps[parseInt(s[1])];if(ve.isOfficial){var o=s[2]||r.name||"",l=parseInt(s[3])?ae.userAssetsUrl("/m"+parseInt(s[3])+"/thumb.png"):null;a&&(t+="<label class='matchVote' onclick='playSelect(0.1);voteOnMatch(\""+i[n]+"\")'><img src='"+(l||ve.hasThumb||ae.assetsUrl("/img/"+(0==parseInt(s[1])&&"Burg"!=o?"noimg":"maps/map_"+parseInt(s[1]))+".png"))+"' class='matchVoteThumb' draggable='false'><div class='matchVoteMap'>"+o+"</div><div class='matchVoteMode'>"+a.name.toUpperCase()+"</div><div class='matchVoteTotal' id='voteT"+i[n]+"'>0</div></label>")}else a&&r&&(t+="<label class='matchVote' style='"+(!ve.isCustom&&a.tag?"border: 4px solid "+a.tag[2]+";box-shadow: 0 0 20px "+a.tag[2]+"9c;":"")+"' onclick='voteOnMatch(\""+i[n]+"\")'><img src='"+(ve.hasThumb||ae.assetsUrl("/img/"+(0==parseInt(s[1])&&"Burg"!=r.name?"noimg":"maps/map_"+parseInt(s[1]))+".png"))+"' class='matchVoteThumb' draggable='false'><div class='matchVoteMap'>"+r.name+"</div><div class='matchVoteMode'>"+a.name.toUpperCase()+"</div>"+(!ve.isCustom&&a.tag?"<div class='matchVoteModifier'"+(a.tag[1]?" style='background:"+a.tag[1]+"'":"")+">"+a.tag[0].toUpperCase()+"</div>":"")+"<div class='matchVoteTotal' id='voteT"+i[n]+"'>0</div></label>")}matchVoteHolder.innerHTML=t,t.length&&(endMidHolder.style.maxHeight="calc(100% - 490px)"),e.vo&&updMatchVote(e.vo,e.mts)}else matchVoteHolder.style.display="none",endMidHolder.style.top="205px"}})(t),be.endScreen.init(Re,a,r,o,Bt,ve.isCustom,t.mts.length>1,s,(function(){!function(e,t){if(e&&e.ed.length){endMidHolder.style.top=e.mts.length<=1?"205px":"310px";var i=e.tms;if(i){var n=i.find((e=>e&&1==e[0])),s=i.find((e=>e&&2==e[0]));teamTotal0.innerHTML=(1==t?"<div class='material-icons teamWin0'>emoji_events</div>":"")+'<span class="teamTotalN0">'+teamNm1.textContent+'</span><span class="teamTotalScore">'+(n&&n[1]||0)+"</span>",teamTotal1.innerHTML='<span class="teamTotalScore">'+(s&&s[1]||0)+'</span><span class="teamTotalN1">'+teamNm2.textContent+"</span>"+(2==t?"<div class='material-icons teamWin1'>emoji_events</div>":""),teamTotal0.style.display="inline-block",teamTotal1.style.display="inline-block"}else teamTotal0.style.display="none",teamTotal1.style.display="none";endMidHolder.style.display="inline-block"}else endMidHolder.style.display="none"}(t,i)}),(function(){!function(e){if(e&&e.ed.length){var t="";t="<tr><th id='endlb_rank'>#</th>";var i=ve.mode.endStats||u.endStats;ve.isOfficial&&-1==i.indexOf("reward")&&i.push("reward");for(var n=i.length,s=1;s<n;++s)t+="<th id='endlb_"+i[s].toLowerCase()+"'>"+ae.capFirst(i[s])+"</th>";t+="<th></th></tr>",t+="<tr height='20px;'></tr>";var a=1,r=Ae&&Ae.team?Ae.team:window.spectating?1:0;for(s=0;s<e.ed.length;){Ee=ve.players.findBySid(e.ed[s]),t+="<tr style='"+(s+n>=e.ed.length?"border-bottom:none":"")+"'><td style='color:#fff'>"+a+".</td>";for(var o=1;o<n;++o){if(t+="<td style='position: relative;'>",1==o){Ee&&Ee.flagIndex>-1&&(t+="<div class='endTableFlag flag-icon flag-icon-"+ve.flags[Ee.flagIndex][1]+"'></div>");var l="./img/player_pfp.png";Ee&&Ee.premiumT&&(l=ae.userAssetsUrl("/p"+Ee.accid+"/profile.png")),t+="<img class='endTablePfp' onerror='this.onerror=null;this.src=\"./img/player_pfp.png\";'src='"+l+"'>",t+="<a class='endTableN' href='"+ae.toSocial(e.ed[s+o][0]||e.ed[s+o]||"")+"' target='_blank' style='color:"+(Ae&&Ee&&Ae.sid==Ee.sid?"#fff'":Ee&&r==Ee.team?"rgba(255,255,255,0.6)'":te.teams[1]+"'")+">",t+=(we.tmp.streamMode?ae.scrambleS(Ee?Ee.alias:e.ed[s+o][0]||e.ed[s+o]):Ee?Ee.alias:e.ed[s+o][1]||e.ed[s+o][0]||e.ed[s+o])+(Ee&&Ee.clan?"<span style='color:"+te.getClanCol(Ee.clan,"#fff")+"'> ["+Ee.clan+"]</span>":"")+"</a>",Ee&&(t+=(Ee.premiumT?"<i class='material-icons' style='color:"+te.premium+";margin-top:-12px;font-size:28px;vertical-align:middle;'>beenhere</i>":"")+(Ee.featured?"<i class='material-icons' style='color:"+te.verified.player+";margin-top:-12px;font-size:28px;vertical-align:middle;'>check_circle</i>":"")+(Ee.badgeIndex>=0?"<img src='"+ve.badges[Ee.badgeIndex].url+"' style='margin-top:-12px;font-size:28px;vertical-align:middle;width:26px;margin-left:2px;'>":""))}else if("reward"==i[o]&&Array.isArray(e.ed[s+o])){var c=ve.store.skins[e.ed[s+o][1]];t+="<div class='skinReward' style='border: 2px solid "+ve.store.rarities[c.rarity].color+";' onclick='openSales("+c.index+")'><img draggable='false' style='width: 32px;image-rendering: auto;' loading='lazy' src='"+c.thumbnail+"'></div>",t+=e.ed[s+o][0]||0}else t+=e.ed[s+o]||0;t+="</td>"}var d="";Re&&(Ae&&Ae==Ee?ve&&ve.isCustom||(d+="<div class='material-icons reportBut shareBut' title='Share Match Results' onclick='shareResult()'>share</div>"):Ee&&Ee.level&&(d+="<div class='material-icons reportBut' title='Report Player' onclick='reportPlayer(`"+Ee.name+"`,this)'>report</div>")),t+="<td style='width: 1px;white-space: nowrap;padding-right: 0px;padding-left: 0px;'>"+d+"</td></tr>",a++,s+=n}endTable.innerHTML=t}}(t)}))}(t,i,n,s,r)}if(window.isBotFTUE&&(window.botMatches++,saveVal("ftue_bm",window.botMatches),window.botMatches>=window.ftueBotMatches&&exitBotFTUE()),victorySub.style.display="none",victorySub.src="",jt=!1,a&&logEventFRVR("item_flow",{item:"krunkers",flow_type:"source",amount:a,item_context:"gameplay",wallet:Re?Re.funds:0}),r){r.cbp>0&&logEventFRVR("item_flow",{item:"bpp",flow_type:"source",amount:r.cbp,item_context:"challenge",wallet:r.bpp||0});let e=(r.gn||0)-(r.bbpp||0);e>0&&logEventFRVR("item_flow",{item:"bpp",flow_type:"source",amount:e,item_context:"gameplay",wallet:r.bpp||0}),r.bbpp>0&&logEventFRVR("item_flow",{item:"bpp",flow_type:"source",amount:r.bbpp,item_context:"bonus",wallet:r.bpp||0});let t=Math.floor(r.pbpp/r.mx)+1,i=Math.floor(r.bpp/r.mx)+1;t<i&&logEventFRVR("battle_pass_level_up",{level:i,hasPremium:Re.BP.tier?"premium":"free",levels_skipped:0,season:u.currentSeason})}dl(),dn=null,Jc();let l=-1==t?"dra":t?"vic":"def";victorySub.src="./img/"+l+".png",re.vicTitle.type=l,2!=e&&ee.toggleWindow(!1,ye.gamepad.active),!we.list.endMessage.val.length||Rt||wt||(Mo(we.list.endMessage.val),wt=!0);ve.mode.endStats||u.endStats;2!=e&&(Ae&&Ae.active||window.spectating)?(ee.showEndScreen("block"==spinUI.style.display),3!=s&&(re.vicTitle.show=!0),Ye=u.endAnim,setTimeout((function(){(me.connected||window.isBotFTUE)&&o();const e=getSavedVal("forceGuestVideoAd");if(!p()&&!ve.isCustom&&(e||!Re)&&!ve.isSandbox){const t=getSavedVal("lastVideoAdTS");e||t&&Date.now()-t>u.guestMaxAdGrace?showAd({type:FRVR.ads.AdType.INTERSTITIAL,onComplete:()=>{saveVal("lastVideoAdTS",Date.now()),accountCreatePopup()}}):saveVal("lastVideoAdTS",Date.now()-u.guestMaxAdGrace)}}),u.endAnim)):2!=e&&e&&(ee.showEndScreen("block"==spinUI.style.display),o()),3!=s||Ae||ye.locklessChange(!0),function(e,t,i,n){var s={end_reason:"game_end",score:0,total_xp:Re?Re.score:0,winner:!!e,kills:0,deaths:0,server:u.regionNames[W],season:u.currentSeason};n&&(s.bpp_gained=(n.gn||0)+(n.cbp||0),s.bpp_gained_uncapped=n.unbpp||0,s.bpp_remaining_cap=n.rbpp||0);var a=ve.mode.endStats||u.endStats;ve.isOfficial&&-1==a.indexOf("reward")&&a.push("reward");for(var r=a.length,o=0;o<t.ed.length;o+=r)if(Ee=ve.players.findBySid(t.ed[o]),Ae&&Ae==Ee){for(var l=1;l<r;++l)"score"==a[l]&&(s.score=t.ed[o+l]||0,s.total_xp+=s.score),"kills"==a[l]&&(s.kills=t.ed[o+l]||0),"deaths"==a[l]&&(s.deaths=t.ed[o+l]||0);break}logEventFRVR("game_session_end",s)}(t,i,0,r)}function _o(e,t,i,n,s){Re&&(n?(s==Ae.alias&&(It=!0),xt=e,voteKickInfo.innerHTML=s+" voted to kick "+e,voteKickName.innerHTML="Kick "+e,voteKickNum.innerHTML="Votes: "+t+"/"+i,voteToKick.style.display="block",voteKickName.style.display=s==Ae.alias?"none":"block",voteKickKeys.style.display=s==Ae.alias?"none":"block"):e?(e==Ae.alias?(Rc(-1,null,"Vote Submitted - "+t+"/"+i,2),voteKickName.style.display="none",voteKickKeys.style.display="none"):voteToKick.style.display="block",voteKickNum.innerHTML="Votes: "+t+"/"+i):(xt=!1,voteToKick.style.display="none"))}function To(e,t,i,n,s){Re&&(n?(voteForfeitInfo.innerHTML=s+" initiated vote",voteForfeitNum.innerHTML="Votes: "+t+"/"+i,voteToForfeit.style.display="block"):e?(e==Ae.alias?Rc(-1,null,"Vote Submitted - "+t+"/"+i,2):voteToForfeit.style.display="block",voteForfeitNum.innerHTML="Votes: "+t+"/"+i):voteToForfeit.style.display="none")}function Co(e,t){re.customGUIs.forEach((i=>{(i.id||0)==e&&3!=i.t&&(i.nv=0==t?!i.nv:1==t?0:2==t?1:i.nv)})),re.divsToUpd.forEach((i=>{(i.data.id||0)==e&&(i.data.nv=0==t?!i.data.nv:1==t?0:2==t?1:i.data.nv,i.elm.style.display=i.data.nv?"none":"block")}))}function Io(e,t){e=ae.isNumber(e)&&!t?u.networkSounds[e]:e,he.stop(e)}function Ao(e,t,i,n,s,a,r,o,l,c){e=ae.isNumber(e)&&!c?u.networkSounds[e]:e,1==i?he.play(e,t,0,r||1,c):he.play3D(e,n,s,a,t,r||1,o||0,l||0,c)}function Ro(e,t,i,n,s,a,r,o,l,c,d){ve.playerSound(ae.isNumber(e)&&!d?u.networkSounds[e]:e,t,i,n,s,a,r,!1,o,l,c,d)}function Po(e,t,i){(Ee=ve.players.findBySid(e))&&ve.players.playClip(Ee,u.clipNames[t],i||1)}function Eo(e,t,i){(Ee=ve.players.findBySid(e))&&(Ee.updateItems(ve,null,t,i,!0),Ee.isYou&&(xc(Ee.health,Ee.sid,null,null,!0),Is(),nn()))}function Do(e,t){(Ee=ve.players.findBySid(e))&&ve.players.updateAssetID(Ee,t)}function Oo(e,t){(Ee=ve.players.findBySid(e))&&(ve.players.updateMsh(Ee),Ee.isKranked=!0,Ee.krankedTimer=t,Ee.krankedTick=1e3,ve.players.updateMsh(Ee))}function Lo(e,t){ve.map.manager.updatePendingLeader(e,t)}function jo(e,t){ve.globalVals[e]=t}function zo(e,t,i,n,s,a=!0,r=!0,o,l,c,d,h){(Ee=ve.players.findBySid(e))&&(Ee==Ae&&he.play("pick_0",.2),Ee.updateLoadout(ve,i,!0,t,l,c,d,h)),a&&ve.updatePickup(n,s,null,r,o)}function Bo(e,t){for(var i=0;i<ve.players.list.length;i++)(Ee=ve.players.list[i])==Ae&&he.play("pick_0",.2),Ee.updateLoadout(ve,t,!0,e)}window.updateCamMouse=function(e){var t=!!ve.classConfig[e].fPLock;ye.camOffset=ve.classConfig&&(ve.classConfig[e].camOffX||ve.classConfig[e].camOffY||ve.classConfig[e].camOffZ),ye.camRot=ve.classConfig&&ve.classConfig[e].camRot,ye.UsePointerLock=!(!ye.camRot&&ye.camOffset&&!t||ee.isMobileControls||ye.forceFreeCam),ye.freeMouse=!ye.UsePointerLock&&!ee.isMobileControls,ye.camType.isNormal=0==ve.classConfig[e].camType,ye.camType.isTop=1==ve.classConfig[e].camType,ye.camType.isSideX=2==ve.classConfig[e].camType,ye.camType.isSideZ=3==ve.classConfig[e].camType,ye.camType.isOrto=4==ve.classConfig[e].camType,ce.setOrto(ye.camType.isOrto,ve.classConfig[e].orthoF),ce.aimFov=ye.camType.isNormal||ve.classConfig[e].shtToCam,re.speedLineMlt=ve.classConfig&&ve.classConfig[e].spdLnTh?ve.classConfig[e].spdLnTh:500;var i=ve.classConfig&&ve.classConfig[e]&&ve.classConfig[e].cID.length?(ve.classConfig[e].cID||"").replace(/[^\d]/g,""):"";re.mapCross=i||"";var n=ve.classConfig&&ve.classConfig[e]&&ve.classConfig[e].ccID.length?(ve.classConfig[e].ccID||"").replace(/[^\d]/g,""):"";re.mapCrossChase=n||""},Object.defineProperty(window,"updMatchVote",{writeable:!1,value:function(e,t){for(var i=0;i<t.length;++i)if(Ee=document.getElementById("voteT"+t[i])){var n=0;if(e)for(var s in e)e.hasOwnProperty(s)&&e[s]&&t[i]==e[s][0]&&(n+=e[s][1]);Ee.innerHTML=n,Ee.style.color=e&&e[me.socketId]&&e[me.socketId][0]==t[i]?te.matchVote.selected:te.matchVote.notSelected}}}),Object.defineProperty(window,"voteOnMatch",{writeable:!1,value:function(e){ve.isSandbox?ze.voteMatch(me.socketId,e,1):me.send("maVote",e)}}),window.voteMod=function(e,t){if(Re){var i=document.getElementById("modVoteU"),n=(document.getElementById("modVoteD"),0);1==t?(n=1,1==wo&&(n=0)):-1==t&&(n=-1,-1==wo&&(n=0)),wo=n,me.send("vote",Re.id,yn,e,n,1),i.parentNode.style.display="none"}},window.voteMap=function(e,t,i){if(Re){var n=document.getElementById("mapVoteU"),s=document.getElementById("mapVoteD"),a=0;1==t?(a=1,1==Xe&&(a=0)):-1==t&&(a=-1,-1==Xe&&(a=0)),Xe=a,me.send("vote",Re.id,yn,e,a),i&&Rc(-1,null,"Map "+(0==Xe?"Voted Removed":1==Xe?"Upvoted":"Downvoted"),2),n.parentNode.removeChild(n),s.parentNode.removeChild(s)}else mapVote.innerHTML=""},Object.defineProperty(window,"followPlayer",{writeable:!1,value:function(e,t){t&&(t.style.visibility="hidden"),me.send("fo",e,1)}}),Object.defineProperty(window,"deleteFollower",{writeable:!1,value:function(e,t){Pe&&Pe[t]&&(Pe.splice(t,1),updateWindow(5)),me.send("fo",e,0)}}),Object.defineProperty(window,"shareResult",{writeable:!1,value:function(){ee.toggleMenu(!0);genericPopup("<div style='color:#fff;font-size:20px;position:relative;margin-bottom:15px;'>Share Match Results</div><textarea type='text' rows='5' id='shareTxt' style='width:100%' placeholder='Include a message with your stats'></textarea><div id='shareError'></div><div id='confirmBtn' style='width: calc(100% - 15px)' onmouseover='playTick(0.1)' onclick='shareMatch()'>Share</div>","contPop")}}),Object.defineProperty(window,"shareMatch",{writeable:!1,value:function(){var e="",t=document.getElementById("shareTxt");t&&t.value&&""!=t.value&&(e=t.value),me.send("smr",e),clearPops()}}),Object.defineProperty(window,"reportPlayer",{writeable:!1,value:function(e,t){openURL("/social.html?p=profile&q="+e+"&autoReport=1")}}),Object.defineProperty(window,"kickVote",{writeable:!1,value:function(e){for(var t=0;t<ve.players.list.length;++t)if((Ee=ve.players.list[t]).id==e){me.send("v2k",Ee.alias,1),Ct.push(Ee.alias),updateWindow(23);break}}}),window.changeAmbient=function(e,t){(e=parseInt(e))!=ve.lastAmbS&&(null!=ve.lastAmbS&&he.stop(ve.lastAmbSC?ve.lastAmbS:"ambient_"+ve.lastAmbS,!!ve.lastAmbSC||void 0),ve.lastAmbS=e,ve.lastAmbSC=t,he.play(t?e:"ambient_"+e,u.amvVols[e]||.12,!0,1,t))},window.changeEnvironment=function(e,t){};var No=getSavedVal("sprayIndex")||getSavedVal("sprayindex")||2482;function Fo(e){var t=No<=0?2482:No,i=bs(Re,!0).filter((e=>e&&ve.store.skins[e.ind]&&ve.store.skins[e.ind].type==Te.SPRAY&&e.ind!=t));i.sort((function(e,t){return~~(Wt.indexOf(t.ind)>=0)-~~(Wt.indexOf(e.ind)>=0)})),i.length>re.sprayWheelMax&&(i.length=re.sprayWheelMax),re.sprayList=i.map((e=>ve.store.skins[e.ind])),re.sprayList.push(ve.store.skins[t]?ve.store.skins[t]:ve.store.skins[2482])}function Ho(e){0==e?he.play("siren_0"):1==e&&(he.play("nuke_0"),imgFlash.style.display="block",imgFlash.style.opacity=1,imgFlash.style.backgroundImage="",ce.shake(1))}function Uo(e){0==e&&he.play("adrop_0")}function Vo(e,t,i){O||L||(1==t?endTimer.textContent=S.t("timer.end",e):2==t?endTimer.textContent=S.t("generic.matchover"):3==t?endTimer.textContent=S.t("generic.matchaband"):(ve&&ae.isNumber(i)&&(ve.gameTimer=i),timerVal.textContent=e,speedRunTimer.textContent=e,specTimer.textContent=e,timerHolder.style.display="0:00"==e?"none":"block"))}Object.defineProperty(window,"selectSpray",{writeable:!1,value:function(e,t,i){saveVal("sprayIndex",e),No=e,t||showWindow(3),i&&updateWindow(3),ms("spray",e),Fo(!0)}}),Fo();var Go=[];function Wo(e,t,i,n){for(var s=null,a=0,r=0;r<Go.length;++r)if(!Go[r].player){s=Go[r],a=r;break}s?s.player=e:(s={},a=Go.length,s.player=e,Go.push(s)),s.elm&&s.elm.remove(),(Ke=document.createElement("div")).className="specPlayerHolder"+i,Ke.innerHTML="<img src='"+ae.assetsUrl("textures/classes/icon_"+(e.classIndex||0)+".png",!0)+"' class='specPlayerIcon"+(e.active?"":" silhouette")+"' id='specPI_"+(e.classIndex||0)+"'><div class='specPlayerFlag"+(e.flagIndex>-1?" flag-icon flag-icon-"+ve.flags[e.flagIndex][1]:"")+"' id='sf_"+e.flagIndex+"'></div><div class='specPlayerName'>"+e.alias+"</div><div class='specNum'>"+(a<9?a+1:"")+"</div><span class='material-icons' style='color:rgba(255,255,255,0.7);font-size:20px;text-shadow:none;margin-top:-47px;vertical-align: middle;' id='specH_"+e.sid+"'>visibility</span><span class='material-icons' id='specKPD'></span>",s.elm=Ke,s.team=t,(i?specTeam1:specTeam0).insertAdjacentElement("beforeend",s.elm)}var qo=0;function Yo(e){if(window.spectating){if(Ue-qo>=1e3)for(var t=0;t<ve.players.list.length;++t)if(!((Ee=ve.players.list[t]).isYou||Ee.isBot&&ve.mode.botsAsAI)){var i=ve.mode.teams?Ee.team-1:1&t;Go.length&&Go.find((e=>e.player&&e.player.sid==Ee.sid))||Wo(Ee,Ee.team,i)}!function(e){for(var t=0;t<Go.length;t++)(Ee=Go[t]).player?(Ee.player.team!=Ee.team&&(Ee.elm&&Ee.elm.remove(),Ee.elm=null,Ee.team=null,Ee.player=null),Ee.elm&&(Ee.elm.classList.toggle("specKPDSuspect",!!Rt&&Rt.sus==Ee.player.id),Ee.elm.classList.toggle("specKPDCaller",!!Rt&&Rt.caller==Ee.player.id),Ee.elm.children[0].id!="specPI_"+(Ee.player.classIndex||0)&&(Ee.elm.children[0].src=ae.assetsUrl("textures/classes/icon_"+(Ee.player.classIndex||0)+".png",!0),Ee.elm.children[0].id="specPI_"+(Ee.player.classIndex||0)),Ee.elm.children[1].id!="sf_"+Ee.player.flagIndex&&(Ee.elm.children[1].className="specPlayerFlag"+(Ee.player.flagIndex>-1?" flag-icon flag-icon-"+ve.flags[Ee.player.flagIndex][1]:""),Ee.elm.children[1].id="sf_"+Ee.player.flagIndex),Ee.elm.children[0].classList.toggle("silhouette",!Ee.player.active),Ee.elm.children[4].style.display=ye.spect.target&&ye.spect.target.isPlayer&&ye.spect.target.sid==Ee.player.sid?"inline-block":"none",Ee.elm.children[5].style.display=!Rt||Rt.sus!=Ee.player.id&&Rt.caller!=Ee.player.id?"none":"inline-block")):(Ee.elm&&(Ee.elm.remove(),Ee.elm=null),Ee.player&&(Ee.team=null,Ee.player=null))}()}}const Ko=46;function Xo(e,t){for(var i,n=0;n<e.length;){if(i=e[n]==me.socketId,(Ee=ve.players.add(e[n],e[n+1],e[n+2],e[n+3],e[n+4],e[n+5],e[n+6],e[n+12],e[n+33],e[n+29],e[n+13],e[n+42],e[n+14],e[n+41],e[n+30],e[n+34],e[n+36],e[n+19],e[n+20],e[n+32],e[n+24],e[n+22],e[n+23],e[n+15],e[n+21],e[n+9],i,e[n+16],e[n+17],null,e[n+28],e[n+37],e[n+38],e[n+39],e[n+40],e[n+44])).health=null==e[n+7]?Ee.maxHealth:e[n+7],Ee.maxHealth=e[n+8],Ee.hpChase=Ee.health/Ee.maxHealth,Ee.team=e[n+9],Ee.level=e[n+10],Ee.clan=e[n+11],Ee.xDire=e[n+18],Ee.featured=e[n+25],Ee.premiumT=e[n+27],Ee.flagIndex=parseInt(e[n+26]),Ee.accid=e[n+31],Ee.badgeIndex=parseInt(e[n+35]),Ee.playerCardIndex=parseInt(e[n+43]),ve.setBusy(Ee,e[n+45]),i){if(Re&&Re.canFlag&&(Ee.kpd=!0),Ee.setInitPos(),At=Date.now(),Ae=Ee,bottomLeftTeamName.style.color=ve.mode.teamColors&&ve.mode.teamColors[Ae.team-1]?ve.mode.teamColors[Ae.team-1]:"#fff",bottomLeftTeamName.textContent=ve.mode.teamOptions?ve.mode.teamOptions[Ae.team-1]||u.teamNames[Ae.team-1]:ve.mode.teams?u.teamNames[Ae.team-1]:"",bottomLeftTeamType.textContent=ve.mode.teamOptions||ve.mode.teams?"Team":"FFA",Ae.team){var s=document.getElementById((ve.mode.flags?"tScoreF":"tScoreC")+Ae.team);s?s.className=(ve.mode.flags?"material-icons tScoreF":"tScoreC")+" you":Jl()}nn();var a=ve.mode.teamOptions&&"Prop"==ve.mode.teamOptions[Ae.team-1];botRightHider.style.display=a?"none":"block",propControlHolder.style.display=a?"block":"none",ve.detachedCam||(ye.object.rotation.y=Ae.xDire,ye.xDr=ye.object.rotation.y%Math.PI2,ye.pchObjc.rotation.x=Ae.yDire,ye.yDr=ye.pchObjc.rotation.x%Math.PI2),ve.players.updatePlayerFov(Ae),ve.mode.deposit&&jl(0,ve.mode.depositType),ve.mode.bighead&&gc(Ae.headMlt)}else Ee.objInstances.visible=!1;xc(Ee.health,Ee.sid,null,null,!0),n+=Ko,Ee.id==Dt&&window.spectating&&focusPlayer(Dt),ve&&ve.mainScript&&ve.mainScript.onPlayerSpawn&&ve.mainScript.onPlayerSpawn(Ee.id+"")}}function Zo(e,t){for(var i=0;i<e.length;){for(var n=0;n<ve.players.list.length;++n)ve.players.list[n].id==e[i]&&(ve.players.list[n].name=e[i+1],ve.players.list[n].alias=e[i+2]);i+=3}t||me.socket.close()}var Jo=0;function Qo(e){ve&&(ye.tmpInpts.length=0,at.length=0,rt=[],et={},tt=1,6!=e&&7!=e&&ve.now-Jo>=5e3&&Rc(-1,null,"Input Failed "+e,2),Jo=ve.now)}At=0;var $o=26;function el(e){if(me.send("v"),Ae&&e){var t=Date.now(),i=t-At;ae.inRange(i,3e3,2e4)&&Rn(),At=t;Ae.x,Ae.y,Ae.z;Ae.x=e[2],Ae.y=e[3],Ae.z=e[4],Ae.onGround=e[9],Ae.didJump=e[10],Ae.didJumpW=e[11],Ae.wallJumpC=e[12],Ae.onWall=e[13],Ae.onLadder=e[14],Ae.aimVal=e[15],Ae.crouchVal=e[16],Ae.velocity.set(e[6],e[5],e[7]),Ae.xVelC=e[21],Ae.zVelC=e[22],Ae.xDire=e[8],ve.players.swapWeapon(Ae,0,!1,e[17],void 0,!0),Ae.slideTimer=e[18],Ae.canSlide=e[19],Ae.onTerrain=e[20],Ae.grapple=e[23]||null,Ae.canSlideT=e[24];var n=e[25];if(n&&Ae._protected)for(var s=0;s<n.length;s+=2)null!=Ae._protected[n[s]]&&"object"!=typeof Ae._protected[n[s]]&&(Ae._protected[n[s]]=n[s+1]);var a=ve.movement[Ae.config.movSch||0];if(a&&a.sendVals&&a.sendVals.length)for(s=0;s<a.sendVals.length;++s)Ae[a.sendVals[s]]=e[$o+s];if(!ve||!ve.noPred)for(var r=0;r<ye.tmpInpts.length;)ye.tmpInpts[r][0]<=e[0]?ye.tmpInpts.splice(r,1):(Ae.procInputs(ye.tmpInpts[r],ve,!0),r++)}if(Ae&&e&&e[1]){var o=yt!=e[1];yt=e[1],o&&(cn=te.ping.low,yt>=150?cn=te.ping.high:yt>=50&&(cn=te.ping.medium),pingText.textContent=-1==yt?"-":yt,pingText.style.color!=cn&&(pingText.style.color=cn),"none"!=menuHolder.style.display&&(menuPingText.textContent=-1==yt?"-":yt,menuPingIcon.style.color!=cn&&(menuPingIcon.style.color=cn)))}}function tl(){me.send("po")}function il(e){e}var nl=Date.now();function sl(e){He=e,al("warmup starts in ",ae.getTime(e)),e||(vsHolder.style.display="none",Jc(),instructionHider.style.display="block")}function al(e,t,i,n,s){var a;i&&(a=i)&&(he.play("cntd_"+a,.2),re.animateText(re.timerText,a,300,1.2,700,100,0,(function(){}),null,15)),n&&ic(n[0],n[1]),"wt"==e&&(e=S.t("player.waiting")),e&&(e+=t?" "+t:""),gameMessage.textContent=e||"",specGMessage.textContent=e||"",compTimBox.textContent=e||"",ve.objActive=!!(e||"").startsWith("next")}function rl(e,t){ic(t||"Round",e,null,35),roundMessage.textContent="Round "+e,he.play("mystery_1",.2)}function ol(e,t){(Ee=ve.players.findBySid(e))&&(Ee.team=t,Ee==Ae&&(ft=t,bottomLeftTeamName.style.color=ve.mode.teamColors&&ve.mode.teamColors[t-1]?ve.mode.teamColors[t-1]:"#fff",bottomLeftTeamName.textContent=ve.mode.teamOptions?ve.mode.teamOptions[t-1]||u.teamNames[t-1]:ve.mode.teams?u.teamNames[t-1]:"",bottomLeftTeamType.textContent=ve.mode.teamOptions||ve.mode.teams?"Team":"FFA",ve.mode.teamOptions&&"Stalker"==ve.mode.teamOptions[t-1]&&ve.players.resetAim()))}function ll(e,t){Ae&&(Ae.ammos=e,Ae.reserveAmmos=t,ve.players.updatePlayerAmmo(Ae))}function cl(e,t,i,n){ve.lockMove(Ae,e,t,i,n)}function dl(){for(var e,t=0;t<ve.playerSounds.length;++t)(e=ve.playerSounds[t].obj)&&(e[0].isPlaying=!1,e[0].stop(e[1]));ve.playerSounds.length=0}function hl(e,t){0==e?(ve.instaKillTimer=t,t>0?(he.stop("instantkill_0"),he.play("instantkill_0",.5)):t<=0&&he.stop("instantkill_0")):1==e?(ve.fireSaleTimer=t,t>0?(he.stop("firesale_0"),he.stop("firesale_1"),he.play("firesale_0",.5),he.play("firesale_1",.1,!0)):t<=0&&(he.stop("firesale_0"),he.stop("firesale_1"))):2==e&&(ve.doublePointsTimer=t),powerUpHolder.children[e].style.display=t>0?"":"none"}function ul(e,t,i,n,s,a,r,o,l){if(Ee=ve.players.findBySid(e)){Ee.debugMesh&&ce.scene.remove(...Ee.debugMesh),Ee.debugMesh||=[];const e=new de.BoxGeometry,c=new de.LineBasicMaterial({color:255,linewidth:5});let d=new de.LineSegments(e,c);ce.moveMesh(d,t,i+a/2,n),d.scale.set(2*s,a,2*s),ce.scene.add(d),Ee.debugMesh.push(d);const h=new de.BoxGeometry,u=new de.MeshBasicMaterial({color:o||16711680});let p=new de.Mesh(h,u);ce.moveMesh(p,t,r,n),p.scale.set(2*s,.2,2*s),ce.scene.add(p),Ee.debugMesh.push(p);const f=new de.BoxGeometry,m=new de.MeshBasicMaterial({color:65280,opacity:.25,transparent:!0});let g=new de.Mesh(f,m);ce.moveMesh(g,t,i+a-l+l/2,n),g.scale.set(2*s,l,2*s),ce.scene.add(g),Ee.debugMesh.push(g)}}function pl(e,t){(Ee=ve.players.findBySid(e))&&ve.setBusy(Ee,t)}function fl(e,t){(Ee=ve.players.findBySid(e))&&(Ee.isJuggernaut=t)}function ml(e){ve&&(ve.experimentalFeatures=e,Rc(-1,null,"Experimental Features - "+(ve.experimentalFeatures?"Enabled":"Disabled"),2))}function gl(e){var t=ve.isSandbox?Be:Ae;t&&(t.noclip=e,Ae.noclip=e,Ac(-1,null,["commands.noclip."+(t.noclip?"on":"off")],2))}function vl(e){Ae&&(Ae.freeze=e,Ae.defaultMovement=!Ae.freeze,Ae.defaultVelocity=!Ae.freeze,Ae.disableShooting=Ae.freeze,Ae.disableMelee=Ae.freeze)}function yl(e){Ae&&(Ae.speedBoost=e,Rc(-1,null,"SpeedBoost - "+Ae.speedBoost,2))}function bl(e){Ae&&(Ae.debugMode=e,Rc(-1,null,"Debug Mode - "+(Ae.debugMode?"Enabled":"Disabled"),2))}function wl(e){var t=ve.isSandbox?Be:Ae;t&&(t.unlimitedAmmo=e,Ae.unlimitedAmmo=e,Ac(-1,null,["commands.unlimited."+(t.unlimitedAmmo?"on":"off")],2))}function xl(e){Ae&&(Ae.forceHide=e,Rc(-1,null,"Hide - "+(Ae.forceHide?"Enabled":"Disabled"),2))}function Sl(e){Ae&&(Ae.sharingIsCaring=e,ic("Sharing is caring","",!0))}function Ml(e,t){Ae&&(Ae[e]=t)}function kl(e,t){Ae&&(Ae.custVals[e]=t)}function _l(){Ae&&Ae.refillKnife()}function Tl(e,t){Ae&&(Ae[2==t?"pendingSpin":"pendingTrigger"]=e)}function Cl(e,t,i,n){n?ve.servAnim(e,t,i):ve.AI.servAnim(e,t,i)}let Il=13;function Al(e,t,i){var n=Date.now();if(ve.players.hideAll(),ve.servTim=i,ve.lastSync=+(ve.newSync||0),ve.newSync=n,e)for(var s=0;s<e.length;){if((Ee=ve.players.findBySid(e[s]))&&Ee!=Ae){Ee.objInstances&&(Ee.objInstances.visible=!ve.hidePlayers&&!Ee.lodActive,ve.hidePlayers&&Ee.isBot&&(Ee.objInstances.visible=!Ee.lodActive)),Ee.sendRateA=t,Ee.latestData=!0,Ee.forcePos?(Ee.x=e[s+1],Ee.y=e[s+2],Ee.z=e[s+3],Ee.xDire=ae.toRad(e[s+4]),Ee.yDire=ae.toRad(e[s+5]),Ee.stepVal=e[s+6],Ee.posBuffer.length=0,Ee.interpolate=!1,Ee.forcePos=!1):(Ee.posBuffer.push({t:n,x:e[s+1],y:e[s+2],z:e[s+3],xD:ae.toRad(e[s+4]),yD:ae.toRad(e[s+5]),s:e[s+6]}),Ee.interpolate=!0),Ee.onGround=e[s+7],Ee.crouchVal=e[s+8],Ee.aimVal=e[s+10],Ee.ping=e[s+12];var a=e[s+11];a?Ee.grapple&&Ee.grapple.x==a[0]&&Ee.grapple.y==a[1]&&Ee.grapple.z==a[2]||(Ee.grapple={x:a[0],y:a[1],z:a[2]},ue.addRope(Ee,a[0],a[1],a[2])):Ee.grapple=null,ve.players.swapWeapon(Ee,0,!1,e[s+9])}s+=Il}}function Rl(e){if(Li[e]&&=null,Go&&Go.length){var t=Go.find((t=>t.player&&t.player.sid==e));t&&(t.player=null)}let i=ve.players.findBySid(e);i&&i.id==Dt&&clearFocus(!0),ve.players.remove(e)}function Pl(e,t,i,n,s,a){Ee=ve.players.findBySid(e),De=ve.players.findBySid(i);var r,o=!1;if(Ee){De&&Ee!=De&&(Ee.killedBy[De.id]=(Ee.killedBy[De.id]||0)+1);if((!!Ae&&!!Ae.team&&Ae.team==Ee.team||!!Ee.isYou||!!window.spectating)&&re.addDeathMarker(Ee.x,Ee.y,Ee.z,Ee.isYou),ve.players.kill(Ee),Ee.isYou&&(re.sprayWheelClose(),re.propWheelClose(),reloadMsg.style.display="none",deathsVal.textContent=t||0,kdVal.textContent=((parseInt(killsVal.textContent)||0)/(t||1)).round(1).toString(),_t=0,streakVal.textContent=_t,De&&Ee!=De&&((De.level<=10||!De.level)&&Re&&!ve.isCustom&&-1==Ct.indexOf(De.alias)&&(o=!0),ve&&ve.config&&ve&&ve.config.kCams&&(ye.camLookAt(De.x,De.y+De.height/1.5,De.z),De.interpolate=!1,De.cnBSeen=!0,De.objInstances&&(De.objInstances.visible=!0))),function(e,t,i,n,s){let a=["Time Survived","Shots Fired","Accuracy","Kills","Score"],r="";if((i=i||[])&&i[3])for(let e=0;e<a.length;e++)r+='<div class="death-stats-row">\n\t\t\t'+a[e]+' : <span style="color:rgba(255, 255, 255, 0.7)">'+(null==i[3][e]?"Unknown":0==e?ae.getReadableTime(i[3][e],!0,null,!0):i[3][e])+"</span>\n\t\t</div>";let o="";if(t&&e!=t){const a=Re&&Re.stats&&Re.stats["c"+e.classIndex]?Re.stats["c"+e.classIndex]:0,l=Math.max(1,Math.floor(u.rankVar*Math.sqrt(a))+1),c=Math.max(1,Math.floor(u.rankVar*Math.sqrt(i[1]||0))+1),d=El(e,e.weapon.id),h=El(t,i[0],n),p=ve.store.skins[e.playerCardIndex]?ve.store.skins[e.playerCardIndex].thumbnail:null,f=ve.store.skins[t.playerCardIndex]?ve.store.skins[t.playerCardIndex].thumbnail:null,m=t.loadout.indexOf(i[0]);let g=null==t.skins[m]?null:t.skins[m];null!=g&&(g=ve.store.skins[g]),g&&g.weapon-1!=t.loadout[m]&&(g=null);let v=g?ve.store.rarities[g.rarity].color:"rgba(255,255,255,0.7)";const y=ve.weaponConfig[i[0]];let b=g?g.name:y.name,w=!!g&&ve.store.rarities[g.rarity].animate;const x=y.melee&&n&&n.pj;y.melee&&n&&n.fs?(b="Fists",v="rgba(255,255,255,0.7)",w=!1):y.melee&&t.meleeIndex>=0&&ve.store.skins[t.meleeIndex]&&(b=ve.store.skins[t.meleeIndex].name,v=ve.store.rarities[ve.store.skins[t.meleeIndex].rarity].color,w=ve.store.rarities[ve.store.skins[t.meleeIndex].rarity].animate);const S=e.weapon.name;o+='\n\t\t\t<div class="death-ui-bottom" id=\'deathUIBottom\'>\n\t\t\t\t<div class="death-column-empty"></div>\n\t\t\t\t<div class="death-column" style="justify-content: end;">\n\t\t\t\t\t<div class="death-row-left">\n\t\t\t\t\t\t<div class="death-row-weapon">\n\t\t\t\t\t\t\t<div class="death-row-weapon-text'+(ce.rarityAnim&&w?" rainbowText":"")+'" style="color:'+v+'">'+(x?"Thrown ":"")+"["+b+']</div>\n\t\t\t\t\t\t\t<div class="death-row-weapon-img" style="background-image:url('+h+')"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="death-row-kills">'+(e.killedBy[t.id]||0)+'</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="death-row-bottom">\n\t\t\t\t\t\t'+(f?'<img class="death-row-bottom-bg" src="'+f+'">':"")+'\n\t\t\t\t\t\t<div class="death-row-class">\n\t\t\t\t\t\t\t<img class="death-row-class-img" src="'+tn(t.classIndex)+'">\n\t\t\t\t\t\t\t<div class="death-row-class-level">lvl '+c+'</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="death-row-user">\n\t\t\t\t\t\t\t<div class="death-row-user-text">'+(we.tmp.streamMode?ae.scrambleS(t.alias):t.alias)+"</div>\n\t\t\t\t\t\t\t"+(i&&i[2]?'<div class="death-row-user-stat">\n\t\t\t\t\t\t\t\t'+i[2][1]+' <span style="color:#fff">'+u.playerCardStats[i[2][0]].name+"</span>\n\t\t\t\t\t\t\t</div>":"")+'\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="death-column" style="justify-content: center;">\n\t\t\t\t\t<div class="death-row-center">-</div>\n\t\t\t\t\t<div class="death-row-center death-row-center-bottom">VS</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="death-column" style="justify-content: start;">\n\t\t\t\t\t'+(s?'<div class="death-report">\n\t\t\t\t\t\t<span class="death-report-text">['+ae.getKeyName(ye.binds.playerList.val)+"]</span> to Report\n\t\t\t\t\t</div>":"")+'\n\t\t\t\t\t<div class="death-row-right">\n\t\t\t\t\t\t<div class="death-row-kills">'+(t.killedBy[e.id]||0)+'</div>\n\t\t\t\t\t\t<div class="death-row-weapon">\n\t\t\t\t\t\t\t<div class="death-row-weapon-text" style="color:rgba(255,255,255,0.7)">['+S+']</div>\n\t\t\t\t\t\t\t<div class="death-row-weapon-img-right" style="background-image:url('+d+')"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="death-row-bottom">\n\t\t\t\t\t\t'+(p?'<img class="death-row-bottom-bg" src="'+p+'">':"")+'\n\t\t\t\t\t\t<div class="death-row-class">\n\t\t\t\t\t\t\t<img class="death-row-class-img" src="'+tn(e.classIndex)+'">\n\t\t\t\t\t\t\t<div class="death-row-class-level">lvl '+l+'</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="death-row-user">\n\t\t\t\t\t\t\t<div class="death-row-user-text">'+(Re?Re.premiumT>0&&we.tmp.premiumBadge?Re.alias:Re.name:e.alias)+'</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="death-stats">'+r+"</div>\n\t\t\t</div>\n\t\t"}else o+='<div class="death-ui-bottom-empty">\n\t\t\t<div class="death-column-empty"></div>\n\t\t\t<div class="death-column" style="justify-content: center;">\n\t\t\t\t<div class="death-row-center-self">You</div>\n\t\t\t\t<div class="death-row-center-self">Died</div>\n\t\t\t</div>\n\t\t\t<div class="death-stats">'+r+"</div>\n\t\t</div>";deathUIHolder.innerHTML=o,deathUIHolder.style.display="block"}(Ee,De,n,o),perkHolder.innerHTML="",zPerksHolder.innerHTML="",uiBase.classList.toggle("onDeathScrn",!0),ve.mode&&ve.mode.canTrade&&window.closeWindow(),ee.toggleGameUI(!1),setTimeout((function(){ve.forceSpawn&&X(ve.forceSpawn+1),ci=!1;let e=ye.enabled;e&&=ye.resume(),e||en()}),u.deathDelay),(r={}).gameplay_length=Date.now()-Lt||0,logEventFRVR("game_play_end",r)),!a&&we.tmp.showKills){var l=Ee==Ae?"<span style='color:"+te.killFeed.you+"'>You</span>":"<span style='color:"+(ft&&ft==Ee.team?te.killFeed.ally:te.killFeed.enemy)+"'>"+ae.fixStr(we.tmp.streamMode?ae.scrambleS(Ee.alias):Ee.alias)+(Ee.clan&&1==we.tmp.leaderType?"<span style='color:"+te.getClanCol(Ee.clan,"#fff")+"'> ["+ae.fixStr(Ee.clan)+"]</span>":"")+"</span>",c=Ee==De?"":De==Ae?"<span style='color:"+te.killFeed.you+"'>You</span>":De?"<span style='color:"+(ft&&ft==De.team?te.killFeed.ally:te.killFeed.enemy)+"'>"+ae.fixStr(we.tmp.streamMode?ae.scrambleS(De.alias):De.alias)+(De.clan&&1==we.tmp.leaderType?"<span style='color:"+te.getClanCol(De.clan,"#fff")+"'> ["+ae.fixStr(De.clan)+"]</span>":"")+"</span>":"";De?Dc(De,s,c,l):Dc(null,null,null,l+" committed "+ae.fixStr(u.suicides[ae.randInt(0,u.suicides.length-1)]))}ve&&ve.mainScript&&ve.mainScript.onPlayerDeath&&ve.mainScript.onPlayerDeath(Ee.id+"",De?De.id+"":"")}}function El(e,t,i){const n=ve.weaponConfig[t];n.melee&&i&&i.pj;let s;return s=n.assetIcon&&n.assetIcon.length?ae.userAssetsUrl("/"+n.assetIcon.replace(/[^\d]/g,"")+"/texture.png"):n.melee&&i&&i.fs?ae.assetsUrl("/img/death-ui/icon_0.png"):n.melee?ae.assetsUrl("/img/death-ui/icon_0_1.png"):ae.assetsUrl("/img/death-ui/"+n.icon+".png"),s}function Dl(e,t){if(Ee=ve.players.findBySid(e),De=ve.players.findBySid(t),Ee){var i=Ee==Ae?"<span style='color:"+te.killFeed.you+"'>"+(Ee==De?"You":"Your")+"</span>":"<span style='color:"+(ft&&ft==Ee.team?te.killFeed.ally:te.killFeed.enemy)+"'>"+ae.fixStr(we.tmp.streamMode?ae.scrambleS(Ee.alias):Ee.alias)+(Ee.clan&&1==we.tmp.leaderType?"<span style='color:"+te.getClanCol(Ee.clan,"#fff")+"'> ["+ae.fixStr(Ee.clan)+"]</span>":"")+"</span>",n=Ee==De?"":De==Ae?"<span style='color:"+te.killFeed.you+"'>"+(Ee==De?"Your":"You")+"</span>":De?"<span style='color:"+(ft&&ft==De.team?te.killFeed.ally:te.killFeed.enemy)+"'>"+ae.fixStr(we.tmp.streamMode?ae.scrambleS(De.alias):De.alias)+(De.clan&&1==we.tmp.leaderType?"<span style='color:"+te.getClanCol(De.clan,"#fff")+"'> ["+ae.fixStr(De.clan)+"]</span>":"")+"</span>":"";Rc(ft&&ft==Ee.team?1:0,null,Ee==De?i+" claimed a package":n+" stole "+i+" package",1)}}function Ol(e,t){if(Ae){t?Ae.streaks[e]?Ae.streaks[e].cnt=t:Ae.streaks[e]={cnt:t,streak:ve.streaks[e]}:Ae.streaks[e]=null;for(var i="",n=[...ve.streaks].sort(((e,t)=>(null==e.kills?0:e.kills)-(null==t.kills?0:t.kills))).sort(((e,t)=>(null==e.slot?0:e.slot)-(null==t.slot?0:t.slot))),s=0;s<n.length;++s){var a=n[s].slot,r=n[s].index;Ae.streaks[r]&&Ae.streaks[r].cnt&&(i+="<div class='killStreakItem'"+(ye.isMobile||p()?" ontouchstart='callInStreak("+a+")'":"")+"><div class='killStreakItemInner'>"+(ye.isMobile||p()?"":"<div class='killStreakKey'>"+ae.getKeyName(ye.binds.streak[a].val)+"</div>")+"<div class='killStreakCnt'>x"+Ae.streaks[r].cnt+"</div><img style='width: 100%;' src=\""+ae.assetsUrl("/img/streaks/"+r+".png")+'"></div></div>')}killStreakHolder.innerHTML=i}}function Ll(e,t){if(Ae){Ae.currentStreakWeapon=e,Ae.weaponStreak=t;const i=weapHolder.querySelectorAll(".weapStreakHolder");i.length&&i.forEach((i=>{i.style.display=i.dataset.weaponIndex==e?"block":"none",i.firstElementChild.firstChild.textContent=i.dataset.weaponIndex==e?t:0}))}}function jl(e,t){if(Ae){Ae.dogTags=e;var i=t?giftTagHolder:krTagHolder,n=Ae.dogTags>=ve.mode.tagHoldLimit?"rgba(255, 0, 0, 0.5)":"var(--div-grey)";i.firstChild?((i=i.firstChild.firstChild).firstChild.textContent="x"+(Ae.dogTags||0),i.style.backgroundColor=n):i.innerHTML="<div class='killStreakItem'><div class='killStreakItemInner' style=\"background-color:"+n+"\"><div class='killStreakCnt'>x"+(Ae.dogTags||0)+"</div><img style='width: 100%;' src=\""+ae.assetsUrl(t?"/img/props/prop_60.png":"/textures/sprays/114.png")+'"></div></div>'}}function zl(e,t){if((Ee=ve.players.findBySid(e))&&(Ee.perks=t,Ee.isYou)){for(var i="",n=0;n<Ee.perks.length;++n)i+="<div class='zPerkItem' style='background-image: url(&quot;"+ae.assetsUrl("/img/perks/zombie/"+Ee.perks[n]+".png")+"&quot;)'><span></span></div>";zPerksHolder.innerHTML=i}}function Bl(e,t){if(Ae){t?(Ae.effects[e]=(Ae.effects[e],t),ve.effectConfig[e].execute(ve,Ae)):ve.players.clearEffect(Ae,e);for(var i="",n=0;n<ve.effectConfig.length;++n)Ae.effects[n]&&(i+='<div class=\'perkItem\'><di class="perkItemInner"><img src="'+ae.assetsUrl("/img/perks/"+n+".png")+'" style="width: 100%;"><div class=\'perkCnt\'>x'+Ae.effects[n]+"</div></div></div>");perkHolder.innerHTML=i}}function Nl(e,t){if(Ee=ve.players.findBySid(e)){var i=Ee==Ae?"<span style='color:"+te.killFeed.you+"'>You're</span>":"<span style='color:"+(ft&&ft==Ee.team?te.killFeed.ally:te.killFeed.enemy)+"'>"+ae.fixStr(we.tmp.streamMode?ae.scrambleS(Ee.alias):Ee.alias)+"</span> is";Rc(0,null,S.t("player.killstreak",i,ae.fixStr(t)),1)}}function Fl(e,t,i){if(Ee=ve.players.findBySid(e),De=ve.players.findBySid(t),Ee){var n=Ee==Ae?"<span style='color:"+te.killFeed.you+"'>You</span>":"<span style='color:"+(ft&&ft==Ee.team?te.killFeed.ally:te.killFeed.enemy)+"'>"+ae.fixStr(we.tmp.streamMode?ae.scrambleS(Ee.alias):Ee.alias)+"</span>",s=De&&De==Ae?"<span style='color:#fff'>You</span>":De?"<span style='color:"+(ft&&ft==De.team?te.killFeed.ally:te.killFeed.enemy)+"'>"+ae.fixStr(we.tmp.streamMode?ae.scrambleS(De.alias):De.alias)+"</span>":"";Rc(0,null,n+" "+ae.fixStr(i)+" "+s,1)}}function Hl(e){Mt=e,e&&(function(e){for(var t=(ve&&ve.mode&&ve.mode.leaderStats?ve.mode.leaderStats:["score"]).length+1,i=1,n="",s=0;s<e.length&&!((Ee=ve.players.findBySid(e[s]))&&(Ee.team,n+="<div class='leaderItem'>",n+="<div class='leaderCounter'>"+i+".</div>",n+=Ee.premiumT>0?" <i class='material-icons' style='color:"+te.verified.clan+";margin-top:5px;font-size:23px;vertical-align:middle;'>beenhere</i>":"",n+=Ee.featured?" <i class='material-icons' style='color:"+te.verified.player+";margin-top:5px;font-size:23px;vertical-align:middle;'>check_circle</i>":"",n+=Ee.badgeIndex>=0?"<img src='"+ve.badges[Ee.badgeIndex].url+"' style='margin-top:5px;font-size:28px;vertical-align:middle;height:21px;margin-left:2px;'>":"",n+="<div class='leaderName"+(Ae&&e[s]==Ae.sid?"M":ve.mode.fakeNames||ft&&ft==Ee.team?"F":"")+"'>"+(we.tmp.streamMode?ae.scrambleS(Ee.alias):Ee.alias)+(Ee.clan?"<span style='color:"+te.getClanCol(Ee.clan,"#fff")+"'> ["+Ee.clan+"]</span>":"")+"</div>",n+="<div class='leaderScore'>"+ae.formatNum(e[s+1],2)+"</div>",n+="</div>",++i>10));s+=t);leaderContainer&&(leaderContainer.innerHTML=n),i<=1&&(leaderContainer.innerHTML=S.t("leaderboard.empty"))}(e),function(e){centerLeaderDisplay.innerHTML="";for(var t,i=ve.mode.teams&&!ve.mode.fakeNames,n=ve&&ve.mode&&ve.mode.leaderStats?ve.mode.leaderStats:["score"],s=n.length+1,a=[],r=[],o=0;o<e.length;o+=s)if(Ee=ve.players.findBySid(e[o])){if(!r[t=i?Ee.team-1:0]){if(r[t]="",i){var l=document.getElementById("teamNm"+(t+1));r[t]="<div class='newLeaderTeam'>"+(l?l.textContent:u.teamNames[t])+"<div class='newLeaderTeamScore'>"+(ve.teamScores[t+1]||0)+"</div></div>"}r[t]+="<table id='ingameTable'>",r[t]+="<tr><th>Name</th>";for(var c=0;c<n.length;++c)r[t]+="<th>"+ae.capFirst(n[c])+"</th>";r[t]+="</tr>",r[t]+="<tr height='10px;'></tr>"}a[t]||=1,r[t]+="<tr><td>",r[t]+="<div class='newLeaderItem'>",r[t]+="<div class='newLeaderCounter'>"+a[t]+".</div>",r[t]+=Ee.premiumT>0?" <i class='material-icons' style='color:"+te.verified.clan+";margin-top:3px;font-size:23px;vertical-align:middle;'>beenhere</i>":"",r[t]+=Ee.featured?" <i class='material-icons' style='color:"+te.verified.player+";margin-top:3px;font-size:23px;vertical-align:middle;'>check_circle</i>":"",r[t]+=Ee.badgeIndex>=0?"<img src='"+ve.badges[Ee.badgeIndex].url+"' style='margin-top: 3px;font-size:28px;vertical-align:middle;height: 21px;margin-left:2px;'>":"",r[t]+="<div class='newLeaderName"+(Ae&&e[o]==Ae.sid?"M":ve.mode.fakeNames||ft&&ft==Ee.team?"F":"")+"'>"+(we.tmp.streamMode?ae.scrambleS(Ee.alias):Ee.alias)+(Ee.clan?"<span style='color:"+te.getClanCol(Ee.clan,"#fff")+"'> ["+Ee.clan+"]</span>":"")+"</div>",r[t]+="</div>",r[t]+="</td>";for(var d=0;d<n.length;d++)r[t]+="<td>"+ae.formatNum(e[o+1+d],2)+"</td>";r[t]+="</tr>",a[t]++}var h="";for(var p in r)r[p]+=a[p]<=1?"<div class='newLeaderNoPlayers'>No players</div>":"</table>",h+='<div class="centerLeaderContainer"><div class="centerLeaderContainerInner">'+r[p]+"</div></div>";centerLeaderDisplay.innerHTML=h}(e))}function Ul(e){var t=we.tmp.scoreBoardTrigger,i="none"!=centerLeaderDisplay.style.display;0==t&&(e=1==e?~~!i:~~!!i),centerLeaderDisplay.style.display=e?"inline-grid":"none"}function Vl(e){e&&(!e.minimapTimer||e.minimapTimer<u.playerBlipTimer/2)&&(e.minimapTimer=u.playerBlipTimer,e.minimapPos={x:e.x,y:e.y,z:e.z})}function Gl(e){if(Ae&&Ae.active||window.spectating){var t=e[1],i=e[2],n=e[3],s=e[4],a=e[5],r=e[6],o=e[7],l=e[8],c=e[9],d=e[10];if((Ee=ve.players.findBySid(e[0]))&&!Ee.isYou&&ve&&ve.hidePlayers&&!Ee.isBot)return;if(Vl(Ee),Ee&&ue.showTracers)if(Ee.latestData){h=Ee.y+Ee.height-u.cameraHeight-Ee.crouchVal*u.crouchDst,p=ae.getD3D(Ee.x,h,Ee.z,t,i,n),f=ae.getDir(Ee.z,Ee.x,n,t),m=ae.getDir(ae.getDistance(Ee.x,Ee.z,t,n),i,0,h);ue.physObj(Ee.x,h,Ee.z,f,m,p,r,0)}else{var h=l+c-u.cameraHeight-Ee.crouchVal*u.crouchDst,p=ae.getD3D(o,h,d,t,i,n),f=ae.getDir(d,o,n,t),m=ae.getDir(ae.getDistance(o,d,t,n),i,0,h);ue.physObj(o,h,d,f,m,p,r,0)}null!=s&&Ae&&(Ee.latestData?ae.getDistance(Ae.x,Ae.y,Ae.z,Ee.x,Ee.y,Ee.z):ae.getDistance(Ae.x,Ae.y,Ae.z,o,l,d))<=160&&null==ve.canSee(Ae,t,i,n)&&(ue.effect(t,i,n,s,a,0),Ae&&he.play3Dv("rico_"+ae.randInt(1,2),t,i,n,55,.55,1,Ae))}}function Wl(e,t,i,n,s,a){ue.disablePhys(e,t,a,i,n,s),a&&ue.effect(i,n,s,0,0,0)}function ql(e){if(!R)for(var t=ve.projectiles.stored[2],i=0;i<e.length;i+=5)ue.physObj(e[i],e[i+1],e[i+2],0,t.yD,t.range,1,null,null,t,e[i+3],null,e[i+4])}function Yl(e,t,i,n,s,a,r,o,l,c){if(!R){var d,h=l;o?d=ve.projectiles.stored[a]:(d=ve.weaponConfig[a].projectile,h=ve.weaponConfig[a].customProj),d&&ue.physObj(e,t,i,n,s,d.range,!1,null,null,d,r,null,h),null!=c&&Vl(ve.players.findBySid(c))}}function Kl(e,t,i,n,s,a){if(!R&&we.tmp.showExplo&&(Ae||window.spectating)){Ee=ce.camera.getWorldPosition(ce.targetVector);var r=1-ae.getD3D(e,t,i,Ee.x,Ee.y,Ee.z)/u.explosionRange;r>0&&ce.shake(.14*r),he.play3D("explosion",e,t,i,1),ue.ExplosionManager.explodeAt(e,t,i,.08*n,s,a)}}function Xl(e,t){if(t=t||0,null==e||null==e)ve.teamScores={},teamScores.innerHTML="",Jl();else{"inline-block"!=teamScores.style.display&&(teamScores.style.display="inline-block"),ve.teamScores[e]=t;var i=document.getElementById("tScoreV"+e);if(i){i.textContent=t;var n=document.getElementById("specScoreTm"+(e-1));n&&(n.textContent=t)}else Jl()}}function Zl(e,t){var i;(roundsDisplay.style.display=ve.config.gamRounds>1&&!window.spectating?"inline-block":"none",null!=e)?((i=document.getElementById("roundTSc"+e))&&(i.textContent=t),(i=document.getElementById("compT"+e+"Scr"))&&(i.textContent=t)):((i=document.getElementById("roundTSc1"))&&(i.textContent=0),(i=document.getElementById("roundTSc2"))&&(i.textContent=0),(i=document.getElementById("compT1Scr"))&&(i.textContent=0),(i=document.getElementById("compT2Scr"))&&(i.textContent=0))}function Jl(){if(ve.mode.teams&&Object.keys(ve.teamScores).length){teamScores.style.display="inline-block",specHeaderTm0.style.display="block",specHeaderTm1.style.display="block";var e="";for(var t in ve.teamScores){e+=ve.mode.flags?"<div class='tScore'><span class='tScoreT' id='tScoreV"+t+"'>"+(ve.teamScores[t]||0)+"</span><i class='material-icons tScoreF' id='tScoreF"+t+"'>flag</i><span class='tScoreM' id='tScoreM"+t+"'>"+(ve.teamFlags[t]||"AT BASE")+"</span></div>":"<div class='tScore'><div id='tScoreC"+t+"' class='tScoreC'></div><span class='tScoreT' id='tScoreV"+t+"'>"+(ve.teamScores[t]||0)+"</span></div>";var i=document.getElementById("specScoreTm"+(t-1));i&&(i.textContent=ve.teamScores[t])}teamScores.innerHTML=e}else teamScores.style.display="none";if(Ae){var n=document.getElementById((ve.mode.flags?"tScoreF":"tScoreC")+Ae.team);n&&(n.className=(ve.mode.flags?"material-icons tScoreF":"tScoreC")+" you")}}function Ql(e,t){ve.updateDomZone(e,t,0,t,[t],1);var i=t==(Ae&&Ae.team?Ae.team:window.spectating?1:0)?te.killFeed.ally:te.killFeed.enemy,n=u.alphabet[e||0]||"";Rc(-1,null,"<span style='color:"+i+"'>"+ae.fixStr("Zone "+n+" Captured")+"</span>",1)}function $l(e){for(var t=0;t<e.length;t+=6)ve.updateDomZone(e[t],e[t+1],e[t+2],e[t+3],e[t+4],e[t+5])}function ec(e,t){ve.teamFlags[e]=t;var i=document.getElementById("tScoreM"+e);i?i.textContent=t:Jl()}function tc(e,t,i,n){if(e=e||0,i||(vt+=e,re.animateText(re.scoreText,(vt>0?"+":"")+vt,100*we.tmp.scoreScale,.38,1100,100,0,(function(){vt=0}))),!t&&Ae&&(Ae.score=e+(i?0:Ae.score),myScoreVal.textContent=Ae.score,null!=n)){var s=!!ve.mode&&null!=ve.mode.randClassScr,a=Math.floor(e*(ve&&ve.isDoubleClassXP?2:1)*(s?ve.mode.randClassScr:1));Ae.classScores||=[],Ae.classScores[n||0]||=0,Ae.classScores[n||0]+=a}}function ic(e,t,i,n){i||he.play("pop_3",.3),e&&re.animateText(re.infoText,e,90,.3,2100,100,0,(function(){}),.6,10),t&&re.animateText(re.infoSub,t,n||28,.1,1500,100,0,(function(){}),.9,8)}function nc(e){e?Ae&&(Ae.checkPoint=null,Ae.checkPointList.length=0,Ae.checkPointData.length=0):(he.play("bhop_check",.9),we.tmp.showMedals&&re.animateText(re.checkText,S.t("popup.checkpoint"),75,.38,1100,100,0,null))}function sc(e,t,i,n,s,a,r){(Ee=ve.players.findById(e))&&ve.players.changePosition(Ee,t,i,n,s,a,r)}function ac(e){(Ee=document.getElementById("livesDisp"))&&(Ee.textContent=e)}window.callInStreak=function(e){e=parseInt(e)||0,ve.isSandbox?ze.players.checkStreak(Be,e):me.send("k"+e)};var rc=[];function oc(e,t,i,n){Ae&&(Ae.killsC+=n||1),_t+=n||1,cc(e),t&&-1!=t&&he.play(ae.isNumber(t)?u.networkSounds[t]:t),killsVal.textContent=i,streakVal.textContent=_t,kdVal.textContent=((i||0)/(parseInt(deathsVal.textContent)||1)).round(1).toString()}function lc(){cc([31,u.assistScore,0,1])}function cc(e,t){if((!ve||!ve.isComp)&&e){for(var i,n=0==rc.length,s=0;s<e.length;s+=4)if(i=e[s+3]||1,""!=e[s])if(we.tmp.classicMedals)rc.push([e[s],e[s+1],e[s+2],1]);else{var a=re.divs.find((t=>t&&t.medal&&t.index==e[s]));if(a)a.count+=i,a.life=u.medalAnim;else{var r=rc.find((t=>t&&t[0]==e[s]));r?r[3]+=i:rc.push([e[s],e[s+1],e[s+2],1])}}n&&hc(u.medalDelay)}}var dc=["Reward","Spent"];function hc(e){if(rc.length>0&&rc[0].length>0){if(!we.tmp.showMedals&&-1==dc.indexOf(rc[0][0]))return;if(!we.tmp.classicMedals&&ae.isNumber(rc[0][0])&&re.medalsList[rc[0][0]])re.animateMedalNew(re.medalPrefab,rc[0][0],rc[0][1]?(rc[0][1]>0?"+":"")+rc[0][1]:null,rc[0][2],rc[0][3],u.medalAnim,50,e,(function(){rc.splice(0,1),hc(0)}));else{var t=ae.isNumber(rc[0][0])&&re.medalsList[rc[0][0]]||rc[0][0];re.animateMedal(re.chalName,t,rc[0][1]?(rc[0][1]>0?"+":"")+rc[0][1]:null,130,.4,u.medalAnim,100,e,(function(){rc.splice(0,1),hc(0)}))}}}function uc(e,t,i,n){if((Ee=ve.players.findBySid(e))&&!i&&ve.players.updateProp(Ee,t,!0),Ee&&Ee.isYou){var s=re.propList.findIndex((e=>e.id=t));if(re.propWheelIndex=s>-1?s:0,null==n)return;null==n?Ac(-1,null,"modes.prophunt.limit",2):(Ee.propSwitches=n,Ac(-1,null,["modes.prophunt.left",ve.mode.propSwitches-Ee.propSwitches],2))}}function pc(e,t,i,n){(Ee=ve.players.findBySid(e))&&(Ee.propRot=t,Ee.propRotSaved=i,Ee.isYou&&Ac(-1,null,n?"modes.prophunt.rotation.reset":"modes.prophunt.rotation."+(t?"on":"off"),2))}function fc(e){re.interactProg.display=e&&e>0,re.interactProg.prog=e||0}function mc(e,t){re.interactMProg.display=e&&e>0||t,re.interactMProg.prog=e||0}function gc(e){bhHolder.children[0].style.width="calc(40px * "+Ee.headMlt+")",bhHolder.children[0].style.height="calc(40px * "+Ee.headMlt+")"}function vc(e,t,i){(Ee=ve.players.findBySid(e))&&(ve.players.updateHeadSize(Ee,t,i),Ee.isYou&&gc(Ee.headMlt),Ee.isYou&&Ss&&ve.players.updateHeadSize(Ss,t,i))}var yc=0,bc=0,wc=0;function xc(e,t,i,n,s,a){if((Ae||window.spectating)&&(Ee=null==t||null==t?Ae:ve.players.findBySid(t))){Ee.health=e,(Ee.health>Ee.maxHealth||a)&&(Ee.maxHealth=Ee.health,a&&(Ee.hpChase=Ee.health/Ee.maxHealth)),Wi(t,"HP",Math.ceil(Ee.health)),Wi(t,"MHP",Ee.maxHealth);var r=e/Ee.maxHealth;if(Ee==Ae&&Ae){bottomLeftHealth.textContent=Math.ceil(e);var o=Ae.config.segs;if(e!=yc||a||s||bc!=o){var l="";bc=o;for(var c=o*r,d=c,h=0;h<o;++h){var p=100*Math.max(0,Math.min(1,d)),f=c<=3?we.tmp.hudHealthLow:we.tmp.hudHealthHigh;l+="<div class='nHealthBarSeg'><div class='nHpBSeg' style='width:"+p+"%;background-color:"+f+";color:"+f+"'></div></div>",d-=1}bottomLeftHealthBar.innerHTML=l}we.tmp.useDamageOverlay&&(re.bloodCustom?(bloodDisplay.style.display=r<=.8?"block":"none",bloodDisplay.style.opacity=1-r/.8):re.bloodOpacity=1-r/.8),e<yc&&!s&&(null!=i&&null!=i&&function(e,t){if(re.showHits){for(var i=null,n=0;n<re.hits.length;++n)if(!re.hits[n].life){i=re.hits[n];break}i||(i={},re.hits.push(i)),i.life=u.hitLife,i.x=e,i.z=t}}(i,n),ve.now-wc>500&&(ce.shake(.02),he.play("takedmg_"+ae.randInt(0,1),.45)),wc=ve?ve.now:0),yc=e}}}var Sc,Mc,kc,_c=0;function Tc(e,t,i,n,s){for(s=s||0;chatList.childNodes.length>=u.chatListLength;){var a=chatList.childNodes[0];St[parseInt(a.id.replace("chatMsg_",""))].life=0,chatList.removeChild(a)}for(var r=null,o=null,l=0;l<St.length;++l)if(!St[l].life&&!St[l].elm){r=St[l],o=l;break}r||(r={},o=St.length,St.push(r)),r.elm&&r.elm.remove(),r.type=0,r.life=1e3*we.tmp.chatTimer,(Ke=document.createElement("div")).style.display=s==_c||-1==s?"":"none",Ke.setAttribute("data-tab",s),Ke.id="chatMsg_"+o,Ke.innerHTML="<div class='chatItem"+(t&&t.length?" "+t:"")+"'"+(i&&i.length?" style='"+i+"'":"")+">"+e+"</div><br>",r.elm=Ke,chatList.insertAdjacentElement("beforeend",r.elm),chatList.scrollTop=chatList.scrollHeight-chatList.clientHeight}function Cc(e,t,i){var n=document.getElementById("tradeChatList");if(n){for(;n.childNodes.length>=u.chatListLength;){var s=n.childNodes[0];n.removeChild(s)}(Sc=document.createElement("div")).innerHTML="<div class='tradeChatItem"+(t&&t.length?" "+t:"")+"'"+(i&&i.length?" style='"+i+"'":"")+">"+e+"</div><br>",n.insertAdjacentElement("beforeend",Sc),n.scrollTop=n.scrollHeight-n.clientHeight}}function Ic(e,t,i,n){Mc=.2==we.tmp.chatBGOp?"":"background-color: rgba(0, 0, 0, "+we.tmp.chatBGOp+")",kc=we.tmp.chatTextOutline?"chatTextOutline":"",(we.tmp.streamMode||we.tmp.chatFilter)&&Le&&(t=ae.isString(t)?Le.clean(t):""),we.tmp.streamMode&&(e=ae.scrambleS(e)),t=ae.fixStr(t),Cc(2==i?"<span class='chatMsg' style='color:"+(n||"#fc03ec")+"'>"+t+"</span>":ae.fixStr(e||"unknown")+": <span class='chatMsg'>"+t+"</span>",kc,Mc)}function Ac(e,t,i,n,s,a){Array.isArray(i)||(i=[i]),Rc(e,t,i=S.t(...i),n,s,a)}function Rc(e,t,i,n,s,a,r){null!=r&&Ft.includes(r)||(e=e||0,ve&&ve.mode&&ve.mode.teams||(e=-1),(n||we.tmp.showMessages)&&(Mc=.2==we.tmp.chatBGOp?"":"background-color: rgba(0, 0, 0, "+we.tmp.chatBGOp+")",kc=we.tmp.chatTextOutline?"chatTextOutline":"",(we.tmp.streamMode||we.tmp.chatFilter)&&Le&&3!=n&&(i=ae.isString(i)?Le.clean(i):""),we.tmp.streamMode&&(!n||n>=3)&&(t=ae.scrambleS(t)),3!=n&&(i=ae.fixStr(i)),1==n||4==n?Tc("<span class='chatMsg'>"+i+"</span>",kc,Mc,0,e):2==n?Tc("<span class='chatMsg' style='color:"+(s||"#fc03ec")+"'>"+i+"</span>",kc,Mc,0,e):3==n?Tc(ae.fixStr(t||"unknown")+" wants to trade <span class='tradeMsg' style='color:"+(s||"#5ce05a")+"' onclick='acceptRequest("+i+");this.innerHTML=`[Accepted]`;'>[Accept]</span>",kc,Mc,0,e):(t=ae.fixStr(t||"unknown"),a&&(t="<span style='color:"+a+"'>"+t+"</span>"),Tc(t+": <span class='chatMsg'>"+i+"</span>",kc,Mc,0,e))))}window.switchChat=function(e){playSelect(.1);var t="public"==e.getAttribute("data-tab")?0:1,i=!0;ve&&ve.mode&&ve.mode.teams||(t=1,i=!1),e.setAttribute("data-tab",t?"public":"groups"),t=~~!t,chatList.childNodes.forEach((e=>{var i=parseInt(e.getAttribute("data-tab"));e.style.display=i==t||-1==i?"":"none"})),i&&Rc(-1,null,(t?"Team":"Global")+" Text & Voice Chat",2),_c=t},window.welcome=function(e){Rc(-1,null,e,2)};var Pc,Ec=[5,-10,5,-7,2,5,0,2,6,6,7,5,5,0,-8,10,0,-6,7,-28,-28,5,5,-5,5,5,5,5];function Dc(e,t,i,n){var s=0==we.tmp.leaderType;if(s){for(;chatList.childNodes.length>=u.chatListLength;){var a=chatList.childNodes[0];St[parseInt(a.id.replace("chatMsg_",""))].life=0,chatList.removeChild(a)}Mc=.2==we.tmp.chatBGOp?"":"background-color: rgba(0, 0, 0, "+we.tmp.chatBGOp+")",kc=we.tmp.chatTextOutline?"chatTextOutline":""}else for(;killFeed.childNodes.length>=we.tmp.feedLimit;){a=killFeed.childNodes[0];St[parseInt(a.id.replace("feed_",""))].life=0,killFeed.removeChild(a)}(we.tmp.streamMode||we.tmp.chatFilter)&&Le&&(n=ae.isString(n)?Le.clean(n):"",i=ae.isString(i)?Le.clean(i):"");for(var r=null,o=null,l=0;l<St.length;++l)if(!St[l].life&&!St[l].elm){r=St[l],o=l;break}r||(r={},o=St.length,St.push(r)),r.elm&&r.elm.remove(),r.type=s?0:1,r.life=s?1e3*we.tmp.chatTimer:4e3;var c=s?"chat":"killfeed";if((Ke=document.createElement("div")).id=(s?"chatMsg_":"feed_")+o,null==e)Ke.innerHTML="<div class='"+c+"Item"+(kc&&kc.length&&s?" "+kc:"")+"'"+(Mc&&Mc.length&&s?" style='"+Mc+"'":"")+"><span class='"+c+"Msg'>"+n+"</span></div><br>";else{Pc=ve.weaponConfig[null==t.wId?e.loadout[e.loadoutIndex]:t.wId];var d="<div class='"+c+"Item"+(kc&&kc.length&&s?" "+kc:"")+"'"+(Mc&&Mc.length&&s?" style='"+Mc+"'":"")+">";if(d+="<span class='"+c+"Msg'>"+i,null!=t.stk)d+="<img class='streakChatIcon' src='"+ae.assetsUrl("/img/streaks/"+(1==t.stk&&t.pkg?"package/"+t.pkg:t.stk)+".png")+"' />";else if(t.fs)d+="<img class='fistChatIcon' src='"+ae.assetsUrl("/textures/weapons/icon_0.png")+"' />";else if(Pc.melee){var h=ve.store.skins[e.meleeIndex];t.pj&&(d+="<img class='thrownChatIcon' src='./img/thrown_0.png'>"),d+="<img style='opacity:0.7;margin-right:"+Ec[h&&h.id||0]+"px;' class='meleeChatIcon' src='"+ae.assetsUrl("/textures/melee/icon_"+(h&&h.id||0)+".png")+"' />"}else d+="<img style='opacity:0.7;margin-right:"+(Pc.icnPad||0)+"px;' class='weaponChatIcon' src='"+ae.assetsUrl("/textures/weapons/"+Pc.icon+".png")+"' />";t.wb&&(d+="<img class='headShotChatIcon' src='./img/wallbang_0.png'>"),t.hs&&(d+="<img class='headShotChatIcon' src='./img/headshot_0.png'>"),d+=n+"</span></div><br>",Ke.innerHTML=d}r.elm=Ke,(s?chatList:killFeed).insertAdjacentElement("beforeend",r.elm),s&&ci&&(chatList.scrollTop=chatList.scrollHeight-chatList.clientHeight)}function Oc(e,t,i,n,s,a){var r;(a||he.play(i?"crit_0":"hit_0",2.1),re.hitmarker.custom?pe.animateDiv(hitmarker,350,100,105):re.hitmarker.image?re.animateDiv(re.hitmarker,350,100,105):re.showHit(!!n),0==we.tmp.dmgType&&(t=Math.ceil(t)),t&&null!=e)&&(s?(r=ve.AI.findBySid(e))&&re.dmgVal(r.x,r.y,r.z,t,i,t<0):(r=ve.players.findBySid(e))&&re.dmgVal(r.x,r.y,r.z,t,i,t<0))}window.filterCM=function(e){return"undefined"==(e=(e=null===(e+="")?"":e)&&e.replace?e.replace(/[><]/g,""):e)&&(e=""),e&&e.replace&&(e=e.replace(/\u0027/g,"").replace(/\u0022/g,"")),e};var Lc=0;function jc(e){var t=ye.chatMessages[e];if(t&&t.length){if(Date.now()-Lc<=1500)return;Mo(t),Lc=Date.now()}}function zc(e,t,i,n,s,a,r){ve.createSpawnable(e,t,i,n,s,a,r,Ae)}function Bc(e){if(e){try{(e=JSON.parse(e)).objects.forEach((e=>{!1===e.col&&delete e.col,!1===e.l&&delete e.l})),e=JSON.stringify(e)}catch(e){}window.saveVal("mapToEdit",e),window.open("/editor.html","_blank")}}window.autoloadMod=function(e,t){var i=windows[3].listData[windows[3].tabIndex].list.find((t=>t.mod_id==e));if(i){var n="<div style='font-size:20px;color:#fff'>Autoload - "+i.mod_name+"?</div><div class='mapFndB' onclick='windows[3].autoload("+e+",1)' onmouseover='playTick(0.1)' style='background-color:#fc5a4e'>Add</div><div class='mapFndB' onclick='windows[3].autoload("+e+",0)' onmouseover='playTick(0.1)' style='margin-left:16px;background-color:#4ca9f5'>Remove</div>";genericPopup(n,"autoLoadPop")}},window.favoriteM=function(e,t,i){if(Re){var n=t.classList.contains("sel");t.classList.toggle("sel",!n),t.innerHTML=n?"<span class='material-icons' style='font-size:50px;color:#fff;'>star</span>":"<span class='material-icons' style='font-size:50px;color:#fff;'>star_border</span>",me.send("fvM",e,i,!!n)}},window.playMap=function(e){window.open("/?play="+e,"_self")},window.openEdit=function(e,t,i){var n="<div class='pubHed' style='text-align:left!important'>"+e+"<div style='float:right' class='editLink' onclick='grabMap(&quot;"+e+"&quot;)'>Open in Editor</div></div><div></div><div style='margin-top:25px;font-size:18px;color:#fff'>Funds <span style='float:right;color:rgba(255,255,255,0.5)'>"+ae.commaFormatNum(i||0)+" <span style='color:#fff'>KR</span></span></div><div style='font-size:18px;color:#fff'>KR Fee <span id='mapFeeVal' style='float:right;color:rgba(255,255,255,0.5)'>None</span></div><input type='number' oninput='calcMapFee(this)' id='mapFundsInp' placeholder='Enter KR Amount'></input><div class='mapFndB' onclick='chngMapFunds("+t+", 1)' onmouseover='playTick(0.1)' style='background-color:#fc5a4e'>Withdraw</div><div class='mapFndB' onclick='chngMapFunds("+t+", 0)' onmouseover='playTick(0.1)' style='margin-left:16px;background-color:#4ca9f5'>Deposit</div>";genericPopup(n,"editMapPop")},window.calcMapFee=function(e){if(e){var t=e.value||0;t<0&&(t=0),t&&(e.value=t);var i=Math.floor(.1*t);(e=document.getElementById("mapFeeVal"))&&(e.innerHTML=i?"<span style='color:rgba(255,255,255,0.7)'>-"+ae.commaFormatNum(i)+" <span style='color:#fff'>KR</span></span>":"None")}},window.chngMapFunds=function(e,t){var i=mapFundsInp.value||0;i&&(Bs("Please Wait..."),me.send("mfnds",e,t,parseInt(i)))},window.grabMap=function(e){Re&&me.send("edMp",e)},window.pressButton=function(e,t,i){if(ze&&ze.isSandbox&&ye.binds.spawnBot.isKey(e)&&!ze.isBotFTUE&&(ze.bots.add(null,!0,!1,{name:"Bot",dmgMlt:.01}),Rc(-1,null,"Spawned a Bot",2)),ze&&ze.isSandbox&&ye.binds.clearBots.isKey(e)&&!ze.isBotFTUE&&(ze.bots.reset(),Rc(-1,null,"Cleared Bots",2)),t&&ve&&ve.mainScript&&ve.mainScript.onKeyPress&&ve.mainScript.onKeyPress((t.key+"").toLowerCase(),t.which||t.keyCode||0),("aim"==i||ye.binds.aim.isKey(e))&&(ye.toggleADS[ce.getPlayerWeaponId(ve&&ve.tmpPlayer?ve.tmpPlayer:null)]&&ye.adsToggled?ye.adsToggled=!1:ye.adsToggled=!0),27==e&&(ye.UsePointerLock||(ye.toggle(!1),ye.resetKeys()),ee.toggleEndScreen()),xt&&Ae&&Ae.active&&-1==Ct.indexOf(xt)&&(ye.binds.kickVoteY.isKey(e)?(me.send("v2k",xt,1),Ct.push(xt)):ye.binds.kickVoteN.isKey(e)&&(me.send("v2k",xt),voteToKick.style.display="none",Ct.push(xt))),window.spectating){if(ye.binds.specMiniMap.isKey(e)&&setSetting("specMiniMap",!we.list.specMiniMap.val),ye.binds.specFree.isKey(e)&&spectMode(),ye.binds.specNames.isKey(e)&&(Ui=!Ui),ye.binds.specObj.isKey(e)){if(!ve.mode.objective||!Object.keys(ve.map.manager.spectateCams).length)return;Ni=!0,Bi=!1,spectMode(-1)}if(48==e&&Ni)(s=(n=ve.map.manager.spectateCams[-1])?n[0]:null)&&s.active&&(Vi(),ye.spect.target=s),Bi=!1;if(e>48&&e<58){var n,s=null;if(Ni)s=(n=ve.map.manager.spectateCams[ve.activeObjective||0])?n[e-49]:null;else(Ee=Go[e-49])&&(s=ve.players.list.find((e=>e.sid==Ee.player.sid)));s&&s.active&&(!s.isBot||s.isBot&&!ve.mode.botsAsAI)&&(Vi(),ye.spect.target=s,Bi=!1,Ni||me.send("fpSp",s.sid),Gi())}ye.binds.specFirst.isKey(e)&&(a=!Fi,ce.aimRecticle.opacity=0,aimRecticle.style.opacity=0,(Fi=a)?Hi=!0:(Hi=null,window.noMouseInp=!1),ye.setCamPosOff(),specIns.textContent=Fi?"Third Person":"First Person"),Rt&&(ye.binds.kpdVoteN.isKey(e)?Uc(-1):ye.binds.kpdVoteY.isKey(e)&&Uc(1)),ye.binds.kpdVision.isKey(e)&&Re&&(Re.isMod||Re.isDeputy)&&Rt&&(setSetting("kpdVision",!we.list.kpdVision.val),Rc(-1,null,"KPD Vision "+(we.tmp.kpdVision?"Enabled":"Disabled"),2)),ye.binds.specFocus.isKey(e)&&(ye.spect.target&&ye.spect.target.id!=Dt?focusPlayer(ye.spect.target.id,!0):clearFocus())}var a,r,o,l,c,d,h,u,p;if(ye.binds.chat.isKey(e)&&(window.tradeChatInput&&document.activeElement==window.tradeChatInput?(""!=window.tradeChatInput.value&&(me.send("tct",window.tradeChatInput.value),window.tradeChatInput.value=""),window.tradeChatInput.blur()):document.activeElement==chatInput?(""!=chatInput.value&&(Mo(chatInput.value),chatInput.value=""),chatInput.blur()):window.tradeChatInput&&document.activeElement!=window.tradeChatInput&&windows[36].active?window.tradeChatInput.focus():document.activeElement!=chatInput&&chatInput.focus()),"playerList"==i||ye.binds.playerList.isKey(e)){if("INPUT"==document.activeElement.tagName)return;if(null==endUI.style.display)return;ye.resetKeys(),ye.hasPointerlock&&ye.toggle(!1),setTimeout((()=>showWindow(23)),0)}if(("scoreBoard"==i||ye.binds.scoreBoard.isKey(e))&&Ul(1),Ae&&Ae.active){if(ye.binds.sprayWheel.isKey(e)&&(ve.isSandbox||Re&&Re.premiumT>0)?(re.propWheelClose(),re.sprayWheelOpen()):("spray"==i||ye.binds.spray.isKey(e))&&(ve.isSandbox?ze.players.spray(Ae):me.send("spry")),Ae&&ve&&ve.mode&&ve.mode.teamOptions&&"Prop"==ve.mode.teamOptions[Ae.team-1]){if(ye.binds.prop.isKey(e)&&(re.sprayWheelClose(),re.propWheelOpen()),ye.binds.propRand.isKey(e)){var f=re.pickRandomProp().id;Ae&&Ae.propID!=f&&me.send("prp",f)}ye.binds.propRot.isKey(e)&&me.send("prpR"),ye.binds.propRotR.isKey(e)&&me.send("prpR",!0);for(var m=0;m<ye.binds.taunt.length;m++)ye.binds.taunt[m].isKey(e)&&me.send("prpt",m)}ye.binds.confirm.isKey(e)&&ae.isNumber(Ae.pendingTrigger)&&!ee.hidden&&(me.send("cnfm"),Ae.pendingTrigger=null),ye.binds.confirm.isKey(e)&&ae.isNumber(Ae.pendingSpin)&&!ee.hidden&&(me.send("cnfm",2),Ae.pendingSpin=null),("interact"==i||ye.binds.interact.isKey(e))&&(ve.isSandbox?ze.players.interact(Be,Ae.lastInteractData.type,Ae.lastInteractData.id):me.send("int",Ae.lastInteractData.type,Ae.lastInteractData.id)),("interactSec"==i||ye.binds.secondaryInteract.isKey(e))&&(ve.isSandbox?ze.players.interact(Be,Ae.lastInteractData.type,Ae.lastInteractData.id,!0):me.send("intSec",Ae.lastInteractData.type,Ae.lastInteractData.id)),("drop"==i||ye.binds.drop.isKey(e))&&(ve.isSandbox?ze.players.dropWeapon(Be):me.send("drpw")),("inspect"==i||ye.binds.inspect.isKey(e))&&ve.players.wInspect(Ae);for(m=0;m<ye.binds.streak.length;m++)ye.binds.streak[m].isKey(e)&&window.callInStreak(m);("wepvis"==i||ye.binds.wepVis.isKey(e))&&(p=(u=Ae).loadout[u.loadoutIndex],ve.weaponConfig[p].melee?setSetting("showWeaponMel",!we.tmp.showWeaponMel):ve.weaponConfig[p].secondary?setSetting("showWeaponSec",!we.tmp.showWeaponSec):ve.weaponConfig[p].melee||ve.weaponConfig[p].secondary||setSetting("showWeapon",!we.tmp.showWeapon));for(m=0;m<ye.binds.toggle.length;m++)ye.binds.toggle[m].isKey(e)&&(d=m,h=void 0,h=ye.toggleSets[d],we.list[h]&&setSetting(h,!we.list[h].val));for(m=0;m<ye.binds.message.length;m++)ye.binds.message[m].isKey(e)&&jc(m);for(m=0;m<ye.binds.premium.length;m++)ye.binds.premium[m].isKey(e)&&me.send("prmA",m);ye.binds.hidePlayers.isKey(e)&&(ve.hidePlayers=!ve.hidePlayers),ve.isSandbox&&!ze.isBotFTUE&&(ye.binds.noclipSB.isKey(e)&&gl(!Be.noclip),ye.binds.godModeSB.isKey(e)&&(l=!Be.godMode,(c=ve.isSandbox?Be:Ae)&&(c.godMode=l,Ae.godMode=l,Ac(-1,null,["commands.god."+(c.godMode?"on":"off")],2))),ye.binds.smiteSB.isKey(e)&&(r=!Be.smite,(o=ve.isSandbox?Be:Ae)&&(o.smite=r,Ae.smite=r,Ac(-1,null,["commands.smite."+(o.godMode?"on":"off")],2))),ye.binds.unlimitedSB.isKey(e)&&wl(!Be.unlimitedAmmo),ye.binds.killSB.isKey(e)&&ze.players.kill(Be,null,null,!0))}},window.releaseButton=function(e,t,i){if(t&&ve&&ve.mainScript&&ve.mainScript.onKeyUp&&ve.mainScript.onKeyUp((t.key+"").toLowerCase(),t.which||t.keyCode||0),("scoreboard"==i||ye.binds.scoreBoard.isKey(e))&&Ul(0),ye.binds.sprayWheel.isKey(e)&&(ve.isSandbox||Re&&Re.premiumT>0)&&(ve.isSandbox?ze.players.spray(Be,re.getSprayIndex().index):me.send("spry",re.getSprayIndex().index),re.sprayWheelClose()),ye.binds.prop.isKey(e)&&Ae&&ve&&ve.mode&&ve.mode.teamOptions&&"Prop"==ve.mode.teamOptions[Ae.team-1]){var n=re.getPropIndex().id;Ae&&Ae.propID!=n&&me.send("prp",n),re.propWheelClose()}"aim"!=i&&!ye.binds.aim.isKey(e)||ye.toggleADS[ce.getPlayerWeaponId(ve&&ve.tmpPlayer?ve.tmpPlayer:null)]||(ye.adsToggled=!1)};var Nc=0,Fc=!1;function Hc(){Fc=!1,Uc(0)}function Uc(e){if(!Fc){0==e&&(Nc=0),Nc+=e;var t=ve.players.list.find((e=>e.id==Rt.sus)),i=t?t.name:"Suspect";-1==Nc?(specKPDTxt.innerHTML="Case submitted!<div>Suspect Not Tagged</div>",specKRHid.style.display="none",me.send("rkpd",0),Fc=!0):0==Nc?(specKPDTxt.innerHTML="Is "+i+" hacking?",specKRHid.style.display="block"):1==Nc?(specKPDTxt.innerHTML="Are you 100% sure?",specKRHid.style.display="block"):2==Nc&&(specKPDTxt.innerHTML="Case submitted!<div>Suspect Tagged</div>"+(t?"<div>Profile URL Copied to Clipboard</div>":""),specKRHid.style.display="none",t&&ae.copyToClipboard("https://krunker.io/social.html?p=profile&q="+i),me.send("rkpd",1),Fc=!0)}}window.eventPopup=function(){let e=ae.getActiveEvent(ve.eventIndex);if(e){var t=new Date(e.start).getTime()-Date.now(),i=new Date(e.end).getTime()-Date.now(),n="<div class='eventPopHeader' style='background-image:url("+ae.assetsUrl("/img/events/event_"+e.id+".png")+");'><div class='eventPopName'>"+e.name+"</div></div>",s=[],a="";if(e.rewards&&e.rewards.skins){a+="<div class='eventPopSkinsH'>Earn these skins from completing challenges</div>";for(var r,o=0;o<12;++o)if(r=ve.store.skins[e.rewards.skins[o]]){var l=ve.store.rarities[r.rarity].color;r.type==Te.SPRAY&&r.frames&&-1==s.indexOf(r.frames)&&s.push(r.frames),a+="<div class='bundlItmC' style='background:url("+r.thumbnail+");"+(r.type==Te.SPRAY&&r.frames?"background-size: cover !important;"+ae.getFrameAnim(r,"sprayAnmB"):"background-size: contain;background-position: center;")+"border: 3px solid "+l+";' onclick='viewItem("+e.rewards.skins[o]+")'></div>"}else a+="<div class='bundlItmC' style='border: 3px solid #707070;'></div>"}if(s.length){n+="<style>";for(o=0;o<s.length;o++)n+="@keyframes sprayAnmB"+s[o]+" {100%{background-position:-"+81*s[o]+"px}}";n+="</style>"}n+="<div class='eventPopInfoH'><div class='eventPopInfo'>"+e.longDesc+"</div>"+a+"<div class='eventPopEnd'>"+(t>0?"Starts":"Ends")+" in "+ae.getReadableTime(t>0?t:i)+"</div></div>"+(e.noChallenges?"":"<div class='eventPopChallBtn' onclick='playSelect();logBtnFRVR(`challenges`);clearPops();windows[32].openHome()'>View Challenges</div>")+"</div>",genericPopup(n,"eventPop")}},AudioParam.prototype.setTargetAtTime=new Proxy(AudioParam.prototype.setTargetAtTime,{apply:function(e,t,[i,n,s]){isFinite(i)&&e.apply(t,[i,n,s])}}),AudioParam.prototype.setValueAtTime=new Proxy(AudioParam.prototype.setValueAtTime,{apply:function(e,t,[i,n]){isFinite(i)&&e.apply(t,[i,n])}});var Vc=!0,Gc=!1,Wc=!1;function qc(){if(!A){if(we.tmp.updateRate||zt){var e=performance.now();if(e-qe<1e3/(zt?1:we.tmp.updateRate))return void requestAnimFrame(qc);qe=e}if(Ue=Date.now(),Ve=Ue-We,Ve=Math.min(Ve,u.dltMx),Ge=Ve,We=Ue,function(){if(we.tmp.showFPS){for(;pn.length>0&&pn[0]<=Ue-1e3;)pn.shift();pn.push(Ue),fn=pn.length,fn&&Ue-mn>=we.tmp.fpsRate&&(mn=Ue,ingameFPS.textContent=fn,"none"!=menuHolder.style.display&&(menuFPS.textContent=fn))}}(),ye.updateMouseInp(),ye.freeMouse||ye.rotateCam(ce.shakeX+ce.swayX,ce.shakeY+ce.swayY,0),TWEEN.update(),Ye>0&&(Ye-=Ve)<=0&&(Ye=0),he.rate=ve.config.deltaMlt,null!=Ye&&"block"!=spinUI.style.display&&(Ve*=Ye/u.endAnim,he.rate=ve.config.deltaMlt*(Ye/u.endAnim)),ve.detachedCam||Ae||window.spectating||Et||(gt+=1e-4*Ve,gt%=2*Math.PI,ye.rotateCam(gt,0,0)),function(e){if("block"==spinUI.style.display&&(ga.width=ga.clientWidth,ga.height=ga.clientHeight,spinItemCanvas.style.width=2.1*ga.clientWidth/2+"px",spinItemCanvas.style.height=2.1*ga.clientWidth/2+"px",Ua.setSize(2.1*ga.clientWidth/2,2.1*ga.clientWidth/2),ga.width>0)){_a<1&&(_a+=.008*e)>=1&&(_a=1),La<Sa&&((La+=.4*e)>=Sa&&(La=Sa),ma.free||(za=!0),spinItem.style.display="block",spinItemName.style.display="inline-block",spinUIBtns.style.display="inline-block",spinEquipBtn.style.display="inline-block",spinNextBtn.style.display=Ra<Aa.length?"inline-block":"none");for(let e=0;e<Ca.length;e++)Ca[e]!=Ta[e]&&(Ca[e]+=(Ta[e]-Ca[e])*Ia[e]*.024,(Fa-=Math.abs(Ta[e]-Ca[e])*Ia[e]*.024)<=0&&(Fa+=Math.PI/1.5,he.play("tick_0",.2)),Math.abs(Ta[e]-Ca[e])<=.003/Ia[e]&&(Ca[e]=Ta[e],or()));var t=1-(Sa?La/Sa:0);va.translate(2,2);var i=ga.width/2*ya*_a;spinButton.style.opacity=t;var n=.3*i*(1-t);spinButton.style.width=2*i*ba*.8+n+"px",spinButton.style.height=2*i*ba*.8+n+"px",spinText.style.fontSize=2*i*ba*.15+n+"px",spinCost.style.fontSize=2*i*ba*.08+n+"px",va.fillStyle="#2b2b2b",va.beginPath(),va.arc(ga.width/2,ga.height/2,i,0,2*Math.PI),va.closePath(),va.fill();var s=0;if(va.save(1),va.translate(ga.width/2,ga.height/2),Sa){for(var a=0,r=0;r<ve.store.rarities.length;r++){if(wa.rarity==r){a+=ma.rarities[r]/2;break}a+=ma.rarities[r]}a/=100,a=2*Math.PI*a*(La/Sa)%(2*Math.PI),va.rotate(a-Math.PI*(La/Sa))}for(r=0;r<ve.store.rarities.length;r++){Ee=ve.store.rarities[r],va.fillStyle=Ee.color,va.beginPath();var o=ma.rarities[r];Sa&&(wa.rarity==r?(ce.rarityAnim&&Ee.animate&&(va.fillStyle=ae.hexFromHue(Math.round(lr)),(lr+=.3*e)>=360&&(lr=0)),o+=La):o-=La*(ma.rarities[r]/Sa)),o>0&&(va.moveTo(0,0),va.arc(0,0,.95*i,s,s+2*Math.PI*(o/100),!1),va.lineTo(0,0),va.fill()),s+=2*Math.PI*(o/100)}va.restore(-1),va.fillStyle="#F44336",va.shadowColor="black",va.shadowBlur=20;for(let e=0;e<Ca.length;e++)va.save(1),va.translate(ga.width/2,ga.height/2),va.rotate(Ca[e]),va.beginPath(),va.moveTo(0,i*ba*-1.2*t),va.lineTo(i*ba*.7*t,0),va.lineTo(-i*ba*.7*t,0),va.closePath(),va.fill(),va.restore(-1);if(va.fillStyle="#2b2b2b",va.beginPath(),va.arc(ga.width/2,ga.height/2,i*ba,0,2*Math.PI),va.closePath(),va.fill(),"block"==spinItem.style.display&&ua){var l=1-Math.abs(Ha.position.x-Ma)/(ka-Ma);spinItemName.style.opacity=l,spinItemName.style.marginTop=.6*i+"px",spinItemName.style.fontSize=i/6.5*l+"px",!ma.kr&&spinItemName.children[0]&&(spinItemName.children[0].style.fontSize=i/12*l+"px"),!ma.kr&&spinItemName.children[1]&&(spinItemName.children[1].style.fontSize=i/12*l+"px"),spinItemName.style.padding=i/20*l+"px",spinItemName.style.paddingLeft=i/1.4*l+"px",spinItemName.style.paddingRight=i/1.4*l+"px",Ha.position.x!=Ma&&(Ha.position.x-=.24*(Ha.position.x-Ma),Math.abs(Ma-Ha.position.x)<=.05&&(Ha.position.x=Ma),Ha.lookAt(ua.position)),Na+=.0018*e,pa.position.y=pa.orgYP+.55*Math.sin(Na),pa.rotation.x=pa.orgXR+-.042*Math.sin(.9*Na),Ua.render(ua,Ha)}}}(Ve),Ze&&Ze--,"none"!=menuHolder.style.display&&Je&&Ze<=0&&(Qe||(classPreviewCanvas.style.opacity=1,Qe=!0),xs&&classPreviewCanvas.offsetWidth>0&&classPreviewCanvas.offsetHeight>0&&(ve.players.playerStep(Ss,.015*Ve,!0),Ss.idleAnim+=u.idleAnimS*Ve,ve.players.updateMsh(Ss,!0),ve.players.itemEffects(Ss,xs,Ve),_s.render(xs,ks),y=Ve,"0px"==phoneImg.style.marginBottom&&((Xs-=y)<=0&&!Ws&&(Xs=2200,he.play("ring_0",.2)),Ws&&(Ys-=y)<=0&&(Ks=Ks?0:1,phoneImg.src="./img/phone_"+(Ks?"r":"b")+".png",Ys=ae.randInt(100,300))),"block"==policePop.style.display&&(qs-=y)<=0&&(qs=ae.randInt(15e3,3e4),Kc(Hs[ae.randInt(0,Hs.length-1)],3400,!0))),On(),"block"==newsBody.style.display&&(cd-=Ve)<=0&&(cd=5e3,++ld>=5&&(ld=0),hd(),newsBody.scroll({top:newsBody.scrollHeight/5*ld,behavior:"smooth"})),null!=oa&&windows[oa-1]&&windows[oa-1].updSubTab&&windows[oa-1].updSubTab(Ve)),ye.update(Ve*ve.config.deltaMlt),Ae&&Ae.active&&!window.locked){var t=!!ye.camOffset;ve.detachedCam||(ve.config.thirdPerson?(ce.camera.position.set(u.thrdPX,u.thrdPY,u.thrdPZ),t=!0):ve.mode&&ve.mode.teamOptions&&"Prop"==ve.mode.teamOptions[Ae.team-1]?(mt+=5*ye.scrollDelta,mt=Math.min(Math.max(10,mt),100),ce.camera.position.set(0,0,mt),t=!0):ce.camera.position.set(0,0,0));var i=ye.xDr;if(ye.camOffset&&(ce.camera.position.x+=Ae.config.camOffX,ce.camera.position.y+=Ae.config.camOffY,ce.camera.position.z+=Ae.config.camOffZ),t&&!ve.detachedCam&&ce.camera.lookAt(Ae.x,Ae.y+Ae.height-u.cameraHeight,Ae.z),ye.freeMouse){ce.camera.getWorldPosition(it.origin),it.direction.set(ye.mouseX/window.innerWidth*2-1,-ye.mouseY/window.innerHeight*2+1,.5),it.direction.unproject(ce.camera),it.direction.sub(it.origin).normalize(),ye.camType.isTop?(lt.normal.set(0,1,0),it.origin.y-=Ae.y+Ae.height,it.direction.y=Math.min(it.direction.y,-1e-4)):ye.camType.isSideX?(lt.normal.set(0,0,1),it.origin.z-=Ae.z,it.direction.z=Math.min(it.direction.z,-1e-4)):ye.camType.isSideZ&&(lt.normal.set(1,0,0),it.origin.x-=Ae.x,it.direction.x=Math.max(it.direction.x,1e-4));var n=ot;if(it.intersectPlane(lt,n),ye.camType.isTop)i=-(Ne=Math.atan2(n.z-Ae.z,n.x-Ae.x))-Math.PI/2,ye.yDr=0;else if(ye.camType.isSideX||ye.camType.isSideZ){Ne=Math.atan2(n.y-(Ae.y+Ae.height),ye.camType.isSideX?n.x-Ae.x:n.z-Ae.z);var s=Math.abs(Ne)<Math.PI/2;ye.camType.isSideX?i=(s?-1:1)*Math.PI/2:ye.camType.isSideZ&&(i=(s?1:0)*Math.PI),s||(Ne=-Ne+Math.PI*Math.sign(Ne)),ye.yDr=Ne}}Ed>0&&(Ed-=Ve)<=0&&(Ed=-1,jumpScare(Pd-1)),bt+=Ve,ut+=Ve;var a=we.tmp.netRate;if(ae.roundToClos(bt,1e3/a)>=1e3/a){ye.skipScroll=!1,Oe=[ye.getISN(),Math.round(bt*ve.config.deltaMlt),Math.round(1e3*ye.yDr.round(3)),Math.round(1e3*i.round(3)),ve.moveLock?-1:u.movDirs.indexOf(ye.moveDir),ye.isPressed("shoot",null,"shoot")?1:0,ye.adsToggled?1:0,!ve.moveLock&&ye.isPressed("jump",null,"jump")?1:0,ye.isPressed("reload",null,"reload")?1:0,ye.isPressed("crouch",null,"crouch")?1:0,ye.scrollToSwap?ye.scrollDelta*ye.getSetByWep(null,"scroll"):0,ye.wSwap,1-ye.speedLmt.round(1),ye.isPressed("resetLast")?2:ye.isPressed("reset")?1:0,ye.isPressed("interact",null,"interact")?1:0],bt=0,ye.scrollDelta&&(ye.skipScroll=ye.scrollToSwap,ye.scrollToSwap||ye.fakeKey(2e4,1)),ye.scrollDelta=0,ye.wSwap=0,ve.noPred||ve.dontSendInputs||(ye.tmpInpts[ye.tmpInpts._push?"_push":"push"](Oe),Ae.procInputs(Oe,ve,!1,ve.moveLock),ve.isSandbox&&ze&&Be.procInputs(Oe,ze,!1,ze.moveLock)),ve.isSandbox||Ye||ve.dontSendInputs||function(e){null===dt&&(dt=e[0]);if(e.syncTime){st||={};var t=0,i=ve.now-1e3/ve.sendFrequency;ve.lastSync&&(t=((i-ve.newSync)/(ve.lastSync-ve.newSync)).round(2)),st[nt.length]=ve.servTim,t&&(st[nt.length+"p"]=t)}nt.push(e[1]);for(var n=2;n<4;++n){if(at.length<2)at.push(e[n]);else{var s=e[n]-(et[n]||0);at.push(s)}et[n]=e[n]}for(n=4;n<e.length;++n)null!=et[n]&&et[n]==e[n]||(et[n]=e[n],$e[pt+"-"+n]=e[n],ht=!0);pt++,ut>=ve.tickRate&&(ut=0,Ue,function(){if(!ve.isSandbox&&Ae&&Ae.active){ht||($e=0);var e="",t=0,i=0;Ee="";for(var n=0;n<nt.length;++n)if(e+=Ee=nt[n].toString(),t=Ee.length,i){if(i!=t){i=0,e=nt;break}}else i=t;if(at&&at.length>2){var s=0;for(n=2;n<at.length;){if(0!=at[n]||0!=at[n+1]){s=0;break}s++,n+=2}s&&(at.length=2)}var a=!0;for(n=0;n<at.length;++n)if(at[n]!=rt[n]){a=!1;break}var r=[tt,dt,e,i];(st||$e||at.length&&!a)&&r.push(a?0:at),(st||$e)&&r.push($e),st&&r.push(st),me.send("q",...r),$e={},rt=[...at],at.length=0,nt.length=0,st=null,ht=!1,tt=0,dt=null,pt=0}}())}(Oe),ve.detachedCam||(ye.freeMouse||ye.rotateCam(ce.shakeX+ce.swayX,ce.shakeY+ce.swayY+Ae.recoilAnimY*u.recoilMlt+.1*Ae.landBobY,0),ye.moveCam(Ae.x,Ae.y+Ae.height-u.cameraHeight,Ae.z));var r=0;if(Ae.config.lockCamP){null==Ae.camChase&&(Ae.camChase=Ae.xDire);var o=2*Math.PI,l=(Ae.xDire-Ae.camChase)%o,c=(2*l%o-l)*(Ae.config.lockCamP*(Ve/100));Ae.camChase+=c,i=Ae.camChase,ye.object.rotation.y=i,r=i}if(Ae.config.lckCmYR&&(ye.pchObjc.rotation.x=-Math.PI/2*Ae.config.lckCmYR),Ae.config.yCmLim){o=Ae.config.yCmLim*Math.PI;var d=-Math.PI/2+o;ye.pchObjc.rotation.x+Math.PI/2>=o&&(ye.pchObjc.rotation.x=d)}ee.updateCrosshair(Math.max(58,.85*Ae.spread*ei),(ve.config.thirdPerson||ye.camOffset)&(!Ae.weapon.scope||Ae.currentSkin.noScope)?1:Ae.aimVal*(Ae.inspecting?0:1)*(Ae.weapon&&Ae.weapon.noCross?0:1)*(ve.mode&&ve.mode.teamOptions&&"Prop"==ve.mode.teamOptions[Ae.team-1]?0:1)*(Ae.reloadTimer>0?0:1)*(ye.freeMouse?0:1)),fc(Ae.interProg||0),mc(Ae.interMProg||0,!!Ae.overCharged),Howler.pos(Ae.x,Ae.y+Ae.height-u.cameraHeight,Ae.z),Howler.orientation(Math.sin(ye.xDr+r+Math.PI),ye.yDr,Math.cos(ye.xDr+r+Math.PI))}else 0==(Ae.config.movSch||0)&&1==Ae.config.trnSp&&(Ae.yDire=ye.yDr,Ae.xDire=i,ve.players.updateMsh(Ae)),ve.detachedCam||(ye.freeMouse||ye.rotateCam(ce.shakeX+ce.swayX,ce.shakeY+ce.swayY+Ae.recoilAnimY*u.recoilMlt+.1*Ae.landBobY,0),ye.moveCam(Ae.x,Ae.y+Ae.height-u.cameraHeight,Ae.z));let e=we.tmp.wallLean?.15*we.tmp.wallLeanMlt:0;if(!ve.detachedCam&&e>0){let t=ye.object.rotation,i=30;if(Ae.onWall&&Ae.wallJump&&Ae.crouchVal){let n=ye.getWorldDirection(),s=3==Ae.onWall||4==Ae.onWall;t.z+=Ve*(((s?-e:e)*(Ae.onWall%2?-1:1)*n[s?"x":"z"]-t.z)/i)}else t.z+=(0-t.z)/40,Math.abs(0-t.z)<1e-4&&(t.z=0)}}else if(window.spectating){if(ye.spect.target)if(window.noMouseInp=!1,ye.spect.target.isPlayer&&ve.players&&ve.players.list&&ve.players.list.indexOf(ye.spect.target)<0)spectMode();else if(Ni){if(window.noMouseInp=!0,!Bi){Bi=!0,ye.object.rotation.x=ye.spect.target.yR,ye.object.rotation.y=ye.spect.target.xR,ye.object.rotation.z=ye.spect.target.zR;var h=ye.spect.target;ye.object.position.set(h.x,h.y,h.z),ce.camera.position.set(0,0,0),ce.camera.updateProjectionMatrix(),ce.updateFrustum()}}else if(ye.spect.target.active)if(Hi&&Fi){window.noMouseInp=!0,re.fakeCross=!0;var f=(h=ye.spect.target).y+ye.spect.target.height-u.cameraHeight;ye.spect.target.isPlayer&&(ji.crouch||(ji.crouch=0),ji.crouch<ye.spect.target.crouchVal?(ji.crouch+=.0085*Ve,ji.crouch>=ye.spect.target.crouchVal&&(ji.crouch=ye.spect.target.crouchVal)):ji.crouch>ye.spect.target.crouchVal&&(ji.crouch-=.0085*Ve,ji.crouch<=ye.spect.target.crouchVal&&(ji.crouch=ye.spect.target.crouchVal)),f-=ji.crouch*u.crouchDst,ye.spect.target.weapon&&(null==ji.aim&&(ji.aim=1),ji.aim<ye.spect.target.aimVal?(ji.aim+=.009*Ve,ji.aim>=ye.spect.target.aimVal&&(ji.aim=ye.spect.target.aimVal)):ji.aim>ye.spect.target.aimVal&&(ji.aim-=.009*Ve,ji.aim<=ye.spect.target.aimVal&&(ji.aim=ye.spect.target.aimVal)),ce.zoom(1+(ye.spect.target.weapon.zoom-1)*(1-ji.aim)),ye.spect.target.weapon.scope&&(ce.aimRecticle.custom?aimRecticle.style.opacity=(1-ye.spect.target.aimVal)*ce.aimRecticle.opacMlt:ce.aimRecticle.opacity=1-ye.spect.target.aimVal)));h=ye.spect.target;ye.moveCam(h.x,f,h.z),ye.object.rotation.y=ye.spect.target.xDire,ye.pchObjc.rotation.x=ye.spect.target.yDire,ye.spect.target.objInstances&&(ye.spect.target.objInstances.visible=!1)}else ye.followCam(ye.spect.target,Ve),ye.spect.target.objInstances&&(ye.spect.target.objInstances.visible=!0);else spectMode();ye.spect.target||ve&&ve.mode&&ve.mode.noFreeCam||ye.freeCam(Ve),ye.object&&ye.object.position&&(Howler.pos(ye.object.position.x,ye.object.position.y,ye.object.position.z),Howler.orientation(Math.sin(ye.xDr+Math.PI),ye.yDr,Math.cos(ye.xDr+Math.PI))),Yo()}ve.update(Ve,Ue,Ae);for(var m=!1,g=0;g<ve.map.manager.envZones.length;++g)if(Ee=ve.map.manager.envZones[g],ae.pointInBox3D(ye.object.position.x,ye.object.position.y,ye.object.position.z,Ee)){ce.updateGameEnvironment(g),m=!0;break}if(m||-2==ce.lastEnvId&&ve.eventIndex||ce.updateGameEnvironment(-1),function(e){for(var t=0;t<St.length;t++)St[t].life&&(St[t].life-=e,St[t].life<=0&&(St[t].elm&&St[t].elm.remove(),St[t].elm=null,St[t].life=0))}(Ve),function(e){let t=0;for(var i=0;i<nr.length;i++)nr[i].life&&(nr[i].life-=e,nr[i].life<=0?(nr[i].elm&&nr[i].elm.remove(),nr[i].elm=null,nr[i].life=0):t++);t<=0&&(skinRewardHolder.style.display="none")}(Ve),pe.update(Ve),"block"==imgFlash.style.display&&(imgFlash.style.opacity-=.002*Ve,imgFlash.style.opacity<=0&&(imgFlash.style.opacity=0,imgFlash.style.display="none")),re.render(si,ve,ye,ce,Ae,Ve,Ge,Ji),ve&&ve.mainScript&&ve.mainScript.render&&(re.ctx.save(1),re.ctx.scale(re.scale,re.scale),ve.mainScript.render(Ve),re.ctx.restore(-1)),window.spectating||"block"!=menuHolder.style.display||!u.isProd||ct||Re&&Re.developer||ve.config||ve&&ve.mode&&(ve.mode.noKick||ve.mode.noClientKick)||(ye.idleTimer+=Ve,ye.idleTimer>=u.kickTimer&&ed(S.t("player.inactive"),"000005")),"block"==menuHider.style.display&&td&&Ue-td>=u.streamRotation&&sd(),Ue-nl>=200&&(nl=Ue,function(){var e=window.spectating&&ye.spect.target?ye.spect.target.team:ft;if(Ae&&Ae.active||window.spectating){for(var t=0;t<ve.players.list.length;++t)if((Ee=ve.players.list[t]).active&&Ee.objInstances&&Ee!=Ae)if(Ee.cnBSeen=(!ve.hidePlayers||Ee.isBot)&&(!window.spectating||Ee!=ye.spect.target),Ee.latestData){if(window.spectating&&(!window.spectating||Ui)||e&&e==Ee.team&&!ve.mode.fakeNames||e&&e!=Ee.team&&ve.mode.teamSee&&ve.mode.teamSee[0]==e&&ve.mode.teamSee[1]==Ee.team||!ve.config.nameTags&&!ve.mode.hideNames&&null==ve.canSee(window.spectating&&ye.spect.target?ye.spect.target:Ae,Ee.x,Ee.y,Ee.z)?ve.config.nameTagsFR&&e&&e==Ee.team&&(Ee.cnBSeen=!1):Ee.cnBSeen=!1,(1==we.tmp.hideNames&&(!ve.mode.teams||e&&e!=Ee.team)||2==we.tmp.hideNames&&ft&&ft==Ee.team||3==we.tmp.hideNames||ve.mode.hideNames)&&(Ee.cnBSeen=!1),ve.mode.nameDist){var i=ce.camera.getWorldPosition(ce.targetVector);ae.getD3D(i.x,i.y,i.z,Ee.x,Ee.y,Ee.z)>ve.mode.nameDist&&(Ee.cnBSeen=!1)}var n=ce.fpsCamera.getWorldPosition(ce.targetVector);ve.players.toggleLOD(Ee,!!window.spectating||null==ve.canSee(n,Ee.x,Ee.y+Ee.height+1,Ee.z,15,!0))}else Ee.cnBSeen=!1,ve.players.toggleLOD(Ee,!!window.spectating);for(t=0;t<ve.AI.ais.length;++t)(Ee=ve.AI.ais[t]).active&&(Ee.canBSeen=!0,window.spectating||e&&e==Ee.team&&!ve.mode.fakeNames||e&&e!=Ee.team&&ve.mode.teamSee&&ve.mode.teamSee[0]==e&&ve.mode.teamSee[1]==Ee.team||!ve.config.nameTags&&!ve.mode.hideNames&&null==ve.canSee(Ae,Ee.x,Ee.y,Ee.z,0,0,!0)?ve.config.nameTagsFR&&e&&e==Ee.team&&(Ee.canBSeen=!1):Ee.canBSeen=!1,(1==we.tmp.hideNames&&(!ve.mode.teams||e&&e!=Ee.team)||2==we.tmp.hideNames&&e&&e==Ee.team||3==we.tmp.hideNames||ve.mode.hideNames)&&(Ee.canBSeen=!1))}}()),!Gc&&!u.isProd){var v=document.getElementById("onetrust-accept-btn-handler");if(v)v.click(),Gc=!0;else if(window.OneTrust&&!window.OneTrust.IsAlertBoxClosed())try{window.OneTrust.Close(),Gc=!0}catch(e){Gc=!1}}!ye.isMobile&&!p()||Wc||(Wc=!0,ae.moveElement(interactMsg,"mobileUI"),ae.moveElement(killStreakHolder,"mobileUI")),Vc?(ye.keys&&ye.isPressed("shoot",null,"shoot")&&we.tmp.aimFreezeFix&&(Vc=!1),requestAnimFrame(qc)):(requestAnimFrameF(qc,Ue),Vc=!0)}var y}var Yc;function Kc(e,t,i){e&&(i&&he.play(["sigh_0","sigh_1"][ae.randInt(0,1)],.2),txtBubble.innerHTML=e,bubbleContainer.style.transform="scale(1.0)",Yc&&clearTimeout(Yc),Yc=setTimeout((function(){bubbleContainer.style.transform="scale(0.0)"}),t||2500))}function Xc(e){if(U=null,V=null,G=null,W=null,null,null,null!=ve.mode){if(ee.setShowSpect(ve.config.allowSpect),ee.setShowSelTeam(ve.config.selTeam),ve.config.selTeam&&D&&ae.isNumber(D))document.getElementById("selectT")&&2==D&&selectT.click(),D=null;ve.resetClasses(),Ye=null,ye.toggle(!1);var t=ve.map.maps[e],i=t.camPos?t.camPos:[0,0,0];Et=!!i[3],ce.clearSprays(),Ae=null,re.sprayWheelClose(),re.propWheelClose(),re.showObjective=!!ve.mode.objective&&ve.map.manager.objectives.length>0,killStreakHolder.innerHTML="",krTagHolder.innerHTML="",perkHolder.innerHTML="",zPerksHolder.innerHTML="",re.bloodOpacity=0,bloodDisplay.style.display="none",killsVal.textContent=0,kdVal.textContent="0.0",deathsVal.textContent=0,myScoreVal.textContent=0,_t=0,streakVal.textContent=_t,vt=0,Ct.length=0,xt=!1,It=!1,voteToKick.style.display="none",voteToForfeit.style.display="none",Ni=!1,Bi=!1,Vi(),ji={},Gi(),Li={},updateCamMouse(0),Is(),he.stopALL()}}function Zc(e,t,i,n){console.trace("Error message",e),instructionHolder.style.display="block",menuHolder.style.display="none";var s="GAME UPDATING"==e||"NoServersMatchQuery"==n,a=!!e&&!!e.toLowerCase().includes("disconnected")||"disconnected"==n;if(ee.isUpdating=s,Bd("disconnect"),s){var r=ae.randInt(0,u.updateBgs.length-1),o=u.updateBgs[r];instructions.style.display="none",instructionsUpdate.style.display="block",instructionsUpdateBG.style.backgroundImage='url("'+ae.assetsUrl("img/menu-bg/"+o.id+".png")+'")',instructionsUpdateBG.style.display="block",instructionsUpdateCredit.innerHTML="Art By "+o.creator,instructionsUpdateCredit.setAttribute("onclick","openURL('"+o.link+"')"),instructionsUpdateCredit.style.display="block",instructionsUpdate.innerHTML="<div class='instructionsHeader'>Game Updating</div><iframe id='updatingStream' style='width:635px;height:360px;border:none;margin-top:10px;display:none'></iframe><iframe id='updatingStreamChat' style='width:270px;height:360px;border:none;margin-top:10px;display:none' frameborder='0' scrolling='no'></iframe><div style='margin-top:10px;font-size:15px;color:rgba(255,255,255,0.4)'>While you wait <a target='_blank' href='https://www.twitch.tv/directory/game/Krunker'>go chat</a> with some Krunker Streamers</a></div><div class=\"instructionsTabs\">\n\t\t\t\t<div class=\"instructionsTab\" onmouseenter=\"playTick();\" onclick=\"playSelect(0.1);logBtnFRVR('find_game');"+(j?"playMap('"+j+"')":"backToOrigin()")+'">Find a Game</div>\n\t\t\t\t<div class="instructionsTab" onmouseenter="playTick();" onclick="playSelect(0.1);logBtnFRVR(\'settings\');showWindow(1)">Settings</div>\n\t\t\t\t<div class="instructionsTab" onmouseenter="playTick();" onclick="playSelect(0.1);logBtnFRVR(\'changelog\');showWindow(35)">Changelog</div>\n\t\t\t</div>'}else{var l=me&&me.socket&&me.socket.url?(new URL(me.socket.url).hostname+"").replace("cf_","").replace("ip_","").split(".")[0]:"Unknown";instructions.style.display="none",instructionsUpdate.style.display="block",instructionsUpdate.innerHTML="<div class='instructionsHeader'>Lost Connection"+(a?"<div class='reportDC' onclick='disconnectPopup(&quot;"+(i&&i.code||"0")+"&quot;,&quot;"+(i&&i.reason||"0")+"&quot;)'>Report</div>":"")+"</div><div style='color: rgba(255, 255, 255, 0.6);margin-top: 5px;font-size: 28px;'>"+e+"</div><div style='margin-top:10px;font-size:15px;color:rgba(255,255,255,0.4)'>ID: 0x"+(t||window.krunkerErrorCode||"000000")+" | Code: "+(i&&i.code||"0")+" | Reason: "+(i&&i.reason||"0")+"</div><div style='margin-top:10px;font-size:15px;color:rgba(255,255,255,0.4)'>"+(a?"ServerID: "+l+" | ":"")+"Region: "+(u.regionNames[W]&&u.regionNames[W]||"0")+"</div>"+(e&&e.toLowerCase().includes("connection banned")?"<div style='margin-top:10px;font-size:13px;color:rgba(255,255,255,0.4)'>Contact <span style='color:#fff'>krunker+banappeal@frvr.com</span> to Appeal the Ban</div><div></div>":"<div style='margin-top:10px;font-size:15px;color:rgba(255,255,255,0.4)'>"+S.t("error.extentions")+"</div>")+'<div class="instructionsTabs">\n\t\t\t\t<div class="instructionsTab" onmouseenter="playTick();" onclick="playSelect(0.1);logBtnFRVR(\'find_game\');'+(j?"playMap('"+j+"')":"backToOrigin()")+'">Find a Game</div>\n\t\t\t\t<div class="instructionsTab" onmouseenter="playTick();" onclick="playSelect(0.1);logBtnFRVR(\'server_browser\');showWindow(2)">Servers</div>\n\t\t\t\t<div class="instructionsTab" onmouseenter="playTick();" onclick="playSelect(0.1);logBtnFRVR(\'settings\');showWindow(1)">Settings</div>\n\t\t\t\t<div class="instructionsTab" onmouseenter="playTick();" onclick="playSelect(0.1);logBtnFRVR(\'changelog\');showWindow(35)">Changelog</div>\n\t\t\t</div>'}instructionHolder.style.pointerEvents="all",yi()}function Jc(){instructions.innerHTML=function(){if(me.socket&&(me.socket.readyState==WebSocket.CLOSING||me.socket.readyState==WebSocket.CLOSED))return"";var e=S.t("app."+(zi?"spectate":"play")+(ye.gamepad.active?".controller":ee.isMobileControls?".mobile":""));return e+(dn?"<div id='instructionsSubtitle'>"+dn.toUpperCase()+"</div>":"")}()}window.backToOrigin=function(e){FRVR.channelCharacteristics.allowNavigation?window.location=_(window.location,window.location.origin,k):(e&&Xc(0),bd())},ee.updatePlayInstructions=Jc;var Qc=void 0;function $c(e,t,i){me.connected=!1,Qc=e,showWindow(0),ye.disable(),ee.hideUI(),ee.hideDiscon(),Zc(e,t,void 0,i),FRVR.channelCharacteristics.allowNavigation?(me.socket&&(me.socket.onclose=function(){}),ed=function(){}):Xc(0)}function ed(e,t,i,n){if(!Qc&&!ve.isSandbox&&(me&&me.socket&&(me.socket.onclose=function(){},me.socket.close()),!n)){showWindow(0),ye.disable(),ee.hideUI(),ee.hideDiscon();var s=e?void 0:"disconnected";Zc(e||S.t("player.disconnect"),t,i,s)}}Object.defineProperty(window,"openTab",{writeable:!1,value:function(e){window.open(e,"_blank")}});var td=0,id=0;function nd(e){adCon.style.display="none",friendCon.style.display="none",td=Date.now();var t="";if((window.isBotFTUE||ve&&ve.isSandbox)&&(id=0),0==id)adCon.style.display="";else if(1==id)if(Pe&&Pe.length){if(!friendCon.innerHTML.length){for(var i,n="<div class='streamItem'><div class='strmCat friendHeader' style='margin-left:5px;'>Active Friends <div class='onStatus' style='background:#27ab32;vertical-align:middle;margin-top:-6px;margin-left:10px;'></div></div></div>",s=0,a=0;a<Pe.length&&!(1==(i=Pe[a]).st&&Re&&Re.id!=i.fid&&(n+="<div class='streamItem' onclick=''><img class='strmIcn' onerror='this.onerror=null;this.src=\"./img/player_pfp.png\";' src='"+(i.sub?ae.userAssetsUrl("/p"+i.fid+"/profile.png"):"./img/player_pfp.png")+"' /><div class='streamName'><div class='strmLink blackShad'>"+i.fna+"</div><div class='strmViews' style='color:rgba(255,255,255,0.5)'>"+(i.sm||"Online")+"</div></div>"+(i.gid?"<div style='position:relative;float:right;' onclick='openURL(`/?game="+i.gid+"`,1)'><div class='frndQickJoin' title='Join'><span class='material-icons'style='color:#fff;font-size:35px;margin-top:12px;'>launch</span></div></div>":"")+"</div>",s++,s>=4));++a);if(!(s>0))return void(d||sd());t+=n,friendCon.innerHTML=t}friendCon.style.display=""}else d||sd()}function sd(){++id>1&&(id=0),(window.isBotFTUE||ve&&ve.isSandbox)&&(id=0),0==id&&d&&(id=1),nd()}function ad(){xe.push({name:"Mini Industry",fileName:"bot_ftue_v2"});const e=window.ftueNewMaps?[30,5,xe.length-1]:[xe.length-1],t=window.ftueFixedMapRotation?e:void 0,i=[0],n=[];e.forEach((e=>{var t,s;n.push((t=e,s=i,new Promise((e=>{fetch("maps/"+xe[t].fileName+".json?v=Mpyh8").then((async i=>{let n=await i.text();xe[t]=JSON.parse(n),xe[t].didLoad=!0,s&&(xe[t].config||(xe[t].config={}),xe[t].config.modes=s),ve.map.maps=xe,e()})).catch((t=>{console.error("Error Download Map:",t),e()}))}))))})),Promise.all(n).then((()=>{kd({},{useDefaultMaps:true,mapOverride:e,fixedMapRotation:t})}))}function rd(e,t,i){V=t,!w||d||window.OffCliV||Ns(),window.utilities&&(ed(null,null,null,!0),Ns()),me.send("load")}function od(e){e?(fe.listMaps(2,0,null,(function(e,t){!function(e){if(e&&e.data){dd=ae.shuffleArray(e.data);for(var t=0,i="",n=0;n<dd.length;++n){var s=dd[n],a={};if(s.map_info)try{a=JSON.parse(s.map_info)}catch(e){}if(a.t&&(i+="<div class='newsItem'><img src='"+ae.userAssetsUrl("/m"+ +s.map_id+"/thumb.png")+"' class='newsIMG'  onclick='openURL(&quot;/?play="+s.map_name+"&quot;, 1)' /></div>",t++),t>=5)break}newsBody.innerHTML=i,newsHed.style.display="block",newsBody.style.display="block",updateWindow(10),hd()}}(t)})),Sn(),B!=ae.getSubGameVersion()&&(updateAd.style.display="block",updateAdVersion.textContent="Update v"+u.gameVersion)):me.socket.close()}window.exitBotFTUE=function(e){saveVal("ftue_bm",5),setTimeout((()=>location.href=location.origin),e?0:5e3)};var ld=0,cd=5e3,dd=null;function hd(){dd.length>0&&(newsStatV.innerHTML=ae.formatNumYT(dd&&dd[ld]&&dd[ld].map_pl||0))}const ud=window.log||console.log;function pd(e,t){ud("%c[KRUNKSCRIPT] "+t.join(" "),(e?"background:#3a0000;":"")+"color:#d50000")}var fd,md=!1,gd=null;function vd(e){if(!g&&!v&&y){var t=(s=null,parent!==window&&(s=document.referrer),s);if(!(t&&t.includes&&(t.includes("conmeego")||t.includes("krunkerio"))||window.clientUtil||md)){md=!0,e&&e(.5),P.get("qP")&&saveVal("queuePort",P.get("qP")),P.get("qH")&&saveVal("queueHost",P.get("qH")),P.get("bpt")&&saveVal("bpt",P.get("bpt")),P.get("gId")&&saveVal("gId",P.get("gId")),P.get("tc")&&(Ot=P.get("tc"),saveVal("testCode",P.get("tc")));var i=P.has("test")||P.has("sandbox")?u.blankMap:null,n=getSavedVal("custMap");deleteVal("custMap"),n||i?(window.isBotFTUE=!1,kd(n||i)):window.isBotFTUE?ad():bd(),e&&e(.7),qe=performance.now(),We=Date.now(),qc(),gd||clearInterval(gd),gd=setInterval((function(){A||ve.updateSpinners(3*u.staticDlt)}),u.staticDlt),e&&e(1),zd()}}var s}function yd(e){var t=getSavedVal(e);return ae.isString(t)?t=t.split(","):Array.isArray(t)||(t=[]),t.map(Number).filter((e=>ae.isNumber(e)))}function bd(){Re=null,Pe=null,!1,on();var e=getSavedVal("queuePort"),t=getSavedVal("queueHost");deleteVal("queueHost"),deleteVal("queuePort");var i=getSavedVal("bpt");deleteVal("bpt");var s=getSavedVal("gId");deleteVal("gId"),i?xd(t,e,s,null,i):Promise.resolve(l?b475796ed633d5fd0485:null).then((e=>{e=l?b475796ed633d5fd0485.split("").map((e=>String.fromCharCode(e.charCodeAt(0)-5))).join(""):void 0;let t={[n.a.VERSION]:je};if(u.useLooseClient&&delete t[n.a.VERSION],O)return window.windows[1].autoPlaySearch=O,t[n.a.INFO]=O,H.seek({regionId:"any",gameId:null,autoChangeGame:!1,dataQuery:t,skipReplaceState:we.tmp.streamMode||!FRVR.channelCharacteristics.allowNavigation,validationToken:e});{var i=yd("seek_maps");i&&i.length&&(t[n.a.DONT_SEEK_MAPS]=i);var s=yd("seek_modes");s&&s.length&&(t[n.a.DONT_SEEK_MODES]=s);let a={autoChangeGame:!1,dataQuery:t,skipReplaceState:we.tmp.streamMode||!FRVR.channelCharacteristics.allowNavigation,validationToken:e};return H.seek(a)}})).then((e=>{O=!1,xd(e.host,e.port,e.gameId,e.clientId)})).catch((e=>{window.gameLoaded=!0,console.warn("Matchmaker error:",e,e.message,e.response);let t,i=e.message;if(e.response){i=e.response.data&&e.response.data.error?e.response.data.error:"GameIssue",t=i,"InvalidGameId"==i&&FRVR.channelCharacteristics.allowNavigation&&window.history.replaceState(document.title,document.title,_(window.location,"/",k));var n=S.has("matchmaker."+i);n?i=n:(t=void 0,console.warn("Unhandled error message",i))}else console.warn("No error response",e.response);FRVR.channelCharacteristics.allowNavigation&&O?openURL("/?host="+O,1):O&&t==F.ERRORS.NoServersMatchQuery?(L=O,O=!1,bd()):$c(i,null,t)}))}function wd(e){fd=e,saveVal("conUID_",e)}function xd(e,t,i,n,s){window.gameLoaded=!0,we.tmp.netRerouting&&e.startsWith("ip_")&&(e="cf_"+e),t,G=e;var a=[],r=getSavedVal("conUID_");i&&a.push("gameId="+i),n&&a.push("clientKey="+n),r&&(a.push("clientUID="+r),deleteVal("conUID_")),s&&a.push("bpt="+s),Ot&&a.push("tc="+Ot);var o="//"+e+":"+t+"/ws?"+a.join("&");me&&(FRVR.channelCharacteristics.allowNavigation||(Ae=null),me.reset()),me.connect(o,(function(e){if(e){if(console.warn("IO connect error",e.error),null!=Qc)return void Bd("disconnect");ed(null,"000001",e)}else if(L)autoHostMap(L,!0);else{var t=getSavedVal("mapToLoad");deleteVal("mapToLoad"),t&&selectHostMap(t);var i=getSavedVal("custToLoad");deleteVal("custToLoad"),i&&selectHostMap(!1,i);var n=getSavedVal("mapToPlay");deleteVal("mapToPlay"),n&&autoHostMap(n)}}),{n:Ho,bbm:Uo,0:Xo,"00":Zo,k:Al,code:lo,codeT:ho,codeP:co,init:go,"inst-id":bo,load:rd,vr:la,kml:ha,cust:Q,ready:od,cln:fr,start:to,nwT:newTok,pur:Ci,purprm:Ii,purb:Ai,purbp:windows[5].purchaseRes,purbpl:windows[5].purchaseLvlRes,bpclmr:windows[5].claimItemRes,gmsg:al,lkt:sl,inat:zo,inatA:Bo,sb:Kc,clnL:mr,upR:Or,upPR:Lr,lock:xo,end:ko,spin:er,spinH:Qa,spinW:tr,skin:sr,skinF:ir,spinKR:ar,ts:Xl,t:Vo,pErr:purchaseError,error:$c,dc:ed,unb:Va,unbS:Ga,zn:ve.updateZone,uf:Mi,chlR:ki,l:el,f:Qo,ufi:ec,debug:bl,exf:ml,noc:gl,frz:vl,spb:yl,unl:wl,sic:Sl,s:Ro,c:Po,7:Hl,sp:ve.addSpray,ch:Rc,chi:Ac,tch:Ic,9:Gl,10:lc,h:xc,so:Ao,sso:Io,6:oc,p:fc,mp:mc,lv:ac,ua:on,ex:Kl,ac:Fl,vc:$i,a:xn,4:Oc,5:tc,ufp:ve.updateFlagPing,fh:xl,bnk:ve.updateBank,uamo:ll,upp:_n,c2fa:twoFAres,ro:ve.respawnObj,st:Ol,pk:Bl,upk:zl,2:Rl,dbgp:ri,recps:windows[13].craftDatRes,crftr:windows[13].craftRes,sd:Gt,kpdf:Hc,kpd:policeRes,clog:console.log,3:Pl,wstk:Ll,krp:Dl,ufl:ve.updateFlag,kst:Nl,am:cc,gt:ve.logTime,gte:ve.updateGate,mybx:ve.updateMysteryBox,smybx:ve.switchMysteryBox,krm:ve.updateKrumMachine,pwup:hl,lm:cl,rml:ca,gmc:da,chp:nc,chgp:sc,ulm:ve.unlockMove,is:ve.triggerImgSound,pi:tl,mv:updMatchVote,frs:enterGame,chg:wr,uchp:xr,vk:_o,vf:To,pir:il,scr:jumpScare,up:uc,prpR:pc,pr:Yl,bmb:ql,chgC:Sr,flgr:Mr,bdgr:kr,cbdgr:_r,nbdgr:Tr,hdsr:Cr,tm:ol,pre:Wl,wep:ve.setWeapon,do:ve.destroyObj,mo:ve.teleportToNode,mf:ve.teleportFromNode,obj:ve.setObjective,uobj:ve.updateObjective,prmR:cr,nmeR:dr,trd:Zs,pRes:zs,lmsg:Bs,ann:gn,utrd:Qs,atrd:Js,tdR:gr,nftR:js,pdR:vr,dsrvl:yr,gfrnd:br,vm:window.voteMap,loadS:ln,crsp:zc,dsp:ve.disposeSpawnable,reCa:So,bo:ve.buildObj,aai:ve.AI.cSpawn,rai:ve.AI.removeBySid,ai:ve.AI.syncAll,ad:ve.airDrop.cSync,rad:ve.airDrop.removeBySid,ana:Cl,spk:Ml,rfl:_l,cv:kl,cnfm:Tl,edMp:Bc,xst:bi,rg:Eo,ulb:Lo,rds:po,gv:jo,cd:ao,cda:so,tgui:Co,fe:ui,tx:ic,upz:rl,uid:wd,hlpr:ce.addHelperC,hbdb:ul,shk:ce.shake,ksL:pd,cct:Ql,uct:$l,chrg:Oo,uai:Do,uh:fo,camb:changeAmbient,jnk:_i,gbdr:Di,abd:Ei,vad:window.forceVideoAd,vmm:Ds,vmms:Os,rmm:Ls,krt:jl,bcfg:botsPopup,jg:fl,busy:pl,asnd:ve.addPlayerSound,rsnd:ve.removePlayerSound,cntry:Oi,bh:vc,bpdl:Ir,rrqdxp:Td,bppd:Ar,svybRes:Ti,remail:Cn})}function Sd(e,{useDefaultMaps:t,mapOverride:i,fixedMapRotation:n}){let s,a,r=t?{}:function(e){var t={};try{var i=JSON.parse(e);i&&i.config&&((t=i.config.settings||{}).weps=i.config.weps||null,t.cls=i.config.cls||null,t.prks=i.config.prks||null,i.config.classes&&(t.classes=i.config.classes),i.config.modes&&(t.modes=i.config.modes),i.modURL&&(t.modURL=i.modURL),i.welMsg&&(t.welMsg=i.welMsg))}catch(e){}t.rawMapData=e,t.maps=[0],t.modes=t.modes&&t.modes.length?t.modes:[0],t.classes=t.classes||Array.from(Array(ve.classes.length),((e,t)=>t)),t.passCode=void 0,0==t.modes.length&&(t.modes=[0]);for(var n=0;n<u.serverConfig.length;n++){var s,a=t.settings&&null!=t.settings[u.serverConfig[n].varN]?t.settings[u.serverConfig[n].varN]:u.serverConfig[n].def;s=u.serverConfig[n].bool?a?1:0:u.serverConfig[n].input?a?ae.sanitizeStr(a):0:u.serverConfig[n].select?parseInt(a):a?parseFloat(a):0,t[u.serverConfig[n].varN]=s}return t}(e);window.isBotFTUE&&(r.gameTime=2),(ze=new oe(!1,null,{call:()=>{},callMultiple:()=>{}},null,null,null,null,null,null,{send:()=>{}})).isSandbox=!0,ze.isBotFTUE=window.isBotFTUE,ze.sandbox=ge,ze.sandbox.socketId=me.socketId,n&&(ze.fixedMapRotation=n);if(t?(r.maps=ze.map.rotationMaps,i&&(r.maps=i)):(ze.prepareGame(r.rawMapData,null,null,null,2,!0,void 0,void 0,void 0,!0),r.modURL?ze.modURL=r.modURL:delete ze.modURL,r.welMsg?ze.welMsg=r.welMsg:delete ze.welMsg),ze.applyConfig(r,2,0),t){let e=ze.genMatchList(i,!0);ae.yateShuffle(e),e=e[0].split(","),s=e[0],a=e[1]}ze.passCode=r.passCode,ze.private=!!r.private,ze.krRewards=!!r.krRewards,ze.mimicPubs=!!r.mimicPubs,ze.defaultSetts=!!r.defaultSetts,ze.maxPlayers=ze.config.maxPS?40:ze.config.maxPlayers,ze.init(a,s,0,!0,!1).then((()=>{ze.broadcast("init",ze.mapIndex,ze.modeIndex,ze.eventIndex,ze.getTeamScores(!0),ze.getTeamScores(),ze.host,ze.config,ze.customData,ze.modURL||0,ze.customMapData,ze.getSyncData(),ze.networkData,!0,!!ze.isOfficial,ze.isComp,ze.sessionId,ze.roundId,ze.gameTimer);try{const t=JSON.parse(e);t&&t.player&&(enterGame(!0),gl(!0),Be.xDire=t.player.rot[0],Be.yDire=t.player.rot[1],Be.x=t.player.pos[0],Be.y=t.player.pos[1],Be.z=t.player.pos[2])}catch(e){}ze.isBotFTUE&&ze.bots.setupLocal()}))}function Md(){me&&me.socket&&me.socket.close(),me.send=function(){},window.isBotFTUE||(window.fullMenu(),tlInfHold.style.display="none",subLogoButtons.style.display="none",newsHolder.style.display="none",signedOutHeaderBar.style.display="none",signedInHeaderBar.style.display="none",menuServerInfoContainer.style.display="none",headerRightSocial.children[0].style.display="none",menuItemContainer.style.top="0px",menuBtnMaps.parentNode.classList.toggle("mIH",!0),menuBtnChall.parentNode.classList.toggle("mIH",!0),menuBtnShop.parentNode.classList.toggle("mIH",!0),menuBtnProfile.parentNode.classList.toggle("mIH",!0),window.canShowAds&&(topLeftAdHolder.style.top="15px",topLeftAdHolder.style.display="inline-block"),FRVR.channelCharacteristics.allowNavigation&&window.history.replaceState({},"Krunker Sandbox","?sandbox")),id=1,nd(),en()}function kd(e,t){t=t||{},ge.connect(null,(()=>{me.socketId=ae.randomString(12),ve.isSandbox=!0,ve.sandbox=ge,ve.sandbox.socketId=me.socketId,Md();try{Sd(e,t)}catch(e){}}),{n:Ho,bbm:Uo,0:Xo,"00":Zo,k:Al,init:go,"inst-id":bo,load:rd,cust:Q,ready:od,start:to,nwT:newTok,gmsg:al,lkt:sl,inat:zo,inatA:Bo,lock:xo,end:ko,ts:Xl,t:Vo,error:$c,dc:ed,zn:ve.updateZone,l:el,f:Qo,ufi:ec,debug:bl,exf:ml,noc:gl,frz:vl,spb:yl,unl:wl,sic:Sl,s:Ro,c:Po,7:Hl,sp:ve.addSpray,9:Gl,10:lc,h:xc,so:Ao,sso:Io,6:oc,p:fc,mp:mc,lv:ac,ex:Kl,ac:Fl,4:Oc,5:tc,ufp:ve.updateFlagPing,fh:xl,bnk:ve.updateBank,uamo:ll,ro:ve.respawnObj,st:Ol,pk:Bl,upk:zl,2:Rl,sd:Gt,clog:console.log,3:Pl,wstk:Ll,krp:Dl,ufl:ve.updateFlag,kst:Nl,am:cc,gt:ve.logTime,gte:ve.updateGate,mybx:ve.updateMysteryBox,smybx:ve.switchMysteryBox,krm:ve.updateKrumMachine,pwup:hl,lm:cl,chp:nc,chgp:sc,ulm:ve.unlockMove,is:ve.triggerImgSound,pi:tl,frs:enterGame,pir:il,scr:jumpScare,up:uc,prpR:pc,pr:Yl,bmb:ql,tm:ol,pre:Wl,wep:ve.setWeapon,do:ve.destroyObj,mo:ve.teleportToNode,mf:ve.teleportFromNode,obj:ve.setObjective,uobj:ve.updateObjective,pRes:zs,vm:window.voteMap,crsp:zc,dsp:ve.disposeSpawnable,bo:ve.buildObj,aai:ve.AI.cSpawn,rai:ve.AI.removeBySid,ai:ve.AI.syncAll,ad:ve.airDrop.cSync,rad:ve.airDrop.removeBySid,ana:Cl,spk:Ml,rfl:_l,cv:kl,cnfm:Tl,rg:Eo,ulb:Lo,rds:po,gv:jo,cd:ao,cda:so,tgui:Co,tx:ic,shk:ce.shake,ksL:pd,cct:Ql,uct:$l,chrg:Oo,uai:Do,uh:fo,camb:changeAmbient,krt:jl,jg:fl,busy:pl,asnd:ve.addPlayerSound,rsnd:ve.removePlayerSound,bh:vc})}window.quickConnect=function(e){var t;FRVR.channelCharacteristics.allowNavigation&&Object(a.navigateBackAll)(),O=j=e,FRVR.channelCharacteristics.allowNavigation||(t=S.t("generic.loading.simple")+" "+(e||"")+" ...",loadGamNm.innerHTML=t||S.t("generic.loading.simple")+"...",Object(a.navigateBackAll)()),bd()},window.captchaReady?grecaptcha.enterprise.ready((function(){})):window.captchaCallback=function(){grecaptcha.enterprise.ready((function(){}))};var _d=!1;function Td(e){var t;Re&&e&&e.playerScore&&(Re.score=e.playerScore,Re.lastDoubleAttempt=Re.games,updateMenuAccountData(),t='<div class="dxp-img-holder">\n\t\t\t<div class="dxp-img-anim"><div></div></div>\n\t\t\t<div class="dxp-img"></div>\n\t\t</div>\n\t\t<div class="dxp-text">\n\t\t\t<div class="dxp-header">'+S.t("window.endgame.player.xpDoubled")+'</div>\n\t\t\t<div class="dxp-info">'+S.t("window.endgame.player.xpDoubleSubTitle")+"</div>\n\t\t</div>\n\t\t<div class=\"dxp-btn-holder\">\n\t\t\t<div class='button dxp-btn' onmouseenter=\"playTick(0.1);\" onclick='playSelect(0.1);clearPops();'>"+S.t("generic.nice")+"</div>\n\t\t</div>",genericPopup(t,"dxp-pop no-box-shadow"))}var Cd=0;function Id(){Re&&Re.id&&Re.games%3==0&&0!=Re.games&&me.send("rqdxp")}Object.defineProperty(window,"forceVideoAd",{writeable:!1,value:function(){var e=Date.now();e-(Cd||0)>=9e4&&(Cd=e,me.send("vad",1),showAd({onShow:()=>me.send("vad",2),onComplete:()=>setTimeout((()=>me.send("vad",3)),200),onError:()=>me.send("vad",-1)}))}}),Object.defineProperty(window,"showDoubleXPRewardedAd",{writeable:!1,value:function(){be.endScreen.clicked2XP=!0;let e=document.getElementById("doubleXPHolder");e&&(e.style.display="none"),Re.lastDoubleAttempt=Re.games,window.showRewardedAd(Id)}}),Object.defineProperty(window,"showRewardedAd",{writeable:!1,value:function(e){d&&e&&e(),Object(a.navigateBackAll)(),window.showAd({onExit:e})}}),Object.defineProperty(window,"showAd",{writeable:!1,value:function({type:e=FRVR.ads.AdType.REWARD,onShow:t,onComplete:i,onError:n,onExit:s,allowSkip:r}){_d||(_d=!0,FRVR.ads.show(e).then((function(e){if(t&&t(),e===FRVR.ads.AdShowResult.COMPLETED)i&&i();else{if(e!==FRVR.ads.AdShowResult.DELIVERED)throw"ad-failed";if(!r)throw"skipped";i&&i()}})).catch((e=>{n&&n(e),Object(a.navigateBack)()})).finally((()=>{_d=!1,s&&s()})))}});var Ad,Rd=[{img:ae.assetsUrl("/scares/2.png")},{vid:ae.assetsUrl("/scares/1.mp4")}],Pd=E("scr",0),Ed=Pd?3e4:0,Dd=0;window.jumpScare=function(e){if(Rd[e]){var t=Date.now();if(t-Dd<1e4)return;Dd=t,Rd[e].img?(jumpSIMG.src=Rd[e].img,Rd[e].loaded?(jumpSIMG.style.display="block",he.play("scare_1",2),setTimeout((function(){jumpSIMG.style.display="none"}),3e3)):he.onLoad("scare_1",(function(){Rd[e].loaded=!0,jumpSIMG.style.display="block",he.play("scare_1",2),setTimeout((function(){jumpSIMG.style.display="none"}),3e3)}))):Rd[e].vid&&(jumpSVID.src=Rd[e].vid,jumpSVID.play(),jumpSVIDHolder.style.display="block",setTimeout((function(){jumpSVIDHolder.style.display="none"}),4e3))}},window.getGameActivity=function(){return{id:U,time:timerVal.textContent?timerVal.textContent.split(":").reverse().reduce(((e,t,i)=>e+t*Math.pow(60,i)),0):null,user:Re?Re.alias:"Guest"+(Ae?"_"+Ae.sid:""),class:{name:ve.classConfig[kt].name||null,index:Ae?Ae.classIndex:kt},map:ve.map?ve.map.getMapName():null,mode:ve.mode?ve.mode.name:null,custom:ve.isCustom}},window.disconnectPopup=function(e,t){genericPopup("<div class='imageListHeader' style='font-size: 26px;'>Report</div><div style='font-size:20px;color:#fff'><div style='margin-top: 3px;font-size: 22px;color: rgba(255, 255, 255, 0.7);'>Copy Paste this error data and send it to us at: krunker@yendis.ch</div><div class='mapFndB' onclick='window.getDCExport(this, &quot;"+e+"&quot;, &quot;"+t+"&quot;)' onmouseover='playTick(0.1)' style='background-color:#fc5a4e;width: 380px;margin-top: 10px;'>Copy Data</div></div>","disconnectPop")},window.getDCExport=function(e,t,i){var n=e.textContent,s={ua:c,savedRegion:we.list.defaultRegion.val,connectedRegion:W,connectedHost:G,ping:yt,v:u.clientVersion,steam:d,client:w,mobile:p(),browser:c.slice(c.lastIndexOf(") ")+2,c.length),code:t,reason:i,time:(new Date).toString()};ae.copyToClipboard(JSON.stringify(s,null,2)),e.textContent="Copied",setTimeout((()=>e.textContent=n),1250)},window.openOneTrust=function(){if(window.OneTrust){Vt&&Vt.remove();var e=document.querySelector(".onetrust-pc-dark-filter");e&&e.setAttribute("onclick","closeOneTrust()");try{OneTrust.ToggleInfoDisplay()}catch(e){}}},window.closeOneTrust=function(){if(window.OneTrust)try{OneTrust.Close()}catch(e){}},window.abTestsPopup=function(){let e='<div class="popHeader">FRVR Experiments</div>\n\t\t<table>\n\t\t\t<tr>\n\t\t\t\t<th>Name</th>\n\t\t\t\t<th>Active</th>\n\t\t\t\t<th>Cohorts</th>\n\t\t\t\t<th>Current</th>\n\t\t\t</tr>';const t=FRVR.config.abTests,i=FRVR.abTests.abTestCohorts;for(let n in t){const s=t[n],a=i[n];e+='<tr>\n\t\t\t<td style="font-size: 16px;">'+n+'</td>\n\t\t\t<td style="text-align: center;">'+(s.active?"":"")+'</td>\n\t\t\t<td style="font-size: 16px;">'+s.cohorts.join(", ")+'</td>\n\t\t\t<td style="font-size: 16px;">'+(void 0===a?"":a)+"</td>\n\t\t</tr>"}e+="</table>",genericPopup(e,"abTestsPop")};var Od={getGame:()=>ve};const Ld={get config(){return u},get i18n(){return S},get Game(){return ve},get player(){return Ae},get team(){return ft},get inGame(){return ci},get io(){return me},get account(){return Re},get SETTINGS(){return we},spinResponse:er,loadout:{get attachIndex(){return Vn},set attachIndex(e){Vn=e},get classIndex(){return kt},set classIndex(e){kt=e},get skinColIndex(){return zn},set skinColIndex(e){zn=e},get hairCol(){return Bn},set hairCol(e){Bn=e},get chatCol(){return Nn},set chatCol(e){Nn=e},get dyeIndex(){return Fn},set dyeIndex(e){Fn=e},get faceIndex(){return Hn},set faceIndex(e){Hn=e},get shoeIndex(){return Un},set shoeIndex(e){Un=e},get reticleIndex(){return Gn},set reticleIndex(e){Gn=e},get savedReticle(){return Wn},set savedReticle(e){Wn=e},get scopeIndex(){return qn},set scopeIndex(e){qn=e},get savedScope(){return Yn},set savedScope(e){Yn=e},get meleeIndex(){return Kn},set meleeIndex(e){Kn=e},get backIndex(){return Zn},set backIndex(e){Zn=e},get hatIndex(){return Jn},set hatIndex(e){Jn=e},get headIndex(){return Qn},set headIndex(e){Qn=e},get waistIndex(){return es},set waistIndex(e){es=e},get petIndex(){return ts},set petIndex(e){ts=e},get wristIndex(){return is},set wristIndex(e){is=e},get savedSkins(){return ns},set savedSkins(e){ns=e},get skinsLoadout(){return ss},set skinsLoadout(e){ss=e},get secondaryInd(){return os},set secondaryInd(e){os=e},get pcStatIndex(){return ls},set pcStatIndex(e){ls=e},get activeSkinSel(){return cs},set activeSkinSel(e){cs=e},get sprayIndex(){return No},set sprayIndex(e){No=e},get streakIndex1(){return us},set streakIndex1(e){us=e},get streakIndex2(){return ps},set streakIndex2(e){ps=e},get streakIndex3(){return fs},set streakIndex3(e){fs=e},get skinPrim(){let e=ve.classConfig[kt||0].loadout[0];return ss[e]||-1},get skinSec(){return ss[os]||-1}}};Object(s.c)(we,Od,Ld),FRVR.bootstrapper.init().then((function(){FRVR.bootstrapper.setProgress(.01),vd((function(e){1===e&&(reloadMsg.innerHTML=S.t("game.reload.keyboard"),FRVR.bootstrapper.complete())}))})),window.logEventFRVR=function(e,t){t=t||{},FRVR.tracker.logEvent(e,t)},window.logBtnFRVR=function(e){logEventFRVR("btn_click",{label:e})};var jd=!1;function zd(){jd=!0;var e={login_type:Re?"krunker_account":"guest"};Re&&(e.player_level=Re.level,e.krunkers_wallet=Re.funds||0,e.junk_wallet=Re.junk||0,e.n_friends=Pe?Pe.length:0,e.n_friends_online=Pe?Pe.filter((e=>1==e.st)).length:0),logEventFRVR("session_start",e)}function Bd(e){if(jd){jd=!1;var t={};Re&&(t.player_level=Re.level),t.end_reason=e||"disconnect",logEventFRVR("session_end",t)}}window.showWindowAfterLoad&&(clearPops(),showWindow(window.showWindowAfterLoad),window.showWindowAfterLoad=0)}.call(this,i(7))},function(e,t){"serviceWorker"in window.navigator&&window.navigator.serviceWorker.register("./service-worker.js").then((()=>{}),(()=>{}))},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||=Promise)((function(s,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,o)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const s=i(314),a=window.currentStorage;class r{constructor(e,t,i){this.matchmakerAddress=e,this.availableRegions=t,this.dedicatedOnlyRegions=i,this.cachePingRegion=!0,this.enableLogging=!!a.getItem("CLIENT_MANAGER_LOGGING")}get hostname(){return a.__HOSTNAME__||(r.USE_PORT?location.host:location.hostname)}seek(e){return n(this,void 0,void 0,(function*(){this.log("Seeking games...");let t=a.__REGION__||e.regionId||(yield this.getRegion()),i=e.gameId||this.parseQuery(),n=yield this.matchmakerSeek(t,i,e.dataQuery||null,e.autoChangeGame,e.validationToken,e.captchaToken);return e.skipReplaceState||window.history.replaceState(document.title,document.title,this.generateHref(n.gameId)),n}))}getRegion(){return n(this,void 0,void 0,(function*(){return new Promise(((e,t)=>n(this,void 0,void 0,(function*(){let i=a.getItem(r.PING_REGION_CACHE_KEY);if(i&&-1!=this.availableRegions.indexOf(i))return void e(i);let n=yield this.fetchPingList(),s=0,o=!1;for(let i in n){if(-1==this.availableRegions.indexOf(i))continue;if(this.dedicatedOnlyRegions.indexOf(i)>=0)continue;let a=n[i],l=a.endsWith(":443")?"https:":"http:";fetch(l+"//"+a+"/ping").then((()=>{o||r.setDefaultRegion(i),o=!0,e(i)})).catch((e=>{s++,s>=Object.keys(n).length&&t("All pings failed.")}))}}))))}))}getRegionPing(){return n(this,void 0,void 0,(function*(){return new Promise(((e,t)=>n(this,void 0,void 0,(function*(){let t=yield this.fetchPingList(),i={},n={};for(let s in t){let a=t[s],r=a.endsWith(":443")?"https:":"http:";n[s]=Date.now(),fetch(r+"//"+a+"/ping").then((()=>{i[s]=Date.now()-n[s],Object.keys(i).length>=Object.keys(t).length&&e(i)})).catch((n=>{i[s]=-1,Object.keys(i).length>=Object.keys(t).length&&e(i)}))}}))))}))}switchGame(e,t){t||(window.location.href=this.generateHref(e))}static setDefaultRegion(e){a.setItem(r.PING_REGION_CACHE_KEY,e)}parseQuery(){this.log("Parsing query...");var e=s(location.href,!0).query.game;return"string"==typeof e?e:null}fetchPingList(){return n(this,void 0,void 0,(function*(){return this.log("Fetching list of servrs to ping..."),yield this.matchmakerRequest("/ping-list",{hostname:this.hostname})}))}fetchGameList(){return n(this,void 0,void 0,(function*(){return this.log("Fetching game list..."),yield this.matchmakerRequest("/game-list",{hostname:this.hostname})}))}fetchGameInfo(e){return n(this,void 0,void 0,(function*(){return this.log("Fetching game info for "+e+"..."),yield this.matchmakerRequest("/game-info",{game:e})}))}matchmakerSeek(e,t=null,i,s=!0,a,r=null){return n(this,void 0,void 0,(function*(){this.log("Seeking matchmaker with region "+e+"...");let n={hostname:this.hostname,region:e,autoChangeGame:s,validationToken:a};return t&&(n.game=t),i&&(n.dataQuery=JSON.stringify(i)),r&&(n.captchaToken=r),yield this.matchmakerRequest("/seek-game",n)}))}generateHref(e){if(!r.MERGE_QUERY)return"/?game="+e;const t=new URLSearchParams(window.location.search);t.set("game",e);return"/?"+t.toString().replace(/%3A/g,":")}matchmakerRequest(e,t={},i={}){return n(this,void 0,void 0,(function*(){this.log("Executing matchmaker request "+e+" with params "+JSON.stringify(t)+"...");for(let e in t)null==t[e]&&delete t[e];let n=new URLSearchParams(t).toString(),s=yield fetch(""+this.matchmakerAddress+e+(n?"?"+n:""),{headers:new Headers(Object.assign({"accept-language":"en-US,en;q=0.6;"},i))});if(s.ok)return yield s.json();{let e=null;try{e=yield s.json()}catch(e){}let t={message:s.statusText,response:{data:e}};throw console.error("Matchmaker request error",t),t}}))}log(...e){return this.enableLogging?(console.debug||console.info||console.log)(...e):void 0}}t.default=r,r.PING_REGION_CACHE_KEY="sid-utils:ping-region",r.USE_PORT=!1,r.MERGE_QUERY=!1,r.ERRORS={InvalidKey:"InvalidKey",GameFull:"GameFull",InvalidClientId:"InvalidClientId",InvalidClientKey:"InvalidClientKey",InvalidGameId:"InvalidGameId",ClientAlreadyRegistered:"ClientAlreadyRegistered",ClientNotRegistered:"ClientNotRegistered",NoAvailableServers:"NoAvailableServers",NoMatchingServers:"NoMatchingServers",NoServersMatchQuery:"NoServersMatchQuery",InvalidHostname:"InvalidHostname",RecaptchaFailed:"RecaptchaFailed",AccountAlreadyPlaying:"AccountAlreadyPlaying",TooManyIPs:"TooManyIPs",InvalidClientValidationToken:"Socket Error",InvalidClientIP:"Socket Mismatch",ExpiredClientValidationToken:"Validation Error",InvalidClientValidationTokenData:"Data Error"}},function(e,t,i){"use strict";(function(t){var n=i(315),s=i(316),a=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,r=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,o=[["#","hash"],["?","query"],function(e){return e.replace("\\","/")},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],l={hash:1,query:1};function c(e){var i,n=("undefined"==typeof window?void 0===t?"undefined"==typeof self?{}:self:t:window).location||{},s={},a=typeof(e=e||n);if("blob:"===e.protocol)s=new h(unescape(e.pathname),{});else if("string"===a)for(i in s=new h(e,{}),l)delete s[i];else if("object"===a){for(i in e)i in l||(s[i]=e[i]);void 0===s.slashes&&(s.slashes=r.test(e.href))}return s}function d(e){var t=a.exec(e);return{protocol:t[1]?t[1].toLowerCase():"",slashes:!!t[2],rest:t[3]}}function h(e,t,i){if(!(this instanceof h))return new h(e,t,i);var a,r,l,u,p,f,m=o.slice(),g=typeof t,v=this,y=0;for("object"!=g&&"string"!==g&&(i=t,t=null),i&&"function"!=typeof i&&(i=s.parse),t=c(t),a=!(r=d(e||"")).protocol&&!r.slashes,v.slashes=r.slashes||a&&t.slashes,v.protocol=r.protocol||t.protocol||"",e=r.rest,r.slashes||(m[3]=[/(.*)/,"pathname"]);y<m.length;y++)"function"!=typeof(u=m[y])?(l=u[0],f=u[1],l==l?"string"==typeof l?~(p=e.indexOf(l))&&("number"==typeof u[2]?(v[f]=e.slice(0,p),e=e.slice(p+u[2])):(v[f]=e.slice(p),e=e.slice(0,p))):(p=l.exec(e))&&(v[f]=p[1],e=e.slice(0,p.index)):v[f]=e,v[f]=v[f]||a&&u[3]&&t[f]||"",u[4]&&(v[f]=v[f].toLowerCase())):e=u(e);i&&(v.query=i(v.query)),a&&t.slashes&&"/"!==v.pathname.charAt(0)&&(""!==v.pathname||""!==t.pathname)&&(v.pathname=function(e,t){for(var i=(t||"/").split("/").slice(0,-1).concat(e.split("/")),n=i.length,s=i[n-1],a=!1,r=0;n--;)"."===i[n]?i.splice(n,1):".."===i[n]?(i.splice(n,1),r++):r&&(0===n&&(a=!0),i.splice(n,1),r--);return a&&i.unshift(""),"."!==s&&".."!==s||i.push(""),i.join("/")}(v.pathname,t.pathname)),n(v.port,v.protocol)||(v.host=v.hostname,v.port=""),v.username=v.password="",v.auth&&(u=v.auth.split(":"),v.username=u[0]||"",v.password=u[1]||""),v.origin=v.protocol&&v.host&&"file:"!==v.protocol?v.protocol+"//"+v.host:"null",v.href=v.toString()}h.prototype={set:function(e,t,i){var a,r=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(i||s.parse)(t)),r[e]=t;break;case"port":r[e]=t,n(t,r.protocol)?t&&(r.host=r.hostname+":"+t):(r.host=r.hostname,r[e]="");break;case"hostname":r[e]=t,r.port&&(t+=":"+r.port),r.host=t;break;case"host":r[e]=t,/:\d+$/.test(t)?(t=t.split(":"),r.port=t.pop(),r.hostname=t.join(":")):(r.hostname=t,r.port="");break;case"protocol":r.protocol=t.toLowerCase(),r.slashes=!i;break;case"pathname":case"hash":if(t){var l="pathname"===e?"/":"#";r[e]=t.charAt(0)===l?t:l+t}else r[e]=t;break;default:r[e]=t}for(var c=0;c<o.length;c++)(a=o[c])[4]&&(r[a[1]]=r[a[1]].toLowerCase());return r.origin=r.protocol&&r.host&&"file:"!==r.protocol?r.protocol+"//"+r.host:"null",r.href=r.toString(),r},toString:function(e){var t;e&&"function"==typeof e||(e=s.stringify);var i=this,n=i.protocol;n&&":"!==n.charAt(n.length-1)&&(n+=":");var a=n+(i.slashes?"//":"");return i.username&&(a+=i.username,i.password&&(a+=":"+i.password),a+="@"),a+=i.host+i.pathname,(t="object"==typeof i.query?e(i.query):i.query)&&(a+="?"===t.charAt(0)?t:"?"+t),i.hash&&(a+=i.hash),a}},h.extractProtocol=d,h.location=c,h.qs=s,e.exports=h}).call(this,i(8))},function(e,t,i){"use strict";e.exports=function(e,t){return t=t.split(":")[0],!!(e=+e)&&("http"===t||"ws"===t?80!==e:"https"===t||"wss"===t?443!==e:"ftp"===t?21!==e:"gopher"===t?70!==e:"file"!==t&&0!==e)}},function(e,t,i){"use strict";var n=Object.prototype.hasOwnProperty;function s(e){return decodeURIComponent(e.replace(/\+/g," "))}t.stringify=function(e,t){var i,s;t=t||"";var a=[];for(s in"string"!=typeof t&&(t="?"),e)n.call(e,s)&&((i=e[s])||null!=i&&!isNaN(i)||(i=""),a.push(encodeURIComponent(s)+"="+encodeURIComponent(i)));return a.length?t+a.join("&"):""},t.parse=function(e){for(var t,i=/([^=?&]+)=?([^&]*)/g,n={};t=i.exec(e);){var a=s(t[1]),r=s(t[2]);a in n||(n[a]=r)}return n}},function(e,t,i){const{navigateBackAll:n,navigateReplaceAll:s}=i(38);var a=i(298),r=e.exports;r.active=!0,r.menu2="rcY";var o=!0;r.isMobileControls=!1,r.hasEndScreen=!1,r.previewType=0,r.loading=!1,r.hidden=!1,r.isUpdating=!1,r.toggleMenu=e=>{r.isUpdating&&(e=!1),menuHolder.style.display=e?"block":"none",speakerDisplay.style.display=e?"none":"block",r.toggleMenuHider(e),e&&(endUI.style.display="none",uiBase.classList.toggle("onEndScrn",!1),instructionHolder.style.display="block","block"!=windowHolder.style.display&&(baseLinks.style.display="block"),"none"!=centerLeaderDisplay.style.display&&(centerLeaderDisplay.style.display="none")),r.active=!0,r.previewType=0,menuClassContainer.style.visibility=""},r.loadSpinner=()=>{instructions.innerHTML="<div style='width:100%;text-align:center;transform:scale(1.3);'><div class='lds-ring'><div></div><div></div><div></div><div></div></div></div>"},r.toggleMobileUI=function(e){r.isMobileControls=e,fullMenHider.style.display="block",aHider.classList.toggle("forceHidden",!1)},r.toggleWholeUI=e=>{e?(fullMenHider.classList.remove("forceHidden"),customGUIHolder.classList.remove("forceHidden"),gameUIHider.classList.remove("forceHidden")):(fullMenHider.classList.add("forceHidden"),customGUIHolder.classList.add("forceHidden"),gameUIHider.classList.add("forceHidden"))},r.hideUI=e=>{e||r.toggleMenu(!1),inGameUI.style.display="none",customGUIHolder.style.display="none",overlay.style.display="none",vignette.style.display="none",spectateUI.style.display="none",aimRecticle.style.display="none",e||(instructionHolder.style.display="none"),baseLinks.style.display="none",speakerDisplay.style.right="20px",purchaseHolder.style.display="none",consentBlock.style.display="none",r.active=!1},r.hideDiscon=()=>{chatHolder.style.display="none",speakerDisplay.style.display="none",purchaseHolder.style.display="none"},r.showEndScreen=e=>{r.hasEndScreen=!0,endMidHolder.style.display="none",matchVoteHolder.style.display="none",teamTotal0.style.display="none",teamTotal1.style.display="none",e||(endInfo.style.display="none"),endUI.style.display=e?"none":null,uiBase.classList.toggle("onEndScrn",!e),r.hideUI(e)},r.toggleWindow=e=>{r.previewType=0,menuClassContainer.style.visibility="",windowHolder.style.display=e?"block":"none",baseLinks.style.display=e?"none":"block",r.updatePlayInstructions(),e||window.closeWindow(),aHolder.style.zIndex=e?"999999":"99999999999"},r.toggleMenuHider=e=>{menuHider.style.display=e?"block":"none",uiBase.classList.toggle("onMenu",e),uiBase.classList.toggle("onDeathScrn",!1),uiBase.classList.toggle("onSpect",window.spectating&&!e),gameNameHolder.style.display=e?null:"none",spectButton.style.display=o&&e?null:"none",e&&(spinUI.style.display="none",spinUIBtns.style.display="none"),e||clearPops()},r.toggleEndScreen=()=>{r.hasEndScreen&&"block"==endInfo.style.display&&("none"==endUI.style.display?(endUI.style.display=null,uiBase.classList.toggle("onEndScrn",!0),endInfo.style.display="block",victorySub.style.display="",menuHolder.style.display="none",r.hideUI()):r.toggleMenu(!0))},r.setShowSpect=e=>{o=e,spectButton.style.display=e?null:"none"},r.setShowSelTeam=e=>teamSelector.style.display=e?"block":"none",r.showError=e=>{r.toggleMenu(!0),instructions.innerHTML=e},r.toggleGameUI=e=>{var t=e&&!window.spectating;spectateUI.style.display=window.spectating&&e?"block":"none",window.spectating&&(propControlHolder.style.display="none"),mobileUI.style.display=e&&r.isMobileControls?"block":"none",gameMessage.style.display=t?"block":"none",roundMessage.style.display=t?"block":"none",topLeftMain.style.display=e?"inline-block":"none",topLeftMap.style.display=e?"block":"none",topLeftMatchData.style.display=t?"block":"none",topLeftData.style.display=t?"inline-block":"none",topLeftBottom.style.display=t?"block":"none",topRight.style.display=e?"block":"none",reloadMsg.style.display=t?"block":"none",bottomLeftHolder.style.display=t?"block":"none",weapHolder.style.display=t&&!r.isMobileControls?"grid":"none",bottomRight.style.display=t?"block":"none",deathUIHolder.style.display=e?"none":"block",speakerDisplay.style.right=(e?380:20)+"px",overlay.style.display=t?"block":"none",vignette.style.display=t?"block":"none",a.interactProg.display=!1,a.interactMProg.display=!1,r.updateCrosshair(0,0),interactMsg&&(interactMsg.style.display="none"),topRight.style.marginRight=null},r.toggleControlUI=e=>{r.loading&&(e=!1),spectateUI.style.display=window.spectating&&e&&!r.hideGameUI?"block":"none",inGameUI.style.display=e&&r.active&&!r.hideGameUI?"block":"none",customGUIHolder.style.display=e&&r.active&&!r.hideGameUI?"block":"none",mobileUI.style.display=e&&r.active&&r.isMobileControls?"block":"none",overlay.style.display=e&&r.active&&!r.hideGameUI?"block":"none",vignette.style.display=e&&r.active&&!r.hideGameUI?"block":"none",aimRecticle.style.display=e&&r.active?"block":"none",instructionHolder.style.display=!e&&r.active?"block":"none",centerLeaderDisplay.style.display="none",aHolder.style.display=e?"none":"block",r.isMobileControls&&uiBase.classList.toggle("onGameM",e),uiBase.classList.toggle("onGame",e),infoHolder.style.display=e?"none":null,speakerDisplay.style.display=e&&r.active?"block":"none",endUI.style.display&&(menuHolder.style.display=e?"none":"block",r.toggleMenuHider(!e)),clearPops();var t=document.getElementById("ot-sdk-btn-floating");t&&(t.style.display=e?"none":"block"),e||(a.sprayWheelClose(),a.propWheelClose())},r.updateCrosshair=(e,t)=>{a.crosshairOpacity=t,a.crosshairScale=e}},function(e,t,i){const n=i(1),s=i(4);var a;const r=["N","E","S","W"];e.exports=class{constructor(){this.enabled=!1,this.width=300,this.scale=1;const e=document.getElementById("miniMapOverlay");this.dom=e;const t=document.getElementById("miniMapCanvas");this.canvas=t,this.setScale(1),this.ctx=t.getContext("2d",{alpha:!1}),this.type=0,this.focusedPlayer=null,this.mapBounds={min:[0,0,0],max:[0,0,0]},this.MAX_HEIGHT=0,this.showObjects=!0,this.playerBounds={min:[0,0,0],max:[0,0,0]},this.rotateOnCenter=!0,this.mapScale=6,this.focusedScale=3,this.hudScale=6,this.centeredOnPlayer=!0,this.mapImage=new Image,this.mapImage.onload=()=>this.mapImage.isReady=!0,this.useMapAnchors=!1,this.useImage=!1}setScale(e){const t=300*e;this.width=t,this.scale=e,this.canvas.width=t,this.canvas.height=t,this.dom.style.width=t+"px",this.dom.style.height=t+"px",document.documentElement.style.setProperty("--mm-scale",e)}setHudScale(e){this.hudScale=6*e}setZoom(e){if(this.focusedScale=3*e,this.mapScale=3*e,this.mapBounds.unscaledMin||this.mapBounds.unscaledMax){const e=[...this.mapBounds.unscaledMin].map((e=>e<0?e-=this.mapScale:e+=this.mapScale)),t=[...this.mapBounds.unscaledMax].map((e=>e<0?e-=this.mapScale:e+=this.mapScale));this.mapBounds.min=e,this.mapBounds.max=t,this.mapBounds.width=Math.abs(t[0]-e[0]),this.mapBounds.height=Math.abs(t[2]-e[2])}}setBounds(e){this.useMapAnchors=e.map.manager.mapAnchors.length>0;let t=[0,0,0],i=[0,0,0],n=[0,0,0];const s=this.useMapAnchors?e.map.manager.mapAnchors:e.map.spawns;for(let e=0;e<s.length;++e)(a=s[e]).x<t[0]&&(t[0]=a.x),a.x>i[0]&&(i[0]=a.x),a.z<t[2]&&(t[2]=a.z),a.z>i[2]&&(i[2]=a.z),a.y>i[1]&&(i[1]=a.y);const r=i[0]-t[0],o=i[2]-t[2],l=r/8,c=o/8;if(n[0]=t[0]+r/2,n[2]=t[2]+o/2,this.useMapAnchors){const e=Math.max(r,o);t[0]=n[0]-e/2,t[2]=n[2]-e/2,i[0]=n[0]+e/2,i[2]=n[2]+e/2}else i[0]+=2*l,t[0]-=2*l,i[2]+=2*c,t[2]-=2*c;const d=Math.abs(i[0]-t[0]),h=[...t],u=[...i];t=t.map((e=>e<0?e-=this.mapScale:e+=this.mapScale)),i=i.map((e=>e<0?e-=this.mapScale:e+=this.mapScale));const p=Math.abs(i[0]-t[0]),f=Math.abs(i[2]-t[2]);this.mapBounds={min:t,max:i,width:p,height:f,cen:n,unscaledWidth:d,unscaledMin:h,unscaledMax:u},this.MAX_HEIGHT=e.map.manager.objects.filter((e=>!e.noMinimap)).map((e=>e.y)).reduce(((e,t)=>Math.max(e,t)))}updatePlayerBounds(e){const t=this.focusedScale,i=this.mapBounds.width/t,n=this.mapBounds.height/t;this.playerBounds.min[0]=e.x-i,this.playerBounds.min[2]=e.z-n,this.playerBounds.max[0]=e.x+i,this.playerBounds.max[2]=e.z+n}convertCord(e,t){return e.map(this.centeredOnPlayer&&1==this.type?this.playerBounds.min[t]:this.mapBounds.min[t],this.centeredOnPlayer&&1==this.type?this.playerBounds.max[t]:this.mapBounds.max[t],-this.width/2,this.width/2)}cropMinCord(e){return Math.max(e,-this.width/2)}cropMaxCord(e){return Math.min(e,this.width/2)}getColor(e){return"hsl(220, 25%, "+(35-e/this.MAX_HEIGHT*20)+"%)"}drawDirectionalBlip(e,t,i,n,s,a,r){e=this.convertCord(e,0),i=this.convertCord(i,2);const o=-1==a&&!this.type,l=o?.5:1,c=l/2,d=this.hudScale*this.scale,h=this.type&&!r;this.ctx.save(1),this.ctx.translate(e,i),this.ctx.rotate(-1*n),this.ctx.lineWidth=2*this.scale,this.ctx.strokeStyle=o||r?"rgba(150, 150, 150, "+l+")":h?"rgba(158, 235, 86, "+l+")":1==s?"rgba(1, 107, 237, "+l+")":"rgba(236, 107, 1, "+l+")",this.ctx.fillStyle=o||r?"rgba(150, 150, 150, "+c+")":h?"rgba(158, 235, 86, "+c+")":1==s?"rgba(1, 107, 237, "+c+")":"rgba(236, 107, 1, "+c+")",this.ctx.beginPath(),this.focusedPlayer&&this.focusedPlayer.id==a&&(this.ctx.strokeStyle="rgba(255, 255, 255, "+l+")"),this.ctx.moveTo(0,.5*d),this.ctx.lineTo(1.1*-d,d),this.ctx.lineTo(0,1.25*-d),this.ctx.lineTo(1.1*d,d),this.ctx.lineTo(0,.5*d),this.ctx.fill(),this.ctx.stroke(),this.ctx.closePath(),this.ctx.restore(-1)}drawBlip(e,t,i){e=this.convertCord(e,0),t=this.convertCord(t,2),this.ctx.save(1),this.ctx.translate(e,t);const n=i/s.playerBlipTimer;this.ctx.globalAlpha=n,this.ctx.lineWidth=1,this.ctx.fillStyle="rgb(237, 66, 66)",this.ctx.strokeStyle="rgb(0, 0, 0)";const a=this.hudScale*this.scale;this.ctx.beginPath(),this.ctx.arc(0,0,a,0,2*Math.PI),this.ctx.fill(),this.ctx.stroke(),this.ctx.closePath(),this.ctx.restore(-1)}drawObject(e,t,i){t=t||"rgb(255, 255, 0)";const n=this.convertCord(e.x,0),s=this.convertCord(e.z,2),a=this.convertCord(e.x-e.width,0),r=this.convertCord(e.z-e.length,2),o=this.convertCord(e.x+e.width,0)-a,l=this.convertCord(e.z+e.length,2)-r;this.ctx.save(1),this.ctx.translate(n,s),this.ctx.lineWidth=3,this.ctx.strokeStyle="rgba(0, 0, 0, 0.8)",this.ctx.strokeRect(-o/2,-l/2,o,l),this.ctx.lineWidth=1.5,i?(this.ctx.fillStyle=t,this.ctx.fillRect(-o/2,-l/2,o,l)):(this.ctx.strokeStyle=t,this.ctx.strokeRect(-o/2,-l/2,o,l)),this.ctx.restore(-1)}drawImage(){const e=this.mapBounds.cen[0],t=this.mapBounds.cen[2],i=this.mapBounds.unscaledWidth/2,n=this.mapBounds.unscaledWidth/2,s=this.convertCord(e,0),a=this.convertCord(t,2),r=this.convertCord(e-i,0),o=this.convertCord(t-n,2),l=this.convertCord(e+i,0)-r,c=this.convertCord(t+n,2)-o;this.ctx.save(1),this.ctx.translate(s,a),this.ctx.drawImage(this.mapImage,-l/2,-c/2,l,c),this.ctx.restore(-1)}drawCardinalDirections(){this.ctx.save(1),this.ctx.beginPath(),this.ctx.arc(0,0,this.width/2-7*this.scale,0,2*Math.PI),this.ctx.strokeStyle="rgba(25, 25, 25, 0.85)",this.ctx.lineWidth=16*this.scale,this.ctx.stroke(),this.ctx.restore(-1),this.ctx.font="8px GameFont",this.ctx.textBaseline="middle",this.ctx.textAlign="center",this.ctx.lineWidth=1,this.ctx.fillStyle="#FFF";let e=0;r.forEach((t=>{this.ctx.save(1),this.ctx.rotate(n.toRad(e)),this.ctx.translate(0,-this.width/2),this.ctx.fillText(t,0,10*this.scale),this.ctx.restore(-1),e+=90}))}update(e,t,i,n,s){const r=this.type;this.type=s?0:1,this.type!=r&&this.dom.classList.toggle("roundMap",1==this.type),this.focusedPlayer=this.type?null:t.spect.target,this.ctx.save(1),this.ctx.clearRect(0,0,this.width,this.width),this.ctx.fillStyle="rgb(59, 58, 57)",this.ctx.fillRect(0,0,this.width,this.width),this.updatePlayerBounds(this.focusedPlayer||t.object.position),this.ctx.translate(this.width/2,this.width/2);if(this.rotateOnCenter&&this.centeredOnPlayer&&1==this.type){const e=-(this.focusedPlayer?this.focusedPlayer.xDire:t.xDr);this.ctx.rotate(-1*e)}if(this.useImage&&this.mapImage&&this.mapImage.isReady&&this.drawImage(),!this.useImage&&this.showObjects){const t=e.map.manager.objects.sort(((e,t)=>e.y-t.y));if(t.length>0)for(let e=0;e<t.length;++e)t[e]&&!t[e].noMinimap&&this.drawObject(t[e],this.getColor(t[e].y+t[e].height),!0)}if(e.mode&&e.mode.objective&&e.map.manager.objectives.length>0&&e.map.manager.objectives[e.activeObjective]&&this.drawObject(e.map.manager.objectives[e.activeObjective]),e.mode&&(e.mode.flags||e.mode.oneflag)&&e.map.manager.flags.length>0)for(let t=0;t<e.map.manager.flags.length;++t)a=e.map.manager.flags[t],e.mode.oneflag&&!a.neutral||!e.mode.oneflag&&a.neutral||this.drawObject(a,a.team==i?"#2196F3":"#ed4242");if(e.mode&&e.mode.site&&e.map.manager.sites.length>0)for(let t=0;t<e.map.manager.sites.length;++t)this.drawObject(e.map.manager.sites[t]);if(e.mode&&e.mode.dom&&e.map.manager.domzones.length>0)for(let t=0;t<e.map.manager.domzones.length;++t){if(!(a=e.map.manager.domzones[t]))continue;let n=null==a.capturedBy?"#dbdbdb":a.capturedBy==i?"#5699EB":"#eb5656";this.drawObject(a,n)}for(let t=0;t<e.players.list.length;++t){(a=e.players.list[t]).minimapTimer&&(a.minimapTimer-=n,a.minimapTimer<=0&&(a.minimapTimer=0,a.minimapPos=null));let r=i==a.team||e.mode&&e.mode.fakeNames&&2!=i;a.active&&!a.isYou&&(r||s?this.drawDirectionalBlip(a.x,a.y,a.z,a.xDire,a.team,a.id):a.minimapTimer&&this.drawBlip(r?a.x:a.minimapPos.x,r?a.z:a.minimapPos.z,a.minimapTimer))}(!this.focusedPlayer&&!this.type||this.type)&&this.drawDirectionalBlip(t.object.position.x,t.object.position.y,t.object.position.z,t.xDr,0,-1,!!this.type),1==this.type&&this.drawCardinalDirections(),this.ctx.restore(-1)}toggle(e,t){(e.mode.noMinimap||!e.config.minimaps)&&(t=!1),e.customsData&&s.isProd&&(t=!1),this.enabled=!!t,this.dom.style.display=t?"":"none",timerHolder.classList.toggle("topLeftOld",!t),timerIcon.classList.toggle("topLeftOld",!t),timerVal.classList.toggle("topLeftOld",!t),timerInner.classList.toggle("topLeftOld",!t),matchInfo.classList.toggle("topLeftOld",!t),specNames.classList.toggle("topLeftOld",!t),specStats.classList.toggle("topLeftOld",!t),specSUS.classList.toggle("topLeftOld",!t)}updateImage(e){let t=e.map.maps[e.mapIndex],i=t.mmId&&!/[^\dtlnesacdgxufq]+/gim.test(t.mmId)?t.mmId:"";i.length?(i=parseInt((i+"").replace(/[^\d]/gim,"")),this.mapImage.isReady=!1,this.mapImage.onload=()=>this.mapImage.isReady=!0,this.mapImage.src=n.userAssetsUrl((i||0)+"/texture.png"),this.useImage=!0):this.useImage=!1}reset(e,t){this.mapImage.isReady=!1,this.setBounds(e),this.updateImage(e),this.toggle(e,t)}}},function(e,t,i){(function(t){let n,s="undefined"!=typeof location;const a=i(320);n=s?i(0):a;const r=i(322),o=i(4),l=i(67),c=i(299),d=i(15),h=i(1),u=new(i(325))(a),p=new(i(37)),f=i(266),m=i(326),g=i(289),v=i(63);let y=i(39),b=0;const w=i(330),x=i(123),{validateMap:S}=i(331),M=i(12),k=i(62),_=new n.Vector3,T=i(280)(),C=i(332);e.exports=function(e,s,a,I,A,R,P,E,D,O,L,j,z,B,N,F){var H,U,V;Object.defineProperty(this,"isServer",{get:()=>O?1:0}),this.THREE=n,this.COLLISIONS=u,this.isOfficial=z,this.isCustom=!!e,this.isDedicated=B,this.isPrimary=0==s,this.playTime=0,this.playCount=0,this.uniquePlays=[],this.updatedGameInstance=!1,this.connectedClients=0,this.bypassedUsers=0,this.password=void 0,this.sid=b++,this.gameInstance=null,this.initInProgress=!1,this.isDestroyed=!1,this.initQueue=[],this.gameClosed=!1,this.experimentalFeatures=!1,this.map=new r(T,I,P,R),this.bots=new C(this),this.store=i(35),this.badges=i(290),this.flags=i(291),this.weapons=i(29),this.upgradeWeapons=i(335),this.BUILD_OBJS=i(336),this.buildCount=0,this.attach=i(292),this.challenges=i(337),this.leaderboard=new(i(338))(this,O,a),this.classes=v,this.streaks=i(339),this.effects=i(267),this.airDrop=new(i(340))(this,O,I,R),this.triggers=f,this.AI=new(i(342))(this,I,O),this.projectiles=new(i(343))(this,O),this.controls=null,this.players=new m(this,I,R,P,p,O),this.pets=new(i(293))(this,I,O),this.movement=i(28),this.endData={ed:[],vo:null,mts:[],mdls:[]},this.customGUIs=[],this.endTimer=0,this.endIndex=null,this.hideWeapon=[!1,!1,!1],this.banList=[],this.banTempList=[],this.voteToKick=null,this.voteInitiators=[],this.voteToForfeit=null,this.forfeitInitiators=[],this.teamFlags=[],this.teamScoreUpd=[];var G=this;if(this.lastAmbS=null,this.lastAmbSC=null,this.passCode=null,this.krRewards=!1,this.mimicPubs=!1,this.defaultSetts=!1,this.leaverTimeout=12e4,this.afkTimeout=3e5,this.loadedSprays={},this.triggerQueue=[],this.playerSounds=[],this.globalVals={},this.config={},this.isComp=!1,this.useLOD=!0,this.hidePlayers=!1,this.sendFrequency=o.serverSendFrequency,this.tickFrequency=o.serverTickFrequency,this.tickRate=1e3/this.tickFrequency,this.syncFrequency=o.serverSyncFrequency,this.syncRate=1e3/this.syncFrequency,this.aiSyncT=o.aiSyncT,this.leaderOSync=o.leaderOSync,this.airDSyncT=o.airDSyncT,this.networkData=null,this.eventIndex=0,this.eventTimer=0,this.eventTriggered=!1,this.sessionId=O?h.generateUUID():null,this.triggerTypes=[],this.hostTransfers=0,this.secTimer=0,this.didChecks=!1,this.fixedMapRotation=null,this.fixedMapRotationIndex=0,!O)var W=window.log||console.log;const q=O?{log:function(e){G&&G.broadcast&&G.broadcast("ksL",!1,e.map((e=>h.logStringify(e))))},error:function(e){G&&G.broadcast&&G.broadcast("ksL",!0,e.map((e=>h.logStringify(e))))}}:{log:function(e){W("%c[KRUNKSCRIPT] "+e.map((e=>h.logStringify(e))).join(" "),"color:#00b8d4")},error:function(e){W("%c[KRUNKSCRIPT] "+e.map((e=>h.logStringify(e))).join(" "),"background:#3a0000;color:#00b8d4")}},Y=i(344)(o.sysLibName,q,E,!I,I?D:O,this,I,A,R);this.mainScript=null,this.addScripts=function(e,t){if(("client"==t||o.serverScripting)&&o.scriptingEnabled&&e&&e[t]){const i=e[t].replace(//gm,"(").replace(//gm,")");this.mainScript=Y.parse(i)}},this.hasHost=function(){return!!G.host||!!G.isDedicated},this.isPubType=function(){return!this.hasHost()||!!this.hasHost()&&!!this.mimicPubs},this.lobbyPlayers={},this.updLobbyP=function(e,t,i,n){var s=G.lobbyPlayers[t];if(s&&s[i]!=n&&h.isNumber(n)){var a=!1;if("c"==i)if(a=!0,G.config.limitClasses){var r=G.config["classLim"+n]||0,o=0;if(r)for(var l in G.lobbyPlayers){if(G.lobbyPlayers.hasOwnProperty(l))if((d=G.lobbyPlayers[l])&&d.t==s.t&&d.c==n&&++o>=r){a=!1;break}}else a=!1}if("t"==i&&G.config.selTeam){a=!0;var c=(G.config.tmSize||0)+1;o=0;for(var l in G.lobbyPlayers){var d;if(G.lobbyPlayers.hasOwnProperty(l))if((d=G.lobbyPlayers[l])&&d.a&&d.t==n&&++o>=c){a=!1;break}}a&&delete G.lobbyPlayers[t].c}return!!a&&(G.lobbyPlayers[t][i]=n,G.syncLobbyP(e,t,0),!0)}},this.syncLobbyP=function(e,t,i){if(G.isComp)if(0==i){var n=e.account||{},s=!G.lobbyPlayers[t];s&&(G.lobbyPlayers[t]={}),!n&&s||(G.lobbyPlayers[t].i=n.id||0,G.lobbyPlayers[t].n=n.name||0,G.lobbyPlayers[t].v=n.featured||0,G.lobbyPlayers[t].cl=n.clan||0,G.lobbyPlayers[t].l=n.level||0,G.lobbyPlayers[t].f=n&&n.stats&&null!=n.stats.flg?n.stats.flg:-1);var a=!G.lobbyPlayers[t].a;G.lobbyPlayers[t].a=1,s||a?(O.send(e.id,"cd",G.lobbyPlayers),G.broadcastEx(e.id,"cda",t,G.lobbyPlayers[t])):G.broadcast("cda",t,G.lobbyPlayers[t])}else if(1==i&&G.lobbyPlayers[t]){1==G.lobbyPlayers[t].a&&null!=G.lobbyPlayers[t].t&&(G.lobbyPlayers[t].rej=1),G.lobbyPlayers[t].a=0,delete G.lobbyPlayers[t].c,delete G.lobbyPlayers[t].t,G.broadcast("cda",t,null)}},this.getLobbyDat=function(e,t,i){var n=G.lobbyPlayers[t];return n&&G.isComp?null==n[e]?i:n[e]||0:i},this.canSpawn=function(e){if(G.isComp){var t=G.lobbyPlayers[e];if(!t)return"Missing Sync Data";if(!t.t)return"Please join a Team to Spawn";if(null==t.c)return"Please select a Class to Spawn"}return null},this.playAnim=function(e,t,i,n){if(e.hasAnim&&t)if(O){var s=o.clipNames.indexOf(t);if(n||s>=0)for(var a=0;a<G.players.list.length;++a)((H=G.players.list[a]).active||H.spectating)&&H.send("ana",e.uid,n?t:s,n?1:0,!0)}else e.meshRef&&e.meshRef.playClip&&e.meshRef.playClip(t,i)},this.servAnim=function(e,t,i){(H=G.map.manager.findByUid(e))&&G.playAnim(H,i?t:o.clipNames[t],1)},this.uniquePlay=function(e){e&&!e.countedPlay&&(this.uniquePlays.indexOf(e.id)<0?(this.uniquePlays.push(e.id),this.playCount++,e.countedPlay=!0):e.countedPlay=!0)},this.getInfo=function(){return this.map.maps[this.mapIndex].name},this.applyNetworking=function(e){e=e||{},this.sendFrequency=e.snf||o.serverSendFrequency,this.tickFrequency=e.tf||o.serverTickFrequency,this.tickRate=1e3/this.tickFrequency,this.syncFrequency=e.sf||o.serverSyncFrequency,this.syncRate=1e3/this.syncFrequency,this.aiSyncT=e.aist||o.aiSyncT,this.leaderOSync=e.los||o.leaderOSync,this.airDSyncT=e.adst||o.airDSyncT,this.networkData=e},this.applyNetworking(),this.resetClasses=function(){this.config.classes=[];for(var e=0;e<this.classConfig.length;e++)this.classConfig[e].hide&&(!this.isSandbox&&!this.isCustom||this.isOfficial&&this.isOfficial.rotationMaps)||this.config.classes.push(e)},this.applyConfig=function(e,t,i){e=e||{};var n=o.hostTypes[i||0]||{};if(this.config={cost:0},this.isComp=!!e.isComp,this.weaponConfig=h.superClone(this.weapons),e.weps){this.customData||={},this.customData.weps=e.weps;for(var s=0;s<o.weaponConfig.length;++s){d=o.weaponConfig[s];for(var a=0;a<this.weaponConfig.length;a++)if(e.weps[a]&&null!=this.weapons[a][d.varN]&&null!=e.weps[a][d.varN])if(d.bool)this.weaponConfig[a][d.varN]=!!e.weps[a][d.varN];else if(d.input){var r=e.weps[a][d.varN];h.isString(r)||(r=this.weapons[a][d.varN]+""),/[^\w \-\|]+/gim.test(r)&&(r=this.weapons[a][d.varN]+""),r.length>(d.len||16)&&(r=this.weapons[a][d.varN]+""),this.weaponConfig[a][d.varN]=r}else if(d.select){r=e.weps[a][d.varN];this.weaponConfig[a][d.varN]=null==d.options[r]?d.def:parseInt(r)}else{r=e.weps[a][d.varN];if(!h.isNumber(r))continue;r!=this.weaponConfig[a][d.varN]&&(this.weaponConfig[a][d.varN]=h.limitMM(r,d.min,d.max))}}}for(s=0;s<this.upgradeWeapons.length;s++)if(null!=this.upgradeWeapons[s].projectile){for(var l in this.upgradeWeapons[s])l.startsWith("pj_")&&(this.upgradeWeapons[s].projectile[l.replace("pj_","")]=this.upgradeWeapons[s][l]);(c=this.upgradeWeapons[s].projectile.asset?(this.upgradeWeapons[s].projectile.asset||"").replace(/[^\d]/g,""):null)&&(this.upgradeWeapons[s].customProj={s:c+"/model",pjA:this.upgradeWeapons[s].projectile.asset||null,pjSp:this.upgradeWeapons[s].projectile.spd,pjG:this.upgradeWeapons[s].projectile.grav,pjSC:this.upgradeWeapons[s].projectile.scale})}for(s=0;s<this.weaponConfig.length;s++)if(null!=this.weaponConfig[s].projectile){for(var l in this.weaponConfig[s])l.startsWith("pj_")&&(this.weaponConfig[s].projectile[l.replace("pj_","")]=this.weaponConfig[s][l]);var c;(c=this.weaponConfig[s].projectile.asset?(this.weaponConfig[s].projectile.asset||"").replace(/[^\d]/g,""):null)&&(this.weaponConfig[s].customProj={s:c+"/model",pjA:this.weaponConfig[s].projectile.asset||null,pjSp:this.weaponConfig[s].projectile.spd,pjG:this.weaponConfig[s].projectile.grav,pjSC:this.weaponConfig[s].projectile.scale})}if(e.cls){this.classConfig=h.superClone(this.classes),this.customData||={},this.customData.cls=e.cls;for(s=0;s<o.classConfig.length;++s){d=o.classConfig[s];for(a=0;a<this.classConfig.length;a++)if(e.cls[a]&&null!=this.classes[a][d.varN]&&null!=e.cls[a][d.varN])if(d.bool)this.classConfig[a][d.varN]=!!e.cls[a][d.varN];else if(d.input){r=e.cls[a][d.varN];h.isString(r)||(r=this.classes[a][d.varN]+""),/[^\w \-\|]+/gim.test(r)&&(r=this.classes[a][d.varN]+""),r.length>(d.len||16)&&(r=this.classes[a][d.varN]+""),this.classConfig[a][d.varN]=r}else if(d.select){r=e.cls[a][d.varN];this.classConfig[a][d.varN]=null==d.options[r]?d.def:parseInt(r)}else{r=e.cls[a][d.varN];if(!h.isNumber(r))continue;r!=this.classConfig[a][d.varN]&&(this.classConfig[a][d.varN]=h.limitMM(r,d.min,d.max))}}}else this.classConfig=this.classes;if(e.prks){var d;this.effectConfig=h.superClone(this.effects),this.customData||={},this.customData.prks=e.prks;for(s=0;s<o.effectConfig.length;++s){d=o.effectConfig[s];for(a=0;a<this.effectConfig.length;a++)if(e.prks[a]&&null!=this.effects[a][d.varN]&&null!=e.prks[a][d.varN])if(d.bool)this.effectConfig[a][d.varN]=!!e.prks[a][d.varN];else if(d.input){r=e.prks[a][d.varN];h.isString(r)||(r=this.effects[a][d.varN]+""),/[^\w \-\|]+/gim.test(r)&&(r=this.effects[a][d.varN]+""),r.length>(d.len||16)&&(r=this.effects[a][d.varN]+""),this.effectConfig[a][d.varN]=r}else if(d.select){r=e.prks[a][d.varN];this.effectConfig[a][d.varN]=null==d.options[r]?d.def:parseInt(r)}else{r=e.prks[a][d.varN];if(!h.isNumber(r))continue;r!=this.effectConfig[a][d.varN]&&(this.effectConfig[a][d.varN]=h.limitMM(r,d.min,d.max))}}}else this.effectConfig=this.effects;for(s=0;s<o.serverConfig.length;++s)if((d=o.serverConfig[s]).bool)this.config[d.varN]=null==e[d.varN]?n.comp&&null!=d.defC?d.defC:d.def:!!e[d.varN];else if(d.input){r=e[d.varN];h.isString(r)||(r=n.comp&&null!=d.defC?d.defC:d.def),this.config[d.varN]=h.sanitizeStr(r),/[^\w \-\|]+/gim.test(r)&&(r=n.comp&&null!=d.defC?d.defC:d.def),r.length>16&&(r=r.substring(0,16))}else if(d.select){r=e[d.varN];this.config[d.varN]=null==d.options[r]?n.comp&&null!=d.defC?d.defC:d.def:parseInt(r)}else{r=e[d.varN];h.isNumber(r)||(r=n.comp&&null!=d.defC?d.defC:d.def);var u=d.max;-2==t?u=d.maxD||u:3==t?u=d.maxF||u:2==t?u=d.maxP||u:0==t&&(u=d.maxG||u),this.config[d.varN]=h.limitMM(r,d.min,u)}for(s=0;s<o.serverUpg.length;++s)d=o.serverUpg[s],this.config[d.varN]=null!=e[d.varN]&&!!e[d.varN],d.cost&&this.config[d.varN]&&(this.config.cost+=d.cost);if(this.config.maps=e.maps,!h.isArray(this.config.maps)||!this.config.maps.length||this.config.maps.length>this.map.maps.length){this.config.maps=[];for(s=0;s<this.map.maps.length;s++)this.config.maps.push(s)}else for(s=0;s<this.config.maps.length;s++)if(!this.map.maps[this.config.maps[s]]){this.config.maps=[0];break}if(this.config.modes=e.modes,!h.isArray(this.config.modes)||!this.config.modes.length||this.config.modes.length>this.map.modes.length)this.config.modes=null;else for(s=0;s<this.config.modes.length;s++)if(!this.map.modes[this.config.modes[s]]){this.config.modes=null;break}var p=!1;if(this.config.classes=e.classes,!h.isArray(this.config.classes)||!this.config.classes.length||this.config.classes.length>this.classConfig.length)p=!0;else for(s=0;s<this.config.classes.length;s++)if(!this.classConfig[this.config.classes[s]]){p=!0;break}p&&this.resetClasses()},this.applyConfig(),this.prepareGame=function(e,t,i,n,s,a,r,l,c,d){if(e)try{if(-1!=(e=e.replace(/\(/gm,"").replace(/\)/gm,"")).indexOf("("))return"Invalid Map Format.";var u=c||JSON.parse(e);if(this.mainScript=null,o.scriptingEnabled&&u.scripts){if(l||d){for(const e in u.scripts)u.scripts[e]=h.b64d(u.scripts[e]);l&&(u.scripts=l(u.scripts))}this.addScripts(u.scripts,O?"server":"client"),l&&u.scripts&&(delete u.scripts.server,e=JSON.stringify(u))}var f={};if(n)try{f=JSON.parse(n)}catch(e){}if(this.customMapData={data:e,n:u.name||"",id:t,accType:s,creator:i,info:n,thumb:!!f.t,hasLM:!!f.l},!a){var m=S(u,!!i||s>1);if(m)return m}for(var g=0;g<u.objects.length;++g){if(!p.prefabs[u.objects[g].i||u.objects[g].id||0])return"Object ID error.";if(!p.textures[u.objects[g].t||0])return"Object Texture error."}if(u.creator=i,u.hasLM=!!f.l,u.official=this.isOfficial,u.id=t,this.isOfficial){var v=[];v[r]=u,this.map.setMaps(v),this.config.maps=[r]}else this.map.setMaps([u]),this.config.maps=[0]}catch(e){return console.log(e),"Map error occured."}},this.playerSound=function(e,t,i,n,s,a,r,l,c,d,u,p){e=h.isNumber(e)&&!p?o.networkSounds[e]:e;var f=!!u||this.players.findBySid(t);if(!f||!f.isPlayer||f.isYou||!G.hidePlayers||f.isBot){var m=Howler.pos();f&&(!l||l>=(f.latestData?h.getD3D(f.x,f.y,f.z,m[0],m[1],m[2]):h.getD3D(i,n,s,m[0],m[1],m[2])))&&(f.latestData?R.play3D(e,f.x,f.y,f.z,a||1,r,c,d,p,false):R.play3D(e,i,n,s,a||1,r,c,d,p,false))}},this.triggerImgSound=function(e,t,i){O?O.send(i.id,"is",e,t):(e&&R.play(e,1),t&&imgFlash&&(imgFlash.style.display="block",imgFlash.style.opacity=1,imgFlash.style.backgroundImage="url('"+h.assetsUrl("/"+t+".png")+"')"))},this.playSound=function(e,t,i,n,s,a,r,l,c,d,u,p,f){if(t)if(R)R.play(h.isNumber(e)&&!f?o.networkSounds[e]:e,t,c,l,void 0,!1);else for(var m=0;m<this.players.list.length;++m)!(H=this.players.list[m]).active&&!H.spectating||i==H.sid&&!r||H.send("s",e,i,Math.round(n),Math.round(s),Math.round(a),t,l,d,u,p,f)},this.getSoundIndex=function(e){return h.isNumber(e)?id:o.networkSounds.indexOf(e)},this.destroyObj=function(e){for(var t=0;t<G.map.manager.objects.length;++t)if((H=G.map.manager.objects[t]).uid==e){H.active=!1,H.destroyed=!0,R&&H.breakSnd&&R.play3D(H.breakSnd,H.x,H.y,H.z,1,h.randFloat(.9,1)),I&&(H.dynamic?I.ShaderMesh.removeBuild(H.uid,G.BUILD_OBJS[H.buildInd]):null!=H.meshRef&&(H.meshRef.visible=!1),I.updateShadowMap());break}},this.buildObj=function(e,t,i,n,s,a,r,l,c,d,h){var u,p=G.BUILD_OBJS[e];return!!p&&(G.buildCount++,h&&G.buildCount>=o.buildMax?(h.send("ch",-1,null,"Build limit reached",2),!1):(d&&(i-=(a||p.h)/2),(u=p.custMod?p.custMod(G.map.manager,t,i,n,s||p.w,r||p.l,a||p.h,l,O?void 0:c):G.map.manager.addBlock(t,i,n,s||p.w,r||p.l,a||p.h,null,{src:p.src||"grain_0",uido:O?void 0:c,shaderBased:!0,colr:p.color,buildInd:e,breakSnd:p.breakSnd,model:p.model,health:p.health,dynamic:!0})).typeInd=e,G.map.manager.applyToQuad(u),O?G.broadcast("bo",e,t,i,n,s,a,r,l,u.uid):R&&I&&(I.updateShadowMap(),d||R.play3D("build_0",t,i,n,1)),!0))},this.removeBuilds=function(){if(I){if(I.ShaderMesh.BUILDS&&I.ShaderMesh.BUILDS.clear(),I.ShaderMesh.MODELS)for(var e in I.ShaderMesh.MODELS)I.ShaderMesh.MODELS[e].mesh&&I.ShaderMesh.MODELS[e].mesh.clear();I.updateShadowMap()}G.buildCount=0,G.map.manager.removeFromQuad("dynamic",!0);for(var t=G.map.manager.objects.length-1;t>=0;--t)G.map.manager.objects[t].dynamic&&G.map.manager.objects.splice(t,1)},this.moveObj=function(e,t,i,n,s){s=s||0,e.x=t,e.y=i,e.z=n,e.meshRef&&e.meshRef.position&&e.meshRef.position.set(t,i-s,n)},this.teleportToNode=function(e,t){var i=G.map.manager.pathNodes[t];if(i){var n=G.map.manager.objects[e];if(n){G.map.manager.removeFromQuad("uid",n.uid),G.moveObj(n,i.x,i.y+n.height,i.z,n.height),I&&I.updateShadowMap(),G.map.manager.applyToQuad(n);var s=G.map.manager.movedObjs.indexOf(n.uid);s>-1?G.map.manager.movedObjs[s+1]=t:G.map.manager.movedObjs.push(n.uid,t),O&&G.broadcast("mo",e,t)}}},this.teleportFromNode=function(e){var t=G.map.manager.objects[e];if(t){var i=G.map.manager.movedObjs.indexOf(t.uid);-1!=i&&(G.map.manager.removeFromQuad("uid",t.uid),G.moveObj(t,t.orgX,t.orgY,t.orgZ,t.height),I&&I.updateShadowMap(),G.map.manager.applyToQuad(t),G.map.manager.movedObjs.splice(i,2),O&&G.broadcast("mf",e))}},this.rumble=function(e,t,i,n,s){s=s||1;for(var a=0;a<this.players.list.length;++a)if((H=this.players.list[a]).active||H.spectating){var r=h.getD3D(e,t,i,H.x,H.y,H.z);if(r>s)continue;var o=n;H.active&&(o*=1-r/s),H.send("shk",o)}},this.explosion=function(e,t,i,n,s,a,r){this.mode&&this.mode.explSMlt&&(n*=this.mode.explSMlt);for(var o=0;o<this.players.list.length;++o)if(((H=this.players.list[o]).active||H.spectating)&&(H.send("ex",Math.round(e),Math.round(t),Math.round(i),Math.round(n),r.smCnt,r.lgCnt),!r.aiOnly&&H.active&&!H.noPVP&&(!a||!a.noPVP)&&(H.forcePVP&&a&&a.forcePVP||!H.forcePVP&&(!a||!a.forcePVP)))){if(null!=r.stk&&a==H)continue;if((d=1-(c=h.getD3D(e,t,i,H.x,H.y,H.z))/n)>0){var l=s*d*(H==a?.2:1);a&&a.smite&&(l=1e4),a&&a.attributes&&a.attributes.dmg&&(l*=a.attributes.dmg),this.mode&&this.mode.explMlt&&H!=a&&(l*=this.mode.explMlt),this.players.changeHealth(H,a,l,a==H,void 0,{wep:r.wId})?(this.players.kill(H,a,{dst:c,wId:r.wId,stk:r.stk,pkg:r.pkg},!1,null!=r.stk),null!=r.stk&&this.streaks[r.stk]&&this.streaks[r.stk].onKill&&this.streaks[r.stk].onKill(this,a,O)):null!=r.stk&&this.streaks[r.stk]&&this.streaks[r.stk].onCollision&&this.streaks[r.stk].onCollision(this,H,O)}}for(o=0;o<this.AI.ais.length;++o){var c,d;if((H=this.AI.ais[o]).active&&(!H.team||!a||H.team!=a.team))if((d=1-(c=h.getD3D(e,t,i,H.x,H.y,H.z))/n)>0&&a){l=s*d;a.smite&&(l=1e4),a.attributes&&a.attributes.dmg&&(l*=a.attributes.dmg),H.changeHealth(-l,a),a&&a.isPlayer&&(H.killScore&&this.mode&&this.mode.pointsPerHit&&this.players.score(a,Math.ceil(l*this.mode.pointsPerHit),1),!H.active&&H.killScore&&this.players.score(a,H.killScore,1),this.showHit(a,H,Math.round(s*d),!1,!0,r.noHit))}}},this.showHit=function(e,t,i,n,s,a){for(var r=0;r<G.players.list.length;++r)(e&&e==G.players.list[r]||e&&G.players.list[r].specStream==e.sid)&&G.players.list[r].send("4",t.sid,Math.round(i),n||!1,!t.active,s||!1,a)};var K=[];this.getSpawnPoint=function(e,t,i,n){var s=!!this.waitTimers&&!!this.waitTimers[0]&&!!this.waitTimers[0].comp,a=e;if(e&&this.flippedSpawns&&(1==e?a=2:2==e&&(a=1)),i)return this.map.spawns[0];K.length=0;for(var r,l=0;l<this.map.spawns.length;++l){this.map.spawns[l].dst=0;for(var c=0;c<this.players.list.length;++c)!(H=this.players.list[c])||!H.active||H==t||e&&H.team==e||this.canSee(H,this.map.spawns[l].x,this.map.spawns[l].y+o.playerHeight,this.map.spawns[l].z)||(this.map.spawns[l].dst++)}this.map.spawns.sort(h.orderByDst),r=this.map.spawns[0].dst;var d=this.mode&&this.mode.teams;for(l=0;l<this.map.spawns.length;++l)if((!this.map.spawns[l].comp||s||n)&&(!this.map.spawns[l].teamOnly||this.map.spawns[l].team==a))if(s||n){if(this.map.spawns[l].comp&&(!d||d&&this.map.spawns[l].team==a)){K.push(this.map.spawns[l]);break}}else if(this.map.spawns[l].dst==r){this.map.spawns[l].dst=0;for(c=0;c<this.players.list.length;++c)!(H=this.players.list[c]).active||H==t||e&&H.team==e||(this.map.spawns[l].dst+=h.getD3D(this.map.spawns[l].x,this.map.spawns[l].y,this.map.spawns[l].z,H.x,H.y,H.z));if(this.mode&&(this.mode.flags||this.mode.oneflag))for(var u=0;u<this.map.manager.flags.length;++u)(H=this.map.manager.flags[u]).neutral||H.team!=e&&(this.map.spawns[l].dst+=h.getD3D(this.map.spawns[l].x,this.map.spawns[l].y,this.map.spawns[l].z,H.x,H.y,H.z));if(this.mode&&this.mode.dom)for(u=0;u<this.map.manager.domzones.length;++u)(H=this.map.manager.domzones[u]).capturedBy&&H.capturedBy!=e&&(this.map.spawns[l].dst+=h.getD3D(this.map.spawns[l].x,this.map.spawns[l].y,this.map.spawns[l].z,H.x,H.y,H.z));(a&&this.map.spawns[l].team==a||!this.map.spawns[l].team)&&K.push(this.map.spawns[l])}K.sort(h.orderByDst),K.reverse();var p=K[0]||this.map.spawns[0];return s?this.getPointSpread(p.x,p.z,p.y,40,p.dir):p.spread?this.getPointSpread(p.x,p.z,p.y,p.spread+7,p.dir):p},this.getPointSpread=function(e,t,i,n,s){for(var a=h.randFloat(-Math.PI,Math.PI),r=1/(n*Math.sin(a+Math.PI)),o=1/(n*Math.cos(a+Math.PI)),l=1,c=0;c<this.map.manager.objects.length;++c)if((U=this.map.manager.objects[c]).active){var d=h.lineInRect(e,t,i+1,r,o,1,U.x-U.width,U.z-U.length,U.y-U.height,U.x+U.width,U.z+U.length,U.y+U.height);d&&d<=l&&(l=d)}return n-=10,{dir:s,x:Math.round(e+n*l*Math.sin(a+Math.PI)),z:Math.round(t+n*l*Math.cos(a+Math.PI)),y:i}},this.updateAccounts=function(){for(var e=[],t=0;t<this.players.list.length;++t)if((H=this.players.list[t]).account&&!H.account.hack&&!H.kpdData&&3!=this.endIndex){if(H.playTimeUpdated||(H.account.timePlayed+=H.playTime||0,H.account.lastPlayTime=H.playTime||0,H.playTimeUpdated=!0),this.players.saveClassScores(H),this.players.saveWeaponStats(H),this.checkBadges(H),this.transferStats(H),this.isPubType()&&(!this.mode||!this.mode.noReward)){var i=H.score;H.account.BP&&H.tmpBPData&&H.tmpBPData.gn&&F.progress(H,H.tmpBPData.gn),H.account.games++,H.account.kills+=H.kills,H.account.deaths+=H.deaths,H.didWin&&H.account.wins++,H.account.score+=i,e.push(H)}H.send("ua",H.account.getData())}e.length&&this.saveRewards(e)},this.saveRewards=function(e){for(var t="",i="",n=0;n<e.length;++n)e[n]&&e[n].account&&e[n].reward&&e[n].ipAddress&&(t+=(t.length?",":"")+e[n].account.id+","+e[n].reward,i+=(i.length?",":"")+e[n].ipAddress);t.length&&a.call(20,[t],(function(t,i){if(i&&i[0]&&i[0][0]&&(i=i[0][0].result))try{var n;i=i.split(",");for(var s=0;s<i.length;++s)(n=parseInt(i[s]))&&e[s]&&(e[s].account.funds=n,e[s].send("uf",n))}catch(e){}}))},this.incStat=function(e,t){G&&G.mode&&G.mode.skipStats&&!(G.mode.skipStats.indexOf(e)<0)||t&&t.account&&this.isPubType()&&(t.tmpStats[e]||(t.tmpStats[e]=0),t.tmpStats[e]++)},this.incMedal=function(e,t){t&&(G.isSandbox||t.account&&G.isPubType())&&(t.medals[e]||(t.medals[e]=0),t.medals[e]++)},this.transferStats=function(e){if(e){if(e.account&&this.isPubType())for(var t in e.tmpStats)e.account.stats[t]||=0,e.account.stats[t]+=e.tmpStats[t];e.tmpStats={}}},this.checkLeave=function(e,t){e&&(t||this.removePlayerSound(e.sid,null,!0),e.account&&!this.endTimer&&this.isPubType()&&!this.isOfficial&&e.affectStats&&(e.account.games=(e.account.games||0)+1,t&&(e.account.deaths=(e.account.deaths||0)+1)),t||!e.account||e.playTimeUpdated||(e.account.timePlayed+=e.playTime||0,e.playTimeUpdated=!0))},this.checkChallenges=function(e,t){a&&e&&e.account&&this.isPubType()&&e.account.level>=o.minChalLevel&&this.challenges.finalize(e,a,O,t,F)},this.storageUpdt=function(e,t,i,n,s,r){if(!a)return s(null,"Error");if(!this.defaultSetts&&o.isProd)return s(null,"Storage only supported on published maps");if(!this.customMapData||!this.customMapData.n)return s(null,"Missing map data");n="global"==n?1:0,e+="";var l="",c=0;if(r)l=r;else{if(!t||"object"!=typeof t)return s(null,"Missing storage data");for(var d in t)if(t.hasOwnProperty(d)){c++;var h=(d+"").replace(/[,'"]/g,"");if(h.length>20)return s(null,"Key too long");var u=(t[d]+"").replace(/[,'"]/g,"");if(u.length>100)return s(null,"Value too long");""!=l&&(l+=","),l+=h+","+u}if(c>30)return s(null,"Too many keys: max 30")}return(i=parseInt(i)||0)<0||i>5?s(null,"Invalid storage type"):this.players.findByName(e)?void a.call(154,[e,this.customMapData.n,i,n,l],(function(e,t){t=t&&t[0]?t[0]:null,s(t,e)})):s(null,"Player not connected")},this.getStoragePlayer=function(e,t,i){return a?!this.defaultSetts&&o.isProd?i(null,"Storage only supported on published maps"):(this.customMapData&&this.customMapData.n&&this.customMapData.creator||i(null,"Missing map data"),t=t||this.customMapData.n,void a.call(163,[t+"",e+"",this.customMapData.creator],(function(e,t){t=t&&t[0]?t[0]:null,e||!t?i(null,"No data found"):i(t)}))):void 0},this.savePlayerData=function(e,t){if(a&&e.account){if(this.isPubType()){var i=0,n=0,s=0;for(var r in o.regionIND)if(r==t){i=o.regionIND[r];break}if(i)for(var l=1;l<6;++l)i==l&&(e.account.stats["r"+l]||(e.account.stats["r"+l]=0),e.account.stats["r"+l]++),e.account.stats["r"+l]&&e.account.stats["r"+l]>=s&&(s=e.account.stats["r"+l],n=l);n&&(e.account.regionInd=n)}var c=this.customMapData?this.customMapData.id:0,d=e.account;d&&(a.call(2,[d.id,d.kills,d.wins,d.games,d.deaths,d.score,d.clan,d.timePlayed,JSON.stringify(d.stats),d.regionInd,c,d.clanKills,d.clanDeaths,d.clanTime]),!d||d.hack||e.kpdData||this.checkChallenges(e,!0))}},this.lockPlayer=function(e,t){e.locked=t,e.send("lock",t)},this.lockMove=function(e,t,i,n,s){if(G.moveLock=!0,O)for(var a,r=0;r<this.players.list.length;r++)!(a=this.players.list[r]).spectating&&a.active&&a.send("lm",a.x,a.y,a.z,a.xDire);else e&&e.resetPosition(t,i,n,s)},this.unlockMove=function(){G.moveLock=!1,O&&G.broadcast("ulm")},this.warmupReset=function(){for(var e,t=0;t<this.players.list.length;t++)if(!(e=this.players.list[t]).spectating&&e.active){var i=this.getSpawnPoint(e.team,e,!1,!0);e.resetPosition(i.x,i.y,i.z,-((i.dir||0)+1)*Math.PI/2)}},this.updateTeam=function(e,t){e.team=t;for(var i=0;i<e.sentTo.length;++i)O.send(e.sentTo[i],"tm",e.sid,t);this.players.syncLeaders(!0)},this.plantBomb=function(e){if(this.map.manager.sites.length&&this.mode&&this.mode.site&&G.isServer){this.incMedal("Bomb Planted",e),e.send("am",[19,200,0,1]),this.players.score(e,200,2);var t=this.players.dropWeapon(e,!1,17,!1)||{};this.activeBomb={team:e.team,tick:2e3,time:4e4,x:t.x,y:t.y,z:t.z},this.broadcast("gmsg","BOMB PLANTED"),this.broadcast("so","bo_plant",1,1)}},this.diffuseBomb=function(e){this.map.manager.sites.length&&this.mode&&this.mode.site&&O&&this.activeBomb&&e&&(this.activeBomb=null,e.diffuses++,this.broadcast("so","bo_diff",1,1))},this.claimAirDrop=function(e,t){O&&t&&e&&t.claim(e)},this.resetStreaks=function(){for(var e=0;e<G.streaks.length;e++)G.streaks[e].reset&&G.streaks[e].reset(G)},this.updateStreaks=function(e){for(var t=0;t<G.streaks.length;t++)G.streaks[t].update&&G.streaks[t].update(G,O,e)},this.updateBomb=function(e){if(this.map.manager.sites.length&&this.mode&&this.mode.site&&this.activeBomb&&!this.endTimer)if(this.activeBomb.tick-=e,this.activeBomb.time-=e,this.activeBomb.time<=0){this.broadcast("n",1);for(var t=0;t<this.players.list.length;++t)(H=this.players.list[t]).active&&this.activeBomb.team!=H.team&&this.players.kill(H,null,null,!1,!0);this.activeBomb=null}else if(this.activeBomb.tick<=0){var i=2e3;this.activeBomb.time<=2e3?i=150:this.activeBomb.time<=5e3?i=200:this.activeBomb.time<=1e4?i=500:this.activeBomb.time<=2e4&&(i=1e3),this.activeBomb.tick=i,this.broadcast("so","beep_0",1,0,this.activeBomb.x||0,this.activeBomb.y||0,this.activeBomb.z||0)}},this.updateEvents=function(){this.endTimer},this.initEvents=function(){},this.updatePowerupTime=function(e,t){powerUpHolder.children[e].children[0].textContent=h.getChargedTime(t)},this.updatePowerups=function(e,t){G.instaKillTimer&&(G.instaKillTimer-=t,e||G.updatePowerupTime(0,G.instaKillTimer),G.instaKillTimer<=0&&(G.instaKillTimer=0,e&&G.broadcast("pwup",0,G.instaKillTimer))),G.fireSaleTimer&&(G.fireSaleTimer-=t,e||G.updatePowerupTime(1,G.fireSaleTimer),G.fireSaleTimer<=0&&(G.fireSaleTimer=0,e&&(G.broadcast("pwup",1,G.fireSaleTimer),G.switchMysteryBox(G.getActiveMysteryBox())))),G.doublePointsTimer&&(G.doublePointsTimer-=t,e||G.updatePowerupTime(2,G.doublePointsTimer),G.doublePointsTimer<=0&&(G.doublePointsTimer=0,e&&G.broadcast("pwup",2,G.doublePointsTimer)))},this.refillPlayer=function(e){e&&(e.refillKnife(),e.send("rfl"))},this.findTriggers=function(e,t){for(var i=0;i<this.map.manager.objects.length;++i)(H=this.map.manager.objects[i])&&H.active&&H[e]&&this.onTrigger(t,H)};var X=[];this.infectRandom=function(){X.length=0;for(var e=0;e<this.players.list.length;++e)this.players.list[e].active&&X.push(e);var t,i=1;X.length>=14?i=3:X.length>=8&&(i=2);for(e=0;e<i;++e)t=h.randInt(0,X.length-1),(H=this.players.list[X[t]])&&(this.updateTeam(H,2),this.players.kill(H,null,null,!0),this.broadcast("ac",H.sid,null,"got infected")),X.splice(t,1)},this.pickSimon=function(){X.length=0;for(var e=null,t=0;t<this.players.list.length;++t)if(this.players.list[t].active){if(this.host==this.players.list[t].id){e=this.players.list[t];break}X.push(t)}e||=this.players.list[X[h.randInt(0,X.length-1)]],e&&(this.updateTeam(e,2),e.maxHealth=5e3,e.health=e.maxHealth,e.send("h",e.health))},this.pickTraitors=function(){X.length=0;for(var e=0;e<this.players.list.length;++e)this.players.list[e].active&&X.push(e);var t,i=1;X.length>=12?i=3:X.length>=6&&(i=2);for(e=0;e<i;++e)t=h.randInt(0,X.length-1),(H=this.players.list[X[t]])&&this.updateTeam(H,2),X.splice(t,1)},this.pickStalker=function(){X.length=0;for(var e=0;e<this.players.list.length;++e)this.players.list[e].active&&X.push(e);(H=this.players.list[X[h.randInt(0,X.length-1)]])&&(this.updateTeam(H,2),H.maxHealth=400,H.health=H.maxHealth,H.regen=0,H.send("h",H.health),H.updateLoadout(this,0,!0,[12]),this.broadcast("inat",H.sid,[12],0,void 0,void 0,!1))},this.pickBoss=function(){X.length=0;for(var e=0;e<this.players.list.length;++e)this.players.list[e].active&&X.push(e);(H=this.players.list[X[h.randInt(0,X.length-1)]])&&(this.updateTeam(H,2),H.maxHealth=1e4,H.health=H.maxHealth,H.regen=0,H.send("h",H.health))},this.lockSeekers=function(){for(var e=0;e<this.players.list.length;++e)this.players.list[e].active&&2==this.players.list[e].team&&this.lockPlayer(this.players.list[e],!0)},this.pickSeeker=function(){X.length=0;for(var e=0;e<this.players.list.length;++e)this.players.list[e].active&&X.push(e);(H=this.players.list[X[h.randInt(0,X.length-1)]])&&(this.updateTeam(H,2),this.lockPlayer(H,!0))},this.releaseSeeker=function(){for(var e=0;e<this.players.list.length;++e)2==(H=this.players.list[e]).team&&this.lockPlayer(H,!1)},this.setBusy=function(e,t){e&&(e.isBusy=t,O&&G.broadcast("busy",e.sid,t))},this.setJuggernaut=function(e,t){e&&(e.isJuggernaut=t,O&&(G.broadcast("jg",e.sid,t),t?(G.addPlayerSound(e.sid,"jug_0",{vol:.5,rate:1,loop:1}),e.maxHealth=2e3,e.health=2e3,G.broadcast("h",e.health,e.sid,null,null,!0,!0),G.players.giveWeapon(e,25)):(G.removePlayerSound(e.sid,"jug_0"),e.active&&(e.maxHealth=e.startHealth,e.health=e.startHealth,G.broadcast("h",e.health,e.sid,null,null,!0,!0),G.players.removeWeapon(e,25)))))},this.respawnObj=function(e){for(var t=0;t<G.map.manager.objects.length;++t)if((H=G.map.manager.objects[t]).uid==e){G.map.manager.destObjs.splice(G.map.manager.destObjs.indexOf(H.uid),1),H.active=!0,H.destroyed=!1,null!=H.health&&(H.health=H.startHealth),I&&null!=H.meshRef&&(H.meshRef.visible=!0),I&&I.updateShadowMap();break}},this.resetSites=function(){for(var e=0;e<G.map.manager.sites.length;++e)if((H=G.map.manager.sites[e]).meshRef){var t=!!G.mode&&!!G.mode.site;H.meshRef.visible=t}},this.resetDomZones=function(){for(var e=0;e<G.map.manager.domzones.length;++e)if((H=G.map.manager.domzones[e]).capturedBy=null,H.captureT=0,H.lastTeamOn=null,H.onPoint.length=0,H.teamsOn.length=0,H.mlt=1,H.meshRef){var t=!!G.mode&&!!G.mode.dom;H.meshRef.visible=t}},this.updateDomZone=function(e,t,i,n,s,a){for(var r=0;r<G.map.manager.domzones.length;++r)if((H=G.map.manager.domzones[r]).uid==e){H.capturedBy=t,H.captureT=i||0,H.lastTeamOn=n||null,H.teamsOn=s||[],H.mlt=a||1;break}},this.hasAllZones=function(){for(var e,t=null,i=0,n=0;n<G.map.manager.domzones.length;++n){if(!(e=G.map.manager.domzones[n].capturedBy))return!1;if(t&&t!=e)return!1;t=e,i++}return i==G.map.manager.domzones.length&&t},this.updateDomZones=function(e){if(G&&G.mode&&G.mode.dom&&(!G.isServer||!G.waitTimers||G.waitTimers[0]&&G.waitTimers[0].contTime)){if(G.isServer){var t=!1;G.objectiveTimer-=e,G.objectiveTimer<=0&&(G.objectiveTimer=1500,t=!0)}for(var i=[],n=0;n<G.map.manager.domzones.length;++n){var s=(H=G.map.manager.domzones[n]).teamsOn.length;if(G.isServer){H.capturedBy&&t&&(G.giveTeamScore(H.capturedBy,10),G.players.syncLeaders()),H.onPoint.length=0,H.teamsOn.length=0;for(var a=0;a<G.players.list.length;++a)if((U=G.players.list[a]).active&&U.collides(H)){if(-1==H.teamsOn.indexOf(U.team)&&(H.teamsOn.push(U.team),H.teamsOn.length>1))break;H.onPoint.push(U)}}var r=s!=H.teamsOn.length;if(1!=H.teamsOn.length)H.teamsOn.length||(H.captureT=0,H.lastTeamOn=null);else if(H.teamsOn[0]=parseInt(H.teamsOn[0]),H.capturedBy&&H.capturedBy==H.teamsOn[0])H.captureT=0,H.lastTeamOn=null;else{if(H.lastTeamOn!=H.teamsOn[0]&&(H.captureT=0,r=!0),H.captureT,G.isServer){var o=!!O&&G.hasAllZones(),l=H.mlt;H.lastTeamOn=H.teamsOn[0],H.mlt=1+(H.onPoint.length-1)*G.mode.perPlayerMlt,o&&o!=H.teamsOn[0]&&(H.mlt*=G.mode.lockoutMlt),l!=H.mlt&&(r=!0)}if(H.captureT+=e*H.mlt,G.isServer){var c=!1;if(H.captureT>=G.mode.captureTime)r=!0,c=!0,H.captureT=0,H.capturedBy,H.capturedBy=H.teamsOn[0],G.players.syncLeaders(),G.broadcast("cct",H.uid,H.capturedBy),(o=G.hasAllZones())&&(G.giveTeamScore(o,250),G.players.syncLeaders());for(var d=0;d<H.onPoint.length;++d)(U=H.onPoint[d])&&H.capturedBy&&U.team==H.capturedBy&&c&&(U.caps++,G.players.score(U,200),G.incMedal("Secured",U),U.send("am",[20,200,0,1]),H.onPoint.length>2&&(G.players.score(U,25),G.incMedal("Team Work",U),U.send("am",[21,25,0,1]),G.challenges.update(G,"twm",1,null,U)))}}G.isServer&&r&&i.push(H.uid,H.capturedBy,H.captureT,H.lastTeamOn,H.teamsOn,H.mlt)}G.isServer&&i.length&&G.broadcast("uct",i)}},this.capFlag=function(e,t){if(G.isServer&&(e.caps++,e.flag=null,G.players.teamScore(e,1),G.mode.rush||G.broadcast("ac",e.sid,null,"captured the Flag"),G.incMedal("Capture",e),e.send("am",[22,150,0,1]),G.players.score(e,150,2),G.resetFlag(t),G.mode&&G.mode.rush)){var i=G.getSpawnPoint(e.team,e);G.players.changePosition(e,i.x,i.y,i.z,!0,!1,void 0,!0)}},this.updateFlagCol=function(e,t){t&&t.team&&e.teamCol!=t.team&&e.meshRef&&(e.teamCol=t.team,e.meshRef.material=I.getMat("crystal_0",G.map.manager.getFlagDat(e.team,t)),e.meshRef.zoneMesh.material=I.getMat("zone_r",G.map.manager.getZoneDat(e.team,t)))},this.updateFlags=function(e,t,i){if(G.mode&&(G.mode.flags||G.mode.oneflag)){for(var n=!1,s=!1,a=0;a<G.map.manager.flags.length;++a)H=G.map.manager.flags[a],G.mode.oneflag&&!H.neutral||!G.mode.oneflag&&H.neutral||(!e&&H.meshRef?(t&&G.updateFlagCol(H,t),H.carrier?(t&&H.team==t.team&&(s=!0),t&&H.carrier==t.sid&&(n=!0),(U=G.players.findBySid(H.carrier))&&(U.isYou,I.moveMesh(H.meshRef,U.x,U.y+o.flagHOff,U.z),U.objInstances&&H.meshRef.visible!=U.objInstances.visible&&(H.meshRef.visible=U.objInstances.visible))):(H.meshRef.visible||(H.meshRef.visible=!0),I.moveMesh(H.meshRef,H.x,H.y,H.z)),H.bobAnimY=(H.bobAnimY||0)+.003*i,H.meshRef.position.y+=Math.cos(H.bobAnimY),H.meshRef.rotation.y+=.002*i):e&&(!H.carrier&&H.idleTimer&&(H.idleTimer-=i,H.idleTimer<=0&&G.resetFlag(H)),H.carrier?(null==H.flagTimer&&(H.flagTimer=0),H.flagTimer-=i,H.flagTimer<=0&&(U=G.players.findBySid(H.carrier))&&(H.img.x=U.x,H.img.y=U.y+o.flagHOff,H.img.z=U.z,H.flagTimer=o.flagUpdate,G.broadcast("ufp",H.uid,H.img.x.round(1),H.img.y.round(1),H.img.z.round(1)))):(H.img.x=H.x,H.img.y=H.y,H.img.z=H.z)));e||G.mode.rush||(s&&n?gameMessage.textContent!=o.flagMsgRC&&(gameMessage.textContent=o.flagMsgRC):s?gameMessage.textContent!=o.flagMsgE&&(gameMessage.textContent=o.flagMsgE):n?gameMessage.textContent!=o.flagMsg&&(gameMessage.textContent=o.flagMsg):""!=gameMessage.textContent&&(gameMessage.textContent=""),specGMessage.textContent!=gameMessage.textContent&&(specGMessage.textContent=gameMessage.textContent))}},this.updateFlag=function(e,t,i,n,s){for(var a=0;a<G.map.manager.flags.length;++a)if((H=G.map.manager.flags[a]).uid==e){H.carrier=s,H.img.x=t,H.img.y=i,H.img.z=n,G.moveObj(H,t,i,n);break}},this.dropFlag=function(e){if(G.isServer&&e&&e.carrier){var t=G.players.findBySid(e.carrier);G.updateCarrier(e),t?(G.mode.rush||G.broadcast("ac",t.sid,null,"dropped the Flag"),G.mode.oneflag||G.updateFlagInfo(e,"AWAY"),t.flag=null,G.updateObjPos(e,t.x,t.y+o.flagOff,t.z),e.idleTimer=o.flagIdle):G.updateObjPos(e,e.orgX,e.orgY,e.orgZ)}},this.pickupFlag=function(e,t){G.isServer&&G.mode&&(G.mode.flags||G.mode.oneflag)&&!t.carrier&&(e.team!=t.team||G.mode.oneflag?e.flag||(G.incMedal("Pickup",e),e.send("am",[24,20,0,1]),G.players.score(e,20,2),G.updateCarrier(t,e),G.mode.oneflag||G.updateFlagInfo(t,e.fakeName||e.alias),G.mode.rush||G.broadcast("ac",e.sid,null,"got the Flag")):t.x==t.orgX&&t.y==t.orgY&&t.z==t.orgZ||(G.mode.rush||G.broadcast("ac",e.sid,null,"returned the Flag"),e.returns++,G.incMedal("Return",e),e.send("am",[23,50,0,1]),G.players.score(e,50,2),G.resetFlag(t)))},this.syncFlag=function(e){G.broadcast("ufl",e.uid,e.x.round(1),e.y.round(1),e.z.round(1),e.carrier||0)},this.updateCarrier=function(e,t){e.carrier=t?t.sid:0,t?(t.flag=e,e.flagTimer=o.flagUpdate,G.flagTeam=t.team,G.flagCarrier=t.sid):(G.flagTeam=null,G.flagCarrier=null),G.syncFlag(e)},this.resetFlags=function(){for(var e=0;e<G.map.manager.flags.length;++e){if((H=G.map.manager.flags[e]).carrier=null,H.x=H.orgX,H.y=H.orgY,H.z=H.orgZ,H.idleTimer=null,H.meshRef){var t=!(!G.mode||!G.mode.flags&&!G.mode.oneflag);G.mode&&G.mode.oneflag&&!H.neutral?t=!1:G.mode&&G.mode.oneflag||!H.neutral||(t=!1),H.meshRef.visible=t,H.meshRef.zoneMesh.visible=t}H.active=(!G.mode||!G.mode.oneflag||!!H.neutral)&&(G.mode&&G.mode.oneflag||!H.neutral)}},this.resetFlag=function(e){G.updateObjPos(e,e.orgX,e.orgY,e.orgZ),G.updateCarrier(e),G.mode.oneflag||G.updateFlagInfo(e,"AT BASE"),e.idleTimer=null},this.updateFlagInfo=function(e,t){G.teamFlags[e.team]=t,this.broadcast("ufi",e.team,G.teamFlags[e.team])},this.updateFlagPing=function(e,t,i,n){for(var s=0;s<G.map.manager.flags.length;++s)if((H=G.map.manager.flags[s]).uid==e){H.img.x=t,H.img.y=i,H.img.z=n;break}},this.dropSpawnable=function(e,t,i,n){if(G.isServer){var s=c[e];if(s.playerSpecific&&(!t||!t.isPlayer))return;var a=s.getScale?s.getScale(i):s.scale,r=t?t.team:0,o=c.getData(e,null,n&&null!=n.x?n.x:t?t.x:0,(n&&null!=n.y?n.y:t?t.y:0)+(s.yOff||0),n&&null!=n.z?n.z:t?t.z:0,a*(s.padMlt||1),r,s.timer,i,s.aiOnly,s.canShoot,s.playerSpecific?t.id:void 0);o.active=!0,s.playerSpecific?t&&t.send&&t.send("crsp",e,o.sid,o.x.round(1),o.y.round(1),o.z.round(1),o.team,i):G.broadcast("crsp",e,o.sid,o.x.round(1),o.y.round(1),o.z.round(1),o.team,i),G.map.manager.spawnables[o.sid]=o}},this.pickupSpawnable=function(e,t){var i=c[t.i];if(t&&t.active){if(i.aiOnly&&(!e||!e.isAI))return;if(i.playerSpecific&&(!e||!e.isPlayer||e.id!==t.pid))return;var n=!!i.stopInteract&&i.stopInteract(G,O,e,t);if(n)return!!h.isString(n)&&n;G.isServer&&!i.alwaysActive&&(t.active=!1),G.isServer&&e&&i.onPickup&&i.onPickup(G,O,e,t),e&&i.onCollision&&i.onCollision(G,O,e,t),!G.isServer||t.dontDestroy||i.alwaysActive||(i.onDestroy&&i.onDestroy(G,O,e,t),G.broadcast("dsp",t.sid),delete G.map.manager.spawnables[t.sid])}},this.shootSpawnable=function(e,t){var i=c[t.i];if(t&&t.active){if(i.aiOnly&&(!e||!e.isAI))return;if(i.playerSpecific&&(!e||!e.isPlayer||e.id!==t.pid))return;var n=!!i.stopInteract&&i.stopInteract(G,O,e,t);if(n)return!!h.isString(n)&&n;G.isServer&&!i.alwaysActive&&(t.active=!1),G.isServer&&e&&i.onShoot&&i.onShoot(G,O,e,t),!G.isServer||t.dontDestroy||i.alwaysActive||(i.onDestroy&&i.onDestroy(G,O,e,t),G.broadcast("dsp",t.sid),delete G.map.manager.spawnables[t.sid])}},this.createSpawnable=function(e,t,i,n,s,a,r,o){var l=c[e],d=l.model;if(l.texRange){var u=h.randInt(0,l.texRange);d=l.model+(u>0?"_"+u:"")}else l.texSrc&&(d=l.texSrc);var p=l.getScale?l.getScale(r):l.scale,f=l.getRotation?l.getRotation(r):l.rotation||0,m=I[l.fileExt?"loadAnimMesh":"loadMesh"]({isMdl:!0,fileExt:l.fileExt||null,src:l.model,texSrc:d,noGroup:!0,noShadow:!0,noFog:!0,emissive:l.emissive?l.emissive(o,a):null,noEmisTex:!l.emisTex,outlineMesh:null==l.outline?void 0:l.outline,outlineScale:l.outlineScale?l.outlineScale:void 0},i,n+(l.yOff||0),s,f,p,I.scene),g=c.getData(e,t,i,n,s,p*(l.padMlt||1),a,void 0,r,l.aiOnly,l.canShoot);g.meshRef=m,g.active=!0,l.onSpawn&&l.onSpawn(g,i,n,s),G.map.manager.spawnables[t]=g},this.disposeSpawnable=function(e){for(var t in G.map.manager.spawnables)if((H=G.map.manager.spawnables[t]).sid==e){var i=c[H.i];i&&i.onDestroy&&i.onDestroy(G,null,null,H),H.meshRef&&H.meshRef.outlineMesh&&H.meshRef.remove(H.meshRef.outlineMesh),I.remove(H.meshRef),H.meshRef=null,delete G.map.manager.spawnables[e];break}},this.updateSpawnables=function(e,t,i){for(var n in G.map.manager.spawnables)H=G.map.manager.spawnables[n],e||!H.meshRef||c[H.i].noAnim?e&&H.active&&!c[H.i].noDespawn&&H.timer&&(H.timer-=i,H.timer<=0&&(H.active=!1,c[H.i].onDestroy&&c[H.i].onDestroy(G,O,H),G.broadcast("dsp",H.sid),delete G.map.manager.spawnables[H.sid])):(I.moveMesh(H.meshRef,H.x,H.y,H.z),H.bobAnimY=(H.bobAnimY||0)+.003*i,H.meshRef.position.y+=Math.cos(H.bobAnimY),H.meshRef.rotation[c[H.i].rotAxis||"y"]+=.002*i)},this.resetSpawnables=function(){for(var e in G.map.manager.spawnables)(H=G.map.manager.spawnables[e]).meshRef&&I.remove(H.meshRef);G.map.manager.spawnables=[]},this.getReserveMags=function(e){return null==e.magReserve?1:e.magReserve},this.chooseMysteryBox=function(){var e=G.map.manager.mysteryBoxes;if(e.length>1){var t=G.getActiveMysteryBox();e=e.filter((e=>e!=t))}return h.getRandom(e)},this.getMysteryBoxWeapon=function(e){if(e&&h.randInt(0,100)<=e&&!G.fireSaleTimer)return-1;var t=h.randFloat(0,100).round(2);0==G.weapons.mysteryBoxRarities[0]&&(t=Math.max(t,.01));for(var i=0,n=0,s=0;s<G.weapons.mysteryBoxRarities.length;++s)if(t<=(n+=G.weapons.mysteryBoxRarities[s])){i=s;break}var a=G.weaponConfig.filter((e=>e&&e.mysteryBoxR==i));return a.length?h.getRandom(a).id:-1},this.changeMysteryWeapon=function(e,t,i){var s=e.pendingWeapon,a=i||-1==s?s:h.getRandom(G.weapons.onlyWeapons);if((!e.wepMesh||e.wepMesh.stage!=t||i)&&(!e.wepMesh||e.wepMesh.weaponId!=a)){if(e.wepMesh&&I.scene.remove(e.wepMesh),-1==a)e.wepMesh=I.loadMesh({isMdl:!0,src:"teddy_0",shadows:!1,shadowsR:!1,vertexColors:!0,color:"#ffffff"},e.meshRef.position.x,e.meshRef.position.y,e.meshRef.position.z,[e.xR,e.yR,e.zR],9,I.scene);else{var r=G.weapons[a],o=r.altSkin||{};e.wepMesh=I.loadMesh({src:"weapons/"+r.src+(null==o.mid?"":"_"+o.mid),texSrc:null==o.mid?o.tex?o.tex:o&&null!=o.id?"weapons/skins/"+r.src+"_"+o.id:null:h.getReModel(G.store,o),tFilter:n.LinearFilter,noGroup:!0,uv2:!0,shininess:r.shine||60,specular:2697513,shadowsR:!0,transparent:null!=o.opac||r.seeThrough||o.trans,sameGlow:o.sameGlow,glowText:o.glow||o.sameGlow,emissive:(r.transp||o.glow||o.sameGlow)&&!o.noEmis?o.emiss||"#ffffff":null},e.meshRef.position.x,e.meshRef.position.y,e.meshRef.position.z,[e.xR,e.yR+Math.PI/2,e.zR],1.5*(o.mScl||r.scale),I.scene)}e.wepMesh.visible=!0,e.wepMesh.stage=t,e.wepMesh.weaponId=a}},this.updateMysteryBoxes=function(e,t,i){for(var n=0;n<G.map.manager.mysteryBoxes.length;++n)if(H=G.map.manager.objects[G.map.manager.mysteryBoxes[n]])if(!e&&H.meshRef){if(H.state>=1){if(H.timer-=i,1==H.state){var s=1-H.timer/o.mysteryBoxAnim,a=(o.mysteryBoxOffset-H.height)*s,r=s>=.8,l=Math.floor(H.timer/250);G.changeMysteryWeapon(H,l,r),I.moveMesh(H.wepMesh,H.meshRef.position.x,H.meshRef.position.y+H.height+a,H.meshRef.position.z)}if(H.timer<=0&&(H.state++,H.timer=2==H.state?-1==H.pendingWeapon?o.mysteryBoxDespawnTeddy:o.mysteryBoxDespawn:o.mysteryBoxAnim,H.state>=3)){H.state=0,H.purchasedBy=void 0;var c=-1==H.pendingWeapon;H.pendingWeapon,!H.wepMesh||c&&G.fireSaleTimer||(H.wepMesh.visible=!1)}}}else if(e&&(H.active||G.fireSaleTimer)&&H.state>=1&&(H.timer-=i,H.timer<=0)){if(H.state++,H.timer=2==H.state?-1==H.pendingWeapon?o.mysteryBoxDespawnTeddy:o.mysteryBoxDespawn:o.mysteryBoxAnim,H.state>=3){H.state=0,H.timer=0,H.purchasedBy=void 0;c=-1==H.pendingWeapon;H.pendingWeapon,c&&(G.fireSaleTimer?G.switchMysteryBox(G.chooseMysteryBox(),!0):G.switchMysteryBox())}G.syncMysteryBox(H)}},this.getActiveMysteryBox=function(){for(var e=0;e<G.map.manager.mysteryBoxes.length;++e)if((H=G.map.manager.objects[G.map.manager.mysteryBoxes[e]])&&H.active)return H.uid;return null},this.switchMysteryBox=function(e,t){if(G.map.manager.mysteryBoxes&&G.map.manager.mysteryBoxes.length){var i=!1;null!=e&&null!=e||(i=!0,e=G.chooseMysteryBox());for(var n=0;n<G.map.manager.mysteryBoxes.length;++n)(H=G.map.manager.objects[G.map.manager.mysteryBoxes[n]])&&(H.active=H.uid==e||!!t,(H.uid!=e&&t||i)&&(H.purchasedBy=void 0,H.pendingWeapon=void 0,H.timer=0,H.state=0),I&&null!=H.meshRef&&(H.meshRef.visible=!!H.active),I&&null!=H.wepMesh&&(H.wepMesh.visible=!!H.active&&H.state>=1),I&&null!=H.beamMesh&&(H.beamMesh.visible=!!H.active));G.isServer&&G.broadcast("smybx",e,t)}},this.updateMysteryBox=function(e,t,i,n,s,a){for(var r=0;r<G.map.manager.mysteryBoxes.length;++r)if((H=G.map.manager.objects[G.map.manager.mysteryBoxes[r]])&&H.uid==e){if(H.active=!!t,H.purchasedBy=a,H.pendingWeapon=s,H.timer=n,H.state=i,I&&null!=H.meshRef&&(H.meshRef.visible=!!H.active),I&&null!=H.wepMesh&&(H.wepMesh.visible=!!H.active&&i>=1),I&&null!=H.beamMesh&&(H.beamMesh.visible=!!H.active),I&&1==H.state){var l=1-H.timer/o.mysteryBoxAnim,c=(o.mysteryBoxOffset-H.height)*l,d=l>=.8,h=Math.floor(H.timer/250);G.changeMysteryWeapon(H,h,d),I.moveMesh(H.wepMesh,H.meshRef.position.x,H.meshRef.position.y+H.height+c,H.meshRef.position.z)}return}},this.syncMysteryBox=function(e){G.broadcast("mybx",e.uid,e.active,e.state,e.timer,e.pendingWeapon,e.purchasedBy)},this.resetMysteryBoxes=function(){if(G.map.manager.mysteryBoxes&&G.map.manager.mysteryBoxes.length)for(var e=0;e<G.map.manager.mysteryBoxes.length;++e)(H=G.map.manager.objects[G.map.manager.mysteryBoxes[e]])&&(H.active=!1,H.purchasedBy=void 0,H.pendingWeapon=void 0,H.timer=0,H.state=0,I&&null!=H.meshRef&&(H.meshRef.visible=!!H.active),I&&null!=H.wepMesh&&(H.wepMesh.visible=!1),I&&null!=H.beamMesh&&(H.beamMesh.visible=!!H.active))},this.changeKrumWeapon=function(e,t,i){var s=e.pendingWeapon;if(!e.wepMesh||e.wepMesh.weaponId!=s||e.wepMesh.stage!=t){e.wepMesh&&I.scene.remove(e.wepMesh);var a=t?G.upgradeWeapons[s]:G.weapons[s],r=a.altSkin||{};e.wepMesh=I.loadMesh({fileExt:r.fileExt,animS:r.animS,hasAnim:r.hasAnim,inspectAnim:r.inspectAnim,local:a.local||r.local,localM:a.localM||r.localM,src:"weapons/"+a.src+(null==r.mid?"":"_"+r.mid),texSrc:null==r.mid?r.tex?r.tex:r&&null!=r.id?"weapons/skins/"+a.src+"_"+r.id:null:h.getReModel(G.store,r),tFilter:n.LinearFilter,frames:r.frames,frameT:r.frameT,pulsT:r.pulsT,minGlo:r.minGlo,rotT:r.rotT,movT:r.movT,movE:r.movE,movD:r.movD,repeatY:r.tileS||0,repeatX:r.tileS||0,sameEnv:r.sameEnv,env:r.env||r.sameEnv?r.env||3:void 0,noGroup:!0,uv2:!0,shininess:a.shine||60,specular:2697513,shadowsR:!0,transparent:null!=r.opac||a.seeThrough||r.trans,sameGlow:r.sameGlow,glowText:r.glow||r.sameGlow,emissive:(a.transp||r.glow||r.sameGlow)&&!r.noEmis?r.emiss||"#ffffff":null,emissInt:r.glowInt,rgb:r.rgb,rgbS:r.rgbS,rgbT:r.rgbT,useWireframe:r.wire,side:a.side||r.side||0,opacity:r.opac||1,shaderNum:r.shaderNum,video:r.video,projection:r.projection,color:r.color||null,alphaTest:r.alpha||0,normal:r.normal||null,spec:r.spec||null,metalness:r.metalness||null,roughness:r.roughness||null,displacement:r.displacement||null,bump:r.bump||null,outlineMesh:null==r.outline?void 0:r.outline,outlineScale:r.outlineS?r.outlineS:void 0},e.meshRef.position.x,e.meshRef.position.y,e.meshRef.position.z,[e.xR,e.yR+Math.PI/2,e.zR],1.5*(r.mScl||a.scale),I.scene),e.wepMesh.visible=!0,e.wepMesh.weaponId=s,e.wepMesh.stage=t}e.wepMesh&&(e.wepMesh.visible=i>=.7||i<=.3)},this.updateKrumMachines=function(e,t,i){for(var n=0;n<G.map.manager.krumMachines.length;++n)if(H=G.map.manager.krumMachines[n])if(e||!H.meshRef)e&&H.active&&H.state>=1&&(H.timer-=i,H.timer<=0&&(H.state++,H.timer=2==H.state?o.krumMachineDespawn:o.krumMachineAnim,H.state>=3&&(H.state=0,H.timer=0,H.purchasedBy=void 0,H.pendingWeapon),G.syncKrumMachine(H)));else if(H.state>=1){if(H.timer-=i,1==H.state){var s=H.timer/o.krumMachineAnim,a=o.krumMachineOffset*(s<=.5?1-s:s),r=a*Math.sin(-H.yR+Math.PI/2),l=a*Math.cos(-H.yR+Math.PI/2);G.changeKrumWeapon(H,s<=.5?1:0,s),I.moveMesh(H.wepMesh,H.meshRef.position.x-r,H.meshRef.position.y-H.height/4,H.meshRef.position.z-l)}H.timer<=0&&(H.state++,H.timer=2==H.state?o.krumMachineDespawn:o.krumMachineAnim,H.state>=3&&(H.state=0,H.purchasedBy=void 0,H.pendingWeapon,H.wepMesh&&(H.wepMesh.visible=!1)))}},this.updateKrumMachine=function(e,t,i,n,s,a){for(var r=0;r<G.map.manager.krumMachines.length;++r)if((H=G.map.manager.krumMachines[r])&&H.uid==e){if(H.active=!!t,H.purchasedBy=a,H.pendingWeapon=s,H.timer=n,H.state=i,I&&null!=H.meshRef&&(H.meshRef.visible=!!H.active),I&&null!=H.wepMesh&&(H.wepMesh.visible=!!H.active&&i>=1),I&&null!=H.beamMesh&&(H.beamMesh.visible=!!H.active),I&&1==H.state){var l=H.timer/o.krumMachineAnim,c=o.krumMachineOffset*(l<=.5?1-l:l),d=c*Math.sin(-H.yR+Math.PI/2),h=c*Math.cos(-H.yR+Math.PI/2);G.changeKrumWeapon(H,l<=.5?1:0,l),I.moveMesh(H.wepMesh,H.meshRef.position.x-d,H.meshRef.position.y-H.height/4,H.meshRef.position.z-h)}return}},this.syncKrumMachine=function(e){G.broadcast("krm",e.uid,e.active,e.state,e.timer,e.pendingWeapon,e.purchasedBy)},this.resetKrumMachines=function(){if(G.map.manager.krumMachines&&G.map.manager.krumMachines.length)for(var e=0;e<G.map.manager.krumMachines.length;++e)(H=G.map.manager.krumMachines[e])&&(H.active=!0,H.purchasedBy=void 0,H.pendingWeapon=void 0,H.timer=0,H.state=0,I&&null!=H.meshRef&&(H.meshRef.visible=!!H.active),I&&null!=H.wepMesh&&(H.wepMesh.visible=!1),I&&null!=H.beamMesh&&(H.beamMesh.visible=!!H.active))},this.updatePickup=function(e,t,i,n,s,a){var r=!!this.mode&&!!this.mode.site;if(H=this.map.manager.findByUid(e,this.map.manager.pickups)){if(I){U=H.meshRef;var o=s||[U.position.x,U.position.y,U.position.z];I.scene.remove(H.meshRef);var l=this.weaponConfig[t||0],c=l.altSkin||{};let e=this.map.manager.genWeaponMeshData(l,this.store,c);H.noTex&&(e.noTex=!0),H.meshRef=I.loadMesh(e,...o,0,(c.mScl||l.scale)*(l.equipment?2:1),I.scene),H.meshRef.rotation.copy(U.rotation.clone()),H.meshRef.visible=!(l&&l.bomb&&!r||null==t)}var d=h.isNumber(i);H.pickupAmmo=h.isNumber(a)?a:this.weaponConfig[t||0].ammo,(s||d)&&(H.x=s?s[0]:H.orgX,H.y=s?s[1]:H.orgY,H.z=s?s[2]:H.orgZ),d&&(H.orgPickup=i),H.pickup=t,H.active=n}},this.resetPickups=function(){for(var e={},t=!!G.mode&&!!G.mode.site,i=0;i<G.map.manager.pickups.length;++i){if(H=G.map.manager.pickups[i],G.isServer&&H.pickupRand){var n=h.getRandom(G.weapons.onlyWeapons);H.pickupRandGroup&&(null==e[H.pickupRandGroup]?e[H.pickupRandGroup]=n:n=e[H.pickupRandGroup]),H.orgPickup=n}if(H.pickup=H.orgPickup,H.pickupAmmo=G.weaponConfig[H.pickup||0].ammo,H.x=H.orgX,H.y=H.orgY,H.z=H.orgZ,H.active=!G.weaponConfig[H.pickup]||!G.weaponConfig[H.pickup].bomb||!!t,I){U=H.meshRef,I.scene.remove(H.meshRef);var s=G.weaponConfig[H.pickup],a=s.altSkin||{};let e=G.map.manager.genWeaponMeshData(s,this.store,a);H.noTex&&(e.noTex=!0),H.meshRef=I.loadMesh(e,H.x,H.y-o.pickupZoneH/2+o.pickupOff,H.z,0,a.mScl||s.scale,I.scene),H.meshRef.rotation.copy(U.rotation.clone()),H.meshRef.visible=!s||!s.bomb||!!t}}},this.activeAIs=function(e){for(var t,i=0,n=0;n<this.AI.ais.length;++n)(t=this.AI.ais[n])&&t.active&&(!e||e==t.team||t.forceTeamTimer)&&i++;return i},this.findFurthestFrom=function(e,t,i,n,s,a,r,o,l){for(var c,d=null,u=l?this.players.list.length:0,p=0;p<u+(o?this.AI.ais.length:0);++p)if((c=p<u?this.players.list[p]:this.AI.ais[p-u]).active&&c!=e){var f=h.getD3D(t,i,n,c.x,c.y,c.z);!(f<=a&&(!d||d.ds<f))||!r&&this.canSee(c,t,i,n,0,0,!0)||s&&s==c.team||(d={obj:c,ds:f})}return d?d.obj:null},this.findNearestTo=function(e,t,i,n,s,a,r,o,l,c,d,u){for(var p,f=null,m=l?this.players.list.length:0,g=0;g<m+(o?this.AI.ais.length:0);++g)if((p=g<m?this.players.list[g]:this.AI.ais[g-m]).active&&p!=e&&(!c||!p.isBot)&&(!d||!p.isPlayer||!d[p.id])&&(!u||p.isBot)){var v=h.getD3D(t,i,n,p.x,p.y,p.z);!(v<=a&&(!f||f.ds>v))||!r&&this.canSee(p,t,i,n,0,0,!0)||s&&s==p.team||(f={obj:p,ds:v})}return f?f.obj:null},this.canSee=function(e,t,i,n,s,a,r,l,c){if(!e)return!1;var d;s=s||0;for(var u=null,p=h.getD3D(e.x,e.y,e.z,t,i,n),f=h.getDir(e.z,e.x,n,t),m=h.getDir(h.getDistance(e.x,e.z,t,n),i,0,e.y),g=1/(p*Math.sin(f-Math.PI)*Math.cos(m)),v=1/(p*Math.cos(f-Math.PI)*Math.cos(m)),y=1/(p*Math.sin(m)),b=e.y+(e.height||0)-o.cameraHeight,w=a?0:s,x=0;x<this.map.manager.objects.length;++x)if((!(d=this.map.manager.objects[x]).noShoot||c&&d.ramp)&&!d.complexColl&&d.active&&(!d.transparent||r)){var S=0;if(d.ramp){var M=Math.max(0,Math.min(1,h.progressOnLine(d.ramp.sX,d.ramp.sZ,d.ramp.eX,d.ramp.eZ,e.x+e.scale*Math.cos(d.dir),e.z+e.scale*Math.sin(d.dir)))),k=d.height,_=(d.height+.01)*M,T=d.y-k+_;S=h.lineInRect(e.x,e.z,b,g,v,y,d.x-Math.max(0,d.width-s),d.z-Math.max(0,d.length-s),T-Math.max(0,_-w),d.x+Math.max(0,d.width-s),d.z+Math.max(0,d.length-s),T+Math.max(0,_-s))}else S=h.lineInRect(e.x,e.z,b,g,v,y,d.x-Math.max(0,d.width-s),d.z-Math.max(0,d.length-s),d.y-Math.max(0,d.height-w),d.x+Math.max(0,d.width-s),d.z+Math.max(0,d.length-s),d.y+Math.max(0,d.height-s));if(S&&S<1){if(!l)return S;(null==u||u>S)&&(u=S)}}var C=this.map.terrain;if(C){var I=C.raycast(e.x,-e.z,b,1/g,-1/v,1/y);if(I){S=h.getD3D(e.x,e.y,e.z,I.x,I.z,-I.y);if(!l)return S;(null==u||u>S)&&(u=S)}}return u},this.increaseWeapon=function(e,t){(H=null==t.wId?[...e.loadout]:[t.wId]).length=1;var i=this.mode.weaponOrder.indexOf(H[0]);if(i>-1){if(H[0]==this.mode.weaponOrder[i+1])return;H[0]=null==this.mode.weaponOrder[i+1]?this.mode.weaponOrder[this.mode.weaponOrder.length-1]:this.mode.weaponOrder[i+1],e.weaponTier=i+1}else H[0]=this.mode.weaponOrder[0],e.weaponTier=0;this.broadcast("inat",e.sid,H,0,void 0,void 0,!1),e.updateLoadout(this,0,!0,H)},this.decreaseWeapon=function(e){(H=[...e.loadout]).length=1,e.weaponTier--,e.weaponTier<0?e.weaponTier=0:e.setbacks++,H[0]=this.mode.weaponOrder[e.weaponTier],this.broadcast("inat",e.sid,H,0,void 0,void 0,!1),e.updateLoadout(this,0,!0,H)},this.resetGates=function(){for(var e=0;e<G.map.manager.gates.length;++e)(H=G.map.manager.gates[e]).active=!H.startClosed,I&&null!=H.meshRef&&(H.meshRef.visible=H.active)},this.updateBank=function(e,t){for(var i=0;i<G.map.manager.banks.length;++i)if((H=G.map.manager.banks[i]).uid==e){H.deposited=t||0;break}},this.resetBanks=function(){for(var e=0;e<G.map.manager.banks.length;++e)(H=G.map.manager.banks[e]).deposited=0},this.updateGate=function(e,t){for(var i=0;i<G.map.manager.gates.length;++i)if((H=G.map.manager.gates[i]).uid==e){H.active=t,I&&null!=H.meshRef&&(H.meshRef.visible=t),I&&I.updateShadowMap();break}},this.updateObjPos=function(e,t,i,n){e.x=t,e.y=i,e.z=n,e.img.x=t,e.img.y=i,e.img.z=n,G.syncFlag(e)},this.updateZone=function(e){G.map.zone.update(0,e)},this.resetZone=function(){G.map.zone&&G.map.zone.reset()},this.setObjective=function(e,t){try{G.activeObjective=e,G.objtvTime=t;for(var i=0;i<G.map.manager.objectives.length;++i)G.map.manager.objectives[i].mesh.visible=e==G.map.manager.objectives[i].uid,G.map.manager.objectives[i].mesh.material.depthTest=!0,G.map.manager.objectives[i].onZone=0}catch(e){}},this.randObjective=function(e,t){var i=h.getRandom(this.map.manager.objectives),n=i?i.uid:0;G.nextObjective(e,t,n)},this.getNextObjective=function(e){var t=this.activeObjective,i=this.map.manager.objectives.find((i=>i&&i.uid==(null==e?t+1:e)));return i?i.uid:0},this.nextObjective=function(e,t,i){if(this.activeObjective=this.getNextObjective(i),this.objtvTime=Math.max(1,6e4*(G.config.objtvTime||1)-(e||0)),this.broadcast("obj",this.activeObjective,this.objtvTime,null==e),this.map.manager.objectives.length>1){var n={time:Math.max(1,6e4*(G.config.objtvTime||1)-(e||0)),contTime:!0,canDMG:!0,msg:"next objective ",trigger:function(e,t){null==i?e.nextObjective(t):e.randObjective(t)}};t&&this.waitTimers?this.waitTimers.push(n):this.waitTimers=[n]}this.multiObjectTrigger("onObjectiveSwitch")},this.updateObjective=function(e,t){for(var i=0;i<G.map.manager.objectives.length;++i)G.map.manager.objectives[i].uid==e&&(G.map.manager.objectives[i].onZone=t)},this.updateObjectiveTime=function(e){G.objtvTime-=e,G.objtvTime<=0&&(G.objtvTime=0)},this.setWeapon=function(e){try{G.activeObjective=e}catch(e){}},this.nextWeapon=function(e,t){this.activeObjective=h.getRandom(this.weapons.onlyGoodWeapons);for(var i=0;i<this.players.list.length;++i)this.players.list[i].spectating||this.players.list[i].updateLoadout(this,0,!0,[this.activeObjective]);this.broadcast("inatA",[this.activeObjective],0),this.broadcast("wep",this.activeObjective);var n={time:2e4-(e||0),contTime:!0,canDMG:!0,msg:"next weapon in ",trigger:function(e,t){e.nextWeapon(t)}};t&&this.waitTimers?this.waitTimers.push(n):this.waitTimers=[n]},this.nextTaunt=function(e,t,i){if(!i)for(var n=0;n<this.players.list.length;++n)this.players.list[n].active&&this.mode.teamOptions&&"Prop"==this.mode.teamOptions[this.players.list[n].team-1]&&this.players.taunt(this.players.list[n],h.randInt(0,o.taunts.length-1),!0);var s={time:2e4-(e||0),contTime:!0,canDMG:!0,msg:"next taunt in ",trigger:function(e,t){e.nextTaunt(t)}};t&&this.waitTimers?this.waitTimers.push(s):this.waitTimers=[s]},this.logTime=function(e,t){if(G.doLogTime){var i=document.getElementById("spdRunIVal"+t);if(i&&(i.innerHTML=h.getTime(e,!0,parseInt(e)>=36e5,1e3,parseInt(e)>=864e5,2)),(i=document.getElementById("spdrnZC"))&&(i.innerHTML=t),t>=o.maxSpdRChck){var n=t+1;if(n<G.map.manager.scorezones.length){var s=Math.max(0,t-o.maxSpdRChck)+1;(i=document.getElementById("spdRunI"+s))&&speedRunList.removeChild(i),speedRunList.innerHTML+="<div class='speedRunItem' id='spdRunI"+n+"'>Point "+n+"<span class='speedRunITim' id='spdRunIVal"+n+"'>0:00</span></div>"}}(i=document.getElementById("spdRunI"+(t+1)))&&(i.className="speedRunItem sriAct",(i=document.getElementById("spdRunI"+t))&&(i.className="speedRunItem"))}},this.setCheckPoint=function(e,t){if((!e.checkPoint||e.checkPoint!=t.uid)&&G.teamCheck(t,e)){if(t.singleUse){if(e.checkPointList.indexOf(t.uid)>-1)return;e.checkPointList.push(t.uid)}e.checkPoint=t.uid,e.checkPointData=[e.timeLog,e.gameTime],G.isServer&&e.send("chp")}},this.checkTeleport=function(e,t){if(1!=t.node&&t.telCooldown<=0&&G.teamCheck(t,e)){if(t.telCheckPoint)return H=G.map.manager.objects[e.checkPoint],void(null!=e.checkPoint&&H&&G.players.changePosition(e,H.x,H.y-H.height+.01,H.z,!1,t.telStopMo,t.forceDir?H.dir:void 0));for(var i=0;i<this.map.manager.teleporters.length;++i)if((H=this.map.manager.teleporters[i]).channel==t.channel&&H.node>0&&t.uid!=H.uid&&G.teamCheck(H,e)){2==H.node&&(H.telCooldown=2e3),G.players.changePosition(e,H.x,H.y-H.height,H.z,!1,H.telStopMo,H.forceDir?H.dir:void 0);break}}},this.updateTeleporters=function(e){if(G.map.manager.teleporters.length)for(var t=0;t<G.map.manager.teleporters.length;++t)(H=G.map.manager.teleporters[t]).telCooldown-=e,H.telCooldown<=0&&(H.telCooldown=0)},this.updateSpinner=function(e,t,i){if(G.map.manager.spinners.length)for(var n=0;n<G.map.manager.spinners.length;++n)if((H=G.map.manager.spinners[n]).uid==e){!O&&H.meshPrev&&(H.meshPrev.remove(...H.meshPrev.children),I.scene.remove(H.meshPrev),H.meshPrev=null),H.spinInfo.endAnimTarget=0,H.spinInfo.endAnimVal=0,H.spinInfo.spinVal=2*Math.PI*(t/100+13)+Math.PI/2,H.spinInfo.tickCounter=0,H.spinInfo.spinRotation=0,H.spinInfo.bobAnim=0,H.spinInfo.unObtainHue=0,H.spinInfo.randNum=t,H.spinInfo.itemID=i,H.spinInfo.needsUpdate=!0;break}};var Z=.6;this.updateSpinners=function(e){if(G.map.manager.spinners.length)for(var t=0;t<G.map.manager.spinners.length;++t)if(U=G.map.manager.spinners[t],O||U&&U.meshRef&&U.meshRef.canvas){U.spinInfo||={endAnimTarget:0,endAnimVal:0,spinWhlMlt:0,spinVal:0,tickCounter:0,spinRotation:0,bobAnim:0,unObtainHue:0,randNum:0,itemID:-1,needsUpdate:!0};var i=G.store.skins[U.spinInfo.itemID];if(!O)var s=G.store.wheels[U.wheel],a=U.meshRef.canvas,r=a.getContext("2d");if(!O&&U.spinInfo.spinWhlMlt<1&&(U.spinInfo.spinWhlMlt+=.008*e,U.spinInfo.spinWhlMlt>=1&&(U.spinInfo.spinWhlMlt=1)),!O&&U.spinInfo.endAnimVal<U.spinInfo.endAnimTarget&&(U.spinInfo.endAnimVal+=.4*e,U.spinInfo.endAnimVal>=U.spinInfo.endAnimTarget&&(U.spinInfo.endAnimVal=U.spinInfo.endAnimTarget)),U.spinInfo.spinRotation!=U.spinInfo.spinVal&&(U.spinInfo.spinRotation+=.05*(U.spinInfo.spinVal-U.spinInfo.spinRotation),U.spinInfo.tickCounter-=.05*(U.spinInfo.spinVal-U.spinInfo.spinRotation),!O&&U.spinInfo.tickCounter<=0&&(U.spinInfo.tickCounter+=Math.PI/1.5,R.play3D("tick_0",U.meshRef.position.x,U.meshRef.position.y,U.meshRef.position.z,.2)),U.spinInfo.spinVal-U.spinInfo.spinRotation<=.002)){if(O&&(i&&i.rarity>=k.EPIC?G.broadcast("unbS",U.spinOwner,U.spinInfo.itemID,!1):i&&O.send(U.spinOwner,"unbS",U.spinOwner,U.spinInfo.itemID,!1)),U.spinInfo.spinRotation=U.spinInfo.spinVal,O)continue;U.spinInfo.endAnimTarget=100-s.rarities[i.rarity],R.play3D("reward",U.meshRef.position.x,U.meshRef.position.y,U.meshRef.position.z,.3),i.rarity>=k.RELIC?R.play3D("cheer_1",U.meshRef.position.x,U.meshRef.position.y,U.meshRef.position.z,.1):i.rarity>=k.RARE&&R.play3D("cheer_0",U.meshRef.position.x,U.meshRef.position.y,U.meshRef.position.z,.1);var o=i.type?i:G.store.previews[i.weapon]||{},l=G.weapons[i.weapon-1]||{},c=I.genObj3D(0,0,0);if(c.position.copy(U.meshRef.position),c.rotateY(Math.PI-U.dir*Math.PI/4),U.meshPrev=I.genObj3D(0,0,0),c.add(U.meshPrev),U.meshPrev.scale.setScalar(U.width/4),U.meshPrev.position.x=U.width/8*-5,U.meshPrev.position.y=1+(o.yOff||0),U.meshPrev.position.z=o.xOff||0,U.meshPrev.rotateX(i.type?0:Math.PI/11),U.meshPrev.rotateY(!i||i.type!=M.DYE&&i.type!=M.SPRAY?0:Math.PI/2),U.meshPrev.orgXR=U.meshPrev.rotation.x,U.meshPrev.orgYP=U.meshPrev.position.y,i.type&&i.type==M.DYE){var d=new g(-1,this,G);d.sid=-1,d.init(0,0,-6,"preview",!1),d.skins=[-1,-1],d.dyeIndex=parseInt(U.spinInfo.itemID),d.setClass(G,9,2,!0),G.players.swapWeapon(d,0,!0),G.players.generateMeshes(d,!1,!0),U.meshPrev.add(d.objInstances),d.swapTime=0,d.weaponMeshes[0].visible=!0,d.weaponGeos[0].visible=!1,G.players.updateMsh(d,!0)}else if(i.type&&i.type==M.SPRAY){var u=I.createSpray(i);U.meshPrev.add(u),u.rotation.y=Math.PI}else I[i.hasAnim?"loadAnimMesh":"loadMesh"]({fileExt:i.fileExt,hasAnim:i.hasAnim,animS:i.animS,inspectAnim:i.inspectAnim,local:i.local,localM:i.localM,src:G.store.types[i.assetType||i.type||0]+(i.assetType||i.type?i.id:i.weapon)+(null==i.mid?"":"_"+i.mid),texSrc:null==i.mid?i.type&&i.type==M.MELEE?i.pat?i.tex:"melee/melee_"+(i.id||0)+(i.tex?"_"+i.tex:""):i.type?i.tex?G.store.types[i.assetType||i.type||0]+i.id+"_"+i.tex:null:i.tex?i.tex:"weapons/skins/weapon_"+i.weapon+"_"+i.id:h.getReModel(G.store,i),rotT:i.rotT,movT:i.movT,movE:i.movE,pulsT:i.pulsT,repeatY:i.tileS||0,repeatX:i.tileS||0,frames:i.frames,frameT:i.frameT,sameEnv:i.sameEnv,env:i.env||i.sameEnv?i.env||3:void 0,sameGlow:i.sameGlow,glowText:i.glow||i.sameGlow,emissive:i.glow||i.sameGlow?"#ffffff":null,rgb:i.rgb,rgbS:i.rgbS,rAnim:i.rAnim,rAnimA:i.rAnimA,rAnimT:i.rAnimT,rAnimM:i.rAnimM,useWireframe:i.wire,side:i.side||0,opacity:i.opac||1,shaderNum:i.shaderNum,video:i.video,projection:i.projection,itemID:U.spinInfo.itemID||0,shininess:l.shine||60,specular:2697513,shadowsR:!0,transparent:null!=i.opac||i.trans||l.seeThrough||!1,alphaTest:i.alpha||0},0,0,0,i.type&&i.type!=M.MELEE?Math.PI:Math.PI/2,2*(i.spnScl||o.scl||1),U.meshPrev);if(I.scene.add(c),i.rarity>k.CONTRABAND){I.shake(.14);var p=new n.Vector3,f=U.meshPrev.getWorldPosition(p);R.play3D("explosion",f.x,f.y,f.z,1),P.ExplosionManager.explodeAt(f.x,f.y,f.z,80)}}if(!O&&(U.meshPrev&&(U.spinInfo.bobAnim+=.0018*e,U.meshPrev.position.y=U.meshPrev.orgYP+.55*Math.sin(U.spinInfo.bobAnim)),U.spinInfo.needsUpdate)){var m=1-(U.spinInfo.endAnimTarget?U.spinInfo.endAnimVal/U.spinInfo.endAnimTarget:0),v=a.width/2*.95*U.spinInfo.spinWhlMlt;r.fillStyle="#fff",r.beginPath(),r.arc(a.width/2,a.height/2,v,0,2*Math.PI),r.closePath(),r.fill();var y=0;if(r.save(1),r.translate(a.width/2,a.height/2),U.spinInfo.endAnimTarget){for(var b=0,w=0;w<G.store.rarities.length;w++){if(i.rarity==w){b+=s.rarities[w]/2;break}b+=s.rarities[w]}b/=100,b=2*Math.PI*b*(U.spinInfo.endAnimVal/U.spinInfo.endAnimTarget)%(2*Math.PI),r.rotate(b-Math.PI*(U.spinInfo.endAnimVal/U.spinInfo.endAnimTarget))}for(w=0;w<G.store.rarities.length;w++){H=G.store.rarities[w],r.fillStyle=H.color,r.beginPath();var x=s.rarities[w];U.spinInfo.endAnimTarget&&(i.rarity==w?x+=U.spinInfo.endAnimVal:x-=U.spinInfo.endAnimVal*(s.rarities[w]/U.spinInfo.endAnimTarget)),x>0&&(r.moveTo(0,0),r.arc(0,0,.95*v,y,y+2*Math.PI*(x/100),!1),r.lineTo(0,0),r.fill()),y+=2*Math.PI*(x/100)}r.restore(-1),r.fillStyle="#F44336",r.shadowColor="black",r.shadowBlur=20,r.save(1),r.translate(a.width/2,a.height/2),r.rotate(U.spinInfo.spinRotation),r.beginPath();var S=v*Z*0*.3;r.moveTo(0,(v*Z*-1.2-S)*m),r.lineTo(v*Z*m,0),r.lineTo(-v*Z*m,0),r.closePath(),r.fill(),r.restore(-1),r.fillStyle="#fff",r.beginPath(),r.arc(a.width/2,a.height/2,v*Z,0,2*Math.PI),r.closePath(),r.fill(),U.meshPrev||(r.save(1),r.fillStyle="#F44336",r.beginPath(),r.arc(a.width/2,a.height/2,v*Z*.85,0,2*Math.PI),r.closePath(),r.fill(),r.restore(-1),r.save(1),r.translate(a.width/2,a.height/2),r.font=v*Z*.3+"px GameFont",r.textBaseline="bottom",r.textAlign="center",r.fillStyle="#fff",r.fillText("SPIN",0,0+v*Z*.1),r.restore(-1),r.save(1),r.translate(a.width/2,a.height/2),r.globalAlpha=.7,r.font=v*Z*.15+"px GameFont",r.textBaseline="top",r.textAlign="center",r.fillStyle="#fff",r.fillText("-"+s.price+" KR",0,0+v*Z*.25),r.restore(-1)),U.meshRef.material.map.needsUpdate=!0,U.meshPrev&&U.spinInfo.endAnimVal==U.spinInfo.endAnimTarget&&(U.spinInfo.needsUpdate=!1),U.meshPrev||-1!=U.spinInfo.itemID||1!=U.spinInfo.spinWhlMlt||(U.spinInfo.needsUpdate=!1)}}},this.updateDestructables=function(e){if(this.isServer&&this.map.manager.destObjs.length)for(var t=this.map.manager.destObjs.length-1;t>=0;--t)(H=this.map.manager.objects[this.map.manager.destObjs[t]])&&H.canRespawn&&(!H.respawnT&&H.respawnR&&(H.respawnT=h.randInt(1,5e3)),H.respawnT-=e,H.respawnT<=0&&(this.map.manager.destObjs.splice(t,1),H.active=!0,H.destroyed=!1,H.respawnT=H.respawnR?0:H.respawnTStart,null!=H.health&&(H.health=H.startHealth),this.broadcast("ro",H.uid),H&&H.onRespawn&&this.onTrigger(H.destroyedBy,H),H.destroyedBy=null))},this.addSpray=function(e,t,i,n,s,a,r,o,l){var c=G.store.skins[2482];G.store.skins[t]&&G.store.skins[t].type==M.SPRAY&&(c=G.store.skins[t]),I.addSpray(e,t,i,n,s,a,r,o,c,G.store.skins[l])},this.voteMatch=function(e,t,i){t+="",this.endData.mts.includes(t)&&this.endData.vo&&(this.endData.vo[e]=this.endData.vo[e]&&this.endData.vo[e][0]==t?null:[t,i],this.broadcast("mv",this.endData.vo,this.endData.mts))},this.updateEventIndex=function(){if(O){if(this.eventIndex=0,!(this.hasHost()||this.isCustom||this.isOfficial||this.isComp)){let e=Date.now();for(let t=0;t<o.events.length;t++){let i=new Date(o.events[t].start).getTime(),n=new Date(o.events[t].end).getTime();if(e>=i&&e<=n){this.eventIndex=o.events[t].id;break}}}this.forceEvent&&(this.eventIndex=this.forceEvent,this.forceEvent=null)}};var J=[];this.init=function(e,t,i,n,s){this.initInProgress=!0,this.players.clear(),this.AI.reset(),this.bots&&this.bots.reset(),this.airDrop.reset(),this.teamFlags=[],this.teamScores={},this.inOvertime=!1,this.isEmptyLobby=!0,this.teamRoundWins=null,this.teamRoundWinsF=null,this.forfeited=null,this.notWinnable=!1,this.eventIndex=i,O&&(this.roundId=h.generateUUID()),this.updateEventIndex(),J.length=0;var a=null;if(this.endData.mts.length){for(var r=0;r<this.endData.mts.length;++r)if(J[r]=0,this.endData.vo)for(var o in this.endData.vo)this.endData.vo.hasOwnProperty(o)&&this.endData.vo[o]&&this.endData.mts[r]==this.endData.vo[o][0]&&(J[r]+=this.endData.vo[o][1]);var c=0,d=[];for(r=0;r<J.length;++r)J[r]>c?(c=J[r],d.length=0,d.push(this.endData.mts[r])):J[r]==c&&d.push(this.endData.mts[r]);a=0==c?h.getRandom(this.endData.mts):d[0]||null}if(this.fixedMapRotation&&(a=null,this.fixedMapRotationIndex>=this.fixedMapRotation.length&&(this.fixedMapRotationIndex=0),e=this.fixedMapRotation[this.fixedMapRotationIndex],this.fixedMapRotationIndex++),null!=a){var u=a.split(",");this.modeIndex=parseInt(u[0]),this.mapIndex=parseInt(u[1])}else this.modeIndex=null==t?this.config.modes?this.config.modes[h.randInt(0,this.config.modes.length-1)]:h.randInt(0,3):t,this.mapIndex=null==e?this.config.maps[h.randInt(0,this.config.maps.length-1)]:e;if(this.mode=l[this.modeIndex],O){var p={};this.mode&&this.mode.sendR&&(p.snf=this.mode.sendR),this.sendRateOvr&&(p.snf=this.sendRateOvr),this.tickRateOvr&&(p.tf=this.tickRateOvr),this.applyNetworking(p)}return this.isDoubleRaidDrops=!!this.isPubType()&&h.isDoubleRaidDrops(),this.isDoubleClassXP=!!this.isPubType()&&h.isDoubleClassXP(),this.isDoubleXP=!!this.isPubType()&&!!this.mode.doubleXP,this.map.maps&&this.map.maps[this.mapIndex]&&this.map.maps[this.mapIndex].gui&&this.map.maps[this.mapIndex].gui.length&&(this.customGUIs=h.parseGUIs(this.map.maps[this.mapIndex].gui,!0),this.customGUIs=this.customGUIs.sort(((e,t)=>(e.z||0)-(t.z||0))),E&&E.generateUIS(this.customGUIs,this)),s?this.map.asyncGenerate(this.mapIndex,this.modeIndex,this.eventIndex,n,this.isCustom,this.isComp,!!O).then(this.finishInit.bind(this,arguments)):(this.map.generate(this.mapIndex,this.modeIndex,this.eventIndex,n,this.isCustom,this.isComp,!!O),this.finishInit(),Promise.resolve())},this.finishInit=function(){if(!this.isDestroyed&&this.map){var e=this.connectedClients<=2&&this.isPubType()||this.isComp;if(this.map.manager.resetAll(e),this.removeBuilds(),this.resetFlags(),this.resetSpawnables(),this.resetPickups(),this.resetGates(),this.resetMysteryBoxes(),this.resetKrumMachines(),this.resetBanks(),this.resetZone(),this.resetSites(),this.resetDomZones(),this.resetStreaks(),this.activeBomb=null,this.eventTimer=0,this.eventTriggered=!1,this.oldGameTimer=0,this.loadedSprays={},this.triggerQueue.length=0,this.playerSounds.length=0,this.globalVals={},this.flagTeam=null,this.flagCarrier=null,this.fireSaleTimer=0,this.instaKillTimer=0,this.doublePointsTimer=0,this.map.manager.addPendingAIs(this.AI,e),O&&this.bots&&(this.isSandbox||!o.isProd||this.isPubType())&&this.map.manager.addPendingBots(this.bots),this.bots&&this.isSandbox&&this.bots.spawnPersistent(),O&&this.addPendingLeaderboards(),O&&this.switchMysteryBox(),this.generateTriggerTypes(),this.saveColls=this.triggerTypes.includes("onExitObject")||this.triggerTypes.includes("onEnterObject"),this.forceSpawn=this.config.forceSpawn||this.mode.forceSpawn,this.flippedSpawns=!1,this.minPlayers=this.config.minPlayers||this.mode.minPlayers,this.minPlayers||!this.config.lives&&!this.mode.lives||(this.minPlayers=2),this.voteToKick=null,this.voteInitiators.length=0,this.voteToForfeit=null,this.forfeitInitiators.length=0,this.needAllTimer=this.afkTimeout||3e5,this.zoneTimer=0,this.carpetBombTimer=0,this.objectiveTimer=0,this.objtvTime=0,this.activeObjective=null,this.startTime=Date.now(),this.gameTimer=null==this.mode.gameTime?6e4*this.config.gameTime:this.mode.gameTime,this.startedTimer=this.gameTimer,this.gameTimerP=null==this.mode.gameTime?6e4*this.config.gameTime:this.mode.gameTime,this.canOwnTime=!this.gameTimer,this.doLogTime=this.mode.logTime&&this.config.logTim,this.lastTimer=0,this.lastTimerW=0,this.lastTimerNA=0,this.roundCount=this.config.gamRounds-1,this.bestOf=!!this.config.bstOfR,this.needWinner=!!this.config.noDraws,this.lockoutTimer=0,this.waitTimers=null,this.mode.waitTimers){this.waitTimers=[];for(var n=0;n<this.mode.waitTimers.length;++n)this.waitTimers.push({time:this.mode.waitTimers[n].time,trigger:this.mode.waitTimers[n].trigger,noJoin:this.mode.waitTimers[n].noJoin,msg:this.mode.waitTimers[n].msg,noClear:this.mode.waitTimers[n].noClear,comp:this.mode.waitTimers[n].comp})}else!this.config.lives&&!this.mode.lives||this.config.warmupTime||this.mode.warmupTime||(this.waitTimers=[{time:12e3,msg:"match starts in ",trigger:function(e){for(var t=0;t<e.players.list.length;++t)e.players.list[t].spectating&&(e.players.list[t].lives=0)}}]);if((this.config.warmupTime||this.mode.warmupTime)&&(this.waitTimers||(this.waitTimers=[]),this.waitTimers.unshift({time:5e3,comp:!!G.isComp,getPop:function(e){return"00:00"==e&&!!G.mode&&[G.mode.name,G.mode.sub||"Destroy the Enemy"]},getSnd:function(e){for(var t=5;t>0;t--)if(e=="00:0"+t)return t;return!1},msg:"match starting in ",trigger:function(e){for(var t=0;t<e.players.list.length;++t)e.players.list[t].spectating&&(e.players.list[t].lives=0);e.unlockMove()}}),this.waitTimers.unshift({time:6e4*(this.config.warmupTime||this.mode.warmupTime),msg:"warmup ends ",comp:!!G.isComp,trigger:function(e){e.warmupReset(),e.lockMove()}})),this.condition=this.mode.condition?[...this.mode.condition]:null,(this.config.lives||this.mode.lives)&&(this.condition||(this.condition=[],this.mode.teamOptions||!this.mode.teams?this.condition.push((function(e){for(var t=0,i=0;i<e.players.list.length;++i)e.players.list[i].lives>0&&t++;return t>1})):this.mode.multiTeam?this.condition.push((function(e){let t={};for(var i=0;i<e.players.list.length;++i)e.players.list[i].lives>0&&e.players.list[i].team&&(null==t[e.players.list[i].team]&&(t[e.players.list[i].team]=0),t[e.players.list[i].team]++);return Object.keys(t).length>1})):this.condition.push((function(e){for(var t=0,i=0,n=0;n<e.players.list.length;++n)e.players.list[n].lives>0&&(1==e.players.list[n].team?t++:i++);return t>=1&&i>=1}))),this.winCondition||(this.mode.teamOptions||!this.mode.teams?this.winCondition=function(e){for(var t=0;t<e.players.list.length;++t)if(e.players.list[t].lives>0)return e.players.list[t];return null}:this.winCondition=function(e){for(var t=0;t<e.players.list.length;++t)if(e.players.list[t].team&&e.players.list[t].lives>0)return e.players.list[t].team;return 1})),this.scoreLimit=this.config.scoreLimit||this.mode.scoreLimit||0,this.scoreLimit&&(this.condition||(this.condition=[]),this.mode.teamOptions||!this.mode.teams?this.condition.push((function(e){for(var t=0;t<e.players.list.length;++t)if(e.players.list[t].score>=e.scoreLimit)return 0;return 1})):this.condition.push((function(e){for(var t in e.teamScores)if(e.teamScores.hasOwnProperty(t)&&e.teamScores[t]>=e.scoreLimit)return 0;return 1}))),this.kills=0,G.isServer&&this.mode.gameStart&&this.mode.gameStart(this),this.multiObjectTrigger("onGameStart"),R){var s;R.rate=1;var a=this.mode.ambInd||this.map.maps[this.mapIndex].ambInd||1;this.map.maps[this.mapIndex].ambIndC&&(a=this.map.maps[this.mapIndex].ambIndC,s=!0),(a=parseInt(a))!=this.lastAmbS&&(null!=this.lastAmbS&&R.stop(this.lastAmbSC?this.lastAmbS:"ambient_"+this.lastAmbS),this.lastAmbS=a,this.lastAmbSC=s,R.play(s?a:"ambient_"+a,o.amvVols[a]||.12,!0,1,s))}var r=this.customMapData?this.customMapData.id:0;if(L){var l={},c={data:l};if(c[w.MAX_PLAYERS]=this.maxPlayers,c[w.IS_PRIVATE]=this.private,c[w.AUTO_SEEK]=!this.isCustom,l[x.IS_CUSTOM]=this.isCustom?1:0,l[x.MAP_ID]=r,l[x.MODE_INDEX]=this.modeIndex||0,l[x.MAP_INDEX]=this.mapIndex||0,l[x.INFO]=this.getInfo(),l[x.VERSION]=y,this.config.promServ&&(l[x.PROMOTED_SERVER]=1),this.krRewards&&(l[x.KR_REWARDS]=1),this.passCode&&(l[x.PASSWORD]=1),this.isOfficial&&(l[x.OFFICIAL]=1,l[x.IS_CUSTOM]=1,this.isOfficial.canSeek||(c[w.AUTO_SEEK]=!1),this.isOfficial.header&&(l[x.HEADER]=this.isOfficial.header+" - "+l[x.INFO]),this.isOfficial.promo&&(l[x.PROMO]=1)),this.isDedicated&&(l[x.IS_DEDICATED]=1,this.isDedicated.header&&(l[x.HEADER]=this.isDedicated.header),this.isDedicated.promo&&(l[x.PROMO]=1)),c[w.GAME_TIME_LEFT]=this.isCustom?0:this.gameTimer/1e3,this.gameInstance)this.gameInstance.update(c,!0);else if(this.gameInstance=L.createGame(j,c),this.gameInstance.initiationPromise.then((()=>{this.isDestroyed||(this.updatedGameInstance=!0,this.broadcast("inst-id",this.gameInstance.id))})),O&&!o.isProd){var d=i(302),h=i(302),u=d.join(t.cwd(),"dynamic/version.json");h.watchFile(d.join(t.cwd(),"dynamic/version.json"),{interval:100},(()=>{try{l[x.VERSION]=y=JSON.parse(h.readFileSync(u,"utf-8")),this.gameInstance&&this.gameInstance.update(c)}catch(e){}}))}}for(var p of(this.mainScript&&this.mainScript.start&&this.mainScript.start(),this.initInProgress=!1,this.initQueue))p();this.initQueue.length=0}},this.addPendingLeaderboards=function(){if(this.customMapData&&this.customMapData.n)for(var e=0;e<this.map.manager.pendingLeaders.length;e++)H=this.map.manager.pendingLeaders[e],this.leaderboard.generate(this.customMapData.n,H.data.leaderType,null,H.data.leaderOrder,e,H.data.leaderResults)},this.generateTriggerTypes=function(){this.triggerTypes.length=0;let e=f.events.map((e=>e.name));for(var t=0;t<this.map.manager.objects.length;++t)if(H=this.map.manager.objects[t])for(var i=0;i<e.length;i++)H[e[i]]&&!this.triggerTypes.includes(e[i])&&this.triggerTypes.push(e[i])},this.giveTeamScore=function(e,t){G.teamScores[e]?G.teamScores[e]+=t:G.teamScores[e]=t,G.teamScoreUpd.indexOf(e)<0&&G.teamScoreUpd.push(e)},this.getTeamScores=function(e){var t=null;if(this.mode&&this.mode.teams&&this.teamScores){var i=e&&this.teamRoundWins?this.teamRoundWins:this.teamScores;for(var n in t=[],i)t.push([parseInt(n),i[n]||0,this.teamFlags[n]||null])}return t},this.getSyncData=function(){for(var e={gor:1,lockT:this.lockoutTimer,roundC:this.roundCount,zone:this.map.zone?this.map.zone.getData():0,lck:this.moveLock?1:0,obj:[this.activeObjective,this.objtvTime],pwup:[this.instaKillTimer,this.fireSaleTimer,this.doublePointsTimer]},t=[],i=0;i<this.map.manager.flags.length;++i)H=this.map.manager.flags[i],t.push([H.uid,H.x.round(1),H.y.round(1),H.z.round(1),H.carrier||0,H.flagTimer]);t.length&&(e.flg=t);var n=[];for(var s in this.map.manager.spawnables)H=this.map.manager.spawnables[s],n.push([H.i,H.sid,H.x.round(1),H.y.round(1),H.z.round(1),H.team,H.data]);n.length&&(e.spwns=n);var a=[];for(var r in this.globalVals)a.push(r,this.globalVals[r]);a.length&&(e.gbl=a);var o=[];for(i=0;i<this.map.manager.domzones.length;++i)H=this.map.manager.domzones[i],o.push(H.uid,H.capturedBy);o.length&&(e.doms=o);var l=[];for(i=0;i<this.map.manager.pickups.length;++i)H=this.map.manager.pickups[i],l.push([H.uid,H.pickup,H.orgPickup||0,H.active,[H.x,H.y,H.z]]);l.length&&(e.pkups=l);var c=[];for(i=0;i<this.map.manager.mysteryBoxes.length;++i)(H=this.map.manager.objects[this.map.manager.mysteryBoxes[i]])&&c.push(H.uid,~~H.active,H.state,H.timer,H.pendingWeapon,H.purchasedBy);c.length&&(e.mybx=c);var d=[];for(i=0;i<this.map.manager.krumMachines.length;++i)(H=this.map.manager.krumMachines[i])&&d.push(H.uid,~~H.active,H.state,H.timer,H.pendingWeapon,H.purchasedBy);d.length&&(e.krm=d);var h=[];for(i=0;i<this.map.manager.gates.length;++i)H=this.map.manager.gates[i],h.push(H.uid,~~H.active);h.length&&(e.gates=h);var u=[];for(i=0;i<this.map.manager.banks.length;++i)H=this.map.manager.banks[i],u.push(H.uid,H.deposited);u.length&&(e.banks=u);var p=[];for(i=0;i<this.map.manager.objects.length;++i)(H=this.map.manager.objects[i]).dynamic&&H.active&&p.push([H.typeInd,H.x,H.y,H.z,2*(H.width||0),2*(H.height||0),2*(H.length||0),0,H.uid]);p.length&&(e.dyno=p),this.map.manager.destObjs.length&&(e.dest=this.map.manager.destObjs),this.map.manager.movedObjs.length&&(e.mov=this.map.manager.movedObjs),this.experimentalFeatures&&(e.exf=!0);var f=[];for(i=0;i<this.playerSounds.length;++i)f.push(this.playerSounds[i].sid,this.playerSounds[i].val,this.playerSounds[i].data);return f.length&&(e.asnd=f),e},this.addPlayerSound=function(e,t,i){var n={sid:e,val:t,data:i};if(G.playerSounds.push(n),O)G.broadcast("asnd",e,t,i);else{var s=G.players.findBySid(e);n.obj=R[i.loop?"play3DL":"play3D"](t,s?s.x:0,s?s.y:0,s?s.z:0,i.vol,i.rate,void 0,void 0,void 0,void 0,!0)}},this.removePlayerSound=function(e,t,i){for(var n=G.playerSounds.length-1;n>=0;n--)if((i||G.playerSounds[n].val==t)&&G.playerSounds[n].sid==e){var s=G.playerSounds[n].obj;if(G.playerSounds.splice(n,1),O){if(G.broadcast("rsnd",e,t,i),!i)return}else s&&(s[0].isPlaying=!1,s[0].stopped=!0,s[0].stop(s[1]))}},this.updatePlayerSounds=function(){if(!O)for(var e=0;e<G.playerSounds.length;++e){var t=G.playerSounds[e].obj,i=G.players.findBySid(G.playerSounds[e].sid);i&&t&&t[0].pos(i.x,i.y+i.height/2,i.z,t[1])}},this.triggerChains={},this.onTrigger=function(e,t,i){if(G.isServer&&(t.isAI||G.teamCheck(t,e))){var n=t.trigActions;if(!n||!n.length)return;if(this.triggerChains[i]<=0)return;if(t.singleUse&&t.triggered)return;if(t.trigChance&&h.randInt(0,100)>t.trigChance)return;if(t.singleUseP&&e){if(t.uses.indexOf(e.id)>-1)return;t.uses.push(e.id)}if(t.triggered=!0,null==i&&(i=t.uid,this.triggerChains[i]=o.triggerLimit),this.triggerChains[i]--,!t.trigActCost&&(t.trigActM||0)<=3){if(n&&n.length)for(var s=0;s<n.length;s++){var r=n[s];G.triggers&&G.triggers.conditions[r.trigCond&&r.trigCond[0]||0].check(G,O,e,t,r)&&G.triggers&&G.triggers.actions[r.trigAct||0]&&(r.trigDelay>0?G.triggerQueue.push({action:r,player:e,obj:t,chain:i,timer:1e3*(r.trigDelay||0)}):G.triggers.actions[r.trigAct||0].execute(G,O,e,t,r,i))}t.selfDestruct&&G.triggers&&G.triggers.actions[24].execute(G,O,e,t,r,i)}else if(0==(t.trigActM||0)){if(!O||!a)return;if(!e.account)return;if(e.account.hack)return;if(!G.isCustom)return;if(!G.customMapData||!G.customMapData.id)return;if(!e.account.canUseKRTrigger)return void e.send("ch",-1,null,"KR Triggers require more playtime",2);a.call(138,[e.account.id,G.customMapData.id,t.trigActCost||0],(function(s,a){if(!s&&(s=(a=a&&a[0]?a[0][0]:null)?a.rsp:"Error occured.",a&&"Success"==a.rsp&&null!=a.fds&&null!=a.fds&&e&&e.account)){if(e.account.funds=a.fds||0,e.send("uf",e.account.funds),e.send("am",["Spent","-"+(t.trigActCost||0)+" KR",0,1]),n&&n.length)for(var r,o=0;o<n.length;o++)r=n[o],G.triggers&&G.triggers.actions[r.trigAct||0]&&(r.trigDelay>0?G.triggerQueue.push({action:r,player:e,obj:t,chain:i,timer:1e3*(r.trigDelay||0)}):G.triggers.actions[r.trigAct||0].execute(G,O,e,t,r,i));t.selfDestruct&&G.triggers&&G.triggers.actions[24].execute(G,O,e,t,r,i)}}))}else{var l=t.trigActM||0;if(l<3&&e.score>=(t.trigActCost||0)||3==l&&e.kills>=(t.trigActCost||0)||4==l&&e.account||5==l&&e.account&&e.account.featured||6==l&&e.account&&e.account.premiumT||8==l&&e.account&&(e.account.level||0)>=(t.trigActCost||0)){if(0!=(t.trigActCost||0)&&(e&&e.send("am",[l>1?"Unlocked":"Purchased",l>1?null:-(t.trigActCost||0),0,1]),l<2&&this.players.score(e,-(t.trigActCost||0))),n&&n.length)for(s=0;s<n.length;s++){r=n[s];G.triggers.conditions[r.trigCond&&r.trigCond[0]||0].check(G,O,e,t,r)&&G.triggers&&G.triggers.actions[r.trigAct||0]&&(r.trigDelay>0?G.triggerQueue.push({action:r,player:e,obj:t,chain:i,timer:1e3*(r.trigDelay||0)}):G.triggers.actions[r.trigAct||0].execute(G,O,e,t,r,i))}t.selfDestruct&&G.triggers&&G.triggers.actions[24].execute(G,O,e,t,r,i)}}}},this.playerTrigger=function(e,t){for(var i=0;i<this.map.manager.playerObjs.length;++i)(H=this.map.manager.objects[this.map.manager.playerObjs[i]])&&H.active&&H[e]&&this.onTrigger(t,H)},this.objectTrigger=function(e,t,i){(H=this.map.manager.findBySid(t))&&H.active&&H[e]&&this.onTrigger(i,H)},this.multiObjectTrigger=function(e,t){if(this.triggerTypes.includes(e))for(var i=0;i<this.map.manager.objects.length;++i)(H=this.map.manager.objects[i])&&H.active&&H[e]&&this.onTrigger(t,H)},this.getActionValue=function(e,t,i,n,s){if(0==(i.trigConstT||0))return s;if(h.isString(i.trigConstC)&&i.trigConstC.length){var a;if(1==(i.trigConstT||0)){if(!t)return;if(!t.custVals)return;if(null==t.custVals[i.trigConstC])return;a=t.custVals[i.trigConstC]}else if(2==(i.trigConstT||0)){if(!e)return;if(o.playerVals.indexOf(i.trigConstC)>-1){if(null==e[i.trigConstC])return;a=e[i.trigConstC]}else{if(!e.custVals)return;if(null==e.custVals[i.trigConstC])return;a=e.custVals[i.trigConstC]}}else if(3==(i.trigConstT||0)){if(!this.globalVals)return;if(null==this.globalVals[i.trigConstC])return;a=this.globalVals[i.trigConstC]}return null==a?void 0:"number"==n?parseInt(a)||void 0:"float"==n?parseFloat(a)||void 0:"string"==n?a+"":a}},this.foundEventItem=function(e,t){if(3==G.eventIndex&&e&&(this.isPubType()||e.account&&e.account.isDev)){t.rare||e.send("4");var i=G.mapIndex+"-"+t.uid;if(!e.account||e.tempEggs.indexOf(i)>=0)return;e.tempEggs.push(i),a.call(68,[1,e.account.id,i,0,o.easterEggs],(function(t,i){if(i&&i[0]&&i[0][0])if("success"==i[0][0].re)G.broadcast("chi",0,null,["event.easter.completed",e.fakeName||e.alias],2,h.getRandom(d.easterPalette)),G.challenges.update(G,"eggs",10,null,e);else{if(!i[0][0].cnt)return void e.send("chi",0,null,["event.easter.found.old"],2,h.getRandom(d.easterPalette));G.broadcast("chi",0,null,["event.easter.found.new",e.fakeName||e.alias,i[0][0].cnt,o.easterEggs],2,h.getRandom(d.easterPalette)),G.challenges.update(G,"eggs",1,null,e)}else e.send("chi",0,null,["event.easter.found.old"],2,h.getRandom(d.easterPalette))}))}},this.getItemByChance=function(e){for(var t=[],i=h.randFloat(1e-4,100),n=0,s=0,a=0;a<G.store.rarities.length;++a)if(i<(s+=G.store.lootRars[a]||0)){n=a;break}for(a=0;a<e.length;++a){var r=parseInt(e[a]),o=G.store.skins[r];if(r<0)for(var l=0;l<-r;++l)t.push(-1);else o&&o.rarity==n&&t.push(r)}return parseInt(t[h.randInt(0,t.length-1)])},this.giveSkin=function(e,t,i){if(O&&G.store.skins[t]&&e.account&&!e.account.hack){var n=this.hasHost()||this.isDedicated||this.isCustom||this.isOfficial&&!this.isOfficial.hasRewards;this.isOfficial&&this.isOfficial.hasRewards&&(n=!1),n&&!this.mimicPubs||this.sendUserSkin(i||"raid",e,t)}},this.dropSkin=function(e,t,i,n,s,a){if(O&&G.store.skins[t]&&e.account&&!e.account.hack){var r=this.hasHost()||this.isDedicated||this.isCustom||this.isOfficial&&!this.isOfficial.hasRewards;this.isOfficial&&this.isOfficial.hasRewards&&(r=!1),r&&!this.mimicPubs||this.dropSpawnable(24,e,{itemId:t,reason:i,xD:h.toRad(h.randInt(0,360))},{x:n+h.randInt2(3,8),y:s,z:a+h.randInt2(3,8)})}},this.sendUserSkin=function(e,t,i){O&&t&&t.account&&!t.account.hack&&a.call(176,[e,t.account.id,0,0,i,o.currentBattlepass,0],(function(e,i){if(i=i&&i[0]&&i[0][0]?i[0][0]:null,t&&t.account){var n=i&&null!=i.ski&&null!=i.ski?i.ski.split(","):[];if(n&&n.length)for(var s=0;s<n.length;s++)n[s]=parseInt(n[s]),t.account.addSkin(n[s]),G.challenges.update(G,"find",1,{item:n[s]},t),G.broadcastEx(t.id,"skinF",t.id,n[s],!1),t.send("skin",n[s])}}))},this.sendUserJunk=function(e,t,i){O&&t.account&&a.call(176,[e,t.account.id,0,i,"",o.currentBattlepass,0],(function(e,n){if(n=n&&n[0]&&n[0][0]?n[0][0]:null,t&&t.account){n&&null!=n.jnk&&null!=n.jnk&&(!0,t.account.junk=parseFloat(n.jnk),t.send("jnk",t.account.junk,i))}}))},this.rewardKR=function(e,t){O&&e&&e.account&&!e.account.hack&&G.isCustom&&G.customMapData&&G.customMapData&&G.customMapData.id&&!e.waitRew&&h.isNumber(t)&&(t=Math.abs(t))>0&&(e.waitRew=!0,a.call(137,[e.account.id,t,G.customMapData.id],(function(i,n){i||(i=(n=n&&n[0]?n[0][0]:null)?n.rsp:"Error occured.",n&&"Success"==n.rsp&&null!=n.fds&&null!=n.fds&&e&&e.account&&(e.account.funds=n.fds||0,e.send("uf",e.account.funds),e.send("ch",-1,null,"Rewarded "+t+" KR",2),e.send("am",["Reward",t+" KR",0,1]))),e&&(e.waitRew=!1)})))},this.checkPlayerLimit=function(){for(var e=[],t=0,i=0;i<G.players.list.length;++i)!G.players.list[i]||G.players.list[i]&&(G.players.list[i].kpdData||G.players.list[i].isBot)||++t>G.maxPlayers&&e.push(G.players.list[i]);for(i=e.length-1;i>=0;--i)e[i]&&(e[i].kicked=!0,e[i].send("error","Over player limit"),O.sockets[e[i].id]&&O.sockets[e[i].id].close())},this.checkBadges=function(e){if(O&&e&&e.account&&!e.account.hack&&G.isPubType()){for(var t=[],i=0;i<G.badges.length;i++)e&&e.account&&!e.account.badges.includes(i)&&G.badges[i].claimable&&G.badges[i].req(e.account)&&(e.account.badges.push(i),t.push(i),a.call(181,[e.account.name,i,1]));t.length&&e.send("nbdgr",t)}},this.inProgress=function(){var e=!0;return G.waitTimers&&!G.waitTimers[0].contTime&&(e=!1),e},this.getWinTeam=function(e){if(this.mode.teams&&this.teamScores){var t=0,i=null,n=!1,s=this.teamRoundWins||this.teamScores;for(var a in e&&(s=this.teamScores),s)s.hasOwnProperty(a)&&s[a]>=t&&(s[a]>t?n=!0:s[a]==t&&(n=!1),t=s[a],i=a);return 0==t||!n&&this.needWinner?0:i||0}return 0},this.prepareForfeit=function(e){let t=Math.ceil((G.bestOf||1)/2);G.teamRoundWinsF={...G.teamRoundWins},G.forfeited=!0,G.teamScores={},G.teamScores[e]=t,G.teamRoundWins={},G.teamRoundWins[e]=t,G.roundCount=0,G.endGame()},this.endGame=function(e,t,i){var n=!1;if(this.bestOf&&null==e){var s=G.getWinTeam(!0);if(this.teamScores={},this.broadcast("ts"),this.leadersUpdated=!0,this.inOvertime=!1,this.notWinnable=!1,s)this.teamRoundWins||={},this.teamRoundWins[s]=(this.teamRoundWins[s]||0)+1;else if(this.needWinner&&!this.endIndex)return this.inOvertime=!0,this.broadcast("tx","Overtime","+60 Seconds"),void(this.gameTimer=6e4);n=this.teamRoundWins[s]>=this.config.gamRounds/2}if(null==e&&this.roundCount>0&&!n){this.moveLock=!0;for(var r=0;r<this.players.list.length;++r)(H=this.players.list[r])&&(H.active=!1,H.deathInfo=null);s=G.getWinTeam();return this.roundCount--,this.broadcast("rds",this.roundCount,!1,s,this.teamRoundWins),this.flippedSpawns=!this.flippedSpawns,this.mode&&this.mode.objective&&!this.mode.dom&&(this.activeObjective=-1,this.objtvTime=0,this.nextObjective(null)),this.waitTimers||=[],this.waitTimers.unshift({time:1e3*(G.config.intermTmr||10),comp:!0,dontWait:!0,getPop:function(e){return"00:00"==e&&!!G.mode&&[G.mode.name,G.mode.sub||"Destroy the Enemy"]},getSnd:function(e){for(var t=5;t>0;t--)if(e=="00:0"+t)return t;return!1},msg:"intermission ",trigger:function(e){e.unlockMove()}}),void(this.gameTimer=this.startedTimer)}if(this.mode.endSort?this.players.list.sort(this.mode.endSort):this.players.list.sort(h.orderByScore),this.endIndex=null==e?null:e,null==this.endIndex)this.winner=this.mode.winCondition?this.mode.winCondition(this):this.mode.teams&&this.teamScores?this.getWinTeam():this.mode.multiWinner?this.players.list.slice(0,this.mode.multiWinner):this.players.list[0];else if(3!=this.endIndex)4==this.endIndex&&(this.winner=t||-1);else if(this.mode.teams&&this.teamScores){var l=0,c=0;for(r=0;r<this.players.list.length;++r)1==(H=this.players.list[r]).team?l++:c++;this.winner=l==c?null:l>c?1:2}else this.winner=this.players.list[0];if(this.isPubType()&&this.isEmptyLobby&&!this.isSandbox&&(this.winner=-1),this.needWinner&&!this.winner&&!this.endIndex)return this.broadcast("tx","Overtime","+60 Seconds"),void(this.gameTimer=6e4);this.mode.onPreEnd&&this.mode.onPreEnd(this,O,a);var d=this.mode.multiWinner&&Array.isArray(this.winner);for(r=0;r<this.players.list.length;++r)(H=this.players.list[r]).didWin=H.team&&H.team==this.winner||H==this.winner||d&&this.winner.includes(H),H.didWin&&this.challenges.update(this,"w",1,null,H),this.challenges.update(this,"gp",1,null,H),H.affectStats=!1;var u=this.store.skins.find((e=>e&&e.mapReward==this.mapIndex&&e.seas==o.currentSeason));if(this.isPubType()&&null==this.endIndex)for(this.config.gamRounds,r=0;r<this.players.list.length;++r){if((H=this.players.list[r]).reward=0,H.tmpBPData={bpp:0,cbp:0,gn:0},F&&F.data&&(H.tmpBPData.mx=F.data.bpp_perlevel,H.tmpBPData.id=F.data.id,H.tmpBPData.ml=F.data.itemcount),H.account&&!H.account.hack&&!H.kpdData){u&&100==h.randInt(1,100)&&(H.skinReward=u.index,this.giveSkin(H,u.index,"mapreward"));var p=H.score*(this.mode.rewardMlt||1);H.reward=Math.min(H.account.premiumT?40:30,Math.floor(p/100)),H.challMode&&(H.reward=Math.floor(1.5*H.reward)),this.isOfficial&&this.isOfficial.reward&&H.didWin&&(H.reward+=this.isOfficial.reward);var f=Math.min(20,Math.floor(.01*p));const e=f;if(!this.isEmptyLobby){let e=(null==this.mode.gameTime?6e4*this.config.gameTime:this.mode.gameTime)-Math.max(0,this.gameTimerP||0);(H.playTime||0)>=e/2&&(f+=30)}if(H.account.BP&&F&&F.data){const t=f,i=parseInt(H.account.BP.bpp),{award:n,newAvailable:s}=F.validateProgress(i,f);f=n;var m=Math.max(n-e,0);H.account.BP.bpp+=f;var g=i+f;H.tmpBPData.pbpp=i,H.tmpBPData.bpp=g,H.tmpBPData.gn=f,H.tmpBPData.bbpp=m,H.tmpBPData.unbpp=t,H.tmpBPData.rbpp=s,H.tmpBPData.re=F.getNextReward(g,H.account.BP.tier)}H.reward+=H.additionalReward}H.additionalReward=0}this.endTimer=this.isComp||this.mode.infEndTimer?"inf":i?1:this.endTimerOverride?this.endTimerOverride:o.endTimer,this.waitTimers=null;var v=this.mode.endStats||o.endStats;this.isOfficial&&-1==v.indexOf("reward")&&v.push("reward"),this.endData.modeIndex=this.modeIndex||0,this.endData.vo={},this.endData.tms=this.getTeamScores(!0);let y=this.config?this.config.modes||this.map.rotationModes:null,b=this.config.maps||this.map.rotationMaps;this.endData.mts.length=0;var w=0,x=y.indexOf(0)>-1,S=x&&o.events.find((e=>e.id==G.eventIndex&&e.limitedTimeMode));if(h.isNumber(this.forceMap)||h.isNumber(this.forceMode))this.endData.mts=[,,,,].fill((null==this.forceMode?this.modeIndex:this.forceMode)+","+(null==this.forceMap?this.mapIndex:this.forceMap)),this.forceMap=void 0,this.forceMode=void 0;else if(this.isCustom||this.isOfficial)for(;this.endData.mts.length<4;){let e=[0==w&&x?0:y?y[h.randInt(0,y.length-1)]:h.getRandom(this.map.rotationModes),b[h.randInt(0,b.length-1)]];if(e=e.join(),this.endData.mts.indexOf(e)<0&&this.endData.mts.push(e),++w>20)break}else this.endData.mts=this.genMatchList(b,x,S);this.mode.onEnd&&this.mode.onEnd(this,O,a),this&&this.mainScript&&this.mainScript.onGameEnd&&this.mainScript.onGameEnd();var M=[];for(r=0;r<this.players.list.length;++r){!(H=this.players.list[r]).account||H.account.hack||H.kpdData||3==this.endIndex||this.checkChallenges(H),this.endData.ed.length=0,this.endData.mdls.length=0;for(var k=H.account&&H.account.isDev,_=null,T=0;T<this.players.list.length;++T)if(!this.players.list[T].kpdData&&(!this.players.list[T].bypassUser||this.isSandbox))for(var C=0;C<v.length;++C)"name"==v[C]?this.endData.ed.push([this.players.list[T].getName(H.account,!1,k||H.kpdData),this.players.list[T].getName(H.account,!0,k||H.kpdData)]):(_=o.endForm[v[C]]?o.endForm[v[C]](this.players.list[T][v[C]],this,this.players.list[T]):this.players.list[T][v[C]],"reward"==v[C]&&this.players.list[T].skinReward&&(_=[_,this.players.list[T].skinReward]),this.endData.ed.push(_));for(var I in H.medals)this.endData.mdls.push(I,H.medals[I]);const e=this.isSandbox?JSON.parse(JSON.stringify(this.endData)):this.endData;H.account&&(H.account.lastScore=H.score),H.send("end",i?2:0,this.winner||3==this.endIndex?H.didWin:-1,e,this.mode.teams&&(this.winner||3==this.endIndex)?this.winner:-1,this.endIndex,H.reward,H.tmpBPData),H.reset(),M.push(H.id)}this.endData.ed.length=0,this.endData.mdls.length=0;for(T=0;T<this.players.list.length;++T)if(!this.players.list[T].kpdData&&(!this.players.list[T].bypassUser||this.isSandbox)){for(C=0;C<v.length;++C)"name"==v[C]?this.endData.ed.push([this.players.list[T].getName(1,!0,!1)]):this.endData.ed.push(o.endForm[v[C]]?o.endForm[v[C]](this.players.list[T][v[C]],this,this.players.list[T]):this.players.list[T][v[C]]);this.players.list[T].skinReward=null}3==this.endIndex&&this.broadcastEx(M,"end",i?2:0,!1,this.endData,this.mode.teams&&(this.winner||3==this.endIndex)?this.winner:-1,this.endIndex,0,null),M.length=0,this.isSandbox||this.updateAccounts(),this.players.clear()},this._lastUpdate=0,this.updateIndex=0,this.tick=function(){this.updateIndex++;let e=Date.now();const t=e-this._lastUpdate;this._lastUpdate=e,this.updateBans(t),this.update(t,e),N&&N.checkPlayers?N.checkPlayers(this,t):this.isServer&&this.players.resetFreq(),this.syncState(),this.updateState()},this.update=function(e,t,i){if(this.now=t,this.fixedDelta=e,!this.isDestroyed){if(this.isServer){if(this.initInProgress)return;var n=!0,s=!1;if(this.endTimer>0)n=!1,this.endTimer-=e,this.endTimer<=0?(this.init(void 0,void 0,0,void 0,!this.isSandbox).then(function(){this.isDestroyed||this.broadcast("init",this.mapIndex,this.modeIndex,this.eventIndex,this.getTeamScores(!0),this.getTeamScores(),this.host,this.config,this.customData,0,this.customMapData||null,this.getSyncData(),this.networkData,!1,!!this.isOfficial,this.isComp,this.sessionId,this.roundId,this.gameTimer)}.bind(this)),this.endTimer=0):(V=h.getTime(this.endTimer))!=this.lastTimer&&(this.lastTimer=V,this.broadcast("t",V,1));else if(this.lockoutTimer)this.lockoutTimer-=e,this.lockoutTimer<=0&&(this.lockoutTimer=0),V=h.getTime(this.lockoutTimer),this.lockoutTimer&&V==this.lastTimer||(this.lastTimer=V,this.broadcast("lkt",this.lockoutTimer));else if("inf"==this.endTimer)this.endTimer!=this.lastTimer&&(this.lastTimer=this.endTimer,this.broadcast("t","inf",this.endIndex||2));else if(this.waitTimers)if(n=!1,!this.waitTimers[0].dontWait&&!this.waitTimers[0].contTime&&this.minPlayers&&this.players.activeCount()<this.minPlayers)n=!1,s=!0,this.mode.needAll?(this.needAllTimer-=e,this.needAllTimer<=0?this.endGame(3):(V=h.getTime(this.needAllTimer))!=this.lastTimerNA&&(this.lastTimerNA=V,this.broadcast("gmsg","wt",V))):this.broadcast("gmsg","wt");else if(this.pastTimers=!0,this.waitTimers[0].time-=e,this.waitTimers[0].time<=0){if(this.waitTimers[0].trigger&&this.waitTimers[0].trigger(this,-this.waitTimers[0].time,O),this.waitTimers[0].time<=0){var a=!!this.waitTimers[0].noClear;this.waitTimers.splice(0,1),this.waitTimers.length||(this.waitTimers=null,a||this.broadcast("gmsg"))}}else if((V=h.getTime(this.waitTimers[0].time))!=this.lastTimerW){this.lastTimerW=V;var r=0;this.waitTimers[0].getSnd&&(r=this.waitTimers[0].getSnd(V));var o=0;this.waitTimers[0].getPop&&(o=this.waitTimers[0].getPop(V)),this.broadcast("gmsg",this.waitTimers[0].msg,V,r,o,this.waitTimers[0].hideGameUI?1:0)}if(!this.lockoutTimer&&this.endTimer<=0&&!s&&(n||this.waitTimers&&this.waitTimers[0].contTime)){if(this.condition)for(var l=0;l<this.condition.length;l++)if(!this.condition[l](this)){this.gameTimer="skip";break}"skip"!=this.gameTimer&&this.mode&&this.mode.timed?(this.gameTimer+=e,this.gameTimerP+=e,(V=h.getTime(this.gameTimer,this.mode.showMS,this.mode.showHour))!=this.lastTimer&&(this.lastTimer=V,this.broadcast("t",V,0,this.gameTimer))):(this.gameTimer>0||"skip"==this.gameTimer)&&("skip"!=this.gameTimer&&(this.gameTimer-=e,this.gameTimerP-=e),"skip"==this.gameTimer||this.gameTimer<=0?(this.gameTimer=0,this.endGame()):(V=h.getTime(this.gameTimer,this.mode.showMS))!=this.lastTimer&&(this.lastTimer=V,this.broadcast("t",V,0,this.gameTimer)))}if(this.updateStreaks(e),this.voteToKick&&(this.voteToKick.timer-=e,this.voteToKick.timer<=0&&(this.voteToKick=null,this.broadcast("vk",null))),this.voteToForfeit&&(this.voteToForfeit.timer-=e,this.voteToForfeit.timer<=0&&(this.voteToForfeit=null,this.broadcast("vf",null))),this.updateBomb(e),this.updateEvents(e),!this.waitTimers||this.waitTimers[0]&&this.waitTimers[0].contTime){for(l=0;l<this.map.manager.timerObjs.length;++l)(H=this.map.manager.objects[this.map.manager.timerObjs[l]])&&H.trigT>0&&H.active&&(H.trigT-=e,H.trigT<=0&&(H.trigT=1e3*(H.trigConstE||1),this.onTrigger(null,H)));for(l=this.triggerQueue.length-1;l>=0;l--)(H=this.triggerQueue[l]).timer-=e,H.timer<=0&&(this.triggers.actions[H.action.trigAct||0].execute(this,O,H.player,H.obj,H.action,H.chain),this.triggerQueue.splice(l,1));this.updateObjectiveTime(e)}}if(this.updatePowerups(!!O,e*this.config.deltaMlt),this.bots&&this.bots.update(e*this.config.deltaMlt),this.players.update(e*this.config.deltaMlt),this.updatePlayerSounds(e*this.config.deltaMlt),this.AI.update(e*this.config.deltaMlt),this.pets.update(e*this.config.deltaMlt),this.airDrop.update(e*this.config.deltaMlt),this.updateTeleporters(e*this.config.deltaMlt),O&&this.updateSpinners(e*this.config.deltaMlt),this.updateDestructables(e*this.config.deltaMlt),this.updateFlags(!!O,i,e*this.config.deltaMlt),this.updateSpawnables(!!O,i,e*this.config.deltaMlt),this.updateDomZones(e*this.config.deltaMlt),this.updateMysteryBoxes(!!O,i,e*this.config.deltaMlt),this.updateKrumMachines(!!O,i,e*this.config.deltaMlt),!this.isServer&&this.objActive&&this.updateObjectiveTime(e*this.config.deltaMlt),this.isServer&&this.mode&&this.mode.update&&this.mode.update(this,O,e*this.config.deltaMlt),this.map.zone)if(this.isServer&&(!this.waitTimers||this.waitTimers[0]&&this.waitTimers[0].contTime)){if(this.zoneTimer-=e*this.config.deltaMlt,this.map.zone.update(e*this.config.deltaMlt/1e3,null,this),this.zoneTimer<=0){this.zoneTimer=1e3,this.broadcast("zn",this.map.zone.getData());for(var c=0;c<this.players.list.length;++c)(U=this.players.list[c]).active&&(!this.mode.teamOptions||"Infected"!=this.mode.teamOptions[U.team-1])&&this.map.zone.isOutside(U)&&this.players.changeHealth(U,null,10)&&this.players.kill(U)}}else O||this.map.zone.animate(e*this.config.deltaMlt);if(this.projectiles.update(e*this.config.deltaMlt),P&&P.update(e*this.config.deltaMlt,window.spectating?I.fpsCamera.getWorldPosition(_):i),this.mainScript&&this.mainScript.update&&this.mainScript.update(e*this.config.deltaMlt),I&&I.render(e*this.config.deltaMlt),this.isServer){for(l=0;l<this.players.list.length;++l){if((H=this.players.list[l]).active&&H.lastProg!=H.interProg){H.lastProg=H.interProg;for(var d=0;d<this.players.list.length;++d)this.players.list[d].specStream==H.sid&&this.players.list[d].send("p",(H.interProg||0).round(3))}if(H.active&&H.lastMProg!=H.interMProg){H.lastMProg=H.interMProg;for(d=0;d<this.players.list.length;++d)this.players.list[d].specStream==H.sid&&this.players.list[d].send("mp",(H.interMProg||0).round(3))}}for(l=0;l<this.teamScoreUpd.length;++l)this.broadcast("ts",this.teamScoreUpd[l],this.teamScores[this.teamScoreUpd[l]]);this.leadersUpdated&&this.players.syncLeaders(!0),this.teamScoreUpd.length=0}}};var Q=null,$=null,ee=[];this.updateState=function(){var e=Date.now();if(!this.isDestroyed&&h.shouldUpdate(this.updateIndex,o.serverTickFrequency,this.sendFrequency)){for(var t=0;t<this.players.list.length;++t)if(((Q=this.players.list[t]).active||Q.spectating)&&!Q.locked){if(this.players.storeState(Q,e),this.noSync)continue;ee.length=0;for(var i=0;i<this.players.list.length;++i)$=this.players.list[i],Q==$||!$.active||$.isHidden||!Q.spectating&&this.mode&&this.mode.viewDis&&!(this.mode.viewDis>h.getD3D($.x,$.y,$.z,Q.x,Q.y,Q.z))||$.kpdData||ee.push($.sid,$.x.round(2),$.y.round(2),$.z.round(2),Math.round(h.toDeg($.xDire)),Math.round(h.toDeg($.yDire)),$.stepVal,$.onGround?1:0,Math.round($.crouchVal),$.loadoutIndex,$.aimVal?1:0,$.grapple?[Math.round($.grapple.x),Math.round($.grapple.y),Math.round($.grapple.z)]:0,Math.round($.ping));Q.send("k",ee||null,this.sendFrequency,e-this.startTime)}h.shouldUpdate(this.updateIndex,this.tickFrequency,this.aiSyncT)&&this.AI.sync(),h.shouldUpdate(this.updateIndex,this.leaderOSync,1)&&this.leaderboard.sync(),h.shouldUpdate(this.updateIndex,this.airDSyncT,1)&&this.airDrop.sync()}},this.syncState=function(){var e=Date.now();if(!this.isDestroyed&&h.shouldUpdate(this.updateIndex,o.serverTickFrequency,this.syncFrequency))for(var t=0;t<this.players.list.length;++t){if((Q=this.players.list[t]).pingTime=e,ee.length=0,Q.active&&!this.noSync){ee.push(Q.inputSN,Math.round(Q.ping),Q.x,Q.y,Q.z,Q.velocity.y,Q.velocity.x,Q.velocity.z,Q.xDire,Q.onGround?1:0,Q.didJump?1:0,Q.didJumpW?1:0,Q.wallJumpC,Q.onWall?1:0,Q.onLadder?1:0,Q.aimVal,Q.crouchVal,Q.loadoutIndex,Q.slideTimer,Q.canSlide?1:0,Q.onTerrain?1:0,Q.xVelC,Q.zVelC,Q.grapple||0,Q.canSlideT);let e=[];if(N&&N.checkCustSync){var i=N.checkCustSync(Q);i&&e.push(...i)}ee.push(e.length?e:0);var n=this.movement[Q.config.movSch||0];if(n&&n.sendVals&&n.sendVals.length)for(var s=0;s<n.sendVals.length;++s)ee.push(Q[n.sendVals[s]])}Q.send("l",ee.length?ee:0)}},this.updateBans=function(e){if(this.banTempList)for(var t in this.banTempList)this.banTempList[t]-=e,this.banTempList[t]<=0&&delete this.banTempList[t]},this.getPossibleMatches=function(e){for(var t={party:[],normal:[],event:[]},i=0;i<e.length;i++)for(var n,s=this.map.maps[e[i]],a=s.config&&s.config.modes?s.config.modes:[0],r=0;r<a.length;r++)n=a[r]+","+e[i],(!l[a[r]].preventCustomGames||null!=l[a[r]].event&&this.eventIndex==l[a[r]].event)&&(l[a[r]].party?-1==t.party.indexOf(n)&&t.party.push(n):l[a[r]].event?-1==t.event.indexOf(n)&&t.event.push(n):-1==t.normal.indexOf(n)&&t.normal.push(n));return t},this.genMatchList=function(e,t,i){e=e||this.map.rotationMaps;var n=this.getPossibleMatches(e),s=n.normal,a=n.party,r=n.event;h.yateShuffle(s),h.yateShuffle(a),h.yateShuffle(r);var l=o.matchPicks,c=[];if(i&&r[0]&&(c.push(r[0]),r.splice(r[0],1),l--),t){var d=s.findIndex((e=>e&&e.startsWith("0")));d>=0&&(c.push(s[d]),s.splice(d,1),l--)}if(s.length)for(var u=0;u<l-1;u++)h.yateShuffle(s),c.push(s[0]),s.shift();return a.length&&c.length<o.matchPicks&&(h.yateShuffle(a),c.push(a[0]),a.shift()),c},this.validateAccountName=function(e){return!this.accountTeams||!!e&&(!!this.isAccountSpec(e)||-1!=this.getAccountTeamIndex(e))},this.getAccountTeamIndex=function(e){if(!this.accountTeams||!e)return-1;for(var t=0;t<this.accountTeams.length;t++)if(this.accountTeams[t].indexOf(e)>=0)return t;return-1},this.isAccountSpec=function(e){return!!this.accountSpecs&&!!e&&this.accountSpecs.indexOf(e)>=0},this.logPunishment=function(e,t,i){t&&e&&e.account&&(e.account.isMod||e.account.isDeputy)&&G.host!=e.id&&a.call(167,[t.account?t.account.id:0,e.account.id,G.gameInstance.id,i],(function(){}))},this.kick=function(e,t){return!!e&&(e.kicked=!0,e.send("error",t||"Kicked by host"),O.sockets[e.id]&&O.sockets[e.id].close(),!0)},this.teamCheck=function(e,t){return!e.team||!G.mode||!G.mode.teams||!!t&&e.team==t.team},this.getTime=e=>h.getTime(e),this.send=function(){(G.isSandbox?G.sandbox:O).send(...arguments)},this.broadcast=function(){(G.isSandbox?G.sandbox:O).broadcast("game"+G.sid,...arguments)},this.broadcastEx=function(){(G.isSandbox?G.sandbox:O).broadcastEx("game"+G.sid,...arguments)},this.setup=function(){this._lastUpdate=Date.now(),this.tickInterval=setInterval(this.tick.bind(this),o.serverTickRate)},O&&this.setup()}}).call(this,i(7))},function(e,t,i){const{MathUtils:n,Quaternion:s,Vector3:a,Matrix3:r,Line3:o,Plane:l,Box3:c,Sphere:d,Triangle:h}=i(0),u={MathUtils:n,Quaternion:s,Vector3:a,Matrix3:r,Line3:o,Plane:l,Box3:c,Sphere:d,Triangle:h};i(321)(u),e.exports=u},function(e,t){e.exports=function(e){return function(){const t=new e.Vector3,i=new e.Vector3,n=new e.Vector3;class s{constructor(t=new e.Vector3(0,0,0),i=new e.Vector3(0,1,0),n=1){this.start=t,this.end=i,this.radius=n}clone(){return new s(this.start.clone(),this.end.clone(),this.radius)}set(e,t,i){this.start.copy(e),this.end.copy(t),this.radius=i}copy(e){this.start.copy(e.start),this.end.copy(e.end),this.radius=e.radius}getCenter(e){return e.copy(this.end).add(this.start).multiplyScalar(.5)}translate(e){this.start.add(e),this.end.add(e)}checkAABBAxis(e,t,i,n,s,a,r,o,l){return(s-e<l||s-i<l)&&(e-a<l||i-a<l)&&(r-t<l||r-n<l)&&(t-o<l||n-o<l)}intersectsBox(e){return this.checkAABBAxis(this.start.x,this.start.y,this.end.x,this.end.y,e.min.x,e.max.x,e.min.y,e.max.y,this.radius)&&this.checkAABBAxis(this.start.x,this.start.z,this.end.x,this.end.z,e.min.x,e.max.x,e.min.z,e.max.z,this.radius)&&this.checkAABBAxis(this.start.y,this.start.z,this.end.y,this.end.z,e.min.y,e.max.y,e.min.z,e.max.z,this.radius)}lineLineMinimumPoints(e,s){const a=t.copy(e.end).sub(e.start),r=i.copy(s.end).sub(s.start),o=n.copy(s.start).sub(e.start),l=a.dot(r),c=a.dot(a),d=r.dot(r),h=r.dot(o),u=a.dot(o);let p,f;const m=c*d-l*l;if(Math.abs(m)<1e-10){const e=-h/d,t=(l-h)/d;Math.abs(e-.5)<Math.abs(t-.5)?(p=0,f=e):(p=1,f=t)}else p=(h*l+u*d)/m,f=(p*l-h)/d;f=Math.max(0,Math.min(1,f)),p=Math.max(0,Math.min(1,p));return[a.multiplyScalar(p).add(e.start),r.multiplyScalar(f).add(s.start)]}}e.Capsule=s}()}},function(ii,iii,i){(function(ii){const ii=i(4),iii=i(284),i=i(288),i=i(29),iIi=i(35),iii=i(266),iI=i(67);var iIi=new(i(37));const iii=i(300),iii=i(323);var{Triangle:i,Vector3:ii}=i(0);const i=i(1);i.fromConfig=function(e){var t=new i(new ii(e.tris[0],e.tris[1],e.tris[2]),new ii(e.tris[3],e.tris[4],e.tris[5]),new ii(e.tris[6],e.tris[7],e.tris[8]));return t.isTri=!0,t.minX=e.minMax[0],t.minY=e.minMax[1],t.minZ=e.minMax[2],t.maxX=e.minMax[3],t.maxY=e.minMax[4],t.maxZ=e.minMax[5],t};var iii=[0,2,3,19,25];function iii(e,t,i,n={}){for(var s in i){var a,r=t[s],o=i[s];if(o.props)a=iii(e,r,o.props,n[s]);else if(o.isMapObject)a=i(e,r);else if(o.isTerrainConfig)r?(n.terrain=iii.fromConfig(r),n.terrain.rotation.x=-Math.PI/2,a=r):a=null;else if(o.isZoneConfig)r?(n.zone=i.fromConfig(r),a=r):a=null;else{if("maps"==s&&!n.changedMaps)continue;a=r}n[s]=a}return n}function i(e,t){if(t&&t.isTri)return i.fromConfig(t);if(Array.isArray(t))return t.map((t=>i(e,t)));if("object"==typeof t){var i={};for(var n in t)i[n]=i(e,t[n]);return i}return e.mapObjects[t]}function ii(e,t,i){return e+(null==t.genID?"":"_"+t.genID)+(i?"_e"+i:"")}ii.exports=function(ii,ii,ii,iIii){var ii,iii;this.manager=new(i(324))(ii,iIii,iIi),this.maps=ii,this.modes=iI,this.rotationModes=iii,this.rotationMaps=[0,1,2,3,4,6,7,8,9,10,11,12,13,14,15,16,19,21,22,23,24,25,26,28,32],this.spawns=[],this.botPaths=[],this.lastGen=null,this.terrain=null,this.zone=null,this.deathY=ii.deathY,this.changedMaps=!1,this.resetMaps=function(){this.changedMaps=!1,this.maps=ii},this.setMaps=function(e){e&&(this.changedMaps=!0),this.maps=e||ii},this.getRandomMap=function(){return i.randInt(0,this.maps.length-1)},this.getMapName=function(){var e=(this.lastGen||"").split("_")[0];return this.maps&&this.maps[e]&&this.maps[e].name?this.maps[e].name:null},this.getMapId=function(){var e=(this.lastGen||"").split("_")[0];return this.maps&&this.maps[e]?e:null},this.asyncGenerate=function(ii,iii,ii,ii,ii,iIiii){var i=iI[iii||0];return this.workerPath||=ii.cwd()+(ii.isProd?"/dist/mapWorker.js":"/src/data/mapWorker.js"),this.Worker||=eval("require;")("worker_threads").Worker,new Promise(((e,t)=>{var i=ii(ii,i,ii);if(!ii&&this.lastGen===i)return this.finishGenerate(ii),void e();let n=t=>{var i={mapObjects:{}},n=[];for(var s in t._ctx.mapObjects){var r=t._ctx.mapObjects[s],o=new iii(r,parseInt(s),!1);for(var l of(i.mapObjects[s]=o,ii.mapObjectReferenceProps))"number"==typeof r[l]&&n.push(s,l)}for(var c=0;c<n.length;c+=2){r=t._ctx.mapObjects[n[c]];(o=i.mapObjects[n[c]])[l=n[c+1]]=i.mapObjects[r[l]]}iii(i,t,ii.mapGenProps,this),e(a)};var s={generate:{index:ii,modeIndex:iii,eventIndex:ii,force:ii,isCustom:ii,isComp:iIiii}};this.changedMaps&&(s.maps=this.maps);const a=new this.Worker(this.workerPath,{workerData:JSON.stringify(s)});a.on("message",(e=>{try{n(JSON.parse(e))}catch(e){return void t(e)}})),a.on("error",(e=>{iii.warn("Error from map worker",{err:e+""}),t(e)})),a.on("exit",(e=>{0!==e&&t("Worker stopped with exit code "+e)}))}))};var iii="";this.generate=function(e,t,i,n,s,a,r){var o=this.maps[e];o.game=o.game||{};var l=iI[t||0];if(this.deathY=null!=o.dthY&&i.isNumber(o.dthY)?o.dthY:ii.deathY,ii){var c=!!s,d=this.maps[e];d&&(c=0==e&&"Burg"!=d.name),ii.groupData={id:o.id,hasLM:o.hasLM,version:0,index:e,custom:c,official:o.official},o&&o.oldAO&&(ii.groupData.oldAO=!0),mapInfo.textContent=(c?l.alias:l.name)+" on "+o.name,mapInfo.classList.toggle("click",!!o.creator),mapInfo.onclick=o.creator?()=>window.openURL("/social.html?p=map&q="+o.name):null,gameMessage.innerHTML=specGMessage.innerHTML="",roundMessage.innerHTML="",matchInfo.innerHTML=l.name+"<div style='color:rgba(255,255,255,0.6)'>on "+o.name+"</div>"+(o.creator?"<div style='color:#fff'><span style='color:rgba(255,255,255,0.6)'>by</span> "+o.creator+"</div>":""),specGameInfo.textContent=l.name}ii&&iii!=o.welMsg&&(iii=o.welMsg)&&""!=iii&&welcome(iii);var h=ii(e,l,i);if(n||this.lastGen!==h){if(this.lastGen=h,ii&&ii.clearInstances(),this.manager.removeAll(),ii&&ii.init(o,l,void 0,i),ii&&(ii.reset(),ii.scene.add(ii.ExplosionManager)),iIii&&iIii.clearEmitters(),o.terrainSeed&&o.terrainWidth&&o.terrainHeight){if(this.terrainConfig=i.extractProperties(o,iii.CONFIG_PROPS),this.terrain=iii.fromConfig(this.terrainConfig),this.terrain.rotation.x=-Math.PI/2,ii&&ii.scene.add(this.terrain),this.terrain.genObjs){for(var u in this.terrain.objPos)if(this.terrain.objPos.hasOwnProperty(u))for(var p=0;p<this.terrain.objPos[u].length;p++)this.manager.addTerrObj(this.terrain.objPos[u][p],u,this.terrain,ii);this.terrain.objPos=null}}else this.terrain=null;o.zone&&o.zoneSize&&o.zoneSpeed?(this.zoneConfig=i.extractProperties(o,i.CONFIG_PROPS),this.zone=i.fromConfig(this.zoneConfig,ii),ii&&ii.scene.add(this.zone)):this.zone=null;var f=0,m=0,g=0,v=0,y=0,b=0,w=o.colors||[],x=["e","c"],S=o.xyz||[],M=["s"];for(p=0;p<o.objects.length;++p){ii=o.objects[p];var k=(iIi.prefabs[ii.i||ii.id||0]||iIi.prefabs[0]).name,_="LADDER"==k||"ROPE_LADDER"==k,T=(iIi.textures[null==ii.t?_?2:0:ii.t||0]||iIi.textures[_?2:0]).name;if("BOT_PATH_NODE"!=k&&"TERMINAL"!=k){for(var C,I=parseInt(ii.sat||0),A=0;A<M.length;A++)if(null!=ii[M[A]+"i"]){var R=3*ii[M[A]+"i"];null!=ii[M[A]+"i"]&&null!=R&&S.length>R&&(ii[M[A]]=S.slice(R,R+3),delete ii[M[A]+"i"])}if(!r&&ii.f&&"string"==typeof ii.f)try{ii.f=i.convertFaces(ii.f)}catch(e){ii.f=null}else r&&(ii.f=null);if(!r)for(A=0;A<x.length;A++)null!=ii[x[A]+"i"]&&w[ii[x[A]+"i"]]&&(ii[x[A]]=w[ii[x[A]+"i"]],delete ii[x[A]+"i"]);var P=i.limit(ii.p[0],ii.positionRange).round(2),E=i.limit(ii.p[1],ii.positionRange).round(2),D=i.limit(ii.p[2],ii.positionRange).round(2),O=(parseFloat(ii.s[0])||0).round(2),L=(parseFloat(ii.s[1])||0).round(2),j=(parseFloat(ii.s[2])||0).round(2),z=void 0;if(!r){if(null!=ii.at){var B=ii.at;ii.at=parseInt((ii.at+"").replace(/[^\d]/gim,"")),z=(B+"").includes("v")?ii.at:void 0,C=(ii.at||0)+(z?"/video":"/texture")}else C=T.toLowerCase()+"_"+("GRASS"==T?1:0);ii.tv&&=parseInt(ii.tv)||0;var N=iIi.getTextureByName(T);N&&N.variants&&ii.tv&&N.variants[ii.tv]&&(C+="_"+N.variants[ii.tv].id)}if(ii.l||ii.col||"CUBE"!=k||(P-O<f&&(f=P-O),P+O>m&&(m=P+O),D-j<g&&(g=D-j),D+j>v&&(v=D+j),E+L>b&&(b=E+L),E<y&&(y=E)),r||null==ii.tr||(ii.tro=i.toDeg(parseFloat(ii.tr||0))||0,delete ii.tr),"CUBE"==k)this.manager.addBlock(P,E,D,O,j,L,[ii.f&&null!=ii.f[0]?ii.f[0]:1,ii.f&&null!=ii.f[1]?ii.f[1]:1,ii.f&&null!=ii.f[2]?ii.f[2]:1,ii.f&&null!=ii.f[3]?ii.f[3]:1,ii.f&&null!=ii.f[4]?ii.f[4]:1,ii.f&&null!=ii.f[5]?ii.f[5]:1],{src:C,asset:null!=ii.at||void 0,video:z,colr:ii.c,emissive:ii.e||null,opacity:1!=ii.o&&null!=ii.o?ii.o:1,transparent:1!=ii.o&&null!=ii.o,penetrable:parseFloat(ii.pe)||0,health:parseInt(ii.h||ii.hp)||0,canDest:null!=ii.cdy||void 0,notWallJ:null!=ii.wj||void 0,noGrapple:null!=ii.gp||void 0,noShoot:null!=ii.ns||void 0,noAICol:null!=ii.nai||void 0,noImpulse:null!=ii.ip||void 0,startDest:null!=ii.sd||void 0,spawnChance:parseFloat(ii.rsc||0)||0,respawnT:1e3*(parseFloat(ii.rt)||0),respawnR:null!=ii.rr||void 0,amb:o.nAmb||null!=ii.ab?null:ii.ambientVal,yR:ii.r?ii.r[0]:0,xR:ii.r?ii.r[1]:0,zR:ii.r?ii.r[2]:0,noCol:ii.l||ii.col,isBorder:null==ii.bo?void 0:1,noVis:null==ii.v?void 0:1,movT:null==ii.ts?void 0:ii.ts/1e4,movD:ii.td,frames:parseInt(ii.fct)||void 0,frameT:parseFloat(ii.fs)||void 0,noAmb:null!=ii.ab||void 0,interface:parseInt(ii.in)||void 0,texOffX:parseFloat(ii.tox)||0,texOffY:parseFloat(ii.toy)||0,texRot:parseInt(ii.tro)||0,noFog:null!=ii.nf||void 0,scale:null==ii.tsr?void 0:0,scaleM:parseFloat(ii.tsm)||0,fTrans:null!=ii.ft||void 0,texEncode:parseInt(ii.ten)||0,sound:I,complexColl:null!=ii.cpx||void 0,rside:null==ii.rs?void 0:parseInt(ii.rs)||0,darken:parseFloat(ii.da)||0,noMinimap:null!=ii.smm||void 0});else if("SERVER_NODE"==k)this.manager.addServerNode(P,E,D,O,j,L,{spread:parseFloat(ii.ssp)||0,health:parseInt(ii.h||ii.hp)||0,canDest:null!=ii.cdy||void 0,startDest:null!=ii.sd||void 0,spawnChance:parseFloat(ii.rsc||0)||0,respawnT:1e3*(parseFloat(ii.rt)||0),respawnR:null!=ii.rr||void 0,interface:parseInt(ii.in)||void 0,tag:ii.nt});else if("SPHERE"==k)this.manager.addSphere(P,E,D,O,j,L,{src:C,asset:null!=ii.at||void 0,video:z,colr:ii.c,emissive:ii.e||null,opacity:1!=ii.o&&null!=ii.o?ii.o:1,transparent:1!=ii.o&&null!=ii.o,amb:o.nAmb||null!=ii.ab?null:ii.ambientVal,yR:ii.r?ii.r[0]:0,xR:ii.r?ii.r[1]:0,zR:ii.r?ii.r[2]:0,noVis:null==ii.v?void 0:1,movT:null==ii.ts?void 0:ii.ts/1e4,movD:ii.td,frames:parseInt(ii.fct)||void 0,frameT:parseFloat(ii.fs)||void 0,noAmb:null!=ii.ab||void 0,texOffX:parseFloat(ii.tox)||0,texOffY:parseFloat(ii.toy)||0,texRot:parseInt(ii.tro)||0,noFog:null!=ii.nf||void 0,notWallJ:null!=ii.wj||void 0,noGrapple:null!=ii.gp||void 0,noShoot:null!=ii.ns||void 0,noAICol:null!=ii.nai||void 0,noImpulse:null!=ii.ip||void 0,fTrans:null!=ii.ft||void 0,texEncode:parseInt(ii.ten)||0,complexColl:null!=ii.cpx||void 0});else if("POINT_LIGHT"==k)this.manager.addPointLight(P,E,D,{colr:ii.c,intensity:parseFloat(ii.li)||1,distance:parseFloat(ii.lds)||0,decay:parseFloat(ii.ld)||1});else if("DIRECTIONAL_LIGHT"==k){var F=i.limit(ii.lt[0],ii.positionRange).round(2),H=i.limit(ii.lt[1],ii.positionRange).round(2),U=i.limit(ii.lt[2],ii.positionRange).round(2);this.manager.addDirectionalLight(P,E,D,F,H,U,{colr:ii.c,intensity:parseFloat(ii.li)||1})}else if("SPOT_LIGHT"==k){F=i.limit(ii.lt[0],ii.positionRange).round(2),H=i.limit(ii.lt[1],ii.positionRange).round(2),U=i.limit(ii.lt[2],ii.positionRange).round(2);this.manager.addSpotLight(P,E,D,F,H,U,{colr:ii.c,intensity:parseFloat(ii.li)||1,distance:null==ii.lds?50:parseFloat(ii.lds)||0,decay:parseFloat(ii.ld)||1,angle:parseInt(ii.la)||45,penumbra:parseFloat(ii.lp)||0})}else"RECTAREA_LIGHT"==k?this.manager.addRectAreaLight(P,E,D,O/2,L/2,{colr:ii.c,intensity:parseFloat(ii.li)||1},ii.r?ii.r[2]:0,ii.r?ii.r[0]:0,ii.r?ii.r[1]:0):"MYSTERY_BOX"==k?this.manager.addMysteryBox(P,E,D,ii.r,O/2,L/2,j/2,{scoreP:parseInt(ii.sp)||0}):"PERK_MACHINE"==k?this.manager.addPerkMachine(P,E,D,ii.r,O/2,L/2,j/2,{scoreP:parseInt(ii.sp)||0,perk:parseInt(ii.zp)||0,isBorder:null==ii.bo?void 0:1,health:parseInt(ii.h||ii.hp)||0,canDest:null!=ii.cdy||void 0,startDest:null!=ii.sd||void 0,spawnChance:parseFloat(ii.rsc||0)||0,respawnT:1e3*(parseFloat(ii.rt)||0),respawnR:null!=ii.rr||void 0,interface:parseInt(ii.in)||void 0}):"KRUM_MACHINE"==k?this.manager.addKrumMachine(P,E,D,ii.r,O/2,L/2,j/2,{scoreP:parseInt(ii.sp)||0,isBorder:null==ii.bo?void 0:1}):"GATE"==k?this.manager.addGate(P,E,D,O,j,L,[ii.f&&null!=ii.f[0]?ii.f[0]:1,ii.f&&null!=ii.f[1]?ii.f[1]:1,ii.f&&null!=ii.f[2]?ii.f[2]:1,ii.f&&null!=ii.f[3]?ii.f[3]:1,ii.f&&null!=ii.f[4]?ii.f[4]:1,ii.f&&null!=ii.f[5]?ii.f[5]:1],{src:C,asset:null!=ii.at||void 0,video:z,colr:ii.c,emissive:ii.e||null,opacity:1!=ii.o&&null!=ii.o?ii.o:1,transparent:1!=ii.o&&null!=ii.o,penetrable:parseFloat(ii.pe)||0,amb:o.nAmb||null!=ii.ab?null:ii.ambientVal,yR:ii.r?ii.r[0]:0,xR:ii.r?ii.r[1]:0,zR:ii.r?ii.r[2]:0,isBorder:null==ii.bo?void 0:1,noVis:null==ii.v?void 0:1,movT:null==ii.ts?void 0:ii.ts/1e4,movD:ii.td,frames:parseInt(ii.fct)||void 0,frameT:parseFloat(ii.fs)||void 0,noAmb:null!=ii.ab||void 0,scoreP:parseInt(ii.sp)||0,noMsg:null!=ii.nm||void 0,method:parseInt(ii.md)||0,closeable:null!=ii.cl||void 0,startClosed:null!=ii.stc||void 0,interface:parseInt(ii.in)||void 0,texOffX:parseFloat(ii.tox)||0,texOffY:parseFloat(ii.toy)||0,texRot:parseInt(ii.tro)||0,team:parseInt(ii.tm||0)||0,notWallJ:null!=ii.wj||void 0,noGrapple:null!=ii.gp||void 0,noShoot:null!=ii.ns||void 0,noAICol:null!=ii.nai||void 0,noImpulse:null!=ii.ip||void 0,fTrans:null!=ii.ft||void 0,scale:null==ii.tsr?void 0:0,scaleM:parseFloat(ii.tsm)||0,interactMsg:ii.inm,texEncode:parseInt(ii.ten)||0,sound:I,noFog:null!=ii.nf||void 0,noMinimap:null!=ii.smm||void 0}):"TRIGGER"==k?(ii.tas&&Array.isArray(ii.tas)&&ii.tas.length||(ii.tas=[{tc:ii.tc,tc2:ii.tc2,tct:ii.tct,tcc:ii.tcc,tce:ii.tce,ta:ii.ta,esa:ii.esa,es:ii.es,ev:ii.ev,er:ii.er,ef:ii.ef,tad:ii.tad,cd:ii.cd,cv0:ii.cv0,cv1:ii.cv1,cv2:ii.cv2}]),this.manager.addTrigger(P,E,D,ii.r,O,j,L,[ii.f&&null!=ii.f[0]?ii.f[0]:1,ii.f&&null!=ii.f[1]?ii.f[1]:1,ii.f&&null!=ii.f[2]?ii.f[2]:1,ii.f&&null!=ii.f[3]?ii.f[3]:1,ii.f&&null!=ii.f[4]?ii.f[4]:1,ii.f&&null!=ii.f[5]?ii.f[5]:1],{src:C,assetTexture:null!=ii.at||void 0,video:z,colr:ii.c,emissive:ii.e||null,opacity:1!=ii.o&&null!=ii.o?ii.o:1,transparent:1!=ii.o&&null!=ii.o,health:parseInt(ii.h||ii.hp)||0,canDest:null!=ii.cdy||void 0,startDest:null!=ii.sd||void 0,spawnChance:parseFloat(ii.rsc||0)||0,selfDestruct:null!=ii.sfd||void 0,respawnT:1e3*(parseFloat(ii.rt)||0),respawnR:null!=ii.rr||void 0,amb:o.nAmb||null!=ii.ab?null:ii.ambientVal,yR:ii.r?ii.r[0]:0,xR:ii.r?ii.r[1]:0,zR:ii.r?ii.r[2]:0,noVis:null==ii.v?void 0:1,noPCol:null!=ii.pl,movT:null==ii.ts?void 0:ii.ts/1e4,movD:ii.td,frames:parseInt(ii.fct)||void 0,frameT:parseFloat(ii.fs)||void 0,noAmb:null!=ii.ab||void 0,constE:parseInt(ii.tce)||0,event:parseInt(ii.te)||0,eventN:iii.events[parseInt(ii.te)||0]?iii.events[parseInt(ii.te)||0].name:null,chance:parseInt(ii.cha)||0,actionCost:parseInt(ii.tac)||0,actionMethod:parseInt(ii.tam)||0,interface:parseInt(ii.in)||void 0,interfaceT:parseInt(ii.tin)||void 0,texOffX:parseFloat(ii.tox)||0,texOffY:parseFloat(ii.toy)||0,texRot:parseInt(ii.tro)||0,team:parseInt(ii.tm||0)||0,singleUse:null!=ii.su||void 0,singleUseP:null!=ii.sup||void 0,notWallJ:null!=ii.wj||void 0,noGrapple:null!=ii.gp||void 0,noShoot:null!=ii.ns||void 0,noAICol:null!=ii.nai||void 0,noImpulse:null!=ii.ip||void 0,fTrans:null!=ii.ft||void 0,scale:null==ii.tsr?void 0:0,scaleM:parseFloat(ii.tsm)||0,actions:ii.tas&&Array.isArray(ii.tas)?ii.tas:null,interactMsg:ii.inm,texEncode:parseInt(ii.ten)||0,asset:ii.aid,mSize:parseFloat(ii.ms),noSmooth:null!=ii.txs||void 0,spin:parseFloat(ii.spn||0)||0,spinAxis:parseInt(ii.spa||0)||0,cast:null==ii.cst||void 0,receive:null==ii.rcv||void 0,animS:parseFloat(ii.as)||0,startAnim:ii.ast,forceRender:null!=ii.fcr||void 0,alphaTest:parseFloat(ii.alt||0)||0,sound:I,noFog:null!=ii.nf||void 0,side:parseInt(ii.rs)||0,fTrans:null!=ii.ft||void 0,hbh:parseFloat(ii.hbh)||1,hbw:parseFloat(ii.hbw)||1,noMinimap:null!=ii.smm||void 0},iii)):"PRIZE_WHEEL"==k?this.manager.addSpinner(P,E,D,O,L,j,ii.d||0,{transparent:1!=ii.o&&null!=ii.o,amb:o.nAmb||null!=ii.ab?null:ii.ambientVal,noAmb:null!=ii.ab||void 0,scale:0,tRadius:7,wheel:parseInt(ii.sty)||0}):"SPRAY"==k?this.manager.addSpray(P,E,D,O/2,j/2,{scale:"PLANE"==k&&null==ii.tsr?1:0,noAmb:!0,colr:ii.c,opacity:1!=ii.o&&null!=ii.o?ii.o:1,side:0,sprayIndex:parseInt(ii.spt)||2482},ii.r?ii.r[0]:0,ii.r?ii.r[1]:0,ii.r?ii.r[2]:0,iIi):"TERMINAL"==k||("DEPOSIT_BOX"==k?this.manager.addBank(P,E,D,O,j,L,[ii.f&&null!=ii.f[0]?ii.f[0]:1,ii.f&&null!=ii.f[1]?ii.f[1]:1,ii.f&&null!=ii.f[2]?ii.f[2]:1,ii.f&&null!=ii.f[3]?ii.f[3]:1,ii.f&&null!=ii.f[4]?ii.f[4]:1,ii.f&&null!=ii.f[5]?ii.f[5]:1],{src:C,asset:null!=ii.at||void 0,video:z,colr:ii.c,emissive:ii.e||null,opacity:1!=ii.o&&null!=ii.o?ii.o:1,transparent:1!=ii.o&&null!=ii.o,penetrable:parseFloat(ii.pe)||0,amb:o.nAmb||null!=ii.ab?null:ii.ambientVal,yR:ii.r?ii.r[0]:0,xR:ii.r?ii.r[1]:0,zR:ii.r?ii.r[2]:0,isBorder:null==ii.bo?void 0:1,noVis:null==ii.v?void 0:1,movT:null==ii.ts?void 0:ii.ts/1e4,movD:ii.td,frames:parseInt(ii.fct)||void 0,frameT:parseFloat(ii.fs)||void 0,noAmb:null!=ii.ab||void 0,interface:parseInt(ii.in)||void 0,withdraw:null==ii.wd?1e3:parseInt(ii.wd)||0,deposit:null==ii.dp?1e3:parseInt(ii.dp)||0,texOffX:parseFloat(ii.tox)||0,texOffY:parseFloat(ii.toy)||0,texRot:parseInt(ii.tro)||0,team:parseInt(ii.tm||0)||0,notWallJ:null!=ii.wj||void 0,noGrapple:null!=ii.gp||void 0,noShoot:null!=ii.ns||void 0,noAICol:null!=ii.nai||void 0,noImpulse:null!=ii.ip||void 0,fTrans:null!=ii.ft||void 0,scale:null==ii.tsr?void 0:0,scaleM:parseFloat(ii.tsm)||0,texEncode:parseInt(ii.ten)||0,sound:I,noFog:null!=ii.nf||void 0,noMinimap:null!=ii.smm||void 0}):"LIGHT_CONE"==k?ii&&ii.mapDet&&this.manager.addLightCone(P,E,D,O,j,L,{src:"lightcone_"+(null==ii.fc?0:1),colr:ii.c,opacity:1!=ii.o&&null!=ii.o?ii.o:1,yR:ii.r?ii.r[0]:0,xR:ii.r?ii.r[1]:0,zR:ii.r?ii.r[2]:0,noVis:null==ii.v?void 0:1,movT:null==ii.ts?void 0:ii.ts/1e4,movD:ii.td,texEncode:parseInt(ii.ten)||0,thetaL:null==ii.thl?360:parseFloat(ii.thl)||.1,sides:parseInt(ii.sds)||12}):"LIGHT_BAR"==k?ii&&ii.mapDet&&this.manager.addLightBar(P,E,D,O/2,j/2,{src:"lightcone_1",colr:ii.c,emissive:ii.e||null,opacity:1!=ii.o&&null!=ii.o?ii.o:1,noVis:null==ii.v?void 0:1,movT:null==ii.ts?void 0:ii.ts/1e4,movD:ii.td,texEncode:parseInt(ii.ten)||0,mimicSprite:null!=ii.msp||void 0},ii.r?ii.r[0]:0,ii.r?ii.r[1]:0,ii.r?ii.r[2]:0):"CYLINDER"==k?this.manager.addCylinder(P,E,D,O,j,L,{src:C,asset:null!=ii.at||void 0,video:z,colr:ii.c,emissive:ii.e||null,opacity:1!=ii.o&&null!=ii.o?ii.o:1,transparent:1!=ii.o&&null!=ii.o,yR:ii.r?ii.r[0]:0,xR:ii.r?ii.r[1]:0,zR:ii.r?ii.r[2]:0,noVis:null==ii.v?void 0:1,movT:null==ii.ts?void 0:ii.ts/1e4,movD:ii.td,frames:parseInt(ii.fct)||void 0,frameT:parseFloat(ii.fs)||void 0,spin:parseFloat(ii.spn||0)||0,noCol:ii.l||ii.col,health:parseInt(ii.h||ii.hp)||0,canDest:null!=ii.cdy||void 0,startDest:null!=ii.sd||void 0,spawnChance:parseFloat(ii.rsc||0)||0,respawnT:1e3*(parseFloat(ii.rt)||0),respawnR:null!=ii.rr||void 0,interface:parseInt(ii.in)||void 0,texOffX:parseFloat(ii.tox)||0,texOffY:parseFloat(ii.toy)||0,texRot:parseInt(ii.tro)||0,sides:parseInt(ii.sds)||12,open:null!=ii.opn||void 0,rTop:null==ii.rtp?1:parseFloat(ii.rtp)||0,rBot:null==ii.rbt?1:parseFloat(ii.rbt)||0,thetaS:null==ii.ths?0:parseFloat(ii.ths)||0,thetaL:null==ii.thl?360:parseFloat(ii.thl)||.1,notWallJ:null!=ii.wj||void 0,noGrapple:null!=ii.gp||void 0,noShoot:null!=ii.ns||void 0,noAICol:null!=ii.nai||void 0,noImpulse:null!=ii.ip||void 0,fTrans:null!=ii.ft||void 0,scale:null==ii.tsr?void 0:0,scaleM:parseFloat(ii.tsm)||0,penetrable:parseFloat(ii.pe)||0,texEncode:parseInt(ii.ten)||0,complexColl:null!=ii.cpx||void 0,noMinimap:!0}):"SOUND_EMITTER"==k?this.manager.addEmitter(P,E,D,{snd:parseInt(ii.esa||ii.es)||0,assetSnd:null!=ii.esa||void 0,vol:parseFloat(ii.ev)||1,rate:parseFloat(ii.er)||1,dist:parseInt(ii.ed)||0,distM:parseInt(ii.edm)||0,roll:parseFloat(ii.ero)||0}):"OBJECTIVE"==k?this.manager.addObjective(P,E,D,O,j,L,{objId:parseInt(ii.obi)||0}):"DOMINATION_ZONE"==k?this.manager.addDominationZone(P,E,D,O,j,L):"BOMB_SITE"==k?this.manager.addBombSite(P,E,D,O,j,L):"FLAG"==k?this.manager.addFlag(P,E,D,parseInt(ii.tm||0)):"BOOST_PAD"==k?this.manager.addPad(P,E,D,O,j,L,{bounce:null==ii.bm?1:parseFloat(ii.bm||0)||0,crouch:null==ii.cr||void 0,noVis:null==ii.v?void 0:1,xR:ii.r?ii.r[0]:0,yR:ii.r?ii.r[1]:0,zR:ii.r?ii.r[2]:0,direction:ii.d||0},ii.r):"WEAPON_PICKUP"==k?this.manager.addWeapon(P,E,D,{scoreP:parseInt(ii.sp)||0,noMsg:null!=ii.nm||void 0,method:parseInt(ii.md)||0,noRep:ii.wr,weaponId:parseInt(ii.w||ii.wid||0),random:null!=ii.rw||void 0,randomGroup:null==ii.rwg?void 0:parseInt(ii.rwg||0)||0,showIcon:void 0===ii.wpi||void 0,team:parseInt(ii.tm||0)||0,interactMsg:ii.inm,noTex:null!=ii.ntx||void 0},ii.r?ii.r[2]:0,ii.r?ii.r[0]:0,ii.r?ii.r[1]:0,i):"SHOWCASE"==k?this.manager.addShowcase(P,E,D,ii.r,O/2,L/2,j/2,{itemID:parseInt(ii.skin||0),opacity:1!=ii.o&&null!=ii.o?ii.o:1,transparent:1!=ii.o&&null!=ii.o,colr:ii.c,noAmb:null!=ii.ab||void 0,mSize:parseFloat(ii.ms),spin:parseFloat(ii.spn||0)||0,spinAxis:parseInt(ii.spa||0)||0},i,iIi):"PARTICLES"==k?ii&&ii.area(P,E,D,O,L,j,{txt:parseInt(ii.pr)||0,spd:parseInt(ii.psp)||0,decl:parseInt(ii.pd)||1,cnt:parseInt(ii.pc)||0,grav:parseInt(ii.pg)||0,scl:parseInt(ii.psc)||1,siz:parseInt(ii.ps)||1,dir:ii.d||0,colr:ii.c,blend:ii.pb||0}):"SPRITE"==k?this.manager.addSprite(P,E,D,O/2,j/2,{src:C,asset:null!=ii.at||void 0,video:z,scale:null==ii.tsr?1:0,scaleM:parseFloat(ii.tsm)||0,emissive:ii.e||null,opacity:1!=ii.o&&null!=ii.o?ii.o:1,transparent:1!=ii.o&&null!=ii.o,colr:ii.c,noVis:null==ii.v?void 0:1,side:0,movT:null==ii.ts?void 0:ii.ts/1e4,movD:ii.td,frames:parseInt(ii.fct)||void 0,frameT:parseFloat(ii.fs)||void 0,noAmb:null!=ii.ab||void 0,texOffX:parseFloat(ii.tox)||0,texOffY:parseFloat(ii.toy)||0,texRot:parseInt(ii.tro)||0,fTrans:null!=ii.ft||void 0,texEncode:parseInt(ii.ten)||0}):"PLANE"==k?this.manager.addFixedPlane(P,E,D,O/2,j/2,{src:C,asset:null!=ii.at||void 0,video:z,scale:"PLANE"==k&&null==ii.tsr?1:0,scaleM:parseFloat(ii.tsm)||0,emissive:ii.e||null,noise:ii.en||0,opacity:1!=ii.o&&null!=ii.o?ii.o:1,penetrable:parseFloat(ii.pe)||0,transparent:1!=ii.o&&null!=ii.o,health:parseInt(ii.h||ii.hp)||0,canDest:null!=ii.cdy||void 0,startDest:null!=ii.sd||void 0,spawnChance:parseFloat(ii.rsc||0)||0,respawnT:1e3*(parseFloat(ii.rt)||0),respawnR:null!=ii.rr||void 0,colr:ii.c,noCol:ii.l||ii.col,noVis:null==ii.v?void 0:1,side:0,movT:null==ii.ts?void 0:ii.ts/1e4,movD:ii.td,frames:parseInt(ii.fct)||void 0,frameT:parseFloat(ii.fs)||void 0,noAmb:null!=ii.ab||void 0,interface:parseInt(ii.in)||void 0,texOffX:parseFloat(ii.tox)||0,texOffY:parseFloat(ii.toy)||0,texRot:parseInt(ii.tro)||0,notWallJ:null!=ii.wj||void 0,noGrapple:null!=ii.gp||void 0,noShoot:null!=ii.ns||void 0,noAICol:null!=ii.nai||void 0,noImpulse:null!=ii.ip||void 0,fTrans:null!=ii.ft||void 0,texEncode:parseInt(ii.ten)||0,mimicSprite:null!=ii.msp||void 0,sound:I,noFog:null!=ii.nf||void 0,alphaTest:parseFloat(ii.alt||0)||0,complexColl:null!=ii.cpx||void 0,darken:parseFloat(ii.da)||0,noMinimap:null!=ii.smm||void 0},ii.r?ii.r[0]:0,ii.r?ii.r[1]:0,ii.r?ii.r[2]:0):"BILLBOARD"==k?(ii.bb=i.isNumber(ii.bb)?i.limitMM(parseInt(ii.bb),1,ii.billboards.length-1):i.randInt(1,ii.billboards.length-1),this.manager.addFixedPlane(P,E,D,O/2,j/2,{src:"pubs/b_"+ii.bb,asset:null!=ii.at||void 0,video:z,scale:"PLANE"==k&&null==ii.tsr?1:0,scaleM:parseFloat(ii.tsm)||0,emissive:ii.e||null,noise:ii.en||0,opacity:1!=ii.o&&null!=ii.o?ii.o:1,penetrable:parseFloat(ii.pe)||0,transparent:1!=ii.o&&null!=ii.o,health:parseInt(ii.h||ii.hp)||0,canDest:null!=ii.cdy||void 0,startDest:null!=ii.sd||void 0,spawnChance:parseFloat(ii.rsc||0)||0,respawnT:1e3*(parseFloat(ii.rt)||0),respawnR:null!=ii.rr||void 0,colr:ii.c,noCol:ii.l||ii.col,noVis:null==ii.v?void 0:1,side:2,movT:null==ii.ts?void 0:ii.ts/1e4,movD:ii.td,frames:parseInt(ii.fct)||void 0,frameT:parseFloat(ii.fs)||void 0,noAmb:null!=ii.ab||void 0,interface:parseInt(ii.in)||void 0,texOffX:parseFloat(ii.tox)||0,texOffY:parseFloat(ii.toy)||0,texRot:parseInt(ii.tro)||0,notWallJ:null!=ii.wj||void 0,fTrans:null!=ii.ft||void 0,texEncode:parseInt(ii.ten)||0,mimicSprite:null!=ii.msp||void 0,noFog:null!=ii.nf||void 0,alphaTest:parseFloat(ii.alt||0)||0,noMinimap:!0},ii.r?ii.r[0]:0,ii.r?ii.r[1]:0,ii.r?ii.r[2]:0)):"LIQUID"==k?this.manager.addLiquid(P,E,D,O/2,j/2,{src:C,asset:null!=ii.at||void 0,video:z,emissive:ii.e||null,opacity:1!=ii.o&&null!=ii.o?ii.o:1,colr:ii.c,noVis:null==ii.v?void 0:1,movT:null==ii.ts?void 0:ii.ts/1e4,movD:ii.td,noAmb:null!=ii.ab||void 0,wHeight:parseFloat(ii.wh)||.5,wSpeed:parseFloat(ii.ws)||10,tilesX:parseInt(ii.tx)||10,tilesZ:parseInt(ii.tz)||10,texOffX:parseFloat(ii.tox)||0,texOffY:parseFloat(ii.toy)||0,texRot:parseInt(ii.tro)||0,texEncode:parseInt(ii.ten)||0},ii.r?ii.r[0]:0,ii.r?ii.r[1]:0,ii.r?ii.r[2]:0):"SIGN"==k?this.manager.addCanvas(P,E,D,O/2,j/2,{noCol:ii.l||ii.col,fontSize:parseInt(ii.sf)||10,text:ii.st,tAlign:parseInt(ii.sa)||0,fcolr:ii.sc,bcolr:ii.sb,ocolr:ii.so,othick:parseInt(ii.sot)||1,noBVis:ii.bv,noSCF:null!=ii.nsf,movT:null==ii.ts?void 0:ii.ts/1e4,movD:ii.td,mimicSprite:null!=ii.msp||void 0},ii.r?ii.r[0]:0,ii.r?ii.r[1]:0,ii.r?ii.r[2]:0):"LEADERBOARD"==k?this.manager.addLeaderBoard(P,E,D,O/2,j/2,{noCol:ii.l||ii.col,fontSize:parseInt(ii.sf)||10,fcolr:ii.sc,bcolr:ii.sb,noBVis:ii.bv,noSCF:null!=ii.nsf,movT:null==ii.ts?void 0:ii.ts/1e4,movD:ii.td,leaderType:parseInt(ii.ldt)||0,leaderTypeCust:ii.ldc,leaderOrder:parseInt(ii.ldo)||0,leaderResults:parseInt(ii.ldr)||25,mimicSprite:null!=ii.msp||void 0},ii.r?ii.r[0]:0,ii.r?ii.r[1]:0,ii.r?ii.r[2]:0):"CAMERA"==k?this.manager.addCamera(P,E,D,{camType:parseInt(ii.camt)||0,forceCam:null!=ii.frc||void 0,followPath:ii.fp||"",objLink:ii.obl||0,yR:ii.r?ii.r[0]:0,xR:ii.r?ii.r[1]:0,zR:ii.r?ii.r[2]:0}):"RAMP"==k?this.manager.addRamp(P,E,D,O,L,j,(ii.d||0)*Math.PI/2,{src:C,asset:null!=ii.at||void 0,video:z,boost:ii.b,scale:null==ii.tsr?1:0,scaleM:parseFloat(ii.tsm)||0,emissive:ii.e||null,opacity:1!=ii.o&&null!=ii.o?ii.o:1,transparent:1!=ii.o&&null!=ii.o,colr:ii.c,noCol:ii.l||ii.col,noAICol:null!=ii.nai||void 0,noVis:null==ii.v?void 0:1,movT:null==ii.ts?void 0:ii.ts/1e4,movD:ii.td,frames:parseInt(ii.fct)||void 0,frameT:parseFloat(ii.fs)||void 0,noAmb:null!=ii.ab||void 0,texOffX:parseFloat(ii.tox)||0,texOffY:parseFloat(ii.toy)||0,texRot:parseInt(ii.tro)||0,fTrans:null!=ii.ft||void 0,enclose:null!=ii.ec||void 0,texEncode:parseInt(ii.ten)||0,sound:I,noMinimap:null!=ii.smm||void 0}):"AI_REDIRECTION"==k?this.manager.addAIRedirection(P,E,D,O,L,j,(ii.d||0)*Math.PI/2,{boost:ii.b}):"PREMIUM_ZONE"==k?this.manager.addPremiumZone(P,E,D,O,j,L,{isBorder:null==ii.bo?void 0:1,health:parseInt(ii.h||ii.hp)||0,canDest:null!=ii.cdy||void 0,startDest:null!=ii.sd||void 0,spawnChance:parseFloat(ii.rsc||0)||0,respawnT:1e3*(parseFloat(ii.rt)||0),respawnR:null!=ii.rr||void 0,interface:parseInt(ii.in)||void 0}):"VERIFIED_ZONE"==k?this.manager.addVerifiedZone(P,E,D,O,j,L,{isBorder:null==ii.bo?void 0:1,health:parseInt(ii.h||ii.hp)||0,canDest:null!=ii.cdy||void 0,startDest:null!=ii.sd||void 0,spawnChance:parseFloat(ii.rsc||0)||0,respawnT:1e3*(parseFloat(ii.rt)||0),respawnR:null!=ii.rr||void 0,interface:parseInt(ii.in)||void 0}):"PARTNER_ZONE"==k||("TEAM_ZONE"==k?this.manager.addTeamZone(P,E,D,O,j,L,{team:parseInt(ii.tm||0)||0,isBorder:null==ii.bo?void 0:1,health:parseInt(ii.h||ii.hp)||0,canDest:null!=ii.cdy||void 0,startDest:null!=ii.sd||void 0,spawnChance:parseFloat(ii.rsc||0)||0,respawnT:1e3*(parseFloat(ii.rt)||0),respawnR:null!=ii.rr||void 0,interface:parseInt(ii.in)||void 0}):"KR_ZONE"==k?this.manager.addKRZone(P,E,D,O,j,L,{amount:parseInt(ii.krs||0)||0,isBorder:null==ii.bo?void 0:1,health:parseInt(ii.h||ii.hp)||0,canDest:null!=ii.cdy||void 0,startDest:null!=ii.sd||void 0,spawnChance:parseFloat(ii.rsc||0)||0,respawnT:1e3*(parseFloat(ii.rt)||0),respawnR:null!=ii.rr||void 0,interface:parseInt(ii.in)||void 0}):"NOPVP_ZONE"==k?this.manager.addNOPVPZone(P,E,D,O,j,L,{isBorder:null==ii.bo?void 0:1,health:parseInt(ii.h||ii.hp)||0,canDest:null!=ii.cdy||void 0,startDest:null!=ii.sd||void 0,spawnChance:parseFloat(ii.rsc||0)||0,respawnT:1e3*(parseFloat(ii.rt)||0),respawnR:null!=ii.rr||void 0,interface:parseInt(ii.in)||void 0}):"PVP_ZONE"==k?this.manager.addPVPZone(P,E,D,O,j,L,{isBorder:null==ii.bo?void 0:1,health:parseInt(ii.h||ii.hp)||0,canDest:null!=ii.cdy||void 0,startDest:null!=ii.sd||void 0,spawnChance:parseFloat(ii.rsc||0)||0,respawnT:1e3*(parseFloat(ii.rt)||0),respawnR:null!=ii.rr||void 0,interface:parseInt(ii.in)||void 0}):"KPD_ZONE"==k?this.manager.addKPDZone(P,E,D,O,j,L,{isBorder:null==ii.bo?void 0:1,health:parseInt(ii.h||ii.hp)||0,canDest:null!=ii.cdy||void 0,startDest:null!=ii.sd||void 0,spawnChance:parseFloat(ii.rsc||0)||0,respawnT:1e3*(parseFloat(ii.rt)||0),respawnR:null!=ii.rr||void 0,interface:parseInt(ii.in)||void 0}):"SCORE_ZONE"==k?this.manager.addScoreZone(P,E,D,O,j,L,parseInt(ii.sp)||1):"DEATH_ZONE"==k?this.manager.addDeathZone(P,E,D,O,j,L,{health:parseInt(ii.h||ii.hp)||0,canDest:null!=ii.cdy||void 0,startDest:null!=ii.sd||void 0,spawnChance:parseFloat(ii.rsc||0)||0,respawnT:1e3*(parseFloat(ii.rt)||0),respawnR:null!=ii.rr||void 0,interface:parseInt(ii.in)||void 0}):"CHECK_POINT"==k?this.manager.addCheckPoint(P,E,D,O,j,L,{singleUse:null!=ii.su||void 0,direction:ii.d||0,team:parseInt(ii.tm||0)||0}):"TELEPORTER"==k?this.manager.addTeleporter(P,E,D,O,j,L,{direction:ii.d||0,forceDir:null!=ii.fd,channel:parseInt(ii.ch||0),node:parseInt(ii.n||0),momentum:null!=ii.m,team:parseInt(ii.tm||0)||0,telCheckPoint:null!=ii.tcp||void 0}):"LADDER"==k?this.manager.addLadder(P,E,D,L,(ii.d||0)*Math.PI/2,{src:C,asset:null!=ii.at||void 0,video:z,scale:null==ii.tsr?.02:1,scaleM:parseFloat(ii.tsm)||0,emissive:ii.e||null,opacity:1!=ii.o&&null!=ii.o?ii.o:1,transparent:1!=ii.o&&null!=ii.o,colr:ii.c,noVis:null==ii.v?void 0:1,texOffX:parseFloat(ii.tox)||0,texOffY:parseFloat(ii.toy)||0,texRot:parseInt(ii.tro)||0,notWallJ:null!=ii.wj||void 0,noGrapple:null!=ii.gp||void 0,noImpulse:null!=ii.ip||void 0,fTrans:null!=ii.ft||void 0,texEncode:parseInt(ii.ten)||0,sound:I}):"ROPE_LADDER"==k?this.manager.addRopeLadder(P,E,D,O,j,L,{src:C,asset:null!=ii.at||void 0,video:z,colr:ii.c,emissive:ii.e||null,opacity:1!=ii.o&&null!=ii.o?ii.o:1,transparent:1!=ii.o&&null!=ii.o,amb:o.nAmb||null!=ii.ab?null:ii.ambientVal,yR:ii.r?ii.r[0]:0,xR:ii.r?ii.r[1]:0,zR:ii.r?ii.r[2]:0,noVis:null==ii.v?void 0:1,movT:null==ii.ts?void 0:ii.ts/1e4,movD:ii.td,frames:parseInt(ii.fct)||void 0,frameT:parseFloat(ii.fs)||void 0,noAmb:null!=ii.ab||void 0,texOffX:parseFloat(ii.tox)||0,texOffY:parseFloat(ii.toy)||0,texRot:parseInt(ii.tro)||0,noFog:null!=ii.nf||void 0,scale:null==ii.tsr?void 0:0,scaleM:parseFloat(ii.tsm)||0,sides:parseInt(ii.sds)||12,open:null!=ii.opn||void 0,rTop:null==ii.rtp?1:parseFloat(ii.rtp)||0,rBot:null==ii.rbt?1:parseFloat(ii.rbt)||0,fTrans:null!=ii.ft||void 0,texEncode:parseInt(ii.ten)||0,sound:I}):"AI_SPAWNER"==k?(ii.tas&&Array.isArray(ii.tas)&&ii.tas.length||(ii.tas=[{tc:ii.tc,tc2:ii.tc2,tct:ii.tct,tcc:ii.tcc,tce:ii.tce,ta:ii.ta,esa:ii.esa,es:ii.es,ev:ii.ev,er:ii.er,ef:ii.ef,tad:ii.tad,cd:ii.cd,cv0:ii.cv0,cv1:ii.cv1,cv2:ii.cv2}]),this.manager.addAI(P,E,D,ii.r,O/2,L/2,j/2,ii,iii)):"BOT_SPAWNER"==k?this.manager.addBot(P,E,D,(ii.d||0)*Math.PI/2,ii):"MAP_ANCHOR"==k?this.manager.addMapAnchor(P,E,D,parseInt(ii.ant)||0):"ENVIRONMENT_ZONE"==k?this.manager.addEnvironmentZone(P,E,D,O,j,L,ii):"PATH_NODE"==k?this.manager.addPathNode(P,E,D,{id:parseInt(ii.nid)||0}):"RUNE"==k?this.manager.addFixedPlane(P,E+.01,D,O/2,j/2,{src:"rune_0",scale:0,emissive:ii.e||null,opacity:1!=ii.o&&null!=ii.o?ii.o:1,transparent:!0,penetrable:parseFloat(ii.pe)||0,colr:ii.c,noCol:ii.l||ii.col,noVis:null==ii.v?void 0:1,side:2,shadows:!1,alphaTest:iIi.prefabs[57].alphaTest,movT:null==ii.ts?void 0:ii.ts/1e4,movD:ii.td,noAmb:null!=ii.ab||void 0,notWallJ:null!=ii.wj||void 0,noGrapple:null!=ii.gp||void 0,noShoot:null!=ii.ns||void 0,noAICol:null!=ii.nai||void 0,noImpulse:null!=ii.ip||void 0,texEncode:parseInt(ii.ten)||0,fTrans:!0,mimicSprite:null!=ii.msp||void 0,noMinimap:null!=ii.smm||void 0},ii.r?ii.r[0]:0,ii.r?ii.r[1]:0,ii.r?ii.r[2]:0):"CUSTOM_ASSET"==k?this.manager.addAsset(P,E,D,ii.r,O/2,L/2,j/2,{src:"model",asset:ii.aid,health:parseInt(ii.h||ii.hp)||0,canDest:null!=ii.cdy||void 0,startDest:null!=ii.sd||void 0,spawnChance:parseFloat(ii.rsc||0)||0,respawnT:1e3*(parseFloat(ii.rt)||0),respawnR:null!=ii.rr||void 0,opacity:1!=ii.o&&null!=ii.o?ii.o:1,transparent:1!=ii.o&&null!=ii.o,colr:ii.c,noCol:ii.l||ii.col,noVis:null==ii.v?void 0:1,noAmb:null!=ii.ab||void 0,interface:parseInt(ii.in)||void 0,mSize:parseFloat(ii.ms),noSmooth:null!=ii.txs||void 0,spin:parseFloat(ii.spn||0)||0,spinAxis:parseInt(ii.spa||0)||0,notWallJ:null!=ii.wj||void 0,noGrapple:null!=ii.gp||void 0,noShoot:null!=ii.ns||void 0,noAICol:null!=ii.nai||void 0,noImpulse:null!=ii.ip||void 0,cast:null==ii.cst||void 0,receive:null==ii.rcv||void 0,animS:parseFloat(ii.as)||0,startAnim:ii.ast,forceRender:null!=ii.fcr||void 0,texEncode:parseInt(ii.ten)||0,alphaTest:parseFloat(ii.alt||0)||0,noFog:null!=ii.nf||void 0,side:parseInt(ii.rs)||0,fTrans:null!=ii.ft||void 0,hbh:parseFloat(ii.hbh)||1,hbw:parseFloat(ii.hbw)||1,complexColl:null!=ii.cpx||void 0,noMinimap:null!=ii.smm||void 0}):s&&"EVENT"==k.toUpperCase()||this.manager.addMesh(P,E,D,ii.r,O/2,L/2,j/2,{src:k.toLowerCase(),health:parseInt(ii.h||ii.hp)||0,canDest:null!=ii.cdy||void 0,startDest:null!=ii.sd||void 0,spawnChance:parseFloat(ii.rsc||0)||0,respawnT:1e3*(parseFloat(ii.rt)||0),respawnR:null!=ii.rr||void 0,opacity:1!=ii.o&&null!=ii.o?ii.o:1,transparent:1!=ii.o&&null!=ii.o,colr:ii.c,noCol:ii.l||ii.col,noVis:null==ii.v?void 0:1,noAmb:null!=ii.ab||void 0,interface:parseInt(ii.in)||void 0,mSize:parseFloat(ii.ms),spin:parseFloat(ii.spn||0)||0,spinAxis:parseInt(ii.spa||0)||0,notWallJ:null!=ii.wj||void 0,noGrapple:null!=ii.gp||void 0,noShoot:null!=ii.ns||void 0,noAICol:null!=ii.nai||void 0,noImpulse:null!=ii.ip||void 0,texEncode:parseInt(ii.ten)||0,texVar:parseInt(ii.tv)||0,sound:I,noMinimap:null!=ii.smm||void 0})))}}var V;if(r||this.manager.addNoisePlanes(),this.terrain?(o.shadLength=1.2*this.terrain.sizeX,o.shadWidth=1.2*this.terrain.sizeY):(o.shadLength=Math.round(Math.abs(m-f)/2.5),o.shadWidth=Math.round(Math.abs(v-g)/2.5)),ii&&ii.updateLightMap(o),ii&&ii.ambientShading&&!ii.isMobile&&(ii.groupData.oldAO||ii.groupData.official||!ii.groupData.hasLM&&ii.groupData.custom)){var G,W=ii.ambScale;for(p=0;p<this.manager.objects.length;++p)if(!((ii=this.manager.objects[p]).noVis||"prop"==l.id&&ii.propID||ii.complexMesh||ii.health||ii.canDest||ii.noAmb||ii.gate))for(A=p+1;A<this.manager.objects.length;++A)if(!(iii=this.manager.objects[A]).noVis&&("prop"!=l.id||!iii.propID)&&!iii.health&&!iii.canDest&&!iii.noAmb&&!iii.gate&&!iii.complexMesh&&this.manager.collision(ii,iii,0)){if(G=i.boxIntersection(ii,iii,"x","z",[Math.PI,0,Math.PI/2,-Math.PI/2]))for(var q=0;q<G.length;++q)if(!G[q].dontUse){for(var Y=i.getIntersection(ii,iii,"y"),K=W*(ii.aoMlt||1)*(iii.aoMlt||1),X=0;X<2;X++)J=(G[q].d+Math.PI/2*X)%(2*Math.PI),K=Math.min(K,this.manager.limitAmb(W,G[q],J,"x","z",ii,iii));for(X=0;X<2;X++)if(J=(G[q].d+Math.PI/2*X)%(2*Math.PI),this.manager.addAmbient(G[q].x+K*Math.cos(J),Y.y,G[q].z+K*Math.sin(J),-J+Math.PI,0,0,Y.height,K+ii.ambOff,1),J==Math.PI/2||J==-Math.PI/2||J==1.5*Math.PI){var Z=i.limitRect(G[q].z+K*Math.sin(J),Y.y+K+Y.height+ii.ambOff,K,K,0,[ii,iii],"z","y");this.manager.addAmbient(G[q].x+K*Math.cos(J),Z.y,Z.z,-J+Math.PI,Math.PI,0,Z.length,Z.height,0,[ii,iii],"g1-"+X+"-"+q,[G[q].x,Y.y+Y.height,G[q].z]),Z=i.limitRect(G[q].z+K*Math.sin(J),Y.y-K-Y.height-ii.ambOff,K,K,0,[ii,iii],"z","y"),this.manager.addAmbient(G[q].x+K*Math.cos(J),Z.y,Z.z,-J+Math.PI,0,0,Z.length,Z.height,0,[ii,iii],"g2-"+X+"-"+q,[G[q].x,Y.y-Y.height,G[q].z])}else{Z=i.limitRect(G[q].x+K*Math.cos(J),Y.y+K+Y.height+ii.ambOff,K,K,0,[ii,iii],"x","y");this.manager.addAmbient(Z.x,Z.y,G[q].z+K*Math.sin(J),-J+Math.PI,Math.PI,0,Z.width,Z.height,0,[ii,iii],"g1-"+X+"-"+q,[G[q].x,Y.y+Y.height,G[q].z]),Z=i.limitRect(G[q].x+K*Math.cos(J),Y.y-K-Y.height-ii.ambOff,K,K,0,[ii,iii],"x","y"),this.manager.addAmbient(Z.x,Z.y,G[q].z+K*Math.sin(J),-J+Math.PI,0,0,Z.width,Z.height,0,[ii,iii],"g2-"+X+"-"+q,[G[q].x,Y.y-Y.height,G[q].z])}}if(G=i.boxIntersection(ii,iii,"z","y",[Math.PI,0,-Math.PI/2,Math.PI/2]))for(q=0;q<G.length;++q)if(!G[q].dontUse){for(Y=i.getIntersection(ii,iii,"x"),K=W*(ii.aoMlt||1)*(iii.aoMlt||1),X=0;X<2;X++)J=G[q].d+Math.PI/2*(X?0:1),K=Math.min(K,this.manager.limitAmb(W,G[q],-J+Math.PI/2,"z","y",ii,iii));for(X=0;X<2;X++){J=G[q].d+Math.PI/2*(X?0:1),this.manager.addAmbient(Y.x,G[q].y+K*Math.cos(J),G[q].z+K*Math.sin(J),0,J,-Math.PI/2,Y.width,K+ii.ambOff,1);Z=i.limitRect(Y.x+Y.width+K+ii.ambOff,G[q].z+K*Math.sin(J),K,K,0,[ii,iii],"x","z");this.manager.addAmbient(Z.x,G[q].y+K*Math.cos(J),G[q].z+K*Math.sin(J),Math.PI,J==Math.PI?J:-J%Math.PI,J==1.5*Math.PI?0:-Math.PI/2,J==1.5*Math.PI?K:Z.length,J==1.5*Math.PI?Z.length:K,0,[ii,iii],"g3-"+X+"-"+q,[Y.x+Y.width,G[q].y,G[q].z]),Z=i.limitRect(Y.x-Y.width-K-ii.ambOff,G[q].z+K*Math.sin(J),K,K,Math.PI/2,[ii,iii],"x","z"),this.manager.addAmbient(Z.x,G[q].y+K*Math.cos(J),G[q].z+K*Math.sin(J),Math.PI,-J%Math.PI,J==Math.PI||J==1.5*Math.PI?Math.PI/2:Math.PI,J==Math.PI||J==1.5*Math.PI?Z.width:K,J==Math.PI||J==1.5*Math.PI?K:Z.width,0,[ii,iii],"g4-"+X+"-"+q,[Y.x-Y.width,G[q].y,G[q].z])}}if(G=i.boxIntersection(ii,iii,"x","y",[Math.PI,0,-Math.PI/2,Math.PI/2]))for(q=0;q<G.length;++q)if(!G[q].dontUse){var J;for(Y=i.getIntersection(ii,iii,"z"),K=W*(ii.aoMlt||1)*(iii.aoMlt||1),X=0;X<2;X++)J=G[q].d+Math.PI/2*(X?0:1),K=Math.min(K,this.manager.limitAmb(W,G[q],-J+Math.PI/2,"x","y",ii,iii));for(X=0;X<2;X++)if(J=G[q].d+Math.PI/2*(X?0:1),this.manager.addAmbient(G[q].x+K*Math.sin(J),G[q].y+K*Math.cos(J),Y.z,Math.PI/2,J,-Math.PI/2,Y.length,K+ii.ambOff,1),J==Math.PI||0==J){Z=i.limitRect(G[q].z+K*Math.sin(J),Y.z+Y.length+K+ii.ambOff,K,K,Math.PI/2,[ii,iii],"x","z");this.manager.addAmbient(G[q].x+K*Math.sin(J),G[q].y+K*Math.cos(J),Z.z,Math.PI/2,J,-Math.PI/2,Z.length,Z.width,0,[ii,iii],"g5-"+X+"-"+q,[G[q].x,G[q].y,Y.z+Y.length]),Z=i.limitRect(G[q].z+K*Math.sin(J),Y.z-Y.length-K-ii.ambOff,K,K,Math.PI/2,[ii,iii],"x","z"),this.manager.addAmbient(G[q].x+K*Math.sin(J),G[q].y+K*Math.cos(J),Z.z,Math.PI/2,J,Math.PI,Z.width,Z.length,0,[ii,iii],"g6-"+X+"-"+q,[G[q].x,G[q].y,Y.z-Y.length])}else{Z=i.limitRect(G[q].x+K*Math.sin(J),Y.z+Y.length+K+ii.ambOff,K,K,Math.PI/2,[ii,iii],"x","z");this.manager.addAmbient(Z.x,G[q].y+K*Math.cos(J),Z.z,Math.PI/2,J,-Math.PI/2,Z.length,Z.width,0,[ii,iii],"g5-"+X+"-"+q,[G[q].x,G[q].y,Y.z+Y.length]),Z=i.limitRect(G[q].x+K*Math.sin(J),Y.z-Y.length-K-ii.ambOff,K,K,Math.PI/2,[ii,iii],"x","z"),this.manager.addAmbient(Z.x,G[q].y+K*Math.cos(J),Z.z,Math.PI/2,J,Math.PI,Z.width,Z.length,0,[ii,iii],"g6-"+X+"-"+q,[G[q].x,G[q].y,Y.z-Y.length])}}}this.manager.addPendingAOs()}this.manager.pendingTriangles.length=0,o.tris&&Array.isArray(o.tris)&&o.tris.length&&(this.manager.pendingTriangles=o.tris),this.manager.genQuads(),this.spawns.length=0;for(p=0;p<o.spawns.length;++p)V=parseFloat(o.spawns[p][7])||0,this.spawns.push({x:o.spawns[p][0],y:o.spawns[p][1],z:o.spawns[p][2],team:o.spawns[p][3],dir:parseInt(o.spawns[p][4])||0,comp:!!o.spawns[p][5]||!1,teamOnly:!!o.spawns[p][6]||!1,spread:i.limitMM(V,0,50)});if(this.botPaths.length=0,o.botPaths&&Array.isArray(o.botPaths))for(let e=0;e<o.botPaths.length;++e){const t=o.botPaths[e];Array.isArray(t.p)&&this.botPaths.push({pathNodes:t.p.map((e=>({x:parseInt(e[0])||0,y:parseInt(e[1])||0,z:parseInt(e[2])||0}))),reversible:!!t.r})}ii&&(ii.addMeshGroups(),ii.finalizeInstanceGroups())}this.finishGenerate(i)},this.finishGenerate=function(){}}}).call(this,i(7))},function(e,t,i){(function(t){const n=i(4);var{Dedupe:s}=i(406);let a;if(n.isNode&&t.env.IS_PROD){a=require("@sentry/node");const e=t.env,i={},r=t.argv[1];let o="unknown";o=r.includes("server-manager")?"server-manager":r.includes("serverGateway")?"gateway":r.includes("serverSocial")?"social":r.includes("serverEditor")?"editor":r.includes("api.js")?"api":r.includes("server.js")?"game-server":r,void 0!==e.VULTR_IP&&(i.ip=e.VULTR_IP),void 0!==e.VULTR_REGION&&(i.region=e.VULTR_REGION),void 0!==e.VULTR_INDEX&&(i.index=e.VULTR_INDEX),i.component=o,a.init({environment:t.env.VULTR_SCHEME||"local",dsn:t.env.SENTRY_DSN,release:(n.gameVersion||"default")+" "+(n.customBuildVersion||n.buildVersion),initialScope:{tags:i},ignoreErrors:["400 Bad Request error occurred","ECONNREFUSED","ECONNRESET","ENETUNREACH","Internal Server Error","Request failed with status code 400","Request timed out"],integrations:[new s]})}e.exports={capture(e){a&&a.captureException(e),console.warn("UNCAUGHT EXCEPTION:",e)},warn(e,t=null){var i,n;a&&(i=t,n=()=>a.captureMessage(e),a.withScope((e=>{if(i)for(let t in i){let n;try{n=JSON.stringify(i[t])}catch(e){n=i[t]}e.setExtra(t,n)}n()}))),console.warn("WARNING:",e,t)}}}).call(this,i(7))},function(e,t,i){const n=i(0),s=i(300),a=i(4),r=i(1),o=i(12);e.exports=function(e,t,i){var l,c;this.objects=[],this.pendingTriangles=[],this.pendingAIs=[],this.pendingBots=[],this.pendingLeaders=[],this.pathNodes={},this.grids={},this.objectives=[],this.domzones=[],this.scorezones=[],this.sites=[],this.flags=[],this.spawnables=[],this.pickups=[],this.destObjs=[],this.movedObjs=[],this.gates=[],this.mysteryBoxes=[],this.perkMachines=[],this.krumMachines=[],this.banks=[],this.interfaces=[],this.spinners=[],this.teleporters=[],this.timerObjs=[],this.playerObjs=[],this.spectateCams={},this.envZones=[],this.serverNodes=[],this.mapAnchors=[],this.collision=function(e,t,i){return e.x-e.width-i<=t.x+t.width&&e.x+e.width+i>=t.x-t.width&&e.z-e.length-i<=t.z+t.length&&e.z+e.length+i>=t.z-t.length&&e.y-e.height-i<=t.y+t.height&&e.y+e.height+i>=t.y-t.height},this.collisionC=function(e,t,i,n,s,a,r,o){return e-n-o<=r.x+r.width&&e+n+o>=r.x-r.width&&i-a-o<=r.z+r.length&&i+a+o>=r.z-r.length&&t-s-o<=r.y+r.height&&t+s+o>=r.y-r.height},this.removeFromQuad=function(e,t){for(var i in this.grids)if(this.grids.hasOwnProperty(i)){for(var n,s=(n=this.grids[i]).length-1;s>=0;--s)n[s][e]==t&&n.splice(s,1);n.length<=0&&delete this.grids[i]}},this.applyToQuad=function(e,t){var i,n,s,r,o,l;if(t||!e.complexColl){if(t){e.isTri=!0;var c=a.playerScale/2+.001,d=a.playerHeight+.001;e.minX=Math.min(e.a.x,e.b.x,e.c.x),e.minY=Math.min(e.a.y,e.b.y,e.c.y),e.minZ=Math.min(e.a.z,e.b.z,e.c.z),e.maxX=Math.max(e.a.x,e.b.x,e.c.x),e.maxY=Math.max(e.a.y,e.b.y,e.c.y),e.maxZ=Math.max(e.a.z,e.b.z,e.c.z),i=Math.floor((e.minX-c)/a.quadSize),o=Math.floor((e.minY-d)/a.quadSize),s=Math.floor((e.minZ-c)/a.quadSize),n=Math.ceil((e.maxX+c)/a.quadSize),l=Math.ceil(e.maxY/a.quadSize),r=Math.ceil((e.maxZ+c)/a.quadSize)}else if(!e.complexColl){var h=e.width+a.playerScale+.1,u=e.length+a.playerScale+.1,p=e.height+a.playerHeight+.1;i=Math.floor((e.x-h)/a.quadSize),n=Math.floor((e.x+h)/a.quadSize),s=Math.floor((e.z-u)/a.quadSize),r=Math.floor((e.z+u)/a.quadSize),o=Math.floor((e.y-p)/a.quadSize),l=Math.floor((e.y+p+(e.isBorder?a.borderH:0))/a.quadSize)}for(var f=i;f<=n;++f)for(var m=s;m<=r;++m)for(var g,v=o;v<=l;++v)g=f+"_"+v+"_"+m,this.grids[g]||=[],this.grids[g].push(e)}},this.genQuads=function(){if(this.pendingTriangles){this.pendingTriangles.length;for(var e=0;e<this.pendingTriangles.length;e+=9){const i=new n.Vector3(this.pendingTriangles[e],this.pendingTriangles[e+1],this.pendingTriangles[e+2]),s=new n.Vector3(this.pendingTriangles[e+3],this.pendingTriangles[e+4],this.pendingTriangles[e+5]),a=new n.Vector3(this.pendingTriangles[e+6],this.pendingTriangles[e+7],this.pendingTriangles[e+8]);var t=new n.Triangle(i,s,a);this.applyToQuad(t,!0)}this.pendingTriangles.length=0}for(e=0;e<this.objects.length;++e)this.applyToQuad(this.objects[e])};var d=[];this.getGridArrays=function(e,t,i,n){var s=Math.floor(e/a.quadSize),r=Math.floor(t/a.quadSize),o=Math.floor(i/a.quadSize);if(n){var l=Math.ceil(n/a.quadSize);d.length=0,this.grids[s+"_"+r+"_"+o]&&d.push(this.grids[s+"_"+r+"_"+o]);for(var c=1,h=0;h<l;++h)this.grids[s+c+"_"+r+"_"+o]&&d.push(this.grids[s+c+"_"+r+"_"+o]),this.grids[s-c+"_"+r+"_"+o]&&d.push(this.grids[s-c+"_"+r+"_"+o]),this.grids[s+"_"+r+"_"+(o+c)]&&d.push(this.grids[s+"_"+r+"_"+(o+c)]),this.grids[s+"_"+r+"_"+(o-c)]&&d.push(this.grids[s+"_"+r+"_"+(o-c)]),c++;return d}return this.grids[s+"_"+r+"_"+o]?this.grids[s+"_"+r+"_"+o]:void 0},this.checkPos=function(e,t,i,n,s){for(var a=0;a<this.objects.length;++a)if(this.objects[a]!=n&&this.objects[a]!=s&&!this.objects[a].ramp&&r.pointInBox3D(e,t,i,this.objects[a]))return!1;return!0},this.findByUid=function(e,t){l=t||this.objects;for(var i=0;i<l.length;++i)if(l[i].uid===e)return l[i];return null},this.findBySid=function(e,t){l=t||this.objects;for(var i=0;i<l.length;++i)if(l[i].sid===e)return l[i];return null},this.getZoneDat=function(e,t){return{src:"zone_r",texSrc:"zone_"+(t&&e==t.team?"b":"r")+"_1",noGroup:!0,forceTex:!0,mat:n.MeshBasicMaterial,transparent:!0,depthWrite:!1,side:2,autoMatrix:!0,scale:0,sameGlow:!0,glowText:!0,emissive:t&&e==t.team?4360861:8729652,pulsT:1}},this.getFlagDat=function(e,t){var i=t&&e==t.team?"1":"0";return{src:"crystal_0",texSrc:"crystal_"+i,noGroup:!0,noShadow:!0,noFog:!0,emissive:"0"==i?8729652:4360861,noEmisTex:!0}},this.addFlag=function(t,i,n,r){-1!=r&&(r+=1);var o=null;e&&((o=e.loadMesh(this.getFlagDat(r),t,i+a.flagOff,n,0,a.flagScale,e.scene)).zoneMesh=e.addCube(t,i,n,a.flagZoneS,5,a.flagZoneS,[1,1,0,0,1,1],this.getZoneDat(r)));var l=new s({uid:this.objects.length,meshRef:o,x:t,z:n,y:i+a.flagScale/2+a.flagOff,w:a.flagScale,l:a.flagScale,h:a.flagScale/2,img:{x:t,y:i,z:n},team:r,neutral:-1==r?1:void 0,flag:!0,noShoot:!0,complexMesh:!0,noMinimap:!0});this.flags.push(l),this.objects.push(l);var c=new s({uid:this.objects.length,x:t,z:n,y:i+a.flagZoneH/2,w:a.flagZoneS/2,l:a.flagZoneS/2,h:a.flagZoneH/2,team:r,neutral:-1==r?1:void 0,trigger:!0,noShoot:!0,complexMesh:!0,noMinimap:!0});c.flagObj=l,this.objects.push(c)},this.addPad=function(t,i,a,o,l,c,d,h){(d=d||{}).bounce=r.limitMM(parseFloat(d.bounce)||0,-3,3).round(2),d.direction=r.limitMM(parseInt(d.direction)||0,0,5);var u=null;if(e&&!d.noVis){u=e.loadMesh({isMdl:!0,src:"pad_0",forceMat:n.StrippedLambertMaterial,vertexColors:!0},t,i+.4+(d.direction>=2?c/2:0),a,h,3.6,e.scene);var p=d.direction<2?Math.min(o,l):Math.min(c,1&d.direction?o:l),f=Math.max(p/10,.1);u.scale.x=3.6*f,u.scale.z=3.6*f,d.direction>=2?(u.rotateZ(-Math.PI/2),u.rotateX(Math.PI/2*(d.direction-2))):1==d.direction&&u.rotateX(Math.PI)}var m=new s({uid:this.objects.length,meshRef:u,x:t,z:a,y:i,w:o/2,l:l/2,h:Math.max(c,3),xR:d.xR,yR:d.yR,zR:d.zR,d:d.direction,jumpPad:!0,bounce:d.bounce||0,crouch:d.crouch,complexMesh:!0,noMinimap:!0});this.objects.push(m)},this.genWeaponMeshData=function(e,t,i){return i=i||{},{src:"weapons/"+e.src+(null==i.mid?"":"_"+i.mid),texSrc:null==i.mid?i.tex?i.tex:i&&null!=i.id?"weapons/skins/"+e.src+"_"+i.id:null:r.getReModel(t,i),tFilter:1006,transparent:null!=i.opac||e.seeThrough,emissive:e.transp?"#ffffff":null,noGroup:!0,uv2:!0,shininess:e.shine||60,specular:2697513,shadowsR:!0,noShadow:!0,noFog:!0}},this.addWeapon=function(t,i,n,o,l,c,d,h){o=o||{},o.randomGroup&&=r.limitMM(parseInt(o.randomGroup)||0,1,1e4);var u=null;if(12==o.weaponId&&(o.weaponId=0),e){let s=h[o.weaponId],r=this.genWeaponMeshData(s);o.noTex&&(r.noTex=!0),(u=e.loadMesh(r,t,i+a.pickupOff,n,0,s.scale*(s.equipment?2:1),e.scene)).visible=!1,u.rotateY(l||0),u.rotateX((c||0)-(s.equipment?0:Math.PI/2)),u.rotateZ((d||0)-(s.equipment?Math.PI/2:0))}o.interactMsg&&r.isString(o.interactMsg)&&""!=o.interactMsg?(o.interactMsg.length>70&&(o.interactMsg=void 0),/[^\w\:\;\(\)\?\,\.\|\[\] \-\+*\$\@\=\^!{}]+/gim.test(o.interactMsg)&&(o.interactMsg=void 0)):o.interactMsg=void 0;var p=new s({uid:this.objects.length,meshRef:u,x:t,z:n,y:i+a.pickupZoneH/2,w:a.pickupZoneX,l:a.pickupZoneZ,h:2*a.pickupZoneH,pickup:o.weaponId,pickupRep:!o.noRep,orgPickup:o.weaponId,scoreP:o.scoreP,noMsg:o.noMsg,method:o.method||void 0,trigger:!0,noShoot:!0,complexMesh:!0,pickupRand:o.random,pickupRandGroup:o.randomGroup||void 0,team:o.team,interactMsg:o.interactMsg,showIcon:o.showIcon,noMinimap:!0,noTex:o.noTex});this.pickups.push(p),this.objects.push(p)},this.addShowcase=function(t,i,n,s,l,c,d,h,u,p){h=h||{},h.mSize&&=r.limitMM(h.mSize,.01,100),h.spin=r.limitMM(h.spin,-20,20),h.spinAxis=r.limitMM(h.spinAxis,0,1),0!=h.spin&&(h.rAnim=(h.spin||0)*a.diskSpin,h.rAnimA=h.spinAxis?"x":"y");var f=p.skins[h.itemID||0];if(f&&(!f||!f.type||f.type!=o.SPRAY&&f.type!=o.DYE&&f.type!=o.COLLECTIBLE&&f.type!=o.WRIST&&f.type!=o.TICKET&&f.type!=o.PLAYER_CARD)){var m=u[f.weapon-1]||{};i+=c*(f.type==o.CHARM?2:1),e&&!e.mapDet||e&&e[f.hasAnim?"loadAnimMesh":"loadMesh"]({local:f.local,localM:f.localM,fileExt:f.fileExt,animS:f.animS,hasAnim:f.hasAnim,src:p.types[f.assetType||f.type||0]+(f.assetType||f.type?f.id:f.weapon)+(null==f.mid?"":"_"+f.mid),texSrc:null==f.mid?f.type&&f.type==o.MELEE?f.pat?f.tex:"melee/melee_"+(f.id||0)+(f.tex?"_"+f.tex:""):f.type?f.tex?p.types[f.assetType||f.type||0]+f.id+"_"+f.tex:null:f.tex?f.tex:"weapons/skins/weapon_"+f.weapon+"_"+f.id:r.getReModel(p,f),rotT:f.rotT,movT:f.movT,movE:f.movE,pulsT:f.pulsT,repeatY:f.tileS||0,repeatX:f.tileS||0,frames:f.frames,frameT:f.frameT,sameEnv:f.sameEnv,env:f.env||f.sameEnv?f.env||3:void 0,sameGlow:f.sameGlow,glowText:f.glow||f.sameGlow,emissive:f.glow||f.sameGlow?"#ffffff":null,rgb:f.rgb,rgbS:f.rgbS,rAnim:h.rAnim||f.rAnim,rAnimA:h.rAnimA||f.rAnimA,rAnimT:h.rAnimT||f.rAnimT,rAniM:h.rAnimM||f.rAnimM,useWireframe:f.wire,side:f.side||0,opacity:f.opac||1,shaderNum:f.shaderNum,video:f.video,projection:f.projection,itemID:h.itemID||0,shininess:m.shine||60,specular:2697513,shadowsR:!0,transparent:null!=f.opac||f.trans||m.seeThrough||!1},t,i,n,s,(h.mSize||1)*(f.mScl||m.scale||1),e.scene,!h.spin)}},this.addObjective=function(t,i,s,a,o,l,c){var d;c=c||{},e&&((d=e.addCube(t,i,s,a,5,o,[1,1,0,0,1,1],{src:"objective_4",scale:0,noGroup:!0,forceTex:!0,mat:n.MeshBasicMaterial,transparent:!0,depthWrite:!1,side:2,autoMatrix:!0,sameGlow:!0,glowText:!0,emissive:"#ffd542",pulsT:1})).visible=!1);var h=0;if(c.objId)h=r.limitMM(parseInt(c.objId)||1,1,10)-1;else{for(var u=!1,p=0;p<this.objectives.length;p++)this.objectives[p].uid>h?(h=this.objectives[p].uid+1,u=!0):this.objectives[p].uid==h&&h++;u||(h=this.objectives.length)}this.objectives.push({uid:h,x:t,z:s,y:i+l/2,mesh:d,width:a/2,length:o/2,height:l/2,onZone:0})},this.addDominationZone=function(t,i,s,a,r,o){var l;e&&((l=e.addCube(t,i,s,a,5,r,[1,1,0,0,1,1],{src:"objective_4",noGroup:!0,forceTex:!0,mat:n.MeshBasicMaterial,transparent:!0,depthWrite:!1,side:2,autoMatrix:!0,scale:0})).visible=!1),this.domzones.push({uid:this.domzones.length,x:t,z:s,y:i+o/2,meshRef:l,width:a/2,length:r/2,height:o/2,capturedBy:null,captureT:0,lastTeamOn:null,teamsOn:[],onPoint:[]})},this.addBombSite=function(t,i,n,s,a,r){var o;e&&((o=e.addCube(t,i+1,n,s,r,a,[1,1,0,0,1,1],{src:"objective_b",noGroup:!0,movT:6e-5,forceTex:!0,shadowsR:!0,transparent:!0,depthWrite:!1,side:2,autoMatrix:!0})).visible=!1),this.sites.push({x:t,z:n,y:i+r/2,meshRef:o,width:s/2,length:a/2,height:r/2})},this.addDeathZone=function(e,t,i,n,a,o,l){(l=l||{}).spawnChance=r.limitMM(parseFloat(l.spawnChance)||0,0,100).round(2),l.spawnChance||=void 0,l.health&&(l.canDest=!0);let c=new s({x:e,z:i,y:t+o/2,w:n/2,l:a/2,h:o/2,kill:!0,noShoot:!0,complexMesh:!0,uid:this.objects.length,health:l.health||void 0,canDest:l.canDest,startDest:l.canDest&&l.startDest,spawnChance:l.spawnChance,respawnT:r.isNumber(l.respawnT)&&l.respawnT>0?l.respawnT:void 0,respawnR:l.respawnR,interface:l.interface,noMinimap:!0});this.objects.push(c),this.addHelpers(l,c.uid)},this.addScoreZone=function(e,t,i,n,a,r,o){var l=this.objects.length;this.scorezones.push({uid:l}),this.objects.push(new s({uid:l,x:e,z:i,y:t+r/2,w:n/2,l:a/2,h:r/2,score:!0,scoreP:o,noShoot:!0,complexMesh:!0,noMinimap:!0}))},this.addPremiumZone=function(e,t,i,n,a,o,l){(l=l||{}).spawnChance=r.limitMM(parseFloat(l.spawnChance)||0,0,100).round(2),l.spawnChance||=void 0,l.health&&(l.canDest=!0);let c=new s({x:e,z:i,y:t+o/2,w:n/2,l:a/2,h:o/2,isBorder:l.isBorder,noShoot:!0,premium:!0,complexMesh:!0,uid:this.objects.length,health:l.health||void 0,canDest:l.canDest,startDest:l.canDest&&l.startDest,spawnChance:l.spawnChance,respawnT:r.isNumber(l.respawnT)&&l.respawnT>0?l.respawnT:void 0,respawnR:l.respawnR,interface:l.interface,noMinimap:!0});this.objects.push(c),this.addHelpers(l,c.uid)},this.addVerifiedZone=function(e,t,i,n,a,o,l){(l=l||{}).spawnChance=r.limitMM(parseFloat(l.spawnChance)||0,0,100).round(2),l.spawnChance||=void 0,l.health&&(l.canDest=!0);let c=new s({x:e,z:i,y:t+o/2,w:n/2,l:a/2,h:o/2,isBorder:l.isBorder,noShoot:!0,complexMesh:!0,verified:!0,uid:this.objects.length,health:l.health||void 0,canDest:l.canDest,startDest:l.canDest&&l.startDest,spawnChance:l.spawnChance,respawnT:r.isNumber(l.respawnT)&&l.respawnT>0?l.respawnT:void 0,respawnR:l.respawnR,interface:l.interface,noMinimap:!0});this.objects.push(c),this.addHelpers(l,c.uid)},this.addTeamZone=function(e,t,i,n,a,o,l){(l=l||{}).spawnChance=r.limitMM(parseFloat(l.spawnChance)||0,0,100).round(2),l.spawnChance||=void 0,l.health&&(l.canDest=!0);let c=new s({x:e,z:i,y:t+o/2,w:n/2,l:a/2,h:o/2,isBorder:l.isBorder,noShoot:!0,teamZ:!0,team:l.team,complexMesh:!0,uid:this.objects.length,health:l.health||void 0,canDest:l.canDest,startDest:l.canDest&&l.startDest,spawnChance:l.spawnChance,respawnT:r.isNumber(l.respawnT)&&l.respawnT>0?l.respawnT:void 0,respawnR:l.respawnR,interface:l.interface,noMinimap:!0});this.objects.push(c),this.addHelpers(l,c.uid)},this.addKRZone=function(e,t,i,n,a,o,l){(l=l||{}).amount=r.limitMM(l.amount,0,1e7),l.spawnChance=r.limitMM(parseFloat(l.spawnChance)||0,0,100).round(2),l.spawnChance||=void 0,l.health&&(l.canDest=!0);let c=new s({x:e,z:i,y:t+o/2,w:n/2,l:a/2,h:o/2,isBorder:l.isBorder,noShoot:!0,kr:!0,amount:l.amount,complexMesh:!0,uid:this.objects.length,health:l.health||void 0,canDest:l.canDest,startDest:l.canDest&&l.startDest,spawnChance:l.spawnChance,respawnT:r.isNumber(l.respawnT)&&l.respawnT>0?l.respawnT:void 0,respawnR:l.respawnR,interface:l.interface,noMinimap:!0});this.objects.push(c),this.addHelpers(l,c.uid)},this.addNOPVPZone=function(e,t,i,n,a,o,l){(l=l||{}).spawnChance=r.limitMM(parseFloat(l.spawnChance)||0,0,100).round(2),l.spawnChance||=void 0,l.health&&(l.canDest=!0);let c=new s({x:e,z:i,y:t+o/2,w:n/2,l:a/2,h:o/2,isBorder:l.isBorder,noShoot:!0,noPVP:!0,complexMesh:!0,uid:this.objects.length,health:l.health||void 0,canDest:l.canDest,startDest:l.canDest&&l.startDest,spawnChance:l.spawnChance,respawnT:r.isNumber(l.respawnT)&&l.respawnT>0?l.respawnT:void 0,respawnR:l.respawnR,interface:l.interface,noMinimap:!0});this.objects.push(c),this.addHelpers(l,c.uid)},this.addPVPZone=function(e,t,i,n,a,o,l){(l=l||{}).spawnChance=r.limitMM(parseFloat(l.spawnChance)||0,0,100).round(2),l.spawnChance||=void 0,l.health&&(l.canDest=!0);let c=new s({x:e,z:i,y:t+o/2,w:n/2,l:a/2,h:o/2,isBorder:l.isBorder,noShoot:!0,forcePVP:!0,complexMesh:!0,uid:this.objects.length,health:l.health||void 0,canDest:l.canDest,startDest:l.canDest&&l.startDest,spawnChance:l.spawnChance,respawnT:r.isNumber(l.respawnT)&&l.respawnT>0?l.respawnT:void 0,respawnR:l.respawnR,interface:l.interface,noMinimap:!0});this.objects.push(c),this.addHelpers(l,c.uid)},this.addKPDZone=function(e,t,i,n,a,o,l){(l=l||{}).spawnChance=r.limitMM(parseFloat(l.spawnChance)||0,0,100).round(2),l.spawnChance||=void 0,l.health&&(l.canDest=!0);let c=new s({x:e,z:i,y:t+o/2,w:n/2,l:a/2,h:o/2,isBorder:l.isBorder,noShoot:!0,kpd:!0,complexMesh:!0,uid:this.objects.length,health:l.health||void 0,canDest:l.canDest,startDest:l.canDest&&l.startDest,spawnChance:l.spawnChance,respawnT:r.isNumber(l.respawnT)&&l.respawnT>0?l.respawnT:void 0,respawnR:l.respawnR,interface:l.interface,noMinimap:!0});this.objects.push(c),this.addHelpers(l,c.uid)},this.addEnvironmentZone=function(e,t,i,n,s,o,l,c){var d={x:e,z:i,y:t+o/2,w:n/2,l:s/2,h:o/2,data:{ambInd:null==(l=l||{}).ambInd?1:parseInt(l.ambInd||0),ambIndC:parseInt(l.ambIndC||0),skyDome:!!l.skyDome,skyDomeCol0:r.isHexColor(l.skyDomeCol0)?l.skyDomeCol0:"#74a4b9",skyDomeCol1:r.isHexColor(l.skyDomeCol1)?l.skyDomeCol1:"#dce8ed",skyDomeCol2:r.isHexColor(l.skyDomeCol2)?l.skyDomeCol2:"#dce8ed",skyDomeEmis:r.isHexColor(l.skyDomeEmis)?l.skyDomeEmis:"#000000",skyDomeEmisTex:l.skyDomeEmisTex&&!/[^\dtlnesacdgxufq]+/gim.test(l.skyDomeEmisTex)?l.skyDomeEmisTex:0,skyDomeTex:!!l.skyDomeTex,skyDomeTexA:l.skyDomeTexA&&!/[^\dtlnesacdgxufq]+/gim.test(l.skyDomeTexA)?l.skyDomeTexA:0,skyDomeMovD:parseFloat(l.skyDomeMovD||0),skyDomeMovT:parseFloat(l.skyDomeMovT||0),shadowR:null==l.shadowR?a.shadowRes:parseInt(l.shadowR||0),shadowD:null==l.shadowD?a.shadowDst:parseInt(l.shadowD||0),ambient:r.isHexColor(l.ambientC)?l.ambientC:"#97a0a8",ambientI:null==l.ambientI?a.ambIntensity:parseFloat(l.ambientI||0),light:r.isHexColor(l.light)?l.light:"#f2f8fc",lightD:null==l.lightD?a.lightDistance:parseInt(l.lightD||0),lightI:null==l.lightI?a.lightIntensity:parseFloat(l.lightI||0),sunAngX:null==l.sunAngX?a.sunAngleX:parseInt(l.sunAngX||0),sunAngY:null==l.sunAngY?a.sunAngleY:parseInt(l.sunAngY||0),sky:r.isHexColor(l.sky)?l.sky:"#dce8ed",fog:r.isHexColor(l.fogC)?l.fogC:"#8d9aa0",fogD:null==l.fogD?2e3:parseInt(l.fogD||0),correctLights:!!l.correctLights,toneMapping:parseFloat(l.toneMapping||0),toneMappingExposure:null==l.toneMappingExposure?1:parseFloat(l.toneMappingExposure||0),outputEncoding:parseInt(l.outputEncoding||0)}};return c?d:void this.envZones.push(d)},this.addCheckPoint=function(e,t,i,n,a,r,o){o=o||{};var l=this.objects.length;this.objects.push(new s({uid:l,x:e,z:i,y:t+r/2,w:n/2,l:a/2,h:r/2,d:parseInt(o.direction)||0,checkpoint:!0,singleUse:o.singleUse,noShoot:!0,complexMesh:!0,team:o.team,noMinimap:!0}))},this.addTeleporter=function(e,t,i,n,a,o,l){(l=l||{}).channel=r.limitMM(l.channel,0,100);var c=new s({uid:this.objects.length,x:e,z:i,y:t+o/2,w:n/2,l:a/2,h:o/2,d:parseInt(l.direction)||0,fd:l.forceDir,teleporter:!0,telCheckPoint:l.telCheckPoint,telCooldown:0,channel:l.channel||0,node:l.node||0,momentum:l.momentum,noShoot:!0,complexMesh:!0,team:l.team,noMinimap:!0});this.objects.push(c),this.teleporters.push(c)};var h=["#444532","#484a2f","#4b4d2e","#55573b"],u=[{name:"Tiny Oak",height:[30],scales:[1.5,1.6],rar:[10],gen:function(t,i,n,s){e&&e.addSphere(t[0],t[1]+i-1,t[2],25,34,25,{src:"default",shadows:!0,vNoise:.3,xR:n,coat:s.cot,colr:s.col||h[n%h.length]})}},{name:"Square Oak",height:[65,50],scales:[4,5],rar:[4,8,9],gen:function(t,i,n,s){e&&e.addSphere(t[0],t[1]+i-1,t[2],110,120,110,{src:"default",shadows:!0,vNoise:.36,xR:n,coat:s.cot,colr:s.col||h[n%h.length]})}},{name:"Pine",height:[90,120,140],scales:[3,3.2],rar:[5,6,7],gen:function(t,i,n,s){if(e)for(var a=t[1]+40,o=30,l=i>=130?5:4,c=0;c<l;c++)e.addCone(t[0],a,t[2],2*o,40,2*o,{src:"default",closC:!0,xR:n,yR:r.randFloat(-.1,.1),zR:r.randFloat(-.1,.1),vNoise:.12,sides:6,shadows:!0,colr:s.col||h[n%h.length]}),o-=5,a+=i/l}},{name:"Tall Italian",height:[37],scales:[3,3.2],rar:[1,2,3],gen:function(t,i,n,s){e&&e.addSphere(t[0],t[1]+i-6,t[2],39,80,39,{src:"default",shadows:!0,vNoise:.3,xR:n,coat:s.cot,colr:s.col||h[n%h.length]})}},{name:"Honey Oak",height:[100,120],scales:[4,5],rar:[0],gen:function(t,i,n,s){e&&(e.addSphere(t[0],t[1]+i-1,t[2],70,80,70,{src:"default",shadows:!0,vNoise:.35,xR:n,coat:s.cot,colr:s.col||"#616037"}),e.addCube(t[0]+10,t[1]+i/1.5+5,t[2],22,3,2,[1,1,1,1,1,1],{src:"default",colr:"#665547",zR:.4,shadows:!0,amb:.5}),e.addSphere(t[0]+20,t[1]+i/1.5,t[2],30,28,30,{src:"default",shadows:!0,vNoise:.25,coat:s.cot,colr:s.col||"#616037"}))}}];this.addTREE=function(t,i){for(var n=Math.round(Math.abs((t[0]+t[2])%10)),a=null,r=0;r<u.length;++r)if(u[r].rar.indexOf(n)>=0){a=u[r];break}if(a){var o=a.height[n%a.height.length]-2*n,l=a.scales[n%a.scales.length];e&&e.addCylinder(t[0],t[1],t[2],1.5*l,o+20,1.5*l,{src:"default",sides:4,open:!0,colr:"#524435",shadows:!0,amb:.5}),this.objects.push(new s({x:t[0],z:t[2],y:t[1]+o/2,w:l/2,l:l/2,h:o/2,noAmb:!0,uid:this.objects.length,penetrable:1,noMinimap:!0})),a.gen(t,o,n,i)}},this.addSTUMP=function(t){e&&(e.addCube(t[0],t[1],t[2],4,80,4,[1,1,1,0,1,1],{src:"default",colr:"#665547",shadows:!0,amb:.5}),e.addCube(t[0],t[1]+30,t[2]+10,2,3,22,[1,1,1,1,1,1],{src:"default",colr:"#665547",yR:-.5,shadows:!0,amb:.5}),e.addCube(t[0]+10,t[1]+50,t[2],22,3,2,[1,1,1,1,1,1],{src:"default",colr:"#665547",zR:.4,shadows:!0,amb:.5})),this.objects.push(new s({x:t[0],z:t[2],y:t[1]+40,w:2,l:2,h:40,noAmb:!0,uid:this.objects.length,penetrable:1,noMinimap:!0}))},this.addBUSH=function(t,i){var n=t[3],s=Math.round(Math.abs((t[0]+t[2])%10)),a=2==n?.5:1;e&&e.addSphere(t[0],t[1]-6*a,t[2],29*a,21*a,28*a,{src:"default",colr:i.col||"#646639",vNoise:.3,coat:i.cot,xR:s,shadows:!0})};var p=[{name:"Grass",scl:1.2,h:[5,6]},{name:"Flower",scl:.3,h:[2,2.3],gen:function(t,i,s,a){e.addPlane(t,i+a+.05,s,1.2,1.2,{type:1,src:"default",mat:n.MeshBasicMaterial,shadowsR:!0,vertexColors:!0,colr:"#993d36"},r.randFloat(-Math.PI,Math.PI),.5,0)}}];this.addGRASS=function(t,i){if(e)for(var s=0;s<4;++s){var a=p[r.randInt(0,1)],o=t[0]+r.randInt(-15,15),l=t[2]+r.randInt(-15,15),c=a.h[r.randInt(0,a.h.length-1)];e.addPlane(o,t[1],l,a.scl,c,{type:1,src:"default",mat:n.MeshBasicMaterial,side:n.DoubleSide,shadowsR:!0,vertexColors:!0,colr:i.col||"#4d5928"},r.randFloat(-Math.PI,Math.PI),Math.PI/2,0),a.gen&&a.gen(o,t[1],l,c)}},this.addLOOT=function(t){var i=Math.round(Math.abs((t[0]+t[2])%3));e&&e.addCube(t[0]+6,t[1],t[2]+15,18,1,3,[1,1,1,0,1,1],{src:"default",colr:"#665547",xR:.86,shadows:!0,amb:.5}),0!=i&&1!=i||this.addCylinder(t[0],t[1],t[2],7,7,9,{src:"default",colr:"#9e2b2b",shadows:!0}),2!=i&&1!=i||this.addCylinder(t[0]-7,t[1],t[2]+12,7,7,9,{src:"default",colr:"#2b769e",shadows:!0})};var f=[{scl:25,hei:20,nois:.2,col:"#707070"},{scl:50,hei:30,nois:.3,col:"#545454"},{scl:13,hei:10,nois:.15,col:"#707070",noCol:!0},{scl:10,hei:10,nois:.1,col:"#545454",noCol:!0}];this.addROCK=function(t,i){var n=t[1]-7,a=Math.round(Math.abs((t[0]+t[2])%10)),r=f[a%f.length];e&&e.addSphere(t[0],n,t[2],r.scl,r.hei,r.scl,{src:"default",colr:r.col,vNoise:r.nois,noAmb:!0,coat:i.cot,shadows:!0}),r.noCol||this.objects.push(new s({x:t[0],z:t[2],y:n+r.hei/2,w:r.scl/2,l:r.scl/2,h:r.hei/2,uid:this.objects.length,noMinimap:!0}))},this.addTerrObj=function(e,t,i,n){var s={col:null,cot:null},a=i.BIOME_INDEXES[e[3]],o=i.MAP_OBJS[t];o&&a&&(o.biomeCoats&&o.biomeCoats[a]&&(s.cot=o.biomeCoats[a]),o.biomeCols&&o.biomeCols[a]&&(s.col=o.biomeCols[a][r.randInt(0,o.biomeCols[a].length-1)])),this["add"+t](e,s,n)},this.addLadder=function(t,i,n,o,c,d){(d=d||{}).src=d.src||"floor_0",d.texOffX=r.limitMM(d.texOffX,0,1).round(2),d.texOffY=r.limitMM(d.texOffY,0,1).round(2),d.texRot=r.limitMM(d.texRot,0,360),d.texEncode=r.limitMM(d.texEncode,0,a.encodingTypes.length-1);var h=a.ladderScale,u=a.ladderScale;if(0==c||c==Math.PI?u=a.ladderWidth:h=a.ladderWidth,l=new s({uid:this.objects.length,ladder:!0,complexMesh:!0,noShoot:!0,s:d.sound||void 0,d:c,x:t+a.ladderScale*Math.cos(c),z:n+a.ladderScale*Math.sin(c),y:i+o/2,w:h,l:u,h:o/2,noMinimap:!0}),this.objects.push(l),e&&!d.noVis){d.vertexColors=!0,d.shadows=!0,d.amb=a.ambientVal,d.noEmisTex=!0,d.transparent=d.fTrans||r.isTransTex(d.src)||1!=d.opacity,r.isTransTex(d.src)&&(d.depthWrite=!0,d.alphaTest=d.transparent?.02:0);var p=d.colr;e.addCube(l.x+a.ladderWidth*Math.sin(c),l.y-o/2,l.z+a.ladderWidth*Math.cos(c),2*a.ladderScale,o+2,2*a.ladderScale,[1,1,1,1,1,1],d),d.colr=p,e.addCube(l.x-a.ladderWidth*Math.sin(c),l.y-o/2,l.z-a.ladderWidth*Math.cos(c),2*a.ladderScale,o+2,2*a.ladderScale,[1,1,1,1,1,1],d);for(var f=Math.floor(o/6),m=0;m<f;++m)d.colr=p,d.dark=.6+m/f*.4,e.addPlane(l.x,i+6*(m+1)+r.randFloat(-1,1),l.z,a.ladderWidth,a.ladderScale,d,-c+Math.PI/2,Math.PI/2,r.randFloat(-.1,.1))}},this.addRopeLadder=function(t,i,n,o,c,d,h){(h=h||{}).src=h.src||"floor_0",h.texOffX=r.limitMM(h.texOffX||0,0,1).round(2),h.texOffY=r.limitMM(h.texOffY||0,0,1).round(2),h.texRot=r.limitMM(h.texRot,0,360),h.frames&&(h.frames=r.limitMM(parseInt(h.frames)||0,0,100),h.frameT=100*r.limitMM(parseFloat(h.frameT)||0,0,10).round(1)),h.texEncode=r.limitMM(h.texEncode,0,a.encodingTypes.length-1),l=new s({x:t,z:n,y:i+d/2,w:Math.min(o,c)/2,l:Math.min(o,c)/2,h:d/2,uid:this.objects.length,s:h.sound||void 0,src:h.src,noVis:h.noVis,noAmb:h.noAmb,transparent:!!h.transparent||!!r.isTransTex(h.src)||void 0,ropeLadder:!0,complexMesh:!0,noShoot:!0,collT:"cylinder",noMinimap:!0}),this.objects.push(l),h.autoMatrix=!!h.health||!!h.canDest||h.interface,e&&!h.noVis&&(h.transparent=h.fTrans||r.isTransTex(h.src)||1!=h.opacity,r.isTransTex(h.src)&&(h.depthWrite=1==h.opacity,h.alphaTest=h.transparent?.02:0),h.noEmisTex=!0,h.vertexColors=!0,h.scale=null==h.scale?1:h.scale,h.shadows=!h.shadowsR&&1==h.opacity,e.addCube(t,i,n,Math.min(o,c),d,Math.min(o,c),[1,1,1,1,1,1],h))},this.addRamp=function(t,i,o,l,c,d,h,u){(u=u||{}).src=u.src||"grey_0",u.boost&&(u.boost&&!r.isNumber(u.boost)&&(u.boost=1),u.boost=parseFloat(u.boost)||0,u.boost=r.limit(u.boost,a.boostRange).round(2)),u.texOffX=r.limitMM(u.texOffX||0,0,1).round(2),u.texOffY=r.limitMM(u.texOffY||0,0,1).round(2),u.texRot=r.limitMM(u.texRot,0,360),u.frames&&(u.frames=r.limitMM(parseInt(u.frames)||0,0,100),u.frameT=100*r.limitMM(parseFloat(u.frameT)||0,0,10).round(1)),u.texEncode=r.limitMM(u.texEncode,0,a.encodingTypes.length-1);var p,f=0!=h&&h!=Math.PI,m=(f?d:l)/2,g=Math.sqrt(c*c+d*d),v=Math.asin(c/g);u.w=l,u.h=c,u.l=d,u.rot=f;var y=-1;return u.noCol||(y=null==u.uido?this.objects.length:u.uido,p=new s({uid:y,buildInd:u.buildInd,breakSnd:u.breakSnd,dynamic:u.dynamic,type:2,x:t,z:o,y:i+c/2,w:l/2,l:d/2,h:c/2,d:h,s:u.sound||void 0,buildInd:u.buildInd,noShoot:!0,complexMesh:!0,boostDr:u.boost?v:null,boost:u.boost||null,noAICol:!!u.noAICol||void 0,ramp:{sX:t-m*Math.cos(h),sZ:o-m*Math.sin(h),eX:t+m*Math.cos(h),eZ:o+m*Math.sin(h)},noAmb:u.noAmb,enclose:u.enclose,noMinimap:u.noMinimap}),this.objects.push(p)),e&&!u.noVis&&(u.vertexColors=!0,u.shadowsR=!0,u.side=n.DoubleSide,u.noEmisTex=!0,u.transparent=u.fTrans||r.isTransTex(u.src)||1!=u.opacity,r.isTransTex(u.src)&&(u.depthWrite=!0,u.alphaTest=u.transparent?.02:0),u.shaderBased?e.ShaderMesh.addBuild(t,i,o,l,c,d,{type:2,src:u.src,model:u.model,uid:y,colr:u.colr||"#ff0000",emissive:null,opacity:1,dir:h}):e.addRamp(t,i,o,f?l:d,c,(f?d:l)/2,h,u)),p},this.addAIRedirection=function(e,t,i,n,a,r,o,l){l=l||{};var c=0!=o&&o!=Math.PI,d=Math.sqrt(a*a+r*r),h=Math.asin(a/d);l.w=n,l.h=a,l.l=r,l.rot=c;var u=new s({uid:this.objects.length,x:e,z:i,y:t+a/2,w:n/2,l:r/2,h:a/2,d:o,noShoot:!0,complexMesh:!0,boostDr:h,redirection:!0,noMinimap:!0});this.objects.push(u)},this.addMysteryBox=function(t,i,a,r,o,l,c,d){(d=d||{}).src=d.src||"wall_0";var h=new s({active:!1,x:t,z:a,y:i+l,w:o,l:c,h:l,xR:r?r[0]:0,yR:r?r[1]:0,zR:r?r[2]:0,uid:this.objects.length,src:d.src,transparent:void 0,complexMesh:!0,tRadius:7,mysteryBox:!0,scoreP:d.scoreP||1,noMinimap:!0});if(i+=l,e){var u=e.loadMesh({src:"weaponbox_0",shadows:!1,shadowsR:!1,vertexColors:!0,color:"#ffffff",noGroup:!0,outlineMesh:2},t,i-1,a,r,5,e.scene);u.visible=!1,h.meshRef=u;var p=e.loadMesh({src:"mysterybox_beam",shadows:!1,shadowsR:!1,vertexColors:!0,color:"#AC69B9",mat:n.MeshBasicMaterial,noFog:!0,transparent:!0,depthWrite:!1,alphaTest:.05,blending:2,side:2,noGroup:!0},t,i,a,r,10,e.scene);e.scaleMesh(p,10,1e3,10),p.visible=!1,h.beamMesh=p}this.objects.push(h),this.mysteryBoxes.push(h.uid)},this.addPerkMachine=function(t,i,n,o,l,c,d,h){(h=h||{}).src=h.src||"wall_0",h.perk=r.limitMM(h.perk,0,a.zombiePerks.length-1),h.spawnChance=r.limitMM(parseFloat(h.spawnChance)||0,0,100).round(2),h.spawnChance||=void 0,h.health&&(h.canDest=!0),h.complexColl&&h.canDest&&(h.complexColl=!1),h.autoMatrix=!!h.health||!!h.canDest||h.interface;var u=new s({x:t,z:n,y:i+c,w:l,l:d,h:c,uid:this.objects.length,src:h.src,transparent:void 0,complexMesh:!0,tRadius:7,perkMachine:!0,scoreP:h.scoreP||1,perk:h.perk,isBorder:h.isBorder,health:h.health||void 0,canDest:h.canDest,breakSnd:h.breakSnd,startDest:h.canDest&&h.startDest,spawnChance:h.spawnChance,respawnT:r.isNumber(h.respawnT)&&h.respawnT>0?h.respawnT:void 0,respawnR:h.respawnR,trigger:h.trig,interface:h.interface,noMinimap:!0});if(i+=c,e){var p=e.loadMesh({src:"perkmachine_0",texSrc:"perkmachine_0"+(h.perk?"_"+h.perk:""),shadows:!1,shadowsR:!1,vertexColors:!0,color:"#ffffff",emissive:"#ffffff",glowText:!0},t,i,n,o,5,e.scene);u.meshRef=p}this.objects.push(u),this.perkMachines.push(u.uid),this.addHelpers(h,u.uid)},this.addKrumMachine=function(t,i,n,a,r,o,l,c){(c=c||{}).src=c.src||"wall_0";var d=new s({x:t,z:n,y:i+o,w:r,l:l,h:o,xR:a?a[0]:0,yR:a?a[1]:0,zR:a?a[2]:0,uid:this.objects.length,src:c.src,transparent:void 0,complexMesh:!0,tRadius:7,krumMachine:!0,scoreP:c.scoreP||1,isBorder:c.isBorder,noMinimap:!0});if(i+=o,e){var h=e.loadMesh({src:"krummachine_0",shadows:!1,shadowsR:!1,vertexColors:!0,color:"#ffffff",emissive:"#ffffff",glowText:!0},t,i,n,a,7,e.scene);d.meshRef=h}this.objects.push(d),this.krumMachines.push(d)},this.addGate=function(t,i,n,o,l,c,d,h){(h=h||{}).src=h.src||"wall_0",h.autoMatrix=!0,h.penetrable=r.limitMM(parseFloat(h.penetrable)||0,0,1).round(2),h.texOffX=r.limitMM(h.texOffX,0,1).round(2),h.texOffY=r.limitMM(h.texOffY,0,1).round(2),h.texRot=r.limitMM(h.texRot,0,360),h.frames&&(h.frames=r.limitMM(parseInt(h.frames)||0,0,100),h.frameT=100*r.limitMM(parseFloat(h.frameT)||0,0,10).round(1)),h.texEncode=r.limitMM(h.texEncode,0,a.encodingTypes.length-1),h.interface&&=r.limitMM(h.interface,0,a.interfaceIDMax),h.interfaceT&&=r.limitMM(h.interfaceT,0,a.interfaceIDMax),h.interactMsg&&r.isString(h.interactMsg)&&""!=h.interactMsg?(h.interactMsg.length>70&&(h.interactMsg=void 0),/[^\w\:\;\(\)\?\,\.\|\[\] \-\+*\$\@\=\^!{}]+/gim.test(h.interactMsg)&&(h.interactMsg=void 0)):h.interactMsg=void 0;var u=new s({x:t,z:n,y:i+c/2,w:o/2,l:l/2,h:c/2,uid:this.objects.length,src:h.src,s:h.sound||void 0,noVis:h.noVis,noAmb:h.noAmb,notWallJ:h.notWallJ,noGrapple:h.noGrapple,noShoot:!!h.noShoot||void 0,noAICol:!!h.noAICol||void 0,noImpulse:h.noImpulse,transparent:!!h.transparent||!!r.isTransTex(h.src)||void 0,penetrable:h.penetrable>0?h.penetrable:void 0,isBorder:h.isBorder,complexMesh:!!h.xR||!!h.yR||!!h.zR||!!r.isTransTex(h.src)||void 0,tRadius:7,gate:!0,scoreP:h.scoreP,noMsg:h.noMsg,method:h.method||void 0,closeable:h.closeable,startClosed:h.startClosed&&h.closeable,interface:h.interface,team:h.team,interactMsg:h.interactMsg,noMinimap:h.noMinimap});if(e&&!h.noVis){h.transparent=h.fTrans||r.isTransTex(h.src)||1!=h.opacity,r.isTransTex(h.src)&&(h.depthWrite=1==h.opacity,h.alphaTest=h.transparent?.02:0),h.noEmisTex=!0,h.vertexColors=!0,h.scale=null==h.scale?1:h.scale,h.shadows=!h.shadowsR&&1==h.opacity;var p=e.addCube(t,i,n,o,c,l,d,h);u.meshRef=p}this.objects.push(u),this.gates.push(u),this.addHelpers(h,u.uid)},this.addBank=function(t,i,n,o,l,c,d,h){(h=h||{}).src=h.src||"wall_0",h.autoMatrix=!0,h.penetrable=r.limitMM(parseFloat(h.penetrable)||0,0,1).round(2),h.texOffX=r.limitMM(h.texOffX,0,1).round(2),h.texOffY=r.limitMM(h.texOffY,0,1).round(2),h.texRot=r.limitMM(h.texRot,0,360),h.frames&&(h.frames=r.limitMM(parseInt(h.frames)||0,0,100),h.frameT=100*r.limitMM(parseFloat(h.frameT)||0,0,10).round(1)),h.texEncode=r.limitMM(h.texEncode,0,a.encodingTypes.length-1),h.interface&&=r.limitMM(h.interface,0,a.interfaceIDMax),h.interfaceT&&=r.limitMM(h.interfaceT,0,a.interfaceIDMax),h.interactMsg&&r.isString(h.interactMsg)&&""!=h.interactMsg?(h.interactMsg.length>70&&(h.interactMsg=void 0),/[^\w\:\;\(\)\?\,\.\|\[\] \-\+*\$\@\=\^!{}]+/gim.test(h.interactMsg)&&(h.interactMsg=void 0)):h.interactMsg=void 0;var u=new s({x:t,z:n,y:i+c/2,w:o/2,l:l/2,h:c/2,uid:this.objects.length,src:h.src,s:h.sound||void 0,noVis:h.noVis,noAmb:h.noAmb,notWallJ:h.notWallJ,noGrapple:h.noGrapple,noShoot:!!h.noShoot||void 0,noAICol:!!h.noAICol||void 0,noImpulse:h.noImpulse,transparent:!!h.transparent||!!r.isTransTex(h.src)||void 0,penetrable:h.penetrable>0?h.penetrable:void 0,isBorder:h.isBorder,complexMesh:!!h.xR||!!h.yR||!!h.zR||!!r.isTransTex(h.src)||void 0,tRadius:7,bank:!0,interface:h.interface,withdraw:Math.abs(h.withdraw),deposit:Math.abs(h.deposit),team:h.team,interactMsg:h.interactMsg,noMinimap:h.noMinimap});e&&!h.noVis&&(h.transparent=h.fTrans||r.isTransTex(h.src)||1!=h.opacity,r.isTransTex(h.src)&&(h.depthWrite=1==h.opacity,h.alphaTest=h.transparent?.02:0),h.noEmisTex=!0,h.vertexColors=!0,h.scale=null==h.scale?1:h.scale,h.shadows=!h.shadowsR&&1==h.opacity,e.addCube(t,i,n,o,c,l,d,h)),this.objects.push(u),this.banks.push(u),this.addHelpers(h,u.uid)},this.addHelpers=function(e,t){e.noCol||(e.interface&&this.interfaces.push(t),"onTimer"==e.eventN&&this.timerObjs.push(t),e.eventN&&e.eventN.includes("onPlayer")&&this.playerObjs.push(t))},this.addTrigger=function(t,o,c,d,h,u,p,f,m,g){var v=null!=(m=m||{}).asset;if(v){h/=2,u/=2,p/=2,m.src="model",m.mSize&&=r.limitMM(m.mSize,.01,100).round(2),l=i.getPrefabByName("CUSTOM_ASSET"),r.isNumber(m.asset)||(m.asset+=""),r.isString(m.asset)||(m.asset=void 0);var y=(m.asset||"").includes("e"),b=(m.asset||"").includes("n"),w=(m.asset||"").includes("s"),x=(m.asset||"").includes("a"),S=(m.asset||"").includes("m"),M=(m.asset||"").includes("r"),k=(m.asset||"").includes("l"),_=(m.asset||"").includes("p"),T=(m.asset||"").includes("b"),C=(m.asset||"").includes("g"),I=(m.asset||"").includes("q"),A=(m.asset||"").includes("f");m.alphaTest=r.limitMM(parseInt(m.alphaTest)||0,0,1).round(2),m.spin=r.limitMM(m.spin,-20,20),m.side=r.limitMM(parseInt(m.side)||0,0,2),m.spinAxis=r.limitMM(m.spinAxis,0,1),0!=m.spin&&(m.rAnim=(m.spin||0)*a.diskSpin,m.rAnimA=m.spinAxis?"x":"y"),m.startAnim&&r.isString(m.startAnim)&&""!=m.startAnim?(m.startAnim.length>32&&(m.startAnim=""),/[^\w\:\;\(\)\?\,\.\|\[\] \-\+*\$\@\=\^!{}]+/gim.test(m.startAnim)&&(m.startAnim="")):m.startAnim=""}m.src=m.src||"wall_0",m.texOffX=r.limitMM(m.texOffX,0,1).round(2),m.texOffY=r.limitMM(m.texOffY,0,1).round(2),m.texRot=r.limitMM(m.texRot,0,360),m.chance=r.limitMM(m.chance,0,100),m.spawnChance=r.limitMM(parseFloat(m.spawnChance)||0,0,100).round(2),m.spawnChance||=void 0,m.constE=r.limitMM(m.constE,0,1e4),m.actionCost=r.limitMM(m.actionCost,0,1e4),m.frames&&(m.frames=r.limitMM(parseInt(m.frames)||0,0,100),m.frameT=100*r.limitMM(parseFloat(m.frameT)||0,0,10).round(1)),m.hbh=r.limitMM(m.hbh,.1,10),m.hbw=r.limitMM(m.hbw,.1,10),m.texEncode=r.limitMM(m.texEncode,0,a.encodingTypes.length-1),m.interface&&=r.limitMM(m.interface,0,a.interfaceIDMax),m.interfaceT&&=r.limitMM(m.interfaceT,0,a.interfaceIDMax),m.autoMatrix=!0,m.eventN&&m.eventN.includes("onAI")&&(m.eventN=null),m.actionCost&&"onInteractKey"!=m.eventN&&!m.actionMethod&&(m.actionCost=0),m.eventN&&"onInteractKey"==m.eventN&&(m.tRadius=7),m.health&&(m.canDest=!0),m.interactMsg&&r.isString(m.interactMsg)&&""!=m.interactMsg?(m.interactMsg.length>70&&(m.interactMsg=void 0),/[^\w\:\;\(\)\?\,\.\|\[\] \-\+*\$\@\=\^!{}]+/gim.test(m.interactMsg)&&(m.interactMsg=void 0)):m.interactMsg=void 0;var R=[];if(m.actions)for(var P=0;P<m.actions.length;P++)if(m.actions[P]){var E=parseInt(m.actions[P].tc)||0,D=parseInt(m.actions[P].tc2)||0,O=m.actions[P].tct,L=m.actions[P].tcc,j=parseInt(m.actions[P].tce)||0,z=parseInt(m.actions[P].ta)||0,B=parseInt(m.actions[P].esa||m.actions[P].es)||0,N=null!=m.actions[P].esa,F=parseFloat(m.actions[P].ev)||1,H=parseFloat(m.actions[P].er)||1,U=parseInt(m.actions[P].ef)||0,V=parseFloat(m.actions[P].tad)||0,G=parseInt(m.actions[P].cd)||0,W={};g.conditions[G]||(G=0);var q=g.conditions[G];if(q&&q.vals)for(var Y,K=0;K<q.vals.length;K++)Y=q.vals[K].def,null!=m.actions[P]["cv"+K]?(q.vals[K].bool?Y=!!m.actions[P]["cv"+K]:q.vals[K].input?(m.actions[P]["cv"+K]=m.actions[P]["cv"+K]+"",Y=r.isString(m.actions[P]["cv"+K])?(m.actions[P]["cv"+K]||"").toString().replace(/[^a-z0-9_]+/gim,"").substring(0,q.vals[K].len):q.vals[K].def):Y=q.vals[K].select?r.limitMM(parseInt(m.actions[P]["cv"+K])||Y,0,q.vals[K].select.length-1):r.isNumber(m.actions[P]["cv"+K])?r.limitMM(parseFloat(m.actions[P]["cv"+K])||Y,q.vals[K].min,q.vals[K].max):q.vals[K].def,W[K]=Y):W[K]=Y;B=N?B:a.emitterSounds[B]?a.emitterSounds[B]:a.emitterSounds[0],F=r.limitMM(F,a.emitterVolMin,a.emitterVolMax),H=r.limitMM(H,a.emitterRateMin,a.emitterRateMax),U=r.limitMM(U,0,2),V=r.limitMM(V,0,60).round(1),O&&O&&r.isString(O)&&""!=O?(O.length>70&&(O=void 0),/[^\w\:\;\(\)\?\,\.\|\[\] \-\+*\$\@\=\^!{}]+/gim.test(O)&&(O=void 0)):O=void 0,37!=z&&38!=z||null==O||(O=O.toString().replace(/[^a-z0-9_]+/gim,"").substring(0,10)),L=L&&r.isString(L)?L.toString().replace(/[^a-z0-9_]+/gim,"").substring(0,10):void 0;var X={};E&&(X.trigConst=E),D&&(X.trigConst2=D),null!=O&&(X.trigConstTx=O),null!=L&&(X.trigConstC=L),j&&(X.trigConstT=j),z&&(X.trigAct=z),V&&(X.trigDelay=V),G&&(X.trigCond=[G,W[0],W[1],W[2]]),("nuke_0"!=B||1!=F||1!=H||0!=U||N)&&(X.triggerSound=[B,F,H,U,N]),R.push(X)}var Z=new s({aoM:v?0:void 0,x:t,z:c,y:o+(v?p:p/2)*(m.hbh||1),w:(v?h:h/2)*(m.hbw||1),l:(v?u:u/2)*(m.hbw||1),h:(v?p:p/2)*(m.hbh||1),uid:this.objects.length,src:m.src,s:m.sound||void 0,noVis:m.noVis,noAmb:m.noAmb,notWallJ:m.notWallJ,noGrapple:m.noGrapple,noImpulse:m.noImpulse,health:m.health||void 0,canDest:m.canDest,startDest:m.canDest&&m.startDest,spawnChance:m.spawnChance,selfDestruct:m.selfDestruct&&m.canDest,respawnT:r.isNumber(m.respawnT)&&m.respawnT>0?m.respawnT:void 0,respawnR:m.respawnR,transparent:!!m.transparent||m.src==r.isTransTex(m.src)||void 0,complexMesh:!!v||!!m.xR||!!m.yR||!!m.zR||!!r.isTransTex(m.src)||void 0,constE:m.constE||void 0,chance:m.chance||void 0,eventN:m.eventN,actions:R,actionCost:m.actionCost||void 0,actionMethod:m.actionMethod||void 0,interface:m.interface,interfaceT:m.interfaceT,team:m.team,noShoot:"onEnterObject"==m.eventN||"onExitObject"==m.eventN||!!m.noShoot||void 0,noAICol:!!m.noAICol||void 0,singleUse:m.singleUse,singleUseP:m.singleUseP,tRadius:m.tRadius,interactMsg:m.interactMsg,noPCol:m.noPCol,asset:v?m.asset:void 0,hasAnim:v&&(!!C||!!I||!!A)||void 0,noMinimap:m.noMinimap});if(v&&l&&l.transparent&&(o+=r.randFloat(-.01,.01)),e&&!m.noVis)if(v){var J=(m.asset||"").replace(/[^\d]/g,""),Q=e[C||I||A?"loadAnimMesh":"loadMesh"]({isMdl:!0,fileExt:I?"glb":C?"gltf":A?"fbx":null,src:J+"/"+m.src,texSrc:m.texSrc,emissive:y?"#ffffff":null,opacity:m.opacity,transparent:m.fTrans||m.transparent||1!=m.opacity,shadows:m.cast&&!m.receive,shadowsR:m.receive,vertexColors:!0,color:m.colr||"#ffffff",noGroup:!!m.health||!!m.canDest,backup:[h,u,p],normal:b,spec:w,alphaTest:m.alphaTest||(x?.02:0),asset:J,tFilter:m.noSmooth?n.NearestFilter:n.LinearFilter,rAnim:m.rAnim,rAnimA:m.rAnimA,animS:m.animS,startAnim:m.startAnim,metalness:S?1:0,roughness:M?1:0,lightM:k?1:0,uv2:!!k||void 0,displacement:_?1:0,bump:T?1:0,canDest:m.canDest,side:m.side,noFog:m.noFog,offsetH:C||I||A?0:p},t,o,c,d,m.mSize||1,e.scene,!(m.spin||m.health||m.canDest||m.texSrc));(m.health||m.canDest||C||I||A)&&!m.noCol&&(Z.meshRef=Q)}else{delete m.asset,m.assetTexture&&(m.asset=!0),m.transparent=m.fTrans||r.isTransTex(m.src)||1!=m.opacity,r.isTransTex(m.src)&&(m.depthWrite=1==m.opacity,m.alphaTest=m.transparent?.02:0),m.noEmisTex=!0,m.vertexColors=!0,m.scale=null==m.scale?1:m.scale,m.shadows=!m.shadowsR&&1==m.opacity;Q=e.addCube(t,o,c,h,p,u,f,m);!m.health&&!m.canDest||m.noCol||(Z.meshRef=Q)}this.objects.push(Z),this.addHelpers(m,Z.uid)},this.addMapAnchor=function(e,t,i,n){this.mapAnchors.push({x:e,y:t,z:i,type:parseInt(n)||0})},this.addSpray=function(t,i,s,a,l,c,d,h,u,p){(c=c||{}).sprayIndex=parseInt(c.sprayIndex)||2482;var f=p.skins[c.sprayIndex];if(f&&f.type==o.SPRAY||(f=p.skins[2482]),c.src="sprays/"+f.id,i+=1e-5*r.randInt(0,100),e&&!c.noVis){c.side=n.DoubleSide,c.vertexColors=!0,c.shadowsR=!0,c.scale=0,c.local=f.local,c.depthWrite=!1,c.opacity=(f.opacity||1)*c.opacity,c.transparent=!0,c.frames=f.frames,c.frameT=f.frameT,c.movT=f.movT,c.movD=f.movD,c.rgb=f.rgb,c.rgbS=f.rgbS,c.rgbT=f.rgbT,c.sameGlow=f.sameGlow,c.glowText=f.glow||f.sameGlow,c.emissive=f.glow||f.sameGlow?"#ffffff":null,c.pulsT=f.pulsT,c.rAnim=f.rAnim,c.rAnimA=f.rAnimA;var m=[t,i,s,a,l,c,d,h,u];e.addFixedPlane(...m)}},this.addSpinner=function(t,i,n,a,o,l,c,d){(d=d||{}).src=d.src||"wall_0",d.wheel=r.limitMM(d.wheel,0,2);var h=o/2,u=new s({x:t,z:n,y:i,w:h/2,l:h/2,h:h/2,d:c,uid:this.spinners.length,noVis:d.noVis,noAmb:d.noAmb,complexMesh:!!d.xR||!!d.yR||!!d.zR||!!r.isTransTex(d.src)||void 0,tRadius:d.tRadius,wheel:d.wheel,noMinimap:!0});if(i+=h,e&&!d.noVis){d.transparent=!0,d.vertexColors=!0,d.scale=null==d.scale?1:d.scale,d.shadows=!d.shadowsR&&1==d.opacity,d.noGroup=!0;var p=e.addSpinner(t,i,n,h,c*Math.PI/4,d);u.meshRef=p}this.spinners.push(u)},this.addEmitter=function(e,i,n,s){s=s||{},t&&(s.snd=s.assetSnd?s.snd:a.emitterSounds[s.snd]?a.emitterSounds[s.snd]:a.emitterSounds[0],s.vol=r.limitMM(s.vol,a.emitterVolMin,a.emitterVolMax),s.rate=r.limitMM(s.rate,a.emitterRateMin,a.emitterRateMax),s.roll=r.limitMM(s.roll,a.emitterRollMin,a.emitterRollMax),s.dist=r.limitMM(s.dist,a.emitterDistMin,a.emitterDistMax),s.distM=r.limitMM(s.distM,0,2),t.play3DL(s.snd,e,i,n,s.vol,s.rate,s.dist,s.roll,!!s.assetSnd,s.distM))},this.addPointLight=function(t,i,n,s){(s=s||{}).intensity=r.limitMM(s.intensity,0,15),s.distance=r.limitMM(s.distance,0,1e3),s.decay=r.limitMM(s.decay,.1,2),i+=2.5,e&&!e.mapDet||e&&(s.noEmisTex=!0,e.addPointLight(t,i,n,s))},this.addDirectionalLight=function(t,i,n,s,a,o,l){(l=l||{}).intensity=r.limitMM(l.intensity,0,15),i+=2,e&&!e.mapDet||e&&(l.noEmisTex=!0,e.addDirectionalLight(t,i,n,s,a,o,l))},this.addSpotLight=function(t,i,n,s,a,o,l){(l=l||{}).intensity=r.limitMM(l.intensity,0,15),l.distance=r.limitMM(l.distance,0,1e3),l.decay=r.limitMM(l.decay,.1,2),l.angle=r.limitMM(l.angle,1,90),l.penumbra=r.limitMM(l.penumbra,0,1),i+=2,e&&!e.mapDet||e&&(l.noEmisTex=!0,e.addSpotLight(t,i,n,s,a,o,l))},this.addRectAreaLight=function(t,i,n,s,a,o,l,c,d){(o=o||{}).intensity=r.limitMM(o.intensity,0,15),i+=a,e&&!e.mapDet||e&&(o.noEmisTex=!0,e.addRectAreaLight(t,i,n,s,a,o,l,c||0,d))},this.addLightCone=function(t,i,s,o,l,c,d){(d=d||{}).src=d.src||"lightcone_0",d.texEncode=r.limitMM(d.texEncode,0,a.encodingTypes.length-1),d.thetaL=r.limitMM(parseFloat(d.thetaL)||0,.1,360).round(2),d.sides=r.limitMM(d.sides,3,64),e&&!d.noVis&&(d.noEmisTex=!0,d.depthWrite=!1,d.scale=null==d.scale?1:d.scale,d.shadows=!1,d.side=n.DoubleSide,d.blending=n.AdditiveBlending,d.mat=n.MeshBasicMaterial,d.vertexColors=!0,e.addCone(t,i,s,o,c,l,d))},this.addLightBar=function(t,i,s,o,l,c,d,h,u){((c=c||{}).src=c.src||"lightcone_1",c.texEncode=r.limitMM(c.texEncode,0,a.encodingTypes.length-1),e&&!c.noVis)&&(c.noEmisTex=!0,c.depthWrite=!1,c.shadows=!1,c.transparent=!0,c.side=n.DoubleSide,c.vertexColors=!0,c.blending=n.AdditiveBlending,c.mat=n.MeshBasicMaterial,c.vertexColors=!0,c.mimicSprite?(c.color=c.colr||"#FFFFFF",c.mat=n.SpriteMaterial,e.addSprite(t,i,s,o,l,c)):e.addFixedPlane(t,i,s,o,l,c,d,h,u))},this.addCylinder=function(t,i,o,l,c,d,h){if((h=h||{}).src=h.src||"wall_0",h.penetrable=r.limitMM(parseFloat(h.penetrable)||0,0,1).round(2),h.spin=r.limitMM(h.spin,-20,20),h.sides=r.limitMM(h.sides,3,64),h.rTop=r.limitMM(parseFloat(h.rTop)||0,0,1).round(2),h.rBot=r.limitMM(parseFloat(h.rBot)||0,0,1).round(2),h.thetaS=r.limitMM(parseFloat(h.thetaS)||0,0,360).round(2),h.thetaL=r.limitMM(parseFloat(h.thetaL)||0,.1,360).round(2),h.texOffX=r.limitMM(h.texOffX||0,0,1).round(2),h.texOffY=r.limitMM(h.texOffY||0,0,1).round(2),h.texRot=r.limitMM(h.texRot||0,0,360),h.frames&&(h.frames=r.limitMM(parseInt(h.frames)||0,0,100),h.frameT=100*r.limitMM(parseFloat(h.frameT)||0,0,10).round(1)),h.texEncode=r.limitMM(h.texEncode,0,a.encodingTypes.length-1),h.spawnChance=r.limitMM(parseFloat(h.spawnChance)||0,0,100).round(2),h.spawnChance||=void 0,h.health&&(h.canDest=!0),h.complexColl&&h.canDest&&(h.complexColl=!1),!h.noCol){var u=new s({x:t,z:o,y:i+d/2,w:Math.min(l,c)/2,l:Math.min(l,c)/2,h:d/2,uid:this.objects.length,src:h.src,noVis:h.noVis,transparent:!!h.transparent||!!r.isTransTex(h.src)||void 0,complexMesh:!0,collT:"cylinder",spin:h.spin,noGrapple:h.noGrapple,noShoot:!!h.noShoot||void 0,noAICol:!!h.noAICol||void 0,noImpulse:h.noImpulse,health:h.health||void 0,canDest:h.canDest,penetrable:h.penetrable>0?h.penetrable:void 0,startDest:h.canDest&&h.startDest,spawnChance:h.spawnChance,respawnT:r.isNumber(h.respawnT)&&h.respawnT>0?h.respawnT:void 0,respawnR:h.respawnR,interface:h.interface,complexColl:!!h.complexColl||void 0,noMinimap:h.noMinimap});this.objects.push(u),this.addHelpers(h,this.objects.length-1)}if(h.autoMatrix=!!h.health||!!h.canDest||h.interface,e&&!h.noVis){h.transparent=h.fTrans||r.isTransTex(h.src)||1!=h.opacity,r.isTransTex(h.src)&&(h.depthWrite=1==h.opacity,h.alphaTest=h.transparent?.02:0),h.open&&(h.rside=n.DoubleSide),h.noEmisTex=!0,h.vertexColors=!0,h.scale=null==h.scale?0:h.scale,h.shadows=!h.shadowsR&&1==h.opacity,h.rAnim=(h.spin||0)*a.diskSpin,h.rAnimA="y",h.spin&&(h.noGroup=!0);var p=e.addCylinder(t,i,o,l,d,c,h);!h.health&&!h.canDest||h.noCol||(this.objects[this.objects.length-1].meshRef=p)}},this.addServerNode=function(e,t,i,n,a,o,l){(l=l||{}).spread=r.limitMM(l.spread,0,50),l.spawnChance=r.limitMM(parseFloat(l.spawnChance)||0,0,100).round(2),l.spawnChance||=void 0,l.health&&(l.canDest=!0),l.tag&&l.tag&&r.isString(l.tag)&&""!=l.tag?(l.tag.length>70&&(l.tag=void 0),/[^\w\:\;\(\)\?\,\.\|\[\] \-\+*\$\@\=\^!{}]+/gim.test(l.tag)&&(l.tag=void 0)):l.tag=void 0;let c=new s({x:e,z:i,y:t+o/2,w:n/2,l:a/2,h:o/2,noShoot:!0,complexMesh:!0,uid:this.objects.length,health:l.health||void 0,canDest:l.canDest,startDest:l.canDest&&l.startDest,spawnChance:l.spawnChance,respawnT:r.isNumber(l.respawnT)&&l.respawnT>0?l.respawnT:void 0,respawnR:l.respawnR,interface:l.interface,noAICol:!0,spread:l.spread,tag:l.tag,serverNode:!0,noMinimap:!0});this.objects.push(c),this.serverNodes.push(c),this.addHelpers(l,c.uid)},this.addBlock=function(t,i,n,o,l,c,d,h){var u=-1,p=null;if((h=h||{}).src=h.src||"wall_0",h.penetrable=r.limitMM(parseFloat(h.penetrable)||0,0,1).round(2),h.texOffX=r.limitMM(h.texOffX||0,0,1).round(2),h.texOffY=r.limitMM(h.texOffY||0,0,1).round(2),h.texRot=r.limitMM(h.texRot,0,360),h.frames&&(h.frames=r.limitMM(parseInt(h.frames)||0,0,100),h.frameT=100*r.limitMM(parseFloat(h.frameT)||0,0,10).round(1)),h.texEncode=r.limitMM(h.texEncode,0,a.encodingTypes.length-1),h.spawnChance=r.limitMM(parseFloat(h.spawnChance)||0,0,100).round(2),h.spawnChance||=void 0,h.health&&(h.canDest=!0),h.complexColl&&h.canDest&&(h.complexColl=!1),h.noCol||(u=null==h.uido?this.objects.length:h.uido,p=new s({x:t,z:n,y:i+c/2,w:o/2,l:l/2,h:c/2,uid:u,buildInd:h.buildInd,s:h.sound||void 0,src:h.src,noVis:h.noVis,noAmb:h.noAmb,health:h.health||void 0,notWallJ:h.notWallJ,noGrapple:h.noGrapple,noShoot:!!h.noShoot||void 0,noAICol:!!h.noAICol||void 0,noImpulse:h.noImpulse,canDest:h.canDest,breakSnd:h.breakSnd,startDest:h.canDest&&h.startDest,spawnChance:h.spawnChance,respawnT:r.isNumber(h.respawnT)&&h.respawnT>0?h.respawnT:void 0,respawnR:h.respawnR,transparent:!!h.transparent||!!r.isTransTex(h.src)||void 0,penetrable:h.penetrable>0?h.penetrable:void 0,isBorder:h.isBorder,complexMesh:!!h.xR||!!h.yR||!!h.zR||!!r.isTransTex(h.src)||void 0,trigger:h.trig,interface:h.interface,dynamic:h.dynamic,complexColl:!!h.complexColl||void 0,noMinimap:h.noMinimap}),this.objects.push(p),this.addHelpers(h,u)),h.autoMatrix=!!h.health||!!h.canDest||h.interface,e&&!h.noVis)if(h.transparent=h.fTrans||r.isTransTex(h.src)||1!=h.opacity,r.isTransTex(h.src)&&(h.depthWrite=1==h.opacity,h.alphaTest=h.transparent?.02:0),h.rside&&=r.limitMM(parseInt(h.rside)||0,0,2),h.noEmisTex=!0,h.vertexColors=!0,h.scale=null==h.scale?1:h.scale,h.shadows=!h.shadowsR&&1==h.opacity,h.shaderBased)e.ShaderMesh.addBuild(t,i,n,o,c,l,{type:h.type||void 0,src:h.src,model:h.model,uid:u,colr:h.colr||"#ff0000",emissive:null,opacity:1,xR:h.xR||0});else{var f=e.addCube(t,i,n,o,c,l,d,h);!h.health&&!h.canDest||h.noCol||(this.objects[this.objects.length-1].meshRef=f)}return p},this.addSphere=function(t,i,s,o,l,c,d){(d=d||{}).src=d.src||"wall_0",d.texOffX=r.limitMM(d.texOffX,0,1).round(2),d.texOffY=r.limitMM(d.texOffY,0,1).round(2),d.texRot=r.limitMM(d.texRot,0,360),d.frames&&(d.frames=r.limitMM(parseInt(d.frames)||0,0,100),d.frameT=100*r.limitMM(parseFloat(d.frameT)||0,0,10).round(1)),d.texEncode=r.limitMM(d.texEncode,0,a.encodingTypes.length-1),d.health&&(d.canDest=!0),d.complexColl&&d.canDest&&(d.complexColl=!1),e&&!d.noVis&&(d.transparent=d.fTrans||r.isTransTex(d.src)||1!=d.opacity,r.isTransTex(d.src)&&(d.depthWrite=1==d.opacity,d.alphaTest=d.transparent?.02:0),d.noEmisTex=!0,d.vertexColors=!0,d.scale=null==d.scale?1:d.scale,d.shadows=!1,d.shadowsR=!1,d.side=n.DoubleSide,e.addSphere(t,i,s,o,c,l,d))},this.addCanvas=function(t,i,s,a,o,l,c,d,h){l=l||{},e&&(l.canvas=r.createCanvasText(2*a,2*o,l.text||"Hello World",l.fontSize||10,l.fcolr||"#000",l.bcolr||"#fff",l.noBVis,l.tAlign||0,l.ocolr||"#626262",l.othick,!!l.noSCF),l.transparent=!0,l.depthWrite=!0,l.alphaTest=.02,l.renderVisD=400,l.noGroup=!0,l.side=n.DoubleSide,l.noShader=!0,l.mimicSprite?(l.color=l.colr||"#FFFFFF",l.mat=n.SpriteMaterial,e.addSprite(t,i,s,a,o,l)):e.addFixedPlane(t,i,s,a,o,l,c,d,h))},this.addLeaderBoard=function(e,t,i,n,s,a,o,l,c){(a=a||{}).leaderType=["score","time"][r.limitMM(a.leaderType,0,1)],a.leaderTypeCust=a.leaderTypeCust&&r.isString(a.leaderTypeCust)?a.leaderTypeCust.toString().replace(/[^a-z0-9_]+/gim,"").substring(0,10):"",a.leaderTypeCust.length&&(a.leaderType=a.leaderTypeCust),a.leaderOrder=r.limitMM(a.leaderOrder,0,1),a.leaderResults=r.limitMM(parseInt(a.leaderResults)||25,1,50),this.pendingLeaders.push({data:a,x:e,y:t,z:i,w:n,l:s,xR:o,yR:l,zR:c})},this.addCamera=function(e,t,i,n){(n=n||{}).objLink=n.objLink||0,n.camType=r.limitMM(n.camType,0,a.cameraTypes.length-1),n.followPath&&r.isString(n.followPath)&&""!=n.followPath?/[^\d,]+/gim.test(n.followPath)&&(n.followPath=""):n.followPath="",0==n.camType?(this.spectateCams[n.objLink]||(this.spectateCams[n.objLink]=[]),this.spectateCams[n.objLink].push(new s({x:e,z:i,y:t+5,xR:n.xR,yR:n.yR,zR:n.zR}))):n.camType},this.addMesh=function(t,o,c,d,h,u,p,f){f=f||{},f.mSize&&=r.limitMM(f.mSize,.01,100).round(2),l=i.getPrefabByName(f.src.toUpperCase()),f.texEncode=r.limitMM(f.texEncode,0,a.encodingTypes.length-1),f.texVar=l&&l.variants?r.limitMM(f.texVar,0,l.variants.length-1):void 0,f.interface&&=r.limitMM(f.interface,0,a.interfaceIDMax),f.interfaceT&&=r.limitMM(f.interfaceT,0,a.interfaceIDMax),f.health&&(f.canDest=!0),f.spin=r.limitMM(f.spin,-20,20),f.spinAxis=r.limitMM(f.spinAxis,0,1),0!=f.spin&&(f.rAnim=(f.spin||0)*a.diskSpin,f.rAnimA=f.spinAxis?"x":"y"),f.spawnChance=r.limitMM(parseFloat(f.spawnChance)||0,0,100).round(2),f.spawnChance||=void 0;var m=l&&l.complex;if(l&&f.texVar&&l.variants&&l.variants[f.texVar].complex&&(m=!0),!f.noCol){var g=new s({complexMesh:!!m||void 0,aoM:l&&l.aoMlt||0,propID:l.isProp?f.src:void 0,x:t,z:c,y:o+u,w:h,l:p,h:u,s:f.sound||void 0,uid:this.objects.length,noVis:f.noVis,noAmb:f.noAmb,health:f.health||void 0,notWallJ:f.notWallJ,noGrapple:f.noGrapple,noShoot:!!f.noShoot||void 0,noAICol:!!f.noAICol||void 0,noImpulse:f.noImpulse,canDest:f.canDest,startDest:f.canDest&&f.startDest,spawnChance:f.spawnChance,respawnT:r.isNumber(f.respawnT)&&f.respawnT>0?f.respawnT:void 0,respawnR:f.respawnR,interface:f.interface,isEvent:"EVENT"==f.src.toUpperCase(),noMinimap:l.noMinimap||f.noMinimap});this.objects.push(g),this.addHelpers(f,this.objects.length-1)}if((!e||e.mapDet||!l.noDetail)&&(l&&l.transparent&&(o+=r.randFloat(-.01,.01)),e&&!f.noVis)){var v=l.emiss;if(f.src+="_0",l&&f.texVar&&l.variants&&l.variants[f.texVar])l.variants[f.texVar].diffM?(f.src=f.src+"_"+l.variants[f.texVar].id,f.texSrc=null):f.texSrc=f.src+"_"+l.variants[f.texVar].id,l.variants[f.texVar].noEmis&&(v=!1);else if(l&&l.texRange){var y=r.randInt(0,l.texRange);f.texSrc=f.src+(y>0?"_"+y:"")}var b=e.loadMesh({isMdl:!0,src:f.src,texVar:f.texVar,texSrc:f.texSrc,emissive:v?"#ffffff":null,opacity:f.opacity,side:l.doubleSide?n.DoubleSide:n.FrontSide,transparent:l.transparent||f.transparent||1!=f.opacity,shadows:l.castShadow,shadowsR:l.receiveShadow,vertexColors:!0,color:f.colr||"#ffffff",backup:[h,p,u],mat:f.mat,frames:l.frames?l.frames:void 0,frameT:l.frameT?l.frameT:void 0,rAnim:f.rAnim,rAnimA:f.rAnimA,alphaTest:l.alphaTest||0,offsetH:u},t,o,c,d,f.mSize||l.scale,e.scene,!(f.spin||f.health||f.canDest||f.texSrc&&(!l||!l.variants)));!f.health&&!f.canDest||f.noCol||(this.objects[this.objects.length-1].meshRef=b)}},this.addAsset=function(t,o,c,d,h,u,p,f){f=f||{},f.mSize&&=r.limitMM(f.mSize,.01,100).round(2),l=i.getPrefabByName("CUSTOM_ASSET"),r.isNumber(f.asset)||(f.asset+=""),r.isString(f.asset)||(f.asset=void 0);var m=(f.asset||"").includes("e"),g=(f.asset||"").includes("n"),v=(f.asset||"").includes("s"),y=(f.asset||"").includes("a"),b=(f.asset||"").includes("m"),w=(f.asset||"").includes("r"),x=(f.asset||"").includes("l"),S=(f.asset||"").includes("p"),M=(f.asset||"").includes("b"),k=(f.asset||"").includes("g"),_=(f.asset||"").includes("q"),T=(f.asset||"").includes("f");if(f.alphaTest=r.limitMM(parseInt(f.alphaTest)||0,0,1).round(2),f.texEncode=r.limitMM(parseInt(f.texEncode)||0,0,a.encodingTypes.length-1),f.side=r.limitMM(parseInt(f.side)||0,0,2),f.spin=r.limitMM(f.spin,-20,20),f.spinAxis=r.limitMM(f.spinAxis,0,1),f.hbh=r.limitMM(f.hbh,.1,10),f.hbw=r.limitMM(f.hbw,.1,10),0!=f.spin&&(f.rAnim=(f.spin||0)*a.diskSpin,f.rAnimA=f.spinAxis?"x":"y"),f.interface&&=r.limitMM(f.interface,0,a.interfaceIDMax),f.interfaceT&&=r.limitMM(f.interfaceT,0,a.interfaceIDMax),f.health&&(f.canDest=!0),f.startAnim&&r.isString(f.startAnim)&&""!=f.startAnim?(f.startAnim.length>32&&(f.startAnim=""),/[^\w\:\;\(\)\?\,\.\|\[\] \-\+*\$\@\=\^!{}]+/gim.test(f.startAnim)&&(f.startAnim="")):f.startAnim="",f.spawnChance=r.limitMM(parseFloat(f.spawnChance)||0,0,100).round(2),f.spawnChance||=void 0,f.complexColl&&f.canDest&&(f.complexColl=!1),!f.noCol){var C=new s({complexMesh:!0,aoM:0,x:t,z:c,y:o+u*(f.hbh||1),w:h*(f.hbw||1),l:p*(f.hbw||1),h:u*(f.hbh||1),uid:this.objects.length,noVis:f.noVis,noAmb:f.noAmb,health:f.health||void 0,notWallJ:f.notWallJ,noGrapple:f.noGrapple,noShoot:!!f.noShoot||void 0,noAICol:!!f.noAICol||void 0,noImpulse:f.noImpulse,canDest:f.canDest,startDest:f.canDest&&f.startDest,spawnChance:f.spawnChance,respawnT:r.isNumber(f.respawnT)&&f.respawnT>0?f.respawnT:void 0,respawnR:f.respawnR,interface:f.interface,asset:f.asset,hasAnim:!!k||!!_||!!T||void 0,complexColl:!!f.complexColl||void 0,noMinimap:f.noMinimap});this.objects.push(C),this.addHelpers(f,this.objects.length-1)}if(l&&l.transparent&&(o+=r.randFloat(-.01,.01)),e&&!f.noVis){var I=(f.asset||"").replace(/[^\d]/g,""),A=e[k||_||T?"loadAnimMesh":"loadMesh"]({isMdl:!0,fileExt:_?"glb":k?"gltf":T?"fbx":null,src:I+"/"+f.src,texSrc:f.texSrc,emissive:m?"#ffffff":null,opacity:f.opacity,transparent:f.fTrans||f.transparent||1!=f.opacity,shadows:f.cast||!f.receive&&1==f.opacity,shadowsR:f.receive,vertexColors:!0,color:f.colr||"#ffffff",noGroup:!!f.health||!!f.canDest,backup:[h,p,u],normal:g,spec:v,alphaTest:f.alphaTest||(y?.02:0),asset:I,tFilter:f.noSmooth?n.NearestFilter:n.LinearFilter,rAnim:f.rAnim,rAnimA:f.rAnimA,animS:f.animS,startAnim:f.startAnim,metalness:b?1:0,roughness:w?1:0,lightM:x?1:0,uv2:!!x||void 0,displacement:S?1:0,bump:M?1:0,canDest:f.canDest,side:f.side,noFog:f.noFog,offsetH:k||_||T?0:u,texEncode:f.texEncode},t,o,c,d,f.mSize||1,e.scene,!(f.spin||f.health||f.canDest||f.texSrc));(f.health||f.canDest||k||_||T)&&!f.noCol&&(this.objects[this.objects.length-1].meshRef=A)}},this.addPathNode=function(e,t,i,n){n&&null!=n.id&&(this.pathNodes[n.id]={id:n.id,node:!0,x:e,y:t,z:i})},this.buildAIData=function(e,t){return{src:e.aid?"model":"ghost_0",asset:e.aid,pjA:e.pra,pjG:null==e.prg?0:parseFloat(e.prg),pjSC:parseFloat(e.prsc)||1,pjMS:parseFloat(e.prms)||1,pjS:null==e.prs?1:parseFloat(e.prs),pjSp:parseInt(e.pjs)||1,pjD:parseInt(e.pjd)||100,pjGL:null!=e.prgl||void 0,pjT:null!=e.prgt||void 0,health:parseInt(e.h||e.hp)||0,respawnT:1e3*(parseFloat(e.rt)||0),respawnR:null!=e.rr||void 0,speed:null==e.spd?1:parseFloat(e.spd)||0,turnSpd:null==e.tsd?1:parseFloat(e.tsd)||0,roamTime:parseInt(e.rmt)||1e3,roamRad:parseInt(e.rmr)||0,grv:null==e.grv?1:parseFloat(e.grv)||0,frate:parseInt(e.fr)||2e3,aicur:parseFloat(e.aac)||0,shoBrk:parseInt(e.shb)||400,shoArY:parseInt(e.sha)||0,shoOffH:null==e.shof,shoDel:parseInt(e.shdy)||0,melDel:parseInt(e.mldy)||400,melShake:parseFloat(e.mls)||0,shoShake:parseFloat(e.ss)||0,shotEff:null==e.se?void 0:parseInt(e.se)||0,hitEff:null==e.he?void 0:parseInt(e.he)||0,critDmg:parseFloat(e.crd)||0,critHei:parseFloat(e.crh)||0,hrate:parseInt(e.hr)||800,melrng:parseInt(e.mlr)||10,melrad:parseFloat(e.mlra)||0,aiChasd:parseInt(e.aic)||10,meldmg:parseInt(e.mld)||10,visDis:parseInt(e.vd)||120,idl:parseInt(e.idl)||0,dth:parseInt(e.dth)||0,atk:parseInt(e.atk)||0,atkh:parseInt(e.atkh)||0,mel:parseInt(e.mel)||0,melh:parseInt(e.melh)||0,agr:parseInt(e.agr)||0,score:parseInt(e.sp)||0,reward:e.rew,rewardMethod:parseInt(e.rewm)||0,rewardReq:parseInt(e.rewr)||0,rewardNode:parseInt(e.rewn)||0,behav:parseInt(e.bh)||0,ignoreOnStuck:null!=e.igos||void 0,driftOnStuck:null!=e.dos||void 0,invincibleOnStuck:null!=e.ivos||void 0,canShoot:null!=e.cs||void 0,canHit:null!=e.cnh||void 0,xrayVis:null!=e.xv||void 0,targAI:null!=e.tAi||void 0,targPlr:null==e.tPl||void 0,friendly:null!=e.aif,explode:null!=e.exp,colr:e.c,noCol:e.l||e.col,noVis:e.v,mSize:parseFloat(e.ms),mYOff:parseFloat(e.myo)||0,mROff:parseFloat(e.mro)||0,aiName:e.ain,lvl:parseInt(e.ail)||0,tagScale:parseFloat(e.ains)||1,constE:parseInt(e.tce)||0,event:parseInt(e.te)||0,canTrigger:null!=e.ct||void 0,canDest:null!=e.cdy||void 0,startDest:null!=e.sd||void 0,spawnChance:parseFloat(e.rsc||0)||0,chance:parseInt(e.cha)||0,eventN:t.events[parseInt(e.te)||15]?t.events[parseInt(e.te)||15].name:null,interface:parseInt(e.in)||void 0,interfaceT:parseInt(e.tin)||void 0,team:parseInt(e.tm||0)||0,actions:e.tas&&Array.isArray(e.tas)?e.tas:null,animS:parseFloat(e.as)||0,soundR:parseFloat(e.sor)||0,startAnim:e.ast,hbh:parseFloat(e.hbh)||1,hbw:parseFloat(e.hbw)||1,pathType:parseInt(e.pht||0)||0,pathInput:e.phi,texEncode:parseInt(e.ten)||0,noFog:null!=e.nf||void 0,side:parseInt(e.rs)||0,fTrans:null!=e.ft||void 0,noSmooth:null!=e.txs||void 0,alphaTest:parseFloat(e.alt||0)||0,opacity:1!=e.o&&null!=e.o?e.o:1,frames:r.limitMM(parseInt(e.fct)||0,0,100),frameT:100*r.limitMM(parseFloat(e.fs)||0,0,10).round(1),bobS:r.limitMM(parseInt(e.bbS)||0,0,10).round(2)/1e3,bobD:r.limitMM(parseInt(e.bbD)||0,0,10).round(2),pMov:null!=e.pmv||void 0,spin:parseFloat(e.spn||0)||0,spinAxis:parseInt(e.spa||0)||0}},this.addAI=function(t,i,n,s,o,l,c,d,h,u){if(u||!e&&this.pendingAIs.length<a.aiLimit){(d=d||{}).aid||(d.fct=2,d.fs=5,d.rs=2),d=this.buildAIData(d,h),d.mSize&&=r.limitMM(d.mSize,.01,100).round(2),d.mYOff&&=r.limitMM(d.mYOff,-100,100),d.spin=r.limitMM(d.spin,-20,20),d.spinAxis=r.limitMM(d.spinAxis,0,1),0!=d.spin&&(d.rAnim=(d.spin||0)*a.diskSpin,d.rAnimA=d.spinAxis?"x":"y"),d.side=r.limitMM(parseInt(d.side)||0,0,2),d.tagScale=r.limitMM(d.tagScale,0,10),d.lvl=r.limitMM(d.lvl,0,999),d.speed=r.limitMM(d.speed,0,10),d.turnSpd=r.limitMM(d.turnSpd,0,30),d.roamTime=r.limitMM(d.roamTime,1e3,1e4),d.roamRad=r.limitMM(d.roamRad,0,500),d.aiChasd=r.limitMM(d.aiChasd,0,2e3),d.grv=r.limitMM(d.grv,0,1),d.pjG=r.limitMM(d.pjG,-2,2),d.pjSC=r.limitMM(d.pjSC,.1,10),d.pjMS=r.limitMM(d.pjMS,.01,10),d.pjS=r.limitMM(d.pjS,0,20),d.pjD=r.limitMM(d.pjD,0,1e3),d.hbh=r.limitMM(d.hbh,.1,10),d.hbw=r.limitMM(d.hbw,.1,10),d.frate=r.limitMM(d.frate,200,1e4),d.aicur=r.limitMM(d.aicur,0,10),d.shoBrk=r.limitMM(d.shoBrk,0,5e3),d.shoArY=r.limitMM(d.shoArY,-90,90),d.shoDel=r.limitMM(d.shoDel,0,5e3),d.melDel=r.limitMM(d.melDel,0,5e3),d.melShake=r.limitMM(d.melShake,0,1),d.shoShake=r.limitMM(d.shoShake,0,1),null!=d.shotEff&&(d.shotEff=r.limitMM(d.shotEff,0,9)),null!=d.hitEff&&(d.hitEff=r.limitMM(d.hitEff,0,9)),d.critDmg=r.limitMM(d.critDmg,0,5),d.critHei=r.limitMM(d.critHei,0,10),d.hrate=r.limitMM(d.hrate,200,1e4),d.melrng=r.limitMM(d.melrng,10,100),d.melrad=r.limitMM(d.melrad,0,2*Math.PI),d.meldmg=r.limitMM(d.meldmg,1,200),d.visDis=r.limitMM(d.visDis,1,1e3),d.score=r.limitMM(d.score,0,1e4),d.proj=r.limitMM(d.proj,0,5),d.behav=r.limitMM(d.behav,0,20),d.pathType=r.limitMM(d.pathType,0,a.pathTypes.length-1),d.texEncode=r.limitMM(d.texEncode,0,a.encodingTypes.length-1),d.alphaTest=r.limitMM(parseInt(d.alphaTest)||0,0,1).round(2),d.pathInput&&r.isString(d.pathInput)&&""!=d.pathInput?/[^\d,]+/gim.test(d.pathInput)&&(d.pathInput=""):d.pathInput="",d.reward=r.isString(d.reward)?d.reward.split(","):null,d.startAnim&&r.isString(d.startAnim)&&""!=d.startAnim?(d.startAnim.length>32&&(d.startAnim=""),/[^\w\:\;\(\)\?\,\.\|\[\] \-\+*\$\@\=\^!{}]+/gim.test(d.startAnim)&&(d.startAnim="")):d.startAnim="",d.spawnChance=r.limitMM(parseFloat(d.spawnChance)||0,0,100).round(2),d.spawnChance||=void 0,d.startDest=d.canDest&&d.startDest,d.interface&&=r.limitMM(d.interface,0,a.interfaceIDMax),d.interfaceT&&=r.limitMM(d.interfaceT,0,a.interfaceIDMax),d.eventN=d.canTrigger?d.eventN:null,d.eventN&&!d.eventN.includes("onAI")&&(d.eventN=null),d.aiName&&r.isString(d.aiName)&&""!=d.aiName?(d.aiName.length>16&&(d.aiName=""),/[^\w\:\;\(\)\?\,\.\|\[\] \-\+*\$\@\=\^!{}]+/gim.test(d.aiName)&&(d.aiName="")):d.aiName="",d.constE=r.limitMM(d.constE,0,1e4),d.chance=r.limitMM(d.chance,0,100);var p=[];if(d.actions)for(var f=0;f<d.actions.length;f++)if(d.actions[f]){var m=parseInt(d.actions[f].tc)||0,g=parseInt(d.actions[f].tc2)||0,v=d.actions[f].tct,y=d.actions[f].tcc,b=parseInt(d.actions[f].tce)||0,w=parseInt(d.actions[f].ta)||0,x=parseInt(d.actions[f].esa||d.actions[f].es)||0,S=null!=d.actions[f].esa,M=parseFloat(d.actions[f].ev)||1,k=parseFloat(d.actions[f].er)||1,_=parseInt(d.actions[f].ef)||0,T=parseFloat(d.actions[f].tad)||0,C=parseInt(d.actions[f].cd)||0,I={};h.conditions[C]||(C=0);var A=h.conditions[C];if(A&&A.vals)for(var R,P=0;P<A.vals.length;P++)R=A.vals[P].def,null!=d.actions[f]["cv"+P]?(A.vals[P].bool?R=!!d.actions[f]["cv"+P]:A.vals[P].input?(d.actions[f]["cv"+P]=d.actions[f]["cv"+P]+"",R=r.isString(d.actions[f]["cv"+P])?(d.actions[f]["cv"+P]||"").toString().replace(/[^a-z0-9_]+/gim,"").substring(0,A.vals[P].len):A.vals[P].def):R=A.vals[P].select?r.limitMM(parseInt(d.actions[f]["cv"+P])||R,0,A.vals[P].select.length-1):r.isNumber(d.actions[f]["cv"+P])?r.limitMM(parseFloat(d.actions[f]["cv"+P])||R,A.vals[P].min,A.vals[P].max):A.vals[P].def,I[P]=R):I[P]=R;x=S?x:a.emitterSounds[x]?a.emitterSounds[x]:a.emitterSounds[0],M=r.limitMM(M,a.emitterVolMin,a.emitterVolMax),k=r.limitMM(k,a.emitterRateMin,a.emitterRateMax),_=r.limitMM(_,0,2),T=r.limitMM(T,0,60).round(1),v&&v&&r.isString(v)&&""!=v?(v.length>70&&(v=void 0),/[^\w\:\;\(\)\?\,\.\|\[\] \-\+*\$\@\=\^!{}]+/gim.test(v)&&(v=void 0)):v=void 0,37!=w&&38!=w||null==v||(v=v.toString().replace(/[^a-z0-9_]+/gim,"").substring(0,10)),y=y&&r.isString(y)?y.toString().replace(/[^a-z0-9_]+/gim,"").substring(0,10):void 0;var E={};m&&(E.trigConst=m),g&&(E.trigConst2=g),null!=v&&(E.trigConstTx=v),null!=y&&(E.trigConstC=y),b&&(E.trigConstT=b),w&&(E.trigAct=w),T&&(E.trigDelay=T),C&&(E.trigCond=[C,I[0],I[1],I[2]]),("nuke_0"!=x||1!=M||1!=k||0!=_||S)&&(E.triggerSound=[x,M,k,_,S]),p.push(E)}d.actions=p;var D={data:d,x:t,y:i,z:n,r:s,w:o,h:l,l:c};return u?D:void this.pendingAIs.push(D)}},this.addPendingAIs=function(e,t){for(var i=0;i<this.pendingAIs.length;++i){var n=(l=this.pendingAIs[i]).data,s=!n.canDest||!n.startDest;!t&&n.spawnChance&&n.startDest&&n.canDest&&r.randFloat(0,100)<=n.spawnChance&&(s=!0),n&&s&&e.spawn(null,0,n.aiName,l.x,l.y,l.z,n)}},this.buildBotData=function(e){return{name:e.btn,class:parseInt(e.btc)||0,lives:parseInt(e.btl)||0,team:parseInt(e.btt)||0,healthMlt:parseFloat(e.bthm)||1,dmgMlt:parseFloat(e.btdm)||1,speedMlt:parseFloat(e.btspm)||1,rangeMlt:parseFloat(e.btrm)||1,spreadMlt:parseFloat(e.btsm)||1,forceClass:null!=e.btfc,targetBots:null!=e.bttc,targetTeam:null!=e.bttt,forceCrouch:null!=e.btfcr,attackTarget:null==e.btat,followTarget:null==e.btft,watchTarget:null==e.btwt,mimicTarget:null!=e.btmt,slideHop:null!=e.btsh,canRespawn:null==e.btcr,useSpawnDelay:null==e.btsd,removeOnDeath:null==e.btrd,nodYes:null!=e.btny,nodNo:null!=e.btno,joinMessage:null!=e.btjm,leaveMessage:null!=e.btlm,voiceChat:null==e.btvc,godMode:null!=e.btgm,roam:null==e.btr,randomSpawn:null!=e.btrs,recoil:null==e.btrc,primSkin:parseInt(e.btcpr)||-1,dye:parseInt(e.btcd)||-1,face:parseInt(e.btcf)||-1,hat:parseInt(e.btcht)||-1,head:parseInt(e.btch)||-1,back:parseInt(e.btcbk)||-1,body:parseInt(e.btcb)||-1,waist:parseInt(e.btcw)||-1,wrist:parseInt(e.btcwr)||-1,shoes:parseInt(e.btcs)||-1,pet:parseInt(e.btcp)||-1,melee:parseInt(e.btcm)||-1}},this.addBot=function(t,i,n,s,o){if(!e&&this.pendingBots.length<a.botLimit){o=o||{},(o=this.buildBotData(o)).name&&r.isString(o.name)&&""!=o.name?(o.name.length>16&&(o.name=""),/[^\w\:\;\(\)\?\,\.\|\[\] \-\+*\$\@\=\^!{}]+/gim.test(o.name)&&(o.name="")):o.name="";var l={data:o,dir:s,x:t,y:i,z:n};this.pendingBots.push(l)}},this.addPendingBots=function(e){for(var t=0;t<this.pendingBots.length;++t)l=this.pendingBots[t],e.add({x:l.x,y:l.y,z:l.z,dir:l.dir},!0,!0,l.data);e.sync()},this.updatePendingLeader=function(t,i){if(this.pendingLeaders&&this.pendingLeaders[t]&&i&&i.length&&(l=this.pendingLeaders[t],e)){var s=new n.Texture(r.createLeaderText(2*l.w,2*l.l,i,l.data));s.wrapS=n.RepeatWrapping,s.wrapT=n.RepeatWrapping,s.repeat.set(l.data.repeatX||1,l.data.repeatY||1),s.minFilter=l.data.tFilter||n.NearestFilter,s.magFilter=l.data.tFilter||n.NearestFilter,s.needsUpdate=!0,l.data.movT&&e.movTextures.push({tex:s,mov:l.data.movT,movD:l.data.movD||0}),l.meshRef||(l.data.transparent=!0,l.data.depthWrite=!0,l.data.alphaTest=.02,l.data.renderVisD=400,l.data.noGroup=!0,l.data.side=n.DoubleSide,l.data.noShader=!0,l.data.skipMat=!0,l.data.mimicSprite?(l.data.color=l.data.colr||"#FFFFFF",l.data.mat=n.SpriteMaterial,l.meshRef=e.addSprite(l.x,l.y,l.z,l.w,l.l,l.data)):l.meshRef=e.addFixedPlane(l.x,l.y,l.z,l.w,l.l,l.data,l.xR,l.yR,l.zR)),l.meshRef.material.map=s}};var m=[];this.addNoisePlanes=function(){for(var t=0;t<m.length;++t){m[t][5].objects=this.objects;var i=e.addFixedPlane(...m[t]);10==m[t].length&&(this.objects[m[t][9]].meshRef=i)}m.length=0},this.addPlane=function(t,i,o,l,c,d,h,u,p){if((d=d||{}).penetrable=r.limitMM(parseFloat(d.penetrable)||0,0,1).round(2),d.texOffX&&=r.limitMM(d.texOffX,0,1).round(2),d.texOffY&&=r.limitMM(d.texOffY,0,1).round(2),d.frames&&(d.frames=r.limitMM(parseInt(d.frames)||0,0,100),d.frameT=100*r.limitMM(parseFloat(d.frameT)||0,0,10).round(1)),d.texEncode=r.limitMM(d.texEncode,0,a.encodingTypes.length-1),d.interface&&=r.limitMM(d.interface,0,a.interfaceIDMax),d.interfaceT&&=r.limitMM(d.interfaceT,0,a.interfaceIDMax),d.health&&(d.canDest=!0),d.spawnChance=r.limitMM(parseFloat(d.spawnChance)||0,0,100).round(2),d.spawnChance||=void 0,d.noCol||this.objects.push(new s({x:t,z:o,y:i,w:c,l:l,h:0,uid:this.objects.length,s:d.sound||void 0,health:d.health||void 0,notWallJ:d.notWallJ,noGrapple:d.noGrapple,noShoot:!!d.noShoot||void 0,noAICol:!!d.noAICol||void 0,noImpulse:d.noImpulse,respawnT:r.isNumber(d.respawnT)&&d.respawnT>0?d.respawnT:void 0,respawnR:d.respawnR,transparent:!!d.transparent||!!r.isTransTex(d.src)||void 0,penetrable:d.penetrable>0?d.penetrable:void 0,noVis:d.noVis,noAmb:d.noAmb,interface:d.interface,canDest:d.canDest,startDest:d.canDest&&d.startDest,spawnChance:d.spawnChance,noMinimap:d.noMinimap})),d.noCol||d.noise||2==d.side||d.asset||(this.objects[this.objects.length-1].type=1),this.addHelpers(d,this.objects.length-1),e&&!d.noVis){d.refl=1,d.noEmisTex=!0,d.transparent=!0,d.side=n.DoubleSide,d.vertexColors=!0,d.shadowsR=!0,d.noise&&(d.pinEdges=!0,d.margin=5,d.tilesX=Math.round(c/5),d.tilesZ=Math.round(l/5)),d.noShader=!!d.noise;var f=[t,i,o,c,l,d,h,(u||0)+Math.PI/2,p];if(d.noise)!d.health&&!d.canDest||d.noCol||f.push(this.objects.length-1),m.push(f);else{var g=e.addPlane(...f);!d.health&&!d.canDest||d.noCol||(this.objects[this.objects.length-1].meshRef=g)}}},this.addFixedPlane=function(t,i,o,l,c,d,h,u,p){if((d=d||{}).penetrable=r.limitMM(parseFloat(d.penetrable)||0,0,1).round(2),d.texOffX&&=r.limitMM(d.texOffX,0,1).round(2),d.texOffY&&=r.limitMM(d.texOffY,0,1).round(2),d.frames&&(d.frames=r.limitMM(parseInt(d.frames)||0,0,100),d.frameT=100*r.limitMM(parseFloat(d.frameT)||0,0,10).round(1)),d.texEncode=r.limitMM(d.texEncode,0,a.encodingTypes.length-1),d.alphaTest=r.limitMM(parseInt(d.alphaTest)||0,0,1).round(2),d.interface&&=r.limitMM(d.interface,0,a.interfaceIDMax),d.interfaceT&&=r.limitMM(d.interfaceT,0,a.interfaceIDMax),d.health&&(d.canDest=!0),d.spawnChance=r.limitMM(parseFloat(d.spawnChance)||0,0,100).round(2),d.spawnChance||=void 0,d.complexColl&&d.canDest&&(d.complexColl=!1),d.noCol||this.objects.push(new s({x:t,z:o,y:i,w:l,l:c,h:0,uid:this.objects.length,s:d.sound||void 0,health:d.health||void 0,notWallJ:d.notWallJ,noGrapple:d.noGrapple,noShoot:!!d.noShoot||void 0,noAICol:!!d.noAICol||void 0,noImpulse:d.noImpulse,respawnT:r.isNumber(d.respawnT)&&d.respawnT>0?d.respawnT:void 0,respawnR:d.respawnR,transparent:!!d.transparent||!!r.isTransTex(d.src)||void 0,penetrable:d.penetrable>0?d.penetrable:void 0,noVis:d.noVis,noAmb:d.noAmb,interface:d.interface,canDest:d.canDest,complexColl:!!d.complexColl||void 0,startDest:d.canDest&&d.startDest,spawnChance:d.spawnChance,noMinimap:d.noMinimap})),d.noCol||d.noise||2==d.side||d.asset||(this.objects[this.objects.length-1].type=1),this.addHelpers(d,this.objects.length-1),e&&!d.noVis){d.refl=1,d.noEmisTex=!0,d.transparent=d.fTrans||r.isTransTex(d.src)||1!=d.opacity,r.isTransTex(d.src)&&(d.depthWrite=1==d.opacity,d.alphaTest=d.transparent?.02:0),d.side=n.DoubleSide,d.vertexColors=!0,d.shadowsR=!0,d.noise&&(d.pinEdges=!0,d.margin=5,d.tilesX=Math.round(c/5),d.tilesZ=Math.round(l/5)),d.noShader=!!d.noise;var f,g=[t,i,o,l,c,d,h,u,p];if(d.noise)!d.health&&!d.canDest||d.noCol||g.push(this.objects.length-1),m.push(g);else d.mimicSprite?(d.color=d.colr||"#FFFFFF",d.mat=n.SpriteMaterial,f=e.addSprite(t,i,o,l,c,d)):f=e.addFixedPlane(...g),!d.health&&!d.canDest||d.noCol||(this.objects[this.objects.length-1].meshRef=f)}},this.addSprite=function(t,i,s,o,l,c){c=c||{},c.texOffX&&=r.limitMM(c.texOffX,0,1).round(2),c.texOffY&&=r.limitMM(c.texOffY,0,1).round(2),c.frames&&(c.frames=r.limitMM(parseInt(c.frames)||0,0,100),c.frameT=100*r.limitMM(parseFloat(c.frameT)||0,0,10).round(1)),c.texEncode=r.limitMM(c.texEncode,0,a.encodingTypes.length-1),e&&!c.noVis&&(c.color=c.colr||"#FFFFFF",c.mat=n.SpriteMaterial,c.noEmisTex=!0,c.transparent=!0,c.side=n.DoubleSide,c.vertexColors=!0,c.shadowsR=!0,e.addSprite(t,i,s,o,l,c))},this.addLiquid=function(t,i,s,o,l,c,d,h,u){if(e&&!c.noVis&&e.mapDet){(c=c||{}).texOffX=r.limitMM(c.texOffX,0,1).round(2),c.texOffY=r.limitMM(c.texOffY,0,1).round(2),c.texRot=r.limitMM(c.texRot,0,360),c.texEncode=r.limitMM(c.texEncode,0,a.encodingTypes.length-1),c.noEmisTex=!0,c.shadowsR=!0,c.transparent=1!=c.opacity,c.side=n.DoubleSide,c.scale=2,c.vertexColors=!0,c.noGroup=!0,c.tilesX=c.tilesX||10,c.tilesZ=c.tilesZ||10,c.noShader=!0,c.mat=n.StrippedLambertMaterial;var p=e.addFixedPlane(t,i,s,o,l,c,d,h,u),f=p.geometry.getAttribute("position");const m=new Float32Array(f.count);for(t=0;t<f.count;t++)m[t]=t;p.geometry.setAttribute("count",new n.BufferAttribute(m,1)),e.liquids.push({mesh:p,spd:c.wSpeed||10,hght:c.wHeight||.5})}},this.pointInObjs=function(e,t,i){for(var n=0;n<this.objects.length;++n)if(!(l=this.objects[n]).noVis&&!l.complexMesh&&!l.health&&!l.canDest&&t.indexOf(l.sid)<0&&r.pointInBox3D(e[0],e[1],e[2],l,i||0))return!0;return!1},this.setMaxAO=function(e,t,i){e.maxAOS=e.maxAOS||{},e.maxAOS[t.sid]=Math.max(i,e.maxAOS[t.sid]||0),t.maxAOS=t.maxAOS||{},t.maxAOS[e.sid]=Math.max(i,t.maxAOS[e.sid]||0)},this.aosToAdd={},this.addAmbient=function(t,i,n,s,o,l,c,d,h,u,p){if(!e.noTex){var f=!u;if(u)for(var m=0;m<u.length;++m)if(r.pointInBox3D(t,i,n,u[m],2*a.ambOff)){f=!0;break}if(f)if(u){var g=u[0].sid+"-"+u[1].sid;this.aosToAdd[g]||=[],this.aosToAdd[g].push({vals:[t,i,n,s,o,l,c+a.ambOff,d+a.ambOff,h],group:p})}else this.addPlane(t,i,n,c,d,{src:"ambient_"+(h||0),euler:"ZYX",depthWrite:!1,noCol:!0},s,o,l)}};var g=[["g6-1-2","g4-1-2"],["g5-1-2","g4-0-1"],["g6-0-1","g3-1-2"],["g5-0-1","g3-0-1"],["g6-0-3","g2-0-3"],["g5-0-3","g2-1-1"],["g6-1-1","g1-0-3"],["g5-1-1","g1-1-1"],["g6-0-2","g1-1-0"],["g5-0-2","g1-0-2"],["g6-1-0","g2-1-0"],["g5-1-0","g2-0-2"],["g4-0-2","g1-0-0"],["g3-0-2","g1-1-3"],["g4-1-0","g2-0-0"],["g3-1-0","g2-1-3"],["g4-0-3","g2-1-2"],["g3-0-3","g2-0-1"],["g4-1-1","g1-1-2"],["g3-1-1","g1-0-1"],["g6-1-3","g3-0-0"],["g5-1-3","g3-1-3"],["g6-0-0","g4-0-0"],["g5-0-0","g4-1-3"]];this.groupsMatch=function(e,t){for(var i=0;i<g.length;++i)if(g[i].indexOf(e)>=0&&g[i].indexOf(t)>=0)return!0;return!1},this.clearAOGroup=function(e){for(var t=e.length-1;t>=0;--t){l=e[t];for(var i=e.length-1;i>=0;--i)if(c=e[i],!l.dontAdd&&!c.dontAdd&&l!=c&&this.groupsMatch(l.group,c.group)){l.vals[6]+l.vals[7]>=c.vals[6]+c.vals[7]?c.dontAdd=!0:l.dontAdd=!0;break}}},this.addPendingAOs=function(){for(var e in this.aosToAdd)if(this.aosToAdd.hasOwnProperty(e)){this.clearAOGroup(this.aosToAdd[e]);for(var t=0;t<this.aosToAdd[e].length;++t)this.aosToAdd[e][t].dontAdd||this.addAmbient(...this.aosToAdd[e][t].vals)}this.aosToAdd={}},this.limitAmb=function(e,t,i,n,s,a,o){var l=[r.cdv[n]],c=[r.cdv[s]];return e=i==-Math.PI/2||i==Math.PI+Math.PI/2?Math.min(e,(t[s]-Math.min(a[s]-a[c],o[s]-o[c]))/2):i==Math.PI/2?Math.min(e,(Math.max(a[s]+a[c],o[s]+o[c])-t[s])/2):0==i?Math.min(e,(Math.max(a[n]+a[l],o[n]+o[l])-t[n])/2):Math.min(e,(t[n]-Math.min(a[n]-a[l],o[n]-o[l]))/2)},this.resetAll=function(t){this.aosToAdd={},this.destObjs.length=0,this.movedObjs.length=0;for(var i=0;i<this.objects.length;++i)if(this.objects[i]){var n=!this.objects[i].startClosed&&!this.objects[i].startDest&&!this.objects[i].mysteryBox;this.objects[i].active=n,this.objects[i].destroyed=!!this.objects[i].startDest,this.objects[i].startHealth&&(this.objects[i].health=this.objects[i].startHealth),(this.objects[i].health||this.objects[i].canDest)&&this.objects[i].startDest&&(this.objects[i].destroyed=!0,this.objects[i].active=!1),!t&&!e&&this.objects[i].spawnChance&&this.objects[i].startDest&&this.objects[i].canDest&&r.randFloat(0,100)<=this.objects[i].spawnChance&&(this.objects[i].destroyed=!1,this.objects[i].active=!0),this.objects[i].destroyed&&this.destObjs.push(this.objects[i].uid),this.objects[i].storage=0,this.objects[i].triggered=!1,this.objects[i].eventN&&(this.objects[i].trigT=1e3*(this.objects[i].trigConstE||1)),this.objects[i].uses&&(this.objects[i].uses.length=0),null!=this.objects[i].respawnTStart&&(this.objects[i].respawnT=this.objects[i].respawnTStart),this.objects[i].meshRef&&(this.objects[i].meshRef.visible=!!this.objects[i].active),this.objects[i].custVals={},this.objects[i].perkMachine&&(this.objects[i].gotFreeP=!1)}e&&e.updateShadowMap()},this.syncAll=function(t){this.destObjs=t&&t.length?t:[];for(var i=0;i<this.objects.length;++i)this.objects[i].destroyed&&-1==this.destObjs.indexOf(this.objects[i].uid)&&!this.objects[i].mysteryBox&&(this.objects[i].destroyed=!1,this.objects[i].active=!0,this.objects[i].meshRef&&(this.objects[i].meshRef.visible=!0));e&&e.updateShadowMap()},this.removeAll=function(){this.objects.length=0,this.grids={},this.pathNodes={},this.objectives.length=0,this.domzones.length=0,this.scorezones.length=0,this.sites.length=0,this.flags.length=0,this.spawnables.length=0,this.pickups.length=0,this.gates.length=0,this.mysteryBoxes.length=0,this.perkMachines.length=0,this.krumMachines.length=0,this.banks.length=0,this.pendingAIs.length=0,this.pendingBots.length=0,this.pendingLeaders.length=0,this.teleporters.length=0,this.timerObjs.length=0,this.playerObjs.length=0,this.spectateCams={},this.envZones.length=0,this.pendingTriangles.length=0,this.serverNodes.length=0,this.mapAnchors.length=0}}},function(e,t){e.exports=function(e){const t=new e.Vector3,i=new e.Vector3,n=new e.Vector3,s=new e.Plane,a=new e.Line3,r=new e.Line3,o=new e.Capsule(new e.Vector3(0,0,0),new e.Vector3(0,0,0),0),l=new e.Capsule(new e.Vector3(0,0,0),new e.Vector3(0,0,0),0);this.collBounds=function(e,t,i,n,s,a){return t+s>=e.minX&&t-s<=e.maxX&&n+s>=e.minZ&&n-s<=e.maxZ&&i+2*a>=e.minY&&i-a<=e.maxY},this.capsuleColl=function(s,a,r,c,d,h){if(!this.collBounds(s,a,r,c,d,h))return null;let u;if(i.set(a,r,c),n.set(a,r+h,c),o.set(i,n,d),l.copy(o),u=this.triCapsInter(l,s)){l.translate(u.normal.multiplyScalar(u.depth));const i=l.getCenter(new e.Vector3).sub(o.getCenter(t));var p=i.length();return{normal:i.normalize(),depth:p}}return null},this.triCapsInter=function(e,i){i.getPlane(s);const n=s.distanceToPoint(e.start)-e.radius,o=s.distanceToPoint(e.end)-e.radius;if(n>0&&o>0||n<-e.radius&&o<-e.radius)return!1;const l=Math.abs(n/(Math.abs(n)+Math.abs(o))),c=t.copy(e.start).lerp(e.end,l);if(i.containsPoint(c))return{normal:s.normal.clone(),point:c.clone(),depth:Math.abs(Math.min(n,o))};const d=e.radius*e.radius,h=a.set(e.start,e.end),u=[[i.a,i.b],[i.b,i.c],[i.c,i.a]];for(let t=0;t<u.length;t++){const i=r.set(u[t][0],u[t][1]),[n,s]=e.lineLineMinimumPoints(h,i);if(n.distanceToSquared(s)<d)return{normal:n.clone().sub(s).normalize(),point:s.clone(),depth:e.radius-n.distanceTo(s)}}return!1}}},function(e,t,i){const n=i(12),s=i(1),a=i(4),r=i(15),o=i(289);e.exports=function(e,t,l,c,d,h){var u,p,f;this.list=[];var m,g={},v=i(329);Object.defineProperty(this,"isServer",{get:()=>h?1:0}),this.setOnGround=function(e){e.onGround=!0,e.lastGround={x:e.x,y:e.y,z:e.z,height:e.height}},this.playerCollision=function(e,t){if(e&&e.config.pColl&&e.active)for(var i=0;i<this.list.length;++i)if((u=this.list[i]).active&&e.collidesP(u))if(e.oldY>=u.y.round(1)+u.height)e.y=u.y.round(1)+u.height,this.resetStep(e,t),e.velocity.y=0,this.setOnGround(e),e.onTerrain=!1;else if(e.oldX-e.scale>=u.x.round(1)+u.scale-1e-5){var n=u.scale+e.scale;e.x=u.x.round(1)+n,e.velocity.x=0,u.velocity.x=0}else if(e.oldX+e.scale<=u.x.round(1)-u.scale+1e-5){n=u.scale+e.scale;e.x=u.x.round(1)-n,e.velocity.x=0,u.velocity.x=0}else if(e.oldZ-e.scale>=u.z.round(1)+u.scale-1e-5){n=u.scale+e.scale;e.z=u.z.round(1)+n,e.velocity.z=0,u.velocity.z=0}else if(e.oldZ+e.scale<=u.z.round(1)-u.scale+1e-5){n=u.scale+e.scale;e.z=u.z.round(1)-n,e.velocity.z=0,u.velocity.z=0}},this.playerConvTeam=function(t){if(h&&!e.waitTimers&&e.mode.convTeam)for(var i=0;i<this.list.length;++i)if(t.active&&this.list[i].active&&t.team==e.mode.convTeam&&t.team!=this.list[i].team&&!this.list[i].godMode){var n=a.playerHeight/2;s.getD3D(t.x,t.y+n,t.z,this.list[i].x,this.list[i].y+n,this.list[i].z)<=2.4*n&&(e.broadcast("ac",t.sid,this.list[i].sid,e.mode.convWord),this.score(t,100,2),t.convs++,e.updateTeam(this.list[i],t.team),e.mode.killConv&&this.kill(this.list[i],null,null,!0),e.gameTimer&&(e.gameTimer+=1e4))}},this.update=function(i){for(var n=0;n<this.list.length;++n)this.list[n]&&this.list[n].active?(this.list[n].update(e,i),e.isServer?(h&&e&&e.isCustom&&this.list[n]&&this.list[n].playTime>=3e4&&this.list[n].didAct&&(e.playTime+=i,e.uniquePlay(this.list[n])),this.tickPlayer(this.list[n],i)):t&&(this.updateHeight(this.list[n]),this.updateMsh(this.list[n]),this.updateEffects(this.list[n],i),this.itemEffects(this.list[n],null,i))):h&&this.list[n].deathInfo&&this.list[n].deathInfo.tillNext&&!this.list[n].kpdData&&(this.list[n].deathInfo.tillNext-=i,this.list[n].deathInfo.tillNext<=0&&(this.list[n].deathInfo.tillNext=null,this.list[n].send("frs",e.isOfficial&&e.isOfficial.rotationMaps||!e.hasHost())))},this.setTeam=function(t){if(!e.waitTimers&&e.mode.convTeam)t.team=e.mode.convTeam;else if(e.mode.teamOptions&&!e.mode.teamSort)t.team=1;else if(e.mode.friendly)t.team=1;else if(e.mode.clanWar)t.team=t.account&&t.account.clan?t.account.clan:1;else if(!t.team&&e.mode.teams&&!t.spectating)if(e.mode.multiTeam){let a={};for(var i=0;i<e.mode.multiTeam;i++)a[i+1]=0;for(i=0;i<this.list.length;++i)this.list[i].spectating||this.list[i].team&&a[this.list[i].team]++;var n=2;for(var s in a)a[s]<a[n]&&(n=parseInt(s));t.team=n}else{var a=0,r=0;for(i=0;i<this.list.length;++i)this.list[i].spectating||(1==this.list[i].team&&a++,2==this.list[i].team&&r++);t.team=a>=r?2:1}},this.activeCount=function(){for(var e=0,t=0;t<this.list.length;++t)this.list[t].active&&e++;return e},this.forcePos=function(){for(var e=0;e<this.list.length;++e){if(this.list[e].forcePos=!0,this.list[e].objInstances)this.list[e].objInstances.visible=!1,this.list[e].cnBSeen=!1}},this.storeState=function(e,t){e.stateHistory.unshift({time:t,h:e.height,ah:e.adjustedHeight,x:e.x.round(2),y:e.y.round(2),z:e.z.round(2),sV:e.stepVal,xD:e.xDire,yD:e.yDire,cV:Math.round(e.crouchVal)});for(var i=e.stateHistory.length-1;i>=0;--i)t-e.stateHistory[i].time>=a.stateHistory&&e.stateHistory.splice(i,1)},this.fetchState=function(t,i,n,a){if(e&&e.isSandbox){if(t.stateHistory.length){const e=t.stateHistory[0];return t.stateHistory.length=1,e}return{h:t.height,ah:t.adjustedHeight,x:t.x.round(2),y:t.y.round(2),z:t.z.round(2),sV:t.stepVal,xD:t.xDire,yD:t.yDire,cV:Math.round(t.crouchVal)}}n=n||0,a=a||0;for(var r,o=i?i.inputSTPrg:0,l=(i?i.inputSTime:0)+e.startTime+a,c=null,d=t.stateHistory.length,h=0;h<d;++h)if(l>=t.stateHistory[h].time){c=h;break}return null==c&&(c=d-1),c+=n,r=t.stateHistory[c+1],c=t.stateHistory[c],!n&&r&&c?{x:s.lerp(c.x,r.x,o),y:s.lerp(c.y,r.y,o),z:s.lerp(c.z,r.z,o),xD:s.lerpAngle(c.xD,r.xD,o),yD:s.lerpAngle(c.yD,r.yD,o),sV:s.lerp(c.sV,r.sV,o),cV:c.cV,h:c.h,ah:c.ah}:c},this.updateHeight=function(i){var n=e.config.thirdPerson||i.config&&(i.config.camOffX||i.config.camOffY||i.config.camOffZ),s=a.crouchDst*i.crouchVal;if(!t||i.renderYou){i.heightOld=i.height,i.height=a.playerHeight-s;let e=a.playerHeight-a.headScale+a.headScale*i.headMlt;i.adjustedHeight=e-s}if(t&&(!i.renderYou||n))for(var r,o=0;o<4;++o)r=!!i.crouchVal,i.legMeshes[o]&&!t.lowSpec&&(o<=1?i.legMeshes[o].visible=!r:(i.legMeshes[o].visible=r,i.legMeshes[o].position.y=a.legHeight-a.crouchDst+.5+(a.crouchDst-s))),i.shoeMeshes[o]&&!t.lowSpec&&(i.shoeMeshes[o].hide?i.shoeMeshes[o].visible=!1:i.shoeMeshes[o].visible=o<=1?!r:r)},this.updateMsh=function(i,n){if(i.objInstances){var s=e.config.thirdPerson||!e.controls||!e.controls.camType.isNormal||i.config&&(i.config.camOffX||i.config.camOffY||i.config.camOffZ),r=t.getPlayerWeaponId(i),o=i.currentSkin,l=null==i.weapon.attach&&!o.attachBypass||o.noAttach||!e.attach[i.attachIndex]?null:e.attach[i.attachIndex],c=l&&l.aimOffY+(i.weapon.aimOffY||0)||0;i.renderYou&&1!=t.weaponADSOffY[r]&&(c=(c||.1)*t.weaponADSOffY[r]),o.aimY&&(c+=o.aimY),i.weapon.aimY&&(c+=i.weapon.aimY),l&&o.attachAimY&&(c+=o.attachAimY);var d=i.renderYou&&!s,h=t.aimAnim[r]&&i.isYou?i.aimVal:1,u=i.weapon.animWhileAim?1:h,p=(1-(1-a.aimAnimMlt)*(1-h))*a.animMult*t.weaponBob[r],f=1-.8*i.crouchVal,m=(1-(1-h))*a.animMult,g=(1-(1-h)*(i.weapon.recoilYMA||1))*a.animMult;i.renderYou||(m=0);var v=1-(l&&l.zRec||i.weapon.recoilZM||.5)*(1-u),y=(1-(i.weapon.zRot||.3)*(1-u))*(i.weapon.zRM||1)*t.weaponBob[r],b=1-(i.weapon.jYMlt||1)*(1-u),w=1-.45*(1-u),x=.9*i.bobAnimY*b*t.weaponBob[r]*m,S=i.landBobY*(i.weapon.landBob||1)*.6*(1-.75*(1-u))*t.weaponBob[r];i.landBobYR!=S&&(i.landBobYR+=.1*(S-i.landBobYR));var M=i.landBobY*(i.weapon.landBob||1)*.1,k=1-.5*i.crouchVal,_=i.jumpRot*k*m*t.weaponBob[r];i.jumpRotM!=_&&(i.jumpRotM+=.08*(_-i.jumpRotM));var T=i.jumpBobY*(i.weapon.jumpYM||1)*m*k*t.weaponBob[r],C=1-.75*(1-u),I=1-(i.weapon.aimRecMlt||1)*(1-u),A=n?.05:a.stepAnim,R=Math.sin(i.stepVal)*A,P=Math.cos(2*i.stepVal)/2*A,E=-Math.sin(i.stepChase)*A,D=-Math.cos(2*i.stepChase)/2*A,O=s?0:1-h,L=(O<=.5?O:.5-(O-.5))*(i.weapon.aimLean||.5),j=i.swapTime/i.weapon.swapTime*t.weapSwapY[r],z=0;if(i.reloadTimer>0)z=(z=1-i.reloadTimer/(i.weapon.reload*(e.config.reSpd||1)*i.attributes.reload*(i.perks.includes(2)?.5:1)*(i.isKranked?e.mode.bonuses.reload:1)*(e.mode&&null!=e.mode.reloadMlt?e.mode.reloadMlt:1)))>.5?.5-(z-.5):z,z*=t.weapReloadY[r],z*=i.weapon.reloY;z*=i.renderYou?1:.3;var B=i.renderYou?s?.5*-R:0:2*-R,N=i.renderYou&&!s?Math.abs(.5*E)*m:Math.abs(6*R);if(i.config&&i.config.mdl&&(N=0),(i.isYou||-1==i.id||i.db)&&t.moveMesh(i.objInstances,i.x,i.y+N,i.z),i.config&&2==i.config.mdl&&(B=0),e.mode&&e.mode.teamOptions&&"Prop"==e.mode.teamOptions[i.team-1]?t.rotateMesh(i.objInstances,i.propRot?i.xDire:null==i.propRotSaved?0:i.propRotSaved):i.config&&1==i.config.mdl||t.rotateMesh(i.objInstances,i.xDire+B),P-=P*(i.crouchVal*a.crouchAnimMlt),R-=R*(i.crouchVal*a.crouchAnimMlt),!d){var F=a.crouchDst*i.crouchVal,H=a.crouchLean*i.crouchVal;t.rotateMesh(i.lowerBody,0,H+.5*i.yDire,0),i.upperBody&&(i.upperBody.rotation.x-=H),t.moveMesh(i.lowerBody,0,a.legHeight-F,0)}var U=s?.4:1;t.rotateMesh(i.upperBody,z*(-1*U),-.2*x+ +M+z*(-2.8*U)+i.yDire*(i.renderYou&&!s?1:.5)+(-Math.PI/4*j+i.recoilAnimY*a.recoilMlt)+(o.yRot||i.weapon.yRot||0),.35*t.weaponRot[r]),!d&&i.crouchVal&&i.isYou||t.moveMesh(i.upperBody,0,i.recoilAnimY*((i.weapon.recoilYM||.3)*g)+(i.height-a.cameraHeight-a.legHeight),0);for(var V=0;V<i.legMeshes.length;++V)t.lowSpec?i.legMeshes[V].visible=!1:i.legMeshes[V].rotation.x=R*(1==V||3==V?1:-1)*9+(V>1?-.6:0),t.lowSpec&&i.shoeMeshes[V]?i.shoeMeshes[V].visible=!1:i.shoeMeshes[V]&&(i.shoeMeshes[V].rotation.x=i.legMeshes[V].rotation.x);for(V=0;V<i.armMeshes.length;++V)if(i.armMeshes[V].position.z=R*(V?-1:1),i.armMeshes[V].rotation.x=i.armMeshes[V].xR||0,i.armMeshes[V].rotation.y=i.armMeshes[V].yR||0,i.armMeshes[V].position.x=i.armMeshes[V].xP||0,i.armMeshes[V].position.y=i.armMeshes[V].yP||0,1!=V)i.meleeAnim&&i.weaponGeos[i.loadoutIndex]&&(i.armMeshes[0].position.z+=i.meleeAnim.lArm||0,i.armMeshes[0].position.y-=.27*(i.meleeAnim.lArm||0),i.armMeshes[0].rotation.y+=.1*(i.meleeAnim.lArm||0),i.armMeshes[0].position.x-=.3*(i.meleeAnim.lArm||0));else if(i.armMeshes[1].rotation.z=i.armMeshes[V].zR+.12*i.crouchVal+-1*D+.2*i.jumpBobY,i.weaponGeos[i.loadoutIndex])if(i.weaponGeos[i.loadoutIndex].rotation.z=i.weaponGeos[i.loadoutIndex].zR,i.weaponGeos[i.loadoutIndex].position.x=i.weaponGeos[i.loadoutIndex].xP,i.weaponGeos[i.loadoutIndex].position.y=i.weaponGeos[i.loadoutIndex].yP,i.weaponGeos[i.loadoutIndex].position.z=i.weaponGeos[i.loadoutIndex].zP,i.weaponGeos[i.loadoutIndex].rotation.y=i.weaponGeos[i.loadoutIndex].yR,i.canThrow?i.canThrow&&!i.weaponGeos[i.loadoutIndex].visible&&(i.weaponGeos[i.loadoutIndex].visible=!0):i.weaponGeos[i.loadoutIndex].visible=!1,i.aimVal<1&&i.canThrow&&i.weapon.canThrow){var G=1-i.aimVal;i.swapTime&&(G=0),i.armMeshes[1].rotation.z-=1.3*G,i.armMeshes[1].position.x+=1.7*G,i.armMeshes[1].position.z+=1.8*G,i.armMeshes[1].position.y+=2.9*G,i.armMeshes[1].rotation.y+=1*G,i.armMeshes[1].rotation.x+=1.7*G}else i.inspecting&&i.canThrow?(i.armMeshes[1].rotation.z-=i.inspectAn.arZ,i.armMeshes[1].rotation.x-=i.inspectAn.arX,i.armMeshes[1].rotation.y-=i.inspectAn.arY,i.armMeshes[1].position.z+=i.inspectAn.apZ,i.armMeshes[1].position.x+=i.inspectAn.apX,i.armMeshes[1].position.y+=i.inspectAn.apY,i.currentMelee.statc||(i.weaponGeos[i.loadoutIndex].position.z+=i.inspectAn.wpZ,i.weaponGeos[i.loadoutIndex].position.y+=i.inspectAn.wpY,i.weaponGeos[i.loadoutIndex].rotation.y+=i.inspectAn.wrY,i.weaponGeos[i.loadoutIndex].rotation.z+=i.inspectAn.wpSp)):i.meleeAnim&&(i.armMeshes[1].rotation.z+=i.meleeAnim.armR||0,i.armMeshes[1].rotation.y+=(i.meleeAnim.armT||0)-.25*(i.meleeAnim.rArm||0),i.armMeshes[1].rotation.x+=i.meleeAnim.armS||0,i.armMeshes[1].position.x+=(i.meleeAnim.armM||0)+.3*(i.meleeAnim.rArm||0),i.armMeshes[1].position.z+=(i.meleeAnim.armE||0)+1.15*(i.meleeAnim.rArm||0),i.armMeshes[1].position.y+=(i.meleeAnim.armY||0)-.3*(i.meleeAnim.rArm||0),i.currentMelee.statc||(i.weaponGeos[i.loadoutIndex].rotation.z+=i.meleeAnim.weaR||0,i.weaponGeos[i.loadoutIndex].position.x+=i.meleeAnim.weaM||0,i.weaponGeos[i.loadoutIndex].rotation.y+=i.meleeAnim.flipW||0));if(i.weaponMeshes[i.loadoutIndex]&&i.weaponMeshes[i.loadoutIndex].flapMesh&&i.weapon.flap&&t.sniperFlapAnim){var W=3*D+2.8*i.recoilAnim-i.leanAnimZ-3*i.leanAnimX-1.8*i.landBobYR+x+.1*i.crouchVal;t.rotateMesh(i.weaponMeshes[i.loadoutIndex].flapMesh,i.weapon.flap.rot*i.swapTweenA+W,null,null)}var q=1.75*(1-.88*(1-h))*t.weaponBob[r],Y=i.weapon.xOff*(i.renderYou?t.weaponOffX[r]:1),K=i.weapon.yOff*(i.renderYou?t.weaponOffY[r]:1),X=i.weapon.zOff*(i.renderYou?t.weaponOffZ[r]:1),Z=i.weaponMeshes[i.loadoutIndex];if(t.rotateMesh(Z,i.inspectX+.2*i.jumpRotM+i.leanAnimX*w*t.weaponLean[r]*(i.weapon.leanMlt||1)+(.16*-E*m*f+.2*i.leanAnimZ)*p,1.5*-D*(d?0:1)+-Math.cos(i.idleAnim)*k*.01*q+(i.weapon.rotOff||0)*m+(o.rotOffA||i.weapon.rotOffA||0)*(1-m)-.35*(i.swapTweenR||0)*m+.4*-i.landBobYR+i.recoilTweenY*I+i.leanAnimY*w*t.weaponLean[r]*(i.weapon.leanMlt||1)+-.9*D*p,_+L+i.recoilTweenR*I+.7*i.leanAnimZ*y+-i.inspectX*(i.weapon.inspectR||0)+((i.weapon.cLean||0)*i.crouchVal*m+0*-E)*p),t.moveMesh(Z,i.recoilX*C+.2*(i.swapTweenR||0)-i.jumpRotM*m*1.3+-i.inspectX*(i.weapon.inspectM||0)+(.35*i.leanAnimZ-(i.weapon.cRot||0)*i.crouchVal*m+.5*R*f*m)*h*p+Y-(Y-i.weapon.xOrg)*O,i.recoilZ*C+.02*Math.sin(i.idleAnim)*q+i.recoilTweenYM*I+T+.5*S-1.5*x-(i.weapon.bomb?3*i.interProg:0)+(.85*P-(i.weapon.cDrop||0)*i.crouchVal*m)*p+K-(K-i.weapon.yOrg+(o&&o.yOrg||0)+c)*O,X-(X-(o.zOrg||i.weapon.zOrg))*O+i.recoilTweenZ+i.bobAnimZ*p+i.recoilAnim*(i.weapon.recoilZ||0)*v),Z&&Z.charmMesh&&i.weapon.charm){W=3*D+2.8*i.recoilAnim-i.leanAnimZ-3*i.leanAnimX-1.8*i.landBobYR+x+1.5*i.crouchVal,i.swapTweenA;t.rotateMesh(Z.charmMesh,-Math.PI-.3*Z.rotation.y,Math.max(3.8*-i.leanAnimX+.2*i.crouchVal*m+3.5*-x+5*i.landBobYR+2*-R,-.3),.2*i.yDire-1.5*i.recoilTweenY-4*i.recoilAnim)}}},this.playClip=function(i,n,r){if(i&&n&&i.active&&i.hasAnims)if(h){var o=a.clipNames.indexOf(n);if(o>=0)for(var l=0;l<this.list.length;++l)this.list[l]!=i&&(this.list[l].spectating||this.list[l].active&&s.getD3D(this.list[l].x,this.list[l].y,this.list[l].z,i.x,i.y,i.z)<(e.mode.viewDis||600))&&this.list[l].send("c",i.sid,o)}else t&&i.meshRef&&i.meshRef.visible&&i.meshRef.playClip&&i.meshRef.playClip(n,r)},this.updateEffects=function(e,i){e&&t&&e.isYou&&(e.drunkCnt+=.01*i*e.attributes.drunk,t.swayX=.1*Math.cos(e.drunkCnt)*e.attributes.drunk,t.swayY=.1*Math.sin(e.drunkCnt)*e.attributes.drunk)},this.itemEffects=function(e,t,i){var n=!1;e.effectTimer-=i,e.effectTimer<=0&&(e.effectTimer=500,n=!0),n&&e.currentBody&&null!=e.currentBody.particle&&c.effect(e.x+s.randInt(-2,2),e.y+e.height/2+s.randInt(-2,2),e.z+s.randInt(-2,2),0,0,e.currentBody.particle,t),n&&e.currentBack&&null!=e.currentBack.particle&&c.effect(e.x+s.randInt(-2,2),e.y+e.height/2+s.randInt(-2,2),e.z+s.randInt(-2,2),0,0,e.currentBack.particle,t),n&&e.currentDye&&null!=e.currentDye.particle&&c.effect(e.x+s.randInt(-2,2),e.y+e.height/2+s.randInt(-4,4),e.z+s.randInt(-2,2),0,0,e.currentDye.particle,t),n&&e.currentShoes&&null!=e.currentShoes.particle&&c.effect(e.x+s.randInt(-2,2),e.y+.1,e.z+s.randInt(-2,2),0,0,e.currentShoes.particle,t)},this.generateMeshData=function(t,i,n){return t?{fileExt:t.fileExt,setLayer:i?void 0:1,animS:t.animS,hasAnim:t.hasAnim,local:t.local,localM:t.localM,src:e.store.types[t.assetType||t.type]+t.id,texSrc:t.tex?e.store.types[t.assetType||t.type]+t.id+"_"+t.tex:null,frames:t.frames,frameT:t.frameT,rotT:t.rotT,movT:t.movT,movE:t.movE,movD:t.movD,sameEnv:t.sameEnv,env:t.env||t.sameEnv?t.env||3:void 0,sameGlow:t.sameGlow,glowText:t.glow,emissive:!t.glow&&!t.sameGlow||t.noEmis?null:t.emiss||"#ffffff",emissInt:t.glowInt,pulsT:t.pulsT,transparent:null!=t.opac||t.trans,rAnim:t.rAnim,rAnimA:t.rAnimA,rAnimT:t.rAnimT,rAnimM:t.rAnimM,rgb:t.rgb||!!n&&n.rgb,rgbS:t.rgbS||(n?n.rgbS:0),rgbT:t.rgbT,useWireframe:t.wire,side:t.side||0,opacity:t.opac||1,shaderNum:t.shaderNum,color:t.color||null,alphaTest:t.alpha||0}:{}},this.generateMeshes=function(i,n,r=!1,o){i.leftHand=!!t&&t.leftHand,i.meshRef=null,e.config.noCosm&&(i.dyeIndex=-1,i.bodyIndex=-1,i.backIndex=-1,i.waistIndex=-1,i.hatIndex=-1,i.headIndex=-1,i.faceIndex=-1,i.shoeIndex=-1,i.petIndex=-1,i.wristIndex=-1,i.skinColIndex=-1),e.mode&&e.mode.teamOptions&&"Prop"==e.mode.teamOptions[i.team-1]&&(i.petIndex=-1);var{dyeIndex:l,bodyIndex:u,backIndex:p,waistIndex:f,hatIndex:m,headIndex:g,faceIndex:v,shoeIndex:y,petIndex:b,wristIndex:w,skinColIndex:x,meleeIndex:S}=i,M=i.config.colors,k=a.skinColors[i.skinColIndex]?a.skinColors[i.skinColIndex].col:s.isHexColor(i.skinColIndex)?i.skinColIndex:M[0],_=M[1],T=M[5],C=M[2],I=M[6]||M[2],A=M[3],R=s.isHexColor(i.hairCol)?i.hairCol:M[4],P={};-1==l||h||((P=e.store.skins[l])?P.useSkin?(_=k,T=k,C=k,I=k,A=k):(null!=P.skinCol&&(k=P.skinCol),Array.isArray(k)&&(k=s.getRandom(k)),null!=P.shirtCol&&(_=P.shirtCol),Array.isArray(_)&&(_=s.getRandom(_)),null!=P.sleeveCol&&(T=P.sleeveCol),Array.isArray(T)&&(T=s.getRandom(T)),null!=P.pantsCol&&(C=P.pantsCol),Array.isArray(C)&&(C=s.getRandom(C)),I=null==P.waistCol?C:P.waistCol,Array.isArray(I)&&(I=s.getRandom(I)),null!=P.shoeCol&&(A=P.shoeCol),Array.isArray(A)&&(A=s.getRandom(A)),null!=P.hairCol&&(R=P.hairCol),Array.isArray(R)&&(R=s.getRandom(R))):P={});var E=o&&(e.config.thirdPerson||i.config&&(i.config.camOffX||i.config.camOffY||i.config.camOffZ)||!n);if(i.meshHoldObj=t.genObj3D(0,0,0),i.objInstances=t.genObj3D(i.x,i.y,i.z,i.id),i.objInstances.add(i.meshHoldObj),!h){if(e.mode&&e.mode.teamOptions&&e.mode.modelOverrides&&e.mode.modelOverrides[e.mode.teamOptions[i.team-1]]){var D=e.mode.modelOverrides[e.mode.teamOptions[i.team-1]];D.noCosmetics&&(u=-1,p=-1,f=-1,m=-1,g=-1,v=-1,y=-1,S=-1,w=-1,-1,l=-1,-1),D.hatIndex&&(i.hatIndex=D.hatIndex),D.headIndex&&(i.headIndex=D.headIndex),D.bodyIndex&&(i.bodyIndex=D.bodyIndex),D.backIndex&&(i.backIndex=D.backIndex),D.waistIndex&&(i.waistIndex=D.waistIndex),D.faceIndex&&(i.faceIndex=D.faceIndex),D.shoeIndex&&(i.shoeIndex=D.shoeIndex),D.wristIndex&&(i.wristIndex=D.wristIndex),D.petIndex&&(i.petIndex=D.petIndex),D.dyeIndex&&(i.dyeIndex=D.dyeIndex),D.meleeIndex&&(i.meleeIndex=D.meleeIndex),D.skinColIndex&&(i.skinColIndex=D.skinColIndex),D.skinColor&&(k=D.skinColor),D.shirtColor&&(_=D.shirtColor),D.pantsColor&&(C=D.pantsColor),(D.waistColor||D.pantsColor)&&(I=D.waistColor||D.pantsColor),D.shoeColor&&(A=D.shoeColor),D.sleeveColor&&(T=D.sleeveColor),D.hairColor&&(R=D.hairColor)}i.isJuggernaut&&(u=4908,f=4911,g=4909,y=4910)}if(i.config.mdlFP||E&&!i.config.mdlFP)if(i.config&&i.config.mdl&&o){var O=i.assetTxt;O||=i.config.aID||"";var L=(i.config.animS,i.config.animS||1);if(1==i.config.mdl){if(t){var j=O&&parseInt(O.replace(/[^\d]/g,""))||null;t.loadSprite({src:j?j+"/texture":"sprite_0",color:"#ffffff",mat:e.THREE.SpriteMaterial,depthWrite:!0,transparent:!0,alphaTest:.02,asset:null!=j},i.objInstances)}}else if(2==i.config.mdl&&t){var z=!!O.includes("g"),B=!!O.includes("q"),N=!!O.includes("f");i.meshRef=t[z||B||N?"loadAnimMesh":"loadMesh"]({isMdl:!0,fileExt:B?"glb":z?"gltf":N?"fbx":null,src:O.replace(/[^\d]/g,"")+"/model",color:"#ffffff",vertexColors:!0,startAnim:z||B||N?"Idle":null,emissive:O.includes("e")?"#ffffff":null,normal:O.includes("n"),spec:O.includes("s"),asset:O.replace(/[^\d]/g,""),animS:L},0,(z||B||N?0:a.playerHeight/2)+(i.config.mdlYO||0)+(r&&i.config.mdPY||1),0,s.toRad(i.config.mdlDr||0),(i.config.mdlS||1)*(r&&i.config.mdPS||1),i.objInstances,!1)}i.assetTxt=null}else if(e.mode&&e.mode.teamOptions&&"Prop"==e.mode.teamOptions[i.team-1]&&o){var F=d.prefabs[i.propID];t&&t.loadMesh({isMdl:!0,src:F.name.toLowerCase()+"_0",emissive:"ACIDBARREL"==F.name?"#ffffff":null},0,F.scale+(F.CPY||0),0,0,F.scale,i.objInstances,!1)}else{var H,U,V,G,W,q,Y=!1;m>=0&&E&&!h&&(U=e.store.skins[m]),g>=0&&E&&!h&&(V=e.store.skins[g]),u>=0&&E&&!h&&(G=e.store.skins[u]),p>=0&&E&&!h&&(W=e.store.skins[p]),w>=0&&!h&&(q=e.store.skins[w]);var K=U&&U.noHead||V&&V.noHead,X=U&&U.noHair||V&&V.noHair;if(i.lowerBody=t.genObj3D(0,a.legHeight,0),E&&(i.headObj=t.genHead(i.renderYou,{hairCol:R,skinCol:k,uvScale:P.uvScale,rgb:P.rgb,rgbS:P.rgbS||0,noHead:K,noHair:X,transparent:null!=P.opac,opacity:P.opac||1,texSrc:P.tex?P.tex:null,rotT:P.rotT,movT:P.movT,movE:P.movE,movD:P.movD,emissive:P.glow||P.sameGlow?P.emiss||"#ffffff":null,color:P?P.color:null,sameGlow:P.sameGlow,shaderNum:P?P.shaderNum:null,video:P?P.video:void 0,projection:P?P.projection:void 0,repeatY:P.tileS||0,repeatX:P.tileS||0}),i.lowerBody.add(i.headObj),i.lowerBody.add(t.genBody(i.renderYou,{shirtCol:_,pantsCol:C,waistCol:I,skinCol:k,uvScale:P.uvScale,rgb:P.rgb,rgbS:P.rgbS||0,noBody:!!G&&G.noBody,transparent:null!=P.opac,opacity:P.opac||1,texSrc:P.tex?P.tex:null,rotT:P.rotT,movT:P.movT,movE:P.movE,movD:P.movD,emissive:P.glow||P.sameGlow?P.emiss||"#ffffff":null,color:P?P.color:null,sameGlow:P.sameGlow,shaderNum:P?P.shaderNum:null,video:P?P.video:void 0,projection:P?P.projection:void 0,repeatY:P.tileS||0,repeatX:P.tileS||0}))),i.upperBody=t.genObj3D(0,0,0),i.lowerBody.add(i.upperBody),G&&!h&&(i.bodyMesh=t.genObj3D(0,(a.playerHeight-a.legHeight-a.headScale)/2-(G.sitOff||0),-(G.sitOffZ||0)),i.lowerBody.add(i.bodyMesh),t[G.hasAnim?"loadAnimMesh":"loadMesh"](this.generateMeshData(G,E,P),0,0,0,Math.PI/2,2.1*(G.sclMlt||1),i.bodyMesh)),W&&!h&&(i.backMesh=t.genObj3D(0,(a.playerHeight-a.legHeight-a.headScale)/2-(W.sitOff||0),-(W.sitOffZ||0)),i.lowerBody.add(i.backMesh),t[W.hasAnim?"loadAnimMesh":"loadMesh"](this.generateMeshData(W,E,P),0,0,0,Math.PI/2,2.1*(W.sclMlt||1),i.backMesh)),f>=0&&E&&!h&&(H=e.store.skins[f],i.waistMesh=t.genObj3D(0,(a.playerHeight-a.legHeight-a.headScale-2)/2-(H.sitOff||0),-(H.sitOffZ||0)),i.lowerBody.add(i.waistMesh),H.noLegs&&(Y=!0),t[H.hasAnim?"loadAnimMesh":"loadMesh"](this.generateMeshData(H,E,P),0,0,0,Math.PI/2,2.1*(H.sclMlt||1),i.waistMesh)),U&&!h&&(i.hatMesh=t.genObj3D(0,a.playerHeight-a.legHeight-(U.sitOff||0),-(U.sitOffZ||0)),i.lowerBody.add(i.hatMesh),t[U.hasAnim?"loadAnimMesh":"loadMesh"](this.generateMeshData(U,E,P),0,0,0,Math.PI/2,2.1*(U.sclMlt||1),i.hatMesh)),V&&!h&&(i.headMesh=t.genObj3D(0,a.playerHeight-a.legHeight-(V.sitOff||0),-(V.sitOffZ||0)),i.lowerBody.add(i.headMesh),t[V.hasAnim?"loadAnimMesh":"loadMesh"](this.generateMeshData(V,E,P),0,0,0,Math.PI/2,2.1*(V.sclMlt||1),i.headMesh)),i.faceIndex>=0&&E&&!h&&(H=e.store.skins[v],i.faceMesh=t.genObj3D(0,a.playerHeight-a.legHeight-(H.sitOff||0),-(H.sitOffZ||0)),i.lowerBody.add(i.faceMesh),t[H.hasAnim?"loadAnimMesh":"loadMesh"](this.generateMeshData(H,E,P),0,0,0,Math.PI/2,1*(H.sclMlt||1),i.faceMesh)),E&&!Y)for(var Z,J=s.randInt(0,1),Q=0;Q<4;++Q){if(Z=!1,y>=0&&Q<2&&!h){Z=(H=e.store.skins[y]).legLen,H.randomLeg&&J!=Q&&(Z=!1);var $=a.legHeight-(Q>1?a.crouchDst+.5:0),ee=t.genObj3D(a.legScale/2*(1==Q||3==Q?-1:1),$-(H.sitOff||0)-.01,-(H.sitOffZ||0));t[H.hasAnim?"loadAnimMesh":"loadMesh"](this.generateMeshData(H,E,P),0,0-$,0,Math.PI/2,1*(H.sclMlt||1),ee),i.shoeMeshes.push(ee),Q>=2&&t.rotateMesh(i.shoeMeshes[Q],2==Q?-Math.PI/6:Math.PI/8,0,0),i.shoeMeshes[Q].hide=H.randomLeg&&J!=Q,i.shoeMeshes[Q].visible=!i.shoeMeshes[Q].hide&&Q<=1,i.meshHoldObj.add(i.shoeMeshes[Q])}i.legMeshes.push(t.genLeg(1==Q||3==Q,C,A,{crouch:Q>1,legLen:!!Z&&Z,rgb:!!P&&P.rgb,rgbS:P?P.rgbS:0,uvScale:P.uvScale,transparent:null!=P.opac,opacity:P.opac||1,texSrc:P.tex?P.tex:null,rotT:P.rotT,movT:P.movT,movE:P.movE,movD:P.movD,emissive:P.glow||P.sameGlow?P.emiss||"#ffffff":null,color:P?P.color:null,sameGlow:P.sameGlow,shaderNum:P?P.shaderNum:null,video:P?P.video:void 0,projection:P?P.projection:void 0,repeatY:P.tileS||0,repeatX:P.tileS||0})),Q>=2&&t.rotateMesh(i.legMeshes[Q],2==Q?-Math.PI/6:Math.PI/8,0,0),i.legMeshes[Q].visible=Q<=1,i.meshHoldObj.add(i.legMeshes[Q])}if(o)for(Q=0;Q<i.ammos.length;++Q){var te=t.genObj3D(0,0,0),ie=e.players.getWeapon(i,Q),ne=e.store.skins[ie.melee?S:i.getSkinForLoadout(Q)];!ie.melee&&ne&&ne.weapon-1!=i.loadout[Q]&&(ne=null),ne&&!ie.upgraded||(ne={},ie.altSkin&&(ne=ie.altSkin||{}));var se=null==ie.attach&&!ne.attachBypass||ne.noAttach||!e.attach[i.attachIndex]?null:e.attach[i.attachIndex];if(!h&&i.isYou&&ie.ammo){te.muzzles=[],te.casings=[];for(var ae=0;ae<2;++ae)ae&&!ie.akimbo||(te.muzzles.push(new e.THREE.Sprite),te.muzzles[ae].position.z=-(ie.muzOff||0),te.muzzles[ae].position.y=ie.muzOffY||0,te.muzzles[ae].visible=!1,te.muzzles[ae].static=!0,c.particles.push(te.muzzles[ae]),te.add(te.muzzles[ae]),te.casings.push(t.genObj3D(ae?2*-ie.xOff:0,ie.caseYOff||0,ie.caseZOff||0)),te.add(te.casings[ae]));te.muzzleFlash=t.genObj3D(0,.4,0),te.muzzles[0].add(te.muzzleFlash)}if(ie.src||!i.renderYou){var re=t.genArms(ie,null,!E,{shirtCol:_,sleeveCol:T,skinCol:k,armS:1,uvScale:P.uvScale,noRightHand:!!ne.noRightHand,leftHoldY:ne.leftHoldY,leftHoldX:ne.leftHoldX,leftHoldZ:ne.leftHoldZ,rightHoldY:ne.rightHoldY,rightHoldZ:ne.rightHoldZ,rightHoldX:ne.rightHoldX,noSleeve:P&&P.noSleeve||i.config.noSleeve,noLeftSleeve:q&&q.noLeftSleeve,rgb:!!P&&P.rgb,rgbS:P?P.rgbS:0,transparent:null!=P.opac,opacity:P.opac||1,texSrc:P.tex?P.tex:null,rotT:P.rotT,movT:P.movT,movE:P.movE,movD:P.movD,emissive:P.glow||P.sameGlow?P.emiss||"#ffffff":null,color:P?P.color:null,sameGlow:P.sameGlow,shaderNum:P?P.shaderNum:null,video:P?P.video:void 0,projection:P?P.projection:void 0,repeatY:P.tileS||0,repeatX:P.tileS||0},q&&!h&&i.isYou);if(te.add(re.mesh),i.mergedArmMeshes[Q]=re.mesh,q&&!h&&i.isYou){let n=re.vecs.l,s=re.mesh.geometry.attributes.position.array;const a=(new e.THREE.Box3).setFromBufferAttribute(new e.THREE.Float32BufferAttribute(s.slice(n.startP,n.endP),3)).getCenter(new e.THREE.Vector3);i.wristMeshes[Q]=t.genObj3D(a.x,a.y,a.z),i.wristMeshes[Q].quaternion.copy(n.quat),re.mesh.add(i.wristMeshes[Q]),t[q.hasAnim?"loadAnimMesh":"loadMesh"](this.generateMeshData(q,E,P),0,0,0,[-Math.PI/2,-Math.PI/2,0],1*(q.sclMlt||1),i.wristMeshes[Q])}}else{for(ae=0;ae<2;++ae)re=t.genArms(ie,ae+1,!E,{shirtCol:_,sleeveCol:T,skinCol:k,armS:1,uvScale:P.uvScale,noRightHand:!!ne.noRightHand,rgb:!!P&&P.rgb,rgbS:P?P.rgbS:0,transparent:null!=P.opac,opacity:P.opac||1,noSleeve:P&&P.noSleeve||i.config.noSleeve,noLeftSleeve:q&&q.noLeftSleeve,texSrc:P.tex?P.tex:null,rotT:P.rotT,movT:P.movT,movE:P.movE,movD:P.movD,emissive:P.glow||P.sameGlow?P.emiss||"#ffffff":null,color:P?P.color:null,sameGlow:P.sameGlow,shaderNum:P?P.shaderNum:null,video:P?P.video:void 0,projection:P?P.projection:void 0,repeatY:P.tileS||0,repeatX:P.tileS||0}),te.add(re.mesh),i.armMeshes.push(re.mesh);q&&!h&&i.isYou&&(i.wristMeshes[Q]=t.genObj3D(-1.55-(q.sitOffX||0),-1.4-(q.sitOff||0),1-(q.sitOffZ||0)),i.armMeshes[0].add(i.wristMeshes[Q]),t[q.hasAnim?"loadAnimMesh":"loadMesh"](this.generateMeshData(q,E,P),0,0,0,[q.sxRot||0,q.syRot||0,q.szRot||0],1*(q.sclMlt||1),i.wristMeshes[Q]))}if(i.weaponMeshes.push(te),i.weaponMeshes[Q].visible=!1,i.upperBody.add(i.weaponMeshes[Q]),h||!ie.melee||!i.renderYou&&e.mode&&e.mode.teamOptions&&"Infected"==e.mode.teamOptions[i.team-1]||(ne.holdTyp?ne.holdTyp:(i.weaponGeos[Q]=t[ne.hasAnim?"loadAnimMesh":"loadMesh"]({fileExt:ne.fileExt,setLayer:E?void 0:1,animS:ne.animS,hasAnim:ne.hasAnim,inspectAnim:ne.inspectAnim,local:ie.local||ne.local,localM:ie.localM||ne.localM,src:"melee/melee_"+(ne.id||0),texSrc:e.mode&&e.mode.teamOptions&&"Stalker"==e.mode.teamOptions[i.team-1]?"melee/melee_0_5":ne.pat?ne.tex:ne.tex?"melee/melee_"+(ne.id||0)+"_"+ne.tex:"",sameEnv:ne.sameEnv,env:ne.env||ne.sameEnv?ne.env||3:void 0,sameGlow:ne.sameGlow,glowText:ne.glow||ne.sameGlow,emissive:ne.glow||ne.sameGlow?ne.emiss||"#ffffff":null,emissInt:ne.glowInt,rotT:ne.rotT,movT:ne.movT,movE:ne.movE,movD:ne.movD,pulsT:ne.pulsT,minGlo:ne.minGlo,frameT:ne.frameT,tFilter:e.THREE.LinearFilter,frames:ne.frames,transparent:null!=ne.opac||ie.seeThrough||ne.trans,mat:!r&&!i.renderYou||ne.noShine?null:t.weaponShine?e.THREE.MeshPhongMaterial:e.THREE.MeshLambertMaterial,uv2:!0,specular:2697513,shininess:100,rgb:ne.rgb,rgbS:ne.rgbS,rgbT:ne.rgbT,useWireframe:ne.wire,side:ne.side||0,opacity:ne.opac||1,alphaTest:ne.alpha||0,shaderNum:ne.shaderNum,video:ne.video,projection:ne.projection,color:ne.color||null},(i.renderYou?.9:1.7)+(i.renderYou?ne.sxOff||0:ne.osxOff||0),(i.renderYou?-.95:-.4)+(i.renderYou?ne.syOff||0:ne.osyOff||0),(i.renderYou?.72:1.2)+(i.renderYou?ne.szOff||0:ne.oszOff||0),[-Math.PI/3.5,i.renderYou?.3+(ne.flip?Math.PI:0):Math.PI/2,!i.renderYou&&ne.oFlip?-Math.PI/1e-5:-.9*Math.PI+(i.renderYou&&ne.sxRot||0)],ne.sclMlt||.9,i.armMeshes[1]?i.armMeshes[1]:i.weaponMeshes[Q]),i.armMeshes[1]&&(i.armMeshes[1].yR=i.armMeshes[1].rotation.y,i.renderYou?(i.armMeshes[1].zR=i.armMeshes[1].rotation.z=-.3,i.armMeshes[1].xR=i.armMeshes[1].rotation.x=-.4,i.armMeshes[1].xP=i.armMeshes[1].position.x=.4,i.armMeshes[1].yP=i.armMeshes[1].position.y=.3):(i.armMeshes[1].zR=i.armMeshes[1].rotation.z=.3,i.armMeshes[1].yP=i.armMeshes[1].position.y=-.4,i.armMeshes[1].xR=i.armMeshes[1].rotation.x,i.armMeshes[1].xP=i.armMeshes[1].position.x=-.2),i.armMeshes[0].xP=i.armMeshes[0].position.x=.3,i.armMeshes[0].yP=i.armMeshes[0].position.y=-.5,i.armMeshes[0].zR=i.armMeshes[0].rotation.z=-.4,i.armMeshes[0].yR=i.armMeshes[0].rotation.y)),e.mode&&e.mode.noKnives&&(i.weaponGeos[Q].visible=!1)),!h&&ie.src){var oe=i.getSkinForLoadout(Q)>=0&&(ne.glow||ne.sameGlow);for(ae=0;ae<2;++ae)ae&&!ie.akimbo||t[ne.hasAnim?"loadAnimMesh":"loadMesh"]({fileExt:ne.fileExt,setLayer:E?void 0:1,animS:ne.animS,hasAnim:ne.hasAnim,inspectAnim:ne.inspectAnim,local:ie.local||ne.local,localM:ie.localM||ne.localM,src:"weapons/"+ie.src+(null==ne.mid?"":"_"+ne.mid),texSrc:null==ne.mid?ne.tex?ne.tex:ne&&null!=ne.id?"weapons/skins/"+ie.src+"_"+ne.id:null:s.getReModel(e.store,ne),tFilter:e.THREE.LinearFilter,mat:!r&&!i.renderYou||ne.noShine?null:t.weaponShine?e.THREE.MeshPhongMaterial:e.THREE.MeshLambertMaterial,frames:ne.frames,frameT:ne.frameT,pulsT:ne.pulsT,minGlo:ne.minGlo,shadows:t.highResShad,rotT:ne.rotT,movT:ne.movT,movE:ne.movE,movD:ne.movD,repeatY:ne.tileS||0,repeatX:ne.tileS||0,sameEnv:ne.sameEnv,env:ne.env||ne.sameEnv?ne.env||3:void 0,sameGlow:ne.sameGlow,glowText:oe,uv2:!0,ao:ne.ao||n&&!ie.noAo,shininess:ne.noShine?ne.shine||ie.shine||60:0,specular:2697513,transparent:null!=ne.opac||ie.seeThrough||ne.trans,emissive:!ie.transp&&!oe||ne.noEmis?null:ne.emiss||"#ffffff",emissInt:ne.glowInt,rgb:ne.rgb,rgbS:ne.rgbS,rgbT:ne.rgbT,useWireframe:ne.wire,side:ie.side||ne.side||0,opacity:ne.opac||1,shaderNum:ne.shaderNum,video:ne.video,projection:ne.projection,color:ne.color||null,alphaTest:ne.alpha||0,normal:ne.normal||null,spec:ne.spec||null,metalness:ne.metalness||null,roughness:ne.roughness||null,displacement:ne.displacement||null,bump:ne.bump||null,outlineMesh:null==ne.outline?void 0:ne.outline,outlineScale:ne.outlineS?ne.outlineS:void 0},1==ae?-2*ie.xOff:0,ne.yOff||ie.wyOff||0,ne.zOff||ie.wzOff||0,ie.rot||Math.PI/2,ne.mScl||ie.scale,i.weaponMeshes[Q])}var le=e.store.skins[i.charms[Q]];if(!h&&ie.charm&&le&&!ne.noCharm){var ce=t.loadMesh({src:"charms/charm_mount_0",tFilter:e.THREE.LinearFilter,mat:t.weaponShine?e.THREE.MeshPhongMaterial:e.THREE.MeshLambertMaterial,shininess:60,transparent:!0},ne.charmMXOff||ie.charmMXOff,ne.charmMYOff||ie.charmMYOff,ne.charmMZOff||ie.charmMZOff,Math.PI/2,ie.charmMScl*(ne.charmMScl||1),i.weaponMeshes[Q]);i.weaponMeshes[Q].charmMesh=t.loadMesh({local:le.local,localM:le.localM,src:"charms/charm_"+le.id,texSrc:le.tex?"charms/charm_"+le.id+"_"+le.tex:null,tFilter:e.THREE.LinearFilter,mat:t.weaponShine?e.THREE.MeshPhongMaterial:e.THREE.MeshLambertMaterial,shininess:60,transparent:!0,sameGlow:le.sameGlow,glowText:le.glow||le.sameGlow,emissive:!le.glow&&!le.sameGlow||le.noEmis?null:le.emiss||"#ffffff",frames:le.frames,frameT:le.frameT,pulsT:le.pulsT,alphaTest:le.alpha||0},ne.charmXOff||ie.charmXOff,(ne.charmYOff||ie.charmYOff)+.17,ne.charmZOff||ie.charmZOff,-Math.PI,ie.charmScl*(ne.charmScl||1),ce)}if(!h&&n&&ie.flap&&t.sniperFlap&&null==ne.mid&&!ne.hasAnim&&(i.weaponMeshes[Q].flapMesh=t.loadMesh({src:"attach/"+ie.flap.src,tFilter:e.THREE.LinearFilter,mat:t.weaponShine?e.THREE.MeshPhongMaterial:e.THREE.MeshLambertMaterial,shininess:60,transparent:!0},ie.flap.xOff,ie.flap.yOff,ie.flap.zOff,Math.PI/2,ie.flap.scl,i.weaponMeshes[Q])),!h&&se&&(n||r)){var de=0;se.yOff&&se.yOff[ie.id]&&(de=se.yOff[ie.id]),t.loadMesh({src:"attach/"+se.src,tFilter:e.THREE.LinearFilter,shininess:60,side:se.side||0,mat:r||i.renderYou?t.weaponShine?e.THREE.MeshPhongMaterial:e.THREE.MeshLambertMaterial:null,specular:2697513,transparent:!0},0,-(ie.yOrg||0)+(ne.attachYOff||ie.attachYOff||0)-de,-(ne.attachZOff||ie.attachZOff||0)-(se.zOff||0),Math.PI/2,ne.attachScale||se.scale,i.weaponMeshes[Q])}}if(i.meshHoldObj.add(i.lowerBody),!h){E||i.objInstances.traverse((function(e){e.layers.set(1)}))}}return i.leftHand&&i.upperBody.applyMatrix4(t.mirroredMatrix),h||(i.petHolder=t.genObj3D(3,i.height,0),i.objInstances.add(i.petHolder)),i.objInstances},this.pickProp=function(e){},this.regenMeshes=function(i){if(i.objInstances&&this.disposeMesh(i,!0),t){var n=!e||!e.disableMeshes;this.generateMeshes(i,i.renderYou,!1,n),t.add(i.objInstances),i.petIndex>=0&&n&&e.pets.add(i)}e.players.updateHeadSize(i,i.headMlt);var s=i.config.aID||"";i.hasAnims=!!s.includes("g")||!!s.includes("q")||!!s.includes("f"),this.swapWeapon(i,0,!0),i.isYou&&t&&this.resetAim()},this.hideAll=function(){for(var e=0;e<this.list.length;++e){if(this.list[e].active&&this.list[e].objInstances&&(this.list[e].forcePos=!this.list[e].latestData,this.list[e].latestData=!1,!this.list[e].isYou))this.list[e].objInstances.visible=!1}},this.clear=function(){if(t)for(var e=0;e<this.list.length;++e)this.disposeMesh(this.list[e]);this.list.length=0},this.toggleLOD=function(t,i){var n=e&&e.hidePlayers;t&&t.isBot&&(n=!1),!n&&e&&e.useLOD&&t.latestData&&(t.objInstances&&(t.objInstances.visible=i),t.lodActive=!i)},this.disposeMesh=function(i){t&&(t.remove(i.objInstances),e.pets.remove(i),i.buildHelper&&(t.remove(i.buildHelper),t.remove(i.buildHelperN),i.buildHelper=null,i.buildHelperN=null)),i.objInstances=null,i.meshHoldObj=null,i.headObj=null,i.faceMesh=null,i.hatMesh=null,i.headMesh=null,i.bodyMesh=null,i.backMesh=null,i.waistMesh=null,i.wristMeshes.length=0,i.weaponMeshes.length=0,i.weaponGeos={},i.mergedArmMeshes.length=0,i.armMeshes.length=0,i.legMeshes.length=0,i.shoeMeshes.length=0},this.isValidProp=function(e){return!!d.prefabs[e]},this.randomProp=function(){return s.getRandom(d.props).id},this.updateProp=function(t,i,n){if(t&&t.active){null!=i&&(t.propID=i);var s=d?d.prefabs[i].scale:0,a=d&&d.prefabs[i].CP||0;t.height=s+a,t.adjustedHeight=s+a,t.scale=s+a,n&&this.regenMeshes(t),h&&e.broadcast("up",t.sid,i,!1,t.propSwitches)}},this.updateHeadSize=function(t,i,n){if(i>1||n){if(t.headMlt=n?1:i,t.headObj&&t.headMlt){let i=e&&e.mode&&e.mode.headMlt||.1,n=Math.round((t.headMlt-1)/i);t.headObj.scale.setScalar(t.headMlt),t.headObj.position.y=-.48*n;let s=(a.headScale*t.headMlt-a.headScale)/2;if(t.faceMesh){t.faceMesh.scale.setScalar(t.headMlt);let i=(e.store.skins[t.faceIndex].sitOff||0)/t.headMlt;t.faceMesh.position.y=a.playerHeight-a.legHeight+s-i}if(t.hatMesh){t.hatMesh.scale.setScalar(t.headMlt);let i=e.store.skins[t.hatIndex].sitOff||0;t.hatMesh.position.y=a.playerHeight-a.legHeight+s-i}if(t.headMesh){t.headMesh.scale.setScalar(t.headMlt);let i=e.store.skins[t.headIndex].sitOff||0;t.headMesh.position.y=a.playerHeight-a.legHeight+s-i}}e.players.updateHeight(t)}},this.remove=function(t){var i=this.indexBySid(t);if(i>=0){e.isServer&&this.list[i]&&(e.dropFlag(this.list[i].flag),this.dropWeapon(this.list[i],!0));var n=this.list[i].id;if(this.list[i].objInstances&&this.disposeMesh(this.list[i]),this.list.splice(i,1),e.isServer){for(var s=this.list.length-1;s>=0;--s)(i=this.list[s].sentTo.indexOf(n))>=0&&this.list[s].sentTo.splice(i,1);e.broadcast("2",t),this.syncLeaders(!0)}"undefined"!=typeof window&&"updateWindow"in window&&window.updateWindow(23)}},this.resetMovVals=function(t){var i=e.movement[t.config.movSch||0];if(i&&i.sendVals)for(var n=0;n<i.sendVals.length;++n)t[i.sendVals[n]]=0},this.add=function(i,n,a,r,l,c,d,u,p,f,m,g,v,y,b,w,x,S,M,k,_,T,C,I,A,R,P,E,D,O,L,j,z,B,N,F,H,U){for(var V,G=0;G<this.list.length;++G)if(this.list[G].id==i){V=this.list[G];break}V?(V.weaponMeshes.length=0,V.weaponGeos={},V.legMeshes.length=0,V.shoeMeshes.length=0,V.armMeshes.length=0,V.mergedArmMeshes.length=0,V.wristMeshes.length=0):((V=new o(i,this,e,h)).sid=n||s.generateSID(this.list)+(H?1e4:0),this.list[this.list._push?"_push":"push"](V));var W=!e||!e.disableMeshes;c||="Guest_"+V.sid,V.init(l,a,r,c,P,E),V.tmpAccountName=O,this.isServer&&null!=e.mode&&this.setTeam(V),R&&(V.team=R),V.skins=u||[-1,-1],V.charms=B||[-1,-1],V.faceIndex=p,V.shoeIndex=f,V.hatIndex=m,V.headIndex=g,V.bodyIndex=v,V.backIndex=y,V.waistIndex=b,V.petIndex=w,V.wristIndex=x,V.meleeIndex=S,V.skinColIndex=M,V.hairCol=k,V.dyeIndex=_,V.pcStatIndex=C,V.attachIndex=T,V.secIndex=I,V.alias=L||c,V.isJuggernaut=j,V.headMlt=z,V.userIP=U,V.upgrades=N,V.isBot=F,V.setClass(e,d,I,!!t),this.resetMovVals(V);var q=e.mode&&e.mode.unrestrictedWeapons;!D&&e.mode.startingLoadout&&(D=e.mode.startingLoadout),D&&V.updateLoadout(e,V.loadoutIndex,!1,D,q?[...V.ammos]:void 0,q?[...V.reserveAmmos]:void 0,q?[...V.upgrades]:void 0),e.mode&&e.mode.objWep&&V.updateLoadout(e,V.loadoutIndex,!1,[e.activeObjective]),t&&(this.generateMeshes(V,V.renderYou,!1,W),t.add(V.objInstances),V.petIndex>=0&&W&&e.pets.add(V)),e.players.updateHeadSize(V,V.headMlt);var Y=V.config.aID||"";return V.hasAnims=!!Y.includes("g")||!!Y.includes("q")||!!Y.includes("f"),e.mode&&e.mode.teamOptions&&"Prop"==e.mode.teamOptions[V.team-1]&&this.updateProp(V,A||1,!0),this.swapWeapon(V,0,!0),"undefined"!=typeof window&&"updateWindow"in window&&window.updateWindow(23),V},this.getJumpSound=function(e){return e&&e.currentShoes&&e.currentShoes.stepSnd&&e.currentShoes.jumpSnd?"shoe_"+e.currentShoes.id:"jump_"+s.randInt(0,1)},this.getStepSound=function(e){return e&&e.currentShoes&&e.currentShoes.stepSnd?"shoe_"+e.currentShoes.id:(m=a.stepSounds[e.stepSrc||0]).ids[s.randInt(0,m.ids.length-1)]},this.resetStep=function(t,i,n){if(!t.wasOnGround&&t.oldY>t.y){n=n||t.velocity.y,t.wallJumpC=0,!i&&t.renderYou&&t.velocity.y&&(t.jumpTween&&t.jumpTween.stop(),t.landTween&&t.landTween.stop(),t.landTween=new TWEEN.Tween(t).to({landBobY:6*n,jumpBobY:0},100).easing(TWEEN.Easing.Linear.None).onComplete((function(){t.landTween=new TWEEN.Tween(t).to({landBobY:0},1100).easing(TWEEN.Easing.Elastic.Out).start()})).start());var s=e.mode.noSliding&&!t.perks.includes(4)&&!t.perks.includes(5),r=!e.mode.realMov&&t.crouchVal&&t.canSlide&&t.canSlideT<=0&&e.config.canSlide&&!s;if(!l||i||!n||e.mode&&e.mode.teamOptions&&"Stalker"==e.mode.teamOptions[t.team-1]||(l.play(this.getStepSound(t),.7*(t.currentShoes.stepSnd?.4:1),!1),t.renderYou&&!t.currentShoes.stepSnd&&r&&l.play("slide_0",.35,!1)),r){t.canSlide=!1,t.canSlideT=100,t.slideTimer=a.slideTime*(e.config.slidTime||1)*(t.config.slT||1)*t.crouchVal;var o=(this.onTerrain?a.playerTerrainSlideVelMlt:a.playerSlideVelMlt)*t.config.slA;o*=e.config.slidSpd||0,t.velocity.x*=o,t.velocity.z*=o}if(this.isServer&&e.config&&e.config.fallDmg){var c=Math.abs(n);c>e.config.fallDmgThr&&(c*=10,c*=e.config.fallDmg,this.changeHealth(t,null,c)&&this.kill(t))}}},this.playerStep=function(t,i,n,r){if(i||r){if(!r){!t.renderYou&&t.crouchVal&&(i*=1.6),t.stepVal+=i*a.stepMlt*t.stepDir;var o=Math.PI/2*t.config.stpFr}if(r||t.stepVal>=o&&1==t.stepDir||t.stepVal<=-o&&-1==t.stepDir){if(l&&!n&&(!e.mode||!e.mode.teamOptions||"Stalker"!=e.mode.teamOptions[t.team-1])){var c=s.randFloat(.15,.25)*(t.crouchVal<1?1:t.isYou?.5:0),d=t.crouchVal<1?1:.8;t.config.stpSD&&(d+=t.config.stpSD*i);var h=this.getStepSound(t);t.currentShoes&&t.currentShoes.stepSnd&&(d*=s.randFloat(.95,1.05),c*=.6),t.isYou?l.play(h,c,!1,d):c&&e.playerSound(a.networkSounds.indexOf(h),t.sid,t.x,t.y,t.z,c,d,170,null,null,!0)}t.stepDir*=-1}}},this.jump=function(t){if(!(t&&t.weapon.noJump||t&&t.wasStopCrouch)){t.didAct=!0,t.jumpCooldown=0*t.config.jpC,t.didJump=!0,t.didJumpW=!0,t.onTerrain=!1;var i=a.jumpVel*(e.config?e.config.jumpMlt:1)*(t.attributes.jump||1)*(e.mode&&null!=e.mode.jumpMlt?e.mode.jumpMlt:1)*(e.mode&&null!=e.mode.jumpVel?e.mode.jumpVel:1);e.mode.realMov&&(i*=.92),i*=t.attributes.rooted;var n=a.jumpPush*(e.config?e.config.jumpMlt:1)*(t.attributes.jump||1)*(e.mode&&null!=e.mode.jumpMlt?e.mode.jumpMlt:1),r=(i-i*(a.crouchJump*t.crouchVal))*(t.weapon.jumMlt||t.weapon.spdMlt)*(t.aimVal?1:a.aimJumpSlow);t.config.ovrJump?t.velocity.y=r:t.velocity.y+=r;var o=s.getDistance(0,0,t.velocity.x,t.velocity.z);if(t.velocity.x-=n*o*Math.sin(t.xDire),t.velocity.z-=n*o*Math.cos(t.xDire),t.recon||this.playClip(t,"Jump",1),l&&!t.recon&&t.isYou){if(t.renderYou){t.landTween&&t.landTween.stop(),t.landTween=new TWEEN.Tween(t).to({landBobY:0},100).easing(TWEEN.Easing.Linear.None).start(),t.jumpTween&&t.jumpTween.stop(),t.jumpTween=new TWEEN.Tween(t).to({jumpBobY:.22},500).easing(TWEEN.Easing.Back.Out).start();var c=s.randFloat(.12,.15);new TWEEN.Tween(t).to({jumpRot:[c,0]},900).easing(TWEEN.Easing.Back.Out).start()}l.play(this.getJumpSound(t),.04,!1)}}},this.tryJump=function(t,i){e.config&&e.config.autoJump&&i?this.jump(t):(t.didJump&&!i&&(t.didJump=!1),!t.didJump&&i&&this.jump(t))},this.toggleAim=function(i,n){!l||i.recon||i.weapon.melee||(i.weapon.aimSound?l.play(i.weapon.aimSound,.05):l.play("aim_"+n,.1)),(!n||e.mode&&e.mode.teamOptions&&"Prop"==e.mode.teamOptions[i.team-1])&&this.resetAim(),e.controls.camType.isNormal&&i.weapon.scope&&!i.currentSkin.noScope&&i.weaponMeshes&&i.weaponMeshes[i.loadoutIndex]&&(t.zoom(n?1+(i.weapon.zoom-1)*t.adsFov[t.getPlayerWeaponId(i)]:1),i.weaponMeshes[i.loadoutIndex].visible=!this.isWeaponHidden(i,i.loadoutIndex)&&!n,t.aimRecticle.custom?aimRecticle.style.opacity=(n?1:0)*t.aimRecticle.opacMlt:t.aimRecticle.opacity=n?1:0);var s=null==i.weapon.attach&&!i.currentSkin.attachBypass||i.currentSkin.noAttach||!e.attach[i.attachIndex]?null:e.attach[i.attachIndex];e.controls.camType.isNormal&&s&&(t.aimDot.custom?(aimDot.style.opacity=n?1:0,aimDot.style.display=t.aimDot.display?"":"none"):t.aimDot.opacity=n?1:0),e.controls.camType.isNormal&&i.weaponMeshes&&i.weaponMeshes[i.loadoutIndex]&&t.hideADS[t.getPlayerWeaponId(i)]&&(i.weaponMeshes[i.loadoutIndex].visible=!n&&!this.isWeaponHidden(i,i.loadoutIndex))},this.updateAim=function(i,n){var s=i&&(null!=i.weapon.attach||i.currentSkin.attachBypass)&&!i.currentSkin.noAttach&&e.attach[i.attachIndex]?e.attach[i.attachIndex]:null,a=i.weapon.zoom;s&&(a*=s.zoomMlt||1),t.zoom(1+(a-1)*n*t.adsFov[t.getPlayerWeaponId(i)])},this.isWeaponHidden=function(t,i){var n=t.loadout[i];return!(!e.weaponConfig[n].melee||!e.hideWeapon[2])||(!!e.weaponConfig[n].secondary&&!!e.hideWeapon[1]||!e.weaponConfig[n].melee&&!e.weaponConfig[n].secondary&&!!e.hideWeapon[0])},this.cantShoot=function(t){var i=e.mode&&e.mode.finiteAmmo&&!t.isBot;!t.cantShootTimer&&t.ammos[t.loadoutIndex]<=0&&(e.mode&&e.mode.noReloads||i&&t.reserveAmmos[t.loadoutIndex]<=0)&&(l&&l.play("gclick_0",.65),t.cantShootTimer=t.weapon.rate||0)},this.reload=function(i){var n=e.mode&&null!=e.mode.ammoLimit?e.mode.ammoLimit:i.weapon.ammo,s=e.mode&&e.mode.finiteAmmo&&!i.isBot,a=i.weapon.noReload&&!s;if(!i.reloadTimer&&i.ammos[i.loadoutIndex]<n&&!a&&(!s||s&&i.reserveAmmos[i.loadoutIndex]>0)){var r=this.getReloadSnd(i,1);l&&l.play(r,.25),i.reloadTimer=i.weapon.reload*(e.config.reSpd||1)*i.attributes.reload*(i.perks.includes(2)?.5:1)*(i.isKranked?e.mode.bonuses.reload:1)*(e.mode&&null!=e.mode.reloadMlt?e.mode.reloadMlt:1),i.burstCount=0,i.isYou&&(this.cancelInspect(i),t&&(ammoHolder.style.backgroundSize="100%"))}},this.reloadUIAnim=function(i){t&&i.isYou&&(ammoHolder.style.backgroundSize=Math.max(i.reloadTimer/(i.weapon.reload*(e.config.reSpd||1)*i.attributes.reload*(i.perks.includes(2)?.5:1)*(i.isKranked?e.mode.bonuses.reload:1)*(e.mode&&null!=e.mode.reloadMlt?e.mode.reloadMlt:1))*100,0).round()+"%  100%")},this.endReload=function(e){var t=this.getReloadSnd(e,"2"+(e.weapon.custReload||""));l&&l.play(t,.25)},this.resetReloadUIAnim=function(){t&&(ammoHolder.style.backgroundSize="0%")},this.resetAim=function(){t.zoom(1),t.aimRecticle.opacity=0,t.aimDot.opacity=0,aimRecticle.style.opacity=0,aimDot.style.opacity=0},this.updatePlayerAmmo=function(t){if(t.isYou){"inline-block"!=ammoHolder.style.display&&(ammoHolder.style.display="inline-block");var i=!e.mode||!e.mode.noReloads;ammoVal.firstChild?ammoVal.firstChild.nodeValue=t.ammos[t.loadoutIndex]||(t.weapon.melee?"-":0):ammoVal.textContent=t.ammos[t.loadoutIndex]||(t.weapon.melee?"-":0);var n=i?"| "+(e.mode&&null!=e.mode.ammoLimit?"-":e.mode&&e.mode.finiteAmmo&&!t.isBot?t.reserveAmmos[t.loadoutIndex]||"-":t.weapon.ammo||"-"):"";ammoMax.firstChild?ammoMax.firstChild.nodeValue=n:ammoMax.textContent=n;var s=e.mode&&e.mode.finiteAmmo&&!t.isBot,a=e.players.getWeapon(t,t.loadoutIndex);a&&a.ammo&&t.ammos[t.loadoutIndex]<=0&&e.mode&&null==e.mode.ammoLimit&&(!s||s&&t.reserveAmmos[t.loadoutIndex]>0)?"block"!=reloadMsg.style.display&&i&&(reloadMsg.style.display="block"):"none"!=reloadMsg.style.display&&(reloadMsg.style.display="none")}},this.updatePlayerFov=function(e){e.isYou&&(window.updateFov(0,void 0,t.getPlayerWeaponId(e)-1),window.updateFov(1,void 0,t.getPlayerWeaponId(e)-1))},this.wInspect=function(i){if(i.inspecting)this.cancelInspect(i);else if(!i.weapon.nInsp&&!i.inspecting&&1==i.aimVal&&!i.reloadTimer&&(!i.weapon.melee||i.canThrow)){i.inspecting=!0;var n=i.weapon.inspAnim;if(i.weapon.melee&&e.store.skins[i.meleeIndex]?(e.store.skins[i.meleeIndex].inspS&&l.play(e.store.skins[i.meleeIndex].inspS,.03,!1,1),e.store.skins[i.meleeIndex].flipAnim?(l.play("melee_equip",.03,!1,1.7),n&&(n.wpSp=4*Math.PI)):n&&(n.wpSp=0)):n&&(n.wpSp=0),n){var s=i.weapon.melee?i.currentMelee:i.currentSkin;t&&s&&s.inspectAnim&&i.weaponGeos[i.loadoutIndex].playAllClips&&i.weaponGeos[i.loadoutIndex].playAllClips(1),i.inspectTween=s&&s.insAnim?s.insAnim(TWEEN,n):new TWEEN.Tween(i.inspectAn).to(n,400).easing(TWEEN.Easing.Exponential.Out).start()}}},this.cancelInspect=function(e){e.inspectTween&&e.inspectTween.stop(),e.inspecting=!1,e.inspectX=0,e.inspectAn={arZ:0,arX:0,arY:0,apZ:0,apX:0,apY:0,wpZ:0,wpY:0,wrY:0,wpSp:0};var i=e.weapon.melee?e.currentMelee:e.currentSkin;t&&i&&i.inspectAnim&&e.weaponGeos[e.loadoutIndex].stopAllClips&&e.weaponGeos[e.loadoutIndex].stopAllClips()},this.sprayPosition=function(t,i,n,s,r,o,l){if(i){var c=e.store.skins[n],d=0,h=0,u=0,p=90*Math.round(t.xDire/(Math.PI/2));r>=i.y+i.height?(h=-90,u=p):r<=i.y-i.height?(h=90,u=-p):s<=i.x-i.width?d=-90:s>=i.x+i.width?d=90:o<=i.z-i.length&&(d=180);var f=a.sprayScale*(c.sclW||1)/2,m=a.sprayScale*(c.sclH||1)/2;if(h){if(i.width<f||i.length<m)return;o-m<i.z-i.length?o=i.z-i.length+m:o+m>i.z+i.length&&(o=i.z+i.length-m),s-f<i.x-i.width?s=i.x-i.width+f:s+f>i.x+i.width&&(s=i.x+i.width-f)}else{if(i.height<m)return;if(90==d||-90==d){if(i.length<f)return;o-f<i.z-i.length?o=i.z-i.length+f:o+f>i.z+i.length&&(o=i.z+i.length-f)}else{if(i.width<f)return;s-f<i.x-i.width?s=i.x-i.width+f:s+f>i.x+i.width&&(s=i.x+i.width-f)}r+m>i.y+i.height&&(r=i.y+i.height-m)}t.lastSpray=e.now;var g="spray"+(e.store.skins[l]&&e.store.skins[l].spraySnd?"_"+e.store.skins[l].spraySnd:"");e.playSound&&e.playSound(a.networkSounds.indexOf(g),.4,t.sid,s,r,o,!0);var v=e.isSandbox?a.maxSpraysF:a.maxSprays;t.account&&t.account.premiumT>0&&(v=t.account.featured?a.maxSpraysF:a.maxSpraysP),t.unlimitedSprays&&(v=1e4),t.spraysPlaced>=v&&(t.spraysPlaced=0);var y=t.sid+"_"+t.spraysPlaced;t.spraysPlaced++,this.isServer&&(e.broadcast("sp",y,c.index,s.round(2),r.round(2),o.round(2),d,h,u,l),e.incStat("spry",t),e.challenges.update(e,"spry",1,{item:c.index},t))}},this.spray=function(t,i){if(e.now-t.lastSpray>=a.sprayTimer){if(e.isSandbox||t.account&&t.account.premiumT>0){var r=e.store.skins[i]&&e.store.skins[i].type==n.SPRAY&&(e.store.skins[i].free||e.isSandbox);if(t.account&&null!=i&&null!=i){var o=s.canUseSkin(i,e.store.skins,t.account,t.classIndex,void 0,4);i=r||o?i:2482}else i=r?i:2482}else i=2482,e.store.skins[t.sprayIndex]&&e.store.skins[t.sprayIndex].type==n.SPRAY&&(i=t.sprayIndex);y.length=0;for(var l=0,c=1/(a.sprayRange*Math.sin(t.xDire+Math.PI)*Math.cos(t.yDire)),d=1/(a.sprayRange*Math.cos(t.xDire+Math.PI)*Math.cos(t.yDire)),h=1/(a.sprayRange*Math.sin(t.yDire)),u=0;u<e.map.manager.objects.length;++u)(p=e.map.manager.objects[u]).noShoot||p.noVis||!p.active||(l=s.lineInRect(t.x,t.z,t.y+t.height-a.cameraHeight,c,d,h,p.x-p.width,p.z-p.length,p.y-p.height,p.x+p.width,p.z+p.length,p.y+p.height))&&l<=1&&y.push({obj:p,dst:l});if(y.length&&(y.sort(s.orderByDst),p=y[0].obj)){var f=a.sprayRange*y[0].dst-.1,m=t.y+t.height-a.cameraHeight+f*Math.sin(t.yDire),g=t.x+f*Math.sin(t.xDire+Math.PI)*Math.cos(t.yDire),v=t.z+f*Math.cos(t.xDire+Math.PI)*Math.cos(t.yDire);this.sprayPosition(t,p,i,g,m,v)}}},this.build=function(i,n){if((!h||n)&&!i.selectBuild){var r=i.xDire,o=i.yDire,l=i.y+i.height-a.cameraHeight;y.length=0;var c=1/(i.weapon.range*Math.sin(r+Math.PI)*Math.cos(o)),d=1/(i.weapon.range*Math.cos(r+Math.PI)*Math.cos(o)),u=1/(i.weapon.range*Math.sin(o)),f=e.map.terrain;if(f){var m=f.raycast(i.x,-i.z,l,1/c,-1/d,1/u);if(m){let e=s.getD3D(i.x,l,i.z,m.x,m.z,-m.y);y.push({terrain:!0,dst:e/i.weapon.range})}}for(var g=null,v=e.map.manager.objects,b=0;b<v.length;++b)(p=v[b]).active&&!p.noShoot&&(g=null,null!=p.buildInd&&e.BUILD_OBJS[p.buildInd].snapFunc&&(g=e.BUILD_OBJS[p.buildInd].snapFunc(i.x,i.z,l,c,d,u,i.buildIndex,p)),null==g&&(g=s.lineInRect(i.x,i.z,l,c,d,u,p.x-p.width,p.z-p.length,p.y-p.height,p.x+p.width,p.z+p.length,p.y+p.height)),g&&g<=1&&y.push({obj:p,dst:g}));if(y.length){y.sort(s.orderByDst);var w=(p=y[0].obj||null)&&e.BUILD_OBJS[p.buildInd]||null,x=e.BUILD_OBJS[i.buildIndex],S=!a.isProd||i.score>=x.cost,M=i.weapon.range*y[0].dst-1e-4,k=i.x+M*Math.sin(r+Math.PI)*Math.cos(o),_=l+M*Math.sin(o),T=i.z+M*Math.cos(r+Math.PI)*Math.cos(o),C=null,I=0;if(p&&(k<=p.x-p.width?C="Left":k>=p.x+p.width?C="Right":T<=p.z-p.length?C="Front":T>=p.z+p.length?C="Back":_>=p.y+p.height?C="Top":_<=p.y-p.height&&(C="Bottom")),k=Math.round(k),_=Math.round(_),T=Math.round(T),p&&(C&&w&&w.buildSnap?[k,_,T,S,I]=w.buildSnap(k,_,T,S,C,p,i.buildIndex):("floor"==x.places&&"Top"!=C&&"Bottom"!=C||"objs"==x.places)&&(S=!1)),x.rotFacing&&(!p||!w||!w.buildSnap)){var A=Math.PI/4,R=i.xDire.roundToNearest(A);I=1!=(R=Math.abs(R)/A)&&4!=R&&5!=R&&8!=R}var P=0;x.rotDir&&("Left"==C?P=0:"Front"==C?P=Math.PI/2:"Right"==C?P=Math.PI:"Back"==C&&(P=-Math.PI/2));var E=I?x.l:x.w,D=x.h,O=I?x.w:x.l;if(S)for(b=0;b<v.length&&(null==v[b].buildInd||!v[b].active||(w&&w.buildSnap?v[b].buildInd==i.buildIndex&&v[b].x==k&&v[b].z==T&&v[b].y==_+x.h/2&&(S=!1):e.map.manager.collisionC(k,_,T,E/2,D/2,O/2,v[b],-.01)&&(S=!1),S));++b);if(n&&S&&(i.reloads[i.loadoutIndex]=i.weapon.rate,i.didShoot=!0,i.didAct=!0),this.isServer)S&&e.buildObj(i.buildIndex,k,_,T,E,D,O,P,-1,!1,i)&&this.score(i,-x.cost);else{i.buildHelper||(i.buildHelper=t.addCube(k,_,T,1,1,1,null,{src:"default",colr:"#55acee",opacity:.7,transparent:!0,autoMatrix:!0,noGroup:!0,noShader:!0}),i.buildHelperN=t.addCube(k,_,T,1,1,1,null,{src:"default",colr:"#ee5555",opacity:.7,transparent:!0,autoMatrix:!0,noGroup:!0,noShader:!0})),i.buildHelper.visible=!1,i.buildHelperN.visible=!1;var L=i["buildHelper"+(S?"":"N")];L.visible=!0,t.scaleMesh(L,E+.1,D+.1,O+.1),t.moveMesh(L,k,_-.05,T)}}else h||i.buildHelper&&(i.buildHelper.visible=!1,i.buildHelperN.visible=!1)}},this.debugHitboxes=function(e){},this.debugHitbox=function(e,t,i){if(e&&e.debugMode&&h){var n=this.fetchState(t,e);if(n){var s=t.y+t.adjustedHeight-i<a.headScale*t.headMlt,r=a.headScale*t.headMlt;e.send("hbdb",t.sid,n.x,n.y,n.z,t.scale+t.hitboxPadW,n.ah+t.hitboxPadH,i,s?16498733:16711680,r+t.hitboxPadH)}}},this.melee=function(t,i){if(!t.disableMelee&&t.config.canMelee){i.syncTime=!0;var r=t.weapon.canThrow&&0==t.aimVal&&t.canThrow;t.reloads[t.loadoutIndex]=t.weapon.rate*(e.config.fiRat||1)*t.attributes.fRate*(t.perks.includes(1)?.66:1)*(t.isKranked?e.mode.bonuses.firerate:1)*t.config.melRate,t.didShoot=!0,t.didAct=!0;var o=e.store.skins[t.meleeIndex]||{},d=1;if(r&&e.config.chrgWeps)d=Math.min(1,Math.max(.1,t.chargeTime/t.throwCharge)),e&&e.mode&&e.mode.forceCharge&&(d=1);t.chargeTime=0,t.fullCharge=!1,this.playClip(t,"Melee",1),t.isYou&&(t.isYou&&e.controls&&(e.controls.cntrlInput.vibration&&e.controls.gamepad.active?e.controls.gamepad.rumble(t.weapon.rumbleDur||200,(t.weapon.rumble||.5)*e.controls.cntrlInput.vibrationMlt):e.controls.mblInput.vibration&&!e.controls.isMobile&&"vibrate"in navigator&&navigator.vibrate(t.weapon.rumbleDur||200)),t.weapon.anim&&t.weapon.anim(t,TWEEN,t.canThrow?r?3:1:2,d),this.cancelInspect(t),t.canThrow?l.play("swsh_"+(o.cSwing&&o.id||0)+"_"+s.randInt(0,1),.1,!1):l.play("swsh_def_"+s.randInt(0,1),.1,!1));var u=t.xDire,f=t.yDire,m=t.y+t.height-a.cameraHeight;if(r){h&&e.incStat("s",t),t.canThrow=!!t.unlimitedAmmo,t.lastThrowTime=Date.now(),t.shotCntP++;var g=e.projectiles.stored[0],v=t.meleeIndex,b={wId:12,w:t.upgrades[t.loadoutIndex]?e.upgradeWeapons[12]:e.weaponConfig[12]},w={s:v,d:d,v:Math.max(.3,d)};e.store.skins[v]&&e.store.skins[v].explode&&(w.ex=0);var x=2482;if(e.store.skins[t.sprayIndex]&&e.store.skins[t.sprayIndex].type==n.SPRAY&&(x=t.sprayIndex),e.store.skins[v]&&e.store.skins[v].sprayI&&(w.spr=x),this.isServer?e.projectiles.init(t.x,m,t.z,u,f,g,t,b,!0,w):c.physObj(t.x,m,t.z,u,f,3e3,!1,null,null,g,-1,t.shotCntP,w),t.isYou){t.lastThrow=t.canThrow;var S=document.getElementById("weapIconMel");S&&(S.src=s.assetsUrl("/textures/weapons/icon_0.png"))}}else{y.length=0;var M=0,k=t.weapon.range*Math.sin(u+Math.PI)*Math.cos(f),_=t.weapon.range*Math.cos(u+Math.PI)*Math.cos(f),T=t.weapon.range*Math.sin(f);if(k=1/k,_=1/_,T=1/T,this.isServer)for(var C=0;C<e.map.manager.objects.length;++C)(p=e.map.manager.objects[C]).active&&!p.noShoot&&(M=s.lineInRect(t.x,t.z,m,k,_,T,p.x-p.width,p.z-p.length,p.y-p.height,p.x+p.width,p.z+p.length,p.y+p.height))&&M<=1&&y.push({obj:p,dst:M});if(this.isServer)for(C=0;C<this.list.length;++C)!this.list[C].active||this.list[C].noPVP||t==this.list[C]||t.noPVP||!(t.forcePVP&&this.list[C].forcePVP||!t.forcePVP&&!this.list[C].forcePVP)||t.team&&t.team==this.list[C].team&&!e.mode.dmgTeam&&!e.config.frFire||(p=this.fetchState(this.list[C],t))&&(M=s.lineInRect(t.x,t.z,m,k,_,T,p.x-this.list[C].scale-this.list[C].hitboxPadW,p.z-this.list[C].scale-this.list[C].hitboxPadW,p.y,p.x+this.list[C].scale+this.list[C].hitboxPadW,p.z+this.list[C].scale+this.list[C].hitboxPadW,p.y+p.ah+this.list[C].hitboxPadH))&&M<=1&&y.push({player:!0,obj:this.list[C],dst:M});if(h)for(C=0;C<e.AI.ais.length;++C)if(e.AI.ais[C].active&&(!t.team||t.team!=e.AI.ais[C].team||e.mode.dmgTeam||e.config.frFire)){if(!(p=e.AI.ais[C].fetchState(t)))continue;(M=s.lineInRect(t.x,t.z,m,k,_,T,p.x-e.AI.ais[C].scale,p.z-e.AI.ais[C].scale,p.y,p.x+e.AI.ais[C].scale,p.z+e.AI.ais[C].scale,p.y+2*e.AI.ais[C].height))&&M<=1&&y.push({ai:!0,obj:e.AI.ais[C],dst:M})}t.weapon.range,t.rangeMlt;if(y.length){y.sort(s.orderByDst);var I=+t.weapon.dmg,A=+t.weapon.dmg;if(t.canThrow||(I=35),t.smite&&(I=1e4),I*=t.attributes.dmg,I*=t.dmgMlt,!s.isNumber(I)||!s.isNumber(A))return;for(C=0;C<y.length;++C){p=y[C];var R=m+t.weapon.range*t.rangeMlt*p.dst*Math.sin(f);if(!this.isServer)break;if(p.obj&&p.ai)(!e.waitTimers||e.waitTimers[0]&&e.waitTimers[0].contTime)&&!p.obj.invincible&&(p.obj.changeHealth(-I,t),p.obj.killScore&&e.mode&&e.mode.pointsPerHit&&this.score(t,Math.ceil(I*e.mode.pointsPerHit),1),!p.obj.active&&p.obj.killScore&&this.score(t,p.obj.killScore,1),e.showHit(t,p.obj,Math.round(I),!1,!0));else if((!e.waitTimers||e.waitTimers[0]&&e.waitTimers[0].contTime)&&p.obj&&I>0&&p.obj.health&&!p.player){for(var P=0;P<this.list.length;++P)(t&&t==this.list[P]||this.list[P].specStream==t.sid)&&this.list[P].send("4");p.obj.health-=I,p.obj.health<=0&&(p.obj.active=!1,p.obj.health=0,p.obj.destroyedBy=t,p.obj.destroyed=!0,e.map.manager.destObjs.push(p.obj.uid),e.broadcast("do",p.obj.uid),p.obj&&p.obj.onDestroy&&e.onTrigger(t,p.obj))}if(h&&e.mode.teamOptions&&"Seekers"==e.mode.teamOptions[t.team-1]&&!p.player&&p.obj&&p.obj.propID&&this.changeHealth(t,null,10)&&this.kill(t),p.obj&&(p.obj.onMelee||p.obj.onDamage||!t.canThrow&&p.obj.onPunch)&&e.onTrigger(t,p.obj),p.obj&&p.obj.isEvent&&e.foundEventItem(t,p.obj),p.obj&&p.obj.mysteryBox&&p.obj.purchasedBy==t.id&&2==p.obj.state&&p.obj.purchasedBy==t.id&&-1!=p.obj.pendingWeapon&&(e.fireSaleTimer||(t.sharedBoxes++,5==t.sharedBoxes&&(t.sharingIsCaring=!0,t.send("sic",!0))),p.obj.purchasedBy=-1,e.playSound&&e.playSound(a.networkSounds.indexOf("bhop_reset"),1.5,t.sid,t.x,t.y,t.z,!0),e.syncMysteryBox(p.obj)),!(p.player||p.obj&&p.obj.dummy))break;if(e.players.debugHitbox(t,p.obj,R),e.mode&&e.mode.onMelee&&e.mode.onMelee(e,t,p.obj,h)&&(I=p.obj.health||I),this.changeHealth(p.obj,t,I,void 0,void 0,{wep:12})&&(t&&(t.canThrow?(t.melees++,h&&(e.incStat("mk",t),e.challenges.update(e,"mk",1,{wep:12},t))):t.canThrow||(t.fistKills++,h&&(e.incStat("fk",t),e.challenges.update(e,"fk",1,{wep:12},t)))),this.kill(p.obj,t,{wId:t.weapon.id,fs:!t.canThrow})),(I-=null==t.weapon.pierce?I:A*a.materialDens.flesh*t.weapon.pierce)<=0)break}}}}},this.endGrapple=function(e){e&&(e.grapple=null)},this.tryGrapple=function(t,i,n,r){if(n&&t&&t.active){if(t.didShoot=!0,t.chargeTime=0,t.fullCharge=!1,t.didAct=!0,t.grapple=null,t.reloads[t.loadoutIndex]=t.weapon.rate,e.playSound){var o=a.networkSounds.indexOf(t.weapon.sound);e.playSound(o,.85,t.sid,t.x,t.y,t.z,!1,s.randFloat(.9,1.1),null,t.weapon.refDist,t.weapon.rollOff)}t.recoilForce+=t.weapon.recoil;var l=!t.config||2!==t.config.mdl;if(t.renderYou&&l){t.recoilTween&&t.recoilTween.stop();t.recoilTween=new TWEEN.Tween(t).to(t.weapon.recoilAnim||{},22.5).easing(TWEEN.Easing.Linear.None).onComplete((function(){t.recoilTween=new TWEEN.Tween(t).to({recoilTweenY:0,recoilTweenR:0,recoilTweenYM:0,recoilTweenZ:0},142.5).easing(TWEEN.Easing.Back.Out).start()})).start(),this.cancelInspect(t)}var d=t.xDire,u=t.yDire,f=t.y+t.height-a.cameraHeight;y.length=0;for(var m=1/(i*Math.sin(d+Math.PI)*Math.cos(u)),g=1/(i*Math.cos(d+Math.PI)*Math.cos(u)),v=1/(i*Math.sin(u)),b=0,w=0;w<e.map.manager.objects.length;++w)!(p=e.map.manager.objects[w]).active||p.noShoot||p.noGrapple||(b=s.lineInRect(t.x,t.z,f,m,g,v,p.x-p.width,p.z-p.length,p.y-p.height,p.x+p.width,p.z+p.length,p.y+p.height))&&b<=1&&y.push({obj:p,dst:b});if(y.length){y.sort(s.orderByDst);var x=i*y[0].dst,S=t.x+x*Math.sin(d+Math.PI)*Math.cos(u),M=f+x*Math.sin(u),k=t.z+x*Math.cos(d+Math.PI)*Math.cos(u),_=x+t.height-a.cameraHeight+.001;t.grapple={x:S.round(1),y:M.round(1),z:k.round(1),range:_},h||(r.grapObj={x:S.round(1),y:M.round(1),z:k.round(1),r:_}),c&&t.isYou&&c.addRope(t,S,M,k)}}},this.tryDeployable=function(t){if(t&&t.active){var i=t.weapon.deployRang;null!=t.deployGun&&(i=10*(i||250));var n=t.xDire,r=t.yDire,o=t.y+t.height-a.cameraHeight;y.length=0;for(var l=1/(i*Math.sin(n+Math.PI)*Math.cos(r)),c=1/(i*Math.cos(n+Math.PI)*Math.cos(r)),d=1/(i*Math.sin(r)),h=0,u=0;u<e.map.manager.objects.length;++u)(p=e.map.manager.objects[u]).active&&!p.noShoot&&(h=s.lineInRect(t.x,t.z,o,l,c,d,p.x-p.width,p.z-p.length,p.y-p.height,p.x+p.width,p.z+p.length,p.y+p.height))&&h<=1&&y.push({obj:p,dst:h});if(y.length){y.sort(s.orderByDst);var f=i*y[0].dst,m=t.x+f*Math.sin(n+Math.PI)*Math.cos(r),g=o+f*Math.sin(r),v=t.z+f*Math.cos(n+Math.PI)*Math.cos(r);m=m.round(1),g=g.round(1),v=v.round(1);var b=y[0].obj,w=0,x=0;g>=b.y+b.height?x=0:g<=b.y-b.height?x=180:m<=b.x-b.width?x=90:m>=b.x+b.width?x=-90:v<=b.z-b.length?w=-90:v>=b.z+b.length&&(w=90),e.dropSpawnable(null==t.deployGun?t.weapon.deployable:t.deployGun,{x:m,y:g,z:v},{xD:w,zD:x})}null==t.deployGun&&t.ammos[t.loadoutIndex]<=0&&e.players.removeWeapon(t,23)}};var y=[];this.shoot=function(i,n,r,o,d,u,f){if(!i.disableShooting&&i.config.canShoot){var m=!1;n.syncTime=!0;const ze=i.weapon.noDmg;h&&!ze&&e.incStat("s",i);var v=!i.unlimitedAmmo;i.weapon&&i.weapon.fullChrgSht&&!u&&(v=!1),v&&i.ammos[i.loadoutIndex]--,i.ammos[i.loadoutIndex]<0&&(i.ammos[i.loadoutIndex]=0),i.didAct=!0;var b=e&&e.mode&&e.mode.forceCharge,w=1;i.weapon&&i.weapon.bypassChrg||(i.weapon&&i.weapon.chrgTime&&e.config.chrgWeps&&(w=Math.min(1,i.chargeTime/i.weapon.chrgTime),b&&(w=1)),i.didShoot=!0,i.chargeTime=0,i.fullCharge=!1);var x=1;i.weapon&&i.weapon.rateChrg&&(x=1-Math.min(1,i.chargeTime/i.weapon.chrgTime),b&&(x=0),x=Math.max(.7,1.5*x)),u?(i.fullCharge=!1,i.chargeTime=0,w=i.weapon.fullChrgMlt):i.didShoot=!0,i.burstCount?i.burstCount--:i.burstCount=i.weapon.burst?i.weapon.burstC-1:0,i.reloads[i.loadoutIndex]=(i.burstCount&&i.weapon.burst?i.weapon.burstR:i.weapon.rate)*(e.config.fiRat||1)*i.attributes.fRate*(i.perks.includes(1)?.66:1)*(i.isKranked?e.mode.bonuses.firerate:1)*x,this.updatePlayerAmmo(i);var S=e.store.skins[i.getSkinForLoadout(i.loadoutIndex)];if(S||null==i.weapon.altSkin||(S=i.weapon.altSkin),(S&&S.weapon-1!=i.loadout[i.loadoutIndex]||i.weapon.upgraded)&&(S={}),e.playSound){var M=a.networkSounds.indexOf(u?i.weapon.sound+"_blast":i.weapon.sound+(S&&null!=S.mid&&!S.noSnd?"_"+S.mid:""));e.playSound(M,.85,i.sid,i.x,i.y,i.z,!1,s.randFloat(.9,1.1),null,i.weapon.refDist,i.weapon.rollOff)}i.recoilForce+=i.weapon.recoil*(u?3.5:1),i.isYou&&e.controls&&(e.controls.cntrlInput.vibration&&e.controls.gamepad.active?e.controls.gamepad.rumble(i.weapon.rumbleDur||200,(i.weapon.rumble||.5)*e.controls.cntrlInput.vibrationMlt):e.controls.mblInput.vibration&&!e.controls.isMobile&&"vibrate"in navigator&&navigator.vibrate(i.weapon.rumbleDur||200)),i.isYou&&this.playClip(i,"Shoot",1);var k=!i.config||2!==i.config.mdl;if(i.renderYou&&k){var _=s.randFloat(-Math.PI,Math.PI);i.recoilX+=i.weapon.recoilR*Math.sin(_),i.recoilZ+=.3*i.weapon.recoilR*Math.cos(_),i.recoilTween&&i.recoilTween.stop();var T=(i.weapon.recoilAnim&&i.weapon.recoilAnim.time||i.weapon.rate)*(e.config.fiRat||1)*i.attributes.fRate*(i.perks.includes(1)?.66:1)*(i.isKranked?e.mode.bonuses.firerate:1);0==i.aimVal&&i.weapon.recoilAnim&&i.weapon.recoilAnim.aimTime&&(T=i.weapon.recoilAnim.aimTime),i.recoilTween=new TWEEN.Tween(i).to(i.weapon.recoilAnim||{},.15*T).easing(TWEEN.Easing.Linear.None).onComplete((function(){i.recoilTween=new TWEEN.Tween(i).to({recoilTweenY:0,recoilTweenR:0,recoilTweenYM:0,recoilTweenZ:0},.95*T).easing(TWEEN.Easing.Back.Out).start()})).start(),this.cancelInspect(i)}if(i.weapon.deployRang||null!=i.deployGun)return this.tryDeployable(i);if(this.tmpPos||=new e.THREE.Vector3,i.renderYou&&k&&!this.isWeaponHidden(i,i.loadoutIndex)){var C=i.weaponMeshes[i.loadoutIndex],I=0==i.aimVal&&i.weapon.scope&&!i.currentSkin.noScope;if(C&&c.showMuzzle&&!i.weapon.nMuz&&(!S||!S.noMuz)&&!e.controls.camOffset){for(var A=0;A<C.muzzles.length;++A)C.muzzles[A].visible=!0,c.setMaterial(C.muzzles[A],i.weapon.muzID||2,2,!0),g.siz=4*(i.weapon.muzMlt||1),g.static=!0,g.life=1,C.muzzles[A].init(A?-2*i.weapon.xOff*(i.leftHand?-1:1):0,i.weapon.muzOffY||0,-(i.weapon.muzOff||0),g);if(!I){var R=this.tmpPos;i.weaponMeshes[i.loadoutIndex].muzzles[0].getWorldPosition(R),R.project(t.camera),R.x=(R.x+1)/2,R.y=(R.y+1)/2,t.flash(R.x,R.y)}}if(!i.weapon.nCase&&c.active&&C&&c.showCasings)for(A=0;A<C.casings.length;++A){R=this.tmpPos,R=C.casings[A].getWorldPosition(R);if(l&&e.now-(i.lastShell||0)>400&&(i.lastShell=e.now,l.play("case_"+s.randInt(0,1),.45,!1,s.randFloat(.8,1.3))),!I){var P=s.randInt(0,1)?1.4:.8;c.physObj(R.x,R.y,R.z,i.xDire-Math.PI/2*(A?-1:1),Math.PI/5*s.randFloat(.75,1.2)*P,25,!1,i.weapon.caseInd||1,i)}}}if(i.renderYou){var E=e.mode&&e.mode.finiteAmmo&&!i.isBot;if(i.ammos[i.loadoutIndex]<=0&&i.weapon.removeOnEmpty&&(!E||E&&i.reserveAmmos[i.loadoutIndex]<=0))return void(25==i.weapon.id&&i.isJuggernaut?e.setJuggernaut(i,!1):e.players.removeWeapon(i,i.weapon.id))}if(!i.renderYou||c.yourTrails||i.weapon.physPow){var D=i.y+i.height-a.cameraHeight,O=i.xDire,L=i.yDire;i.config.shtToCam&&(O=o,L=d),1!=i.config.shtDrg&&(O=null==i.xDirChase?o:i.xDirChase,L=null==i.yDirChase?d:i.yDirChase),O+=s.toRad(i.config.shotX||0),L+=s.toRad(i.config.shotY||0);var j=null!=i.weapon.projectile&&(!i.weapon.projectile.disable||e.config.bDrop);if(j){i.shotCntP++;var z=i.weapon.noProjSpread?0:a.projSpreads[i.shotCntP%a.projSpreads.length],B=(i.spread*i.spreadMlt+(i.weapon.innac||0))*a.spreadAdj,N=O+(B*=z),F=L+(i.noRecoil?0:i.recoilAnimY*a.recoilMlt)+B;if(this.isServer){var H={wId:r,w:i.upgrades[i.loadoutIndex]?e.upgradeWeapons[r]:e.weaponConfig[r],dmgMlt:1-(i.weapon.chrgMlt||.9)*(1-w),rangeMlt:i.rangeMlt};null!=i.weapon.effectOnHit&&(H.effectInd=i.weapon.effectOnHit,H.effectC=Math.floor(10*w)),e.projectiles.init(i.x,D,i.z,N,F,i.weapon.projectile,i,H,void 0,i.weapon.customProj)}i.isYou&&!i.weapon.projectile.dontPred&&c.physObj(i.x,D,i.z,N,F,3e3,!1,null,null,i.weapon.projectile,-1,i.shotCntP,i.weapon.customProj)}let l=f&&i.weapon.physPull;const g=e&&e.mode&&e.mode.nonObjImpulse||i.weapon.nonObjImpulse||l;var U=i.weapon.physPow;if(!j||U){for(var V=0,G=[],W=U?-1:0,q=null==i.weapon.shots?1:i.weapon.shots,Y=W;Y<q;++Y){Y>=0&&(i.totShots++,i.active&&i.totShotsL++);N=0,F=0;if(i.weapon.cSpread&&Y>=0){var K=s.randFloat(.3,.32)*i.spreadMlt,X=i.ammos[i.loadoutIndex]%2;N=O+(i.weapon.cSpread[X][V]||0)*K,F=L+(i.weapon.cSpread[X][V+1]||0)*K,V+=2}else{B=Y>=0?(i.spread*i.spreadMlt+(i.weapon.innac||0))*a.spreadAdj:0;u&&(B=0),N=O+s.randFloat(-B,B),F=L+s.randFloat(-B,B)}i.noRecoil||(F+=i.recoilAnimY*a.recoilMlt);var Z=+i.weapon.range*i.rangeMlt;Y<0&&(Z=+i.weapon.physRang),y.length=0;var J=0,Q=Z*Math.sin(N+Math.PI)*Math.cos(F),$=Z*Math.cos(N+Math.PI)*Math.cos(F),ee=Z*Math.sin(F);if(Q=1/Q,$=1/$,ee=1/ee,Y<0&&g){var te=(me=(e.mode&&e.mode.noImpulseDist?1:U)*(e.config?e.config.impulseMlt:1)*(e.mode&&null!=e.mode.impulseMlt?e.mode.impulseMlt:1)*(l?-1:1))*Math.sin(N+Math.PI)*Math.cos(F);i.velocity.x-=te;var ie=me*Math.cos(N+Math.PI)*Math.cos(F);i.velocity.z-=ie;var ne=me*Math.sin(F);i.velocity.y-=ne,i.onGround=!1,h||(n.velObj={x:te,y:ie,z:ne})}if(!ze)for(var se=0;se<e.map.manager.objects.length;++se)(p=e.map.manager.objects[se]).active&&!p.noShoot&&(J=s.lineInRect(i.x,i.z,D,Q,$,ee,p.x-p.width,p.z-p.length,p.y-p.height,p.x+p.width,p.z+p.length,p.y+p.height))&&J<=1&&y.push({obj:p,dst:J});if(!ze)for(var ae in e.map.manager.spawnables)(p=e.map.manager.spawnables[ae]).active&&p.shoot&&(J=s.lineInRect(i.x,i.z,D,Q,$,ee,p.x-p.width,p.z-p.length,p.y-p.height,p.x+p.width,p.z+p.length,p.y+p.height))&&J<=1&&y.push({spawnable:!0,obj:p,dst:J});if(this.isServer&&Y>=0&&!ze)for(se=0;se<this.list.length;++se)!this.list[se].active||this.list[se].noPVP||i==this.list[se]||i.noPVP||!(i.forcePVP&&this.list[se].forcePVP||!i.forcePVP&&!this.list[se].forcePVP)||i.team&&i.team==this.list[se].team&&!e.mode.dmgTeam&&!e.config.frFire||(p=this.fetchState(this.list[se],i))&&(J=s.lineInRect(i.x,i.z,D,Q,$,ee,p.x-this.list[se].scale-this.list[se].hitboxPadW,p.z-this.list[se].scale-this.list[se].hitboxPadW,p.y,p.x+this.list[se].scale+this.list[se].hitboxPadW,p.z+this.list[se].scale+this.list[se].hitboxPadW,p.y+p.ah+this.list[se].hitboxPadH))&&J<=1&&y.push({player:!0,obj:this.list[se],dst:J});if(this.isServer&&Y>=0&&!ze)for(se=0;se<e.AI.ais.length;++se)if(e.AI.ais[se].active&&(!i.team||i.team!=e.AI.ais[se].team||e.mode.dmgTeam||e.config.frFire)){if(!(p=e.AI.ais[se].fetchState(i)))continue;(J=s.lineInRect(i.x,i.z,D,Q,$,ee,p.x-e.AI.ais[se].scale,p.z-e.AI.ais[se].scale,p.y,p.x+e.AI.ais[se].scale,p.z+e.AI.ais[se].scale,p.y+2*e.AI.ais[se].height))&&J<=1&&y.push({ai:!0,obj:e.AI.ais[se],dst:J})}var re=e.map.terrain;if(re&&!ze){var oe=re.raycast(i.x,-i.z,D,1/Q,-1/$,1/ee);if(oe){let e=s.getD3D(i.x,D,i.z,oe.x,oe.z,-oe.y);y.push({terrain:!0,dst:e/Z})}}var le=Z;if(y.length){y.sort(s.orderByDst);var ce=+i.weapon.dmg*w,de=+i.weapon.dmg*w,he=i.weapon.funcOnHit,ue=i.weapon.effectOnHit,pe=Math.floor(10*w);if(i.smite&&(ce=1e4),ce*=i.attributes.dmg,ce*=i.dmgMlt,!s.isNumber(ce)||!s.isNumber(de))break;var fe=!1;for(se=0;se<y.length;++se){if(le=Z*(p=y[se]).dst,Y<0){if(!(g||p.obj&&p.obj.noPCol||p.obj&&p.obj.noImpulse||!(p.dst>=0))){var me;te=(me=(e.mode&&e.mode.noImpulseDist?1:1-p.dst)*(U*(e.config?e.config.impulseMlt:1)*(e.mode&&null!=e.mode.impulseMlt?e.mode.impulseMlt:1)))*Math.sin(N+Math.PI)*Math.cos(F);i.velocity.x-=te;ie=me*Math.cos(N+Math.PI)*Math.cos(F);i.velocity.z-=ie;ne=me*Math.sin(F);i.velocity.y-=ne,i.onGround=!1,h||(n.velObj={x:te,y:ie,z:ne})}break}if(!this.isServer)break;var ge=!1,ve=!1,ye=i.weapon.dropStart||0,be=Math.min(1,1-(1-p.dst)*Z/(Z-ye)),we=0;if(0==(we=de>0?Math.max(0,ce-i.weapon.dmgDrop*be):Math.min(0,ce-i.weapon.dmgDrop*be))||ze)break;var xe=D+le*Math.sin(F);if(p.player&&(e.players.debugHitbox(i,p.obj,xe),0==se&&(i.hitShots++,i.active&&i.hitShotsL++),(ge=(ke=p.obj.y+p.obj.adjustedHeight-xe)<a.headScale*p.obj.headMlt)?we*=ge&&!i.weapon.noHeadShot?i.weapon.hsMlt||1.5:1:e.config&&e.config.headshotOnly&&(we=0),(ve=p.obj.y+a.legHeight-a.crouchDst*p.obj.crouchVal>xe)&&!ge&&(we*=i.weapon.lsMlt||.5)),!s.isNumber(we))break;if(h&&p.obj&&p.ai&&!ze){if(0==se&&(i.hitShots++,i.active&&i.hitShotsL++),!p.obj.invincible){var Se=+we,Me=!1,ke=p.obj.y+2*p.obj.height-xe;p.obj.critDmg&&p.obj.critHei&&ke<p.obj.critHei&&(Me=!0,Se*=p.obj.critDmg),null!=ue&&pe>0&&(p.obj.giveEffect(ue,pe),8==ue&&(p.obj.zappedBy=i.sid)),he&&he(p.obj,i),p.obj.changeHealth(-Se,i),p.obj.killScore&&e.mode&&e.mode.pointsPerHit&&this.score(i,Math.ceil(Se*e.mode.pointsPerHit),1),!p.obj.active&&p.obj.killScore&&this.score(i,p.obj.killScore,1),e.showHit(i,p.obj,Math.round(Se),Me,!0)}}else if(e.isServer&&(!e.waitTimers||e.waitTimers[0]&&e.waitTimers[0].contTime)&&p.obj&&p.obj.health&&we>0&&!p.player&&!p.spawnable){p.obj.health-=we;for(A=0;A<this.list.length;++A)(i&&i==this.list[A]||this.list[A].specStream==i.sid)&&this.list[A].send("4");p.obj.health<=0&&(p.obj.active=!1,p.obj.health=0,p.obj.destroyed=!0,p.obj.destroyedBy=i,e.map.manager.destObjs.push(p.obj.uid),e.broadcast("do",p.obj.uid),p.obj&&p.obj.onDestroy&&e.onTrigger(i,p.obj))}else h&&e.mode.teamOptions&&"Seekers"==e.mode.teamOptions[i.team-1]&&!p.player&&!p.spawnable&&p.obj&&p.obj.propID?this.changeHealth(i,null,10)&&this.kill(i):h&&(!e.waitTimers||e.waitTimers[0]&&e.waitTimers[0].contTime)&&p.obj&&p.spawnable&&(e.shootSpawnable(i,p.obj),i.send("4"));if(p.obj&&(p.obj.onShoot||p.obj.onDamage)&&e.onTrigger(i,p.obj),p.obj&&p.obj.isEvent&&e.foundEventItem(i,p.obj),p.player)m=!0,null!=ue&&pe>0&&(e.players.giveEffect(p.obj,ue,pe),8==ue&&(p.obj.zappedBy=i.sid)),this.changeHealth(p.obj,i,we,null,ge,{wep:r})&&(fe&&(i.wallbangs++,h&&(e.incStat("wb",i),G.push("wb",1))),ge&&(i.headshots++,h&&(e.incStat("hs",i),G.push("hs",1))),ve&&(i.legshots++,h&&(e.incStat("ls",i),G.push("ls",1))),this.kill(p.obj,i,{dst:p.dst,hs:ge,wb:fe,wId:r})),ce-=null==i.weapon.pierce?ce:de*a.materialDens.flesh*i.weapon.pierce;else if(p.obj&&p.obj.penetrable&&null!=i.weapon.pierce)fe=!0,ce=(ce-de*a.materialDens.default*i.weapon.pierce)*p.obj.penetrable;else{if(!p.ai||!p.obj)break;ce-=null==i.weapon.pierce?ce:de*a.materialDens.default*i.weapon.pierce}if(de>0&&ce<=0)break;if(de<0&&ce>=0)break}}if(Y>=0){le-=.12;var _e=i.x+le*Math.sin(N+Math.PI)*Math.cos(F),Te=(xe=D+le*Math.sin(F),i.z+le*Math.cos(N+Math.PI)*Math.cos(F)),Ce=0,Ie=0;y.length&&(p.terrain||xe>=p.obj.y+p.obj.height?Ie=Math.PI/2:xe<=p.obj.y-p.obj.height?Ie=-Math.PI/2:_e<=p.obj.x-p.obj.width?Ce=-Math.PI/2:_e>=p.obj.x+p.obj.width?Ce=Math.PI/2:Te<=p.obj.z-p.obj.length&&(Ce=Math.PI),!h&&c.showImpactHoles&&c.effect(_e,xe,Te,Ce,Ie,0));var Ae=i.weapon&&i.weapon.trail?1:0;if(u&&i.weapon&&i.weapon.trailChrg&&(Ae=2),h)for(se=0;se<this.list.length;++se)(this.list[se].active||this.list[se].spectating)&&this.list[se]!=i&&(!y.length||p.player||p.ai?this.list[se].send("9",[i.sid,Math.round(_e),Math.round(xe),Math.round(Te),void 0,void 0,Ae,i.x.round(1),i.y.round(1),i.height.round(1),i.z.round(1)]):this.list[se].send("9",[i.sid,Math.round(_e),Math.round(xe),Math.round(Te),Ce.round(1),Ie.round(1),Ae,i.x.round(1),i.y.round(1),i.height.round(1),i.z.round(1)]));if(i.isYou&&le>=a.tracerMinDst&&c.showTracers&&i.weaponMeshes[i.loadoutIndex]){R=new e.THREE.Vector3;if(k){var Re=s.randInt(0,i.weaponMeshes[i.loadoutIndex].muzzles.length-1);R=i.weaponMeshes[i.loadoutIndex].muzzles[Re].getWorldPosition(R)}else i.objInstances.getWorldPosition(R),R.y+=i.height/2;var Pe=i.weapon&&i.weapon.scope&&!i.currentSkin.noScope&&0==i.aimVal?7:0,Ee=R.x-Pe*Math.sin(N+Math.PI)*Math.cos(F),De=R.y-Pe*Math.sin(F),Oe=R.z-Pe*Math.cos(N+Math.PI)*Math.cos(F);if(t.tracerOffset){var Le=s.randFloat(-Math.PI,Math.PI),je=20*t.tracerOffset;Ee+=je*Math.sin(N+Math.PI/2)*Math.cos(Le),De+=je*Math.sin(Le),Oe+=je*Math.cos(N+Math.PI/2)*Math.cos(Le)}Ce=s.getDir(Oe,Ee,Te,_e),Ie=s.getDir(s.getDistance(Ee,Oe,_e,Te),xe,0,De);c.physObj(Ee,De,Oe,Ce,Ie,Math.min(le+Pe,a.tracerMaxDst),Ae,0,i)}}}G.length&&e.challenges.updateMulti(e,G,{wep:r},i)}m&&h&&e.incStat("h",i);E=e.mode&&e.mode.finiteAmmo&&!i.isBot;i.ammos[i.loadoutIndex]<=0&&i.weapon.removeOnEmpty&&(!E||E&&i.reserveAmmos[i.loadoutIndex]<=0)&&(25==i.weapon.id&&i.isJuggernaut?e.setJuggernaut(i,!1):e.players.removeWeapon(i,i.weapon.id))}}},this.interact=function(t,i,n,r){if(e.now-t.lastInteract>=a.interactTimer){if(t.lastInteract=e.now,!r){var o=e.mode&&e.mode.unrestrictedWeapons;if(6==i&&(!e.mode.teamOptions||"Infected"!=e.mode.teamOptions[t.team-1])&&(!e.mode||!e.mode.noPickups)&&((u=e.map.manager.findByUid(n,e.map.manager.pickups))&&u.active&&null!=u.pickup&&t.collides(u)&&(-1==t.loadout.indexOf(u.pickup)||o)&&e.teamCheck(u,t)&&(!e.weaponConfig[u.pickup].bomb||e.mode&&e.mode.site))){var l=u.method||0,c=t.loadout.indexOf(u.pickup),d=c>=0&&t.upgrades[c],h=o&&c>=0&l<2?d?4500:Math.ceil(u.scoreP/2):u.scoreP;if(l<2&&t.score>=h||2==l&&t.kills>=u.scoreP||3==l&&t.account||4==l&&t.account&&t.account.featured||5==l&&t.account&&t.account.premiumT>0||7==l&&t.account&&(t.account.level||0)>=u.scoreP){if(o)return e.players.giveWeapon(t,u.pickup,!1,!0),void(0==h||l||(t.send("am",[l?"Unlocked":"Purchased",l?null:-h,0,1]),l||this.score(t,-h)));i=e.weaponConfig[u.pickup].type;if(e.weaponConfig[u.pickup].bomb&&(!e.mode||!e.mode.site))return;var f=!1;p=void 0;for(var m=u.pickupAmmo,g=0;g<t.loadout.length;g++)if(e.weaponConfig[t.loadout[g]].type==i){p=t.loadout[g];var v=this.removePicked(t,t.loadout[0]);u.pickupRep&&v&&this.addPicked(t,u.pickup,u.uid),t.loadout[g]=u.pickup,t.loadoutIndex=g,u.pickupRep&&(u.pickup=p,u.pickupAmmo=t.ammos[t.loadoutIndex]),t.ammos[t.loadoutIndex]=s.isNumber(m)?m:e.weaponConfig[t.loadout[t.loadoutIndex]].ammo,t.reserveAmmos[t.loadoutIndex]=e.weaponConfig[t.loadout[t.loadoutIndex]].ammo*e.getReserveMags(e.weaponConfig[t.loadout[t.loadoutIndex]]),t.upgrades[t.loadoutIndex]=0,f=!0;break}if(!f){p=void 0,u.pickupRep&&this.addPicked(t,u.pickup,u.uid),t.loadout.push(u.pickup),t.ammos.push(s.isNumber(m)?m:e.weaponConfig[t.loadout[t.loadoutIndex]].ammo),t.reserveAmmos.push(e.weaponConfig[t.loadout[t.loadoutIndex]].ammo*e.getReserveMags(e.weaponConfig[t.loadout[t.loadoutIndex]])),t.upgrades.push(0);let i=[...t.ammos],n=[...t.reserveAmmos],a=[...t.upgrades],r=[...t.loadout];var y;t.loadout.sort((function(t,i){return e.weaponConfig[t||0].type-e.weaponConfig[i||0].type}));for(g=0;g<t.loadout.length;g++)y=r.indexOf(t.loadout[g]),t.ammos[g]=i[y],t.reserveAmmos[g]=n[y],t.upgrades[g]=~~!!a[y];t.loadoutIndex=t.loadout.indexOf(u.pickup),u.pickupRep&&(u.pickup=void 0)}let n=[...t.ammos],a=[...t.reserveAmmos],r=[...t.upgrades];e.broadcast("inat",t.sid,t.loadout,t.loadoutIndex,u.uid,u.pickupRep?p:u.pickup,!!u.active,!0,null,n,a,r,!0),t.updateLoadout(e,t.loadoutIndex,!0,t.loadout,n,a,r,!0),0==u.scoreP||l||(t.send("am",[l?"Unlocked":"Purchased",l?null:-u.scoreP,0,1]),l||this.score(t,-u.scoreP))}}if(13==i&&(!e.waitTimers||e.waitTimers[0]&&e.waitTimers[0].contTime)&&!t.hasEquipment()&&((u=e.map.manager.findByUid(n))&&u.mysteryBox&&u.active&&t.collides(u,u.tRadius))){var b=e.fireSaleTimer?10:t.sharingIsCaring?Math.ceil(u.scoreP/2):u.scoreP;if(2==u.state)-1!=u.purchasedBy&&u.purchasedBy!=t.id||-1==u.pendingWeapon||(e.players.giveWeapon(t,u.pendingWeapon,!1,!0),u.purchasedBy=void 0,u.pendingWeapon=void 0,u.timer=0,u.state=0,e.syncMysteryBox(u));else if(0==u.state&&t.score>=b){u.purchasedBy=t.id;var w=t.sharingIsCaring?0:20;u.pendingWeapon=e.getMysteryBoxWeapon(w),u.timer=a.mysteryBoxAnim,u.state=1,-1!=u.pendingWeapon&&(t.send("am",["Purchased",-b,0,1]),this.score(t,-b),e.challenges.update(e,"mybx",1,null,t));var x=-1==u.pendingWeapon?"mystery_1":"mystery_0";e.playSound(a.networkSounds.indexOf(x),.5,0,Math.round(u.x),Math.round(u.y),Math.round(u.z),!0,1,!1,null,null,!0),e.syncMysteryBox(u)}}if(15==i&&(!e.waitTimers||e.waitTimers[0]&&e.waitTimers[0].contTime)&&!t.hasEquipment()){var S=!t.upgrades[t.loadoutIndex]&&e.weaponConfig[t.loadout[t.loadoutIndex]]&&e.weaponConfig[t.loadout[t.loadoutIndex]].canUpgrade;if((u=e.map.manager.findByUid(n,e.map.manager.krumMachines))&&u.active&&t.collides(u,u.tRadius)){b=u.scoreP;if(2==u.state)-1!=u.purchasedBy&&u.purchasedBy!=t.id||(e.players.giveWeapon(t,u.pendingWeapon,!0,!0),u.purchasedBy=void 0,u.pendingWeapon=void 0,u.timer=0,u.state=0,e.syncKrumMachine(u));else if(0==u.state&&t.score>=b&&S){u.purchasedBy=t.id,u.pendingWeapon=t.loadout[t.loadoutIndex],u.timer=a.mysteryBoxAnim,u.state=1,e.players.removeWeapon(t,u.pendingWeapon),t.send("am",["Purchased",-b,0,1]),this.score(t,-b);x=-1==u.pendingWeapon?"mystery_1":"mystery_0";e.playSound(a.networkSounds.indexOf(x),.5,0,Math.round(u.x),Math.round(u.y),Math.round(u.z),!0,1,!1,null,null,!0),e.syncKrumMachine(u)}}}if(14==i&&(!e.waitTimers||e.waitTimers[0]&&e.waitTimers[0].contTime)&&t.perks.length<a.maxZombiePerks&&((u=e.map.manager.findByUid(n))&&null!=u.perk&&u.active&&t.collides(u,u.tRadius))){b=u.scoreP||0;t.score>=b&&!t.perks.includes(u.perk)&&(this.givePerk(t,u.perk),t.send("am",["Purchased",-b,0,1]),this.score(t,-b),e.playSound(30431,.5,0,Math.round(u.x),Math.round(u.y),Math.round(u.z),!0,1,!1,null,null,!0,!0),e.playSound(30220,2,0,Math.round(t.x),Math.round(t.y),Math.round(t.z),!0,1,!1,null,null,!0,!0),e.challenges.update(e,"prks",1,null,t))}if(0==i&&(!e.waitTimers||e.waitTimers[0]&&e.waitTimers[0].contTime)&&((u=e.map.manager.findByUid(n,e.map.manager.gates))&&(u.active||u.closeable)&&t.collides(u,u.tRadius)&&e.teamCheck(u,t)))((l=u.method||0)<2&&t.score>=u.scoreP||2==l&&t.kills>=u.scoreP||3==l&&t.account||4==l&&t.account&&t.account.featured||5==l&&t.account&&t.account.premiumT>0||7==l&&t.account&&(t.account.level||0)>=u.scoreP)&&(0!=u.scoreP&&(t.send("am",[l?"Unlocked":"Purchased",l?null:-u.scoreP,0,1]),l||this.score(t,-u.scoreP)),u.active=!u.active,e.broadcast("gte",u.uid,u.active));9==i&&(u=e.map.manager.findByUid(n,e.map.manager.spinners))&&u.active&&t.collides(u,u.tRadius)&&t&&t.account&&t.account.funds>=e.store.wheels[u.wheel].price&&(t.send("cnfm",u.uid,2),t.pendingSpin=u.uid,t.pendingTrigger=null),7==i&&(!e.waitTimers||e.waitTimers[0]&&e.waitTimers[0].contTime)&&(u=e.map.manager.findByUid(n))&&u.onInteractKey&&u.active&&t.collides(u,7)&&e.teamCheck(u,t)&&(u.trigActCost&&0==(u.trigActM||0)?t&&t.account&&t.account.funds>=u.trigActCost&&(t.send("cnfm",u.uid),t.pendingTrigger=u.uid,t.pendingSpin=null):e.onTrigger(t,u))}1==i&&(u=e.map.manager.findByUid(n,e.map.manager.banks))&&u.active&&t.collides(u,u.tRadius)&&e.teamCheck(u,t)&&(u.deposited>0&&r?u.withdrawAmnt&&u.deposited>u.withdrawAmnt?(u.deposited-=u.withdrawAmnt,this.score(t,u.withdrawAmnt)):(this.score(t,u.deposited),u.deposited=0):0==t.score||r||(null==u.deposited&&(u.deposited=0),u.depositAmnt&&t.score>u.depositAmnt?(u.deposited+=u.depositAmnt,this.score(t,-u.depositAmnt)):(u.deposited+=t.score,this.score(t,-t.score))),e.broadcast("bnk",u.uid,u.deposited))}},this.confirmInteract=function(t){s.isNumber(t.pendingTrigger)&&(u=e.map.manager.findByUid(t.pendingTrigger))&&u.onInteractKey&&u.active&&t.collides(u,7)&&e.teamCheck(u,t)&&e.onTrigger(t,u)},this.findEmptyPickup=function(t,i){for(var n,s=0;s<e.map.manager.pickups.length;++s)if((n=e.map.manager.pickups[s]).pickupRep&&null==n.pickup&&t==n.uid)return i?n:n.uid;return null},this.addPicked=function(e,t,i){null==e.lastPicked[t]&&(e.lastPicked[t]=i)},this.removePicked=function(e,t){var i=e.lastPicked[t];return null!=i&&delete e.lastPicked[t],null!=i},this.dropWeapon=function(t,i,n,a=!0){if(t&&e.isServer&&(!e.mode||!e.mode.noPickups)&&e.map.manager.pickups.length){var r,o=null;if(n){if(-1==(o=t.loadout.indexOf(n)))return}else o=t.loadoutIndex;var l=t.loadout[o],c=t.ammos[o],d=[t.x+s.randInt(-1,1),t.y+1,t.z+s.randInt(-1,1)];if(i){if(e.mode&&e.mode.site)return;for(var h=0;h<t.loadout.length;h++)l=t.loadout[h],c=t.ammos[h],null!=t.lastPicked[l]&&(r=this.findEmptyPickup(t.lastPicked[l]))&&!e.weaponConfig[l].melee&&(d=[t.x+s.randInt(-5,5),t.y+1,t.z+s.randInt(-5,5)],e.updatePickup(r,l,null,a,d,c),e.broadcast("inat",-1,null,null,r,l,!0,a,d));t.lastPicked={}}else if(!e.weaponConfig[l].melee){if(e.mode&&e.mode.site&&!e.weaponConfig[l].bomb)return;if(null==t.lastPicked[l])return;(r=this.findEmptyPickup(t.lastPicked[l],!0))&&(this.removePicked(t,l),e.updatePickup(r.uid,l,null,a,d,c)),t.loadout.splice(o,1),t.ammos.splice(o,1),t.reserveAmmos.splice(o,1),t.upgrades.splice(o,1);let i=[...t.ammos],n=[...t.reserveAmmos],s=[...t.upgrades],h=[...t.loadout];var u;t.loadout.sort((function(t,i){return e.weaponConfig[t||0].type-e.weaponConfig[i||0].type}));for(var p=0;p<t.loadout.length;p++)u=h.indexOf(t.loadout[p]),t.ammos[p]=i[u],t.reserveAmmos[p]=n[u],t.upgrades[p]=~~!!s[u];t.loadoutIndex=0;let m=[...t.ammos],g=[...t.reserveAmmos],v=[...t.upgrades];var f=-1==t.loadout.indexOf(12);return t.updateLoadout(e,t.loadoutIndex,!0,t.loadout,m,g,v,f),e.broadcast("inat",t.sid,t.loadout,t.loadoutIndex,r?r.uid:null,l,!!r&&r.uid,a,d,m,g,v,f),r||null}}},this.giveWeapon=function(t,i,n,s){if(!t)return;if(!h)return;var a=parseInt(i||0);if(!e.weaponConfig[a])return;if(s&&t.hasEquipment())return;var r=n?e.upgradeWeapons[a]:e.weaponConfig[a],o=!r.secondary&&!r.melee&&!r.equipment,l=!!r.secondary,c=r.melee,d=r.equipment,u=-1;if(s){var p=t.loadout.indexOf(a),f=null!=r.ammo&&e.mode&&null!=e.mode.ammoLimit?e.mode.ammoLimit:r.ammo;if(p>=0)t.ammos[p]=f,t.reserveAmmos[p]=f*e.getReserveMags(r),t.upgrades[p]=~~!!n;else{var m=t.perks.includes(6)?3:2,g=t.loadout.indexOf(12);if(r.equipment){var v=0;t.loadout.splice(v,0,r.id),t.ammos.splice(v,0,f),t.reserveAmmos.splice(v,0,f*e.getReserveMags(r)),t.upgrades.splice(v,0,~~!!n),p=Math.max(v,0)}else if(t.loadout.length>m){var y=t.loadoutIndex==g?0:t.loadoutIndex;t.loadout[y]=a,t.ammos[y]=f,t.reserveAmmos[y]=f*e.getReserveMags(r),t.upgrades[y]=~~!!n,p!=y&&(p=y)}else{v=-1==g?t.loadout.length-1:g;t.loadout.splice(v,0,r.id),t.ammos.splice(v,0,f),t.reserveAmmos.splice(v,0,f*e.getReserveMags(r)),t.upgrades.splice(v,0,~~!!n),p=Math.max(v,0)}}t.loadoutIndex=p}else{f=r.ammo;for(var b,w=void 0,x=0;x<t.loadout.length;x++)if(b=e.weaponConfig[t.loadout[x]]){if(!b.id==r.id)return;if(b.secondary||b.melee||b.equipment?b.secondary?x:b.melee?x:b.equipment&&x:u=x,o&&!b.secondary&&!b.melee&&!b.equipment){t.loadout[x]=r.id,w=x;break}if(l&&b.secondary){t.loadout[x]=r.id,w=x;break}if(c&&b.melee){t.loadout[x]=r.id,w=x;break}if(d&&b.equipment){t.loadout[x]=r.id,w=x;break}}if(null!=w)t.ammos[w]=f,t.reserveAmmos[w]=f*e.getReserveMags(r),t.upgrades[w]=~~!!n;else if(t.loadoutIndex=w,c)t.loadout.push(r.id),t.ammos.push(f),t.reserveAmmos.push(f*e.getReserveMags(r)),t.upgrades.push(~~!!n);else{v=l?-1==u?0:1:0;t.loadout.splice(v,0,r.id),t.ammos.splice(v,0,e.weaponConfig[r.id].ammo),t.reserveAmmos.splice(v,0,f*e.getReserveMags(r)),t.upgrades.splice(v,0,~~!!n)}}let S=[...t.ammos],M=[...t.reserveAmmos],k=[...t.upgrades];var _=-1==t.loadout.indexOf(12);t.updateLoadout(e,t.loadoutIndex,!0,t.loadout,S,M,k,_),e.broadcast("inat",t.sid,t.loadout,t.loadoutIndex,void 0,void 0,!1,!0,void 0,S,M,k,_)},this.removeWeapon=function(t,i){if(t&&h){var n=t.loadout.indexOf(i),s=-1==t.loadout.indexOf(12);if(-1!=n){t.loadout.splice(n,1),t.ammos.splice(n,1),t.reserveAmmos.splice(n,1),t.upgrades.splice(n,1),n<t.loadoutIndex&&t.loadoutIndex--;let i=[...t.ammos],a=[...t.reserveAmmos],r=[...t.upgrades];t.updateLoadout(e,t.loadoutIndex,!0,t.loadout,i,a,r,s),e.broadcast("inat",t.sid,t.loadout,t.loadoutIndex,void 0,void 0,!1,!0,void 0,i,a,r,s)}}},this.replaceLoadout=function(t,i){t&&h&&(t.updateLoadout(e,0,!0,i),e.broadcast("inat",t.sid,i,0,void 0,void 0,!1))},this.clearLoadout=function(t){t&&h&&(1!=t.loadout.length||12!=t.loadout[0])&&(t.updateLoadout(e,0,!0,[12]),e.broadcast("inat",t.sid,[12],0,void 0,void 0,!1))},this.enoughKR=function(e,t){return!!e&&(e.isYou?window.canAfford(t):e.account&&e.account.funds>=t)};var b="",w="",x={},S=[3,10,11,12],M={id:-1,type:-1};this.clearInteract=function(e){e.isYou&&(M.id=-1,M.type=-1,e.lastInteractData.id=-1,e.lastInteractData.type=-1,x.active=!1,x.type=null,x.data=null,x.obj={},x.priority=0)},this.changeInteract=function(e,t,i,n,s){if(e.isYou){if(S.includes(i)||(M.id=t?t.isPlayer?t.sid:t.uid:-1,M.type=i),t&&t.noMsg)return;x.enabled=!0,x.active=!0,(null==s&&i!=x.type||(s||0)>=(x.priority||0))&&(x.priority=s,x.type=i,x.data=n,x.obj=t||{})}},this.updateInteract=function(t){if(t.isYou&&(t.lastInteractData.id=M.id,t.lastInteractData.type=M.type),x.enabled&&interactMsg){var i=e.controls&&e.controls.isMobile,n=(i?77:220)+"px";if(t.isYou){if(x.active){var o="";if(0==x.type){i&&(o="window.pressButton("+e.controls.binds.interact.val+");");var l=(u=x.obj.method||0)<2&&t.score>=x.obj.scoreP||2==u&&t.killsC>=x.obj.scoreP||3==u&&t.level||4==u&&t.featured||5==u&&t.premiumT>0||7==u&&t.level>=x.obj.scoreP;b=(i?"Tap":'Press <span style="color:'+r.interactPopup.key+'">['+s.getKeyName(e.controls.binds.interact.val)+"]</span>")+" to "+(x.obj.interactMsg||(!x.obj.active&&x.obj.closeable?"Close":"Open")+" gate")+(0!=x.obj.scoreP||u>2?" <span style='color:"+(l?r.interactPopup.enough:r.interactPopup.notEnough)+"'>["+(u>2&&7!=u?(3==u?"Account":4==u?"Verified":"Premium")+" Only":(7==u?"Level ":"")+x.obj.scoreP||0)+(2==u?" Kills":"")+"]</span>":"")}else if(1==x.type)b="<span style='color:"+r.interactPopup.notEnough+"'>["+s.commaFormatNum(x.obj.deposited||0)+"]</span><div style='color: #fff;margin-top:-30px;'>Press <span style='color:"+r.interactPopup.key+"'>["+s.getKeyName(e.controls.binds.interact.val)+"]</span> to Deposit - "+(x.obj.depositAmnt||"All")+"</div><div style='color: #fff;margin-top:-30px;'>Press <span style='color:"+r.interactPopup.key+"'>["+s.getKeyName(e.controls.binds.secondaryInteract.val)+"]</span> to Withdraw - "+(x.obj.withdrawAmnt||"All")+"</div>";else if(2==x.type);else if(3==x.type)b='Press <span style="color:'+r.interactPopup.key+'">',1==x.data?b+="["+s.getKeyName(10001)+"]</span> to Plant":2==x.data?b+="["+s.getKeyName(e.controls.binds.equip.val)+"]</span> to Equip Bomb":3==x.data&&(b+="["+s.getKeyName(10001)+"]</span> to Diffuse");else if(4==x.type)i&&(o="window.pressButton(10001);"),b=(i?"Hold":'Hold <span style="color:'+r.interactPopup.key+'">['+s.getKeyName(10001)+"]</span>")+" to "+(x.obj.interactMsg||"Interact");else if(5==x.type)i&&(o="window.pressButton("+e.controls.binds.interact.val+");"),b=(i?"Tap":'Press <span style="color:'+r.interactPopup.key+'">['+s.getKeyName(e.controls.binds.interact.val)+"]</span>")+" to Trade with <span style='color:#9eeb56'>["+(x.obj.fakeName||(x.obj.premiumT?x.obj.alias:x.obj.name))+"]</span>";else if(6==x.type){i&&(o="window.pressButton("+e.controls.binds.interact.val+");");var c=t.loadout.indexOf(x.obj.pickup),d=c>=0&&t.upgrades[c],h=d?e.upgradeWeapons[x.obj.pickup]:e.weaponConfig[x.obj.pickup],u=x.obj.method||0,p=e.mode&&e.mode.unrestrictedWeapons,f=p&&c>=0&u<2?d?4500:Math.ceil(x.obj.scoreP/2):x.obj.scoreP;l=u<2&&t.score>=f||2==u&&t.killsC>=x.obj.scoreP||3==u&&t.level||4==u&&t.featured||5==u&&t.premiumT>0||7==u&&t.level>=x.obj.scoreP;b=(i?"Tap":'Press <span style="color:'+r.interactPopup.key+'">['+s.getKeyName(e.controls.binds.interact.val)+"]</span>")+" to "+(p&&u<2?"buy "+h.name+(c>=0?" ammo":""):x.obj.interactMsg||"pickup "+h.name)+(0!=f||u>2?" <span style='color:"+(l?r.interactPopup.enough:r.interactPopup.notEnough)+"'>["+(u>2&&7!=u?(3==u?"Account":4==u?"Verified":"Premium")+" Only":(7==u?"Level ":"")+f||0)+(2==u?" Kills":"")+"]</span>":"")}else if(7==x.type){var m=t.pendingTrigger==x.obj.uid;i&&(o="window.pressButton("+e.controls.binds[m?"confirm":"interact"].val+");"),b=(i?"Tap":'Press <span style="color:'+r.interactPopup.key+'">['+s.getKeyName(e.controls.binds[m?"confirm":"interact"].val)+"]</span>")+" to "+(m?"Confirm":x.obj.interactMsg||"Interact");u=x.obj.trigActM||0;if(x.obj.trigActCost||u>3){l=0==u?window.canAfford(x.obj.trigActCost||0):u<3&&t.score>=(x.obj.trigActCost||0)||3==u&&t.killsC>=(x.obj.trigActCost||0)||4==u&&t.level||5==u&&t.featured||6==u&&t.premiumT>0||8==u&&t.level>=(x.obj.trigActCost||0);var g=0==u?" KR":3==u?" Kills":"",v=0==u?"Costs ":"";b+=0!=(x.obj.trigActCost||0)||u>3?" <span style='color:"+(l?r.interactPopup.enough:r.interactPopup.notEnough)+"'>["+v+(u>3&&8!=u?(4==u?"Account":5==u?"Verified":"Premium")+" Only":(8==u?"Level ":"")+x.obj.trigActCost||0)+g+"]</span>":""}}else if(9==x.type){var y=e.store.wheels[x.obj.wheel];m=t.pendingSpin==x.obj.uid;i&&(o="window.pressButton("+e.controls.binds[m?"confirm":"interact"].val+");"),b=(i?"Tap":'Press <span style="color:'+r.interactPopup.key+'">['+s.getKeyName(e.controls.binds[m?"confirm":"interact"].val)+"]</span>")+" to "+(m?"Confirm":x.obj.interactMsg||"Spin")+" "+y.name;l=window.canAfford(y.price);b+=" <span style='color:"+(l?r.interactPopup.enough:r.interactPopup.notEnough)+"'>["+y.price+" KR]</span>"}else if(10==x.type)i&&(o="window.pressButton("+e.controls.binds.interact.val+");"),b=(i?"Hold":'Hold <span style="color:'+r.interactPopup.key+'">['+s.getKeyName(e.controls.binds.interact.val)+"]</span>")+" to Claim <span style='color:"+x.obj.rarCol+"'>"+x.obj.name+"</span>";else if(11==x.type)n="50%",i&&(o="window.pressButton("+e.controls.binds.interact.val+");"),b=(i?"Tap":'Press <span style="color:'+r.interactPopup.key+'">['+s.getKeyName(e.controls.binds.interact.val)+"]</span>")+" to view on Opensea";else if(12==x.type)b=x.data;else if(13==x.type){i&&(o="window.pressButton("+e.controls.binds.interact.val+");");var S=x.obj.state>=2&&null!=x.obj.pendingWeapon,k=e.fireSaleTimer?10:t.sharingIsCaring?Math.ceil(x.obj.scoreP/2):x.obj.scoreP;l=t.score>=k;b=(i?"Tap":'Press <span style="color:'+r.interactPopup.key+'">['+s.getKeyName(e.controls.binds.interact.val)+"]</span>")+(S?" for weapon":" for a Random Weapon <span style='color:"+(l?r.interactPopup.enough:r.interactPopup.notEnough)+"'>[Cost "+(k||0)+"]</span>")}else if(14==x.type)if(t.perks.length>=a.maxZombiePerks)b="<span style='color:"+r.interactPopup.notEnough+"'>Perk limit reached</span>";else{i&&(o="window.pressButton("+e.controls.binds.interact.val+");");k=x.obj.scoreP,l=t.score>=k;b=(i?"Tap":'Press <span style="color:'+r.interactPopup.key+'">['+s.getKeyName(e.controls.binds.interact.val)+"]</span>")+" to buy "+a.zombiePerks[x.obj.perk]+" <span style='color:"+(l?r.interactPopup.enough:r.interactPopup.notEnough)+"'>[Cost "+(k||0)+"]</span>"}else if(15==x.type){i&&(o="window.pressButton("+e.controls.binds.interact.val+");");S=x.obj.state>=2&&null!=x.obj.pendingWeapon,k=x.obj.scoreP,l=t.score>=k;b=(i?"Tap":'Press <span style="color:'+r.interactPopup.key+'">['+s.getKeyName(e.controls.binds.interact.val)+"]</span>")+(S?" to take your upgraded weapon":" to Krum It <span style='color:"+(l?r.interactPopup.enough:r.interactPopup.notEnough)+"'>[Cost "+(k||0)+"]</span>")}w!=b&&(w=b,interactMsg.innerHTML=b),i&&interactMsg.getAttribute("ontouchstart")!=o&&interactMsg.setAttribute("ontouchstart",o)}x.active||""==interactMsg.innerHTML||(interactMsg.innerHTML="",interactMsg.setAttribute("ontouchstart",""),w="");var _=x.active?"block":"none";interactMsg.style.display!=_&&(interactMsg.style.display=_),interactMsg.style.bottom!=n&&(interactMsg.style.bottom=n)}}};var k=[];this.syncLeaders=function(t,i){if(t){var n=e&&e.mode&&e.mode.showAllLeaders,r=e.mode.leaderStats||["score"],o=this.list.slice().filter((t=>t&&(!t.isBot||t.isBot&&!e.mode.botsAsAI)));f=e.mode.killSort?o.sort(s.orderByKills):e.mode.leaderSort?o.sort(e.mode.leaderSort):o.sort(s.orderByScore);for(var l=0;l<e.players.list.length;l++){k.length=0;var c=0;if(!(null!=i&&i!=e.players.list[l].id||e.players.list[l].isBot&&e.mode.botsAsAI)){for(var d=0;d<f.length;++d)if((n||!f[d].spectating)&&c<16){c++,k.push(f[d].sid);for(var h=0;h<r.length;++h)k.push(a.endForm[r[h]]?a.endForm[r[h]](f[d][r[h]],e,f[d]):f[d][r[h]])}e.players.list[l].send("7",k)}}e.leadersUpdated=!1}else e.leadersUpdated=!0},this.resetToStart=function(t){e.mode&&e.mode.allowReset&&t&&t.initPos&&(this.endGrapple(t),t.timeLog=0,t.gameTime=0,t.lastTimer=null,t.resetTimer=250,t.x=t.initPos.x,t.y=t.initPos.y,t.z=t.initPos.z,t.velocity.x=0,t.velocity.y=0,t.velocity.z=0,t.coverDis=0,t.scoreObjs={},e.isServer&&(t.send("t","00:00.0"),this.score(t,0,0,!0),t.checkPoint=null,t.checkPointList.length=0,t.send("chp",!0)),h||(l.play("bhop_reset",.9),e.mode.custUI&&e.mode.custUI(e,a,!0)))},this.resetToLast=function(t){if(e.mode&&e.mode.allowReset&&t){let i=e.map.manager.objects[t.checkPoint];if(!i)return;this.endGrapple(t);let n=t.checkPointData;t.resetTimer=250,t.x=i.x,t.y=i.y-i.height+.01,t.z=i.z,t.velocity.x=0,t.velocity.y=0,t.velocity.z=0;let a=i.forceDir?i.dir:void 0;null!=a&&(t.xDire=-((a||0)+1)*Math.PI/2,t.isYou&&(e.controls.object.rotation.y=t.xDire,e.controls.xDr=e.controls.object.rotation.y%Math.PI2)),e.config.lstChkT&&(t.timeLog=n[0]||0,t.gameTime=n[1]||0,t.lastTimer=s.getTime(t.gameTime,!0,!0,1e3,parseInt(t.gameTime)>=864e5,2),e.isServer&&t.send("t",t.lastTimer)),h||l.play("bhop_reset",.9)}},this.logTime=function(t){if(e.isServer&&e.doLogTime){t.timeLog++;var i=e.gameTimer;if(e.mode&&e.mode.ownTime&&e.canOwnTime&&(i=t.gameTime),t.send("gt",i,t.timeLog),t.timeLog==e.map.manager.scorezones.length){var n=s.getTime(i,!0,parseInt(i)>=36e5,1e3,parseInt(i)>=864e5,2);e.broadcast("ch",0,null,t.name+" finished in "+n,2),t.send("t",n)}}},this.teamScore=function(t,i){e.giveTeamScore(t.team,i)},this.saveClassScores=function(t){var i;if(t.classScores&&e.isPubType())for(var n=0;n<e.config.classes.length;++n)i=e.config.classes[n],t.classScores[i]&&(t.account.stats["c"+i]||(t.account.stats["c"+i]=0),t.account.stats["c"+i]+=t.classScores[i])},this.saveWeaponStats=function(e){},this.giveAssist=function(t){t&&(t.assists++,e.incStat("ast",t),e.challenges.update(e,"ast",1,null,t),this.score(t,a.assistScore,1),t.send("10"),e.incMedal("Assist",t))},this.score=function(t,i,n,r){if(t&&e&&e.isServer){var o=(t.account&&t.account.score||0)+t.score;if(t.attributes&&t.attributes.xpMlt&&(i=parseInt(i*t.attributes.xpMlt)),1==n&&e&&e.mode&&e.mode.killMlt&&(i=Math.ceil(i*(e.mode.killMlt+t.killMlt))),1==n&&e&&e.mode&&e.mode.oneflag){var l=e.mode.teams&&e.flagTeam==t.team,c=e.flagCarrier==t.sid;i=Math.ceil(i*(c?e.mode.carrierMlt:l?e.mode.teamCarrierMlt:e.mode.nonCarrierMlt))}e.isDoubleXP&&(i*=2),e.doublePointsTimer&&i>0&&(i*=2),r?t.score=i:1==n&&e.mode.noScoreK||(t.score+=i,t.active&&(t.scoreL+=i)),!(e.isPubType()&&t.score>13e3)||t.account&&t.account.isDev||e&&e.mode&&e.mode.noScrLimit||(t.score=13e3,i=0);var d,h=e.config.keepTScore&&2!=n;if(e&&e.mode&&(e.mode.objective||e.mode.oneflag)&&1!=n&&!h&&(r?t.objectiveScore=i:t.objectiveScore+=i),e&&e.isPubType()&&(!e.mode||!e.mode.noClassScr)&&!r){var u=!!e.mode&&null!=e.mode.randClassScr,p=u?s.getRandom(e.config.classes):t.classIndex,f=Math.floor(i*(e&&e.isDoubleClassXP?2:1)*(u?e.mode.randClassScr:1));t.classScores||=[],t.classScores[p||0]||=0,t.classScores[p||0]+=f,d=p}t&&t.send&&t.send("5",i,!1,!!r,d);for(var m=0;m<this.list.length;++m)this.list[m]&&this.list[m].send&&this.list[m].specStream==t.sid&&this.list[m].send("5",i,1,!!r);if(this.syncLeaders(),!(e&&e.mode&&e.mode.teams&&t.team&&e.teamScores)||h||e.mode.noScoreC||1==n&&(e.mode.objective||e.mode.oneflag)||this.teamScore(t,i),e&&e.challenges.update(e,"score",i,null,t),t.account&&e.isPubType()){var g=t.account.score+t.score;if(o>=g)return;var v=Math.max(1,Math.floor(a.rankVar*Math.sqrt(o))),y=Math.max(1,Math.floor(a.rankVar*Math.sqrt(g)));y>v&&t.send("am",[39,"Lvl "+y,1,1])}}},this.tickPlayer=function(t,i){if(t){if(t.playTime+=i,e.doLogTime&&e.mode&&e.mode.ownTime&&t.coverDis>=1&&e.canOwnTime&&(t.gameTime+=i,!e.mode.logTime||t.timeLog<e.map.manager.scorezones.length)){var n=s.getTime(t.gameTime,e.mode.showMS,parseInt(t.gameTime)>=36e5,100,parseInt(t.gameTime)>=864e5);n!=t.lastTimer&&(t.lastTimer=n,t.send("t",s.getTime(t.gameTime,e.mode.showMS,parseInt(t.gameTime)>=36e5,1e3,parseInt(t.gameTime)>=864e5,2)))}if(t.hitTimer>0&&(t.hitTimer-=i),t.ticker-=i,t.ticker<=0&&(t.ticker=500,t.tickerC++,t.hitTimer<=0&&!t.challMode&&!t.isJuggernaut&&t.regen&&this.changeHealth(t,null,-t.maxHealth*(t.regen||0)),e.isServer&&t.attributes.enraged&&t.tickerC%8==0&&this.changeHealth(t,null,t.attributes.enraged)&&this.kill(t),e.isServer&&t.attributes.zap&&t.tickerC%2==0)){t.send("so",e.getSoundIndex("zap_0"),.5,1,null,null,null,s.randFloat(1,1.75));var a=t.zappedBy?e.players.findBySid(t.zappedBy):null;this.changeHealth(t,a,t.attributes.zap)&&this.kill(t,a||null,{wId:24})}for(var r=0;r<t.attributeTimers.length;r++)if(t.attributeTimers[r].length)for(var o=t.attributeTimers[r].length-1;o>=0;--o)t.attributeTimers[r][o]-=i,t.attributeTimers[r][o]<=0&&(t.attributeTimers[r].splice(o,1),e.players.removeEffect(t,r,1));t.y<=e.map.deathY&&!t.godMode&&(t.flag&&(e.resetFlag(t.flag),t.flag=null),this.kill(t))}},this.updateAssetID=function(t,i){i+="",t.config.mdl&&i.length&&(t.assetTxt=i,e.isServer&&e.broadcast("uai",t.sid,i),t.active&&this.regenMeshes(t))},this.setHealth=function(e,t){if(!e.godMode&&s.isNumber(t)){var i=e.health;e.health=t,s.isNumber(e.health)||(e.health=i),e.send("h",Math.ceil(e.health));for(var n=0;n<this.list.length;++n)this.list[n]&&this.list[n]!=e&&this.list[n].send("h",Math.ceil(e.health),e.sid);return e.health<=0}},this.changeHealth=function(t,i,n,a,r){if((!e.waitTimers||e.waitTimers[0].canDMG)&&(i&&i.team&&(n*=e.config["t"+i.team+"Dmg"]||0),s.isNumber(n))&&(n>=0||t.health!=t.maxHealth)&&(i&&i.account&&i.account.hack&&n&&(n*=0),i&&i.noDmg&&(n*=0),i&&i.isHacker&&(n*=0),a||n<=0||e.mode.dmgTeam||e.config.frFire||!t.team||!i||t.team!=i.team||n<=0)){var o=(n=n.round(1))<=0?0:Math.max(n>t.health?t.health:n,0),l=t.health;if(t.health-=n,t.health=Math.max(Math.min(t.maxHealth,t.health),0),t.godMode&&(t.health=t.maxHealth),t.isBot&&e.bots&&e.bots.config&&e.bots.config.godMode&&(t.health=t.maxHealth),!s.isNumber(t.health))return void(t.health=l);if(i&&i.isPlayer&&i!=t&&i.send("4",t.sid,n,r,l-n<=0),t.dummy)return!0;n>0&&(t.hitTimer=t.regenDelay||0),i&&i.isPlayer?(t&&t.send("h",t.health,null,Math.round(i.x),Math.round(i.z)),i!=t&&o>0&&(i.dmgDealt+=o,t.dmgReceived[i.id]?(t.dmgReceived[i.id].val+=o,t.dmgReceived[i.id].time=e.now):t.dmgReceived[i.id]={time:e.now,val:o})):i?t&&t.send("h",t.health,null,Math.round(i.x),Math.round(i.z)):t&&t.send("h",t.health);for(var c=0;c<this.list.length;++c)this.list[c]&&this.list[c]!=t&&this.list[c].send("h",t.health,t.sid),i&&i.isPlayer&&i!=t&&n>0&&this.list[c]&&this.list[c].specStream==i.sid&&this.list[c].send("4",t.sid,n,r);return n>0&&t.health>0&&(e.playerTrigger("onPlayerDamage",t),e&&e.mainScript&&e.mainScript.onPlayerDamage&&e.mainScript.onPlayerDamage(t.id+"",i?i.id+"":"",n)),t.health<=0}},this.changePosition=function(t,i,n,s,a,r,o,l){t&&(t.oldX=i,t.oldY=n,t.oldZ=s,t.x=i,t.y=n,t.z=s,null!=o&&(t.xDire=-((o||0)+1)*Math.PI/2,t.isYou&&(e.controls.object.rotation.y=t.xDire,e.controls.xDr=e.controls.object.rotation.y%Math.PI2)),r&&(t.lastX=i,t.lastY=n,t.lastZ=s,t.stepVal=0,t.velocity.x=0,t.velocity.y=0,t.velocity.z=0),this.endGrapple(t),a&&(t.doRecon=!0),l&&e.broadcast("chgp",t.id,i,n,s,a,r,o))},this.swapSecondary=function(t,i){if(t.ammos.length>1)for(var n=e.mode&&e.mode.unrestrictedWeapons,s=0;s<t.ammos.length;++s){var a=t.loadout[s],r=t.loadoutIndex<=t.ammos.length-2;if(e.weaponConfig[a]&&(n?!e.weaponConfig[a].melee&&(r?t.loadoutIndex<s:t.loadoutIndex!=s):e.weaponConfig[a].secondary)&&(t.loadoutIndex==s?this.swapWeapon(t,null,null,void 0,0,i):this.swapWeapon(t,null,null,void 0,s,i),n))break}},this.swapEquipment=function(t,i){if(t.ammos.length>1)for(var n,s=0;s<t.ammos.length;++s)n=t.loadout[s],e.weaponConfig[n]&&e.weaponConfig[n].equipment&&(t.loadoutIndex==s?this.swapWeapon(t,null,null,void 0,0,i):this.swapWeapon(t,null,null,void 0,s,i))},this.swapMelee=function(t,i){if(t.ammos.length>1)for(var n,s=0;s<t.ammos.length;++s)n=t.loadout[s],e.weaponConfig[n]&&e.weaponConfig[n].melee&&(t.loadoutIndex==s?this.swapWeapon(t,1,!1,void 0,void 0,i):this.swapWeapon(t,null,null,void 0,s,i))},this.swapWeapon=function(i,n,a,r,o,c){if((i.ammos.length>1||!n)&&r<=i.ammos.length){var d=i.loadoutIndex,h=null!=i.loadout[d]&&e.weaponConfig[i.loadout[d]]&&e.weaponConfig[i.loadout[d]].noSwap;if(n||a||r!=d||null!=o||c){n&&(1!=n&&-1!=n&&(n=0),i.loadoutIndex+=n,1==n?i.loadoutIndex>i.ammos.length-2&&(i.loadoutIndex=0):i.loadoutIndex<0?i.loadoutIndex=Math.min(i.ammos.length-1,i.weaponLimit):i.loadoutIndex=0),null!=r&&(i.loadoutIndex=r),null!=o&&(i.loadoutIndex=o),null==n&&null==o||d==i.loadoutIndex&&!a||(i.isYou&&this.resetReloadUIAnim(),i.reloadTimer=0,i.cantShootTimer=0,i.didShoot=!1,i.burstCount=0,i.chargeTime=0,i.fullCharge=!1);var u=null!=i.loadout[i.loadoutIndex]&&e.weaponConfig[i.loadout[i.loadoutIndex]]&&e.weaponConfig[i.loadout[i.loadoutIndex]].noSwap;if(h&&!u&&(i.loadoutIndex=d),i.weapon=e.players.getWeapon(i,i.loadoutIndex),i.weapon||(i.weapon=e.weaponConfig[i.loadout[0]],i.weapon&&(i.loadoutIndex=0)),c||d==i.loadoutIndex||this.endGrapple(i),t&&(d!=i.loadoutIndex||a)){this.cancelInspect(i);for(var p=0;p<i.weaponMeshes.length;++p)i.weaponMeshes[p].visible=!1;i.weaponMeshes[i.loadoutIndex]&&(i.weaponMeshes[i.loadoutIndex].visible=!this.isWeaponHidden(i,i.loadoutIndex)||!i.renderYou,i.isYou&&(i.weapon.melee?(i.armMeshes[0]&&(i.armMeshes[0].visible=t.showHands),i.armMeshes[1]&&(i.armMeshes[1].realMat||(i.armMeshes[1].realMat=i.armMeshes[1].material),i.armMeshes[1].material=t.showHands?i.armMeshes[1].realMat:t.invisMat)):i.mergedArmMeshes[i.loadoutIndex]&&(i.mergedArmMeshes[i.loadoutIndex].visible=t.showHands)))}if(null==r&&i.weapon&&(!t||i.isYou)&&(i.isYou&&d==i.loadoutIndex&&!a||c||(i.swapTime=i.weapon.swapTime),i.isYou&&(d!=i.loadoutIndex||a))){var f=e.controls.toggleADS[(t.vmSetts?i.loadout[d]:-1)+1],m=e.controls.toggleADS[(t.vmSetts?i.loadout[i.loadoutIndex]:-1)+1];e.controls.adsToggled&&f&&!m&&(e.controls.adsToggled=!1);var g="",v=i.loadout.toString()===i.lastLoadout.toString()&&i.skins.toString()===i.lastSkins.toString()&&weapHolder.innerHTML.length;for(p=0;p<i.ammos.length;++p){var y=p==i.loadoutIndex?1:.5,b=e.players.getWeapon(i,p);if(b.icon){var w=e.store.skins[b.melee?i.meleeIndex:i.getSkinForLoadout(p)],x=!!b.local||!!i.canThrow&&!!b.melee&&!!w&&!!w.local,S=s.assetsUrl((i.canThrow&&b.melee?"/textures/melee/icon_"+(w&&w.id||0):"/textures/weapons/"+b.icon)+".png",void 0,x);if(b.assetIcon&&b.assetIcon.length&&(S=s.userAssetsUrl("/"+b.assetIcon.replace(/[^\d]/g,"")+"/texture.png")),v){var M=document.getElementById("weapItem_"+p);M.style.opacity!=y&&(M.style.opacity=y),M=M.firstElementChild,i.lastThrow!=i.canThrow&&(M.lastChild.src=S),p>0&&!t.isMobile&&(M.firstChild.textContent=b.melee?s.getKeyName(e.controls.binds.melee.val):b.equipment?s.getKeyName(e.controls.binds.equip.val):s.getKeyName(e.controls.binds.swap.val))}else{let n=i.currentStreakWeapon==b.id&&i.weaponStreak?i.weaponStreak:0;g+="<div class='weapItem' id='weapItem_"+p+"' style='opacity:"+y+'\'><div class="weapItemInner">'+(p>0&&!t.isMobile?"<div class='weapKey'>"+(b.melee?s.getKeyName(e.controls.binds.melee.val):b.equipment?s.getKeyName(e.controls.binds.equip.val):s.getKeyName(e.controls.binds.swap.val))+"</div>":"")+"<span class='weapSkin"+(w&&5==w.rarity?" whiteShad":"")+"' style='color:"+(w?e.store.rarities[w.rarity||0].color:"#fff")+"'>"+(w?w.name:b.name)+"</span><div class='weapStreakHolder' data-weapon-index='"+b.id+"' style='display:"+(n?"block":"none")+"'><div class='weapStreakInner'><span class='weapStreak'>"+n+"</span><span style='color: var(--yellow)'>KS</span></div></div><img class='weapIcon' src='"+S+"' "+(b.melee?"id='weapIconMel' ":"")+"/></div></div>"}}b.melee&&(i.lastThrow=i.canThrow)}c||(i.swapTween&&i.swapTween.stop(),i.swapTweenA=.5,i.swapTween=new TWEEN.Tween(i).to({swapTweenA:1},1200).easing(TWEEN.Easing.Elastic.Out).start(),d!=i.loadoutIndex&&1==i.aimVal&&(i.swapTweenAnim&&i.swapTweenAnim.stop(),i.swapTweenR=i.weapon.swapWiggle||.6,i.swapTweenAnim=new TWEEN.Tween(i).to({swapTweenR:0},i.weapon.swapTime+220).easing(TWEEN.Easing.Back.InOut).start()),d!=i.loadoutIndex&&(i.weapon.swapSnd&&l.play(i.weapon.swapSnd,.05),i.meleeAnim.anim&&i.meleeAnim.anim.stop(),i.resetMeleeAnim(),1==i.aimVal&&(i.meleeAnim.armR=-.3,i.weapon.melee&&(i.currentMelee&&(i.currentMelee.equipAnim||i.currentMelee.flipAnim)&&(i.meleeAnim.weaR=-4*Math.PI),i.canThrow&&l.play("melee_equip",.06,!1,1.5),i.meleeAnim.anim=new TWEEN.Tween(i.meleeAnim).to({armR:0,weaR:0},310).easing(TWEEN.Easing.Sinusoidal.Out).start())))),v||(weapHolder.innerHTML=g),i.lastLoadout=[...i.loadout],i.lastSkins=[...i.skins],this.updatePlayerAmmo(i),this.updatePlayerFov(i)}}}},this.taunt=function(t,i,n){t&&t.active&&a.taunts[i]&&(n||!t.lastTaunt||e.now-t.lastTaunt>=0)&&(t.lastTaunt=e.now+a.taunts[i].tm,e.playSound(a.taunts[i].id,.3,t.sid,t.x,t.y,t.z,!0,s.randFloat(.9,1)))},this.useStreak=function(t,i){e&&e.endTimer||t.streaks[i]&&t.streaks[i].streak.activate(e,t,h)&&(t.streaks[i].cnt>1?t.streaks[i].cnt--:t.streaks[i]=null,t.send("st",i,t.streaks[i]&&t.streaks[i].cnt||0),e.challenges.update(e,"stk",1,{stk:i},t))},this.checkStreak=function(t,i){if(t&&t.active&&e&&s.isNumber(i)){var n=parseInt(t.streakIndexs[i]);if(t.streaks[n])e.players.useStreak(t,n);else for(var a in t.streaks)if(t.streaks[a]&&e.streaks[a]&&e.streaks[a].slot==i){e.players.useStreak(t,a);break}}},this.updateStreaks=function(t){for(var i=0;i<t.streakIndexs.length;++i)e.streaks[t.streakIndexs[i]]&&(!e.streaks[t.streakIndexs[i]].devOnly||t.account&&t.account.isDev)&&(e&&e.mode&&e.mode.disabledStreaks&&!(e.mode.disabledStreaks.indexOf(t.streakIndexs[i])<0)||t.realKillStreak==e.streaks[t.streakIndexs[i]].kills&&this.addStreak(t,t.streakIndexs[i]));t.realKillStreak>=t.maxPossibleStreak&&(t.realKillStreak=0)},this.addStreak=function(t,i){e.streaks[i].noCustoms&&e.isCustom||!e.isSandbox&&e.streaks[i].reqAccount&&!t.account||(t.streaks[i]?t.streaks[i].cnt++:t.streaks[i]={cnt:1,streak:e.streaks[i]},t.send("st",i,t.streaks[i].cnt))},this.givePerk=function(t,i){t&&!t.perks.includes(i)&&(t.perks.push(i),0==i&&(t.maxHealth=250,t.health=250,e.broadcast("h",t.health,t.sid,null,null,!0,!0)),e.broadcast("upk",t.sid,t.perks))},this.giveEffect=function(t,i,n,a,r){n=n||1,a&&(i=s.randInt(0,e.effectConfig.length-1));var o=e.effectConfig[i];if(t&&o){if(t.effects[i]?t.effects[i]+=n:t.effects[i]=n,!r&&t.effects[i]>o.max){var l=t.effects[i]-o.max;if(t.effects[i]=o.max,o.timer)for(var c=0;c<l;c++)t.attributeTimers[i][c]?t.attributeTimers[i][c]=1e3*o.timer:t.attributeTimers[i].push(1e3*o.timer);return}if(o.timer)for(c=0;c<n;c++)t.attributeTimers[i].push(1e3*o.timer);o.execute(e,t),t.send("am",[o.mid,"x"+t.effects[i],0,1]),t.send("pk",i,t.effects[i])}},this.removeEffect=function(t,i,n){var s=!0,a=e.effectConfig[i];n&&t.effects[i]&&(t.effects[i]--,s=t.effects[i]<=0),s?this.clearEffect(t,i):(a.execute(e,t),t.send("pk",i,t.effects[i]))},this.clearEffect=function(t,i){var n=e.effectConfig[i];t.effects[i]&&=null,t.attributes[n.key]=n.def,t.attributeTimers[n.index].length=0,n.clear&&n.clear(t),e.isServer&&t.send("pk",i,null)},this.isBoosted=function(t,i){return a.isProd&&!e.isSandbox&&!!t&&!!h&&!!h.sockets&&!!h.sockets[t.id]&&!!(i&h.sockets[i.id])&&h.sockets[t.id].remoteAddress==h.sockets[i.id].remoteAddress},this.kill=function(t,i,n,s,r){if(t.dummy||t.active){i&&!i.isPlayer&&(i=null);var o=t&&t.isBot,l=i&&i.isBot,c=e&&e.mode&&e.mode.botsAsAI;l&&c&&(i=null),o&&c&&(s=!0),e&&e.mode&&e.mode.noKillFeed&&(s=!0);var d=!1,u=-1;if(t.dummy||(t.active=!1,t.isYou&&this.toggleAim(t,0),t.objInstances&&this.disposeMesh(t)),e.isServer){var p,f=0,m=n&&null!=n.stk;if(e.waitTimers&&e.waitTimers[0]&&!e.waitTimers[0].contTime||(t.deaths++,t.kdr=parseFloat((t.kills||1)/(t.deaths||1)).round(2),t.deathsL++,e.challenges.update(e,"d",1,null,t)),t.lastKiller=null,t.deathInfo||={},t.deathInfo.time=e.now,t.deathInfo.tillNext=e.forceSpawn?1e3*e.forceSpawn+a.deathDelay:null,e.mode.noStreaks||e.config.noStreaks||t.deathStreak++,t.lives&&(!e.waitTimers||e.waitTimers&&e.waitTimers[0].contTime)&&(t.lives--,t.send("lv",t.lives)),e.kills++,i&&(u=n&&null!=n.wId?n.wId:i.loadout[i.loadoutIndex]),!i||i==t||c&&o||(t.lastKiller=i.id,i.weaponStats[u]||(i.weaponStats[u]={}),t.dummy||(i.kills++,i.kdr=parseFloat((i.kills||1)/(i.deaths||1)).round(2),i.active&&i.killsL++,t.account||0!=t.kills||i.sussKills++,m?e.challenges.update(e,"k",1,null,i):(i.weaponStats[u].kills||(i.weaponStats[u].kills=0),i.weaponStats[u].kills++,e.challenges.update(e,"k",1,{wep:u},i),n&&n.hs&&(i.weaponStats[u].headshots||(i.weaponStats[u].headshots=0),i.weaponStats[u].headshots++),n&&n.ls&&(i.weaponStats[u].legshots||(i.weaponStats[u].legshots=0),i.weaponStats[u].legshots++),-1==i.uniqueWeaponKills.indexOf(u)&&(i.uniqueWeaponKills.push(u),e.challenges.update(e,"uwk",i.uniqueWeaponKills.length,null,i)))),e.mode.noStreaks||e.config.noStreaks||this.isBoosted(t,i)||(i.streak++,i.killStreak++,i.realKillStreak++,i.killStreak>i.highestStreak&&(i.highestStreak=i.killStreak),m?e.challenges.update(e,"kstk",i.killStreak,null,i):(i.weaponStats[u].highestWeaponStreak||(i.weaponStats[u].highestWeaponStreak=0),null!=i.currentStreakWeapon&&i.currentStreakWeapon!=u?i.weaponStreak=1:i.weaponStreak++,i.currentStreakWeapon=u,i.weaponStreak>(i.weaponStats[i.currentStreakWeapon].highestWeaponStreak||0)&&(i.weaponStats[i.currentStreakWeapon].highestWeaponStreak=i.weaponStreak),e.challenges.update(e,"kstk",i.weaponStreak,{wep:u,nonWep:i.killStreak},i),i.send("wstk",i.currentStreakWeapon,i.weaponStreak)),i.deathStreak=0,this.updateStreaks(i),i.killStreak%5==0&&(f=i.killStreak),e.now-i.lastKill>=a.feedTimer&&(i.streak=0)),i.lastKill=e.now,r||!e.config.killRewards||e.mode.noKillRewards||((p=v.reward(this,i,t,n,e))&&i.send("6",p,a.networkSounds.indexOf(this.getKillSnd(n,i)),i.kills),this.score(i,v.getScore(p),1),d=!0)),i&&i!=t&&t&&t.isJuggernaut&&e.incStat("kjg",i),i&&i!=t&&i.isJuggernaut&&e.incStat("jgk",i),t&&t.isJuggernaut&&e.setJuggernaut(t,!1),c&&o||e.players.dropWeapon(t,!0),n&&n.w&&delete n.w,!t.dummy)for(var g=0;g<this.list.length;++g)this.list[g]&&(!e.config.noAssists&&!e.mode.noAssists&&t&&t.dmgReceived&&t.dmgReceived[this.list[g].id]&&i!=this.list[g]&&t.dmgReceived[this.list[g].id].val>=a.assistMin&&e.now-t.dmgReceived[this.list[g].id].time<=a.assistTime&&(this.giveAssist(this.list[g]),d=!0),this.list[g]==t?t.send("3",t.sid,t.deaths,i?i.sid:0,[u,i&&i.account&&!i.anonMode&&i.account.stats["c"+i.classIndex]?i.account.stats["c"+i.classIndex]:0,i&&i.account&&-1!=i.pcStatIndex?[i.pcStatIndex,a.playerCardStats[i.pcStatIndex].stat(i)]:null,[Date.now()-t.spawnTime,t.totShotsL||0,(t.totShotsL?Math.min(t.totShotsL||0,t.hitShotsL||0)/(t.totShotsL||0)*100:0).round(1)+"%",t.killsL||0,t.scoreL||0]],n,s):this.list[g].send("3",t.sid,t.deaths,i?i.sid:0,[],n,s));e.mode.onKill&&e.mode.onKill(e,h,t,i,n),e.mode.effectOnKill&&i&&i!=t&&e.players.giveEffect(i,null,1,!0),i&&i!=t&&i.attributes.siphon&&e.players.changeHealth(i,null,-i.attributes.siphon),f&&e.broadcast("kst",i.sid,f),e.playerTrigger("onPlayerDie",t),i&&i!=t&&e.playerTrigger("onPlayerKill",i),t&&t.onDeath&&t.onDeath(i&&i!=t?i:null),i&&i!=t&&i.onKill&&i.onKill(t),e&&e.mainScript&&e.mainScript.onPlayerSpawn&&e.mainScript.onPlayerDeath(t.id+"",i?i.id+"":"")}e.isServer&&!d&&this.syncLeaders()}},this.getWeapon=function(t,i){return t?(i=null==i?t.loadoutIndex:i,t.upgrades[i]?e.upgradeWeapons[t.loadout[i]]:e.weaponConfig[t.loadout[i]]):null},this.getKillSnd=function(t,i){if(!t)return null;if(t.hs)return"headshot_0";if(null==t.wId)return null;var n,s=i.loadout.indexOf(t.wId),a=e.weaponConfig[t.wId];return(n=12==t.wId?e.store.skins[i.meleeIndex||null]||null:e.store.skins[i.skins[s]||null]||null)&&n.killSnd&&n.type?a.sound+(n&&null!=n.id?"_"+n.id:""):null},this.getReloadSnd=function(t,i){var n=e.store.skins[t.skins[t.loadoutIndex]||null]||null,s="reload";return n&&n.reloadSnd&&(s=t.weapon.sound+(null==n.mid?"":"_"+n.mid)+"_r"),s+"_"+i},this.findBySid=function(e){for(var t=0;t<this.list.length;++t)if(this.list[t].sid===e)return this.list[t];return null},this.findByAccID=function(e){for(var t=0;t<this.list.length;++t)if(this.list[t].accid===e)return this.list[t];return null},this.findById=function(e){for(var t=0;t<this.list.length;++t)if(this.list[t].id===e)return this.list[t];return null},this.findByName=function(e,t){e=(e+"").toLowerCase();for(var i=0;i<this.list.length;++i)if(this.list[i].name.toLowerCase()===e||!t&&this.list[i].alias.toLowerCase()===e)return this.list[i];return null},this.indexBySid=function(e){for(var t=0;t<this.list.length;++t)if(this.list[t].sid==e)return t;return-1},this.sendMessage=function(e,t,i){e.send("ch",-1,null,t,2,i)},this.challengeCompleted=function(e,t,i){e.send("chgC",t,!0,i)};var _=[],T=null,C=null;this.sync=function(){for(var t=0;t<this.list.length;++t){_.length=0;var i=(T=this.list[t])&&T.account&&T.account.isDev;if(T.active||T.spectating){for(var n=0;n<this.list.length;++n)!(C=this.list[n]).active||C.sentTo.includes(T.id)||C.kpdData||(C.sentTo.push(T.id),_.push(C.id,C.sid,Math.round(C.x),Math.round(C.y),Math.round(C.z),C.getName(T.account,!1,i||T.kpdData),C.classIndex,Math.round(C.health),Math.round(C.maxHealth),C.team,C.anonMode&&!i?C.fakeLevel||s.randInt(1,100):C.account?C.account.level:C.isBot&&C.fakeLevel?C.fakeLevel:0,C.anonMode&&!i?0:C.account?C.account.clan:C.isBot&&C.fakeClan?C.fakeClan:0,C.account||C.isBot||e.isSandbox?C.skins:0,C.hatIndex,C.bodyIndex,C.secIndex,~~(!!C.account&&C.account.hack),C.customLoadout?C.customLoadout:null,C.xDire,C.meleeIndex,C.skinColIndex,C.propID,C.attachIndex,C.pcStatIndex,C.dyeIndex,~~(C.anonMode&&!i?0:C.account&&C.showBadges.verified?C.account.featured:!!C.isBot&&C.fakeFeatured),C.anonMode&&!i?-1:C.account?C.account.stats.flg:-1,C.anonMode&&!i?0:C.account&&C.showBadges.premium?C.account.premiumT:C.isBot?C.fakePremium:0,C.getName(T.account,!0,i||T.kpdData),C.shoeIndex,C.waistIndex,C.anonMode&&!i?0:C.account?C.account.id:0,C.hairCol,C.faceIndex,C.petIndex,C.anonMode&&!i?-1:C.account&&C.showBadges.custom?C.badgeIndex:-1,C.wristIndex,C.isJuggernaut?1:0,parseFloat(C.headMlt),C.account||C.isBot||e.isSandbox?C.charms:0,C.upgrades,C.backIndex,C.headIndex,C.playerCardIndex,C.isBot?1:0,C.isBusy?1:0));_.length&&T.send("0",_,1)}}},this.resetFreq=function(){for(var e=0;e<this.list.length;++e)this.list[e].inputFreq=0}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,s=(n=i(328))&&n.__esModule?n:{default:n};var a={prefix:{regexStr:`${s.default.prefix}_(\\w+)`,add:function(e){return`${s.default.prefix}_${e}`},remove:function(e){return e.replace(new RegExp(a.prefix.regexStr,"g"),"$1")},has:function(e){return e.startsWith(`${s.default.prefix}_`)}},wildcardToRegex:function(e){return new RegExp(e.replace(/\./g,"\\.").replace(/\*/g,"(.+)"),"g")},listItems:function(e=[],t=","){return e.length>1?`${e.slice(0,-1).join(", ")} ${t} ${e[e.length-1]}`:e.join(", ")},escStr:function(e){return`"${e}"`}},r=a;t.default=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={prefix:"V",blacklist:["prototype","process","require","mainModule","Module","__compile","constructor","__defineGetter__","__defineSetter__","hasOwnProperty","__lookupGetter__","__lookupSetter__","isPrototypeOf","propertyIsEnumerable","valueOf","__proto__","arguments","caller","constructor","apply","bind","call"],maxLoop:1e6,maxStack:2e3}},function(e,t,i){const n=i(1);var s=["Double Kill","Triple Kill","Quad Kill","Multi Kill","Mega Kill","Ultra Kill","Super Kill"],a=[],r=[];e.exports.reward=function(e,t,i,o,l){a.length=0,r.length=0;var c=t.weapon;o&&null!=o.wId&&(c=l.weaponConfig[o.wId]);var d=o&&null!=o.stk;l.mode.weaponOrder&&!d&&(c.melee?(l.incMedal("Humiliation",t),a.push(0,null,0,1)):(l.incMedal("Promotion",t),a.push(1,null,0,1))),l.kills<=1&&(l.incMedal("First Blood",t),a.push(2,25,0,1),t.firstblood++,r.push("fb",1)),t.lastKiller&&i&&i.id==t.lastKiller&&(t.lastKiller=null,l.incMedal("Revenge",t),a.push(3,25,0,1),t.revengeKills++,r.push("rk",1)),c.melee?(o&&o.pj?(l.incMedal("Bullseye",t),a.push(4,150,0,1)):o&&o.fs?(l.incMedal("Beatdown",t),a.push(5,175,0,1)):(l.incMedal("Execution",t),a.push(6,150,0,1)),o&&o.hs&&(l.incMedal("Headshot",t),a.push(9,25,0,1))):(c.kill?a.push(c.kill[0],c.kill[1],0,1):c.scope&&1==t.aimVal?(l.incMedal("No Scope",t),a.push(7,100,0,1),t.noscopes++,r.push("ns",1)):!c.scope||0==t.aimVal&&t.aimTime>180||1==t.aimDir?a.push("",50,0,1):(l.incMedal("Quick Scope",t),a.push(8,75,0,1),t.quickscopes++,r.push("qs",1)),o&&o.hs&&(l.incMedal("Headshot",t),a.push(9,50,0,1)),o&&o.wb&&(l.incMedal("Wallbang",t),a.push(10,25,0,1)),o&&o.dst*c.range>200&&(l.incMedal("Longshot",t),a.push(11,25,0,1),t.longshots++,r.push("lns",1))),i.flag&&(l.incMedal("Snatched",t),a.push(12,50,0,1)),t.health<=.2*t.maxHealth&&t.active&&(l.incMedal("Close Call",t),a.push(13,20,0,1),t.closecalls++,r.push("cc",1)),t.deathStreak>=3&&(l.incMedal("Comeback",t),a.push(14,25,0,1)),i.killStreak>=5&&(l.incMedal("Buzzkill",t),a.push(15,i.killStreak>=10?25:10,0,1),r.push("bzk",1)),t.slideTimer>0&&(l.incMedal("Driftkill",t),a.push(16,50,0,1),t.driftkills++,r.push("drk",1)),t.airTime>=400&&(l.incMedal("Mid Air",t),a.push(17,25,0,1),t.airKills++,r.push("airk",1)),n&&1e3*n.getD3D(0,0,0,t.velocity.x,t.velocity.y,t.velocity.z)>=180&&(l.incMedal("Turbo Kill",t),t.turboKills++,a.push(18,25,0,1),r.push("tk",1));for(var h=s.length-1;h>=0;--h)if(t.streak>h){l.incMedal(s[h],t),a.push(32+h,50*(h+1),0,1);break}return r.length&&l.challenges.updateMulti(l,r,{wep:o?o.wId:void 0},t),a.length?a:null},e.exports.getScore=function(e){var t=null;if(e)for(var i=1;i<e.length;i+=4)e[i]&&(t+=e[i]);return t}},function(e,t){e.exports={MAX_PLAYERS:"mC",IS_PRIVATE:"pv",AUTO_SEEK:"sk",GAME_TIME_LEFT:"gt"}},function(e,t,i){const n=i(4),s=i(67),a=i(1),r=new(i(37)),o=i(266),l=i(63),c=15e3;function d(e){let t=null;return t=h(e.weps,"weaponConfig"),t||(t=h(e.cls,"classConfig"),t||(t=h(e.prks,"effectConfig"),t||null))}function h(e,t){if(t=t||"weaponConfig",(e+"").length>=c)return t+" - Too much data.";if(e)for(var i in e)for(var s in e[i]){for(var r=e[i][s],o=-1,l=0;l<n[t].length;++l)if(n[t][l].varN==s){o=l;break}if(o<0)return"Invalid Setting in "+t+". (ID: "+i+")";var d=n[t][o];if(d.input){if(!a.isString(r))return"Invalid "+t+" Value. (ID: "+i+", Set: "+d.name+")";if(/[^\w \-\|]+/gim.test(r))return"Invalid "+t+" Value. (ID: "+i+", Set: "+d.name+")";if(r.length>(d.len||16))return"Invalid "+t+" Value. (ID: "+i+", Set: "+d.name+")"}else if(d.select){if(null==d.options[r])return"Config Value out of Range. (ID: "+i+", Set: "+d.name+")"}else if(!d.bool){if(!a.isNumber(r))return"Invalid "+t+" Value. (ID: "+i+", Set: "+d.name+")";if(r>(d.maxD||d.maxF||d.max)||r<d.min)return t+" Value out of Range. (ID: "+i+", Set: "+d.name+")"}}return null}e.exports={validateMap:function(e,t,i){if(!i){if(!a.isString(e.name)||!e.name.replace(/\s/g,"").length)return"Missing map name.";if(-1!==e.name.indexOf("<")||-1!==e.name.indexOf(">"))return"Illegal characters in map name.";if(e.name.length>16)return"Map name too long.";if(e.tris&&a.isArray(e.tris)){if(e.tris.length/9>=n.triangleLimit)return"Complex Collisions exceeds limits."}else delete e.tris;if(!a.isArray(e.spawns)||!e.spawns.length)return"Missing spawn points.";if(e.spawns.length>n.spawnLimit)return"Too many spawn points.";for(var s,l=0;l<e.spawns.length;++l){if(s=e.spawns[l],!a.isArray(s)||!s.length||s.length<3||s.length>8)return"Spawn point error.";for(var c=0;c<s.length;++c){if(c<3&&!a.isNumber(s[c]))return"Spawn point error.";if(3==c&&null==s[c]&&1==s[c]&&2==s[c])return"Spawn team error."}}if(e.welMsg)if(e.welMsg&&a.isString(e.welMsg)&&""!=e.welMsg){if(e.welMsg.length>70)return"Welcome Message too Long";if(/[^\w\:\;\(\)\?\,\.\|\[\] \-\+*\$\@\=\^!{}]+/gim.test(e.welMsg))return"Illegal characters in Welcome Message"}else e.welMsg=""}if(!a.isArray(e.objects)||!e.objects.length)return"Missing objects.";if(e.objects.length>(t?n.objectLimitF:n.objectLimit))return"Map exceeds overall object limit.";var d=0,h=0,u=0,p=0,f={},m=0,g=t?n.objectColLimitF:n.objectColLimit,v=["s"],y=e.xyz||[];for(l=0;l<e.objects.length;++l){var b=e.objects[l],w=b.s||b.si;for(c=0;c<v.length;c++)if(null!=b[v[c]+"i"]){var x=3*b[v[c]+"i"];null!=b[v[c]+"i"]&&null!=x&&y.length>x&&(w=y.slice(x,x+3))}if(!r.prefabs[b.i||0])return"Invalid Object.";if(r.prefabs[b.i||0].noCol||null!=b.l||null!=b.col||m++,m>g)return"Map exceeds collidable object limit.";if("SIGN"==r.prefabs[b.i||0].name){if(d++,null!=b.st&&"string"!=typeof b.st)return"Object sign text error.";if((b.st||"").length>n.signTextLimit)return"Object sign text to long.";if(d>n.signLimit)return"Too many signs.";if(b.sf&&b.sf>n.signFontMax||b.sf&&b.sf<n.signFontMin)return"Object sign font error."}if("PRIZE_WHEEL"==r.prefabs[b.i||0].name&&++h>n.wheelLimit)return"Too many Prize Wheels.";if("LEADERBOARD"==r.prefabs[b.i||0].name&&++u>n.lbLimit)return"Too many Leaderboards.";if(r.prefabs[b.i||0].ai&&++p>n.aiLimit)return"Too many AI.";if(b.tas&&Array.isArray(b.tas)){if(b.tas.length>n.triggerActionLimit)return"Trigger Has Too Many Actions";for(var S=0;S<b.tas.length;S++){if(b.tas[S].tct)if(b.tas[S].tct&&a.isString(b.tas[S].tct)&&""!=b.tas[S].tct){if(b.tas[S].tct.length>70)return"Trigger Message too Long";if(/[^\w\:\;\(\)\?\,\.\|\[\] \-\+*\$\@\=\^!{}]+/gim.test(b.tas[S].tct))return"Illegal characters in Trigger Message"}else b.tas[S].tct="";if(b.tas[S].tcc)if(b.tas[S].tcc&&a.isString(b.tas[S].tcc)&&""!=b.tas[S].tcc){if(b.tas[S].tcc.length>70)return"Trigger Custom Key too Long";if(/[^\w\:\;\(\)\?\,\.\|\[\] \-\+*\$\@\=\^!{}]+/gim.test(b.tas[S].tcc))return"Illegal characters in Trigger Custom Key"}else b.tas[S].tcc="";if(b.tas[S].cd){var M=o.conditions[b.tas[S].cd||0];if(M&&M.vals)for(var k,_=0;_<M.vals.length;_++){if(null==(k=b.tas[S]["cv"+_])&&(k=M.vals[_].def),M.vals[_].input){if(k+="",!a.isString(k))return"CONDITION VALUE MUST BE STRING ("+M.vals[_].name+")";if(/[^a-z0-9_]+/gim.test(k))return"INVALID CHARACTERS IN CONDITION VALUE ("+M.vals[_].name+")";if((k||"").toString().length>(M.vals[_].len||10))return"CONDITION VALUE TOO LONG ("+M.vals[_].name+")"}else if(M.vals[_].select){if(!a.isNumber(parseInt(k))||null==M.vals[_].select[k])return"CONDITION VALUE OPTION DOESNT EXIST ("+M.vals[_].name+")"}else if(!M.vals[_].bool){if(!a.isNumber(parseInt(k)))return"CONDITION VALUE MUST BE A NUMBER("+M.vals[_].name+")";if(k>M.vals[_].max||k<M.vals[_].min)return"CONDITION VALUE OUT OF RANGE ("+M.vals[_].name+")"}b.tas[S]["cv"+_]=k}else if(!M)return"INVALID CONDITION"}}}if(b.tct)if(b.tct&&a.isString(b.tct)&&""!=b.tct){if(b.tct.length>70)return"Trigger Message too Long";if(/[^\w\:\;\(\)\?\,\.\|\[\] \-\+*\$\@\=\^!{}]+/gim.test(b.tct))return"Illegal characters in Trigger Message"}else b.tct="";if(parseInt(b.in)&&(f[parseInt(b.in)]?f[parseInt(b.in)]++:f[parseInt(b.in)]=1,f[parseInt(b.in)]>n.interfaceLimit))return"Interface limit Exceeded: Max 20 (Per id)";if(!a.isArray(w)||3!=w.length||!a.arrayInts(w))return"Object scale error.";if(!a.isArray(b.p)||3!=b.p.length||!a.arrayInts(b.p))return"Object position error.";if(a.isArray(b.r)){if(3!=b.r.length||!a.arrayInts(b.r))return"Object rotation value error."}else if(null!=b.r)return"Object rotation error.";if(null!=b.d&&!a.isNumber(b.d))return"Object direction error.";b.col=!!b.col}return!i&&e.gui&&e.gui.length>(t?n.guiLimitF:n.guiLimit)?"Map exceeds gui limit.":null},validateConfigs:function(e){let t=null;return t=function(e){if(e.modes)for(var t=0;t<e.modes.length;++t)if(!s[e.modes[t]])return"Invalid Mode in Config.";return null}(e),t||(t=function(e){if(e.classes)for(var t=0;t<e.classes.length;++t)if(!l[e.classes[t]])return"Invalid Class in Config.";return null}(e),t||(t=function(e){if(e.settings){var t=0;for(var i in e.settings)if(e.settings.hasOwnProperty(i)){for(var s=e.settings[i],r=-1,o=0;o<n.serverConfig.length;++o)if(n.serverConfig[o].varN==i){r=o;break}if(r<0)return"Invalid Setting in Config.";var l=n.serverConfig[r];if(!l.input&&!l.bool){if(!a.isNumber(s))return"Invalid Config Value. (Set: "+l.name+")";if(l.select?null==l.options[s]:s>(l.maxD||l.maxF||l.max)||s<l.min)return"Config Value out of Range. (Set: "+l.name+")"}if(++t>n.serverConfig.length+1)return"Settings Mismatch."}}return null}(e),t||(t=d(e),t||null)))},validateCustomConfig:h,validateCustomConfigs:d,setupGameConfig:function(e,t,i,a){for(var r=n.hostTypes[e]||{},o={},l=0;l<n.serverConfig.length;l++)null==n.serverConfig[l].hostTypes||n.serverConfig[l].hostTypes.includes(e||0)?(n.serverConfig[l].hostTypes||[0]).includes(e||0)&&(o[e||0]||(o[e||0]={}),o[e||0][n.serverConfig[l].varN]=t[n.serverConfig[l].varN]):t[n.serverConfig[l].varN]=n.serverConfig[l].def;var c=t.maps;if(r.overDat&&(t=r.overDat),o[e])for(var d in o[e])t[d]=o[e][d];if(i)for(var d in i)t[d]=i[d];r.comp&&(t.minPlayers=2*((t.tmSize||0)+1),t.maxPlayers=t.minPlayers+(t.specSlots||0),t.isComp=!0),t.maps=c,t.modes=(t.modes||[]).filter((function(e){return s[e]&&(a||!s[e].preventCustomGames)})),t.mimicPubs=!1;let h=t;if(r.forceDat&&(t=r.forceDat),r.allowedDat)for(var d in r.allowedDat)if(Array.isArray(r.allowedDat[d])){let e=!0;if(h[d]&&h[d].length||(e=!1),e){let t=[];for(l=0;l<h[d].length;l++)r.allowedDat[d].includes(h[d][l])&&t.push(h[d][l]);t.length?h[d]=t:e=!1}t[d]=e?h[d]:r.allowedDat[d].slice(0,1)}else t[d]=r.allowedDat[d];return t.krRewards&&!t.customMap&&(t.krRewards=!1),t.krRewards&&t.rawMapData&&(t.krRewards=!1),t.defaultSetts||(t.krRewards=!1),t}}},function(e,t,i){const n=i(1),s=i(4),a=i(12),r=i(333),{getNextPathPosition:o}=i(334),l=["StaZ","X","EMPY","Sour","KRM1","SHOT","HIZ","RGB","HALO","GLXY","SWEL","Oras","PNTM",""],c=2*Math.PI,d=Math.PI/2;function h(e,t,i){return Math.round(1e3*(n.mapNumber(e,0,1,t,i)+Number.EPSILON))/1e3}const u=function(e,t,i){function u(e,i,s,a){const r=t.store.skins.filter((t=>(null==i?!t.type&&t.weapon==e:t.type==i)&&(null==t.classIndex||t.classIndex==s)&&(null==a||(t.rarity||0)<=a)));return r.length&&n.getRandom(r).index||-1}let f=this;if(i=i||{},this.socketId=n.randomString(12),this.config={...t.bots.config},i)for(let e in i)null!=i[e]&&(this.config[e]=i[e]);this.cosmetics={skinColor:-1,hairColor:-1,skins:[i.primSkin||-1,-1],hat:i.hat||3168,head:i.head||-1,dye:i.dye||2428,body:i.body||-1,back:i.back||-1,waist:i.waist||-1,face:i.face||-1,shoes:i.shoes||-1,pet:i.pet||-1,wrist:i.wrist||-1,melee:i.melee||-1,playerCard:i.playerCard||-1},this.classIndex=i.class||n.getRandom(this.config.allowedClasses||t.config.classes)||0,this.secondaryIndex=i.secondary||2,this.forceClass=i.forceClass||!this.config.randomizeClassOnRespawn,this.team=i.team||0,this.level=this.config.randomLevel?n.randInt(1,35):this.config.level||0,this.clan=this.config.randomClan&&this.level>25?n.getRandom(l):this.config.clan||0,this.featured=!!this.config.featured&&this.level>=20&&n.randFloat(0,100)>=80,this.premium=this.config.premium&&n.randFloat(0,100)>=90?1:0,this.hadFirstSpawn=!1,this.firstSpawnDelay=this.config.firstSpawnDelay,this.cosmeticsSet=!1,this.cosmeticRarity=this.config.levelBasedCosmetics?this.level>25?6:2:6,this.player=null,this.tick=0,this.pathInfo={pathNodeIndex:0,pathDirection:1,pathIndex:null},this.pathPositionDistance=10,this.timeForNewTarget=0,this.timeForNewRoamTarget=0,this.pathTarget=null,this.roamTarget=null,this.turnSpeed=.1,this.dmgMlt=this.config.dmgMlt||1,this.followDistance=10,this.difficulty=this.config.difficulty||1,this.randomSpreadDist=0,this.randomSpreadTickInterval=0,this.randomChanceNotShoot=0,this.reactTimeInterval=0,this.reactTime=0,this.applyDifficultySettings=()=>{var e;this.difficulty=this.config.levelBasedDifficulty?(e=this.level)<=5?0:e>=15?1:Math.round(100*(n.mapNumber(e,5,15,0,1)+Number.EPSILON))/100:this.difficulty||1,this.turnSpeed=h(this.difficulty,this.config.turnSpeedMin,this.config.turnSpeedMax),this.followDistance=h(this.difficulty,this.config.followDistanceMax,this.config.followDistanceMin),this.randomSpreadDist=h(this.difficulty,this.config.randomSpreadMax,this.config.randomSpreadMin),this.randomSpreadTickInterval=h(this.difficulty,this.config.randomSpreadTickIntervalMin,this.config.randomSpreadTickIntervalMax),this.randomChanceNotShoot=h(this.difficulty,this.config.randomChanceNotShootMax,this.config.randomChanceNotShootMin),this.reactTimeInterval=h(this.difficulty,this.config.reactTimeIntervalMax,this.config.reactTimeIntervalMin)},this.applyDifficultySettings(),this.target=null,this.startP={x:0,y:0,z:0},this.lives=i.lives||0,this.canRespawn=!0,this.name=i.name||r(),this.input=[],this.scoreOnDeath=!1,this.createPlayer=()=>{const i=f.player?f.player.headMlt:1;f.player=t.players.add(f.socketId,null,0,0,0,f.name,f.classIndex,f.cosmetics.skins,f.cosmetics.face,f.cosmetics.shoes,f.cosmetics.hat,f.cosmetics.head,f.cosmetics.body,f.cosmetics.back,f.cosmetics.waist,f.cosmetics.pet,f.cosmetics.wrist,f.cosmetics.melee,f.cosmetics.skinColor,f.cosmetics.hairColor,f.cosmetics.dye,-1,-1,f.secondaryIndex,null,f.team,null,null,null,null,null,null,i,null,[],!0);const n=e||t.getSpawnPoint(f.team||f.player.team,f.player);f.player.team=f.team||f.player.team,f.player.x=n.x,f.player.y=n.y,f.player.z=n.z,f.player.setInitPos(),f.player.xDire=-((n.dir||0)+1)*Math.PI/2,f.player.checkPoint=null,f.player.checkPointList=[],f.player.weaponTier=0,f.player.lastDeltas=[],f.player.deltaDiv=1,f.player.sprayIndex=-1,f.player.aloneTime=0,f.player.playerCardIndex=f.cosmetics.playerCard,f.player.dmgMlt=this.dmgMlt,f.player.speedMlt=this.config.speedMlt,f.player.rangeMlt=this.config.rangeMlt,f.player.healthMlt=this.config.healthMlt,f.player.spreadMlt=this.config.spreadMlt,f.player.noRecoil=!this.config.recoil,f.player.fakeLevel=this.level,f.player.fakePremium=this.premium,f.player.fakeFeatured=this.featured,f.player.fakeClan=this.clan,1!=this.config.healthMlt&&(f.player.maxHealth=t.mode&&t.mode.maxHealth?t.mode.maxHealth:f.player.config.health*(t.config&&t.config.healthMlt||1)*(f.player.healthMlt&&f.player.healthMlt||1),f.player.health=f.player.maxHealth,f.player.startHealth=f.player.health,t.broadcast("h",f.player.health,f.player.sid,null,null,!0,!0))},this.setClass=()=>{f.forceClass||(f.classIndex=n.getRandom(this.config.allowedClasses||t.config.classes)||0),t.classConfig[f.classIndex].secondary?t.weaponConfig[f.secondaryIndex]&&t.weaponConfig[f.secondaryIndex].secondary||(f.secondaryIndex=2):f.secondaryIndex=null},this.spawn=e=>{if(this.canRespawn&&this.config.canRespawn){if(this.tick=n.randInt(0,20),this.resetTargeting(),this.setClass(),this.setRandomCosmetic(),this.createPlayer(),f.startP={x:f.player.x,y:f.player.y,z:f.player.z},f.player.active&&!f.player.spawned&&(f.player.spawned=!0),f.player.bypassUser=!0,!this.hadFirstSpawn&&f.config.joinMessage){this.hadFirstSpawn=!0;for(let e=0;e<t.players.list.length;e++)t.players.list[e].send("chi",0,null,[s.serverMessages[0],f.player.getName(t.players.list[e].account,!0)],2)}f.player.onDeath=f.onDeath,f.player.onKill=f.onKill,t.players.syncLeaders(!0);try{e||t.players.sync()}catch(e){}}},this.simulateInputs=e=>{this.input.length||(this.input=[0,e,1e3*f.player.yDire,1e3*f.player.xDire,-1,0,0,0,0,0,0,0,0,0,0]),this.input[1]=e,this.input[2]/=1e3,this.input[3]/=1e3,this.input[4]=-1,this.input[7]=0,this.input[9]=0},this.findTarget=e=>{if(this.timeForNewTarget-=e,this.timeForNewTarget<=0&&(this.target=t.findNearestTo(f.player,f.player.x,f.player.y+f.player.height,f.player.z,this.config.targetTeam?0:f.player.team,this.config.targetDetectionRange,this.config.xray,!0,!0,!this.config.targetBots,!1,this.config.ignoreRealPlayers),this.target&&this.target.active?(this.timeForNewTarget=this.config.newTargetDelay,this.resetPathInfo()):(this.target=null,this.reactTime=0)),this.target||this.roamTarget||this.startP,(!this.target||!this.target.active)&&this.player.active&&!this.pathTarget){let i=this.config.usePathing?o(this.pathInfo,t,this.player):null;if(null!==i)this.pathTarget={x:i.x,y:i.y,z:i.z,isPath:!0},this.target=null,this.reactTime=0,this.resetRoam();else if(this.config.roamRadius&&this.config.roam&&(this.timeForNewRoamTarget-=e,this.timeForNewRoamTarget<=0)){this.timeForNewRoamTarget=this.config.newRoamTargetDelay;const e=n.randFloat(-Math.PI,Math.PI);this.roamTarget={x:this.startP.x+this.config.roamRadius*Math.cos(e),y:this.startP.y,z:this.startP.z+this.config.roamRadius*Math.sin(e)},this.target=null,this.reactTime=0}}return this.target||this.roamTarget||this.pathTarget||this.startP},this.getTargetDirection=e=>{let i=[];if(e.isPlayer&&!t.isSandbox){const a=t.players.fetchState(e,this.player);i=a?n.getDrs(a,this.player,s.crouchDst*a.cV||0):n.getDrs(e,this.player,s.crouchDst*e.crouchVal||0)}else i=n.getDrs(e,this.player,s.crouchDst*e.crouchVal||0);return i},this.lookAtTarget=(e,t,i)=>{if(this.config.watchTarget||this.config.attackTarget||this.config.followTarget){const n=(t,i,n)=>{let s=(this.input[t]-i+c)%c,a=Math.min(Math.abs(s-c),s,this.turnSpeed*e),r=s-Math.PI>=0?1:-1;this.input[t]+=r*a,n&&(this.input[t]+=c,this.input[t]%=c)};if(this.randomSpreadTickInterval&&this.target&&this.target.active&&this.difficulty<1&&this.player.reloadTimer<=0&&this.tick%Math.floor(this.randomSpreadTickInterval)==0){const e=this.randomSpreadDist;t+=e*(Math.random()<.5?-1:1),i+=e*(Math.random()<.5?-1:0)}if(this.config.legacySpreadTickInterval&&this.target&&this.target.active&&this.tick%Math.floor(this.config.legacySpreadTickInterval)==0){const e=.2-.2*this.difficulty;t+=e,i+=e}n(3,t,!0),n(2,i,!1),this.input[2]=Math.max(-d,Math.min(d,this.input[2]))}},this.resetTargeting=()=>{this.stuckTime=0,this.oldTargetId=null,this.timeForNewTarget=0,this.target=null,this.reactTime=0,this.resetPathInfo(),this.resetRoam()},this.resetRoam=()=>{this.roamTarget=null,this.timeForNewRoamTarget=0},this.resetPathInfo=()=>{this.pathInfo.pathNodeIndex=0,this.pathInfo.pathDirection=1,this.pathInfo.pathIndex=null,this.pathTarget=null},this.goToTarget=(e,t)=>{this.config.followTarget&&(e>=this.followDistance&&(this.input[4]=1),t&&e>this.config.pathRadius?this.input[4]=1:this.pathTarget=null)},this.shootTarget=(e,t)=>{const i=(null==this.player.weapon.projectile||this.player.weapon.projectile.disable?this.player.weapon.range:this.player.weapon.projectile.range)*this.player.rangeMlt;if(this.config.attackTarget&&this.target&&this.target.active&&e<i*this.config.proximityToShootMultiplier){const e=this.input[5];this.input[5]=1,(Math.random()<this.randomChanceNotShoot||e&&this.player.weapon.nAuto)&&(this.input[5]=0),this.reactTimeInterval&&this.difficulty<1&&(this.reactTime+=t,this.input[5]&&this.reactTime<=Math.floor(this.reactTimeInterval)&&(this.input[5]=0))}else this.input[5]=0},this.aimDownSight=()=>{this.input[6]=this.input[5]&&this.player.weapon.zoom&&!this.player.weapon.noAim?1:0},this.nodYes=()=>{this.config.nodYes&&(this.input[2]=1&this.tick?d/4:-d/4,this.input[2]=Math.max(-d,Math.min(d,this.input[2])))},this.slideHop=()=>{this.config.slideHop&&(this.input[7]=f.player.onGround&&f.player.slideTimer<=50,f.player.velocity.y<0&&f.player.canSlide&&(this.input[9]=1))},this.jump=()=>{if(this.config.randomJumpChance){this.tick%this.config.randomJumpTickInterval==0&&n.randInt(0,100)>=this.config.randomJumpChance&&(this.input[7]=1)}},this.crouch=()=>{this.config.forceCrouch&&(this.input[9]=1)},this.respawn=e=>this.config.shouldDelayFirstSpawn&&!this.hadFirstSpawn?(this.firstSpawnDelay-=e,void(this.firstSpawnDelay<=0&&(this.firstSpawnDelay=0,this.spawn()))):void(this.spawnDelay&&(this.spawnDelay-=e,this.spawnDelay<=0&&(this.spawnDelay=0,this.spawn()))),this.update=e=>{if(this.tick++,f.player&&f.player.active){if(this.oldTargetId=this.target&&this.target.isPlayer?this.target.id:null,this.config.mimicTarget&&this.target&&this.target.active)return void(f.player.inputs=[...this.target.inputs]);this.simulateInputs(e);let t=this.findTarget(e);if(t){const i=this.getTargetDirection(t),s=i[0]||0,a=i[1]||0,r=n.getD3D(f.player.x,f.player.y,f.player.z,t.x,t.y,t.z);if(this.lookAtTarget(e,s,a),this.goToTarget(r,t.isPath),this.shootTarget(r,e),this.config.resetOnStuck&&t.isPlayer&&t.id==this.oldTargetId){const t=f.player.didMov();t?t&&(this.stuckTime=0):this.stuckTime+=e,this.stuckTime>=2e3&&this.resetTargeting()}}this.jump(),this.slideHop(),this.nodYes(),this.crouch(),this.input[3]*=1e3,this.input[2]*=1e3,f.player.inputs.push(this.input)}else this.respawn(e)},this.onDeath=()=>{if(f.target=null,f.input.length=0,f.lives){if(f.lives--,f.scoreOnDeath){const e=Math.floor(f.player.score/2);e>0&&t.dropSpawnable(16,f.player,{pnts:e},{x:f.player.x,y:f.player.y,z:f.player.z})}if(f.lives<=0){if(f.config.removeOnDeath)return void t.bots.remove(f);f.canRespawn=!1}}f.canRespawn&&f.config.canRespawn&&(f.config.useSpawnDelay?f.spawnDelay=s.deathDelay:f.spawn())},this.onKill=e=>{f.config.voiceChat&&e.send("vc",p,f.player.getName(!0),f.player.sid,-1,1,!0)},this.remove=()=>{t.removePlayerSound(f.player.sid,null,!0);const e={n:f.player.getName(null,!0),t:n.getMsgType(f.player)};t.players.list.indexOf(f.player)>=0&&t.players.remove(f.player.sid),f.config.leaveMessage&&t.broadcast("chi",0,null,[s.serverMessages[e.t],e.n],2,e.t>1?"#ff0000":null)},this.spreadPlayer=e=>{let i={x:e.x,y:e.y,z:e.z,spread:20,dir:0};i=t.getPointSpread(i.x,i.z,i.y,i.spread+7,i.dir),f.player.x=i.x,f.player.y=i.y,f.player.z=i.z},this.estimateDir=function(e,t){let i=-1,n=Math.abs(e-t[0]);for(let s=0;s<t.length;s++){const a=Math.abs(e-t[s]);a<n&&(n=a,i=s)}return i},this.setRandomCosmetic=()=>{if(this.config.randomCosmetics&&!this.cosmeticsSet){this.cosmeticsSet=!0,f.cosmetics.face=u(null,a.FACE,void 0,this.cosmeticRarity),f.cosmetics.shoes=u(null,a.SHOE,void 0,this.cosmeticRarity),f.cosmetics.hat=u(null,a.HAT,void 0,this.cosmeticRarity),f.cosmetics.head=u(null,a.HEAD,void 0,this.cosmeticRarity),f.cosmetics.body=u(null,a.BODY,void 0,this.cosmeticRarity),f.cosmetics.back=u(null,a.BACK,void 0,this.cosmeticRarity),f.cosmetics.waist=u(null,a.WAIST,void 0,this.cosmeticRarity),f.cosmetics.pet=u(null,a.PET,void 0,this.cosmeticRarity),f.cosmetics.wrist=u(null,a.WRIST,void 0,this.cosmeticRarity),f.cosmetics.dye=u(null,a.DYE,void 0,this.cosmeticRarity),f.cosmetics.melee=u(null,a.MELEE,void 0,this.cosmeticRarity),f.cosmetics.playerCard=u(null,a.PLAYER_CARD,void 0,this.cosmeticRarity);const e=t.classConfig[f.classIndex].loadout;f.cosmetics.skins=[u(e[0]+1,void 0,f.classIndex,this.cosmeticRarity),e.secondary?u(f.secondaryIndex+1,void 0,f.classIndex,this.cosmeticRarity):-1]}}};e.exports=class{constructor(e){this.gameManager=e,this.list=[],this.config={targetBots:!1,targetTeam:!1,forceCrouch:!1,attackTarget:!0,followTarget:!0,watchTarget:!0,mimicTarget:!1,slideHop:!1,canRespawn:!0,useSpawnDelay:!0,removeOnDeath:!0,nodYes:!1,nodNo:!1,joinMessage:!1,leaveMessage:!1,voiceChat:!0,godMode:!1,roam:!0,dmgMlt:1,speedMlt:1,rangeMlt:1,spreadMlt:1,healthMlt:1,noRecoil:!1,randomCosmetics:!1,level:0,randomLevel:!1,premium:!1,featured:!1,clan:0,randomClan:!1,difficulty:1,randomJumpTickInterval:100,randomJumpChance:0,levelBasedCosmetics:!1,levelBasedDifficulty:!1,targetDetectionRange:1200,newTargetDelay:2e3,roamRadius:500,pathRadius:10,ignoreRealPlayers:!1,proximityToShootMultiplier:.5,shouldDelayFirstSpawn:!1,firstSpawnDelay:1e3,allowedClasses:null,randomizeClassOnRespawn:!1,turnSpeedMin:.01,turnSpeedMax:.1,followDistanceMin:10,followDistanceMax:10,randomSpreadMin:0,randomSpreadMax:0,randomSpreadTickIntervalMin:0,randomSpreadTickIntervalMax:0,randomChanceNotShootMin:0,randomChanceNotShootMax:0,newRoamTargetDelay:3500,xray:!1,legacySpreadTickInterval:0,resetOnStuck:!1,reactTimeIntervalMin:0,reactTimeIntervalMax:0,usePathing:!1}}add(e,t,i,n){const s=new u(e,this.gameManager,n);return t&&s.spawn(i),this.list.push(s),s}remove(e){if(this.list.length){const t=e||this.list[this.list.length-1],i=this.list.indexOf(t);t.remove(),this.list.splice(i,1)}}update(e){for(let t=0;t<this.list.length;t++)this.list[t].update(e)}refresh(){for(let e=0;e<this.list.length;e++)this.list[e].spawn(!0);this.sync()}spreadAround(e){for(let t=0;t<this.list.length;t++)this.list[t].spreadPlayer(e)}refreshConfig(){for(let e=0;e<this.list.length;e++)this.list[e].config={...this.config}}applyConfig(e,t){for(let i=0;i<this.list.length;i++)this.list[i].config[e]=t}reset(){for(let e=this.list.length-1;e>=0;--e)this.list[e].persistent||this.remove(this.list[e])}spawnPersistent(){for(let e=this.list.length-1;e>=0;--e)this.list[e].persistent&&this.list[e].spawn(!1)}sync(){this.gameManager.players.sync()}setupLocal(){for(let e=0;e<5;e++){const t=n.randInt(0==e?26:1,0==e?50:25);this.add(null,!0,!1,{targetBots:!0,randomCosmetics:!0,levelBasedCosmetics:!0,levelBasedDifficulty:!1,randomLevel:!0,roam:!0,targetDetectionRange:500,forceClass:!0,allowedClasses:[0,2,6,13],featured:t>=20&&n.randFloat(0,100)>=80,premium:n.randFloat(0,100)>=90?1:0,randomClan:!0,randomJumpChance:20,dmgMlt:.25,newRoamTargetDelay:2e3,turnSpeedMin:.015,turnSpeedMax:.035,followDistanceMin:30,followDistanceMax:80,shouldDelayFirstSpawn:!0,randomChanceNotShootMin:.05,randomChanceNotShootMax:.5,randomSpreadTickIntervalMin:3,randomSpreadTickIntervalMax:15,randomSpreadMin:.05,randomSpreadMax:.1,difficulty:n.randFloat(.2,.5),legacySpreadTickInterval:10,resetOnStuck:!0,reactTimeIntervalMin:0,reactTimeIntervalMax:3e3,usePathing:!0}).persistent=!0}}};const p="data:audio/ogg;base64,T2dnUwACAAAAAAAAAACiCJbGAAAAAKsPvDsBE09wdXNIZWFkAQI4AYC7AAAAAABPZ2dTAAAAAAAAAAAAAKIIlsYBAAAAhn7ZnQGJT3B1c1RhZ3MNAAAATGF2ZjU4LjI5LjEwMAQAAAAdAAAAZW5jb2Rlcj1MYXZjNTguNTQuMTAwIGxpYm9wdXMQAAAAbWFqb3JfYnJhbmQ9aXNvbREAAABtaW5vcl92ZXJzaW9uPTUxMh4AAABjb21wYXRpYmxlX2JyYW5kcz1pc29taXNvMm1wNDFPZ2dTAARfrwAAAAAAAKIIlsYCAAAAhpkL7EUDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwP/Mv/B/+b/ff8N/4//Cf+m/w7/Af8D/xX/EP8n/xL/ef8c/wjn/6v/MP8y/zv8//78//78//78//78//78//78//78//78//78//78//78//78//78//78//78//78//78//78//78//78//78//78//78//78f/1srZ9jb2rPJEmd/TtgmcpblLcpYMhE5/XGVQtYk44vp4XhCu9IehAtZ9hEVMiDs7oiJ5jTpjq5jezVnxrPoJs4oqlDSsOgN0h+vhpDXqXPKDhLYlHU32tNpSig2XVjNZ6saUz6iyikmDcNRanGthq0xnU9wYwDTZD6t8jFqY11w5ogWvxbQY5PBerf53U9YIcQYyB/9VBtMWX7vWam6YLTntJUQ31ktwq7akebm7neyzlGSWqn5OfBsCh3Q+QsMPnMA5RcBNpkWCkLJjEDuUkB6VPzb0MJ8XQ6pW46Hg08Rbm0p4QcDbHWlj5CZMZlm3M36+wUAx7GXKy06KCZ1tLeFlYTOaWHKYU9IcTDLWvxt/gHS5uuOJFn1UIVeoAoTKbtskm3bZLYlQ9v1r6oAPx/+9jTTyz6Pe+Kdy9CbMOz+Mfxh2dM6u1BM/uk8S9h8I8uLPfGDabrsf0QDEWareOALYbjsRlwSkqsjAQoH3mMyHuzAaWEvgSX2JeqleWryHMbzMooX2ijydENFwoKZsaM9zDMlKSJ69XFFCswC9UZwgPnNM1YXRAaGsMTq+al0YaG4rgzrFf/0/prTezaqcl7y18v2xRbqocesKomjAfeCzB+8eRTfpuzY93SAb2qD3loOqHfU/EvjgGGtc73dteX5Ya4/omb4EwtX3lHeYvP5L8ntETsdq1hgARzc2Pw8lj3QOH/lGDMa3Rq37aaAWK09tttsRGwVSIDMDZXmXiOh+Yo8mNXQwwjp597dj6/YKfiysFAdhmZLLrhaAQIl0CMmvxIkLZ+shyesye2OCpWi0sJMsEClFR0LBliAX0Uecng6QAHsYGnVhcOIsnX9Aq1QSGD/BBQ0WVEYLHb3HIljfZlMwKemDLJPXFMGrE+jQYjA6l8yOqtORBMjvsMI29sPx3My81iDpsusBM3Qza5Bsa4ilA+vQgUXCm1P4rDZulPLSb9v9xtUg0moDdzT+I/kVUS3a3b9ICv/b2SOdv8f/lAKZIe1Ieoh0m2PCh7JXuxR2KORUGFVL4hCsRArlbjck8lXD+PWU5GrRlxaIphNXtKfSNWUEFhZiti8es1Dt0gbEqtnG+kxmakLgATPAsTzzvJgM68vA8Vq3msROKl+9us6zALvifLr/Fww/Nz2Wut2uqtIJeljopp+lOjwhDFHQCKZQsRgX1ERxAS9OegNWLmGoR1PZh9MFAumQxZD3AT9H23LWRADl5oMaCWz4ZCAv774Oth9GhTUHugZ8ymA2xv2jKNq0isn83AxVZCCO4mnvmBfg/r0sbieLiWPhmxHgTWkeQzuhhncF8o9Yu5qIpEirjkHg646owJwlIUFAGfAVfoZiwJMla2JidRsk9fSHwLpje40+LOvcUj/LB/mARWwxPMQHu4zIVo5ddPAz144iZR2oIbvR/21bzQKEToQ05uA0J65/u2jTMyN7mdMCRNYyvtvQOh1k8qEfLZkuBvkOGFOyw/vKLBkAgvhyFWH5RmCAIW/TI9EXWelEN6Wp8SzZvXkxuqvubyEx00Qh8kre2Ji1Shk9BG/iO3jiA24QCtEkqOtUePViwbL0bQDVJHselHm5xVIaohJmMhQVXdFKJSOkIkJk82d160mSibvj1qkojuk2St/2wJNtvJkkJSX/x9jFBuSGPL9aAXSyh66GXQy6EI0ODWJbC+eksMAGXZ2FUR1yd2j36YpYy+AI0cRRr0oPCU25haRrHnC43YIFDD4PCwnibP+OkOwy6RLpUUhDTNn3yldPJ3oAoLJCg0LEPhiA6PBVQlv0XjF+/LF4r6oVwf/mPEI0JQS433Kts4vfQ0LpmgM5cqpPm+oQjNwgdXLBS9WszNfpCdd+jz7kxfBxH80QSPmR5i00bXYIQ6y17T6XGelDN9BmDJCOLQhRZsCQWJonxGfK87GUzVrsL2J1AN3TxCCtg7CdObJfLqW6u19nozf4nDsYXCb3IYhlWIBfSx8vG9YEYBO408wcut3ReR5khyzzr5TAHieDUD4pjihtkUUI4OkGx4psyZJ5u3aclFCqiCyvJAyqnbkr8OSRLdUHXEbQd+0z3e6YvE2LFU8Y0RWKkCTIPJIfLscmhpUmAWSztXEkjSc6BoD7qSGGnOgouYsm7XmiP9ZCdrQJEv/ybUm1oAM9gP/F7dcfPGmcwLPl70hmcoTXCGz1fKkkiC1qagEBdhQHNoQ8ZJwu87RCEDmGhAlbEnZoCRRFtek6qDj1xFA6arhI5sP8IK+ZwOB5J3i1wJGCnhgZ0TyNBkxB/VVEGs2xa0uGeAOECxfl9kvbpLqn5xQoUNzP2cchs4fx6vkxu/brQrLq28zSA/cXoF7Gjo0Owf6qZwrh6mYrN1zI3w0+1XtDhuVUMpvPC0O4qhFY9HUaowvAK7UNzP8T1jgBuObyMrKriP8jXamtxwV1O0guO6D0rP17X/IjxrgOz6evQuFSgqyK8sUUqz5sAIWt6cQmizfnAX8sscIB0mgDDPftSkMBttIAAlIPr18PCpP/xy5gAieGLCzl+4gc8jXNa5g/NpMBKqlmP65FlnAuecM0nxX+oKHfZ+vh+lnbLHa0+m7HSuukWciV1REaEahPcrquQppHA1qWGfxMy6Qv0blIy2LG2XldgpSbFeT3Zr3Ia3sjsVb6crg0PS0G9/y8PMhTW5B0fNQ+kpwOB1VCJHm9D8e0MEHoCnriTRYykk74ITbrdXkCOSaXvEReWr6JV2IE5pPun6oF2dnH+caGEhrUAH+i7AfVy85sj5vcKsUI2hogcrMcCz532+hSGYYmpon9P2mU1SLwNikQLw3e2nbQndzyd0elV7XKMwUcRHoy2LAFkMjWXj0PQ+fDzD1ICkgE7iuf2ZvEgznJAAHqAAKTCa+M2jAfg7ZHayYEm7VbBaSF+rycDQKw5gcn6xm83V7UwUQUkWuY2F7Ek8oT+eoALn+4cZMx25UROq3cb83lfgdFfU6qEaMmMou6eEeKxKhD0InbamemKkG7vC+L0mb3tky10q27anEwBmVYlndLa7k/AS2/tJbADb/yab/BgoLgv06fVoT1MMphlLhMS6UOYuPrRLpm0NSj4BU14/utH7YlZ6HzanP30ZXxNH2ZB91jqIwFVeW0b5jotvMeSpN8cGnm4QTmy0b6ZagFmM4180x3rgJUCgb1ZWM+VCbVCxZ7ZattWPNqb8TLK4nWoN7l6TTxRkM+BUMBgBAFq6aOdjO9+pMFqq5Ls2kU5j8OzWYPdUJFcniefmrIXEncx3BaeWQvGewK+KBjhxgGW2hl5bo3saPaaGR7oZ6dx4SzHxIc8eTuzwsJwUyg4ZYpoCmotwcV8RhjX1CkzvF6U8uZEms297OR7hyhU64fIFRbNBBp/9nbfJYnawCdm7dgLaX/Wqr1Jk/Hakj+zouG6NI6Lpj4SArBaAoRqDFP/eMBA0/N+Y/AdPpUS2C9g6+UCnVDp8TbmBGjnhpSM4fkqAmw4SaYTYAOFVC7l2B8rbOx94asxD3rMC+lduuDDmxGdx/oaxi0QptUXxnVMEKKmzs6qu5eZQ2MuSwb2dkEnlVrQoN9nqEIsEE10r3abG9+S+clEfx6E1zNmGGusogigdhYtK0eTIgrTybo55l1Z4awPv8FXW6hShKLwC2JptTQwy1i4uKJhSybAyhA1D//FpNdLux2mN6fD7SBv5Nv6t7K9qz/7UIq2cdQJvuyBxOpRyoswKeCvKdwTOKWLHvziiunnzuGx3v/OjLl1lVyOCwFuRNFJ1vVexVffhqw5VL647uFCHrKaJPlb6op4bkYvcLF57+jEoJc9YXuDSuRswkFTULOnzcGfHjzVFgySCowBLKMkZc6lTYlYYgjSZci0uSQVOfhX/rrcnYUo1ueKjqqYNs1uaCdYrKmlsB/BLRngQQAMEtjilglh9hLv8qsFkU8vAH+tz3nIe1aCb/MkSVWwNtkttiWwEgDZtW/ysnZAn2O3E349vRINF4+LGsLvFht5S/Tdp+oyVfU4jmBNcSWHq/2VJjENAa+9uT6XSDqioMY4Hx7S60Fi5NVPxqv6u2eEd33Am6YSsa9Enyi50xRp0pzgsQcF41O1cJ0TilcjX1k7/JO/YcydA1aHewvJvamFqYdKIlYEz6PhGyi8nJ6ccBQ69Ybl2TR9p5P2Xf81CO24rMRPGa+CkqgXZtV6s5yOvdFmcqRvKUfGEUIka4O24PWURSMm5M6X68AhK9r43g8BJvYl7/tyQQtCMouWtO2XBK+vkf7CeLbQGWmRIMs8Cdo8LXnVswKBn5m3wRcS8FgNF1I7erBd3QSSSTsSAT/rShVLCBNtn/KytJ8EMEcF/dX2T2jru7ZmR0jZMK/90XYn7anJECEAGN8aTNKh1S2Fmoab5r3yXvndxb66Zpt/FyIK9r65iG7YuWZQo+fONwv9iY1TpgUffE2VCUkNFKvQqXJ3KgSvnQv7wpALobtIUZGUdXpxPPfhXylKQzIz0d3tEz9/oLiZIyuetZ9pI6aZBzAxBCXB6OnZg2b2Cx2TuT6e0ppgeRgDxG4t0NTfFVJlvHmczS766syVo2TeutcPn/iZqTjQQgI/hM3z4mqcVWyXBjzFcPJg0n096X8AHBe4FkD2F5uziIm2bwMVQAQEOwDe2ruA5vefkggbbSE0qgtLVd6ltZfy2Te4Q8t7bQ+BAv5MV1chUNLsct0jk4K8ep0xlQ2tWVsLpRPBHarZZ2z5zHRmz9hh5N3ET9DbeLnUnOAVwjVrqu+YPyjpeZAGqcDjZV5ysfBG9bnTvxU255TW08wZdqR9WT/5VAkbWXQ2SPp3TTGQdrVwxqdaO4neg9d6JOBjplMeiV/vK5ifQ3jAFvTQw55VaxUfJs3z18lJjWiN0UU/n4WvlA4w589BIiQzQVn0BLotLHUcx8wJvT3cl6DlD0KOxLUmT6SU/OMoAwza1wMPFW7AefYud5jw0dm6UZ4qmsbSB/++dyKSvfzsBUIE+5/7zcDopGQMypSKoV4eqxil/Y/y7qxBlBFQfiqGlv/tCw7LmRIgIui6tZ0RrWFyHoMWfBLcbbuMDdSBO7Nhe1pVX4tk11MJy7Xs33aVqs2ZDJ03tKcHsJIeRb4p/VibfLDV/W5gvwvTjq5gVCbp12aGAALOHHAFF/x3uPd1S60pEspNd1VjJ6Wf4vvyLCWH97zHcKBgu+1LAh79KbydMAu+bXvMm2x+GMhczm3X59UagcZJstxfLV7ceAXnj7Qx4kzJySBX2VAwSu9+44mWyfpPfryFzgXlYJCKPmeMqKb1eDZAeWy4IgUCzGPaMc/OCA3UdVmm1lcQMJuBKX6vz9VEx1SLI6B8iUZksxdcUiVbw5Oeklr5y88jaf/Gf7f19UoVUICF/Vvy9a+56j8fhHUySa2/rFFOc6vpDuX6ca24o0xam8O9Lq5svsM9R8kMXps80evAGgyTdL1nR/+TfSeUnkgE6x+Txey4YHi4tO337ndpuK/OTCq2N10vjtptQKW1PE49XhqeBHV23K2VwY5E+0mzR9Uh6vEQQkwWKF22EAq75HnvKuSU7YVOzvOLrsdqP6WFAJ/itBTW2COzj5yHWUR2c+6493QF3KCcPU+wKJ/pQ+YuH4A/Q5wiyxpls/nmGnskR8buvp5G0waXflbIlhqnYizYlZHhdxW1zNp5gcwz0YStlrcw7HhVFGiJlB2QHZizufoLd0Rl8J12SC4jvEJeBH7CUrPgfJNq+oAFU3CEY21f8u6M5la0yDFJqSp92PXiYgTZl2TSewjR7JQ2pcEQVqVhFu7yOiFkfVchSEmhKvOSa8s8jyc9nXl1ZsqBbNyaQu8Hp5lNxMV6KuWyntjiRGRVBg/IQ+k89OQEX3xGyzv7MPxUx8mpEsg7D68NgSfIYOUr04NZMy3q26/3hR+GGku/VmJVC45URkl20Nkdk50WtbURIV5h1urFkAug62vJJFzhkFVskVkrvqDZv0ax3zkoskLa7vHcsfAGwR95bLRtVzOMJoto8pz4ea6B+OJ0grhaVevrygzufzOFdWilrK1oHfBGMNUzghd/s7feT9VwJzMHmsMJfMnv9AerTfcU+61Fty6NGe+nGMxgAdgYQpa0ztGuLxBgffvqeN7VQVVf6lNbVNxX80e7V5GnL/rMoNYONIWvJ/jtgzuRQkuHiJeY0v3vWJc1/NoTshPq9iFBRC4ki6CJUXuOV4UJnkVMqO9oWNWMU7Eeb0Gj33mjE/vWmOL7TFu6I2Mcz0RJgxSgfkt1ic35Xi2AL0bNItNb5oCpkgaRGpHnZlMerAjFYpOn0Tcc//XiJ0gTFtFm/ullQuWNLlaDGw1Du76a1/9X6X6I869AtGZqN2HT1aN8kVngy2dR/bi77D5br9YcTnscligbqzDzx++ixs/iDucs5xXlNMP+0rj+3Tvlq+G5KIkeYu84ZrS3A1IwBbk6Do6eb4ekZohvQg5ECLMoaMLWm+ZaqoK4SlR9eSIcasm0D1D69VkVQAiH8/6BDKlgCDihREK18yO9yv4I2XyowHMiCnLM8Eq7mAcV1BhfC0oCExdED5R9Law7LOcv4FIniiPxElx3y3brsNbZgnZiYdxprrA+G1nzMsVWsrdFo72LIn2mYg8ZwqpYDWEt6tXRZGkyrDy/jCpfDMFnT5EeRj+60p66P1cNhR92U6NmZip3cBV3UbxWLifocCUGXds3OvxQ28TsF0YyH9qp3u6ZYTntYg7Bhws5AcQIZxb2huXjYz2p5uW2E7O+wGviJgEng1lUyVw1pqKVK6JhoiQA6UF5iHaBUZnsCK0Rs22x+S/hoFdVNgZBcpawAV9yLInwPdMEwM+3QI0CcdhEhx3bYONcuisJCyEMcANrBacT+D8uEw891Cm6OUCYPgb8VdtdW/LrFiszAId/DiGzzQJ+Kk8HVcNY0wn1smazuYagrTKv0B5p5gyN6x/tvBc7fyCwVoTk1Ts5vDA+r5nwOL5tV6H/wJXEtb25PtStVVruMwKZB/P4l7waovjTnWRJzB7FkLiIsIbtcC4sa07DVgVIxUvIJ/6xUDQ3KU4wYPGUYUjlWtBS6ICXnDNXvrSfZVJ+lefqm2UqCvoUjjYCmHlujIK1ypVTeMnVZj41ylGqgPmQNWc7G2J4Rfwccl2SVyxAPQUK/9sY3Cr2G99YK2TviP46581JjYoP+ZHNkyVRWBSNnkDGcBTQvq8MGOQnwj/jfVepLFTDCtwmRT3dZRPviWNfkQdSep3xKfDEqk5htwfCS5vFLynERa+uo0gryMndT3PouMiOPKnSMOC4j1dHVW8tBUtvHYywE3kLsEHOEfH2Cl7j8d7oAl6K1uYzC0M/0QnGiQOeU4UQzdxmQbTxvW8P21CklqlGMhJP2Qfy6v74SOMK1HhWWid2sVdXH6egtPuCGgEyy2hbMCdWF/y22fU9bVSQC+SH8wg/tseW2jgR/6+zqXYID5MlQVsJ3cO9kf/6NqihQgbuJxH/itC18B+t/7yl7qMtO4rVj4biXivu8aWlqotStLxsyJiyOofu1ejcupd55ELuF8urbjV+LnZ+gJpX7/VWRQ66/3T/f3xzafULVt+eXVnqtp1lhUlhy9xkptFbXXx1bnFjSD5mFDQOv70EAJvsCd9D9GXXR0uKxmXi2lnhJcq9lbCMuqwLpH1GWCn8IJWyi/C7f70ffJqTspck3blcA0D4aPugcZ/i76TGpiX89SQGza/6VAHyAAuzX/Bdrjgx5VSyu4i5z5OIe3gvwwMkbKtdciqmlxWj19JFgP1Kr3/QW8377O7B4FKoDLDlBByPXDHei2ZzztkwOd5FEdrTy6EduCc/yPljod7gSPb1JczluHfgEam3cDxfLKOqvalSd8UYBAGvuvT/I6JiW6QRnjFrYqBlVMCl4MmaL4AT/4KFtSJNZfDoBi5Lj8UioLMcvs3Z5C38Zm94W4vQXhI6n0K7enQ1GgZmMBjh7LOUj4lELILfSEJW3nI8MoVPZbmn1ashntfCohQnrufi6iYro8aKCw3q2yWYdSQ2/6pQ9amdv/L/J5yKNVnHoGHh7jceZJlMvqcorihPF/otr6m1PyjZIeM7RFhR1He2A6rthOw/A0BuKOcuZodg93bsrRdELtlccyAyvZSz3DmzDw268mgmCGjAyssmIaihi1JsJ4nrOF1vl6eRZVt85lwP+KQhp3ayvUP+mBChKdU76m1/OAbGAyfpMkDWZr9TihOSWVA2hDRX3PJ+rbDLTyZgQ+sFxgDSiG4PiAaqde8zWgTXWz77jItnkbaF86nt4wPfgg1LR0PazxbBW81L8pbhYbz1RgC2MwTYZ8yO9sx48FD7F1QB1nm6o/QqlceKuc79TOQdWlwAdfFK3gyAydQd8ViQH6b8r+0slP/IDyX2V4dYH/ZyuJR5t9AVC29bElbc0uKHKlss1Q75GxAvkE4blcLSVvq6LMDwlZ1KfOekOv/uGnm4zL9u52Qn4vdzrCJO+g1HQRpiv66sRjCKguqxB0Q2KXhUsLWiBjZJdJ9A65urCoIHdNdovw7yR/ITR7d+LT41DNmrKFO/PWYtPkzatB7wcvt5KMaBxMvqZT8SX5Obs2AT/Jb/IFArbZJJh/Hl531uYuZMs8lYLx03OEPegNJbVaNXTFxF4wOSGjh1RVJ4zWEkMquR0p675/taRaoeJbI8LujHaRdOPiAUcEvKcjBnU57msCTHnM0wA4oXrTiJNkJGt/+BUsO1F3sCUUjMmDlZLRlNDXCe+n5di3S4oXxii5AEuy0d9uNTVb1+vVUC1SLNqHLdivkSfqFX2SVVatiimDop0tG1WnYHpBr+KoENVZbbJ3qv62BMANF1ItHX8R0/FZa6eDQ5H143EYUWzDQvRNIskyCYcpmOCgbthy2/a8nz38XkLR7QSbBoELKx5XSALZVHRmIYD6W6E7y0kM/Wth2bMyhCVEbdVQi13OiXh1xYLvQbbUVpf7TRcSkgFqPVB0gR0ov5dB1PQsBz4iQAkr79IP+g8P/oA/JVLngBDsITY39COMqNUCnZyfr4tZZcWkNgkRigp77/InDhFknyA2ud055MaTrsMgUOIBWOeLbeh79xM6s7yL0WMsJwHqJZuElN8oW3T/Ve+Iur+b26d0fjeu92bsOMLF88Mk7zNOQ1ELyxBjLOSRIkpXpiUa8/Qd6RSn3llmigI7UpJd0I5s6cv2IuyzH1BK76gPExnf84eGF7FBiW7SoUjaYePakOYOrhdH3xFXD/OjvSJNNdufHn6n6EROtmFuQ76vbv5VL3cELLpUGGCeYkor3foLIyHNYVSyLharfqQr4sc//iOI+yGodidSBGHR3tOvUDd5++bSwJMMlEIu605mHe1VBrzSZP7zCzEY68M7tk21/xEjusRFXmfw/97fnqyd23aTK3taFKTQev7UtD8lU5V2jDLfMCoQblx7lcB+xS0w6BH0yIGsk6rA4LG0S4Sf4V9PDJ3kddgY7KBYv//qoZ7aVlRnyBDxhwY9V7D4oa0KqSnqk3YM/ZgKPjEYu9qrwOPYQ8a+oiDX3Ji6Q3es1FCvp4FbMtk5rsjTx5M4p5f40xBcXF3UZtSNURzXFjypK345ALPnjAi5/CcQDCq6Qfv6EUUlns3bb7rF1gqChOAgo4QKGqOoH4eZnn4lYDtcDIHsx0ddGq5EDPncUY2CtS3FUruJcKa6RgByM86p4VmKR6KlLYAvcJO0qudEGdgzecFJN5o6+v6zMGEY47JcXMIzKdjDeOCmQ8M6EGzqRlFYvixSQjqZKVb0EN+FOks5VFaxCpKJio9Ue5HZ+fxrLPR22bHP2ra+ZkiWY3IBbVV//0Zyf6k4g=="},function(e,t){const i=["Black","White","Gray","Brown","Red","Pink","Crimson","Carnelian","Orange","Yellow","Ivory","Cream","Green","Viridian","Aquamarine","Cyan","Blue","Cerulean","Azure","Indigo","Navy","Violet","Purple","Lavender","Magenta","Rainbow","Iridescent","Spectrum","Prism","Bold","Vivid","Pale","Clear","Glass","Translucent","Misty","Dark","Light","Gold","Silver","Copper","Bronze","Steel","Iron","Brass","Mercury","Zinc","Chrome","Platinum","Titanium","Nickel","Lead","Pewter","Rust","Metal","Stone","Quartz","Granite","Marble","Alabaster","Agate","Jasper","Pebble","Pyrite","Crystal","Geode","Obsidian","Mica","Flint","Sand","Gravel","Boulder","Basalt","Ruby","Beryl","Scarlet","Citrine","Sulpher","Topaz","Amber","Emerald","Malachite","Jade","Abalone","Lapis","Sapphire","Diamond","Peridot","Gem","Jewel","Bevel","Coral","Jet","Ebony","Wood","Tree","Cherry","Maple","Cedar","Branch","Bramble","Rowan","Ash","Fir","Pine","Cactus","Alder","Grove","Forest","Jungle","Palm","Bush","Mulberry","Juniper","Vine","Ivy","Rose","Lily","Tulip","Daffodil","Honeysuckle","Fuschia","Hazel","Walnut","Almond","Lime","Lemon","Apple","Blossom","Bloom","Crocus","Rose","Buttercup","Dandelion","Iris","Carnation","Fern","Root","Branch","Leaf","Seed","Flower","Petal","Pollen","Orchid","Mangrove","Cypress","Sequoia","Sage","Heather","Snapdragon","Daisy","Mountain","Hill","Alpine","Chestnut","Valley","Glacier","Forest","Grove","Glen","Tree","Thorn","Stump","Desert","Canyon","Dune","Oasis","Mirage","Well","Spring","Meadow","Field","Prairie","Grass","Tundra","Island","Shore","Sand","Shell","Surf","Wave","Foam","Tide","Lake","River","Brook","Stream","Pool","Pond","Sun","Sprinkle","Shade","Shadow","Rain","Cloud","Storm","Hail","Snow","Sleet","Thunder","Lightning","Wind","Hurricane","Typhoon","Dawn","Sunrise","Morning","Noon","Twilight","Evening","Sunset","Midnight","Night","Sky","Star","Stellar","Comet","Nebula","Quasar","Solar","Lunar","Planet","Meteor","Sprout","Pear","Plum","Kiwi","Berry","Apricot","Peach","Mango","Pineapple","Coconut","Olive","Ginger","Root","Plain","Fancy","Stripe","Spot","Speckle","Spangle","Ring","Band","Blaze","Paint","Pinto","Shade","Tabby","Brindle","Patch","Calico","Checker","Dot","Pattern","Glitter","Glimmer","Shimmer","Dull","Dust","Dirt","Glaze","Scratch","Quick","Swift","Fast","Slow","Clever","Fire","Flicker","Flash","Spark","Ember","Coal","Flame","Chocolate","Vanilla","Sugar","Spice","Cake","Pie","Cookie","Candy","Caramel","Spiral","Round","Jelly","Square","Narrow","Long","Short","Small","Tiny","Big","Giant","Great","Atom","Peppermint","Mint","Butter","Fringe","Rag","Quilt","Truth","Lie","Holy","Curse","Noble","Sly","Brave","Shy","Lava","Foul","Leather","Fantasy","Keen","Luminous","Feather","Sticky","Gossamer","Cotton","Rattle","Silk","Satin","Cord","Denim","Flannel","Plaid","Wool","Linen","Silent","Flax","Weak","Valiant","Fierce","Gentle","Rhinestone","Splash","North","South","East","West","Summer","Winter","Autumn","Spring","Season","Equinox","Solstice","Paper","Motley","Torch","Ballistic","Rampant","Shag","Freckle","Wild","Free","Chain","Sheer","Crazy","Mad","Candle","Ribbon","Lace","Notch","Wax","Shine","Shallow","Deep","Bubble","Harvest","Fluff","Venom","Boom","Slash","Rune","Cold","Quill","Love","Hate","Garnet","Zircon","Power","Bone","Void","Horn","Glory","Cyber","Nova","Hot","Helix","Cosmic","Quark","Quiver","Holly","Clover","Polar","Regal","Ripple","Ebony","Wheat","Phantom","Dew","Chisel","Crack","Chatter","Laser","Foil","Tin","Clever","Treasure","Maze","Twisty","Curly","Fortune","Fate","Destiny","Cute","Slime","Ink","Disco","Plume","Time","Psychadelic","Relic","Fossil","Water","Savage","Ancient","Rapid","Road","Trail","Stitch","Button","Bow","Nimble","Zest","Sour","Bitter","Phase","Fan","Frill","Plump","Pickle","Mud","Puddle","Pond","River","Spring","Stream","Battle","Arrow","Plume","Roan","Pitch","Tar","Cat","Dog","Horse","Lizard","Bird","Fish","Saber","Scythe","Sharp","Soft","Razor","Neon","Dandy","Weed","Swamp","Marsh","Bog","Peat","Moor","Muck","Mire","Grave","Fair","Just","Brick","Puzzle","Skitter","Prong","Fork","Dent","Dour","Warp","Luck","Coffee","Split","Chip","Hollow","Heavy","Legend","Hickory","Mesquite","Nettle","Rogue","Charm","Prickle","Bead","Sponge","Whip","Bald","Frost","Fog","Oil","Veil","Cliff","Volcano","Rift","Maze","Proud","Dew","Mirror","Shard","Salt","Pepper","Honey","Thread","Bristle","Ripple","Glow","Zenith"],n=["head","crest","crown","tooth","fang","horn","frill","skull","bone","tongue","throat","voice","nose","snout","chin","eye","sight","seer","speaker","singer","song","chanter","howler","chatter","shrieker","shriek","jaw","bite","biter","neck","shoulder","fin","wing","arm","lifter","grasp","grabber","hand","paw","foot","finger","toe","thumb","talon","palm","touch","racer","runner","hoof","fly","flier","swoop","roar","hiss","hisser","snarl","dive","diver","rib","chest","back","ridge","leg","legs","tail","beak","walker","lasher","swisher","carver","kicker","roarer","crusher","spike","shaker","charger","hunter","weaver","crafter","binder","scribe","muse","snap","snapper","slayer","stalker","track","tracker","scar","scarer","fright","killer","death","doom","healer","saver","friend","foe","guardian","thunder","lightning","cloud","storm","forger","scale","hair","braid","nape","belly","thief","stealer","reaper","giver","taker","dancer","player","gambler","twister","turner","painter","dart","drifter","sting","stinger","venom","spur","ripper","swallow","devourer","knight","lady","lord","queen","king","master","mistress","prince","princess","duke","dutchess","samurai","ninja","knave","slave","servant","sage","wizard","witch","warlock","warrior","jester","paladin","bard","trader","sword","shield","knife","dagger","arrow","bow","fighter","bane","follower","leader","scourge","watcher","cat","panther","tiger","cougar","puma","jaguar","ocelot","lynx","lion","leopard","ferret","weasel","wolverine","bear","raccoon","dog","wolf","kitten","puppy","cub","fox","hound","terrier","coyote","hyena","jackal","pig","horse","donkey","stallion","mare","zebra","antelope","gazelle","deer","buffalo","bison","boar","elk","whale","dolphin","shark","fish","minnow","salmon","ray","fisher","otter","gull","duck","goose","crow","raven","bird","eagle","raptor","hawk","falcon","moose","heron","owl","stork","crane","sparrow","robin","parrot","cockatoo","carp","lizard","gecko","iguana","snake","python","viper","boa","condor","vulture","spider","fly","scorpion","heron","oriole","toucan","bee","wasp","hornet","rabbit","bunny","hare","brow","mustang","ox","piper","soarer","flasher","moth","mask","hide","hero","antler","chill","chiller","gem","ogre","myth","elf","fairy","pixie","dragon","griffin","unicorn","pegasus","sprite","fancier","chopper","slicer","skinner","butterfly","legend","wanderer","rover","raver","loon","lancer","glass","glazer","flame","crystal","lantern","lighter","cloak","bell","ringer","keeper","centaur","bolt","catcher","whimsey","quester","rat","mouse","serpent","wyrm","gargoyle","thorn","whip","rider","spirit","sentry","bat","beetle","burn","cowl","stone","gem","collar","mark","grin","scowl","spear","razor","edge","seeker","jay","ape","monkey","gorilla","koala","kangaroo","yak","sloth","ant","roach","weed","seed","eater","razor","shirt","face","goat","mind","shift","rider","face","mole","vole","pirate","llama","stag","bug","cap","boot","drop","hugger","sargent","snagglefoot","carpet","curtain"],s=[".","_","-",""],a=["asfsafa","poop","JciminYede","BastionAgog","afsahashf","Sphecoid","hsafasf","KittensFlink","vertix","Catadioptric","bOOter","alangnN","mAxMofoo","xconnox22","xnielss","CockeBedlam","Humpenscrump","flamer","burningFard","EncroacEnow","sfkja","Joementum","Lassitude","Hodgepodge","doblons","Ontological","Quicksticks","Delphic","Cotillion","HorodSippet","Whirlybird","Melomania","MissbenKvetch","Martinet","Antimacassar","Geocentrism","Moniker","Polymythy","Orotund","Coulter","Ampersand","xxTridoxX","sl4mmer","SlodomArmlet","Gobsmacked","Equiparate","squinm","JoinGlib","Oviform","Sedipity","poodityy","poopidy","iuhsjfpjb","9r8230hi","alskfhali","aslhalsg","alsalsg","Swansdown","Glockenspiel","tisa","tina","lisa","Samrox8Rhumb","Cattitude","Fenestella","dannn","8uuhhh","Buckaroo","Simplism","Bupkis","Calamus","asfasfi","Ragamuffin","Zizyphus","Donkeyman","asfkaf","pooper","Phobophobia","Rubric","Orthography","Prim","Cordiform","Oakum","Gaberlunzie","goober","Colossus","Venefic","Mobbins","Cancatervate","Corkscrew","Dyarchy","Muumuu","Tunicle","Scirocco","Isopolity","Concoction","Necromania","Gadzooks","Fumulus","Bumbledom","Lustring","Cockatoo","Annulated","888666","Avuncular","Pedmed13","Crotchet","Univoltine","hk888si","alonn","nielll","Diphthong","tripper","trippier","loonna","wScreax","aAloonm","wBeater","oSookr","wOOw","Absinthial","Tightwad","killlaXX","bbNooob","Hetaerocracy","Haberdashery"];function r(e){return e=e||Math.random,n[Math.floor(e()*n.length)]}e.exports=function(e){var t=r(e),n=r(e);n=n.substring(0,1).toUpperCase()+n.substring(1);var o,l,c,d,h,u=(o=(o=e)||Math.random,i[Math.floor(o()*i.length)]),p=(l=(l=e)||Math.random,s[Math.floor(l()*s.length)]),f=(c=(c=e)||Math.random,a[Math.floor(c()*a.length)]);return d=1,h=100,Math.floor(Math.random()*(h-d+1))+d>=20?f:u+p+t}},function(e,t,i){const n=i(1);function s(e,t){const i=t.pathNodes.length;return t.reversible?e>=.8*i?-1:e<=.2*i?1:Math.random()<.5?-1:1:1}const a=20;function r(e,t,i,r){let o=null,l=1/0;const c=r&&r.ignore?r.ignore:{};for(const r in e){if(!0===c[r])continue;const d=e[r],h=d.pathNodes,u=d.reversible?h.length:Math.floor(.8*h.length);for(let e=0;e<u;e++){const c=h[e],u=n.getD3D(i.x,i.y,i.z,c.x,c.y,c.z);if(u<l&&(o=r,l=u,t.pathIndex=o,t.pathNodeIndex=e,t.pathDirection=s(e,d),u<=a))return r}}return o}e.exports={getNextPathPosition:function(e,t,i){const n=t.map.botPaths;if(n.length>0){if(null!==e.pathIndex){const t=n[e.pathIndex],s=t.pathNodes;if(e.pathNodeIndex+=e.pathDirection,e.pathNodeIndex<0||e.pathNodeIndex===s.length){if(t.reversible)return e.pathDirection*=-1,e.pathNodeIndex+=2*e.pathDirection,s[e.pathNodeIndex];{const t=r(n,e,i,{ignore:{[e.pathIndex]:!0}});if(null===t)return null;return n[t].pathNodes[e.pathNodeIndex]}}return s[e.pathNodeIndex]}const t=r(n,e,i);if(null===t)return null;return n[t].pathNodes[e.pathNodeIndex]}return null}}},function(e,t){e.exports=[{name:"AWP Blaster",src:"weapon_1",icon:"icon_1",assetIcon:"",sound:"weapon_1",refDist:25,rollOff:1,equipment:!1,secondary:!1,noSpread:!1,projectile:{},pj_asset:"",pj_disable:!0,pj_mat:"BASIC",pj_color:16777179,pj_dmg:100,pj_spd:2.5,pj_lookDir:!0,pj_grav:1e-4,pj_scale:1.4,pj_length:10,pj_range:7e3,pj_snd:0,akimbo:!1,noAim:!1,animWhileAim:!0,trail:!0,flap:{src:"flap_0",rot:2.1,scl:1,zOff:.43,xOff:.17,yOff:.53},physRang:0,physPow:0,burst:!0,burstC:2,burstR:100,spread:180,minSpread:20,noAo:!0,nAuto:!0,type:0,scope:!0,swapTime:300,aimSpd:120,chrgTime:0,ovrChrg:!1,spdMlt:.95,ammo:12,dmg:100,hsMlt:1.5,pierce:.2,reload:1200,range:1e3,dropStart:230,dmgDrop:30,scale:.00115608717587935,leftHoldY:-.65,rightHoldY:-.68,leftHoldZ:2.1,rightHoldZ:.75,holdW:1,xOff:.8,yOff:-.65,zOff:-1.8,xOrg:0,yOrg:-.55,zOrg:-.8,cLean:.2,cRot:.2,cDrop:.1,inspectR:.2,inspectM:.1,muzOff:8,muzMlt:1.6,rate:280,spread:260,zoom:2.7,leanMlt:1.5,recoil:.009,recoilR:.05,recover:.993,recoverY:.997,recoverF:.975,recoilYM:.55,recoilZ:1.5,recoilAnim:{time:280,aimTime:500,recoilTweenY:.24},jumpYM:.15,rumble:.9,rumbleDur:500,icnPad:9,charm:!0,charmMXOff:-.37,charmMYOff:-.4,charmMZOff:-.91,charmMScl:1,charmXOff:0,charmYOff:0,charmZOff:0,charmScl:1,magReserve:10,altSkin:{projection:!0,video:2,outline:0,outlineS:1.05}},{name:"Zombie Assaulter",src:"weapon_2",icon:"icon_2",assetIcon:"",sound:"weapon_2",refDist:25,rollOff:1,projectile:{},pj_asset:"",pj_disable:!0,pj_mat:"BASIC",pj_color:16777179,pj_dmg:23,pj_spd:2.6,pj_lookDir:!0,pj_grav:11e-5,pj_scale:1.4,pj_length:10,pj_range:3e3,pj_snd:0,equipment:!1,secondary:!1,noSpread:!1,akimbo:!1,noAim:!1,noAo:!0,nAuto:!1,physRang:0,physPow:0,swapWiggle:.3,attach:0,attachYOff:-.07,attachZOff:-.8,zRot:1,type:0,swapTime:300,aimSpd:130,chrgTime:0,ovrChrg:!1,spdMlt:.95,ammo:35,rate:90,reload:1500,dmg:28,hsMlt:1.5,pierce:1,range:700,dmgDrop:5,scale:.00095745145728643,leftHoldY:-.41,rightHoldY:-.6,leftHoldZ:.5,rightHoldZ:-1.2,holdW:.8,xOff:.7,yOff:-.87,zOff:-3.33,rotOff:-.08,rotOffA:-.035,aimOffY:.042,yRot:.0018,xOrg:0,yOrg:-.59,zOrg:-2.14,cLean:.2,cRot:.1,cDrop:.1,inspectR:.1,inspectM:1.5,caseZOff:-1.7,caseYOff:-.2,muzOff:5.1,muzOffY:-.05,muzMlt:1.4,spread:100,minSpread:5,zoom:1.6,leanMlt:1.5,recoil:.003,recoilR:.05,recover:.978,recoverY:.995,recoverF:.975,jYMlt:.9,recoilYM:1.1,recoilZ:4.3,recoilZM:-.04,aimRecMlt:.65,recoilAnim:{time:160,recoilTweenY:.065,recoilTweenZ:.1},jumpYM:.3,rumble:.5,icnPad:5,charm:!0,charmMXOff:-.37,charmMYOff:-.3,charmMZOff:1.19,charmMScl:1,charmXOff:0,charmYOff:0,charmZOff:0,charmScl:1,muzID:3,magReserve:7,mysteryBoxR:2,altSkin:{projection:!0,video:2,outline:0,outlineS:1.05}},{name:"Pistol",src:"weapon_3",icon:"icon_3",assetIcon:"",sound:"weapon_3",refDist:25,rollOff:1,secondary:!0,equipment:!1,noSpread:!1,akimbo:!1,noAim:!1,noAo:!0,transp:!0,nAuto:!0,projectile:{},pj_asset:"",pj_disable:!0,pj_mat:"BASIC",pj_color:16777179,pj_dmg:12,pj_spd:2.3,pj_lookDir:!0,pj_grav:1e-4,pj_scale:1.4,pj_length:10,pj_range:1600,pj_snd:0,physRang:0,physPow:0,kill:["",75],swapWiggle:.3,type:1,shine:10,swapTime:260,aimSpd:110,chrgTime:0,ovrChrg:!1,spdMlt:1.05,ammo:16,reload:700,dmg:20,hsMlt:1.5,range:700,dmgDrop:10,scale:.0003158947055276376,leftHoldY:-1.1,rightHoldY:-.62,leftHoldZ:-.3,rightHoldZ:-.32,rightHoldX:.13,holdW:1.3,xOff:1.2,yOff:-.6,zOff:-3.7,xOrg:0,yRot:-.005,yOrg:-.23,zOrg:-3.9,jYMlt:.1,cLean:.3,cRot:.3,caseZOff:.2,caseYOff:0,inspectR:.3,inspectM:.8,muzID:3,muzOff:1.5,muzOffY:0,muzMlt:.95,rate:100,spread:60,zoom:1.4,leanMlt:1,recoil:.006,recoilR:.02,recover:.98,recoverY:.99,recoverF:.98,recoilYM:.2,aimRecMlt:.4,recoilZ:3.8,recoilZM:-.4,recoilAnim:{time:200,recoilTweenY:.28,recoilTweenZ:.1},rumble:.4,icnPad:-15,expScale:.8,charm:!0,charmMXOff:-.37,charmMYOff:-.2,charmMZOff:.91,charmMScl:1,charmXOff:0,charmYOff:0,charmZOff:0,charmScl:1,magReserve:7,mysteryBoxR:0,altSkin:{projection:!0,video:2,outline:0,outlineS:1.05}},{name:"UMPire",src:"weapon_4",icon:"icon_4",assetIcon:"",sound:"weapon_4",refDist:25,rollOff:1,secondary:!1,equipment:!1,noSpread:!1,nAuto:!1,noAim:!1,akimbo:!1,projectile:{},pj_asset:"",pj_disable:!0,pj_mat:"BASIC",pj_color:16777179,pj_dmg:18,pj_spd:2.4,pj_lookDir:!0,pj_grav:11e-5,pj_scale:1.4,pj_length:10,pj_range:2700,pj_snd:0,physRang:0,physPow:0,swapWiggle:.5,attach:0,attachYOff:-.09,attachZOff:-1.1,zRot:.75,noAo:!0,type:0,shine:50,swapTime:300,aimSpd:110,chrgTime:0,ovrChrg:!1,spdMlt:1.04,ammo:44,reload:1e3,dmg:24,hsMlt:1.5,pierce:1,range:700,dmgDrop:12,scale:.000574897587939697,leftHoldY:-.4,leftHoldX:-.1,leftHoldZ:1.1,rightHoldZ:-.95,rightHoldY:-.5,holdW:.85,xOff:.85,yOff:-.86,zOff:-3,xOrg:0,yOrg:-.59,zOrg:-2.5,cRot:.18,cLean:.16,inspectR:.2,inspectM:1.2,caseYOff:-.15,caseZOff:-.4,muzID:3,muzOff:2.15,muzOffY:.1,rate:80,spread:70,minSpread:5,zoom:1.65,jYMlt:.8,leanMlt:1,recoil:.0034,recoilY:.77,recoilYM:.3,recoilR:.065,recover:.975,recoverY:.996,recoverF:.975,recoilZ:4.2,recoilZM:-.1,aimRecMlt:.6,recoilAnim:{time:190,recoilTweenYM:.05,recoilTweenY:.06,recoilTweenZ:.14},expScale:.8,rumble:.4,icnPad:0,charm:!0,charmMXOff:-.35,charmMYOff:.17,charmMZOff:1.53,charmMScl:1,charmXOff:0,charmYOff:0,charmZOff:0,charmScl:1,magReserve:7,mysteryBoxR:2,altSkin:{projection:!0,video:2,outline:0,outlineS:1.05}},{name:"Revolver",src:"weapon_5",icon:"icon_5",assetIcon:"",sound:"weapon_5",refDist:25,rollOff:1,secondary:!1,equipment:!1,noSpread:!1,akimbo:!1,noAim:!1,nAuto:!0,noAo:!0,projectile:{},pj_asset:"",pj_disable:!0,pj_mat:"BASIC",pj_color:16777179,pj_dmg:66,pj_spd:2.3,pj_lookDir:!0,pj_grav:1e-4,pj_scale:1.4,pj_length:10,pj_range:2600,pj_snd:0,physRang:0,physPow:0,nCase:!0,transp:!0,kill:["",50],type:0,swapTime:200,swapWiggle:.4,aimSpd:110,chrgTime:0,ovrChrg:!1,spdMlt:1.04,burst:!0,burstC:3,burstR:90,ammo:12,reload:900,dmg:66,hsMlt:1.5,pierce:.85,dmgDrop:10,scale:.000515531266331653,hDstOff:1.6,leftHoldY:-1.3,rightHoldY:-.8,leftHoldZ:-.6,rightHoldZ:-.72,rightHoldX:.1,holdW:1.1,rotOff:-.05,xOff:.7,yOff:-.5,zOff:-3.5,xOrg:0,yOrg:-.31,zOrg:-3.5,jYMlt:.4,cLean:.2,cRot:.1,cDrop:.1,inspectR:.1,inspectM:.3,muzID:3,muzOff:2.75,muzOffY:.2,muzMlt:.95,range:700,rate:450,spread:100,zoom:1.45,leanMlt:1.6,recoil:.013,recoilR:.082,recover:.982,recoverY:.992,recoverF:.98,recoilYM:.5,aimRecMlt:.1,recoilZM:.01,recoilZ:4,recoilAnim:{time:350,recoilTweenY:.39,recoilTweenYM:.25},expScale:.9,rumble:.7,icnPad:-10,charm:!0,charmMXOff:-.27,charmMYOff:-.58,charmMZOff:.56,charmMScl:1,charmXOff:0,charmYOff:0,charmZOff:0,charmScl:1,magReserve:5,mysteryBoxR:1,altSkin:{projection:!0,video:2,outline:0,outlineS:1.05}},{name:"Shotgun",src:"weapon_6",icon:"icon_6",assetIcon:"",sound:"weapon_6",refDist:25,rollOff:1,secondary:!1,equipment:!1,noSpread:!1,noAim:!1,akimbo:!1,altSkin:{name:"Nova Pump",mid:0,blocked:!0,noSale:!0,midT:38,scl:.9,mScl:1,zOff:.28,yOff:-.5,seas:2,weapon:6,rarity:0,charmMXOff:-.37,charmMYOff:-.2,charmMZOff:1.18,charmMScl:1,charmXOff:0,charmYOff:0,charmZOff:0,charmScl:1,projection:!0,video:2,outline:0,outlineS:1.05},noAo:!0,nAuto:!0,nCase:!0,nRing:!0,swapWiggle:.4,shine:35,type:0,physRang:35,physPow:.09,swapTime:300,aimSpd:120,chrgTime:0,ovrChrg:!1,spdMlt:1,burst:!0,burstC:3,burstR:60,ammo:6,reload:1100,dmg:50,hsMlt:1.25,dmgDrop:50,scale:.00082934281407035,rightHoldX:.1,leftHoldY:-.6,rightHoldY:-.6,leftHoldZ:.4,rightHoldZ:-1.3,holdW:1,xOff:.95,yOff:-.6,zOff:-3.8,xOrg:0,yOrg:-.3,zOrg:-2.8,cLean:.2,cRot:.2,cDrop:.1,jYMlt:.2,inspectR:.1,muzID:3,muzOff:6,muzMlt:1.8,inspectM:1.9,range:160,rate:450,innac:110,spread:180,shots:5,cSpread:[[.03,.02,-.27,.02,.03,-.31,.3,-.01,.01,.28],[.01,.02,-.17,-.22,-.3,.31,.32,.28,.3,-.2]],minSpread:20,zoom:1.25,leanMlt:1.6,recoil:.02,recoilR:.015,recover:.99,recoverF:.97,recoilZ:2.1,recoilZM:.2,aimRecMlt:.67,recoilYM:.65,recoilAnim:{time:340,recoilTweenY:.22},jumpYM:.5,rumble:.8,icnPad:10,expScale:.85,charm:!0,charmMXOff:-.37,charmMYOff:-.39,charmMZOff:1.2,charmMScl:1,charmXOff:0,charmYOff:0,charmZOff:0,charmScl:1,magReserve:12,mysteryBoxR:3,altSkin:{projection:!0,video:2,outline:0,outlineS:1.05}},{name:"NORU",src:"weapon_7",icon:"icon_7",assetIcon:"",sound:"weapon_7",refDist:25,rollOff:1,secondary:!1,equipment:!1,akimbo:!1,noAim:!1,nAuto:!1,noSpread:!1,projectile:{},pj_asset:"",pj_disable:!0,pj_mat:"BASIC",pj_color:16777179,pj_dmg:18,pj_spd:2.3,pj_lookDir:!0,pj_grav:1e-4,pj_scale:1.4,pj_length:10,pj_range:3e3,pj_snd:0,physRang:0,physPow:0,type:0,attach:0,swapWiggle:.3,attachYOff:-.085,attachZOff:-.74,zRot:.75,noAo:!0,swapTime:600,aimSpd:200,chrgTime:0,ovrChrg:!1,spdMlt:.79,jumMlt:.85,ammo:60,reload:3300,dmg:22,hsMlt:1.5,pierce:1,range:700,dmgDrop:10,jYMlt:.8,scale:.0008856008924623108,leftHoldY:-.85,leftHoldX:.4,rightHoldX:-.1,rightHoldY:-.79,leftHoldZ:1.1,rightHoldZ:-.2,holdW:1.1,yRot:-.01,xOff:.95,yOff:-.75,zOff:-2.8,xOrg:0,yOrg:-.6,zOrg:-1.8,cLean:.1,cRot:.1,cDrop:.1,inspectR:.2,inspectM:.6,caseInd:2,caseZOff:-.5,caseYOff:-.1,muzID:3,muzOff:5.5,muzOffY:-.14,muzMlt:1.7,rate:100,spread:300,minSpread:10,zoom:1.3,leanMlt:1.6,recoil:.0032,recoilR:.04,recover:.98,recoverY:.9975,recoverF:.975,recoilZ:3.8,recoilYM:.25,recoilZ:3,recoilZM:-.1,aimRecMlt:.5,recoilAnim:{time:200,recoilTweenY:.045,recoilTweenZ:.12},jumpYM:.5,expScale:.85,rumble:.65,icnPad:10,charm:!0,charmMXOff:-.37,charmMYOff:-.16,charmMZOff:.91,charmMScl:1,charmXOff:0,charmYOff:0,charmZOff:0,charmScl:1,magReserve:4,mysteryBoxR:3,altSkin:{projection:!0,video:2,outline:0,outlineS:1.05}},{name:"Semi Auto",src:"weapon_8",icon:"icon_8",assetIcon:"",sound:"weapon_8",refDist:25,rollOff:1,noSpread:!1,secondary:!1,equipment:!1,noAim:!1,akimbo:!1,projectile:{},pj_asset:"",pj_disable:!0,pj_mat:"BASIC",pj_color:16777179,pj_dmg:33,pj_spd:2.5,pj_lookDir:!0,pj_grav:1e-4,pj_scale:1.4,pj_length:10,pj_range:4e3,pj_snd:0,physRang:0,physPow:0,altSkin:{name:"Nova Semi",blocked:!0,noSale:!0,mid:0,midT:0,seas:3,weapon:8,rarity:0,charmMXOff:-.29999999999999993,charmMYOff:-.35000000000000014,charmMZOff:1.13,charmMScl:1,charmXOff:0,charmYOff:0,charmZOff:0,charmScl:1,projection:!0,video:2,outline:0,outlineS:1.05},attach:0,attachYOff:-.08,attachZOff:-1.55,nAuto:!0,zRot:.7,type:0,noAo:!0,swapWiggle:.4,swapTime:300,aimSpd:120,chrgTime:0,ovrChrg:!1,spdMlt:1,ammo:12,reload:1500,dmg:35,hsMlt:1.4571,lsMlt:.5429,pierce:.2,range:1e3,dmgDrop:0,scale:.00093686221105528,leftHoldY:-.5,rightHoldY:-.45,leftHoldZ:.4,rightHoldZ:-1.85,jYMlt:.6,xOff:.8,yOff:-.6,zOff:-3.5,xOrg:0,yOrg:-.395,yRot:-.005,zOrg:-3.4,rotOff:-.02,cLean:.2,cRot:.2,cDrop:.1,inspectR:.2,inspectM:1.4,muzID:3,muzOff:4,muzOffY:-.05,muzMlt:1.1,rate:100,spread:250,caseZOff:-1.3,zoom:2.1,recoil:.01,recoilR:.08,recover:.98,recoilY:.36,recoverY:.994,recoverF:.975,recoilYM:.6,recoilZ:2,recoilZM:.2,aimRecMlt:.8,recoilAnim:{time:250,recoilTweenY:.11,recoilTweenZ:.15},jumpYM:.5,rumble:.75,icnPad:10,charm:!0,charmMXOff:-.2699999999999999,charmMYOff:-.35000000000000014,charmMZOff:1.15,charmMScl:1,charmXOff:0,charmYOff:0,charmZOff:0,charmScl:1,magReserve:8,mysteryBoxR:2},{name:"Dream Wrecker",src:"weapon_9",icon:"icon_9",assetIcon:"",sound:"weapon_9",refDist:25,rollOff:1,noSpread:!1,noAim:!1,secondary:!1,equipment:!1,akimbo:!1,nInsp:!0,kill:["",75],nSkill:!0,nAuto:!1,nCase:!0,nRing:!0,noAo:!0,projectile:{},pj_asset:"",pj_mat:"BASIC",pj_color:16777179,pj_explode:45,pj_dmg:60,pj_eDmg:45,pj_spd:.75,pj_grav:8e-5,pj_nImp:!0,pj_lookDir:!0,pj_scale:1.4,pj_length:10,pj_range:1500,type:0,swapTime:350,swapWiggle:.4,aimSpd:200,chrgTime:0,ovrChrg:!1,spdMlt:.95,physRang:46,physPow:.095,dmg:25,ammo:9,shots:0,reload:1500,hsMlt:1,lsMlt:1,scale:.00076263407035176,leftHoldX:-.1,leftHoldY:-.36,rightHoldY:-.3,leftHoldZ:1.2,rightHoldX:-.15,rightHoldZ:-.45,holdW:.9,jYMlt:.4,xOff:.95,yOff:-.56,zOff:-2.6,xOrg:0,yOrg:-.945,zOrg:-3,zRot:.9,cLean:.2,cRot:.2,cDrop:.1,muzID:3,muzOff:5,muzOffY:0,muzMlt:1.5,rate:320,spread:120,minSpread:15,zoom:1.5,leanMlt:1.4,landBob:.8,recoil:.008,recoilR:.012,recover:.99,recoverY:.998,recoverF:.975,recoilZ:4,recoilZM:-.5,aimRecMlt:.9,recoilAnim:{time:400,recoilTweenY:.25},jumpYM:.3,expScale:.7,rumble:1,rumbleDur:750,icnPad:10,charm:!0,charmMXOff:-.38999999999999996,charmMYOff:-.16000000000000003,charmMZOff:-.019999999999999532,charmMScl:1,charmXOff:0,charmYOff:0,charmZOff:0,charmScl:1,magReserve:8,mysteryBoxR:0,altSkin:{projection:!0,video:2,outline:0,outlineS:1.05}},{name:"Akimbo Uzi",src:"weapon_10",icon:"icon_10",assetIcon:"",sound:"weapon_10",refDist:25,rollOff:1,secondary:!1,equipment:!1,nAuto:!1,noAo:!0,physRang:0,physPow:0,altSkin:{name:"Nova Uzi",mid:0,midT:0,blocked:!0,noSale:!0,weapon:10,rarity:0,seas:3,projection:!0,video:2,outline:0,outlineS:1.05},nInsp:!0,noAim:!0,akimbo:!0,type:0,swapTime:300,aimSpd:120,chrgTime:0,ovrChrg:!1,spdMlt:1.04,ammo:30,reload:1300,dmg:18,hsMlt:1,pierce:1,range:500,dmgDrop:13,scale:.9,rightHoldY:-.55,leftHoldZ:.2,leftHoldX:-.1,leftHoldY:-.55,rightHoldZ:.2,rightHoldX:-.1,holdW:1.3,xOff:1.5,yOff:-.95,zOff:-3.3,xOrg:0,yOrg:-.62,zOrg:-2.5,zLnM:.4,cLean:.1,cRot:.1,cDrop:.2,caseYOff:-.15,caseZOff:-.4,muzID:3,muzOff:3.6,rate:70,spread:0,noSpread:!1,movSpread:.01,minSpread:10,zoom:1.5,recoil:.0034,recoilR:.015,leanMlt:.6,recover:.978,recoverY:.996,recoverF:.975,recoilZ:5,recoilYM:.7,recoilAnim:{recoilTweenY:.01},expScale:.7,rumble:.4,icnPad:-4,charm:!0,charmMXOff:-.37,charmMYOff:-.2,charmMZOff:.91,charmMScl:1,charmXOff:0,charmYOff:0,charmZOff:0,charmScl:1,magReserve:6,mysteryBoxR:1},{name:"Desert Eagle",src:"weapon_11",icon:"icon_11",assetIcon:"",sound:"weapon_11",refDist:25,rollOff:1,noSpread:!1,akimbo:!1,secondary:!0,equipment:!1,noAim:!1,projectile:{},pj_asset:"",pj_disable:!0,pj_mat:"BASIC",pj_color:16777179,pj_dmg:50,pj_spd:2.3,pj_lookDir:!0,pj_grav:1e-4,pj_scale:1.4,pj_length:10,pj_range:1500,pj_snd:0,physRang:0,physPow:0,nAuto:!0,noAo:!0,transp:!0,kill:["",50],type:1,swapTime:200,aimSpd:110,chrgTime:0,ovrChrg:!1,spdMlt:1,ammo:3,reload:1e3,dmg:80,hsMlt:1.2,pierce:.85,dmgDrop:10,scale:.94,leftHoldY:-.9,rightHoldY:-.7,leftHoldZ:-.5,rightHoldZ:-.5,holdW:1.1,xOff:1,yOff:-.5,zOff:-4.1,xOrg:0,yOrg:-.195,zOrg:-3.8,cLean:.3,cRot:.3,inspectR:.35,inspectM:.9,muzID:3,muzOff:2,muzMlt:1.1,range:700,rate:350,spread:150,jYMlt:.5,zoom:1.4,leanMlt:1.6,recoil:.01,recoilR:.01,recover:.982,recoverY:.995,recoverF:.98,recoilYM:.62,aimRecMlt:.23,recoilZ:4.8,recoilZM:.2,recoilAnim:{time:240,recoilTweenY:.42},rumble:.8,icnPad:-10,expScale:1.55,charm:!0,charmMXOff:-.34,charmMYOff:-.2,charmMZOff:.88,charmMScl:1,charmXOff:0,charmYOff:0,charmZOff:0,charmScl:1,magReserve:7,mysteryBoxR:0,altSkin:{projection:!0,video:2,outline:0,outlineS:1.05}},{name:"Cupids Blaster",src:"weapon_12",icon:"icon_12",assetIcon:"",sound:"weapon_12",refDist:25,rollOff:1,akimbo:!1,noSpread:!1,noAim:!1,noAo:!0,physRang:0,physPow:0,secondary:!0,equipment:!1,nRing:!0,nAuto:!0,transp:!0,nCase:!0,kill:["",50],type:1,swapTime:200,aimSpd:120,chrgTime:0,ovrChrg:!1,spdMlt:1,ammo:4,reload:1500,dmg:45,hsMlt:1.25,pierce:.85,dmgDrop:10,scale:1.1,leftHoldY:-1,rightHoldY:-.65,leftHoldZ:-.2,rightHoldZ:-.2,holdW:1,xOff:1.3,yOff:-.83,zOff:-4.1,xOrg:0,yRot:-.01,yOrg:-.53,zOrg:-3.8,cLean:.2,cRot:.2,cDrop:0,inspectR:.1,inspectM:.8,muzID:3,muzOff:2.2,muzOffY:.1,muzID:3,muzMlt:1.1,jYMlt:.8,range:700,rate:170,spread:150,zoom:1.4,leanMlt:1.6,recoil:.006,recoilR:.01,recover:.98,recoverY:.99,recoverF:.98,recoilYM:.2,recoilZ:2.2,aimRecMlt:.3,recoilAnim:{time:200,recoilTweenY:.32},rumble:.4,icnPad:-8,expScale:1.85,charm:!0,charmMXOff:-.53,charmMYOff:-.12,charmMZOff:.67,charmMScl:1,charmXOff:0,charmYOff:0,charmZOff:0,charmScl:1,magReserve:6,mysteryBoxR:1,altSkin:{mid:4,seas:6,weapon:12,rarity:0},funcOnHit:(e,t)=>{e.forceTeam&&e.forceTeam(1,15e3,20,t)}},{name:"Combat Knife",icon:"icon_0",challSrc:"weapon_k",assetIcon:"",melee:!0,noSkins:!0,canThrow:!0,aimLean:.01,holdW:.9,swapWiggle:.3,sound:"melee",refDist:25,rollOff:1,hsMlt:1,lsMlt:1,insX:.1,inspAnim:{arZ:.3,arX:.6,arY:-2.2,apZ:-1.3,apX:-.1,apY:1,wpZ:-.19,wpY:-.4,wrY:-.2},anim:function(e,t,i,n){if(1==i){e.handAnimInd=-1*(e.handAnimInd||1);var s=!1;e.meleeAnim.anim&&(e.meleeAnim.anim.stop(),s=e.meleeAnim.armM>=2),e.resetMeleeAnim();var a=-1.2,r=.7,o=-.4;s?(a+=.1,e.meleeAnim.weaR=a,o+=.8,e.meleeAnim.armR=o,r+=.2,e.meleeAnim.weaM=r,e.meleeAnim.flipW=Math.PI):a-=.4,e.meleeAnim.anim=new t.Tween(e.meleeAnim).to({armR:o,lArm:1,armT:s?-.2:-.8,armY:-3,armM:s?-10:13,armE:-2,weaR:a,weaM:r},220*(s?1.3:1)).easing(t.Easing.Cubic.Out).onComplete((function(){e.meleeAnim.anim=new t.Tween(e.meleeAnim).to({armR:0,armT:0,armY:0,lArm:0,armM:0,armE:0,weaR:0,weaM:0,flipW:0},350).easing(t.Easing.Cubic.Out).start()})).start()}else if(2==i){e.handAnimInd=-1*(e.handAnimInd||1),e.meleeAnim.anim&&e.meleeAnim.anim.stop(),e.resetMeleeAnim();var l=e.handAnimInd?"lArm":"";l={};1==e.handAnimInd?l.lArm=-2.7:l.rArm=-2.7,e.meleeAnim.anim=new t.Tween(e.meleeAnim).to(l,10).easing(t.Easing.Linear.None).onComplete((function(){e.meleeAnim.anim=new t.Tween(e.meleeAnim).to({lArm:0,rArm:0},150).easing(t.Easing.Linear.None).delay(100).start()})).start()}else 3==i&&(e.meleeAnim.anim&&e.meleeAnim.anim.stop(),e.resetMeleeAnim(),e.meleeAnim.armR=-1.3,e.meleeAnim.armM=1.7,e.meleeAnim.armE=1.1,e.meleeAnim.armY=2.9,e.meleeAnim.armT=1,e.meleeAnim.armS=1.7,e.meleeAnim.weaR=-.6,e.meleeAnim.anim=new t.Tween(e.meleeAnim).to({armY:-9,armS:-.1,armE:-7.5,armM:-1.5,lArm:.5,weaR:-3},200-200*(n||1)+300).easing(t.Easing.Cubic.Out).onComplete((function(){e.meleeAnim.anim=new t.Tween(e.meleeAnim).to({armR:0,armT:0,armY:0,lArm:0,armM:0,armS:0,armE:0,weaR:0},350).easing(t.Easing.Cubic.Out).start()})).start())},type:2,swapTime:250,aimSpd:100,chrgTime:0,ovrChrg:!0,rate:250,dmg:50,dmgDrop:0,range:15,spdMlt:1.1,spread:100,leftHoldY:-.82,leftHoldX:1.5,rightHoldX:-1.5,rightHoldY:-.82,leftHoldZ:-.5,rightHoldZ:-.5,xOff:0,yOff:-.6,zOff:-3.6,xOrg:1e-4,yOrg:-.6,zOrg:-3.6,zRM:.35,zoom:1.2,leanMlt:.8,recoil:.006,recoilR:.01,recover:.98,recoverF:.98,rumble:.4,rumbleDur:150,icnPad:-10,altSkin:{projection:!0,video:2,outline:0,outlineS:1.05}},{name:"Crossbow",src:"weapon_14",icon:"icon_14",assetIcon:"",sound:"weapon_14",refDist:25,rollOff:1,noSpread:!1,akimbo:!1,secondary:!1,equipment:!1,noAim:!1,nInsp:!0,nRing:!0,nAuto:!0,noAo:!0,physRang:0,physPow:0,nCase:!0,nMuz:!0,attach:0,attachYOff:-.1,attachZOff:.75,kill:["",75],type:0,projectile:{},pj_asset:"",pj_mat:"BASIC",pj_color:16777179,pj_explode:100,pj_dmg:100,pj_eDmg:100,pj_spd:.75,pj_grav:8e-5,pj_nImp:!0,pj_lookDir:!0,pj_scale:1.4,pj_length:10,pj_range:1500,swapTime:200,aimSpd:120,chrgTime:1300,chrgMlt:.9,ovrChrg:!0,spdMlt:1,ammo:3,reload:900,dmg:100,hsMlt:1,lsMlt:1,pierce:0,dmgDrop:0,scale:.0007303348040201011,leftHoldY:-.33,rightHoldY:-.28,leftHoldZ:2.2,leftHoldX:0,rightHoldZ:.9,xOff:1,yOff:-1,zOff:-1.4,xOrg:0,yOrg:-.72,zOrg:-.7,cLean:.1,cRot:.1,zRot:.9,cDrop:.2,holdW:.5,muzID:3,muzOff:2.2,muzOffY:.1,muzID:3,muzMlt:1.1,jYMlt:.95,range:700,rate:150,spread:120,zoom:1.4,leanMlt:.3,recoil:.007,recoilR:.01,recover:.985,recoverY:.996,recoverF:.98,recoilZ:4,recoilAnim:{time:300,recoilTweenY:.1},rumble:.5,icnPad:9,charm:!0,charmMXOff:-.23999999999999994,charmMYOff:.04,charmMZOff:-.01,charmMScl:1,charmXOff:0,charmYOff:0,charmZOff:0,charmScl:1,magReserve:20,mysteryBoxR:1,altSkin:{projection:!0,video:2,outline:0,outlineS:1.05}},{name:"Famas",src:"weapon_15",icon:"icon_15",assetIcon:"",sound:"weapon_15",refDist:25,rollOff:1,akimbo:!1,noSpread:!1,secondary:!1,equipment:!1,noAim:!1,noAo:!0,nAuto:!0,projectile:{},pj_asset:"",pj_disable:!0,pj_mat:"BASIC",pj_color:16777179,pj_dmg:28,pj_spd:2.4,pj_lookDir:!0,pj_grav:1e-4,pj_scale:1.4,pj_length:10,pj_range:3e3,pj_snd:0,physRang:0,physPow:0,burst:!0,burstC:4,burstR:90,swapWiggle:.6,attach:0,attachYOff:-.1,attachZOff:-.5,zRot:1,type:0,swapTime:300,aimSpd:130,chrgTime:0,ovrChrg:!1,spdMlt:.95,ammo:36,rate:280,reload:1200,dmg:28,hsMlt:1.5,pierce:1,range:900,dmgDrop:5,scale:.0008858419597989991,leftHoldY:-.45,rightHoldY:-.5,leftHoldZ:.72,rightHoldZ:-.75,holdW:1,xOff:1,yOff:-.86,yRot:.0018,zOff:-3,xOrg:0,yOrg:-1.14,zOrg:-2,cLean:.2,cRot:.2,cDrop:.1,inspectR:.1,inspectM:1.5,caseZOff:-1.7,caseYOff:-.2,muzID:3,muzOff:4.9,muzOffY:-.05,muzMlt:1.4,spread:90,minSpread:5,zoom:1.5,leanMlt:1.5,recoil:.003,recoilR:.02,recover:.978,recoverY:.995,recoverF:.975,jYMlt:.9,recoilYM:.32,recoilZ:5.5,recoilZM:.05,aimRecMlt:.65,recoilAnim:{time:300,recoilTweenY:.06,recoilTweenZ:.1},jumpYM:.6,rumble:.5,expScale:.9,icnPad:9,charm:!0,charmMXOff:-.33,charmMYOff:.195,charmMZOff:.99,charmMScl:1,charmXOff:0,charmYOff:0,charmZOff:0,charmScl:1,magReserve:5,mysteryBoxR:2,altSkin:{projection:!0,video:2,outline:0,outlineS:1.05}},{name:"Sawed Off",src:"weapon_16",icon:"icon_16",assetIcon:"",sound:"weapon_16",noComp:!0,refDist:25,rollOff:1,noSpread:!1,akimbo:!1,noAim:!1,noAo:!0,nAuto:!0,nCase:!0,nRing:!0,secondary:!0,equipment:!1,swapWiggle:.4,shine:35,type:1,physRang:36,physPow:.1,swapTime:200,aimSpd:100,chrgTime:0,ovrChrg:!1,spdMlt:1,burst:!0,burstC:3,burstR:100,ammo:3,reload:1100,dmg:12,hsMlt:1.5,dmgDrop:12,scale:1,rightHoldX:.1,leftHoldY:-.5,rightHoldY:-.6,leftHoldZ:.4,rightHoldZ:-1.5,holdW:1,xOff:.95,yOff:-.65,zOff:-3.8,xOrg:0,yOrg:-.3,zOrg:-2.8,cLean:.2,cRot:.2,cDrop:.1,jYMlt:.2,inspectR:.1,inspectM:1.9,muzID:3,muzOff:6,muzMlt:1.8,range:210,rate:400,innac:110,spread:120,shots:5,cSpread:[[.03,.05,-.27,-.02,-.03,.31,.3,-.01,.01,-.28],[.01,.05,-.17,-.22,-.3,.31,.32,.28,.3,-.2]],minSpread:20,zoom:1.25,leanMlt:1.6,recoil:.02,recoilR:.015,recover:.99,recoverF:.97,recoilZ:2.1,recoilZM:.32,aimRecMlt:.3,recoilYM:1,recoilAnim:{time:340,recoilTweenY:.35},jumpYM:.5,rumble:.8,icnPad:10,expScale:1,charm:!0,charmMXOff:-.37,charmMYOff:-.43,charmMZOff:1.23,charmMScl:1,charmXOff:0,charmYOff:0,charmZOff:0,charmScl:1,magReserve:20,mysteryBoxR:0,altSkin:{projection:!0,video:2,outline:0,outlineS:1.05}},{name:"Auto Pistol",src:"weapon_17",icon:"icon_17",assetIcon:"",sound:"weapon_17",refDist:25,rollOff:1,noSpread:!1,akimbo:!1,secondary:!0,equipment:!1,noAim:!1,nAuto:!1,noAo:!0,physRang:0,physPow:0,kill:["",50],type:1,swapTime:200,aimSpd:100,chrgTime:0,ovrChrg:!1,spdMlt:1,ammo:18,reload:1e3,dmg:16,hsMlt:1.1,pierce:.95,dmgDrop:2,scale:.0003158947055276376,leftHoldY:-1.1,rightHoldY:-.62,leftHoldZ:-.3,rightHoldZ:-.32,rightHoldX:.13,holdW:1.35,xOff:1.2,yOff:-.6,zOff:-3.7,xOrg:0,yRot:-.005,yOrg:-.23,zOrg:-3.9,cLean:.3,cRot:.3,inspectR:.35,inspectM:.9,muzID:3,muzOff:2,muzMlt:1.1,range:700,rate:70,spread:150,jYMlt:.5,zoom:1.3,leanMlt:1.6,recoil:.004,recoilR:.01,recover:.98,recoverY:.99,recoverF:.98,recoilYM:.2,aimRecMlt:.4,recoilZ:3.8,recoilZM:-.4,recoilAnim:{time:200,recoilTweenY:.28},rumble:.8,icnPad:-10,expScale:1.55,charm:!0,charmMXOff:-.31999999999999995,charmMYOff:-.17,charmMZOff:.9900000000000007,charmMScl:1,charmXOff:0,charmYOff:0,charmZOff:0,charmScl:1,magReserve:6,mysteryBoxR:1,altSkin:{projection:!0,video:2,outline:0,outlineS:1.05}},{name:"Bomb",src:"weapon_18",icon:"icon_18",assetIcon:"",sound:"weapon_18",refDist:25,rollOff:1,transp:!0,bomb:!0,equipment:!0,nInsp:!0,noAim:!0,noAo:!0,nCase:!0,noCross:!0,nMuz:!0,type:3,aimSpd:140,chrgTime:0,ovrChrg:!1,swapTime:250,spdMlt:.65,scale:.63,holdW:1.2,zoom:1,rot:[0,Math.PI/2,-.4],leftHoldY:-.3,rightHoldY:-.3,leftHoldZ:.33,rightHoldX:-.82,leftHoldX:.82,rightHoldZ:.33,xOff:0,yOff:-.8,zOff:-3.5,xOrg:1e-4,yOrg:1e-4,zOrg:1e-4,cLean:0,cRot:0,cDrop:.12,jYMlt:.95,spread:120,recover:.98,recoverF:.98,leanMlt:.3,icnPad:9},{name:"Blaster",src:"weapon_19",icon:"icon_19",assetIcon:"",sound:"weapon_19",refDist:25,rollOff:1,secondary:!1,equipment:!1,noSpread:!1,akimbo:!1,noAim:!1,noAo:!0,nCase:!0,nAuto:!1,physRang:0,physPow:0,swapWiggle:.3,attach:0,attachYOff:-.07,attachZOff:-.73,zRot:1,type:0,kill:["",75],swapTime:300,aimSpd:130,chrgTime:0,ovrChrg:!1,spdMlt:.95,ammo:16,rate:110,reload:1100,dmg:1,projectile:{},pj_asset:"",pj_mat:"BASIC",pj_color:9109499,pj_spd:1,pj_grav:0,pj_nImp:!0,pj_lookDir:!0,pj_scale:.7,pj_dmg:35,pj_length:10,pj_range:500,hsMlt:1.5,lsMlt:1,pierce:1,range:700,dmgDrop:0,scale:.0007946847095477368,leftHoldY:-.8,rightHoldY:-.6,leftHoldZ:1.2,rightHoldZ:-1.25,holdW:.75,xOff:.7,yOff:-.76,zOff:-3,rotOff:-.05,rotOffA:-.02,aimOffY:.042,yRot:.0018,xOrg:0,yOrg:-.52,zOrg:-2.3,cLean:.2,cRot:.2,cDrop:.1,inspectR:.1,inspectM:1.5,caseZOff:-1.7,caseYOff:-.2,muzID:3,muzOff:5.1,muzOffY:-.08,muzMlt:1.4,spread:100,minSpread:5,zoom:1.6,leanMlt:1.5,recoil:.003,recoilR:.05,recover:.978,recoverY:.995,recoverF:.975,jYMlt:.9,recoilYM:.4,recoilZ:5.7,recoilZM:-.05,aimRecMlt:.7,recoilAnim:{time:300,recoilTweenY:.07,recoilTweenZ:.1},jumpYM:.6,rumble:.5,icnPad:5,charm:!0,charmMXOff:-.37,charmMYOff:-.17,charmMZOff:.98,charmMScl:1,charmXOff:0,charmYOff:0,charmZOff:0,charmScl:1,magReserve:5,mysteryBoxR:1,altSkin:{projection:!0,video:2,outline:0,outlineS:1.05}},{name:"Build Tool",src:"weapon_20",icon:"icon_20",assetIcon:"",sound:"weapon_20",refDist:25,rollOff:1,aimSound:"paper_1",swapSnd:"paper_1",build:!0,equipment:!0,nInsp:!0,noAim:!1,noAo:!0,nCase:!0,noCross:!0,nMuz:!0,side:2,type:3,aimSpd:100,chrgTime:0,ovrChrg:!1,aimLean:1e-6,swapTime:200,spdMlt:.9,scale:1.2,holdW:1.3,zoom:1.1,rate:300,range:50,rot:[0,Math.PI/2,-.4],leftHoldY:.6,rightHoldY:.6,leftHoldZ:.1,rightHoldX:-2.2,leftHoldX:2.2,rightHoldZ:.1,xOff:0,yOff:-2.6,zOff:-3.5,xOrg:1e-5,yOrg:-3.8,zOrg:-3.2,cLean:0,cRot:0,cDrop:.12,jYMlt:.95,spread:120,recover:.98,recoverF:.98,leanMlt:.3,icnPad:9},{name:"Grappler",src:"weapon_21",icon:"icon_21",assetIcon:"",sound:"weapon_21",refDist:25,rollOff:1,noSpread:!0,akimbo:!1,secondary:!0,equipment:!1,noAim:!1,grapRang:500,physRang:0,physPow:0,nAuto:!0,noAo:!0,transp:!0,kill:["",50],type:1,swapTime:200,aimSpd:110,chrgTime:0,ovrChrg:!1,spdMlt:1,ammo:10,reload:1e3,dmg:1,hsMlt:1.5,pierce:.85,dmgDrop:0,scale:1,leftHoldY:-.9,rightHoldY:-.7,leftHoldZ:-.5,rightHoldZ:-.5,holdW:1.1,xOff:1,yOff:-.5,zOff:-4.1,xOrg:0,yOrg:-.195,zOrg:-3.8,cLean:.3,cRot:.3,inspectR:.35,inspectM:.9,muzID:3,muzOff:1.8,muzOffY:-.2,muzMlt:1.1,range:700,rate:300,spread:0,jYMlt:.5,zoom:1.2,leanMlt:1.6,recoil:.01,recoilR:.01,recover:.982,recoverY:.995,recoverF:.98,recoilYM:.62,aimRecMlt:.23,recoilZ:4.8,recoilZM:.2,recoilAnim:{time:180,recoilTweenY:.34},rumble:.8,icnPad:-10,expScale:1.2,charm:!0,charmMXOff:-.34,charmMYOff:-.2,charmMZOff:.36,charmMScl:1,charmXOff:0,charmYOff:0,charmZOff:0,charmScl:1},{name:"Tehchy-9",src:"weapon_22",icon:"icon_22",assetIcon:"",sound:"weapon_22",refDist:25,rollOff:1,noSpread:!1,akimbo:!1,secondary:!0,equipment:!1,noAim:!1,nAuto:!0,noAo:!0,physRang:0,physPow:0,burst:!0,burstC:3,burstR:80,kill:["",50],type:1,swapTime:200,aimSpd:100,chrgTime:0,ovrChrg:!1,spdMlt:1,ammo:18,reload:1e3,dmg:23,hsMlt:1.25,pierce:.95,dmgDrop:2,scale:.0003158947055276376,leftHoldY:-1.1,rightHoldY:-.62,leftHoldZ:-.3,rightHoldZ:-.32,rightHoldX:.13,holdW:1.35,xOff:1.2,yOff:-.6,zOff:-3.7,xOrg:0,yRot:-.005,yOrg:-.23,zOrg:-3.9,cLean:.3,cRot:.3,inspectR:.35,inspectM:.9,muzID:3,muzOff:2,muzMlt:1.1,range:700,rate:380,spread:150,jYMlt:.5,zoom:1.3,leanMlt:1.6,recoil:.004,recoilR:.01,recover:.98,recoverY:.99,recoverF:.98,recoilYM:.2,aimRecMlt:.4,recoilZ:3.8,recoilZM:-.4,recoilAnim:{time:200,recoilTweenY:.28},rumble:.8,icnPad:-10,expScale:1.55,charm:!0,charmMXOff:-.329,charmMYOff:-.23,charmMZOff:1.03,charmMScl:1,charmXOff:0,charmYOff:0,charmZOff:0,charmScl:1,magReserve:6,mysteryBoxR:0,altSkin:{projection:!0,video:2,outline:0,outlineS:1.05}},{name:"Noob Tube",src:"weapon_23",icon:"icon_23",assetIcon:"",sound:"weapon_23",noComp:!0,refDist:25,rollOff:1,noSpread:!1,akimbo:!1,noAim:!1,noAo:!0,nCase:!0,nRing:!0,secondary:!0,equipment:!1,swapWiggle:.4,shine:35,type:1,physRang:36,physPow:.1,swapTime:200,aimSpd:100,chrgTime:0,ovrChrg:!1,spdMlt:1,ammo:2,reload:1200,dmg:12,hsMlt:1,lsMlt:1,dmgDrop:12,scale:1,rightHoldX:.1,leftHoldY:-.6,rightHoldY:-.6,leftHoldZ:.4,rightHoldZ:-1.3,holdW:1,xOff:.95,yOff:-.6,zOff:-3.8,wzOff:.28,wyOff:-.5,xOrg:0,yOrg:-.3,zOrg:-2.8,cLean:.2,cRot:.2,cDrop:.1,jYMlt:.2,inspectR:.1,muzID:3,muzOff:6,muzMlt:1.8,inspectM:1.9,range:150,rate:400,innac:110,spread:20,noSpread:!0,noProjSpread:!0,shots:0,minSpread:20,zoom:1.25,leanMlt:1.6,recoil:.02,recoilR:.015,recover:.99,recoverF:.97,recoilZ:2.1,recoilZM:.32,aimRecMlt:.3,recoilYM:1,recoilAnim:{time:340,recoilTweenY:.35},jumpYM:.5,rumble:.8,icnPad:10,expScale:1,projectile:{},pj_asset:"",pj_mat:"BASIC",pj_color:16498733,pj_explode:45,pj_dmg:50,pj_eDmg:40,pj_spd:.75,pj_grav:.001,pj_nImp:!0,pj_lookDir:!0,pj_scale:1.4,pj_length:15,pj_range:1e3,charm:!0,charmMXOff:-.37,charmMYOff:-.51,charmMZOff:-1.69,charmMScl:1,charmXOff:0,charmYOff:0,charmZOff:0,charmScl:1,magReserve:20,mysteryBoxR:0,altSkin:{projection:!0,video:2,outline:0,outlineS:1.05}},{name:"Slimer",src:"weapon_24",icon:"icon_24",assetIcon:"",sound:"weapon_24",refDist:25,rollOff:1,noSpread:!0,akimbo:!1,noAim:!0,physRang:0,physPow:0,customOnly:!0,nAuto:!0,noAo:!0,transp:!0,kill:["",50],secondary:!1,equipment:!0,type:3,swapWiggle:.3,zRot:1,swapTime:200,aimSpd:110,chrgTime:0,ovrChrg:!1,spdMlt:1,ammo:2,reload:5e3,noReload:!0,removeOnEmpty:!0,dmg:1,hsMlt:1.5,pierce:.85,dmgDrop:0,scale:.000765961165829144,leftHoldY:-.41,rightHoldY:-.6,leftHoldZ:.5,rightHoldZ:-1.2,holdW:.8,xOff:.7,yOff:-.87,zOff:-3.33,rotOff:-.08,rotOffA:-.035,aimOffY:.042,yRot:.0018,xOrg:0,yOrg:-.59,zOrg:-2.14,cLean:.2,cRot:.1,cDrop:.1,inspectR:.1,inspectM:1.5,caseZOff:-1.7,caseYOff:-.2,muzID:3,muzOff:5.1,muzOffY:-.05,muzMlt:1.4,range:700,rate:300,minSpread:0,spread:0,zoom:1.6,leanMlt:1.5,recoil:.003,recoilR:.05,recover:.978,recoverY:.995,recoverF:.975,jYMlt:.9,recoilYM:1.1,recoilZ:4.3,recoilZM:-.04,aimRecMlt:.65,recoilAnim:{time:160,recoilTweenY:.065,recoilTweenZ:.1},jumpYM:.3,rumble:.4,icnPad:-15,shine:20,hDstOff:1.2,deployRang:250,deployable:5},{name:"Zapper",src:"weapon_25",icon:"icon_25",assetIcon:"",sound:"weapon_25",refDist:25,rollOff:1,secondary:!0,equipment:!1,noSpread:!1,akimbo:!1,noAim:!1,noAo:!0,transp:!0,nAuto:!0,noComp:!0,projectile:{},pj_asset:"",pj_mat:"BASIC",pj_color:16498733,pj_spd:.5,pj_grav:0,pj_nImp:!0,pj_lookDir:!0,pj_scale:.8,pj_dmg:5,pj_length:10,pj_range:150,physRang:0,physPow:0,kill:["",75],swapWiggle:.3,type:1,shine:10,swapTime:260,aimSpd:110,chrgTime:1500,ovrChrg:!0,spdMlt:1.05,ammo:10,reload:1400,dmg:12,hsMlt:1,lsMlt:1,range:150,dmgDrop:10,scale:.84,wzOff:0,wyOff:0,leftHoldY:-1.1,rightHoldY:-.62,leftHoldZ:-.3,rightHoldZ:-.32,rightHoldX:.13,holdW:1.3,xOff:1.2,yOff:-.6,zOff:-3.7,xOrg:0,yRot:-.005,yOrg:-.23,zOrg:-3.9,jYMlt:.1,cLean:.3,cRot:.3,caseZOff:.2,caseYOff:0,inspectR:.3,inspectM:.8,muzID:3,muzOff:1.5,muzOffY:0,muzMlt:.95,rate:150,spread:60,zoom:1.4,leanMlt:1,recoil:.006,recoilR:.02,recover:.98,recoverY:.99,recoverF:.98,recoilYM:.2,aimRecMlt:.4,recoilZ:3.8,recoilZM:-.4,recoilAnim:{time:200,recoilTweenY:.28,recoilTweenZ:.1},rumble:.4,icnPad:-15,expScale:1.2,effectOnHit:8,charm:!0,charmMXOff:-.289,charmMYOff:-.16,charmMZOff:1.09,charmMScl:1,charmXOff:0,charmYOff:0,charmZOff:0,charmScl:1,magReserve:12,mysteryBoxR:0,altSkin:{projection:!0,video:2,outline:0,outlineS:1.05}},{name:"Minigun",src:"weapon_26",icon:"icon_26",assetIcon:"",sound:"weapon_26",refDist:25,rollOff:1,akimbo:!1,noAim:!1,nAuto:!1,noSpread:!1,projectile:{},pj_asset:"",pj_disable:!0,pj_mat:"BASIC",pj_color:16777179,pj_dmg:18,pj_spd:2.3,pj_lookDir:!0,pj_grav:1e-4,pj_scale:1.4,pj_length:10,pj_range:3e3,pj_snd:0,physRang:0,physPow:0,type:3,equipment:!0,swapWiggle:.3,zRot:.75,noAo:!0,swapTime:600,aimSpd:200,chrgTime:0,ovrChrg:!1,spdMlt:.5,jumMlt:.2,noJump:!0,ammo:250,reload:3300,noReload:!0,removeOnEmpty:!0,dmg:18,hsMlt:1.5,pierce:1,range:700,dmgDrop:10,jYMlt:.8,scale:.0008856008924623108,leftHoldY:-.5,leftHoldX:.4,rightHoldX:-.1,rightHoldY:-1.6,leftHoldZ:1,rightHoldZ:-.6,holdW:1,yRot:-.01,xOff:.95,yOff:-1,zOff:-2.8,xOrg:0,yOrg:-.6,zOrg:-1.8,cLean:.1,cRot:.1,cDrop:.1,inspectR:.2,inspectM:.6,caseInd:2,caseZOff:-.5,caseYOff:-.1,muzID:3,muzOff:5,muzOffY:-1.2,muzMlt:1.7,rate:70,spread:300,minSpread:10,zoom:1.3,leanMlt:1.6,recoil:.0032,recoilR:.04,recover:.98,recoverY:.9975,recoverF:.975,recoilZ:3.8,recoilYM:.25,recoilZ:3,recoilZM:-.1,aimRecMlt:.5,recoilAnim:{time:200,recoilTweenY:.045,recoilTweenZ:.12},jumpYM:.1,expScale:.85,rumble:.65,icnPad:10,noSwap:!0,magReserve:0},{name:"War Machine",src:"weapon_27",icon:"icon_27",assetIcon:"",sound:"weapon_27",noComp:!0,refDist:25,rollOff:1,akimbo:!1,noAim:!1,noAo:!0,nAuto:!0,nCase:!0,nRing:!0,secondary:!1,equipment:!0,swapWiggle:.4,shine:35,type:3,physRang:0,physPow:0,swapTime:400,aimSpd:100,chrgTime:0,ovrChrg:!1,spdMlt:1,ammo:6,reload:2e3,noReload:!0,removeOnEmpty:!0,dmg:12,hsMlt:1,lsMlt:1,dmgDrop:12,scale:1,rightHoldX:.1,leftHoldY:-.6,rightHoldY:-.6,leftHoldZ:.4,rightHoldZ:-1.3,holdW:1,xOff:.95,yOff:-.6,zOff:-3.8,wzOff:.28,wyOff:-.5,aimY:.25,xOrg:0,yOrg:-.3,zOrg:-2.8,cLean:.2,cRot:.2,cDrop:.1,jYMlt:.2,inspectR:.1,muzID:3,muzOff:6,muzMlt:1.8,inspectM:1.9,range:150,rate:300,innac:110,spread:20,noSpread:!0,noProjSpread:!0,shots:0,minSpread:20,zoom:1.25,leanMlt:1.6,recoil:.02,recoilR:.015,recover:.99,recoverF:.97,recoilZ:2.1,recoilZM:.32,aimRecMlt:.3,recoilYM:1,recoilAnim:{time:340,recoilTweenY:.35},jumpYM:.5,rumble:.8,icnPad:10,expScale:1,projectile:{},pj_asset:"",pj_mat:"BASIC",pj_color:16498733,pj_explode:70,pj_dmg:60,pj_eDmg:65,pj_spd:.75,pj_grav:.001,pj_nImp:!0,pj_lookDir:!0,pj_scale:1.4,pj_length:15,pj_range:1e3,noSwap:!0,magReserve:0},{name:"Akimbo Pistol",src:"weapon_28",icon:"icon_28",assetIcon:"",sound:"weapon_28",refDist:25,rollOff:1,secondary:!0,equipment:!1,nAuto:!0,noAo:!0,physRang:0,physPow:0,nInsp:!0,noAim:!0,akimbo:!0,type:1,swapTime:300,aimSpd:120,chrgTime:0,ovrChrg:!1,spdMlt:1.04,ammo:15,reload:750,dmg:15,hsMlt:1.4,pierce:1,range:700,dmgDrop:13,scale:.0003158947055276376,leftHoldZ:-.3,leftHoldX:.13,leftHoldY:-.62,rightHoldZ:-.3,rightHoldX:.13,rightHoldY:-.62,holdW:1.3,xOff:1.5,yOff:-.95,zOff:-3.3,xOrg:0,yOrg:-.62,zOrg:-2.5,zLnM:.4,cLean:.1,cRot:.1,cDrop:.2,caseYOff:-.15,caseZOff:-.4,muzID:3,muzOff:3.6,rate:90,spread:40,noSpread:!1,movSpread:.1,minSpread:10,zoom:1.5,recoil:.0034,recoilR:.015,leanMlt:.6,recover:.978,recoverY:.996,recoverF:.975,recoilZ:5,recoilYM:.7,recoilAnim:{recoilTweenY:.01},expScale:.7,rumble:.4,icnPad:-4,charm:!0,charmMXOff:-.2699999999999999,charmMYOff:-.42000000000000015,charmMZOff:-.040000000000000646,charmMScl:1,charmXOff:0,charmYOff:0,charmZOff:0,charmScl:1,magReserve:6,mysteryBoxR:0,altSkin:{projection:!0,video:2,outline:0,outlineS:1.05}},{name:"Charge Rifle",src:"weapon_29",icon:"icon_29",assetIcon:"",sound:"weapon_29",refDist:25,rollOff:1,equipment:!1,secondary:!1,noSpread:!1,projectile:{},pj_asset:"",pj_disable:!0,pj_mat:"BASIC",pj_color:9109499,pj_dmg:100,pj_spd:2.5,pj_lookDir:!0,pj_grav:1e-4,pj_scale:1.4,pj_length:10,pj_range:7e3,pj_snd:0,akimbo:!1,noAim:!1,animWhileAim:!0,trailChrg:!0,physRang:0,physPow:0,noAo:!0,nAuto:!1,type:0,scope:!0,swapTime:300,aimSpd:120,chrgTime:700,ovrChrg:!1,shootChrg:!0,bypassChrg:!0,chrgDec:.8,fullChrgSht:!0,fullChrgMlt:50,rateChrg:!0,spdMlt:.95,shots:3,cSpread:[[-.27,.02,.03,-.31,.3,-.01],[-.17,-.22,-.3,.31,.32,.28]],ammo:1,dmg:15,hsMlt:1,pierce:1,reload:1400,range:1e3,dmgDrop:5,scale:.00115608717587935,leftHoldY:-.65,rightHoldY:-.68,leftHoldZ:2.5,rightHoldZ:.75,holdW:1,xOff:.8,yOff:-.65,zOff:-1.8,wzOff:-1,xOrg:0,yOrg:-.55,zOrg:-.8,cLean:.2,cRot:.2,cDrop:.1,inspectR:.2,inspectM:.1,muzID:3,muzOff:8,muzMlt:1.6,rate:150,spread:150,minSpread:5,zoom:2,leanMlt:1.5,recoil:.003,recoilR:.05,recover:.978,recoverY:.995,recoverF:.975,jYMlt:.9,recoilYM:1.1,recoilZ:4.3,recoilZM:-.04,aimRecMlt:.65,recoilAnim:{time:160,recoilTweenY:.065,recoilTweenZ:.1},jumpYM:.15,rumble:.9,rumbleDur:500,icnPad:9,charm:!0,charmMXOff:-.43,charmMYOff:-.4,charmMZOff:-3.71,charmMScl:1,charmXOff:0,charmYOff:0,charmZOff:0,charmScl:1,magReserve:30,mysteryBoxR:4,altSkin:{projection:!0,video:2,outline:0,outlineS:1.05}}],e.exports.findWeaponBySrc=function(t){for(var i=0;i<e.exports.length;++i)if(e.exports[i].src=="weapon_"+t)return e.exports[i];return null},e.exports.findIndexBySrc=function(t){for(var i=0;i<e.exports.length;++i)if(e.exports[i].src==t)return i;return null};for(var i=0;i<e.exports.length;++i)e.exports[i].id=i,e.exports[i].upgraded=!0,e.exports[i].sound="weapon_upgraded",null==e.exports[i].adSpread&&(e.exports[i].adSpread=0),null==e.exports[i].reloY&&(e.exports[i].reloY=1),null==e.exports[i].movSpread&&(e.exports[i].movSpread=1),null==e.exports[i].lsMlt&&(e.exports[i].lsMlt=.5),null==e.exports[i].burst&&(e.exports[i].burst=!1,e.exports[i].burstC=0,e.exports[i].burstR=50)},function(e,t,i){const n=i(1);var s=[];e.exports=[{name:"Build Block",color:"#5e432b",breakSnd:"break_wood",places:"all",buildSnap:function(e,t,i,n,s,a,r){if(0==r){if("Top"==s)return[a.x,a.y+a.height,a.z,n];if("Bottom"==s)return[a.x,a.y-3*a.height,a.z,n];if("Left"==s)return[a.x-2*a.width,a.y-a.height,a.z,n];if("Right"==s)return[a.x+2*a.width,a.y-a.height,a.z,n];if("Front"==s)return[a.x,a.y-a.height,a.z-2*a.length,n];if("Back"==s)return[a.x,a.y-a.height,a.z+2*a.length,n]}return 1==r?"Top"==s?[a.x,a.y+a.height,a.z,n]:"Bottom"==s?[a.x,a.y-a.height,a.z,n]:[a.x,t,a.z,n]:[e,t,i,!1]},snapFunc:function(e,t,i,s,a,r,o,l){return 0==o?n.lineInRect(e,t,i,s,a,r,l.x-l.width,l.z-l.length,l.y-l.height,l.x+l.width,l.z+l.length,l.y+l.height)||n.lineInRect(e,t,i,s,a,r,l.x-2*l.width,l.z-.98*l.length,l.y-l.height+1e-4,l.x+2*l.width,l.z+.98*l.length,l.y+l.height-1e-4)||n.lineInRect(e,t,i,s,a,r,l.x-.98*l.width,l.z-2*l.length,l.y-l.height+1e-4,l.x+.98*l.width,l.z+2*l.length,l.y+l.height-1e-4)||n.lineInRect(e,t,i,s,a,r,l.x-.98*l.width,l.z-.98*l.length,l.y-1.5*l.height,l.x+.98*l.width,l.z+.98*l.length,l.y+1.5*l.height):null},icon:0,cost:10,health:300,w:10,h:10,l:10},{name:"Platform",color:"#5e432b",breakSnd:"break_wood",src:"grain_0",places:"all",buildSnap:function(e,t,i,s,a,r,o){if(0==o){if("Top"==a||"Bottom"==a){var l=(Math.abs(r.x-r.width-e)/(2*r.width)).roundToNearest(1/3),c=r.x-r.width-5+2*r.width*l,d=t-("Bottom"==a?10:0),h=(Math.abs(r.z-r.length-i)/(2*r.length)).roundToNearest(1/3);return[c,d,r.z-r.length-5+2*r.length*h,s]}return[e,t,i,!1]}if(1==o){if("Top"==a)return[r.x,r.y+r.height,r.z,s];if("Bottom"==a)return[r.x,r.y-3*r.height,r.z,s];if("Left"==a)return[r.x-2*r.width,r.y-r.height,r.z,s];if("Right"==a)return[r.x+2*r.width,r.y-r.height,r.z,s];if("Front"==a)return[r.x,r.y-r.height,r.z-2*r.length,s];if("Back"==a)return[r.x,r.y-r.height,r.z+2*r.length,s]}else{if(2==o){var u=0==(p=n.findNearest(e,i,[r.x-r.width,r.z,r.x+r.width,r.z,r.x,r.z-r.length,r.x,r.z+r.length]))[2]||2==p[2];return[p[0],r.y,p[1],s,u]}if(3==o){if(t>=r.y){var p=n.findNearest(e,i,[r.x-r.width,r.z,r.x+r.width,r.z,r.x,r.z-r.length,r.x,r.z+r.length]);return[r.x,r.y+r.height,r.z,s]}return[e,t,i,!1]}}return[e,t,i,s]},snapFunc:function(e,t,i,a,r,o,l,c){if(1==l)return n.lineInRect(e,t,i,a,r,o,c.x-c.width,c.z-c.length,c.y-c.height,c.x+c.width,c.z+c.length,c.y+c.height)||n.lineInRect(e,t,i,a,r,o,c.x-2*c.width,c.z-.98*c.length,c.y-c.height+1e-4,c.x+2*c.width,c.z+.98*c.length,c.y+c.height-1e-4)||n.lineInRect(e,t,i,a,r,o,c.x-.98*c.width,c.z-2*c.length,c.y-c.height+1e-4,c.x+.98*c.width,c.z+2*c.length,c.y+c.height-1e-4);if(2==l){s.length=0,s.push(n.lineInRect(e,t,i,a,r,o,c.x-c.width,c.z-c.length,c.y-c.height,c.x-c.width,c.z+c.length,c.y+30)),s.push(n.lineInRect(e,t,i,a,r,o,c.x+c.width,c.z-c.length,c.y-c.height,c.x+c.width,c.z+c.length,c.y+30)),s.push(n.lineInRect(e,t,i,a,r,o,c.x-c.width,c.z-c.length,c.y-c.height,c.x+c.width,c.z-c.length,c.y+30)),s.push(n.lineInRect(e,t,i,a,r,o,c.x-c.width,c.z+c.length,c.y-c.height,c.x+c.width,c.z+c.length,c.y+30)),s.push(n.lineInRect(e,t,i,a,r,o,c.x-c.width,c.z-c.length,c.y-c.height,c.x+c.width,c.z+c.length,c.y+c.height));for(var d=null,h=0;h<s.length;++h)s[h]&&(null==d||s[h]<d)&&(d=s[h]);return d}return null},icon:3,cost:50,health:500,w:30,h:2,l:30},{name:"Wall",color:"#5e432b",breakSnd:"break_wood",src:"grain_0",places:"objs",rotFacing:!0,rotDir:!0,snapFunc:function(e,t,i,a,r,o,l,c){if(2==l){s.length=0,c.width>c.length?(s.push(n.lineInRect(e,t,i,a,r,o,c.x-2*c.width,c.z-.98*c.length,c.y-.98*c.height,c.x+2*c.width,c.z+.98*c.length,c.y+.98*c.height)),s.push(n.lineInRect(e,t,i,a,r,o,c.x+c.width,c.z-c.width,c.y-.98*c.height,c.x+c.width,c.z+c.width,c.y+.98*c.height)),s.push(n.lineInRect(e,t,i,a,r,o,c.x-c.width,c.z-c.width,c.y-.98*c.height,c.x-c.width,c.z+c.width,c.y+.98*c.height))):(s.push(n.lineInRect(e,t,i,a,r,o,c.x-.98*c.width,c.z-2*c.length,c.y-.98*c.height,c.x+.98*c.width,c.z+2*c.length,c.y+.98*c.height)),s.push(n.lineInRect(e,t,i,a,r,o,c.x-c.length,c.z-c.length,c.y-.98*c.height,c.x+c.length,c.z-c.length,c.y+.98*c.height)),s.push(n.lineInRect(e,t,i,a,r,o,c.x-c.length,c.z+c.length,c.y-.98*c.height,c.x+c.length,c.z+c.length,c.y+.98*c.height))),s.push(n.lineInRect(e,t,i,a,r,o,c.x-c.width,c.z-c.length,c.y-c.height,c.x+c.width,c.z+c.length,c.y+c.height));for(var d=null,h=0;h<s.length;++h)s[h]&&(null==d||s[h]<d)&&(d=s[h]);return d}return null},buildSnap:function(e,t,i,n,s,a,r){if(2==r){var o=e,l=i,c=!1;if(a.width>a.length)if(i>a.z+a.length)o=e>a.x?a.x+a.width:a.x-a.width,l=a.z+a.width,c=!0;else if(i<a.z-a.length)o=e>a.x?a.x+a.width:a.x-a.width,l=a.z-a.width,c=!0;else if(e>a.x+a.width)o=a.x+2*a.width,l=a.z;else{if(!(e<a.x-a.width))return[e,t,i,!1];o=a.x-2*a.width,l=a.z}else if(e>a.x+a.width)l=i>a.z?a.z+a.length:a.z-a.length,o=a.x+a.length;else if(e<a.x-a.width)l=i>a.z?a.z+a.length:a.z-a.length,o=a.x-a.length;else if(i>a.z+a.length)l=a.z+2*a.length,o=a.x,c=!0;else{if(!(i<a.z-a.length))return[e,t,i,!1];l=a.z-2*a.length,o=a.x,c=!0}return[o,a.y-a.height,l,n,c]}if(3==r){o=e,l=i;if("Right"==s&&a.length>a.width)o=a.x+15,l=a.z;else if("Left"==s&&a.length>a.width)o=a.x-15,l=a.z;else if("Front"==s&&a.width>a.length)o=a.x,l=a.z-15;else{if(!("Back"==s&&a.width>a.length))return[e,t,i,!1];o=a.x,l=a.z+15}return[o,a.y+1-a.height,l,n]}return[e,t,i,!1]},icon:1,cost:50,health:500,w:30,h:30,l:2},{name:"Stairs",color:"#473220",breakSnd:"break_wood",places:"objs",src:"grain_0",rotDir:!0,custMod:function(e,t,i,n,s,a,r,o,l){return e.addRamp(t,i,n,s,r,a,o,{src:this.src||"grain_0",buildInd:3,uido:l,shaderBased:!0,colr:this.color,breakSnd:this.breakSnd,model:this.model,health:this.health,dynamic:!0})},buildSnap:function(e,t,i){return[e,t,i,!1]},icon:4,cost:25,health:150,w:30,h:30,l:30}]},function(e,t,i){const n=i(4),s=i(1),a=i(29);e.exports.initialize=function(e){var t=[];if(e)for(var i=0;i<e.length;i++)e[i].DAT=s.parseJson(e[i].DAT),e[i].SV=e[i].PV||0,e[i].REW=s.parseJson(e[i].REW),t.push(e[i]);return t};var r=["kstk","tower","pkr","island","time"],o=["amc","uwk","rnd"],l={};e.exports.checkChallenge=function(e,t,i,n,s,a,l,c){if(n==t.DAT.ky&&1!=t.PT&&(null==t.DAT.mp||e&&e.mapIndex==t.DAT.mp)&&(null==t.DAT.mid||e&&e.customMapData&&e.customMapData.id==t.DAT.mid)&&(null==t.DAT.md||e&&e.modeIndex==t.DAT.md)&&(null==t.DAT.wep||a.wep==t.DAT.wep)&&(null==t.DAT.cls||l.classIndex==t.DAT.cls)&&(null==t.DAT.stk||a.stk==t.DAT.stk)&&(null==t.DAT.item||a.item==t.DAT.item)&&("ranked"!=t.T||e&&e.isComp)){l.challengeProg[i]||={progVal:t.PV||0,startVal:t.SV||0};var d=l.challengeProg[i].progVal;if(o.indexOf(n)>=0)l.challengeProg[i].progVal=s>l.challengeProg[i].progVal?s:l.challengeProg[i].progVal;else if("kstk"==n){var h=null==t.DAT.wep&&null!=a.nonWep?a.nonWep:s;l.challengeProg[i].progVal=h>l.challengeProg[i].progVal?h:l.challengeProg[i].progVal}else-1==r.indexOf(n)?l.challengeProg[i].progVal+=s:l.challengeProg[i].progVal=s;var u=1!=t.PT&&d<t.DAT.val&&(t.DAT.lesser?l.challengeProg[i].progVal&&l.challengeProg[i].progVal<=t.DAT.val:l.challengeProg[i].progVal>=t.DAT.val);if(u&&e.players.challengeCompleted(l,i,t.REW),(t.DAT.lesser?d>t.DAT.val:d<t.DAT.val)&&l.challengeProg[i].progVal<=t.DAT.val&&d!=l.challengeProg[i].progVal){if(r.indexOf(n)>=0&&!u)return;if(o.indexOf(n)>=0&&!u)return;c.push(t.CI,l.challengeProg[i].progVal)}}},e.exports.update=function(t,i,s,a,r){if(r&&r.account&&(!t||t.isPubType())&&r.account.level>=n.minChalLevel){var o,c=[];a=a||l;for(var d=0;d<r.account.activeChallenges.length;d++)o=r.account.activeChallenges[d],e.exports.checkChallenge(t,o,d,i,s,a,r,c);c.length&&r.send("uchp",c)}},e.exports.updateMulti=function(t,i,s,a){if(a&&a.account&&(!t||t.isPubType())&&a.account.level>=n.minChalLevel){var r,o=[];s=s||l;for(var c=0;c<a.account.activeChallenges.length;c++){r=a.account.activeChallenges[c];for(var d=0;d<i.length;d+=2)e.exports.checkChallenge(t,r,c,i[d],i[d+1],s,a,o)}o.length&&a.send("uchp",o)}},e.exports.finalize=function(e,t,i,n,a){if(e&&e.account&&e.account.activeChallenges&&e.challengeProg){for(var l=e.account.id,c=[],d=0,h=0;h<e.account.activeChallenges.length;h++){var u;if(e.challengeProg[h])if((u=e.account.activeChallenges[h])&&(!n||u.DAT.nem)){var p=!0,f=1!=u.PT&&(u.DAT.lesser?e.challengeProg[h].progVal&&e.challengeProg[h].progVal<=u.DAT.val:e.challengeProg[h].progVal>=u.DAT.val);(1==u.PT||e.challengeProg[h].progVal==u.PV||u.DAT.sm&&!f)&&(p=!1),r.indexOf(u.DAT.ky)>=0&&!f&&(p=!1),o.indexOf(u.DAT.ky)>=0&&!f&&(p=!1),p&&(f&&(e.account.activeChallenges[h].PT=1,n||e.send("chgC",h),d+=u.REW.bpp||0),e.account.activeChallenges[h].PV=e.challengeProg[h].progVal,c.push(f?1:0,u.CI,e.account.activeChallenges[h].PV)),u.DAT.sm&&!p&&(e.account.activeChallenges[h].PV=0,e.account.activeChallenges[h].SV=0)}}for(h=0;h<e.account.activeChallenges.length;h++)if((u=e.account.activeChallenges[h])&&"chall"==u.DAT.ky&&(!n||u.DAT.nem)){e.challengeProg[h]||={progVal:u.PV||0,startVal:u.SV||0};p=!0;var m=e.account.activeChallenges.filter((e=>!(1!=e.PT||e.T!=u.T||null!=u.DAT.wep&&e.DAT.wep!=u.DAT.wep||null!=u.DAT.cls&&e.DAT.cls!=u.DAT.cls||null!=u.DAT.mp&&e.DAT.mp!=u.DAT.mp||null!=u.DAT.mid&&e.DAT.mid!=u.DAT.mid||null!=u.DAT.md&&e.DAT.md!=u.DAT.md||null!=u.DAT.evt&&e.DAT.evt!=u.DAT.evt||null!=u.DAT.seas&&e.DAT.seas!=u.DAT.seas)));e.challengeProg[h].progVal=m.length;f=1!=u.PT&&e.challengeProg[h].progVal>=u.DAT.val;(1==u.PT||e.challengeProg[h].progVal==u.PV||u.DAT.sm&&!f)&&(p=!1),p&&(f&&(e.account.activeChallenges[h].PT=1,n||e.send("chgC",h),d+=u.REW.bpp||0),e.account.activeChallenges[h].PV=e.challengeProg[h].progVal,c.push(f?1:0,u.CI,e.account.activeChallenges[h].PV)),u.DAT.sm&&!f&&(e.account.activeChallenges[h].PV=0,e.account.activeChallenges[h].SV=0)}if(n||(e.challengeProg.length=0),c.length){try{e.tmpBPData.cbp=d,e.tmpBPData.bpp+=d,e.tmpBPData.unbpp+=d,e.tmpBPData.rbpp-=d,e.account.BP.bpp+=e.tmpBPData.cbp,e.tmpBPData.re=a.getNextReward(e.tmpBPData.bpp,e.account.BP.tier)}catch(e){console.log("CHALLENGES ERROR",e)}t.call(175,[l,c.join(",")],(function(i,r){if((r=r&&r[0]?r[0][0]:null)&&"Try later"!=r.rsp&&(r.rsp+"").includes("{")){for(var o={kr:0,jnk:0,skins:[],bpp:0},c=s.parseJson("["+r.rsp+"]"),d=0;d<c.length;d++)c[d].kr&&(o.kr+=c[d].kr),c[d].jnk&&(o.jnk+=c[d].jnk),c[d].sk&&o.skins.push(...Array.isArray(c[d].sk)?c[d].sk:[c[d].sk]),c[d].bpp&&(o.bpp+=c[d].bpp);if(o.kr||o.jnk||o.skins.length||o.bpp){var h=a&&a.data?a.data.id:0;t.call(176,["chall",l,o.kr,o.jnk,o.skins.join(","),h,o.bpp],(function(t,i){if(i=i&&i[0]&&i[0][0]?i[0][0]:null,e&&e.account&&!n){var s=!1;i&&null!=i.fds&&null!=i.fds&&(s=!0,e.account.funds=i.fds),i&&null!=i.jnk&&null!=i.jnk&&(s=!0,e.account.junk=parseFloat(i.jnk));var a=i&&null!=i.ski&&null!=i.ski?i.ski.split(","):[];if(a&&a.length){s=!0;for(var r=0;r<a.length;r++)a[r]=parseInt(a[r]),e.account.addSkin(a[r])}s&&e.send("chlR",a,e.account.funds,e.account.junk,o.jnk,o.kr)}}))}}})),n||e.send("chg",c)}}},e.exports.updateNames=function(e,t){if(e)for(var i=0;i<e.length;i++)e[i].N&&e[i].N.length||(e[i].N=t.t("chall.name."+e[i].DAT.ky,e[i].DAT.val,"daily"==e[i].T&&null!=e[i].DAT.wep?"with "+a[e[i].DAT.wep].name:""));return e}},function(e,t){e.exports=function(e,t,i){var n,s;this.boards={};var a=this;this.generate=function(e,t,n,s,r,o){var l=e+"_"+t+"_"+s+"_"+r+"_"+o;a.boards[l]||(a.boards[l]={sid:r,sentTo:{}},i.call(155,[e,t,n,o||25,s],(function(e,t){if(t=t&&t[0]?t[0]:null){for(var i=[],n=0;n<t.length;++n)i.push(t[n].pl,t[n].kv);a.boards[l].data=i}})))},this.sync=function(){for(var t=0;t<e.players.list.length;++t)if((n=e.players.list[t]).active)for(var i in a.boards)a.boards.hasOwnProperty(i)&&!(s=a.boards[i]).sentTo[n.id]&&s.data&&(s.sentTo[n.id]=1,e.broadcast("ulb",s.sid,s.data))}}},function(e,t,i){const n=i(1);var s;e.exports=[{name:"Nuke",desc:"Calls in a nuclear bomb that detonates after 10 seconds, killing all players that are spawned at the time the nuke goes off",slot:2,kills:25,reqAccount:!0,activate:function(e,t,i){return!e.nukeTimer&&(e.incStat("n",t),this.start(e,t,i),t.nukes++,!0)},reset:function(e){e.nukeTimer=0,e.nukePlayer=null},start:function(e,t){e.nukeTimer="skip"!=e.gameTimer&&e.gameTimer>0&&!e.mode.timed&&e.gameTimer<1e4?e.gameTimer-1:1e4,e.nukePlayer=t,e.broadcast("n",0),e.isCustom&&e.findTriggers("onNukeStart",t)},update:function(e,t,i){if(e.endTimer<=0&&e.nukeTimer&&(e.nukeTimer-=i,e.nukeTimer<=0&&(e.nukeTimer=0,e.broadcast("n",1),e.nukePlayer))){for(var a=0,r=0;r<e.players.list.length;++r)!(s=e.players.list[r]).active||s==e.nukePlayer||s.team&&e.nukePlayer.team==s.team||s.godMode||(a+=50,e.players.kill(s,e.nukePlayer,{stk:0},!1,!0));a&&(e.nukePlayer.send("6",[40,a,0,1],0,e.nukePlayer.kills,a/50),e.nukePlayer.send("4"),e.players.score(e.nukePlayer,a)),e.isCustom&&e.findTriggers("onNukeEnd",e.nukePlayer),e.nukePlayer&&e.nukePlayer.account&&e.isPubType()&&140==n.randInt(1,140)&&e.giveSkin(e.nukePlayer,"4040","streak")}}},{name:"Airdrop",desc:"Calls in a air drop package containing various things.",slot:1,kills:12,noCustoms:!0,activate:function(e,t){return!e.isCustom&&(!(!t||!t.active)&&(null==e.canSee(t,t.x,t.y+500,t.z)?(e.incStat("ad",t),e.airDrop.drop(t,t.x,t.y+500,t.z,{}),!0):(t.send("ch",-1,null,"This place is not suitable for an Airdrop",2),!1)))}},{name:"Refill",desc:"Dev Streak",slot:0,kills:5,devOnly:!0,activate:function(e,t){var i=Date.now();return!!t&&!t.canThrow&&i-t.lastThrowTime>=5e3&&(e.refillPlayer(t),!0)}},{name:"Bombardment",desc:"Deploys a Bomber that carpet bombs the entire map",slot:2,kills:20,activate:function(e,t,i){return!e.bombardmentTimer&&!e.bombardmentBombs.length&&(this.start(e,t,i),t.bombardments++,!0)},calcPos:function(e){for(var t,i,a=0,r=0,o=0,l=0,c=0,d=6,h=6,u=0;u<e.map.spawns.length;++u)(s=e.map.spawns[u]).x<a&&(a=s.x),s.x>r&&(r=s.x),s.z<o&&(o=s.z),s.z>l&&(l=s.z),s.y>c&&(c=s.y);t=(r-a)/d,i=(l-o)/h,d+=4,h+=4,r+=2*t,l+=2*i,o-=2*i;for(var p=[],f=a-=2*t,m=0;m<d;m++){for(var g=[],v=o,y=0;y<h;y++)g.push(f+n.randFloat(-15,15),c+n.randFloat(250,500),v+n.randFloat(-15,15)),v+=i;f+=t,p.push(g)}e.bombardmentBombs=p},reset:function(e){e.bombardmentTimer=0,e.bombardmentPlayer=null,e.bombardmentBombs=[]},end:function(e){e.bombardmentTimer=0,e.bombardmentBombs=[]},start:function(e,t,i){e.bombardmentTimer=500,e.bombardmentPlayer=t,this.calcPos(e,t,i),e.broadcast("bbm",0)},update:function(e,t,i){if(e.endTimer<=0&&e.bombardmentTimer&&(e.bombardmentTimer-=i,e.bombardmentTimer<=0)){if(!e.bombardmentBombs.length)return this.end(e),void e.broadcast("bbm",1);e.bombardmentTimer=500,e.projectiles.initBombs(e.bombardmentBombs[0],e.bombardmentPlayer),e.bombardmentBombs.shift()}},onCollision:function(e,t){e.players.giveEffect(t,4),e.players.giveEffect(t,5)},onKill:function(e){e.bombardmentPlayer.send("6",[50,100,0,1],0,e.bombardmentPlayer.kills,1),e.players.score(e.bombardmentPlayer,100)}},{name:"Slimer",desc:"Equips the player with a slime gun that spawns slime pads which players gain a boost from",slot:0,kills:7,activate:function(e,t){return!(!t||!t.active||t.hasEquipment()||(e.incStat("sl",t),e.players.giveWeapon(t,23),0))}},{name:"Juggernaut",desc:"Equips the player with a Juggernaut Suit & Minigun",slot:2,kills:30,activate:function(e,t){return!(!t||!t.active||t.hasEquipment()||(e.incStat("jg",t),e.setJuggernaut(t,!0),0))}},{name:"War Machine",desc:"Equips the player with a Powerful Grenade Launcher",slot:1,kills:15,activate:function(e,t){return!(!t||!t.active||t.hasEquipment()||(e.incStat("wm",t),e.players.giveWeapon(t,26),0))}}];for(var a=0;a<e.exports.length;++a)e.exports[a].index=a},function(e,t,i){const n=i(341),s=i(1),a=i(4),r=[{name:"Starter",icons:2,rarities:[75,22,3,0,0,0]},{name:"Elite",icons:3,rarities:[50,30,15,5,0,0]},{name:"Heroic",icons:4,rarities:[0,48,35,14,2.49,.5,.01]}],o=[{name:"Uncommon",color:"#b2f252"},{name:"Rare",color:"#2196F3"},{name:"Epic",color:"#E040FB"},{name:"Legendary",color:"#FBC02D"},{name:"Relic",color:"#ed4242"},{name:"Contraband",color:"#292929"},{name:"Unobtainable",color:"#fff53d"}],l=function(e,t,i){this.rarities=[83.5,15,1,.5],this.init=function(a,l,c,d,h,u){this.x=l,this.y=c,this.z=d,this.owner=a?a.sid:null,this.scale=4,this.width=10,this.heightS=10,this.length=10,this.claimRadius=6,this.active=!0,this.canClaim=!1,this.fallDist=null==h.fall?this.calcFallDist():h.fall,this.speed=.05,this.imitate=null;var p=null;if(t){var f=0;a&&a.account&&a.account.level>=50?f=2:a&&a.account&&a.account.level>=25&&(f=1),f=r[f];var m=s.randFloat(0,100).round(2);0==f.rarities[0]&&(m=Math.max(m,.01));for(var g=0,v=0,y=0;y<f.rarities.length;++y)if(m<=(v+=f.rarities[y])){g=y;break}var b=s.getRandom(n.filter((t=>(!e.isCustom||e.isCustom&&!t.noCustoms)&&t.rarity==g&&(null==t.streak||e&&e.mode&&e.mode.disabledStreaks&&-1==e.mode.disabledStreaks.indexOf(t.streak)))));if(s.isNumber(u)&&n[u]&&(b=n[u]),this.dropIndex=b&&b.index||0,(p=n[this.dropIndex]).imitate){var w=s.getRandom(n.filter((t=>(!e.isCustom||e.isCustom&&!t.noCustoms)&&!t.imitate)));w&&(this.imitate=w.index)}}else this.dropIndex=h.dropIndex||0,p=n[this.dropIndex];if(this.icon=p.icon||0,this.animate=p.animate||0,this.name=p.name||"Drop",this.rarCol=o[p.rarity||0].color,p.init&&p.init(e,t,this,a),this.claimTime=p.claimTime||3250,this.sentTo={},i){this.bobAnim=0,this.mesh=i.genObj3D(0,0,0);var x={isMdl:!0,transparent:!0,side:2,rgb:!!this.animate,rgbS:this.animate?.5:void 0,color:p.color,vertexColors:!0};this.meshRef=i.loadMesh({src:"./adrp_0",...x},0,-1.5,0,Math.PI/2,this.scale,this.mesh),this.secMat=i.getMat("./adrp_1",x),i.scene.add(this.mesh),this.updateMesh()}},this.updateMesh=function(){this.mesh.position.x=this.x,this.mesh.position.y=this.y,this.mesh.position.z=this.z},this.calcFallDist=function(){return 1e3*(e.canSee(this,this.x,this.y-1e3,this.z,0,0,!0,!0,!0)||1)},this.claim=function(i){if(this.canClaim){this.active=!1,this.canClaim=!1;var s=!1;this.mesh&&(this.mesh.visible=!1),t&&(e.broadcast("rad",this.sid),i&&(i.sid!=this.owner&&(s=!0),e.broadcast("krp",this.owner,s?i.sid:this.owner)),i&&(e.playSound(a.networkSounds.indexOf("adrop_1"),.5,this.owner,this.x,this.y,this.z,!0),n[this.dropIndex].claim(e,t,this,i,s)&&(e.challenges.update(e,s?"sad":"cad",1,null,i),e.incStat(s?"sad":"cad",i))))}},this.readyClaim=function(){this.canClaim=!0,this.meshRef&&(this.meshRef.material=this.secMat)},this.update=function(i){if(this.fallDist>0){var n=Math.min(this.fallDist,this.speed*i);this.fallDist-=n,this.y-=n,this.fallDist<=0&&this.readyClaim()}return t&&this.y<=e.map.deathY?void this.claim():void(this.mesh&&(this.updateMesh(),this.canClaim?(this.mesh.rotation.x=0,this.mesh.rotation.z=0):(this.bobAnim+=.001*i,this.mesh.rotation.x=.1*Math.sin(this.bobAnim),this.mesh.rotation.z=-.1*Math.sin(this.bobAnim),this.mesh.rotation.y+=.001*i)))}};e.exports=function(e,t,i,n){var a,r;this.drops=[];var o=[],c=this;this.drop=function(s,a,r,o,c,d,h){for(var u=null,p=0;p<this.drops.length;++p)this.drops[p].active||(u=this.drops[p]);u||(u=new l(e,t,i),this.drops.push(u),u.sid=this.drops.length),u.init(s,a,r,o,c,h),null!=d&&(u.sid=d),u.fallDist<=0&&u.readyClaim(),n&&u.fallDist&&n.play("adrop_0",.15)},this.cSync=function(e){c.drop(null,e[2],e[3],e[4],{fall:e[1],dropIndex:e[5]},e[0])},this.sync=function(){if(this.drops.length)for(var t=0;t<e.players.list.length;++t)if((a=e.players.list[t]).active||a.spectating)for(var i=0;i<this.drops.length;++i)if((r=this.drops[i]).active&&!r.sentTo[a.id]){o.length=0;var n=s.isNumber(r.imitate)&&a.sid!=r.owner;o.push(r.sid,r.fallDist,r.x.round(2),r.y,r.z.round(2),n?r.imitate:r.dropIndex),a.send("ad",o),r.sentTo[a.id]=1}},this.update=function(e){for(var t=0;t<this.drops.length;++t)this.drops[t].active&&this.drops[t].update(e)},this.removeBySid=function(e){for(var t=0;t<c.drops.length;++t)c.drops[t].sid==e&&c.remove(c.drops[t])},this.remove=function(e){i&&e.mesh&&(i.scene.remove(e.mesh),e.mesh=null),e.canClaim=!1,e.active=!1},this.reset=function(){for(var e=0;e<this.drops.length;++e)this.remove(this.drops[e]);this.drops.length=0}}},function(e,t,i){const n=i(1);i(4);for(var s=[{name:"KR Package",noCustoms:!0,rarity:0,icon:0,claimTime:2500,claim:function(e,t,i,n,s){if(!n||!n.account)return!1;return n.additionalReward+=5,n.send("am",[s?"KR Thief":"KR Claimed","5 KR",0,1]),n.send("ch",0,null,"Claimed 5 KR",2),!0}},{name:"KR Package",noCustoms:!0,rarity:1,icon:0,claimTime:2500,claim:function(e,t,i,n,s){if(!n||!n.account)return!1;return n.additionalReward+=10,n.send("am",[s?"KR Thief":"KR Claimed","10 KR",0,1]),n.send("ch",0,null,"Claimed 10 KR",2),!0}},{name:"KR Package",noCustoms:!0,rarity:2,icon:0,claimTime:2500,claim:function(e,t,i,n,s){if(!n||!n.account)return!1;return n.additionalReward+=15,n.send("am",[s?"KR Thief":"KR Claimed","15 KR",0,1]),n.send("ch",0,null,"Claimed 15 KR",2),!0}},{name:"KR Package",noCustoms:!0,rarity:3,icon:0,claimTime:2500,claim:function(e,t,i,n,s){if(!n||!n.account)return!1;return n.additionalReward+=20,n.send("am",[s?"KR Thief":"KR Claimed","20 KR",0,1]),n.send("ch",0,null,"Claimed 20 KR",2),!0}},{name:"KR Package",noCustoms:!0,rarity:4,icon:0,claimTime:3e3,claim:function(e,t,i,n,s){if(!n||!n.account)return!1;return n.additionalReward+=30,n.send("am",[s?"KR Thief":"KR Claimed","30 KR",0,1]),n.send("ch",0,null,"Claimed 30 KR",2),!0}},{name:"KR Package",noCustoms:!0,rarity:5,icon:0,claimTime:3e3,claim:function(e,t,i,n,s){if(!n||!n.account)return!1;return n.additionalReward+=100,n.send("am",[s?"KR Thief":"KR Claimed","100 KR",0,1]),n.send("ch",0,null,"Claimed 100 KR",2),!0}},{name:"KR Package",noCustoms:!0,rarity:6,icon:0,animate:!0,claimTime:4500,claim:function(e,t,i,n,s){if(!n||!n.account)return!1;return n.additionalReward+=250,n.send("am",[s?"KR Thief":"KR Claimed","250 KR",0,1]),n.send("ch",0,null,"Claimed 250 KR",2),!0}},{name:"Junk Package",noCustoms:!0,rarity:0,icon:3,claimTime:2500,claim:function(e,t,i,n,s){if(!n||!n.account)return!1;return n.send("am",[s?"Junk Thief":"Junk Claimed","0.05 Junk",0,1]),e.sendUserJunk("airdrop",n,.05),!0}},{name:"Junk Package",noCustoms:!0,rarity:1,icon:3,claimTime:2500,claim:function(e,t,i,n,s){if(!n||!n.account)return!1;return n.send("am",[s?"Junk Thief":"Junk Claimed","0.1 Junk",0,1]),e.sendUserJunk("airdrop",n,.1),!0}},{name:"Junk Package",noCustoms:!0,rarity:2,icon:3,claimTime:2500,claim:function(e,t,i,n,s){if(!n||!n.account)return!1;return n.send("am",[s?"Junk Thief":"Junk Claimed","0.2 Junk",0,1]),e.sendUserJunk("airdrop",n,.2),!0}},{name:"Junk Package",noCustoms:!0,rarity:3,icon:3,claimTime:2500,claim:function(e,t,i,n,s){if(!n||!n.account)return!1;return n.send("am",[s?"Junk Thief":"Junk Claimed","0.3 Junk",0,1]),e.sendUserJunk("airdrop",n,.3),!0}},{name:"Junk Package",noCustoms:!0,rarity:4,icon:3,claimTime:3e3,claim:function(e,t,i,n,s){if(!n||!n.account)return!1;return n.send("am",[s?"Junk Thief":"Junk Claimed","0.5 Junk",0,1]),e.sendUserJunk("airdrop",n,.5),!0}},{name:"Junk Package",noCustoms:!0,rarity:5,icon:3,claimTime:3e3,claim:function(e,t,i,n,s){if(!n||!n.account)return!1;return n.send("am",[s?"Junk Thief":"Junk Claimed","1 Junk",0,1]),e.sendUserJunk("airdrop",n,1),!0}},{name:"Junk Package",noCustoms:!0,rarity:6,icon:3,animate:!0,claimTime:4500,claim:function(e,t,i,n,s){if(!n||!n.account)return!1;return n.send("am",[s?"Junk Thief":"Junk Claimed","2.5 Junk",0,1]),e.sendUserJunk("airdrop",n,2.5),!0}},{name:"Trapped Package",noCustoms:!0,rarity:1,icon:1,imitate:!0,color:"#e51b23",claimTime:1e3,claim:function(e,t,i,n){return n.send("so","taunt_2",1,1,0,0,0,1,null,null),e.players.giveEffect(n,6,e.effects[6].max),!1}},{name:"Trapped Package",noCustoms:!0,rarity:2,icon:1,imitate:!0,color:"#e51b23",claimTime:1e3,claim:function(e,t,i,n){return n.send("so","taunt_3",1,1,0,0,0,1,null,null),e.players.giveEffect(n,4,e.effects[4].max),e.players.giveEffect(n,5,e.effects[5].max),!1}},{name:"Trapped Package",noCustoms:!0,rarity:3,icon:1,imitate:!0,color:"#e51b23",claimTime:1e3,claim:function(e,t,i,n){n.send("so","taunt_4",1,1,0,0,0,1,null,null);var s=e.players.findBySid(i.owner);return e.explosion(i.x,i.y+i.heightS/2,i.z,50,300,s||n,{stk:1,pkg:1}),!1}},{name:"Skin Package",noCustoms:!0,rarity:4,icon:2,claimTime:3e3,claim:function(e,t,i,s){if(!s||!s.account)return!1;var a=e.store.skins.filter((e=>e&&e.package));if(n.yateShuffle(a),!a||!a.length)return!1;var r=a[0].index;return e.giveSkin(s,r,"package"),!0}},{name:"Juggernaut Package",noCustoms:!0,rarity:5,icon:5,streak:5,claimTime:3e3,claim:function(e,t,i,n){if(!n||!n.account)return!1;return e.streaks[5].activate(e,n,t),e.challenges.update(e,"stk",1,{stk:5},n),!0}},{name:"War Machine Package",noCustoms:!0,rarity:4,icon:6,streak:6,claimTime:3e3,claim:function(e,t,i,n){if(!n||!n.account)return!1;return e.streaks[6].activate(e,n,t),e.challenges.update(e,"stk",1,{stk:6},n),!0}},{name:"Nuke Package",noCustoms:!0,rarity:6,icon:7,animate:!0,streak:0,claimTime:3e3,claim:function(e,t,i,n){if(!n||!n.account)return!1;return e.streaks[0].activate(e,n,t),e.challenges.update(e,"stk",1,{stk:0},n),!0}},{name:"Slimer Package",noCustoms:!0,rarity:3,icon:8,streak:4,claimTime:3e3,claim:function(e,t,i,n){if(!n||!n.account)return!1;return e.streaks[4].activate(e,n,t),e.challenges.update(e,"stk",1,{stk:4},n),!0}}],a=0;a<s.length;a++)s[a].index=a;e.exports=s},function(e,t,i){const n=i(1),s=i(4);var a=[{obj:{src:"ghost_0",side:2,glowText:!0,emissive:"#ffffff"},behaviour:0,bobD:1,bobS:.005,emissive:!0,scale:4},{src:"model",asset:"30171e",noFog:!0,mYOff:8,side:2,lvl:30,canShoot:!0,pathInput:"99",targPlr:!0,visDis:700,proj:1,pjD:20,pjSp:.9,pjSC:1.6,pjMS:4,pjA:"30401e",health:1100,score:10,speed:.9,frate:3600,turnSpd:20,emissive:!0,scale:4,shotEff:4},{src:"model",asset:"50838e",canHit:!0,mYOff:6,hbh:.6,rotY:!0,visDis:700,targPlr:!0,melrng:20,meldmg:20,health:700,score:10,speed:.6,turnSpd:4,emissive:!0,scale:4,eventN:"onAIDeath",actions:[{trigConst:1,trigConstTx:"pump",trigAct:62}]},{src:"model",asset:"50578q",noFog:!0,furthTarg:!0,mYOff:8,lvl:50,speed:2.9,turnSpd:5.5,grv:.4,canHit:!0,melrng:20,melDel:900,hrate:900,meldmg:20,targPlr:!0,visDis:400,aiChasd:50,mSize:1.4,mROff:270,health:5e3,score:100,melShake:.05,emissive:!0,scale:4,agr:3206,mel:3236,melh:29672,animS:1.8,mYOff:-.001,startAnim:"",hbh:2.9,hbw:1.4,shotEff:4,reward:["6435"],eventN:"onAIDeath",actions:[{trigConst:1,trigConstTx:"mirror",trigAct:65}]},{src:"ghost_0",frames:2,frameT:400,side:2,obj:{src:"ghost_0",side:2,glowText:!0,emissive:"#ffffff",frames:2,frameT:400},canShoot:!0,visDis:500,proj:1,pjD:10,pjSp:.9,pjSC:1.6,pjMS:1.4,health:300,targPlr:!0,score:10,speed:.8,frate:2500,turnSpd:20,emissive:!0,scale:4}];const r=2e3;function o(e,t,i){var o,l=[];this.init=function(t,r,o,l,c,d,h){this.isAI=!0,this.sid=h;var u=d||a[c];this.dat=u,this.index=c,this.active=!0,this.name=l||"",u.asset=(u.asset||"")+"";var p=u.asset.includes("g"),f=u.asset.includes("q"),m=u.asset.includes("f"),g=u.asset.includes("e"),v=u.asset.includes("n"),y=u.asset.includes("s"),b=u.asset.includes("a"),w=u.asset.includes("m"),x=u.asset.includes("r"),S=u.asset.includes("p"),M=u.asset.includes("b");this.assetID=u.asset.replace(/[^\d]/g,""),this.hasAnim=p||f||m,this.animS=u.animS,this.soundR=u.soundR||1,this.startAnim=u.startAnim||"Idle",this.bobD=u.bobD||0,this.bobS=u.bobS||0,this.bobVal=0,this.interpolate=!1,this.frames=u.frames,this.frameT=u.frameT,this.rAnim=u.rAnim,this.rAnimA=u.rAnimA,this.reward=u.reward,this.rewardMethod=u.rewardMethod||0,this.rewardReq=u.rewardReq||0,this.rewardNode=u.rewardNode||0,this.maxHealth=u.health||0,this.health=this.maxHealth,this.speed=.031*(u.speed||0),this.turnSpd=.002*(u.turnSpd||0),this.gravity=.1*(u.grv||0),this.killScore=u.score||0,this.respawnT=u.respawnT||0,this.respawnR=!!u.respawnR,this.critDmg=u.critDmg||0,this.critHei=u.critHei||0,this.lastHit={},this.breakAttack=0,this.breakMove=0,this.breakTimer=0,this.behaviour=1,this.behavType=u.behav||0,this.didMov=0,this.actionFreq=0,this.ignoreOnStuck=!!u.ignoreOnStuck,this.driftOnStuck=!!u.driftOnStuck,this.invincibleOnStuck=!!u.invincibleOnStuck,this.canShoot=!!u.canShoot,this.fireRate=u.frate||2e3,this.fireRate<0&&(this.fireRate=200),this.shootTimer=this.fireRate||0,this.shotSprd=u.aicur||0,this.shotOff=4==this.behavType?10:2,this.shotOffH=!!u.shoOffH,this.shootBreak=u.shoBrk||0,this.shotArchY=n.toRad(u.shoArY||0),this.shotDelay=u.shoDel||0,this.shotShake=u.shoShake||0,this.waitShoot=0,this.effectOnShot=null==u.shotEff?void 0:parseInt(u.shotEff),this.effectOnHit=null==u.hitEff?void 0:parseInt(u.hitEff);var k=u.pjA?(u.pjA||"").replace(/[^\d]/g,""):null;this.projOb={s:u.pjA?k+"/model":"orb_0",d:u.pjD,pjA:k?u.pjA:null,pjSp:u.pjSp,pjG:null==u.pjG?u.pjG:2e-4*u.pjG,pjGL:null!=u.pjGL,pjT:null!=u.pjT,pjSC:u.pjSC,pjMS:u.pjMS,pjS:u.pjS,ex:u.explode?40:void 0,expS:u.explode?60:void 0,effectInd:this.effectOnShot,noObjC:5==this.behavType,emis:u.pjA&&g||!u.pjA?"#ffffff":null},this.specAtkTim=0,this.specAtkTim2=0,this.usedSpecial=!1,this.spawnMTim=0,this.spawnCap=20,this.mSize=(u.mSize||4)*(this.assetID?i?.5:2:1),this.scale=this.mSize*(u.hbw||1).round(1),this.height=this.mSize*(u.hbh||1).round(1),this.mYOff=u.mYOff||0,this.mROff=u.mROff||0,this.avoidAiC=!0,this.canHit=!!u.canHit,this.meleeRange=u.melrng||0,this.meleeRadius=u.melrad||0,this.meleeRange<10&&(this.meleeRange=10),this.meleeChaseRange=.7*this.meleeRange,this.hitDelay=u.melDel||400,this.hitDelayC=null,this.hitDMG=u.meldmg||10,this.hitTimer=0,this.hitRate=u.hrate||800,this.hitRate<0&&(this.hitRate=200),this.toHit=null,this.hitBreak=400,this.meleeShake=u.melShake||0,this.x=(t||0).round(1),this.y=(r||0).round(1),this.z=(o||0).round(1),this.startP={x:this.x,y:this.y,z:this.z},this.posHist=[],this.physMov=!!u.pMov,this.onGround=!0,this.yVel=0,this.xVel=0,this.zVel=0,this.stuckTime=0,this.forceDirection=null,this.forceDirectionTimer=0,this.wasStuck=!1,this.invincible=!1,this.permInvincible=!1,this.stuckCount=0,this.xD=0,this.yD=0,this.rotY=u.rotY,this.target=null,this.ignoreList={},this.ignoreTimer=0,this.oldTargetId=null,this.targtFurth=!!u.furthTarg,this.targetAI=!!u.targAI,this.targPlr=!!u.targPlr,this.vision=u.visDis||120,this.aiChasd=u.aiChasd||10,this.xray=!!u.xrayVis,this.friendly=!!u.friendly;var _=u.pathInput+"";if(this.followPath=!!_&&!!_.length,this.pathList=_.split(",")||[],this.pathIndex=0,this.pathIndDir=1,this.pathType=s.pathTypes[u.pathType||0],this.pathType||=s.pathTypes[0],this.roamRad=u.roamRad||0,this.roamTarget=null,this.roamTime=u.roamTime||1e3,this.roamTimer=0,this.team=u.team,this._team=u.team,this.forceTeamTimer=0,this.canBSeen=!1,this.sentTo=[],this.alwaysName=this.height>=6,this.tagScale=u.tagScale||1,this.lvl=u.lvl||0,this.noVis=u.noVis,this.noFog=u.noFog,this.side=u.side||0,this.fTrans=!!u.fTrans,this.opacity=n.isNumber(u.opacity)?u.opacity:1,this.alphaTest=n.isNumber(u.alphaTest)?u.alphaTest:0,this.noSmooth=u.noSmooth,i&&!u.noVis){this.mesh&&i.scene.remove(this.mesh),this.mesh=i.genObj3D(t,r,o);var T=this.assetID&&u?this.assetID+"/"+u.src:"ghost_0";this.meshRef=i[this.hasAnim?"loadAnimMesh":"loadMesh"](d?{fileExt:f?"glb":p?"gltf":m?"fbx":null,side:this.side,asset:!!this.assetID,startAnim:this.startAnim,emissive:g?"#ffffff":null,src:T,animS:this.animS,opacity:this.opacity,transparent:this.fTrans||1!=this.opacity,noFog:this.noFog,alphaTest:this.alphaTest||(b?.02:0),normal:v,spec:y,tFilter:this.noSmooth?1003:1006,metalness:w?1:0,roughness:x?1:0,displacement:S?1:0,bump:M?1:0,frames:this.frames,frameT:this.frameT,rAnim:this.rAnim,rAnimA:this.rAnimA}:u.obj,0,(this.assetID?0:this.scale)+(this.mYOff||0),0,n.toRad(this.mROff||0),this.scale,this.mesh),i.scene.add(this.mesh)}this.shootSound=u.atk||0,this.shootHitSound=u.atkh||0,this.melSound=u.mel||0,this.melHitSound=u.melh||0,this.deathSound=u.dth||0,this.aggroSound=u.agr||0,"undefined"!=typeof window&&"SOUND"in window&&(this.idleSound=u.idl||0,this.idlSoundI=5e3,this.idlSoundT=this.idlSoundI*n.randFloat(.8,1.2)),this.trigActions=u.actions,this.trigChance=u.chance,this.trigConstE=u.constE||0,u.eventN&&(this[u.eventN]=!0),this.interface=u.interface,this.interfaceT=u.interfaceT,this.singleUse=u.singleUse,this.effects={},this.attributes={},this.attributeTimers=[];for(var C=0;C<e.effectConfig.length;C++)this.attributes[e.effectConfig[C].key]=e.effectConfig[C].def,this.attributeTimers[C]=[];this.ticker=0,this.tickerC=0,this.zappedBy=null,this.dmgList=[]},this.getData=function(){return[this.sid,this.index,this.name,this.x.round(1),this.y.round(1),this.z.round(1),this.dat?{hasAnim:this.hasAnim?1:0,animS:this.animS,soundR:this.soundR,team:this.team,health:this.maxHealth,mSize:this.mSize,mYOff:this.mYOff,mROff:this.mROff,hbh:(this.dat.hbh||1).round(1),asset:this.dat.asset||0,idl:this.dat.idl,src:this.dat.src,noVis:this.noVis?1:0,tagScale:this.tagScale||1,lvl:this.lvl||0,side:this.side,opacity:this.opacity,texEncode:this.texEncode,alphaTest:this.alphaTest,noSmooth:this.noSmooth,noFog:this.noFog,fTrans:this.fTrans,frames:this.frames,frameT:this.frameT,rAnim:this.rAnim,rAnimA:this.rAnimA,bobD:this.bobD,bobS:this.bobS}:0]},this.emitSound=function(t,i,s,a,r){n.isNumber(t)&&"0"!=t&&e.playSound(t,.9*(i||1),0,Math.round(s||this.x),Math.round(a||this.y),Math.round(r||this.z),!0,1*(this.soundR||1),!1,null,null,!0,!0)},this.tickAI=function(t){if(this.ticker-=t,this.ticker<=0&&(this.ticker=500,this.tickerC++,this.attributes.zap&&this.tickerC%2==0)){var i=this.zappedBy?e.players.findBySid(this.zappedBy):null,n=this.attributes.zap;this.changeHealth(-n,i)&&this.kill(i||null),e.showHit(i,this,Math.round(n),!1,!0)}for(var s=0;s<this.attributeTimers.length;s++)if(this.attributeTimers[s].length)for(var a=this.attributeTimers[s].length-1;a>=0;--a)this.attributeTimers[s][a]-=t,this.attributeTimers[s][a]<=0&&(this.attributeTimers[s].splice(a,1),this.removeEffect(s,1))},this.update=function(a){if(i){if(!this.active||!this.mesh||!this.mesh.visible)return;if(this.bobD&&this.bobS&&(this.bobVal+=a*this.bobS),this.interpolate){this.dt+=a;var c=Math.min(1.6,this.dt/(1e3/e.aiSyncT));c/=e.config?e.config.deltaMlt:1,this.mesh.position.x=this.x1+(this.x-this.x1)*c,this.mesh.position.y=this.y1+(this.y-this.y1)*c,this.mesh.position.z=this.z1+(this.z-this.z1)*c,this.mesh.rotation.y=this.xD}else this.mesh.position.x=this.x,this.mesh.position.y=this.y,this.mesh.position.z=this.z,this.mesh.rotation.y=this.xD;t.playAnim(this,this.didMov?"Move":"Idle"),this.idleSound&&(this.idlSoundT-=a,this.idlSoundT<=0&&(this.idlSoundT=this.idlSoundI*n.randFloat(.8,1.2),e.playerSound(this.idleSound,null,this.x,this.y,this.z,1,1*(this.soundR||1),300,null,null,!0,!0)))}else{if(0==this.behavior)return;if(this.rspTimer){if(this.rspTimer-=a,!(this.rspTimer<=0))return;this.active=!0,this.target=null,this.ignoreList={},this.stuckTime=0,this.oldTargetId=null,this.x=this.startP.x,this.y=this.startP.y,this.z=this.startP.z,this.health=this.maxHealth,this.rspTimer=0,this.dmgList.length=0}if(!this.active)return;for(var d in this.tickAI(a),this.breakMove>0&&(this.breakMove-=a,this.breakMove<=0&&(this.breakMove=0)),this.oldX=this.x,this.oldY=this.y,this.oldZ=this.z,this.oldTargetId=this.target&&this.target.isPlayer?this.target.id:null,this.wasStuck,this.wasStuck=!1,this.forceTeamTimer&&(this.forceTeamTimer-=a,this.forceTeamTimer<=0&&(this.forceTeamTimer=0,this.team=this._team,this.target=null,this.actionFreq=0)),this.ignoreList)this.ignoreList[d]-=a,this.ignoreList[d]<=0&&(this.ignoreList[d]=0,delete this.ignoreList[d]);e.AI.forceTargetTimer&&(this.actionFreq=e.AI.forceTargetTimer,this.target=e.AI.forceTarget,this.forceDirectionTimer=0,this.forceDirection=null);var h=1;if(1==this.behavType&&this.target){if(this.breakTimer+=a,this.breakTimer>=5e3&&(this.breakTimer=-n.randInt(0,5e3),this.breakAttack=4e3),this.health<=this.maxHealth/1.5&&(h=1.5,this.specAtkTim-=a,this.specAtkTim<=0)){this.specAtkTim=n.randInt(7e3,12e3),this.breakMove=2e3,this.breakAttack=3e3;for(var u=8,p=0,f=e.projectiles.stored[1],m=0;m<u;++m)e.projectiles.init(this.x,this.y+this.shotOff,this.z,p,0,f,this,{},!0,this.projOb),p+=2*Math.PI/u}if(this.health<=this.maxHealth/2&&(h=2,this.specAtkTim2-=a,this.specAtkTim2<=0)){this.emitSound(3236),this.specAtkTim2=n.randInt(12e3,16e3),this.specAtkTim=0;var g=n.randFloat(-Math.PI,Math.PI);this.x=this.startP.x+100*Math.cos(g),this.z=this.startP.z+100*Math.sin(g)}}if(2==this.behavType&&this.target){if(this.health<=this.maxHealth/2&&(this.shootTimer>7e3&&(this.shootTimer=7e3),!this.usedSpecial)){this.usedSpecial=!0;var v=0;for(m=0;m<6;++m){var y=2*this.scale+70,b=this.x+y*Math.cos(v),w=this.y+2*this.scale+10,x=this.z+y*Math.sin(v);this.emitSound(3236,null,this.x,this.y,this.z),e.AI.spawn(null,2,"Jack O' Lantern",b,w,x),v+=2*Math.PI/6}}if(this.specAtkTim-=a,this.specAtkTim<=0){this.specAtkTim=n.randInt(5e3,1e4),this.breakAttack=1e3;for(u=8,p=0,f=e.projectiles.stored[1],m=0;m<u;++m)e.projectiles.init(this.x,this.y+3+this.height+this.shotOff,this.z,p,0,f,this,{},!0,this.projOb),p+=2*Math.PI/u}if(this.spawnCap>0&&(this.spawnMTim+=a,this.spawnMTim>=6e3)){this.spawnCap--,this.spawnMTim=-n.randInt(0,5e3);var S=n.randFloat(-Math.PI,Math.PI);y=2*this.scale+100,b=this.x+y*Math.cos(S),w=this.y+2*this.scale+10,x=this.z+y*Math.sin(S);this.emitSound(3236,null,b,w,x),e.AI.spawn(null,4,"Lost Soul",b,w,x)}}3==this.behavType&&this.target&&this.health<=this.maxHealth/2&&(this.shootTimer>4e3&&(this.shootTimer=4e3),h=2),4==this.behavType&&this.target&&this.health<=this.maxHealth/2&&!this.usedSpecial&&(this.usedSpecial=!0,e.AI.spawn(null,3,"Mirror Image",this.startP.x,this.startP.y+.01,this.startP.z)),5==this.behavType&&(this.specAtkTim-=a,this.specAtkTim<=0&&(this.specAtkTim=n.randInt(1e4,2e4),this.emitSound(3236,null,this.x,this.y,this.z),e.AI.spawn(null,1,"Drowned Sailor",this.x,this.y+10,this.z)));var M=!1;if(1==this.behaviour){var k;if(this.actionFreq-=a,this.actionFreq<=0)k=this.targtFurth?e.findFurthestFrom(this,this.x,this.y+this.height/2,this.z,this.team,this.vision,this.xray,this.targetAI,this.targPlr):e.findNearestTo(this,this.x,this.y+this.height/2,this.z,this.team,this.vision,this.xray,this.targetAI,this.targPlr,!1,this.ignoreList),this.target!=k&&this.emitSound(this.aggroSound),this.target=k,this.actionFreq=this.target?this.targtFurth?7e3:2e3:5e3;var _=2*Math.PI,T=this.target||this.roamTarget||this.startP;if(!this.target)if(this.followPath&&null!=this.pathList[this.pathIndex]&&e.map.manager.pathNodes[this.pathList[this.pathIndex]])T=e.map.manager.pathNodes[this.pathList[this.pathIndex]];else if(this.roamRad&&(this.roamTimer-=a,this.roamTimer<=0)){this.roamTimer=this.roamTime;S=n.randFloat(-Math.PI,Math.PI);this.roamTarget={x:this.startP.x+this.roamRad*Math.cos(S),y:this.startP.y,z:this.startP.z+this.roamRad*Math.sin(S)}}var C=n.getDrs(T,this);e.AI.forceDance&&(C=[n.toRad(n.randInt(0,360)),n.toRad(n.randInt(0,360))]);var I=(C[0]||0)+Math.PI/2,A=C[1]||0,R=this.hitDelayC?0:1;this.waitShoot&&(R=.01),e.AI.forceDance&&(R=10);var P=(this.xD-I+_)%_,E=Math.min(Math.abs(P-_),P,this.turnSpd*R*h*a),D=P-Math.PI>=0?1:-1;this.xD+=D*E+_,this.xD%=2*Math.PI,P=(this.yD-A+_)%_,E=Math.min(Math.abs(P-_),P,this.turnSpd*R*h*a),D=P-Math.PI>=0?1:-1,this.yD+=D*E+_,this.yD%=2*Math.PI;var O=10;this.target?(O=this.aiChasd,this.canHit&&(O=this.meleeChaseRange)):T&&T.node&&(O=1);var L=n.getD3D(this.x,this.y,this.z,T.x,T.y,T.z),j=this.target&&!T.node&&L<.9*this.meleeChaseRange;if(!(L>=O||j)||!this.speed||this.hitDelayC||this.waitShoot||this.breakMove)T&&T.node&&this.pathList.length>1&&("Loop"==this.pathType?(this.pathIndex++,this.pathIndex>=this.pathList.length&&(this.pathIndex=0)):"Do Once"==this.pathType?(this.pathIndex++,this.pathIndex>=this.pathList.length&&(this.pathIndex=this.pathList.length-1)):"Ping Pong"==this.pathType?(this.pathIndex+=this.pathIndDir,this.pathIndex>=this.pathList.length?(this.pathIndex=this.pathList.length-1,this.pathIndDir*=-1):this.pathIndex<=0&&(this.pathIndex=0,this.pathIndDir*=-1)):"Random"==this.pathType&&(this.pathIndex=n.randInt(0,this.pathList.length-1)));else{var z=Math.min(L,this.speed*h*a*(j?-.1:1));if(M=!0,this.physMov){z*=.01;var B=s.groundDecel;this.onGround||(B=s.airDecel),this.yVel-=a*s.gravity,this.onGround&&(this.xVel+=z*Math.sin(this.xD+Math.PI/2)*Math.cos(this.yD),this.yVel+=z*Math.sin(this.yD),this.zVel+=z*Math.cos(this.xD+Math.PI/2)*Math.cos(this.yD)),this.x+=this.xVel*a,this.xVel*=Math.pow(B,a),this.xVel=n.cropVal(this.xVel,s.decelMin),this.y+=this.yVel*a,this.yVel>0?this.yVel-=32e-6*a:this.yVel<=-.3&&(this.yVel=-.3),this.z+=this.zVel*a,this.zVel*=Math.pow(B,a),this.zVel=n.cropVal(this.zVel,s.decelMin)}else this.x+=z*Math.sin(this.xD+Math.PI/2)*Math.cos(this.yD),this.z+=z*Math.cos(this.xD+Math.PI/2)*Math.cos(this.yD),this.y+=z*Math.sin(this.yD),this.y-=this.gravity*a}}if(this.breakAttack>0&&(this.breakAttack-=a,this.breakAttack<=0&&(this.breakAttack=0)),!this.breakAttack&&!this.waitShoot&&this.canHit&&(null==this.hitDelayC&&(this.hitTimer-=a,this.hitTimer<=0&&this.target&&(this.hitTimer=200,n.getD3D(this.x,this.y,this.z,this.target.x,this.target.y,this.target.z)-(this.target.scale||0)<=this.meleeChaseRange&&(this.hitTimer=this.hitRate*n.randInt(1,1.2),4==this.behavType&&0==n.randInt(0,this.health<=this.maxHealth/2?1:3)&&(this.hitTimer=400),this.hitDelayC=this.hitDelay,this.toHit=this.target,this.toHit&&(this.breakMove=this.hitBreak,this.emitSound(this.melSound),t.playAnim(this,"Melee"))))),null!=this.hitDelayC&&(this.hitDelayC-=a,this.hitDelayC<=0&&(this.hitDelayC=null,this.meleeShake&&e.rumble(this.x,this.y,this.z,this.meleeShake,200),this.emitSound(this.melHitSound),this.toHit)))){for(m=0;m<e.players.list.length;++m)if(H=e.players.list[m],(!this.team||this.team!=H.team)&&H.active&&n.getD3D(this.x,this.y,this.z,H.x,H.y,H.z)<=this.meleeRange){var N=n.getAngleDst(n.getDrs(H,this)[0]||0,this.xD)-Math.PI/2;if(this.meleeRadius&&Math.abs(N)>this.meleeRadius)continue;e.players.changeHealth(H,this,this.hitDMG)?(e.players.kill(H),this.onAIKillPlayer&&e.onTrigger(H,this)):null!=this.effectOnHit&&e.players.giveEffect(H,this.effectOnHit)}for(m=0;m<e.AI.ais.length;++m)this!=(H=e.AI.ais[m])&&(this.team&&this.team==H.team||n.getD3D(this.x,this.y,this.z,H.x,H.y,H.z)-2*(H.scale||0)<=this.meleeRange+this.scale&&H.changeHealth(-this.hitDMG,this));this.toHit=null}var F=!1;if(this.breakAttack||this.hitDelayC||!this.canShoot||this.waitShoot||(this.shootTimer-=a,this.target&&this.shootTimer<0&&(this.shotDelay?this.waitShoot=this.shotDelay:F=1,this.emitSound(this.shootSound),t.playAnim(this,"Shoot"),this.breakMove=this.shootBreak)),this.waitShoot&&(this.waitShoot-=a,this.waitShoot<=0&&(this.waitShoot=0,F=2)),F){this.shootTimer=this.fireRate;I=this.xD-Math.PI/2,A=0;if(this.emitSound(this.shootHitSound),this.shotShake&&e.rumble(this.x,this.y,this.z,this.shotShake,200),this.target){C=[];if(this.shotOffH)C=n.getDrs(this.target,this,this.shotOff+this.height/2);else if(this.target.isPlayer){var H=e.players.fetchState(this.target,this);C=H?n.getDrs(H,this,s.crouchDst*H.cV||0):n.getDrs(this.target,this,s.crouchDst*this.target.crouchVal||0)}else C=n.getDrs(this.target,this,s.crouchDst*this.target.crouchVal||0);1==F&&(I=C[0]+n.randFloat(-this.shotSprd,this.shotSprd)),A=C[1]+n.randFloat(-this.shotSprd,this.shotSprd)+this.shotArchY}(f=e.projectiles.stored[1])&&e.projectiles.init(this.x,this.y+this.height/2+this.shotOff,this.z,I,A,f,this,{},!0,this.projOb)}if(this.avoidAiC)for(m=0;m<e.AI.ais.length;++m)if(this!=(H=e.AI.ais[m])){var U=n.getDistance(this.x,this.z,H.x,H.z);if(U<this.scale+H.scale){U=this.scale+H.scale-U;var V=n.getDir(this.x,this.z,H.x,H.z);this.x+=U*Math.cos(V),this.z+=U*Math.sin(V)}}var G=null;if(this.onGround=!1,o=e.map.manager.getGridArrays(this.x,this.y,this.z)){l.length=0;for(m=0;m<o.length;++m)if(H=o[m],l.indexOf(H.sid)<0&&(l.push(H.sid),!H.onEnterObject&&!H.onExitObject&&!H.flag&&!H.trigger&&!H.noAICol&&H.active&&this.collidesAcc(H)))if(H.ramp){if(this.y<H.y+H.height){var W=Math.max(0,Math.min(1,n.progressOnLine(H.ramp.sX,H.ramp.sZ,H.ramp.eX,H.ramp.eZ,this.x+this.scale*Math.cos(H.dir),this.z+this.scale*Math.sin(H.dir)))),q=H.y-H.height+(2*H.height+.01)*W;null===G&&(G=q),this.y<=q&&G<=q&&(G=q,this.y=q,this.yVel=0,this.onGround=!0)}}else if(H.redirection){var Y=this.speed*h*a*.05;this.xVel=Y*Math.sin(-H.dir+Math.PI/2)*Math.cos(H.boostDr),this.zVel=Y*Math.cos(-H.dir+Math.PI/2)*Math.cos(H.boostDr)}else this.y<H.y+H.height&&H.y+H.height-this.y<=3&&this.oldY<H.y+H.height||this.oldY>=H.y+H.height?(this.y=H.y+H.height,this.yVel=0,this.onGround=!0):this.oldX-this.scale>=H.x+H.width-1e-5?(this.x=H.x+H.width+this.scale,this.xVel=0):this.oldX+this.scale<=H.x-H.width+1e-5?(this.x=H.x-H.width-this.scale,this.xVel=0):this.oldZ-this.scale>=H.z+H.length-1e-5?(this.z=H.z+H.length+this.scale,this.zVel=0):this.oldZ+this.scale<=H.z-H.length+1e-5&&(this.z=H.z-H.length-this.scale,this.zVel=0);for(var K in e.map.manager.spawnables)(H=e.map.manager.spawnables[K]).active&&H.ai&&this.collidesAcc(H)&&e.pickupSpawnable(this,H);o=null}if(this.didMov=n.getD3D(this.x,this.y,this.z,this.oldX,this.oldY,this.oldZ)>=.1?1:0,this.invincibleOnStuck)(X=this.speed&&!this.hitDelayC&&!this.waitShoot&&!this.breakMove&&M)&&this.target&&this.target.isPlayer&&this.target.id==this.oldTargetId&&!this.didMov?this.stuckTime+=a:this.didMov&&(this.stuckTime=0,this.permInvincible||(this.invincible=!1)),X&&this.target&&this.target.isPlayer&&this.target.id==this.oldTargetId&&this.stuckTime>=r&&(this.stuckCount++,this.stuckTime=0,this.wasStuck=!0,this.invincible=!0,4==this.stuckCount&&(this.permInvincible=!0,e.broadcast("so","mystery_1",2,1)));else if(this.ignoreOnStuck){(X=this.speed&&!this.hitDelayC&&!this.waitShoot&&!this.breakMove&&M)&&this.target&&this.target.isPlayer&&this.target.id==this.oldTargetId&&!this.didMov?this.stuckTime+=a:this.didMov&&(this.stuckTime=0),X&&this.target&&this.target.isPlayer&&this.target.id==this.oldTargetId&&this.stuckTime>=r&&(this.stuckTime=0,this.target=null,this.actionFreq=0,this.ignoreList[this.oldTargetId]=2e3,this.wasStuck=!0)}else if(this.driftOnStuck){var X;if(this.forceDirectionTimer){if(this.forceDirectionTimer)if(this.forceDirectionTimer-=a,this.forceDirectionTimer<=0)this.forceDirectionTimer=0,this.forceDirection=null;else{z=this.speed*h*a*.01;this.xVel=this.forceDirection*z*Math.sin(this.xD-Math.PI/4)*Math.cos(this.yD),this.zVel=this.forceDirection*z*Math.cos(this.xD-Math.PI/4)*Math.cos(this.yD)}}else(X=this.speed&&!this.hitDelayC&&!this.waitShoot&&!this.breakMove&&M)&&this.target&&this.target.isPlayer&&this.target.id==this.oldTargetId&&!this.didMov?this.stuckTime+=a:this.didMov&&(this.stuckTime=0),X&&this.target&&this.target.isPlayer&&this.target.id==this.oldTargetId&&this.stuckTime>=r&&(this.stuckTime=0,this.forceDirection=n.getRandom([1,-1]),this.forceDirectionTimer=2e3,this.wasStuck=!0)}this.lastHit.tim&&(this.lastHit.tim-=a,this.lastHit.tim<=0&&(this.lastHit={})),this.y<=e.map.deathY&&this.kill(this.lastHit.doer);for(m=this.posHist.length-1;m>=0;--m)e.now-this.posHist[m].t>=s.stateHistory&&this.posHist.splice(m,1);this.posHist.unshift({t:e.now,x:this.x,y:this.y,z:this.z})}},this.fetchState=function(t){for(var i=e.now-t.ping-200,n=0;n<this.posHist.length;++n)if(i>=this.posHist[n].t)return this.posHist[n]},this.giveEffect=function(t,i){i=i||1;var n=e.effectConfig[t];if(n){if(this.effects[t]?this.effects[t]+=i:this.effects[t]=i,this.effects[t]>n.max){var s=this.effects[t]-n.max;if(this.effects[t]=n.max,n.timer)for(var a=0;a<s;a++)this.attributeTimers[t][a]?this.attributeTimers[t][a]=1e3*n.timer:this.attributeTimers[t].push(1e3*n.timer);return}if(n.timer)for(a=0;a<i;a++)this.attributeTimers[t].push(1e3*n.timer);n.execute(e,this)}},this.removeEffect=function(t,i){var n=!0,s=e.effectConfig[t];i&&this.effects[t]&&(this.effects[t]--,n=this.effects[t]<=0),n?this.clearEffect(t):s.execute(e,this)},this.clearEffect=function(t){var i=e.effectConfig[t];this.effects[t]&&=null,this.attributes[i.key]=i.def,this.attributeTimers[i.index].length=0,i.clear&&i.clear(this)},this.forceTeam=function(t,i,s,a){(!s||n.randFloat(0,100).round(2)<=s)&&(this._team=this.team,this.team=t,this.forceTeamTimer=i,this.target=null,this.actionFreq=0,a&&e.challenges.update(e,"cvrt",1,null,a))},this.changeHealth=function(t,i,n,s){if(i!=this){if(e.instaKillTimer&&i&&i.isPlayer&&(t=this.health?-2*this.health:t),this.health){var a=this.health;s?this.health=t:this.health+=t,this.health<=0?this.kill(i):t>0?this.health>this.maxHealth&&(this.health=this.maxHealth):(i&&i.isPlayer&&this.onAIDamage&&e.onTrigger(i,this),i&&i.isPlayer&&this.onAIHalfHealth&&a>this.maxHealth/2&&this.health<=this.maxHealth/2&&e.onTrigger(i,this))}i&&(i.isPlayer&&t<0&&(this.dmgList.includes(i.id)||this.dmgList.push(i.id),i.dmgDealt-=t,this.lastHit={doer:i,tim:8e3}),t<this.behaviour!=1||i.team&&i.team==this.team||!n&&this.target||!i.isPlayer&&!this.targetAI||i.isPlayer&&!this.targPlr||(this.target!=i&&this.emitSound(this.aggroSound),this.ignoreList[i.id]||(this.target=i,this.actionFreq=5e3)))}},this.kill=function(i,s){if(this.active){if(this.active=!1,this.health=0,this.pathIndex=0,this.pathIndDir=1,!s){if(i&&i.isPlayer&&i.aiKills++,this.emitSound(this.deathSound),this.rspTimer=this.respawnR?n.randInt(100,this.respawnT||5e3):this.respawnT||0,this.onAIDeath&&e.onTrigger(i,this),e.mode.onAIDeath&&e.mode.onAIDeath(e,this,i),this.reward&&e.isPubType())for(var a=e.map.manager.pathNodes[this.rewardNode],r=0;r<e.players.list.length;++r){if(e.players.list[r].isBot)continue;if(0==this.rewardReq&&!e.players.list[r].active)continue;if(!(1!=this.rewardReq||e.players.list[r].active&&this.dmgList.includes(e.players.list[r].id)))continue;if(!(2!=this.rewardReq||e.players.list[r].active&&this.lastHit&&this.lastHit.doer&&this.lastHit.doer==e.players.list[r]))continue;const t=e.isDoubleRaidDrops?2:1;for(let i=0;i<t;i++){var o=e.getItemByChance(this.reward);o&&-1!=o&&(1===this.rewardMethod&&e.dropSkin(e.players.list[r],o,void 0,this.x,this.y,this.z),2===this.rewardMethod&&a?e.dropSkin(e.players.list[r],o,void 0,a.x,a.y,a.z):e.giveSkin(e.players.list[r],o))}}i&&i.attributes&&i.attributes.siphon&&e.players.changeHealth(i,null,-i.attributes.siphon)}this.rspTimer||t.removeFully(this)}},this.collidesAcc=function(e){return Math.min(this.x,this.oldX)-this.scale<e.x+e.width&&Math.max(this.x,this.oldX)+this.scale>e.x-e.width&&Math.min(this.z,this.oldZ)-this.scale<e.z+e.length&&Math.max(this.z,this.oldZ)+this.scale>e.z-e.length&&Math.min(this.y,this.oldY)<=e.y+e.height&&Math.max(this.y,this.oldY)+2*this.height>=e.y-e.height}}e.exports=function(e,t,i){var a,r,l;this.ais=[],this.forceTargetTimer=0,this.forceTarget=null,this.forceDanceTimer=0,this.forceDance=null;var c=[],d=this;this.cSpawn=function(e){d.spawn(e[0],e[1],e[2],e[3],e[4],e[5],e[6],!0)},this.spawn=function(i,a,r,l,c,h,u,p){if(p||this.ais.length<s.aiLimit){var f=new o(e,d,t);return i||=n.generateSID(this.ais),f.init(l,c,h,r,a,u,i),this.ais.push(f),f}},this.update=function(e){this.forceTargetTimer&&(this.forceTargetTimer-=e,this.forceTargetTimer<=0&&(this.forceTargetTimer=0,this.forceTarget=null)),this.forceDanceTimer&&(this.forceDanceTimer-=e,this.forceDanceTimer<=0&&(this.forceDanceTimer=0,this.forceDance=!1));for(var t=this.ais.length-1;t>=0;--t)this.ais[t]&&this.ais[t].update(e)},this.servAnim=function(e,t,i){(a=d.findBySid(e))&&d.playAnim(a,i?t:s.clipNames[t],1)},this.playAnim=function(t,a,o,l){if(t.hasAnim&&a)if(i){var c=s.clipNames.indexOf(a);if(l||c>=0)for(var d=0;d<e.players.list.length;++d)((r=e.players.list[d]).active||r.spectating)&&(r.spectating||n.getD3D(r.x,r.y,r.z,t.x,t.y,t.z)<=800)&&r.send("ana",t.sid,l?a:c,l?1:0)}else t.meshRef&&t.meshRef.playClip&&t.meshRef.playClip(a,o)},this.hideAll=function(){for(var e=0;e<this.ais.length;++e)this.ais[e].mesh&&(this.ais[e].mesh.visible=!1),this.ais[e].forcePos=!this.ais[e].latestData,this.ais[e].latestData=!1},this.resetHidden=function(){for(var e=0;e<this.ais.length;++e)this.ais[e].mesh&&!this.ais[e].mesh.visible&&this.ais[e].meshRef&&this.ais[e].meshRef.stopAllClips&&this.ais[e].meshRef.stopAllClips()},this.findBySid=function(e){for(var t=0;t<this.ais.length;++t)if(this.ais[t].sid==e)return this.ais[t];return null},this.syncAll=function(e){if(d.hideAll(),e){for(var t=0;t<e.length;)(a=d.findBySid(e[t]))&&(a.mesh&&(a.mesh.visible=!0),a.latestData=!0,a.x=e[t+1]||0,a.y=(e[t+2]||0)+Math.sin(a.bobVal)*a.bobD,a.z=e[t+3]||0,a.xD=e[t+4]||0,a.yD=e[t+5]||0,!a.forcePos&&a.mesh?(a.dt=0,a.x1=a.mesh.position.x,a.y1=a.mesh.position.y,a.z1=a.mesh.position.z,a.xDir1=a.mesh.rotation.y,a.interpolate=!0):(a.interpolate=!1,a.mesh&&(a.mesh.position.x=a.x,a.mesh.position.y=a.y,a.mesh.position.z=a.z)),a.forcePos=!1,a.health=e[t+6]||0,a.didMov=e[t+7]||0,a.team=e[t+8]||0),t+=9;d.resetHidden()}},this.sync=function(){if(this.ais.length)for(var t=0;t<e.players.list.length;++t)if((r=e.players.list[t]).active||r.spectating){c.length=0;for(var i=0;i<this.ais.length;++i)(l=this.ais[i]).active&&(r.spectating||n.getD3D(r.x,r.y,r.z,l.x,l.y,l.z)<=800)&&(l.sentTo.indexOf(r.id)>=0?c.push(l.sid,l.x.round(1),l.y.round(1),l.z.round(1),l.xD.round(2),l.yD.round(2),Math.floor(l.health),l.didMov,l.team):(l.sentTo.push(r.id),r.send("aai",l.getData())));r.send("ai",c.length?c:0)}},this.removeFully=function(e){if(e){var t=this.ais.indexOf(e);if(t>=0){for(var n=0;n<this.ais[t].sentTo.length;++n)i.send(this.ais[t].sentTo[n],"rai",e.sid);this.ais.splice(t,1)}}},this.removeBySid=function(e){for(var t=d.ais.length-1;t>=0;--t)d.ais[t].sid==e&&(d.remove(d.ais[t]),d.ais.splice(t,1))},this.remove=function(e){t&&e.mesh&&(t.scene.remove(e.mesh),e.mesh=null),e.active=!1},this.reset=function(){this.forceTarget=null,this.forceTargetTimer=0,this.forceDance=!1,this.forceTDanceTimer=0;for(var e=0;e<this.ais.length;++e)this.remove(this.ais[e]);this.ais.length=0}}},function(e,t,i){var n=i(1),s=i(4);function a(){this.init=function(e,t,i,s,a,r,o,l,c){c=c||{},l=l||{},this.x=e,this.y=t,this.z=i,this.spd=r.spd*(c.v||1)*(null==c.pjSp?1:c.pjSp),this.grav=null==c.pjG?r.grav:c.pjG,this.range=r.range,l.rangeMlt&&(this.range*=l.rangeMlt),this.hitBox=r.hitB*(c.pjSC||1),s-=Math.PI,this.xD=s,this.yD=a,this.xS=this.spd*Math.sin(this.xD)*Math.cos(this.yD),this.zS=this.spd*Math.cos(this.xD)*Math.cos(this.yD),this.yS=this.spd*Math.sin(this.yD),this.dmg=+Math.ceil(r.dmg*(c.d||1)),l.dmgMlt&&(this.dmg*=l.dmgMlt),this.linger=r.linger,this.owner=o,this.stateConst=o&&!r.dontPred?2*o.ping*o.lagComp:0,this.dontPred=!!r.dontPred,this.weaponId=parseInt(l.wId),n.isNumber(this.weaponId)||(this.weaponId=void 0),this.weapon=l.w,this.streak=l.stk,this.skipMove=!0,this.noObjColl=!!c.noObjC,this.eDmg=r.eDmg,this.expl=r.explode,this.explDat=r.explodeData,null!=c.ex&&(this.eDmg=c.ex,this.expl=c.expS||35),this.effectInd=null==c.effectInd?r.effectInd:c.effectInd,this.effectC=1,null!=l.effectInd&&(this.effectInd=parseInt(l.effectInd)),null!=l.effectC&&(this.effectC=parseInt(l.effectC)),this.spray=c.spr||null,this.nImp=r.nImp,this.life=r.life,this.stick=r.stick,this.travelTime=0,this.active=!0,this.src=c.src,this.s=c.s},this.update=function(e){this.active&&(this.travelTime+=e,this.skipMove?this.skipMove=!1:(this.grav&&(this.yS-=this.grav*e,this.spd=n.getD3D(0,0,0,this.xS,this.yS,this.zS),this.yD=Math.asin(this.yS/this.spd)),this.x+=this.xS*e,this.z+=this.zS*e,this.y+=this.yS*e,this.life&&(this.life-=e,this.life<=0&&(this.life=0,this.active=!1)),this.range-=this.spd*e,this.range<=0&&(this.active=!1)))}}e.exports=function(e,t){var i,r,o,l,c=[];this.projectiles=[],this.stored=[{spd:.38,grav:2e-4,spn:.035,scale:1,linger:5e3,length:1,dmg:180,range:1500},{spd:.1,grav:0,spn:.04,hitB:4,scale:6.1,length:6.1,dmg:1,range:500,life:24e3},{s:"streak_3",spn:.008,spnD:"y",spd:.4,scale:5,length:5,scaleMlt:2,explode:150,dmg:150,eDmg:150,range:1500,life:24e3,dontPred:!0,info:{stk:3},yD:-Math.PI/2,rot:Math.PI,blend:1,noLookAt:!0,depthW:!0,explodeData:{smCnt:5,lgCnt:0}}],this.update=function(i){for(var a=0;a<this.projectiles.length;++a)if((l=this.projectiles[a]).active){if(l.update(i),l.active){var d=!1,h=!1,u=l.spd*i;c.length=0;var p=1/(u*Math.sin(l.xD)*Math.cos(l.yD)),f=1/(u*Math.cos(l.xD)*Math.cos(l.yD)),m=1/(u*Math.sin(l.yD));if(!l.noObjColl)for(var g=0;g<e.map.manager.objects.length;++g)if(!(r=e.map.manager.objects[g]).noShoot&&r.active){var v=n.lineInRect(l.x,l.z,l.y,p,f,m,r.x-r.width,r.z-r.length,r.y-r.height,r.x+r.width,r.z+r.length,r.y+r.height);v&&v<=1&&c.push({obj:r,dst:v})}for(var y=0;y<e.players.list.length;++y)if((o=e.players.list[y]).active&&o!=l.owner&&!o.noPVP&&!l.owner.noPVP&&(o.forcePVP&&l.owner.forcePVP||!o.forcePVP&&!l.owner.forcePVP)){if(null!=l.streak&&l.owner==o)continue;if(!(r=e.players.fetchState(o,l.owner,0,l.travelTime)))continue;var b=null;l.hitBox?(b=n.getD3D(l.x,l.y,l.z,r.x,r.y+r.ah/2,r.z))<=l.hitBox?b/=l.hitBox:b=null:b=n.lineInRect(l.x,l.z,l.y,p,f,m,r.x-o.scale-o.hitboxPadW,r.z-o.scale-o.hitboxPadW,r.y,r.x+o.scale+o.hitboxPadW,r.z+o.scale+o.hitboxPadW,r.y+r.ah+o.hitboxPadH),b&&b<=1&&c.push({plr:!0,obj:e.players.list[y],dst:b})}for(var w=0;w<e.AI.ais.length;++w)if((r=e.AI.ais[w]).active&&(!r.team||!l.owner||r.team!=l.owner.team)&&l.owner!=r){var x=n.lineInRect(l.x,l.z,l.y,p,f,m,r.x-r.scale,r.z-r.scale,r.y,r.x+r.scale,r.z+r.scale,r.y+2*r.height);x&&x<=1&&c.push({ai:!0,obj:e.AI.ais[w],dst:x})}var S=e.map.terrain;if(S){var M=S.raycast(l.x,-l.z,l.y,1/p,-1/f,1/m);if(M){let e=n.getD3D(l.x,l.y,l.z,M.x,M.z,-M.y);c.push({dst:e/u})}}var k=u;if(c.length){if(c.sort(n.orderByDst),c[0]){k=u*c[0].dst;var _=!1,T=!1,C=+l.dmg;if(l.owner&&l.owner.smite&&(C=1e4),l.owner&&l.owner.attributes&&l.owner.attributes.dmg&&(C*=l.owner.attributes.dmg),l.owner&&l.owner.dmgMlt&&(C*=l.owner.dmgMlt),!n.isNumber(C))continue;if(c[0].plr||c[0].ai||(d=!0),c[0].ai){if(!c[0].obj.invincible){if(null!=l.effectInd)(!l.owner||!l.owner.team||l.owner.team!=c[0].obj.team||e.mode.dmgTeam||e.config.frFire)&&(c[0].obj.giveEffect(l.effectInd,l.effectC),8==l.effectInd&&l.owner&&l.owner.isPlayer&&(c[0].obj.zappedBy=l.owner.sid));c[0].obj.changeHealth(-C,l.owner,12==l.weaponId),l.owner&&l.owner.isPlayer&&(c[0].obj.killScore&&e.mode&&e.mode.pointsPerHit&&e.players.score(l.owner,Math.ceil(C*e.mode.pointsPerHit),1),!c[0].obj.active&&c[0].obj.killScore&&e.players.score(l.owner,c[0].obj.killScore,1),e.showHit(l.owner,c[0].obj,Math.round(C),!1,!0))}}else l.owner&&l.owner.isPlayer&&C&&C>0&&(!e.waitTimers||e.waitTimers[0]&&e.waitTimers[0].contTime)&&c[0].obj&&c[0].obj.health&&!c[0].plr&&(c[0].obj.health-=C,l.owner.send("4"),c[0].obj.health<=0&&(c[0].obj.active=!1,c[0].obj.health=0,c[0].obj.destroyedBy=l.owner,c[0].obj.destroyed=!0,e.map.manager.destObjs.push(c[0].obj.uid),e.broadcast("do",c[0].obj.uid),c[0].obj&&c[0].obj.onDestroy&&e.onTrigger(l.owner,c[0].obj)));if(l.owner&&l.owner.isPlayer&&c[0].obj&&(c[0].obj.onShoot||c[0].obj.onDamage||l.owner&&12==l.weaponId&&c[0].obj.onThrowingMelee||c[0].obj.onProjectile)&&e.onTrigger(l.owner,c[0].obj),l.owner&&l.owner.isPlayer&&c[0].obj&&C&&c[0].obj.isEvent&&e.foundEventItem(l.owner,c[0].obj),c[0].obj&&C&&c[0].plr){if(h=!0,l.owner&&l.owner.isPlayer&&null!=l.weaponId){var I=l.y+k*Math.sin(l.yD),A=c[0].obj.y+c[0].obj.adjustedHeight-I;e.players.debugHitbox(l.owner,c[0].obj,I);var R=e.weaponConfig[l.weaponId];(_=A<s.headScale)?C*=_&&!R.noHeadShot?R.hsMlt||1.5:1:e.config&&e.config.headshotOnly&&(C=0),(T=c[0].obj.y+s.legHeight-s.crouchDst*c[0].obj.crouchVal>I)&&!_&&(C*=R.lsMlt||.5)}if(null!=l.effectInd)(!l.owner||!l.owner.isPlayer||!l.owner.team||l.owner.team!=c[0].obj.team||e.mode.dmgTeam||e.config.frFire)&&(e.players.giveEffect(c[0].obj,l.effectInd,l.effectC),8==l.effectInd&&l.owner&&l.owner.isPlayer&&(c[0].obj.zappedBy=l.owner.sid));e.players.changeHealth(c[0].obj,l.owner,C,void 0,_,{wep:l.weaponId})?(l.owner&&12==l.weaponId&&(l.owner.tKnifeKills++,t&&(e.incStat("tmk",l.owner),e.challenges.update(e,"tmk",1,{wep:12},l.owner))),l.owner&&l.owner.isPlayer&&_&&(l.owner.headshots++,t&&(e.incStat("hs",l.owner),e.challenges.update(e,"hs",1,{wep:l.weaponId},l.owner))),l.owner&&l.owner.isPlayer&&T&&(l.owner.legshots++,t&&(e.incStat("ls",l.owner),e.challenges.update(e,"ls",1,{wep:l.weaponId},l.owner))),e.players.kill(c[0].obj,l.owner,{wId:l.weaponId,stk:l.streak,hs:_,pj:!0},!1,null!=l.streak),null!=l.streak&&e.streaks[l.streak]&&e.streaks[l.streak].onKill&&e.streaks[l.streak].onKill(e,l.owner,t)):null!=l.streak&&e.streaks[l.streak]&&e.streaks[l.streak].onCollision&&e.streaks[l.streak].onCollision(e,c[0].obj,t)}c[0].dst-=.02,l.x+=c[0].dst*(l.xS*i),l.y+=c[0].dst*(l.yS*i),l.z+=c[0].dst*(l.zS*i)}l.active=!1}h&&t&&l.owner&&l.owner.isPlayer&&e.incStat("h",l.owner)}if(!l.active){l.expl&&e.explosion(l.x,l.y,l.z,l.expl,l.eDmg,l.owner,{wId:l.weaponId,stk:l.streak,smCnt:null==l.explDat?void 0:l.explDat.smCnt,lgCnt:null==l.explDat?void 0:l.explDat.lgCnt},!1,null!=l.streak),l.spray&&c.length&&!c[0].plr&&!c[0].ai&&e.players.sprayPosition(l.owner,c[0].obj,l.spray,l.x,l.y,l.z,l.s);for(y=0;y<e.players.list.length;++y)e.players.list[y]!=l.owner||l.dontPred?e.players.list[y].send("pre",l.sid,0,l.x.round(1),l.y.round(1),l.z.round(1),d&&!l.nImp&&l.owner?1:0):e.players.list[y].send("pre",l.ownShotCnt,1,l.x.round(1),l.y.round(1),l.z.round(1),!d||l.nImp?0:1)}}},this.init=function(n,s,r,o,l,c,d,h,u,p){o=o.round(3),l=l.round(3),n=n.round(1),s=s.round(1),r=r.round(1),i=null;for(var f=0;f<this.projectiles.length;++f)if(!this.projectiles[f].active){i=this.projectiles[f];break}var m;if(i||((i=new a).sid=this.projectiles.length,this.projectiles.push(i)),i.init(n,s,r,o,l,c,d,h,p),i.ownShotCnt=d?d.shotCntP:null,t)for(f=0;f<e.players.list.length;++f)(m=e.players.list[f])==d&&!c.dontPred||!m.active&&!m.spectating||(u?m.send("pr",n,s,r,o,l,this.stored.indexOf(c),i.sid,1,p,d?d.sid:void 0):d&&d.isPlayer&&m.send("pr",n,s,r,o,l,d.loadout[d.loadoutIndex],i.sid,void 0,void 0,d.sid))},this.initBombs=function(s,r){for(var o=this.stored[2],l=[],c=0;c<s.length;c+=3){var d=s[c].round(1),h=s[c+1].round(1),u=s[c+2].round(1),p={pjSp:n.randFloat(.3,.7).round(3)};i=null;for(var f=0;f<this.projectiles.length;++f)if(!this.projectiles[f].active){i=this.projectiles[f];break}i||((i=new a).sid=this.projectiles.length,this.projectiles.push(i)),i.init(d,h,u,0,o.yD,o,r,o.info,p),i.ownShotCnt=r?r.shotCntP:null,l.push(d,h,u,i.sid,p)}t&&e.broadcast("bmb",l)}}},function(e,t,i){const n=i(301).default;e.exports=function(e,t,...s){const a=i(345)(n,t,...s);a.context=n.prefix(a.context);const r={[e]:a.context};return{parse:function(e){return n.parse(e,r,{error:e=>t.error([e])})}}}},function(e,t,i){const n=i(4),s=i(1),a=["aHolder","aMerger","aContainer","krunkerio_728x90_1","/21823819281/frvr-krunker_io-krunker-display-banner-krunkerio_728x90_1","/21823819281/frvr-frvr-krunker-display-banner-krunkerio_728x90_1","mapVote","mapVoteD","mapVoteU","modVoteHold","modVoteD","modVoteU","modVote","mapInfoHolder","tDecCheck","tSubCheck","tSubOffer","tHeader0","tHeader1","tradeReady0","tradeReady1","tSubName","tradeChatHolder","tradeChatList","tradeChatItem","tradeTotal","trd_","offerVal","trd_inv_","tItemN","tItemCnt","tItemImg","tItemSprayImg","tItemHolder","tSubHolder","tDecOffer","tradeList0","tradeList1","offerVal0","offerVal1","estOfferVal","tDecName","tTotal","tListN","tHolderR","tHolderL","invList1","tList","invList0","jumpSIMG","jumpSVID","jumpSVIDHolder","material-icons","vote","ot-sdk-btn-floating","interactMsg","signedInHeaderBar","signedOutHeaderBar","accName","accPass","accResp","referralHeader"],r=["menuWindow"],o=["pass","login","user","register","signin"];e.exports=function(e,t,l,c,d,h,u,p,f){function m(e){return!!x[e]||(x[e]=1,!1)}function g(e){x[e]&&(x[e]=null,delete x[e])}function v(e,t){return S[e]||=0,S[e]++,S[e]>=t}function y(e,t){return M[e]||=0,M[e]++,M[e]>t}function b(...i){t.error(i.map((t=>e.sanitize(t))))}const w=(e||{}).addPrefix;var x={},S={};arguments.length&&setInterval((function(){S={}}),1e3);var M={};arguments.length&&setInterval((function(){M={}}),1e4);const k={player:function(e){return e._protected||={get id(){return e.id},get sid(){return e.sid},get username(){return e.name},get isYou(){return e.isYou},get active(){return!!e.active},get accountID(){return c&&e.account&&e.account.id||""},get accountName(){return c&&e.account&&e.account.name||""},disableDefault:function(t){"mouseY"!=t&&"mouseX"!=t&&"movDir"!=t&&"lMouse"!=t&&"rMouse"!=t&&"jump"!=t&&"reload"!=t&&"crouch"!=t&&"scroll"!=t&&"swap"!=t&&"restK"!=t&&"inter"!=t||(e.disabledInputs[t]=1)},get defaultMovement(){return!!e.defaultMovement},set defaultMovement(t){e.defaultMovement=!!t},get defaultVelocity(){return!!e.defaultVelocity},set defaultVelocity(t){e.defaultVelocity=!!t},get defaultRotation(){return!!e.defaultRotation},set defaultRotation(t){e.defaultRotation=!!t},get disableShooting(){return!!e.disableShooting},set disableShooting(t){e.disableShooting=!!t},get disableMelee(){return!!e.disableMelee},set disableMelee(t){e.disableMelee=!!t},get visible(){return!!e.objInstances&&!!e.objInstances.visible},set visible(t){e.objInstances&&(e.objInstances.visible=!!t)},get inView(){return!!e.cnBSeen},get assetID(){return e.config&&e.config.aID||""},set assetID(t){h&&h.players.updateAssetID(e,t)},getAsset:function(){return e.meshRef&&e.meshRef.children[0]?k.obj3D(e.meshRef.children[0]):void 0},get onWall(){return!!e.onWall},set onWall(t){e.onWall=!!t},get onGround(){return!!e.onGround||!!e.onRamp},set onGround(t){e.onGround=!!t},get onTerrain(){return!!e.onTerrain},set onTerrain(t){e.onTerrain=!!t},get isCrouching(){return(e.crouchVal||0)>=1},set isCrouching(t){e.crouchVal=~~!!t},get team(){return e.team||0},get classIndex(){return e.classIndex||0},set classIndex(t){if(h&&c&&d){var i=parseInt(t)||0;h.classes[i]&&e.classIndex!=i&&(e.classIndex=i,e.updateItems(h,d,!0))}},get loadoutIndex(){return e.loadoutIndex||0},set loadoutIndex(t){if(h&&c&&d){var i=parseInt(t)||0;null!=e.loadout[i]&&h.players.swapWeapon(e,0,!0,void 0,i)}},get ammo(){return e.ammos[e.loadoutIndex]||0},changePrimary:function(t){if(h&&c&&d){var i=parseInt(t||0);if(h.weaponConfig[i]){var n=h.weaponConfig[i];if(!n.secondary&&!n.melee&&!n.equipment){for(var s,a=!1,r=0;r<e.loadout.length;r++)if(!(s=h.weaponConfig[e.loadout[r]]).secondary&&!s.melee&&!s.equipment){if(s.id==n.id)return;e.loadout[r]=n.id,a=!0;break}var o=-1==e.loadout.indexOf(12);a||e.loadout.splice(0,0,n.id),e.updateLoadout(h,e.loadoutIndex,!0,e.loadout,void 0,void 0,void 0,o),h.broadcast("inat",e.sid,e.loadout,e.loadoutIndex,void 0,void 0,!1,!0,void 0,void 0,void 0,void 0,o)}}}},changeSecondary:function(t){if(h&&c&&d){var i=parseInt(t||0);if(h.weaponConfig[i]){var n=h.weaponConfig[i];if(n.secondary&&!n.equipment&&!n.melee){for(var s,a=!1,r=0;r<e.loadout.length;r++)if((s=h.weaponConfig[e.loadout[r]]).secondary){if(s.id==n.id)return;e.loadout[r]=n.id,a=!0;break}var o=-1==e.loadout.indexOf(12);a||e.loadout.splice(e.loadout.length>1?1:0,0,n.id),e.updateLoadout(h,e.loadoutIndex,!0,e.loadout,void 0,void 0,void 0,o),h.broadcast("inat",e.sid,e.loadout,e.loadoutIndex,void 0,void 0,!1,!0,void 0,void 0,void 0,void 0,o)}}}},giveWeapon:function(t){if(h&&c&&d){var i=parseInt(t||0);if(h.weaponConfig[i]){var n=h.weaponConfig[i];if(!n.equipment){for(var s,a=!n.secondary&&!n.melee&&!n.equipment,r=!!n.secondary,o=n.melee,l=-1,u=void 0,p=0;p<e.loadout.length;p++){if((s=h.weaponConfig[e.loadout[p]]).id==n.id)return;if(s.secondary||s.melee||s.equipment?s.secondary?p:s.melee&&p:l=p,a&&!s.secondary&&!s.melee&&!s.equipment){e.loadout[p]=n.id,u=p;break}if(r&&s.secondary){e.loadout[p]=n.id,u=p;break}if(o&&s.melee){e.loadout[p]=n.id,u=p;break}}if(null==u)if(e.loadoutIndex=u,o)e.loadout.push(n.id);else{var f=r?-1==l?0:1:0;e.loadout.splice(f,0,n.id)}var m=-1==e.loadout.indexOf(12);e.updateLoadout(h,e.loadoutIndex,!0,e.loadout,void 0,void 0,void 0,m),h.broadcast("inat",e.sid,e.loadout,e.loadoutIndex,void 0,void 0,!1,!0,void 0,void 0,void 0,void 0,m)}}}},removePrimary:function(){if(h&&c&&d){for(var t,i=void 0,n=0;n<e.loadout.length;n++)if(!(t=h.weaponConfig[e.loadout[n]]).secondary&&!t.melee&&!t.equipment){i=n;break}var s=-1==e.loadout.indexOf(12);null!=i&&(e.loadout.splice(i,1),i<e.loadoutIndex&&e.loadoutIndex--,e.updateLoadout(h,e.loadoutIndex,!0,e.loadout,void 0,void 0,void 0,s),h.broadcast("inat",e.sid,e.loadout,e.loadoutIndex,void 0,void 0,!1,!0,void 0,void 0,void 0,void 0,s))}},removeSecondary:function(){if(h&&c&&d){for(var t=void 0,i=0;i<e.loadout.length;i++)if(h.weaponConfig[e.loadout[i]].secondary){t=i;break}var n=-1==e.loadout.indexOf(12);null!=t&&(e.loadout.splice(t,1),t<e.loadoutIndex&&e.loadoutIndex--,e.updateLoadout(h,e.loadoutIndex,!0,e.loadout,void 0,void 0,void 0,n),h.broadcast("inat",e.sid,e.loadout,e.loadoutIndex,void 0,void 0,!1,!0,void 0,void 0,void 0,void 0,n))}},removeMelee:function(){if(h&&c&&d){for(var t=void 0,i=0;i<e.loadout.length;i++)if(h.weaponConfig[e.loadout[i]].melee){t=i;break}null!=t&&e.loadout.length>1&&(e.loadout.splice(t,1),t<e.loadoutIndex&&e.loadoutIndex--,e.updateLoadout(h,e.loadoutIndex,!0,e.loadout,void 0,void 0,void 0,true),h.broadcast("inat",e.sid,e.loadout,e.loadoutIndex,void 0,void 0,!1,!0,void 0,void 0,void 0,void 0,true))}},clearLoadout:function(){h&&c&&d&&(1!=e.loadout.length||12!=e.loadout[0])&&(e.updateLoadout(h,0,!0,[12]),h.broadcast("inat",e.sid,[12],0,void 0,void 0,!1))},get score(){return e.score||0},set score(t){h&&c&&d&&s.isNumber(t)&&h.players.score(e,parseInt(t)||0,0,!0)},get lives(){return e.lives||0},set lives(t){h&&c&&d&&(t=Math.max(0,parseInt(t||0)||0),(e.lives||0)>0&&0==t?h.players.kill(e):e.lives=t)},rotation:{get x(){return e.xDire},set x(t){e.xDire=parseFloat(t)||0},get y(){return e.yDire},set y(t){e.yDire=parseFloat(t)||0}},position:{get x(){return e.x},set x(t){e.x=parseFloat(t)||0},get y(){return e.y},set y(t){e.y=parseFloat(t)||0},get z(){return e.z},set z(t){e.z=parseFloat(t)||0}},velocity:{get x(){return e.velocity.x},set x(t){e.velocity.x=parseFloat(t)||0},get y(){return e.velocity.y},set y(t){e.velocity.y=parseFloat(t)||0},get z(){return e.velocity.z},set z(t){e.velocity.z=parseFloat(t)||0}},get health(){return e.health},set health(t){h&&(t=parseInt(t),t=s.isNumber(t)?t:e.health,h.players.setHealth(e,t)&&h.players.kill(e))},playAnim:function(t,i){s.isString(t)&&(i=s.isNumber(i)?i:1,e.meshRef&&e.meshRef.playClip&&e.meshRef.playClip(t,i))},stopAnim:function(){e.meshRef&&e.meshRef.stopAllClips&&e.meshRef.stopAllClips()},registerSyncValues:function(t){if(!n.serverScripting)return!1;if(!c||!d)return!1;if(h){if(s.isString(t)&&(t=[t]),!Array.isArray(t))return!1;for(let n=0;n<t.length;n++){if(e.custSync.length>=20)return!1;var i=t[n]+"";i.length<=20&&e.custSync.push(i)}}},deregisterSyncValues:function(t){if(!n.serverScripting)return!1;if(!c||!d)return!1;if(h){if(s.isString(t)&&(t=[t]),!Array.isArray(t))return!1;for(let n=0;n<t.length;n++){var i=t[n]+"";if(i.length<=20){var a=e.custSync.indexOf(i);a>=0&&e.custSync.splice(a,1)}}}},respawn:function(){return!!n.serverScripting&&!!c&&!!d&&void(!h||(e.lives<=0&&(e.lives=1),!e.active&&e.send("frs",!0)))}}},AI:function(e){return e._protected||={get sid(){return e.sid},get displayName(){return e.name},position:{get x(){return e.x},set x(t){e.x=parseFloat(t)||0},get y(){return e.y},set y(t){e.y=parseFloat(t)||0},get z(){return e.z},set z(t){e.z=parseFloat(t)||0}},rotation:{get x(){return player.xD},set x(e){player.xD=parseFloat(e)||0},get y(){return player.yD},set y(e){player.yD=parseFloat(e)||0}},get pathIndex(){return e.pathIndex},set behaviour(t){e.pathIndex=parseFloat(t)||0},get behaviour(){return e.behavior},set behaviour(t){e.behavior=parseFloat(t)||0},get health(){return e.health},set health(t){h&&(t=parseInt(t),t=s.isNumber(t)?t:e.health,e.changeHealth(t,null,!1,!0))},playAnim:function(t,i){c&&s.isString(t)&&(i=s.isNumber(i)?i:1,h.AI.playAnim(e,t,i,!0))}}},sound:function(e){return e._protected||={get volume(){return e.vol},set volume(t){e.vol=parseFloat(t)||0,e.sound.volume(e.vol*f.volumes[6],e.id)},get rate(){return e.rate},set rate(t){e.rate=parseFloat(t)||0,e.sound.rate((e.rate||1)*f.rate,e.id)},fade:function(t,i,n){t=s.isNumber(t)?t:0,i=s.isNumber(i)?i:1,n=s.isNumber(n)?n:0,e.sound.fade(t,i,n,e.id)},mute:function(){e.sound.mute(!0,e.id)},unmute:function(){e.sound.mute(!1,e.id)},play:function(){e.sound.isPlaying=!0,e.sound.play(e.id)},stop:function(){e.sound.isPlaying=!1,e.sound.stop(e.id)},pause:function(){e.sound.pause(e.id)}}},obj3D:function(e,t){return e.data=t||{},e._protected||={get id(){return e.id},get visible(){return!!e.visible},set visible(t){e.visible=!!t},get emissive(){return""},set emissive(t){s.isHexColor(t)&&e&&e.material&&(e.data.emissive=t,e.material=u.getMat(u.noTex?"default":e.data.src,e.data),e.material.needsUpdate=!0)},get opacity(){return e&&e.material?e.material.opacity||0:1},set opacity(t){(t=s.isNumber(t)?t:1,e&&e.material)&&(e.data&&("fbx"==e.data.fileExt||"gltf"==e.data.fileExt||"glb"==e.data.fileExt)?e.traverse((e=>{e.isMesh&&u.traverseMats(e,(function(e){e.opacity=t,e.transparent=1!=t,e.needsUpdate=!0}))})):(e.material.opacity=t,e.material.transparent=1!=t,e.material.needsUpdate=!0))},set texture(t){e.data.isMdl||(s.isNumber(t)&&(e.data.src=t+"/texture",e.data.asset=t),e.material=u.getMat(u.noTex?"default":e.data.src,e.data),e.material.map.needsUpdate=!0)},get texture(){return e.data.asset||0},set animSpeed(t){e.data.isMdl&&(e.data.animS=s.isNumber(t)?parseFloat(t):0,e.mixer&&(e.mixer.timeScale=e.data.animS||1))},get animSpeed(){return e.data.animS||1},move:function(t,i,n){u&&e&&e.position&&(e.position.x=parseFloat(t)||0,e.position.y=parseFloat(i)||0,e.position.z=parseFloat(n)||0)},position:{get x(){return e.position.x},set x(t){e.position.x=parseFloat(t)||0},get y(){return e.position.y},set y(t){e.position.y=parseFloat(t)||0},get z(){return e.position.z},set z(t){e.position.z=parseFloat(t)||0}},rotate:function(t,i,n){u&&e&&e.rotation&&(e.rotation.x=parseFloat(t)||0,e.rotation.y=parseFloat(i)||0,e.rotation.z=parseFloat(n)||0)},rotateLocal:function(t,i,n){if(!u)return;if(!e||!e.rotation)return;t=parseFloat(t)||0,i=parseFloat(i)||0,n=parseFloat(n)||0;const s=(new u.THREE.Box3).setFromObject(e).getCenter(new u.THREE.Vector3);var a=new u.THREE.Vector3(1,0,0);t&&(e.position.sub(s),e.position.applyAxisAngle(a,t),e.position.add(s),e.rotateOnWorldAxis(a,t)),i&&(a.set(0,1,0),e.position.sub(s),e.position.applyAxisAngle(a,i),e.position.add(s),e.rotateOnWorldAxis(a,i)),n&&(a.set(0,0,1),e.position.sub(s),e.position.applyAxisAngle(a,n),e.position.add(s),e.rotateOnWorldAxis(a,n))},rotation:{get x(){return e.rotation.x},set x(t){e.rotation.x=parseFloat(t)||0},get y(){return e.rotation.y},set y(t){e.rotation.y=parseFloat(t)||0},get z(){return e.rotation.z},set z(t){e.rotation.z=parseFloat(t)||0}},lookAt:function(t,i,n){u&&(t=parseFloat(t)||0,i=parseFloat(i)||0,n=parseFloat(n)||0,e.target?e.target.position.set(t,i,n):e.lookAt(t,i,n))},scale:{get x(){return e.scale.x},set x(t){e.scale.x=parseFloat(t)||0},get y(){return e.scale.y},set y(t){e.scale.y=parseFloat(t)||0},get z(){return e.scale.z},set z(t){e.scale.z=parseFloat(t)||0}},playAnim:function(t,i){u&&s.isString(t)&&(i=s.isNumber(i)?i:1,e&&e.playClip&&e.playClip(t,i))},stopAnim:function(){u&&e&&e.stopAllClips&&e.stopAllClips()},getBone:function(t){if(u&&s.isString(t)){var i=u.traverseBones(e,t);return i?k.aBone(i):void 0}},updateMorph:function(t,i){u&&s.isString(t)&&(i=s.isNumber(i)?i:0,e&&e.updateMorphKey&&e.updateMorphKey(t,i))},delete:function(){u&&e&&u.scene.remove(e)},attachTo:function(t,i,n,s,a){if(!u||!e||!h)return;var r=u.genObj3D(i||0,n||0,s||0);r.name="attachTo";const o=t[w("sid")],l=t[w("id")];if(null!=o){for(var c=0;c<h.players.list.length;c++)if(h.players.list[c].sid==o){a?r.attach(e):r.add(e),a?h.players.list[c].objInstances.attach(r):h.players.list[c].objInstances.add(r);break}}else{var d=u.scene.getObjectById(l,!0);d&&(a?r.attach(e):r.add(e),a?d.attach(r):d.add(r))}},detach:function(t){u&&e&&h&&"attachTo"==e.parent.name&&(e.parent.parent.remove(e.parent),e.parent=null,t?u.scene.attach(e):u.scene.add(e))}}},aBone:function(e){return e._protected||={get id(){return e.id},move:function(t,i,n){u&&e&&e.position&&(e.position.x=parseFloat(t)||0,e.position.y=parseFloat(i)||0,e.position.z=parseFloat(n)||0)},position:{get x(){return e.position.x},set x(t){e.position.x=parseFloat(t)||0},get y(){return e.position.y},set y(t){e.position.y=parseFloat(t)||0},get z(){return e.position.z},set z(t){e.position.z=parseFloat(t)||0}},rotation:{get x(){return e.rotation.x},set x(t){e.rotation.x=parseFloat(t)||0},get y(){return e.rotation.y},set y(t){e.rotation.y=parseFloat(t)||0},get z(){return e.rotation.z},set z(t){e.rotation.z=parseFloat(t)||0}},scale:{get x(){return e.scale.x},set x(t){e.scale.x=parseFloat(t)||0},get y(){return e.scale.y},set y(t){e.scale.y=parseFloat(t)||0},get z(){return e.scale.z},set z(t){e.scale.z=parseFloat(t)||0}}}},obj3DServ:function(e){return e._protected||={get sid(){return e.sid},position:{get x(){return e.x},get y(){return e.y},get z(){return e.z}},scale:{get x(){return e.width},get y(){return e.height},get z(){return e.length}}}},trigger:function(e){return e._protected||={position:{get x(){return e.x},get y(){return e.y},get z(){return e.z}},scale:{get x(){return e.width},get y(){return e.height},get z(){return e.length}}}},node:function(e){return e._protected||={get id(){return e.id},get x(){return e.x},get y(){return e.y},get z(){return e.z}}},NFT:function(e){return e._protected||={get name(){return e.name||""},get id(){return e.id},get tokenID(){return e.token_id},get contractAddress(){return e.asset_contract.address},get collection(){return e.collection.name},openListing:function(){}}}},_=function(e,t){return e.canHit=!!t[w("canMelee")],e.canShoot=!!t[w("canShoot")],s.isNumber(t[w("modelScale")])&&t[w("modelScale")]&&(e.mSize=parseFloat(t[w("modelScale")]),e.mSize=s.limitMM(e.mSize,.01,100).round(2)),e.health=s.isNumber(t[w("health")])?parseInt(t[w("health")]):0,e.speed=s.isNumber(t[w("speed")])?parseFloat(t[w("speed")]):0,e.speed=s.limitMM(e.speed,0,10),e.turnSpd=s.isNumber(t[w("turnSpeed")])?parseFloat(t[w("turnSpeed")]):0,e.turnSpd=s.limitMM(e.turnSpd,0,10),e.grv=s.isNumber(t[w("gravity")])?parseFloat(t[w("gravity")]):0,e.grv=s.limitMM(e.grv,0,1),e.roamTime=s.isNumber(t[w("roamTime")])?parseInt(t[w("roamTime")]):0,e.roamTime=s.limitMM(e.roamTime,1e3,1e4),e.roamRad=s.isNumber(t[w("roamRadius")])?parseInt(t[w("roamRadius")]):0,e.roamRad=s.limitMM(e.roamRad,0,500),e.aiChasd=s.isNumber(t[w("chaseDis")])?parseInt(t[w("chaseDis")]):0,e.aiChasd=s.limitMM(e.aiChasd,0,2e3),e.hbh=s.isNumber(t[w("hitBoxH")])&&parseFloat(t[w("hitBoxH")])||1,e.hbh=s.limitMM(e.hbh,.1,10),e.hbw=s.isNumber(t[w("hitBoxW")])&&parseFloat(t[w("hitBoxW")])||1,e.hbw=s.limitMM(e.hbw,.1,10),e.frate=s.isNumber(t[w("fireRate")])?parseInt(t[w("fireRate")]):0,e.frate=s.limitMM(e.frate,200,1e4),e.aicur=s.isNumber(t[w("shotSpread")])?parseInt(t[w("shotSpread")]):0,e.aicur=s.limitMM(e.aicur,0,10),e.shoBrk=s.isNumber(t[w("shotBreak")])?parseInt(t[w("shotBreak")]):0,e.shoBrk=s.limitMM(e.shoBrk,0,5e3),e.shoArY=s.isNumber(t[w("shotArchY")])?parseInt(t[w("shotArchY")]):0,e.shoArY=s.limitMM(e.shoArY,-90,90),e.shoOffH=!!t[w("shotOffH")],e.shoDel=s.isNumber(t[w("shotDelay")])?parseInt(t[w("shotDelay")]):0,e.shoDel=s.limitMM(e.shoDel,0,5e3),e.melDel=s.isNumber(t[w("meleeDelay")])?parseInt(t[w("meleeDelay")]):0,e.melDel=s.limitMM(e.melDel,0,5e3),e.melShake=s.isNumber(t[w("meleeShake")])?parseInt(t[w("meleeShake")]):0,e.melShake=s.limitMM(e.melShake,0,1),e.shoShake=s.isNumber(t[w("shotShake")])?parseInt(t[w("shotShake")]):0,e.shoShake=s.limitMM(e.shoShake,0,1),e.shotEff=s.isNumber(t[w("shotEffect")])?parseInt(t[w("shotEffect")]):void 0,null!=e.shotEff&&(e.shotEff=s.limitMM(e.shotEff,0,9)),e.hitEff=s.isNumber(t[w("hitEffect")])?parseInt(t[w("hitEffect")]):void 0,null!=e.hitEff&&(e.hitEff=s.limitMM(e.hitEff,0,9)),e.critDmg=s.isNumber(t[w("critDamage")])?parseInt(t[w("critDamage")]):0,e.critDmg=s.limitMM(e.critDmg,0,5),e.hrate=s.isNumber(t[w("meleeRate")])?parseInt(t[w("meleeRate")]):0,e.hrate=s.limitMM(e.hrate,200,1e4),e.melrng=s.isNumber(t[w("meleeRange")])?parseInt(t[w("meleeRange")]):0,e.melrng=s.limitMM(e.melrng,10,100),e.meldmg=s.isNumber(t[w("meleeDmg")])?parseInt(t[w("meleeDmg")]):0,e.meldmg=s.limitMM(e.meldmg,1,200),e.visDis=s.isNumber(t[w("visionDis")])?parseInt(t[w("visionDis")]):0,e.visDis=s.limitMM(e.visDis,1,1e3),e.score=s.isNumber(t[w("score")])?parseInt(t[w("score")]):0,e.score=s.limitMM(e.score,0,1e4),e.behav=s.isNumber(t[w("behaviorType")])?parseInt(t[w("behaviorType")]):0,e.behav=s.limitMM(e.behav,0,20),e.startAnim=t[w("animStart")],e.startAnim&&s.isString(e.startAnim)&&""!=e.startAnim?(e.startAnim.length>32&&(e.startAnim=""),/[^\w\:\;\(\)\?\,\.\|\[\] \-\+*\$\@\=\^!{}]+/gim.test(e.startAnim)&&(e.startAnim="")):e.startAnim="",e.animS=s.isNumber(t[w("animSpeed")])?parseFloat(t[w("animSpeed")]):0,e.mYOff=s.isNumber(t[w("modelOffsetY")])?parseFloat(t[w("modelOffsetY")]):0,e.mYOff=s.limitMM(e.mYOff,-100,100),e.mROff=s.isNumber(t[w("modelRotation")])?parseFloat(t[w("modelRotation")]):0,e.mROff=s.limitMM(e.mROff,0,360),e},T=function(e,t,i){if(2!=i){t[w("textureStretching")]&&(e.scale=0),e.scaleM=parseFloat(t[w("textureScale")])||0,e.movT=s.isNumber(t[w("textureMoveSpeed")])?t[w("textureMoveSpeed")]/1e4:void 0,e.movD="x"==t[w("textureMoveAxis")]?0:"y"==t[w("textureMoveAxis")]?1:s.limitMM(parseInt(t[w("textureMoveAxis")])||0,0,1),e.texOffX=s.isNumber(t[w("textureOffsetX")])?parseFloat(t[w("textureOffsetX")]):0,e.texOffX=s.limitMM(e.texOffX||0,0,1).round(2),e.texOffY=s.isNumber(t[w("textureOffsetY")])?parseFloat(t[w("textureOffsetY")]):0,e.texOffY=s.limitMM(e.texOffY||0,0,1).round(2),e.texRot=s.isNumber(t[w("textureRotation")])?parseFloat(t[w("textureRotation")]):0,e.texRot=s.limitMM(e.texRot,0,360),e.frames=s.limitMM(parseInt(t[w("textureFrameCount")])||0,0,100),e.frameT=100*s.limitMM(parseFloat(t[w("textureFrameDuration")])||0,0,10).round(1),e.emissive=s.isHexColor(t[w("emissive")])?t[w("emissive")]:null,e.texEncode=s.limitMM(parseInt(t[w("textureEncoding")])||0,0,n.encodingTypes.length-1);var a=t[w("aid")],r=parseInt(a);if(a!=r&&null!=a){var o=(a+"").includes("v")?r:void 0;e.src=(r||0)+(o?"/video":"/texture"),e.video=o,e.asset=r}else s.isNumber(r)&&(e.src=r+"/texture",e.asset=r)}else e.tFilter=t[w("textureSmoothing")]?u.THREE.LinearFilter:u.THREE.NearestFilter,e.spin=s.isNumber(t[w("spinSpeed")])?s.limitMM(t[w("spinSpeed")],-20,20):0,0!=e.spin&&(e.rAnim=(e.spin||0)*n.diskSpin,e.rAnimA=e.spinAxis?"x":"y"),e.spinAxis="x"!=t[w("spinAxis")]&&s.isNumber(t[w("spinAxis")])&&t[w("spinAxis")]?1:0,s.isNumber(t[w("alphaTest")])&&t[w("alphaTest")]&&(e.alphaTest=s.limitMM(parseFloat(t[w("alphaTest")]||0),0,1).round(2)),e.forceRender=!!t[w("alwaysRender")],e.animS=s.isNumber(t[w("animSpeed")])?parseFloat(t[w("animSpeed")]):0,e.startAnim=t[w("animStart")],e.startAnim&&s.isString(e.startAnim)&&""!=e.startAnim?(e.startAnim.length>32&&(e.startAnim=""),/[^\w\:\;\(\)\?\,\.\|\[\] \-\+*\$\@\=\^!{}]+/gim.test(e.startAnim)&&(e.startAnim="")):e.startAnim="",e.shadows=t[w("castShadows")]||!t[w("receiveShadows")]&&1==t[w("opacity")],e.shadowsR=!!t[w("receiveShadows")];return 1==i&&t[w("mimicSprite")]&&(e.mimicSprite=!0,e.color="#FFFFFF",e.mat=u.THREE.SpriteMaterial),e.opacity=s.isNumber(t[w("opacity")])?t[w("opacity")]:1,e.transparent=t[w("forceTransparency")]||1!=e.opacity,s.isNumber(t[w("side")])&&(e.side=s.limitMM(t[w("side")],0,2)),t[w("doubleSided")]&&(e.side=2),t[w("backSided")]&&(e.side=1),t[w("frontSided")]&&(e.side=0),3==i&&(e.thetaL=s.isNumber(t[w("thetaLength")])?parseFloat(t[w("thetaLength")]):360,e.thetaL=s.limitMM(parseFloat(e.thetaL)||.1,.1,360).round(2),e.sides=s.isNumber(t[w("sides")])?parseInt(t[w("sides")]):12,e.sides=s.limitMM(parseInt(e.sides)||12,3,64)),e},C=function(e,t,i,n){return e.fontSize=s.isNumber(t[w("fontSize")])?parseInt(t[w("fontSize")]):10,e.fontSize=s.limitMM(e.fontSize||10,10,120),e.fcolr=s.isHexColor(t[w("fontColor")])?t[w("fontColor")]:"#000",e.bcolr=s.isHexColor(t[w("backgroundColor")])?t[w("backgroundColor")]:"#fff",e.noBVis=!!t[w("backgroundInvisible")],e.tAlign=s.isString(t[w("textAlign")])?"left"==t[w("textAlign")]?0:"center"==t[w("textAlign")]?1:"right"==t[w("textAlign")]?2:0:s.isNumber(t[w("textAlign")])?s.limitMM(parseInt(t[w("textAlign")])||0,0,2):0,e.ocolr=s.isHexColor(t[w("outlineColor")])?t[w("outlineColor")]:"#626262",e.othick=s.isNumber(t[w("outlineThickness")])?parseInt(t[w("outlineThickness")]):0,e.othick=s.limitMM(e.othick||1,1,50),e.noSCF=!!t[w("noScaleFont")],e.canvas=s.createCanvasText(2*i,2*n,e.text||"Hello World",e.fontSize||10,e.fcolr,e.bcolr,e.noBVis,e.tAlign||0,e.ocolr,e.othick,!!e.noSCF),t[w("mimicSprite")]&&(e.mimicSprite=!0,e.color="#FFFFFF",e.mat=u.THREE.SpriteMaterial),e};return{context:{log:function(...i){t.log(i.map((t=>e.sanitize(t))))},changeGame:function(e){c||v("g_change",3)||(e=s.escapeStr(e+""))&&e.length&&window.playMap(e)},setTitle:function(e){c||s.isString(e)&&(e=e.replace(/[^\w\-\ ]+/gim,"")).length&&(document.title=e)},DEFAULT:{disablePlayerBehaviour:function(){h&&(h.noDefaultBehav=!0)},disable3D:function(){u&&u.disable()},disablePrediction:function(){h&&(h.noPred=!0)},disableServerSync:function(){h&&(h.noSync=!0)}},NETWORK:{broadcast:function(e,t){if(!n.serverScripting)return!1;if(!c||!d)return!1;if(v("c_broad",10))return!1;try{return(Array.isArray(t)||"object"==typeof t?JSON.stringify(t).length:(t+"").length)<=2e3&&(h.broadcast("sd",e,t),!0)}catch(e){return!1}},send:function(e,t,i){if(!n.serverScripting)return!1;if(!d)return!1;if(i=(i||"")+"",c&&v("n_send"+i,20))return!1;try{if((Array.isArray(t)||"object"==typeof t?JSON.stringify(t).length:(t+"").length)>2e3)return!1;if(c)return!!i&&(d.send(i+"","sd",e,t),!0);d.send("sd",e,t)}catch(e){return!1}}},URLS:{openDiscord:function(){},openTwitter:function(){},openYoutube:function(){},openOpensea:function(){}},NFT:{hasWallet:function(e){var t=h.players.list.find((t=>t.id==e));return!!t&&!!t.account&&!!t.account.metamask},ownedAssets:function(e,t,i){if(p&&d){var n=h.players.list.find((t=>t.id==e));return n&&n.account&&n.account.metamask?i&&"function"==typeof i?(t=s.isString(t)?t+"":void 0,void p.getAssetsOwned(n.account.metamask,t).then((e=>{e&&e.assets?i(!0,e.assets.map(k.NFT)):(b("No NFTs owned in this collection"),i(!1,[]))}))):void b("Invalid callback"):void b("Missing wallet or player")}}},CHAT:{send:function(e,t,i){c&&d&&(v("c_send",3)||(i=s.isHexColor(i)?i:"#fc03ec",t&&s.isString(t)&&t.length<=n.chatMaxLength&&t.replace(/\s/g,"").length>0&&(t=t.replace(/[^\w:\(\)\/? -]+/gim,"").replace(/\//gim,""),e?d.send(e+"","ch",-1,null,t,2,i):h.broadcast("ch",-1,null,t,2,i))))},broadcast:function(e,t){c&&d&&(v("c_broadcast",3)||(t=s.isHexColor(t)?t:"#fc03ec",e&&s.isString(e)&&e.length<=n.chatMaxLength&&e.replace(/\s/g,"").length>0&&(e=e.replace(/[^\w:\(\)\/? -]+/gim,"").replace(/\//gim,""),h.broadcast("ch",-1,null,e,2,t))))}},UTILS:{math:{E:Math.E,PI:Math.PI,PI2:2*Math.PI,sin:e=>Math.sin(e)||0,sinh:e=>Math.sinh(e)||0,cos:e=>Math.cos(e)||0,cosh:e=>Math.cosh(e)||0,tan:e=>Math.tan(e)||0,tanh:e=>Math.tanh(e)||0,asin:e=>Math.asin(e)||0,asinh:e=>Math.asinh(e)||0,acos:e=>Math.acos(e)||0,acosh:e=>Math.acosh(e)||0,atan:e=>Math.atan(e)||0,atan2:(e,t)=>Math.atan2(e,t)||0,atanh:e=>Math.atanh(e)||0,log:e=>Math.log(e)||0,exp:e=>Math.exp(e)||0,pow:(e,t)=>Math.pow(e,t)||0,abs:e=>Math.abs(e)||0,round:e=>Math.round(e)||0,floor:e=>Math.floor(e)||0,ceil:e=>Math.ceil(e)||0,min:(...e)=>Math.min(...e)||0,max:(...e)=>Math.max(...e)||0,hypot:(...e)=>Math.hypot(...e)||0,sqrt:e=>Math.sqrt(e)||0,trunc:e=>Math.trunc(e)||0,lerp:(e,t,i)=>s.lerp(e,t,i),toRad:e=>s.toRad(e)||0,toDeg:e=>s.toDeg(e)||0,calcPerc:(e,t)=>s.calcPercent(e,t)||0,roundToNearest:(e,t)=>s.isNumber(e)&&s.roundToNearest(e,t)||0,roundDecimal:(e,t)=>s.isNumber(e)?Math.round(e*Math.pow(10,t||0))/Math.pow(10,t||0):0},getDist2D:(e,t,i,n)=>s.getDistance(e,t,i,n)||0,getDist3D:(e,t,i,n,a,r)=>s.getD3D(e,t,i,n,a,r)||0,anglDst:(e,t)=>s.getAngleDst(e,t)||0,getDir2D:(e,t,i,n)=>s.getDir(e,t,i,n)||0,getDir3D:function(e,t,i,n,a,r){var o=s.getDrs({x:e,y:t,z:i},{x:n,y:a,z:r});return{get x(){return o[0]+Math.PI/2},get y(){return o[1]}}},randInt:(e,t)=>s.randInt(e,t)||0,randFloat:(e,t)=>s.randFloat(e,t)||0,hexFromHue:e=>s.hexFromHue(e)||"#ffffff",invertHex:e=>s.invertHex(e)||"#ffffff",RGBtoHEX:function(e,t,i){return e=s.isNumber(e)?e:0,t=s.isNumber(t)?t:0,i=s.isNumber(i)?i:0,s.rgbToHex(e,t,i)},HEXtoRGB:function(e){e=s.isHexColor(e)?e:"#ffffff";const t=s.hexToRGB(e);return{r:t[0]||0,g:t[1]||0,b:t[2]||0}},toLower:e=>s.toLower(e+"")||"",toUpper:e=>s.toUpper(e+"")||"",truncateTxt:(e,t,i,n)=>(n=Math.abs(s.isNumber(n)?n:0),s.truncateText(e+"",t,!!i,n)||""),replaceText:(e,t,i)=>s.replaceText(e+"",t+"",i+"")||"",textContains:(e,t)=>s.textContains(e+"",t+""),copyToClipboard:e=>s.copyToClipboard(e+"")},RAYCAST:{from:function(){},fromPlayer:function(){}},TIME:{now:function(){return Date.now()},fixedDelta:function(){return h.fixedDelta||0},getReadable:function(e){return s.getReadableTime(e)||""},freeze:function(){c&&!h.oldGameTimer&&"skip"!=h.gameTimer&&h.endTimer<=0&&"inf"!=h.endTimer&&(h.oldGameTimer=h.gameTimer,h.gameTimer=0)},unfreeze:function(){c&&h.oldGameTimer&&"skip"!=h.gameTimer&&h.endTimer<=0&&"inf"!=h.endTimer&&(h.gameTimer=h.oldGameTimer,h.oldGameTimer=0)}},INPUTS:{keyDown:function(e){return c?void 0:h&&h.controls&&s.isNumber(e)?!!h.controls.keys[e]:void 0},mousePos:function(){return c?void 0:u?u.tmpMouse:void 0},mousePosOverlay:function(){if(!c&&l){var e=u.tmpMouse.x/window.innerWidth,t=u.tmpMouse.y/window.innerHeight;return{x:l.canvas.width/l.scale*e,y:l.canvas.height/l.scale*t}}},mouseMovement:function(){return c?void 0:u?u.tmpMouse2:void 0},freeMouse:function(){h&&h.controls&&(h.controls.forceFreeCam=!0,document.exitPointerLock())},unlockMouse:function(){h&&h.controls&&(h.controls.tmpUnlock=!0,h.controls.enabled=!1,h.controls.resetKeys(),document.exitPointerLock())},lockMouse:function(){h&&h.controls&&(h.controls.tmpUnlock&&=!1,h.controls.toggle(!0))},disableDefault:function(){!c&&h&&(h.dontSendInputs=!0)},enableDefault:function(){!c&&h&&(h.dontSendInputs=!1)}},UI:{getSize:function(){return c?void 0:{width:window.innerWidth,height:window.innerHeight}},hideCrosshair:function(){l&&(l.disableCrosshair=!0)},hideDefault:function(){!c&&h&&h.ui&&(h.ui.hidden=!0,gameUIHider.style.display="none",fullMenHider.style.display="none")},addImage:function(e,t,i,n,r){if(h&&h.ui){s.isString(r)&&r&&r.length&&"game"!=r.toLowerCase()||(r="customGUIHolder"),"menu"==r.toLowerCase()&&(r="MENUDIV");let o=document.getElementById(r);if(o&&a.indexOf(r)<=-1){if(t+="",!document.getElementById(t)&&a.indexOf(t)<=-1&&s.cssCheck(n||"")&&((e=((e+="")||"").replace(/[^\d]/g,""))&&e.length)){let a=document.createElement("img");return a.id=t,a.setAttribute("onerror",'this.onerror=null;this.src="./img/noimg.png";'),a.src=s.userAssetsUrl("/"+e+"/texture.png"),a.style.display=i?"":"none",a.style.pointerEvents="all",a.style.cssText+=n||"",o.appendChild(a),a.addEventListener("click",(function(e){e.stopPropagation(),e.cancelBubble=!0,e&&e.target&&h&&h.mainScript&&h.mainScript.onDIVClicked&&h.mainScript.onDIVClicked(e.target.id)})),t}}}},addDIV:function(e,t,i,n){if(h&&h.ui){s.isString(n)&&n&&n.length&&"game"!=n.toLowerCase()||(n="customGUIHolder"),"menu"==n.toLowerCase()&&(n="MENUDIV");let r=document.getElementById(n);if(r&&a.indexOf(n)<=-1){if(e+="",!document.getElementById(e)&&a.indexOf(e)<=-1&&s.cssCheck(i||"")){let n=document.createElement("div");return n.id=e,n.style.display=t?"":"none",n.style.pointerEvents="all",n.style.cssText+=i||"",r.appendChild(n),n.addEventListener("click",(function(e){e.stopPropagation(),e.cancelBubble=!0,e&&e.target&&h&&h.mainScript&&h.mainScript.onDIVClicked&&h.mainScript.onDIVClicked(e.target.id)})),e}}}},moveDIV:function(e,t,i){if(h&&h.ui&&s){if(s.isString(t)&&t&&t.length&&"game"!=t.toLowerCase()||(t="customGUIHolder"),"menu"==t.toLowerCase()&&(t="MENUDIV"),document.getElementById(t)&&a.indexOf(t)<=-1&&(e+="",a.indexOf(e)<=-1)){let n=document.getElementById(e);if(n)return s.isString(i)&&i&&i.length||(i=null),a.indexOf(i)<=-1?(i&&(n.id=i),s.moveElement(n,t),i||n.id):void 0}}},removeDIV:function(e){if(!c&&h&&h.ui){e+="";let t=document.getElementById(e);t&&a.indexOf(e)<=-1&&t.remove()}},getProp:function(e,t){if(!c&&h&&h.ui){e+="";let i=document.getElementById(e);return i?a.indexOf(e)>-1?void 0:s.isString(t)&&s.cssCheck(t)?i.style[t]||"":void 0:void 0}},updateDIV:function(e,t,i){if(!c&&h&&h.ui){e+="";let n=document.getElementById(e);n&&a.indexOf(e)<=-1&&s.isString(t)&&s.cssCheck(t)&&(s.isString(i)||(i=""),s.cssCheck(i)||(i=""),n.style[t]=i)}},updateDIVText:function(e,t){if(h&&h.ui){e+="";let n=document.getElementById(e);if(n&&a.indexOf(e)<=-1){s.isString(t)||(t="");for(var i=0;i<o.length;i++)if(t.toLowerCase().includes(o[i]))return;n.textContent=t}}},getDIVText:function(e){if(h&&h.ui&&(e+="",a.indexOf(e)<=-1)&&r.indexOf(e)<=-1){let t=document.getElementById(e);return t?t.textContent||"":void 0}}},SETTINGS:{set:function(e,t){h&&h.settings&&s.isString(e)&&(!h.settings.list[e]||"url"==h.settings.list[e].type||"text"==h.settings.list[e].type||h.settings.list[e].dev||h.settings.list[e].kpd||h.settings.list[e].verified||h.settings.list[e].noMod||h.settings.set(e,t,!0,!0,!0))},get:function(e){return h&&h.settings&&s.isString(e)?!h.settings.list[e]||"url"==h.settings.list[e].type||"text"==h.settings.list[e].type||h.settings.list[e].dev||h.settings.list[e].kpd||h.settings.list[e].verified||h.settings.list[e].noMod?void 0:h.settings.list[e].val+"":void 0},list:function(){if(h&&h.settings){var e=[];for(var t in h.settings.list)!h.settings.list[t]||"url"==h.settings.list[t].type||"text"==h.settings.list[t].type||h.settings.list[t].dev||h.settings.list[t].kpd||h.settings.list[t].verified||h.settings.list[t].noMod||e.push(t);return e}}},OVERLAY:{getSize:function(){return l?{width:l.canvas.width/l.scale,height:l.canvas.height/l.scale}:void 0},offset:function(e,t){l.ctx.translate(parseFloat(e)||0,parseFloat(t)||0)},scale:function(e){e=parseFloat(e)||0,l.ctx.scale(e,e)},clear:function(){if(!l)return;let e=l.canvas.width/l.scale,t=l.canvas.height/l.scale;l.ctx.clearRect(0,0,e,t)},measureText:function(e,t,i){t=s.isString(t)?t:"",e=s.isNumber(e)?e:1,i=s.isString(i)?i:"GameFont",l.ctx.save(1),l.ctx.font=(e||10)+"px "+i;var n=l.ctx.measureText(t).width;return l.ctx.restore(-1),s.isNumber(n)?n:0},drawCircle:function(e,t,i,n,a,r,o,c){l&&(o=s.isNumber(o)?o:1,r=s.isHexColor(r)?r:"#FFF",e=s.isNumber(e)?e:0,t=s.isNumber(t)?t:0,i=s.isNumber(i)?i:1,n=s.isNumber(n)?n:1,a=s.isNumber(a)?a:0,l.ctx.save(1),l.ctx.globalAlpha=o,l.ctx.fillStyle=r,l.ctx.beginPath(),l.ctx.translate(e,t),a&&l.ctx.rotate((a||0)*Math.PI/180),l.ctx.ellipse(c?-i/2:0,c?-n/2:0,i,n,0,0,2*Math.PI),l.ctx.fill(),l.ctx.restore(-1))},drawRect:function(e,t,i,n,a,r,o,c){l&&(o=s.isNumber(o)?o:1,r=s.isHexColor(r)?r:"#FFF",e=s.isNumber(e)?e:0,t=s.isNumber(t)?t:0,i=s.isNumber(i)?i:1,n=s.isNumber(n)?n:1,a=s.isNumber(a)?a:0,l.ctx.save(1),l.ctx.globalAlpha=o,l.ctx.fillStyle=r,l.ctx.beginPath(),l.ctx.translate(e,t),a&&l.ctx.rotate((a||0)*Math.PI/180),l.ctx.rect(c?-i/2:0,c?-n/2:0,i,n),l.ctx.fill(),l.ctx.restore(-1))},drawLine:function(e,t,i,n,a,r,o){l&&(o=s.isNumber(o)?o:1,r=s.isHexColor(r)?r:"#FFF",e=s.isNumber(e)?e:0,t=s.isNumber(t)?t:0,i=s.isNumber(i)?i:0,n=s.isNumber(n)?n:0,a=s.isNumber(a)?a:0,l.ctx.save(1),l.ctx.globalAlpha=o,l.ctx.fillStyle=r,l.ctx.strokeStyle=r,l.ctx.lineWidth=a,l.ctx.beginPath(),l.ctx.moveTo(e,t),l.ctx.lineTo(i,n),l.ctx.stroke(),l.ctx.restore(-1))},drawText:function(e,t,i,n,a,r,o,c,d){l&&(e=s.isString(e)?e:"",c=s.isNumber(c)?c:1,o=s.isHexColor(o)?o:"#FFF",t=s.isNumber(t)?t:0,i=s.isNumber(i)?i:0,n=s.isNumber(n)?n:0,a=s.isNumber(a)?a:1,r=s.isString(r)?r:null,d=s.isString(d)?d:"GameFont",l.ctx.save(1),l.ctx.globalAlpha=c,l.ctx.fillStyle=o,l.ctx.beginPath(),l.ctx.translate(t,i),n&&l.ctx.rotate((n||0)*Math.PI/180),l.ctx.font=(a||10)+"px "+d,l.ctx.textBaseline="middle",r&&(l.ctx.textAlign=r),l.ctx.fillStyle=o,l.ctx.fillText(e,0,0),l.ctx.restore(-1))},drawImage:function(e,t,i,n,a,r,o){if(l&&s){e=s.isNumber(e)?e:0,o=s.isNumber(o)?o:1,t=s.isNumber(t)?t:0,i=s.isNumber(i)?i:0,n=s.isNumber(n)?n:1,a=s.isNumber(a)?a:1,r=s.isNumber(r)?r:0,l.ctx.save(1),l.ctx.globalAlpha=o;let c=l.HELPER.loadImg(s.userAssetsUrl(e+"/texture.png"));c.isReady&&(l.ctx.translate(t,i),r&&l.ctx.rotate((r||0)*Math.PI/180),l.ctx.drawImage(c,-n/2,-a/2,n,a)),l.ctx.restore(-1)}},beginPath:function(){l&&s&&l.ctx.beginPath()},closePath:function(){l&&s&&l.ctx.closePath()},save:function(){l&&s&&l.ctx.save(1)},restore:function(){l&&s&&l.ctx.restore(-1)},translate:function(e,t){l&&s&&(e=s.isNumber(e)?e:0,t=s.isNumber(t)?t:0,l.ctx.translate(e,t))},transform:function(e,t,i,n,a,r){l&&s&&(e=s.isNumber(e)?e:0,t=s.isNumber(t)?t:0,i=s.isNumber(i)?i:0,n=s.isNumber(n)?n:0,a=s.isNumber(a)?a:0,r=s.isNumber(r)?r:0,l.ctx.transform(e,t,i,n,a,r))},setTransform:function(e,t,i,n,a,r){l&&s&&(e=s.isNumber(e)?e:0,t=s.isNumber(t)?t:0,i=s.isNumber(i)?i:0,n=s.isNumber(n)?n:0,a=s.isNumber(a)?a:0,r=s.isNumber(r)?r:0,l.ctx.setTransform(e,t,i,n,a,r))},moveTo:function(e,t){l&&s&&(e=s.isNumber(e)?e:0,t=s.isNumber(t)?t:0,l.ctx.moveTo(e,t))},lineTo:function(e,t){l&&s&&(e=s.isNumber(e)?e:0,t=s.isNumber(t)?t:0,l.ctx.lineTo(e,t))},fill:function(){l&&s&&l.ctx.fill()},fillStyle:function(e){l&&s&&(e=s.isHexColor(e)?e:"#FFF",l.ctx.fillStyle=e)},stroke:function(){l&&s&&l.ctx.stroke()},strokeText:function(e,t,i,n){l&&s&&(e=s.isString(e)?e:"",t=s.isNumber(t)?t:0,i=s.isNumber(i)?i:0,n=s.isNumber(n)?n:void 0,l.ctx.strokeText(e,t,i,n))},strokeRect:function(e,t,i,n){l&&s&&(e=s.isNumber(e)?e:0,t=s.isNumber(t)?t:0,i=s.isNumber(i)?i:0,n=s.isNumber(n)?n:0,l.ctx.strokeRect(e,t,i,n))},strokeStyle:function(e){l&&s&&(e=s.isHexColor(e)?e:"#FFF",l.ctx.strokeStyle=e)},lineWidth:function(e){l&&s&&(e=s.isNumber(e)?e:0,l.ctx.lineWidth=e)},lineDashOffset:function(e){l&&s&&(e=s.isNumber(e)?e:0,l.ctx.lineWidth=e)},lineJoin:function(e){l&&s&&["bevel","round","miter"].indexOf(e)>-1&&(l.ctx.lineJoin=e)},ellipse:function(e,t,i,n,a,r,o,c){l&&s&&(e=s.isNumber(e)?e:0,t=s.isNumber(t)?t:0,i=Math.abs(s.isNumber(i)?i:0),n=Math.abs(s.isNumber(n)?n:0),a=s.isNumber(a)?a:0,r=s.isNumber(r)?r:0,o=s.isNumber(o)?o:0,c=!!c,l.ctx.ellipse(e,t,i,n,a,r,o,c))},arc:function(e,t,i,n,a,r){l&&s&&(e=s.isNumber(e)?e:0,t=s.isNumber(t)?t:0,i=Math.abs(s.isNumber(i)?i:0),n=s.isNumber(n)?n:0,a=s.isNumber(a)?a:0,r=!!r,l.ctx.arc(e,t,i,n,a,r))},arcTo:function(e,t,i,n,a){l&&s&&(e=s.isNumber(e)?e:0,t=s.isNumber(t)?t:0,i=s.isNumber(i)?i:0,n=s.isNumber(n)?n:0,a=Math.abs(s.isNumber(a)?a:0),l.ctx.arcTo(e,t,i,n,a))},bezierCurveTo:function(e,t,i,n,a,r){l&&s&&(e=s.isNumber(e)?e:0,t=s.isNumber(t)?t:0,i=s.isNumber(i)?i:0,n=s.isNumber(n)?n:0,a=s.isNumber(a)?a:0,r=s.isNumber(r)?r:0,l.ctx.bezierCurveTo(e,t,i,n,a,r))},quadraticCurveTo:function(e,t,i,n){l&&s&&(e=s.isNumber(e)?e:0,t=s.isNumber(t)?t:0,i=s.isNumber(i)?i:0,n=s.isNumber(n)?n:0,l.ctx.quadraticCurveTo(e,t,i,n))},globalAlpha:function(e){l&&s&&(e=s.isNumber(e)?e:0,l.ctx.globalAlpha=e)}},STORAGE:{set:function(e,t,i,n){if(c&&h)return i="global"==i?i:"private",m("str_set_"+e)?void b("storage.set already in progress for "+e):y("str_set_"+e,1)?(b("Calling storage.set too much"),void g("str_set_"+e)):void h.storageUpdt(e,t,0,i,(function(t,i){if(g("str_set_"+e),i&&b(i),n&&"function"==typeof n)if(t&&t.length&&!i){for(var s={},a=0;a<t.length;a++)s[w(t[a].mk+"")]=t[a].mv+"";n(s,!0,e)}else n({},!1,e)}))},update:function(e,t,i,n){if(c&&h)return i="global"==i?i:"private",m("str_upd_"+e)?void b("storage.update already in progress for "+e):y("str_upd_"+e,1)?(b("Calling storage.update too much"),void g("str_upd_"+e)):void h.storageUpdt(e,t,3,i,(function(t,i){if(g("str_upd_"+e),i&&b(i),n&&"function"==typeof n)if(t&&t.length&&!i){for(var s={},a=0;a<t.length;a++)s[w(t[a].mk+"")]=t[a].mv+"";n(s,!0,e)}else n({},!1,e)}))},transact:function(e,t,i,n){return b("Transactions disabled for now")},load:function(e,t,i){if(c&&h)return i&&"function"==typeof i?(""==t?t=null:t+="",m("str_lod_"+e)?void b("storage.load already in progress for "+e):void h.getStoragePlayer(e,t,(function(t,n){if(g("str_lod_"+e),n)b(n);else if(t&&t.length){for(var s={},a=0;a<t.length;a++)s[w(t[a].mk+"")]=t[a].kv+"";i(s,!0,e)}else b("No data")}))):void b("Missing callback")}},COOKIES:{save:function(e,t){c||s&&h&&h.customMapData&&(e=s.isString(e)?e:"").length&&(s.isString(t)||s.isNumber(t)||typeof t==Boolean||Array.isArray(t))&&(e="krkcst_"+h.customMapData.id+"_"+e,s.saveVal(e,t))},remove:function(e){c||s&&h&&h.customMapData&&(e=s.isString(e)?e:"").length&&(e="krkcst_"+h.customMapData.id+"_"+e,s.deleteVal(e))},load:function(e){return c?"":s&&h&&h.customMapData&&(e=s.isString(e)?e:"").length?(e="krkcst_"+h.customMapData.id+"_"+e,s.getSavedVal(e)+""):""},has:function(e){return!(c||!s||!h||!h.customMapData||(e=s.isString(e)?e:"",!e.length)||(e="krkcst_"+h.customMapData.id+"_"+e,!s.hasSavedVal(e)))}},SOUND:{stop:function(e){f&&(e=s.isNumber(e)?e:0,f.stop(e,!0))},play2D:function(e,t,i,n){if(f&&!v("p_snd2D",10)){e=parseInt(e),e=s.isNumber(e)?e:0,t=s.isNumber(t)?t:1,i=s.isNumber(i)?i:0,n=!!n;var a=f.play(e,t,n,i,!0),r={sound:a[0],id:a[1],aid:e,vol:t,rate:i,loop:n};return k.sound(r)}},play3D:function(e,t,i,n,a,r,o){if(f&&!v("p_snd3D",10)){e=parseInt(e),e=s.isNumber(e)?e:0,i=s.isNumber(i)?i:0,n=s.isNumber(n)?n:0,a=s.isNumber(a)?a:0,t=s.isNumber(t)?t:1,r=s.isNumber(r)?r:0;var l=f[(o=!!o)?"play3DL":"play3D"](e,i,n,a,t,r,25,1,!0,0),c={sound:l[0],id:l[1],aid:e,vol:t,x:i,y:n,z:a,rate:r,loop:o};return k.sound(c)}}},ANIM:{playClip:function(){},stopClip:function(){}},CAMERA:{get envZone(){return u?null==u.lastEnvId?-1:u.lastEnvId:-1},detach:function(){u&&(h.detachedCam=!0)},attach:function(){u&&(h.detachedCam=!1)},move:function(e,t,i){h&&h.controls&&(e=s.isNumber(e)?e:0,t=s.isNumber(t)?t:0,i=s.isNumber(i)?i:0,h.controls.moveCam(e,t,i))},rotate:function(e,t,i){h&&h.controls&&(e=s.isNumber(e)?e:0,t=s.isNumber(t)?t:0,i=s.isNumber(i)?i:0,h.controls.rotateCam(e,t,i))},lookAt:function(e,t,i){if(u&&h&&h.controls){e=s.isNumber(e)?e:0,t=s.isNumber(t)?t:0,i=s.isNumber(i)?i:0;var n=h.controls.object.position.x-e,a=h.controls.object.position.y-t,r=h.controls.object.position.z-i,o=Math.sqrt(n*n+r*r),l=-Math.atan2(a,o),c=-Math.atan2(-n,r);h.controls.object.rotation.y=c||0,h.controls.pchObjc.rotation.x=l||0,u.camera.rotation.set(0,0,0),u.camera.position.set(0,0,0),u.camera.updateProjectionMatrix(),u.updateFrustum()}},shake:function(e){u&&(e=s.isNumber(e)?e:0,u.shake(e))},fov:function(e){u&&(e=s.isNumber(e)?e:0,u.camera.fov=e,u.camera.updateProjectionMatrix())},getObj:function(){return{get id(){return u.camera.id}}},position:{get x(){return h&&h.controls?h.controls.object.position.x:0},set x(e){h&&h.controls&&(h.controls.object.position.x=parseFloat(e)||0)},get y(){return h&&h.controls?h.controls.object.position.y:0},set y(e){h&&h.controls&&(h.controls.object.position.y=parseFloat(e)||0)},get z(){return h&&h.controls?h.controls.object.position.z:0},set z(e){h&&h.controls&&(h.controls.object.position.z=parseFloat(e)||0)}},rotation:{get x(){return h&&h.controls?h.controls.object.rotation.x:0},set x(e){h&&h.controls&&(h.controls.object.rotation.x=parseFloat(e)||0)},get y(){return h&&h.controls?h.controls.object.rotation.y:0},set y(e){h&&h.controls&&(h.controls.object.rotation.y=parseFloat(e)||0)},get z(){return h&&h.controls?h.controls.object.rotation.z:0},set z(e){h&&h.controls&&(h.controls.object.rotation.z=parseFloat(e)||0)}}},SCENE:{posToScreen:function(e,t,i){if(u){e=s.isNumber(e)?e:0,t=s.isNumber(t)?t:0,i=s.isNumber(i)?i:0;var n=u.getTmpVector(e,t,i),a=u.frustum.containPoint(n);return n.project(u.camera),{get onScreen(){return a},get x(){return l.canvas.width/l.scale*((n.x+1)/2)},get y(){return l.canvas.height/l.scale*(1-(n.y+1)/2)}}}},clear:function(){if(u)for(;u.scene.children.length>0;)u.scene.remove(u.scene.children[0])},setFog:function(e,t){u&&(e=s.isHexColor(e)?e:u.scene.fog.color.getHex(),t=s.isNumber(t)?t:u.scene.far,t=s.limitMM(t,10,15e3),u.scene.fog=new u.THREE.Fog(e,1,t))},setAmbientLight:function(e,t){u&&u.ambientLight&&(e=s.isHexColor(e)?e:u.ambientLight.color.getHex(),t=s.isNumber(t)?parseFloat(t):u.ambientLight.intensity,t=s.limitMM(t,.1,3).round(2),u.ambientLight.color=new u.THREE.Color(e),u.ambientLight.intensity=t)},setSkyLight:function(e,t,i,a,r){u&&(e=s.isHexColor(e)?e:u.skyLight.color.getHex(),t=s.isNumber(t)?parseFloat(t):u.skyLight.intensity,t=s.limitMM(t,.1,3).round(2),i=s.isNumber(i)?i:n.sunAngleX,i=Math.PI*(s.limitMM(i,0,360)/-180),a=s.isNumber(a)?a:n.sunAngleY,a=Math.PI*(s.limitMM(a,0,360)/-180),r=s.isNumber(r)?r:n.lightDistance,r=s.limitMM(r,10,15e3),u.skyLight.position.x=r*Math.cos(i),u.skyLight.position.y=r*Math.sin(i)*Math.sin(a),u.skyLight.position.z=r*Math.sin(i)*Math.cos(a),u.skyLight.color=new u.THREE.Color(e),u.skyLight.intensity=t)},setSkyColor:function(e){u&&(e=s.isHexColor(e)?e:"#dce8ed",u.renderer.setClearColor(e))},setSkyDome:function(e,t,i,n){if(u){n=n||{},s.isObject(n)||(n={});var a=parseInt(n[w("texture")]),r=parseInt(n[w("emissiveTexture")]),o={skyDomeCol0:s.isHexColor(e)?e:"#fff",skyDomeCol1:s.isHexColor(t)?t:"#fff",skyDomeCol2:s.isHexColor(i)?i:"#fff",skyDomeTex:!!s.isNumber(a),skyDomeTexA:s.isNumber(a)?a:null,skyDomeEmisTex:s.isNumber(r)?r:null,skyDomeEmis:s.isHexColor(n[w("emissive")])?n[w("emissive")]:null,skyDomeMovT:s.isNumber(n[w("textureMoveSpeed")])?n[w("textureMoveSpeed")]:void 0,skyDomeMovD:"x"==n[w("textureMoveAxis")]?0:"y"==n[w("textureMoveAxis")]?1:s.limitMM(parseInt(n[w("textureMoveAxis")])||0,0,1)};u.clearSkyDome(),u.skyDomeInit(o)}},removeSkyDome:function(){u&&u.clearSkyDome()},addCustom:function(e,t,i,n,a,r,o,l,c,d){if(u&&(t=s.isHexColor(t)?t:"#FFF",n=s.isNumber(n)?n:0,a=s.isNumber(a)?a:0,r=s.isNumber(r)?r:0,o=s.isNumber(o)?o:1,l=s.isNumber(l)?l:1,c=s.isNumber(c)?c:1,Array.isArray(i)&&i.length)){i=i.map(Number).filter((e=>s.isNumber(e))),d=d||{},s.isObject(d)||(d={}),d[w("aid")]=e;var h=T({src:"default",colr:t||"#fff",scale:1,noEmisTex:!0,vertexColors:!0},d),p=new u.THREE.BufferGeometry;p.setAttribute("position",new u.THREE.BufferAttribute(new Float32Array(i),3)),u.GEOS.colorize(p,h.colr),p=u.THREE.BufferGeometryUtils.mergeVertices(p);var f=new u.THREE.Mesh(p);return u.moveMesh(f,n,a,r),f.scale.set(o,l,c),u.add(f,h),k.obj3D(f,h)}},addCube:function(e,t,i,n,a,r,o,l,c){if(u){t=s.isHexColor(t)?t:"#FFF",i=s.isNumber(i)?i:0,n=s.isNumber(n)?n:0,a=s.isNumber(a)?a:0,r=s.isNumber(r)?r:1,o=s.isNumber(o)?o:1,l=s.isNumber(l)?l:1,c=c||{},s.isObject(c)||(c={}),c[w("aid")]=e;var d=T({src:"default",colr:t||"#fff",scale:1,noEmisTex:!0,vertexColors:!0},c),h=new u.THREE.Mesh(u.GEOS.generateCube(null,r,o,l,d));return u.moveMesh(h,i,n,a),h.scale.set(r,o,l),u.add(h,d),k.obj3D(h,d)}},addPlane:function(e,t,i,n,a,r,o,l){if(u){t=s.isHexColor(t)?t:"#FFF",i=s.isNumber(i)?i:0,n=s.isNumber(n)?n:0,a=s.isNumber(a)?a:0,r=s.isNumber(r)?r:1,o=s.isNumber(o)?o:1,l=l||{},s.isObject(l)||(l={}),l[w("aid")]=e;var c=T({src:"default",colr:t||"#fff",noEmisTex:!0,vertexColors:!0,scale:1,side:2},l,1),d=new u.THREE.Mesh(u.GEOS.generatePlane(o,r,c,i,n,a));return u.moveMesh(d,i,n,a),d.scale.set(r,o,1),u.add(d,c),k.obj3D(d,c)}},addSphere:function(e,t,i,n,a,r,o,l,c){if(u){t=s.isHexColor(t)?t:"#FFF",i=s.isNumber(i)?i:0,n=s.isNumber(n)?n:0,a=s.isNumber(a)?a:0,r=s.isNumber(r)?r:1,o=s.isNumber(o)?o:1,l=s.isNumber(l)?l:1,c=c||{},s.isObject(c)||(c={}),c[w("aid")]=e;var d=T({src:"default",colr:t||"#fff",noEmisTex:!0,vertexColors:!0,scale:1,side:2},c),h=new u.THREE.Mesh(u.GEOS.generateSphere(r,o,l,d));return u.moveMesh(h,i,n+o/2,a),h.scale.set(r,o,l),u.add(h,d),k.obj3D(h,d)}},addAsset:function(e,t,i,n,a,r,o,l){if(u){l&&"function"==typeof l||(l=void 0),e+="",r=s.isHexColor(r)?r:"#FFF",t=s.isNumber(t)?t:0,i=s.isNumber(i)?i:0,n=s.isNumber(n)?n:0,a=s.isNumber(a)?a:1,a=s.limitMM(a,.01,100).round(2);var c=(e||"").includes("e"),d=(e||"").includes("n"),h=(e||"").includes("s"),p=(e||"").includes("a"),f=(e||"").includes("m"),m=(e||"").includes("r"),g=(e||"").includes("l"),v=(e||"").includes("p"),y=(e||"").includes("b"),b=(e||"").includes("g"),w=(e||"").includes("q"),x=(e||"").includes("f");b||w||(i+=a),i+=s.randFloat(-.01,.01);var S=(e||"").replace(/[^\d]/g,"");o=o||{},s.isObject(o)||(o={});var M=T({isMdl:!0,fileExt:w?"glb":b?"gltf":x?"fbx":null,src:S+"/model",emissive:c?"#ffffff":null,vertexColors:!0,color:r,normal:d,spec:h,alphaTest:p?.02:0,asset:S,metalness:f?1:0,roughness:m?1:0,lightM:g?1:0,uv2:!!g||void 0,displacement:v?1:0,bump:y?1:0},o,2),_=u[b||w||x?"loadAnimMesh":"loadMesh"](M,t,i,n,0,a,u.scene,!1,l);return k.obj3D(_,M)}},addSprite:function(e,t,i,n,a,r,o,l,c){if(u){t=s.isHexColor(t)?t:"#FFF",i=s.isNumber(i)?i:0,n=s.isNumber(n)?n:0,a=s.isNumber(a)?a:0,r=s.isNumber(r)?r:1,o=s.isNumber(o)?o:1,l=s.isNumber(l)?l:1,c=c||{},s.isObject(c)||(c={}),c[w("aid")]=e;var d=T({src:"default",colr:t||"#fff",noEmisTex:!0,vertexColors:!0,scale:1,side:2,mat:u.THREE.SpriteMaterial},c),h=new u.THREE.Sprite;return u.moveMesh(h,i,n,a),h.scale.set(r,l,1),u.add(h,d),k.obj3D(h,d)}},addPointLight:function(e,t,i,n,a,r,o,l){if(u&&u.lighting>=2){e=s.isHexColor(e)?e:"#f2f8fc",t=s.isNumber(t)?t:0,i=s.isNumber(i)?i:0,n=s.isNumber(n)?n:0,a=s.isNumber(a)?a:0,a=s.limitMM(a,0,1e3),r=s.isNumber(r)?r:1,r=s.limitMM(r,.1,2),o=s.isNumber(o)?o:1,o=s.limitMM(o,0,15);var c=new u.THREE.PointLight(e,o,a,r);return c.castShadow=!!l,c.position.set(t,i,n),c.traverse((function(e){e.layers.enable(1)})),u.add(c),k.obj3D(c)}},addDirLight:function(e,t,i,n,a,r,o,l,c){if(u&&3==u.lighting){e=s.isHexColor(e)?e:"#f2f8fc",t=s.isNumber(t)?t:0,i=s.isNumber(i)?i:0,n=s.isNumber(n)?n:0,a=s.isNumber(a)?a:0,r=s.isNumber(r)?r:0,o=s.isNumber(o)?o:0,l=s.isNumber(l)?l:1,l=s.limitMM(l,0,15);var d=new u.THREE.DirectionalLight(e,l);return d.castShadow=!!c,d.position.set(t,i,n),d.target.position.set(a,r,o),d.traverse((function(e){e.layers.enable(1)})),u.add(d),u.add(d.target),k.obj3D(d)}},addSpotLight:function(e,t,i,n,a,r,o,l,c,d,h,p,f){if(u){e=s.isHexColor(e)?e:"#f2f8fc",t=s.isNumber(t)?t:0,i=s.isNumber(i)?i:0,n=s.isNumber(n)?n:0,a=s.isNumber(a)?a:0,r=s.isNumber(r)?r:0,o=s.isNumber(o)?o:0,l=s.isNumber(l)?l:0,l=s.limitMM(l,0,1e3),c=s.isNumber(c)?c:1,c=s.limitMM(c,.1,2),d=s.isNumber(d)?d:1,d=s.limitMM(d,0,15),h=s.isNumber(h)?h:45,h=s.limitMM(h,1,90),h=s.toRad(h),p=s.isNumber(p)?p:0,p=s.limitMM(p,0,1);var m=new u.THREE.SpotLight(e,d,l,h,p,c);return m.castShadow=!!f,m.position.set(t,i,n),m.target.position.set(a,r,o),m.traverse((function(e){e.layers.enable(1)})),u.add(m),u.add(m.target),k.obj3D(m)}},addRectLight:function(e,t,i,n,a,r,o){if(u&&3==u.lighting){e=s.isHexColor(e)?e:"#f2f8fc",t=s.isNumber(t)?t:0,i=s.isNumber(i)?i:0,n=s.isNumber(n)?n:0,a=s.isNumber(a)?a:1,r=s.isNumber(r)?r:1,o=s.isNumber(o)?o:1,o=s.limitMM(o,0,15),u.hasInitRectArea||(u.hasInitRectArea=!0,u.THREE.RectAreaLightUniformsLib.init());var l=new u.THREE.RectAreaLight(e,o,a,r);return u.moveMesh(l,t,i,n),l.traverse((function(e){e.layers.enable(1)})),u.add(l),k.obj3D(l)}},addSign:function(e,t,i,n,a,r,o){if(u){r=s.isString(r)?r:"Hello World",e=s.isNumber(e)?e:0,t=s.isNumber(t)?t:0,i=s.isNumber(i)?i:0,n=s.isNumber(n)?n:1,a=s.isNumber(a)?a:1,o=o||{},s.isObject(o)||(o={});var l=C({text:r,transparent:!0,vertexColors:!0,renderVisD:400,noGroup:!0,side:u.THREE.DoubleSide,noShader:!0,alphaTest:.02,depthWrite:!0},o,n,a),c=l.mimicSprite?new u.THREE.Sprite:new u.THREE.Mesh(u.GEOS.generatePlane(a,n,l,e,t,i));return u.moveMesh(c,e,t,i),c.scale.set(n,a,1),u.add(c,l),k.obj3D(c,l)}},addLightCone:function(e,t,i,n,a,r,o,l){if(u){e=s.isHexColor(e)?e:"#FFF",t=s.isNumber(t)?t:0,i=s.isNumber(i)?i:0,n=s.isNumber(n)?n:0,a=s.isNumber(a)?a:1,r=s.isNumber(r)?r:1,o=s.isNumber(o)?o:1,l=l||{},s.isObject(l)||(l={}),delete l[w("aid")];var c=T({src:"lightcone_"+(null==l[w("fullCone")]?0:1),colr:e||"#fff",noEmisTex:!0,depthWrite:!1,vertexColors:!0,scale:1,shadows:!1,side:2,blending:u.THREE.AdditiveBlending,mat:u.THREE.MeshBasicMaterial},l,3),d=new u.THREE.Mesh(u.GEOS.generateCone(o,l));return d.scale.set(a/2,o,r/2),u.moveMesh(d,t,i,n),u.add(d,c),k.obj3D(d,c)}},addLightBar:function(e,t,i,n,a,r,o){if(u){e=s.isHexColor(e)?e:"#FFF",t=s.isNumber(t)?t:0,i=s.isNumber(i)?i:0,n=s.isNumber(n)?n:0,a=s.isNumber(a)?a:1,r=s.isNumber(r)?r:1,o=o||{},s.isObject(o)||(o={}),delete o[w("aid")],o[w("forceTransparency")]=!0;var l=T({src:"lightcone_1",colr:e||"#fff",noEmisTex:!0,vertexColors:!0,scale:1,side:2},o,1),c=l.mimicSprite?new u.THREE.Sprite:new u.THREE.Mesh(u.GEOS.generatePlane(r,a,l,t,i,n));return u.moveMesh(c,t,i,n),c.scale.set(a,r,1),u.add(c,l),k.obj3D(c,l)}},movObj:function(e,t,i,n){u&&e&&e[w("position")]&&(e[w("position")].x+=parseFloat(t)||0,e[w("position")].y+=parseFloat(i)||0,e[w("position")].z+=parseFloat(n)||0)},rotObj:function(e,t,i,n){u&&e&&e[w("rotation")]&&(e[w("rotation")].x=parseFloat(t)||0,e[w("rotation")].y=parseFloat(i)||0,e[w("rotation")].z=parseFloat(n)||0)},scaleObj:function(e,t,i,n){u&&e&&e[w("scale")]&&(e[w("scale")].x=parseFloat(t)||0,e[w("scale")].y=parseFloat(i)||0,e[w("scale")].z=parseFloat(n)||0)}},PAYMENTS:{giveKR:function(e,t){c&&h&&h.krRewards&&(t=s.isNumber(t)?t:0)>0&&!v("p_givKR",4)&&h.rewardKR(e,t||0)},charge:function(){}},PLAYERS:{getSelf:function(){return c?null:h&&h.controls&&h.tmpPlayer?k.player(h.tmpPlayer):null},toggleLOD:function(e){!c&&h&&(h.useLOD=!!e)},disableMeshes:function(){!c&&h&&(h.disableMeshes=!0)},list:function(){return h.players.list.map(k.player)},findByID:function(e){for(var t=null,i=0;i<h.players.list.length;++i)if(h.players.list[i].id==e){t=h.players.list[i];break}return t?k.player(t):null}},AI:{spawn:function(e,t,i,n,a,r){if(c){r=r||{},s.isObject(r)||(r={});var o={asset:e,src:"model",actions:null,chance:null,constE:null,eventN:null,interface:null,interfaceT:null,singleUse:null};o.respawnT=parseFloat(r[w("respawnT")])||0,o.respawnR=!!r[w("respawnR")],o.targAI=!!r[w("targAI")],o.targPlr=!!r[w("targPlr")],o.friendly=!!r[w("friendly")],o=_(o,r);var l=h.AI.spawn(null,0,t,i,n,a,o);return k.AI(l)}},remove:function(e){if(c){var t=h.AI.findBySid(e);t&&h.AI.removeFully(t)}},list:function(){return c?h.AI.ais.map(k.AI):void 0}},TRIGGERS:{list:function(){},execute:function(e,...t){}},OBJECTS:{getPathNodes:function(){if(!h||!h.map||!h.map.manager)return[];var e=[];for(var t in h.map.manager.pathNodes)e.push(k.node(h.map.manager.pathNodes[t]));return e},list:function(){if(!h||!h.map||!h.map.manager)return[];for(var e=[],t=0;t<h.map.manager.objects.length;t++)e.push(k.obj3DServ(h.map.manager.objects[t]));return e}},ADS:{playVideo:function(){c||window.forceVideoAd()}},MODS:{load:function(e){c||!s.isString(e)||v("loadmd",2)||window.loadModPack(e,!0)},reset:function(){c||window.windows[3].reset()}},ADMIN:{kick:function(e){if(c&&d&&h){var t=h.players.list.find((t=>t.id==e));if(t){if(t.account&&t.account.isDev)return;t.kicked=!0,t.send("error","Kicked by host"),d.sockets[t.id]&&d.sockets[t.id].close()}}},ban:function(e){if(c&&d&&h){var t=h.players.list.find((t=>t.id==e));if(t){if(t.account&&t.account.isDev)return;t.banned=!0,t.send("error","Banned"),d.sockets[t.id]&&d.sockets[t.id].remoteAddress&&h.banList.push(d.sockets[t.id].remoteAddress),d.sockets[t.id]&&d.sockets[t.id].close()}}}},PLATFORM:{isClient:function(){return!c&&!!window.isDeskCli},isBrowser:function(){return!(c||!h||!h.ui||h.ui.isMobileControls||window.isDeskCli)},isMobile:function(){return!(c||!h||!h.ui||!h.ui.isMobileControls)}},CONFIG:{getHost:function(){if(!c)return null;if(!d)return null;if(!h)return null;var e=h.host;if(!e)return null;var t=h.players.findById(e);return t?k.player(t):null},getMatch:function(){},getSettings:function(){},getWeapons:function(){},getClasses:function(){}}},types:i(346),alias:{UTILS:"UTILS",Math:"UTILS.math"}}}},function(e,t){const i={};e.exports={"UTILS.math.*":["num action()"],"UTILS.randInt":["num action()"],"UTILS.randFloat":["num action()"],"UTILS.getDir2D":["num action()"],"UTILS.getDir3D":["obj action()",i.coord],"UTILS.getDist2D":["num action()"],"UTILS.getDist3D":["num action()"],"UTILS.anglDst":["num action()"],"UTILS.hexFromHue":["str action()"],"UTILS.invertHex":["str action()"],"UTILS.HEXtoRGB":["obj action()",i.rgb],"UTILS.RGBtoHEX":["str action()"],"UTILS.toLower":["str action()"],"UTILS.toUpper":["str action()"],"UTILS.truncateTxt":["str action()"],"UTILS.replaceText":["str action()"],"UTILS.textContains":["bool action()"],"TIME.now":["num action()"],"TIME.fixedDelta":["num action()"],"TIME.getReadable":["str action()"],"INPUTS.keyDown":["bool action()"],"INPUTS.mousePos":["obj action()",i.coord],"INPUTS.mouseMovement":["obj action()",i.coord],"INPUTS.mousePosOverlay":["obj action()",i.coord],"UI.addDIV":["str action()"],"UI.addImage":["str action()"],"UI.moveDIV":["str action()"],"UI.getDIVText":["str action()"],"UI.getSize":["obj action()",i.size],"UI.getProp":["str action()"],"SETTINGS.get":["str action()"],"SETTINGS.list":["str action()"],"OVERLAY.getSize":["obj action()",i.size],"OVERLAY.measureText":["num action()"],"COOKIES.load":["str action()"],"COOKIES.has":["bool action()"],"NETWORK.send":["bool action()"],"NETWORK.broadcast":["bool action()"],"NFT.hasWallet":["bool action()"],"NFT.ownedAssets":["obj[] action()",i.nft],"PLAYERS.list":["obj[] action()",i.player],"PLAYERS.getSelf":["obj action()",i.player],"PLAYERS.findByID":["obj action()",i.player],"SCENE.add*":["obj action()",i.obj3D],"SCENE.posToScreen":["obj action()"],"AI.list":["obj[] action()",i.AI],"AI.spawn":["obj action()",i.AI],"RAYCAST.from":["obj action()",i.RAYCASTOB],"OBJECTS.getPathNodes":["obj[] action()",i.node],"OBJECTS.list":["obj[] action()",i.obj3D],"SOUND.play*":["obj action()",i.sound],"PLATFORM.isClient":["bool action()"],"PLATFORM.isBrowser":["bool action()"],"PLATFORM.isMobile":["bool action()"],"CAMERA.getObj":["obj action()"],"CONFIG.getHost":["obj action()",i.player]}},function(e,t,i){i(4);const n=i(1);e.exports=function(){var e;this.divs=[],this.update=function(t){for(var i=this.divs.length-1;i>=0;--i)if((e=this.divs[i]).delay>0)e.delay-=t,e.delay<=0&&(e.style.display="inline-block");else{if(e.scale>e.minScale&&(e.scale-=e.scaleSpeed*t,e.scale<=e.minScale&&(e.scale=e.minScale),e.style.fontSize=e.scale+"px"),e.scaleSpd&&(e.startS+=e.scaleSpd*t,e.style.width=e.startS+"px",e.style.height=e.startS+"px"),e.life-=t,e.life<=0){e.style.display="none";var s=e.callback;this.divs.splice(i,1),s&&s()}if(e.fade&&e.life<=e.fade&&(e.style.opacity=e.life/e.fade),e.srcA&&e.srcA.cnt&&e.maxLife-e.life<=e.srcA.tim){var a=Math.floor(e.srcA.cnt*((e.maxLife-e.life)/e.srcA.tim));e.src=n.assetsUrl("/textures/"+e.srcA.src+"_"+a+".png")}}},this.animateText=function(e,t,i,n,s,a,r,o){this.divs.indexOf(e)<0&&this.divs.push(e),e.delay=r,r||(e.style.display="inline-block"),e.style.fontSize=i+"px",e.scale=i,e.minScale=n?.4*i:i,e.innerHTML=t,e.scaleSpeed=n,e.life=s,e.fade=a,e.style.opacity=1,e.callback=o},this.animateDiv=function(e,t,i,s,a,r){this.divs.indexOf(e)<0&&this.divs.push(e),e.style.display="block",e.life=t,e.maxLife=t,e.srcA=r,r&&(e.src=n.assetsUrl("/textures/"+r.src+"_0.png")),e.style.opacity=1,e.fade=i,s&&(e.style.width=s+"px",e.style.height=s+"px",e.startS=s,e.scaleSpd=a)},this.reset=function(){for(var e=0;e<this.divs.length;++e)this.divs[e].style.display="none";this.divs.length=0}}},function(e,t){e.exports=class{constructor(){this.events=[],this.socketId=null}connect(e,t,i){this.events=i,t()}send(e,t,...i){e&&e!=this.socketId||this.events[t]&&this.events[t].apply(void 0,i)}broadcast(e,t,...i){this.send(null,t,...i)}broadcastEx(e,t,i,...n){t!=this.socketId&&this.send(null,i,...n)}}},function(e,t,i){var n=i(350);const s=i(351),a=i(352),r=i(1),o=i(4);e.exports=function(e,t,i,l,c,d){function h(t){var i=t.movementX||t.mozMovementX||t.webkitMovementX||0,n=t.movementY||t.mozMovementY||t.webkitMovementY||0;(!v.mouseSkipFix||i<v.flickClamp&&i>-v.flickClamp)&&(_=i),I+=_||0,(!v.mouseSkipFix||n<v.flickClamp&&n>-v.flickClamp)&&(T=n),A+=T||0,v.mouseX=t.clientX,v.mouseY=t.clientY,e.tmpMouse.set(t.clientX,t.clientY),e.tmpMouse2.set(i,n)}function u(e){for(var t=0;t<L.length;t++)if(L[t].identifier==e)return t;return-1}function p(e,t){var i=e.screenX-L[t].screenX,n=e.screenY-L[t].screenY;v.fakeMouse(2,i,n,0,"mblInput")}function f(e,t,n,s){if(v.idleTimer=0,v.keys)if(!s&&t&&v.keys[e]!==t&&null!=v.inputChanger)v.updateBind(v.inputChanger[0],v.inputChanger[1],v.inputChanger[2],e),showWindow(7,!0),updateKeybindUI(v.inputChanger[0]+(r.isNumber(v.inputChanger[2])?v.inputChanger[2]:"")),v.inputChanger=null;else{if(v.keys[e]===t||"voiceChat"!=e&&!v.binds.voiceChat.isKey(e)||toggleRecord(t),!v.enabled&&27!=e&&"menu"!=e)return;if(v.keys[e]!==t){1!=t||v.didPressed[e]||(v.didPressed[e]=1),v.keys[e]=t;for(var a=0;a<v.binds.move.length;a++)if(e=="move_"+a||v.binds.move[a].isKey(e)){v.updateMoveDir();break}t?("swap"==e||v.binds.swap.isKey(e)?v.wSwap=1:"melee"==e||v.binds.melee.isKey(e)?v.wSwap=2:v.binds.primary.isKey(e)?v.wSwap=3:v.binds.equip.isKey(e)&&(v.wSwap=4),s?window.pressButton(null,null,e):window.pressButton(e,n)):s?window.releaseButton(null,null,e):window.releaseButton(e,n)}else v.keys[e]===t&&1==t&&!s&&n&&i&&i.mainScript&&i.mainScript.onKeyHeld&&i.mainScript.onKeyHeld((n.key+"").toLowerCase(),n.which||n.keyCode||0)}}function m(e,t,i){F=t||e.which||e.keyCode,"cntrlInput"!=i&&v.gamepad.active&&(v.gamepad.active=!1),v.inputType=i,e&&"/"==e.key&&e.ctrlKey?(window.setLastMod(""),windows[3].reset(!0)):F==v.binds.chat.val?window.pressButton(F,e):document.activeElement==chatInput||window.tradeChatInput&&document.activeElement==window.tradeChatInput||(v.enabled&&e&&e.preventDefault&&e.cancelable&&e.preventDefault(),f(F||0,1,e,"cntrlInput"==i))}function g(e,t,i){F=t||e.which||e.keyCode,"cntrlInput"!=i&&v.gamepad.active&&(v.gamepad.active=!1),v.inputType=i,v.enabled&&e&&e.preventDefault&&e.cancelable&&e.preventDefault(),f(F||0,0,e,"cntrlInput"==i)}var v=this;this.binds={},this.binds.primary=new s("primKey",84,-1),this.binds.reload=new s("reloadKey",82,-1),this.binds.jump=new s("jumpKey",32,-1),this.binds.playerList=new s("pListKey",18,-1),this.binds.scoreBoard=new s("sBoardKey",9,-1),this.binds.interact=new s("interactKey",71,-1),this.binds.confirm=new s("confirmKey",75,-1),this.binds.secondaryInteract=new s("interactSecKey",72,-1),this.binds.reset=new s("resetKey",66,-1),this.binds.resetLast=new s("resetLastKey",78,-1),this.binds.spray=new s("sprayKey",70,-1),this.binds.sprayWheel=new s("sprayWheelKey",70,-1),this.binds.inspect=new s("inspKey",88,-1),this.binds.swap=new s("swapKey",69,-1),this.binds.shoot=new s("shoot1Key",10001,220),this.binds.aim=new s("aim1Key",10003,221),this.binds.crouch=new s("crouchKey",16,-1),this.binds.melee=new s("meleeKey",81,-1),this.binds.equip=new s("equipKey",67,-1),this.binds.chat=new s("chatKey",13,-1),this.binds.voiceChat=new s("voiceKey",86,-1),this.binds.drop=new s("dropKey",90,-1),this.binds.wepVis=new s("wepVisKey",-1,-1),this.binds.kickVoteY=new s("kickVoteYKey",49,-1),this.binds.kickVoteN=new s("kickVoteNKey",50,-1),this.binds.specFree=new s("specFreeKey",70,-1),this.binds.specObj=new s("specObjKey",72,-1),this.binds.specFirst=new s("specFirstKey",82,-1),this.binds.specNames=new s("specNamesKey",77,-1),this.binds.specMiniMap=new s("specMiniMap",189,-1),this.binds.kpdVoteY=new s("kpdVoteYKey",89,-1),this.binds.kpdVoteN=new s("kpdVoteNKey",78,-1),this.binds.specFocus=new s("specFocusKey",190,-1),this.binds.kpdVision=new s("kpdVisionKey",187,-1),this.binds.hidePlayers=new s("hidePlayersKey",-1,-1),this.binds.prop=new s("propKey",80,-1),this.binds.propRand=new s("propRandKey",77,-1),this.binds.propRot=new s("propRotKey",82,-1),this.binds.propRotR=new s("propRotRKey",78,-1),this.binds.noclipSB=new s("sandboxNoclip",-1,-1),this.binds.godModeSB=new s("sandboxGodMode",-1,-1),this.binds.smiteSB=new s("sandboxSmite",-1,-1),this.binds.unlimitedSB=new s("sandboxUnlimited",-1,-1),this.binds.killSB=new s("sandboxKill",-1,-1),this.binds.spawnBot=new s("sandboxSpawnBot",107,-1),this.binds.clearBots=new s("sandboxClearBots",109,-1),this.binds.streak=[new s("18",49,-1),new s("19",50,-1),new s("20",51,-1)],this.binds.taunt=[new s("taunt0",49,-1),new s("taunt1",50,-1),new s("taunt2",51,-1),new s("taunt3",52,-1),new s("taunt4",53,-1),new s("taunt5",54,-1)],this.binds.move=[new s("0",87,-1),new s("1",83,-1),new s("2",65,-1),new s("3",68,-1)],this.binds.toggle=[new s("27",-1,-1),new s("28",-1,-1),new s("29",-1,-1),new s("30",-1,-1),new s("31",-1,-1),new s("32",-1,-1)],this.binds.premium=[new s("34",-1,-1),new s("35",-1,-1),new s("36",-1,-1),new s("37",-1,-1)],this.binds.message=[new s("43",-1,-1),new s("44",-1,-1),new s("45",-1,-1),new s("46",-1,-1),new s("47",-1,-1),new s("48",-1,-1)],this.scrollToSwap=!0,this.toggleSets=[getSavedVal("cont_27_set")||-1,getSavedVal("cont_28_set")||-1,getSavedVal("cont_29_set")||-1,getSavedVal("cont_30_set")||-1,getSavedVal("cont_31_set")||-1,getSavedVal("cont_32_set")||-1],this.chatMessages=[getSavedVal("cont_43_set")||"",getSavedVal("cont_44_set")||"",getSavedVal("cont_45_set")||"",getSavedVal("cont_46_set")||"",getSavedVal("cont_47_set")||"",getSavedVal("cont_48_set")||""],this.checkScroll=function(){for(var e in v.binds)if(Array.isArray(v.binds[e])){for(var t=0;t<v.binds[e].length;t++)if(v.binds[e][t].isKey(2e4)||v.binds[e][t].isKey(10002))return void(v.scrollToSwap=!1)}else if(v.binds[e].isKey(2e4)||v.binds[e].isKey(10002))return void(v.scrollToSwap=!1);v.scrollToSwap=!0},this.checkScroll(),this.resetBinds=function(){for(var e in v.binds)Array.isArray(v.binds[e])?v.binds[e].forEach((e=>e.resetAll())):v.binds[e].resetAll();v.checkScroll(),v.toggleSets=[getSavedVal("cont_27_set")||-1,getSavedVal("cont_28_set")||-1,getSavedVal("cont_29_set")||-1,getSavedVal("cont_30_set")||-1,getSavedVal("cont_31_set")||-1,getSavedVal("cont_32_set")||-1],v.chatMessages=[getSavedVal("cont_43_set")||"",getSavedVal("cont_44_set")||"",getSavedVal("cont_45_set")||"",getSavedVal("cont_46_set")||"",getSavedVal("cont_47_set")||"",getSavedVal("cont_48_set")||""]},this.export=function(){var e={};for(var t in v.binds)if(Array.isArray(v.binds[t])){var i=t+"Keys";e[i]=[],e[i+"_alt"]=[];for(var n=0;n<v.binds[t].length;n++)v.binds[t][n].val!=v.binds[t][n].def&&(e[i][n]=v.binds[t][n].val),v.binds[t][n].altVal!=v.binds[t][n].altDef&&(e[i+"_alt"][n]=v.binds[t][n].altVal);e[i].length||delete e[i],e[i+"_alt"].length||delete e[i+"_alt"]}else v.binds[t].val!=v.binds[t].def&&(e[v.binds[t].name]=v.binds[t].val),v.binds[t].altVal!=v.binds[t].altDef&&(e[v.binds[t].altName]=v.binds[t].altVal);return e.toggleSets=[...v.toggleSets],e.toggleSets.join("").length||delete e.toggleSets,e.chatMessages=[...v.chatMessages],e.chatMessages.join("").length||delete e.chatMessages,e},this.getBindByName=function(e,t){for(var i in v.binds)if(!Array.isArray(v.binds[i])&&(v.binds[i].name==e||v.binds[i].altName==e))return v.binds[i];return!1},this.updateBind=function(e,t,i,n,s){v.binds[e]&&(null==i||v.binds[e][i])&&(null==i?v.binds[e].update(n,t):v.binds[e][i].update(n,t),s||v.checkScroll())},this.resetBind=function(e,t,i,n){v.binds[e]&&(null==i||v.binds[e][i])&&(null==i?v.binds[e].reset(t):v.binds[e][i].reset(t),n||v.checkScroll())},this.camRot=!0,this.freeMouse=!1,this.UsePointerLock=!0,this.camOffset=!1,this.spect={target:null,speed:1,followDis:o.specMinD,minD:o.specMinD,maxD:o.specMaxD},this.camType={isNormal:!0,isTop:!1,isSideX:!1,isSideZ:!1};if(this.scaleMap={},this.isMobile=d,this.isMobile){a.init((function(e,t){var i=t.direction,n=t.distance||50,s=Math.abs(t.angle.degree-180);i&&(v.mblInput.gradSpeed&&(v.speedLmt=n/50),s>=165&&s<=195||s>=0&&s<=15?(g(null,v.binds.move[0].val,"mblInput"),g(null,v.binds.move[1].val,"mblInput")):("up"==i.y?(g(null,v.binds.move[1].val,"mblInput"),m(null,v.binds.move[0].val,"mblInput")):g(null,v.binds.move[0].val,"mblInput"),"down"==i.y?(g(null,v.binds.move[0].val,"mblInput"),m(null,v.binds.move[1].val,"mblInput")):g(null,v.binds.move[1].val,"mblInput")),s>=75&&s<=105?(g(null,v.binds.move[2].val,"mblInput"),g(null,v.binds.move[3].val,"mblInput")):("left"==i.x?(g(null,v.binds.move[3].val,"mblInput"),m(null,v.binds.move[2].val,"mblInput")):g(null,v.binds.move[2].val,"mblInput"),"right"==i.x?(g(null,v.binds.move[2].val,"mblInput"),m(null,v.binds.move[3].val,"mblInput")):g(null,v.binds.move[3].val,"mblInput")))}),(function(e){g(null,v.binds.move[0].val,"mblInput"),g(null,v.binds.move[1].val,"mblInput"),g(null,v.binds.move[2].val,"mblInput"),g(null,v.binds.move[3].val,"mblInput")}),(()=>!!(v&&v.keys&&v.binds&&v.keys[v.binds.aim.val]))),a.createOrRecreateJoystick();let K=window.mobileControlPositions?window.mobileControlPositions:o.mobileControlPositions;Object.keys(K).forEach((function(e){let t=K[e],i=document.getElementById(e);"mobileShoot"==e?i.style.transform=t.scale?"rotate(90deg) scale("+t.scale+")":"rotate(90deg)":t.scale&&(i.style.transform="scale("+t.scale+")",v.scaleMap[e]=t.scale),["left","top","right"].forEach((function(e){(t[e]||0==t[e])&&(i.style[e]=100*t[e]+"%")})),t.left==t.right&&(i.style.margin="auto")}))}this.locklessChange=function(e){v.enabled=e,(l.connected||i.isSandbox)&&(v.enabled&&enterGame(),t.toggleControlUI(v.enabled),v.enabled||v.resetKeys())},this.gamepad=new n;var y=e.renderer.domElement;if(this.hasPointerlock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,this.hasPointerlock){function b(e){v.tmpUnlock||(v.enabled=document.pointerLockElement===y||document.mozPointerLockElement===y||document.webkitPointerLockElement===y,(l.connected||i.isSandbox)&&(v.enabled&&enterGame(),t.toggleControlUI(v.enabled),v.enabled||v.resetKeys()))}y.requestPointerLock=y.requestPointerLock||y.mozRequestPointerLock||y.webkitRequestPointerLock,document.addEventListener("pointerlockchange",b,!1),document.addEventListener("mozpointerlockchange",b,!1),document.addEventListener("webkitpointerlockchange",b,!1)}this.checkHardwareAccel=function(){var e=!0;try{var t=y.getContext("webgl2"),i=t.getExtension("WEBGL_debug_renderer_info");e=!t.getParameter(i.UNMASKED_RENDERER_WEBGL).includes("SwiftShader")}catch(e){}return e};const w=void 0!==y.onpointerrawupdate&&null!=PointerEvent.prototype.getCoalescedEvents;var x,S,M,k,_,T;this.toggleMouseInputs=function(e){y.removeEventListener("drag",R,!1),y.removeEventListener("mousemove",R,!1),y.removeEventListener("pointerrawupdate",P,!1),w&&e?y.addEventListener("pointerrawupdate",P,!1):(y.addEventListener("mousemove",R,!1),y.addEventListener("drag",R,!1))},this.isn=0,this.tmpInpts=[],this.getISN=function(){return this.isn++},this.cntrlInput={sensX:20,sensY:20,aimX:15,aimY:15,deadZoneR:.25,deadZoneL:.25,invert:!1,vibration:!0,vibrationMlt:1,triggerThres:.1,gradSpeed:!1},this.mblInput={sensX:1,sensY:1,aimX:1,aimY:1,invert:!1,vibration:!0,vibrationMlt:1,gradSpeed:!1},this.gpSetts=0,this.kbmInput={aimX:[1],aimY:[1],sensX:[1],sensY:[1],invert:[!1],scroll:[1]},this.mouseAccel=!0,this.toggleADS=[0],this.adsToggled=!1,this.mouseSkipFix=!1,this.flickClamp=500,this.masterLock=!0,this.locked=!1,this.enabled=!1,this.idleTimer=0,e.camera.rotation.set(0,0,0),this.mouseX=0,this.mouseY=0,this.pchObjc=new i.THREE.Object3D,this.pchObjc.add(e.camera),this.object=new i.THREE.Object3D,this.object.add(this.pchObjc),this.inputType=null,this.xDr=0,this.yDr=0;var C=Math.PI/2,I=0,A=0;function R(e,t){!v.enabled||window.locked||window.noMouseInp||(e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.cancelable&&e.preventDefault(),(t||e.isTrusted)&&(v.inputType=t,v.idleTimer=0,h(e)))}function P(e){if(v.enabled&&!window.locked&&!window.noMouseInp){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.cancelable&&e.preventDefault(),v.inputType=void 0,v.idleTimer=0;for(let t of e.getCoalescedEvents())t.isTrusted&&h(t)}}function E(e,t){if("cntrlInput"!=t&&v.gamepad.active&&(v.gamepad.active=!1),v.inputType=t,!v.masterLock){if(v.tmpUnlock)v.tmpUnlock=!1,v.toggle(!0);else if(!v.enabled)return v.toggle(!0);document.activeElement==chatInput&&chatInput.blur(),window.tradeChatInput&&document.activeElement==window.tradeChatInput&&window.tradeChatInput.blur(),e.stopPropagation&&e.stopPropagation(),e&&i&&i.mainScript&&i.mainScript.onMouseClick&&i.mainScript.onMouseClick(e.which,e.clientX||0,e.clientY||0),e.which>=0&&(e.preventDefault&&e.cancelable&&e.preventDefault(),m(null,1e4+e.which,t),window.spectating&&(3==e.which?window.spectMode(1):1==e.which&&window.spectMode(-1)))}}function D(e,t){"cntrlInput"!=t&&v.gamepad.active&&(v.gamepad.active=!1),v.inputType=t,v.locked||e.which>=0&&(e.preventDefault&&e.cancelable&&e.preventDefault(),e&&i&&i.mainScript&&i.mainScript.onMouseUp&&i.mainScript.onMouseUp(e.which,e.clientX||0,e.clientY||0),g(null,1e4+e.which,t))}this.getSetByWep=function(e,t){return e?v[e][t]:v.kbmInput[t][(1==v.gpSetts&&i&&i.tmpPlayer&&i.tmpPlayer.currentWeaponId>=0?i.tmpPlayer.currentWeaponId:-1)+1]},this.updateMouseInp=function(){"cntrlInput"!=v.inputType&&v.gamepad.active&&(v.gamepad.active=!1),x=v.adsToggled?v.getSetByWep(v.inputType,"aimX"):v.getSetByWep(v.inputType,"sensX"),S=o.mouseSens*x*(v.target?o.camChaseSen:1)*(e.camera.fov/e.fov),M=v.adsToggled?v.getSetByWep(v.inputType,"aimY"):v.getSetByWep(v.inputType,"sensY"),k=o.mouseSens*M*(v.target?o.camChaseSen:1)*(e.camera.fov/e.fov),i&&i.detachedCam||!window.spectating&&!v.camRot||(v.pchObjc.rotation.x-=(A||0)*(k||0)*(v.getSetByWep(v.inputType,"invert")?-1:1),v.unlockView||(v.pchObjc.rotation.x=Math.max(-C,Math.min(C,v.pchObjc.rotation.x))),v.yDr=v.pchObjc.rotation.x%Math.PI2,v.object.rotation.y-=(I||0)*(S||0),v.xDr=v.object.rotation.y%Math.PI2),I=A=0},y.ondragover=function(e){e.cancelable&&e.preventDefault()},this.toggleMouseInputs(),y.dispatchEvent=()=>{},y.addEventListener("mousedown",E,!1),menuWindow.addEventListener("mousedown",(function(e){v.enabled||(e.which>=0&&null!=v.inputChanger||e.which>3||2==e.which)&&(e.preventDefault&&e.cancelable&&e.preventDefault(),m(null,1e4+e.which))}),!1),y.addEventListener("mouseup",D,!1),menuWindow.addEventListener("mouseup",(function(e){v.enabled||(e.which>=0&&null!=v.inputChanger||e.which>3||2==e.which)&&(e.preventDefault&&e.cancelable&&e.preventDefault(),g(null,1e4+e.which))}),!1);var O=0;y.addEventListener&&y.addEventListener("wheel",(function(e){e=window.event||e;var t=-Math.max(-1,Math.min(1,e.wheelDelta||-e.detail)),n=t>0?-1:1;window.spectating&&(v.spect.target?(v.spect.followDis-=3*n,v.spect.followDis<v.spect.minD&&(v.spect.followDis=v.spect.minD),v.spect.followDis>v.spect.maxD&&(v.spect.followDis=v.spect.maxD)):(v.spect.speed+=n,v.spect.speed<1&&(v.spect.speed=1),v.spect.speed>10&&(v.spect.speed=10)));var s=!1;if(c.sprayWheelOpened()&&(s=!0,c.sprayWheelChange(t)),c.propWheelOpened()&&(s=!0,c.propWheelChange(t)),!s){v.skipScroll?v.skipScroll=!1:v.scrollDelta=t;var a=Date.now();a-O>50&&(O=a,m(null,2e4))}return e&&i&&i.mainScript&&i.mainScript.onMouseScroll&&i.mainScript.onMouseScroll(n),!1}),!1),windowHolder.addEventListener("wheel",(function(e){return null!=v.inputChanger&&(m(null,2e4),g(null,2e4)),!1}),!1),this.toggleGamepad=function(e){this.gamepad.disabled=e,e&&this.gamepad._handleGamepadDisconnected()};var L=[],j={mobileUI:{},mobileJump:{down:function(){mobileJump.style.transform="scale("+1.1*(v.scaleMap.mobileJump||1)+")",m(null,v.binds.jump.val)},up:function(){mobileJump.style.transform="scale("+(v.scaleMap.mobileJump||1)+")",g(null,v.binds.jump.val)}},mobileCrouch:{down:function(){mobileCrouch.style.transform="scale("+(v.scaleMap.mobileCrouch||1)+")",m(null,v.binds.crouch.val)},up:function(){mobileCrouch.style.transform="scale("+(v.scaleMap.mobileCrouch||1)+")",g(null,v.binds.crouch.val)}},mobileEsc:{down:function(){v.toggle(!1),setTimeout((function(){v.resetKeys()}))}},mobileAimShoot:{down:function(){mobileAimShoot.style.transform="scale("+1.1*(v.scaleMap.mobileAimShoot||1)+")";let e=i.players.list.filter((e=>e.isYou))[0].weapon;v.isPressed("aim")?(this.alreadyAim=!0,v.keys[v.binds.shoot.val]=1):e.melee?v.keys[v.binds.shoot.val]=1:(f(v.binds.aim.val,1),e.scope?this.shootOnUp=!0:(this.readyToShoot=!0,setTimeout((()=>{this.readyToShoot&&(v.keys[v.binds.shoot.val]=1,e.nAuto&&(setTimeout((()=>v.keys[v.binds.shoot.val]=0),100),this.autoFire=setInterval((()=>{v.keys[v.binds.shoot.val]=1,setTimeout((()=>v.keys[v.binds.shoot.val]=0),100)}),e.rate)))}),e.aimSpd+50))),window.spectating&&window.spectMode(-1)},up:function(){this.readyToShoot=!1,this.autoFire&&clearInterval(this.autoFire),mobileAimShoot.style.transform="scale("+(v.scaleMap.mobileAimShoot||1)+")",this.alreadyAim?(this.alreadyAim=!1,v.keys[v.binds.shoot.val]=0):(this.shootOnUp?(this.shootOnUp=!1,v.keys[v.binds.shoot.val]=1,setTimeout((()=>v.keys[v.binds.shoot.val]=0),100)):v.keys[v.binds.shoot.val]=0,f(v.binds.aim.val,0))}},mobileShoot:{down:function(){mobileShoot.style.transform="rotate(90deg) scale("+1.1*(v.scaleMap.mobileShoot||1)+")",v.keys[v.binds.shoot.val]=1,window.spectating&&window.spectMode(-1)},up:function(){mobileShoot.style.transform="rotate(90deg) scale("+1.1*(v.scaleMap.mobileShoot||1)+")",v.keys[v.binds.shoot.val]=0}},mobileScope:{down:function(){mobileScope.style.transform="scale("+1.1*(v.scaleMap.mobileScope||1)+")";let e=!v.keys[v.binds.aim.val];f(v.binds.aim.val,e)},up:function(){mobileScope.style.transform="scale("+(v.scaleMap.mobileScope||1)+")"}},mobileReload:{down:function(){mobileReload.style.transform="scale("+1.1*(v.scaleMap.mobileReload||1)+")",m(null,v.binds.reload.val)},up:function(){mobileReload.style.transform="scale("+(v.scaleMap.mobileReload||1)+")",g(null,v.binds.reload.val)}},mobileSwap:{down:function(){mobileSwap.style.transform="scale("+1.1*(v.scaleMap.mobileSwap||1)+")",m(null,v.binds.swap.val)},up:function(){mobileSwap.style.transform="scale("+(v.scaleMap.mobileSwap||1)+")",g(null,v.binds.swap.val)}},mobileKSwap:{down:function(){mobileKSwap.style.transform="scale("+1.1*(v.scaleMap.mobileKSwap||1)+")",m(null,v.binds.melee.val)},up:function(){mobileKSwap.style.transform="scale("+(v.scaleMap.mobileKSwap||1)+")",g(null,v.binds.melee.val)}}};for(var z in j)j[z].move=p;this.isMobile&&(mobileUI.addEventListener("touchstart",(function(e){if(!v.masterLock){v.enabled||v.toggle(!0),document.activeElement==chatInput&&chatInput.blur(),window.tradeChatInput&&document.activeElement==window.tradeChatInput&&window.tradeChatInput.blur(),e.cancelable&&e.preventDefault();for(var t=e.changedTouches,i=0;i<t.length;i++)j[t[i].target.id]&&(j[t[i].target.id].down&&j[t[i].target.id].down(),L.push((n=t[i],s=t[i].target.id,{identifier:n.identifier,pageX:n.pageX,pageY:n.pageY,screenX:n.screenX,screenY:n.screenY,cb:s})))}var n,s}),!1),mobileUI.addEventListener("touchmove",(function(e){if(!v.masterLock){var t;e.cancelable&&e.preventDefault();for(var i=e.changedTouches,n=0;n<i.length;n++)(t=u(i[n].identifier))>=0&&(j[L[t].cb].move&&j[L[t].cb].move(i[n],t),L[t].screenX=i[n].screenX,L[t].screenY=i[n].screenY)}}),!1),mobileUI.addEventListener("touchend",(function(e){if(!v.locked)for(var t,i=e.changedTouches,n=0;n<i.length;n++)(t=u(i[n].identifier))>=0&&(j[L[t].cb].up&&j[L[t].cb].up(),L.splice(t,1))}),!1),mobileUI.addEventListener("touchcancel",(function(e){var t;e.cancelable&&e.preventDefault();for(var i=e.changedTouches,n=0;n<i.length;n++)(t=u(i[n].identifier))>=0&&j[L[t].cb].up&&j[L[t].cb].up(),L.splice(t,1)}),!1)),this.followCam=function(t,i){B.set(t.x,t.y+t.height,t.z),v.object.position.lerp(B,.9),e.camera.position.set(0,0,this.spect.followDis),e.camera.updateProjectionMatrix(),e.updateFrustum()},this.setCamPosOff=function(){e.camera.updateMatrixWorld(),v.object.position.setFromMatrixPosition(e.camera.matrixWorld),e.camera.position.set(0,0,0),e.camera.rotation.set(0,0,0)},this.xVel=0,this.yVel=0,this.zVel=0;var B=new i.THREE.Vector3(0,0,0),N=new i.THREE.Quaternion;this.freeCam=function(t){if(e.camera&&(B.set(0,0,0),this.isPressed("move",0,"move_0")&&(B.z-=1),this.isPressed("move",1,"move_1")&&(B.z+=1),this.isPressed("move",2,"move_2")&&(B.x-=1),this.isPressed("move",3,"move_3")&&(B.x+=1),this.keys[81]&&(B.y-=1),this.keys[69]&&(B.y+=1),B.applyQuaternion(e.camera.getWorldQuaternion(N)),!isNaN(B.x))){var i=(this.isPressed("crouch",null,"crouch")?.08:.04)*this.spect.speed*t;v.object.position.add(B.multiplyScalar(i)),e.camera.position.set(0,0,0),e.updateFrustum()}},this.camTarget=function(e,t,i,n,s){this.target={xD:n||0,yD:s||0,x:e||0,y:t||0,z:i||0}},this.camLookAt=function(e,t,i){var n=r.getXDire(this.object.position.x,this.object.position.y,this.object.position.z,e,t,i),s=r.getDir(this.object.position.z,this.object.position.x,i,e);this.target={xD:n,yD:s,x:e+o.camChaseDst*Math.sin(s)*Math.cos(n),y:t-o.camChaseDst*Math.sin(n),z:i+o.camChaseDst*Math.cos(s)*Math.cos(n)}},this.update=function(t){if(this.target){var i=r.getAngleDst(this.object.rotation.y,this.target.yD);this.object.rotation.y+=i*t*o.camChaseTrn,i=r.getAngleDst(v.pchObjc.rotation.x,this.target.xD),this.pchObjc.rotation.x+=i*t*o.camChaseTrn,i=r.getD3D(this.object.position.x,this.object.position.y,this.object.position.z,this.target.x,this.target.y,this.target.z)*t*o.camChaseSpd;var n=r.getDir(this.object.position.z,this.object.position.x,this.target.z,this.target.x),s=r.getXDire(this.object.position.x,this.object.position.y,this.object.position.z,this.target.x,this.target.y,this.target.z);this.object.position.x-=i*Math.sin(n)*Math.cos(s),this.object.position.y+=i*Math.sin(s),this.object.position.z-=i*Math.cos(n)*Math.cos(s),e.updateFrustum()}};var F,H=new i.THREE.Vector3;if(this.getWorldDirection=function(){return v.object.getWorldDirection(H)},this.rotateCam=function(t,i,n){e.camera.rotation.y=t,e.camera.rotation.x=i,e.camera.rotation.z=n},this.moveCam=function(t,i,n){v.object.position.set(t,i,n),e.updateFrustum()},this.moveDirs=[[0,-1],[0,1],[-1,0],[1,0]],this.updateMoveDir=function(){for(var e=0,t=0,i=0;i<v.binds.move.length;++i)v.isPressed("move",i,"move_"+i)&&(e+=v.moveDirs[i][0],t+=v.moveDirs[i][1]);this.moveDir=0==e&&0==t?null:Math.atan2(t,e)},this.isPressed=function(e,t,i){if(i&&v.keys[i])return!0;if(!v.binds[e])return!1;var n=v.binds[e];return Array.isArray(n)&&(n=n[t]),!!v.keys[n.val]||!!v.keys[n.altVal]},window.addEventListener("keydown",m,!1),window.addEventListener("keyup",g,!1),!this.isMobile){function U(e,t){return Math.abs(e)<t?e=0:(e-=Math.sign(e)*t,e/=1-t),e}function V(e,t){var i,n,s,a=(i=e,n=t,(s=Math.atan2(i,n))<0&&(s+=2*Math.PI),180*s/Math.PI)+22.5;return Math.floor(a/45)}var G=e=>m(null,e,"cntrlInput"),W=e=>g(null,e,"cntrlInput");this.mapping={button_1:{KEY:"jump"},button_2:{KEY:"crouch"},button_3:{KEY:"reload"},shoulder_bottom_left:{KEY:"aim"},button_4:{KEY:"swap"},shoulder_top_left:{KEY:"swap"},shoulder_top_right:{KEY:"melee"},shoulder_bottom_right:{THRES:!0,KEY:"shoot"},select:{KEY:"playerList"},d_pad_up:{KEY:"voiceChat"},d_pad_down:{KEY:"spray"},d_pad_left:{KEY:"interact"},d_pad_right:{KEY:"drop"}};var q=Object.keys(this.gamepad._keyMapping.gamepad).concat(Object.keys(this.gamepad._keyMapping.axes));this.gamepad.on(["press","hold","release"],q,(function(e){var t=v.mapping[e.button];"press"==e.type?t&&v.mapping[e.button].MOUSE&&(e.value>=v.cntrlInput.triggerThres||!v.mapping[e.button].THRES)?v.fakeMouse(0,0,0,v.mapping[e.button].MOUSE):t&&v.mapping[e.button].KEY&&G(v.mapping[e.button].KEY):"release"==e.type?t&&v.mapping[e.button].MOUSE?v.fakeMouse(1,0,0,v.mapping[e.button].MOUSE):t&&W(v.mapping[e.button].KEY):"hold"==e.type&&t&&v.mapping[e.button].THRES&&(e.value>=v.cntrlInput.triggerThres?v.fakeMouse(0,0,0,v.mapping[e.button].MOUSE):v.fakeMouse(1,0,0,v.mapping[e.button].MOUSE));var n="onController"+("hold"==e.type?"Held":"release"==e.type?"Up":"Press");i&&i.mainScript&&i.mainScript[n]&&i.mainScript[n](e.button+"",t&&v.binds[t.KEY]?v.binds[t.KEY].val:0)})),this.gamepad.on("hold","stick_axis_left",(function(e){v.cntrlInput.gradSpeed&&(v.speedLmt=Math.max(Math.abs(e.value[0]),Math.abs(e.value[1]))/(1-v.cntrlInput.deadZoneL));var t=U(e.value[0],v.cntrlInput.deadZoneL),i=U(e.value[1],v.cntrlInput.deadZoneL),n=V(t,i);return t||i?void(0==n||8==n?(W(v.binds.move[0].val),W(v.binds.move[2].val),W(v.binds.move[3].val),G(v.binds.move[1].val)):1==n?(W(v.binds.move[0].val),W(v.binds.move[2].val),G(v.binds.move[1].val),G(v.binds.move[3].val)):2==n?(W(v.binds.move[0].val),W(v.binds.move[1].val),W(v.binds.move[2].val),G(v.binds.move[3].val)):3==n?(W(v.binds.move[1].val),W(v.binds.move[2].val),G(v.binds.move[0].val),G(v.binds.move[3].val)):4==n?(W(v.binds.move[1].val),W(v.binds.move[2].val),W(v.binds.move[3].val),G(v.binds.move[0].val)):5==n?(W(v.binds.move[1].val),W(v.binds.move[3].val),G(v.binds.move[0].val),G(v.binds.move[2].val)):6==n?(W(v.binds.move[0].val),W(v.binds.move[1].val),W(v.binds.move[3].val),G(v.binds.move[2].val)):7==n&&(W(v.binds.move[0].val),W(v.binds.move[3].val),G(v.binds.move[1].val),G(v.binds.move[2].val))):(W(v.binds.move[0].val),W(v.binds.move[1].val),W(v.binds.move[2].val),void W(v.binds.move[3].val))})),this.gamepad.on("release","stick_axis_left",(function(e){W(v.binds.move[0].val),W(v.binds.move[1].val),W(v.binds.move[2].val),W(v.binds.move[3].val)})),this.gamepad.on("hold","stick_axis_right",(function(e){v.fakeMouse(2,v.applyDeadzone(e.value[0],v.cntrlInput.deadZoneR),v.applyDeadzone(e.value[1],v.cntrlInput.deadZoneR),0)})),this.gamepad.on("press","start",(function(e){v.toggle(!v.enabled)})),this.applyDeadzone=function(e,t){let i=(Math.abs(e)-t)/(1-t);return i<0&&(i=0),i*(e>0?1:-1)}}this.fakeKey=function(e,t=0){0==t&&m(null,e),1==t&&g(null,e)};var Y={movementX:0,movementY:0,which:0};this.fakeMouse=function(e=0,t=0,i=0,n=0,s){s=s||"cntrlInput",Y.movementX=t,Y.movementY=i,Y.which=n,0==e&&E(Y,s),1==e&&D(Y,s),2==e&&R(Y,s)},this.toggle=function(e){this.locked||this.masterLock?t.hasEndScreen&&e&&t.toggleEndScreen():"block"==windowHolder.style.display?e&&t.toggleWindow(!1,this.gamepad.active):v.UsePointerLock?e?function(){if(v.mouseAccel)return y.requestPointerLock();const e=y.requestPointerLock({unadjustedMovement:!1});e?e.catch((e=>{if("NotSupportedError"===e.name)return y.requestPointerLock()})):y.requestPointerLock()}():document.exitPointerLock():this.locklessChange(e)},this.resume=function(){if(!this.locked&&!this.masterLock){if(v.UsePointerLock){if(v.tmpUnlock)return!1;if(v.enabled=!0,!l.connected&&!i.isSandbox)return!1;enterGame(),t.toggleControlUI(!0),v.resetKeys()}else this.locklessChange(!0);return!0}return!1},this.disable=function(){v.toggle(!1),v.locked=!0},this.reset=function(t){this.adsToggled=!1,this.keys={},this.didPressed={},this.speedLmt=1,this.wSwap=0,this.scrollDelta=0,this.xDr=0,this.yDr=0,this.tmpInpts.length=0,this.isn=0,this.moveDir=null,this.skipScroll=!1,this.inputChanger=null,this.target=null,this.locked=!1,this.spect.target=null,t&&(v.pchObjc.rotation.x=0,v.object.rotation.y=0,e.camera.rotation.set(0,0,0),e.zoom(1))},this.resetKeys=function(){v.adsToggled=!1,v.keys={},v.updateMoveDir()}}},function(e,t){e.exports=function(){var e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||null,t=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||null;this._connected=!1,this.active=!1,this.idleTime=3e5,this._gamepad=null,this.disabled=!1,this._events={gamepad:{},axes:{}},this._keyMapping={gamepad:{button_1:0,button_2:1,button_3:2,button_4:3,shoulder_top_left:4,shoulder_top_right:5,shoulder_bottom_left:6,shoulder_bottom_right:7,select:8,start:9,stick_button_left:10,stick_button_right:11,d_pad_up:12,d_pad_down:13,d_pad_left:14,d_pad_right:15,vendor:16},axes:{stick_axis_left:[0,2],stick_axis_right:[2,4]}},this._threshold=.3,this._listeners=[];var i=this;this._handleGamepadConnected=t=>{i.disabled||i._connected||(i._connected=!0,i.active=!0,i._gamepad=t.gamepad,i._events.gamepad={},i._events.axes={},i._handleGamepadEventListener(t.gamepad),i._handleGamepadAxisEventListener(t.gamepad),i._requestAnimation=e(i._loop.bind(i)))},this._handleGamepadDisconnected=()=>{t(i._requestAnimation),i._requestAnimation=null,i._connected=!1,i._events.gamepad=null,i._events.axes=null,i._gamepad=null,i.active=!1},this._handleGamepadEventListener=e=>{if(!i.disabled){var t=i;e&&e.connected&&e.buttons.forEach((function(e,i){var n,s,a,r=(n=i,s=t._keyMapping.gamepad,a=[],Object.keys(s).forEach((function(e){(s[e]===n||Array.isArray(s[e])&&-1!==s[e].indexOf(n))&&a.push(e)})),a);r&&r.forEach((function(i){e.pressed?(t._events.gamepad[i]||(t._events.gamepad[i]={pressed:!0,hold:!1,released:!1}),t._events.gamepad[i].value=e.value):!e.pressed&&t._events.gamepad[i]&&(t._events.gamepad[i].released=!0,t._events.gamepad[i].hold=!1)}))}))}},this._handleGamepadAxisEventListener=e=>{if(!i.disabled){var t=i;e&&e.connected&&Object.keys(i._keyMapping.axes).forEach((function(i){var n=Array.prototype.slice.apply(e.axes,t._keyMapping.axes[i]);Math.abs(n[0])>t._threshold||Math.abs(n[1])>t._threshold?t._events.axes[i]={pressed:!t._events.axes[i],hold:!!t._events.axes[i],released:!1,value:n}:t._events.axes[i]&&={pressed:!1,hold:!1,released:!0,value:n}}))}},this._handleEvent=(e,t)=>{i.disabled||(i.active=!0,t[e].pressed?(i.trigger("press",e,t[e].value),t[e].pressed=!1,t[e].hold=!0):t[e].hold?i.trigger("hold",e,t[e].value):t[e].released&&(i.trigger("release",e,t[e].value),delete t[e]))},this._loop=()=>{if(!i.disabled){var t=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads:[];if(!t)return i._handleGamepadDisconnected();i._gamepad=t[0],i.active&&Date.now()-i.lastActive>=i.idleTime&&(i.active=!1),t[0]&&t[0].connected&&(i._handleGamepadEventListener(t[0]),i._handleGamepadAxisEventListener(t[0])),i._events.gamepad&&Object.keys(i._events.gamepad).forEach((function(e){i._handleEvent(e,i._events.gamepad)})),i._events.axes&&Object.keys(i._events.axes).forEach((function(e){i._handleEvent(e,i._events.axes)})),i._requestAnimation&&=e(i._loop.bind(i))}},this.on=(e,t,n,s)=>{"string"==typeof e&&e.match(/\s+/)&&(e=e.split(/\s+/g)),"string"==typeof t&&t.match(/\s+/)&&(t=t.split(/\s+/g)),Array.isArray(e)?e.forEach((function(e){i.on(e,t,n,s)})):Array.isArray(t)?t.forEach((function(t){i.on(e,t,n,s)})):i._listeners.push({type:e,button:t,callback:n,options:s,rumble:i.rumble})},this.off=(e,t)=>{"string"==typeof e&&e.match(/\s+/)&&(e=e.split(/\s+/g)),"string"==typeof t&&t.match(/\s+/)&&(t=t.split(/\s+/g)),Array.isArray(e)?e.forEach((function(e){i.off(e,t)})):Array.isArray(t)?t.forEach((function(t){i.off(e,t)})):i._listeners=i._listeners.filter((function(i){return i.type!==e&&i.button!==t}))},this.trigger=(e,t,n)=>{i.disabled||i._listeners&&i._listeners.forEach((function(i){i.type===e&&i.button===t&&i.callback({type:i.type,button:i.button,value:n,event:i,timestamp:Date.now()})}))},this.rumble=function(e,t){i.disabled||i._gamepad&&i._gamepad.vibrationActuator&&"dual-rumble"==i._gamepad.vibrationActuator.type&&i._gamepad.vibrationActuator.playEffect&&i._gamepad.vibrationActuator.playEffect("dual-rumble",{startDelay:0,duration:e||200,weakMagnitude:.5*(t||.5),strongMagnitude:t||.5})},window.addEventListener("MozGamepadConnected",this._handleGamepadConnected,!1),window.addEventListener("MozGamepadDisconnected",this._handleGamepadDisconnected,!1),window.addEventListener("gamepadconnected",this._handleGamepadConnected,!1),window.addEventListener("gamepaddisconnected",this._handleGamepadDisconnected,!1)}},function(e,t){var i="cont_";const n=function(e,t,n){this.active=!1,this.state=!1,this.name=e,this.altName=e+"_alt",this.def=t,this.altDef=n,this.val=parseInt(getSavedVal(i+this.name)||this.def),this.altVal=parseInt(getSavedVal(i+this.altName)||this.altDef)};n.prototype.trigger=function(e){e!==this.state&&(this.active=this.state=e)},n.prototype.isKey=function(e){return e==this.val||e==this.altVal},n.prototype.isPressed=function(){return this.active},n.prototype.reset=function(e){this.update(e?this.altDef:this.def,~~e)},n.prototype.resetAll=function(){this.update(this.def,0),this.update(this.altDef,1)},n.prototype.update=function(e,t){t?this.altVal=parseInt(e):this.val=parseInt(e),saveVal(i+(t?this.altName:this.name),e)},n.prototype.unbind=function(e){this.update(-1,e)},e.exports=n;var s="undefined"!=typeof Storage;try{window.localStorage.canStore=!0}catch{s=!1}window.saveVal=(e,t)=>{s&&localStorage.setItem(e,t)},window.getSavedVal=e=>s?localStorage.getItem(e):null},function(e,t,i){"use strict";i.r(t),i.d(t,"HAS_ALL",(function(){return s})),i.d(t,"HAS_MELEE_ONLY",(function(){return a})),i.d(t,"HAS_PRIMARY_OR_SECONDARY",(function(){return r})),i.d(t,"HAS_MELEE_AS_PRIMARY_AND_SECONDARY",(function(){return o})),i.d(t,"init",(function(){return M})),i.d(t,"createOrRecreateJoystick",(function(){return _})),i.d(t,"onResize",(function(){return k})),i.d(t,"updateScopeStatus",(function(){return T}));var n=i(122);const s=0,a=1,r=2,o=3,l=(i(4),{min:80,max:160,vh:.25}),c={min:30,max:100,vw:.04},d={min:20,max:60,vw:.037},h={min:40,max:120,vw:.05},u={min:40,max:80,vh:.046},p={min:10,max:60,vw:.03},f={min:10,max:60,vh:.037},m=f,g={min:10,max:40,vw:.03},v=22;var y,b,w,x,S;function M(e,t,i){b=e,w=t,y=i}function k(){_(),function(){let e=R(u),t=R(h),i=R(f),l=R(m),c=R(g);if(window.spectating)return void I(mobileShoot,mobileAimShoot,mobileReload,mobileKSwap,mobileScope,mobileSwap,mobileCrouch,mobileJump);(function(){for(var e in arguments)"none"==arguments[e].style.display&&(arguments[e].style.display="")})(mobileShoot,mobileAimShoot,mobileReload,mobileKSwap,mobileScope,mobileSwap,mobileCrouch,mobileJump),C(mobileShoot,{right:t,bottom:e}),C(mobileAimShoot,{right:t,bottom:e}),T();let d=mobileScope.getBoundingClientRect().width/2,p={x:d+t,y:d+e},y=mobileReload.getBoundingClientRect().width/2,b={y:i+y},w=y+d+v,x=p.y-b.y,S=Math.sqrt(w*w-x*x);b.x=S+p.x,C(mobileReload,{right:b.x-y,bottom:i}),C(mobileKSwap,{right:b.x+y+v,bottom:l});let M=mobileCrouch.getBoundingClientRect().width/2,k={x:c+M},_=M+d+v,P=p.x-k.x,E=Math.sqrt(_*_-P*P);k.y=E+p.y,C(mobileCrouch,{right:c,bottom:k.y-M}),C(mobileJump,{right:c,bottom:k.y+M+v});let D=mobileJump.getBoundingClientRect(),O=mobileJump.getBoundingClientRect().width;C(mobileSwap,{right:c-8,top:D.y-16-O});let L=Object(n.a)();if(L&&L.Game&&L.Game.mode){let e=A(L);e!==s&&(e===a?I(mobileAimShoot,mobileScope,mobileReload,mobileKSwap,mobileSwap):e!==r&&e!==o||I(mobileSwap))}}(),function(){let e=R(d),t=R(c),i=R(l),n=R(p),s=i/2,a={x:t+s,y:e+s};C(S,{left:a.x,bottom:a.y});let r=mobileScope.getBoundingClientRect().width/2,o={x:n+r},h=r+s+v,u=a.x-o.x,f=Math.sqrt(h*h-u*u);o.y=f+a.y,C(mobileScope,{left:n,bottom:o.y-r})}()}function _(){x&&x.destroy(),(x=nipplejs.create({zone:mobileJoystick,size:120,multitouch:void 0,mode:"static",color:"black"})).on("move",b),x.on("end",w)}function T(){let e=y();const t=A(Object(n.a)())==a;mobileShoot.classList.toggle("hidden",!e&&!t),mobileAimShoot.classList.toggle("hidden",!!e)}function C(e,t){["left","top","right","bottom"].forEach((function(i){e.style[i]=t[i]||0==t[i]?t[i]+"px":"unset"}))}function I(){for(var e in arguments)arguments[e].style.display="none"}function A(e){if(!e)return s;let t=e.loadout.classIndex,i=e.Game.classConfig[t],n=i.loadout[0],l=e.Game.weaponConfig[n],c=!l.melee&&!l.secondary,d=i.secondary||l.secondary;return n&&12===n?d?o:a:c&&!d||!c&&d?r:s}function R(e){let t=99999;return e.vw&&(t=window.innerWidth*e.vw),e.vh&&(t=Math.min(t,window.innerHeight*e.vh)),Math.max(e.min,Math.min(e.max,t))}},function(e,t,i){const n=i(4),s=i(1),a=i(15);e.exports=function(e,t,i,r,o,l,c,d,h,u,p){var f,m=this;this.tmp={},this.bundleMedalFilters=function(){var e=[];1!=m.tmp.medalSat&&e.push("saturate("+100*m.tmp.medalSat+"%)"),0!=m.tmp.medalHue&&e.push("hue-rotate("+3.6*m.tmp.medalHue+"deg)"),d.medalPrefab.filter=e.length?e.join(" "):null},this.list={defaultRegion:{name:"settings.local.region",info:"Connect to a specific region",cat:"local",noMod:!0,mobileFriendly:!0,get val(){return currentStorage[o.PING_REGION_CACHE_KEY]},set val(e){},options:Object.fromEntries(Object.keys(n.availableRegions).map((e=>[n.availableRegions[e],n.regionNames[n.availableRegions[e]]]))),type:"select",set:function(e){e&&n.isProd&&currentStorage.setItem(o.PING_REGION_CACHE_KEY,e)}},lang:{name:"settings.local.lang",info:"Adjust localization",cat:"local",noMod:!0,mobileFriendly:!1,val:u.locale,options:Object.fromEntries(Object.keys(u.supported).map((e=>[u.supported[e],n.langNames[u.supported[e]]]))),type:"select",set:function(e){e&&(u.setLocale(e),"block"==windowHolder.style.display&&c.toggleWindow(!1,i.gamepad.active))}},netRate:{name:"settings.network.netRate",info:"Amount of data sent to server",cat:"network",val:i.isMobile?1:3,noMod:!0,options:{0:30,1:60,2:120,3:144,4:240,5:360},type:"select",set:function(e){m.tmp[this.key]=this.options[e]}},lagComp:{name:"settings.network.lagComp",info:"Reduces the appearance of lag",cat:"network",val:1,min:0,max:1,step:.1,type:"slider",set:function(e){m.tmp[this.key]=e}},netRerouting:{name:"settings.network.netRerouting",info:"Use CloudFlare routing. May improve connection. Restart required",cat:"network",val:!1,needsRestart:!0,info:"Requires Restart",type:"switch",set:function(e){m.tmp[this.key]=e}},showNetStat:{name:"settings.network.net-stats",cat:"network",sType:"advanced",noMod:!0,val:!1,type:"switch",set:function(e){h.trackPacketStats=e,h.resetPacketTally(),window.updatePacketLoop(e),ingressDisplay.style.display=e?"block":"none",egressDisplay.style.display=e?"block":"none",tickDisplay.style.display=e?"block":"none"}},oldBrowser:{name:"settings.serverb.oldBrowser",info:"Older server browser",cat:"serverb",val:!0,toggle:!0,type:"switch",set:function(e){m.tmp[this.key]=e}},defaultRegionOnly:{name:"settings.serverb.defaultRegionOnly",info:"Display servers from your default region selection",cat:"serverb",val:!1,toggle:!0,type:"switch",set:function(e){m.tmp[this.key]=e}},rawMouse:{name:"settings.experimental.rawMouse",info:"Use raw mouse input when available",cat:"experimental",val:!1,type:"switch",set:function(e){m.tmp[this.key]=e,i.toggleMouseInputs(!!e)}},flickClamp:{name:"settings.experimental.mouseFlickFix",cat:"experimental",val:200,min:0,max:500,step:10,style:"width: 244px;",html:function(){return l._html.settings.input.switch(m.list.mouseFlick)+l._html.settings.input.slider(this)},set:function(e){m.tmp[this.key]=parseInt(e),i.flickClamp=parseInt(e)}},mouseFlick:{name:"settings.experimental.mouseFlickFix",info:"Prevents mouse from flicking too far",cat:"experimental",val:!!i.isMobile,hide:!0,html:function(){},set:function(e){m.tmp[this.key]=!!e,i.mouseSkipFix=!!e}},aimFreezeFix:{name:"settings.experimental.aimFreezeFix",info:"Possible fix for jittery/freezing aiming",cat:"experimental",val:!1,type:"switch",set:function(e){m.tmp[this.key]=e}},shaderRendering:{name:"settings.experimental.shaderRendering",cat:"experimental",val:!1,needsRestart:!0,info:"Requires Restart",type:"switch",set:function(e){m.tmp[this.key]=e}},mouseAccel:{name:"settings.experimental.mouseAccel",cat:"experimental",val:!0,hide:!!p,type:"switch",set:function(e){m.tmp[this.key]=e,i.mouseAccel=!!e}},kpdVision:{name:"settings.kpd.vision",info:"KPD use only",cat:"kpd",kpd:!0,val:!0,hide:!0,toggle:!0,html:function(){},set:function(e){m.tmp[this.key]=e,d.kpdVision=!!e}},kpdVisionCol:{name:"settings.kpd.visionCol",info:"KPD use only",cat:"kpd",kpd:!0,val:"#00ffff",color:!0,html:function(){return l._html.settings.input.switch(m.list.kpdVision)+l._html.settings.input.color(this)},set:function(e){m.tmp[this.key]=e,d.kpdVisionCol=e}},forceUpdate:{name:"settings.dev.forceUpdate",info:"Developer use only",cat:"dev",dev:!0,val:!0,type:"switch",set:function(){}},forceRegen:{name:"settings.dev.forceRegen",info:"Developer use only",cat:"dev",dev:!0,val:!1,type:"switch",set:function(){}},extraBan:{name:"settings.dev.extraBan",info:"Developer use only",cat:"dev",admin:!0,val:!1,type:"switch",set:function(){}},resolution:{name:"settings.quality.res",info:"Ratio of pixels displayed (lower to increase performance)",cat:"quality",mobileFriendly:!0,pro:1,perf:.4,val:i.isMobile?.4:.6,min:.1,max:2,step:.1,type:"slider",set:function(t){m.tmp[this.key]=t,e.setResMlt(t),"updateClassRender"in window&&window.updateClassRender()}},updateRate:{name:"settings.quality.updRate",info:"Frame per second cap (0 = unlimited)",cat:"quality",sType:"advanced",min:0,max:1200,val:0,step:10,type:"slider",set:function(e){e&&e<10&&(e=10),m.tmp[this.key]=e}},aspectRatio:{name:"settings.quality.aspectRatio",info:"Force the page to fit monitor size (native = automatic)",cat:"quality",pro:"1280x1024",val:"",testfor:/^[-]?\d*x[-]?\d*$/g,placeholder:window.innerWidth+"x"+window.innerHeight,type:"input",html:function(){var e="<select onchange='aspectSelect(\"aspectRatio\", this)' class='inputGrey2'>";e+="<option value='' disabled selected>Presets</option>";for(var t=0;t<n.customRatios.length;t++)e+="<option>"+n.customRatios[t]+"</option>";return(e+="</select>")+l._html.settings.input.generic(this)},set:function(t){m.tmp[this.key]=t,e.aspectRatio=t,e.resize()}},antiAlias:{name:"settings.quality.antiAlias",info:"Smooth jagged lines. Restart required",cat:"quality",sType:"advanced",pro:!1,perf:!1,val:!1,toggle:!0,needsRestart:!0,type:"switch",set:function(t){m.tmp[this.key]=!!t,e.antiA=!!t}},lowSpec:{name:"settings.quality.lowSpec",info:"Reduces quality to improve performance",cat:"quality",perf:!0,val:!1,toggle:!0,mobileFriendly:!0,type:"switch",set:function(t){m.tmp[this.key]=t,e.lowSpec=t}},noTex:{name:"settings.quality.noTex",info:"Remove all textures. Restart required",cat:"quality",sType:"advanced",perf:!0,val:!1,toggle:!0,mobileFriendly:!0,needsRestart:!0,type:"switch",set:function(t){m.tmp[this.key]=t,e.noTex=t}},mapDet:{name:"settings.quality.mapDet",info:"Hide details such as grass. Restart required",cat:"quality",needsRestart:!0,perf:!1,val:!i.isMobile,mobileFriendly:!0,toggle:!0,type:"switch",set:function(t){m.tmp[this.key]=t,e.mapDet=t}},particles:{name:"settings.quality.part",info:"Display particle effects",cat:"quality",pro:!1,perf:!1,mobileFriendly:!0,val:!0,toggle:!0,type:"switch",set:function(e){m.tmp[this.key]=e,t.active=!!e}},particlesDist:{name:"settings.quality.partdist",info:"Display particles within this distance",cat:"quality",val:160,min:10,max:1e3,mobileFriendly:!0,step:10,type:"slider",set:function(e){m.tmp[this.key]=e,t.partDst=e}},renderDist:{name:"settings.quality.renderdist",info:"Render everything within this distance",cat:"quality",mobileFriendly:!0,val:100,min:1,max:100,step:1,type:"slider",set:function(t){m.tmp[this.key]=60*t,e.camera.far=60*t}},reflection:{name:"settings.quality.reflection",info:"Quality of reflected objects on water. Restart required",cat:"quality",sType:"advanced",val:i.isMobile?2:0,needsRestart:!0,options:{0:"Map Dependent",1:32,2:64,3:128,4:256,5:1024,6:2048},type:"select",set:function(t){m.tmp[this.key]=parseInt(t),e.reflectionQuality=parseInt(t)}},shadows:{name:"settings.quality.shadows",info:"Render shadows from players and objects",cat:"quality",pro:!1,perf:!1,val:!i.isMobile,toggle:!0,type:"switch",set:function(t){m.tmp[this.key]=t,e.toggleShadowMap(t)}},softShad:{name:"settings.quality.softShad",info:"Give shadows a softer appearance",cat:"quality",sType:"advanced",needsRestart:!0,pro:!1,perf:!1,val:!1,type:"switch",set:function(t){m.tmp[this.key]=!!t,e.toggleShadQual(!!t)}},highResShad:{name:"settings.quality.highResShad",info:"Improve shadow quality. Restart required",cat:"quality",sType:"advanced",needsRestart:!0,pro:!1,perf:!1,val:!1,type:"switch",set:function(t){e.highResShad=!!t}},shadowsDynamic:{name:"settings.quality.shadowsDynamic",info:"Shadows update real-time",cat:"quality",sType:"advanced",pro:!1,perf:!1,val:!1,toggle:!0,type:"switch",set:function(t){m.tmp[this.key]=t,e.toggleShadowAuto(t)}},ambientShading:{name:"settings.quality.ambientOld",cat:"quality",sType:"advanced",pro:!1,perf:!1,val:!0,toggle:!0,type:"switch",set:function(t){m.tmp[this.key]=t,e.toggleMeshGroup("ambient_1",t),e.toggleMeshGroup("ambient_0",t)}},showTrails:{name:"settings.quality.trails",info:"Displays a trail following bullets",cat:"quality",sType:"advanced",pro:!1,perf:!1,val:!0,toggle:!0,type:"switch",set:function(e){m.tmp[this.key]=e,t.showTrails=e}},yourTrails:{name:"settings.quality.yourTrails",info:"Displays your own bullet trail",cat:"quality",sType:"advanced",perf:!1,val:!0,toggle:!0,type:"switch",set:function(e){m.tmp[this.key]=e,t.yourTrails=e}},muzzleFlash:{name:"settings.quality.mflash",info:"Flash of light when weapon is fired",cat:"quality",sType:"advanced",pro:!1,perf:!1,val:!i.isMobile,toggle:!0,type:"switch",set:function(e){m.tmp[this.key]=e,t.showMuzzle=e}},bulletCasings:{name:"settings.quality.bulletC",info:"Bullet casings when weapon is fired",cat:"quality",sType:"advanced",pro:!1,perf:!1,val:!0,toggle:!0,type:"switch",set:function(e){m.tmp[this.key]=e,t.showCasings=e}},impactHoles:{name:"settings.quality.impacts",info:"Bullet hole when weapon impacts objects",cat:"quality",sType:"advanced",pro:!1,perf:!1,val:!0,toggle:!0,type:"switch",set:function(e){m.tmp[this.key]=e,t.showImpactHoles=e}},sniperFlap:{name:"settings.quality.flap",info:"Animated flap to protect scope",cat:"quality",sType:"advanced",val:!1,toggle:!0,type:"switch",set:function(t){m.tmp[this.key]=t,e.sniperFlap=t}},sniperFlapAnim:{name:"settings.quality.flapAnim",info:"Prevents sniper flap from moving",cat:"quality",sType:"advanced",val:!0,toggle:!0,type:"switch",set:function(t){m.tmp[this.key]=t,e.sniperFlapAnim=t}},textureAnim:{name:"settings.quality.textureAnim",info:"Force textures to remain unanimated",cat:"quality",mobileFriendly:!0,sType:"advanced",perf:!1,val:!0,toggle:!0,type:"switch",set:function(t){if(m.tmp[this.key]=t,e.textureAnim=t,!t){for(var i=0;i<e.movTextures.length;++i)(f=e.movTextures[i]).tex.offset&&(f.tex.offset[0==f.movD?"x":"y"]=0);for(i=0;i<e.pulsMats.length;++i)e.pulsMats[i].mat.emissiveIntensity=0;for(i=0;i<e.frameMats.length;++i)(f=e.frameMats[i]).dur=f.orgDur,f.cur=0,f.mat.map&&(f.mat.map.offset.x=f.cur%f.num/f.num)}}},objectAnim:{name:"settings.quality.objectAnim",cat:"quality",sType:"advanced",mobileFriendly:!0,perf:!1,val:!0,toggle:!0,type:"switch",set:function(t){m.tmp[this.key]=t,e.objectAnim=t}},screenShake:{name:"settings.quality.screenShake",info:"Move screen during explosion",cat:"quality",sType:"advanced",perf:!1,val:!0,toggle:!0,type:"switch",set:function(t){m.tmp[this.key]=t,e.screenShake=t,e.shakeX=0,e.shakeY=0}},weaponShine:{name:"settings.quality.weaponShine",info:"Give shine to weapon skin",cat:"quality",sType:"advanced",perf:!1,val:!1,toggle:!0,type:"switch",set:function(t){m.tmp[this.key]=t,e.weaponShine=t}},lighting:{name:"settings.quality.lighting",info:"Render quality of game lighting. Restart required",cat:"quality",sType:"advanced",perf:0,val:i.isMobile?0:1,needsRestart:!0,options:{0:"Low",1:"Normal",2:"High",3:"Physical"},type:"select",set:function(t){m.tmp[this.key]=t,e.lighting=t}},showExplo:{name:"settings.quality.showExplo",info:"Display explosion animation and particles",cat:"quality",sType:"advanced",val:!0,toggle:!0,type:"switch",set:function(e){m.tmp[this.key]=e}},postProcessing:{name:"settings.post.post",info:"Toggles visual post effects",cat:"post",val:!i.isMobile,type:"switch",set:function(t){m.tmp[this.key]=t,e.postprocessing.enabled=t}},scaleUI:{name:"settings.interface.scale",info:"Scales the menu UI",cat:"interface",perf:1,val:i.isMobile?.9:.7,min:.1,max:1,step:.1,style:"width: 244px;",html:function(){return l._html.settings.input.switch(m.list.uiScaling)+l._html.settings.input.slider(this)},set:function(e){m.tmp[this.key]=1-e+1,window.scaleBase(null,!0)}},uiScaling:{name:"settings.interface.scale",info:"Scales HUD size",cat:"interface",val:!0,hide:!0,html:function(){},set:function(e){m.tmp[this.key]=e,window.scaleBase(null,!0)}},showUI:{name:"settings.interface.ui",info:"Hide HUD in-game",cat:"interface",val:!0,toggle:!0,type:"switch",set:function(e){m.tmp[this.key]=!!e,c.hideGameUI=!e,chatUI.style.display=e?"block":"none",window.refreshChat()}},oldScoreboard:{name:"settings.interface.scoreboard",info:"Use Classic io Scoreboard",cat:"interface",sType:"advanced",val:!!i.isMobile,toggle:!0,type:"switch",set:function(e){m.tmp[this.key]=e,window.switchLeaderboard(e)}},disableRarityAnim:{name:"settings.interface.rarityanim",info:"Use unanimated color for rarity",cat:"interface",sType:"advanced",val:!1,toggle:!0,type:"switch",set:function(t){m.tmp[this.key]=!t,e.rarityAnim=!t,refreshClassDisplay()}},showPfp:{name:"settings.interface.showPfp",info:"Hide custom profile pictures",cat:"interface",sType:"advanced",val:!i.isMobile,toggle:!0,type:"switch",set:function(e){m.tmp[this.key]=e}},dynamicHP:{name:"settings.interface.hp",cat:"interface",sType:"advanced",perf:!1,val:!0,toggle:!0,type:"switch",set:function(e){m.tmp[this.key]=e,d.dynamicHP=e}},showHitInd:{name:"settings.interface.hitInd",info:"Indicator appears when a bullet hits a player",cat:"interface",sType:"advanced",pro:!1,perf:!1,val:!0,toggle:!0,type:"switch",set:function(e){m.tmp[this.key]=e,d.showHits=e,!e&&d.hits&&(d.hits.length=0)}},hitColor:{name:"settings.interface.hitColor",info:"Color for hit indicator",cat:"interface",sType:"advanced",val:"#FF3F3F",color:!0,type:"color",set:function(e){m.tmp[this.key]=s.hexToRGB(e).join(","),d.hitColor=s.hexToRGB(e).join(",")}},deathMarkerOpac:{name:"settings.interface.deathMarkers",info:"Indicator appears when you or a teammate dies",cat:"interface",sType:"advanced",val:1,min:0,max:1,step:.1,style:"width: 244px;",html:function(){return l._html.settings.input.select(m.list.deathMarkers)+l._html.settings.input.slider(this)},set:function(e){m.tmp[this.key]=e,d.deathMarkerOpacity=parseFloat(e)||0}},deathMarkers:{name:"settings.interface.deathMarkers",info:"Indicator appears when you or a teammate dies",cat:"interface",sType:"advanced",perf:!1,hide:!0,val:0,options:{0:"All",1:"Self Only",2:"Team Only",3:"None"},type:"select",html:function(){},set:function(e){m.tmp[this.key]=e,d.deathMarkerDisplay=parseInt(e)||0,3==e&&d.deathMarkers&&(d.deathMarkers.length=0)}},deathMarkerAdsOpac:{name:"settings.interface.deathMarkersAds",info:"Deathmarker opacity while aiming",cat:"interface",sType:"advanced",val:1,min:0,max:1,step:.1,type:"slider",set:function(e){m.tmp[this.key]=e,d.deathMarkerAdsOpacity=parseFloat(e)||0}},deathMarkerDur:{name:"settings.interface.deathMarkersDur",info:"How long a death marker displays",cat:"interface",sType:"advanced",val:7,min:0,max:10,step:1,type:"slider",set:function(e){m.tmp[this.key]=e,d.deathMarkerDuration=parseInt(e)||0}},dmgType:{name:"settings.interface.dmgType",info:"Display damage amount on hit",cat:"interface",sType:"advanced",val:1,options:{0:u.t("settings.interface.dmgType.default"),1:u.t("settings.interface.dmgType.float")},html:function(){return l._html.settings.input.switch(m.list.showDMG)+l._html.settings.input.select(this)},set:function(e){m.tmp[this.key]=e,d.dmgType=e}},showDMG:{name:"settings.interface.dmg",info:"Display damage amount on hit",cat:"interface",sType:"advanced",pro:!1,perf:!1,val:!0,hide:!0,toggle:!0,html:function(){},set:function(e){m.tmp[this.key]=e,d.showDMG=e}},dmgColor:{name:"settings.interface.dmgCol",info:"Color for damage indicator",cat:"interface",sType:"advanced",val:a.damage,color:!0,type:"color",set:function(e){m.tmp[this.key]=e,d.dmgColor=e}},critColor:{name:"settings.interface.critCol",info:"Color used when dealing critical damage",cat:"interface",sType:"advanced",val:a.critical,color:!0,type:"color",set:function(e){m.tmp[this.key]=e,d.critColor=e}},dmgScale:{name:"settings.interface.dmgScale",info:"Size of Damage indicator",cat:"interface",sType:"advanced",pro:.5,val:1,min:.1,max:2,step:.1,type:"slider",set:function(e){m.tmp[this.key]=30*e,d.dmgScale=30*e}},showKills:{name:"settings.interface.killf",info:"Display Kill feed",cat:"interface",sType:"advanced",val:!0,toggle:!0,type:"switch",set:function(e){killFeed.style.display=e?"inline-grid":"none",m.tmp[this.key]=e}},showKillC:{name:"settings.interface.kills",info:"Display your kills",cat:"interface",sType:"advanced",val:!1,toggle:!0,type:"switch",set:function(e){m.tmp[this.key]=e,killCount.style.display=e?"inline-block":"none"}},showDeaths:{name:"settings.interface.deaths",info:"Display your deaths",cat:"interface",sType:"advanced",pro:!0,val:!1,toggle:!0,type:"switch",set:function(e){m.tmp[this.key]=e,deathCount.style.display=e?"inline-block":"none"}},showKD:{name:"settings.interface.kd",info:"Display your K/D Ratio",cat:"interface",sType:"advanced",val:!1,toggle:!0,type:"switch",set:function(e){m.tmp[this.key]=e,kdCount.style.display=e?"inline-block":"none"}},showScore:{name:"settings.interface.score",info:"Display your score",cat:"interface",sType:"advanced",val:!1,toggle:!0,type:"switch",set:function(e){m.tmp[this.key]=e,scoreCount.style.display=e?"inline-block":"none"}},showStreak:{name:"settings.interface.streak",info:"Display your current killstreak",cat:"interface",sType:"advanced",pro:!0,val:!1,toggle:!0,type:"switch",set:function(e){m.tmp[this.key]=e,streakCount.style.display=e?"inline-block":"none"}},showPing:{name:"settings.interface.ping",info:"Display most recent ping",cat:"interface",val:!0,toggle:!0,type:"switch",set:function(e){m.tmp[this.key]=e,pingDisplay.style.display=e?"block":"none"}},showFPS:{name:"settings.interface.fps",info:"Display Frames per Second",cat:"interface",pro:!0,perf:!1,val:!1,toggle:!0,type:"switch",set:function(e){m.tmp[this.key]=e,fpsDisplay.style.display=menuFPSDisplay.style.display=e?"block":"none"}},fpsRate:{name:"settings.interface.fps.rate",info:"FPS display update rate",cat:"interface",val:100,min:0,max:1e3,step:10,type:"slider",set:function(e){m.tmp[this.key]=e}},showSpeed:{name:"settings.interface.speed",info:"Display movement speed",cat:"interface",val:!1,toggle:!0,type:"switch",set:function(e){m.tmp[this.key]=e,d.speedDisplay.display=e}},speedOffX:{name:"settings.interface.speedOffX",info:"Move Speed indicator left or right",cat:"interface",sType:"advanced",val:5,min:0,max:10,step:.1,type:"slider",set:function(e){m.tmp[this.key]=10*e,d.speedDisplay.left=10*e}},speedOffY:{name:"settings.interface.speedOffY",info:"Move Speed indicator up or down",cat:"interface",sType:"advanced",val:5.4,min:0,max:10,step:.1,type:"slider",set:function(e){m.tmp[this.key]=10*e,d.speedDisplay.top=10*e}},speedScale:{name:"settings.interface.speedScale",info:"Size of speed indicator",cat:"interface",sType:"advanced",val:2.4,min:.5,max:5,step:.1,type:"slider",set:function(e){m.tmp[this.key]=10*e,d.speedDisplay.fontSize=10*e}},speedOpacity:{name:"settings.interface.speedOpacity",info:"Opacity of speed indicator",cat:"interface",sType:"advanced",val:1,min:0,max:1,step:.1,type:"slider",set:function(e){m.tmp[this.key]=e,d.speedDisplay.opacity=e}},speedColor:{name:"settings.interface.speedColor",info:"Color for your current speed",cat:"interface",sType:"advanced",val:"#ffea78",color:!0,type:"color",set:function(e){m.tmp[this.key]=e,d.speedDisplay.color=e}},speedColorMax:{name:"settings.interface.speedColorMax",info:"Color for your max-recorded speed",cat:"interface",sType:"advanced",val:"#ff0000",color:!0,type:"color",set:function(e){m.tmp[this.key]=e,d.speedDisplay.colorMax=e}},hideNames:{name:"settings.interface.hideNames",info:"Display nametags for everyone, no one, team, or enemies",cat:"interface",mobileFriendly:!0,val:0,options:{0:u.t("settings.interface.hideNames.all"),1:u.t("settings.interface.hideNames.team"),2:u.t("settings.interface.hideNames.enemy"),3:u.t("generic.off")},type:"select",set:function(e){m.tmp[this.key]=e}},nametagOpac:{name:"settings.interface.nametagOpac",info:"Opacity for nametags",cat:"interface",sType:"advanced",val:1,min:0,max:1,step:.1,type:"slider",set:function(e){m.tmp[this.key]=e,d.nametagOpacity=e}},nametagScale:{name:"settings.interface.nametagScale",info:"Size of nametags",cat:"interface",sType:"advanced",val:1,min:0,max:1,step:.1,type:"slider",set:function(e){m.tmp[this.key]=e,d.nametagScale=e}},nametagStyle:{name:"settings.interface.nametagStyle",info:"Display level, name, and health with nametags",cat:"interface",sType:"advanced",val:0,options:{0:u.t("settings.interface.nametagStyle.all"),1:u.t("settings.interface.nametagStyle.name"),2:u.t("settings.interface.nametagStyle.nameLvl"),3:u.t("settings.interface.nametagStyle.health"),4:u.t("settings.interface.nametagStyle.simple")},type:"select",set:function(e){m.tmp[this.key]=e,d.nametagStyle=e}},healthNum:{name:"settings.interface.healthNum",info:"Include number to indicate current health",cat:"interface",sType:"advanced",val:!1,toggle:!0,type:"switch",set:function(e){m.tmp[this.key]=e,d.healthNum=e}},healthColT:{name:"settings.interface.healthColT",info:"Color for team health bar",cat:"interface",sType:"advanced",val:a.teams[0],color:!0,type:"color",set:function(e){m.tmp[this.key]=e,d.healthColT=e}},healthColE:{name:"settings.interface.healthColE",info:"Color for enemy health bar",cat:"interface",sType:"advanced",val:a.teams[1],color:!0,type:"color",set:function(e){m.tmp[this.key]=e,d.healthColE=e}},objOpac:{name:"settings.interface.objOpac",info:"Opacity for Objective Info",cat:"interface",sType:"advanced",val:1,min:0,max:1,step:.1,type:"slider",set:function(e){m.tmp[this.key]=e,d.objectiveOpacity=e}},adsObjOpac:{name:"settings.interface.adsObjOpac",info:"Opacity for Objective Info while adsing",cat:"interface",sType:"advanced",val:.5,min:0,max:1,step:.1,type:"slider",set:function(e){m.tmp[this.key]=e,d.adsObjectiveOpacity=e}},hideNonTrade:{name:"settings.interface.hideNonTrade",cat:"interface",sType:"advanced",val:!1,toggle:!0,type:"switch",set:function(e){m.tmp[this.key]=e}},showMinimap:{name:"settings.minimap.show",cat:"minimap",sType:"advanced",val:!0,toggle:!0,type:"switch",set:function(e){m.tmp[this.key]=e,window&&window.toggleMinimap&&window.toggleMinimap(!!e)}},minimapScale:{name:"settings.minimap.scale",cat:"minimap",sType:"advanced",val:1,min:.5,max:1.5,step:.1,type:"slider",set:function(e){m.tmp[this.key]=e,d.miniMap.setScale(parseFloat(e))}},minimapZoom:{name:"settings.minimap.zoom",cat:"minimap",sType:"advanced",val:1,min:.5,max:1.5,step:.1,type:"slider",set:function(e){m.tmp[this.key]=e,d.miniMap.setZoom(parseFloat(e))}},miniMapHudScale:{name:"settings.minimap.scale.hud",cat:"minimap",sType:"advanced",val:1,min:.5,max:1.5,step:.1,type:"slider",set:function(e){m.tmp[this.key]=e,d.miniMap.setHudScale(parseFloat(e))}},showMedals:{name:"settings.medals.show",cat:"medals",perf:!1,val:!0,toggle:!0,type:"switch",set:function(e){m.tmp[this.key]=e}},classicMedals:{name:"settings.medals.classic",cat:"medals",val:!1,toggle:!0,type:"switch",set:function(e){m.tmp[this.key]=e}},playMedals:{name:"settings.medals.sound",info:"Toggle sounds emmited from medals",cat:"medals",perf:!1,val:!0,toggle:!0,type:"switch",set:function(e){m.tmp[this.key]=e,d.medalPrefab.sound=!!e}},medalScale:{name:"settings.medals.scale",info:"Size of medals",cat:"medals",val:1,min:0,max:2,step:.1,type:"slider",set:function(e){m.tmp[this.key]=e,d.medalPrefab.scale=e}},medalOffX:{name:"settings.medals.xOff",info:"Move medals left or right",cat:"medals",val:5,min:0,max:10,step:.1,type:"slider",set:function(e){m.tmp[this.key]=10*e,d.medalPrefab.left=10*e}},medalOffY:{name:"settings.medals.yOff",info:"Move medals up or down",cat:"medals",val:1,min:0,max:10,step:.1,type:"slider",set:function(e){m.tmp[this.key]=10*e,d.medalPrefab.top=10*e}},medalSat:{name:"settings.medals.saturation",info:"Increase color saturation of medals",cat:"medals",mobileFriendly:!0,val:1,perf:1,min:0,max:3,step:.1,type:"slider",set:function(e){m.tmp[this.key]=e,m.bundleMedalFilters()}},medalHue:{name:"settings.medals.hue",info:"Shift colors of medals",cat:"medals",val:0,min:0,max:100,step:5,type:"slider",set:function(e){m.tmp[this.key]=e,m.bundleMedalFilters()}},shwChat:{name:"settings.chat.chat",info:"Show chat box all the time, only when typing, and never",cat:"chat",val:0,options:{0:u.t("settings.chat.chat.all"),1:u.t("settings.chat.chat.focus"),2:u.t("generic.off")},type:"select",set:function(e){m.tmp[this.key]=e,chatList.style.display=0==e?"block":"none"}},chatFilter:{name:"settings.chat.chatFilter",info:"Hide profanity in chat",cat:"chat",val:!1,toggle:!0,type:"switch",set:function(e){m.tmp[this.key]=e}},showMessages:{name:"settings.chat.messages",info:"Display player chat messages",cat:"chat",val:!0,toggle:!0,type:"switch",set:function(e){m.tmp[this.key]=e}},showUnboxings:{name:"settings.chat.unboxings",info:"Display player unboxings",cat:"chat",pro:!1,val:!0,toggle:!0,type:"switch",set:function(e){m.tmp[this.key]=e}},chatOp:{name:"settings.chat.chatOp",info:"Opacity for Chat box",cat:"chat",val:1,min:0,max:1,step:.1,type:"slider",set:function(e){m.tmp[this.key]=e,chatList.style.opacity=e}},chatBGOp:{name:"settings.chat.chatBGOp",info:"Opacity for chat background",cat:"chat",val:.2,min:0,max:1,step:.1,type:"slider",set:function(e){m.tmp[this.key]=e,Array.from(document.getElementsByClassName("chatItem")).forEach((function(t){t.style.backgroundColor="rgba(0, 0, 0, "+e+")"}))}},chatTextOutline:{name:"settings.chat.chatTextOutline",info:"Give chat messages a black outline",cat:"chat",val:!1,toggle:!0,type:"switch",set:function(e){m.tmp[this.key]=e,Array.from(document.getElementsByClassName("chatItem")).forEach((function(t){t.classList.toggle("chatTextOutline",e)}))}},chatHeight:{name:"settings.chat.chatHeight",info:"Size of chatbox height",cat:"chat",val:2.5,min:0,max:5,step:.1,type:"slider",set:function(e){m.tmp[this.key]=100*e+"px",chatList.style.maxHeight=100*e+"px",window.refreshChat()}},chatTimer:{name:"settings.chat.chatTimer",info:"Chat messages will only appear for this many seconds (0 = no timer)",cat:"chat",val:0,min:0,max:10,step:.5,type:"slider",set:function(e){m.tmp[this.key]=e,window.updateChatTimer(e)}},crosshairSho:{name:"settings.crosshair.type",info:"Type of crosshair displayed",cat:"crosshair",pro:4,val:1,options:{0:u.t("generic.off"),1:u.t("settings.crosshair.type.1"),2:u.t("settings.crosshair.type.2"),3:u.t("settings.crosshair.type.3"),4:u.t("settings.crosshair.type.4"),5:u.t("settings.crosshair.type.5")},type:"select",set:function(e){let t;m.tmp[this.key]=e,d.crosshairType=e;let i=["crosshairAlways","crosshairOpacity","crosshairLen","crosshairThick"];for(let n of i)m.list[n].hide="crosshairAlways"==n||"crosshairOpacity"==n?e<2:4==e||e<2,t=document.getElementById(n+"_div"),t&&(t.style.display=m.list[n].hide?"none":"block");for(let i of["crosshairColor","crosshairShadow","crosshairShadowThickess"])m.list[i].hide=e<1||4==e,t=document.getElementById(i+"_div"),t&&(t.style.display=m.list[i].hide?"none":"block");for(let i of["crosshairImage","crosshairImageW","crosshairImageH"])m.list[i].hide=4!=e,t=document.getElementById(i+"_div"),t&&(t.style.display=m.list[i].hide?"none":"block");m.list.crosshairGap.hide=5!=e,t=document.getElementById("crosshairGap_div"),t&&(t.style.display=m.list.crosshairGap.hide?"none":"block"),m.list.crosshairDot.hide=5!=e&&1!=e,t=document.getElementById("crosshairDot_div"),t&&(t.style.display=m.list.crosshairDot.hide?"none":"block"),m.list.crosshairStyle.hide=e>3||e<2,t=document.getElementById("crosshairStyle_div"),t&&(t.style.display=m.list.crosshairStyle.hide?"none":"block")}},crosshairStyle:{name:"settings.crosshair.style",info:"Crosshair preset",cat:"crosshair",val:0,hide:!0,options:{0:u.t("settings.crosshair.style.0"),1:u.t("settings.crosshair.style.1"),2:u.t("settings.crosshair.style.2"),3:u.t("settings.crosshair.style.3"),4:u.t("settings.crosshair.style.4")},type:"select",set:function(e){m.tmp[this.key]=e,d.crosshairStyle=e}},crosshairImage:{name:"settings.crosshair.image",info:"Custom crosshair image",cat:"crosshair",pro:s.assetsUrl("pro_crosshair.png"),val:"",hide:!0,img:!0,placeholder:u.t("settings.crosshair.image.paste"),type:"url",collection:!0,set:function(e){if((e=s.isURL(e)&&!/\.svg/.test(e)?e:"").length)if(e.includes(".gif")){var t=d.HELPER.GIF();d.crosshairImage.isReady=!1,t.onload=()=>{d.crosshairImage=t,d.crosshairImage.isReady=!0},t.load(e)}else{!!d.crosshairImage.frames?(d.crosshairImage=new Image,d.crosshairImage.onload=()=>d.crosshairImage.isReady=!0,d.crosshairImage.src=e):d.crosshairImage.src!=e&&(d.crosshairImage.isReady=!1,d.crosshairImage.onload=()=>d.crosshairImage.isReady=!0,d.crosshairImage.src=e)}}},crosshairImageW:{name:"settings.crosshair.image.width",info:"Width of crosshair image",cat:"crosshair",val:0,min:0,max:1e3,step:1,hide:!0,type:"slider",set:function(e){m.tmp[this.key]=e,d.crosshairImageW=e}},crosshairImageH:{name:"settings.crosshair.image.height",info:"Height of crosshair image",cat:"crosshair",val:0,min:0,max:1e3,step:1,hide:!0,type:"slider",set:function(e){m.tmp[this.key]=e,d.crosshairImageH=e}},crosshairOpacity:{name:"settings.crosshair.opacity.custom",info:"Opacity for crosshair",cat:"crosshair",val:1,min:0,max:1,step:.1,hide:!0,type:"width: 244px;",html:function(){return l._html.settings.input.switch(m.list.crosshairUseOpacity)+l._html.settings.input.slider(this)},set:function(e){m.tmp[this.key]=e,d.crosshairOpacityCustom=e}},crosshairUseOpacity:{name:"settings.crosshair.opacity.use",cat:"crosshair",val:!1,hide:!0,toggle:!0,html:function(){},set:function(e){m.tmp[this.key]=e,d.crosshairUseOpacityCustom=e}},crosshairAlways:{name:"settings.crosshair.always",info:"Display crosshair while aiming down sight",cat:"crosshair",pro:!0,val:!1,hide:!0,toggle:!0,type:"switch",set:function(e){m.tmp[this.key]=e,d.crosshairAlways=e}},crosshairColor:{name:"settings.crosshair.color",info:"Color for crosshair",cat:"crosshair",val:a.crosshair.background,color:!0,type:"color",set:function(e){m.tmp[this.key]=e,d.crosshairColor=e}},crosshairShadow:{name:"settings.crosshair.shadow.color",info:"Color of crosshair shadow",cat:"crosshair",val:a.crosshair.shadow,color:!0,type:"color",set:function(e){m.tmp[this.key]=e,d.crosshairShadow=e}},crosshairShadowThickess:{name:"settings.crosshair.shadow.thickness",info:"Crosshair shadow thickness",cat:"crosshair",val:1,min:0,max:3,step:.1,hide:!0,type:"slider",set:function(e){m.tmp[this.key]=e,d.crosshairShadowThickness=e}},crosshairThick:{name:"settings.crosshair.thickness",info:"Crosshair thickness",cat:"crosshair",val:2,min:0,max:100,step:.5,hide:!0,type:"slider",set:function(e){m.tmp[this.key]=e,d.crosshairThick=e}},crosshairLen:{name:"settings.crosshair.size",cat:"crosshair",val:16,min:0,max:100,step:.5,hide:!0,type:"slider",set:function(e){m.tmp[this.key]=e,d.crosshairLen=e}},crosshairGap:{name:"settings.crosshair.gap",info:"Gap between center dot and lines",cat:"crosshair",val:0,min:-100,max:100,step:1,hide:!0,type:"slider",set:function(e){m.tmp[this.key]=e,d.crosshairGap=e}},crosshairDot:{name:"settings.crosshair.dot",info:"Display center dot in crosshair",cat:"crosshair",val:!0,hide:!0,toggle:!0,type:"switch",set:function(e){m.tmp[this.key]=e,d.crosshairDot=e}},crosshairShoM:{name:"settings.crosshairm.type",info:"Crosshair used while throwing knife",cat:"crosshairm",pro:4,val:3,options:{0:u.t("generic.off"),1:u.t("settings.crosshairm.type.1"),2:u.t("settings.crosshairm.type.2"),3:u.t("settings.crosshairm.type.3")},type:"select",set:function(e){let t;m.tmp[this.key]=e,d.crosshairTypeM=e;let i=["crosshairAlwaysM","crosshairOpacityM","crosshairLenM","crosshairThickM"];for(let n of i)m.list[n].hide="crosshairAlwaysM"==n||"crosshairOpacityM"==n?e<1:2==e||e<1,t=document.getElementById(n+"_div"),t&&(t.style.display=m.list[n].hide?"none":"block");for(let i of["crosshairColorM","crosshairShadowM","crosshairShadowThickessM"])m.list[i].hide=e<1||2==e,t=document.getElementById(i+"_div"),t&&(t.style.display=m.list[i].hide?"none":"block");for(let i of["crosshairImageM","crosshairImageWM","crosshairImageHM"])m.list[i].hide=2!=e,t=document.getElementById(i+"_div"),t&&(t.style.display=m.list[i].hide?"none":"block");m.list.crosshairGapM.hide=3!=e,t=document.getElementById("crosshairGapM_div"),t&&(t.style.display=m.list.crosshairGapM.hide?"none":"block"),m.list.crosshairDotM.hide=3!=e,t=document.getElementById("crosshairDotM_div"),t&&(t.style.display=m.list.crosshairDotM.hide?"none":"block"),m.list.crosshairStyleM.hide=1!=e,t=document.getElementById("crosshairStyleM_div"),t&&(t.style.display=m.list.crosshairStyleM.hide?"none":"block")}},crosshairStyleM:{name:"settings.crosshairm.style",info:"Throwing crosshair preset",cat:"crosshairm",val:0,hide:!0,options:{0:u.t("settings.crosshairm.style.0"),1:u.t("settings.crosshairm.style.1"),2:u.t("settings.crosshairm.style.2"),3:u.t("settings.crosshairm.style.3"),4:u.t("settings.crosshairm.style.4")},type:"select",set:function(e){m.tmp[this.key]=e,d.crosshairStyleM=e}},crosshairImageM:{name:"settings.crosshairm.image",info:"Custom throwing crosshair image",cat:"crosshairm",val:"",hide:!0,img:!0,placeholder:u.t("settings.crosshairm.image.paste"),type:"url",collection:!0,set:function(e){if((e=s.isURL(e)&&!/\.svg/.test(e)?e:"").length)if(e.includes(".gif")){var t=d.HELPER.GIF();d.crosshairImageM.isReady=!1,t.onload=()=>{d.crosshairImageM=t,d.crosshairImageM.isReady=!0},t.load(e)}else{!!d.crosshairImageM.frames?(d.crosshairImageM=new Image,d.crosshairImageM.onload=()=>d.crosshairImageM.isReady=!0,d.crosshairImageM.src=e):d.crosshairImage.src!=e&&(d.crosshairImageM.isReady=!1,d.crosshairImageM.onload=()=>d.crosshairImageM.isReady=!0,d.crosshairImageM.src=e)}}},crosshairImageWM:{name:"settings.crosshairm.image.width",info:"Throwing crosshair image width",cat:"crosshairm",val:0,min:0,max:1e3,step:1,hide:!0,type:"slider",set:function(e){m.tmp[this.key]=e,d.crosshairImageWM=e}},crosshairImageHM:{name:"settings.crosshairm.image.height",info:"Throwing crosshair image height",cat:"crosshairm",val:0,min:0,max:1e3,step:1,hide:!0,type:"slider",set:function(e){m.tmp[this.key]=e,d.crosshairImageHM=e}},crosshairOpacityM:{name:"settings.crosshairm.opacity.custom",info:"Opacity for throwing crosshair",cat:"crosshairm",val:1,min:0,max:1,step:.1,hide:!0,type:"width: 244px;",html:function(){return l._html.settings.input.switch(m.list.crosshairUseOpacityM)+l._html.settings.input.slider(this)},set:function(e){m.tmp[this.key]=e,d.crosshairOpacityCustomM=e}},crosshairUseOpacityM:{name:"settings.crosshairm.opacity.use",cat:"crosshairm",val:!1,hide:!0,toggle:!0,html:function(){},set:function(e){m.tmp[this.key]=e,d.crosshairUseOpacityCustomM=e}},crosshairAlwaysM:{name:"settings.crosshairm.always",info:"Always show throwing crosshair",cat:"crosshairm",pro:!0,val:!1,hide:!0,toggle:!0,type:"switch",set:function(e){m.tmp[this.key]=e,d.crosshairAlwaysM=e}},crosshairColorM:{name:"settings.crosshairm.color",info:"Color for throwing crosshair",cat:"crosshairm",val:a.crosshair.background,color:!0,type:"color",set:function(e){m.tmp[this.key]=e,d.crosshairColorM=e}},crosshairShadowM:{name:"settings.crosshairm.shadow.color",type:"Color of throwing crosshair shadow",cat:"crosshairm",val:a.crosshair.shadow,color:!0,type:"color",set:function(e){m.tmp[this.key]=e,d.crosshairShadowM=e}},crosshairShadowThickessM:{name:"settings.crosshairm.shadow.thickness",info:"Throwing crosshair shadow thickness",cat:"crosshairm",val:1,min:0,max:3,step:.1,type:"slider",set:function(e){m.tmp[this.key]=e,d.crosshairShadowThicknessM=e}},crosshairThickM:{name:"settings.crosshairm.thickness",info:"Thickness of throwing crosshair",cat:"crosshairm",val:3,min:0,max:100,step:.5,hide:!0,type:"slider",set:function(e){m.tmp[this.key]=e,d.crosshairThickM=e}},crosshairLenM:{name:"settings.crosshairm.size",cat:"crosshairm",val:16,min:0,max:100,step:.5,type:"slider",set:function(e){m.tmp[this.key]=e,d.crosshairLenM=e}},crosshairGapM:{name:"settings.crosshairm.gap",info:"Throwing crosshair gap from center dot",cat:"crosshairm",val:14,min:0,max:100,step:1,type:"slider",set:function(e){m.tmp[this.key]=e,d.crosshairGapM=e}},crosshairDotM:{name:"settings.crosshairm.dot",info:"Display throwing crosshair dot",cat:"crosshairm",val:!0,hide:!0,toggle:!0,type:"switch",set:function(e){m.tmp[this.key]=e,d.crosshairDotM=e}},hitm:{name:"settings.hitmarker.hitm",info:"Display indicator when hit lands",cat:"hitmarker",val:!0,toggle:!0,type:"switch",set:function(e){m.tmp[this.key]=e,d.hitSet.enabled=e}},hitmCol:{name:"settings.hitmarker.color",info:"Color for hitmarker",cat:"hitmarker",val:"#FFFFFF",color:!0,type:"color",set:function(e){m.tmp[this.key]=[[e,e],[e,e]],d.hitSet.colors=[[e,e],[e,e]]}},hitmKCol:{name:"settings.hitmarker.kcolor",info:"Color for hitmarker when hit kills player",cat:"hitmarker",val:"#FF0000",color:!0,type:"color",set:function(e){m.tmp[this.key]=[[e,e],[e,e]],d.hitSet.kColors=[[e,e],[e,e]]}},hitOpac:{name:"settings.hitmarker.opacity",info:"Opacity for hitmarker",cat:"hitmarker",val:1,min:0,max:1,step:.1,type:"slider",set:function(e){m.tmp[this.key]=e,d.hitSet.opacity=e}},hitmLen:{name:"settings.hitmarker.leng",info:"size of hitmarker",cat:"hitmarker",val:25,min:1,max:50,step:1,type:"slider",set:function(e){m.tmp[this.key]=e,d.hitSet.length=e}},hitmThick:{name:"settings.hitmarker.thickness",info:"Hitmarker thickness",cat:"hitmarker",val:7,min:1,max:20,step:1,type:"slider",set:function(e){m.tmp[this.key]=e,d.hitSet.thickness=e}},hitmSpac:{name:"settings.hitmarker.spacing",info:"Hitmarker indicator spread",cat:"hitmarker",val:37,min:5,max:60,step:1,type:"slider",set:function(e){m.tmp[this.key]=e,d.hitSet.spacing=e}},hitmAnimD:{name:"settings.hitmarker.animD",info:"Hitmarker animation size",cat:"hitmarker",val:.14,min:.1,max:.5,step:.01,type:"slider",set:function(e){m.tmp[this.key]=e,d.hitSet.inc=e}},hitmAnimS:{name:"settings.hitmarker.animS",info:"Hitmarker animation speed",cat:"hitmarker",val:.008,min:.001,max:.01,step:.001,type:"slider",set:function(e){m.tmp[this.key]=e,d.hitSet.speed=e}},hitmFad:{name:"settings.hitmarker.hitmFad",info:"Hitmarker animation fade",cat:"hitmarker",val:.0062,min:1e-4,max:.01,step:1e-4,set:function(e){m.tmp[this.key]=e,d.hitSet.fadeOut=e}},customHitmarker:{name:"settings.hitmarker.custom",info:"Custom hitmarker image",cat:"hitmarker",val:"",img:!0,placeholder:u.t("settings.hitmarker.custom.paste"),type:"url",collection:!0,set:function(e){e=s.isURL(e)&&!/\.svg/.test(e)?e:"",/\.(jpg|jpeg|png)/.test(e)?(d.hitmarker.image?(d.hitmarker.isReady=!1,d.hitmarker.image.onload=()=>d.hitmarker.isReady=!0,d.hitmarker.image.src=e):(d.hitmarker.image=new Image,d.hitmarker.image.onload=()=>d.hitmarker.isReady=!0,d.hitmarker.image.src=e),d.hitmarker.custom=!1):e.length?(d.hitmarker.image=!1,hitmarker.src=e,d.hitmarker.custom=!0):(d.hitmarker.image=!1,d.hitmarker.custom=!1)}},gpSetts:{name:"settings.gameplay.gpSetts",info:"Adjust settings for all weapons or specific weapons",cat:"gameplay",val:0,options:{0:"All",1:"Per Weapon"},type:"select",set:function(e,t){m.tmp[this.key]=parseInt(e),i.gpSetts=parseInt(e),t||updateWindow(1)}},sensitivityX:{name:"settings.gameplay.sensitivityX",info:"Adjust sensitivity for X mouse movement",cat:"gameplay",val:i.isMobile?1.4:1,min:.1,max:15,step:.1,perWepG:!0,type:"slider",set:function(e){m.tmp[this.key]=e,i.kbmInput.sensX[this.weapon+1]=e}},sensitivityY:{name:"settings.gameplay.sensitivityY",info:"Adjust sensitivity for Y mouse movement",cat:"gameplay",val:i.isMobile?1.4:1,min:.1,max:15,step:.1,perWepG:!0,type:"slider",set:function(e){m.tmp[this.key]=e,i.kbmInput.sensY[this.weapon+1]=e}},aimSensitivityX:{name:"settings.gameplay.aimsensX",info:"Adjust sensitivity for X aiming movement",cat:"gameplay",pro:.69,val:i.isMobile?1.4:1,min:.1,max:15,step:.1,perWepG:!0,type:"slider",set:function(e){m.tmp[this.key]=e,i.kbmInput.aimX[this.weapon+1]=e}},aimSensitivityY:{name:"settings.gameplay.aimsensY",info:"Adjust sensitivity for Y aiming movement",cat:"gameplay",pro:.69,val:i.isMobile?1.4:1,min:.1,max:15,step:.1,perWepG:!0,type:"slider",set:function(e){m.tmp[this.key]=e,i.kbmInput.aimY[this.weapon+1]=e}},scrollDir:{name:"settings.gameplay.scrollDir",info:"Change scroll direction",cat:"gameplay",sType:"advanced",val:!0,toggle:!0,perWepG:!0,type:"switch",set:function(e){m.tmp[this.key]=e?1:-1,i.kbmInput.scroll[this.weapon+1]=e?1:-1}},invertY:{name:"settings.gameplay.invert",info:"Invert Y-Axis for mouse movement",cat:"gameplay",sType:"advanced",val:!1,toggle:!0,perWepG:!0,type:"switch",set:function(e){m.tmp[this.key]=e,i.kbmInput.invert[this.weapon+1]=e}},challMode:{name:"settings.gameplay.challenge",info:"Half HP and no health regeneration for more KR and XP. Level 30 required",cat:"gameplay",sType:"advanced",val:!1,toggle:!0,type:"switch",set:function(e){m.tmp[this.key]=e,window.toggleChal(e)}},disableCons:{name:"settings.controller.disableCons",info:"Prevents input from controller",cat:"controller",val:!1,toggle:!0,type:"switch",set:function(e){m.tmp[this.key]=!!e,i.toggleGamepad(m.tmp[this.key])}},sensitivityXCntrl:{name:"settings.controller.sensitivityX",info:"Adjust sensitivity for X thumbstick movement",cat:"controller",val:4,min:.1,max:15,step:.1,type:"slider",set:function(e){m.tmp[this.key]=5*e,i.cntrlInput.sensX=5*e}},sensitivityYCntrl:{name:"settings.controller.sensitivityY",info:"Adjust sensitivity for Y thumbstick movement",cat:"controller",val:4,min:.1,max:15,step:.1,type:"slider",set:function(e){m.tmp[this.key]=5*e,i.cntrlInput.sensY=5*e}},aimSensitivityXCntrl:{name:"settings.controller.aimsensX",info:"Adjust sensitivity for X thumbstick aim movement",cat:"controller",val:3,min:.1,max:15,step:.1,type:"slider",set:function(e){m.tmp[this.key]=5*e,i.cntrlInput.aimX=5*e}},aimSensitivityYCntrl:{name:"settings.controller.aimsensY",info:"Adjust sensitivity for Y thumbstick aim movement",cat:"controller",val:3,min:.1,max:15,step:.1,type:"slider",set:function(e){m.tmp[this.key]=5*e,i.cntrlInput.aimY=5*e}},deadZoneL:{name:"settings.controller.deadZoneL",info:"Prevent input until certain value is reached - Left",cat:"controller",val:.3,min:0,max:1,step:.05,type:"slider",set:function(e){m.tmp[this.key]=e,i.cntrlInput.deadZoneL=e}},deadZoneR:{name:"settings.controller.deadZoneR",info:"Prevent input until certain value is reached - Right",cat:"controller",val:.25,min:0,max:1,step:.05,type:"slider",set:function(e){m.tmp[this.key]=e,i.cntrlInput.deadZoneR=e}},triggerThres:{name:"settings.controller.triggerThres",info:"Trigger cannot fire until this threshold is met",cat:"controller",val:.1,min:0,max:1,step:.05,type:"slider",set:function(e){m.tmp[this.key]=e,i.cntrlInput.triggerThres=e}},invertYCntrl:{name:"settings.controller.invert",info:"Invert Y-Axis for controller aim movement",cat:"controller",val:!1,type:"switch",set:function(e){m.tmp[this.key]=e,i.cntrlInput.invert=e}},vibrationMlt:{name:"settings.controller.vibration",info:"Strength of controller vibration",cat:"controller",val:1,min:0,max:1,step:.1,style:"width: 244px;",html:function(){return l._html.settings.input.switch(m.list.vibration)+l._html.settings.input.slider(this)},set:function(e){m.tmp[this.key]=parseInt(e),i.cntrlInput.vibrationMlt=e}},vibration:{name:"settings.controller.vibration",info:"Toggle controller vibration",cat:"controller",val:!0,hide:!0,html:function(){},set:function(e){m.tmp[this.key]=e,i.cntrlInput.vibration=e}},gradSpeed:{name:"settings.controller.gradSpeed",cat:"controller",val:!1,type:"switch",set:function(e){m.tmp[this.key]=e,i.cntrlInput.gradSpeed=e,i.speedLmt=1}},sensitivityXMbl:{name:"settings.mobile.sensitivityX",cat:"mobile",mobileFriendly:!0,val:1.4,min:.1,max:15,step:.1,hide:!i.isMobile,type:"slider",set:function(e){m.tmp[this.key]=4*e,i.mblInput.sensX=4*e}},sensitivityYMbl:{name:"settings.mobile.sensitivityY",cat:"mobile",mobileFriendly:!0,val:1.4,min:.1,max:15,step:.1,hide:!i.isMobile,type:"slider",set:function(e){m.tmp[this.key]=4*e,i.mblInput.sensY=4*e}},aimSensitivityXMbl:{name:"settings.mobile.aimsensX",cat:"mobile",mobileFriendly:!0,val:1.4,min:.1,max:15,step:.1,hide:!i.isMobile,type:"slider",set:function(e){m.tmp[this.key]=4*e,i.mblInput.aimX=4*e}},aimSensitivityYMbl:{name:"settings.mobile.aimsensY",cat:"mobile",mobileFriendly:!0,val:1.4,min:.1,max:15,step:.1,hide:!i.isMobile,type:"slider",set:function(e){m.tmp[this.key]=4*e,i.mblInput.aimY=4*e}},invertYMbl:{name:"settings.mobile.invert",cat:"mobile",mobileFriendly:!0,val:!1,hide:!i.isMobile,type:"switch",set:function(e){m.tmp[this.key]=e,i.mblInput.invert=e}},vibrationMbl:{name:"settings.mobile.vibration",cat:"mobile",mobileFriendly:!0,val:!0,hide:!i.isMobile,type:"switch",set:function(e){m.tmp[this.key]=e,i.mblInput.vibration=e}},gradSpeedMbl:{name:"settings.mobile.gradSpeed",cat:"mobile",mobileFriendly:!0,val:!0,hide:!i.isMobile,type:"switch",set:function(e){m.tmp[this.key]=e,i.mblInput.gradSpeed=e,i.speedLmt=1}},sound:{name:"settings.audio.sound",info:"Adjust all sound",cat:"audio",mobileFriendly:!0,pro:.1,perf:.1,val:.8,min:0,max:1,step:.01,type:"slider",set:function(e){m.tmp[this.key]=e,SOUND.setVolume(e,0)}},ambientVolume:{name:"settings.audio.ambient",info:"Background sound volume",cat:"audio",mobileFriendly:!0,val:1,min:0,max:1,step:.01,type:"slider",set:function(e){m.tmp[this.key]=e,SOUND.setVolume(e,2)}},dialogueVolume:{name:"settings.audio.dialogue",info:"Audio performed on action",cat:"audio",mobileFriendly:!0,val:1,min:0,max:1,step:.01,type:"slider",set:function(e){m.tmp[this.key]=e,SOUND.setVolume(e,7)}},audioInput:{name:"settings.audio.input",info:"Select hardware device for audio/microphone",cat:"audio",val:"default",options:{default:"Default"},type:"select",set:function(e){m.tmp[this.key]=e,window.updateAudioInputs()}},micQuality:{name:"settings.audio.micquality",info:"Quality of in-game voice chat",cat:"audio",val:6e3,options:{3e3:"Low",6e3:"Medium",9e3:"High",12e3:"Epic",15e3:"Ultra"},type:"select",set:function(e){m.tmp[this.key]=e}},micVolume:{name:"settings.audio.mic",info:"Volume of emitted voice chat",cat:"audio",pro:0,val:1,min:0,max:1,step:.01,type:"slider",set:function(e){m.tmp[this.key]=e}},voiceVolume:{name:"settings.audio.voice",info:"Voice chat volume",cat:"audio",pro:0,val:1,min:0,max:1,step:.01,type:"slider",set:function(e){m.tmp[this.key]=e,SOUND.setVolume(e,1)}},voiceChatType:{name:"settings.audio.voice.type",info:"Voice chat type",cat:"audio",val:0,options:{0:"Default",1:"Spacial / Proximity"},type:"select",set:function(e){m.tmp[this.key]=parseInt(e)||0,m.list.voiceDistance.hide=0==e;let t=document.getElementById("voiceDistance_div");t&&(t.style.display=m.list.voiceDistance.hide?"none":"block")}},voiceDistance:{name:"settings.audio.voice.dist",info:"Voice chat distance when using spacial",cat:"audio",val:5,min:1,max:10,step:1,type:"slider",hide:!0,set:function(e){m.tmp[this.key]=5*(parseInt(e)||1)}},gunsVolume:{name:"settings.audio.weps",info:"Sound emitted from weapons (reloading, firing, etc)",cat:"audio",mobileFriendly:!0,val:.3,min:0,max:1,step:.01,type:"slider",set:function(e){m.tmp[this.key]=e,SOUND.setVolume(e,3)}},playerVolume:{name:"settings.audio.player",info:"Sound emitted from players (jumping, sliding, etc)",cat:"audio",mobileFriendly:!0,val:1,min:0,max:1,step:.01,type:"slider",set:function(e){m.tmp[this.key]=e,SOUND.setVolume(e,4)}},skinVolume:{name:"settings.audio.skin",info:"Sound emitted from skins",cat:"audio",mobileFriendly:!0,val:1,min:0,max:1,step:.01,type:"slider",set:function(e){m.tmp[this.key]=e,SOUND.setVolume(e,8)}},uiVolume:{name:"settings.audio.ui",info:"Menu interface volume",cat:"audio",mobileFriendly:!0,val:1,min:0,max:1,step:.01,type:"slider",set:function(e){m.tmp[this.key]=e,SOUND.setVolume(e,5)}},assetVolume:{name:"settings.audio.asset",info:"Sound emitted from in-game assets",cat:"audio",mobileFriendly:!0,val:1,min:0,max:1,step:.01,type:"slider",set:function(e){m.tmp[this.key]=e,SOUND.setVolume(e,6)}},muteSpec:{name:"settings.audio.mute.spec",info:"Mute Spectators",cat:"audio",val:!1,toggle:!0,noMod:!0,type:"switch",set:function(e){m.tmp[this.key]=e}},streamMode:{name:"settings.gameprivacy.streamer",info:'Hide sensitive data. Prevents "Stream-sniping"',cat:"gameprivacy",val:!1,toggle:!0,type:"switch",set:function(e,t){m.tmp[this.key]=!!e,d.hideNames=e,t||window.toggleStrm(e)}},anonMode:{name:"settings.gameprivacy.anon",info:"Hides usernames in-game. Verification required",cat:"gameprivacy",val:!1,verified:!0,toggle:!0,noMod:!0,type:"switch",set:function(e){m.tmp[this.key]=e}},hideGameP:{name:"settings.gameprivacy.hideGameTitle",cat:"gameprivacy",val:"",placeholder:"Custom Title",type:"text",set:function(e){m.tmp[this.key]=e}},showRegion:{name:"settings.gameprivacy.showRegion",info:"Hide all region information",cat:"gameprivacy",val:!0,toggle:!0,noMod:!0,type:"switch",set:function(e){m.tmp[this.key]=e,menuRegionLabel.style.display=e?"flex":"none"}},showServerTimer:{name:"settings.gameprivacy.showServerTimer",info:"Show server timers",cat:"gameprivacy",val:!0,toggle:!0,noMod:!0,type:"switch",set:function(e){m.tmp[this.key]=e}},verifiedBadge:{name:"settings.gameprivacy.verified",info:"Display verified badge in-game. Verification required",cat:"gameprivacy",val:!0,toggle:!0,verified:!0,noMod:!0,type:"switch",set:function(e){m.tmp[this.key]=e,window&&window.refreshMenuAcc&&window.refreshMenuAcc()}},premiumBadge:{name:"settings.gameprivacy.premium",info:"Display premium badge in-game. Premium required",cat:"gameprivacy",val:!0,toggle:!0,premium:!0,noMod:!0,type:"switch",set:function(e){m.tmp[this.key]=e,window&&window.refreshMenuAcc&&window.refreshMenuAcc()}},customBadge:{name:"settings.gameprivacy.custom",cat:"gameprivacy",val:!0,toggle:!0,noMod:!0,type:"switch",set:function(e){m.tmp[this.key]=e,window&&window.refreshMenuAcc&&window.refreshMenuAcc()}},vmSetts:{name:"settings.viewmodel.vmSetts",info:"Weapon model display for all weapons or specific weapons",cat:"viewmodel",val:0,options:{0:"All",1:"Per Weapon"},type:"select",set:function(t,i){m.tmp[this.key]=parseInt(t),e.vmSetts=parseInt(t),i||updateWindow(1)}},fov:{name:"settings.viewmodel.fov",cat:"viewmodel",mobileFriendly:!0,pro:110,val:n.fov+20,min:60,max:150,step:5,perWep:!0,type:"slider",set:function(e){m.tmp[this.key]=e,updateFov(0,e,this.weapon)}},fpsFOV:{name:"settings.viewmodel.fps",cat:"viewmodel",mobileFriendly:!0,pro:105,val:n.fov+15,min:60,max:150,step:5,perWep:!0,type:"slider",set:function(e){m.tmp[this.key]=e,updateFov(1,e,this.weapon)}},weaponBob:{name:"settings.viewmodel.bobbing",info:"Animates weapon left to right on movement",cat:"viewmodel",sType:"advanced",pro:.2,perf:0,val:.7,min:0,max:3,step:.1,perWep:!0,type:"slider",set:function(t){m.tmp[this.key]=t,e.weaponBob[this.weapon+1]=t}},weaponLean:{name:"settings.viewmodel.leaning",info:"Temporarily lean weapon toward the direction of mouse movement",cat:"viewmodel",sType:"advanced",pro:2,perf:0,val:.6,min:0,max:6,step:.1,perWep:!0,type:"slider",set:function(t){m.tmp[this.key]=t,e.weaponLean[this.weapon+1]=t}},weaponRot:{name:"settings.viewmodel.rot",info:"Rotate weapon",cat:"viewmodel",sType:"advanced",pro:0,val:0,min:-2,max:2,step:.1,perWep:!0,type:"slider",set:function(t){m.tmp[this.key]=t,e.weaponRot[this.weapon+1]=t}},weaponOffX:{name:"settings.viewmodel.xOff",info:"Move weapon model left or right",cat:"viewmodel",sType:"advanced",pro:1.4,val:1,min:0,max:4,step:.1,perWep:!0,type:"slider",set:function(t){m.tmp[this.key]=t,e.weaponOffX[this.weapon+1]=t}},weaponOffY:{name:"settings.viewmodel.yOff",info:"Move weapon model up or down",cat:"viewmodel",sType:"advanced",pro:2,val:1.3,min:0,max:4,step:.1,perWep:!0,type:"slider",set:function(t){m.tmp[this.key]=t,e.weaponOffY[this.weapon+1]=t}},weaponOffZ:{name:"settings.viewmodel.zOff",info:"Move weapon model forwards or backwards",cat:"viewmodel",sType:"advanced",pro:1.5,val:1,min:0,max:4,step:.1,perWep:!0,type:"slider",set:function(t){m.tmp[this.key]=t,e.weaponOffZ[this.weapon+1]=t}},weaponADSOffY:{name:"settings.viewmodel.yOffADS",info:"Move weapon model up or down while aiming",cat:"viewmodel",sType:"advanced",val:1,min:0,max:2,step:.1,perWep:!0,type:"slider",set:function(t){m.tmp[this.key]=t,e.weaponADSOffY[this.weapon+1]=t}},weapSwapY:{name:"settings.viewmodel.weapSwapY",info:"Move weapon swap location up or down",cat:"viewmodel",sType:"advanced",val:1,min:-2,max:2,step:.1,perWep:!0,type:"slider",set:function(t){m.tmp[this.key]=t,e.weapSwapY[this.weapon+1]=t}},weapReloadY:{name:"settings.viewmodel.weapReloadY",info:"How far weapon lowers while reloading",cat:"viewmodel",sType:"advanced",val:1,min:0,max:1,step:.1,perWep:!0,type:"slider",set:function(t){m.tmp[this.key]=t,e.weapReloadY[this.weapon+1]=t}},adsFovMlt:{name:"settings.viewmodel.adsFovMlt",info:"Change FOV while aiming down sight",cat:"viewmodel",sType:"advanced",val:1,min:0,max:1,step:.1,perWep:!0,type:"slider",set:function(t){m.tmp[this.key]=t,e.adsFov[this.weapon+1]=t}},toggleADS:{name:"settings.viewmodel.toggleADS",info:"Toggle aim down sight",cat:"viewmodel",val:!1,toggle:!0,perWep:!0,type:"switch",set:function(e){m.tmp[this.key]=e,i.toggleADS[this.weapon+1]=e}},aimAnim:{name:"settings.viewmodel.aimAnim",info:"Show weapon animation while aiming down sight",cat:"viewmodel",sType:"advanced",perf:!1,val:!0,toggle:!0,perWep:!0,type:"switch",set:function(t){m.tmp[this.key]=t,e.aimAnim[this.weapon+1]=t}},hideADS:{name:"settings.viewmodel.show.ads",info:"Remove weapon model while aiming down sight",cat:"viewmodel",sType:"advanced",pro:!0,perf:!0,val:!1,toggle:!0,perWep:!0,type:"switch",set:function(t){m.tmp[this.key]=t,e.hideADS[this.weapon+1]=t}},showHands:{name:"settings.viewmodel.show.hands",info:"Display hand models",cat:"viewmodel",sType:"advanced",val:!0,toggle:!0,type:"switch",set:function(t){m.tmp[this.key]=t,e.showHands=t,window.updateWeaponShow(0,t)}},showWeapon:{name:"settings.viewmodel.show.primary",info:"Display primary weapon model",cat:"viewmodel",sType:"advanced",val:!0,toggle:!0,type:"switch",set:function(e){m.tmp[this.key]=e,r.hideWeapon[0]=!e,window.updateWeaponShow(1,e)}},showWeaponSec:{name:"settings.viewmodel.show.secondary",info:"Display secondary weapon model",cat:"viewmodel",sType:"advanced",val:!0,toggle:!0,type:"switch",set:function(e){m.tmp[this.key]=e,r.hideWeapon[1]=!e,window.updateWeaponShow(2,e)}},showWeaponMel:{name:"settings.viewmodel.show.melee",info:"Display melee model",cat:"viewmodel",sType:"advanced",val:!0,toggle:!0,type:"switch",set:function(e){m.tmp[this.key]=e,r.hideWeapon[2]=!e,window.updateWeaponShow(3,e)}},leftHand:{name:"settings.viewmodel.leftHand",info:"Swap weapon location to left hand",cat:"viewmodel",sType:"advanced",val:!1,toggle:!0,type:"switch",set:function(t){m.tmp[this.key]=t,e.leftHand=t}},roundArms:{name:"settings.viewmodel.roundArms",info:"Use rounded arm models",cat:"viewmodel",sType:"advanced",val:!1,toggle:!0,type:"switch",needsRestart:!0,info:"Requires Restart",set:function(t){m.tmp[this.key]=!!t,e.roundArms=!!t}},wallLeanMlt:{name:"settings.viewmodel.wallLeanMlt",cat:"viewmodel",sType:"advanced",val:.5,min:0,max:1,step:.1,html:function(){return l._html.settings.input.switch(m.list.wallLean)+l._html.settings.input.slider(this)},set:function(e){m.tmp[this.key]=parseFloat(e)}},wallLean:{name:"settings.viewmodel.wallLean",cat:"viewmodel",sType:"advanced",val:!1,hide:!0,toggle:!0,html:function(){},set:function(e){m.tmp[this.key]=!!e}},hudHealthHigh:{name:"settings.editing.health.high",info:"HUD health bar color - Max HP",cat:"editing",val:a.hudHealth.high,color:!0,type:"color",set:function(e){m.tmp[this.key]=e}},hudHealthLow:{name:"settings.editing.health.low",info:"HUD health bar color - Below max HP",cat:"editing",val:a.hudHealth.low,color:!0,type:"color",set:function(e){m.tmp[this.key]=e}},showSpdLines:{name:"settings.editing.speedLines",info:"Display lines on-screen while moving fast",cat:"editing",perf:0,val:0,min:0,max:1,step:.1,type:"slider",set:function(e){m.tmp[this.key]=e,d.shoSpdLines=e}},spdLinesCol:{name:"settings.editing.spdLinesCol",info:"Speed lines color",cat:"editing",val:"#e6e6e6",color:!0,type:"color",set:function(e){m.tmp[this.key]=s.hexToRGB(e).join(","),d.spdLinesCol=s.hexToRGB(e).join(",")}},showPScore:{name:"settings.editing.score.show",info:"Score displayed after completing objective, killing opponent, etc",cat:"editing",val:!0,toggle:!0,type:"switch",set:function(e){m.tmp[this.key]=!e,d.scoreText.disabled=!e}},scoreColor:{name:"settings.editing.score.color",info:"Score color",cat:"editing",val:a.popupScore,color:!0,type:"color",set:function(e){m.tmp[this.key]=e,d.scoreText.color=e}},scoreShadow:{name:"settings.editing.score.shadow",info:"Use shadow on score",cat:"editing",val:!1,toggle:!0,type:"switch",set:function(e){m.tmp[this.key]=e?3:0,d.scoreText.shadow=e?3:0}},scoreScale:{name:"settings.editing.score.scale",info:"Increase score font-size",cat:"editing",pro:.6,val:1,min:.1,max:2,step:.1,type:"slider",set:function(e){m.tmp[this.key]=e||1}},scoreOffX:{name:"settings.editing.scoreOffX",info:"Move score popup left or right",cat:"editing",val:5,min:0,max:10,step:.1,type:"slider",set:function(e){m.tmp[this.key]=10*e,d.scoreText.left=10*e}},scoreOffY:{name:"settings.editing.scoreOffY",info:"Move score popup up or down",cat:"editing",pro:2.5,val:3.7,min:0,max:10,step:.1,type:"slider",set:function(e){m.tmp[this.key]=10*e,d.scoreText.top=10*e}},progColor:{name:"settings.editing.prog.color",cat:"editing",val:"#ffffff",color:!0,type:"color",set:function(e){m.tmp[this.key]=e,d.interactProg.color=e}},progOpac:{name:"settings.editing.prog.opacity",cat:"editing",val:1,min:0,max:1,step:.1,type:"slider",set:function(e){m.tmp[this.key]=e,d.interactProg.opacity=e}},progShadow:{name:"settings.editing.prog.shadow",cat:"editing",val:!0,toggle:!0,type:"switch",set:function(e){m.tmp[this.key]=!!e,d.interactProg.shadow=!!e}},progScale:{name:"settings.editing.prog.scale",cat:"editing",val:1,min:.1,max:2,step:.1,type:"slider",set:function(e){m.tmp[this.key]=e||1,d.interactProg.scale=e||1}},progOffX:{name:"settings.editing.progOffX",cat:"editing",val:5,min:0,max:10,step:.1,type:"slider",set:function(e){m.tmp[this.key]=10*e,d.interactProg.left=10*e}},progOffY:{name:"settings.editing.progOffY",cat:"editing",val:7.2,min:0,max:10,step:.1,type:"slider",set:function(e){m.tmp[this.key]=10*e,d.interactProg.top=10*e}},progRot:{name:"settings.editing.progRot",cat:"editing",val:0,min:0,max:360,step:1,type:"slider",set:function(e){m.tmp[this.key]=s.toRad(e),d.interactProg.rot=s.toRad(e)}},progMColor:{name:"settings.editing.progm.color",info:"Color used while charging weapon (crossbow, melee, etc)",cat:"editing",val:"#ffffff",color:!0,type:"color",set:function(e){m.tmp[this.key]=e,d.interactMProg.color=e}},progMOColor:{name:"settings.editing.progmo.color",info:"Color displayed when weapon is overcharged",cat:"editing",val:"#eb2f2f",color:!0,type:"color",set:function(e){m.tmp[this.key]=e,d.interactMProg.oColor=e}},progMOpac:{name:"settings.editing.progm.opacity",info:"Weapon charge display opacity",cat:"editing",val:1,min:0,max:1,step:.1,type:"slider",set:function(e){m.tmp[this.key]=e,d.interactMProg.opacity=e}},progMShadow:{name:"settings.editing.progm.shadow",info:"Weapon charge display shadow",cat:"editing",val:!0,toggle:!0,type:"switch",set:function(e){m.tmp[this.key]=!!e,d.interactMProg.shadow=!!e}},progMScale:{name:"settings.editing.progm.scale",info:"Weapon charge display size",cat:"editing",val:.5,min:.1,max:2,step:.1,type:"slider",set:function(e){m.tmp[this.key]=e||1,d.interactMProg.scale=e||1}},progMOffX:{name:"settings.editing.progmOffX",info:"Move weapon charge display left or right",cat:"editing",val:5.6,min:0,max:10,step:.1,type:"slider",set:function(e){m.tmp[this.key]=10*e,d.interactMProg.left=10*e}},progMOffY:{name:"settings.editing.progmOffY",info:"Move weapon charge display up or down",cat:"editing",val:5,min:0,max:10,step:.1,type:"slider",set:function(e){m.tmp[this.key]=10*e,d.interactMProg.top=10*e}},progMRot:{name:"settings.editing.progmRot",info:"Rotate weapon charge display",cat:"editing",val:270,min:0,max:360,step:1,type:"slider",set:function(e){m.tmp[this.key]=s.toRad(e),d.interactMProg.rot=s.toRad(e)}},saturationn:{name:"settings.editing.saturation",info:"Increase color saturation in-game",cat:"editing",mobileFriendly:!0,val:1,perf:1,min:0,max:3,step:.1,type:"slider",set:function(e){m.tmp[this.key]=e,window.bundleFilters(0)}},menuSaturation:{name:"settings.editing.menuSaturation",info:"Increase color saturation for menu",cat:"editing",pro:1,val:1,min:0,max:3,step:.1,type:"slider",set:function(e){m.tmp[this.key]=e,window.bundleFilters(1)}},hue:{name:"settings.editing.hue",info:"Shift colors in-game",cat:"editing",val:0,min:0,max:100,step:5,type:"slider",set:function(e){m.tmp[this.key]=e,window.bundleFilters(0)}},menuHue:{name:"settings.editing.menuHue",info:"Shift colors in-menu",cat:"editing",val:0,min:0,max:100,step:5,type:"slider",set:function(e){m.tmp[this.key]=e,window.bundleFilters(1)}},vignette:{name:"settings.editing.vignette",info:"Add shadow around HUD",cat:"editing",val:0,min:0,max:1,step:.1,type:"slider",set:function(e){1==e?vignette.style.removeProperty("opacity"):vignette.style.opacity=e,m.tmp[this.key]=e}},feedLimit:{name:"settings.editing.feedLimit",info:"Amount of killfeed entries displayed",cat:"editing",pro:4,val:8,min:1,max:10,step:1,type:"slider",set:function(e){m.tmp[this.key]=e,window.refreshFeed(e)}},bulletTracers:{name:"settings.editing.tracer",info:"Toggle bullet tracers",cat:"editing",perf:!1,val:!0,hide:!0,toggle:!0,html:function(){},set:function(e){m.tmp[this.key]=e,t.showTracers=e}},bulletTracerCol:{name:"settings.editing.tracercol",info:"Change bullet tracer color",cat:"editing",val:"#ffffdb",color:!0,html:function(){return l._html.settings.input.switch(m.list.bulletTracers)+l._html.settings.input.color(this)},set:function(e){m.tmp[this.key]=e,t.setTracerColor(e)}},tracerOffset:{name:"settings.editing.tracer.offset",cat:"editing",val:0,min:0,max:1,step:.01,type:"slider",set:function(t){m.tmp[this.key]=t||0,e.tracerOffset=t||0}},trailCol:{name:"settings.editing.trailcol",info:"Bullet trail color",cat:"editing",val:"#ededed",color:!0,type:"color",set:function(t){m.tmp[this.key]=t,e.trailColor=t}},ropeCol:{name:"settings.editing.ropecol",info:"Grapple rope color",cat:"editing",val:"#b3b3b3",color:!0,type:"color",set:function(t){m.tmp[this.key]=t,e.ropeColor=t}},canLoadMods:{name:"settings.mods.load",info:"Allow mods to be loaded",cat:"mods",noMod:!0,val:!0,type:"switch",set:function(e){m.tmp[this.key]=e}},canChangeLogo:{name:"settings.mods.logo",info:"Allow loaded mod to adjust menu logo",cat:"mods",noMod:!0,val:!0,type:"switch",set:function(e){m.tmp[this.key]=e}},autoLoadLast:{name:"settings.mods.auto",info:"Automatically load last used mod",cat:"mods",noMod:!0,val:!1,type:"switch",set:function(e){m.tmp[this.key]=e}},scopeBorderCol:{name:"settings.mods.borderCol",info:"Adjust scope border color",cat:"mods",val:"#000000",color:!0,html:function(){return l._html.settings.input.switch(m.list.scopeBorders)+l._html.settings.input.color(this)},set:function(e){m.tmp[this.key]=e,d.scopeBorders.color=e,Array.from(document.querySelectorAll(".black")).forEach((t=>t.style.backgroundColor=e))}},scopeBorders:{name:"settings.mods.borders",info:"Scope border opacity",cat:"mods",pro:!0,val:!0,hide:!0,toggle:!0,html:function(){},set:function(e){m.tmp[this.key]=!!e,d.scopeBorders.display=!!e,Array.from(document.querySelectorAll(".black")).forEach((t=>t.style.display=e?"block":"none"))}},scopeBorderOpac:{name:"settings.mods.borderOpac",info:"Adjust scope border opacity while aiming down sight",cat:"mods",val:1,min:0,max:1,step:.1,type:"slider",set:function(e){m.tmp[this.key]=e,d.scopeBorders.opacity=e,Array.from(document.querySelectorAll(".black")).forEach((t=>t.style.opacity=e))}},scopeWidth:{name:"settings.mods.scope.width",info:"Adjust scope width",cat:"mods",val:6.8,min:.1,max:10,step:.1,type:"slider",set:function(t){t*=100,m.tmp[this.key]=t,e.aimRecticle.width=t,recticleImg.style.width=t+"px";var i=Math.floor(t/2),n=Math.abs(i)%2==1&&i>0?i-1:i;leftBox.style.right="calc(50% + "+n+"px)",rightBox.style.left="calc(50% + "+n+"px)"}},scopeHeight:{name:"settings.mods.scope.height",info:"Adjust scope height",cat:"mods",val:6.8,min:.1,max:10,step:.1,type:"slider",set:function(t){t*=100,m.tmp[this.key]=t,e.aimRecticle.height=t,recticleImg.style.height=t+"px";var i=Math.floor(t/2),n=Math.abs(i)%2==1&&i>0?i-1:i;topBox.style.top="calc(50% + "+n+"px)",bottomBox.style.bottom="calc(50% + "+n+"px)"}},scopeOpac:{name:"settings.mods.scope.opacity",info:"Scope opacity while aiming down sight",cat:"mods",val:1,min:0,max:1,step:.1,type:"slider",set:function(t){m.tmp[this.key]=t,e.aimRecticle.opacMlt=t}},reticleWidth:{name:"settings.mods.dot.width",info:"Adjust custom reticle width",cat:"mods",val:2,min:.1,max:10,step:.1,type:"slider",set:function(t){m.tmp[this.key]=10*t,e.aimDot.width=10*t,aimDot.style.width=10*t+"px"}},reticleHeight:{name:"settings.mods.dot.height",info:"Adjust custom reticle height",cat:"mods",val:2,min:.1,max:10,step:.1,type:"slider",set:function(t){m.tmp[this.key]=10*t,e.aimDot.height=10*t,aimDot.style.height=10*t+"px"}},endMessage:{name:"settings.mods.endmessage",info:"Automatically send a message when match ends",cat:"mods",val:"",str:!0,placeholder:u.t("settings.mods.endmessage"),type:"text",set:function(e){m.tmp[this.key]=e}},customAmmo:{name:"settings.mods.ammo",info:"Replace default ammo icon",cat:"mods",val:"",img:!0,placeholder:u.t("settings.mods.ammo.paste"),type:"url",collection:!0,set:function(e){e=s.isURL(e)&&!/\.svg/.test(e)?e:"",ammoIcon.src=e.length>1?e:s.assetsUrl("/textures/ammo_0.png")}},customKills:{name:"settings.mods.kills",info:"Replace default kills icon",cat:"mods",val:"",img:!0,placeholder:u.t("settings.mods.kills.paste"),type:"url",collection:!0,set:function(e){e=s.isURL(e)&&!/\.svg/.test(e)?e:"",killsIcon.src=e.length>1?e:"./img/skull_0.png"}},customDeaths:{name:"settings.mods.deaths",info:"Replace default deaths icon",cat:"mods",val:"",img:!0,placeholder:u.t("settings.mods.deaths.paste"),type:"url",collection:!0,set:function(e){e=s.isURL(e)&&!/\.svg/.test(e)?e:"",deathsIcon.src=e.length>1?e:"./img/skull_1.png"}},customStreak:{name:"settings.mods.streak",info:"Replace default killstreak icon",cat:"mods",val:"",img:!0,placeholder:u.t("settings.mods.streak.paste"),type:"url",collection:!0,set:function(e){e=s.isURL(e)&&!/\.svg/.test(e)?e:"",streakIcon.src=e.length>1?e:"./img/skull_2.png"}},useDamageOverlay:{name:"settings.mods.usedamage",info:"Display damage overlay. Appears when taking damage in-game",cat:"mods",pro:!1,perf:!1,val:!0,toggle:!0,type:"switch",set:function(e){m.tmp[this.key]=e,e||(d.bloodOpacity=0,bloodDisplay.style.display="none",bloodDisplay.style.opacity=0)}},customDamage:{name:"settings.mods.damage",info:"Replace default damage image",cat:"mods",val:"",img:!0,placeholder:u.t("settings.mods.damage.paste"),type:"url",collection:!0,set:function(e){e=s.isURL(e)&&!/\.svg/.test(e)?e:"",/\.(jpg|jpeg|png)/.test(e)?(d.bloodLoaded=!1,d.bloodImage.src=e,d.bloodCustom=!1):(bloodDisplay.src=e.length>1?e:"./img/blood.png","./img/blood.png"!=d.bloodImage.src&&(d.bloodLoaded=!1,d.bloodImage.src="./img/blood.png"),d.bloodCustom=e.length>1)}},customGameOverlay:{name:"settings.mods.overlay",info:"Replace default overlay image",cat:"mods",val:"",img:!0,placeholder:u.t("settings.mods.overlay.paste"),type:"url",collection:!0,set:function(e){e=s.isURL(e)&&!/\.svg/.test(e)?e:"",overlay.style.backgroundImage=e.length>1?"url('"+e+"')":""}},scoreBoardTrigger:{name:"settings.controls.leaderboard",cat:"controls",hide:!0,noShow:!0,val:1,options:{0:"Press (Toggle)",1:"Continuous (Hold)"},type:"select",set:function(e){m.tmp[this.key]=e}},voiceChatTrigger:{name:"settings.controls.voicechat",cat:"controls",hide:!0,noShow:!0,val:1,options:{0:"Press (Toggle)",1:"Continuous (Hold)"},type:"select",set:function(e){m.tmp[this.key]=e}}},this.init=function(){for(var e=Object.keys(this.list).filter((e=>this.list[e].perWep||this.list[e].perWepG)),t=0;t<r.weapons.length;t++)for(var i,n=0;n<e.length;n++)(i=this.list[e[n]]).weapon=-1,this.list[e[n]+"_"+t]={...i},this.list[e[n]+"_"+t].hide=!0,this.list[e[n]+"_"+t].perWep=!1,this.list[e[n]+"_"+t].perWepG=!1,this.list[e[n]+"_"+t].weapon=t;for(var a in this.list)if(this.tmp[a]=this.list[a].val,this.list[a].key=a,this.list[a].def=this.list[a].val,this.list[a].set&&!this.list[a].dontInit){var o=getSavedVal("kro_setngss_"+a);this.list[a].val=null===o?this.list[a].val:o,"false"==this.list[a].val&&(this.list[a].val=!1),"true"==this.list[a].val&&(this.list[a].val=!0),"undefined"==this.list[a].val&&(this.list[a].val=this.list[a].def),this.list[a].val=this.list[a].val&&this.list[a].val.replace?this.list[a].val.replace(/[><]/g,""):this.list[a].val,this.list[a].testfor&&!this.list[a].testfor.test(this.list[a].val)&&(this.list[a].val=this.list[a].def),this.list[a].img&&!/\.(jpg|jpeg|png|gif|webp|ico)/.test(this.list[a].val)&&(this.list[a].val=this.list[a].def),this.list[a].type&&this.list[a].color&&!s.isHexColor(this.list[a].val)&&(this.list[a].val=this.list[a].def),(this.list[a].str||this.list[a].img)&&this.list[a].val&&this.list[a].val.replace&&(this.list[a].val=this.list[a].val.replace(/\u0027/g,"").replace(/\u0022/g,"")),(this.list[a].min||this.list[a].max)&&(this.list[a].val=Math.min(this.list[a].max,Math.max(this.list[a].min,+this.list[a].val))),"switch"==this.list[a].type&&(this.list[a].val=!!this.list[a].val),this.list[a].set(this.list[a].val,!0)}},this.set=function(e,t,i,n,a){m.list[e]&&("false"==(t=(t=null===t?m.list[e].val:t)&&t.replace?t.replace(/[><]/g,""):t)&&(t=!1),"true"==t&&(t=!0),"undefined"==t&&(t=m.list[e].def),n&&m.list[e].testfor&&!m.list[e].testfor.test(t)&&(t=m.list[e].def),m.list[e].img&&!/\.(jpg|jpeg|png|gif|webp|ico)/.test(t)&&(t=m.list[e].def),m.list[e].type&&m.list[e].color&&!s.isHexColor(t)&&(t=m.list[e].def),(m.list[e].str||m.list[e].img)&&t&&t.replace&&(t=t.replace(/\u0027/g,"").replace(/\u0022/g,"")),(m.list[e].min||m.list[e].max)&&(t=Math.min(m.list[e].max,Math.max(m.list[e].min,+t))),"switch"==this.list[e].type&&(t=!!t),document.getElementById("slid_"+e)&&(document.getElementById("slid_"+e).value=t),document.getElementById("slid_input_"+e)&&(document.getElementById("slid_input_"+e).value=t),a||(m.list[e].val=t),m.list[e].set(t),a||saveVal("kro_setngss_"+e,t),i||selectSettingPre(2,!0))},this.export=function(e){var t={},n=i.export();for(var s in m.list)m.list[s].val!=m.list[s].def&&(t[s]=m.list[s].val);Object.keys(n).length&&(t.controls=n);var a=window.customizeExport();return Object.keys(a).length&&(t.customize=a),e?JSON.stringify(t):void downloadFile("settings.txt",t)},this.import=function(e){var t=e||prompt("Copy Paste Settings Text Here");if(t&&""!=t)try{let h=JSON.parse(t);for(var n in m.list){var s=null==h[n]?m.list[n].def:h[n];setSetting(n,s,null,!0)}if(h.controls)for(var a in h.controls){var r=a.includes("_alt");if(a.startsWith("moveKeys")||a.startsWith("streakKeys")||a.startsWith("tauntKeys")||a.startsWith("toggleKeys")||a.startsWith("premiumKeys")||a.startsWith("messageKeys"))for(var o,l=0;l<h.controls[a].length;l++)o=a.replace("Keys","").replace("_alt",""),i.binds[o]&&i.binds[o][l]&&(null==h.controls[a][l]&&(h.controls[a][l]=i.binds[o][l][r?"altVal":"val"]),i.updateBind(o,r,l,h.controls[a][l],!0));else if("toggleSets"==a){if(!Array.isArray(h.controls[a]))continue;for(l=0;l<i[a].length;l++)i[a][l]=m.list[h.controls[a][l]]?h.controls[a][l]:""}else if("chatMessages"==a){if(!Array.isArray(h.controls[a]))continue;for(l=0;l<i[a].length;l++)i[a][l]=window.filterCM(h.controls[a][l]||"")||""}else{var c=i.getBindByName(a);c&&c.update(h.controls[a],r)}}if(h.customize){var d=h.customize;d.loadouts&&window.windows[2].import(d.loadouts),d.reticles&&window.setCustomRets(d.reticles,!0),d.scopes&&window.setCustomScopes(d.scopes,!0),d.images&&window.setCustomImages(d.images,!0),d.favorites&&window.updateFavList(d.favorites,!0)}i.checkScroll(),e||showWindow(1)}catch(e){alert("Failed to import settings with error:\n"+e.toString())}}}},function(e,t){e.exports=[{name:"Default",id:0},{name:"Pro",id:1},{name:"OG",id:2},{name:"Waspy",id:4},{name:"MoonJuice",id:5},{name:"Swixie",id:6},{name:"Sorable",id:7}]},function(e,t,i){const n=i(356),s=i(357),a=i(375),r=i(376);function o(e,t,i,a,r){const o=[].slice.call(arguments,1),l=o.length,c="function"==typeof o[l-1];if(!c&&!n())throw new Error("Callback required as last argument");if(!c){if(l<1)throw new Error("Too few arguments provided");return 1===l?(i=t,t=a=void 0):2!==l||t.getContext||(a=i,i=t,t=void 0),new Promise((function(n,r){try{const r=s.create(i,a);n(e(r,t,a))}catch(e){r(e)}}))}if(l<2)throw new Error("Too few arguments provided");2===l?(r=i,i=t,t=a=void 0):3===l&&(t.getContext&&void 0===r?(r=a,a=void 0):(r=a,a=i,i=t,t=void 0));try{const n=s.create(i,a);r(null,e(n,t,a))}catch(e){r(e)}}t.create=s.create,t.toCanvas=o.bind(null,a.render),t.toDataURL=o.bind(null,a.renderToDataURL),t.toString=o.bind(null,(function(e,t,i){return r.render(e,i)}))},function(e,t){e.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},function(e,t,i){const n=i(120),s=i(297),a=i(358),r=i(359),o=i(360),l=i(361),c=i(362),d=i(303),h=i(363),u=i(366),p=i(367),f=i(121),m=i(368);function g(e,t,i){const n=e.size,s=p.getEncodedBits(t,i);let a,r;for(a=0;a<15;a++)r=1==(s>>a&1),a<6?e.set(a,8,r,!0):a<8?e.set(a+1,8,r,!0):e.set(n-15+a,8,r,!0),a<8?e.set(8,n-a-1,r,!0):a<9?e.set(8,15-a-1+1,r,!0):e.set(8,15-a-1,r,!0);e.set(n-8,8,1,!0)}function v(e,t,i){const s=new a;i.forEach((function(t){s.put(t.mode.bit,4),s.put(t.getLength(),f.getCharCountIndicator(t.mode,e)),t.write(s)}));const r=8*(n.getSymbolTotalCodewords(e)-d.getTotalCodewordsCount(e,t));for(s.getLengthInBits()+4<=r&&s.put(0,4);s.getLengthInBits()%8!=0;)s.putBit(0);const o=(r-s.getLengthInBits())/8;for(let e=0;e<o;e++)s.put(e%2?17:236,8);return function(e,t,i){const s=n.getSymbolTotalCodewords(t),a=d.getTotalCodewordsCount(t,i),r=d.getBlocksCount(t,i),o=Math.floor(s/r),l=Math.floor((s-a)/r),c=o-l,u=new h(c);let p=0;const f=Array(r),m=Array(r);let g=0;const v=new Uint8Array(e.buffer);for(let e=0;e<r;e++){const t=e<r-s%r?l:l+1;f[e]=v.slice(p,p+t),m[e]=u.encode(f[e]),p+=t,g=Math.max(g,t)}const y=new Uint8Array(s);let b,w,x=0;for(b=0;b<g;b++)for(w=0;w<r;w++)b<f[w].length&&(y[x++]=f[w][b]);for(b=0;b<c;b++)for(w=0;w<r;w++)y[x++]=m[w][b];return y}(s,e,t)}function y(e,t,i,s){let a;if(Array.isArray(e))a=m.fromArray(e);else{if("string"!=typeof e)throw new Error("Invalid data");{let n=t;if(!n){const t=m.rawSplit(e);n=u.getBestVersionForData(t,i)}a=m.fromString(e,n||40)}}const d=u.getBestVersionForData(a,i);if(!d)throw new Error("The amount of data is too big to be stored in a QR Code");if(t){if(t<d)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+d+".\n")}else t=d;const h=v(t,i,a),p=n.getSymbolSize(t),f=new r(p);return function(e,t){const i=e.size,n=l.getPositions(t);for(let t=0;t<n.length;t++){const s=n[t][0],a=n[t][1];for(let t=-1;t<=7;t++)if(s+t>-1&&i>s+t)for(let n=-1;n<=7;n++)a+n>-1&&i>a+n&&(t>=0&&t<=6&&(0===n||6===n)||n>=0&&n<=6&&(0===t||6===t)||t>=2&&t<=4&&n>=2&&n<=4?e.set(s+t,a+n,!0,!0):e.set(s+t,a+n,!1,!0))}}(f,t),function(e){const t=e.size;for(let i=8;i<t-8;i++){const t=i%2==0;e.set(i,6,t,!0),e.set(6,i,t,!0)}}(f),function(e,t){const i=o.getPositions(t);for(let t=0;t<i.length;t++){const n=i[t][0],s=i[t][1];for(let t=-2;t<=2;t++)for(let i=-2;i<=2;i++)-2===t||2===t||-2===i||2===i||0===t&&0===i?e.set(n+t,s+i,!0,!0):e.set(n+t,s+i,!1,!0)}}(f,t),g(f,i,0),t>=7&&function(e,t){const i=e.size,n=u.getEncodedBits(t);let s,a,r;for(let t=0;t<18;t++)s=Math.floor(t/3),a=t%3+i-8-3,r=1==(n>>t&1),e.set(s,a,r,!0),e.set(a,s,r,!0)}(f,t),function(e,t){const i=e.size;let n=-1,s=i-1,a=7,r=0;for(let o=i-1;o>0;o-=2)for(6==o&&o--;;){for(let i=0;i<2;i++)if(!e.isReserved(s,o-i)){let n=!1;r<t.length&&(n=1==(t[r]>>>a&1)),e.set(s,o-i,n),a--,-1===a&&(r++,a=7)}if(s+=n,s<0||i<=s){s-=n,n=-n;break}}}(f,h),isNaN(s)&&(s=c.getBestMask(f,g.bind(null,f,i))),c.applyMask(s,f),g(f,i,s),{modules:f,version:t,errorCorrectionLevel:i,maskPattern:s,segments:a}}t.create=function(e,t){if(void 0===e||""===e)throw new Error("No input text");let i,a,r=s.M;return void 0!==t&&(r=s.from(t.errorCorrectionLevel,s.M),i=u.from(t.version),a=c.from(t.maskPattern),t.toSJISFunc&&n.setToSJISFunction(t.toSJISFunc)),y(e,i,r,a)}},function(e,t){function i(){this.buffer=[],this.length=0}i.prototype={get:function(e){const t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(let i=0;i<t;i++)this.putBit(1==(e>>>t-i-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},e.exports=i},function(e,t){function i(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}i.prototype.set=function(e,t,i,n){const s=e*this.size+t;this.data[s]=i,n&&(this.reservedBit[s]=!0)},i.prototype.get=function(e,t){return this.data[e*this.size+t]},i.prototype.xor=function(e,t,i){this.data[e*this.size+t]^=i},i.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},e.exports=i},function(e,t,i){const n=i(120).getSymbolSize;t.getRowColCoords=function(e){if(1===e)return[];const t=Math.floor(e/7)+2,i=n(e),s=145===i?26:2*Math.ceil((i-13)/(2*t-2)),a=[i-7];for(let e=1;e<t-1;e++)a[e]=a[e-1]-s;return a.push(6),a.reverse()},t.getPositions=function(e){const i=[],n=t.getRowColCoords(e),s=n.length;for(let e=0;e<s;e++)for(let t=0;t<s;t++)0===e&&0===t||0===e&&t===s-1||e===s-1&&0===t||i.push([n[e],n[t]]);return i}},function(e,t,i){const n=i(120).getSymbolSize;t.getPositions=function(e){const t=n(e);return[[0,0],[t-7,0],[0,t-7]]}},function(e,t){function i(e,i,n){switch(e){case t.Patterns.PATTERN000:return(i+n)%2==0;case t.Patterns.PATTERN001:return i%2==0;case t.Patterns.PATTERN010:return n%3==0;case t.Patterns.PATTERN011:return(i+n)%3==0;case t.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(n/3))%2==0;case t.Patterns.PATTERN101:return i*n%2+i*n%3==0;case t.Patterns.PATTERN110:return(i*n%2+i*n%3)%2==0;case t.Patterns.PATTERN111:return(i*n%3+(i+n)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}}t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},t.isValid=function(e){return null!=e&&""!==e&&!isNaN(e)&&e>=0&&e<=7},t.from=function(e){return t.isValid(e)?parseInt(e,10):void 0},t.getPenaltyN1=function(e){const t=e.size;let i=0,n=0,s=0,a=null,r=null;for(let o=0;o<t;o++){n=s=0,a=r=null;for(let l,c=0;c<t;c++)l=e.get(o,c),l===a?n++:(n>=5&&(i+=n-5+3),a=l,n=1),l=e.get(c,o),l===r?s++:(s>=5&&(i+=s-5+3),r=l,s=1);n>=5&&(i+=n-5+3),s>=5&&(i+=s-5+3)}return i},t.getPenaltyN2=function(e){const t=e.size;let i=0;for(let n=0;n<t-1;n++)for(let s=0;s<t-1;s++){const t=e.get(n,s)+e.get(n,s+1)+e.get(n+1,s)+e.get(n+1,s+1);4!==t&&0!==t||i++}return 3*i},t.getPenaltyN3=function(e){const t=e.size;let i=0,n=0,s=0;for(let a=0;a<t;a++){n=s=0;for(let r=0;r<t;r++)n=n<<1&2047|e.get(a,r),r>=10&&(1488===n||93===n)&&i++,s=s<<1&2047|e.get(r,a),r>=10&&(1488===s||93===s)&&i++}return 40*i},t.getPenaltyN4=function(e){let t=0;const i=e.data.length;for(let n=0;n<i;n++)t+=e.data[n];return 10*Math.abs(Math.ceil(100*t/i/5)-10)},t.applyMask=function(e,t){const n=t.size;for(let s=0;s<n;s++)for(let a=0;a<n;a++)t.isReserved(a,s)||t.xor(a,s,i(e,a,s))},t.getBestMask=function(e,i){const n=Object.keys(t.Patterns).length;let s=0,a=1/0;for(let r=0;r<n;r++){i(r),t.applyMask(r,e);const n=t.getPenaltyN1(e)+t.getPenaltyN2(e)+t.getPenaltyN3(e)+t.getPenaltyN4(e);t.applyMask(r,e),n<a&&(a=n,s=r)}return s}},function(e,t,i){const n=i(364);function s(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}s.prototype.initialize=function(e){this.degree=e,this.genPoly=n.generateECPolynomial(this.degree)},s.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const t=new Uint8Array(e.length+this.degree);t.set(e);const i=n.mod(t,this.genPoly),s=this.degree-i.length;if(s>0){const e=new Uint8Array(this.degree);return e.set(i,s),e}return i},e.exports=s},function(e,t,i){const n=i(365);t.mul=function(e,t){const i=new Uint8Array(e.length+t.length-1);for(let s=0;s<e.length;s++)for(let a=0;a<t.length;a++)i[s+a]^=n.mul(e[s],t[a]);return i},t.mod=function(e,t){let i=new Uint8Array(e);for(;i.length-t.length>=0;){const e=i[0];for(let s=0;s<t.length;s++)i[s]^=n.mul(t[s],e);let s=0;for(;s<i.length&&0===i[s];)s++;i=i.slice(s)}return i},t.generateECPolynomial=function(e){let i=new Uint8Array([1]);for(let s=0;s<e;s++)i=t.mul(i,new Uint8Array([1,n.exp(s)]));return i}},function(e,t){const i=new Uint8Array(512),n=new Uint8Array(256);!function(){let e=1;for(let t=0;t<255;t++)i[t]=e,n[e]=t,e<<=1,256&e&&(e^=285);for(let e=255;e<512;e++)i[e]=i[e-255]}(),t.log=function(e){if(e<1)throw new Error("log("+e+")");return n[e]},t.exp=function(e){return i[e]},t.mul=function(e,t){return 0===e||0===t?0:i[n[e]+n[t]]}},function(e,t,i){const n=i(120),s=i(303),a=i(297),r=i(121),o=i(304),l=n.getBCHDigit(7973);function c(e,t){return r.getCharCountIndicator(e,t)+4}function d(e,t){let i=0;return e.forEach((function(e){const n=c(e.mode,t);i+=n+e.getBitsLength()})),i}t.from=function(e,t){return o.isValid(e)?parseInt(e,10):t},t.getCapacity=function(e,t,i){if(!o.isValid(e))throw new Error("Invalid QR Code version");void 0===i&&(i=r.BYTE);const a=8*(n.getSymbolTotalCodewords(e)-s.getTotalCodewordsCount(e,t));if(i===r.MIXED)return a;const l=a-c(i,e);switch(i){case r.NUMERIC:return Math.floor(l/10*3);case r.ALPHANUMERIC:return Math.floor(l/11*2);case r.KANJI:return Math.floor(l/13);case r.BYTE:default:return Math.floor(l/8)}},t.getBestVersionForData=function(e,i){let n;const s=a.from(i,a.M);if(Array.isArray(e)){if(e.length>1)return function(e,i){for(let n=1;n<=40;n++)if(d(e,n)<=t.getCapacity(n,i,r.MIXED))return n}(e,s);if(0===e.length)return 1;n=e[0]}else n=e;return function(e,i,n){for(let s=1;s<=40;s++)if(i<=t.getCapacity(s,n,e))return s}(n.mode,n.getLength(),s)},t.getEncodedBits=function(e){if(!o.isValid(e)||e<7)throw new Error("Invalid QR Code version");let t=e<<12;for(;n.getBCHDigit(t)-l>=0;)t^=7973<<n.getBCHDigit(t)-l;return e<<12|t}},function(e,t,i){const n=i(120),s=n.getBCHDigit(1335);t.getEncodedBits=function(e,t){const i=e.bit<<3|t;let a=i<<10;for(;n.getBCHDigit(a)-s>=0;)a^=1335<<n.getBCHDigit(a)-s;return 21522^(i<<10|a)}},function(e,t,i){const n=i(121),s=i(369),a=i(370),r=i(371),o=i(373),l=i(305),c=i(120),d=i(374);function h(e){return unescape(encodeURIComponent(e)).length}function u(e,t,i){const n=[];for(let s;null!==(s=e.exec(i));)n.push({data:s[0],index:s.index,mode:t,length:s[0].length});return n}function p(e){const t=u(l.NUMERIC,n.NUMERIC,e),i=u(l.ALPHANUMERIC,n.ALPHANUMERIC,e);let s,a;c.isKanjiModeEnabled()?(s=u(l.BYTE,n.BYTE,e),a=u(l.KANJI,n.KANJI,e)):(s=u(l.BYTE_KANJI,n.BYTE,e),a=[]);return t.concat(i,s,a).sort((function(e,t){return e.index-t.index})).map((function(e){return{data:e.data,mode:e.mode,length:e.length}}))}function f(e,t){return t===n.NUMERIC?s.getBitsLength(e):t===n.ALPHANUMERIC?a.getBitsLength(e):t===n.KANJI?o.getBitsLength(e):t===n.BYTE?r.getBitsLength(e):void 0}function m(e,t){let i;const l=n.getBestModeForData(e);if(i=n.from(t,l),i!==n.BYTE&&i.bit<l.bit)throw new Error('"'+e+'" cannot be encoded with mode '+n.toString(i)+".\n Suggested mode is: "+n.toString(l));return i!==n.KANJI||c.isKanjiModeEnabled()||(i=n.BYTE),i===n.NUMERIC?new s(e):i===n.ALPHANUMERIC?new a(e):i===n.KANJI?new o(e):i===n.BYTE?new r(e):void 0}t.fromArray=function(e){return e.reduce((function(e,t){return"string"==typeof t?e.push(m(t,null)):t.data&&e.push(m(t.data,t.mode)),e}),[])},t.fromString=function(e,i){const s=function(e,t){const i={},s={start:{}};let a=["start"];for(let r=0;r<e.length;r++){const o=e[r],l=[];for(let e=0;e<o.length;e++){const c=o[e],d=""+r+e;l.push(d),i[d]={node:c,lastCount:0},s[d]={};for(let e=0;e<a.length;e++){const r=a[e];i[r]&&i[r].node.mode===c.mode?(s[r][d]=f(i[r].lastCount+c.length,c.mode)-f(i[r].lastCount,c.mode),i[r].lastCount+=c.length):(i[r]&&(i[r].lastCount=c.length),s[r][d]=f(c.length,c.mode)+4+n.getCharCountIndicator(c.mode,t))}}a=l}for(let e=0;e<a.length;e++)s[a[e]].end=0;return{map:s,table:i}}(function(e){const t=[];for(let i=0;i<e.length;i++){const s=e[i];switch(s.mode){case n.NUMERIC:t.push([s,{data:s.data,mode:n.ALPHANUMERIC,length:s.length},{data:s.data,mode:n.BYTE,length:s.length}]);break;case n.ALPHANUMERIC:t.push([s,{data:s.data,mode:n.BYTE,length:s.length}]);break;case n.KANJI:t.push([s,{data:s.data,mode:n.BYTE,length:h(s.data)}]);break;case n.BYTE:t.push([{data:s.data,mode:n.BYTE,length:h(s.data)}])}}return t}(p(e,c.isKanjiModeEnabled())),i),a=d.find_path(s.map,"start","end"),r=[];for(let e=1;e<a.length-1;e++)r.push(s.table[a[e]].node);return t.fromArray(r.reduce((function(e,t){const i=e.length-1>=0?e[e.length-1]:null;return i&&i.mode===t.mode?(e[e.length-1].data+=t.data,e):(e.push(t),e)}),[]))},t.rawSplit=function(e){return t.fromArray(p(e,c.isKanjiModeEnabled()))}},function(e,t,i){const n=i(121);function s(e){this.mode=n.NUMERIC,this.data=e.toString()}s.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(e){let t,i,n;for(t=0;t+3<=this.data.length;t+=3)i=this.data.substr(t,3),n=parseInt(i,10),e.put(n,10);const s=this.data.length-t;s>0&&(i=this.data.substr(t),n=parseInt(i,10),e.put(n,3*s+1))},e.exports=s},function(e,t,i){const n=i(121),s=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function a(e){this.mode=n.ALPHANUMERIC,this.data=e}a.getBitsLength=function(e){return 11*Math.floor(e/2)+e%2*6},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let i=45*s.indexOf(this.data[t]);i+=s.indexOf(this.data[t+1]),e.put(i,11)}this.data.length%2&&e.put(s.indexOf(this.data[t]),6)},e.exports=a},function(e,t,i){const n=i(372),s=i(121);function a(e){this.mode=s.BYTE,"string"==typeof e&&(e=n(e)),this.data=new Uint8Array(e)}a.getBitsLength=function(e){return 8*e},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(e){for(let t=0,i=this.data.length;t<i;t++)e.put(this.data[t],8)},e.exports=a},function(e,t,i){"use strict";e.exports=function(e){for(var t,i=[],n=e.length,s=0;s<n;s++){if((t=e.charCodeAt(s))>=55296&&t<=56319&&n>s+1){var a=e.charCodeAt(s+1);a>=56320&&a<=57343&&(t=1024*(t-55296)+a-56320+65536,s+=1)}t<128?i.push(t):t<2048?(i.push(t>>6|192),i.push(63&t|128)):t<55296||t>=57344&&t<65536?(i.push(t>>12|224),i.push(t>>6&63|128),i.push(63&t|128)):t>=65536&&t<=1114111?(i.push(t>>18|240),i.push(t>>12&63|128),i.push(t>>6&63|128),i.push(63&t|128)):i.push(239,191,189)}return new Uint8Array(i).buffer}},function(e,t,i){const n=i(121),s=i(120);function a(e){this.mode=n.KANJI,this.data=e}a.getBitsLength=function(e){return 13*e},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let i=s.toSJIS(this.data[t]);if(i>=33088&&i<=40956)i-=33088;else{if(!(i>=57408&&i<=60351))throw new Error("Invalid SJIS character: "+this.data[t]+"\nMake sure your charset is UTF-8");i-=49472}i=192*(i>>>8&255)+(255&i),e.put(i,13)}},e.exports=a},function(e,t,i){"use strict";var n={single_source_shortest_paths:function(e,t,i){var s,a,r,o,l,c,d,h={},u={[t]:0},p=n.PriorityQueue.make();for(p.push(t,0);!p.empty();)for(r in a=(s=p.pop()).value,o=s.cost,l=e[a]||{})l.hasOwnProperty(r)&&(c=o+l[r],d=u[r],(void 0===u[r]||d>c)&&(u[r]=c,p.push(r,c),h[r]=a));if(void 0!==i&&void 0===u[i]){var f=["Could not find a path from ",t," to ",i,"."].join("");throw new Error(f)}return h},extract_shortest_path_from_predecessor_list:function(e,t){for(var i=[],n=t;n;)i.push(n),e[n],n=e[n];return i.reverse(),i},find_path:function(e,t,i){var s=n.single_source_shortest_paths(e,t,i);return n.extract_shortest_path_from_predecessor_list(s,i)},PriorityQueue:{make:function(e){var t,i=n.PriorityQueue,s={};for(t in e=e||{},i)i.hasOwnProperty(t)&&(s[t]=i[t]);return s.queue=[],s.sorter=e.sorter||i.default_sorter,s},default_sorter:function(e,t){return e.cost-t.cost},push:function(e,t){this.queue.push({value:e,cost:t}),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};e.exports=n},function(e,t,i){const n=i(306);t.render=function(e,t,i){let s=i,a=t;void 0!==s||t&&t.getContext||(s=t,t=void 0),t||(a=function(){try{return document.createElement("canvas")}catch(e){throw new Error("You need to specify a canvas element")}}()),s=n.getOptions(s);const r=n.getImageWidth(e.modules.size,s),o=a.getContext("2d"),l=o.createImageData(r,r);var c,d;return n.qrToImageData(l.data,e,s),c=a,d=r,o.clearRect(0,0,c.width,c.height),c.style||={},c.height=d,c.width=d,c.style.height=d+"px",c.style.width=d+"px",o.putImageData(l,0,0),a},t.renderToDataURL=function(e,i,n){let s=n;void 0!==s||i&&i.getContext||(s=i,i=void 0),s||={};const a=t.render(e,i,s),r=s.type||"image/png",o=s.rendererOpts||{};return a.toDataURL(r,o.quality)}},function(e,t,i){const n=i(306);function s(e,t){const i=e.a/255,n=t+'="'+e.hex+'"';return i<1?n+" "+t+'-opacity="'+i.toFixed(2).slice(1)+'"':n}function a(e,t,i){let n=e+t;return void 0!==i&&(n+=" "+i),n}t.render=function(e,t,i){const r=n.getOptions(t),o=e.modules.size,l=e.modules.data,c=o+2*r.margin,d=r.color.light.a?"<path "+s(r.color.light,"fill")+' d="M0 0h'+c+"v"+c+'H0z"/>':"",h="<path "+s(r.color.dark,"stroke")+' d="'+function(e,t,i){let n="",s=0,r=!1,o=0;for(let l=0;l<e.length;l++){const c=Math.floor(l%t),d=Math.floor(l/t);c||r||(r=!0),e[l]?(o++,(l<=0||c<=0||!e[l-1])&&(n+=r?a("M",c+i,.5+d+i):a("m",s,0),s=0,r=!1),(c+1>=t||!e[l+1])&&(n+=a("h",o),o=0)):s++}return n}(l,o,r.margin)+'"/>',u='<svg xmlns="http://www.w3.org/2000/svg" '+(r.width?'width="'+r.width+'" height="'+r.width+'" ':"")+'viewBox="0 0 '+c+" "+c+'" shape-rendering="crispEdges">'+d+h+"</svg>\n";return"function"==typeof i&&i(null,u),u}},function(e,t,i){const n=i(378).words,s=i(379).array;e.exports=class{constructor(e={}){Object.assign(this,{list:e.emptyList&&[]||Array.prototype.concat.apply(n,[s,e.list||[]]),exclude:e.exclude||[],splitRegex:e.splitRegex||/\b/,placeHolder:e.placeHolder||"*",regex:e.regex||/[^a-zA-Z0-9|\$|\@]|\^/g,replaceRegex:e.replaceRegex||/\w/g})}isProfane(e){return this.list.filter((t=>{const i=new RegExp("\\b"+t.replace(/(\W)/g,"\\$1")+"\\b","gi");return!this.exclude.includes(t.toLowerCase())&&i.test(e)})).length>0||!1}replaceWord(e){return e.replace(this.regex,"").replace(this.replaceRegex,this.placeHolder)}clean(e){return e.split(this.splitRegex).map((e=>this.isProfane(e)?this.replaceWord(e):e)).join(this.splitRegex.exec(e)[0])}addWords(){let e=Array.from(arguments);this.list.push(...e),e.map((e=>e.toLowerCase())).forEach((e=>{this.exclude.includes(e)&&this.exclude.splice(this.exclude.indexOf(e),1)}))}removeWords(){this.exclude.push(...Array.from(arguments).map((e=>e.toLowerCase())))}}},function(e){e.exports={words:["ahole","anus","ash0le","ash0les","asholes","ass","Ass Monkey","Assface","assh0le","assh0lez","asshole","assholes","assholz","asswipe","azzhole","bassterds","bastard","bastards","bastardz","basterds","basterdz","Biatch","bitch","bitches","Blow Job","boffing","butthole","buttwipe","c0ck","c0cks","c0k","Carpet Muncher","cawk","cawks","Clit","cnts","cntz","cock","cockhead","cock-head","cocks","CockSucker","cock-sucker","crap","cum","cunt","cunts","cuntz","dick","dild0","dild0s","dildo","dildos","dilld0","dilld0s","dominatricks","dominatrics","dominatrix","dyke","enema","f u c k","f u c k e r","fag","fag1t","faget","fagg1t","faggit","faggot","fagg0t","fagit","fags","fagz","faig","faigs","fart","flipping the bird","fuck","fucker","fuckin","fucking","fucks","Fudge Packer","fuk","Fukah","Fuken","fuker","Fukin","Fukk","Fukkah","Fukken","Fukker","Fukkin","g00k","God-damned","h00r","h0ar","h0re","hells","hoar","hoor","hoore","jackoff","jap","japs","jerk-off","jisim","jiss","jizm","jizz","knob","knobs","knobz","kunt","kunts","kuntz","Lezzian","Lipshits","Lipshitz","masochist","masokist","massterbait","masstrbait","masstrbate","masterbaiter","masterbate","masterbates","Motha Fucker","Motha Fuker","Motha Fukkah","Motha Fukker","Mother Fucker","Mother Fukah","Mother Fuker","Mother Fukkah","Mother Fukker","mother-fucker","Mutha Fucker","Mutha Fukah","Mutha Fuker","Mutha Fukkah","Mutha Fukker","n1gr","nastt","nigger;","nigur;","niiger;","niigr;","orafis","orgasim;","orgasm","orgasum","oriface","orifice","orifiss","packi","packie","packy","paki","pakie","paky","pecker","peeenus","peeenusss","peenus","peinus","pen1s","penas","penis","penis-breath","penus","penuus","Phuc","Phuck","Phuk","Phuker","Phukker","polac","polack","polak","Poonani","pr1c","pr1ck","pr1k","pusse","pussee","pussy","puuke","puuker","qweir","recktum","rectum","retard","sadist","scank","schlong","screwing","semen","sex","sexy","Sh!t","sh1t","sh1ter","sh1ts","sh1tter","sh1tz","shit","shits","shitter","Shitty","Shity","shitz","Shyt","Shyte","Shytty","Shyty","skanck","skank","skankee","skankey","skanks","Skanky","slag","slut","sluts","Slutty","slutz","son-of-a-bitch","tit","turd","va1jina","vag1na","vagiina","vagina","vaj1na","vajina","vullva","vulva","w0p","wh00r","wh0re","whore","xrated","xxx","b!+ch","bitch","blowjob","clit","arschloch","fuck","shit","ass","asshole","b!tch","b17ch","b1tch","bastard","bi+ch","boiolas","buceta","c0ck","cawk","chink","cipa","clits","cock","cum","cunt","dildo","dirsa","ejakulate","fatass","fcuk","fuk","fux0r","hoer","hore","jism","kawk","l3itch","l3i+ch","masturbate","masterbat*","masterbat3","motherfucker","s.o.b.","mofo","nazi","nigga","nigger","nutsack","phuck","pimpis","pusse","pussy","scrotum","sh!t","shemale","shi+","sh!+","slut","smut","teets","tits","boobs","b00bs","teez","testical","testicle","titt","w00se","jackoff","wank","whoar","whore","*damn","*dyke","*fuck*","*shit*","@$$","amcik","andskota","arse*","assrammer","ayir","bi7ch","bitch*","bollock*","breasts","butt-pirate","cabron","cazzo","chraa","chuj","Cock*","cunt*","d4mn","daygo","dego","dick*","dike*","dupa","dziwka","ejackulate","Ekrem*","Ekto","enculer","faen","fag*","fanculo","fanny","feces","feg","Felcher","ficken","fitt*","Flikker","foreskin","Fotze","Fu(*","fuk*","futkretzn","gook","guiena","h0r","h4x0r","hell","helvete","hoer*","honkey","Huevon","hui","injun","jizz","kanker*","kike","klootzak","kraut","knulle","kuk","kuksuger","Kurac","kurwa","kusi*","kyrpa*","lesbo","mamhoon","masturbat*","merd*","mibun","monkleigh","mouliewop","muie","mulkku","muschi","nazis","nepesaurio","nigger*","orospu","paska*","perse","picka","pierdol*","pillu*","pimmel","piss*","pizda","poontsee","poop","porn","p0rn","pr0n","preteen","pula","pule","puta","puto","qahbeh","queef*","rautenberg","schaffer","scheiss*","schlampe","schmuck","screw","sh!t*","sharmuta","sharmute","shipal","shiz","skribz","skurwysyn","sphencter","spic","spierdalaj","splooge","suka","b00b*","testicle*","titt*","twat","vittu","wank*","wetback*","wichser","wop*","yed","zabourah"]}},function(e,t,i){e.exports={object:i(380),array:i(381),regex:i(382)}},function(e,t){e.exports={"4r5e":1,"5h1t":1,"5hit":1,a55:1,anal:1,anus:1,ar5e:1,arrse:1,arse:1,ass:1,"ass-fucker":1,asses:1,assfucker:1,assfukka:1,asshole:1,assholes:1,asswhole:1,a_s_s:1,"b!tch":1,b00bs:1,b17ch:1,b1tch:1,ballbag:1,balls:1,ballsack:1,bastard:1,beastial:1,beastiality:1,bellend:1,bestial:1,bestiality:1,"bi+ch":1,biatch:1,bitch:1,bitcher:1,bitchers:1,bitches:1,bitchin:1,bitching:1,bloody:1,"blow job":1,blowjob:1,blowjobs:1,boiolas:1,bollock:1,bollok:1,boner:1,boob:1,boobs:1,booobs:1,boooobs:1,booooobs:1,booooooobs:1,breasts:1,buceta:1,bugger:1,bum:1,"bunny fucker":1,butt:1,butthole:1,buttmuch:1,buttplug:1,c0ck:1,c0cksucker:1,"carpet muncher":1,cawk:1,chink:1,cipa:1,cl1t:1,clit:1,clitoris:1,clits:1,cnut:1,cock:1,"cock-sucker":1,cockface:1,cockhead:1,cockmunch:1,cockmuncher:1,cocks:1,cocksuck:1,cocksucked:1,cocksucker:1,cocksucking:1,cocksucks:1,cocksuka:1,cocksukka:1,cok:1,cokmuncher:1,coksucka:1,coon:1,cox:1,crap:1,cum:1,cummer:1,cumming:1,cums:1,cumshot:1,cunilingus:1,cunillingus:1,cunnilingus:1,cunt:1,cuntlick:1,cuntlicker:1,cuntlicking:1,cunts:1,cyalis:1,cyberfuc:1,cyberfuck:1,cyberfucked:1,cyberfucker:1,cyberfuckers:1,cyberfucking:1,d1ck:1,damn:1,dick:1,dickhead:1,dildo:1,dildos:1,dink:1,dinks:1,dirsa:1,dlck:1,"dog-fucker":1,doggin:1,dogging:1,donkeyribber:1,doosh:1,duche:1,dyke:1,ejaculate:1,ejaculated:1,ejaculates:1,ejaculating:1,ejaculatings:1,ejaculation:1,ejakulate:1,"f u c k":1,"f u c k e r":1,f4nny:1,fag:1,fagging:1,faggitt:1,faggot:1,faggs:1,fagot:1,fagots:1,fags:1,fanny:1,fannyflaps:1,fannyfucker:1,fanyy:1,fatass:1,fcuk:1,fcuker:1,fcuking:1,feck:1,fecker:1,felching:1,fellate:1,fellatio:1,fingerfuck:1,fingerfucked:1,fingerfucker:1,fingerfuckers:1,fingerfucking:1,fingerfucks:1,fistfuck:1,fistfucked:1,fistfucker:1,fistfuckers:1,fistfucking:1,fistfuckings:1,fistfucks:1,flange:1,fook:1,fooker:1,fuck:1,fucka:1,fucked:1,fucker:1,fuckers:1,fuckhead:1,fuckheads:1,fuckin:1,fucking:1,fuckings:1,fuckingshitmotherfucker:1,fuckme:1,fucks:1,fuckwhit:1,fuckwit:1,"fudge packer":1,fudgepacker:1,fuk:1,fuker:1,fukker:1,fukkin:1,fuks:1,fukwhit:1,fukwit:1,fux:1,fux0r:1,f_u_c_k:1,gangbang:1,gangbanged:1,gangbangs:1,gaylord:1,gaysex:1,goatse:1,God:1,"god-dam":1,"god-damned":1,goddamn:1,goddamned:1,hardcoresex:1,hell:1,heshe:1,hoar:1,hoare:1,hoer:1,homo:1,hore:1,horniest:1,horny:1,hotsex:1,"jack-off":1,jackoff:1,jap:1,"jerk-off":1,jism:1,jiz:1,jizm:1,jizz:1,kawk:1,knob:1,knobead:1,knobed:1,knobend:1,knobhead:1,knobjocky:1,knobjokey:1,kock:1,kondum:1,kondums:1,kum:1,kummer:1,kumming:1,kums:1,kunilingus:1,"l3i+ch":1,l3itch:1,labia:1,lust:1,lusting:1,m0f0:1,m0fo:1,m45terbate:1,ma5terb8:1,ma5terbate:1,masochist:1,"master-bate":1,masterb8:1,"masterbat*":1,masterbat3:1,masterbate:1,masterbation:1,masterbations:1,masturbate:1,"mo-fo":1,mof0:1,mofo:1,mothafuck:1,mothafucka:1,mothafuckas:1,mothafuckaz:1,mothafucked:1,mothafucker:1,mothafuckers:1,mothafuckin:1,mothafucking:1,mothafuckings:1,mothafucks:1,"mother fucker":1,motherfuck:1,motherfucked:1,motherfucker:1,motherfuckers:1,motherfuckin:1,motherfucking:1,motherfuckings:1,motherfuckka:1,motherfucks:1,muff:1,mutha:1,muthafecker:1,muthafuckker:1,muther:1,mutherfucker:1,n1gga:1,n1gger:1,nazi:1,nigg3r:1,nigg4h:1,nigga:1,niggah:1,niggas:1,niggaz:1,nigger:1,niggers:1,nob:1,"nob jokey":1,nobhead:1,nobjocky:1,nobjokey:1,numbnuts:1,nutsack:1,orgasim:1,orgasims:1,orgasm:1,orgasms:1,p0rn:1,pawn:1,pecker:1,penis:1,penisfucker:1,phonesex:1,phuck:1,phuk:1,phuked:1,phuking:1,phukked:1,phukking:1,phuks:1,phuq:1,pigfucker:1,pimpis:1,piss:1,pissed:1,pisser:1,pissers:1,pisses:1,pissflaps:1,pissin:1,pissing:1,pissoff:1,poop:1,porn:1,porno:1,pornography:1,pornos:1,prick:1,pricks:1,pron:1,pube:1,pusse:1,pussi:1,pussies:1,pussy:1,pussys:1,rectum:1,retard:1,rimjaw:1,rimming:1,"s hit":1,"s.o.b.":1,sadist:1,schlong:1,screwing:1,scroat:1,scrote:1,scrotum:1,semen:1,sex:1,"sh!+":1,"sh!t":1,sh1t:1,shag:1,shagger:1,shaggin:1,shagging:1,shemale:1,"shi+":1,shit:1,shitdick:1,shite:1,shited:1,shitey:1,shitfuck:1,shitfull:1,shithead:1,shiting:1,shitings:1,shits:1,shitted:1,shitter:1,shitters:1,shitting:1,shittings:1,shitty:1,skank:1,slut:1,sluts:1,smegma:1,smut:1,snatch:1,"son-of-a-bitch":1,spac:1,spunk:1,s_h_i_t:1,t1tt1e5:1,t1tties:1,teets:1,teez:1,testical:1,testicle:1,tit:1,titfuck:1,tits:1,titt:1,tittie5:1,tittiefucker:1,titties:1,tittyfuck:1,tittywank:1,titwank:1,tosser:1,turd:1,tw4t:1,twat:1,twathead:1,twatty:1,twunt:1,twunter:1,v14gra:1,v1gra:1,vagina:1,viagra:1,vulva:1,w00se:1,wang:1,wank:1,wanker:1,wanky:1,whoar:1,whore:1,willies:1,willy:1,xrated:1,xxx:1}},function(e,t){e.exports=["4r5e","5h1t","5hit","a55","anal","anus","ar5e","arrse","arse","ass","ass-fucker","asses","assfucker","assfukka","asshole","assholes","asswhole","a_s_s","b!tch","b00bs","b17ch","b1tch","ballbag","balls","ballsack","bastard","beastial","beastiality","bellend","bestial","bestiality","bi+ch","biatch","bitch","bitcher","bitchers","bitches","bitchin","bitching","bloody","blow job","blowjob","blowjobs","boiolas","bollock","bollok","boner","boob","boobs","booobs","boooobs","booooobs","booooooobs","breasts","buceta","bugger","bum","bunny fucker","butt","butthole","buttmuch","buttplug","c0ck","c0cksucker","carpet muncher","cawk","chink","cipa","cl1t","clit","clitoris","clits","cnut","cock","cock-sucker","cockface","cockhead","cockmunch","cockmuncher","cocks","cocksuck","cocksucked","cocksucker","cocksucking","cocksucks","cocksuka","cocksukka","cok","cokmuncher","coksucka","coon","cox","crap","cum","cummer","cumming","cums","cumshot","cunilingus","cunillingus","cunnilingus","cunt","cuntlick","cuntlicker","cuntlicking","cunts","cyalis","cyberfuc","cyberfuck","cyberfucked","cyberfucker","cyberfuckers","cyberfucking","d1ck","damn","dick","dickhead","dildo","dildos","dink","dinks","dirsa","dlck","dog-fucker","doggin","dogging","donkeyribber","doosh","duche","dyke","ejaculate","ejaculated","ejaculates","ejaculating","ejaculatings","ejaculation","ejakulate","f u c k","f u c k e r","f4nny","fag","fagging","faggitt","faggot","faggs","fagot","fagots","fags","fanny","fannyflaps","fannyfucker","fanyy","fatass","fcuk","fcuker","fcuking","feck","fecker","felching","fellate","fellatio","fingerfuck","fingerfucked","fingerfucker","fingerfuckers","fingerfucking","fingerfucks","fistfuck","fistfucked","fistfucker","fistfuckers","fistfucking","fistfuckings","fistfucks","flange","fook","fooker","fuck","fucka","fucked","fucker","fuckers","fuckhead","fuckheads","fuckin","fucking","fuckings","fuckingshitmotherfucker","fuckme","fucks","fuckwhit","fuckwit","fudge packer","fudgepacker","fuk","fuker","fukker","fukkin","fuks","fukwhit","fukwit","fux","fux0r","f_u_c_k","gangbang","gangbanged","gangbangs","gaylord","gaysex","goatse","God","god-dam","god-damned","goddamn","goddamned","hardcoresex","hell","heshe","hoar","hoare","hoer","homo","hore","horniest","horny","hotsex","jack-off","jackoff","jap","jerk-off","jism","jiz","jizm","jizz","kawk","knob","knobead","knobed","knobend","knobhead","knobjocky","knobjokey","kock","kondum","kondums","kum","kummer","kumming","kums","kunilingus","l3i+ch","l3itch","labia","lust","lusting","m0f0","m0fo","m45terbate","ma5terb8","ma5terbate","masochist","master-bate","masterb8","masterbat*","masterbat3","masterbate","masterbation","masterbations","masturbate","mo-fo","mof0","mofo","mothafuck","mothafucka","mothafuckas","mothafuckaz","mothafucked","mothafucker","mothafuckers","mothafuckin","mothafucking","mothafuckings","mothafucks","mother fucker","motherfuck","motherfucked","motherfucker","motherfuckers","motherfuckin","motherfucking","motherfuckings","motherfuckka","motherfucks","muff","mutha","muthafecker","muthafuckker","muther","mutherfucker","n1gga","n1gger","nazi","nigg3r","nigg4h","nigga","niggah","niggas","niggaz","nigger","niggers","nob","nob jokey","nobhead","nobjocky","nobjokey","numbnuts","nutsack","orgasim","orgasims","orgasm","orgasms","p0rn","pawn","pecker","penis","penisfucker","phonesex","phuck","phuk","phuked","phuking","phukked","phukking","phuks","phuq","pigfucker","pimpis","piss","pissed","pisser","pissers","pisses","pissflaps","pissin","pissing","pissoff","poop","porn","porno","pornography","pornos","prick","pricks","pron","pube","pusse","pussi","pussies","pussy","pussys","rectum","retard","rimjaw","rimming","s hit","s.o.b.","sadist","schlong","screwing","scroat","scrote","scrotum","semen","sex","sh!+","sh!t","sh1t","shag","shagger","shaggin","shagging","shemale","shi+","shit","shitdick","shite","shited","shitey","shitfuck","shitfull","shithead","shiting","shitings","shits","shitted","shitter","shitters","shitting","shittings","shitty","skank","slut","sluts","smegma","smut","snatch","son-of-a-bitch","spac","spunk","s_h_i_t","t1tt1e5","t1tties","teets","teez","testical","testicle","tit","titfuck","tits","titt","tittie5","tittiefucker","titties","tittyfuck","tittywank","titwank","tosser","turd","tw4t","twat","twathead","twatty","twunt","twunter","v14gra","v1gra","vagina","viagra","vulva","w00se","wang","wank","wanker","wanky","whoar","whore","willies","willy","xrated","xxx"]},function(e,t){e.exports=/\b(4r5e|5h1t|5hit|a55|anal|anus|ar5e|arrse|arse|ass|ass-fucker|asses|assfucker|assfukka|asshole|assholes|asswhole|a_s_s|b!tch|b00bs|b17ch|b1tch|ballbag|balls|ballsack|bastard|beastial|beastiality|bellend|bestial|bestiality|bi\+ch|biatch|bitch|bitcher|bitchers|bitches|bitchin|bitching|bloody|blow job|blowjob|blowjobs|boiolas|bollock|bollok|boner|boob|boobs|booobs|boooobs|booooobs|booooooobs|breasts|buceta|bugger|bum|bunny fucker|butt|butthole|buttmuch|buttplug|c0ck|c0cksucker|carpet muncher|cawk|chink|cipa|cl1t|clit|clitoris|clits|cnut|cock|cock-sucker|cockface|cockhead|cockmunch|cockmuncher|cocks|cocksuck|cocksucked|cocksucker|cocksucking|cocksucks|cocksuka|cocksukka|cok|cokmuncher|coksucka|coon|cox|crap|cum|cummer|cumming|cums|cumshot|cunilingus|cunillingus|cunnilingus|cunt|cuntlick|cuntlicker|cuntlicking|cunts|cyalis|cyberfuc|cyberfuck|cyberfucked|cyberfucker|cyberfuckers|cyberfucking|d1ck|damn|dick|dickhead|dildo|dildos|dink|dinks|dirsa|dlck|dog-fucker|doggin|dogging|donkeyribber|doosh|duche|dyke|ejaculate|ejaculated|ejaculates|ejaculating|ejaculatings|ejaculation|ejakulate|f u c k|f u c k e r|f4nny|fag|fagging|faggitt|faggot|faggs|fagot|fagots|fags|fanny|fannyflaps|fannyfucker|fanyy|fatass|fcuk|fcuker|fcuking|feck|fecker|felching|fellate|fellatio|fingerfuck|fingerfucked|fingerfucker|fingerfuckers|fingerfucking|fingerfucks|fistfuck|fistfucked|fistfucker|fistfuckers|fistfucking|fistfuckings|fistfucks|flange|fook|fooker|fuck|fucka|fucked|fucker|fuckers|fuckhead|fuckheads|fuckin|fucking|fuckings|fuckingshitmotherfucker|fuckme|fucks|fuckwhit|fuckwit|fudge packer|fudgepacker|fuk|fuker|fukker|fukkin|fuks|fukwhit|fukwit|fux|fux0r|f_u_c_k|gangbang|gangbanged|gangbangs|gaylord|gaysex|goatse|God|god-dam|god-damned|goddamn|goddamned|hardcoresex|hell|heshe|hoar|hoare|hoer|homo|hore|horniest|horny|hotsex|jack-off|jackoff|jap|jerk-off|jism|jiz|jizm|jizz|kawk|knob|knobead|knobed|knobend|knobhead|knobjocky|knobjokey|kock|kondum|kondums|kum|kummer|kumming|kums|kunilingus|l3i\+ch|l3itch|labia|lust|lusting|m0f0|m0fo|m45terbate|ma5terb8|ma5terbate|masochist|master-bate|masterb8|masterbat*|masterbat3|masterbate|masterbation|masterbations|masturbate|mo-fo|mof0|mofo|mothafuck|mothafucka|mothafuckas|mothafuckaz|mothafucked|mothafucker|mothafuckers|mothafuckin|mothafucking|mothafuckings|mothafucks|mother fucker|motherfuck|motherfucked|motherfucker|motherfuckers|motherfuckin|motherfucking|motherfuckings|motherfuckka|motherfucks|muff|mutha|muthafecker|muthafuckker|muther|mutherfucker|n1gga|n1gger|nazi|nigg3r|nigg4h|nigga|niggah|niggas|niggaz|nigger|niggers|nob|nob jokey|nobhead|nobjocky|nobjokey|numbnuts|nutsack|orgasim|orgasims|orgasm|orgasms|p0rn|pawn|pecker|penis|penisfucker|phonesex|phuck|phuk|phuked|phuking|phukked|phukking|phuks|phuq|pigfucker|pimpis|piss|pissed|pisser|pissers|pisses|pissflaps|pissin|pissing|pissoff|poop|porn|porno|pornography|pornos|prick|pricks|pron|pube|pusse|pussi|pussies|pussy|pussys|rectum|retard|rimjaw|rimming|s hit|s.o.b.|sadist|schlong|screwing|scroat|scrote|scrotum|semen|sex|sh!\+|sh!t|sh1t|shag|shagger|shaggin|shagging|shemale|shi\+|shit|shitdick|shite|shited|shitey|shitfuck|shitfull|shithead|shiting|shitings|shits|shitted|shitter|shitters|shitting|shittings|shitty|skank|slut|sluts|smegma|smut|snatch|son-of-a-bitch|spac|spunk|s_h_i_t|t1tt1e5|t1tties|teets|teez|testical|testicle|tit|titfuck|tits|titt|tittie5|tittiefucker|titties|tittyfuck|tittywank|titwank|tosser|turd|tw4t|twat|twathead|twatty|twunt|twunter|v14gra|v1gra|vagina|viagra|vulva|w00se|wang|wank|wanker|wanky|whoar|whore|willies|willy|xrated|xxx)\b/gi},,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){"use strict";i.r(t),i.d(t,"CaptureConsole",(function(){return u})),i.d(t,"Debug",(function(){return p})),i.d(t,"Dedupe",(function(){return f})),i.d(t,"ExtraErrorData",(function(){return x})),i.d(t,"Offline",(function(){return T})),i.d(t,"ReportingObserver",(function(){return P})),i.d(t,"RewriteFrames",(function(){return z})),i.d(t,"SessionTiming",(function(){return B})),i.d(t,"Transaction",(function(){return N})),i.d(t,"HttpClient",(function(){return F}));var n=i(61);const s=["debug","info","warn","error","log","assert","trace"];function a(e){if(!("console"in n.a))return e();const t=n.a.console,i={};s.forEach((e=>{const n=t[e]&&t[e].__sentry_original__;e in t&&n&&(i[e]=t[e],t[e]=n)}));try{return e()}finally{Object.keys(i).forEach((e=>{t[e]=i[e]}))}}function r(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1}};return"undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__?s.forEach((i=>{t[i]=(...t)=>{e&&a((()=>{n.a.console[i]("Sentry Logger ["+i+"]:",...t)}))}})):s.forEach((e=>{t[e]=()=>{}})),t}let o="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__?Object(n.c)("logger",r):r();var l=i(281);const c=["fatal","error","warning","log","info","debug"];function d(e){return"warn"===e?"warning":c.includes(e)?e:"log"}var h=i(124);class u{static __initStatic(){this.id="CaptureConsole"}__init(){this.name=u.id}__init2(){this._levels=s}constructor(e={}){u.prototype.__init.call(this),u.prototype.__init2.call(this),e.levels&&(this._levels=e.levels)}setupOnce(e,t){"console"in n.a&&this._levels.forEach((e=>{e in n.a.console&&Object(l.c)(n.a.console,e,(i=>(...s)=>{const a=t();a.getIntegration(u)&&a.withScope((t=>{t.setLevel(d(e)),t.setExtra("arguments",s),t.addEventProcessor((e=>(e.logger="console",e)));let i=Object(h.a)(s," ");"assert"===e?!1===s[0]&&(i="Assertion failed: "+(Object(h.a)(s.slice(1)," ")||"console.assert"),t.setExtra("arguments",s.slice(1)),a.captureMessage(i)):"error"===e&&s[0]instanceof Error?a.captureException(s[0]):a.captureMessage(i)})),i&&i.apply(n.a.console,s)}))}))}}u.__initStatic();class p{static __initStatic(){this.id="Debug"}__init(){this.name=p.id}constructor(e){p.prototype.__init.call(this),this._options={debugger:!1,stringify:!1,...e}}setupOnce(e,t){e(((e,i)=>{const n=t().getIntegration(p);return n&&(n._options.debugger,a((()=>{n._options.stringify?(console.log(JSON.stringify(e,null,2)),Object.keys(i).length&&console.log(JSON.stringify(i,null,2))):(console.log(e),Object.keys(i).length&&console.log(i))}))),e}))}}p.__initStatic();class f{constructor(){f.prototype.__init.call(this)}static __initStatic(){this.id="Dedupe"}__init(){this.name=f.id}setupOnce(e,t){const i=e=>{if(e.type)return e;const i=t().getIntegration(f);if(i){try{if(n=e,(s=i._previousEvent)&&(function(e,t){const i=e.message,n=t.message;return(!!i||!!n)&&(!i||n)&&(i||!n)&&i===n&&!!g(e,t)&&!!m(e,t)}(n,s)||function(e,t){const i=v(t),n=v(e);return!!(i&&n&&i.type===n.type&&i.value===n.value&&g(e,t)&&m(e,t))}(n,s)))return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(t){return i._previousEvent=e}return i._previousEvent=e}var n,s;return e};i.id=this.name,e(i)}}function m(e,t){let i=y(e),n=y(t);if(!i&&!n)return!0;if(i&&!n||!i&&n)return!1;if(n.length!==i.length)return!1;for(let e=0;e<n.length;e++){const t=n[e],s=i[e];if(t.filename!==s.filename||t.lineno!==s.lineno||t.colno!==s.colno||t.function!==s.function)return!1}return!0}function g(e,t){let i=e.fingerprint,n=t.fingerprint;if(!i&&!n)return!0;if(i&&!n||!i&&n)return!1;try{return i.join("")===n.join("")}catch(e){return!1}}function v(e){return e.exception&&e.exception.values&&e.exception.values[0]}function y(e){const t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch(e){}}f.__initStatic();var b=i(27),w=i(407);class x{static __initStatic(){this.id="ExtraErrorData"}__init(){this.name=x.id}constructor(e){x.prototype.__init.call(this),this._options={depth:3,...e}}setupOnce(e,t){e(((e,i)=>{const n=t().getIntegration(x);return n?n.enhanceEventWithErrorData(e,i):e}))}enhanceEventWithErrorData(e,t={}){if(!t.originalException||!Object(b.b)(t.originalException))return e;const i=t.originalException.name||t.originalException.constructor.name,n=this._extractErrorData(t.originalException);if(n){const t={...e.contexts},s=Object(w.a)(n,this._options.depth);return Object(b.f)(s)&&(Object(l.a)(s,"__sentry_skip_normalization__",!0),t[i]=s),{...e,contexts:t}}return e}_extractErrorData(e){try{const t=["name","message","stack","line","column","fileName","lineNumber","columnNumber","toJSON"],i={};for(const n of Object.keys(e)){if(-1!==t.indexOf(n))continue;const s=e[n];i[n]=Object(b.b)(s)?s.toString():s}if("function"==typeof e.toJSON){const t=e.toJSON();for(const e of Object.keys(t)){const n=t[e];i[e]=Object(b.b)(n)?n.toString():n}}return i}catch(e){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.error("Unable to extract extra data from the Error object:",e)}return null}}function S(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}x.__initStatic();var M=i(310),k=i.n(M);const _=n.a;class T{static __initStatic(){this.id="Offline"}__init(){this.name=T.id}constructor(e={}){T.prototype.__init.call(this),this.maxStoredEvents=e.maxStoredEvents||30,this.offlineEventStore=k.a.createInstance({name:"sentry/offlineEventStore"})}setupOnce(e,t){this.hub=t(),"addEventListener"in _&&_.addEventListener("online",(()=>{this._sendEvents().catch((()=>{("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.warn("could not send cached events")}))}));const i=e=>this.hub&&this.hub.getIntegration(T)&&"navigator"in _&&"onLine"in _.navigator&&!_.navigator.onLine?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.log("Event dropped due to being a offline - caching instead"),this._cacheEvent(e).then((()=>this._enforceMaxEvents())).catch((()=>{("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.warn("could not cache event while offline")})),null):e;i.id=this.name,e(i),"navigator"in _&&"onLine"in _.navigator&&_.navigator.onLine&&this._sendEvents().catch((()=>{("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.warn("could not send cached events")}))}async _cacheEvent(e){return this.offlineEventStore.setItem(function(){const e=n.a,t=e.crypto||e.msCrypto;if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");const i=t&&t.getRandomValues?()=>t.getRandomValues(new Uint8Array(1))[0]:()=>16*Math.random();return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,(e=>(e^(15&i())>>e/4).toString(16)))}(),Object(w.a)(e))}async _enforceMaxEvents(){const e=[];return this.offlineEventStore.iterate(((t,i)=>{e.push({cacheKey:i,event:t})})).then((()=>this._purgeEvents(e.sort(((e,t)=>(t.event.timestamp||0)-(e.event.timestamp||0))).slice(this.maxStoredEvents<e.length?this.maxStoredEvents:e.length).map((e=>e.cacheKey))))).catch((()=>{("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.warn("could not enforce max events")}))}async _purgeEvent(e){return this.offlineEventStore.removeItem(e)}async _purgeEvents(e){return Promise.all(e.map((e=>this._purgeEvent(e)))).then()}async _sendEvents(){return this.offlineEventStore.iterate(((e,t)=>{this.hub?(this.hub.captureEvent(e),this._purgeEvent(t).catch((()=>{("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.warn("could not purge event from cache")}))):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.warn("no hub found - could not send cached event")}))}}T.__initStatic();const C=Object(n.b)();function I(){if(!("fetch"in C))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(e){return!1}}function A(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}const R=n.a;class P{static __initStatic(){this.id="ReportingObserver"}__init(){this.name=P.id}constructor(e={types:["crash","deprecation","intervention"]}){this._options=e,P.prototype.__init.call(this)}setupOnce(e,t){if("ReportingObserver"in C){this._getCurrentHub=t;new R.ReportingObserver(this.handler.bind(this),{buffered:!0,types:this._options.types}).observe()}}handler(e){const t=this._getCurrentHub&&this._getCurrentHub();if(t&&t.getIntegration(P))for(const i of e)t.withScope((e=>{e.setExtra("url",i.url);const n="ReportingObserver ["+i.type+"]";let s="No details available";if(i.body){const t={};for(const e in i.body)t[e]=i.body[e];if(e.setExtra("body",t),"crash"===i.type){const e=i.body;s=[e.crashId||"",e.reason||""].join(" ").trim()||s}else{s=i.body.message||s}}t.captureMessage(n+": "+s)}))}}function E(e,t){let i=0;for(let t=e.length-1;t>=0;t--){const n=e[t];"."===n?e.splice(t,1):".."===n?(e.splice(t,1),i++):i&&(e.splice(t,1),i--)}if(t)for(;i--;i)e.unshift("..");return e}P.__initStatic();const D=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^/]+?|)(\.[^./]*|))(?:[/]*)$/;function O(e){const t=D.exec(e);return t?t.slice(1):[]}function L(...e){let t="",i=!1;for(let n=e.length-1;n>=-1&&!i;n--){const s=n>=0?e[n]:"/";s&&(t=s+"/"+t,i="/"===s.charAt(0))}return t=E(t.split("/").filter((e=>!!e)),!i).join("/"),(i?"/":"")+t||"."}function j(e){let t=0;for(;t<e.length&&""===e[t];t++);let i=e.length-1;for(;i>=0&&""===e[i];i--);return t>i?[]:e.slice(t,i-t+1)}class z{static __initStatic(){this.id="RewriteFrames"}__init(){this.name=z.id}__init2(){this._prefix="app:///"}constructor(e={}){z.prototype.__init.call(this),z.prototype.__init2.call(this),z.prototype.__init3.call(this),e.root&&(this._root=e.root),e.prefix&&(this._prefix=e.prefix),e.iteratee&&(this._iteratee=e.iteratee)}setupOnce(e,t){e((e=>{const i=t().getIntegration(z);return i?i.process(e):e}))}process(e){let t=e;return e.exception&&Array.isArray(e.exception.values)&&(t=this._processExceptionsEvent(t)),t}__init3(){this._iteratee=e=>{if(!e.filename)return e;const t=/^[A-Z]:\\/.test(e.filename),i=/^\//.test(e.filename);if(t||i){const i=t?e.filename.replace(/^[A-Z]:/,"").replace(/\\/g,"/"):e.filename,n=this._root?function(e,t){e=L(e).slice(1),t=L(t).slice(1);const i=j(e.split("/")),n=j(t.split("/")),s=Math.min(i.length,n.length);let a=s;for(let e=0;e<s;e++)if(i[e]!==n[e]){a=e;break}let r=[];for(let e=a;e<i.length;e++)r.push("..");return r=r.concat(n.slice(a)),r.join("/")}(this._root,i):function(e,t){let i=O(e)[2];return t&&i.slice(-1*t.length)===t&&(i=i.slice(0,i.length-t.length)),i}(i);e.filename=""+this._prefix+n}return e}}_processExceptionsEvent(e){try{return{...e,exception:{...e.exception,values:e.exception.values.map((e=>({...e,...e.stacktrace&&{stacktrace:this._processStacktrace(e.stacktrace)}})))}}}catch(t){return e}}_processStacktrace(e){return{...e,frames:e&&e.frames&&e.frames.map((e=>this._iteratee(e)))}}}z.__initStatic();class B{constructor(){B.prototype.__init.call(this),B.prototype.__init2.call(this)}static __initStatic(){this.id="SessionTiming"}__init(){this.name=B.id}__init2(){this._startTime=Date.now()}setupOnce(e,t){e((e=>{const i=t().getIntegration(B);return i?i.process(e):e}))}process(e){const t=Date.now();return{...e,extra:{...e.extra,"session:start":this._startTime,"session:duration":t-this._startTime,"session:end":t}}}}B.__initStatic();class N{constructor(){N.prototype.__init.call(this)}static __initStatic(){this.id="Transaction"}__init(){this.name=N.id}setupOnce(e,t){e((e=>{const i=t().getIntegration(N);return i?i.process(e):e}))}process(e){const t=this._getFramesFromEvent(e);for(let i=t.length-1;i>=0;i--){const n=t[i];if(!0===n.in_app){e.transaction=this._getTransaction(n);break}}return e}_getFramesFromEvent(e){const t=e.exception&&e.exception.values&&e.exception.values[0];return t&&t.stacktrace&&t.stacktrace.frames||[]}_getTransaction(e){return e.module||e.function?(e.module||"?")+"/"+(e.function||"?"):"<unknown>"}}N.__initStatic();class F{static __initStatic(){this.id="HttpClient"}__init(){this.name=F.id}constructor(e){F.prototype.__init.call(this),this._options={failedRequestStatusCodes:[[500,599]],failedRequestTargets:[/.*/],...e}}setupOnce(e,t){this._getCurrentHub=t,this._wrapFetch(),this._wrapXHR()}_fetchResponseHandler(e,t,i){if(this._getCurrentHub&&this._shouldCaptureResponse(t.status,t.url)){const n=new Request(e,i),s=this._getCurrentHub();let a,r,l,c;s.shouldSendDefaultPii()&&([{headers:a,cookies:l},{headers:r,cookies:c}]=[{cookieHeader:"Cookie",obj:n},{cookieHeader:"Set-Cookie",obj:t}].map((({cookieHeader:e,obj:t})=>{const i=this._extractFetchHeaders(t.headers);let n;try{const t=i[e]||i[e.toLowerCase()]||void 0;t&&(n=this._parseCookieString(t))}catch(t){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.log("Could not extract cookies from header "+e)}return{headers:i,cookies:n}})));const d=this._createEvent({url:n.url,method:n.method,status:t.status,requestHeaders:a,responseHeaders:r,requestCookies:l,responseCookies:c});s.captureEvent(d)}}_xhrResponseHandler(e,t,i){if(this._getCurrentHub&&this._shouldCaptureResponse(e.status,e.responseURL)){let n,s,a;const r=this._getCurrentHub();if(r.shouldSendDefaultPii()){try{const t=e.getResponseHeader("Set-Cookie")||e.getResponseHeader("set-cookie")||void 0;t&&(s=this._parseCookieString(t))}catch(e){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.log("Could not extract cookies from response headers")}try{a=this._getXHRResponseHeaders(e)}catch(e){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.log("Could not extract headers from response")}n=i}const l=this._createEvent({url:e.responseURL,method:t,status:e.status,requestHeaders:n,responseHeaders:a,responseCookies:s});r.captureEvent(l)}}_getResponseSizeFromHeaders(e){if(e){const t=e["Content-Length"]||e["content-length"];if(t)return parseInt(t,10)}}_parseCookieString(e){return e.split("; ").reduce(((e,t)=>{const[i,n]=t.split("=");return e[i]=n,e}),{})}_extractFetchHeaders(e){const t={};return e.forEach(((e,i)=>{t[i]=e})),t}_getXHRResponseHeaders(e){const t=e.getAllResponseHeaders();return t?t.split("\r\n").reduce(((e,t)=>{const[i,n]=t.split(": ");return e[i]=n,e}),{}):{}}_isInGivenRequestTargets(e){return!!this._options.failedRequestTargets&&this._options.failedRequestTargets.some((t=>"string"==typeof t?e.includes(t):t.test(e)))}_isInGivenStatusRanges(e){return!!this._options.failedRequestStatusCodes&&this._options.failedRequestStatusCodes.some((t=>"number"==typeof t?t===e:e>=t[0]&&e<=t[1]))}_wrapFetch(){if(!function(){if(!I())return!1;if(A(C.fetch))return!0;let e=!1;const t=C.document;if(t&&"function"==typeof t.createElement)try{const i=t.createElement("iframe");i.hidden=!0,t.head.appendChild(i),i.contentWindow&&i.contentWindow.fetch&&(e=A(i.contentWindow.fetch)),t.head.removeChild(i)}catch(e){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return e}())return;const e=this;Object(l.c)(n.a,"fetch",(function(t){return function(...i){const[n,s]=i,a=t.apply(this,i);return a.then((t=>(e._fetchResponseHandler(n,t,s),t))).catch((e=>{throw e})),a}}))}_wrapXHR(){if(!("XMLHttpRequest"in n.a))return;const e=this;Object(l.c)(XMLHttpRequest.prototype,"open",(function(t){return function(...i){const n=this,s=i[0],a={};return Object(l.c)(n,"setRequestHeader",(function(e){return function(...t){const[i,s]=t;return a[i]=s,e.apply(n,t)}})),Object(l.c)(n,"onloadend",(function(t){return function(...i){try{e._xhrResponseHandler(n,s,a)}catch(e){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.warn("Error while extracting response event form XHR response",e)}if(t)return t.apply(n,i)}})),t.apply(this,i)}}))}_isSentryRequest(e){const t=this._getCurrentHub&&this._getCurrentHub().getClient();if(!t)return!1;const i=t.getDsn();return!!i&&e.includes(i.host)}_shouldCaptureResponse(e,t){return this._isInGivenStatusRanges(e)&&this._isInGivenRequestTargets(t)&&!this._isSentryRequest(t)}_createEvent(e){const t="HTTP Client Error with status code: "+e.status,i={message:t,exception:{values:[{type:"Error",value:t}]},request:{url:e.url,method:e.method,headers:e.requestHeaders,cookies:e.requestCookies},contexts:{response:{status_code:e.status,headers:e.responseHeaders,cookies:e.responseCookies,body_size:this._getResponseSizeFromHeaders(e.responseHeaders)}}};return function(e,t){const i=S(e);if(!i)return;const n=i.mechanism;if(i.mechanism={type:"generic",handled:!0,...n,...t},t&&"data"in t){const e={...n&&n.data,...t.data};i.mechanism.data=e}}(i,{type:"http.client"}),i}}F.__initStatic()},function(e,t,i){"use strict";(function(e){i.d(t,"a",(function(){return o}));var n=i(27),s=i(308),a=i(281),r=i(309);function o(e,t=1/0,i=1/0){try{return l("",e,t,i)}catch(e){return{ERROR:"**non-serializable** ("+e+")"}}}function l(t,i,o=1/0,c=1/0,d=Object(s.a)()){const[h,u]=d;if(null===i||["number","boolean","string"].includes(typeof i)&&!Object(n.e)(i))return i;const p=function(t,i){try{return"domain"===t&&i&&"object"==typeof i&&i._events?"[Domain]":"domainEmitter"===t?"[DomainEmitter]":void 0!==e&&i===e?"[Global]":"undefined"!=typeof window&&i===window?"[Window]":"undefined"!=typeof document&&i===document?"[Document]":Object(n.j)(i)?"[SyntheticEvent]":"number"==typeof i&&i!=i?"[NaN]":void 0===i?"[undefined]":"function"==typeof i?"[Function: "+Object(r.a)(i)+"]":"symbol"==typeof i?"["+i+"]":"bigint"==typeof i?"[BigInt: "+i+"]":"[object "+function(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}(i)+"]"}catch(e){return"**non-serializable** ("+e+")"}}(t,i);if(!p.startsWith("[object "))return p;if(i.__sentry_skip_normalization__)return i;let f=o;if("number"==typeof i.__sentry_override_normalization_depth__&&(f=i.__sentry_override_normalization_depth__),0===f)return p.replace("object ","");if(h(i))return"[Circular ~]";const m=i;if(m&&"function"==typeof m.toJSON)try{return l("",m.toJSON(),f-1,c,d)}catch(e){}const g=Array.isArray(i)?[]:{};let v=0;const y=Object(a.b)(i);for(const e in y){if(!Object.prototype.hasOwnProperty.call(y,e))continue;if(v>=c){g[e]="[MaxProperties ~]";break}const t=y[e];g[e]=l(e,t,f-1,c,d),v++}return u(i),g}}).call(this,i(8))}]);
